(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,386959,e=>{"use strict";var s=e.i(722679),a=e.i(340915),t=e.i(74434),r=e.i(316264),l=e.i(857261),i=e.i(554369),n=e.i(396064),o=e.i(263229),d=e.i(994500);function c({currentAvatarUrl:e,userName:c,onAvatarUpdate:m,compact:x=!1}){let[u,h]=(0,a.useState)(!1),[p,j]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),b=(0,a.useRef)(null),v=e=>e&&e.split(" ").map(e=>e[0]).filter(Boolean).join("").toUpperCase().slice(0,2)||"U",y=e=>{let s=e.target.files?.[0];if(!s)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(s.type))return void d.toast.error("Invalid file type",{description:"Please select a JPEG, PNG, GIF, or WEBP image"});if(s.size>2097152)return void d.toast.error("File too large",{description:"Maximum file size is 2MB"});let a=new FileReader;a.onloadend=()=>{f(a.result)},a.readAsDataURL(s),N(s)},N=async e=>{h(!0);try{let s=new FormData;s.append("avatar",e);let a=await fetch("/api/profiles/avatar",{method:"POST",body:s}),t=await a.json();if(!a.ok)throw Error(t.error||"Failed to upload avatar");d.toast.success("Avatar updated successfully"),m(t.avatar_url),f(null)}catch(e){console.error("Error uploading avatar:",e),d.toast.error("Failed to upload avatar",{description:e.message}),f(null)}finally{h(!1),b.current&&(b.current.value="")}},w=async()=>{if(e){j(!0);try{let e=await fetch("/api/profiles/avatar",{method:"DELETE"}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to delete avatar");d.toast.success("Avatar removed successfully"),m(""),f(null)}catch(e){console.error("Error deleting avatar:",e),d.toast.error("Failed to delete avatar",{description:e.message})}finally{j(!1)}}},C=g||e;return x?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(t.Avatar,{className:"h-16 w-16 border-2 border-background shadow-md",children:[(0,s.jsx)(t.AvatarImage,{src:C||void 0,alt:c}),(0,s.jsx)(t.AvatarFallback,{className:"text-lg",children:v(c)})]}),u&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full",children:(0,s.jsx)(o.Loader2,{className:"h-5 w-5 animate-spin text-primary"})}),(0,s.jsx)("button",{type:"button",onClick:()=>b.current?.click(),disabled:u||p,className:"absolute -bottom-1 -right-1 p-1.5 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-blue-700",children:(0,s.jsx)(l.Camera,{className:"h-3 w-3"})}),(0,s.jsx)("input",{ref:b,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:y,disabled:u||p})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(t.Avatar,{className:"h-32 w-32 border-4 border-background shadow-lg",children:[(0,s.jsx)(t.AvatarImage,{src:C||void 0,alt:c}),(0,s.jsx)(t.AvatarFallback,{className:"text-2xl",children:v(c)})]}),u&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full",children:(0,s.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),(0,s.jsx)("button",{type:"button",onClick:()=>b.current?.click(),disabled:u||p,className:"absolute bottom-0 right-0 p-2 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-blue-700",children:(0,s.jsx)(l.Camera,{className:"h-4 w-4"})})]}),(0,s.jsx)("input",{ref:b,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:y,disabled:u||p}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>b.current?.click(),disabled:u||p,children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Upload,{className:"mr-2 h-4 w-4"}),"Change Photo"]})}),e&&(0,s.jsx)(r.Button,{type:"button",variant:"outline",size:"sm",onClick:w,disabled:u||p,className:"hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Removing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Trash2,{className:"mr-2 h-4 w-4"}),"Remove"]})})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 text-center max-w-xs",children:["Recommended: Square image, at least 200×200px",(0,s.jsx)("br",{}),"Max size: 2MB • Formats: JPEG, PNG, GIF, WEBP"]})]})}var m=e.i(191569),x=e.i(514133),u=e.i(816654),h=e.i(90613),p=e.i(695459);function j({userId:e,initialData:t,onUpdate:l,showStaffFields:i=!1}){let[n,c]=(0,a.useState)(!1),[j,g]=(0,a.useState)({display_name:t.display_name||"",title:t.title||"",phone:t.phone||"",office_location:t.office_location||"",bio:t.bio||""}),f=e=>{let{name:s,value:a}=e.target;g(e=>({...e,[s]:a}))},b=async s=>{s.preventDefault(),c(!0);try{let s=await fetch(`/api/profiles/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to update profile");d.toast.success("Profile updated successfully"),l(a.profile)}catch(e){console.error("Error updating profile:",e),d.toast.error("Failed to update profile",{description:e.message})}finally{c(!1)}},v=JSON.stringify(j)!==JSON.stringify({display_name:t.display_name||"",title:t.title||"",phone:t.phone||"",office_location:t.office_location||"",bio:t.bio||""});return(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{children:[(0,s.jsx)(h.CardTitle,{children:"Profile Information"}),(0,s.jsx)(h.CardDescription,{children:"Update your personal information and profile details"})]}),(0,s.jsx)(h.CardContent,{children:(0,s.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(x.Label,{htmlFor:"display_name",children:["Display Name ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(m.Input,{id:"display_name",name:"display_name",value:j.display_name,onChange:f,required:!0,placeholder:"Enter your display name"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"This is how your name will appear throughout the portal"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"email",children:"Email Address"}),(0,s.jsx)(m.Input,{id:"email",type:"email",value:t.email||"",disabled:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Email cannot be changed here. Contact support to update your email."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"title",children:"Job Title / Position"}),(0,s.jsx)(m.Input,{id:"title",name:"title",value:j.title,onChange:f,placeholder:"e.g., Portfolio Manager, Investment Director"})]}),i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"phone",children:"Phone Number"}),(0,s.jsx)(m.Input,{id:"phone",name:"phone",type:"tel",value:j.phone,onChange:f,placeholder:"+1 (555) 123-4567"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"office_location",children:"Office Location"}),(0,s.jsx)(m.Input,{id:"office_location",name:"office_location",value:j.office_location,onChange:f,placeholder:"e.g., London Office, New York HQ"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"bio",children:"Bio / About"}),(0,s.jsx)(u.Textarea,{id:"bio",name:"bio",value:j.bio,onChange:f,placeholder:"Brief description about yourself, your expertise, and role...",rows:4,className:"resize-none"}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:[j.bio.length,"/500 characters"]})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsx)(r.Button,{type:"submit",disabled:n||!v,className:"w-full sm:w-auto",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving Changes..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]})}),v&&!n&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"You have unsaved changes"})]})]})})]})}var g=e.i(835034),f=e.i(939322),b=e.i(80465),v=e.i(745083),y=e.i(645855),N=e.i(761722),w=e.i(401148),C=e.i(119311),_=e.i(704477),F=e.i(129432),S=e.i(237635),T=e.i(352776),k=e.i(538892),D=e.i(971743),I=e.i(595195),A=e.i(80289);function P({open:e,onOpenChange:t,onUploadSuccess:l,entityId:i=null,category:c="both",members:h=[],memberType:p}){let[j,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),[N,C]=(0,a.useState)(""),[F,S]=(0,a.useState)(""),[P,E]=(0,a.useState)(""),[L,B]=(0,a.useState)(!1),R="entity"===c,U=P&&"entity-level"!==P,M=h.length>0,O=(0,a.useMemo)(()=>R?U?(0,I.getMemberDocumentTypes)():(0,I.getEntityDocumentTypes)():(0,I.getIndividualDocumentTypes)(),[R,U]);(0,a.useEffect)(()=>{b("")},[P]),(0,a.useEffect)(()=>{e&&(g(null),b(""),y(""),C(""),S(""),E(""))},[e]);let z=async e=>{if(e.preventDefault(),!j)return void d.toast.error("Please select a file");if(R&&!P)return void d.toast.error("Please select who this document is for");if(!f)return void d.toast.error("Please select a document type");B(!0);try{let e=new FormData;e.append("file",j),e.append("documentType","custom"===f?v.toLowerCase().replace(/\s+/g,"_"):f),"custom"===f&&v&&e.append("customLabel",v),N&&e.append("expiryDate",N),F&&e.append("notes",F),i&&e.append("entityId",i),U&&p&&("investor"===p?e.append("investorMemberId",P):"counterparty"===p&&e.append("counterpartyMemberId",P));let s=await fetch("/api/investors/me/documents/upload",{method:"POST",body:e}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to upload document");d.toast.success("Document uploaded successfully"),t(!1),l()}catch(e){console.error("Upload error:",e),d.toast.error("Upload failed",{description:e.message})}finally{B(!1)}};return(0,s.jsx)(T.Dialog,{open:e,onOpenChange:t,children:(0,s.jsxs)(T.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(T.DialogHeader,{children:[(0,s.jsx)(T.DialogTitle,{children:"Upload KYC Document"}),(0,s.jsx)(T.DialogDescription,{children:R?"Upload entity documents or member ID documents":"Upload your ID and proof of address"})]}),(0,s.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[R&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-base font-semibold",children:"Step 1: Who is this document for?"}),(0,s.jsxs)(k.Select,{value:P,onValueChange:E,children:[(0,s.jsx)(k.SelectTrigger,{className:P?"":"border-amber-400 bg-amber-50",children:(0,s.jsx)(k.SelectValue,{placeholder:"Select..."})}),(0,s.jsxs)(k.SelectContent,{children:[(0,s.jsx)(k.SelectItem,{value:"entity-level",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(D.Building2,{className:"h-4 w-4 text-blue-600"}),(0,s.jsx)("span",{className:"font-medium",children:"Entity (Company Documents)"})]})}),M&&h.map(e=>(0,s.jsx)(k.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(_.User,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)("span",{children:e.full_name}),(0,s.jsxs)("span",{className:"text-muted-foreground text-xs",children:["(",e.role,")"]})]})},e.id))]})]}),"entity-level"===P&&(0,s.jsx)("p",{className:"text-sm text-blue-600",children:"Entity docs: Incorporation Certificate, Memo & Articles, Registers, Bank Confirmation"}),U&&(0,s.jsx)("p",{className:"text-sm text-green-600",children:"Member docs: Passport/ID, Proof of Address"}),!M&&(0,s.jsxs)(A.Alert,{className:"border-amber-300 bg-amber-50",children:[(0,s.jsx)(w.AlertCircle,{className:"h-4 w-4 text-amber-600"}),(0,s.jsxs)(A.AlertDescription,{className:"text-amber-800",children:[(0,s.jsx)("strong",{children:"No members added yet."})," To upload ID documents for Directors/UBOs, first add them in the ",(0,s.jsx)("span",{className:"font-semibold",children:"Directors/UBOs tab"}),"."]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:R?"text-base font-semibold":"",children:R?"Step 2: Document Type":"Document Type"}),(0,s.jsxs)(k.Select,{value:f,onValueChange:b,disabled:R&&!P,children:[(0,s.jsx)(k.SelectTrigger,{className:R&&!P?"opacity-50":"",children:(0,s.jsx)(k.SelectValue,{placeholder:R&&!P?"First select who...":"Select document type..."})}),(0,s.jsxs)(k.SelectContent,{children:[O.map(e=>(0,s.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value)),(0,s.jsx)(k.SelectItem,{value:"custom",children:"Other (Custom)"})]})]}),f&&"custom"!==f&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:O.find(e=>e.value===f)?.description})]}),"custom"===f&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Custom Document Name"}),(0,s.jsx)(m.Input,{value:v,onChange:e=>y(e.target.value),placeholder:"e.g., Trust Agreement",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"File"}),(0,s.jsx)(m.Input,{type:"file",accept:".pdf,.jpg,.jpeg,.png,.heic,.webp",onChange:e=>{let s=e.target.files?.[0];if(s){if(s.size>0xa00000)return void d.toast.error("File too large",{description:"Maximum file size is 10MB"});if(!["application/pdf","image/jpeg","image/jpg","image/png","image/heic","image/webp"].includes(s.type))return void d.toast.error("Invalid file type",{description:"Only PDF and image files are allowed"});g(s)}},required:!0}),j&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Selected: ",j.name," (",(j.size/1024/1024).toFixed(2)," MB)"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Max 10MB. PDF, JPEG, PNG, HEIC, WEBP accepted."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Expiry Date (Optional)"}),(0,s.jsx)(m.Input,{type:"date",value:N,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Notes (Optional)"}),(0,s.jsx)(u.Textarea,{value:F,onChange:e=>S(e.target.value),placeholder:"Any additional info...",rows:2})]}),(0,s.jsxs)(T.DialogFooter,{children:[(0,s.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:L,children:"Cancel"}),(0,s.jsx)(r.Button,{type:"submit",disabled:L||!j||!f||R&&!P||"custom"===f&&!v.trim(),children:L?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Upload,{className:"mr-2 h-4 w-4"}),"Upload"]})})]})]})]})})}function E(){let[e,t]=(0,a.useState)([]),[l,i]=(0,a.useState)([]),[c,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!0),[p,j]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{T()},[]);let T=async()=>{u(!0);try{let e=await fetch("/api/investors/me/kyc-submissions");if(!e.ok)throw Error("Failed to load KYC submissions");let s=await e.json();t(s.submissions||[]),i(s.investor_members||[]),m(s.is_entity_investor||!1)}catch(e){console.error("Error loading KYC submissions:",e),d.toast.error("Failed to load KYC documents",{description:e.message})}finally{u(!1)}},k=async(e,s)=>{f(e);try{let a=await fetch(`/api/documents/${e}/download`);if(!a.ok)throw Error("Failed to download document");let t=await a.blob(),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download=s,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(r),document.body.removeChild(l),d.toast.success("Download started")}catch(e){console.error("Download error:",e),d.toast.error("Download failed",{description:e.message})}finally{f(null)}},D=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return x?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-gray-400"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.CardTitle,{children:"KYC Documents"}),(0,s.jsx)(h.CardDescription,{children:"Upload your required KYC verification documents"})]}),(0,s.jsxs)(r.Button,{onClick:()=>j(!0),children:[(0,s.jsx)(n.Upload,{className:"mr-2 h-4 w-4"}),"Upload Document"]})]})}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[c?(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50/50",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-blue-900 mb-2",children:"Entity Documents"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,s.jsx)("li",{children:"• Incorporation Certificate"}),(0,s.jsx)("li",{children:"• Memo & Articles"}),(0,s.jsx)("li",{children:"• Register of Directors"}),(0,s.jsx)("li",{children:"• Register of Members/Shareholders"}),(0,s.jsx)("li",{children:"• Register of UBOs"}),(0,s.jsx)("li",{children:"• Bank Confirmation Letter"})]})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-green-50/50",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-green-900 mb-2",children:"For Each Director/UBO"}),(0,s.jsxs)("ul",{className:"text-sm text-green-800 space-y-1",children:[(0,s.jsx)("li",{children:"• Passport / ID"}),(0,s.jsx)("li",{children:"• Proof of Address (less than 3 months)"})]})]})]}):(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-slate-50",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-slate-900 mb-2",children:"Required Documents"}),(0,s.jsxs)("ul",{className:"text-sm text-slate-700 space-y-1",children:[(0,s.jsx)("li",{children:"• Passport / ID"}),(0,s.jsx)("li",{children:"• Proof of Address (utility bill or bank statement, less than 3 months)"})]})]}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,s.jsx)(C.FileText,{className:"h-10 w-10 mx-auto text-gray-400 mb-3"}),(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"No documents uploaded yet"}),(0,s.jsxs)(r.Button,{onClick:()=>j(!0),variant:"outline",size:"sm",children:[(0,s.jsx)(n.Upload,{className:"mr-2 h-4 w-4"}),"Upload Document"]})]}):(0,s.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,s.jsxs)(S.Table,{children:[(0,s.jsx)(S.TableHeader,{children:(0,s.jsxs)(S.TableRow,{children:[(0,s.jsx)(S.TableHead,{children:"Document Type"}),c&&(0,s.jsx)(S.TableHead,{children:"Member"}),(0,s.jsx)(S.TableHead,{children:"Status"}),(0,s.jsx)(S.TableHead,{children:"Uploaded"}),(0,s.jsx)(S.TableHead,{children:"Expiry"}),(0,s.jsx)(S.TableHead,{children:"File"}),(0,s.jsx)(S.TableHead,{children:"Actions"})]})}),(0,s.jsx)(S.TableBody,{children:e.map(e=>{var a;return(0,s.jsxs)(S.TableRow,{children:[(0,s.jsx)(S.TableCell,{children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:(0,I.getDocumentTypeLabel)(e.document_type,e.custom_label)}),e.version>1&&(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Version ",e.version]})]})}),c&&(0,s.jsx)(S.TableCell,{children:e.investor_member?(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(_.User,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:e.investor_member.full_name})]}):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}),(0,s.jsx)(S.TableCell,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(e=>{switch(e){case"approved":return(0,s.jsxs)(F.Badge,{variant:"default",className:"bg-emerald-500/20 text-emerald-700 border-emerald-500/30",children:[(0,s.jsx)(b.CheckCircle,{className:"mr-1 h-3 w-3"}),"Approved"]});case"pending":return(0,s.jsxs)(F.Badge,{variant:"secondary",className:"bg-amber-500/20 text-amber-700 border-amber-500/30",children:[(0,s.jsx)(y.Clock,{className:"mr-1 h-3 w-3"}),"Pending Review"]});case"draft":return(0,s.jsxs)(F.Badge,{variant:"outline",className:"bg-slate-500/10 text-slate-600 border-slate-500/30",children:[(0,s.jsx)(y.Clock,{className:"mr-1 h-3 w-3"}),"Draft (Not Submitted)"]});case"rejected":return(0,s.jsxs)(F.Badge,{variant:"destructive",className:"bg-rose-500/20 text-rose-700 border-rose-500/30",children:[(0,s.jsx)(v.XCircle,{className:"mr-1 h-3 w-3"}),"Rejected"]});case"expired":return(0,s.jsxs)(F.Badge,{variant:"outline",className:"bg-gray-500/20 text-gray-700 border-gray-500/30",children:[(0,s.jsx)(w.AlertCircle,{className:"mr-1 h-3 w-3"}),"Expired"]});case"under_review":return(0,s.jsxs)(F.Badge,{variant:"secondary",className:"bg-blue-500/20 text-blue-700 border-blue-500/30",children:[(0,s.jsx)(y.Clock,{className:"mr-1 h-3 w-3"}),"Under Review"]});default:return(0,s.jsx)(F.Badge,{variant:"outline",children:e})}})(e.status),"rejected"===e.status&&e.rejection_reason&&(0,s.jsx)("p",{className:"text-xs text-rose-600 max-w-xs",children:e.rejection_reason})]})}),(0,s.jsx)(S.TableCell,{className:"text-gray-600",children:D(e.created_at)}),(0,s.jsx)(S.TableCell,{className:"text-gray-600",children:e.expiry_date?D(e.expiry_date):"—"}),(0,s.jsx)(S.TableCell,{children:e.document&&(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm text-gray-900 truncate max-w-[200px]",children:e.document.name}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:(a=e.document.file_size_bytes)<1024?a+" B":a<1048576?(a/1024).toFixed(1)+" KB":(a/1048576).toFixed(1)+" MB"})]})}),(0,s.jsx)(S.TableCell,{children:e.document&&(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>k(e.document.id,e.document.name),disabled:g===e.document.id,children:g===e.document.id?(0,s.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(N.Download,{className:"h-4 w-4"})})})]},e.id)})})]})})]})]}),(0,s.jsx)(P,{open:p,onOpenChange:j,onUploadSuccess:T,category:c?"entity":"individual",members:c?l:[],memberType:c?"investor":void 0})]})}var L=e.i(831833),B=e.i(551544),R=e.i(501259),U=e.i(871561),M=e.i(84065),O=e.i(827465),z=e.i(259802),H=e.i(429760),Y=e.i(15098),q=e.i(275034);function V({entityId:e,entityName:t}){let[l,i]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[x,u]=(0,a.useState)(!0),[p,j]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),b=(0,a.useCallback)(async()=>{u(!0);try{let s=await fetch(`/api/investors/me/counterparty-entities/${e}/kyc-submissions`);if(!s.ok)throw Error("Failed to fetch KYC submissions");let a=await s.json();i(a.submissions||[]),m(a.members||[])}catch(e){console.error("Error fetching entity KYC submissions:",e),d.toast.error("Failed to load KYC documents",{description:e.message})}finally{u(!1)}},[e]);(0,a.useEffect)(()=>{b()},[e,b]);let v=async(e,s)=>{f(e);try{let a=await fetch(`/api/documents/${e}/download`);if(!a.ok)throw Error("Failed to download document");let t=await a.blob(),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download=s,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(r),document.body.removeChild(l),d.toast.success("Download started")}catch(e){console.error("Download error:",e),d.toast.error("Download failed",{description:e.message})}finally{f(null)}},T=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-foreground",children:[t," - KYC Documents"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload and manage KYC documents for this entity"})]}),(0,s.jsxs)(r.Button,{onClick:()=>j(!0),children:[(0,s.jsx)(n.Upload,{className:"mr-2 h-4 w-4"}),"Upload Document"]})]}),(0,s.jsxs)(A.Alert,{children:[(0,s.jsx)(q.Info,{className:"h-4 w-4"}),(0,s.jsx)(A.AlertDescription,{className:"text-sm",children:"Required: NDA/NDNC, Incorporation Certificate, Memo & Articles, Register of Members, Register of Directors, Bank Confirmation. For each member/director: ID/Passport and Utility Bill (less than 3 months old)."})]}),x?(0,s.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,s.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===l.length?(0,s.jsx)(h.Card,{className:"border-dashed border-border",children:(0,s.jsxs)(h.CardContent,{className:"flex flex-col items-center justify-center p-12",children:[(0,s.jsx)(C.FileText,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-2",children:"No KYC documents uploaded yet"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload entity documents and ID/Utility Bill for each member/director"}),(0,s.jsxs)(r.Button,{onClick:()=>j(!0),children:[(0,s.jsx)(n.Upload,{className:"mr-2 h-4 w-4"}),"Upload First Document"]})]})}):(0,s.jsx)(h.Card,{children:(0,s.jsx)(h.CardContent,{className:"p-0",children:(0,s.jsxs)(S.Table,{children:[(0,s.jsx)(S.TableHeader,{children:(0,s.jsxs)(S.TableRow,{children:[(0,s.jsx)(S.TableHead,{children:"Document Type"}),c.length>0&&(0,s.jsx)(S.TableHead,{children:"Member"}),(0,s.jsx)(S.TableHead,{children:"Status"}),(0,s.jsx)(S.TableHead,{children:"Uploaded"}),(0,s.jsx)(S.TableHead,{children:"Expiry"}),(0,s.jsx)(S.TableHead,{children:"File"}),(0,s.jsx)(S.TableHead,{children:"Actions"})]})}),(0,s.jsx)(S.TableBody,{children:l.map(e=>{var a;return(0,s.jsxs)(S.TableRow,{children:[(0,s.jsx)(S.TableCell,{children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-medium text-foreground",children:(0,I.getDocumentTypeLabel)(e.document_type,e.custom_label)}),e.version>1&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Version ",e.version]})]})}),c.length>0&&(0,s.jsx)(S.TableCell,{children:e.counterparty_member?(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(_.User,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.counterparty_member.full_name})]}):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}),(0,s.jsx)(S.TableCell,{children:(e=>{switch(e){case"approved":return(0,s.jsxs)(F.Badge,{variant:"default",className:"bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 border-emerald-500/30",children:[(0,s.jsx)(Y.CheckCircle2,{className:"mr-1 h-3 w-3"}),"Approved"]});case"pending":return(0,s.jsxs)(F.Badge,{variant:"secondary",className:"bg-amber-500/20 text-amber-700 dark:text-amber-300 border-amber-500/30",children:[(0,s.jsx)(y.Clock,{className:"mr-1 h-3 w-3"}),"Pending Review"]});case"rejected":return(0,s.jsxs)(F.Badge,{variant:"destructive",className:"bg-rose-500/20 text-rose-700 dark:text-rose-300 border-rose-500/30",children:[(0,s.jsx)(w.AlertCircle,{className:"mr-1 h-3 w-3"}),"Rejected"]});case"expired":return(0,s.jsxs)(F.Badge,{variant:"outline",className:"bg-gray-500/20 text-gray-600 dark:text-gray-300 border-gray-500/30",children:[(0,s.jsx)(w.AlertCircle,{className:"mr-1 h-3 w-3"}),"Expired"]});default:return(0,s.jsx)(F.Badge,{variant:"outline",children:e})}})(e.status)}),(0,s.jsx)(S.TableCell,{className:"text-muted-foreground",children:T(e.created_at)}),(0,s.jsx)(S.TableCell,{className:"text-muted-foreground",children:e.expiry_date?T(e.expiry_date):"—"}),(0,s.jsx)(S.TableCell,{children:e.document&&(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:e.document.name}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:(a=e.document.file_size_bytes)<1024?a+" B":a<1048576?(a/1024).toFixed(1)+" KB":(a/1048576).toFixed(1)+" MB"})]})}),(0,s.jsx)(S.TableCell,{children:e.document&&(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>v(e.document.id,e.document.name),disabled:g===e.document.id,children:g===e.document.id?(0,s.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(N.Download,{className:"h-4 w-4"})})})]},e.id)})})]})})}),(0,s.jsx)(P,{open:p,onOpenChange:j,onUploadSuccess:b,entityId:e,category:"entity",members:c,memberType:"counterparty"})]})}var K=e.i(335994),G=e.i(117925);let $=[{value:"director",label:"Director"},{value:"shareholder",label:"Shareholder"},{value:"beneficial_owner",label:"Beneficial Owner"},{value:"trustee",label:"Trustee"},{value:"beneficiary",label:"Beneficiary"},{value:"managing_member",label:"Managing Member"},{value:"general_partner",label:"General Partner"},{value:"limited_partner",label:"Limited Partner"},{value:"authorized_signatory",label:"Authorized Signatory"},{value:"other",label:"Other"}],W=[{value:"passport",label:"Passport"},{value:"national_id",label:"National ID"},{value:"drivers_license",label:"Driver's License"},{value:"other",label:"Other"}];function J({entityId:e,entityName:t}){let[l,n]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[u,p]=(0,a.useState)(!1),[j,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),[v,N]=(0,a.useState)(null),[w,C]=(0,a.useState)({full_name:"",role:"",role_title:"",email:"",phone:"",nationality:"",id_type:"",id_number:"",id_expiry_date:"",ownership_percentage:"",is_beneficial_owner:!1});(0,a.useEffect)(()=>{_()},[e]);let _=async()=>{try{let s=await fetch(`/api/investors/me/counterparty-entities/${e}/members`);if(!s.ok)throw Error("Failed to load members");let a=await s.json();n(a.members||[])}catch(e){console.error("Error loading members:",e),d.toast.error("Failed to load members")}finally{c(!1)}},D=()=>{C({full_name:"",role:"",role_title:"",email:"",phone:"",nationality:"",id_type:"",id_number:"",id_expiry_date:"",ownership_percentage:"",is_beneficial_owner:!1}),g(null)},I=e=>{e?(g(e),C({full_name:e.full_name||"",role:e.role||"",role_title:e.role_title||"",email:e.email||"",phone:e.phone||"",nationality:e.nationality||"",id_type:e.id_type||"",id_number:e.id_number||"",id_expiry_date:e.id_expiry_date||"",ownership_percentage:e.ownership_percentage?.toString()||"",is_beneficial_owner:e.is_beneficial_owner||!1})):D(),p(!0)},A=async()=>{if(!w.full_name||!w.role)return void d.toast.error("Please fill in all required fields");b(!0);try{let s={full_name:w.full_name,role:w.role,role_title:w.role_title||null,email:w.email||null,phone:w.phone||null,nationality:w.nationality||null,id_type:w.id_type||null,id_number:w.id_number||null,id_expiry_date:w.id_expiry_date||null,ownership_percentage:w.ownership_percentage?parseFloat(w.ownership_percentage):null,is_beneficial_owner:w.is_beneficial_owner},a=j?`/api/investors/me/counterparty-entities/${e}/members/${j.id}`:`/api/investors/me/counterparty-entities/${e}/members`,t=await fetch(a,{method:j?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to save member")}d.toast.success(j?"Member updated":"Member added"),p(!1),D(),await _()}catch(e){console.error("Save error:",e),d.toast.error(e.message||"Failed to save member")}finally{b(!1)}},P=async s=>{if(confirm("Are you sure you want to remove this member?")){N(s);try{let a=await fetch(`/api/investors/me/counterparty-entities/${e}/members/${s}`,{method:"DELETE"});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to remove member")}d.toast.success("Member removed"),await _()}catch(e){console.error("Delete error:",e),d.toast.error(e.message||"Failed to remove member")}finally{N(null)}}};return o?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"text-muted-foreground",children:"Loading members..."})}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,s.jsx)(R.Users,{className:"h-5 w-5"}),"Entity Members"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Directors, trustees, partners, and beneficial owners"})]}),(0,s.jsxs)(r.Button,{onClick:()=>I(),size:"sm",children:[(0,s.jsx)(K.UserPlus,{className:"w-4 h-4 mr-2"}),"Add Member"]})]}),0===l.length?(0,s.jsx)(h.Card,{children:(0,s.jsxs)(h.CardContent,{className:"py-8 text-center",children:[(0,s.jsx)(R.Users,{className:"w-10 h-10 mx-auto text-muted-foreground mb-3"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm mb-3",children:"No members added yet"}),(0,s.jsxs)(r.Button,{onClick:()=>I(),variant:"outline",size:"sm",children:[(0,s.jsx)(K.UserPlus,{className:"w-4 h-4 mr-2"}),"Add First Member"]})]})}):(0,s.jsxs)(S.Table,{children:[(0,s.jsx)(S.TableHeader,{children:(0,s.jsxs)(S.TableRow,{children:[(0,s.jsx)(S.TableHead,{children:"Name"}),(0,s.jsx)(S.TableHead,{children:"Role"}),(0,s.jsx)(S.TableHead,{children:"Ownership"}),(0,s.jsx)(S.TableHead,{children:"KYC"}),(0,s.jsx)(S.TableHead,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(S.TableBody,{children:l.map(e=>{var a;let t;return(0,s.jsxs)(S.TableRow,{children:[(0,s.jsxs)(S.TableCell,{className:"font-medium",children:[e.full_name,e.is_beneficial_owner&&(0,s.jsx)(F.Badge,{variant:"secondary",className:"ml-2 text-xs",children:"UBO"})]}),(0,s.jsx)(S.TableCell,{children:(a=e.role,t=$.find(e=>e.value===a),(0,s.jsx)(F.Badge,{variant:"outline",children:t?.label||a}))}),(0,s.jsx)(S.TableCell,{children:e.ownership_percentage?`${e.ownership_percentage}%`:"—"}),(0,s.jsx)(S.TableCell,{children:(e=>{switch(e){case"approved":return(0,s.jsxs)(F.Badge,{className:"bg-green-500",children:[(0,s.jsx)(G.ShieldCheck,{className:"w-3 h-3 mr-1"}),"Approved"]});case"pending":return(0,s.jsxs)(F.Badge,{className:"bg-yellow-500",children:[(0,s.jsx)(y.Clock,{className:"w-3 h-3 mr-1"}),"Pending"]});default:return(0,s.jsx)(F.Badge,{variant:"outline",children:"Not Submitted"})}})(e.kyc_status)}),(0,s.jsx)(S.TableCell,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>I(e),children:(0,s.jsx)(B.Edit,{className:"w-4 h-4"})}),(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>P(e.id),disabled:v===e.id,children:(0,s.jsx)(i.Trash2,{className:"w-4 h-4"})})]})})]},e.id)})})]}),(0,s.jsx)(T.Dialog,{open:u,onOpenChange:p,children:(0,s.jsxs)(T.DialogContent,{className:"max-w-lg",children:[(0,s.jsxs)(T.DialogHeader,{children:[(0,s.jsx)(T.DialogTitle,{children:j?"Edit Member":"Add Member"}),(0,s.jsx)(T.DialogDescription,{children:j?"Update member details":`Add a member to ${t}`})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(x.Label,{htmlFor:"full_name",children:["Full Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(m.Input,{id:"full_name",value:w.full_name,onChange:e=>C({...w,full_name:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(x.Label,{htmlFor:"role",children:["Role ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)(k.Select,{value:w.role,onValueChange:e=>C({...w,role:e}),children:[(0,s.jsx)(k.SelectTrigger,{children:(0,s.jsx)(k.SelectValue,{placeholder:"Select role"})}),(0,s.jsx)(k.SelectContent,{children:$.map(e=>(0,s.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"email",children:"Email"}),(0,s.jsx)(m.Input,{id:"email",type:"email",value:w.email,onChange:e=>C({...w,email:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"phone",children:"Phone"}),(0,s.jsx)(m.Input,{id:"phone",value:w.phone,onChange:e=>C({...w,phone:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"ownership_percentage",children:"Ownership %"}),(0,s.jsx)(m.Input,{id:"ownership_percentage",type:"number",min:"0",max:"100",value:w.ownership_percentage,onChange:e=>C({...w,ownership_percentage:e.target.value})})]}),(0,s.jsx)("div",{className:"space-y-2 flex items-end",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:w.is_beneficial_owner,onChange:e=>C({...w,is_beneficial_owner:e.target.checked}),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Beneficial Owner (UBO)"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"id_type",children:"ID Type"}),(0,s.jsxs)(k.Select,{value:w.id_type,onValueChange:e=>C({...w,id_type:e}),children:[(0,s.jsx)(k.SelectTrigger,{children:(0,s.jsx)(k.SelectValue,{placeholder:"Select"})}),(0,s.jsx)(k.SelectContent,{children:W.map(e=>(0,s.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"id_number",children:"ID Number"}),(0,s.jsx)(m.Input,{id:"id_number",value:w.id_number,onChange:e=>C({...w,id_number:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"id_expiry_date",children:"ID Expiry"}),(0,s.jsx)(m.Input,{id:"id_expiry_date",type:"date",value:w.id_expiry_date,onChange:e=>C({...w,id_expiry_date:e.target.value})})]})]})]}),(0,s.jsxs)(T.DialogFooter,{children:[(0,s.jsx)(r.Button,{variant:"outline",onClick:()=>p(!1),disabled:f,children:"Cancel"}),(0,s.jsx)(r.Button,{onClick:A,disabled:f,children:f?"Saving...":j?"Update":"Add Member"})]})]})})]})}var Q=e.i(981218),X=e.i(773510),Z=e.i(957114);function ee({open:e,onClose:t,entity:r,onUpdate:l}){var i;let[n,o]=(0,a.useState)("details"),[d,c]=(0,a.useState)(!1);if(!r)return null;let m=e=>({trust:"Trust",llc:"LLC",partnership:"Partnership",family_office:"Family Office",law_firm:"Law Firm",investment_bank:"Investment Bank",fund:"Fund",corporation:"Corporation",other:"Other"})[e]||e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Dialog,{open:e,onOpenChange:t,children:(0,s.jsxs)(T.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsx)(T.DialogHeader,{children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(T.DialogTitle,{className:"text-2xl",children:r.legal_name}),(0,s.jsxs)(T.DialogDescription,{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(F.Badge,{variant:"outline",children:m(r.entity_type)}),(e=>{if(!e)return(0,s.jsx)(F.Badge,{variant:"outline",className:"bg-gray-500/20 text-gray-300 border-gray-500/30",children:"No KYC"});switch(e){case"approved":return(0,s.jsx)(F.Badge,{variant:"default",className:"bg-emerald-500/20 text-emerald-300 border-emerald-500/30",children:"Approved"});case"pending":return(0,s.jsx)(F.Badge,{variant:"secondary",className:"bg-amber-500/20 text-amber-300 border-amber-500/30",children:"Pending Review"});case"rejected":return(0,s.jsx)(F.Badge,{variant:"destructive",className:"bg-rose-500/20 text-rose-300 border-rose-500/30",children:"Rejected"});default:return(0,s.jsx)(F.Badge,{variant:"outline",children:e})}})(r.kyc_status)]})]})})}),(0,s.jsxs)(H.Tabs,{value:n,onValueChange:o,className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsxs)(H.TabsList,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(H.TabsTrigger,{value:"details",children:"Entity Details"}),(0,s.jsx)(H.TabsTrigger,{value:"members",children:"Members"}),(0,s.jsx)(H.TabsTrigger,{value:"kyc",children:"KYC Documents"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto mt-4",children:[(0,s.jsxs)(H.TabsContent,{value:"details",className:"space-y-4 m-0",children:[(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(D.Building2,{className:"h-5 w-5"}),"Basic Information"]})}),(0,s.jsxs)(h.CardContent,{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Legal Name"}),(0,s.jsx)("p",{className:"font-medium",children:r.legal_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Entity Type"}),(0,s.jsx)("p",{className:"font-medium",children:m(r.entity_type)})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,s.jsx)(O.Hash,{className:"h-3 w-3"}),"Registration Number"]}),(0,s.jsx)("p",{className:"font-medium",children:r.registration_number||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,s.jsx)(Q.Shield,{className:"h-3 w-3"}),"Tax ID / EIN"]}),(0,s.jsx)("p",{className:"font-medium",children:r.tax_id||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,s.jsx)(U.MapPin,{className:"h-3 w-3"}),"Jurisdiction"]}),(0,s.jsx)("p",{className:"font-medium",children:r.jurisdiction||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,s.jsx)(M.Calendar,{className:"h-3 w-3"}),"Formation Date"]}),(0,s.jsx)("p",{className:"font-medium",children:(i=r.formation_date)?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"—"})]})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(U.MapPin,{className:"h-5 w-5"}),"Registered Address"]})}),(0,s.jsx)(h.CardContent,{children:(0,s.jsx)("p",{className:"font-medium",children:(e=>{if(!e)return"—";let s=[e.street,e.city,e.state,e.postal_code,e.country].filter(Boolean);return s.length>0?s.join(", "):"—"})(r.registered_address)})})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(_.User,{className:"h-5 w-5"}),"Authorized Representative"]})}),(0,s.jsxs)(h.CardContent,{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Name"}),(0,s.jsx)("p",{className:"font-medium",children:r.representative_name||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Title"}),(0,s.jsx)("p",{className:"font-medium",children:r.representative_title||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,s.jsx)(X.Mail,{className:"h-3 w-3"}),"Email"]}),(0,s.jsx)("p",{className:"font-medium",children:r.representative_email||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,s.jsx)(Z.Phone,{className:"h-3 w-3"}),"Phone"]}),(0,s.jsx)("p",{className:"font-medium",children:r.representative_phone||"—"})]})]})]}),r.notes&&(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(C.FileText,{className:"h-5 w-5"}),"Notes"]})}),(0,s.jsx)(h.CardContent,{children:(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:r.notes})})]})]}),(0,s.jsx)(H.TabsContent,{value:"members",className:"m-0",children:(0,s.jsx)(J,{entityId:r.id,entityName:r.legal_name})}),(0,s.jsx)(H.TabsContent,{value:"kyc",className:"m-0",children:(0,s.jsx)(V,{entityId:r.id,entityName:r.legal_name})})]})]})]})}),(0,s.jsx)(z.EntityFormDialog,{open:d,onClose:()=>c(!1),onSuccess:()=>{c(!1),l()},entity:r})]})}function es(){let[e,t]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[c,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!1),[p,j]=(0,a.useState)(null),[g,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("/api/investors/me/counterparty-entities");if(!e.ok)throw Error("Failed to load entities");let s=await e.json();t(s.entities||[])}catch(e){console.error("Error loading entities:",e),d.toast.error("Failed to load entities")}finally{n(!1)}},w=()=>{j(null),m(!0)},S=async e=>{if(confirm("Are you sure you want to delete this entity? This action cannot be undone.")){f(e);try{let s=await fetch(`/api/investors/me/counterparty-entities/${e}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Delete failed")}d.toast.success("Entity deleted successfully"),await N()}catch(e){console.error("Delete error:",e),d.toast.error(e.message||"Failed to delete entity")}finally{f(null)}}},T=async()=>{m(!1),j(null),await N()},k=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—";return l?(0,s.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,s.jsx)(o.Loader2,{className:"w-6 h-6 animate-spin text-slate-400"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(h.Card,{children:(0,s.jsx)(h.CardHeader,{className:"pb-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(h.CardTitle,{className:"text-xl",children:"Counterparty Entities"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage legal entities you invest through (trusts, LLCs, partnerships, etc.)"})]}),(0,s.jsxs)(r.Button,{onClick:w,className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,s.jsx)(L.Plus,{className:"w-4 h-4 mr-2"}),"Add Entity"]})]})})}),0===e.length?(0,s.jsx)(h.Card,{children:(0,s.jsx)(h.CardContent,{className:"py-16",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(D.Building2,{className:"w-12 h-12 mx-auto text-slate-400 mb-4"}),(0,s.jsx)("p",{className:"text-slate-600 font-medium text-lg mb-2",children:"No entities added yet"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 mb-6 max-w-md mx-auto",children:"Add a legal entity to invest through trusts, LLCs, or partnerships."}),(0,s.jsxs)(r.Button,{onClick:w,variant:"outline",size:"lg",children:[(0,s.jsx)(L.Plus,{className:"w-4 h-4 mr-2"}),"Add Your First Entity"]})]})})}):(0,s.jsx)("div",{className:"space-y-6",children:e.map(e=>{var a;return(0,s.jsxs)(h.Card,{className:"overflow-hidden",children:[(0,s.jsx)(h.CardHeader,{className:"bg-slate-50/80 border-b pb-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-slate-900 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(D.Building2,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:e.legal_name}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(F.Badge,{variant:"outline",className:"font-medium px-3 py-1",children:{trust:"Trust",llc:"LLC",partnership:"Partnership",family_office:"Family Office",law_firm:"Law Firm",investment_bank:"Investment Bank",fund:"Fund",corporation:"Corporation",other:"Other"}[a=e.entity_type]||a}),(e=>{switch(e){case"approved":return(0,s.jsxs)(F.Badge,{className:"bg-emerald-500/15 text-emerald-700 border-emerald-500/30 px-3 py-1",children:[(0,s.jsx)(b.CheckCircle,{className:"w-3.5 h-3.5 mr-1.5"}),"Verified"]});case"pending":return(0,s.jsxs)(F.Badge,{className:"bg-amber-500/15 text-amber-700 border-amber-500/30 px-3 py-1",children:[(0,s.jsx)(y.Clock,{className:"w-3.5 h-3.5 mr-1.5"}),"Pending Review"]});case"rejected":return(0,s.jsxs)(F.Badge,{className:"bg-rose-500/15 text-rose-700 border-rose-500/30 px-3 py-1",children:[(0,s.jsx)(v.XCircle,{className:"w-3.5 h-3.5 mr-1.5"}),"Rejected"]});case"expired":return(0,s.jsx)(F.Badge,{variant:"outline",className:"text-orange-600 border-orange-400 px-3 py-1",children:"Expired"});default:return(0,s.jsx)(F.Badge,{variant:"outline",className:"text-slate-500 border-slate-300 px-3 py-1",children:"Not Submitted"})}})(e.kyc_status)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(r.Button,{variant:"default",size:"sm",onClick:()=>{j(e),u(!0)},className:"h-9 bg-slate-900 hover:bg-slate-800",children:[(0,s.jsx)(R.Users,{className:"w-4 h-4 mr-2"}),"Members & KYC"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{j(e),m(!0)},className:"h-9",children:[(0,s.jsx)(B.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,s.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>S(e.id),disabled:g===e.id,className:"h-9 hover:bg-rose-50 hover:text-rose-600 hover:border-rose-300",children:g===e.id?(0,s.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(i.Trash2,{className:"w-4 h-4"})})]})]})}),(0,s.jsxs)(h.CardContent,{className:"pt-6 pb-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-6",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,s.jsx)(U.MapPin,{className:"w-4 h-4"}),"Jurisdiction"]}),(0,s.jsx)("p",{className:"text-base text-slate-900 pl-6",children:e.jurisdiction||(0,s.jsx)("span",{className:"text-slate-400",children:"Not specified"})})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,s.jsx)(O.Hash,{className:"w-4 h-4"}),"Registration Number"]}),(0,s.jsx)("p",{className:"text-base text-slate-900 font-mono pl-6",children:e.registration_number||(0,s.jsx)("span",{className:"text-slate-400 font-sans",children:"Not specified"})})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,s.jsx)(C.FileText,{className:"w-4 h-4"}),"Tax ID"]}),(0,s.jsx)("p",{className:"text-base text-slate-900 font-mono pl-6",children:e.tax_id||(0,s.jsx)("span",{className:"text-slate-400 font-sans",children:"Not specified"})})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,s.jsx)(M.Calendar,{className:"w-4 h-4"}),"Formation Date"]}),(0,s.jsx)("p",{className:"text-base text-slate-900 pl-6",children:"—"!==k(e.formation_date)?k(e.formation_date):(0,s.jsx)("span",{className:"text-slate-400",children:"Not specified"})})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,s.jsx)(_.User,{className:"w-4 h-4"}),"Authorized Representative"]}),(0,s.jsx)("div",{className:"pl-6",children:e.representative_name?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-base text-slate-900 font-medium",children:e.representative_name}),e.representative_title&&(0,s.jsx)("p",{className:"text-sm text-slate-500",children:e.representative_title})]}):(0,s.jsx)("p",{className:"text-slate-400",children:"Not specified"})})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,s.jsx)(U.MapPin,{className:"w-4 h-4"}),"Registered Address"]}),(0,s.jsx)("p",{className:"text-base text-slate-900 pl-6",children:(e=>{if(!e)return null;let s=[e.street,e.city,e.state,e.postal_code,e.country].filter(Boolean);return s.length>0?s.join(", "):null})(e.registered_address)||(0,s.jsx)("span",{className:"text-slate-400",children:"Not specified"})})]})]}),e.notes&&(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500 mb-2",children:[(0,s.jsx)(C.FileText,{className:"w-4 h-4"}),"Notes"]}),(0,s.jsx)("p",{className:"text-base text-slate-700 pl-6 whitespace-pre-wrap",children:e.notes})]})]})]},e.id)})}),(0,s.jsx)(z.EntityFormDialog,{open:c,onClose:()=>{m(!1),j(null)},onSuccess:T,entity:p}),(0,s.jsx)(ee,{open:x,onClose:()=>{u(!1),j(null)},entity:p,onUpdate:N})]})}var ea=e.i(56213),et=e.i(456289),er=e.i(619324),el=e.i(262823),ei=e.i(137533),en=e.i(933626),eo=e.i(925362),ed=e.i(282141);function ec(e){if(!e)return{status:"not_set",daysLeft:null};let s=new Date(e),a=new Date,t=(0,en.differenceInDays)(s,a);return+(0,eo.toDate)(s)<Date.now()?{status:"expired",daysLeft:t}:t<=30?{status:"expiring_soon",daysLeft:t}:{status:"valid",daysLeft:t}}function em({date:e,label:a}){let{status:t,daysLeft:r}=ec(e);return"not_set"===t?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(y.Clock,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:"Not set"})]}):(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["expired"===t&&(0,s.jsxs)(F.Badge,{variant:"destructive",className:"gap-1",children:[(0,s.jsx)(v.XCircle,{className:"h-3 w-3"}),"Expired"]}),"expiring_soon"===t&&(0,s.jsxs)(F.Badge,{variant:"outline",className:"gap-1 border-amber-500/50 text-amber-500 bg-amber-500/10",children:[(0,s.jsx)(er.AlertTriangle,{className:"h-3 w-3"}),"Expires in ",r," days"]}),"valid"===t&&(0,s.jsxs)(F.Badge,{variant:"outline",className:"gap-1 border-green-500/50 text-green-500 bg-green-500/10",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-3 w-3"}),"Valid"]})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(M.Calendar,{className:"h-3 w-3"}),(0,ei.format)(new Date(e),"MMM dd, yyyy")]})]})}function ex(){let[e,t]=(0,a.useState)(null),[l,i]=(0,a.useState)(!0),[n,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{d()},[]);let d=async()=>{try{i(!0);let e=await fetch("/api/investors/me/compliance");if(!e.ok)throw Error("Failed to fetch compliance data");let s=await e.json();t(s)}catch(e){o(e instanceof Error?e.message:"Unknown error")}finally{i(!1)}};if(l)return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(ea.Skeleton,{className:"h-8 w-48"}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsx)(ea.Skeleton,{className:"h-48"}),(0,s.jsx)(ea.Skeleton,{className:"h-48"}),(0,s.jsx)(ea.Skeleton,{className:"h-48"}),(0,s.jsx)(ea.Skeleton,{className:"h-48"})]})]});if(n)return(0,s.jsx)(h.Card,{className:"border-destructive/50 bg-destructive/5",children:(0,s.jsx)(h.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(v.XCircle,{className:"h-5 w-5 text-destructive"}),(0,s.jsx)("p",{className:"text-sm text-destructive",children:n}),(0,s.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:d,children:[(0,s.jsx)(el.RefreshCw,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})});if(!e)return null;let c=ec(e.kyc_expiry_date),m=ec(e.accreditation_expiry),x=e.is_sanctioned||"expired"===c.status||"expired"===m.status;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Compliance Status"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your AML, PEP screening, and accreditation status."})]}),x&&(0,s.jsx)(h.Card,{className:"border-destructive/50 bg-destructive/5",children:(0,s.jsx)(h.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(et.ShieldAlert,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-destructive",children:"Compliance Action Required"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"One or more compliance items need attention. Please contact your relationship manager."})]})]})})}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{className:"pb-3",children:[(0,s.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(G.ShieldCheck,{className:"h-5 w-5 text-primary"}),"AML Status"]}),(0,s.jsx)(h.CardDescription,{children:"Anti-Money Laundering risk assessment"})]}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Risk Rating"}),(0,s.jsx)(F.Badge,{variant:"outline",className:(0,ed.cn)("capitalize",function(e){switch(e?.toLowerCase()){case"low":return"bg-green-500/10 text-green-500 border-green-500/20";case"medium":return"bg-amber-500/10 text-amber-500 border-amber-500/20";case"high":return"bg-red-500/10 text-red-500 border-red-500/20";default:return"bg-muted text-muted-foreground"}}(e.aml_risk_rating)),children:e.aml_risk_rating||"Not Assessed"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Last Reviewed"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.aml_last_reviewed_at?(0,ei.format)(new Date(e.aml_last_reviewed_at),"MMM dd, yyyy"):"Never"})]})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{className:"pb-3",children:[(0,s.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(er.AlertTriangle,{className:"h-5 w-5 text-amber-500"}),"PEP & Sanctions"]}),(0,s.jsx)(h.CardDescription,{children:"Politically Exposed Person and sanctions screening"})]}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"PEP Status"}),e.is_pep?(0,s.jsxs)(F.Badge,{variant:"outline",className:"border-amber-500/50 text-amber-500 bg-amber-500/10",children:[(0,s.jsx)(er.AlertTriangle,{className:"h-3 w-3 mr-1"}),"PEP Identified"]}):(0,s.jsxs)(F.Badge,{variant:"outline",className:"border-green-500/50 text-green-500 bg-green-500/10",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Clear"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Sanctions Status"}),e.is_sanctioned?(0,s.jsxs)(F.Badge,{variant:"destructive",children:[(0,s.jsx)(v.XCircle,{className:"h-3 w-3 mr-1"}),"Sanctions Match"]}):(0,s.jsxs)(F.Badge,{variant:"outline",className:"border-green-500/50 text-green-500 bg-green-500/10",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Clear"]})]})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{className:"pb-3",children:[(0,s.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(C.FileText,{className:"h-5 w-5 text-primary"}),"KYC Verification"]}),(0,s.jsx)(h.CardDescription,{children:"Know Your Customer verification status"})]}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Status"}),(0,s.jsx)(F.Badge,{variant:"outline",className:(0,ed.cn)("approved"===e.kyc_status||"verified"===e.kyc_status?"border-green-500/50 text-green-500 bg-green-500/10":"pending"===e.kyc_status||"submitted"===e.kyc_status?"border-amber-500/50 text-amber-500 bg-amber-500/10":"border-muted text-muted-foreground"),children:e.kyc_status?.replace("_"," ")||"Not Started"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium block mb-2",children:"Expiry"}),(0,s.jsx)(em,{date:e.kyc_expiry_date,label:"KYC"})]}),e.kyc_completed_at&&(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Completed"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:(0,ei.format)(new Date(e.kyc_completed_at),"MMM dd, yyyy")})]})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{className:"pb-3",children:[(0,s.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-5 w-5 text-primary"}),"Accreditation"]}),(0,s.jsx)(h.CardDescription,{children:"Investor accreditation and qualification status"})]}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Professional Investor"}),e.is_professional_investor?(0,s.jsxs)(F.Badge,{variant:"outline",className:"border-green-500/50 text-green-500 bg-green-500/10",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Yes"]}):(0,s.jsx)(F.Badge,{variant:"outline",className:"text-muted-foreground",children:"No"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Qualified Purchaser"}),e.is_qualified_purchaser?(0,s.jsxs)(F.Badge,{variant:"outline",className:"border-green-500/50 text-green-500 bg-green-500/10",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Yes"]}):(0,s.jsx)(F.Badge,{variant:"outline",className:"text-muted-foreground",children:"No"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium block mb-2",children:"Accreditation Expiry"}),(0,s.jsx)(em,{date:e.accreditation_expiry,label:"Accreditation"})]})]})]})]}),(0,s.jsx)(h.Card,{className:"bg-muted/50",children:(0,s.jsx)(h.CardContent,{className:"pt-6",children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Compliance status is managed by VERSO Holdings. If you believe any information is incorrect or needs updating, please contact your relationship manager or email"," ",(0,s.jsx)("a",{href:"mailto:compliance@versoholdings.com",className:"text-primary hover:underline",children:"compliance@versoholdings.com"})]})})})]})}var eu=e.i(768385),eh=e.i(682836);let ep=(0,a.createContext)(null);function ej({children:e,onComplete:t,initialData:r,submissionId:l}){let[i,n]=(0,a.useState)(()=>({currentStep:r?.lastCompletedStep?Math.min(r.lastCompletedStep+1,10):1,formData:r||{},completedSteps:new Set(r?.lastCompletedStep?Array.from({length:r.lastCompletedStep},(e,s)=>s+1):[]),isLoading:!1,isSaving:!1,lastSavedAt:null,submissionId:l||null,errors:{}})),o=(0,a.useRef)(null),c=(0,a.useRef)(!1),m=(0,a.useRef)(!1),x=(0,a.useRef)(!1),u=(0,a.useRef)(void 0),h=(0,eh.getVisibleSteps)(i.formData),p=h.length,j=h.indexOf(i.currentStep),g=-1===j?0:j,f=-1===j?h[0]:i.currentStep;(0,a.useEffect)(()=>{if(-1===j&&h.length>0){let e=h.find(e=>e>=i.currentStep)||h[h.length-1];n(s=>({...s,currentStep:e}))}},[j,h,i.currentStep]);let b=Math.max(0,Math.round((g+1)/p*100)),v=eh.STEP_CONFIG[f-1],y=0===g,N=g===p-1;(0,a.useEffect)(()=>(c.current&&u.current&&(o.current=setTimeout(()=>{u.current?.()},3e4)),()=>{o.current&&clearTimeout(o.current)}),[i.formData]);let w=(0,a.useCallback)(e=>i.formData[e],[i.formData]),C=(0,a.useCallback)((e,s)=>{c.current=!0,n(a=>({...a,formData:{...a.formData,[e]:s},errors:{...a.errors,[parseInt(e.replace("step",""))]:[]}}))},[]),_=(0,a.useCallback)(async()=>{let e=`step${i.currentStep}`,s=i.formData[e],a=(0,eh.getStepSchema)(i.currentStep);if(!a)return{valid:!0,errors:[]};try{return await a.parseAsync(s||(0,eh.getStepDefaults)(i.currentStep)),n(e=>({...e,errors:{...e.errors,[i.currentStep]:[]}})),{valid:!0,errors:[]}}catch(s){let e=s.issues?.map(e=>e.message)||["Validation failed"];return n(s=>({...s,errors:{...s.errors,[i.currentStep]:e}})),{valid:!1,errors:e}}},[i.currentStep,i.formData]),F=(0,a.useCallback)(async()=>{if(!m.current&&!x.current){m.current=!0,n(e=>({...e,isSaving:!0}));try{let e,s={document_type:"questionnaire",custom_label:"KYC Compliance Questionnaire",metadata:{...i.formData,lastCompletedStep:Math.max(...Array.from(i.completedSteps),0),wizardVersion:"2.0"},status:"draft"};if(!(e=i.submissionId?await fetch(`/api/investors/me/kyc-submissions/${i.submissionId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/investors/me/kyc-submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw Error("Failed to save progress");let a=await e.json();n(e=>({...e,isSaving:!1,lastSavedAt:new Date,submissionId:a.submission?.id||e.submissionId})),c.current=!1}catch(e){console.error("Failed to save progress:",e),n(e=>({...e,isSaving:!1})),d.toast.error("Failed to save progress. Your changes may not be saved.")}finally{m.current=!1}}},[i.formData,i.completedSteps,i.submissionId]);(0,a.useEffect)(()=>{u.current=F},[F]);let S=(0,a.useCallback)(e=>{h.includes(e)?n(s=>({...s,currentStep:e})):d.toast.error("This step is not available")},[h]),T=(0,a.useCallback)(async()=>{let{valid:e,errors:s}=await _();if(!e){let e=s.slice(0,3).join(", ")+(s.length>3?` (+${s.length-3} more)`:"");return d.toast.error("Please complete all required fields",{description:e}),!1}return(0,eh.getVisibleSteps)(i.formData).indexOf(i.currentStep),n(e=>{let s=new Set(e.completedSteps);s.add(e.currentStep);let a=(0,eh.getVisibleSteps)(e.formData),t=a.indexOf(e.currentStep)+1,r=t<a.length?a[t]:e.currentStep;return{...e,completedSteps:s,currentStep:r}}),await F(),!0},[_,F,i.formData,i.currentStep]),k=(0,a.useCallback)(()=>{g>0&&n(e=>({...e,currentStep:h[g-1]}))},[g,h]),D=(0,a.useCallback)(async()=>{o.current&&(clearTimeout(o.current),o.current=null);let e=(0,eh.getVisibleSteps)(i.formData);for(let s=0;s<e.length;s++){let a=e[s],t=s+1,r=`step${a}`,l=i.formData[r],n=(0,eh.getStepSchema)(a);if(n)try{await n.parseAsync(l||(0,eh.getStepDefaults)(a))}catch(r){let e=r.issues?.map(e=>e.message)||[],s=e.slice(0,3).join(", ")+(e.length>3?` (+${e.length-3} more)`:"");return d.toast.error(`Please complete Step ${t}: ${eh.STEP_CONFIG[a-1].title}`,{description:s||"Please fill in all required fields"}),S(a),!1}}n(e=>({...e,isSaving:!0}));try{let s={};for(let a of e){let e=`step${a}`;i.formData[e]&&(s[e]=i.formData[e])}let a={document_type:"questionnaire",custom_label:"KYC Compliance Questionnaire",metadata:{...s,lastCompletedStep:10,wizardVersion:"2.0",submittedAt:new Date().toISOString()},status:"pending"};if(!(i.submissionId?await fetch(`/api/investors/me/kyc-submissions/${i.submissionId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}):await fetch("/api/investors/me/kyc-submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to submit questionnaire");return x.current=!0,n(e=>({...e,isSaving:!1,lastSavedAt:new Date})),d.toast.success("Questionnaire submitted successfully!"),t?.(),!0}catch(e){return console.error("Failed to submit:",e),n(e=>({...e,isSaving:!1})),d.toast.error("Failed to submit questionnaire"),!1}},[i.formData,i.submissionId,S,t]),I={currentStep:i.currentStep,formData:i.formData,isLoading:i.isLoading,isSaving:i.isSaving,lastSavedAt:i.lastSavedAt,state:i,visibleSteps:h,totalVisibleSteps:p,currentStepIndex:g,progress:b,currentStepConfig:v,isFirstStep:y,isLastStep:N,canGoNext:!N,canGoBack:!y,goToStep:S,nextStep:T,previousStep:k,updateStepData:C,validateCurrentStep:_,saveProgress:F,submitQuestionnaire:D,getStepData:w};return(0,s.jsx)(ep.Provider,{value:I,children:e})}function eg(){let e=(0,a.useContext)(ep);if(!e)throw Error("useWizard must be used within a WizardProvider");return e}function ef(){let{state:e,visibleSteps:a,currentStepIndex:t,progress:r,goToStep:l}=eg();return(0,s.jsxs)("div",{className:"w-full space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground mb-2",children:[(0,s.jsxs)("span",{className:"font-medium",children:["Step ",t+1," of ",a.length]}),(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[e.isSaving&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"h-3 w-3 animate-spin"}),(0,s.jsx)("span",{children:"Saving..."})]}),!e.isSaving&&e.lastSavedAt&&(0,s.jsxs)("span",{className:"text-emerald-500 flex items-center gap-1",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-3 w-3"}),"Saved"]}),(0,s.jsxs)("span",{children:[r,"% complete"]})]})]}),(0,s.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full transition-all duration-500 ease-out",style:{width:`${r}%`}})})]}),(0,s.jsx)("div",{className:"flex justify-between gap-1 pt-2",children:a.map((a,r)=>{let i=eh.STEP_CONFIG[a-1],n=e.completedSteps.has(a),o=a===e.currentStep,d=n||r<=t+1;return(0,s.jsxs)("button",{onClick:()=>d&&l(a),disabled:!d,className:(0,ed.cn)("group flex flex-col items-center flex-1 transition-all duration-200",d?"cursor-pointer":"cursor-not-allowed opacity-50"),title:i.title,children:[(0,s.jsx)("div",{className:(0,ed.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300",n&&"bg-emerald-500 text-white",o&&!n&&"bg-emerald-100 border-2 border-emerald-500 text-emerald-600",!n&&!o&&"bg-gray-100 text-gray-500 border border-gray-200",d&&!o&&"group-hover:scale-110"),children:n?(0,s.jsx)(Y.CheckCircle2,{className:"h-4 w-4"}):(0,s.jsx)("span",{className:"text-xs font-medium",children:r+1})}),(0,s.jsx)("span",{className:(0,ed.cn)("hidden md:block text-[10px] mt-1 text-center max-w-[60px] truncate transition-colors",o?"text-emerald-600 font-medium":"text-gray-500"),children:i.title})]},a)})})]})}var eb=e.i(758171),ev=e.i(197098),ey=e.i(932735);function eN({onSubmit:e,isSubmitting:a}={}){let{isSaving:t,isFirstStep:l,isLastStep:i,canGoBack:n,nextStep:d,previousStep:c,saveProgress:m,submitQuestionnaire:x}=eg(),u=a??t,h=async()=>{await d()},j=async()=>{e?await e():await x()};return(0,s.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-zinc-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(r.Button,{type:"button",variant:"outline",onClick:c,disabled:!n||u,className:"gap-2 border-gray-300 dark:border-zinc-600 hover:bg-gray-50 dark:hover:bg-zinc-800",children:[(0,s.jsx)(eb.ChevronLeft,{className:"h-4 w-4"}),"Back"]}),(0,s.jsxs)(r.Button,{type:"button",variant:"ghost",onClick:()=>m(),disabled:u,className:"gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800",children:[t?(0,s.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(p.Save,{className:"h-4 w-4"}),"Save Progress"]})]}),(0,s.jsx)("div",{children:i?(0,s.jsx)(r.Button,{type:"button",onClick:j,disabled:u,className:"gap-2 bg-emerald-600 hover:bg-emerald-700",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}),"Submitting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey.Send,{className:"h-4 w-4"}),"Submit Questionnaire"]})}):(0,s.jsx)(r.Button,{type:"button",onClick:h,disabled:u,className:"gap-2 bg-emerald-600 hover:bg-emerald-700",children:u?(0,s.jsx)(o.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:["Continue",(0,s.jsx)(ev.ChevronRight,{className:"h-4 w-4"})]})})})]})}var ew=e.i(795988),eC=e.i(476817),e_=e.i(586145);function eF(){let{getStepData:e,updateStepData:t}=eg(),r=e("step1"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step1Schema),defaultValues:r||(0,eh.getStepDefaults)(1)});return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step1",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Tell us about yourself"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"We need some basic information to get started"})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(e_.FormField,{control:l.control,name:"fullName",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Full Legal Name"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"John Smith",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"dateOfBirth",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Date of Birth"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{type:"date",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(e_.FormField,{control:l.control,name:"nationality",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Nationality"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"e.g. British",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"countryOfResidence",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Country of Residence"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"e.g. United Kingdom",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),(0,s.jsx)(e_.FormField,{control:l.control,name:"residentialAddress",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Residential Address"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"Street address",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(e_.FormField,{control:l.control,name:"city",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"City"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"London",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"postalCode",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Postal Code"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"SW1A 1AA",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(e_.FormField,{control:l.control,name:"email",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Email Address"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{type:"email",placeholder:"john@example.com",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"phone",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Phone Number"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{type:"tel",placeholder:"+44 20 1234 5678",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(e_.FormField,{control:l.control,name:"taxResidencyCountry",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Tax Residency Country"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"e.g. United Kingdom",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"taxIdNumber",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Tax ID Number (Optional)"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"National Insurance / SSN / TIN",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]})]})})]})}var eS=e.i(460063),eT=e.i(691974),ek=e.i(682950),eD=e.i(385838);let eI={individual:(0,s.jsx)(_.User,{className:"h-5 w-5"}),joint:(0,s.jsx)(R.Users,{className:"h-5 w-5"}),trust:(0,s.jsx)(eD.Landmark,{className:"h-5 w-5"}),corporation:(0,s.jsx)(D.Building2,{className:"h-5 w-5"}),partnership:(0,s.jsx)(eT.Briefcase,{className:"h-5 w-5"}),other:(0,s.jsx)(ek.HelpCircle,{className:"h-5 w-5"})};function eA(){let{getStepData:e,updateStepData:t}=eg(),r=e("step2"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step2Schema),defaultValues:r||(0,eh.getStepDefaults)(2)}),i=l.watch("investmentType");return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step2",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"How will you be investing?"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Select the type of investment account"})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(e_.FormField,{control:l.control,name:"investmentType",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eS.RadioGroup,{onValueChange:e.onChange,value:e.value,className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:eh.investmentTypeOptions.map(a=>(0,s.jsxs)("label",{className:(0,ed.cn)("flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all",e.value===a.value?"border-emerald-500 bg-emerald-50 dark:bg-emerald-950":"border-border hover:border-muted-foreground/50 bg-card"),children:[(0,s.jsx)(eS.RadioGroupItem,{value:a.value,className:"sr-only"}),(0,s.jsx)("div",{className:(0,ed.cn)("p-2 rounded-lg",e.value===a.value?"bg-emerald-500 text-white":"bg-muted text-muted-foreground"),children:eI[a.value]}),(0,s.jsx)("span",{className:"font-medium",children:a.label})]},a.value))})}),(0,s.jsx)(e_.FormMessage,{})]})}),"other"===i&&(0,s.jsx)(e_.FormField,{control:l.control,name:"investmentTypeOther",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Please specify"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"Describe your investment type",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]})})]})}var eP=e.i(312692);function eE(){let{getStepData:e,updateStepData:t}=eg(),r=e("step3"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step3Schema),defaultValues:r||(0,eh.getStepDefaults)(3)}),i=l.watch("isWellInformed");return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step3",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Investor Status"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Are you a well-informed or professional investor?"})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(e_.FormField,{control:l.control,name:"isWellInformed",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Do you qualify as a well-informed investor?"}),(0,s.jsx)(e_.FormDescription,{children:"A well-informed investor typically has significant investment experience, a net worth exceeding €1,250,000, or is advised by a regulated professional."}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eS.RadioGroup,{onValueChange:e.onChange,value:e.value,className:"grid gap-3 md:grid-cols-3 mt-4",children:[{value:"yes",label:"Yes",icon:Y.CheckCircle2,color:"emerald"},{value:"no",label:"No",icon:v.XCircle,color:"red"},{value:"unsure",label:"I'm not sure",icon:ek.HelpCircle,color:"amber"}].map(a=>{let t=a.icon,r=e.value===a.value;return(0,s.jsxs)("label",{className:(0,ed.cn)("flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all",r?`border-${a.color}-500 bg-${a.color}-500/10`:"border-border hover:border-muted-foreground/50",r&&"yes"===a.value&&"border-emerald-500 bg-emerald-500/10",r&&"no"===a.value&&"border-red-500 bg-red-500/10",r&&"unsure"===a.value&&"border-amber-500 bg-amber-500/10"),children:[(0,s.jsx)(eS.RadioGroupItem,{value:a.value,className:"sr-only"}),(0,s.jsx)(t,{className:(0,ed.cn)("h-5 w-5",r&&"yes"===a.value&&"text-emerald-500",r&&"no"===a.value&&"text-red-500",r&&"unsure"===a.value&&"text-amber-500",!r&&"text-slate-500")}),(0,s.jsx)("span",{className:"font-medium",children:a.label})]},a.value)})})}),(0,s.jsx)(e_.FormMessage,{})]})}),("yes"===i||"unsure"===i)&&(0,s.jsx)(e_.FormField,{control:l.control,name:"wellInformedBasis",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"On what basis? (Select all that apply)"}),(0,s.jsx)("div",{className:"grid gap-3 mt-3",children:eh.wellInformedBasisOptions.map(a=>(0,s.jsxs)("label",{className:(0,ed.cn)("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all",e.value?.includes(a.value)?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,s.jsx)(eP.Checkbox,{checked:e.value?.includes(a.value),onCheckedChange:s=>{let t=e.value||[];s?e.onChange([...t,a.value]):e.onChange(t.filter(e=>e!==a.value))}}),(0,s.jsx)("span",{children:a.label})]},a.value))}),(0,s.jsx)(e_.FormMessage,{})]})}),"yes"===i&&(0,s.jsx)(e_.FormField,{control:l.control,name:"wellInformedEvidence",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Additional details (Optional)"}),(0,s.jsx)(e_.FormDescription,{children:"Provide any additional information supporting your investor status"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(u.Textarea,{placeholder:"e.g., Years of experience, relevant certifications, regulated advisor details...",className:"min-h-[100px]",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]})})]})}var eL=e.i(661521),eB=e.i(615870);function eR({control:e,name:a,label:t,description:r,detailsName:l,detailsLabel:i,showDetails:n}){return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(e_.FormField,{control:e,name:a,render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(e_.FormLabel,{className:"text-base",children:t}),r&&(0,s.jsx)(e_.FormDescription,{className:"mt-1",children:r})]}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eS.RadioGroup,{onValueChange:e.onChange,value:e.value,className:"flex gap-4",children:["yes","no"].map(a=>(0,s.jsxs)("label",{className:(0,ed.cn)("px-4 py-2 rounded-lg border cursor-pointer transition-all capitalize",e.value===a?"yes"===a?"border-amber-500 bg-amber-50 dark:bg-amber-950 text-amber-600 dark:text-amber-400":"border-emerald-500 bg-emerald-50 dark:bg-emerald-950 text-emerald-600 dark:text-emerald-400":"border-border hover:border-muted-foreground/50 bg-card"),children:[(0,s.jsx)(eS.RadioGroupItem,{value:a,className:"sr-only"}),a]},a))})})]}),(0,s.jsx)(e_.FormMessage,{})]})}),n&&l&&(0,s.jsx)(e_.FormField,{control:e,name:l,render:({field:e})=>(0,s.jsxs)(e_.FormItem,{className:"pl-4 border-l-2 border-border",children:[(0,s.jsx)(e_.FormLabel,{children:i||"Please provide details"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(u.Textarea,{placeholder:"Provide relevant details...",className:"min-h-[80px]",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]})}function eU(){let{getStepData:e,updateStepData:t}=eg(),r=e("step4"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step4Schema),defaultValues:r||(0,eh.getStepDefaults)(4)}),i=l.watch();return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step4",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Compliance Declarations"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Required regulatory questions"})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,s.jsx)(er.AlertTriangle,{className:"h-5 w-5 text-amber-500"}),"Political Exposure"]}),(0,s.jsx)(eR,{control:l.control,name:"isPEP",label:"Are you a Politically Exposed Person (PEP)?",description:"A PEP is someone entrusted with a prominent public function",detailsName:"pepDetails",detailsLabel:"Please provide details about your role",showDetails:"yes"===i.isPEP}),(0,s.jsx)(eR,{control:l.control,name:"isRelatedToPEP",label:"Are you related to or closely associated with a PEP?",detailsName:"relatedPEPDetails",detailsLabel:"Please describe the relationship",showDetails:"yes"===i.isRelatedToPEP})]}),(0,s.jsx)(eL.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Legal & Regulatory Status"}),(0,s.jsx)(eR,{control:l.control,name:"isSanctioned",label:"Are you subject to any sanctions or restrictions?",detailsName:"sanctionedDetails",showDetails:"yes"===i.isSanctioned}),(0,s.jsx)(eR,{control:l.control,name:"hasCriminalRecord",label:"Do you have any criminal convictions related to financial matters?",detailsName:"criminalDetails",showDetails:"yes"===i.hasCriminalRecord}),(0,s.jsx)(eR,{control:l.control,name:"isUnderInvestigation",label:"Are you currently under any regulatory investigation?",detailsName:"investigationDetails",showDetails:"yes"===i.isUnderInvestigation}),(0,s.jsx)(eR,{control:l.control,name:"hasBankruptcy",label:"Have you been declared bankrupt or insolvent?",detailsName:"bankruptcyDetails",showDetails:"yes"===i.hasBankruptcy})]}),(0,s.jsx)(eL.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,s.jsx)(eB.Flag,{className:"h-5 w-5"}),"US Person Status"]}),(0,s.jsx)(A.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:(0,s.jsx)(A.AlertDescription,{children:"Your answer here determines if additional US-specific compliance steps are required."})}),(0,s.jsx)(eR,{control:l.control,name:"isUSPerson",label:"Are you a US Person for tax purposes?",description:"Includes US citizens, green card holders, and those with substantial US presence"}),"yes"===i.isUSPerson&&(0,s.jsx)(A.Alert,{className:"bg-amber-500/10 border-amber-500/30",children:(0,s.jsx)(A.AlertDescription,{children:"Additional US compliance steps will be shown next."})})]}),(0,s.jsx)(eL.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Source of Funds"}),(0,s.jsx)(e_.FormField,{control:l.control,name:"sourceOfFunds",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"What is the source of funds for this investment?"}),(0,s.jsx)(e_.FormDescription,{children:"Describe the origin of funds (e.g., salary, business income, inheritance)"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(u.Textarea,{placeholder:"e.g., Savings from employment income over the past 10 years...",className:"min-h-[100px]",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"sourceOfWealth",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"What is your overall source of wealth?"}),(0,s.jsx)(e_.FormDescription,{children:"Describe how you accumulated your wealth"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(u.Textarea,{placeholder:"e.g., Built and sold a technology company, professional career...",className:"min-h-[100px]",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]})]})})]})}function eM({control:e,name:a,label:t}){return(0,s.jsx)(e_.FormField,{control:e,name:a,render:({field:e})=>(0,s.jsxs)(e_.FormItem,{className:"flex items-center justify-between gap-4 p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors",children:[(0,s.jsx)(e_.FormLabel,{className:"flex-1 cursor-pointer font-normal",children:t}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eS.RadioGroup,{onValueChange:e.onChange,value:e.value,className:"flex gap-2",children:["yes","no"].map(a=>(0,s.jsxs)("label",{className:(0,ed.cn)("px-3 py-1.5 rounded text-sm font-medium cursor-pointer transition-all capitalize",e.value===a?"yes"===a?"bg-amber-500 text-white":"bg-emerald-500 text-white":"bg-muted text-muted-foreground hover:bg-muted/80"),children:[(0,s.jsx)(eS.RadioGroupItem,{value:a,className:"sr-only"}),a]},a))})}),(0,s.jsx)(e_.FormMessage,{})]})})}function eO(){let{getStepData:e,updateStepData:t}=eg(),r=e("step5"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step5Schema),defaultValues:r||(0,eh.getStepDefaults)(5)});return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step5",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(eB.Flag,{className:"h-6 w-6"}),"US Person Definition"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Detailed US tax residency questions"})]}),(0,s.jsxs)(A.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:[(0,s.jsx)(q.Info,{className:"h-4 w-4"}),(0,s.jsx)(A.AlertTitle,{children:"Why we ask these questions"}),(0,s.jsx)(A.AlertDescription,{children:"Under Regulation S and FATCA, we need to determine your US Person status for tax and regulatory compliance purposes."})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(eM,{control:l.control,name:"isUSCitizen",label:"Are you a US citizen?"}),(0,s.jsx)(eM,{control:l.control,name:"isUSResident",label:"Are you a US resident alien (permanent resident)?"}),(0,s.jsx)(eM,{control:l.control,name:"hasUSGreenCard",label:"Do you hold a US Green Card?"}),(0,s.jsx)(eM,{control:l.control,name:"hasSubstantialUSPresence",label:"Have you spent 183+ days in the US in the past 3 years?"}),(0,s.jsx)(eM,{control:l.control,name:"hasUSMailingAddress",label:"Do you have a US mailing address?"}),(0,s.jsx)(eM,{control:l.control,name:"hasUSPhoneNumber",label:"Do you have a US phone number?"}),(0,s.jsx)(eM,{control:l.control,name:"hasUSBankAccount",label:"Do you have a US bank account?"}),(0,s.jsx)(eM,{control:l.control,name:"hasUSPowerOfAttorney",label:"Have you granted power of attorney to someone in the US?"}),(0,s.jsx)(e_.FormField,{control:l.control,name:"usConnectionDetails",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{className:"pt-4",children:[(0,s.jsx)(e_.FormLabel,{children:"Additional US Connection Details (Optional)"}),(0,s.jsx)(e_.FormDescription,{children:"Provide any additional context about your US connections"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(u.Textarea,{placeholder:"Any other relevant information about your US connections...",className:"min-h-[80px]",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]})})]})}var ez=e.i(196767);let eH=[{value:"income",label:"Annual income over $200K (or $300K joint)",icon:ez.DollarSign},{value:"net_worth",label:"Net worth over $1M (excluding primary residence)",icon:D.Building2},{value:"professional",label:"Licensed professional (Series 7, 65, or 82)",icon:eT.Briefcase},{value:"entity",label:"Entity with $5M+ in assets",icon:D.Building2},{value:"other",label:"Other qualifying criteria",icon:ek.HelpCircle}];function eY({control:e,name:a,label:t,description:r}){return(0,s.jsx)(e_.FormField,{control:e,name:a,render:({field:e})=>(0,s.jsxs)(e_.FormItem,{className:"p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(e_.FormLabel,{className:"text-base font-medium",children:t}),r&&(0,s.jsx)(e_.FormDescription,{className:"mt-1",children:r})]}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eS.RadioGroup,{onValueChange:e.onChange,value:e.value,className:"flex gap-2",children:["yes","no"].map(a=>(0,s.jsxs)("label",{className:(0,ed.cn)("px-4 py-2 rounded-lg text-sm font-medium cursor-pointer transition-all capitalize",e.value===a?"yes"===a?"bg-emerald-500 text-white":"bg-red-500 text-white":"bg-muted text-muted-foreground hover:bg-muted/80"),children:[(0,s.jsx)(eS.RadioGroupItem,{value:a,className:"sr-only"}),a]},a))})})]}),(0,s.jsx)(e_.FormMessage,{})]})})}function eq(){let{getStepData:e,updateStepData:t}=eg(),r=e("step6"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step6Schema),defaultValues:r||(0,eh.getStepDefaults)(6)}),i=l.watch();return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step6",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(C.FileText,{className:"h-6 w-6"}),"Offer Details"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Accreditation and offering acknowledgments"})]}),(0,s.jsxs)(A.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:[(0,s.jsx)(C.FileText,{className:"h-4 w-4"}),(0,s.jsx)(A.AlertTitle,{children:"US Investor Requirements"}),(0,s.jsx)(A.AlertDescription,{children:"Under Regulation D, we need to verify your accredited investor status before you can participate in this offering."})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(eY,{control:l.control,name:"isAccreditedInvestor",label:"Are you an accredited investor?",description:"Under SEC Regulation D, accredited investors meet specific income or net worth thresholds"}),"yes"===i.isAccreditedInvestor&&(0,s.jsx)(e_.FormField,{control:l.control,name:"accreditationBasis",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"On what basis do you qualify?"}),(0,s.jsx)(e_.FormDescription,{children:"Select the criteria that best describes your accredited investor status"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eS.RadioGroup,{onValueChange:e.onChange,value:e.value,className:"grid gap-3 mt-3",children:eH.map(a=>{let t=a.icon;return(0,s.jsxs)("label",{className:(0,ed.cn)("flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all",e.value===a.value?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,s.jsx)(eS.RadioGroupItem,{value:a.value,className:"sr-only"}),(0,s.jsx)("div",{className:(0,ed.cn)("p-2 rounded-lg",e.value===a.value?"bg-emerald-500 text-white":"bg-muted text-muted-foreground"),children:(0,s.jsx)(t,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"font-medium",children:a.label}),e.value===a.value&&(0,s.jsx)(Y.CheckCircle2,{className:"h-5 w-5 text-emerald-500 ml-auto"})]},a.value)})})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(eY,{control:l.control,name:"hasReceivedOfferingMaterials",label:"Have you received and reviewed the offering materials?",description:"Including the Private Placement Memorandum (PPM) and related documents"}),(0,s.jsx)(eY,{control:l.control,name:"understandsRestrictions",label:"Do you understand the restrictions on transfer and resale?",description:"Securities offered under Regulation D cannot be freely resold and are subject to holding periods"}),"yes"===i.hasReceivedOfferingMaterials&&"yes"===i.understandsRestrictions&&(0,s.jsxs)(A.Alert,{className:"bg-emerald-500/10 border-emerald-500/30",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),(0,s.jsx)(A.AlertDescription,{children:"Great! You've confirmed receipt of materials and understanding of restrictions."})]})]})})]})}var eV=e.i(758768);let eK=[{name:"acknowledgesFATCA",title:"FATCA Acknowledgment",description:"I acknowledge that as a US Person, I am subject to the Foreign Account Tax Compliance Act (FATCA) and may be required to provide additional documentation.",icon:"🏛️"},{name:"willProvideW9",title:"Form W-9 Requirement",description:"I agree to provide a completed Form W-9 (Request for Taxpayer Identification Number and Certification) if required.",icon:"📋"},{name:"understandsWithholding",title:"Withholding Requirements",description:"I understand that backup withholding may apply at a rate of 24% if I fail to provide a valid TIN or fail to certify my status.",icon:"💰"},{name:"certifiesTaxCompliance",title:"Tax Compliance Certification",description:"I certify that I am in compliance with my US federal and state tax obligations, or I am working with a tax advisor to resolve any outstanding issues.",icon:"✅"},{name:"acknowledgesReportingObligations",title:"Reporting Obligations",description:"I acknowledge that the fund may be required to report my investment information to the IRS and/or relevant tax authorities under FATCA and other applicable laws.",icon:"📊"}];function eG(){let{getStepData:e,updateStepData:t}=eg(),r=e("step7"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step7Schema),defaultValues:r||(0,eh.getStepDefaults)(7)}),i=l.watch(),n=eK.every(e=>!0===i[e.name]);return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step7",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(eV.FileCheck,{className:"h-6 w-6"}),"US Tax Compliance"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"FATCA and reporting requirements"})]}),(0,s.jsxs)(A.Alert,{className:"bg-amber-500/10 border-amber-500/30",children:[(0,s.jsx)(er.AlertTriangle,{className:"h-4 w-4"}),(0,s.jsx)(A.AlertTitle,{children:"Important Tax Information"}),(0,s.jsx)(A.AlertDescription,{children:"As a US Person, you are subject to specific tax reporting requirements. Please review and acknowledge each item below."})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsx)("div",{className:"space-y-4",children:eK.map(e=>(0,s.jsx)(e_.FormField,{control:l.control,name:e.name,render:({field:a})=>(0,s.jsxs)(e_.FormItem,{className:(0,ed.cn)("p-4 rounded-lg border-2 transition-all",a.value?"border-emerald-500/50 bg-emerald-500/5":"border-border hover:border-muted-foreground/50"),children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eP.Checkbox,{checked:a.value,onCheckedChange:a.onChange,className:"mt-1"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(e_.FormLabel,{className:"flex items-center gap-2 text-base font-medium cursor-pointer",children:[(0,s.jsx)("span",{children:e.icon}),e.title,a.value&&(0,s.jsx)(Y.CheckCircle2,{className:"h-4 w-4 text-emerald-500 ml-auto"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]})]}),(0,s.jsx)(e_.FormMessage,{})]})},e.name))})}),n&&(0,s.jsxs)(A.Alert,{className:"bg-emerald-500/10 border-emerald-500/30",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),(0,s.jsx)(A.AlertDescription,{children:"All US tax compliance acknowledgments completed. You may proceed to the next step."})]})]})}var e$=e.i(733179),eW=e.i(522195),eJ=e.i(416200);let eQ=[{value:"private_equity",label:"Private Equity"},{value:"venture_capital",label:"Venture Capital"},{value:"hedge_funds",label:"Hedge Funds"},{value:"real_estate",label:"Real Estate (non-REIT)"},{value:"commodities",label:"Commodities"},{value:"structured_products",label:"Structured Products"},{value:"cryptocurrency",label:"Cryptocurrency"}];function eX({field:e,options:a,columns:t=2}){return(0,s.jsx)(eS.RadioGroup,{onValueChange:e.onChange,value:e.value,className:(0,ed.cn)("grid gap-3 mt-2",3===t?"md:grid-cols-3":"md:grid-cols-2"),children:a.map(a=>(0,s.jsxs)("label",{className:(0,ed.cn)("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all",e.value===a.value?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,s.jsx)(eS.RadioGroupItem,{value:a.value,className:"sr-only"}),(0,s.jsx)("div",{className:(0,ed.cn)("w-4 h-4 rounded-full border-2 flex items-center justify-center",e.value===a.value?"border-emerald-500":"border-slate-500"),children:e.value===a.value&&(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})}),(0,s.jsx)("span",{className:"text-sm",children:a.label})]},a.value))})}function eZ(){let{getStepData:e,updateStepData:t}=eg(),r=e("step8"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step8Schema),defaultValues:r||(0,eh.getStepDefaults)(8)}),i=l.watch();return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step8",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(e$.TrendingUp,{className:"h-6 w-6"}),"Investment Suitability"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Help us understand your financial profile"})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,s.jsx)(eW.GraduationCap,{className:"h-5 w-5 text-blue-500"}),"Education & Employment"]}),(0,s.jsx)(e_.FormField,{control:l.control,name:"educationLevel",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Highest level of education"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eX,{field:e,options:eh.educationLevelOptions,columns:3})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"employmentStatus",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Employment status"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eX,{field:e,options:eh.employmentStatusOptions,columns:3})}),(0,s.jsx)(e_.FormMessage,{})]})}),("employed"===i.employmentStatus||"self_employed"===i.employmentStatus)&&(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(e_.FormField,{control:l.control,name:"occupation",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Occupation"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"e.g., Software Engineer",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"employer",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"self_employed"===i.employmentStatus?"Business Name":"Employer"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"Company name",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),(0,s.jsx)(e_.FormField,{control:l.control,name:"yearsInvestingExperience",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Years of investment experience"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{type:"number",min:"0",max:"60",placeholder:"e.g., 10",...e,className:"max-w-[150px]"})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),(0,s.jsx)(eL.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,s.jsx)(ez.DollarSign,{className:"h-5 w-5 text-emerald-500"}),"Financial Profile"]}),(0,s.jsx)(e_.FormField,{control:l.control,name:"annualIncome",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Annual income"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eX,{field:e,options:eh.incomeRangeOptions})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"netWorth",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Total net worth (excluding primary residence)"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eX,{field:e,options:eh.netWorthRangeOptions})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"liquidNetWorth",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Liquid net worth (cash and readily convertible assets)"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eX,{field:e,options:eh.netWorthRangeOptions})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),(0,s.jsx)(eL.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,s.jsx)(eJ.Target,{className:"h-5 w-5 text-purple-500"}),"Investment Preferences"]}),(0,s.jsx)(e_.FormField,{control:l.control,name:"investmentObjective",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Primary investment objective"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eX,{field:e,options:eh.investmentObjectiveOptions})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"riskTolerance",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Risk tolerance"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eX,{field:e,options:eh.riskToleranceOptions})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"investmentHorizon",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsxs)(e_.FormLabel,{className:"flex items-center gap-2",children:[(0,s.jsx)(y.Clock,{className:"h-4 w-4"}),"Investment time horizon"]}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eX,{field:e,options:eh.timeHorizonOptions})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),(0,s.jsx)(eL.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,s.jsx)(eT.Briefcase,{className:"h-5 w-5 text-amber-500"}),"Alternative Investment Experience"]}),(0,s.jsx)(e_.FormField,{control:l.control,name:"percentageOfNetWorthToInvest",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Percentage of net worth you plan to invest in this offering"}),(0,s.jsx)(e_.FormDescription,{children:"Enter a percentage between 1 and 100"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 max-w-[150px]",children:[(0,s.jsx)(m.Input,{type:"number",min:"1",max:"100",placeholder:"e.g., 5",...e}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"%"})]})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:l.control,name:"hasAlternativeInvestmentExperience",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Do you have prior experience with alternative investments?"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eS.RadioGroup,{onValueChange:e.onChange,value:e.value,className:"flex gap-4 mt-2",children:["yes","no"].map(a=>(0,s.jsxs)("label",{className:(0,ed.cn)("px-6 py-2 rounded-lg border cursor-pointer transition-all capitalize",e.value===a?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,s.jsx)(eS.RadioGroupItem,{value:a,className:"sr-only"}),a]},a))})}),(0,s.jsx)(e_.FormMessage,{})]})}),"yes"===i.hasAlternativeInvestmentExperience&&(0,s.jsx)(e_.FormField,{control:l.control,name:"alternativeInvestmentTypes",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Which types of alternative investments? (Select all that apply)"}),(0,s.jsx)("div",{className:"grid gap-2 mt-2 md:grid-cols-2",children:eQ.map(a=>(0,s.jsxs)("label",{className:(0,ed.cn)("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all",e.value?.includes(a.value)?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,s.jsx)(eP.Checkbox,{checked:e.value?.includes(a.value),onCheckedChange:s=>{let t=e.value||[];s?e.onChange([...t,a.value]):e.onChange(t.filter(e=>e!==a.value))}}),(0,s.jsx)("span",{className:"text-sm",children:a.label})]},a.value))}),(0,s.jsx)(e_.FormMessage,{})]})})]})]})})]})}var e0=e.i(937368),e2=e.i(553426),e5=e.i(201495),e1=e.i(572826);let e4=(0,e.i(410587).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),e3=[{name:"acknowledgesIlliquidity",title:"Illiquidity Risk",description:"I understand that interests in the Fund are illiquid and there is no public market for these securities. I may not be able to sell my investment or access my capital for an extended period.",icon:e2.Lock},{name:"acknowledgesLossRisk",title:"Capital Loss Risk",description:"I understand that investing in alternative investments involves significant risks, including the potential loss of my entire investment.",icon:ez.DollarSign},{name:"acknowledgesNoGuarantees",title:"No Guarantees",description:"I understand that there are no guarantees of returns or distributions, and past performance is not indicative of future results.",icon:er.AlertTriangle},{name:"acknowledgesLimitedInfo",title:"Limited Information",description:"I understand that I may receive limited information about the underlying investments and that the Fund is not subject to the same disclosure requirements as public companies.",icon:C.FileText},{name:"acknowledgesNoRegulation",title:"Limited Regulatory Protection",description:"I understand that alternative investment funds are generally not registered with the SEC and do not receive the same regulatory protections as registered investment companies.",icon:Q.Shield},{name:"acknowledgesConflicts",title:"Conflicts of Interest",description:"I understand that the Fund Manager and its affiliates may have conflicts of interest in managing the Fund, and I have reviewed the disclosure of potential conflicts.",icon:R.Users},{name:"acknowledgesTaxImplications",title:"Tax Implications",description:"I understand that this investment may have complex tax implications and I should consult with my own tax advisor regarding my specific situation.",icon:e1.Receipt},{name:"acknowledgesFees",title:"Fees and Expenses",description:"I understand and accept the fee structure including management fees, performance fees, and other expenses that will reduce my returns.",icon:e5.Scale},{name:"hasReadOfferingDocs",title:"Offering Documents Review",description:"I confirm that I have received, read, and understand the Private Placement Memorandum (PPM), Limited Partnership Agreement, and other offering documents.",icon:e4},{name:"hasSoughtIndependentAdvice",title:"Independent Advice",description:"I confirm that I have had the opportunity to seek independent legal, tax, and financial advice regarding this investment.",icon:e5.Scale}];function e6(){let{getStepData:e,updateStepData:t}=eg(),r=e("step9"),l=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step9Schema),defaultValues:r||(0,eh.getStepDefaults)(9)}),i=l.watch(),n=e3.length,o=e3.filter(e=>!0===i[e.name]).length;return(0,a.useEffect)(()=>{let e=l.watch(e=>{t("step9",e)});return()=>e.unsubscribe()},[l,t]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(er.AlertTriangle,{className:"h-6 w-6 text-amber-500"}),"Risk Acknowledgments"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Please review and acknowledge each risk factor"})]}),(0,s.jsxs)("div",{className:"bg-muted p-4 rounded-lg space-y-2 border border-border",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Acknowledgment Progress"}),(0,s.jsxs)("span",{className:"font-medium",children:[o," of ",n," completed"]})]}),(0,s.jsx)(e0.Progress,{value:o/n*100,className:"h-2"})]}),(0,s.jsxs)(A.Alert,{className:"bg-amber-500/10 border-amber-500/30",children:[(0,s.jsx)(er.AlertTriangle,{className:"h-4 w-4"}),(0,s.jsx)(A.AlertTitle,{children:"Important"}),(0,s.jsx)(A.AlertDescription,{children:"Please carefully read and acknowledge each item below. These acknowledgments confirm your understanding of the risks associated with this investment."})]}),(0,s.jsx)(e_.Form,{...l,children:(0,s.jsx)("div",{className:"space-y-3",children:e3.map((e,a)=>{let t=e.icon;return(0,s.jsx)(e_.FormField,{control:l.control,name:e.name,render:({field:r})=>(0,s.jsxs)(e_.FormItem,{className:(0,ed.cn)("p-4 rounded-lg border-2 transition-all bg-card",r.value?"border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950":"border-border hover:border-muted-foreground/50"),children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eP.Checkbox,{checked:r.value,onCheckedChange:r.onChange,className:"mt-1"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(e_.FormLabel,{className:"flex items-center gap-2 text-base font-medium cursor-pointer",children:[(0,s.jsx)(t,{className:(0,ed.cn)("h-4 w-4",r.value?"text-emerald-500":"text-muted-foreground")}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground mr-2",children:[a+1,"."]}),e.title,r.value&&(0,s.jsx)(Y.CheckCircle2,{className:"h-4 w-4 text-emerald-500 ml-auto flex-shrink-0"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2 leading-relaxed",children:e.description})]})]}),(0,s.jsx)(e_.FormMessage,{})]})},e.name)})})}),o===n&&(0,s.jsxs)(A.Alert,{className:"bg-emerald-500/10 border-emerald-500/30",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),(0,s.jsx)(A.AlertDescription,{children:"All risk acknowledgments completed. You may proceed to the final step to review and sign."})]})]})}var e8=e.i(818798);let e9=[{name:"certifiesAccuracy",title:"Accuracy Certification",description:"I certify that all information provided in this questionnaire is true, complete, and accurate to the best of my knowledge."},{name:"certifiesNoOmissions",title:"No Material Omissions",description:"I certify that I have not omitted any material information that could affect the evaluation of my suitability for this investment."},{name:"agreesToUpdates",title:"Update Obligation",description:"I agree to promptly notify VERSO Holdings of any material changes to the information provided herein."},{name:"consentToProcessing",title:"Data Processing Consent",description:"I consent to the collection, processing, and storage of my personal information for compliance and regulatory purposes."}];function e7({icon:e,title:a,items:t}){return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h4",{className:"font-medium flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(e,{className:"h-4 w-4"}),a]}),(0,s.jsx)("div",{className:"grid gap-1 pl-6",children:t.filter(e=>e.value).map((e,a)=>(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:[e.label,":"]})," ",(0,s.jsx)("span",{className:"font-medium",children:e.value})]},a))})]})}function se(){let{getStepData:e,updateStepData:t,formData:r}=eg(),l=e("step10"),i=(0,ew.useForm)({resolver:(0,eC.zodResolver)(eh.step10Schema),defaultValues:l||(0,eh.getStepDefaults)(10)}),n=i.watch(),o=e9.every(e=>!0===n[e.name]);(0,a.useEffect)(()=>{let e=i.watch(e=>{t("step10",e)});return()=>e.unsubscribe()},[i,t]);let d=r.step1,c=r.step2,x=r.step4,u=r.step8;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(e8.PenTool,{className:"h-6 w-6 text-emerald-500"}),"Review & Sign"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Final review and certification"})]}),(0,s.jsxs)("div",{className:"bg-muted p-6 rounded-lg space-y-6 border border-border",children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,s.jsx)(C.FileText,{className:"h-5 w-5"}),"Application Summary"]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsx)(e7,{icon:_.User,title:"Personal Information",items:[{label:"Name",value:d?.fullName},{label:"Email",value:d?.email},{label:"Nationality",value:d?.nationality},{label:"Country",value:d?.countryOfResidence}]}),(0,s.jsx)(e7,{icon:eT.Briefcase,title:"Investment Details",items:[{label:"Type",value:c?.investmentType==="other"?c?.investmentTypeOther:c?.investmentType}]}),(0,s.jsx)(e7,{icon:Q.Shield,title:"Compliance Status",items:[{label:"PEP Status",value:x?.isPEP==="yes"?"Yes":"No"},{label:"US Person",value:x?.isUSPerson==="yes"?"Yes":"No"}]}),(0,s.jsx)(e7,{icon:e$.TrendingUp,title:"Investment Profile",items:[{label:"Risk Tolerance",value:u?.riskTolerance},{label:"Time Horizon",value:u?.investmentHorizon},{label:"Objective",value:u?.investmentObjective}]})]})]}),(0,s.jsx)(eL.Separator,{}),(0,s.jsx)(e_.Form,{...i,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Certifications"}),(0,s.jsx)("div",{className:"space-y-3",children:e9.map(e=>(0,s.jsx)(e_.FormField,{control:i.control,name:e.name,render:({field:a})=>(0,s.jsxs)(e_.FormItem,{className:(0,ed.cn)("p-4 rounded-lg border-2 transition-all bg-card",a.value?"border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950":"border-border hover:border-muted-foreground/50"),children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(eP.Checkbox,{checked:a.value,onCheckedChange:a.onChange,className:"mt-1"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(e_.FormLabel,{className:"flex items-center gap-2 text-base font-medium cursor-pointer",children:[e.title,a.value&&(0,s.jsx)(Y.CheckCircle2,{className:"h-4 w-4 text-emerald-500 ml-auto"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]})]}),(0,s.jsx)(e_.FormMessage,{})]})},e.name))})]}),(0,s.jsx)(eL.Separator,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,s.jsx)(e8.PenTool,{className:"h-5 w-5 text-emerald-500"}),"Electronic Signature"]}),(0,s.jsxs)(A.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:[(0,s.jsx)(C.FileText,{className:"h-4 w-4"}),(0,s.jsx)(A.AlertTitle,{children:"Electronic Signature Notice"}),(0,s.jsx)(A.AlertDescription,{children:"By typing your name below, you are providing an electronic signature that is legally equivalent to a handwritten signature under applicable law."})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(e_.FormField,{control:i.control,name:"signatureName",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsx)(e_.FormLabel,{children:"Type your full legal name"}),(0,s.jsx)(e_.FormDescription,{children:"This serves as your electronic signature"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{placeholder:"John Smith",className:"font-serif text-lg",...e})}),(0,s.jsx)(e_.FormMessage,{})]})}),(0,s.jsx)(e_.FormField,{control:i.control,name:"signatureDate",render:({field:e})=>(0,s.jsxs)(e_.FormItem,{children:[(0,s.jsxs)(e_.FormLabel,{className:"flex items-center gap-2",children:[(0,s.jsx)(M.Calendar,{className:"h-4 w-4"}),"Signature Date"]}),(0,s.jsx)(e_.FormDescription,{children:"Today's date"}),(0,s.jsx)(e_.FormControl,{children:(0,s.jsx)(m.Input,{type:"date",...e})}),(0,s.jsx)(e_.FormMessage,{})]})})]}),n.signatureName&&(0,s.jsxs)("div",{className:"p-4 bg-muted rounded-lg border border-border",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Signature Preview"}),(0,s.jsx)("p",{className:"font-serif text-2xl italic text-emerald-600 dark:text-emerald-400",children:n.signatureName})]})]})]})}),o&&n.signatureName&&(0,s.jsxs)(A.Alert,{className:"bg-emerald-500/10 border-emerald-500/30",children:[(0,s.jsx)(Y.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),(0,s.jsx)(A.AlertTitle,{children:"Ready to Submit"}),(0,s.jsx)(A.AlertDescription,{children:'All certifications completed and signature provided. Click "Submit" below to finalize your application.'})]})]})}function ss({onComplete:e}){let{currentStep:t,visibleSteps:r,formData:l,isLoading:i,submitQuestionnaire:n}=eg(),[d,c]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),j={1:(0,s.jsx)(eF,{}),2:(0,s.jsx)(eA,{}),3:(0,s.jsx)(eE,{}),4:(0,s.jsx)(eU,{}),5:(0,s.jsx)(eO,{}),6:(0,s.jsx)(eq,{}),7:(0,s.jsx)(eG,{}),8:(0,s.jsx)(eZ,{}),9:(0,s.jsx)(e6,{}),10:(0,s.jsx)(se,{})},g=async()=>{c(!0),p(null);try{if(!await n())return;x(!0),e?.()}catch(e){p(e instanceof Error?e.message:"Failed to submit questionnaire")}finally{c(!1)}};return i?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin mx-auto text-emerald-500"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading your questionnaire..."})]})}):m?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center space-y-6 max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"h-24 w-24 rounded-full bg-emerald-500/20 animate-pulse"})}),(0,s.jsx)(Y.CheckCircle2,{className:"h-16 w-16 mx-auto text-emerald-500 relative z-10"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(eu.Sparkles,{className:"h-5 w-5 text-amber-500"}),"Questionnaire Submitted!"]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Thank you for completing your KYC questionnaire. Our compliance team will review your submission and contact you if any additional information is needed."})]}),(0,s.jsxs)(A.Alert,{className:"bg-blue-500/10 border-blue-500/30 text-left",children:[(0,s.jsx)(A.AlertTitle,{children:"What happens next?"}),(0,s.jsx)(A.AlertDescription,{children:(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[(0,s.jsx)("li",{children:"Our team will review your submission within 2-3 business days"}),(0,s.jsx)("li",{children:"You may be asked to provide supporting documentation"}),(0,s.jsx)("li",{children:"You'll receive an email notification when your status is updated"})]})})]})]})}):(eh.STEP_CONFIG[t-1],(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(ef,{}),(0,s.jsx)("div",{className:"text-center py-2",children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Step ",r.indexOf(t)+1," of ",r.length]})}),u&&(0,s.jsxs)(A.Alert,{className:"bg-red-500/10 border-red-500/30",children:[(0,s.jsx)(er.AlertTriangle,{className:"h-4 w-4"}),(0,s.jsx)(A.AlertTitle,{children:"Submission Error"}),(0,s.jsx)(A.AlertDescription,{children:u})]}),(0,s.jsx)(h.Card,{className:"border-border bg-card shadow-sm",children:(0,s.jsx)(h.CardContent,{className:"pt-6",children:(0,s.jsx)("div",{className:"min-h-[400px]",children:j[t]})})}),(0,s.jsx)(eN,{onSubmit:g,isSubmitting:d})]}))}function sa({initialData:e,submissionId:a,onComplete:t}){return(0,s.jsx)(ej,{initialData:e,submissionId:a,onComplete:t,children:(0,s.jsx)(ss,{onComplete:t})})}function st({onComplete:e}){let[t,r]=(0,a.useState)(!0),[l,i]=(0,a.useState)(null),[n,d]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{r(!0);try{let e=await fetch("/api/investors/me/kyc-submissions");if(e.ok){let s=await e.json(),a=s.submissions?.find(e=>"questionnaire"===e.document_type&&e.metadata?.wizardVersion==="2.0");a&&a.metadata&&(i(a.metadata),d(a.id))}}catch(e){console.error("Failed to load KYC data",e)}finally{r(!1)}})()},[]),t)?(0,s.jsx)(h.Card,{children:(0,s.jsx)(h.CardContent,{className:"flex justify-center items-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading questionnaire..."})]})})}):(0,s.jsxs)(h.Card,{className:"border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-sm",children:[(0,s.jsxs)(h.CardHeader,{className:"border-b border-gray-100 dark:border-zinc-700 bg-gray-50/50 dark:bg-zinc-800/50",children:[(0,s.jsx)(h.CardTitle,{className:"text-gray-900 dark:text-white",children:"Compliance Questionnaire"}),(0,s.jsx)(h.CardDescription,{className:"text-gray-600 dark:text-gray-400",children:"Complete the following compliance questionnaire to proceed with your KYC verification. Your progress is saved automatically."})]}),(0,s.jsx)(h.CardContent,{className:"pt-6",children:(0,s.jsx)(sa,{initialData:l||void 0,submissionId:n||void 0,onComplete:e})})]})}var sr=e.i(666123),sl=e.i(723628),si=e.i(762074),sn=e.i(711819),so=e.i(416469),sd=e.i(695891),sc=e.i(921294);e.i(227041);var sm=e.i(1694),sx=e.i(465914),su=e.i(152370),sh=e.i(523572);let sp={active:{label:"Active",className:"bg-emerald-100 text-emerald-800 border-emerald-200",icon:Y.CheckCircle2},pending:{label:"Pending",className:"bg-amber-100 text-amber-800 border-amber-200",icon:y.Clock},inactive:{label:"Inactive",className:"bg-gray-100 text-gray-800 border-gray-200",icon:w.AlertCircle},suspended:{label:"Suspended",className:"bg-red-100 text-red-800 border-red-200",icon:w.AlertCircle}},sj={approved:{label:"KYC Approved",className:"bg-emerald-100 text-emerald-800 border-emerald-200"},pending:{label:"KYC Pending",className:"bg-amber-100 text-amber-800 border-amber-200"},rejected:{label:"KYC Rejected",className:"bg-red-100 text-red-800 border-red-200"},not_started:{label:"KYC Not Started",className:"bg-gray-100 text-gray-800 border-gray-200"}};function sg({userEmail:e,profile:t,variant:l="investor",defaultTab:i="overview",investorInfo:n,investorUserInfo:o}){let[d,m]=(0,a.useState)(t),[u,p]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[y,N]=(0,a.useState)(!1),C="staff"===l,S=!!n,T=n?.type==="individual",k=S&&n?.type!=="individual";console.log("[ProfilePageClient] Props received:",{variant:l,isStaff:C,hasInvestorEntity:S,isIndividual:T,isEntity:k,investorInfo:n?{id:n.id,legal_name:n.legal_name,type:n.type}:null});let I=e=>{m(s=>({...s,avatar_url:e}))},A=e=>{m(s=>({...s,...e}))},P=sp[n?.status||"pending"]||sp.pending,L=P.icon,M=sj[n?.kyc_status||"not_started"]||sj.not_started;return C?(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"sticky top-6",children:[(0,s.jsx)(c,{currentAvatarUrl:d.avatar_url,userName:d.display_name||d.email||"Staff User",onAvatarUpdate:I}),(0,s.jsxs)("div",{className:"mt-6 p-4 border border-border rounded-lg bg-muted/50 space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Contact"}),(0,s.jsx)("p",{className:"text-sm mt-1 text-foreground",children:d.email}),d.phone&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:d.phone})]}),d.office_location&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Office"}),(0,s.jsx)("p",{className:"text-sm mt-1 text-foreground",children:d.office_location})]}),d.title&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Title"}),(0,s.jsx)("p",{className:"text-sm mt-1 text-foreground",children:d.title})]})]})]})}),(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(H.Tabs,{defaultValue:"profile",className:"w-full",children:[(0,s.jsxs)(H.TabsList,{className:"grid w-full grid-cols-3",children:[(0,s.jsxs)(H.TabsTrigger,{value:"profile",children:[(0,s.jsx)(eT.Briefcase,{className:"h-4 w-4 mr-2"}),"Profile"]}),(0,s.jsxs)(H.TabsTrigger,{value:"security",children:[(0,s.jsx)(e2.Lock,{className:"h-4 w-4 mr-2"}),"Security"]}),(0,s.jsxs)(H.TabsTrigger,{value:"preferences",children:[(0,s.jsx)(si.Bell,{className:"h-4 w-4 mr-2"}),"Notifications"]})]}),(0,s.jsx)(H.TabsContent,{value:"profile",className:"mt-6",children:(0,s.jsx)(j,{userId:d.id,initialData:d,onUpdate:A,showStaffFields:!0})}),(0,s.jsx)(H.TabsContent,{value:"security",className:"mt-6",children:(0,s.jsx)(g.PasswordChangeForm,{})}),(0,s.jsx)(H.TabsContent,{value:"preferences",className:"mt-6",children:(0,s.jsx)(f.PreferencesEditor,{variant:"staff"})})]})})]}):(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(c,{currentAvatarUrl:d.avatar_url,userName:d.display_name||d.email||"User",onAvatarUpdate:I,compact:!0}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:S?n.display_name||n.legal_name:"My Profile"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:S?"Manage your investor profile, documents, and team":"Manage your personal profile settings"})]})]}),S&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(F.Badge,{className:P.className,children:[(0,s.jsx)(L,{className:"h-3 w-3 mr-1"}),P.label]}),(0,s.jsx)(F.Badge,{className:M.className,children:M.label})]})]}),(0,s.jsxs)(H.Tabs,{defaultValue:i,className:"space-y-6",children:[(0,s.jsxs)(H.TabsList,{children:[(0,s.jsxs)(H.TabsTrigger,{value:"overview",className:"flex items-center gap-2",children:[(0,s.jsx)(D.Building2,{className:"h-4 w-4"}),"Overview"]}),S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(H.TabsTrigger,{value:"kyc",className:"flex items-center gap-2",children:[(0,s.jsx)(G.ShieldCheck,{className:"h-4 w-4"}),"KYC"]}),(0,s.jsxs)(H.TabsTrigger,{value:"compliance",className:"flex items-center gap-2",children:[(0,s.jsx)(et.ShieldAlert,{className:"h-4 w-4"}),"Compliance"]}),(0,s.jsxs)(H.TabsTrigger,{value:"members",className:"flex items-center gap-2",children:[(0,s.jsx)(R.Users,{className:"h-4 w-4"}),"Team"]}),k&&(0,s.jsxs)(H.TabsTrigger,{value:"entity-members",className:"flex items-center gap-2",children:[(0,s.jsx)(R.Users,{className:"h-4 w-4"}),"Directors/UBOs"]}),(0,s.jsxs)(H.TabsTrigger,{value:"entities",className:"flex items-center gap-2",children:[(0,s.jsx)(D.Building2,{className:"h-4 w-4"}),"Entities"]}),(0,s.jsxs)(H.TabsTrigger,{value:"signature",className:"flex items-center gap-2",children:[(0,s.jsx)(sn.FileSignature,{className:"h-4 w-4"}),"Signature"]})]}),(0,s.jsxs)(H.TabsTrigger,{value:"security",className:"flex items-center gap-2",children:[(0,s.jsx)(e2.Lock,{className:"h-4 w-4"}),"Security"]}),(0,s.jsxs)(H.TabsTrigger,{value:"preferences",className:"flex items-center gap-2",children:[(0,s.jsx)(sl.Settings,{className:"h-4 w-4"}),"Preferences"]})]}),(0,s.jsxs)(H.TabsContent,{value:"overview",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{children:[(0,s.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(_.User,{className:"h-5 w-5"}),"Your Information"]}),(0,s.jsx)(h.CardDescription,{children:"Your account details within this investor entity"})]}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Full Name"}),(0,s.jsx)("div",{className:"font-medium",children:d.display_name||"Not set"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Email"}),(0,s.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(X.Mail,{className:"h-4 w-4 text-muted-foreground"}),d.email||e]})]}),S&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Role"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(F.Badge,{variant:"outline",className:"capitalize",children:o?.role||"member"}),o?.is_primary&&(0,s.jsx)(F.Badge,{variant:"secondary",children:"Primary Contact"}),o?.can_sign&&(0,s.jsx)(F.Badge,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Signatory"})]})]})]})]}),k&&n&&(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(D.Building2,{className:"h-5 w-5"}),"Entity Information"]}),(0,s.jsx)(h.CardDescription,{children:"Organization details"})]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>N(!0),children:[(0,s.jsx)(B.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Display Name"}),(0,s.jsx)("div",{className:"font-medium",children:n.display_name||"-"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Legal Name"}),(0,s.jsx)("div",{className:"font-medium",children:n.legal_name||"-"})]}),n.country_of_incorporation&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Country of Incorporation"}),(0,s.jsx)("div",{className:"font-medium",children:n.country_of_incorporation})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Type"}),(0,s.jsx)(F.Badge,{variant:"outline",className:"capitalize",children:(n.type||"entity").replace(/_/g," ")})]})]})]})]}),k&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.Phone,{className:"h-5 w-5"}),"Contact Information"]})}),(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[(0,s.jsx)(B.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),(0,s.jsxs)(h.CardContent,{className:"space-y-4",children:[n.email&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Email"}),(0,s.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(X.Mail,{className:"h-4 w-4 text-muted-foreground"}),n.email]})]}),n.phone&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Phone"}),(0,s.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(Z.Phone,{className:"h-4 w-4 text-muted-foreground"}),n.phone]})]}),n.phone_mobile&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Mobile"}),(0,s.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(Z.Phone,{className:"h-4 w-4 text-muted-foreground"}),n.phone_mobile]})]}),n.website&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{className:"text-muted-foreground",children:"Website"}),(0,s.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(so.Globe,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:n.website})]})]}),!n.email&&!n.phone&&!n.phone_mobile&&!n.website&&(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"No contact information available"})]})]}),(0,s.jsxs)(h.Card,{children:[(0,s.jsx)(h.CardHeader,{children:(0,s.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(U.MapPin,{className:"h-5 w-5"}),k?"Registered Address":"Address"]})}),(0,s.jsx)(h.CardContent,{className:"space-y-4",children:k?n.registered_address_line_1?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"font-medium",children:n.registered_address_line_1}),n.registered_address_line_2&&(0,s.jsx)("div",{className:"text-muted-foreground",children:n.registered_address_line_2}),(n.registered_city||n.registered_state||n.registered_postal_code||n.registered_country)&&(0,s.jsx)("div",{className:"text-muted-foreground",children:[n.registered_city,n.registered_state,n.registered_postal_code,n.registered_country].filter(Boolean).join(", ")})]}):(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"No address information available"}):n.residential_street?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"font-medium",children:n.residential_street}),n.residential_line_2&&(0,s.jsx)("div",{className:"text-muted-foreground",children:n.residential_line_2}),(n.residential_city||n.residential_state||n.residential_postal_code||n.residential_country)&&(0,s.jsx)("div",{className:"text-muted-foreground",children:[n.residential_city,n.residential_state,n.residential_postal_code,n.residential_country].filter(Boolean).join(", ")})]}):(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"No address information available"})})]})]}),T&&n&&(0,s.jsx)(sm.IndividualKycDisplay,{data:{first_name:n.first_name,middle_name:n.middle_name,last_name:n.last_name,name_suffix:n.name_suffix,date_of_birth:n.date_of_birth,country_of_birth:n.country_of_birth,nationality:n.nationality,email:n.email,phone_mobile:n.phone_mobile,phone_office:n.phone_office,residential_street:n.residential_street,residential_city:n.residential_city,residential_state:n.residential_state,residential_postal_code:n.residential_postal_code,residential_country:n.residential_country,is_us_citizen:n.is_us_citizen,is_us_taxpayer:n.is_us_taxpayer,us_taxpayer_id:n.us_taxpayer_id,country_of_tax_residency:n.country_of_tax_residency,id_type:n.id_type,id_number:n.id_number,id_issue_date:n.id_issue_date,id_expiry_date:n.id_expiry_date,id_issuing_country:n.id_issuing_country},onEdit:()=>p(!0),title:"Personal KYC Information"}),!S&&(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{children:[(0,s.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(sl.Settings,{className:"h-5 w-5"}),"Edit Profile"]}),(0,s.jsx)(h.CardDescription,{children:"Update your profile information"})]}),(0,s.jsx)(h.CardContent,{children:(0,s.jsx)(j,{userId:d.id,initialData:d,onUpdate:A,showStaffFields:!1})})]})]}),S&&(0,s.jsxs)(H.TabsContent,{value:"kyc",className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"KYC Documents"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Upload required identity and verification documents."})]}),(0,s.jsx)(E,{})]}),S&&(0,s.jsxs)(H.TabsContent,{value:"compliance",className:"space-y-6",children:[(0,s.jsx)(ex,{}),(0,s.jsx)("div",{className:"pt-6 border-t",children:(0,s.jsx)(st,{})})]}),S&&n&&(0,s.jsx)(H.TabsContent,{value:"members",className:"space-y-4",children:(0,s.jsx)(sd.MembersManagementTab,{entityType:"investor",entityId:n.id,entityName:n.display_name||n.legal_name,showSignatoryOption:k,canManageMembers:o?.role==="admin"||o?.is_primary})}),k&&n&&(0,s.jsx)(H.TabsContent,{value:"entity-members",className:"space-y-4",children:(0,s.jsx)(sr.GenericEntityMembersTab,{entityType:"investor",entityId:n.id,entityName:n.display_name||n.legal_name,apiEndpoint:"/api/investors/me/members",canManage:o?.role==="admin"||o?.is_primary,title:"Directors, UBOs & Signatories",description:"Manage directors, beneficial owners (>25% ownership), and authorized signatories with full KYC information"})}),S&&(0,s.jsx)(H.TabsContent,{value:"entities",className:"space-y-4",children:(0,s.jsx)(es,{})}),S&&(0,s.jsx)(H.TabsContent,{value:"signature",className:"space-y-6",children:o?.can_sign?(0,s.jsx)(sc.SignatureSpecimenTab,{entityType:"investor",entityId:n?.id}):(0,s.jsxs)(h.Card,{children:[(0,s.jsxs)(h.CardHeader,{children:[(0,s.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(sn.FileSignature,{className:"h-5 w-5"}),"Signature Specimen"]}),(0,s.jsx)(h.CardDescription,{children:"You do not have signing permissions for this investor entity"})]}),(0,s.jsx)(h.CardContent,{children:(0,s.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-8 px-4 text-center",children:[(0,s.jsx)(w.AlertCircle,{className:"h-10 w-10 text-muted-foreground mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Signing permissions are required to upload a signature specimen. Contact your entity administrator for access."})]})})]})}),(0,s.jsx)(H.TabsContent,{value:"security",className:"space-y-4",children:(0,s.jsx)(g.PasswordChangeForm,{})}),(0,s.jsx)(H.TabsContent,{value:"preferences",className:"space-y-4",children:(0,s.jsx)(f.PreferencesEditor,{variant:"investor"})})]}),T&&n&&(0,s.jsx)(sx.EntityKYCEditDialog,{open:u,onOpenChange:p,entityType:"investor",entityId:n.id,entityName:n.display_name||n.legal_name,initialData:{first_name:n.first_name??void 0,middle_name:n.middle_name??void 0,last_name:n.last_name??void 0,name_suffix:n.name_suffix??void 0,date_of_birth:n.date_of_birth??void 0,nationality:n.nationality??void 0,country_of_birth:n.country_of_birth??void 0,phone_mobile:n.phone_mobile??void 0,phone_office:n.phone_office??void 0,is_us_citizen:!0===n.is_us_citizen,is_us_taxpayer:!0===n.is_us_taxpayer,us_taxpayer_id:n.us_taxpayer_id??void 0,country_of_tax_residency:n.country_of_tax_residency??void 0,id_type:n.id_type??void 0,id_number:n.id_number??void 0,id_issue_date:n.id_issue_date??void 0,id_expiry_date:n.id_expiry_date??void 0,id_issuing_country:n.id_issuing_country??void 0,residential_street:n.residential_street??void 0,residential_city:n.residential_city??void 0,residential_state:n.residential_state??void 0,residential_postal_code:n.residential_postal_code??void 0,residential_country:n.residential_country??void 0},apiEndpoint:"/api/investors/me",onSuccess:()=>window.location.reload()}),S&&n&&(0,s.jsx)(su.EntityAddressEditDialog,{open:b,onOpenChange:v,entityType:"investor",entityName:n.display_name||n.legal_name,initialData:k?{email:n.email??void 0,phone:n.phone??void 0,phone_mobile:n.phone_mobile??void 0,phone_office:n.phone_office??void 0,website:n.website??void 0,address_line_1:n.registered_address_line_1??void 0,address_line_2:n.registered_address_line_2??void 0,city:n.registered_city??void 0,state_province:n.registered_state??void 0,postal_code:n.registered_postal_code??void 0,country:n.registered_country??void 0}:{email:n.email??void 0,phone:n.phone??void 0,phone_mobile:n.phone_mobile??void 0,phone_office:n.phone_office??void 0,website:n.website??void 0,address_line_1:n.residential_street??void 0,address_line_2:n.residential_line_2??void 0,city:n.residential_city??void 0,state_province:n.residential_state??void 0,postal_code:n.residential_postal_code??void 0,country:n.residential_country??void 0},apiEndpoint:"/api/investors/me",onSuccess:()=>window.location.reload()}),k&&n&&(0,s.jsx)(sh.EntityInfoEditDialog,{open:y,onOpenChange:N,initialData:{display_name:n.display_name,legal_name:n.legal_name,country_of_incorporation:n.country_of_incorporation},onSuccess:()=>window.location.reload()})]})}e.s(["ProfilePageClient",()=>sg],386959)}]);