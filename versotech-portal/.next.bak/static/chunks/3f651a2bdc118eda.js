(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81495,e=>{"use strict";var s=e.i(722679),t=e.i(90613),a=e.i(316264),i=e.i(129432),r=e.i(429760),n=e.i(820417),l=e.i(396132),d=e.i(773510),c=e.i(957114),o=e.i(871561),m=e.i(971743),x=e.i(84065),u=e.i(119311),h=e.i(827178),p=e.i(501259),j=e.i(734213),g=e.i(981218),v=e.i(691974),f=e.i(196767),_=e.i(551544),y=e.i(335994),N=e.i(416469),b=e.i(398472),C=e.i(758768),w=e.i(704477),S=e.i(340915),T=e.i(603274),k=e.i(475478),I=e.i(160599),L=e.i(764355);e.i(227041);var E=e.i(1694),F=e.i(465914),D=e.i(923226),P=e.i(352776),B=e.i(191569),A=e.i(514133),U=e.i(816654),$=e.i(538892),O=e.i(994500);let V=[{label:"Entity",value:"entity"},{label:"Individual",value:"individual"}],H=[{label:"Co-Investor",value:"co-investor"},{label:"Syndicate Lead",value:"syndicate-lead"},{label:"Family Office",value:"family-office"},{label:"Other",value:"other"}],M=[{label:"Active",value:"active"},{label:"Pending",value:"pending"},{label:"Inactive",value:"inactive"}],R=[{label:"Draft",value:"draft"},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Expired",value:"expired"},{label:"Rejected",value:"rejected"}],K=["Technology","Healthcare","Real Estate","Energy","Finance","Consumer","Industrial","Infrastructure"];function Y({open:e,onOpenChange:t,partner:i}){let r=(0,T.useRouter)(),[n,l]=(0,S.useTransition)(),[d,c]=(0,S.useState)(i.name),[o,m]=(0,S.useState)(i.legal_name||""),[x,u]=(0,S.useState)(i.type),[h,p]=(0,S.useState)(i.partner_type),[j,g]=(0,S.useState)(i.status),[v,f]=(0,S.useState)(i.contact_name||""),[_,y]=(0,S.useState)(i.contact_email||""),[N,b]=(0,S.useState)(i.contact_phone||""),[C,w]=(0,S.useState)(i.website||""),[k,I]=(0,S.useState)(i.address_line_1||""),[L,E]=(0,S.useState)(i.address_line_2||""),[F,D]=(0,S.useState)(i.city||""),[Y,z]=(0,S.useState)(i.postal_code||""),[G,J]=(0,S.useState)(i.country||""),[W,q]=(0,S.useState)(i.typical_investment_min||""),[Q,X]=(0,S.useState)(i.typical_investment_max||""),[Z,ee]=(0,S.useState)(i.preferred_sectors||[]),[es,et]=(0,S.useState)(i.notes||""),[ea,ei]=(0,S.useState)(i.kyc_status||"draft"),[er,en]=(0,S.useState)(i.kyc_notes||"");return(0,S.useEffect)(()=>{e&&(c(i.name),m(i.legal_name||""),u(i.type),p(i.partner_type),g(i.status),f(i.contact_name||""),y(i.contact_email||""),b(i.contact_phone||""),w(i.website||""),I(i.address_line_1||""),E(i.address_line_2||""),D(i.city||""),z(i.postal_code||""),J(i.country||""),q(i.typical_investment_min||""),X(i.typical_investment_max||""),ee(i.preferred_sectors||[]),et(i.notes||""),ei(i.kyc_status||"draft"),en(i.kyc_notes||""))},[e,i]),(0,s.jsx)(P.Dialog,{open:e,onOpenChange:t,children:(0,s.jsxs)(P.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(P.DialogHeader,{children:[(0,s.jsx)(P.DialogTitle,{children:"Edit Partner"}),(0,s.jsxs)(P.DialogDescription,{children:["Update information for ",i.name]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium border-b pb-2",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"name",children:"Name *"}),(0,s.jsx)(B.Input,{id:"name",value:d,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"legalName",children:"Legal Name"}),(0,s.jsx)(B.Input,{id:"legalName",value:o,onChange:e=>m(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{children:"Entity Type"}),(0,s.jsxs)($.Select,{value:x,onValueChange:u,children:[(0,s.jsx)($.SelectTrigger,{children:(0,s.jsx)($.SelectValue,{})}),(0,s.jsx)($.SelectContent,{children:V.map(e=>(0,s.jsx)($.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{children:"Partner Type"}),(0,s.jsxs)($.Select,{value:h,onValueChange:p,children:[(0,s.jsx)($.SelectTrigger,{children:(0,s.jsx)($.SelectValue,{})}),(0,s.jsx)($.SelectContent,{children:H.map(e=>(0,s.jsx)($.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{children:"Status"}),(0,s.jsxs)($.Select,{value:j,onValueChange:g,children:[(0,s.jsx)($.SelectTrigger,{children:(0,s.jsx)($.SelectValue,{})}),(0,s.jsx)($.SelectContent,{children:M.map(e=>(0,s.jsx)($.SelectItem,{value:e.value,children:e.label},e.value))})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium border-b pb-2",children:"Contact Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"contactName",children:"Contact Name"}),(0,s.jsx)(B.Input,{id:"contactName",value:v,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"contactEmail",children:"Email"}),(0,s.jsx)(B.Input,{id:"contactEmail",type:"email",value:_,onChange:e=>y(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"contactPhone",children:"Phone"}),(0,s.jsx)(B.Input,{id:"contactPhone",value:N,onChange:e=>b(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"website",children:"Website"}),(0,s.jsx)(B.Input,{id:"website",value:C,onChange:e=>w(e.target.value),placeholder:"https://"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium border-b pb-2",children:"Address"}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"addressLine1",children:"Address Line 1"}),(0,s.jsx)(B.Input,{id:"addressLine1",value:k,onChange:e=>I(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"addressLine2",children:"Address Line 2"}),(0,s.jsx)(B.Input,{id:"addressLine2",value:L,onChange:e=>E(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"city",children:"City"}),(0,s.jsx)(B.Input,{id:"city",value:F,onChange:e=>D(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"postalCode",children:"Postal Code"}),(0,s.jsx)(B.Input,{id:"postalCode",value:Y,onChange:e=>z(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"country",children:"Country"}),(0,s.jsx)(B.Input,{id:"country",value:G,onChange:e=>J(e.target.value)})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium border-b pb-2",children:"Investment Profile"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"investmentMin",children:"Min Investment ($)"}),(0,s.jsx)(B.Input,{id:"investmentMin",type:"number",min:0,value:W,onChange:e=>q(""===e.target.value?"":Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"investmentMax",children:"Max Investment ($)"}),(0,s.jsx)(B.Input,{id:"investmentMax",type:"number",min:0,value:Q,onChange:e=>X(""===e.target.value?"":Number(e.target.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(A.Label,{className:"mb-3 block",children:"Preferred Sectors"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:K.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>{ee(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},className:`px-3 py-1 text-xs rounded-full border transition-colors ${Z.includes(e)?"bg-primary text-primary-foreground border-primary":"bg-transparent text-muted-foreground border-white/20 hover:border-white/40"}`,children:e},e))})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium border-b pb-2",children:"KYC Status"}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{children:"KYC Status"}),(0,s.jsxs)($.Select,{value:ea,onValueChange:ei,children:[(0,s.jsx)($.SelectTrigger,{children:(0,s.jsx)($.SelectValue,{})}),(0,s.jsx)($.SelectContent,{children:R.map(e=>(0,s.jsx)($.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"kycNotes",children:"KYC Notes"}),(0,s.jsx)(U.Textarea,{id:"kycNotes",value:er,onChange:e=>en(e.target.value),rows:2})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(A.Label,{htmlFor:"notes",children:"Notes"}),(0,s.jsx)(U.Textarea,{id:"notes",value:es,onChange:e=>et(e.target.value),rows:3})]})]}),(0,s.jsxs)(P.DialogFooter,{children:[(0,s.jsx)(a.Button,{variant:"outline",onClick:()=>t(!1),disabled:n,children:"Cancel"}),(0,s.jsx)(a.Button,{onClick:()=>{l(async()=>{if(!d.trim())return void O.toast.error("Partner name is required");try{let e=await fetch(`/api/admin/partners/${i.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d.trim(),legal_name:o.trim()||null,type:x,partner_type:h,status:j,contact_name:v.trim()||null,contact_email:_.trim()||null,contact_phone:N.trim()||null,website:C.trim()||null,address_line_1:k.trim()||null,address_line_2:L.trim()||null,city:F.trim()||null,postal_code:Y.trim()||null,country:G.trim()||null,typical_investment_min:""===W?null:Number(W),typical_investment_max:""===Q?null:Number(Q),preferred_sectors:Z.length>0?Z:null,notes:es.trim()||null,kyc_status:ea,kyc_notes:er.trim()||null})});if(!e.ok){let s=await e.json().catch(()=>null);console.error("[EditPartnerDialog] Failed to update partner:",s),O.toast.error(s?.error??"Failed to update partner");return}O.toast.success("Partner updated successfully"),t(!1),r.refresh()}catch(e){console.error("[EditPartnerDialog] Error:",e),O.toast.error("Failed to update partner")}})},disabled:n,children:n?"Saving...":"Save Changes"})]})]})})}var z=e.i(263229),G=e.i(401148),J=e.i(15098),W=e.i(30100),q=e.i(282141);function Q({open:e,onOpenChange:t,partnerId:r,partnerName:n,feePlans:l}){let d=(0,T.useRouter)(),[c,o]=(0,S.useState)(!1),[m,x]=(0,S.useState)(null),[u,h]=(0,S.useState)(""),[j,g]=(0,S.useState)(""),[f,_]=(0,S.useState)(null),[y,N]=(0,S.useState)([]),[b,w]=(0,S.useState)(!1),[k,I]=(0,S.useState)(""),L=(0,S.useMemo)(()=>l.filter(e=>"accepted"===e.status&&e.is_active&&null!==e.deal),[l]),E=(0,S.useMemo)(()=>L.reduce((e,s)=>(s.deal&&!e.find(e=>e.id===s.deal.id)&&e.push(s.deal),e),[]),[L]),F=(0,S.useMemo)(()=>u?L.filter(e=>e.deal?.id===u):[],[u,L]);(0,S.useEffect)(()=>{e||(h(""),g(""),_(null),N([]),I(""),x(null))},[e]),(0,S.useEffect)(()=>{g(""),_(null),N([]),I(""),1===F.length&&(g(F[0].id),_(F[0]))},[u]),(0,S.useEffect)(()=>{if(!j){_(null),N([]),I("");return}_(L.find(e=>e.id===j)||null)},[j,L]),(0,S.useEffect)(()=>{let e=f?.deal?.id,s=f?.term_sheet?.id;if(!e||!s){N([]),I("");return}let t=new AbortController;return(async()=>{w(!0),N([]),I("");try{let a=await fetch(`/api/deals/${e}/linkable-investors?term_sheet_id=${s}`,{signal:t.signal});if(a.ok){let e=await a.json();N(e.investors||[])}else console.error("Failed to fetch linkable investors:",a.status,a.statusText),N([])}catch(e){e instanceof Error&&"AbortError"!==e.name&&console.error("Failed to fetch linkable investors:",e)}finally{t.signal.aborted||w(!1)}})(),()=>t.abort()},[f]);let D=async()=>{if(!f||!k)return void x("Please complete all selections");if(!f.deal?.id)return void x("Invalid fee plan selected - missing deal information");o(!0),x(null);try{let e=await fetch(`/api/deals/${f.deal.id}/members/${k}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({referred_by_entity_id:r,referred_by_entity_type:"partner",assigned_fee_plan_id:j,role:"partner_investor"})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to link investor to partner")}O.toast.success("Investor successfully linked to partner"),t(!1),d.refresh()}catch(e){e instanceof Error?x(e.message):x("An unexpected error occurred")}finally{o(!1)}},B=u&&j&&k;return(0,s.jsx)(P.Dialog,{open:e,onOpenChange:t,children:(0,s.jsxs)(P.DialogContent,{className:"max-w-lg",children:[(0,s.jsxs)(P.DialogHeader,{children:[(0,s.jsxs)(P.DialogTitle,{children:["Dispatch Investor for ",n]}),(0,s.jsx)(P.DialogDescription,{children:"Link an investor to this partner using an accepted fee plan"})]}),(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[0===L.length?(0,s.jsx)("div",{className:"p-4 rounded-lg border border-amber-500/30 bg-amber-500/5",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(G.AlertCircle,{className:"h-5 w-5 text-amber-400 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-amber-300",children:"No accepted fee plans"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[n," has no accepted fee plans. Create and send a fee plan from a deal first, then have the partner accept it."]})]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(A.Label,{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 text-primary text-xs font-medium",children:"1"}),"Select Deal"]}),(0,s.jsxs)($.Select,{value:u,onValueChange:h,children:[(0,s.jsx)($.SelectTrigger,{className:(0,q.cn)(u&&"border-primary/50"),children:(0,s.jsx)($.SelectValue,{placeholder:"Select a deal"})}),(0,s.jsx)($.SelectContent,{children:E.map(e=>(0,s.jsx)($.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.Briefcase,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{children:e.name})]})},e.id))})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Only deals with accepted fee plans are shown"})]}),u&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(A.Label,{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 text-primary text-xs font-medium",children:"2"}),"Select Fee Plan"]}),1===F.length?(0,s.jsx)("div",{className:"p-3 rounded-lg bg-muted/50 border border-primary/30",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(C.FileCheck,{className:"h-5 w-5 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:F[0].name}),F[0].term_sheet&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Term Sheet v",F[0].term_sheet.version]})]}),(0,s.jsx)(i.Badge,{className:"ml-auto bg-green-500/20 text-green-400",children:"Accepted"})]})}):(0,s.jsxs)($.Select,{value:j,onValueChange:g,children:[(0,s.jsx)($.SelectTrigger,{className:(0,q.cn)(j&&"border-primary/50"),children:(0,s.jsx)($.SelectValue,{placeholder:"Select a fee plan"})}),(0,s.jsx)($.SelectContent,{children:F.map(e=>(0,s.jsx)($.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),e.term_sheet&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Term Sheet v",e.term_sheet.version]})]})},e.id))})]})]}),f&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(A.Label,{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 text-primary text-xs font-medium",children:"3"}),"Select Investor"]}),b?(0,s.jsxs)("div",{className:"flex items-center gap-2 py-3",children:[(0,s.jsx)(z.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading eligible investors..."})]}):0===y.length?(0,s.jsx)("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(G.AlertCircle,{className:"h-4 w-4 text-blue-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-blue-300",children:"No eligible investors"}),(0,s.jsx)("p",{className:"text-xs text-blue-300/80 mt-1",children:"No investors on this term sheet are available. They may already be linked to a partner or introducer."})]})]})}):(0,s.jsxs)($.Select,{value:k,onValueChange:I,children:[(0,s.jsx)($.SelectTrigger,{className:(0,q.cn)(k&&"border-primary/50"),children:(0,s.jsx)($.SelectValue,{placeholder:"Select an investor"})}),(0,s.jsx)($.SelectContent,{children:y.map(e=>(0,s.jsx)($.SelectItem,{value:e.user_id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:e.display_name}),e.email&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.email})]})]})},e.user_id))})]})]}),B&&(0,s.jsx)("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(J.CheckCircle2,{className:"h-5 w-5 text-emerald-400 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{className:"text-emerald-300 font-medium",children:"Ready to dispatch"}),(0,s.jsxs)("p",{className:"text-emerald-300/80 text-xs mt-1",children:["The selected investor will be linked to ",(0,s.jsx)("strong",{children:n})," using the ",(0,s.jsx)("strong",{children:f?.name})," fee plan."]})]})]})})]}),m&&(0,s.jsx)("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:m}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,s.jsx)(a.Button,{variant:"outline",onClick:()=>t(!1),disabled:c,children:"Cancel"}),(0,s.jsx)(a.Button,{onClick:D,disabled:c||!B||0===L.length,className:"gap-2",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Loader2,{className:"h-4 w-4 animate-spin"}),"Linking..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.ArrowRight,{className:"h-4 w-4"}),"Dispatch Investor"]})})]})]})]})})}var X=e.i(429482),Z=e.i(501495),ee=e.i(747972);function es({partner:e,metrics:P}){let B=(0,T.useRouter)(),[A,U]=(0,S.useState)(!1),[$,O]=(0,S.useState)(!1),[V,H]=(0,S.useState)(!1),[M,R]=(0,S.useState)(!1),[K,z]=(0,S.useState)([]),[G,J]=(0,S.useState)(!1),[W,q]=(0,S.useState)([]),[es,et]=(0,S.useState)(!1),ea=(0,S.useCallback)(async()=>{J(!0);try{let s=await fetch(`/api/partners/${e.id}/fee-plans`);if(s.ok){let e=await s.json();z(e.fee_plans||[])}}catch(e){console.error("Error fetching fee plans:",e)}finally{J(!1)}},[e.id]),ei=(0,S.useCallback)(async()=>{et(!0);try{let s=await fetch(`/api/partners/${e.id}/referred-investors`);if(s.ok){let e=await s.json();q(e.referred_investors||[])}}catch(e){console.error("Error fetching referred investors:",e)}finally{et(!1)}},[e.id]);(0,S.useEffect)(()=>{ea(),ei()},[ea,ei]);let er={draft:"bg-slate-500/20 text-slate-400",sent:"bg-blue-500/20 text-blue-400",pending_signature:"bg-purple-500/20 text-purple-400",accepted:"bg-green-500/20 text-green-400",rejected:"bg-red-500/20 text-red-400"},en={"co-investor":"Co-Investor","syndicate-lead":"Syndicate Lead","family-office":"Family Office",other:"Other"},el=()=>[e.address_line_1,e.address_line_2,e.city,e.postal_code,e.country].filter(Boolean).join(", ");return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(n.default,{href:"/versotech_main/users",children:(0,s.jsxs)(a.Button,{variant:"ghost",size:"sm",className:"bg-gray-800 text-white hover:bg-gray-700",children:[(0,s.jsx)(l.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Users"]})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[e.logo_url?(0,s.jsx)("img",{src:e.logo_url,alt:e.name,className:"h-10 w-10 rounded-full object-cover"}):(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-white/10 flex items-center justify-center",children:(0,s.jsx)(v.Briefcase,{className:"h-5 w-5 text-muted-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[en[e.partner_type]||e.partner_type,e.country&&` â€¢ ${e.country}`]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:()=>O(!0),children:[(0,s.jsx)(y.UserPlus,{className:"h-4 w-4 mr-2"}),"Invite User"]}),(0,s.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:()=>U(!0),children:[(0,s.jsx)(_.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,s.jsxs)(a.Button,{variant:"default",size:"sm",onClick:()=>R(!0),children:[(0,s.jsx)(y.UserPlus,{className:"h-4 w-4 mr-2"}),"Dispatch Investor"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsx)(i.Badge,{className:(0,ee.getStatusStyle)(e.status,ee.statusStyles),children:e.status}),(0,s.jsxs)(i.Badge,{className:(0,ee.getStatusStyle)(e.kyc_status,ee.kycStyles),children:["KYC: ",e.kyc_status||"draft"]}),(0,s.jsx)(i.Badge,{variant:"outline",children:"entity"===e.type?"Entity":"Individual"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-3",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(f.DollarSign,{className:"h-4 w-4"}),"Investment Range"]})}),(0,s.jsxs)(t.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:e.typical_investment_min&&e.typical_investment_max?(0,s.jsxs)(s.Fragment,{children:[(0,Z.formatCurrency)(e.typical_investment_min)," - ",(0,Z.formatCurrency)(e.typical_investment_max)]}):"-"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Typical investment"})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-3",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(u.FileText,{className:"h-4 w-4"}),"Documents"]})}),(0,s.jsxs)(t.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:P.documentCount}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Uploaded"})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-3",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(x.Calendar,{className:"h-4 w-4"}),"Created"]})}),(0,s.jsxs)(t.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:e.created_at?(0,Z.formatDate)(e.created_at):"-"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Registration date"})]})]})]}),(0,s.jsxs)(r.Tabs,{defaultValue:"overview",className:"space-y-6",id:`partner-tabs-${e.id}`,children:[(0,s.jsxs)(r.TabsList,{className:"grid w-full grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 lg:w-auto lg:inline-grid",children:[(0,s.jsxs)(r.TabsTrigger,{value:"overview",className:"gap-2",children:[(0,s.jsx)(v.Briefcase,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,s.jsxs)(r.TabsTrigger,{value:"members",className:"gap-2",children:[(0,s.jsx)(w.User,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Members"})]}),(0,s.jsxs)(r.TabsTrigger,{value:"fee-plans",className:"gap-2",children:[(0,s.jsx)(C.FileCheck,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Fee Plans"})]}),(0,s.jsxs)(r.TabsTrigger,{value:"referred-investors",className:"gap-2",children:[(0,s.jsx)(p.Users,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Investors"})]}),(0,s.jsxs)(r.TabsTrigger,{value:"kyc",className:"gap-2",children:[(0,s.jsx)(g.Shield,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"KYC"})]}),(0,s.jsxs)(r.TabsTrigger,{value:"bank",className:"gap-2",children:[(0,s.jsx)(h.Banknote,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Bank"})]}),(0,s.jsxs)(r.TabsTrigger,{value:"activity",className:"gap-2",children:[(0,s.jsx)(j.Activity,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Activity"})]})]}),(0,s.jsxs)(r.TabsContent,{value:"overview",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Contact Information"})}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[e.contact_name&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Primary Contact"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:e.contact_name})]})]}),e.contact_email&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Email"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:e.contact_email})]})]}),e.contact_phone&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Phone"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:e.contact_phone})]})]}),e.website&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(N.Globe,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Website"}),(0,s.jsxs)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-primary hover:underline flex items-center gap-1",children:[e.website,(0,s.jsx)(b.ExternalLink,{className:"h-3 w-3"})]})]})]}),el()&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(o.MapPin,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Address"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:el()})]})]}),!e.contact_name&&!e.contact_email&&!el()&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No contact information available"})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Partner Details"})}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[e.legal_name&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(m.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Legal Name"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:e.legal_name})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(v.Briefcase,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Partner Type"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:en[e.partner_type]||e.partner_type})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(m.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Entity Type"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:"entity"===e.type?"Entity":"Individual"})]})]}),e.accreditation_status&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.Shield,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Accreditation"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:e.accreditation_status})]})]})]})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Investment Preferences"})}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Investment Range"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:e.typical_investment_min&&e.typical_investment_max?(0,s.jsxs)(s.Fragment,{children:[(0,Z.formatCurrency)(e.typical_investment_min)," - ",(0,Z.formatCurrency)(e.typical_investment_max)]}):"Not specified"})]})}),e.preferred_sectors&&e.preferred_sectors.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Preferred Sectors"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.preferred_sectors.map(e=>(0,s.jsx)(i.Badge,{variant:"outline",children:e},e))})]}),e.preferred_geographies&&e.preferred_geographies.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Preferred Geographies"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.preferred_geographies.map(e=>(0,s.jsx)(i.Badge,{variant:"outline",children:e},e))})]}),e.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Notes"}),(0,s.jsx)("div",{className:"text-sm bg-white/5 rounded-lg p-3",children:e.notes})]})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"KYC Status"})}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Status"}),(0,s.jsx)(i.Badge,{className:(0,ee.getStatusStyle)(e.kyc_status,ee.kycStyles),children:e.kyc_status||"draft"})]}),e.kyc_approved_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Approved At"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:(0,Z.formatDate)(e.kyc_approved_at)})]}),e.kyc_expires_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Expires At"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:(0,Z.formatDate)(e.kyc_expires_at)})]})]}),e.kyc_notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Notes"}),(0,s.jsx)("div",{className:"text-sm bg-white/5 rounded-lg p-3",children:e.kyc_notes})]})]})]}),"individual"===e.type&&(0,s.jsx)(E.IndividualKycDisplay,{data:{first_name:e.first_name,middle_name:e.middle_name,last_name:e.last_name,name_suffix:e.name_suffix,date_of_birth:e.date_of_birth,country_of_birth:e.country_of_birth,nationality:e.nationality,email:e.contact_email,phone_mobile:e.phone_mobile,phone_office:e.phone_office,residential_street:e.residential_street,residential_line_2:e.residential_line_2,residential_city:e.residential_city,residential_state:e.residential_state,residential_postal_code:e.residential_postal_code,residential_country:e.residential_country,is_us_citizen:e.is_us_citizen,is_us_taxpayer:e.is_us_taxpayer,us_taxpayer_id:e.us_taxpayer_id,country_of_tax_residency:e.country_of_tax_residency,id_type:e.id_type,id_number:e.id_number,id_issue_date:e.id_issue_date,id_expiry_date:e.id_expiry_date,id_issuing_country:e.id_issuing_country,middle_initial:e.middle_initial,proof_of_address_date:e.proof_of_address_date,proof_of_address_expiry:e.proof_of_address_expiry,tax_id_number:e.tax_id_number},showEditButton:!0,onEdit:()=>H(!0),title:"Personal KYC Information"})]}),(0,s.jsx)(r.TabsContent,{value:"members",children:(0,s.jsx)(D.StaffEntityMembersTab,{entityType:"partner",entityId:e.id,entityName:e.name})}),(0,s.jsx)(r.TabsContent,{value:"fee-plans",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Fee Plans"}),(0,s.jsxs)(t.CardDescription,{children:["All fee plans linked to ",e.name," across deals"]})]}),(0,s.jsx)(t.CardContent,{children:G?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===K.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border border-blue-500/20 mb-4",children:(0,s.jsx)(C.FileCheck,{className:"h-10 w-10 text-blue-400/60"})}),(0,s.jsx)("p",{className:"text-muted-foreground mb-1",children:"No fee plans yet"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"Fee plans will appear here when created from deals"})]}):(0,s.jsx)("div",{className:"space-y-3",children:K.map(e=>(0,s.jsxs)("div",{className:"group flex items-center justify-between p-4 rounded-xl border border-white/10 hover:border-white/20 hover:bg-white/5 transition-all cursor-pointer",onClick:()=>e.deal?.id&&B.push(`/versotech_main/deals/${e.deal.id}?tab=fees`),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:`p-2.5 rounded-lg ${"accepted"===e.status?"bg-green-500/20":"bg-slate-500/20"}`,children:(0,s.jsx)(C.FileCheck,{className:`h-5 w-5 ${"accepted"===e.status?"text-green-400":"text-slate-400"}`})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-foreground",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2 mt-0.5",children:[(0,s.jsx)(v.Briefcase,{className:"h-3 w-3"}),e.deal?.name||"Unknown Deal",e.term_sheet&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground/70",children:["â€¢ Term Sheet v",e.term_sheet.version]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[e.investor_count>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,s.jsx)(p.Users,{className:"h-4 w-4"}),e.investor_count]}),(0,s.jsx)(i.Badge,{className:er[e.status]||"bg-gray-500/20 text-gray-400",children:e.status}),(0,s.jsx)(b.ExternalLink,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},e.id))})})]})}),(0,s.jsx)(r.TabsContent,{value:"referred-investors",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Referred Investors"}),(0,s.jsxs)(t.CardDescription,{children:["Investors dispatched through ",e.name]})]}),(0,s.jsx)(t.CardContent,{children:es?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===W.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 mb-4",children:(0,s.jsx)(p.Users,{className:"h-10 w-10 text-purple-400/60"})}),(0,s.jsx)("p",{className:"text-muted-foreground mb-1",children:"No referred investors yet"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"Investors dispatched through this partner will appear here"})]}):(0,s.jsx)("div",{className:"space-y-3",children:W.map(e=>(0,s.jsxs)("div",{className:"group flex items-center justify-between p-4 rounded-xl border border-white/10 hover:border-white/20 hover:bg-white/5 transition-all cursor-pointer",onClick:()=>{e.deal?.id?B.push(`/versotech_main/deals/${e.deal.id}?tab=members`):e.investor?.id&&B.push(`/versotech_main/investors/${e.investor.id}`)},children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-lg bg-purple-500/20",children:(0,s.jsx)(w.User,{className:"h-5 w-5 text-purple-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-foreground",children:e.investor?.legal_name||e.profile?.display_name||e.profile?.email||"Unknown"}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2 mt-0.5",children:[(0,s.jsx)(v.Briefcase,{className:"h-3 w-3"}),e.deal?.name||"Unknown Deal",e.fee_plan&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground/70",children:["â€¢ ",e.fee_plan.name]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[e.subscription?.amount&&(0,s.jsx)("div",{className:"text-sm font-medium text-foreground",children:(0,Z.formatCurrency)(e.subscription.amount)}),(0,s.jsx)(i.Badge,{className:e.subscription?.status==="funded"?"bg-green-500/20 text-green-400":e.subscription?.status?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400",children:e.subscription?.status||"Invited"}),(0,s.jsx)(b.ExternalLink,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},e.id))})})]})}),(0,s.jsx)(r.TabsContent,{value:"kyc",children:(0,s.jsx)(k.KYCDocumentsTab,{entityType:"partner",entityId:e.id,entityName:e.name})}),(0,s.jsx)(r.TabsContent,{value:"bank",children:(0,s.jsx)(I.BankDetailsTab,{entityType:"partner",entityId:e.id,entityName:e.name})}),(0,s.jsx)(r.TabsContent,{value:"activity",children:(0,s.jsx)(L.ActivityTimelineTab,{entityType:"partner",entityId:e.id,entityName:e.name})})]}),(0,s.jsx)(Y,{open:A,onOpenChange:U,partner:e}),(0,s.jsx)(X.InviteUserDialog,{open:$,onOpenChange:O,entityType:"partner",entityId:e.id,entityName:e.name}),"individual"===e.type&&(0,s.jsx)(F.EntityKYCEditDialog,{open:V,onOpenChange:H,entityType:"partner",entityId:e.id,entityName:e.name,apiEndpoint:`/api/admin/partners/${e.id}`,initialData:{first_name:e.first_name??void 0,middle_name:e.middle_name??void 0,last_name:e.last_name??void 0,name_suffix:e.name_suffix??void 0,date_of_birth:e.date_of_birth??void 0,country_of_birth:e.country_of_birth??void 0,nationality:e.nationality??void 0,email:e.contact_email??void 0,phone_mobile:e.phone_mobile??void 0,phone_office:e.phone_office??void 0,residential_street:e.residential_street??void 0,residential_line_2:e.residential_line_2??void 0,residential_city:e.residential_city??void 0,residential_state:e.residential_state??void 0,residential_postal_code:e.residential_postal_code??void 0,residential_country:e.residential_country??void 0,is_us_citizen:e.is_us_citizen??void 0,is_us_taxpayer:e.is_us_taxpayer??void 0,us_taxpayer_id:e.us_taxpayer_id??void 0,country_of_tax_residency:e.country_of_tax_residency??void 0,id_type:e.id_type??void 0,id_number:e.id_number??void 0,id_issue_date:e.id_issue_date??void 0,id_expiry_date:e.id_expiry_date??void 0,id_issuing_country:e.id_issuing_country??void 0,middle_initial:e.middle_initial??void 0,proof_of_address_date:e.proof_of_address_date??void 0,proof_of_address_expiry:e.proof_of_address_expiry??void 0,tax_id_number:e.tax_id_number??void 0},onSuccess:()=>B.refresh()}),(0,s.jsx)(Q,{open:M,onOpenChange:R,partnerId:e.id,partnerName:e.name,feePlans:K})]})}e.s(["PartnerDetailClient",()=>es],81495)}]);