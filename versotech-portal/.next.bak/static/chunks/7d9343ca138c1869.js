(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,382021,e=>{"use strict";let a=(0,e.i(410587).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>a],382021)},932735,e=>{"use strict";let a=(0,e.i(410587).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>a],932735)},398472,e=>{"use strict";let a=(0,e.i(410587).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>a],398472)},90613,e=>{"use strict";var a=e.i(722679),t=e.i(282141);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}function o({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>l,"CardFooter",()=>o,"CardHeader",()=>i,"CardTitle",()=>r])},15098,e=>{"use strict";let a=(0,e.i(410587).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],15098)},429760,e=>{"use strict";var a=e.i(722679),t=e.i(340915),s=e.i(679472),i=e.i(47264),r=e.i(478985),l=e.i(873358),n=e.i(362208),o=e.i(599205),c=e.i(68977),d=e.i(798827),m="Tabs",[u,x]=(0,i.createContextScope)(m,[r.createRovingFocusGroupScope]),h=(0,r.createRovingFocusGroupScope)(),[f,p]=u(m),g=t.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,onValueChange:r,defaultValue:l,orientation:u="horizontal",dir:x,activationMode:h="automatic",...p}=e,g=(0,o.useDirection)(x),[b,y]=(0,c.useControllableState)({prop:i,onChange:r,defaultProp:l??"",caller:m});return(0,a.jsx)(f,{scope:s,baseId:(0,d.useId)(),value:b,onValueChange:y,orientation:u,dir:g,activationMode:h,children:(0,a.jsx)(n.Primitive.div,{dir:g,"data-orientation":u,...p,ref:t})})});g.displayName=m;var b="TabsList",y=t.forwardRef((e,t)=>{let{__scopeTabs:s,loop:i=!0,...l}=e,o=p(b,s),c=h(s);return(0,a.jsx)(r.Root,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:i,children:(0,a.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":o.orientation,...l,ref:t})})});y.displayName=b;var j="TabsTrigger",v=t.forwardRef((e,t)=>{let{__scopeTabs:i,value:l,disabled:o=!1,...c}=e,d=p(j,i),m=h(i),u=C(d.baseId,l),x=k(d.baseId,l),f=l===d.value;return(0,a.jsx)(r.Item,{asChild:!0,...m,focusable:!o,active:f,children:(0,a.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":x,"data-state":f?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u,...c,ref:t,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(l)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(l)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;f||o||!e||d.onValueChange(l)})})})});v.displayName=j;var N="TabsContent",w=t.forwardRef((e,s)=>{let{__scopeTabs:i,value:r,forceMount:o,children:c,...d}=e,m=p(N,i),u=C(m.baseId,r),x=k(m.baseId,r),h=r===m.value,f=t.useRef(h);return t.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(l.Presence,{present:o||h,children:({present:t})=>(0,a.jsx)(n.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!t,id:x,tabIndex:0,...d,ref:s,style:{...e.style,animationDuration:f.current?"0s":void 0},children:t&&c})})});function C(e,a){return`${e}-trigger-${a}`}function k(e,a){return`${e}-content-${a}`}w.displayName=N;var T=e.i(282141);let S=t.forwardRef(({id:e,...s},i)=>{let r=t.useId();return(0,a.jsx)(g,{ref:i,id:e??r,...s})});S.displayName="Tabs";let F=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(y,{ref:s,className:(0,T.cn)("inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));F.displayName=y.displayName;let M=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(v,{ref:s,className:(0,T.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));M.displayName=v.displayName;let L=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(w,{ref:s,className:(0,T.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));L.displayName=w.displayName,e.s(["Tabs",()=>S,"TabsContent",()=>L,"TabsList",()=>F,"TabsTrigger",()=>M],429760)},348759,e=>{"use strict";let a=(0,e.i(410587).default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);e.s(["Inbox",()=>a],348759)},530884,e=>{"use strict";var a=e.i(722679),t=e.i(340915),s=e.i(820417),i=e.i(90613),r=e.i(316264),l=e.i(129432),n=e.i(191569),o=e.i(429760),c=e.i(538892),d=e.i(263229),m=e.i(310556),u=e.i(762074);let x=(0,e.i(410587).default)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);var h=e.i(750809),f=e.i(382021),p=e.i(932735),g=e.i(348759),b=e.i(119311),y=e.i(691974),j=e.i(501259),v=e.i(15098),N=e.i(645855),w=e.i(398472),C=e.i(994500),k=e.i(282141);let T={deal:{label:"Deal",icon:y.Briefcase,color:"bg-blue-100 text-blue-800"},subscription:{label:"Subscription",icon:b.FileText,color:"bg-green-100 text-green-800"},signature:{label:"Signature",icon:b.FileText,color:"bg-purple-100 text-purple-800"},dataroom:{label:"Dataroom",icon:b.FileText,color:"bg-indigo-100 text-indigo-800"},kyc:{label:"KYC",icon:j.Users,color:"bg-orange-100 text-orange-800"},nda:{label:"NDA",icon:b.FileText,color:"bg-teal-100 text-teal-800"},agreement:{label:"Agreement",icon:b.FileText,color:"bg-pink-100 text-pink-800"},proxy_subscription:{label:"Proxy Subscription",icon:j.Users,color:"bg-cyan-100 text-cyan-800"},task:{label:"Task",icon:v.CheckCircle2,color:"bg-yellow-100 text-yellow-800"},reminder:{label:"Reminder",icon:N.Clock,color:"bg-amber-100 text-amber-800"},general:{label:"General",icon:u.Bell,color:"bg-gray-100 text-gray-800"}};function S(){let[e,b]=(0,t.useState)([]),[y,j]=(0,t.useState)([]),[N,S]=(0,t.useState)(!0),[F,M]=(0,t.useState)(!1),[L,R]=(0,t.useState)(""),[D,I]=(0,t.useState)("all"),[A,E]=(0,t.useState)("inbox"),P=async()=>{S(!0);try{let e=new URLSearchParams;"all"!==D&&e.set("type",D),"sent"===A&&e.set("created_by_me","true");let a=await fetch(`/api/notifications?${e.toString()}`);if(!a.ok)throw Error("Failed to load notifications");let t=await a.json();b(t.notifications??[]),t.types&&j(t.types)}catch(e){console.error(e),C.toast.error("Failed to load notifications")}finally{S(!1)}};(0,t.useEffect)(()=>{P()},[D,A]);let H=e.filter(e=>{if(!L)return!0;let a=L.toLowerCase();return e.title?.toLowerCase().includes(a)||e.message?.toLowerCase().includes(a)}),_=H.filter(e=>!e.read_at),B=H.filter(e=>e.read_at),z=_.map(e=>e.id),V=async()=>{if(0!==z.length&&!F){M(!0);try{if(!(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:z})})).ok)throw Error("Failed to mark notifications read");C.toast.success("Marked all as read"),P()}catch(e){console.error(e),C.toast.error("Failed to mark notifications as read")}finally{M(!1)}}},$=async e=>{try{if(!(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:[e]})})).ok)throw Error("Failed to mark notification read");P()}catch(e){console.error(e)}},q=e=>{let t,n,o,c,d,u=T[e.type||"general"]||T.general,x=u.icon;return(0,a.jsxs)(i.Card,{className:(0,k.cn)("border transition-colors hover:border-primary/50",e.read_at?"bg-white":"bg-blue-50/50 border-blue-200"),children:[(0,a.jsx)(i.CardHeader,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:(0,k.cn)("p-2 rounded-lg shrink-0",u.color),children:(0,a.jsx)(x,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(i.CardTitle,{className:"text-base text-gray-900 truncate",children:e.title}),!e.read_at&&(0,a.jsx)(l.Badge,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"New"}),e.type&&(0,a.jsx)(l.Badge,{variant:"outline",className:"text-xs capitalize",children:u.label})]}),(0,a.jsx)(i.CardDescription,{className:"mt-1",children:(t=new Date(e.created_at),o=Math.floor((n=new Date().getTime()-t.getTime())/6e4),c=Math.floor(n/36e5),d=Math.floor(n/864e5),o<1?"Just now":o<60?`${o}m ago`:c<24?`${c}h ago`:d<7?`${d}d ago`:t.toLocaleDateString())})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[!e.read_at&&(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>$(e.id),title:"Mark as read",children:(0,a.jsx)(m.Check,{className:"h-4 w-4"})}),e.link&&(0,a.jsx)(r.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,a.jsxs)(s.default,{href:e.link,children:["Open",(0,a.jsx)(w.ExternalLink,{className:"h-3 w-3 ml-1"})]})})]})]})}),(0,a.jsx)(i.CardContent,{children:(0,a.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:e.message})})]},e.id)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Notifications"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Stay up to date with deal activity, agreements, and subscription progress."})]}),(0,a.jsxs)(r.Button,{variant:"outline",disabled:0===z.length||F||"sent"===A,onClick:V,className:"gap-2",children:[F?(0,a.jsx)(d.Loader2,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(m.Check,{className:"h-4 w-4"}),"Mark all read (",z.length,")"]})]}),(0,a.jsxs)(o.Tabs,{value:A,onValueChange:e=>E(e),children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[(0,a.jsxs)(o.TabsList,{children:[(0,a.jsxs)(o.TabsTrigger,{value:"inbox",className:"gap-2",children:[(0,a.jsx)(g.Inbox,{className:"h-4 w-4"}),"Inbox"]}),(0,a.jsxs)(o.TabsTrigger,{value:"sent",className:"gap-2",children:[(0,a.jsx)(p.Send,{className:"h-4 w-4"}),"Sent by Me"]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,a.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Input,{placeholder:"Search notifications...",value:L,onChange:e=>R(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(c.Select,{value:D,onValueChange:I,children:[(0,a.jsxs)(c.SelectTrigger,{className:"w-[180px]",children:[(0,a.jsx)(f.Filter,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(c.SelectValue,{placeholder:"Filter by type"})]}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"all",children:"All Types"}),y.map(e=>{let t=T[e]||T.general;return(0,a.jsx)(c.SelectItem,{value:e,className:"capitalize",children:t.label},e)})]})]})]})]}),(0,a.jsx)(o.TabsContent,{value:"inbox",className:"mt-6 space-y-6",children:N?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12 text-gray-500 gap-2",children:[(0,a.jsx)(d.Loader2,{className:"h-5 w-5 animate-spin"}),"Loading notifications..."]}):0===H.length?(0,a.jsx)(i.Card,{className:"border border-gray-200 bg-white",children:(0,a.jsxs)(i.CardContent,{className:"py-12 text-center",children:[(0,a.jsx)(x,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:L||"all"!==D?"No notifications match your filters":"You're all caught up! New updates will show here."})]})}):(0,a.jsxs)(a.Fragment,{children:[_.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(u.Bell,{className:"h-4 w-4"}),"Unread (",_.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:_.map(q)})]}),B.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(v.CheckCircle2,{className:"h-4 w-4"}),"Earlier (",B.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:B.map(q)})]})]})}),(0,a.jsx)(o.TabsContent,{value:"sent",className:"mt-6",children:N?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12 text-gray-500 gap-2",children:[(0,a.jsx)(d.Loader2,{className:"h-5 w-5 animate-spin"}),"Loading sent notifications..."]}):0===H.length?(0,a.jsx)(i.Card,{className:"border border-gray-200 bg-white",children:(0,a.jsxs)(i.CardContent,{className:"py-12 text-center",children:[(0,a.jsx)(p.Send,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:L||"all"!==D?"No sent notifications match your filters":"No notifications sent yet. Notifications you create will appear here."})]})}):(0,a.jsx)("div",{className:"space-y-3",children:H.map(q)})})]})]})}e.s(["default",()=>S],530884)}]);