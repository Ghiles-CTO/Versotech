(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107034,e=>{"use strict";var s=e.i(722679),a=e.i(340915),t=e.i(90613),r=e.i(129432),l=e.i(316264),n=e.i(191569),i=e.i(538892),d=e.i(237635),c=e.i(429760),o=e.i(196767),m=e.i(119311),x=e.i(750809),u=e.i(15098),h=e.i(733179),j=e.i(971743),b=e.i(401148),p=e.i(561866),f=e.i(501259),g=e.i(80465),y=e.i(35334),N=e.i(540318),C=e.i(691974),v=e.i(398472),T=e.i(429747),w=e.i(352776),_=e.i(514133),S=e.i(816654),D=e.i(263229),P=e.i(619324),H=e.i(496383),F=e.i(994500),k=e.i(501495),I=e.i(671613);function L({open:e,onOpenChange:t,commission:r,onSuccess:i}){let[d,c]=(0,a.useState)(!1),[o,x]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[j,b]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),y=async()=>{if(r){c(!0);try{let e=await fetch(`/api/lawyers/me/introducer-commissions/${r.id}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_reference:o||void 0,payment_date:u||void 0,notes:j||void 0})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to confirm payment");F.toast.success(s.message||"Payment confirmed successfully"),t(!1),i?.(),x(""),h(""),b("")}catch(e){console.error("[ConfirmIntroducerPaymentModal] Error:",e),F.toast.error(e instanceof Error?e.message:"Failed to confirm payment")}finally{c(!1)}}},N=e=>{e||(x(""),h(""),b("")),t(e)};if(!r)return null;let C=(0,k.formatCurrency)(r.accrual_amount,r.currency);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Dialog,{open:e,onOpenChange:N,children:(0,s.jsxs)(w.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(w.DialogHeader,{children:[(0,s.jsxs)(w.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.CheckCircle,{className:"h-5 w-5 text-green-600"}),"Confirm Introducer Payment"]}),(0,s.jsx)(w.DialogDescription,{children:"Confirm that payment has been made to the introducer. This will update the commission status and notify all parties."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Introducer:"}),(0,s.jsx)("span",{className:"font-medium",children:r.introducer_name})]}),r.deal_name&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Deal:"}),(0,s.jsx)("span",{className:"font-medium",children:r.deal_name})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Amount:"}),(0,s.jsx)("span",{className:"text-lg font-bold text-green-600",children:C})]})]}),r.invoice_id&&(0,s.jsxs)(l.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>f(!0),children:[(0,s.jsx)(H.Eye,{className:"h-4 w-4 mr-2"}),"View Submitted Invoice"]}),!r.invoice_id&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg text-yellow-800 dark:text-yellow-200 text-sm",children:[(0,s.jsx)(P.AlertTriangle,{className:"h-4 w-4 flex-shrink-0"}),(0,s.jsx)("span",{children:"No invoice document attached to this commission."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"bankReference",children:"Bank Reference (Optional)"}),(0,s.jsx)(n.Input,{id:"bankReference",placeholder:"e.g., WIRE-2024-12345",value:o,onChange:e=>x(e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Wire transfer reference or payment identifier"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"paymentDate",children:"Payment Date (Optional)"}),(0,s.jsx)(n.Input,{id:"paymentDate",type:"date",value:u,onChange:e=>h(e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Defaults to today if not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"notes",children:"Notes (Optional)"}),(0,s.jsx)(S.Textarea,{id:"notes",placeholder:"Any additional notes about this payment...",value:j,onChange:e=>b(e.target.value),rows:2})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg text-blue-800 dark:text-blue-200 text-sm",children:[(0,s.jsx)(m.FileText,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Notifications will be sent to:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside mt-1 text-xs",children:[(0,s.jsx)("li",{children:"Arranger (payment confirmed)"}),(0,s.jsx)("li",{children:"Introducer (payment received)"}),(0,s.jsx)("li",{children:"Staff administrators"})]})]})]})]}),(0,s.jsxs)(w.DialogFooter,{children:[(0,s.jsx)(l.Button,{variant:"outline",onClick:()=>N(!1),disabled:d,children:"Cancel"}),(0,s.jsx)(l.Button,{onClick:y,disabled:d,className:"bg-green-600 hover:bg-green-700",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirming..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.CheckCircle,{className:"mr-2 h-4 w-4"}),"Confirm Payment"]})})]})]})}),r.invoice_id&&(0,s.jsx)(I.DocumentViewer,{documentId:r.invoice_id,documentName:`Invoice - ${r.introducer_name}`,mimeType:"application/pdf",open:p,onClose:()=>f(!1)})]})}function B({open:e,onOpenChange:t,commission:r,onSuccess:i}){let[d,c]=(0,a.useState)(!1),[o,x]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[j,b]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),y=async()=>{if(r){c(!0);try{let e=await fetch(`/api/lawyers/me/partner-commissions/${r.id}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_reference:o||void 0,payment_date:u||void 0,notes:j||void 0})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to confirm payment");F.toast.success(s.message||"Payment confirmed successfully"),t(!1),i?.(),x(""),h(""),b("")}catch(e){console.error("[ConfirmPartnerPaymentModal] Error:",e),F.toast.error(e instanceof Error?e.message:"Failed to confirm payment")}finally{c(!1)}}},N=e=>{e||(x(""),h(""),b("")),t(e)};if(!r)return null;let C=(0,k.formatCurrency)(r.accrual_amount,r.currency);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Dialog,{open:e,onOpenChange:N,children:(0,s.jsxs)(w.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(w.DialogHeader,{children:[(0,s.jsxs)(w.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.CheckCircle,{className:"h-5 w-5 text-green-600"}),"Confirm Partner Payment"]}),(0,s.jsx)(w.DialogDescription,{children:"Confirm that payment has been made to the partner. This will update the commission status and notify all parties."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Partner:"}),(0,s.jsx)("span",{className:"font-medium",children:r.partner_name})]}),r.deal_name&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Deal:"}),(0,s.jsx)("span",{className:"font-medium",children:r.deal_name})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Amount:"}),(0,s.jsx)("span",{className:"text-lg font-bold text-green-600",children:C})]})]}),r.invoice_id?(0,s.jsxs)(l.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>f(!0),children:[(0,s.jsx)(H.Eye,{className:"h-4 w-4 mr-2"}),"View Submitted Invoice"]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800 text-sm",children:[(0,s.jsx)(P.AlertTriangle,{className:"h-4 w-4 flex-shrink-0"}),(0,s.jsx)("span",{children:"No invoice document attached to this commission."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"partnerBankReference",children:"Bank Reference (Optional)"}),(0,s.jsx)(n.Input,{id:"partnerBankReference",placeholder:"e.g., WIRE-2024-12345",value:o,onChange:e=>x(e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Wire transfer reference or payment identifier"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"partnerPaymentDate",children:"Payment Date (Optional)"}),(0,s.jsx)(n.Input,{id:"partnerPaymentDate",type:"date",value:u,onChange:e=>h(e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Defaults to today if not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"partnerNotes",children:"Notes (Optional)"}),(0,s.jsx)(S.Textarea,{id:"partnerNotes",placeholder:"Any additional notes about this payment...",value:j,onChange:e=>b(e.target.value),rows:2})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-sm",children:[(0,s.jsx)(m.FileText,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Notifications will be sent to:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside mt-1 text-xs",children:[(0,s.jsx)("li",{children:"Arranger (payment confirmed)"}),(0,s.jsx)("li",{children:"Partner (payment received)"}),(0,s.jsx)("li",{children:"Staff administrators"})]})]})]})]}),(0,s.jsxs)(w.DialogFooter,{children:[(0,s.jsx)(l.Button,{variant:"outline",onClick:()=>N(!1),disabled:d,children:"Cancel"}),(0,s.jsx)(l.Button,{onClick:y,disabled:d,className:"bg-green-600 hover:bg-green-700",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirming..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.CheckCircle,{className:"mr-2 h-4 w-4"}),"Confirm Payment"]})})]})]})}),r.invoice_id&&(0,s.jsx)(I.DocumentViewer,{documentId:r.invoice_id,documentName:`Invoice - ${r.partner_name}`,mimeType:"application/pdf",open:p,onClose:()=>f(!1)})]})}function A({open:e,onOpenChange:t,commission:r,onSuccess:i}){let[d,c]=(0,a.useState)(!1),[o,x]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[j,b]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),y=async()=>{if(r){c(!0);try{let e=await fetch(`/api/lawyers/me/commercial-partner-commissions/${r.id}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_reference:o||void 0,payment_date:u||void 0,notes:j||void 0})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to confirm payment");F.toast.success(s.message||"Payment confirmed successfully"),t(!1),i?.(),x(""),h(""),b("")}catch(e){console.error("[ConfirmCommercialPartnerPaymentModal] Error:",e),F.toast.error(e instanceof Error?e.message:"Failed to confirm payment")}finally{c(!1)}}},N=e=>{e||(x(""),h(""),b("")),t(e)};if(!r)return null;let C=(0,k.formatCurrency)(r.accrual_amount,r.currency);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Dialog,{open:e,onOpenChange:N,children:(0,s.jsxs)(w.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(w.DialogHeader,{children:[(0,s.jsxs)(w.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.CheckCircle,{className:"h-5 w-5 text-green-600"}),"Confirm Commercial Partner Payment"]}),(0,s.jsx)(w.DialogDescription,{children:"Confirm that payment has been made to the commercial partner. This will update the commission status and notify all parties."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Commercial Partner:"}),(0,s.jsx)("span",{className:"font-medium",children:r.commercial_partner_name})]}),r.deal_name&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Deal:"}),(0,s.jsx)("span",{className:"font-medium",children:r.deal_name})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Amount:"}),(0,s.jsx)("span",{className:"text-lg font-bold text-green-600",children:C})]})]}),r.invoice_id?(0,s.jsxs)(l.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>f(!0),children:[(0,s.jsx)(H.Eye,{className:"h-4 w-4 mr-2"}),"View Submitted Invoice"]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800 text-sm",children:[(0,s.jsx)(P.AlertTriangle,{className:"h-4 w-4 flex-shrink-0"}),(0,s.jsx)("span",{children:"No invoice document attached to this commission."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"commercialPartnerBankReference",children:"Bank Reference (Optional)"}),(0,s.jsx)(n.Input,{id:"commercialPartnerBankReference",placeholder:"e.g., WIRE-2024-12345",value:o,onChange:e=>x(e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Wire transfer reference or payment identifier"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"commercialPartnerPaymentDate",children:"Payment Date (Optional)"}),(0,s.jsx)(n.Input,{id:"commercialPartnerPaymentDate",type:"date",value:u,onChange:e=>h(e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Defaults to today if not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_.Label,{htmlFor:"commercialPartnerNotes",children:"Notes (Optional)"}),(0,s.jsx)(S.Textarea,{id:"commercialPartnerNotes",placeholder:"Any additional notes about this payment...",value:j,onChange:e=>b(e.target.value),rows:2})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-sm",children:[(0,s.jsx)(m.FileText,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Notifications will be sent to:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside mt-1 text-xs",children:[(0,s.jsx)("li",{children:"Arranger (payment confirmed)"}),(0,s.jsx)("li",{children:"Commercial partner (payment received)"}),(0,s.jsx)("li",{children:"Staff administrators"})]})]})]})]}),(0,s.jsxs)(w.DialogFooter,{children:[(0,s.jsx)(l.Button,{variant:"outline",onClick:()=>N(!1),disabled:d,children:"Cancel"}),(0,s.jsx)(l.Button,{onClick:y,disabled:d,className:"bg-green-600 hover:bg-green-700",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirming..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.CheckCircle,{className:"mr-2 h-4 w-4"}),"Confirm Payment"]})})]})]})}),r.invoice_id&&(0,s.jsx)(I.DocumentViewer,{documentId:r.invoice_id,documentName:`Invoice - ${r.commercial_partner_name}`,mimeType:"application/pdf",open:p,onClose:()=>f(!1)})]})}var R=e.i(282141);function O(e,s="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}let E={committed:"bg-blue-100 text-blue-800 border-blue-200",partially_funded:"bg-amber-100 text-amber-800 border-amber-200",funded:"bg-emerald-100 text-emerald-800 border-emerald-200",active:"bg-green-100 text-green-800 border-green-200"},M={committed:"Awaiting Funding",partially_funded:"Partial",funded:"Fully Funded",active:"Active"},U={accrued:"bg-blue-100 text-blue-800 border-blue-200",invoiced:"bg-amber-100 text-amber-800 border-amber-200",paid:"bg-emerald-100 text-emerald-800 border-emerald-200",waived:"bg-gray-100 text-gray-800 border-gray-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200",disputed:"bg-red-100 text-red-800 border-red-200",voided:"bg-gray-100 text-gray-800 border-gray-200"},V={mgmt:"Management Fee",perf:"Performance Fee",carry:"Carried Interest",upfront:"Upfront Fee",placement:"Placement Fee",transaction:"Transaction Fee",admin:"Admin Fee"},$={accrued:"bg-blue-100 text-blue-800 border-blue-200",invoice_requested:"bg-amber-100 text-amber-800 border-amber-200",invoice_submitted:"bg-indigo-100 text-indigo-800 border-indigo-200",invoiced:"bg-purple-100 text-purple-800 border-purple-200",paid:"bg-emerald-100 text-emerald-800 border-emerald-200",rejected:"bg-rose-100 text-rose-800 border-rose-200"},z={accrued:"Accrued",invoice_requested:"Invoice Requested",invoice_submitted:"Invoice Submitted",invoiced:"Invoiced",paid:"Paid",rejected:"Rejected"},W={introducer:{label:"Introducer",icon:y.UserCheck,color:"text-blue-600"},partner:{label:"Partner",icon:N.Handshake,color:"text-green-600"},commercial_partner:{label:"Commercial Partner",icon:C.Briefcase,color:"text-purple-600"}};function q({lawyerInfo:e,deals:y,subscriptions:w,feeEvents:_,introducerCommissions:S,partnerCommissions:D,commercialPartnerCommissions:P,allCommissions:H}){let[F,I]=(0,a.useState)(""),[q,J]=(0,a.useState)("all"),[K,Y]=(0,a.useState)("subscriptions"),[G,Q]=(0,a.useState)(!1),[X,Z]=(0,a.useState)(null),[ee,es]=(0,a.useState)(!1),[ea,et]=(0,a.useState)(null),[er,el]=(0,a.useState)(!1),[en,ei]=(0,a.useState)(null),[ed,ec]=(0,a.useState)("all"),eo=(0,a.useMemo)(()=>{let e=new Map,s=new Map;w.forEach(a=>{let t=a.currency||"USD";e.set(t,(e.get(t)||0)+a.commitment),s.set(t,(s.get(t)||0)+a.funded_amount)});let a=w.filter(e=>"committed"===e.status).length,t=w.filter(e=>"partially_funded"===e.status).length,r=w.filter(e=>"funded"===e.status||"active"===e.status).length,l=new Map,n=new Map;_.forEach(e=>{let s=e.currency||"USD",a=e.computed_amount||0;"paid"===e.status?l.set(s,(l.get(s)||0)+a):("accrued"===e.status||"invoiced"===e.status)&&n.set(s,(n.get(s)||0)+a)});let i=(e,s)=>"USD"===e[0]?-1:"USD"===s[0]?1:e[0].localeCompare(s[0]),d=Array.from(e.entries()).filter(([e,s])=>s>0).sort(i).map(([e,s])=>({currency:e,amount:s})),c=Array.from(s.entries()).filter(([e,s])=>s>0).sort(i).map(([e,s])=>({currency:e,amount:s})),o=Array.from(l.entries()).filter(([e,s])=>s>0).sort(i).map(([e,s])=>({currency:e,amount:s})),m=Array.from(n.entries()).filter(([e,s])=>s>0).sort(i).map(([e,s])=>({currency:e,amount:s}));return{totalDeals:y.length,totalSubscriptions:w.length,commitmentTotals:d,fundedTotals:c,awaitingFunding:a,partiallyFunded:t,fullyFunded:r,totalFeeEvents:_.length,feesPaidTotals:o,feesPendingTotals:m,feesPaidCount:_.filter(e=>"paid"===e.status).length,feesPendingCount:_.filter(e=>"accrued"===e.status||"invoiced"===e.status).length}},[y,w,_]),em=(0,a.useMemo)(()=>w.filter(e=>{let s="all"===q||e.deal_id===q,a=!F||e.investor_name.toLowerCase().includes(F.toLowerCase())||e.deal_name.toLowerCase().includes(F.toLowerCase());return s&&a}),[w,q,F]),ex=(0,a.useMemo)(()=>_.filter(e=>{let s="all"===q||e.deal_id===q,a=!F||e.deal_name.toLowerCase().includes(F.toLowerCase())||e.investor_name.toLowerCase().includes(F.toLowerCase())||e.fee_type&&e.fee_type.toLowerCase().includes(F.toLowerCase());return s&&a}),[_,q,F]),eu=(0,a.useMemo)(()=>S.filter(e=>{let s="all"===q||e.deal_id===q,a=!F||e.introducer_name.toLowerCase().includes(F.toLowerCase())||e.deal_name&&e.deal_name.toLowerCase().includes(F.toLowerCase());return s&&a}),[S,q,F]),eh=(0,a.useMemo)(()=>D.filter(e=>{let s="all"===q||e.deal_id===q,a=!F||e.partner_name.toLowerCase().includes(F.toLowerCase())||e.deal_name&&e.deal_name.toLowerCase().includes(F.toLowerCase());return s&&a}),[D,q,F]),ej=(0,a.useMemo)(()=>P.filter(e=>{let s="all"===q||e.deal_id===q,a=!F||e.commercial_partner_name.toLowerCase().includes(F.toLowerCase())||e.deal_name&&e.deal_name.toLowerCase().includes(F.toLowerCase());return s&&a}),[P,q,F]),eb=(0,a.useMemo)(()=>H.filter(e=>{let s="all"===q||e.deal_id===q,a="all"===ed||e.status===ed,t=!F||e.entity_name.toLowerCase().includes(F.toLowerCase())||e.deal_name&&e.deal_name.toLowerCase().includes(F.toLowerCase())||e.investor_name&&e.investor_name.toLowerCase().includes(F.toLowerCase());return s&&a&&t}),[H,q,ed,F]),ep=(0,a.useMemo)(()=>y.map(e=>{let s=w.filter(s=>s.deal_id===e.id),a=_.filter(s=>s.deal_id===e.id),t=s.reduce((e,s)=>e+s.commitment,0),r=s.reduce((e,s)=>e+s.funded_amount,0),l=s.reduce((e,s)=>e+s.outstanding_amount,0),n=a.reduce((e,s)=>e+(s.computed_amount||0),0),i=a.filter(e=>"paid"===e.status).reduce((e,s)=>e+(s.computed_amount||0),0);return{...e,subscriptions_count:s.length,committed:t,funded:r,outstanding:l,fees_total:n,fees_paid:i,fees_pending:n-i}}),[y,w,_]);return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Reconciliation"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:e?`Financial reconciliation for ${e.display_name}'s assigned deals`:"Financial reconciliation for assigned deals"})]}),e?.specializations?.length?(0,s.jsx)("div",{className:"flex gap-1",children:e.specializations.slice(0,2).map((e,a)=>(0,s.jsx)(r.Badge,{variant:"outline",className:"capitalize",children:e},a))}):null]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(j.Building2,{className:"h-4 w-4"}),"Assigned Deals"]})}),(0,s.jsxs)(t.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:eo.totalDeals}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[eo.totalSubscriptions," subscriptions"]})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(h.TrendingUp,{className:"h-4 w-4"}),"Total Commitment"]})}),(0,s.jsxs)(t.CardContent,{children:[eo.commitmentTotals.length>0?(0,s.jsx)("div",{className:"space-y-0.5",children:eo.commitmentTotals.map((e,a)=>(0,s.jsx)("div",{className:`${0===a?"text-2xl font-bold":"text-sm font-medium"} text-blue-600`,children:O(e.amount,e.currency)},e.currency))}):(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:O(0)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[eo.awaitingFunding," awaiting funding"]})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(u.CheckCircle2,{className:"h-4 w-4"}),"Total Funded"]})}),(0,s.jsxs)(t.CardContent,{children:[eo.fundedTotals.length>0?(0,s.jsx)("div",{className:"space-y-0.5",children:eo.fundedTotals.map((e,a)=>(0,s.jsx)("div",{className:`${0===a?"text-2xl font-bold":"text-sm font-medium"} text-emerald-600`,children:O(e.amount,e.currency)},e.currency))}):(0,s.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:O(0)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[eo.partiallyFunded," partially funded • ",eo.fullyFunded," fully funded"]})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(p.CreditCard,{className:"h-4 w-4"}),"Fee Payments"]})}),(0,s.jsxs)(t.CardContent,{children:[eo.feesPaidTotals.length>0?(0,s.jsx)("div",{className:"space-y-0.5",children:eo.feesPaidTotals.map((e,a)=>(0,s.jsx)("div",{className:`${0===a?"text-2xl font-bold":"text-sm font-medium"} text-purple-600`,children:O(e.amount,e.currency)},e.currency))}):(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:O(0)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[eo.feesPendingCount," pending (",eo.feesPendingTotals.length>0?eo.feesPendingTotals.map(e=>O(e.amount,e.currency)).join(" / "):O(0),")"]})]})]})]}),(0,s.jsx)(t.Card,{children:(0,s.jsx)(t.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(n.Input,{placeholder:"Search investors or deals...",value:F,onChange:e=>I(e.target.value),className:"pl-10"})]})}),(0,s.jsxs)(i.Select,{value:q,onValueChange:J,children:[(0,s.jsx)(i.SelectTrigger,{className:"w-full md:w-64",children:(0,s.jsx)(i.SelectValue,{placeholder:"Filter by deal"})}),(0,s.jsxs)(i.SelectContent,{children:[(0,s.jsx)(i.SelectItem,{value:"all",children:"All Deals"}),y.map(e=>(0,s.jsx)(i.SelectItem,{value:e.id,children:e.name},e.id))]})]})]})})}),0===y.length?(0,s.jsx)(t.Card,{children:(0,s.jsx)(t.CardContent,{className:"py-16",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(b.AlertCircle,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Deals Assigned"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"You don't have any deals assigned yet. Contact the VERSO team to be assigned to deals."})]})})}):(0,s.jsxs)(c.Tabs,{value:K,onValueChange:Y,className:"space-y-4",children:[(0,s.jsxs)(c.TabsList,{children:[(0,s.jsxs)(c.TabsTrigger,{value:"subscriptions",className:"flex items-center gap-2",children:[(0,s.jsx)(m.FileText,{className:"h-4 w-4"}),"Subscriptions (",em.length,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"fees",className:"flex items-center gap-2",children:[(0,s.jsx)(o.DollarSign,{className:"h-4 w-4"}),"Fee Payments (",ex.length,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"commission-status",className:"flex items-center gap-2",children:[(0,s.jsx)(T.ClipboardList,{className:"h-4 w-4"}),"Commission Status (",eb.length,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"introducer-fees",className:"flex items-center gap-2",children:[(0,s.jsx)(f.Users,{className:"h-4 w-4"}),"Introducer Fees (",eu.length,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"partner-fees",className:"flex items-center gap-2",children:[(0,s.jsx)(N.Handshake,{className:"h-4 w-4"}),"Partner Fees (",eh.length,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"commercial-partner-fees",className:"flex items-center gap-2",children:[(0,s.jsx)(C.Briefcase,{className:"h-4 w-4"}),"Commercial Partner Fees (",ej.length,")"]}),(0,s.jsxs)(c.TabsTrigger,{value:"deals",className:"flex items-center gap-2",children:[(0,s.jsx)(j.Building2,{className:"h-4 w-4"}),"Deal Summary (",y.length,")"]})]}),(0,s.jsx)(c.TabsContent,{value:"subscriptions",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Subscription Reconciliation"}),(0,s.jsx)(t.CardDescription,{children:"Funding status for all signed subscriptions in your assigned deals"})]}),(0,s.jsx)(t.CardContent,{children:0===em.length?(0,s.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,s.jsx)(m.FileText,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No subscriptions match your filters"})]}):(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d.Table,{children:[(0,s.jsx)(d.TableHeader,{children:(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableHead,{children:"Investor"}),(0,s.jsx)(d.TableHead,{children:"Deal"}),(0,s.jsx)(d.TableHead,{children:"Commitment"}),(0,s.jsx)(d.TableHead,{children:"Funded"}),(0,s.jsx)(d.TableHead,{children:"Outstanding"}),(0,s.jsx)(d.TableHead,{children:"Status"}),(0,s.jsx)(d.TableHead,{children:"Funded Date"})]})}),(0,s.jsx)(d.TableBody,{children:em.map(e=>(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:e.investor_name})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:e.deal_name})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:O(e.commitment,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium text-emerald-600",children:O(e.funded_amount,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:(0,R.cn)("font-medium",e.outstanding_amount>0?"text-amber-600":"text-muted-foreground"),children:O(e.outstanding_amount,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)(r.Badge,{variant:"outline",className:(0,R.cn)("capitalize",E[e.status]),children:M[e.status]||e.status})}),(0,s.jsx)(d.TableCell,{children:e.funded_at?(0,s.jsx)("div",{className:"text-sm",children:(0,k.formatDate)(e.funded_at)}):(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"Pending"})})]},e.id))})]})})})]})}),(0,s.jsx)(c.TabsContent,{value:"fees",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Fee Payment Reconciliation"}),(0,s.jsx)(t.CardDescription,{children:"Fee accruals and payments for your assigned deals"})]}),(0,s.jsx)(t.CardContent,{children:0===ex.length?(0,s.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,s.jsx)(o.DollarSign,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No fee events match your filters"})]}):(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d.Table,{children:[(0,s.jsx)(d.TableHeader,{children:(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableHead,{children:"Deal"}),(0,s.jsx)(d.TableHead,{children:"Investor"}),(0,s.jsx)(d.TableHead,{children:"Fee Type"}),(0,s.jsx)(d.TableHead,{children:"Amount"}),(0,s.jsx)(d.TableHead,{children:"Invoice"}),(0,s.jsx)(d.TableHead,{children:"Status"}),(0,s.jsx)(d.TableHead,{children:"Event Date"}),(0,s.jsx)(d.TableHead,{children:"Processed"})]})}),(0,s.jsx)(d.TableBody,{children:ex.map(e=>(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:e.deal_name})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:e.investor_name})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)(r.Badge,{variant:"outline",children:V[e.fee_type||""]||e.fee_type||"Unknown"})}),(0,s.jsxs)(d.TableCell,{children:[(0,s.jsx)("div",{className:"font-medium",children:O(e.computed_amount||0,e.currency)}),e.base_amount&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["of ",O(e.base_amount,e.currency)]})]}),(0,s.jsx)(d.TableCell,{children:e.invoice_number?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:e.invoice_number}),e.invoice_status&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground capitalize",children:e.invoice_status.replace("_"," ")})]}):(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"Not issued"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)(r.Badge,{variant:"outline",className:(0,R.cn)("capitalize",U[e.status]),children:e.status})}),(0,s.jsx)(d.TableCell,{children:e.event_date?(0,s.jsx)("div",{className:"text-sm",children:(0,k.formatDate)(e.event_date)}):(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"-"})}),(0,s.jsx)(d.TableCell,{children:e.processed_at?(0,s.jsx)("div",{className:"text-sm",children:(0,k.formatDate)(e.processed_at)}):(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"Pending"})})]},e.id))})]})})})]})}),(0,s.jsx)(c.TabsContent,{value:"commission-status",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"flex flex-row items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(t.CardTitle,{children:"Commission Status"}),(0,s.jsx)(t.CardDescription,{children:"All commission statuses across introducers, partners, and commercial partners"})]}),(0,s.jsxs)(i.Select,{value:ed,onValueChange:ec,children:[(0,s.jsx)(i.SelectTrigger,{className:"w-48",children:(0,s.jsx)(i.SelectValue,{placeholder:"Filter by status"})}),(0,s.jsxs)(i.SelectContent,{children:[(0,s.jsx)(i.SelectItem,{value:"all",children:"All Statuses"}),(0,s.jsx)(i.SelectItem,{value:"accrued",children:"Accrued"}),(0,s.jsx)(i.SelectItem,{value:"invoice_requested",children:"Invoice Requested"}),(0,s.jsx)(i.SelectItem,{value:"invoice_submitted",children:"Invoice Submitted"}),(0,s.jsx)(i.SelectItem,{value:"invoiced",children:"Invoiced"}),(0,s.jsx)(i.SelectItem,{value:"paid",children:"Paid"}),(0,s.jsx)(i.SelectItem,{value:"rejected",children:"Rejected"})]})]})]}),(0,s.jsx)(t.CardContent,{children:0===eb.length?(0,s.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,s.jsx)(T.ClipboardList,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No commissions match your filters"})]}):(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d.Table,{children:[(0,s.jsx)(d.TableHeader,{children:(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableHead,{children:"Entity Type"}),(0,s.jsx)(d.TableHead,{children:"Entity Name"}),(0,s.jsx)(d.TableHead,{children:"Deal"}),(0,s.jsx)(d.TableHead,{children:"Investor"}),(0,s.jsx)(d.TableHead,{children:"Amount"}),(0,s.jsx)(d.TableHead,{children:"Status"}),(0,s.jsx)(d.TableHead,{children:"Invoice"})]})}),(0,s.jsx)(d.TableBody,{children:eb.map(e=>{let a=W[e.entity_type],t=a?.icon||f.Users;return(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableCell,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(t,{className:(0,R.cn)("h-4 w-4",a?.color)}),(0,s.jsx)("span",{className:"text-sm",children:a?.label||e.entity_type})]})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:e.entity_name})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:e.deal_name||"—"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:e.investor_name||"—"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium text-green-600",children:O(e.accrual_amount,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)(r.Badge,{variant:"outline",className:(0,R.cn)("capitalize",$[e.status]),children:z[e.status]||e.status})}),(0,s.jsx)(d.TableCell,{children:e.invoice_id?(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm text-blue-600",children:[(0,s.jsx)(v.ExternalLink,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"View"})]}):(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"—"})})]},`${e.entity_type}-${e.id}`)})})]})})})]})}),(0,s.jsx)(c.TabsContent,{value:"introducer-fees",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Introducer Fee Payments"}),(0,s.jsx)(t.CardDescription,{children:"Introducer commissions awaiting payment confirmation"})]}),(0,s.jsx)(t.CardContent,{children:0===eu.length?(0,s.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,s.jsx)(f.Users,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No introducer commissions awaiting payment"})]}):(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d.Table,{children:[(0,s.jsx)(d.TableHeader,{children:(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableHead,{children:"Introducer"}),(0,s.jsx)(d.TableHead,{children:"Deal"}),(0,s.jsx)(d.TableHead,{children:"Amount"}),(0,s.jsx)(d.TableHead,{children:"Status"}),(0,s.jsx)(d.TableHead,{children:"Date"}),(0,s.jsx)(d.TableHead,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(d.TableBody,{children:eu.map(e=>(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:e.introducer_name})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:e.deal_name||"—"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium text-green-600",children:O(e.accrual_amount,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)(r.Badge,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-200",children:"Awaiting Payment"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:(0,k.formatDate)(e.created_at)})}),(0,s.jsx)(d.TableCell,{className:"text-right",children:(0,s.jsxs)(l.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{Z(e),Q(!0)},children:[(0,s.jsx)(g.CheckCircle,{className:"h-4 w-4 mr-1"}),"Confirm Payment"]})})]},e.id))})]})})})]})}),(0,s.jsx)(c.TabsContent,{value:"partner-fees",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Partner Fee Payments"}),(0,s.jsx)(t.CardDescription,{children:"Partner commissions awaiting payment confirmation"})]}),(0,s.jsx)(t.CardContent,{children:0===eh.length?(0,s.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,s.jsx)(N.Handshake,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No partner commissions awaiting payment"})]}):(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d.Table,{children:[(0,s.jsx)(d.TableHeader,{children:(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableHead,{children:"Partner"}),(0,s.jsx)(d.TableHead,{children:"Deal"}),(0,s.jsx)(d.TableHead,{children:"Amount"}),(0,s.jsx)(d.TableHead,{children:"Status"}),(0,s.jsx)(d.TableHead,{children:"Date"}),(0,s.jsx)(d.TableHead,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(d.TableBody,{children:eh.map(e=>(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:e.partner_name})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:e.deal_name||"—"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium text-green-600",children:O(e.accrual_amount,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)(r.Badge,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-200",children:"Awaiting Payment"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:(0,k.formatDate)(e.created_at)})}),(0,s.jsx)(d.TableCell,{className:"text-right",children:(0,s.jsxs)(l.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{et(e),es(!0)},children:[(0,s.jsx)(g.CheckCircle,{className:"h-4 w-4 mr-1"}),"Confirm Payment"]})})]},e.id))})]})})})]})}),(0,s.jsx)(c.TabsContent,{value:"commercial-partner-fees",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Commercial Partner Fee Payments"}),(0,s.jsx)(t.CardDescription,{children:"Commercial partner commissions awaiting payment confirmation"})]}),(0,s.jsx)(t.CardContent,{children:0===ej.length?(0,s.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,s.jsx)(C.Briefcase,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No commercial partner commissions awaiting payment"})]}):(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d.Table,{children:[(0,s.jsx)(d.TableHeader,{children:(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableHead,{children:"Commercial Partner"}),(0,s.jsx)(d.TableHead,{children:"Deal"}),(0,s.jsx)(d.TableHead,{children:"Amount"}),(0,s.jsx)(d.TableHead,{children:"Status"}),(0,s.jsx)(d.TableHead,{children:"Date"}),(0,s.jsx)(d.TableHead,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(d.TableBody,{children:ej.map(e=>(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:e.commercial_partner_name})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:e.deal_name||"—"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium text-green-600",children:O(e.accrual_amount,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)(r.Badge,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-200",children:"Awaiting Payment"})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"text-sm",children:(0,k.formatDate)(e.created_at)})}),(0,s.jsx)(d.TableCell,{className:"text-right",children:(0,s.jsxs)(l.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{ei(e),el(!0)},children:[(0,s.jsx)(g.CheckCircle,{className:"h-4 w-4 mr-1"}),"Confirm Payment"]})})]},e.id))})]})})})]})}),(0,s.jsx)(c.TabsContent,{value:"deals",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Deal-Level Summary"}),(0,s.jsx)(t.CardDescription,{children:"Aggregated financial data by deal"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d.Table,{children:[(0,s.jsx)(d.TableHeader,{children:(0,s.jsxs)(d.TableRow,{children:[(0,s.jsx)(d.TableHead,{children:"Deal"}),(0,s.jsx)(d.TableHead,{children:"Subscriptions"}),(0,s.jsx)(d.TableHead,{children:"Committed"}),(0,s.jsx)(d.TableHead,{children:"Funded"}),(0,s.jsx)(d.TableHead,{children:"Outstanding"}),(0,s.jsx)(d.TableHead,{children:"Fees Paid"}),(0,s.jsx)(d.TableHead,{children:"Fees Pending"})]})}),(0,s.jsx)(d.TableBody,{children:ep.map(e=>(0,s.jsxs)(d.TableRow,{children:[(0,s.jsxs)(d.TableCell,{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),e.company_name&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.company_name})]}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)(r.Badge,{variant:"secondary",children:e.subscriptions_count})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium",children:O(e.committed,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium text-emerald-600",children:O(e.funded,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:(0,R.cn)("font-medium",e.outstanding>0?"text-amber-600":"text-muted-foreground"),children:O(e.outstanding,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:"font-medium text-emerald-600",children:O(e.fees_paid,e.currency)})}),(0,s.jsx)(d.TableCell,{children:(0,s.jsx)("div",{className:(0,R.cn)("font-medium",e.fees_pending>0?"text-amber-600":"text-muted-foreground"),children:O(e.fees_pending,e.currency)})})]},e.id))})]})})})]})})]}),(0,s.jsx)(L,{open:G,onOpenChange:Q,commission:X,onSuccess:()=>window.location.reload()}),(0,s.jsx)(B,{open:ee,onOpenChange:es,commission:ea,onSuccess:()=>window.location.reload()}),(0,s.jsx)(A,{open:er,onOpenChange:el,commission:en,onSuccess:()=>window.location.reload()})]})}e.s(["LawyerReconciliationClient",()=>q],107034)}]);