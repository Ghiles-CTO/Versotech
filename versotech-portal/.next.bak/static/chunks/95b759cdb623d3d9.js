(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,496383,e=>{"use strict";let t=(0,e.i(410587).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],496383)},501495,e=>{"use strict";e.s(["formatBps",0,e=>null==e?"—":`${e} bps`,"formatCurrency",0,(e,t="USD")=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:0}).format(e):"$0","formatDate",0,e=>{if(!e)return"—";let t="string"==typeof e?new Date(e):e;return Number.isNaN(t?.getTime?.())?"—":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}])},932735,e=>{"use strict";let t=(0,e.i(410587).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],932735)},661521,e=>{"use strict";var t=e.i(722679),r=e.i(340915),a=e.i(362208),s="horizontal",i=["horizontal","vertical"],n=r.forwardRef((e,r)=>{var n;let{decorative:l,orientation:o=s,...d}=e,c=(n=o,i.includes(n))?o:s;return(0,t.jsx)(a.Primitive.div,{"data-orientation":c,...l?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:r})});n.displayName="Separator";var l=e.i(282141);let o=r.forwardRef(({className:e,orientation:r="horizontal",decorative:a=!0,...s},i)=>(0,t.jsx)(n,{ref:i,decorative:a,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",e),...s}));o.displayName=n.displayName,e.s(["Separator",()=>o],661521)},908925,e=>{"use strict";let t;var r=e.i(722679),a=e.i(340915),s=e.i(47264),i=e.i(886978),n=e.i(62773),l=e.i(679472),o=Symbol("radix.slottable"),d="AlertDialog",[c,m]=(0,s.createContextScope)(d,[n.createDialogScope]),u=(0,n.createDialogScope)(),x=e=>{let{__scopeAlertDialog:t,...a}=e,s=u(t);return(0,r.jsx)(n.Root,{...s,...a,modal:!0})};x.displayName=d;var g=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,i=u(a);return(0,r.jsx)(n.Trigger,{...i,...s,ref:t})});g.displayName="AlertDialogTrigger";var p=e=>{let{__scopeAlertDialog:t,...a}=e,s=u(t);return(0,r.jsx)(n.Portal,{...s,...a})};p.displayName="AlertDialogPortal";var f=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,i=u(a);return(0,r.jsx)(n.Overlay,{...i,...s,ref:t})});f.displayName="AlertDialogOverlay";var h="AlertDialogContent",[j,v]=c(h),b=((t=({children:e})=>(0,r.jsx)(r.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",t.__radixId=o,t),w=a.forwardRef((e,t)=>{let{__scopeAlertDialog:s,children:o,...d}=e,c=u(s),m=a.useRef(null),x=(0,i.useComposedRefs)(t,m),g=a.useRef(null);return(0,r.jsx)(n.WarningProvider,{contentName:h,titleName:N,docsSlug:"alert-dialog",children:(0,r.jsx)(j,{scope:s,cancelRef:g,children:(0,r.jsxs)(n.Content,{role:"alertdialog",...c,...d,ref:x,onOpenAutoFocus:(0,l.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),g.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,r.jsx)(b,{children:o}),(0,r.jsx)(F,{contentRef:m})]})})})});w.displayName=h;var N="AlertDialogTitle",y=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,i=u(a);return(0,r.jsx)(n.Title,{...i,...s,ref:t})});y.displayName=N;var _="AlertDialogDescription",C=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,i=u(a);return(0,r.jsx)(n.Description,{...i,...s,ref:t})});C.displayName=_;var A=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,i=u(a);return(0,r.jsx)(n.Close,{...i,...s,ref:t})});A.displayName="AlertDialogAction";var D="AlertDialogCancel",k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,{cancelRef:l}=v(D,a),o=u(a),d=(0,i.useComposedRefs)(t,l);return(0,r.jsx)(n.Close,{...o,...s,ref:d})});k.displayName=D;var F=({contentRef:e})=>{let t=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},S=e.i(282141),P=e.i(316264);function L({...e}){return(0,r.jsx)(x,{"data-slot":"alert-dialog",...e})}function T({...e}){return(0,r.jsx)(g,{"data-slot":"alert-dialog-trigger",...e})}function E({...e}){return(0,r.jsx)(p,{"data-slot":"alert-dialog-portal",...e})}function R({className:e,...t}){return(0,r.jsx)(f,{"data-slot":"alert-dialog-overlay",className:(0,S.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80 backdrop-blur-sm",e),...t})}function z({className:e,...t}){return(0,r.jsxs)(E,{children:[(0,r.jsx)(R,{}),(0,r.jsx)(w,{"data-slot":"alert-dialog-content",className:(0,S.cn)("bg-background border-border text-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg backdrop-blur-xl",e),...t})]})}function $({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,S.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function B({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,S.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function O({className:e,...t}){return(0,r.jsx)(y,{"data-slot":"alert-dialog-title",className:(0,S.cn)("text-lg font-semibold text-foreground",e),...t})}function I({className:e,...t}){return(0,r.jsx)(C,{"data-slot":"alert-dialog-description",className:(0,S.cn)("text-muted-foreground text-sm",e),...t})}function U({className:e,...t}){return(0,r.jsx)(A,{className:(0,S.cn)((0,P.buttonVariants)(),e),...t})}function M({className:e,...t}){return(0,r.jsx)(k,{className:(0,S.cn)((0,P.buttonVariants)({variant:"outline"}),e),...t})}e.s(["AlertDialog",()=>L,"AlertDialogAction",()=>U,"AlertDialogCancel",()=>M,"AlertDialogContent",()=>z,"AlertDialogDescription",()=>I,"AlertDialogFooter",()=>B,"AlertDialogHeader",()=>$,"AlertDialogTitle",()=>O,"AlertDialogTrigger",()=>T],908925)},957114,e=>{"use strict";let t=(0,e.i(410587).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],957114)},360209,e=>{"use strict";let t=(0,e.i(410587).default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);e.s(["Percent",()=>t],360209)},90613,e=>{"use strict";var t=e.i(722679),r=e.i(282141);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}function o({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>o,"CardHeader",()=>s,"CardTitle",()=>i])},15098,e=>{"use strict";let t=(0,e.i(410587).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],15098)},773510,e=>{"use strict";let t=(0,e.i(410587).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],773510)},816654,e=>{"use strict";var t=e.i(722679),r=e.i(340915),a=e.i(282141);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));s.displayName="Textarea",e.s(["Textarea",()=>s])},761722,e=>{"use strict";let t=(0,e.i(410587).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],761722)},745083,e=>{"use strict";let t=(0,e.i(410587).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],745083)},619962,e=>{"use strict";var t=e.i(722679),r=e.i(340915),a=e.i(400557),s=e.i(432598),i=e.i(761722),n=e.i(263229),l=e.i(401148),o=e.i(119311),d=e.i(316264),c=e.i(282141);function m({isOpen:e,document:m,previewUrl:u,isLoading:x,error:g,onClose:p,onDownload:f}){let[h,j]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>(b(!0),()=>b(!1)),[]);let w=(0,r.useMemo)(()=>{var e;return u?(e=m?.file_name||m?.name,e?.toLowerCase().endsWith(".pdf")||u?.toLowerCase().includes(".pdf")||u?.includes("deal-documents")&&u?.includes(".pdf")||0)?u.includes("#")?u:`${u}#navpanes=0&view=FitH&pagemode=none`:u:null},[u,m]);if((0,r.useEffect)(()=>{let t=e=>{"Escape"===e.key&&p(),e.ctrlKey&&"d"===e.key&&(e.preventDefault(),f())};if(e&&1)return window.addEventListener("keydown",t),window.document?.body&&(window.document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",t),window.document?.body&&(window.document.body.style.overflow="")}},[e,p,f]),(0,r.useEffect)(()=>{j(!1)},[u]),!e||!v)return null;let N=(0,t.jsxs)("div",{className:"fixed inset-0 z-[9999] bg-black/95 overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-16 bg-white border-b shadow-md flex items-center justify-between px-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,t.jsx)(o.FileText,{className:"h-5 w-5 text-gray-500 flex-shrink-0"}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:m?.file_name||m?.name||"Document Preview"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[m?.type&&(0,t.jsx)("span",{className:"capitalize",children:m.type}),m?.file_size_bytes&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:(0,c.formatFileSize)(m.file_size_bytes)})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:f,className:"gap-2",children:[(0,t.jsx)(i.Download,{className:"h-4 w-4"}),"Download"]}),(0,t.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:p,className:"gap-2",children:[(0,t.jsx)(s.X,{className:"h-4 w-4"}),"Close"]})]})]}),(0,t.jsxs)("div",{className:"h-[calc(100vh-4rem)] bg-gray-900",children:[(x||g||h)&&(0,t.jsxs)("div",{className:"w-full h-full flex items-center justify-center",children:[x&&(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-white",children:[(0,t.jsx)(n.Loader2,{className:"h-12 w-12 animate-spin"}),(0,t.jsx)("p",{className:"text-lg",children:"Loading document..."})]}),g&&!x&&(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-white max-w-md mx-auto px-4",children:[(0,t.jsx)(l.AlertCircle,{className:"h-16 w-16 text-red-400"}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"Failed to Load Preview"}),(0,t.jsx)("p",{className:"text-gray-300 text-center",children:g}),(0,t.jsxs)(d.Button,{onClick:f,variant:"secondary",className:"gap-2 mt-4",children:[(0,t.jsx)(i.Download,{className:"h-4 w-4"}),"Download Instead"]})]}),h&&!x&&!g&&(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-white max-w-md mx-auto px-4",children:[(0,t.jsx)(l.AlertCircle,{className:"h-16 w-16 text-red-400"}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"Preview Unavailable"}),(0,t.jsx)("p",{className:"text-gray-300 text-center",children:"This document cannot be previewed in your browser."}),(0,t.jsxs)(d.Button,{onClick:f,variant:"secondary",className:"gap-2 mt-4",children:[(0,t.jsx)(i.Download,{className:"h-4 w-4"}),"Download to View"]})]})]}),w&&!x&&!g&&!h&&(0,t.jsx)("iframe",{src:w,className:"w-full h-full border-0",title:"Document Preview",onError:()=>{console.error("iframe failed to load preview"),j(!0)}})]}),!x&&!g&&(0,t.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white/60 text-sm bg-black/50 px-4 py-2 rounded-full",children:["Press ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-white/10 rounded mx-1",children:"ESC"})," to close or ",(0,t.jsx)("kbd",{className:"px-2 py-1 bg-white/10 rounded mx-1",children:"Ctrl+D"})," to download"]})]}),y=window.document.body;return y?(0,a.createPortal)(N,y):null}e.s(["DocumentViewerFullscreen",()=>m])},896816,e=>{"use strict";let t=(0,e.i(410587).default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["PenLine",()=>t],896816)},646839,e=>{"use strict";let t=(0,e.i(410587).default)("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);e.s(["FileDown",()=>t],646839)},113845,e=>{"use strict";var t=e.i(722679),r=e.i(340915),a=e.i(603274),s=e.i(820417),i=e.i(90613),n=e.i(129432),l=e.i(316264),o=e.i(661521),d=e.i(908925),c=e.i(816654),m=e.i(514133),u=e.i(396132),x=e.i(711819),g=e.i(84065),p=e.i(360209),f=e.i(645855),h=e.i(15098),j=e.i(745083),v=e.i(932735),b=e.i(896816),w=e.i(401148),N=e.i(971743),y=e.i(773510),_=e.i(957114),C=e.i(704477),A=e.i(119311),D=e.i(263229),k=e.i(646839),F=e.i(496383),S=e.i(994500),P=e.i(501495),L=e.i(282141);function T({status:e,createdAt:r,signedDate:a,ceoSignature:s,introducerSignature:n}){let l=[{id:"created",label:"Agreement Created",description:"Draft agreement prepared",icon:A.FileText,status:"completed",timestamp:r},{id:"sent",label:"Sent to Introducer",description:"Agreement sent for review",icon:v.Send,status:["draft"].includes(e)?"upcoming":"completed",timestamp:null},{id:"approval",label:"Introducer Review",description:"rejected"===e?"Agreement rejected":"Awaiting approval",icon:"rejected"===e?j.XCircle:f.Clock,status:"rejected"===e?"failed":["draft","sent"].includes(e)?"upcoming":"pending_approval"===e?"current":"completed",timestamp:null},{id:"ceo_signature",label:"CEO Signature",description:s?.status==="signed"?`Signed by ${s.signer_name}`:["approved","pending_ceo_signature"].includes(e)?"Awaiting CEO signature":"CEO to sign first",icon:b.PenLine,status:["draft","sent","pending_approval","rejected"].includes(e)?"upcoming":["approved","pending_ceo_signature"].includes(e)?"current":(s?.status,"completed"),timestamp:s?.signature_timestamp},{id:"introducer_signature",label:"Introducer Signature",description:n?.status==="signed"?`Signed by ${n.signer_name}`:"pending_introducer_signature"===e?"Awaiting introducer signature":"Introducer to countersign",icon:b.PenLine,status:["draft","sent","pending_approval","approved","pending_ceo_signature","rejected"].includes(e)?"upcoming":"pending_introducer_signature"===e?"current":n?.status==="signed"||"active"===e?"completed":"upcoming",timestamp:n?.signature_timestamp},{id:"active",label:"Agreement Active",description:"Fee agreement in effect",icon:h.CheckCircle2,status:"active"===e?"completed":"upcoming",timestamp:a}];return(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Clock,{className:"h-5 w-5 text-blue-500"}),"Agreement Timeline"]})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)("div",{className:"relative",children:l.map((e,r)=>{let a=(e=>{switch(e.status){case"completed":return{line:"bg-gradient-to-b from-emerald-500 to-emerald-400",circle:"bg-gradient-to-br from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-500/25",text:"text-foreground",glow:!1};case"current":return{line:"bg-gradient-to-b from-emerald-500 via-amber-400 to-amber-500",circle:"bg-gradient-to-br from-amber-400 to-orange-500 text-white ring-4 ring-amber-400/30 shadow-lg shadow-amber-500/40 animate-pulse",text:"text-foreground font-semibold",glow:!0};case"failed":return{line:"bg-gradient-to-b from-rose-500 to-red-600",circle:"bg-gradient-to-br from-rose-500 to-red-600 text-white shadow-lg shadow-rose-500/25",text:"text-rose-600 dark:text-rose-400 font-medium",glow:!1};default:return{line:"bg-muted/50",circle:"bg-muted/80 text-muted-foreground border-2 border-muted-foreground/20",text:"text-muted-foreground",glow:!1}}})(e),s=e.icon,i=r===l.length-1;return(0,t.jsxs)("div",{className:"flex gap-4 pb-6 last:pb-0 group",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center relative",children:[a.glow&&(0,t.jsx)("div",{className:"absolute inset-0 w-10 h-10 rounded-full bg-amber-400/20 blur-xl animate-pulse"}),(0,t.jsx)("div",{className:(0,L.cn)("relative flex items-center justify-center w-10 h-10 rounded-full shrink-0 transition-all duration-300",a.circle),children:(0,t.jsx)(s,{className:(0,L.cn)("h-5 w-5","current"===e.status&&"drop-shadow-sm")})}),!i&&(0,t.jsx)("div",{className:(0,L.cn)("w-0.5 flex-1 min-h-[28px] mt-2 rounded-full transition-all",a.line)})]}),(0,t.jsxs)("div",{className:(0,L.cn)("flex-1 pt-1.5 transition-all","current"===e.status&&"pl-2 border-l-2 border-amber-400/50 -ml-2"),children:[(0,t.jsx)("p",{className:(0,L.cn)("text-sm font-medium transition-colors",a.text),children:e.label}),(0,t.jsx)("p",{className:(0,L.cn)("text-xs mt-0.5","current"===e.status?"text-amber-600 dark:text-amber-400":"text-muted-foreground"),children:e.description}),e.timestamp&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[(0,t.jsx)(f.Clock,{className:"h-3 w-3"}),(0,P.formatDate)(e.timestamp)]})]})]},e.id)})})})]})}var E=e.i(619962);let R={draft:{bg:"bg-gray-500/10",text:"text-gray-500",icon:A.FileText},sent:{bg:"bg-blue-500/10",text:"text-blue-500",icon:v.Send},pending_approval:{bg:"bg-yellow-500/10",text:"text-yellow-500",icon:f.Clock},approved:{bg:"bg-emerald-500/10",text:"text-emerald-500",icon:h.CheckCircle2},pending_ceo_signature:{bg:"bg-amber-500/10",text:"text-amber-500",icon:b.PenLine},pending_introducer_signature:{bg:"bg-orange-500/10",text:"text-orange-500",icon:b.PenLine},active:{bg:"bg-green-500/10",text:"text-green-500",icon:h.CheckCircle2},rejected:{bg:"bg-red-500/10",text:"text-red-500",icon:j.XCircle},expired:{bg:"bg-gray-500/10",text:"text-gray-500",icon:w.AlertCircle},terminated:{bg:"bg-red-500/10",text:"text-red-500",icon:j.XCircle}},z={draft:"Draft",sent:"Sent to Introducer",pending_approval:"Pending Approval",approved:"Approved - Awaiting Signatures",pending_ceo_signature:"Awaiting CEO Signature",pending_introducer_signature:"Awaiting Introducer Signature",active:"Active",rejected:"Rejected",expired:"Expired",terminated:"Terminated"};function $({agreement:e,isStaff:f,currentUserId:w}){var $;let B=(0,a.useRouter)(),[O,I]=(0,r.useState)(null),[U,M]=(0,r.useState)(""),[H,q]=(0,r.useState)(!1),[V,X]=(0,r.useState)(!1),[K,W]=(0,r.useState)(null),[Y,J]=(0,r.useState)(!1),[Z,G]=(0,r.useState)(null),Q=async()=>{let t="active"===e.status,r=t&&e.signed_pdf_url?e.signed_pdf_url:e.pdf_url,a=t&&e.signed_pdf_url?"signatures":"deal-documents";if(r){q(!0);try{let t=await fetch(`/api/storage/download?path=${encodeURIComponent(r)}&bucket=${a}`);if(!t.ok)throw Error("Failed to download file");let s=await t.blob(),i=window.URL.createObjectURL(s),n=document.createElement("a");n.href=i,n.download=`${e.reference_number||"Fee_Agreement"}.pdf`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i),S.toast.success("PDF downloaded successfully")}catch(e){console.error("Error downloading PDF:",e),S.toast.error("Failed to download PDF")}finally{q(!1)}}},ee=async()=>{let t="active"===e.status,r=t&&e.signed_pdf_url?e.signed_pdf_url:e.pdf_url,a=t&&e.signed_pdf_url?"signatures":"deal-documents";if(r){J(!0),G(null),X(!0);try{let e=await fetch(`/api/storage/signed-url?path=${encodeURIComponent(r)}&bucket=${a}`);if(!e.ok)throw Error("Failed to get preview URL");let t=await e.json();W(t.signedUrl)}catch(e){console.error("Error loading PDF preview:",e),G("Failed to load PDF preview"),S.toast.error("Failed to load PDF preview")}finally{J(!1)}}},et=R[e.status]||R.draft,er=et.icon,ea=async()=>{I("send");try{let t=await fetch(`/api/introducer-agreements/${e.id}/send`,{method:"POST"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to send agreement")}S.toast.success("Agreement sent to introducer for approval"),B.refresh()}catch(e){S.toast.error(e instanceof Error?e.message:"Failed to send agreement")}finally{I(null)}},es=async()=>{I("approve");try{let t=await fetch(`/api/introducer-agreements/${e.id}/approve`,{method:"POST"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to approve agreement")}S.toast.success("Agreement approved! CEO will be notified to sign."),B.refresh()}catch(e){S.toast.error(e instanceof Error?e.message:"Failed to approve agreement")}finally{I(null)}},ei=async()=>{I("reject");try{let t=await fetch(`/api/introducer-agreements/${e.id}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:U})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to reject agreement")}S.toast.success("Agreement rejected"),B.refresh()}catch(e){S.toast.error(e instanceof Error?e.message:"Failed to reject agreement")}finally{I(null),M("")}};return(0,t.jsxs)("div",{className:"p-6 space-y-6 max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",asChild:!0,className:"rounded-full",children:(0,t.jsx)(s.default,{href:"/versotech_main/introducer-agreements",children:(0,t.jsx)(u.ArrowLeft,{className:"h-5 w-5"})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Fee Agreement"}),(0,t.jsxs)(n.Badge,{variant:"outline",className:(0,L.cn)("capitalize",et.bg,et.text),children:[(0,t.jsx)(er,{className:"h-3 w-3 mr-1"}),z[e.status]||e.status]})]}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Agreement with ",e.introducer?.legal_name,e.reference_number&&(0,t.jsxs)("span",{className:"ml-2 text-xs font-mono text-muted-foreground/70",children:["(",e.reference_number,")"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[f&&"draft"===e.status&&(0,t.jsxs)(l.Button,{onClick:ea,disabled:"send"===O,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500",children:["send"===O?(0,t.jsx)(D.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,t.jsx)(v.Send,{className:"h-4 w-4 mr-2"}),"Send to Introducer"]}),!f&&"pending_approval"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.AlertDialog,{children:[(0,t.jsx)(d.AlertDialogTrigger,{asChild:!0,children:(0,t.jsxs)(l.Button,{variant:"outline",className:"border-red-500/30 text-red-500 hover:bg-red-500/10",children:[(0,t.jsx)(j.XCircle,{className:"h-4 w-4 mr-2"}),"Reject"]})}),(0,t.jsxs)(d.AlertDialogContent,{children:[(0,t.jsxs)(d.AlertDialogHeader,{children:[(0,t.jsx)(d.AlertDialogTitle,{children:"Reject Agreement?"}),(0,t.jsx)(d.AlertDialogDescription,{children:"Are you sure you want to reject this fee agreement? You can provide a reason below."})]}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsx)(m.Label,{htmlFor:"reject-reason",children:"Reason (optional)"}),(0,t.jsx)(c.Textarea,{id:"reject-reason",placeholder:"Enter reason for rejection...",value:U,onChange:e=>M(e.target.value),className:"mt-2"})]}),(0,t.jsxs)(d.AlertDialogFooter,{children:[(0,t.jsx)(d.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(d.AlertDialogAction,{onClick:ei,className:"bg-red-600 hover:bg-red-700",disabled:"reject"===O,children:"reject"===O?"Rejecting...":"Reject Agreement"})]})]})]}),(0,t.jsxs)(l.Button,{onClick:es,disabled:"approve"===O,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500",children:["approve"===O?(0,t.jsx)(D.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,t.jsx)(h.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Approve Agreement"]})]}),f&&"approved"===e.status&&(0,t.jsx)(l.Button,{asChild:!0,className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500",children:(0,t.jsxs)(s.default,{href:`/versotech_main/versosign?agreement=${e.id}`,children:[(0,t.jsx)(b.PenLine,{className:"h-4 w-4 mr-2"}),"Sign Agreement"]})}),!f&&"pending_introducer_signature"===e.status&&(0,t.jsx)(l.Button,{asChild:!0,className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500",children:(0,t.jsxs)(s.default,{href:`/versotech_main/versosign?agreement=${e.id}`,children:[(0,t.jsx)(b.PenLine,{className:"h-4 w-4 mr-2"}),"Sign Agreement"]})}),(e.pdf_url||e.signed_pdf_url)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Button,{variant:"outline",onClick:ee,disabled:Y,className:"border-emerald-500/30 text-emerald-600 hover:bg-emerald-500/10",children:[Y?(0,t.jsx)(D.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,t.jsx)(F.Eye,{className:"h-4 w-4 mr-2"}),"Preview"]}),(0,t.jsxs)(l.Button,{variant:"outline",onClick:Q,disabled:H,className:"border-blue-500/30 text-blue-500 hover:bg-blue-500/10",children:[H?(0,t.jsx)(D.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,t.jsx)(k.FileDown,{className:"h-4 w-4 mr-2"}),"active"===e.status?"Download Signed Agreement":"Download PDF"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.FileSignature,{className:"h-5 w-5 text-amber-500"}),"Agreement Details"]})}),(0,t.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{className:"text-muted-foreground text-sm",children:"Commission Rate"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(p.Percent,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:null===($=e.default_commission_bps)?"Not set":`${($/100).toFixed(2)}%`}),e.default_commission_bps&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",e.default_commission_bps," bps)"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{className:"text-muted-foreground text-sm",children:"Agreement Type"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(x.FileSignature,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:e.agreement_type?.replace(/_/g," ")||"Not set"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{className:"text-muted-foreground text-sm",children:"Effective Date"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(g.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"font-medium",children:e.effective_date?(0,P.formatDate)(e.effective_date):"Not set"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{className:"text-muted-foreground text-sm",children:"Expiry Date"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(g.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"font-medium",children:e.expiry_date?(0,P.formatDate)(e.expiry_date):"No expiry"})]})]}),e.territory&&(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{className:"text-muted-foreground text-sm",children:"Territory"}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,t.jsx)("span",{className:"font-medium",children:e.territory})})]}),e.payment_terms&&(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Label,{className:"text-muted-foreground text-sm",children:"Payment Terms"}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,t.jsx)("span",{className:"font-medium capitalize",children:e.payment_terms.replace(/_/g," ")})})]})]}),"active"===e.status&&e.signed_date&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Separator,{}),(0,t.jsx)("div",{className:"flex items-center justify-between p-4 bg-green-500/10 rounded-lg border border-green-500/20",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-500/20 rounded-lg",children:(0,t.jsx)(A.FileText,{className:"h-5 w-5 text-green-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-green-700 dark:text-green-400",children:"Agreement Active"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Fully signed on ",(0,P.formatDate)(e.signed_date)]})]})]})})]})]})]}),(0,t.jsx)(T,{status:e.status,createdAt:e.created_at,signedDate:e.signed_date,ceoSignature:e.ceo_signature_request,introducerSignature:e.introducer_signature_request})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Building2,{className:"h-5 w-5 text-blue-500"}),"Introducer"]})}),(0,t.jsxs)(i.CardContent,{className:"space-y-4",children:[e.introducer?.logo_url&&(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("img",{src:e.introducer.logo_url,alt:e.introducer.legal_name,className:"h-16 w-auto object-contain"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-lg",children:e.introducer?.legal_name}),(0,t.jsx)(n.Badge,{variant:"outline",className:(0,L.cn)("mt-1 capitalize",e.introducer?.status==="active"?"bg-green-500/10 text-green-500":"bg-gray-500/10 text-gray-500"),children:e.introducer?.status})]}),(0,t.jsx)(o.Separator,{}),e.introducer?.contact_name&&(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsx)(C.User,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:e.introducer.contact_name})]}),e.introducer?.email&&(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsx)(y.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("a",{href:`mailto:${e.introducer.email}`,className:"text-blue-500 hover:underline",children:e.introducer.email})]}),e.introducer?.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsx)(_.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:e.introducer.phone})]}),f&&(0,t.jsx)(l.Button,{variant:"outline",size:"sm",className:"w-full mt-2",asChild:!0,children:(0,t.jsx)(s.default,{href:`/versotech_main/introducers/${e.introducer_id}`,children:"View Introducer Profile"})})]})]})})]}),(0,t.jsx)(E.DocumentViewerFullscreen,{isOpen:V,document:{id:e.id,name:`${e.reference_number||"Fee_Agreement"}.pdf`,file_name:`${e.reference_number||"Fee_Agreement"}.pdf`,type:"introducer_agreement"},previewUrl:K,isLoading:Y,error:Z,onClose:()=>{X(!1),setTimeout(()=>{W(null),G(null)},300)},onDownload:Q})]})}e.s(["AgreementDetailClient",()=>$],113845)}]);