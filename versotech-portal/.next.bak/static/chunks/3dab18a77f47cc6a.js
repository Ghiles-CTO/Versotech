(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,496383,e=>{"use strict";let t=(0,e.i(410587).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],496383)},196767,e=>{"use strict";let t=(0,e.i(410587).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],196767)},398472,e=>{"use strict";let t=(0,e.i(410587).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],398472)},501495,e=>{"use strict";e.s(["formatBps",0,e=>null==e?"—":`${e} bps`,"formatCurrency",0,(e,t="USD")=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:0}).format(e):"$0","formatDate",0,e=>{if(!e)return"—";let t="string"==typeof e?new Date(e):e;return Number.isNaN(t?.getTime?.())?"—":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}])},932735,e=>{"use strict";let t=(0,e.i(410587).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],932735)},312692,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(886978),i=e.i(47264),s=e.i(679472),n=e.i(68977),l=e.i(657180),o=e.i(460138),c=e.i(873358),d=e.i(362208),u="Checkbox",[m,f]=(0,i.createContextScope)(u),[x,h]=m(u);function p(e){let{__scopeCheckbox:r,checked:i,children:s,defaultChecked:l,disabled:o,form:c,name:d,onCheckedChange:m,required:f,value:h="on",internal_do_not_use_render:p}=e,[v,b]=(0,n.useControllableState)({prop:i,defaultProp:l??!1,onChange:m,caller:u}),[g,y]=a.useState(null),[j,w]=a.useState(null),N=a.useRef(!1),C=!g||!!c||!!g.closest("form"),D={checked:v,disabled:o,setChecked:b,control:g,setControl:y,name:d,form:c,value:h,hasConsumerStoppedPropagationRef:N,required:f,defaultChecked:!k(l)&&l,isFormControl:C,bubbleInput:j,setBubbleInput:w};return(0,t.jsx)(x,{scope:r,...D,children:"function"==typeof p?p(D):s})}var v="CheckboxTrigger",b=a.forwardRef(({__scopeCheckbox:e,onKeyDown:i,onClick:n,...l},o)=>{let{control:c,value:u,disabled:m,checked:f,required:x,setControl:p,setChecked:b,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:j}=h(v,e),w=(0,r.useComposedRefs)(o,p),N=a.useRef(f);return a.useEffect(()=>{let e=c?.form;if(e){let t=()=>b(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[c,b]),(0,t.jsx)(d.Primitive.button,{type:"button",role:"checkbox","aria-checked":k(f)?"mixed":f,"aria-required":x,"data-state":C(f),"data-disabled":m?"":void 0,disabled:m,value:u,...l,ref:w,onKeyDown:(0,s.composeEventHandlers)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,s.composeEventHandlers)(n,e=>{b(e=>!!k(e)||!e),j&&y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});b.displayName=v;var g=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:i,checked:s,defaultChecked:n,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=e;return(0,t.jsx)(p,{__scopeCheckbox:r,checked:s,defaultChecked:n,disabled:o,required:l,onCheckedChange:d,name:i,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{...m,ref:a,__scopeCheckbox:r}),e&&(0,t.jsx)(N,{__scopeCheckbox:r})]})})});g.displayName=u;var y="CheckboxIndicator",j=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:i,...s}=e,n=h(y,r);return(0,t.jsx)(c.Presence,{present:i||k(n.checked)||!0===n.checked,children:(0,t.jsx)(d.Primitive.span,{"data-state":C(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:a,style:{pointerEvents:"none",...e.style}})})});j.displayName=y;var w="CheckboxBubbleInput",N=a.forwardRef(({__scopeCheckbox:e,...i},s)=>{let{control:n,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:m,required:f,disabled:x,name:p,value:v,form:b,bubbleInput:g,setBubbleInput:y}=h(w,e),j=(0,r.useComposedRefs)(s,y),N=(0,l.usePrevious)(u),C=(0,o.useSize)(n);a.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!c.current;if(N!==u&&e){let a=new Event("click",{bubbles:t});g.indeterminate=k(u),e.call(g,!k(u)&&u),g.dispatchEvent(a)}},[g,N,u,c]);let D=a.useRef(!k(u)&&u);return(0,t.jsx)(d.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??D.current,required:f,disabled:x,name:p,value:v,form:b,...i,tabIndex:-1,ref:j,style:{...i.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function k(e){return"indeterminate"===e}function C(e){return k(e)?"indeterminate":e?"checked":"unchecked"}N.displayName=w;var D=e.i(310556),T=e.i(282141);let R=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(g,{ref:r,className:(0,T.cn)("peer h-5 w-5 md:h-4 md:w-4 shrink-0 rounded border border-white/20 bg-white/5 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400/20 focus-visible:border-blue-400/50 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(j,{className:(0,T.cn)("flex items-center justify-center text-white"),children:(0,t.jsx)(D.Check,{className:"h-4 w-4 md:h-3.5 md:w-3.5"})})}));R.displayName=g.displayName,e.s(["Checkbox",()=>R],312692)},816654,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(282141);let i=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));i.displayName="Textarea",e.s(["Textarea",()=>i])},90613,e=>{"use strict";var t=e.i(722679),a=e.i(282141);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>o,"CardHeader",()=>i,"CardTitle",()=>s])},15098,e=>{"use strict";let t=(0,e.i(410587).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],15098)},761722,e=>{"use strict";let t=(0,e.i(410587).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],761722)},237635,e=>{"use strict";var t=e.i(722679),a=e.i(282141);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})})}function i({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...r})}function s({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r})}function n({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function l({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function o({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}e.s(["Table",()=>r,"TableBody",()=>s,"TableCell",()=>o,"TableHead",()=>l,"TableHeader",()=>i,"TableRow",()=>n])},745083,e=>{"use strict";let t=(0,e.i(410587).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],745083)},429760,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(679472),i=e.i(47264),s=e.i(478985),n=e.i(873358),l=e.i(362208),o=e.i(599205),c=e.i(68977),d=e.i(798827),u="Tabs",[m,f]=(0,i.createContextScope)(u,[s.createRovingFocusGroupScope]),x=(0,s.createRovingFocusGroupScope)(),[h,p]=m(u),v=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:i,onValueChange:s,defaultValue:n,orientation:m="horizontal",dir:f,activationMode:x="automatic",...p}=e,v=(0,o.useDirection)(f),[b,g]=(0,c.useControllableState)({prop:i,onChange:s,defaultProp:n??"",caller:u});return(0,t.jsx)(h,{scope:r,baseId:(0,d.useId)(),value:b,onValueChange:g,orientation:m,dir:v,activationMode:x,children:(0,t.jsx)(l.Primitive.div,{dir:v,"data-orientation":m,...p,ref:a})})});v.displayName=u;var b="TabsList",g=a.forwardRef((e,a)=>{let{__scopeTabs:r,loop:i=!0,...n}=e,o=p(b,r),c=x(r);return(0,t.jsx)(s.Root,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:i,children:(0,t.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:a})})});g.displayName=b;var y="TabsTrigger",j=a.forwardRef((e,a)=>{let{__scopeTabs:i,value:n,disabled:o=!1,...c}=e,d=p(y,i),u=x(i),m=k(d.baseId,n),f=C(d.baseId,n),h=n===d.value;return(0,t.jsx)(s.Item,{asChild:!0,...u,focusable:!o,active:h,children:(0,t.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":f,"data-state":h?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:m,...c,ref:a,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(n)}),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(n)}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;h||o||!e||d.onValueChange(n)})})})});j.displayName=y;var w="TabsContent",N=a.forwardRef((e,r)=>{let{__scopeTabs:i,value:s,forceMount:o,children:c,...d}=e,u=p(w,i),m=k(u.baseId,s),f=C(u.baseId,s),x=s===u.value,h=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:o||x,children:({present:a})=>(0,t.jsx)(l.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!a,id:f,tabIndex:0,...d,ref:r,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&c})})});function k(e,t){return`${e}-trigger-${t}`}function C(e,t){return`${e}-content-${t}`}N.displayName=w;var D=e.i(282141);let T=a.forwardRef(({id:e,...r},i)=>{let s=a.useId();return(0,t.jsx)(v,{ref:i,id:e??s,...r})});T.displayName="Tabs";let R=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(g,{ref:r,className:(0,D.cn)("inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));R.displayName=g.displayName;let S=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(j,{ref:r,className:(0,D.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));S.displayName=j.displayName;let E=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(N,{ref:r,className:(0,D.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));E.displayName=N.displayName,e.s(["Tabs",()=>T,"TabsContent",()=>E,"TabsList",()=>R,"TabsTrigger",()=>S],429760)},773510,e=>{"use strict";let t=(0,e.i(410587).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],773510)},540318,59531,e=>{"use strict";let t=(0,e.i(410587).default)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);e.s(["default",()=>t],59531),e.s(["Handshake",()=>t],540318)},10994,e=>{"use strict";let t=(0,e.i(410587).default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);e.s(["Wallet",()=>t],10994)},572826,e=>{"use strict";let t=(0,e.i(410587).default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);e.s(["Receipt",()=>t],572826)},994659,e=>{"use strict";let t=(0,e.i(410587).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>t],994659)},595103,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(352776),i=e.i(316264),s=e.i(263229),n=e.i(773510),l=e.i(119311),o=e.i(501495);let c={partner:"Partner",introducer:"Introducer","commercial-partner":"Commercial Partner"};function d({open:e,onOpenChange:d,commission:u,commissionType:m,onSuccess:f}){let[x,h]=(0,a.useState)(!1),[p,v]=(0,a.useState)(null),b=async()=>{if(u){h(!0),v(null);try{let e=`/api/arrangers/me/${m}-commissions/${u.id}/request-invoice`,t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to request invoice")}f(),d(!1)}catch(e){console.error("[RequestInvoiceDialog] Error:",e),v(e instanceof Error?e.message:"Failed to request invoice")}finally{h(!1)}}};if(!u)return null;let g=c[m],y=(0,o.formatCurrency)(u.accrual_amount,u.currency||"USD");return(0,t.jsx)(r.Dialog,{open:e,onOpenChange:d,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-md",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsxs)(r.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(l.FileText,{className:"h-5 w-5"}),"Request Invoice"]}),(0,t.jsxs)(r.DialogDescription,{children:["Send an invoice request notification to the ",g.toLowerCase(),"."]})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[p&&(0,t.jsx)("div",{className:"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded",children:p}),(0,t.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[g,":"]}),(0,t.jsx)("span",{className:"font-medium",children:u.entity_name||"Unknown"})]}),u.deal&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Deal:"}),(0,t.jsx)("span",{className:"font-medium",children:u.deal.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,t.jsx)("span",{className:"font-medium text-primary",children:y})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(n.Mail,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("p",{children:["The ",g.toLowerCase(),' will receive a notification asking them to submit their invoice for this commission. The commission status will be updated to "Invoice Requested".']})]})]}),(0,t.jsxs)(r.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>d(!1),disabled:x,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:b,disabled:x,children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Mail,{className:"h-4 w-4 mr-2"}),"Request Invoice"]})})]})]})})}e.s(["RequestInvoiceDialog",()=>d])},531570,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(352776),i=e.i(316264),s=e.i(263229),n=e.i(761722),l=e.i(119311),o=e.i(398472),c=e.i(401148),d=e.i(501495);let u={partner:"Partner",introducer:"Introducer","commercial-partner":"Commercial Partner"};function m({open:e,onOpenChange:m,commission:f,commissionType:x}){let[h,p]=(0,a.useState)(!1),[v,b]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[j,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(!e||!f?.invoice_id){y(null),w(null);return}p(!0),b(null);try{let e=`/api/commissions/${x}/${f.id}/invoice`,t=await fetch(e);if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to fetch invoice")}let a=await t.json();y(a.data.url),w(a.data.path)}catch(e){console.error("[ViewInvoiceDialog] Error:",e),b(e instanceof Error?e.message:"Failed to load invoice")}finally{p(!1)}})()},[e,f?.id,f?.invoice_id,x]),(0,a.useEffect)(()=>{e||(y(null),w(null),b(null))},[e]);let N=()=>{g&&window.open(g,"_blank")};if(!f)return null;let k=u[x],C=(0,d.formatCurrency)(f.accrual_amount,f.currency||"USD"),D=j?.toLowerCase().endsWith(".pdf"),T=j?.match(/\.(png|jpg|jpeg)$/i);return(0,t.jsx)(r.Dialog,{open:e,onOpenChange:m,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsxs)(r.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(l.FileText,{className:"h-5 w-5"}),"Invoice from ",f.entity_name]}),(0,t.jsxs)(r.DialogDescription,{children:[k," commission invoice for ",C,f.deal&&` - ${f.deal.name}`]})]}),(0,t.jsxs)("div",{className:"flex-1 min-h-[400px] relative",children:[h&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading invoice..."})]})}),v&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center p-6",children:[(0,t.jsx)(c.AlertCircle,{className:"h-12 w-12 text-destructive"}),(0,t.jsx)("p",{className:"text-destructive font-medium",children:"Failed to load invoice"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:v})]})}),!h&&!v&&g&&(0,t.jsxs)(t.Fragment,{children:[D&&(0,t.jsx)("iframe",{src:g,className:"w-full h-full min-h-[500px] rounded-lg border",title:"Invoice PDF"}),T&&(0,t.jsx)("div",{className:"w-full h-full min-h-[400px] flex items-center justify-center bg-muted/30 rounded-lg border overflow-auto p-4",children:(0,t.jsx)("img",{src:g,alt:"Invoice",className:"max-w-full max-h-full object-contain"})}),!D&&!T&&(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsxs)("div",{className:"text-center p-6",children:[(0,t.jsx)(l.FileText,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Preview not available for this file type."}),(0,t.jsxs)(i.Button,{className:"mt-4",onClick:N,children:[(0,t.jsx)(n.Download,{className:"h-4 w-4 mr-2"}),"Download Invoice"]})]})})]}),!h&&!v&&!g&&!f.invoice_id&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center p-6",children:[(0,t.jsx)(l.FileText,{className:"h-12 w-12 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No invoice has been uploaded yet."})]})})]}),(0,t.jsxs)(r.DialogFooter,{className:"flex-shrink-0 gap-2 sm:gap-0",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>m(!1),children:"Close"}),g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>{g&&window.open(g,"_blank")},children:[(0,t.jsx)(o.ExternalLink,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),(0,t.jsxs)(i.Button,{onClick:N,children:[(0,t.jsx)(n.Download,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]})})}e.s(["ViewInvoiceDialog",()=>m])}]);