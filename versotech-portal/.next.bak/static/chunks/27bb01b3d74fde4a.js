(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,196767,e=>{"use strict";let t=(0,e.i(410587).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],196767)},501495,e=>{"use strict";e.s(["formatBps",0,e=>null==e?"—":`${e} bps`,"formatCurrency",0,(e,t="USD")=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:0}).format(e):"$0","formatDate",0,e=>{if(!e)return"—";let t="string"==typeof e?new Date(e):e;return Number.isNaN(t?.getTime?.())?"—":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}])},382021,e=>{"use strict";let t=(0,e.i(410587).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],382021)},932735,e=>{"use strict";let t=(0,e.i(410587).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],932735)},849110,e=>{"use strict";let t=(0,e.i(410587).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],849110)},773510,e=>{"use strict";let t=(0,e.i(410587).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],773510)},335994,e=>{"use strict";let t=(0,e.i(410587).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],335994)},312692,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(886978),i=e.i(47264),s=e.i(679472),n=e.i(68977),l=e.i(657180),o=e.i(460138),c=e.i(873358),d=e.i(362208),u="Checkbox",[m,h]=(0,i.createContextScope)(u),[p,x]=m(u);function g(e){let{__scopeCheckbox:r,checked:i,children:s,defaultChecked:l,disabled:o,form:c,name:d,onCheckedChange:m,required:h,value:x="on",internal_do_not_use_render:g}=e,[f,v]=(0,n.useControllableState)({prop:i,defaultProp:l??!1,onChange:m,caller:u}),[b,j]=a.useState(null),[y,C]=a.useState(null),N=a.useRef(!1),S=!b||!!c||!!b.closest("form"),k={checked:f,disabled:o,setChecked:v,control:b,setControl:j,name:d,form:c,value:x,hasConsumerStoppedPropagationRef:N,required:h,defaultChecked:!w(l)&&l,isFormControl:S,bubbleInput:y,setBubbleInput:C};return(0,t.jsx)(p,{scope:r,...k,children:"function"==typeof g?g(k):s})}var f="CheckboxTrigger",v=a.forwardRef(({__scopeCheckbox:e,onKeyDown:i,onClick:n,...l},o)=>{let{control:c,value:u,disabled:m,checked:h,required:p,setControl:g,setChecked:v,hasConsumerStoppedPropagationRef:b,isFormControl:j,bubbleInput:y}=x(f,e),C=(0,r.useComposedRefs)(o,g),N=a.useRef(h);return a.useEffect(()=>{let e=c?.form;if(e){let t=()=>v(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[c,v]),(0,t.jsx)(d.Primitive.button,{type:"button",role:"checkbox","aria-checked":w(h)?"mixed":h,"aria-required":p,"data-state":S(h),"data-disabled":m?"":void 0,disabled:m,value:u,...l,ref:C,onKeyDown:(0,s.composeEventHandlers)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,s.composeEventHandlers)(n,e=>{v(e=>!!w(e)||!e),y&&j&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});v.displayName=f;var b=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:i,checked:s,defaultChecked:n,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=e;return(0,t.jsx)(g,{__scopeCheckbox:r,checked:s,defaultChecked:n,disabled:o,required:l,onCheckedChange:d,name:i,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{...m,ref:a,__scopeCheckbox:r}),e&&(0,t.jsx)(N,{__scopeCheckbox:r})]})})});b.displayName=u;var j="CheckboxIndicator",y=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:i,...s}=e,n=x(j,r);return(0,t.jsx)(c.Presence,{present:i||w(n.checked)||!0===n.checked,children:(0,t.jsx)(d.Primitive.span,{"data-state":S(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:a,style:{pointerEvents:"none",...e.style}})})});y.displayName=j;var C="CheckboxBubbleInput",N=a.forwardRef(({__scopeCheckbox:e,...i},s)=>{let{control:n,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:m,required:h,disabled:p,name:g,value:f,form:v,bubbleInput:b,setBubbleInput:j}=x(C,e),y=(0,r.useComposedRefs)(s,j),N=(0,l.usePrevious)(u),S=(0,o.useSize)(n);a.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!c.current;if(N!==u&&e){let a=new Event("click",{bubbles:t});b.indeterminate=w(u),e.call(b,!w(u)&&u),b.dispatchEvent(a)}},[b,N,u,c]);let k=a.useRef(!w(u)&&u);return(0,t.jsx)(d.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??k.current,required:h,disabled:p,name:g,value:f,form:v,...i,tabIndex:-1,ref:y,style:{...i.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function w(e){return"indeterminate"===e}function S(e){return w(e)?"indeterminate":e?"checked":"unchecked"}N.displayName=C;var k=e.i(310556),_=e.i(282141);let I=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(b,{ref:r,className:(0,_.cn)("peer h-5 w-5 md:h-4 md:w-4 shrink-0 rounded border border-white/20 bg-white/5 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400/20 focus-visible:border-blue-400/50 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(y,{className:(0,_.cn)("flex items-center justify-center text-white"),children:(0,t.jsx)(k.Check,{className:"h-4 w-4 md:h-3.5 md:w-3.5"})})}));I.displayName=b.displayName,e.s(["Checkbox",()=>I],312692)},816654,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(282141);let i=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));i.displayName="Textarea",e.s(["Textarea",()=>i])},90613,e=>{"use strict";var t=e.i(722679),a=e.i(282141);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>o,"CardHeader",()=>i,"CardTitle",()=>s])},129432,e=>{"use strict";var t=e.i(722679),a=e.i(179232),r=e.i(414846),i=e.i(282141);let s=(0,r.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:r,asChild:n=!1,...l}){let o=n?a.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(s({variant:r}),e),...l})}e.s(["Badge",()=>n])},15098,e=>{"use strict";let t=(0,e.i(410587).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],15098)},554369,e=>{"use strict";let t=(0,e.i(410587).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],554369)},551544,e=>{"use strict";let t=(0,e.i(410587).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],551544)},45778,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(679472),i=e.i(886978),s=e.i(47264),n=e.i(68977),l=e.i(657180),o=e.i(460138),c=e.i(362208),d="Switch",[u,m]=(0,s.createContextScope)(d),[h,p]=u(d),x=a.forwardRef((e,s)=>{let{__scopeSwitch:l,name:o,checked:u,defaultChecked:m,required:p,disabled:x,value:g="on",onCheckedChange:f,form:j,...y}=e,[C,N]=a.useState(null),w=(0,i.useComposedRefs)(s,e=>N(e)),S=a.useRef(!1),k=!C||j||!!C.closest("form"),[_,I]=(0,n.useControllableState)({prop:u,defaultProp:m??!1,onChange:f,caller:d});return(0,t.jsxs)(h,{scope:l,checked:_,disabled:x,children:[(0,t.jsx)(c.Primitive.button,{type:"button",role:"switch","aria-checked":_,"aria-required":p,"data-state":b(_),"data-disabled":x?"":void 0,disabled:x,value:g,...y,ref:w,onClick:(0,r.composeEventHandlers)(e.onClick,e=>{I(e=>!e),k&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),k&&(0,t.jsx)(v,{control:C,bubbles:!S.current,name:o,value:g,checked:_,required:p,disabled:x,form:j,style:{transform:"translateX(-100%)"}})]})});x.displayName=d;var g="SwitchThumb",f=a.forwardRef((e,a)=>{let{__scopeSwitch:r,...i}=e,s=p(g,r);return(0,t.jsx)(c.Primitive.span,{"data-state":b(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:a})});f.displayName=g;var v=a.forwardRef(({__scopeSwitch:e,control:r,checked:s,bubbles:n=!0,...c},d)=>{let u=a.useRef(null),m=(0,i.useComposedRefs)(u,d),h=(0,l.usePrevious)(s),p=(0,o.useSize)(r);return a.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==s&&t){let a=new Event("click",{bubbles:n});t.call(e,s),e.dispatchEvent(a)}},[h,s,n]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...c,tabIndex:-1,ref:m,style:{...c.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function b(e){return e?"checked":"unchecked"}v.displayName="SwitchBubbleInput";var j=e.i(282141);let y=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(x,{className:(0,j.cn)("peer inline-flex h-7 md:h-6 w-12 md:w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:r,children:(0,t.jsx)(f,{className:(0,j.cn)("pointer-events-none block h-6 w-6 md:h-5 md:w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));y.displayName=x.displayName,e.s(["Switch",()=>y],45778)},429482,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(795988),i=e.i(476817),s=e.i(341695),n=e.i(352776),l=e.i(316264),o=e.i(191569),c=e.i(514133),d=e.i(538892),u=e.i(45778),m=e.i(263229),h=e.i(773510),p=e.i(704477),x=e.i(691974),g=e.i(994500);let f=s.z.object({email:s.z.string().email("Please enter a valid email address"),display_name:s.z.string().min(2,"Display name must be at least 2 characters"),title:s.z.string().optional(),role:s.z.string(),is_primary:s.z.boolean(),is_signatory:s.z.boolean(),can_sign:s.z.boolean()}),v={investor:"Investor",arranger:"Arranger",lawyer:"Law Firm",introducer:"Introducer",partner:"Partner",commercial_partner:"Commercial Partner"},b={investor:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],arranger:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],lawyer:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],partner:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],introducer:[{value:"admin",label:"Admin"},{value:"contact",label:"Contact"},{value:"payment_contact",label:"Payment Contact"},{value:"legal_contact",label:"Legal Contact"}],commercial_partner:[{value:"admin",label:"Admin"},{value:"contact",label:"Contact"},{value:"billing_contact",label:"Billing Contact"},{value:"technical_contact",label:"Technical Contact"}]},j={investor:"member",arranger:"member",lawyer:"member",partner:"member",introducer:"contact",commercial_partner:"contact"};function y({entityType:e,entityId:s,entityName:y,open:C,onOpenChange:N,onSuccess:w}){let[S,k]=(0,a.useState)(!1),_=b[e],I=j[e],{register:D,handleSubmit:E,reset:P,watch:F,setValue:L,formState:{errors:T}}=(0,r.useForm)({resolver:(0,i.zodResolver)(f),defaultValues:{email:"",display_name:"",title:"",role:I,is_primary:!1,is_signatory:!1,can_sign:!1}}),M=F("is_primary");F("is_signatory");let R=F("can_sign"),A=F("role"),z=async t=>{k(!0);try{let a=await fetch("/api/admin/entity-invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_type:e,entity_id:s,...t})}),r=await a.json();if(!a.ok)throw Error(r.error||"Failed to invite user");g.toast.success(r.message||`User invited to ${y}`),P(),N(!1),w?.()}catch(e){console.error("Invite error:",e),g.toast.error(e instanceof Error?e.message:"Failed to invite user")}finally{k(!1)}},H=()=>{P(),N(!1)};return(0,t.jsx)(n.Dialog,{open:C,onOpenChange:H,children:(0,t.jsxs)(n.DialogContent,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(n.DialogHeader,{children:[(0,t.jsxs)(n.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Mail,{className:"h-5 w-5"}),"Invite User to ",v[e]]}),(0,t.jsxs)(n.DialogDescription,{children:["Send an invitation email to join ",(0,t.jsx)("span",{className:"font-medium",children:y}),". They will receive instructions to set up their account."]})]}),(0,t.jsxs)("form",{onSubmit:E(z),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"email",children:"Email Address *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Mail,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(o.Input,{id:"email",type:"email",placeholder:"user@example.com",className:"pl-10",...D("email")})]}),T.email&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:T.email.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"display_name",children:"Display Name *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.User,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(o.Input,{id:"display_name",placeholder:"John Smith",className:"pl-10",...D("display_name")})]}),T.display_name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:T.display_name.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"title",children:"Title (Optional)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.Briefcase,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(o.Input,{id:"title",placeholder:"Managing Director",className:"pl-10",...D("title")})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(d.Select,{value:A,onValueChange:e=>L("role",e),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select role"})}),(0,t.jsx)(d.SelectContent,{children:_.map(e=>(0,t.jsx)(d.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.Label,{htmlFor:"is_primary",className:"text-sm font-medium",children:"Primary Contact"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set as the main point of contact for this entity"})]}),(0,t.jsx)(u.Switch,{id:"is_primary",checked:M,onCheckedChange:e=>L("is_primary",e)})]}),"lawyer"===e&&(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.Label,{htmlFor:"can_sign",className:"text-sm font-medium",children:"Can Sign Documents"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Has authority to sign on behalf of the law firm"})]}),(0,t.jsx)(u.Switch,{id:"can_sign",checked:R,onCheckedChange:e=>L("can_sign",e)})]}),(0,t.jsxs)(n.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:H,children:"Cancel"}),(0,t.jsx)(l.Button,{type:"submit",disabled:S,children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Invite..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Mail,{className:"mr-2 h-4 w-4"}),"Send Invitation"]})})]})]})]})})}e.s(["InviteUserDialog",()=>y])},71637,e=>{"use strict";let t=(0,e.i(410587).default)("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);e.s(["ScrollText",()=>t],71637)},285614,e=>{"use strict";e.i(649916);var t=e.i(722679),a=e.i(340915),r=e.i(599859),i=e.i(943928),s=e.i(414783),n=e.i(742596),l=e.i(567635),o=a,c=e.i(758255);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,a=(0,l.isHTMLElement)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=a-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m({children:e,isPresent:r,anchorX:i,root:s}){let n=(0,o.useId)(),l=(0,o.useRef)(null),m=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,o.useContext)(c.MotionConfigContext),p=function(...e){return a.useCallback(function(...e){return t=>{let a=!1,r=e.map(e=>{let r=d(e,t);return a||"function"!=typeof r||(a=!0),r});if(a)return()=>{for(let t=0;t<r.length;t++){let a=r[t];"function"==typeof a?a():d(e[t],null)}}}}(...e),e)}(l,e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:o,right:c}=m.current;if(r||!l.current||!e||!t)return;let d="left"===i?`left: ${o}`:`right: ${c}`;l.current.dataset.motionPopId=n;let u=document.createElement("style");h&&(u.nonce=h);let p=s??document.head;return p.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            top: ${a}px !important;
          }
        `),()=>{p.contains(u)&&p.removeChild(u)}},[r]),(0,t.jsx)(u,{isPresent:r,childRef:l,sizeRef:m,children:o.cloneElement(e,{ref:p})})}let h=({children:e,initial:r,isPresent:s,onExitComplete:l,custom:o,presenceAffectsLayout:c,mode:d,anchorX:u,root:h})=>{let x=(0,i.useConstant)(p),g=(0,a.useId)(),f=!0,v=(0,a.useMemo)(()=>(f=!1,{id:g,initial:r,isPresent:s,custom:o,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;l&&l()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[s,x,l]);return c&&f&&(v={...v}),(0,a.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[s]),a.useEffect(()=>{s||x.size||!l||l()},[s]),"popLayout"===d&&(e=(0,t.jsx)(m,{isPresent:s,anchorX:u,root:h,children:e})),(0,t.jsx)(n.PresenceContext.Provider,{value:v,children:e})};function p(){return new Map}var x=e.i(144625);let g=e=>e.key||"";function f(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let v=({children:e,custom:n,initial:l=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:m="left",root:p})=>{let[v,b]=(0,x.usePresence)(u),j=(0,a.useMemo)(()=>f(e),[e]),y=u&&!v?[]:j.map(g),C=(0,a.useRef)(!0),N=(0,a.useRef)(j),w=(0,i.useConstant)(()=>new Map),[S,k]=(0,a.useState)(j),[_,I]=(0,a.useState)(j);(0,s.useIsomorphicLayoutEffect)(()=>{C.current=!1,N.current=j;for(let e=0;e<_.length;e++){let t=g(_[e]);y.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[_,y.length,y.join("-")]);let D=[];if(j!==S){let e=[...j];for(let t=0;t<_.length;t++){let a=_[t],r=g(a);y.includes(r)||(e.splice(t,0,a),D.push(a))}return"wait"===d&&D.length&&(e=D),I(f(e)),k(j),null}let{forceRender:E}=(0,a.useContext)(r.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:_.map(e=>{let a=g(e),r=(!u||!!v)&&(j===_||y.includes(a));return(0,t.jsx)(h,{isPresent:r,initial:(!C.current||!!l)&&void 0,custom:n,presenceAffectsLayout:c,mode:d,root:p,onExitComplete:r?void 0:()=>{if(!w.has(a))return;w.set(a,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(E?.(),I(N.current),u&&b?.(),o&&o())},anchorX:m,children:e},a)})})};e.s(["AnimatePresence",()=>v],285614)},489733,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(352776),i=e.i(316264),s=e.i(191569),n=e.i(514133),l=e.i(816654),o=e.i(538892),c=e.i(994500),d=e.i(603274);function u({open:e,onOpenChange:u,introducer:m}){let[h,p]=(0,a.useState)(""),[x,g]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[y,C]=(0,a.useState)(""),[N,w]=(0,a.useState)("net_30"),[S,k]=(0,a.useState)("active"),[_,I]=(0,a.useState)(""),[D,E]=(0,a.useTransition)(),P=(0,d.useRouter)();return((0,a.useEffect)(()=>{m&&(p(m.legalName),g(m.contactName||""),v(m.email||""),j(m.defaultCommissionBps||""),C(m.commissionCapAmount||""),w(m.paymentTerms||"net_30"),k(m.status),I(m.notes||""))},[m]),m)?(0,t.jsx)(r.Dialog,{open:e,onOpenChange:u,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Edit Introducer"}),(0,t.jsx)(r.DialogDescription,{children:"Update introducer contact information and commercial terms."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"legalName",children:"Legal Name"}),(0,t.jsx)(s.Input,{id:"legalName",value:h,onChange:e=>p(e.target.value),placeholder:"e.g. Meridian Capital Partners",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"contactName",children:"Primary Contact"}),(0,t.jsx)(s.Input,{id:"contactName",value:x,onChange:e=>g(e.target.value),placeholder:"e.g. Jane Smith"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"contactEmail",children:"Contact Email"}),(0,t.jsx)(s.Input,{id:"contactEmail",type:"email",value:f,onChange:e=>v(e.target.value),placeholder:"jane.smith@example.com"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"commissionBps",children:"Default Commission (bps)"}),(0,t.jsx)(s.Input,{id:"commissionBps",type:"number",min:0,max:300,value:b,onChange:e=>j(""===e.target.value?"":Number(e.target.value)),placeholder:"150"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"commissionCap",children:"Commission Cap (optional)"}),(0,t.jsx)(s.Input,{id:"commissionCap",type:"number",min:0,value:y,onChange:e=>C(""===e.target.value?"":Number(e.target.value)),placeholder:"50000"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{children:"Payment Terms"}),(0,t.jsxs)(o.Select,{value:N,onValueChange:w,children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"Select terms"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"net_15",children:"Net 15"}),(0,t.jsx)(o.SelectItem,{value:"net_30",children:"Net 30"}),(0,t.jsx)(o.SelectItem,{value:"net_45",children:"Net 45"}),(0,t.jsx)(o.SelectItem,{value:"net_60",children:"Net 60"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{children:"Status"}),(0,t.jsxs)(o.Select,{value:S,onValueChange:k,children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"Select status"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(o.SelectItem,{value:"inactive",children:"Inactive"}),(0,t.jsx)(o.SelectItem,{value:"suspended",children:"Suspended"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"notes",children:"Notes"}),(0,t.jsx)(l.Textarea,{id:"notes",value:_,onChange:e=>I(e.target.value),placeholder:"Commission arrangements, regional focus, etc.",rows:3})]})]}),(0,t.jsxs)(r.DialogFooter,{className:"flex justify-between",children:[(0,t.jsx)(i.Button,{variant:"destructive",onClick:()=>{!m||confirm("Are you sure you want to delete this introducer? This action cannot be undone.")&&E(async()=>{try{let e=await fetch(`/api/staff/introducers/${m.id}`,{method:"DELETE"});if(!e.ok){let t,a=await e.text();try{t=JSON.parse(a)}catch(e){c.toast.error(`Failed to delete introducer: ${a||"Unknown error"}`);return}c.toast.error(t?.error??"Failed to delete introducer");return}c.toast.success("Introducer deleted"),u(!1),P.refresh()}catch(e){c.toast.error("Failed to delete introducer")}})},disabled:D,children:"Delete"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>u(!1),disabled:D,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:()=>{m&&E(async()=>{if(!h.trim())return void c.toast.error("Legal name is required");if(""!==b&&(0>Number(b)||Number(b)>300))return void c.toast.error("Default commission must be between 0 and 300 bps");try{let e=await fetch(`/api/staff/introducers/${m.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({legal_name:h.trim(),contact_name:x.trim()||null,email:f.trim()||null,default_commission_bps:""===b?null:Number(b),commission_cap_amount:""===y?null:Number(y),payment_terms:N,status:S,notes:_.trim()||null})});if(!e.ok){let t=await e.json().catch(()=>null);c.toast.error(t?.error??"Failed to update introducer");return}c.toast.success("Introducer updated"),u(!1),P.refresh()}catch(e){c.toast.error("Failed to update introducer")}})},disabled:D,children:D?"Updating…":"Update Introducer"})]})]})]})}):null}e.s(["EditIntroducerDialog",()=>u])},215909,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(352776),i=e.i(316264),s=e.i(191569),n=e.i(514133),l=e.i(816654),o=e.i(538892),c=e.i(38207),d=e.i(994500);function u(){let[e,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[v,b]=(0,a.useState)(""),[j,y]=(0,a.useState)("net_30"),[C,N]=(0,a.useState)("active"),[w,S]=(0,a.useState)(""),[k,_]=(0,a.useTransition)(),{open:I,setOpen:D,refresh:E}=(0,c.useAddIntroducer)(),P=()=>{u(""),h(""),x(""),f(""),b(""),y("net_30"),N("active"),S("")};return(0,t.jsx)(r.Dialog,{open:I,onOpenChange:e=>{D(e),e||P()},children:(0,t.jsxs)(r.DialogContent,{className:"max-w-lg",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Add Introducer"}),(0,t.jsx)(r.DialogDescription,{children:"Capture introducer contact information and default commercial terms."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"legalName",children:"Legal Name"}),(0,t.jsx)(s.Input,{id:"legalName",value:e,onChange:e=>u(e.target.value),placeholder:"e.g. Meridian Capital Partners",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"contactName",children:"Primary Contact"}),(0,t.jsx)(s.Input,{id:"contactName",value:m,onChange:e=>h(e.target.value),placeholder:"e.g. Jane Smith"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"contactEmail",children:"Contact Email"}),(0,t.jsx)(s.Input,{id:"contactEmail",type:"email",value:p,onChange:e=>x(e.target.value),placeholder:"jane.smith@example.com"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"commissionBps",children:"Default Commission (bps)"}),(0,t.jsx)(s.Input,{id:"commissionBps",type:"number",min:0,max:300,value:g,onChange:e=>f(""===e.target.value?"":Number(e.target.value)),placeholder:"150"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"commissionCap",children:"Commission Cap (optional)"}),(0,t.jsx)(s.Input,{id:"commissionCap",type:"number",min:0,value:v,onChange:e=>b(""===e.target.value?"":Number(e.target.value)),placeholder:"50000"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{children:"Payment Terms"}),(0,t.jsxs)(o.Select,{value:j,onValueChange:y,children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"Select terms"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"net_15",children:"Net 15"}),(0,t.jsx)(o.SelectItem,{value:"net_30",children:"Net 30"}),(0,t.jsx)(o.SelectItem,{value:"net_45",children:"Net 45"}),(0,t.jsx)(o.SelectItem,{value:"net_60",children:"Net 60"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{children:"Status"}),(0,t.jsxs)(o.Select,{value:C,onValueChange:N,children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"Select status"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(o.SelectItem,{value:"inactive",children:"Inactive"}),(0,t.jsx)(o.SelectItem,{value:"suspended",children:"Suspended"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"notes",children:"Notes"}),(0,t.jsx)(l.Textarea,{id:"notes",value:w,onChange:e=>S(e.target.value),placeholder:"Commission arrangements, regional focus, etc.",rows:3})]})]}),(0,t.jsxs)(r.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>D(!1),disabled:k,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:()=>{_(async()=>{if(!e.trim())return void d.toast.error("Legal name is required");if(""!==g&&(0>Number(g)||Number(g)>300))return void d.toast.error("Default commission must be between 0 and 300 bps");try{let t=await fetch("/api/staff/introducers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({legal_name:e.trim(),contact_name:m.trim()||null,email:p.trim()||null,default_commission_bps:""===g?null:Number(g),commission_cap_amount:""===v?null:Number(v),payment_terms:j,status:C,notes:w.trim()||null})});if(!t.ok){let e=await t.json().catch(()=>null);console.error("[AddIntroducerDialog] Failed to create introducer",e),d.toast.error(e?.error??"Failed to create introducer");return}d.toast.success("Introducer created"),D(!1),P(),await E()}catch(e){console.error("[AddIntroducerDialog] Unexpected error",e),d.toast.error("Failed to create introducer")}})},disabled:k,children:k?"Creating…":"Create Introducer"})]})]})})}e.s(["AddIntroducerDialog",()=>u])}]);