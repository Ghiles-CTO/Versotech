(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,259160,e=>{"use strict";var t=e.i(722679),s=e.i(340915),r=e.i(603274),a=e.i(90613),l=e.i(316264),n=e.i(129432),i=e.i(191569),o=e.i(761722),c=e.i(831833),d=e.i(382021),m=e.i(262823),g=e.i(750809),x=e.i(733179),h=e.i(615595),u=e.i(729416),j=e.i(237635),p=e.i(538892),b=e.i(758171),v=e.i(197098),N=e.i(946738),f=e.i(16479),y=e.i(560044);function w({columns:e,data:r,selectedIds:a,onSelectionChange:n,pageSize:i=50}){let{theme:o}=(0,y.useTheme)(),c="staff-dark"===o,[d,m]=s.useState([]),[g,x]=s.useState([]),[w,C]=s.useState({}),[S,_]=s.useState({}),[k,I]=s.useState({pageIndex:0,pageSize:i});console.log("[PAGINATED TABLE] Rendering with",r.length,"total rows, showing",k.pageSize,"per page");let D=(0,h.useReactTable)({data:r,columns:e,pageCount:Math.ceil(r.length/k.pageSize),onSortingChange:m,onColumnFiltersChange:x,getCoreRowModel:(0,u.getCoreRowModel)(),getSortedRowModel:(0,u.getSortedRowModel)(),getFilteredRowModel:(0,u.getFilteredRowModel)(),getPaginationRowModel:(0,u.getPaginationRowModel)(),onColumnVisibilityChange:C,onRowSelectionChange:_,onPaginationChange:I,state:{sorting:d,columnFilters:g,columnVisibility:w,rowSelection:S,pagination:k}});s.useEffect(()=>{n&&n(D.getFilteredSelectedRowModel().rows.map(e=>e.original.id))},[S]);let B=D.getRowModel().rows,F=D.getFilteredRowModel().rows.length,A=D.getPageCount(),P=k.pageIndex+1;return console.log("[PAGINATED TABLE] Current page:",P,"of",A,", showing",B.length,"rows"),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:`flex items-center justify-between px-4 py-3 border-b ${c?"bg-gray-900/30 border-gray-800":"bg-gray-50 border-gray-200"}`,children:[(0,t.jsxs)("div",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:["Showing ",(0,t.jsx)("span",{className:`font-medium ${c?"text-gray-200":"text-gray-900"}`,children:k.pageIndex*k.pageSize+1})," to"," ",(0,t.jsx)("span",{className:`font-medium ${c?"text-gray-200":"text-gray-900"}`,children:Math.min((k.pageIndex+1)*k.pageSize,F)})," of"," ",(0,t.jsx)("span",{className:`font-medium ${c?"text-gray-200":"text-gray-900"}`,children:F})," results"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(p.Select,{value:`${k.pageSize}`,onValueChange:e=>{I(t=>({...t,pageSize:Number(e),pageIndex:0}))},children:[(0,t.jsx)(p.SelectTrigger,{className:`h-8 w-[100px] ${c?"bg-gray-800/50 border-gray-700 text-gray-200":"bg-white border-gray-300 text-gray-900"}`,children:(0,t.jsx)(p.SelectValue,{placeholder:`${k.pageSize}`})}),(0,t.jsxs)(p.SelectContent,{className:c?"bg-gray-900 border-gray-700":"bg-white border-gray-200",children:[(0,t.jsx)(p.SelectItem,{value:"10",className:c?"text-gray-200":"text-gray-900",children:"10 rows"}),(0,t.jsx)(p.SelectItem,{value:"25",className:c?"text-gray-200":"text-gray-900",children:"25 rows"}),(0,t.jsx)(p.SelectItem,{value:"50",className:c?"text-gray-200":"text-gray-900",children:"50 rows"}),(0,t.jsx)(p.SelectItem,{value:"100",className:c?"text-gray-200":"text-gray-900",children:"100 rows"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:`h-8 w-8 disabled:opacity-30 transition-all ${c?"hover:bg-gray-800":"hover:bg-gray-100"}`,onClick:()=>D.setPageIndex(0),disabled:!D.getCanPreviousPage(),children:(0,t.jsx)(N.ChevronsLeft,{className:`h-4 w-4 ${c?"text-gray-400":"text-gray-500"}`})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:`h-8 w-8 disabled:opacity-30 transition-all ${c?"hover:bg-gray-800":"hover:bg-gray-100"}`,onClick:()=>D.previousPage(),disabled:!D.getCanPreviousPage(),children:(0,t.jsx)(b.ChevronLeft,{className:`h-4 w-4 ${c?"text-gray-400":"text-gray-500"}`})}),(0,t.jsx)("div",{className:"flex items-center gap-1 px-3",children:(0,t.jsxs)("span",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:["Page ",(0,t.jsx)("span",{className:`font-medium ${c?"text-gray-200":"text-gray-900"}`,children:P})," of ",(0,t.jsx)("span",{className:`font-medium ${c?"text-gray-200":"text-gray-900"}`,children:A})]})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:`h-8 w-8 disabled:opacity-30 transition-all ${c?"hover:bg-gray-800":"hover:bg-gray-100"}`,onClick:()=>D.nextPage(),disabled:!D.getCanNextPage(),children:(0,t.jsx)(v.ChevronRight,{className:`h-4 w-4 ${c?"text-gray-400":"text-gray-500"}`})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:`h-8 w-8 disabled:opacity-30 transition-all ${c?"hover:bg-gray-800":"hover:bg-gray-100"}`,onClick:()=>D.setPageIndex(A-1),disabled:!D.getCanNextPage(),children:(0,t.jsx)(f.ChevronsRight,{className:`h-4 w-4 ${c?"text-gray-400":"text-gray-500"}`})})]})]})]}),(0,t.jsx)("div",{className:`rounded-lg overflow-x-auto overflow-y-hidden border ${c?"border-gray-800":"border-gray-200"}`,children:(0,t.jsxs)(j.Table,{children:[(0,t.jsx)(j.TableHeader,{children:D.getHeaderGroups().map(e=>(0,t.jsx)(j.TableRow,{className:`${c?"border-gray-800":"border-gray-200"} hover:bg-transparent`,children:e.headers.map(e=>(0,t.jsx)(j.TableHead,{className:`font-medium text-xs uppercase tracking-wider ${c?"text-gray-300 bg-gray-900/80":"text-gray-700 bg-gray-50"}`,children:e.isPlaceholder?null:(0,h.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(j.TableBody,{children:B?.length?B.map((e,s)=>(0,t.jsx)(j.TableRow,{"data-state":e.getIsSelected()&&"selected",className:`
                    ${c?"border-gray-800":"border-gray-200"} transition-all duration-150
                    ${c?"hover:bg-gray-800/30":"hover:bg-gray-50"} hover:shadow-sm
                    ${e.getIsSelected()?c?"bg-blue-900/10":"bg-blue-50":""}
                    ${s%2==0?c?"bg-gray-900/20":"bg-gray-50/50":"bg-transparent"}
                  `,children:e.getVisibleCells().map(e=>(0,t.jsx)(j.TableCell,{className:`py-3 ${c?"text-gray-100":"text-gray-900"}`,children:(0,h.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(j.TableRow,{children:(0,t.jsx)(j.TableCell,{colSpan:e.length,className:"h-32 text-center text-gray-500",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,t.jsx)("svg",{className:`w-12 h-12 ${c?"text-gray-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,t.jsx)("p",{className:"text-sm",children:"No subscriptions found"})]})})})})]})}),(0,t.jsxs)("div",{className:`flex items-center justify-between px-4 py-3 border-t ${c?"bg-gray-900/30 border-gray-800":"bg-gray-50 border-gray-200"}`,children:[(0,t.jsx)("div",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:D.getFilteredSelectedRowModel().rows.length>0&&(0,t.jsxs)("span",{className:"text-blue-500 font-medium",children:[D.getFilteredSelectedRowModel().rows.length," selected"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>D.previousPage(),disabled:!D.getCanPreviousPage(),className:`disabled:opacity-30 transition-all ${c?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-100 text-gray-700"}`,children:"Previous"}),(0,t.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[Array.from({length:Math.min(5,A)},(e,s)=>{let r=s+1,a=r===P;return(0,t.jsx)("button",{onClick:()=>D.setPageIndex(s),className:`
                    w-8 h-8 rounded text-sm font-medium transition-all
                    ${a?"bg-blue-600 text-white":c?"text-gray-400 hover:bg-gray-800 hover:text-gray-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                  `,children:r},s)}),A>5&&(0,t.jsx)("span",{className:`px-2 ${c?"text-gray-500":"text-gray-400"}`,children:"..."})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>D.nextPage(),disabled:!D.getCanNextPage(),className:`disabled:opacity-30 transition-all ${c?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-100 text-gray-700"}`,children:"Next"})]})]})]})}var C=e.i(312692),S=e.i(185419),_=e.i(496383),k=e.i(15098),I=e.i(645855),D=e.i(263229),B=e.i(745083),F=e.i(429031),A=e.i(820417);function P(e,t){return new Intl.NumberFormat("en-US",{style:"currency",currency:t||"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function T(e,t){return new Intl.NumberFormat("en-US",{style:"currency",currency:t||"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function $(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}let U=[{id:"select",header:({table:e})=>(0,t.jsx)(C.Checkbox,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:e})=>(0,t.jsx)(C.Checkbox,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"subscription_number",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Sub #",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.getValue("subscription_number");return(0,t.jsxs)("div",{className:"font-mono font-semibold",children:["#",s]})}},{accessorKey:"investor.legal_name",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Investor",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.original.investor;return s?(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(A.default,{href:`/versotech_main/investors/${s.id}`,className:"font-semibold hover:underline",children:s.legal_name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(n.Badge,{variant:"outline",className:"text-xs capitalize",children:s.type}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:s.country})]})]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"-"})}},{accessorKey:"vehicle.name",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Vehicle",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.original.vehicle;return s?(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-semibold",children:s.name}),s.type&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground capitalize",children:s.type})]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"-"})}},{accessorKey:"commitment",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Commitment",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=parseFloat(e.getValue("commitment")),r=e.original.currency;return(0,t.jsx)("div",{className:"text-right font-semibold",children:P(s,r)})}},{accessorKey:"status",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Status",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.getValue("status"),r={active:k.CheckCircle2,committed:D.Loader2,pending:I.Clock,closed:F.Archive,cancelled:B.XCircle}[s]||I.Clock;return(0,t.jsxs)(n.Badge,{className:`${{active:"bg-green-900/30 text-green-300 border-green-700",committed:"bg-blue-900/30 text-blue-300 border-blue-700",pending:"bg-yellow-900/30 text-yellow-300 border-yellow-700",closed:"bg-gray-800/50 text-gray-300 border-gray-700",cancelled:"bg-red-900/30 text-red-300 border-red-700"}[s]||"bg-gray-800/50 text-gray-300 border-gray-700"} flex items-center gap-1.5 w-fit`,variant:"outline",children:[(0,t.jsx)(r,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"capitalize",children:s})]})},filterFn:(e,t,s)=>s.includes(e.getValue(t))},{accessorKey:"committed_at",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Committed Date",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.getValue("committed_at");return(0,t.jsx)("div",{className:"text-sm",children:$(s)})}},{accessorKey:"created_at",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Created Date",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.getValue("created_at");return(0,t.jsx)("div",{className:"text-sm",children:$(s)})}},{accessorKey:"num_shares",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Num Shares",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.num_shares;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:s.toLocaleString()})}},{accessorKey:"price_per_share",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Price/Share",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.price_per_share,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:T(s,r)})}},{accessorKey:"cost_per_share",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Cost/Share",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.cost_per_share,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:T(s,r)})}},{accessorKey:"spread_per_share",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Spread/Share",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.spread_per_share,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm text-green-400",children:T(s,r)})}},{accessorKey:"spread_fee_amount",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Spread Fee",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.spread_fee_amount,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:P(s,r)})}},{accessorKey:"subscription_fee_percent",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Sub Fee %",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.subscription_fee_percent;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsxs)("div",{className:"text-right font-semibold text-sm",children:[s.toFixed(2),"%"]})}},{accessorKey:"subscription_fee_amount",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Sub Fee $",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.subscription_fee_amount,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:P(s,r)})}},{accessorKey:"bd_fee_percent",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["BD Fee %",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.bd_fee_percent;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsxs)("div",{className:"text-right font-semibold text-sm",children:[s.toFixed(2),"%"]})}},{accessorKey:"bd_fee_amount",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["BD Fee $",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.bd_fee_amount,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:P(s,r)})}},{accessorKey:"finra_fee_amount",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["FINRA Fee",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.finra_fee_amount,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:P(s,r)})}},{accessorKey:"funded_amount",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Funded Amount",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=parseFloat(e.getValue("funded_amount")),r=e.original.currency;return(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:P(s,r)})}},{accessorKey:"outstanding_amount",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Outstanding",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.outstanding_amount,r=e.original.currency;return null==s||0===s?(0,t.jsx)("div",{className:"text-right text-muted-foreground text-sm",children:"Fully funded"}):(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("div",{className:"font-semibold text-sm text-yellow-600",children:P(s,r)})})}},{accessorKey:"current_nav",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Current NAV",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.current_nav,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:P(s,r)})}},{accessorKey:"opportunity_name",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Opportunity",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.original.vehicle?.investment_name;return s?(0,t.jsx)("div",{className:"max-w-[200px]",children:(0,t.jsx)("div",{className:"text-sm font-medium truncate",title:s,children:s})}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{accessorKey:"contract_date",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Contract Date",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.original.contract_date;return(0,t.jsx)("div",{className:"text-sm",children:$(s)})}},{accessorKey:"sourcing_contract_ref",header:({column:e})=>(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Sourcing Ref",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.original.sourcing_contract_ref;return s?(0,t.jsx)("div",{className:"text-sm font-mono max-w-[150px] truncate",title:s,children:s}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{id:"introducer",header:()=>(0,t.jsx)("div",{children:"Introducer"}),cell:({row:e})=>{let s=e.original.introducer;return s?(0,t.jsx)("div",{className:"text-sm font-medium max-w-[150px] truncate",title:s.legal_name,children:s.legal_name}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{id:"introduction",header:()=>(0,t.jsx)("div",{children:"Introduction"}),cell:({row:e})=>{let s=e.original.introduction_id;return s?(0,t.jsxs)("div",{className:"text-xs font-mono text-muted-foreground max-w-[100px] truncate",title:s,children:[s.substring(0,8),"..."]}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{id:"notes",header:()=>(0,t.jsx)("div",{children:"Notes"}),cell:({row:e})=>{let s=e.original.acknowledgement_notes;return s?(0,t.jsx)("div",{className:"text-sm max-w-[200px] truncate",title:s,children:s}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{accessorKey:"performance_fee_tier1_percent",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Perf Tier 1 %",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.performance_fee_tier1_percent;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsxs)("div",{className:"text-right font-semibold text-sm text-purple-400",children:[s,"%"]})}},{accessorKey:"performance_fee_tier1_threshold",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Perf Tier 1 Threshold",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.performance_fee_tier1_threshold,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:P(s,r)})}},{accessorKey:"performance_fee_tier2_percent",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Perf Tier 2 %",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.performance_fee_tier2_percent;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsxs)("div",{className:"text-right font-semibold text-sm text-purple-300",children:[s,"%"]})}},{accessorKey:"performance_fee_tier2_threshold",header:({column:e})=>(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(l.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-mr-4",children:["Perf Tier 2 Threshold",(0,t.jsx)(S.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>{let s=e.original.performance_fee_tier2_threshold,r=e.original.currency;return null==s?(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,t.jsx)("div",{className:"text-right font-semibold text-sm",children:P(s,r)})}},{id:"actions",header:()=>(0,t.jsx)("div",{className:"text-center",children:"Actions"}),cell:({row:e})=>{let s=e.original;return(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(A.default,{href:`/versotech_main/subscriptions/${s.id}`,children:(0,t.jsx)(l.Button,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-full bg-white text-black border-white hover:bg-gray-200",title:"View Details",children:(0,t.jsx)(_.Eye,{className:"h-4 w-4"})})})})}}];var M=e.i(352776),R=e.i(514133),K=e.i(196767),L=e.i(282141);let z=[{value:"pending",label:"Pending",darkColor:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",lightColor:"bg-yellow-100 text-yellow-700 border-yellow-300"},{value:"committed",label:"Committed",darkColor:"bg-blue-500/20 text-blue-300 border-blue-500/50",lightColor:"bg-blue-100 text-blue-700 border-blue-300"},{value:"active",label:"Active",darkColor:"bg-green-500/20 text-green-300 border-green-500/50",lightColor:"bg-green-100 text-green-700 border-green-300"},{value:"closed",label:"Closed",darkColor:"bg-gray-500/20 text-gray-300 border-gray-500/50",lightColor:"bg-gray-100 text-gray-700 border-gray-300"},{value:"cancelled",label:"Cancelled",darkColor:"bg-red-500/20 text-red-300 border-red-500/50",lightColor:"bg-red-100 text-red-700 border-red-300"}];function V({open:e,onOpenChange:r,filters:a,onApply:o}){let{theme:c}=(0,y.useTheme)(),d="staff-dark"===c,[m,x]=(0,s.useState)(a),h=[m.search,m.statuses?.length,m.commitmentMin,m.commitmentMax].filter(Boolean).length;return(0,t.jsx)(M.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(M.DialogContent,{className:(0,L.cn)("sm:max-w-[500px]",d?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900"),children:[(0,t.jsx)(M.DialogHeader,{children:(0,t.jsxs)(M.DialogTitle,{className:(0,L.cn)("flex items-center justify-between text-xl",d?"text-white":"text-gray-900"),children:[(0,t.jsx)("span",{children:"Filter Subscriptions"}),h>0&&(0,t.jsxs)(n.Badge,{variant:"secondary",className:"ml-2",children:[h," active"]})]})}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{className:(0,L.cn)("text-sm font-medium",d?"text-gray-200":"text-gray-700"),children:"Search"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g.Search,{className:(0,L.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",d?"text-gray-400":"text-gray-500")}),(0,t.jsx)(i.Input,{placeholder:"Search by number, investor, or vehicle...",value:m.search||"",onChange:e=>x(t=>({...t,search:e.target.value})),className:(0,L.cn)("pl-10",d?"bg-gray-800 border-gray-600 text-white placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{className:(0,L.cn)("text-sm font-medium",d?"text-gray-200":"text-gray-700"),children:"Status"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:z.map(e=>(0,t.jsxs)(n.Badge,{variant:"outline",className:(0,L.cn)("cursor-pointer transition-all",m.statuses?.includes(e.value)?d?e.darkColor:e.lightColor:d?"bg-gray-800 text-gray-400 border-gray-600 hover:border-gray-500":"bg-gray-50 text-gray-600 border-gray-300 hover:border-gray-400"),onClick:()=>{var t;let s,r;return t=e.value,r=(s=m.statuses||[]).includes(t)?s.filter(e=>e!==t):[...s,t],void x(e=>({...e,statuses:r.length>0?r:void 0}))},children:[m.statuses?.includes(e.value)&&(0,t.jsx)("span",{className:"mr-1",children:"âœ“"}),e.label]},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{className:(0,L.cn)("text-sm font-medium",d?"text-gray-200":"text-gray-700"),children:"Commitment Amount"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(K.DollarSign,{className:(0,L.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",d?"text-gray-400":"text-gray-500")}),(0,t.jsx)(i.Input,{type:"number",placeholder:"Min",value:m.commitmentMin||"",onChange:e=>x(t=>({...t,commitmentMin:e.target.value?Number(e.target.value):void 0})),className:(0,L.cn)("pl-10",d?"bg-gray-800 border-gray-600 text-white placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,t.jsx)("span",{className:d?"text-gray-400":"text-gray-500",children:"to"}),(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(K.DollarSign,{className:(0,L.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",d?"text-gray-400":"text-gray-500")}),(0,t.jsx)(i.Input,{type:"number",placeholder:"Max",value:m.commitmentMax||"",onChange:e=>x(t=>({...t,commitmentMax:e.target.value?Number(e.target.value):void 0})),className:(0,L.cn)("pl-10",d?"bg-gray-800 border-gray-600 text-white placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]})]})]})]}),(0,t.jsxs)(M.DialogFooter,{className:"flex items-center justify-between",children:[(0,t.jsx)(l.Button,{variant:"ghost",onClick:()=>{x({}),o({}),r(!1)},className:d?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900",children:"Clear All"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>r(!1),className:d?"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-800":"bg-transparent border-gray-300 text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,t.jsx)(l.Button,{onClick:()=>{o(m),r(!1)},className:"bg-blue-600 text-white hover:bg-blue-700",children:"Apply Filters"})]})]})]})})}var E=e.i(816654),H=e.i(994500);function O({open:e,onOpenChange:r,onSuccess:a,vehicles:n,investors:o}){let[d,m]=(0,s.useState)(!1),[g,x]=(0,s.useState)({investor_id:"",vehicle_id:"",commitment:"",currency:"USD",status:"pending",effective_date:"",funding_due_at:"",units:"",acknowledgement_notes:""}),h=async e=>{if(e.preventDefault(),!g.investor_id||!g.vehicle_id||!g.commitment)return void H.toast.error("Please fill in all required fields");m(!0);try{let e=await fetch("/api/subscriptions/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,commitment:parseFloat(g.commitment),units:g.units?parseFloat(g.units):null})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create subscription")}H.toast.success("Subscription created successfully"),r(!1),a(),x({investor_id:"",vehicle_id:"",commitment:"",currency:"USD",status:"pending",effective_date:"",funding_due_at:"",units:"",acknowledgement_notes:""})}catch(e){console.error("Create subscription error:",e),H.toast.error(e instanceof Error?e.message:"Failed to create subscription")}finally{m(!1)}};return(0,t.jsx)(M.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(M.DialogContent,{className:"bg-background border-border text-foreground max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(M.DialogHeader,{className:"border-b border-border pb-4",children:[(0,t.jsxs)(M.DialogTitle,{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[(0,t.jsx)(c.Plus,{className:"h-6 w-6 text-blue-400"}),"New Subscription"]}),(0,t.jsx)(M.DialogDescription,{className:"text-muted-foreground",children:"Create a new subscription for an investor in a vehicle"})]}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-6 pt-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(R.Label,{htmlFor:"investor_id",className:"text-foreground text-sm font-medium",children:["Investor ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)(p.Select,{value:g.investor_id,onValueChange:e=>x({...g,investor_id:e}),required:!0,children:[(0,t.jsx)(p.SelectTrigger,{id:"investor_id",className:"bg-muted border-border text-foreground",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select an investor"})}),(0,t.jsx)(p.SelectContent,{className:"bg-muted border-border max-h-[200px]",children:o.map(e=>(0,t.jsx)(p.SelectItem,{value:e.id,className:"text-foreground",children:e.legal_name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(R.Label,{htmlFor:"vehicle_id",className:"text-foreground text-sm font-medium",children:["Vehicle ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)(p.Select,{value:g.vehicle_id,onValueChange:e=>x({...g,vehicle_id:e}),required:!0,children:[(0,t.jsx)(p.SelectTrigger,{id:"vehicle_id",className:"bg-muted border-border text-foreground",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select a vehicle"})}),(0,t.jsx)(p.SelectContent,{className:"bg-muted border-border max-h-[200px]",children:n.map(e=>(0,t.jsx)(p.SelectItem,{value:e.id,className:"text-foreground",children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(R.Label,{htmlFor:"commitment",className:"text-foreground text-sm font-medium",children:["Commitment Amount ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)(i.Input,{id:"commitment",type:"number",step:"0.01",placeholder:"0.00",value:g.commitment,onChange:e=>x({...g,commitment:e.target.value}),className:"bg-muted border-border text-foreground",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{htmlFor:"currency",className:"text-foreground text-sm font-medium",children:"Currency"}),(0,t.jsxs)(p.Select,{value:g.currency,onValueChange:e=>x({...g,currency:e}),children:[(0,t.jsx)(p.SelectTrigger,{id:"currency",className:"bg-muted border-border text-foreground",children:(0,t.jsx)(p.SelectValue,{})}),(0,t.jsxs)(p.SelectContent,{className:"bg-muted border-border",children:[(0,t.jsx)(p.SelectItem,{value:"USD",className:"text-foreground",children:"USD"}),(0,t.jsx)(p.SelectItem,{value:"EUR",className:"text-foreground",children:"EUR"}),(0,t.jsx)(p.SelectItem,{value:"GBP",className:"text-foreground",children:"GBP"}),(0,t.jsx)(p.SelectItem,{value:"CHF",className:"text-foreground",children:"CHF"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{htmlFor:"status",className:"text-foreground text-sm font-medium",children:"Status"}),(0,t.jsxs)(p.Select,{value:g.status,onValueChange:e=>x({...g,status:e}),children:[(0,t.jsx)(p.SelectTrigger,{id:"status",className:"bg-muted border-border text-foreground",children:(0,t.jsx)(p.SelectValue,{})}),(0,t.jsxs)(p.SelectContent,{className:"bg-muted border-border",children:[(0,t.jsx)(p.SelectItem,{value:"pending",className:"text-foreground",children:"Pending"}),(0,t.jsx)(p.SelectItem,{value:"committed",className:"text-foreground",children:"Committed"}),(0,t.jsx)(p.SelectItem,{value:"active",className:"text-foreground",children:"Active"}),(0,t.jsx)(p.SelectItem,{value:"closed",className:"text-foreground",children:"Closed"}),(0,t.jsx)(p.SelectItem,{value:"cancelled",className:"text-foreground",children:"Cancelled"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{htmlFor:"effective_date",className:"text-foreground text-sm font-medium",children:"Effective Date"}),(0,t.jsx)(i.Input,{id:"effective_date",type:"date",value:g.effective_date,onChange:e=>x({...g,effective_date:e.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{htmlFor:"funding_due_at",className:"text-foreground text-sm font-medium",children:"Funding Due Date"}),(0,t.jsx)(i.Input,{id:"funding_due_at",type:"date",value:g.funding_due_at,onChange:e=>x({...g,funding_due_at:e.target.value}),className:"bg-muted border-border text-foreground"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{htmlFor:"units",className:"text-foreground text-sm font-medium",children:"Number of Units"}),(0,t.jsx)(i.Input,{id:"units",type:"number",step:"0.01",placeholder:"Optional",value:g.units,onChange:e=>x({...g,units:e.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.Label,{htmlFor:"acknowledgement_notes",className:"text-foreground text-sm font-medium",children:"Notes"}),(0,t.jsx)(E.Textarea,{id:"acknowledgement_notes",placeholder:"Add any additional notes...",value:g.acknowledgement_notes,onChange:e=>x({...g,acknowledgement_notes:e.target.value}),className:"bg-muted border-border text-foreground min-h-[100px]"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-border",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>r(!1),className:"bg-muted text-foreground border-border hover:bg-muted/80",disabled:d,children:"Cancel"}),(0,t.jsx)(l.Button,{type:"submit",className:"bg-primary text-primary-foreground hover:bg-primary/90",disabled:d,children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Plus,{className:"mr-2 h-4 w-4"}),"Create Subscription"]})})]})]})]})})}function G({basePath:e="/versotech/staff"}){let h=(0,r.useRouter)(),[u,j]=(0,s.useState)([]),[p,b]=(0,s.useState)(!0),[v,N]=(0,s.useState)(!1),[f,y]=(0,s.useState)(0),[C,S]=(0,s.useState)(""),[_,k]=(0,s.useState)({}),[I,D]=(0,s.useState)(!1),[B,F]=(0,s.useState)([]),[A,P]=(0,s.useState)([]),[T,$]=(0,s.useState)([]),[M,R]=(0,s.useState)(!1);(0,s.useEffect)(()=>{K()},[]);let K=async()=>{try{b(!0);let[e,t,s,r]=await Promise.all([fetch("/api/subscriptions"),fetch("/api/vehicles"),fetch("/api/investors"),fetch("/api/subscription-submissions/summary")]);if(!e.ok)throw Error("Failed to load subscriptions");let a=await e.json();if(j(a.subscriptions||[]),t.ok){let e=await t.json();P(e.vehicles||[])}if(s.ok){let e=await s.json();$(e.investors||[])}if(r.ok){let e=await r.json();y(e.totalAmount||0)}}catch(e){console.error("Load error:",e),H.toast.error("Failed to load subscriptions")}finally{b(!1)}},L=async()=>{N(!0);try{let e=await fetch("/api/subscriptions");if(!e.ok)throw Error("Failed to refresh");let t=await e.json();j(t.subscriptions||[]),F([]),H.toast.success("Data refreshed")}catch(e){H.toast.error("Failed to refresh data")}finally{N(!1)}},z=(0,s.useMemo)(()=>{if(!u||0===u.length)return[];let e=u;if(C){let t=C.toLowerCase();e=e.filter(e=>[e.subscription_number?.toString(),e.investor?.legal_name,e.vehicle?.name].filter(Boolean).join(" ").toLowerCase().includes(t))}if(_.search){let t=_.search.toLowerCase();e=e.filter(e=>[e.subscription_number?.toString(),e.investor?.legal_name,e.vehicle?.name,e.opportunity_name].filter(Boolean).join(" ").toLowerCase().includes(t))}return _.statuses?.length&&(e=e.filter(e=>_.statuses.includes(e.status))),_.commitmentMin&&(e=e.filter(e=>e.commitment>=_.commitmentMin)),_.commitmentMax&&(e=e.filter(e=>e.commitment<=_.commitmentMax)),e},[u,C,_]),E=(0,s.useMemo)(()=>{let e=z.length,t=z.reduce((e,t)=>e+(t.commitment||0),0);return{total:e,totalCommitment:t,totalFunded:z.reduce((e,t)=>e+(t.funded_amount||0),0),activeCount:z.filter(e=>"active"===e.status).length}},[z]),G=async()=>{try{let e=B.length>0?B:z.map(e=>e.id);H.toast.info(`Exporting ${e.length} subscriptions...`)}catch(e){H.toast.error("Failed to export")}},q=[_.search,_.statuses?.length,_.commitmentMin,_.commitmentMax].filter(Boolean).length;return p?(0,t.jsx)("div",{className:"p-6 space-y-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-zinc-700 rounded w-64"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-zinc-700 rounded"},s))}),(0,t.jsx)("div",{className:"h-96 bg-gray-200 dark:bg-zinc-700 rounded"})]})}):(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Subscription Management"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage and track all investment subscriptions"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:L,disabled:v,children:[(0,t.jsx)(m.RefreshCw,{className:`h-4 w-4 mr-2 ${v?"animate-spin":""}`}),"Refresh"]}),(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>h.push(`${e}/subscriptions/vehicle-summary`),children:[(0,t.jsx)(x.TrendingUp,{className:"h-4 w-4 mr-2"}),"Summary"]}),(0,t.jsxs)(l.Button,{onClick:()=>R(!0),size:"sm",children:[(0,t.jsx)(c.Plus,{className:"h-4 w-4 mr-2"}),"New Subscription"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Subscriptions"})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:E.total.toLocaleString()}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"All subscriptions"})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Confirmed Interest"})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",(f/1e6).toFixed(1),"M"]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Interests confirmed"})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Commitment"})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["$",(E.totalCommitment/1e6).toFixed(1),"M"]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Committed capital"})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Funded"})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",(E.totalFunded/1e6).toFixed(1),"M"]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Capital deployed"})]})]})]}),(0,t.jsx)(a.Card,{children:(0,t.jsx)(a.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(g.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{placeholder:"Search by number, investor, or vehicle...",value:C,onChange:e=>S(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>D(!0),children:[(0,t.jsx)(d.Filter,{className:"h-4 w-4 mr-2"}),"Filters",q>0&&(0,t.jsx)(n.Badge,{variant:"secondary",className:"ml-2",children:q})]}),B.length>0&&(0,t.jsxs)(l.Button,{variant:"outline",onClick:G,children:[(0,t.jsx)(o.Download,{className:"h-4 w-4 mr-2"}),"Export (",B.length,")"]})]})]})})}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsxs)(a.CardTitle,{children:["All Subscriptions (",z.length,")"]}),(0,t.jsxs)(a.CardDescription,{children:["Comprehensive subscription list with sortable columns and bulk actions",B.length>0&&(0,t.jsxs)("span",{className:"text-muted-foreground text-sm ml-2",children:["(",B.length," selected)"]})]})]}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)(w,{data:z,columns:U,selectedIds:B,onSelectionChange:F,pageSize:50})})]}),(0,t.jsx)(V,{open:I,onOpenChange:D,filters:_,onApply:k,vehicles:A}),(0,t.jsx)(O,{open:M,onOpenChange:R,investors:T,vehicles:A,onSuccess:L})]})}e.s(["StyledSubscriptionsPage",()=>G],259160)}]);