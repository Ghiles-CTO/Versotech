(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,994340,e=>{"use strict";var t=e.i(722679),s=e.i(340915),r=e.i(90613),a=e.i(316264),l=e.i(129432),d=e.i(429760),n=e.i(237635),i=e.i(971743),c=e.i(501259),o=e.i(119311),m=e.i(396132),x=e.i(645855),h=e.i(80465),u=e.i(496383),g=e.i(711819),b=e.i(49664),j=e.i(733179),f=e.i(122208),p=e.i(761722),N=e.i(382021),v=e.i(264653),w=e.i(401148),C=e.i(71637),T=e.i(941844),_=e.i(398472),y=e.i(191569),k=e.i(820417),H=e.i(501495);let D={draft:"bg-white/10 text-foreground border border-white/20",open:"bg-emerald-500/20 text-emerald-200 border border-emerald-400/30",allocation_pending:"bg-amber-500/15 text-amber-200 border border-amber-400/30",closed:"bg-blue-500/20 text-blue-200 border border-blue-400/30",cancelled:"bg-red-500/20 text-red-200 border border-red-400/30"},S={equity_secondary:"Secondary",equity_primary:"Primary",credit_trade_finance:"Credit/Trade",other:"Other"},B={pending:"bg-amber-500/20 text-amber-200 border-amber-400/30",sent:"bg-blue-500/20 text-blue-200 border-blue-400/30",signed:"bg-emerald-500/20 text-emerald-200 border-emerald-400/30",completed:"bg-emerald-500/20 text-emerald-200 border-emerald-400/30",expired:"bg-red-500/20 text-red-200 border-red-400/30",cancelled:"bg-gray-500/20 text-gray-200 border-gray-400/30"};function F({deal:e,termSheets:F,dataRoomDocuments:R,subscriptions:$,pendingTasks:I,interests:A,signatureHistory:P,viewerType:U="arranger",feeModel:M}){let z="introducer"!==U,[L,O]=(0,s.useState)("overview"),[V,Y]=(0,s.useState)(""),[E,G]=(0,s.useState)(""),[q,K]=(0,s.useState)(null),J=new Map($.map(e=>[e.investor_id,e])),Q=(e.deal_memberships||[]).filter(e=>e.investor_id).map(e=>({...e,subscription:e.investor_id?J.get(e.investor_id):null})),W={total:Q.length,dispatched:Q.filter(e=>e.dispatched_at).length,viewed:Q.filter(e=>e.viewed_at).length,interested:Q.filter(e=>e.interest_confirmed_at).length,ndaSigned:Q.filter(e=>e.nda_signed_at).length,dataRoom:Q.filter(e=>e.data_room_granted_at).length,packGen:Q.filter(e=>e.subscription?.pack_generated_at).length,packSent:Q.filter(e=>e.subscription?.pack_sent_at).length,signed:Q.filter(e=>e.subscription?.signed_at).length,funded:Q.filter(e=>e.subscription?.funded_at).length},X=[{label:"Dispatched",count:W.dispatched},{label:"Viewed",count:W.viewed},{label:"Interested",count:W.interested},{label:"NDA",count:W.ndaSigned},{label:"Data Room",count:W.dataRoom},{label:"Pack Gen",count:W.packGen},{label:"Pack Sent",count:W.packSent},{label:"Signed",count:W.signed},{label:"Funded",count:W.funded}],Z=P.filter(e=>{let t=e.signature_timestamp||e.created_at;if(!t)return!0;let s=new Date(t);return!(V&&s<new Date(V)||E&&s>new Date(E+"T23:59:59"))}),ee=Z.filter(e=>"signed"===e.status||"completed"===e.status),et=Z.filter(e=>"pending"===e.status||"sent"===e.status),es=async(e,t,s)=>{if(!e)return void alert("Document file not available");K(e);try{console.log(`[Document ${s}] Fetching: ${e}`);let r=await fetch(`/api/storage/download?bucket=deal-documents&path=${encodeURIComponent(e)}`);if(!r.ok){let e=r.headers.get("content-type"),t=`Failed to ${s} document (${r.status})`;if(e?.includes("application/json")){let e=await r.json().catch(()=>({}));console.error("Document action error:",e),t=e.error||t}alert(t);return}let a=await r.blob();if(0===a.size)return void alert("Document is empty or not found");let l=URL.createObjectURL(a);if("preview"===s)window.open(l,"_blank","noopener,noreferrer");else{let e=document.createElement("a");e.href=l,e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}setTimeout(()=>URL.revokeObjectURL(l),1e4)}catch(e){console.error("Document action error:",e),alert("Failed to access document. Please check your connection and try again.")}finally{K(null)}};return P.length,P.filter(e=>"signed"===e.status||"completed"===e.status).length,P.filter(e=>"pending"===e.status||"sent"===e.status).length,(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(k.default,{href:"/versotech_main/my-mandates",children:(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(m.ArrowLeft,{className:"h-5 w-5"})})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[e.company_logo_url?(0,t.jsx)("img",{src:e.company_logo_url,alt:e.company_name||e.name,className:"h-12 w-12 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"h-12 w-12 rounded-lg bg-white/10 flex items-center justify-center",children:(0,t.jsx)(i.Building2,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(l.Badge,{className:D[e.status]||D.draft,children:e.status?.replace("_"," ")}),(0,t.jsx)("span",{className:"text-muted-foreground",children:S[e.deal_type]||e.deal_type})]})]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(l.Badge,{variant:"outline",className:"border-amber-500/30 text-amber-400 bg-amber-500/10",children:[(0,t.jsx)(i.Building2,{className:"h-3 w-3 mr-1"}),"Your Mandate"]})})]}),(0,t.jsxs)(d.Tabs,{value:L,onValueChange:O,className:"space-y-6",children:[(0,t.jsxs)(d.TabsList,{className:"bg-white/5 border border-white/10",children:[(0,t.jsxs)(d.TabsTrigger,{value:"overview",className:"data-[state=active]:bg-white/10",children:[(0,t.jsx)(j.TrendingUp,{className:"h-4 w-4 mr-2"}),"Overview"]}),(0,t.jsxs)(d.TabsTrigger,{value:"investors",className:"data-[state=active]:bg-white/10",children:[(0,t.jsx)(c.Users,{className:"h-4 w-4 mr-2"}),"Investors (",Q.length,")"]}),z&&(0,t.jsxs)(d.TabsTrigger,{value:"termsheets",className:"data-[state=active]:bg-white/10",children:[(0,t.jsx)(C.ScrollText,{className:"h-4 w-4 mr-2"}),"Term Sheets (",F.length,")"]}),("introducer"===U||"partner"===U)&&(0,t.jsxs)(d.TabsTrigger,{value:"feemodel",className:"data-[state=active]:bg-white/10",children:[(0,t.jsx)(T.HandCoins,{className:"h-4 w-4 mr-2"}),"Fee Model"]}),(0,t.jsxs)(d.TabsTrigger,{value:"dataroom",className:"data-[state=active]:bg-white/10",children:[(0,t.jsx)(b.FolderOpen,{className:"h-4 w-4 mr-2"}),"Data Room (",R.length,")"]}),(0,t.jsxs)(d.TabsTrigger,{value:"signatures",className:"data-[state=active]:bg-white/10",children:[(0,t.jsx)(g.FileSignature,{className:"h-4 w-4 mr-2"}),"Signatures (",P.length+I.length,")"]})]}),(0,t.jsxs)(d.TabsContent,{value:"overview",className:"space-y-6",children:[Q.length>0&&(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/[0.02] overflow-hidden",children:[(0,t.jsx)(r.CardHeader,{className:"pb-2 pt-4 px-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground tracking-wide uppercase",children:"Investor Pipeline"}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[W.total," total"]})]})}),(0,t.jsxs)(r.CardContent,{className:"px-6 pb-5",children:[(0,t.jsxs)("div",{className:"relative pt-2",children:[(0,t.jsx)("div",{className:"absolute top-[26px] left-5 right-5 h-[2px] bg-gradient-to-r from-emerald-500/20 via-emerald-500/10 to-transparent"}),(0,t.jsx)("div",{className:"relative flex items-start justify-between",children:X.map((e,s)=>{let r=e.count>0,a="Funded"===e.label,l=(e=>{if(0===e)return W.total>0?Math.round(X[0].count/W.total*100):0;let t=X[e-1].count;return 0===t?0:Math.round(X[e].count/t*100)})(s);return(0,t.jsxs)("div",{className:"flex flex-col items-center group",style:{flex:"1 1 0"},children:[(0,t.jsx)("div",{className:`
                              relative z-10 w-11 h-11 rounded-full flex items-center justify-center
                              text-sm font-semibold transition-all duration-300 cursor-default
                              ${r?a?"bg-emerald-500/25 text-emerald-300 ring-2 ring-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.15)]":"bg-emerald-500/15 text-emerald-400 ring-1 ring-emerald-500/25":"bg-white/5 text-muted-foreground/60"}
                              group-hover:scale-110 group-hover:ring-emerald-400/40
                            `,children:e.count}),(0,t.jsx)("span",{className:`
                            text-[10px] mt-2 text-center leading-tight transition-colors
                            ${r?"text-foreground/70":"text-muted-foreground/50"}
                            group-hover:text-foreground
                          `,children:e.label}),s>0&&(0,t.jsxs)("span",{className:`
                              text-[9px] mt-0.5 transition-opacity
                              ${e.count>0?"text-emerald-400/60":"text-muted-foreground/30"}
                            `,children:[l,"%"]})]},e.label)})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-8 mt-6 pt-4 border-t border-white/5",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-foreground",children:W.funded}),(0,t.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Funded"})]}),(0,t.jsx)("div",{className:"w-px h-8 bg-white/10"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-lg font-semibold text-foreground",children:[W.total>0?Math.round(W.funded/W.total*100):0,"%"]}),(0,t.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Conversion"})]}),(0,t.jsx)("div",{className:"w-px h-8 bg-white/10"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-foreground",children:W.signed}),(0,t.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Signed"})]})]})]})]}),(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{className:"text-foreground",children:"Deal Information"}),(0,t.jsx)(r.CardDescription,{children:"Core details and structure"})]}),(0,t.jsx)(r.CardContent,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Deal Name"}),(0,t.jsx)("p",{className:"text-lg text-foreground mt-1",children:e.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),(0,t.jsx)("p",{className:"text-lg text-foreground mt-1",children:e.company_name||"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-1",children:e.vehicles?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-foreground",children:e.vehicles.name}),(0,t.jsx)(l.Badge,{variant:"outline",className:"border-white/20",children:e.vehicles.type})]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"No vehicle assigned"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Sector / Stage"}),(0,t.jsxs)("p",{className:"text-foreground mt-1",children:[e.sector||"—"," ",e.stage&&`• ${e.stage}`]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),(0,t.jsx)("p",{className:"text-foreground mt-1",children:e.location||"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Currency"}),(0,t.jsx)("p",{className:"text-foreground mt-1",children:e.currency})]})]})})]}),(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(f.CalendarDays,{className:"h-5 w-5"}),"Timeline"]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Open Date"}),(0,t.jsx)("p",{className:"text-foreground mt-1",children:e.open_at?(0,H.formatDate)(e.open_at):"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Close Date"}),(0,t.jsx)("p",{className:"text-foreground mt-1",children:e.close_at?(0,H.formatDate)(e.close_at):"—"})]})]})})]}),(e.description||e.investment_thesis)&&(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(j.TrendingUp,{className:"h-5 w-5"}),"Deal Overview"]})}),(0,t.jsxs)(r.CardContent,{className:"space-y-4",children:[e.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),(0,t.jsx)("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:e.description})]}),e.investment_thesis&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Investment Thesis"}),(0,t.jsx)("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:e.investment_thesis})]})]})]})]}),z&&(0,t.jsx)(d.TabsContent,{value:"termsheets",className:"space-y-6",children:(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(C.ScrollText,{className:"h-5 w-5"}),"Term Sheets"]}),(0,t.jsx)(r.CardDescription,{children:"Fee structures and deal terms for this mandate"})]}),(0,t.jsx)(r.CardContent,{children:0===F.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No term sheets created yet"}):(0,t.jsx)("div",{className:"space-y-4",children:F.map(s=>(0,t.jsx)(r.Card,{className:`border ${"published"===s.status?"border-emerald-500/30 bg-emerald-500/5":"border-white/10 bg-white/[0.02]"}`,children:(0,t.jsxs)(r.CardContent,{className:"py-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsxs)("span",{className:"font-medium text-foreground",children:["Version ",s.version||1]}),(0,t.jsx)(l.Badge,{className:"published"===s.status?"bg-emerald-500/20 text-emerald-200 border-emerald-400/30":"draft"===s.status?"bg-amber-500/20 text-amber-200 border-amber-400/30":"bg-white/10 text-foreground border-white/20",children:s.status})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:s.term_sheet_date?(0,H.formatDate)(s.term_sheet_date):"No date set"})]}),s.term_sheet_attachment_key&&(0,t.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:()=>es(s.term_sheet_attachment_key,`term-sheet-v${s.version||1}.pdf`,"preview"),className:"border-white/20",children:[(0,t.jsx)(_.ExternalLink,{className:"h-4 w-4 mr-1"}),"View PDF"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-muted-foreground",children:"Transaction Type"}),(0,t.jsx)("p",{className:"text-foreground font-medium",children:s.transaction_type||"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-muted-foreground",children:"Min Ticket"}),(0,t.jsx)("p",{className:"text-foreground font-medium",children:s.minimum_ticket?`${e.currency} ${Number(s.minimum_ticket).toLocaleString()}`:"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-muted-foreground",children:"Max Ticket"}),(0,t.jsx)("p",{className:"text-foreground font-medium",children:s.maximum_ticket?`${e.currency} ${Number(s.maximum_ticket).toLocaleString()}`:"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-muted-foreground",children:"Interest Deadline"}),(0,t.jsx)("p",{className:"text-foreground font-medium",children:s.interest_confirmation_deadline?(0,H.formatDate)(s.interest_confirmation_deadline):"—"})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Fee Structure"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-foreground",children:null!=s.subscription_fee_percent?`${s.subscription_fee_percent}%`:"—"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Subscription Fee"})]}),(0,t.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-foreground",children:null!=s.management_fee_percent?`${s.management_fee_percent}%`:"—"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Management Fee"})]}),(0,t.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-foreground",children:null!=s.carried_interest_percent?`${s.carried_interest_percent}%`:"—"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Carried Interest"})]})]})]}),s.opportunity_summary&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Opportunity Summary"}),(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:s.opportunity_summary})]})]})},s.id))})})]})}),("introducer"===U||"partner"===U)&&(0,t.jsx)(d.TabsContent,{value:"feemodel",className:"space-y-6",children:(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(T.HandCoins,{className:"h-5 w-5"}),"Your Fee Model"]}),(0,t.jsx)(r.CardDescription,{children:"Commission agreement for this investment opportunity"})]}),(0,t.jsx)(r.CardContent,{children:M?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-foreground",children:M.name}),M.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:M.description})]}),(0,t.jsxs)(l.Badge,{className:"accepted"===M.status?"bg-emerald-500/20 text-emerald-200 border-emerald-400/30":"sent"===M.status||"pending_signature"===M.status?"bg-amber-500/20 text-amber-200 border-amber-400/30":"bg-white/10 text-foreground border-white/20",children:["accepted"===M.status&&(0,t.jsx)(h.CheckCircle,{className:"h-3 w-3 mr-1"}),"pending_signature"===M.status&&(0,t.jsx)(x.Clock,{className:"h-3 w-3 mr-1"}),M.status||"Draft"]})]}),M.fee_components&&M.fee_components.length>0?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground font-medium",children:"Fee Structure"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:M.fee_components.map(e=>(0,t.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:e.kind?.replace("_"," ")}),(0,t.jsx)("p",{className:"text-lg font-semibold text-foreground",children:e.rate_bps?`${(e.rate_bps/100).toFixed(2)}%`:e.flat_amount?`$${Number(e.flat_amount).toLocaleString()}`:"—"}),e.payment_schedule&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1 capitalize",children:e.payment_schedule.replace("_"," ")})]},e.id))})]}):(0,t.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No fee components defined"}),"accepted"===M.status&&M.accepted_at&&(0,t.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400",children:[(0,t.jsx)(h.CheckCircle,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Fee Model Accepted"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Accepted on ",(0,H.formatDate)(M.accepted_at)]})]}),("sent"===M.status||"pending_signature"===M.status)&&(0,t.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-amber-400",children:[(0,t.jsx)(x.Clock,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"Pending Your Acceptance"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Please review and accept this fee model to proceed with investor dispatch."})]}),(0,t.jsx)(a.Button,{className:"bg-amber-500 hover:bg-amber-600 text-white",children:"Accept Fee Model"})]})})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-muted-foreground mb-2",children:"No fee model assigned yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"A fee model will be created and assigned to you by the deal manager."})]})})]})}),(0,t.jsxs)(d.TabsContent,{value:"investors",className:"space-y-6",children:[(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{className:"text-foreground",children:"Investor Journey"}),(0,t.jsx)(r.CardDescription,{children:"Track investor progress through the subscription process"})]}),(0,t.jsx)(r.CardContent,{children:0===Q.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No investors invited yet"}):(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Investor"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Type"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-center",children:"Dispatched"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-center",children:"Viewed"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-center",children:"Interested"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-center",children:"NDA"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-center",children:"Data Room"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-center",children:"Signed"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-center",children:"Funded"})]})}),(0,t.jsx)(n.TableBody,{children:Q.map(e=>(0,t.jsxs)(n.TableRow,{className:"border-white/10",children:[(0,t.jsx)(n.TableCell,{className:"font-medium text-foreground",children:e.investors?.legal_name||"Unknown Investor"}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"outline",className:"border-white/20",children:e.investors?.type||"N/A"})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:e.dispatched_at?(0,t.jsx)(h.CheckCircle,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,t.jsx)(x.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:e.viewed_at?(0,t.jsx)(u.Eye,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,t.jsx)(x.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:e.interest_confirmed_at?(0,t.jsx)(h.CheckCircle,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,t.jsx)(x.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:e.nda_signed_at?(0,t.jsx)(g.FileSignature,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,t.jsx)(x.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:e.data_room_granted_at?(0,t.jsx)(b.FolderOpen,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,t.jsx)(x.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:e.subscription?.signed_at?(0,t.jsx)(h.CheckCircle,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,t.jsx)(x.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,t.jsx)(n.TableCell,{className:"text-center",children:e.subscription?.funded_at?(0,t.jsx)(h.CheckCircle,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,t.jsx)(x.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})})]},`${e.deal_id}-${e.investor_id}`))})]})})]}),(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(T.HandCoins,{className:"h-5 w-5 text-blue-400"}),"Interest Submissions (",A.length,")"]}),(0,t.jsx)(r.CardDescription,{children:"Investors who have expressed interest in this deal"})]}),(0,t.jsx)(r.CardContent,{children:0===A.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No interest submissions yet"}):(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Investor"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Submitted"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Status"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Notes"})]})}),(0,t.jsx)(n.TableBody,{children:A.map(e=>(0,t.jsxs)(n.TableRow,{className:"border-white/10",children:[(0,t.jsx)(n.TableCell,{className:"font-medium text-foreground",children:e.investors?.legal_name||"Unknown Investor"}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground",children:e.submitted_at?(0,H.formatDate)(e.submitted_at):"—"}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{className:"approved"===e.status?"bg-emerald-500/20 text-emerald-200 border-emerald-400/30":"pending"===e.status?"bg-amber-500/20 text-amber-200 border-amber-400/30":"rejected"===e.status?"bg-red-500/20 text-red-200 border-red-400/30":"bg-white/10 text-foreground border-white/20",children:e.status})}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground max-w-[200px] truncate",children:e.notes||"—"})]},e.id))})]})})]})]}),(0,t.jsx)(d.TabsContent,{value:"dataroom",className:"space-y-6",children:(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{className:"text-foreground",children:"Data Room Documents"}),(0,t.jsx)(r.CardDescription,{children:"Documents available for investor due diligence"})]}),(0,t.jsx)(r.CardContent,{children:0===R.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No documents uploaded yet"}):(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Document"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Folder"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Uploaded"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"By"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-right",children:"Actions"})]})}),(0,t.jsx)(n.TableBody,{children:R.map(e=>{let s=e.file_key?.split("/").pop()||"Unknown";return(0,t.jsxs)(n.TableRow,{className:"border-white/10",children:[(0,t.jsx)(n.TableCell,{className:"font-medium text-foreground",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.FileText,{className:"h-4 w-4 text-muted-foreground"}),s]})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"outline",className:"border-white/20",children:e.folder||"General"})}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground",children:(0,H.formatDate)(e.created_at)}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground",children:e.created_by_profile?.display_name||"System"}),(0,t.jsx)(n.TableCell,{className:"text-right",children:e.file_key?(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",onClick:()=>es(e.file_key,s,"preview"),disabled:q===e.file_key,className:"text-muted-foreground hover:text-foreground",children:[q===e.file_key?(0,t.jsx)("span",{className:"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"}):(0,t.jsx)(u.Eye,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"ml-1 hidden sm:inline",children:"Preview"})]}),(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",onClick:()=>es(e.file_key,s,"download"),disabled:q===e.file_key,className:"text-muted-foreground hover:text-foreground",children:[(0,t.jsx)(p.Download,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"ml-1 hidden sm:inline",children:"Download"})]})]}):(0,t.jsx)("span",{className:"text-muted-foreground/50 text-sm",children:"No file"})})]},e.id)})})]})})]})}),(0,t.jsxs)(d.TabsContent,{value:"signatures",className:"space-y-6",children:[(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(N.Filter,{className:"h-5 w-5"}),"Filter by Date"]}),(V||E)&&(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>{Y(""),G("")},className:"text-muted-foreground hover:text-foreground",children:"Clear Filter"})]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"From:"}),(0,t.jsx)(y.Input,{type:"date",value:V,onChange:e=>Y(e.target.value),className:"w-40 bg-white/5 border-white/10"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"To:"}),(0,t.jsx)(y.Input,{type:"date",value:E,onChange:e=>G(e.target.value),className:"w-40 bg-white/5 border-white/10"})]}),(0,t.jsx)("div",{className:"flex items-center gap-4 ml-auto text-sm",children:(0,t.jsxs)("span",{className:"text-muted-foreground",children:["Showing ",Z.length," of ",P.length," signatures"]})})]})})]}),(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(x.Clock,{className:"h-5 w-5 text-amber-400"}),"Pending Signatures (",et.length,")"]}),(0,t.jsx)(r.CardDescription,{children:"Signature requests awaiting action"})]}),(0,t.jsx)(r.CardContent,{children:0===et.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No pending signatures"}):(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Investor"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Signer"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Role"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Document"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Sent"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Status"})]})}),(0,t.jsx)(n.TableBody,{children:et.map(e=>(0,t.jsxs)(n.TableRow,{className:"border-white/10",children:[(0,t.jsx)(n.TableCell,{className:"font-medium text-foreground",children:e.investors?.legal_name||"—"}),(0,t.jsx)(n.TableCell,{className:"text-foreground",children:e.signer_name||e.signer_email}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"outline",className:"border-white/20 capitalize",children:e.signer_role?.replace("_"," ")||"Signer"})}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground",children:e.document_type?.replace("_"," ")||"Document"}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground",children:e.email_sent_at?(0,H.formatDate)(e.email_sent_at):"—"}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{className:B[e.status]||"bg-white/10",children:e.status})})]},e.id))})]})})]}),(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(v.History,{className:"h-5 w-5 text-emerald-400"}),"Signature History (",ee.length,")"]}),(0,t.jsx)(r.CardDescription,{children:"Completed signatures for this mandate"})]}),(0,t.jsx)(r.CardContent,{children:0===ee.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:["No completed signatures",V||E?" in selected date range":""]}):(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Investor"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Signer"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Role"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Document"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Signed At"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Status"})]})}),(0,t.jsx)(n.TableBody,{children:ee.map(e=>(0,t.jsxs)(n.TableRow,{className:"border-white/10",children:[(0,t.jsx)(n.TableCell,{className:"font-medium text-foreground",children:e.investors?.legal_name||"—"}),(0,t.jsx)(n.TableCell,{className:"text-foreground",children:e.signer_name||e.signer_email}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"outline",className:"border-white/20 capitalize",children:e.signer_role?.replace("_"," ")||"Signer"})}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground",children:e.document_type?.replace("_"," ")||"Document"}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground",children:e.signature_timestamp?(0,H.formatDate)(e.signature_timestamp):"—"}),(0,t.jsx)(n.TableCell,{children:(0,t.jsxs)(l.Badge,{className:B[e.status]||"bg-emerald-500/20 text-emerald-200",children:[(0,t.jsx)(h.CheckCircle,{className:"h-3 w-3 mr-1"}),e.status]})})]},e.id))})]})})]}),I.length>0&&(0,t.jsx)(r.Card,{className:"border border-amber-500/30 bg-amber-500/10",children:(0,t.jsx)(r.CardContent,{className:"py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-amber-500/20",children:(0,t.jsx)(g.FileSignature,{className:"h-5 w-5 text-amber-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium text-foreground",children:["You have ",I.length," signature",1!==I.length?"s":""," pending"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click to sign subscription packs for this mandate"})]})]}),(0,t.jsx)(k.default,{href:"/versotech_main/versosign",children:(0,t.jsxs)(a.Button,{className:"bg-amber-500 hover:bg-amber-600 text-white",children:[(0,t.jsx)(g.FileSignature,{className:"h-4 w-4 mr-2"}),"Sign Packs"]})})]})})}),I.length>0&&(0,t.jsxs)(r.Card,{className:"border border-white/10 bg-white/5",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,t.jsx)(w.AlertCircle,{className:"h-5 w-5 text-amber-400"}),"Your Signature Tasks (",I.length,")"]}),(0,t.jsx)(r.CardDescription,{children:"Tasks assigned to you for this mandate"})]}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Task"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Type"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Priority"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Due Date"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground",children:"Status"}),(0,t.jsx)(n.TableHead,{className:"text-muted-foreground text-right",children:"Action"})]})}),(0,t.jsx)(n.TableBody,{children:I.map(e=>(0,t.jsxs)(n.TableRow,{className:"border-white/10",children:[(0,t.jsx)(n.TableCell,{className:"font-medium text-foreground",children:e.title||e.kind?.replace("_"," ")}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"outline",className:"border-white/20",children:e.kind?.replace("_"," ")})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{className:"high"===e.priority?"bg-red-500/20 text-red-200 border-red-400/30":"medium"===e.priority?"bg-amber-500/20 text-amber-200 border-amber-400/30":"bg-white/10 text-foreground border-white/20",children:e.priority})}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground",children:e.due_at?(0,H.formatDate)(e.due_at):"—"}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Badge,{className:"pending"===e.status?"bg-amber-500/20 text-amber-200 border-amber-400/30":"bg-blue-500/20 text-blue-200 border-blue-400/30",children:e.status})}),(0,t.jsx)(n.TableCell,{className:"text-right",children:(0,t.jsx)(k.default,{href:"/versotech_main/versosign",children:(0,t.jsxs)(a.Button,{size:"sm",variant:"outline",className:"border-amber-500/30 text-amber-400 hover:bg-amber-500/10",children:[(0,t.jsx)(g.FileSignature,{className:"h-3 w-3 mr-1"}),"Sign"]})})})]},e.id))})]})})]})]})]})]})}e.s(["MandateDetailClient",()=>F])}]);