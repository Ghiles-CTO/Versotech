(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,196767,e=>{"use strict";let t=(0,e.i(410587).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],196767)},501495,e=>{"use strict";e.s(["formatBps",0,e=>null==e?"—":`${e} bps`,"formatCurrency",0,(e,t="USD")=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:0}).format(e):"$0","formatDate",0,e=>{if(!e)return"—";let t="string"==typeof e?new Date(e):e;return Number.isNaN(t?.getTime?.())?"—":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}])},382021,e=>{"use strict";let t=(0,e.i(410587).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],382021)},80289,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(414846),i=e.i(282141);let s=(0,r.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef(({className:e,variant:a,...r},l)=>(0,t.jsx)("div",{ref:l,role:"alert",className:(0,i.cn)(s({variant:a}),e),...r}));l.displayName="Alert";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h5",{ref:r,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...a}));n.displayName="AlertTitle";let c=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...a}));c.displayName="AlertDescription",e.s(["Alert",()=>l,"AlertDescription",()=>c,"AlertTitle",()=>n])},932735,e=>{"use strict";let t=(0,e.i(410587).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],932735)},849110,e=>{"use strict";let t=(0,e.i(410587).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],849110)},619324,e=>{"use strict";let t=(0,e.i(410587).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],619324)},312692,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(886978),i=e.i(47264),s=e.i(679472),l=e.i(68977),n=e.i(657180),c=e.i(460138),o=e.i(873358),d=e.i(362208),u="Checkbox",[m,h]=(0,i.createContextScope)(u),[p,x]=m(u);function f(e){let{__scopeCheckbox:r,checked:i,children:s,defaultChecked:n,disabled:c,form:o,name:d,onCheckedChange:m,required:h,value:x="on",internal_do_not_use_render:f}=e,[v,g]=(0,l.useControllableState)({prop:i,defaultProp:n??!1,onChange:m,caller:u}),[b,y]=a.useState(null),[j,N]=a.useState(null),w=a.useRef(!1),C=!b||!!o||!!b.closest("form"),S={checked:v,disabled:c,setChecked:g,control:b,setControl:y,name:d,form:o,value:x,hasConsumerStoppedPropagationRef:w,required:h,defaultChecked:!k(n)&&n,isFormControl:C,bubbleInput:j,setBubbleInput:N};return(0,t.jsx)(p,{scope:r,...S,children:"function"==typeof f?f(S):s})}var v="CheckboxTrigger",g=a.forwardRef(({__scopeCheckbox:e,onKeyDown:i,onClick:l,...n},c)=>{let{control:o,value:u,disabled:m,checked:h,required:p,setControl:f,setChecked:g,hasConsumerStoppedPropagationRef:b,isFormControl:y,bubbleInput:j}=x(v,e),N=(0,r.useComposedRefs)(c,f),w=a.useRef(h);return a.useEffect(()=>{let e=o?.form;if(e){let t=()=>g(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,g]),(0,t.jsx)(d.Primitive.button,{type:"button",role:"checkbox","aria-checked":k(h)?"mixed":h,"aria-required":p,"data-state":C(h),"data-disabled":m?"":void 0,disabled:m,value:u,...n,ref:N,onKeyDown:(0,s.composeEventHandlers)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,s.composeEventHandlers)(l,e=>{g(e=>!!k(e)||!e),j&&y&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});g.displayName=v;var b=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:i,checked:s,defaultChecked:l,required:n,disabled:c,value:o,onCheckedChange:d,form:u,...m}=e;return(0,t.jsx)(f,{__scopeCheckbox:r,checked:s,defaultChecked:l,disabled:c,required:n,onCheckedChange:d,name:i,form:u,value:o,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{...m,ref:a,__scopeCheckbox:r}),e&&(0,t.jsx)(w,{__scopeCheckbox:r})]})})});b.displayName=u;var y="CheckboxIndicator",j=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:i,...s}=e,l=x(y,r);return(0,t.jsx)(o.Presence,{present:i||k(l.checked)||!0===l.checked,children:(0,t.jsx)(d.Primitive.span,{"data-state":C(l.checked),"data-disabled":l.disabled?"":void 0,...s,ref:a,style:{pointerEvents:"none",...e.style}})})});j.displayName=y;var N="CheckboxBubbleInput",w=a.forwardRef(({__scopeCheckbox:e,...i},s)=>{let{control:l,hasConsumerStoppedPropagationRef:o,checked:u,defaultChecked:m,required:h,disabled:p,name:f,value:v,form:g,bubbleInput:b,setBubbleInput:y}=x(N,e),j=(0,r.useComposedRefs)(s,y),w=(0,n.usePrevious)(u),C=(0,c.useSize)(l);a.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(w!==u&&e){let a=new Event("click",{bubbles:t});b.indeterminate=k(u),e.call(b,!k(u)&&u),b.dispatchEvent(a)}},[b,w,u,o]);let S=a.useRef(!k(u)&&u);return(0,t.jsx)(d.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??S.current,required:h,disabled:p,name:f,value:v,form:g,...i,tabIndex:-1,ref:j,style:{...i.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function k(e){return"indeterminate"===e}function C(e){return k(e)?"indeterminate":e?"checked":"unchecked"}w.displayName=N;var S=e.i(310556),_=e.i(282141);let D=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(b,{ref:r,className:(0,_.cn)("peer h-5 w-5 md:h-4 md:w-4 shrink-0 rounded border border-white/20 bg-white/5 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400/20 focus-visible:border-blue-400/50 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(j,{className:(0,_.cn)("flex items-center justify-center text-white"),children:(0,t.jsx)(S.Check,{className:"h-4 w-4 md:h-3.5 md:w-3.5"})})}));D.displayName=b.displayName,e.s(["Checkbox",()=>D],312692)},554369,e=>{"use strict";let t=(0,e.i(410587).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],554369)},551544,e=>{"use strict";let t=(0,e.i(410587).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],551544)},773510,e=>{"use strict";let t=(0,e.i(410587).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],773510)},816654,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(282141);let i=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));i.displayName="Textarea",e.s(["Textarea",()=>i])},90613,e=>{"use strict";var t=e.i(722679),a=e.i(282141);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}function c({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>l,"CardFooter",()=>c,"CardHeader",()=>i,"CardTitle",()=>s])},15098,e=>{"use strict";let t=(0,e.i(410587).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],15098)},45778,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(679472),i=e.i(886978),s=e.i(47264),l=e.i(68977),n=e.i(657180),c=e.i(460138),o=e.i(362208),d="Switch",[u,m]=(0,s.createContextScope)(d),[h,p]=u(d),x=a.forwardRef((e,s)=>{let{__scopeSwitch:n,name:c,checked:u,defaultChecked:m,required:p,disabled:x,value:f="on",onCheckedChange:v,form:y,...j}=e,[N,w]=a.useState(null),k=(0,i.useComposedRefs)(s,e=>w(e)),C=a.useRef(!1),S=!N||y||!!N.closest("form"),[_,D]=(0,l.useControllableState)({prop:u,defaultProp:m??!1,onChange:v,caller:d});return(0,t.jsxs)(h,{scope:n,checked:_,disabled:x,children:[(0,t.jsx)(o.Primitive.button,{type:"button",role:"switch","aria-checked":_,"aria-required":p,"data-state":b(_),"data-disabled":x?"":void 0,disabled:x,value:f,...j,ref:k,onClick:(0,r.composeEventHandlers)(e.onClick,e=>{D(e=>!e),S&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),S&&(0,t.jsx)(g,{control:N,bubbles:!C.current,name:c,value:f,checked:_,required:p,disabled:x,form:y,style:{transform:"translateX(-100%)"}})]})});x.displayName=d;var f="SwitchThumb",v=a.forwardRef((e,a)=>{let{__scopeSwitch:r,...i}=e,s=p(f,r);return(0,t.jsx)(o.Primitive.span,{"data-state":b(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:a})});v.displayName=f;var g=a.forwardRef(({__scopeSwitch:e,control:r,checked:s,bubbles:l=!0,...o},d)=>{let u=a.useRef(null),m=(0,i.useComposedRefs)(u,d),h=(0,n.usePrevious)(s),p=(0,c.useSize)(r);return a.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==s&&t){let a=new Event("click",{bubbles:l});t.call(e,s),e.dispatchEvent(a)}},[h,s,l]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...o,tabIndex:-1,ref:m,style:{...o.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function b(e){return e?"checked":"unchecked"}g.displayName="SwitchBubbleInput";var y=e.i(282141);let j=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(x,{className:(0,y.cn)("peer inline-flex h-7 md:h-6 w-12 md:w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:r,children:(0,t.jsx)(v,{className:(0,y.cn)("pointer-events-none block h-6 w-6 md:h-5 md:w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));j.displayName=x.displayName,e.s(["Switch",()=>j],45778)},429482,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(795988),i=e.i(476817),s=e.i(341695),l=e.i(352776),n=e.i(316264),c=e.i(191569),o=e.i(514133),d=e.i(538892),u=e.i(45778),m=e.i(263229),h=e.i(773510),p=e.i(704477),x=e.i(691974),f=e.i(994500);let v=s.z.object({email:s.z.string().email("Please enter a valid email address"),display_name:s.z.string().min(2,"Display name must be at least 2 characters"),title:s.z.string().optional(),role:s.z.string(),is_primary:s.z.boolean(),is_signatory:s.z.boolean(),can_sign:s.z.boolean()}),g={investor:"Investor",arranger:"Arranger",lawyer:"Law Firm",introducer:"Introducer",partner:"Partner",commercial_partner:"Commercial Partner"},b={investor:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],arranger:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],lawyer:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],partner:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],introducer:[{value:"admin",label:"Admin"},{value:"contact",label:"Contact"},{value:"payment_contact",label:"Payment Contact"},{value:"legal_contact",label:"Legal Contact"}],commercial_partner:[{value:"admin",label:"Admin"},{value:"contact",label:"Contact"},{value:"billing_contact",label:"Billing Contact"},{value:"technical_contact",label:"Technical Contact"}]},y={investor:"member",arranger:"member",lawyer:"member",partner:"member",introducer:"contact",commercial_partner:"contact"};function j({entityType:e,entityId:s,entityName:j,open:N,onOpenChange:w,onSuccess:k}){let[C,S]=(0,a.useState)(!1),_=b[e],D=y[e],{register:I,handleSubmit:T,reset:E,watch:F,setValue:M,formState:{errors:P}}=(0,r.useForm)({resolver:(0,i.zodResolver)(v),defaultValues:{email:"",display_name:"",title:"",role:D,is_primary:!1,is_signatory:!1,can_sign:!1}}),L=F("is_primary");F("is_signatory");let R=F("can_sign"),A=F("role"),z=async t=>{S(!0);try{let a=await fetch("/api/admin/entity-invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_type:e,entity_id:s,...t})}),r=await a.json();if(!a.ok)throw Error(r.error||"Failed to invite user");f.toast.success(r.message||`User invited to ${j}`),E(),w(!1),k?.()}catch(e){console.error("Invite error:",e),f.toast.error(e instanceof Error?e.message:"Failed to invite user")}finally{S(!1)}},H=()=>{E(),w(!1)};return(0,t.jsx)(l.Dialog,{open:N,onOpenChange:H,children:(0,t.jsxs)(l.DialogContent,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsxs)(l.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Mail,{className:"h-5 w-5"}),"Invite User to ",g[e]]}),(0,t.jsxs)(l.DialogDescription,{children:["Send an invitation email to join ",(0,t.jsx)("span",{className:"font-medium",children:j}),". They will receive instructions to set up their account."]})]}),(0,t.jsxs)("form",{onSubmit:T(z),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"email",children:"Email Address *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Mail,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(c.Input,{id:"email",type:"email",placeholder:"user@example.com",className:"pl-10",...I("email")})]}),P.email&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:P.email.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"display_name",children:"Display Name *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.User,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(c.Input,{id:"display_name",placeholder:"John Smith",className:"pl-10",...I("display_name")})]}),P.display_name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:P.display_name.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"title",children:"Title (Optional)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.Briefcase,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(c.Input,{id:"title",placeholder:"Managing Director",className:"pl-10",...I("title")})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(d.Select,{value:A,onValueChange:e=>M("role",e),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select role"})}),(0,t.jsx)(d.SelectContent,{children:_.map(e=>(0,t.jsx)(d.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(o.Label,{htmlFor:"is_primary",className:"text-sm font-medium",children:"Primary Contact"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set as the main point of contact for this entity"})]}),(0,t.jsx)(u.Switch,{id:"is_primary",checked:L,onCheckedChange:e=>M("is_primary",e)})]}),"lawyer"===e&&(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(o.Label,{htmlFor:"can_sign",className:"text-sm font-medium",children:"Can Sign Documents"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Has authority to sign on behalf of the law firm"})]}),(0,t.jsx)(u.Switch,{id:"can_sign",checked:R,onCheckedChange:e=>M("can_sign",e)})]}),(0,t.jsxs)(l.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:H,children:"Cancel"}),(0,t.jsx)(n.Button,{type:"submit",disabled:C,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Invite..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Mail,{className:"mr-2 h-4 w-4"}),"Send Invitation"]})})]})]})]})})}e.s(["InviteUserDialog",()=>j])},71637,e=>{"use strict";let t=(0,e.i(410587).default)("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);e.s(["ScrollText",()=>t],71637)},489733,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(352776),i=e.i(316264),s=e.i(191569),l=e.i(514133),n=e.i(816654),c=e.i(538892),o=e.i(994500),d=e.i(603274);function u({open:e,onOpenChange:u,introducer:m}){let[h,p]=(0,a.useState)(""),[x,f]=(0,a.useState)(""),[v,g]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[w,k]=(0,a.useState)("net_30"),[C,S]=(0,a.useState)("active"),[_,D]=(0,a.useState)(""),[I,T]=(0,a.useTransition)(),E=(0,d.useRouter)();return((0,a.useEffect)(()=>{m&&(p(m.legalName),f(m.contactName||""),g(m.email||""),y(m.defaultCommissionBps||""),N(m.commissionCapAmount||""),k(m.paymentTerms||"net_30"),S(m.status),D(m.notes||""))},[m]),m)?(0,t.jsx)(r.Dialog,{open:e,onOpenChange:u,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Edit Introducer"}),(0,t.jsx)(r.DialogDescription,{children:"Update introducer contact information and commercial terms."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"legalName",children:"Legal Name"}),(0,t.jsx)(s.Input,{id:"legalName",value:h,onChange:e=>p(e.target.value),placeholder:"e.g. Meridian Capital Partners",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"contactName",children:"Primary Contact"}),(0,t.jsx)(s.Input,{id:"contactName",value:x,onChange:e=>f(e.target.value),placeholder:"e.g. Jane Smith"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"contactEmail",children:"Contact Email"}),(0,t.jsx)(s.Input,{id:"contactEmail",type:"email",value:v,onChange:e=>g(e.target.value),placeholder:"jane.smith@example.com"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"commissionBps",children:"Default Commission (bps)"}),(0,t.jsx)(s.Input,{id:"commissionBps",type:"number",min:0,max:300,value:b,onChange:e=>y(""===e.target.value?"":Number(e.target.value)),placeholder:"150"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"commissionCap",children:"Commission Cap (optional)"}),(0,t.jsx)(s.Input,{id:"commissionCap",type:"number",min:0,value:j,onChange:e=>N(""===e.target.value?"":Number(e.target.value)),placeholder:"50000"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{children:"Payment Terms"}),(0,t.jsxs)(c.Select,{value:w,onValueChange:k,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Select terms"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"net_15",children:"Net 15"}),(0,t.jsx)(c.SelectItem,{value:"net_30",children:"Net 30"}),(0,t.jsx)(c.SelectItem,{value:"net_45",children:"Net 45"}),(0,t.jsx)(c.SelectItem,{value:"net_60",children:"Net 60"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{children:"Status"}),(0,t.jsxs)(c.Select,{value:C,onValueChange:S,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Select status"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(c.SelectItem,{value:"inactive",children:"Inactive"}),(0,t.jsx)(c.SelectItem,{value:"suspended",children:"Suspended"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"notes",children:"Notes"}),(0,t.jsx)(n.Textarea,{id:"notes",value:_,onChange:e=>D(e.target.value),placeholder:"Commission arrangements, regional focus, etc.",rows:3})]})]}),(0,t.jsxs)(r.DialogFooter,{className:"flex justify-between",children:[(0,t.jsx)(i.Button,{variant:"destructive",onClick:()=>{!m||confirm("Are you sure you want to delete this introducer? This action cannot be undone.")&&T(async()=>{try{let e=await fetch(`/api/staff/introducers/${m.id}`,{method:"DELETE"});if(!e.ok){let t,a=await e.text();try{t=JSON.parse(a)}catch(e){o.toast.error(`Failed to delete introducer: ${a||"Unknown error"}`);return}o.toast.error(t?.error??"Failed to delete introducer");return}o.toast.success("Introducer deleted"),u(!1),E.refresh()}catch(e){o.toast.error("Failed to delete introducer")}})},disabled:I,children:"Delete"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>u(!1),disabled:I,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:()=>{m&&T(async()=>{if(!h.trim())return void o.toast.error("Legal name is required");if(""!==b&&(0>Number(b)||Number(b)>300))return void o.toast.error("Default commission must be between 0 and 300 bps");try{let e=await fetch(`/api/staff/introducers/${m.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({legal_name:h.trim(),contact_name:x.trim()||null,email:v.trim()||null,default_commission_bps:""===b?null:Number(b),commission_cap_amount:""===j?null:Number(j),payment_terms:w,status:C,notes:_.trim()||null})});if(!e.ok){let t=await e.json().catch(()=>null);o.toast.error(t?.error??"Failed to update introducer");return}o.toast.success("Introducer updated"),u(!1),E.refresh()}catch(e){o.toast.error("Failed to update introducer")}})},disabled:I,children:I?"Updating…":"Update Introducer"})]})]})]})}):null}e.s(["EditIntroducerDialog",()=>u])}]);