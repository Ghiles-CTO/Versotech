(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,553426,t=>{"use strict";let e=(0,t.i(410587).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);t.s(["Lock",()=>e],553426)},728444,t=>{"use strict";let e=(0,t.i(410587).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);t.s(["EyeOff",()=>e],728444)},857261,835034,t=>{"use strict";let e=(0,t.i(410587).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);t.s(["Camera",()=>e],857261);var r=t.i(722679),n=t.i(340915),o=t.i(316264),a=t.i(191569),s=t.i(514133),i=t.i(90613),c=t.i(263229),u=t.i(553426),l=t.i(496383),h=t.i(728444),d=t.i(310556),p=t.i(432598),f=t.i(994500);function y(){var t;let[e,y]=(0,n.useState)(!1),[m,v]=(0,n.useState)(!1),[w,x]=(0,n.useState)(!1),[g,_]=(0,n.useState)(!1),[P,b]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),C=t=>{let{name:e,value:r}=t.target;b(t=>({...t,[e]:r}))},k={length:(t=P.newPassword).length>=8,uppercase:/[A-Z]/.test(t),lowercase:/[a-z]/.test(t),number:/[0-9]/.test(t),special:/[!@#$%^&*(),.?":{}|<>]/.test(t)},E=Object.values(k).every(t=>t),j=P.newPassword===P.confirmPassword&&""!==P.confirmPassword,T=async t=>{if(t.preventDefault(),!E)return void f.toast.error("Password does not meet requirements");if(!j)return void f.toast.error("Passwords do not match");y(!0);try{let t=await fetch("/api/auth/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:P.currentPassword,newPassword:P.newPassword})}),e=await t.json();if(!t.ok)throw Error(e.error||"Failed to update password");f.toast.success("Password updated successfully"),b({currentPassword:"",newPassword:"",confirmPassword:""})}catch(t){console.error("Error updating password:",t),f.toast.error("Failed to update password",{description:t.message})}finally{y(!1)}},S=({met:t,text:e})=>(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[t?(0,r.jsx)(d.Check,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(p.X,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{className:t?"text-green-600":"text-gray-600",children:e})]});return(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Change Password"}),(0,r.jsx)(i.CardDescription,{children:"Update your password to keep your account secure"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(s.Label,{htmlFor:"currentPassword",children:["Current Password ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(a.Input,{id:"currentPassword",name:"currentPassword",type:m?"text":"password",value:P.currentPassword,onChange:C,required:!0,placeholder:"Enter your current password"}),(0,r.jsx)("button",{type:"button",onClick:()=>v(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:m?(0,r.jsx)(h.EyeOff,{className:"h-4 w-4"}):(0,r.jsx)(l.Eye,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(s.Label,{htmlFor:"newPassword",children:["New Password ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(a.Input,{id:"newPassword",name:"newPassword",type:w?"text":"password",value:P.newPassword,onChange:C,required:!0,placeholder:"Enter your new password"}),(0,r.jsx)("button",{type:"button",onClick:()=>x(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:w?(0,r.jsx)(h.EyeOff,{className:"h-4 w-4"}):(0,r.jsx)(l.Eye,{className:"h-4 w-4"})})]}),P.newPassword&&(0,r.jsxs)("div",{className:"mt-3 space-y-1 p-3 bg-gray-50 rounded-md border border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2 text-gray-900",children:"Password Requirements:"}),(0,r.jsx)(S,{met:k.length,text:"At least 8 characters"}),(0,r.jsx)(S,{met:k.uppercase,text:"One uppercase letter"}),(0,r.jsx)(S,{met:k.lowercase,text:"One lowercase letter"}),(0,r.jsx)(S,{met:k.number,text:"One number"}),(0,r.jsx)(S,{met:k.special,text:"One special character"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(s.Label,{htmlFor:"confirmPassword",children:["Confirm New Password ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(a.Input,{id:"confirmPassword",name:"confirmPassword",type:g?"text":"password",value:P.confirmPassword,onChange:C,required:!0,placeholder:"Confirm your new password"}),(0,r.jsx)("button",{type:"button",onClick:()=>_(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:g?(0,r.jsx)(h.EyeOff,{className:"h-4 w-4"}):(0,r.jsx)(l.Eye,{className:"h-4 w-4"})})]}),P.confirmPassword&&(0,r.jsx)("div",{className:"flex items-center gap-2 text-sm",children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Check,{className:"h-4 w-4 text-green-500"}),(0,r.jsx)("span",{className:"text-green-600",children:"Passwords match"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.X,{className:"h-4 w-4 text-destructive"}),(0,r.jsx)("span",{className:"text-destructive",children:"Passwords do not match"})]})})]}),(0,r.jsx)("div",{className:"pt-4 border-t",children:(0,r.jsx)(o.Button,{type:"submit",disabled:e||!P.currentPassword||!E||!j,className:"w-full sm:w-auto",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Password..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Lock,{className:"mr-2 h-4 w-4"}),"Update Password"]})})})]})})]})}t.s(["PasswordChangeForm",()=>y],835034)},176835,t=>{"use strict";let e=(0,t.i(410587).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);t.s(["Copy",()=>e],176835)},818798,t=>{"use strict";let e=(0,t.i(410587).default)("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);t.s(["PenTool",()=>e],818798)},695459,t=>{"use strict";let e=(0,t.i(410587).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);t.s(["Save",()=>e],695459)},953989,t=>{"use strict";var e=t.i(722679),r=t.i(340915);let n="verso_tour_progress",o=(0,r.createContext)(null);function a(){let t=(0,r.useContext)(o);if(!t)throw Error("useTour must be used within TourProvider");return t}function s(){return(0,r.useContext)(o)}function i({children:t,totalSteps:a,onComplete:s,analytics:i,stepIds:c=[],enableKeyboardNav:u=!0,enablePersistence:l=!0}){let[h,d]=(0,r.useState)(!1),[p,f]=(0,r.useState)(0),[y,m]=(0,r.useState)(!1),[v,w]=(0,r.useState)(c),x=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(l)try{let t=localStorage.getItem(n);if(t){let e=JSON.parse(t);(Date.now()-e.lastActiveTime)/36e5<24&&e.currentStep>0&&e.currentStep<a&&(f(e.currentStep),m(!0))}}catch{}},[l,a]),(0,r.useEffect)(()=>{if(l&&h)try{let t={currentStep:p,isPaused:y,startTime:x.current||Date.now(),lastActiveTime:Date.now()};localStorage.setItem(n,JSON.stringify(t))}catch{}},[p,y,h,l]),(0,r.useEffect)(()=>{if(h&&i?.onStepView){let t=v[p]||`step-${p}`;i.onStepView(p,t),g.current=Date.now()}},[p,h,i,v]);let _=(0,r.useCallback)(()=>{if(l)try{localStorage.removeItem(n)}catch{}},[l]),P=(0,r.useCallback)(()=>{f(0),d(!0),m(!1),x.current=Date.now(),g.current=Date.now()},[]),b=(0,r.useCallback)(()=>{if(i?.onStepComplete&&g.current){let t=v[p]||`step-${p}`,e=Date.now()-g.current;i.onStepComplete(p,t,e)}if(p<a-1)f(t=>t+1),g.current=Date.now();else{if(d(!1),f(0),m(!1),_(),i?.onTourComplete&&x.current){let t=Date.now()-x.current;i.onTourComplete(t)}s()}},[p,a,s,i,v,_]),C=(0,r.useCallback)(()=>{p>0&&(f(t=>t-1),g.current=Date.now())},[p]),k=(0,r.useCallback)(async()=>{i?.onTourSkip&&i.onTourSkip(p),d(!1),f(0),m(!1),_(),await s()},[s,i,p,_]),E=(0,r.useCallback)(async()=>{if(i?.onTourComplete&&x.current){let t=Date.now()-x.current;i.onTourComplete(t)}d(!1),f(0),m(!1),_(),await s()},[s,i,_]),j=(0,r.useCallback)(t=>{t>=0&&t<a&&(f(t),g.current=Date.now(),h||(d(!0),m(!1),x.current=Date.now()))},[a,h]),T=(0,r.useCallback)(()=>{f(0),d(!0),m(!1),x.current=Date.now(),g.current=Date.now(),_()},[_]),S=(0,r.useCallback)(()=>{h&&m(!0)},[h]),D=(0,r.useCallback)(()=>{y&&(m(!1),d(!0),g.current=Date.now())},[y]),O=(0,r.useCallback)(t=>{w(t)},[]),N=(0,r.useRef)(k),M=(0,r.useRef)(b),R=(0,r.useRef)(C);return(0,r.useEffect)(()=>{N.current=k,M.current=b,R.current=C},[k,b,C]),(0,r.useEffect)(()=>{if(!u||!h||y)return;let t=t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement))switch(t.key){case"Escape":t.preventDefault(),N.current();break;case"ArrowRight":case"Enter":t.preventDefault(),M.current();break;case"ArrowLeft":t.preventDefault(),R.current()}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[h,y,u]),(0,e.jsx)(o.Provider,{value:{isActive:h,currentStep:p,totalSteps:a,isPaused:y,startTour:P,nextStep:b,prevStep:C,skipTour:k,completeTour:E,goToStep:j,restartTour:T,pauseTour:S,resumeTour:D,setStepIds:O},children:t})}t.s(["TourProvider",()=>i,"useTour",()=>a,"useTourOptional",()=>s])},264651,t=>{"use strict";let e=(0,t.i(410587).default)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);t.s(["PlayCircle",()=>e],264651)},931105,t=>{"use strict";function e(t,e){if(null==t)return{};var r={};for(var n in t)if(({}).hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}t.s(["default",()=>e])},849809,t=>{"use strict";function e(t,r){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,r)}t.s(["default",()=>e])},342102,t=>{"use strict";function e(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.s(["default",()=>e])},181742,(t,e,r)=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},846812,(t,e,r)=>{"use strict";var n=t.r(181742);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function t(t,e,r,o,a,s){if(s!==n){var i=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r}},350627,(t,e,r)=>{e.exports=t.r(846812)()},74329,t=>{"use strict";function e(){return(e=Object.assign.bind()).apply(null,arguments)}t.s(["default",()=>e])},780,t=>{"use strict";let e=(0,t.i(410587).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);t.s(["RotateCcw",()=>e],780)},763388,(t,e,r)=>{t.e,e.exports=function(){var t=[function(t,e){"use strict";function r(t,e,r,n){return({red:n[4*(r*e+t)],green:n[4*(r*e+t)+1],blue:n[4*(r*e+t)+2],alpha:n[4*(r*e+t)+3]}).alpha}function n(t,e,n,o){for(var a=t?1:-1,s=t?0:n-1,i=s;t?i<n:i>-1;i+=a)for(var c=0;c<e;c++)if(r(c,i,e,o))return i;return null}function o(t,e,n,o){for(var a=t?1:-1,s=t?0:e-1,i=s;t?i<e:i>-1;i+=a)for(var c=0;c<n;c++)if(r(i,c,e,o))return i;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.getContext("2d"),r=t.width,a=t.height,s=e.getImageData(0,0,r,a).data,i=n(!0,r,a,s),c=n(!1,r,a,s),u=o(!0,r,a,s),l=o(!1,r,a,s)-u+1,h=c-i+1,d=e.getImageData(u,i,l,h);return t.width=l,t.height=h,e.clearRect(0,0,l,h),e.putImageData(d,0,0),t}}];function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}()},594422,t=>{"use strict";var e=t.i(74329),r=t.i(931105);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t.i(849809);function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(s=function(){return!!t})()}var i=t.i(342102),c=t.i(350627),u=t.i(340915);function l(t,e,r){this.x=t,this.y=e,this.time=r||new Date().getTime()}function h(t,e,r,n){this.startPoint=t,this.control1=e,this.control2=r,this.endPoint=n}function d(t,e){var r,n,o,a,s,i,c,u,l,h=this,p=e||{};(this.velocityFilterWeight=p.velocityFilterWeight||.7,this.minWidth=p.minWidth||.5,this.maxWidth=p.maxWidth||2.5,this.throttle="throttle"in p?p.throttle:16,this.minDistance="minDistance"in p?p.minDistance:5,this.throttle)?this._strokeMoveUpdate=(r=d.prototype._strokeUpdate,n=this.throttle,c=null,u=0,o||(o={}),l=function(){u=!1===o.leading?0:Date.now(),c=null,i=r.apply(a,s),c||(a=s=null)},function(){var t=Date.now();u||!1!==o.leading||(u=t);var e=n-(t-u);return a=this,s=arguments,e<=0||e>n?(c&&(clearTimeout(c),c=null),u=t,i=r.apply(a,s),c||(a=s=null)):c||!1===o.trailing||(c=setTimeout(l,e)),i}):this._strokeMoveUpdate=d.prototype._strokeUpdate,this.dotSize=p.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=p.penColor||"black",this.backgroundColor=p.backgroundColor||"rgba(0,0,0,0)",this.onBegin=p.onBegin,this.onEnd=p.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(h._mouseButtonDown=!0,h._strokeBegin(t))},this._handleMouseMove=function(t){h._mouseButtonDown&&h._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&h._mouseButtonDown&&(h._mouseButtonDown=!1,h._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];h._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];h._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===h._canvas&&(t.preventDefault(),h._strokeEnd(t))},this.on()}l.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},l.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},l.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},h.prototype.length=function(){for(var t=0,e=void 0,r=void 0,n=0;n<=10;n+=1){var o=n/10,a=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),s=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(n>0){var i=a-e,c=s-r;t+=Math.sqrt(i*i+c*c)}e=a,r=s}return t},h.prototype._point=function(t,e,r,n,o){return e*(1-t)*(1-t)*(1-t)+3*r*(1-t)*(1-t)*t+3*n*(1-t)*t*t+o*t*t*t},d.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},d.prototype.fromDataURL=function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Image,o=r.ratio||window.devicePixelRatio||1,a=r.width||this._canvas.width/o,s=r.height||this._canvas.height/o;this._reset(),n.src=t,n.onload=function(){e._ctx.drawImage(n,0,0,a,s)},this._isEmpty=!1},d.prototype.toDataURL=function(t){var e;if("image/svg+xml"===t)return this._toSVG();for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return(e=this._canvas).toDataURL.apply(e,[t].concat(n))},d.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},d.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},d.prototype.isEmpty=function(){return this._isEmpty},d.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},d.prototype._strokeUpdate=function(t){var e=t.clientX,r=t.clientY,n=this._createPoint(e,r),o=this._data[this._data.length-1],a=o&&o[o.length-1],s=a&&n.distanceTo(a)<this.minDistance;if(!(a&&s)){var i=this._addPoint(n),c=i.curve,u=i.widths;c&&u&&this._drawCurve(c,u.start,u.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}},d.prototype._strokeEnd=function(t){var e=this.points.length>2,r=this.points[0];if(!e&&r&&this._drawDot(r),r){var n=this._data[this._data.length-1],o=n[n.length-1];r.equals(o)||n.push({x:r.x,y:r.y,time:r.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},d.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},d.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},d.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},d.prototype._createPoint=function(t,e,r){var n=this._canvas.getBoundingClientRect();return new l(t-n.left,e-n.top,r||new Date().getTime())},d.prototype._addPoint=function(t){var e=this.points;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);var r=this._calculateCurveControlPoints(e[0],e[1],e[2]).c2,n=this._calculateCurveControlPoints(e[1],e[2],e[3]).c1,o=new h(e[1],r,n,e[2]),a=this._calculateCurveWidths(o);return e.shift(),{curve:o,widths:a}}return{}},d.prototype._calculateCurveControlPoints=function(t,e,r){var n=t.x-e.x,o=t.y-e.y,a=e.x-r.x,s=e.y-r.y,i={x:(t.x+e.x)/2,y:(t.y+e.y)/2},c={x:(e.x+r.x)/2,y:(e.y+r.y)/2},u=Math.sqrt(n*n+o*o),h=Math.sqrt(a*a+s*s),d=i.x-c.x,p=i.y-c.y,f=h/(u+h),y={x:c.x+d*f,y:c.y+p*f},m=e.x-y.x,v=e.y-y.y;return{c1:new l(i.x+m,i.y+v),c2:new l(c.x+m,c.y+v)}},d.prototype._calculateCurveWidths=function(t){var e=t.startPoint,r=t.endPoint,n={start:null,end:null},o=this.velocityFilterWeight*r.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(o);return n.start=this._lastWidth,n.end=a,this._lastVelocity=o,this._lastWidth=a,n},d.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},d.prototype._drawPoint=function(t,e,r){var n=this._ctx;n.moveTo(t,e),n.arc(t,e,r,0,2*Math.PI,!1),this._isEmpty=!1},d.prototype._drawCurve=function(t,e,r){var n=this._ctx,o=r-e,a=Math.floor(t.length());n.beginPath();for(var s=0;s<a;s+=1){var i=s/a,c=i*i,u=c*i,l=1-i,h=l*l,d=h*l,p=d*t.startPoint.x;p+=3*h*i*t.control1.x+3*l*c*t.control2.x+u*t.endPoint.x;var f=d*t.startPoint.y;f+=3*h*i*t.control1.y+3*l*c*t.control2.y+u*t.endPoint.y;var y=e+u*o;this._drawPoint(p,f,y)}n.closePath(),n.fill()},d.prototype._drawDot=function(t){var e=this._ctx,r="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,r),e.closePath(),e.fill()},d.prototype._fromData=function(t,e,r){for(var n=0;n<t.length;n+=1){var o=t[n];if(o.length>1)for(var a=0;a<o.length;a+=1){var s=o[a],i=new l(s.x,s.y,s.time),c=s.color;if(0===a)this.penColor=c,this._reset(),this._addPoint(i);else if(a!==o.length-1){var u=this._addPoint(i),h=u.curve,d=u.widths;h&&d&&e(h,d,c)}}else this._reset(),r(o[0])}},d.prototype._toSVG=function(){var t=this,e=this._data,r=this._canvas,n=Math.max(window.devicePixelRatio||1,1),o=r.width/n,a=r.height/n,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"width",r.width),s.setAttributeNS(null,"height",r.height),this._fromData(e,function(t,e,r){var n=document.createElement("path");if(!isNaN(t.control1.x)&&!isNaN(t.control1.y)&&!isNaN(t.control2.x)&&!isNaN(t.control2.y)){var o="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" "+("C "+t.control1.x.toFixed(3)+",")+t.control1.y.toFixed(3)+" "+(t.control2.x.toFixed(3)+",")+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);n.setAttribute("d",o),n.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),n.setAttribute("stroke",r),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),s.appendChild(n)}},function(e){var r=document.createElement("circle"),n="function"==typeof t.dotSize?t.dotSize():t.dotSize;r.setAttribute("r",n),r.setAttribute("cx",e.x),r.setAttribute("cy",e.y),r.setAttribute("fill",e.color),s.appendChild(r)});var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="0 0 '+o+" ")+a+'" width="'+o+'" height="'+a+'">',c=s.innerHTML;if(void 0===c){var u=document.createElement("dummy"),l=s.childNodes;u.innerHTML="";for(var h=0;h<l.length;h+=1)u.appendChild(l[h].cloneNode(!0));c=u.innerHTML}return"data:image/svg+xml;base64,"+btoa(i+c+"</svg>")},d.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(t,r){return e._drawCurve(t,r.start,r.end)},function(t){return e._drawDot(t)}),this._data=t},d.prototype.toData=function(){return this._data};var p=t.i(763388),f=["canvasProps","clearOnResize"],y=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");h.prototype=Object.create(t&&t.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),t&&(0,o.default)(h,t);var c,l=(c=s(),function(){var t,e=a(h);t=c?Reflect.construct(e,arguments,a(this).constructor):e.apply(this,arguments);if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return(0,i.default)(this)});function h(){var t;if(!(this instanceof h))throw TypeError("Cannot call a class as a function");for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=l.call.apply(l,[this].concat(o))).staticThis=t.constructor,t._sigPad=null,t._canvas=null,t.setRef=function(e){t._canvas=e,null===t._canvas&&(t._sigPad=null)},t._excludeOurProps=function(){var e=t.props;return e.canvasProps,e.clearOnResize,function(t,e){if(null==t)return{};var n,o,a=(0,r.default)(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)n=s[o],-1===e.indexOf(n)&&({}).propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(e,f)},t.componentDidMount=function(){var e=t.getCanvas();t._sigPad=new d(e,t._excludeOurProps()),t._resizeCanvas(),t.on()},t.componentWillUnmount=function(){t.off()},t.componentDidUpdate=function(){Object.assign(t._sigPad,t._excludeOurProps())},t.getCanvas=function(){if(null===t._canvas)throw t.staticThis.refNullError;return t._canvas},t.getTrimmedCanvas=function(){var e=t.getCanvas(),r=document.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0),(0,p.default)(r)},t.getSignaturePad=function(){if(null===t._sigPad)throw t.staticThis.refNullError;return t._sigPad},t._checkClearOnResize=function(){t.props.clearOnResize&&t._resizeCanvas()},t._resizeCanvas=function(){var e,r,n=null!=(e=t.props.canvasProps)?e:{},o=n.width,a=n.height;if(void 0===o||void 0===a){var s=t.getCanvas(),i=Math.max(null!=(r=window.devicePixelRatio)?r:1,1);void 0===o&&(s.width=s.offsetWidth*i),void 0===a&&(s.height=s.offsetHeight*i),s.getContext("2d").scale(i,i),t.clear()}},t.render=function(){var r=t.props.canvasProps;return u.default.createElement("canvas",(0,e.default)({ref:t.setRef},r))},t.on=function(){return window.addEventListener("resize",t._checkClearOnResize),t.getSignaturePad().on()},t.off=function(){return window.removeEventListener("resize",t._checkClearOnResize),t.getSignaturePad().off()},t.clear=function(){return t.getSignaturePad().clear()},t.isEmpty=function(){return t.getSignaturePad().isEmpty()},t.fromDataURL=function(e,r){return t.getSignaturePad().fromDataURL(e,r)},t.toDataURL=function(e,r){return t.getSignaturePad().toDataURL(e,r)},t.fromData=function(e){return t.getSignaturePad().fromData(e)},t.toData=function(){return t.getSignaturePad().toData()},t}return Object.defineProperty(h,"prototype",{writable:!1}),h}(u.Component);y.propTypes={velocityFilterWeight:c.default.number,minWidth:c.default.number,maxWidth:c.default.number,minDistance:c.default.number,dotSize:c.default.oneOfType([c.default.number,c.default.func]),penColor:c.default.string,throttle:c.default.number,onEnd:c.default.func,onBegin:c.default.func,canvasProps:c.default.object,clearOnResize:c.default.bool},y.defaultProps={clearOnResize:!0},y.refNullError=Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase."),t.s(["default",()=>y],594422)}]);