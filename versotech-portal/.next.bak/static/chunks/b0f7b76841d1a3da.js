(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,398472,e=>{"use strict";let s=(0,e.i(410587).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>s],398472)},540318,59531,e=>{"use strict";let s=(0,e.i(410587).default)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);e.s(["default",()=>s],59531),e.s(["Handshake",()=>s],540318)},429760,e=>{"use strict";var s=e.i(722679),t=e.i(340915),r=e.i(679472),a=e.i(47264),i=e.i(478985),n=e.i(873358),l=e.i(362208),d=e.i(599205),c=e.i(68977),o=e.i(798827),m="Tabs",[x,u]=(0,a.createContextScope)(m,[i.createRovingFocusGroupScope]),h=(0,i.createRovingFocusGroupScope)(),[p,g]=x(m),f=t.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,onValueChange:i,defaultValue:n,orientation:x="horizontal",dir:u,activationMode:h="automatic",...g}=e,f=(0,d.useDirection)(u),[j,b]=(0,c.useControllableState)({prop:a,onChange:i,defaultProp:n??"",caller:m});return(0,s.jsx)(p,{scope:r,baseId:(0,o.useId)(),value:j,onValueChange:b,orientation:x,dir:f,activationMode:h,children:(0,s.jsx)(l.Primitive.div,{dir:f,"data-orientation":x,...g,ref:t})})});f.displayName=m;var j="TabsList",b=t.forwardRef((e,t)=>{let{__scopeTabs:r,loop:a=!0,...n}=e,d=g(j,r),c=h(r);return(0,s.jsx)(i.Root,{asChild:!0,...c,orientation:d.orientation,dir:d.dir,loop:a,children:(0,s.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":d.orientation,...n,ref:t})})});b.displayName=j;var v="TabsTrigger",y=t.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,disabled:d=!1,...c}=e,o=g(v,a),m=h(a),x=w(o.baseId,n),u=_(o.baseId,n),p=n===o.value;return(0,s.jsx)(i.Item,{asChild:!0,...m,focusable:!d,active:p,children:(0,s.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":u,"data-state":p?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:x,...c,ref:t,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{d||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(n)}),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(n)}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;p||d||!e||o.onValueChange(n)})})})});y.displayName=v;var N="TabsContent",C=t.forwardRef((e,r)=>{let{__scopeTabs:a,value:i,forceMount:d,children:c,...o}=e,m=g(N,a),x=w(m.baseId,i),u=_(m.baseId,i),h=i===m.value,p=t.useRef(h);return t.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(n.Presence,{present:d||h,children:({present:t})=>(0,s.jsx)(l.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":x,hidden:!t,id:u,tabIndex:0,...o,ref:r,style:{...e.style,animationDuration:p.current?"0s":void 0},children:t&&c})})});function w(e,s){return`${e}-trigger-${s}`}function _(e,s){return`${e}-content-${s}`}C.displayName=N;var k=e.i(282141);let T=t.forwardRef(({id:e,...r},a)=>{let i=t.useId();return(0,s.jsx)(f,{ref:a,id:e??i,...r})});T.displayName="Tabs";let S=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)(b,{ref:r,className:(0,k.cn)("inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));S.displayName=b.displayName;let M=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)(y,{ref:r,className:(0,k.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));M.displayName=y.displayName;let E=t.forwardRef(({className:e,...t},r)=>(0,s.jsx)(C,{ref:r,className:(0,k.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));E.displayName=C.displayName,e.s(["Tabs",()=>T,"TabsContent",()=>E,"TabsList",()=>S,"TabsTrigger",()=>M],429760)},619324,e=>{"use strict";let s=(0,e.i(410587).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],619324)},90613,e=>{"use strict";var s=e.i(722679),t=e.i(282141);function r({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...r})}function d({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>d,"CardHeader",()=>a,"CardTitle",()=>i])},15098,e=>{"use strict";let s=(0,e.i(410587).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],15098)},775079,e=>{"use strict";let s=(0,e.i(410587).default)("file-warning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["FileWarning",()=>s],775079)},840298,e=>{"use strict";let s=["passport","national_id","drivers_license","signatory_id","id_card","residence_permit","visa","government_id","member_id","director_id","ubo_id"],t=["proof_of_address","signatory_proof_of_address","utility_bill","bank_statement","tax_bill","council_tax","rental_agreement","mortgage_statement","member_proof_of_address"];function r(e){return s.includes(e)||e.includes("_id")||e.includes("passport")||e.includes("license")}function a(e){return t.includes(e)||e.includes("proof_of_address")||e.includes("utility")||e.includes("statement")}function i(e){return({valid:"Valid",expired:"Expired",expiring_soon:"Expiring Soon",stale:"Stale",pending:"Pending Review",rejected:"Rejected"})[e]||"Unknown"}function n(e){return({valid:"bg-green-500/20 text-green-400",expired:"bg-red-500/20 text-red-400",expiring_soon:"bg-amber-500/20 text-amber-400",stale:"bg-orange-500/20 text-orange-400",pending:"bg-blue-500/20 text-blue-400",rejected:"bg-red-500/20 text-red-400"})[e]||"bg-gray-500/20 text-gray-400"}function l(e){return e<0?`Expired ${Math.abs(e)} days ago`:0===e?"Expires today":1===e?"Expires tomorrow":e<=7?`Expires in ${e} days`:e<=30?`Expires in ${Math.ceil(e/7)} weeks`:`Expires in ${Math.ceil(e/30)} months`}e.s(["formatExpiryCountdown",()=>l,"getValidationStatusColor",()=>n,"getValidationStatusLabel",()=>i,"isIdDocument",()=>r,"isProofOfAddress",()=>a])},385838,e=>{"use strict";let s=(0,e.i(410587).default)("landmark",[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]]);e.s(["Landmark",()=>s],385838)},295588,e=>{"use strict";let s=(0,e.i(410587).default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);e.s(["UserX",()=>s],295588)},384581,e=>{"use strict";let s=(0,e.i(410587).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);e.s(["RefreshCcw",()=>s],384581)},617050,e=>{"use strict";var s=e.i(722679),t=e.i(340915),r=e.i(820417),a=e.i(90613),i=e.i(129432),n=e.i(316264),l=e.i(429760),d=e.i(538892),c=e.i(15098),o=e.i(645855),m=e.i(619324),x=e.i(401148),u=e.i(971743),h=e.i(501259),p=e.i(119311),g=e.i(384581),f=e.i(398472),j=e.i(263229),b=e.i(733179),v=e.i(691974),y=e.i(201495),N=e.i(385838),C=e.i(540318),w=e.i(295588),_=e.i(775079),k=e.i(84065),T=e.i(994500),S=e.i(840298);let M={investor:{label:"Investor",icon:u.Building2,href:"/versotech_main/users"},arranger:{label:"Arranger",icon:v.Briefcase,href:"/versotech_main/users"},partner:{label:"Partner",icon:C.Handshake,href:"/versotech_main/users"},introducer:{label:"Introducer",icon:b.TrendingUp,href:"/versotech_main/users"},lawyer:{label:"Lawyer",icon:y.Scale,href:"/versotech_main/users"},commercial_partner:{label:"Commercial Partner",icon:N.Landmark,href:"/versotech_main/users"}};function E(){let[e,r]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[b,v]=(0,t.useState)(!0),[y,N]=(0,t.useState)("30"),[C,S]=(0,t.useState)("all"),E=async()=>{v(!0);try{let e="all"!==C?`&entity_type=${C}`:"",[s,t]=await Promise.all([fetch("/api/staff/compliance/overview"),fetch(`/api/staff/compliance/expiring-documents?days=${y}&include_expired=true&include_stale=true${e}`)]);if(!s.ok||!t.ok)throw Error("Failed to fetch compliance data");let[a,i]=await Promise.all([s.json(),t.json()]);r(a),f(i)}catch(e){console.error("Fetch error:",e),T.toast.error("Failed to load compliance data")}finally{v(!1)}};return((0,t.useEffect)(()=>{E()},[y,C]),b)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"KYC Compliance Dashboard"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Monitor KYC status across all entities and track document expiry"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(d.Select,{value:C,onValueChange:S,children:[(0,s.jsx)(d.SelectTrigger,{className:"w-[180px]",children:(0,s.jsx)(d.SelectValue,{placeholder:"All Entity Types"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"all",children:"All Entity Types"}),(0,s.jsx)(d.SelectItem,{value:"investor",children:"Investors"}),(0,s.jsx)(d.SelectItem,{value:"arranger",children:"Arrangers"}),(0,s.jsx)(d.SelectItem,{value:"partner",children:"Partners"}),(0,s.jsx)(d.SelectItem,{value:"introducer",children:"Introducers"}),(0,s.jsx)(d.SelectItem,{value:"lawyer",children:"Lawyers"}),(0,s.jsx)(d.SelectItem,{value:"commercial_partner",children:"Commercial Partners"})]})]}),(0,s.jsxs)(n.Button,{variant:"outline",onClick:E,children:[(0,s.jsx)(g.RefreshCcw,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{className:"pb-2",children:(0,s.jsxs)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-green-400"}),"KYC Complete"]})}),(0,s.jsxs)(a.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-green-400",children:e.summary.kyc_complete}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.summary.completion_percentage,"% of all entities"]})]})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{className:"pb-2",children:(0,s.jsxs)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(o.Clock,{className:"h-4 w-4 text-blue-400"}),"KYC Pending"]})}),(0,s.jsxs)(a.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-400",children:e.summary.kyc_pending}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting completion"})]})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{className:"pb-2",children:(0,s.jsxs)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(m.AlertTriangle,{className:"h-4 w-4 text-amber-400"}),"Expiring Soon"]})}),(0,s.jsxs)(a.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-amber-400",children:e.documents_expiring_30_days}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Documents in next 30 days"})]})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{className:"pb-2",children:(0,s.jsxs)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(x.AlertCircle,{className:"h-4 w-4 text-red-400"}),"Expired"]})}),(0,s.jsxs)(a.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-red-400",children:e.documents_expired}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Require immediate action"})]})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{className:"pb-2",children:(0,s.jsxs)(a.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(_.FileWarning,{className:"h-4 w-4 text-orange-400"}),"Stale Documents"]})}),(0,s.jsxs)(a.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-orange-400",children:e.stale_proof_of_address}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Proof of address > 90 days"})]})]})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsxs)(a.CardHeader,{className:"pb-3",children:[(0,s.jsxs)(a.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,s.jsx)(h.Users,{className:"h-5 w-5"}),"Member Compliance"]}),(0,s.jsx)(a.CardDescription,{children:"Directors, UBOs, and Signatories requiring attention across all entities"})]}),(0,s.jsxs)(a.CardContent,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 rounded-lg border border-white/10 bg-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(h.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Members"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.member_compliance.total_members})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border border-amber-500/30 bg-amber-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(o.Clock,{className:"h-4 w-4 text-amber-400"}),(0,s.jsx)("span",{className:"text-sm text-amber-400",children:"Incomplete KYC"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:e.member_compliance.incomplete_kyc})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border border-red-500/30 bg-red-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(w.UserX,{className:"h-4 w-4 text-red-400"}),(0,s.jsx)("span",{className:"text-sm text-red-400",children:"Expired IDs"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-red-400",children:e.member_compliance.expired_ids})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border border-orange-500/30 bg-orange-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(_.FileWarning,{className:"h-4 w-4 text-orange-400"}),(0,s.jsx)("span",{className:"text-sm text-orange-400",children:"UBOs Missing Data"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-400",children:e.member_compliance.missing_documents})]})]}),e.members_needing_attention>0&&(0,s.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.AlertCircle,{className:"h-4 w-4 text-red-400"}),(0,s.jsxs)("span",{className:"text-sm text-red-400 font-medium",children:[e.members_needing_attention," members require immediate attention"]})]})})]})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsxs)(a.CardHeader,{className:"pb-3",children:[(0,s.jsx)(a.CardTitle,{className:"text-base",children:"Overall KYC Completion"}),(0,s.jsxs)(a.CardDescription,{children:[e.summary.kyc_complete," of ",e.summary.total_entities," entities have completed KYC"]})]}),(0,s.jsxs)(a.CardContent,{children:[(0,s.jsx)("div",{className:"w-full bg-white/10 rounded-full h-4",children:(0,s.jsx)("div",{className:`h-4 rounded-full transition-all ${e.summary.completion_percentage>=80?"bg-green-500":e.summary.completion_percentage>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${e.summary.completion_percentage}%`}})}),(0,s.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:"0%"}),(0,s.jsxs)("span",{children:[e.summary.completion_percentage,"%"]}),(0,s.jsx)("span",{children:"100%"})]})]})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsxs)(a.CardHeader,{children:[(0,s.jsx)(a.CardTitle,{className:"text-base",children:"KYC Status by Entity Type"}),(0,s.jsx)(a.CardDescription,{children:"Breakdown across all 6 persona types"})]}),(0,s.jsx)(a.CardContent,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(e.by_entity_type).map(([e,t])=>{let r=M[e],a=t.total>0?Math.round(t.complete/t.total*100):0,n=r?.icon??u.Building2;return(0,s.jsxs)("div",{className:`p-4 rounded-lg border transition-colors cursor-pointer ${C===e?"border-primary bg-primary/10":"border-white/10 hover:bg-white/5"}`,onClick:()=>S(C===e?"all":e),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium",children:r?.label||e})]}),(0,s.jsx)(i.Badge,{variant:"outline",children:t.total})]}),(0,s.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2 mb-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full bg-green-500",style:{width:`${a}%`}})}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:[t.complete," complete"]}),(0,s.jsxs)("span",{children:[t.pending," pending"]})]}),(t.expired>0||t.expiring_soon>0)&&(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[t.expiring_soon>0&&(0,s.jsxs)(i.Badge,{className:"bg-amber-500/20 text-amber-400 text-xs",children:[t.expiring_soon," expiring"]}),t.expired>0&&(0,s.jsxs)(i.Badge,{className:"bg-red-500/20 text-red-400 text-xs",children:[t.expired," expired"]})]})]},e)})})})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(a.CardTitle,{className:"text-base",children:"Documents Requiring Attention"}),(0,s.jsx)(a.CardDescription,{children:"Expired, expiring, and stale documents across all entities"})]}),(0,s.jsxs)(d.Select,{value:y,onValueChange:N,children:[(0,s.jsx)(d.SelectTrigger,{className:"w-[150px]",children:(0,s.jsx)(d.SelectValue,{})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"30",children:"Next 30 days"}),(0,s.jsx)(d.SelectItem,{value:"60",children:"Next 60 days"}),(0,s.jsx)(d.SelectItem,{value:"90",children:"Next 90 days"})]})]})]})}),(0,s.jsx)(a.CardContent,{children:(0,s.jsxs)(l.Tabs,{defaultValue:"expired",className:"space-y-4",children:[(0,s.jsxs)(l.TabsList,{children:[(0,s.jsxs)(l.TabsTrigger,{value:"expired",className:"gap-2",children:[(0,s.jsx)(x.AlertCircle,{className:"h-4 w-4"}),"Expired (",p?.summary.expired_count||0,")"]}),(0,s.jsxs)(l.TabsTrigger,{value:"expiring",className:"gap-2",children:[(0,s.jsx)(o.Clock,{className:"h-4 w-4"}),"Expiring (",p?.summary.expiring_soon_count||0,")"]}),(0,s.jsxs)(l.TabsTrigger,{value:"stale",className:"gap-2",children:[(0,s.jsx)(k.Calendar,{className:"h-4 w-4"}),"Stale (",p?.summary.stale_count||0,")"]})]}),(0,s.jsx)(l.TabsContent,{value:"expired",children:p?.expired.length===0?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-12 w-12 text-green-400 mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No expired documents"})]}):(0,s.jsx)("div",{className:"space-y-2",children:p?.expired.map(e=>(0,s.jsx)(I,{doc:e,variant:"expired"},e.id))})}),(0,s.jsx)(l.TabsContent,{value:"expiring",children:p?.expiring_soon.length===0?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-12 w-12 text-green-400 mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No documents expiring soon"})]}):(0,s.jsx)("div",{className:"space-y-2",children:p?.expiring_soon.map(e=>(0,s.jsx)(I,{doc:e,variant:"expiring"},e.id))})}),(0,s.jsx)(l.TabsContent,{value:"stale",children:p?.stale?.length===0?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-12 w-12 text-green-400 mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No stale proof of address documents"})]}):(0,s.jsx)("div",{className:"space-y-2",children:p?.stale?.map(e=>(0,s.jsx)(I,{doc:e,variant:"stale"},e.id))})})]})})]})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[(0,s.jsx)(x.AlertCircle,{className:"h-12 w-12 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Failed to load compliance data"}),(0,s.jsxs)(n.Button,{onClick:E,children:[(0,s.jsx)(g.RefreshCcw,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}function I({doc:e,variant:t}){let a=M[e.entity_type],l=a?.icon||u.Building2;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-white/10 hover:bg-white/5 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:`p-2 rounded-lg ${(()=>{switch(t){case"expired":return"bg-red-500/20";case"expiring":return"bg-amber-500/20";case"stale":return"bg-orange-500/20"}})()}`,children:(0,s.jsx)(p.FileText,{className:`h-4 w-4 ${(()=>{switch(t){case"expired":return"text-red-400";case"expiring":return"text-amber-400";case"stale":return"text-orange-400"}})()}`})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:e.name}),(0,s.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:e.type.replace(/_/g," ")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)(l,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e.entity_name}),e.member_name&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsx)(h.Users,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e.member_name})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(i.Badge,{className:(()=>{switch(t){case"expired":return"bg-red-500/20 text-red-400";case"expiring":return"bg-amber-500/20 text-amber-400";case"stale":return"bg-orange-500/20 text-orange-400"}})(),children:(()=>{if("stale"===t&&null!==e.days_since_document_date){let s=Math.floor(e.days_since_document_date/30);return`${s} months old`}return null!==e.days_until_expiry?(0,S.formatExpiryCountdown)(e.days_until_expiry):"Unknown"})()}),(0,s.jsx)(r.default,{href:`/versotech_main/users/${{investor:"investors",arranger:"arrangers",partner:"partners",introducer:"introducers",lawyer:"lawyers",commercial_partner:"commercial-partners"}[e.entity_type]||"investors"}/${e.entity_id}`,children:(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(f.ExternalLink,{className:"h-4 w-4"})})})]})]})}e.s(["KYCComplianceDashboard",()=>E])}]);