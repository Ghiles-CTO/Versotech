(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56213,e=>{"use strict";var s=e.i(722679),a=e.i(282141);function t({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,a.cn)("bg-accent animate-pulse rounded-md",e),...t})}e.s(["Skeleton",()=>t])},416469,e=>{"use strict";let s=(0,e.i(410587).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>s],416469)},761722,e=>{"use strict";let s=(0,e.i(410587).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>s],761722)},90613,e=>{"use strict";var s=e.i(722679),a=e.i(282141);function t({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function r({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}function c({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...t})}e.s(["Card",()=>t,"CardContent",()=>l,"CardDescription",()=>i,"CardFooter",()=>c,"CardHeader",()=>r,"CardTitle",()=>n])},15098,e=>{"use strict";let s=(0,e.i(410587).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],15098)},360209,e=>{"use strict";let s=(0,e.i(410587).default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);e.s(["Percent",()=>s],360209)},72417,e=>{"use strict";var s=e.i(722679),a=e.i(340915),t=e.i(603274),r=e.i(90613),n=e.i(129432),i=e.i(316264),l=e.i(56213),c=e.i(119311),d=e.i(15098),m=e.i(645855),o=e.i(401148),x=e.i(711819),g=e.i(84065),u=e.i(416469),h=e.i(360209),p=e.i(971743),j=e.i(396132),f=e.i(761722),N=e.i(818798),y=e.i(263229),C=e.i(282141),b=e.i(820417);let v={active:{bg:"bg-green-100 text-green-800",icon:d.CheckCircle2},pending_signature:{bg:"bg-yellow-100 text-yellow-800",icon:m.Clock},pending_ceo_signature:{bg:"bg-blue-100 text-blue-800",icon:N.PenTool},pending_arranger_signature:{bg:"bg-purple-100 text-purple-800",icon:N.PenTool},pending_cp_signature:{bg:"bg-orange-100 text-orange-800",icon:x.FileSignature},approved:{bg:"bg-blue-100 text-blue-800",icon:d.CheckCircle2},draft:{bg:"bg-gray-100 text-gray-800",icon:c.FileText},expired:{bg:"bg-red-100 text-red-800",icon:o.AlertCircle},terminated:{bg:"bg-red-100 text-red-800",icon:o.AlertCircle}},_={referral:"Referral Agreement",revenue_share:"Revenue Share Agreement",fixed_fee:"Fixed Fee Agreement",hybrid:"Hybrid Agreement",placement:"Placement Agreement"},w={net_15:"Net 15 Days",net_30:"Net 30 Days",net_45:"Net 45 Days",net_60:"Net 60 Days"};function k(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function A(){var e;let N=(0,t.useParams)(),A=(0,t.useRouter)(),S=N.id,[T,F]=(0,a.useState)(null),[D,E]=(0,a.useState)(!0),[P,B]=(0,a.useState)(null),[H,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{async function e(){try{E(!0);let e=await fetch(`/api/placement-agreements/${S}`);if(!e.ok){if(404===e.status)throw Error("Agreement not found");throw Error("Failed to fetch agreement")}let s=await e.json();F(s.agreement||s)}catch(e){console.error("Error fetching agreement:",e),B(e instanceof Error?e.message:"Failed to load agreement")}finally{E(!1)}}S&&e()},[S]);let L=async()=>{try{R(!0);let e=await fetch(`/api/placement-agreements/${S}/sign`,{method:"POST"});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to initiate signing")}let s=await e.json();s.signing_url&&A.push(s.signing_url)}catch(e){console.error("Error initiating signing:",e),B(e instanceof Error?e.message:"Failed to start signing process")}finally{R(!1)}};if(D)return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsx)(l.Skeleton,{className:"h-8 w-64"}),(0,s.jsxs)(r.Card,{children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsx)(l.Skeleton,{className:"h-6 w-48"}),(0,s.jsx)(l.Skeleton,{className:"h-4 w-96"})]}),(0,s.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,s.jsx)(l.Skeleton,{className:"h-4 w-full"}),(0,s.jsx)(l.Skeleton,{className:"h-4 w-3/4"}),(0,s.jsx)(l.Skeleton,{className:"h-4 w-1/2"})]})]})]});if(P||!T)return(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)(r.Card,{className:"max-w-lg mx-auto",children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2 text-destructive",children:[(0,s.jsx)(o.AlertCircle,{className:"h-5 w-5"}),"Error"]}),(0,s.jsx)(r.CardDescription,{children:P||"Agreement not found"})]}),(0,s.jsx)(r.CardContent,{children:(0,s.jsxs)(i.Button,{variant:"outline",onClick:()=>A.back(),children:[(0,s.jsx)(j.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Go Back"]})})]})});let z=v[T.status]||v.draft,O=z.icon,G="pending_cp_signature"===T.status,M="active"===T.status,U=T.signed_pdf_url||T.pdf_url;return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>A.back(),children:(0,s.jsx)(j.ArrowLeft,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Placement Agreement"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:_[T.agreement_type]||T.agreement_type})]})]}),(0,s.jsxs)(n.Badge,{className:(0,C.cn)("flex items-center gap-1",z.bg),children:[(0,s.jsx)(O,{className:"h-3 w-3"}),T.status.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())]})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,s.jsxs)(r.Card,{className:"md:col-span-2",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(c.FileText,{className:"h-5 w-5"}),"Agreement Details"]})}),(0,s.jsxs)(r.CardContent,{className:"space-y-6",children:[T.commercial_partner&&(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(p.Building2,{className:"h-8 w-8 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Commercial Partner"}),(0,s.jsx)("p",{className:"font-medium",children:T.commercial_partner.legal_name||T.commercial_partner.display_name})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(h.Percent,{className:"h-4 w-4"}),"Commission Rate"]}),(0,s.jsx)("p",{className:"font-medium text-lg",children:(e=T.default_commission_bps,`${(e/100).toFixed(2)}%`)})]}),T.commission_cap_amount&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Commission Cap"}),(0,s.jsxs)("p",{className:"font-medium",children:["$",T.commission_cap_amount.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(u.Globe,{className:"h-4 w-4"}),"Territory"]}),(0,s.jsx)("p",{className:"font-medium",children:T.territory||"Global"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Exclusivity"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:T.exclusivity_level?.replace(/_/g," ")||"Non-exclusive"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Payment Terms"}),(0,s.jsx)("p",{className:"font-medium",children:w[T.payment_terms||""]||T.payment_terms||"-"})]}),T.deal_types&&T.deal_types.length>0&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deal Types"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:T.deal_types.map(e=>(0,s.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:e},e))})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,s.jsx)(g.Calendar,{className:"h-4 w-4"}),"Important Dates"]})}),(0,s.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Created"}),(0,s.jsx)("p",{className:"font-medium",children:k(T.created_at)})]}),T.signed_date&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Signed"}),(0,s.jsx)("p",{className:"font-medium",children:k(T.signed_date)})]}),T.effective_date&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Effective From"}),(0,s.jsx)("p",{className:"font-medium",children:k(T.effective_date)})]}),T.expiry_date&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Expires"}),(0,s.jsx)("p",{className:"font-medium",children:k(T.expiry_date)})]})]})]}),(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{className:"text-base",children:"Actions"})}),(0,s.jsxs)(r.CardContent,{className:"space-y-3",children:[G&&(0,s.jsx)(i.Button,{className:"w-full",onClick:L,disabled:H,children:H?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Preparing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.FileSignature,{className:"h-4 w-4 mr-2"}),"Sign Agreement"]})}),U&&(0,s.jsx)(i.Button,{variant:"outline",className:"w-full",asChild:!0,children:(0,s.jsxs)("a",{href:T.signed_pdf_url||T.pdf_url||"#",target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)(f.Download,{className:"h-4 w-4 mr-2"}),M?"Download Signed Agreement":"View Agreement PDF"]})}),(0,s.jsx)(i.Button,{variant:"ghost",className:"w-full",asChild:!0,children:(0,s.jsxs)(b.default,{href:"/versotech_main/placement-agreements",children:[(0,s.jsx)(j.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Agreements"]})})]})]}),"pending_ceo_signature"===T.status&&(0,s.jsx)(r.Card,{className:"border-blue-200 bg-blue-50",children:(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(m.Clock,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-blue-900",children:"Awaiting CEO Signature"}),(0,s.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"The CEO must sign this agreement before you can add your signature."})]})]})})}),"pending_arranger_signature"===T.status&&(0,s.jsx)(r.Card,{className:"border-purple-200 bg-purple-50",children:(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(m.Clock,{className:"h-5 w-5 text-purple-600 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-purple-900",children:"Awaiting Arranger Signature"}),(0,s.jsx)("p",{className:"text-sm text-purple-700 mt-1",children:"The Arranger must sign this agreement before you can add your signature."})]})]})})}),"pending_cp_signature"===T.status&&(0,s.jsx)(r.Card,{className:"border-orange-200 bg-orange-50",children:(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(x.FileSignature,{className:"h-5 w-5 text-orange-600 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-orange-900",children:"Your Signature Required"}),(0,s.jsx)("p",{className:"text-sm text-orange-700 mt-1",children:'This agreement has been signed and is ready for your signature. Click "Sign Agreement" to complete the signing process.'})]})]})})}),M&&(0,s.jsx)(r.Card,{className:"border-green-200 bg-green-50",children:(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(d.CheckCircle2,{className:"h-5 w-5 text-green-600 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-green-900",children:"Agreement Active"}),(0,s.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"This agreement is fully executed and active."})]})]})})})]})]})]})}e.s(["default",()=>A])}]);