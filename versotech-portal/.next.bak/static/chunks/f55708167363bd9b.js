(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,371432,e=>{"use strict";let t;var r,n,l,a,i,s,o,d,c,u,h,m,g,f,x,p,b,v,y,j=e.i(722679),w=e.i(340915),N=e.i(603274),C=e.i(820417),S=e.i(90613),_=e.i(316264),D=e.i(191569),E=e.i(129432),k=e.i(538892),L=e.i(429760),R=e.i(312692),T=e.i(514133),I=e.i(401148),O=e.i(119311);let M=(0,e.i(410587).default)("flag-triangle-right",[["path",{d:"M6 22V2.8a.8.8 0 0 1 1.17-.71l11.38 5.69a.8.8 0 0 1 0 1.44L6 15.5",key:"kfjsu0"}]]);var P=e.i(725958),V=e.i(110686),F=e.i(831833),A=e.i(750809),B=e.i(776158),q=e.i(74434),U=e.i(971743),z=e.i(496383),K=e.i(818893),H=e.i(400557);let Y="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function X(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function W(e){return"nodeType"in e}function G(e){var t,r;return e?X(e)?e:W(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function J(e){let{Document:t}=G(e);return e instanceof t}function $(e){return!X(e)&&e instanceof G(e).HTMLElement}function Q(e){return e instanceof G(e).SVGElement}function Z(e){return e?X(e)?e.document:W(e)?J(e)?e:$(e)||Q(e)?e.ownerDocument:document:document:document}let ee=Y?w.useLayoutEffect:w.useEffect;function et(e){let t=(0,w.useRef)(e);return ee(()=>{t.current=e}),(0,w.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function er(e,t){void 0===t&&(t=[e]);let r=(0,w.useRef)(e);return ee(()=>{r.current!==e&&(r.current=e)},t),r}function en(e,t){let r=(0,w.useRef)();return(0,w.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function el(e){let t=et(e),r=(0,w.useRef)(null),n=(0,w.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function ea(e){let t=(0,w.useRef)();return(0,w.useEffect)(()=>{t.current=e},[e]),t.current}let ei={};function es(e,t){return(0,w.useMemo)(()=>{if(t)return t;let r=null==ei[e]?0:ei[e]+1;return ei[e]=r,e+"-"+r},[e,t])}function eo(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),l=1;l<r;l++)n[l-1]=arguments[l];return n.reduce((t,r)=>{for(let[n,l]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*l)}return t},{...t})}}let ed=eo(1),ec=eo(-1);function eu(e){if(!e)return!1;let{KeyboardEvent:t}=G(e.target);return t&&e instanceof t}function eh(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=G(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let em=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[em.Translate.toString(e),em.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),eg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",ef={display:"none"};function ex(e){let{id:t,value:r}=e;return w.default.createElement("div",{id:t,style:ef},r)}function ep(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return w.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let eb=(0,w.createContext)(null),ev={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ey={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ej(e){var t;let r,{announcements:n=ey,container:l,hiddenTextDescribedById:a,screenReaderInstructions:i=ev}=e,{announce:s,announcement:o}=function(){let[e,t]=(0,w.useState)("");return{announce:(0,w.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),d=es("DndLiveRegion"),[c,u]=(0,w.useState)(!1);if((0,w.useEffect)(()=>{u(!0)},[]),t=(0,w.useMemo)(()=>({onDragStart(e){let{active:t}=e;s(n.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;n.onDragMove&&s(n.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;s(n.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;s(n.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;s(n.onDragCancel({active:t,over:r}))}}),[s,n]),r=(0,w.useContext)(eb),(0,w.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!c)return null;let h=w.default.createElement(w.default.Fragment,null,w.default.createElement(ex,{id:a,value:i.draggable}),w.default.createElement(ep,{id:d,announcement:o}));return l?(0,H.createPortal)(h,l):h}function ew(){}function eN(e,t){return(0,w.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function eC(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let eS=Object.freeze({x:0,y:0});function e_(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}let eD=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,l=[];for(let e of n){let{id:n}=e,a=r.get(n);if(a){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height);if(n<l&&r<a){let i=t.width*t.height,s=e.width*e.height,o=(l-n)*(a-r);return Number((o/(i+s-o)).toFixed(4))}return 0}(a,t);r>0&&l.push({id:n,data:{droppableContainer:e,value:r}})}}return l.sort(e_)};function eE(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:eS}let ek=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function eL(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let eR={ignoreTransform:!1};function eT(e,t){void 0===t&&(t=eR);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=G(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=eL(t);if(!n)return e;let{scaleX:l,scaleY:a,x:i,y:s}=n,o=e.left-i-(1-l)*parseFloat(r),d=e.top-s-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),c=l?e.width/l:e.width,u=a?e.height/a:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(r,t,n))}let{top:n,left:l,width:a,height:i,bottom:s,right:o}=r;return{top:n,left:l,width:a,height:i,bottom:s,right:o}}function eI(e){return eT(e,{ignoreTransform:!0})}function eO(e,t){let r=[];return e?function n(l){var a,i;let s;if(null!=t&&r.length>=t||!l)return r;if(J(l)&&null!=l.scrollingElement&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!$(l)||Q(l)||r.includes(l))return r;let o=G(e).getComputedStyle(l);return(l!==e&&(void 0===(a=o)&&(a=G(l).getComputedStyle(l)),s=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=a[e];return"string"==typeof t&&s.test(t)}))&&r.push(l),void 0===(i=o)&&(i=G(l).getComputedStyle(l)),"fixed"===i.position)?r:n(l.parentNode)}(e):r}function eM(e){let[t]=eO(e,1);return null!=t?t:null}function eP(e){return Y&&e?X(e)?e:W(e)?J(e)||e===Z(e).scrollingElement?window:$(e)?e:null:null:null}function eV(e){return X(e)?e.scrollX:e.scrollLeft}function eF(e){return X(e)?e.scrollY:e.scrollTop}function eA(e){return{x:eV(e),y:eF(e)}}function eB(e){return!!Y&&!!e&&e===document.scrollingElement}function eq(e){let t={x:0,y:0},r=eB(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y,a=e.scrollLeft<=t.x;return{isTop:l,isLeft:a,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}(n=h||(h={}))[n.Forward=1]="Forward",n[n.Backward=-1]="Backward";let eU={x:.2,y:.2};function ez(e){return e.reduce((e,t)=>ed(e,eA(t)),eS)}function eK(e,t){if(void 0===t&&(t=eT),!e)return;let{top:r,left:n,bottom:l,right:a}=t(e);eM(e)&&(l<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let eH=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eV(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+eF(t),0)}]];class eY{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=eO(t),n=ez(r);for(const[t,l,a]of(this.rect={...e},this.width=e.width,this.height=e.height,eH))for(const e of l)Object.defineProperty(this,e,{get:()=>{let l=a(r),i=n[t]-l;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eX{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function eW(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function eG(e){e.preventDefault()}function eJ(e){e.stopPropagation()}(l=m||(m={})).Click="click",l.DragStart="dragstart",l.Keydown="keydown",l.ContextMenu="contextmenu",l.Resize="resize",l.SelectionChange="selectionchange",l.VisibilityChange="visibilitychange",(a=g||(g={})).Space="Space",a.Down="ArrowDown",a.Right="ArrowRight",a.Left="ArrowLeft",a.Up="ArrowUp",a.Esc="Escape",a.Enter="Enter",a.Tab="Tab";let e$={start:[g.Space,g.Enter],cancel:[g.Esc],end:[g.Space,g.Enter,g.Tab]},eQ=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case g.Right:return{...r,x:r.x+25};case g.Left:return{...r,x:r.x-25};case g.Down:return{...r,y:r.y+25};case g.Up:return{...r,y:r.y-25}}};class eZ{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new eX(Z(t)),this.windowListeners=new eX(G(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(m.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eK(r),t(eS)}handleKeyDown(e){if(eu(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:l=e$,coordinateGetter:a=eQ,scrollBehavior:i="smooth"}=n,{code:s}=e;if(l.end.includes(s))return void this.handleEnd(e);if(l.cancel.includes(s))return void this.handleCancel(e);let{collisionRect:o}=r.current,d=o?{x:o.left,y:o.top}:eS;this.referenceCoordinates||(this.referenceCoordinates=d);let c=a(e,{active:t,context:r.current,currentCoordinates:d});if(c){let t=ec(c,d),n={x:0,y:0},{scrollableAncestors:l}=r.current;for(let r of l){let l=e.code,{isTop:a,isRight:s,isLeft:o,isBottom:d,maxScroll:u,minScroll:h}=eq(r),m=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:l,width:e.clientWidth,height:e.clientHeight}}(r),f={x:Math.min(l===g.Right?m.right-m.width/2:m.right,Math.max(l===g.Right?m.left:m.left+m.width/2,c.x)),y:Math.min(l===g.Down?m.bottom-m.height/2:m.bottom,Math.max(l===g.Down?m.top:m.top+m.height/2,c.y))},x=l===g.Right&&!s||l===g.Left&&!o,p=l===g.Down&&!d||l===g.Up&&!a;if(x&&f.x!==c.x){let e=r.scrollLeft+t.x,a=l===g.Right&&e<=u.x||l===g.Left&&e>=h.x;if(a&&!t.y)return void r.scrollTo({left:e,behavior:i});a?n.x=r.scrollLeft-e:n.x=l===g.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,n.x&&r.scrollBy({left:-n.x,behavior:i});break}if(p&&f.y!==c.y){let e=r.scrollTop+t.y,a=l===g.Down&&e<=u.y||l===g.Up&&e>=h.y;if(a&&!t.x)return void r.scrollTo({top:e,behavior:i});a?n.y=r.scrollTop-e:n.y=l===g.Down?r.scrollTop-u.y:r.scrollTop-h.y,n.y&&r.scrollBy({top:-n.y,behavior:i});break}}this.handleMove(e,ed(ec(c,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function e0(e){return!!(e&&"distance"in e)}function e1(e){return!!(e&&"delay"in e)}eZ.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=e$,onActivation:l}=t,{active:a}=r,{code:i}=e.nativeEvent;if(n.start.includes(i)){let t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==l||l({event:e.nativeEvent}),!0)}return!1}}];class e2{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=G(e);return e instanceof t?e:Z(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=Z(a),this.documentListeners=new eX(this.document),this.listeners=new eX(r),this.windowListeners=new eX(G(a)),this.initialCoordinates=null!=(n=eh(l))?n:eS,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.DragStart,eG),this.windowListeners.add(m.VisibilityChange,this.handleCancel),this.windowListeners.add(m.ContextMenu,eG),this.documentListeners.add(m.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(e1(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(e0(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(m.Click,eJ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(m.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!n)return;let s=null!=(t=eh(e))?t:eS,o=ec(n,s);if(!r&&i){if(e0(i)){if(null!=i.tolerance&&eW(o,i.tolerance))return this.handleCancel();if(eW(o,i.distance))return this.handleStart()}return e1(i)&&eW(o,i.tolerance)?this.handleCancel():void this.handlePending(i,o)}e.cancelable&&e.preventDefault(),a(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===g.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let e4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class e3 extends e2{constructor(e){const{event:t}=e;super(e,e4,Z(t.target))}}e3.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];(i=f||(f={}))[i.RightClick=2]="RightClick";(s=x||(x={}))[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect",(o=p||(p={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let e5={x:{[h.Backward]:!1,[h.Forward]:!1},y:{[h.Backward]:!1,[h.Forward]:!1}};(d=b||(b={}))[d.Always=0]="Always",d[d.BeforeDragging=1]="BeforeDragging",d[d.WhileDragging=2]="WhileDragging",(v||(v={})).Optimized="optimized";let e6=new Map;function e8(e,t){return en(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function e9(e){let{callback:t,disabled:r}=e,n=et(t),l=(0,w.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(n)},[r]);return(0,w.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}function e7(e){return new eY(eT(e),e)}function te(e,t,r){void 0===t&&(t=e7);let[n,l]=(0,w.useState)(null);function a(){l(n=>{if(!e)return null;if(!1===e.isConnected){var l;return null!=(l=null!=n?n:r)?l:null}let a=t(e);return JSON.stringify(n)===JSON.stringify(a)?n:a})}let i=function(e){let{callback:t,disabled:r}=e,n=et(t),l=(0,w.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,w.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){a();break}}}}),s=e9({callback:a});return ee(()=>{a(),e?(null==s||s.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==i||i.disconnect())},[e]),n}let tt=[];function tr(e,t){void 0===t&&(t=[]);let r=(0,w.useRef)(null);return(0,w.useEffect)(()=>{r.current=null},t),(0,w.useEffect)(()=>{let t=e!==eS;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?ec(e,r.current):eS}function tn(e){return(0,w.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let tl=[];function ta(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return $(t)?t:e}let ti=[{sensor:e3,options:{}},{sensor:eZ,options:{}}],ts={current:{}},to={draggable:{measure:eI},droppable:{measure:eI,strategy:b.WhileDragging,frequency:v.Optimized},dragOverlay:{measure:eT}};class td extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let tc={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new td,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ew},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:to,measureDroppableContainers:ew,windowRect:null,measuringScheduled:!1},tu={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ew,draggableNodes:new Map,over:null,measureDroppableContainers:ew},th=(0,w.createContext)(tu),tm=(0,w.createContext)(tc);function tg(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new td}}}function tf(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:n}=r,l=new td(e.droppable.containers);return l.set(n,r),{...e,droppable:{...e.droppable,containers:l}}}case u.SetDroppableDisabled:{let{id:r,key:n,disabled:l}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;let i=new td(e.droppable.containers);return i.set(r,{...a,disabled:l}),{...e,droppable:{...e.droppable,containers:i}}}case u.UnregisterDroppable:{let{id:r,key:n}=t,l=e.droppable.containers.get(r);if(!l||n!==l.key)return e;let a=new td(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function tx(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:l}=(0,w.useContext)(th),a=ea(n),i=ea(null==r?void 0:r.id);return(0,w.useEffect)(()=>{if(!t&&!n&&a&&null!=i){if(!eu(a)||document.activeElement===a.target)return;let e=l.get(i);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(eg)?e:e.querySelector(eg);if(t){t.focus();break}}})}},[n,t,l,i,a]),null}function tp(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}let tb=(0,w.createContext)({...eS,scaleX:1,scaleY:1});(c=y||(y={}))[c.Uninitialized=0]="Uninitialized",c[c.Initializing=1]="Initializing",c[c.Initialized=2]="Initialized";let tv=(0,w.memo)(function(e){var t,r,n,l,a,i,s,o;let d,c,m,g,f,v,j,N,{id:C,accessibility:S,autoScroll:_=!0,children:D,sensors:E=ti,collisionDetection:k=eD,measuring:L,modifiers:R,...T}=e,[I,O]=(0,w.useReducer)(tf,void 0,tg),[M,P]=function(){let[e]=(0,w.useState)(()=>new Set),t=(0,w.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,w.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[V,F]=(0,w.useState)(y.Uninitialized),A=V===y.Initialized,{draggable:{active:B,nodes:q,translate:U},droppable:{containers:z}}=I,K=null!=B?q.get(B):null,X=(0,w.useRef)({initial:null,translated:null}),W=(0,w.useMemo)(()=>{var e;return null!=B?{id:B,data:null!=(e=null==K?void 0:K.data)?e:ts,rect:X}:null},[B,K]),J=(0,w.useRef)(null),[Q,Z]=(0,w.useState)(null),[et,ei]=(0,w.useState)(null),eo=er(T,Object.values(T)),ec=es("DndDescribedBy",C),eu=(0,w.useMemo)(()=>z.getEnabled(),[z]),em=(0,w.useMemo)(()=>({draggable:{...to.draggable,...null==L?void 0:L.draggable},droppable:{...to.droppable,...null==L?void 0:L.droppable},dragOverlay:{...to.dragOverlay,...null==L?void 0:L.dragOverlay}}),[null==L?void 0:L.draggable,null==L?void 0:L.droppable,null==L?void 0:L.dragOverlay]),{droppableRects:eg,measureDroppableContainers:ef,measuringScheduled:ex}=function(e,t){let{dragging:r,dependencies:n,config:l}=t,[a,i]=(0,w.useState)(null),{frequency:s,measure:o,strategy:d}=l,c=(0,w.useRef)(e),u=function(){switch(d){case b.Always:return!1;case b.BeforeDragging:return r;default:return!r}}(),h=er(u),m=(0,w.useCallback)(function(e){void 0===e&&(e=[]),h.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),g=(0,w.useRef)(null),f=en(t=>{if(u&&!r)return e6;if(!t||t===e6||c.current!==e||null!=a){let t=new Map;for(let r of e){if(!r)continue;if(a&&a.length>0&&!a.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new eY(o(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,a,r,u,o]);return(0,w.useEffect)(()=>{c.current=e},[e]),(0,w.useEffect)(()=>{u||m()},[r,u]),(0,w.useEffect)(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),(0,w.useEffect)(()=>{u||"number"!=typeof s||null!==g.current||(g.current=setTimeout(()=>{m(),g.current=null},s))},[s,u,m,...n]),{droppableRects:f,measureDroppableContainers:m,measuringScheduled:null!=a}}(eu,{dragging:A,dependencies:[U.x,U.y],config:em.droppable}),ep=en(e=>{var t;return null==B?null:null!=(t=null!=f?f:e)?t:null},[f=(g=null!=B?q.get(B):void 0)?g.node.current:null,B]),ev=(0,w.useMemo)(()=>et?eh(et):null,[et]),ey=(d=(null==Q?void 0:Q.autoScrollEnabled)===!1,c="object"==typeof _?!1===_.enabled:!1===_,m=A&&!d&&!c,"object"==typeof _?{..._,enabled:m}:{enabled:m}),ew=e8(ep,em.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:l=!0}=e,a=(0,w.useRef)(!1),{x:i,y:s}="boolean"==typeof l?{x:l,y:l}:l;ee(()=>{if(!i&&!s||!t){a.current=!1;return}if(a.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let l=eE(r(e),n);if(i||(l.x=0),s||(l.y=0),a.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let t=eM(e);t&&t.scrollBy({top:l.y,left:l.x})}},[t,i,s,n,r])}({activeNode:null!=B?q.get(B):null,config:ey.layoutShiftCompensation,initialRect:ew,measure:em.draggable.measure});let eN=te(ep,em.draggable.measure,ew),eC=te(ep?ep.parentElement:null),e_=(0,w.useRef)({activatorEvent:null,active:null,activeNode:ep,collisionRect:null,collisions:null,droppableRects:eg,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eL=z.getNodeFor(null==(t=e_.current.over)?void 0:t.id),eR=function(e){let{measure:t}=e,[r,n]=(0,w.useState)(null),l=e9({callback:(0,w.useCallback)(e=>{for(let{target:r}of e)if($(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[a,i]=el((0,w.useCallback)(e=>{let r=ta(e);null==l||l.disconnect(),r&&(null==l||l.observe(r)),n(r?t(r):null)},[t,l]));return(0,w.useMemo)(()=>({nodeRef:a,rect:r,setRef:i}),[r,a,i])}({measure:em.dragOverlay.measure}),eI=null!=(r=eR.nodeRef.current)?r:ep,eV=A?null!=(n=eR.rect)?n:eN:null,eF=!!(eR.nodeRef.current&&eR.rect),eK=(v=e8(a=eF?null:eN),eE(a,v)),eH=tn(eI?G(eI):null),eX=(i=A?null!=eL?eL:ep:null,j=(0,w.useRef)(i),N=en(e=>i?e&&e!==tt&&i&&j.current&&i.parentNode===j.current.parentNode?e:eO(i):tt,[i]),(0,w.useEffect)(()=>{j.current=i},[i]),N),eW=function(e,t){void 0===t&&(t=eT);let[r]=e,n=tn(r?G(r):null),[l,a]=(0,w.useState)(tl);function i(){a(()=>e.length?e.map(e=>eB(e)?n:new eY(t(e),e)):tl)}let s=e9({callback:i});return ee(()=>{null==s||s.disconnect(),i(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),l}(eX),eG=tp(R,{transform:{x:U.x-eK.x,y:U.y-eK.y,scaleX:1,scaleY:1},activatorEvent:et,active:W,activeNodeRect:eN,containerNodeRect:eC,draggingNodeRect:eV,over:e_.current.over,overlayNodeRect:eR.rect,scrollableAncestors:eX,scrollableAncestorRects:eW,windowRect:eH}),eJ=ev?ed(ev,U):null,e$=function(e){let[t,r]=(0,w.useState)(null),n=(0,w.useRef)(e),l=(0,w.useCallback)(e=>{let t=eP(e.target);t&&r(e=>e?(e.set(t,eA(t)),new Map(e)):null)},[]);return(0,w.useEffect)(()=>{let t=n.current;if(e!==t){a(t);let i=e.map(e=>{let t=eP(e);return t?(t.addEventListener("scroll",l,{passive:!0}),[t,eA(t)]):null}).filter(e=>null!=e);r(i.length?new Map(i):null),n.current=e}return()=>{a(e),a(t)};function a(e){e.forEach(e=>{let t=eP(e);null==t||t.removeEventListener("scroll",l)})}},[l,e]),(0,w.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>ed(e,t),eS):ez(e):eS,[e,t])}(eX),eQ=tr(e$),eZ=tr(e$,[eN]),e0=ed(eG,eQ),e1=eV?ek(eV,eG):null,e2=W&&e1?k({active:W,collisionRect:e1,droppableRects:eg,droppableContainers:eu,pointerCoordinates:eJ}):null,e4=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(e2,0),[e3,e7]=(0,w.useState)(null),td=(s=eF?eG:ed(eG,eZ),o=null!=(l=null==e3?void 0:e3.rect)?l:null,{...s,scaleX:o&&eN?o.width/eN.width:1,scaleY:o&&eN?o.height/eN.height:1}),tc=(0,w.useRef)(null),tu=(0,w.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==J.current)return;let l=q.get(J.current);if(!l)return;let a=e.nativeEvent,i=new r({active:J.current,activeNode:l,event:a,options:n,context:e_,onAbort(e){if(!q.get(e))return;let{onDragAbort:t}=eo.current,r={id:e};null==t||t(r),M({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!q.get(e))return;let{onDragPending:l}=eo.current,a={id:e,constraint:t,initialCoordinates:r,offset:n};null==l||l(a),M({type:"onDragPending",event:a})},onStart(e){let t=J.current;if(null==t)return;let r=q.get(t);if(!r)return;let{onDragStart:n}=eo.current,l={activatorEvent:a,active:{id:t,data:r.data,rect:X}};(0,H.unstable_batchedUpdates)(()=>{null==n||n(l),F(y.Initializing),O({type:u.DragStart,initialCoordinates:e,active:t}),M({type:"onDragStart",event:l}),Z(tc.current),ei(a)})},onMove(e){O({type:u.DragMove,coordinates:e})},onEnd:s(u.DragEnd),onCancel:s(u.DragCancel)});function s(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:l}=e_.current,i=null;if(t&&l){let{cancelDrop:s}=eo.current;i={activatorEvent:a,active:t,collisions:r,delta:l,over:n},e===u.DragEnd&&"function"==typeof s&&await Promise.resolve(s(i))&&(e=u.DragCancel)}J.current=null,(0,H.unstable_batchedUpdates)(()=>{O({type:e}),F(y.Uninitialized),e7(null),Z(null),ei(null),tc.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(i){let e=eo.current[t];null==e||e(i),M({type:t,event:i})}})}}tc.current=i},[q]),tv=(0,w.useCallback)((e,t)=>(r,n)=>{let l=r.nativeEvent,a=q.get(n);null!==J.current||!a||l.dndKit||l.defaultPrevented||!0===e(r,t.options,{active:a})&&(l.dndKit={capturedBy:t.sensor},J.current=n,tu(r,t))},[q,tu]),ty=(0,w.useMemo)(()=>E.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tv(e.handler,t)}))]},[]),[E,tv]);(0,w.useEffect)(()=>{if(!Y)return;let e=E.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},E.map(e=>{let{sensor:t}=e;return t})),ee(()=>{eN&&V===y.Initializing&&F(y.Initialized)},[eN,V]),(0,w.useEffect)(()=>{let{onDragMove:e}=eo.current,{active:t,activatorEvent:r,collisions:n,over:l}=e_.current;if(!t||!r)return;let a={active:t,activatorEvent:r,collisions:n,delta:{x:e0.x,y:e0.y},over:l};(0,H.unstable_batchedUpdates)(()=>{null==e||e(a),M({type:"onDragMove",event:a})})},[e0.x,e0.y]),(0,w.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:l}=e_.current;if(!e||null==J.current||!t||!l)return;let{onDragOver:a}=eo.current,i=n.get(e4),s=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:l.x,y:l.y},over:s};(0,H.unstable_batchedUpdates)(()=>{e7(s),null==a||a(o),M({type:"onDragOver",event:o})})},[e4]),ee(()=>{e_.current={activatorEvent:et,active:W,activeNode:ep,collisionRect:e1,collisions:e2,droppableRects:eg,draggableNodes:q,draggingNode:eI,draggingNodeRect:eV,droppableContainers:z,over:e3,scrollableAncestors:eX,scrollAdjustedTranslate:e0},X.current={initial:eV,translated:e1}},[W,ep,e2,e1,q,eI,eV,eg,z,e3,eX,e0]),function(e){let t,{acceleration:r,activator:n=x.Pointer,canScroll:l,draggingRect:a,enabled:i,interval:s=5,order:o=p.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:u,delta:m,threshold:g}=e,f=function(e){let{delta:t,disabled:r}=e,n=ea(t);return en(e=>{if(r||!n||!e)return e5;let l={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[h.Backward]:e.x[h.Backward]||-1===l.x,[h.Forward]:e.x[h.Forward]||1===l.x},y:{[h.Backward]:e.y[h.Backward]||-1===l.y,[h.Forward]:e.y[h.Forward]||1===l.y}}},[r,t,n])}({delta:m,disabled:!i}),[b,v]=(t=(0,w.useRef)(null),[(0,w.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,w.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,w.useRef)({x:0,y:0}),j=(0,w.useRef)({x:0,y:0}),N=(0,w.useMemo)(()=>{switch(n){case x.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case x.DraggableRect:return a}},[n,a,d]),C=(0,w.useRef)(null),S=(0,w.useCallback)(()=>{let e=C.current;if(!e)return;let t=y.current.x*j.current.x,r=y.current.y*j.current.y;e.scrollBy(t,r)},[]),_=(0,w.useMemo)(()=>o===p.TreeOrder?[...c].reverse():c,[o,c]);(0,w.useEffect)(()=>{if(!i||!c.length||!N)return void v();for(let e of _){if((null==l?void 0:l(e))===!1)continue;let t=u[c.indexOf(e)];if(!t)continue;let{direction:n,speed:a}=function(e,t,r,n,l){let{top:a,left:i,right:s,bottom:o}=r;void 0===n&&(n=10),void 0===l&&(l=eU);let{isTop:d,isBottom:c,isLeft:u,isRight:m}=eq(e),g={x:0,y:0},f={x:0,y:0},x={height:t.height*l.y,width:t.width*l.x};return!d&&a<=t.top+x.height?(g.y=h.Backward,f.y=n*Math.abs((t.top+x.height-a)/x.height)):!c&&o>=t.bottom-x.height&&(g.y=h.Forward,f.y=n*Math.abs((t.bottom-x.height-o)/x.height)),!m&&s>=t.right-x.width?(g.x=h.Forward,f.x=n*Math.abs((t.right-x.width-s)/x.width)):!u&&i<=t.left+x.width&&(g.x=h.Backward,f.x=n*Math.abs((t.left+x.width-i)/x.width)),{direction:g,speed:f}}(e,t,N,r,g);for(let e of["x","y"])f[e][n[e]]||(a[e]=0,n[e]=0);if(a.x>0||a.y>0){v(),C.current=e,b(S,s),y.current=a,j.current=n;return}}y.current={x:0,y:0},j.current={x:0,y:0},v()},[r,S,l,v,i,s,JSON.stringify(N),JSON.stringify(f),b,c,_,u,JSON.stringify(g)])}({...ey,delta:U,draggingRect:e1,pointerCoordinates:eJ,scrollableAncestors:eX,scrollableAncestorRects:eW});let tj=(0,w.useMemo)(()=>({active:W,activeNode:ep,activeNodeRect:eN,activatorEvent:et,collisions:e2,containerNodeRect:eC,dragOverlay:eR,draggableNodes:q,droppableContainers:z,droppableRects:eg,over:e3,measureDroppableContainers:ef,scrollableAncestors:eX,scrollableAncestorRects:eW,measuringConfiguration:em,measuringScheduled:ex,windowRect:eH}),[W,ep,eN,et,e2,eC,eR,q,z,eg,e3,ef,eX,eW,em,ex,eH]),tw=(0,w.useMemo)(()=>({activatorEvent:et,activators:ty,active:W,activeNodeRect:eN,ariaDescribedById:{draggable:ec},dispatch:O,draggableNodes:q,over:e3,measureDroppableContainers:ef}),[et,ty,W,eN,O,ec,q,e3,ef]);return w.default.createElement(eb.Provider,{value:P},w.default.createElement(th.Provider,{value:tw},w.default.createElement(tm.Provider,{value:tj},w.default.createElement(tb.Provider,{value:td},D)),w.default.createElement(tx,{disabled:(null==S?void 0:S.restoreFocus)===!1})),w.default.createElement(ej,{...S,hiddenTextDescribedById:ec}))}),ty=(0,w.createContext)(null),tj="button";function tw(){return(0,w.useContext)(tm)}let tN={timeout:25};function tC(e){let{animation:t,children:r}=e,[n,l]=(0,w.useState)(null),[a,i]=(0,w.useState)(null),s=ea(r);return r||n||!s||l(s),ee(()=>{if(!a)return;let e=null==n?void 0:n.key,r=null==n?void 0:n.props.id;null==e||null==r?l(null):Promise.resolve(t(r,a)).then(()=>{l(null)})},[t,n,a]),w.default.createElement(w.default.Fragment,null,r,n?(0,w.cloneElement)(n,{ref:i}):null)}let tS={x:0,y:0,scaleX:1,scaleY:1};function t_(e){let{children:t}=e;return w.default.createElement(th.Provider,{value:tu},w.default.createElement(tb.Provider,{value:tS},t))}let tD={position:"fixed",touchAction:"none"},tE=e=>eu(e)?"transform 250ms ease":void 0,tk=(0,w.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:l,children:a,className:i,rect:s,style:o,transform:d,transition:c=tE}=e;if(!s)return null;let u=l?d:{...d,scaleX:1,scaleY:1},h={...tD,width:s.width,height:s.height,top:s.top,left:s.left,transform:em.Transform.toString(u),transformOrigin:l&&n?function(e,t){let r=eh(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}(n,s):void 0,transition:"function"==typeof c?c(n):c,...o};return w.default.createElement(r,{className:i,style:h,ref:t},a)}),tL={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:em.Transform.toString(t)},{transform:em.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:n}=e,l={},{styles:a,className:i}=t;if(null!=a&&a.active)for(let[e,t]of Object.entries(a.active))void 0!==t&&(l[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=a&&a.dragOverlay)for(let[e,t]of Object.entries(a.dragOverlay))void 0!==t&&n.node.style.setProperty(e,t);return null!=i&&i.active&&r.node.classList.add(i.active),null!=i&&i.dragOverlay&&n.node.classList.add(i.dragOverlay),function(){for(let[e,t]of Object.entries(l))r.node.style.setProperty(e,t);null!=i&&i.active&&r.node.classList.remove(i.active)}})},tR=0,tT=w.default.memo(e=>{var t;let{adjustScale:r=!1,children:n,dropAnimation:l,style:a,transition:i,modifiers:s,wrapperElement:o="div",className:d,zIndex:c=999}=e,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:g,draggableNodes:f,droppableContainers:x,dragOverlay:p,over:b,measuringConfiguration:v,scrollableAncestors:y,scrollableAncestorRects:j,windowRect:N}=tw(),C=(0,w.useContext)(tb),S=(t=null==h?void 0:h.id,(0,w.useMemo)(()=>{if(null!=t)return++tR},[t])),_=tp(s,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:p.rect,over:b,overlayNodeRect:p.rect,scrollableAncestors:y,scrollableAncestorRects:j,transform:C,windowRect:N}),D=e8(m),E=function(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:l}=e;return et((e,a)=>{if(null===t)return;let i=r.get(e);if(!i)return;let s=i.node.current;if(!s)return;let o=ta(a);if(!o)return;let{transform:d}=G(a).getComputedStyle(a),c=eL(d);if(!c)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:n,keyframes:l}={...tL,...e};return e=>{let{active:a,dragOverlay:i,transform:s,...o}=e;if(!t)return;let d={x:i.rect.left-a.rect.left,y:i.rect.top-a.rect.top},c={scaleX:1!==s.scaleX?a.rect.width*s.scaleX/i.rect.width:1,scaleY:1!==s.scaleY?a.rect.height*s.scaleY/i.rect.height:1},u={x:s.x-d.x,y:s.y-d.y,...c},h=l({...o,active:a,dragOverlay:i,transform:{initial:s,final:u}}),[m]=h,g=h[h.length-1];if(JSON.stringify(m)===JSON.stringify(g))return;let f=null==n?void 0:n({active:a,dragOverlay:i,...o}),x=i.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{x.onfinish=()=>{null==f||f(),e()}})}}(t);return eK(s,l.draggable.measure),u({active:{id:e,data:i.data,node:s,rect:l.draggable.measure(s)},draggableNodes:r,dragOverlay:{node:a,rect:l.dragOverlay.measure(o)},droppableContainers:n,measuringConfiguration:l,transform:c})})}({config:l,draggableNodes:f,droppableContainers:x,measuringConfiguration:v}),k=D?p.setRef:void 0;return w.default.createElement(t_,null,w.default.createElement(tC,{animation:E},h&&S?w.default.createElement(tk,{key:S,id:h.id,ref:k,as:o,activatorEvent:u,adjustScale:r,className:d,transition:i,rect:D,style:{zIndex:c,...a},transform:_},n):null))});function tI(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function tO(e){return null!==e&&e>=0}let tM=e=>{let{rects:t,activeIndex:r,overIndex:n,index:l}=e,a=tI(t,n,r),i=t[l],s=a[l];return s&&i?{x:s.left-i.left,y:s.top-i.top,scaleX:s.width/i.width,scaleY:s.height/i.height}:null},tP="Sortable",tV=w.default.createContext({activeIndex:-1,containerId:tP,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tM,disabled:{draggable:!1,droppable:!1}});function tF(e){let{children:t,id:r,items:n,strategy:l=tM,disabled:a=!1}=e,{active:i,dragOverlay:s,droppableRects:o,over:d,measureDroppableContainers:c}=tw(),u=es(tP,r),h=null!==s.rect,m=(0,w.useMemo)(()=>n.map(e=>"object"==typeof e&&"id"in e?e.id:e),[n]),g=null!=i,f=i?m.indexOf(i.id):-1,x=d?m.indexOf(d.id):-1,p=(0,w.useRef)(m),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(m,p.current),v=-1!==x&&-1===f||b,y="boolean"==typeof a?{draggable:a,droppable:a}:a;ee(()=>{b&&g&&c(m)},[b,m,g,c]),(0,w.useEffect)(()=>{p.current=m},[m]);let j=(0,w.useMemo)(()=>({activeIndex:f,containerId:u,disabled:y,disableTransforms:v,items:m,overIndex:x,useDragOverlay:h,sortedRects:m.reduce((e,t,r)=>{let n=o.get(t);return n&&(e[r]=n),e},Array(m.length)),strategy:l}),[f,u,y.draggable,y.droppable,v,m,x,o,h,l]);return w.default.createElement(tV.Provider,{value:j},t)}let tA=e=>{let{id:t,items:r,activeIndex:n,overIndex:l}=e;return tI(r,n,l).indexOf(t)},tB=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:l,items:a,newIndex:i,previousItems:s,previousContainerId:o,transition:d}=e;return!!d&&!!n&&(s===a||l!==i)&&(!!r||i!==l&&t===o)},tq={duration:200,easing:"ease"},tU="transform",tz=em.Transition.toString({property:tU,duration:0,easing:"linear"}),tK={roleDescription:"sortable"};function tH(e){var t,r,n,l;let{animateLayoutChanges:a=tB,attributes:i,disabled:s,data:o,getNewIndex:d=tA,id:c,strategy:h,resizeObserverConfig:m,transition:g=tq}=e,{items:f,containerId:x,activeIndex:p,disabled:b,disableTransforms:v,sortedRects:y,overIndex:j,useDragOverlay:N,strategy:C}=(0,w.useContext)(tV),S=(t=s,r=b,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(n=null==t?void 0:t.draggable)?n:r.draggable,droppable:null!=(l=null==t?void 0:t.droppable)?l:r.droppable}),_=f.indexOf(c),D=(0,w.useMemo)(()=>({sortable:{containerId:x,index:_,items:f},...o}),[x,o,_,f]),E=(0,w.useMemo)(()=>f.slice(f.indexOf(c)),[f,c]),{rect:k,node:L,isOver:R,setNodeRef:T}=function(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:l}=e,a=es("Droppable"),{active:i,dispatch:s,over:o,measureDroppableContainers:d}=(0,w.useContext)(th),c=(0,w.useRef)({disabled:r}),h=(0,w.useRef)(!1),m=(0,w.useRef)(null),g=(0,w.useRef)(null),{disabled:f,updateMeasurementsFor:x,timeout:p}={...tN,...l},b=er(null!=x?x:n),v=e9({callback:(0,w.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),g.current=null},p)},[p]),disabled:f||!i}),[y,j]=el((0,w.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),h.current=!1),e&&v.observe(e))},[v])),N=er(t);return(0,w.useEffect)(()=>{v&&y.current&&(v.disconnect(),h.current=!1,v.observe(y.current))},[y,v]),(0,w.useEffect)(()=>(s({type:u.RegisterDroppable,element:{id:n,key:a,disabled:r,node:y,rect:m,data:N}}),()=>s({type:u.UnregisterDroppable,key:a,id:n})),[n]),(0,w.useEffect)(()=>{r!==c.current.disabled&&(s({type:u.SetDroppableDisabled,id:n,key:a,disabled:r}),c.current.disabled=r)},[n,a,r,s]),{active:i,rect:m,isOver:(null==o?void 0:o.id)===n,node:y,over:o,setNodeRef:j}}({id:c,data:D,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...m}}),{active:I,activatorEvent:O,activeNodeRect:M,attributes:P,setNodeRef:V,listeners:F,isDragging:A,over:B,setActivatorNodeRef:q,transform:U}=function(e){let{id:t,data:r,disabled:n=!1,attributes:l}=e,a=es("Draggable"),{activators:i,activatorEvent:s,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:h}=(0,w.useContext)(th),{role:m=tj,roleDescription:g="draggable",tabIndex:f=0}=null!=l?l:{},x=(null==o?void 0:o.id)===t,p=(0,w.useContext)(x?tb:ty),[b,v]=el(),[y,j]=el(),N=(0,w.useMemo)(()=>i.reduce((e,r)=>{let{eventName:n,handler:l}=r;return e[n]=e=>{l(e,t)},e},{}),[i,t]),C=er(r);return ee(()=>(u.set(t,{id:t,key:a,node:b,activatorNode:y,data:C}),()=>{let e=u.get(t);e&&e.key===a&&u.delete(t)}),[u,t]),{active:o,activatorEvent:s,activeNodeRect:d,attributes:(0,w.useMemo)(()=>({role:m,tabIndex:f,"aria-disabled":n,"aria-pressed":!!x&&m===tj||void 0,"aria-roledescription":g,"aria-describedby":c.draggable}),[n,m,f,x,g,c.draggable]),isDragging:x,listeners:n?void 0:N,node:b,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:p}}({id:c,data:D,attributes:{...tK,...i},disabled:S.draggable}),z=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(T,V),K=!!I,H=K&&!v&&tO(p)&&tO(j),Y=!N&&A,X=Y&&H?U:null,W=H?null!=X?X:(null!=h?h:C)({rects:y,activeNodeRect:M,activeIndex:p,overIndex:j,index:_}):null,G=tO(p)&&tO(j)?d({id:c,items:f,activeIndex:p,overIndex:j}):_,J=null==I?void 0:I.id,$=(0,w.useRef)({activeId:J,items:f,newIndex:G,containerId:x}),Q=f!==$.current.items,Z=a({active:I,containerId:x,isDragging:A,isSorting:K,id:c,index:_,items:f,newIndex:$.current.newIndex,previousItems:$.current.items,previousContainerId:$.current.containerId,transition:g,wasDragging:null!=$.current.activeId}),et=function(e){let{disabled:t,index:r,node:n,rect:l}=e,[a,i]=(0,w.useState)(null),s=(0,w.useRef)(r);return ee(()=>{if(!t&&r!==s.current&&n.current){let e=l.current;if(e){let t=eT(n.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&i(r)}}r!==s.current&&(s.current=r)},[t,r,n,l]),(0,w.useEffect)(()=>{a&&i(null)},[a]),a}({disabled:!Z,index:_,node:L,rect:k});return(0,w.useEffect)(()=>{K&&$.current.newIndex!==G&&($.current.newIndex=G),x!==$.current.containerId&&($.current.containerId=x),f!==$.current.items&&($.current.items=f)},[K,G,x,f]),(0,w.useEffect)(()=>{if(J===$.current.activeId)return;if(null!=J&&null==$.current.activeId){$.current.activeId=J;return}let e=setTimeout(()=>{$.current.activeId=J},50);return()=>clearTimeout(e)},[J]),{active:I,activeIndex:p,attributes:P,data:D,rect:k,index:_,newIndex:G,items:f,isOver:R,isSorting:K,isDragging:A,listeners:F,node:L,overIndex:j,over:B,setNodeRef:z,setActivatorNodeRef:q,setDroppableNodeRef:T,setDraggableNodeRef:V,transform:null!=et?et:W,transition:et||Q&&$.current.newIndex===_?tz:(!Y||eu(O))&&g&&(K||Z)?em.Transition.toString({...g,property:tU}):void 0}}g.Down,g.Right,g.Up,g.Left;let tY=(0,w.createContext)(void 0);function tX({columns:e,data:t,onDataChange:r,children:n}){let[l,a]=(0,w.useState)(null),i=eC(eN(e3,{activationConstraint:{distance:8}}));return(0,j.jsx)(tY.Provider,{value:{columns:e,data:t,activeId:l,setActiveId:a,onDataChange:r},children:(0,j.jsxs)(tv,{sensors:i,onDragStart:e=>{a(e.active.id)},onDragEnd:n=>{let{active:l,over:i}=n;if(!i)return void a(null);let s=t.find(e=>e.id===l.id),o=e.find(e=>e.id===i.id);s&&o&&s.status!==o.id&&r(t.map(e=>e.id===l.id?{...e,status:o.id}:e)),a(null)},children:[(0,j.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4",children:e.map(e=>n(e))}),(0,j.jsx)(tT,{children:l?(0,j.jsx)("div",{className:"rounded-lg border border-white/20 bg-card p-3 shadow-lg opacity-80",children:"Dragging..."}):null})]})})}function tW({id:e,children:t}){let{setNodeRef:r}=tH({id:e});return(0,j.jsx)("div",{ref:r,className:"flex min-w-[300px] flex-1 flex-col rounded-lg border border-white/10 bg-white/5",children:t})}function tG({children:e}){return(0,j.jsx)("div",{className:"border-b border-white/10 p-4 font-semibold text-foreground",children:e})}function tJ({id:e,children:t}){let{data:r}=function(){let e=(0,w.useContext)(tY);if(!e)throw Error("useKanban must be used within KanbanProvider");return e}(),n=(0,w.useMemo)(()=>r.filter(t=>t.status===e),[r,e]),l=(0,w.useMemo)(()=>n.map(e=>e.id),[n]);return(0,j.jsx)(tF,{items:l,children:(0,j.jsx)("div",{className:"flex flex-col gap-2 p-4 min-h-[200px]",children:n.map(e=>t(e))})})}function t$({id:e,column:t,children:r,onClick:n}){let{attributes:l,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:d}=tH({id:e,data:{column:t}}),c={transform:em.Transform.toString(s),transition:o,opacity:d?.5:1};return(0,j.jsx)("div",{ref:i,style:c,...l,...a,onClick:n,className:"cursor-pointer rounded-lg border border-white/10 bg-white/5 p-3 hover:bg-white/10 transition-colors",children:r})}let tQ=(0,w.createContext)(void 0);function tZ({children:e,onDragEnd:t}){let[r,n]=(0,w.useState)(null),l=eC(eN(e3,{activationConstraint:{distance:8}}));return(0,j.jsx)(tQ.Provider,{value:{activeId:r,setActiveId:n},children:(0,j.jsxs)(tv,{sensors:l,onDragStart:e=>{n(e.active.id)},onDragEnd:e=>{n(null),t?.(e)},children:[(0,j.jsx)("div",{className:"space-y-4",children:e}),(0,j.jsx)(tT,{children:r?(0,j.jsx)("div",{className:"rounded-lg border border-white/20 bg-card p-3 shadow-lg opacity-80",children:"Dragging..."}):null})]})})}function t0({id:e,children:t}){let{setNodeRef:r}=tH({id:e});return(0,j.jsx)("div",{ref:r,className:"rounded-lg border border-white/10 bg-white/5",children:t})}function t1({name:e,color:t}){return(0,j.jsxs)("div",{className:"flex items-center gap-2 border-b border-white/10 p-4 font-semibold text-foreground",children:[t&&(0,j.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:t}}),(0,j.jsx)("span",{children:e})]})}function t2({children:e}){return(0,j.jsx)("div",{className:"space-y-2 p-4",children:e})}function t4({id:e,parent:t,children:r}){let{attributes:n,listeners:l,setNodeRef:a,transform:i,transition:s,isDragging:o}=tH({id:e,data:{parent:t}}),d={transform:em.Transform.toString(i),transition:s,opacity:o?.5:1};return(0,j.jsx)("div",{ref:a,style:d,...n,...l,className:"flex cursor-pointer items-center gap-2 rounded-lg border border-white/10 bg-white/5 p-3 hover:bg-white/10 transition-colors",children:r})}var t3=e.i(615595),t5=e.i(729416),t6=e.i(478416),t8=e.i(398739),t9=e.i(185419);let t7=(0,w.createContext)(void 0);function re(){let e=(0,w.useContext)(t7);if(!e)throw Error("useTableContext must be used within TableProvider");return e}function rt({columns:e,data:t,children:r}){let[n,l]=(0,w.useState)([]),a=(0,t3.useReactTable)({data:t,columns:e,getCoreRowModel:(0,t5.getCoreRowModel)(),getSortedRowModel:(0,t5.getSortedRowModel)(),onSortingChange:l,state:{sorting:n}});return(0,j.jsx)(t7.Provider,{value:{table:a},children:(0,j.jsx)("div",{className:"w-full overflow-auto",children:(0,j.jsx)("table",{className:"w-full",children:r})})})}function rr({children:e}){let{table:t}=re();return(0,j.jsx)("thead",{className:"border-b border-white/10 bg-white/5",children:t.getHeaderGroups().map(t=>e({headerGroup:t}))})}function rn({headerGroup:e,children:t}){return(0,j.jsx)("tr",{children:e.headers.map(e=>t({header:e}))})}function rl({header:e}){return(0,j.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:e.isPlaceholder?null:(0,t3.flexRender)(e.column.columnDef.header,e.getContext())},e.id)}function ra({column:e,title:t}){return e.getCanSort()?(0,j.jsxs)(_.Button,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:[(0,j.jsx)("span",{children:t}),"desc"===e.getIsSorted()?(0,j.jsx)(t6.ArrowDown,{className:"ml-2 h-4 w-4"}):"asc"===e.getIsSorted()?(0,j.jsx)(t8.ArrowUp,{className:"ml-2 h-4 w-4"}):(0,j.jsx)(t9.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}):(0,j.jsx)("span",{children:t})}function ri({children:e}){let{table:t}=re();return(0,j.jsx)("tbody",{children:t.getRowModel().rows.length?t.getRowModel().rows.map(t=>e({row:t})):(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:t.getAllColumns().length,className:"h-24 text-center text-muted-foreground",children:"No results."})})})}function rs({row:e,children:t,className:r,onClick:n}){return(0,j.jsx)("tr",{"data-state":e.getIsSelected()&&"selected",className:r,onClick:n,children:e.getVisibleCells().map(e=>t({cell:e}))})}function ro({cell:e}){return(0,j.jsx)("td",{className:"px-4 py-3 text-sm text-foreground",children:(0,t3.flexRender)(e.column.columnDef.cell,e.getContext())})}let rd={fund:"Fund",spv:"SPV",securitization:"Securitization",note:"Note",venture_capital:"Venture Capital",private_equity:"Private Equity",real_estate:"Real Estate",other:"Other"},rc=[{id:"LIVE",name:"LIVE",color:"#10B981"},{id:"CLOSED",name:"CLOSED",color:"#EF4444"},{id:"PENDING",name:"PENDING",color:"#F59E0B"}],ru=e=>{if(!e)return"No activity";try{return new Date(e).toLocaleDateString()}catch{return"No activity"}};function rh({entities:e,onEntityClick:t,onEntityEdit:r}){let n=(0,w.useMemo)(()=>[{accessorKey:"entity_code",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Code"}),cell:({row:e})=>(0,j.jsx)("div",{className:"font-mono text-xs",children:e.original.entity_code?(0,j.jsx)(E.Badge,{variant:"outline",className:"border-emerald-400/40 text-emerald-100",children:e.original.entity_code}):(0,j.jsx)("span",{className:"text-muted-foreground",children:"--"})})},{accessorKey:"name",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Name"}),cell:({row:e})=>(0,j.jsxs)("div",{className:"flex items-center gap-2 min-w-[200px]",children:[(0,j.jsx)(U.Building2,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"font-medium text-foreground",children:e.original.name}),e.original.former_entity&&(0,j.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Formerly: ",e.original.former_entity]})]})]})},{accessorKey:"investment_name",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Investment"}),cell:({row:e})=>(0,j.jsx)("span",{className:"font-medium text-foreground",children:e.original.investment_name||"--"})},{accessorKey:"platform",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Platform"}),cell:({row:e})=>e.original.platform?(0,j.jsx)(E.Badge,{className:"bg-white/10 border-white/10 text-foreground",children:e.original.platform}):"--"},{accessorKey:"type",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Type"}),cell:({row:e})=>(0,j.jsx)(E.Badge,{className:"bg-white/10 border-white/10 text-foreground",children:rd[e.original.type]||e.original.type})},{accessorKey:"status",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Status"}),cell:({row:e})=>{var t;return e.original.status?(0,j.jsx)(E.Badge,{className:"LIVE"===(t=e.original.status)?"bg-emerald-500/20 border-emerald-400/40 text-emerald-100":"CLOSED"===t?"bg-red-500/20 border-red-400/40 text-red-100":"PENDING"===t?"bg-amber-500/20 border-amber-400/40 text-amber-100":"bg-white/10 border-white/10 text-foreground",children:e.original.status}):"--"}},{accessorKey:"investor_count",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Investors"}),cell:({row:e})=>(0,j.jsx)(E.Badge,{className:"bg-white/10 border-white/10 text-foreground",children:e.original.investor_count??0})},{accessorKey:"open_flag_count",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Open Flags"}),cell:({row:e})=>{let t=e.original.open_flag_count??0;return(0,j.jsx)(E.Badge,{className:t>0?"bg-red-500/20 border-red-400/40 text-red-100":"bg-white/10 border-white/10 text-foreground",children:t})}},{accessorKey:"last_event_at",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Last Activity"}),cell:({row:e})=>(0,j.jsx)("span",{className:"text-xs text-muted-foreground",children:ru(e.original.last_event_at)})},{accessorKey:"currency",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Currency"}),cell:({row:e})=>(0,j.jsx)("span",{className:"text-foreground",children:e.original.currency})},{accessorKey:"reporting_type",header:({column:e})=>(0,j.jsx)(ra,{column:e,title:"Reporting"}),cell:({row:e})=>(0,j.jsx)("span",{className:"text-xs text-muted-foreground",children:e.original.reporting_type||"--"})},{id:"actions",header:()=>(0,j.jsx)("div",{className:"text-right",children:"Actions"}),cell:({row:e})=>(0,j.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,j.jsxs)(_.Button,{variant:"outline",size:"sm",className:"gap-2",onClick:r=>{r.stopPropagation(),t(e.original.id)},children:[(0,j.jsx)(z.Eye,{className:"h-4 w-4"}),"View"]}),(0,j.jsxs)(_.Button,{variant:"ghost",size:"sm",className:"gap-2",onClick:t=>{t.stopPropagation(),r(e.original)},children:[(0,j.jsx)(K.Pencil,{className:"h-4 w-4"}),"Edit"]})]})}],[t,r]);return(0,j.jsx)("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:(0,j.jsxs)(rt,{columns:n,data:e,children:[(0,j.jsx)(rr,{children:({headerGroup:e})=>(0,j.jsx)(rn,{headerGroup:e,children:({header:e})=>(0,j.jsx)(rl,{header:e},e.id)},e.id)}),(0,j.jsx)(ri,{children:({row:e})=>(0,j.jsx)(rs,{row:e,onClick:()=>t(e.original.id),className:"cursor-pointer hover:bg-white/5 transition-colors",children:({cell:e})=>(0,j.jsx)(ro,{cell:e},e.id)},e.id)})]})})}function rm({entities:e,onEntityClick:t,onStatusChange:r}){return(0,j.jsx)(tZ,{onDragEnd:e=>{let{active:t,over:n}=e;if(!n||!r)return;let l=n.id;rc.find(e=>e.name===l)&&r(t.id,l)},children:rc.map(r=>(0,j.jsxs)(t0,{id:r.name,children:[(0,j.jsx)(t1,{color:r.color,name:r.name}),(0,j.jsx)(t2,{children:e.filter(e=>e.status===r.name).map(e=>(0,j.jsxs)(t4,{...{id:e.id,onClick:()=>t(e.id),className:"hover:bg-white/5 transition-colors"},children:[(0,j.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{backgroundColor:r.color}}),(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[e.entity_code&&(0,j.jsx)(E.Badge,{variant:"outline",className:"font-mono text-xs border-emerald-400/40 text-emerald-100 mb-1",children:e.entity_code}),(0,j.jsx)("p",{className:"m-0 font-medium text-sm truncate",children:e.name}),(0,j.jsx)("p",{className:"m-0 text-xs text-muted-foreground truncate",children:e.investment_name||e.platform||"-"}),(0,j.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[(0,j.jsxs)(E.Badge,{className:"bg-white/10 border-white/10 text-foreground",children:[e.investor_count??0," investors"]}),(0,j.jsxs)(E.Badge,{className:(e.open_flag_count??0)>0?"bg-red-500/20 border-red-400/40 text-red-100":"bg-white/10 border-white/10 text-foreground",children:[e.open_flag_count??0," flags"]}),(0,j.jsx)("span",{className:"ml-auto text-xs text-muted-foreground",children:ru(e.last_event_at)})]})]}),(0,j.jsx)(q.Avatar,{className:"h-6 w-6 shrink-0",children:(0,j.jsx)(q.AvatarFallback,{className:"text-xs bg-white/10",children:e.platform?.slice(0,2)||e.entity_code?.slice(0,2)||"--"})})]},e.id))})]},r.name))})}function rg({entities:e,onEntityClick:t,onStatusChange:r}){let[n,l]=(0,w.useState)(e);return(0,w.useEffect)(()=>{l(e)},[e]),(0,j.jsx)(tX,{columns:rc,data:n,onDataChange:t=>{if(l(t),!r)return;let n=t.find(t=>{let r=e.find(e=>e.id===t.id);return r&&r.status!==t.status});n&&n.status&&r(n.id,n.status)},children:e=>(0,j.jsxs)(tW,{id:e.id,children:[(0,j.jsx)(tG,{children:(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:e.color}}),(0,j.jsx)("span",{children:e.name}),(0,j.jsx)(E.Badge,{variant:"outline",className:"ml-auto",children:n.filter(t=>t.status===e.name).length})]})}),(0,j.jsx)(tJ,{id:e.id,children:r=>(0,j.jsx)(t$,{column:e.id,id:r.id,name:r.name,onClick:()=>t(r.id),children:(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[r.entity_code&&(0,j.jsx)(E.Badge,{variant:"outline",className:"font-mono text-xs border-emerald-400/40 text-emerald-100 mb-1",children:r.entity_code}),(0,j.jsx)("p",{className:"m-0 font-medium text-sm",children:r.name})]}),(0,j.jsx)(q.Avatar,{className:"h-5 w-5 shrink-0",children:(0,j.jsx)(q.AvatarFallback,{className:"text-xs bg-white/10",children:r.platform?.slice(0,2)||r.entity_code?.slice(0,2)||"--"})})]}),r.investment_name&&(0,j.jsx)("p",{className:"m-0 text-xs text-muted-foreground font-medium",children:r.investment_name}),(0,j.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[r.platform&&(0,j.jsx)(E.Badge,{className:"bg-white/10 border-white/10 text-foreground text-xs",children:r.platform}),(0,j.jsxs)(E.Badge,{className:"bg-white/10 border-white/10 text-foreground text-xs",children:[r.investor_count??0," investors"]}),(0,j.jsxs)(E.Badge,{className:(r.open_flag_count??0)>0?"bg-red-500/20 border-red-400/40 text-red-100":"bg-white/10 border-white/10 text-foreground",children:[r.open_flag_count??0," flags"]}),(0,j.jsx)("span",{className:"ml-auto text-[11px] text-muted-foreground",children:ru(r.last_event_at)})]})]})},r.id)})]},e.id)})}var rf=e.i(337684),rx=e.i(352776),rp=e.i(908925),rb=e.i(816654),rv=e.i(45778),ry=e.i(396064),rj=e.i(554369),rw=e.i(263229),rN=e.i(201495);let rC=[{value:"LIVE",label:"Live"},{value:"TBD",label:"TBD"},{value:"CLOSED",label:"Closed"}],rS=[{value:"fund",label:"Fund"},{value:"spv",label:"SPV"},{value:"securitization",label:"Securitization"},{value:"note",label:"Note"},{value:"venture_capital",label:"Venture Capital"},{value:"private_equity",label:"Private Equity"},{value:"real_estate",label:"Real Estate"},{value:"other",label:"Other"}],r_=[{value:"Not Required",label:"Not Required"},{value:"Company Only",label:"Company Only"},{value:"Online only",label:"Online Only"},{value:"Company + Online",label:"Company + Online"}],rD=["USD","EUR","GBP","CHF"];function rE({entity:e,open:t,onClose:r,onSuccess:n}){let[l,a]=(0,w.useState)({name:"",entity_code:"",platform:"",investment_name:"",former_entity:"",status:"LIVE",type:"fund",domicile:"",currency:"USD",formation_date:"",legal_jurisdiction:"",registration_number:"",reporting_type:"Not Required",requires_reporting:!1,notes:"",website_url:"",address:"",arranger_entity_id:"",lawyer_id:""}),[i,s]=(0,w.useState)(""),[o,d]=(0,w.useState)(!1),[c,u]=(0,w.useState)(null),[h,m]=(0,w.useState)(!1),[g,f]=(0,w.useState)(null),[x,p]=(0,w.useState)(!1),[b,v]=(0,w.useState)({arrangers:[],lawyers:[]}),[y,N]=(0,w.useState)(!1),C=(0,w.useCallback)(async()=>{N(!0);try{let e=await fetch("/api/vehicles/dropdown-options");if(e.ok){let t=await e.json();v(t)}}catch(e){console.error("Failed to fetch dropdown options:",e)}finally{N(!1)}},[]);(0,w.useEffect)(()=>{t&&C()},[t,C]),(0,w.useEffect)(()=>{t&&(a({name:e.name||"",entity_code:e.entity_code||"",platform:e.platform||"",investment_name:e.investment_name||"",former_entity:e.former_entity||"",status:e.status||"LIVE",type:e.type||"fund",domicile:e.domicile||"",currency:e.currency||"USD",formation_date:e.formation_date?e.formation_date.slice(0,10):"",legal_jurisdiction:e.legal_jurisdiction||"",registration_number:e.registration_number||"",reporting_type:e.reporting_type||"Not Required",requires_reporting:e.requires_reporting??!1,notes:e.notes||"",website_url:e.website_url||"",address:e.address||"",arranger_entity_id:e.arranger_entity_id||"",lawyer_id:e.lawyer_id||""}),s(e.logo_url||""),u(null),f(null),m(!1),d(!1),p(!1))},[e,t]);let S=(0,w.useMemo)(()=>l.requires_reporting?"Not Required"===l.reporting_type?"Select where updates are delivered so stakeholders know the channel.":"This vehicle will appear in reporting queues and reminders.":"Enable to track follow-up obligations for this vehicle.",[l.requires_reporting,l.reporting_type]),E=e=>t=>a(r=>({...r,[e]:t})),L=async t=>{u(null),d(!0);try{let r=new FormData;r.append("file",t),r.append("vehicle_id",e.id);let n=await fetch("/api/entities/logo-upload",{method:"POST",body:r}),l=await n.json().catch(()=>({}));if(!n.ok||!l?.url)throw Error(l?.error||"Failed to upload logo");s(l.url)}catch(e){u(e instanceof Error?e.message:"Failed to upload logo")}finally{d(!1)}},R=()=>l.name.trim()?l.domicile.trim()?l.requires_reporting&&"Not Required"===l.reporting_type?(f("Select a reporting channel when reporting is enabled"),!1):(f(null),!0):(f("Domicile is required"),!1):(f("Vehicle name is required"),!1),I=async()=>{if(R()){m(!0),p(!1),f(null);try{let t={name:l.name.trim(),entity_code:l.entity_code.trim()||null,platform:l.platform.trim()||null,investment_name:l.investment_name.trim()||null,former_entity:l.former_entity.trim()||null,status:l.status,type:l.type,domicile:l.domicile.trim(),currency:l.currency.trim().toUpperCase()||"USD",formation_date:l.formation_date||null,legal_jurisdiction:l.legal_jurisdiction.trim()||null,registration_number:l.registration_number.trim()||null,reporting_type:l.reporting_type,requires_reporting:l.requires_reporting,notes:l.notes.trim()||null,logo_url:i||null,website_url:l.website_url.trim()||null,address:l.address.trim()||null,arranger_entity_id:l.arranger_entity_id||null,lawyer_id:l.lawyer_id||null},a=await fetch(`/api/entities/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await a.json().catch(()=>({}));if(!a.ok)throw Error(s.details||s.error||"Failed to update vehicle");n(s.entity),r()}catch(e){f(e instanceof Error?e.message:"Failed to update vehicle")}finally{m(!1)}}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(rx.Dialog,{open:t,onOpenChange:r,children:(0,j.jsx)(rx.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto no-scrollbar rounded-2xl border border-border bg-background shadow-xl",children:(0,j.jsxs)("form",{onSubmit:e=>{e.preventDefault(),R()&&p(!0)},className:"space-y-6",children:[(0,j.jsxs)(rx.DialogHeader,{className:"space-y-2",children:[(0,j.jsx)(rx.DialogTitle,{className:"text-2xl text-foreground",children:"Edit Vehicle"}),(0,j.jsx)(rx.DialogDescription,{className:"text-sm text-muted-foreground",children:"Update the vehicle profile. Changes are applied immediately across deals and reporting."})]}),(0,j.jsxs)("div",{className:"grid gap-5",children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"name",className:"text-foreground",children:"Vehicle Name *"}),(0,j.jsx)(D.Input,{id:"name",value:l.name,onChange:e=>E("name")(e.target.value),placeholder:"Legal vehicle name",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"entity_code",className:"text-foreground",children:"Vehicle Code"}),(0,j.jsx)(D.Input,{id:"entity_code",value:l.entity_code,onChange:e=>E("entity_code")(e.target.value),placeholder:"e.g., VC101",className:"bg-background border-input text-foreground font-mono uppercase"})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Status"}),(0,j.jsxs)(k.Select,{value:l.status,onValueChange:E("status"),children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,j.jsx)(k.SelectValue,{placeholder:"Status"})}),(0,j.jsx)(k.SelectContent,{children:rC.map(e=>(0,j.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Type"}),(0,j.jsxs)(k.Select,{value:l.type,onValueChange:E("type"),children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,j.jsx)(k.SelectValue,{placeholder:"Type"})}),(0,j.jsx)(k.SelectContent,{children:rS.map(e=>(0,j.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Currency"}),(0,j.jsxs)(k.Select,{value:l.currency,onValueChange:E("currency"),children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,j.jsx)(k.SelectValue,{placeholder:"Currency"})}),(0,j.jsx)(k.SelectContent,{children:rD.map(e=>(0,j.jsx)(k.SelectItem,{value:e,children:e},e))})]})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"platform",className:"text-foreground",children:"Platform"}),(0,j.jsx)(D.Input,{id:"platform",value:l.platform,onChange:e=>E("platform")(e.target.value),placeholder:"e.g., VC1SCSP",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"investment_name",className:"text-foreground",children:"Investment Name"}),(0,j.jsx)(D.Input,{id:"investment_name",value:l.investment_name,onChange:e=>E("investment_name")(e.target.value),placeholder:"e.g., Revolut Secondary",className:"bg-background border-input text-foreground"})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"domicile",className:"text-foreground",children:"Domicile / Jurisdiction *"}),(0,j.jsx)(D.Input,{id:"domicile",value:l.domicile,onChange:e=>E("domicile")(e.target.value),placeholder:"e.g., Luxembourg, BVI, Delaware",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"formation_date",className:"text-foreground",children:"Formation Date"}),(0,j.jsx)(D.Input,{id:"formation_date",type:"date",value:l.formation_date,onChange:e=>E("formation_date")(e.target.value),className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"registration_number",className:"text-foreground",children:"Registration Number"}),(0,j.jsx)(D.Input,{id:"registration_number",value:l.registration_number,onChange:e=>E("registration_number")(e.target.value),placeholder:"Optional registration reference",className:"bg-background border-input text-foreground"})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"former_entity",className:"text-foreground",children:"Former Vehicle Name"}),(0,j.jsx)(D.Input,{id:"former_entity",value:l.former_entity,onChange:e=>E("former_entity")(e.target.value),placeholder:"Previous name if renamed",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"website_url",className:"text-foreground",children:"Website"}),(0,j.jsx)(D.Input,{id:"website_url",type:"url",value:l.website_url,onChange:e=>E("website_url")(e.target.value),placeholder:"https://example.com",className:"bg-background border-input text-foreground"})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"address",className:"text-foreground",children:"Address"}),(0,j.jsx)(rb.Textarea,{id:"address",rows:2,value:l.address,onChange:e=>E("address")(e.target.value),placeholder:"Registered address of the vehicle",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-4 rounded-xl border border-border bg-muted/30 p-5",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(T.Label,{className:"text-foreground font-semibold text-base",children:"Service Providers"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assign the arranger and legal counsel for this vehicle."})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,j.jsxs)("div",{className:"space-y-2.5 p-4 rounded-lg bg-background/50 border border-border/50 transition-colors hover:border-border",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10",children:(0,j.jsx)(U.Building2,{className:"h-4 w-4 text-primary"})}),(0,j.jsx)(T.Label,{className:"text-foreground font-medium",children:"Arranger"})]}),(0,j.jsxs)(k.Select,{value:l.arranger_entity_id,onValueChange:e=>a(t=>({...t,arranger_entity_id:"none"===e?"":e})),disabled:y,children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground h-11",children:(0,j.jsx)(k.SelectValue,{placeholder:y?"Loading...":"Select arranger"})}),(0,j.jsxs)(k.SelectContent,{children:[(0,j.jsx)(k.SelectItem,{value:"none",children:"None"}),b.arrangers.map(e=>(0,j.jsx)(k.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"Entity responsible for deal structuring"})]}),(0,j.jsxs)("div",{className:"space-y-2.5 p-4 rounded-lg bg-background/50 border border-border/50 transition-colors hover:border-border",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-amber-500/10",children:(0,j.jsx)(rN.Scale,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"})}),(0,j.jsx)(T.Label,{className:"text-foreground font-medium",children:"Legal Counsel"})]}),(0,j.jsxs)(k.Select,{value:l.lawyer_id,onValueChange:e=>a(t=>({...t,lawyer_id:"none"===e?"":e})),disabled:y,children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground h-11",children:(0,j.jsx)(k.SelectValue,{placeholder:y?"Loading...":"Select legal counsel"})}),(0,j.jsxs)(k.SelectContent,{children:[(0,j.jsx)(k.SelectItem,{value:"none",children:"None"}),b.lawyers.map(e=>(0,j.jsxs)(k.SelectItem,{value:e.id,children:[e.name," ",e.firm_name&&e.name!==e.firm_name?`(${e.firm_name})`:""]},e.id))]})]}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"Law firm handling legal documentation"})]})]})]}),(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Vehicle Logo"}),(0,j.jsx)("div",{className:"flex flex-col gap-3 rounded-xl border border-border bg-muted/30 p-4",children:(0,j.jsxs)("div",{className:"flex items-center gap-4",children:[(0,j.jsx)("div",{className:"h-16 w-16 rounded-lg border border-border bg-muted flex items-center justify-center",children:i?(0,j.jsx)(rf.default,{src:i,alt:"Vehicle logo preview",width:64,height:64,className:"h-full w-full rounded object-contain p-1"}):(0,j.jsx)("span",{className:"text-xs text-muted-foreground",children:"Upload logo"})}),(0,j.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,j.jsxs)("label",{className:"inline-flex items-center gap-2 rounded-md border border-dashed border-border px-3 py-2 text-sm text-foreground cursor-pointer transition-colors hover:border-primary hover:bg-muted",children:[(0,j.jsx)(ry.Upload,{className:"h-4 w-4"}),(0,j.jsx)("span",{children:i?"Replace Logo":"Upload Logo"}),(0,j.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&(L(t),e.target.value="")}})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[o&&(0,j.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[(0,j.jsx)(rw.Loader2,{className:"h-3 w-3 animate-spin"}),"Uploading"]}),i&&!o&&(0,j.jsxs)(_.Button,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-destructive hover:text-destructive/80",onClick:()=>{s(""),u(null)},children:[(0,j.jsx)(rj.Trash2,{className:"mr-1 h-3 w-3"}),"Remove logo"]})]}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG or JPG, recommended minimum 240240."}),c&&(0,j.jsx)("p",{className:"text-xs text-destructive",children:c})]})]})})]}),(0,j.jsxs)("div",{className:"space-y-4 rounded-xl border border-border bg-muted/30 p-5",children:[(0,j.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(T.Label,{className:"text-foreground font-semibold",children:"Reporting Requirements"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:S})]}),(0,j.jsx)(rv.Switch,{checked:l.requires_reporting,onCheckedChange:e=>a(t=>({...t,requires_reporting:e,reporting_type:e&&"Not Required"===t.reporting_type?"Company Only":e?t.reporting_type:"Not Required"}))})]}),(0,j.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Reporting Channel"}),(0,j.jsxs)(k.Select,{value:l.reporting_type,onValueChange:E("reporting_type"),disabled:!l.requires_reporting,children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,j.jsx)(k.SelectValue,{placeholder:"Reporting channel"})}),(0,j.jsx)(k.SelectContent,{children:r_.map(e=>(0,j.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value))})]})]})})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"notes",className:"text-foreground",children:"Notes"}),(0,j.jsx)(rb.Textarea,{id:"notes",rows:3,value:l.notes,onChange:e=>E("notes")(e.target.value),placeholder:"Add any additional context for this vehicle.",className:"bg-background border-input text-foreground"})]}),g&&(0,j.jsx)("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:g})]}),(0,j.jsxs)(rx.DialogFooter,{className:"flex items-center justify-end gap-2 border-t border-border pt-4",children:[(0,j.jsx)(_.Button,{type:"button",variant:"outline",onClick:r,disabled:h,children:"Cancel"}),(0,j.jsx)(_.Button,{type:"submit",disabled:h,className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:h?(0,j.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,j.jsx)(rw.Loader2,{className:"h-4 w-4 animate-spin"}),"Saving"]}):"Save Changes"})]})]})})}),(0,j.jsx)(rp.AlertDialog,{open:x,onOpenChange:p,children:(0,j.jsxs)(rp.AlertDialogContent,{children:[(0,j.jsxs)(rp.AlertDialogHeader,{children:[(0,j.jsx)(rp.AlertDialogTitle,{children:"Save changes?"}),(0,j.jsxs)(rp.AlertDialogDescription,{children:["Updates to ",(0,j.jsx)("strong",{children:e.name})," will be reflected across all linked deals and reporting workflows."]})]}),(0,j.jsxs)(rp.AlertDialogFooter,{children:[(0,j.jsx)(rp.AlertDialogCancel,{children:"Cancel"}),(0,j.jsx)(rp.AlertDialogAction,{onClick:I,children:"Yes, Save"})]})]})})]})}let rk=[{value:"LIVE",label:"Live"},{value:"TBD",label:"TBD"},{value:"CLOSED",label:"Closed"}],rL=[{value:"fund",label:"Fund"},{value:"spv",label:"SPV"},{value:"securitization",label:"Securitization"},{value:"note",label:"Note"},{value:"venture_capital",label:"Venture Capital"},{value:"private_equity",label:"Private Equity"},{value:"real_estate",label:"Real Estate"},{value:"other",label:"Other"}],rR=[{value:"Not Required",label:"Not Required"},{value:"Company Only",label:"Company Only"},{value:"Online only",label:"Online Only"},{value:"Company + Online",label:"Company + Online"}],rT=["USD","EUR","GBP","CHF"],rI={name:"",entity_code:"",platform:"",investment_name:"",former_entity:"",type:"fund",status:"LIVE",domicile:"",currency:"USD",formation_date:"",legal_jurisdiction:"",registration_number:"",reporting_type:"Not Required",requires_reporting:!1,notes:"",website_url:"",address:"",arranger_entity_id:"",lawyer_id:""};function rO({open:e,onOpenChange:t,onSuccess:r}){let[n,l]=(0,w.useState)(rI),[a,i]=(0,w.useState)(""),[s,o]=(0,w.useState)(!1),[d,c]=(0,w.useState)(null),[u,h]=(0,w.useState)(null),[m,g]=(0,w.useState)(!1),[f,x]=(0,w.useState)({arrangers:[],lawyers:[]}),[p,b]=(0,w.useState)(!1),v=(0,w.useCallback)(async()=>{b(!0);try{let e=await fetch("/api/vehicles/dropdown-options");if(e.ok){let t=await e.json();x(t)}}catch(e){console.error("Failed to fetch dropdown options:",e)}finally{b(!1)}},[]);(0,w.useEffect)(()=>{e&&v()},[e,v]),(0,w.useEffect)(()=>{e||(l(rI),i(""),c(null),h(null),g(!1),o(!1))},[e]);let y=(0,w.useMemo)(()=>n.requires_reporting?"Not Required"===n.reporting_type?"Select a reporting channel so stakeholders know where updates are delivered.":"This vehicle will appear in reporting queues and reminders.":"Enable to track follow-up obligations for this vehicle.",[n.requires_reporting,n.reporting_type]),N=e=>t=>{let r=t.target.value;l(t=>({...t,[e]:r}))},C=async e=>{c(null),o(!0);try{let t=new FormData;t.append("file",e),t.append("vehicle_id","new");let r=await fetch("/api/entities/logo-upload",{method:"POST",body:t}),n=await r.json().catch(()=>({}));if(!r.ok||!n?.url)throw Error(n?.error||"Failed to upload logo");i(n.url)}catch(e){c(e instanceof Error?e.message:"Failed to upload logo")}finally{o(!1)}},S=async e=>{if(e.preventDefault(),h(null),!n.name.trim())return void h("Vehicle name is required");if(!n.domicile.trim())return void h("Domicile is required");if(n.requires_reporting&&"Not Required"===n.reporting_type)return void h("Select a reporting channel when reporting is enabled");g(!0);try{let e={name:n.name.trim(),entity_code:n.entity_code.trim()||null,platform:n.platform.trim()||null,investment_name:n.investment_name.trim()||null,former_entity:n.former_entity.trim()||null,type:n.type,status:n.status,domicile:n.domicile.trim(),currency:n.currency.trim().toUpperCase()||"USD",formation_date:n.formation_date||null,legal_jurisdiction:n.legal_jurisdiction.trim()||null,registration_number:n.registration_number.trim()||null,reporting_type:n.reporting_type,requires_reporting:n.requires_reporting,notes:n.notes.trim()||null,logo_url:a||null,website_url:n.website_url.trim()||null,address:n.address.trim()||null,arranger_entity_id:n.arranger_entity_id||null,lawyer_id:n.lawyer_id||null},l=await fetch("/api/vehicles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await l.json().catch(()=>({}));if(!l.ok)throw Error(i.details||i.error||"Failed to create vehicle");r(i.vehicle),t(!1)}catch(e){h(e instanceof Error?e.message:"Something went wrong while creating the vehicle")}finally{g(!1)}};return(0,j.jsx)(rx.Dialog,{open:e,onOpenChange:t,children:(0,j.jsx)(rx.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto no-scrollbar rounded-2xl border border-border bg-background shadow-xl",children:(0,j.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,j.jsxs)(rx.DialogHeader,{className:"space-y-2",children:[(0,j.jsx)(rx.DialogTitle,{className:"text-2xl text-foreground",children:"Create Vehicle"}),(0,j.jsx)(rx.DialogDescription,{className:"text-sm text-muted-foreground",children:"Complete the vehicle profile used when linking deals and investor reporting."})]}),(0,j.jsxs)("div",{className:"grid gap-5",children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"vehicle-name",className:"text-foreground",children:"Vehicle Name *"}),(0,j.jsx)(D.Input,{id:"vehicle-name",value:n.name,onChange:N("name"),placeholder:"e.g., Verso Fund II",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"vehicle-code",className:"text-foreground",children:"Vehicle Code"}),(0,j.jsx)(D.Input,{id:"vehicle-code",value:n.entity_code,onChange:N("entity_code"),placeholder:"e.g., VC101",className:"bg-background border-input text-foreground font-mono uppercase"})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Status"}),(0,j.jsxs)(k.Select,{value:n.status,onValueChange:e=>l(t=>({...t,status:e})),children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,j.jsx)(k.SelectValue,{placeholder:"Select status"})}),(0,j.jsx)(k.SelectContent,{children:rk.map(e=>(0,j.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Type"}),(0,j.jsxs)(k.Select,{value:n.type,onValueChange:e=>l(t=>({...t,type:e})),children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,j.jsx)(k.SelectValue,{placeholder:"Select type"})}),(0,j.jsx)(k.SelectContent,{children:rL.map(e=>(0,j.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Currency"}),(0,j.jsxs)(k.Select,{value:n.currency,onValueChange:e=>l(t=>({...t,currency:e})),children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,j.jsx)(k.SelectValue,{placeholder:"Currency"})}),(0,j.jsx)(k.SelectContent,{children:rT.map(e=>(0,j.jsx)(k.SelectItem,{value:e,children:e},e))})]})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"platform",className:"text-foreground",children:"Platform"}),(0,j.jsx)(D.Input,{id:"platform",value:n.platform,onChange:N("platform"),placeholder:"e.g., VC1SCSP",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"investment_name",className:"text-foreground",children:"Investment Name"}),(0,j.jsx)(D.Input,{id:"investment_name",value:n.investment_name,onChange:N("investment_name"),placeholder:"e.g., Revolut Secondary",className:"bg-background border-input text-foreground"})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"domicile",className:"text-foreground",children:"Domicile / Jurisdiction *"}),(0,j.jsx)(D.Input,{id:"domicile",value:n.domicile,onChange:N("domicile"),placeholder:"e.g., Luxembourg, BVI, Delaware",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"formation_date",className:"text-foreground",children:"Formation Date"}),(0,j.jsx)(D.Input,{id:"formation_date",type:"date",value:n.formation_date,onChange:N("formation_date"),className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"registration_number",className:"text-foreground",children:"Registration Number"}),(0,j.jsx)(D.Input,{id:"registration_number",value:n.registration_number,onChange:N("registration_number"),placeholder:"Optional registration reference",className:"bg-background border-input text-foreground"})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"former_entity",className:"text-foreground",children:"Former Vehicle Name"}),(0,j.jsx)(D.Input,{id:"former_entity",value:n.former_entity,onChange:N("former_entity"),placeholder:"Previous name if renamed",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"website_url",className:"text-foreground",children:"Website"}),(0,j.jsx)(D.Input,{id:"website_url",type:"url",value:n.website_url,onChange:N("website_url"),placeholder:"https://example.com",className:"bg-background border-input text-foreground"})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"address",className:"text-foreground",children:"Address"}),(0,j.jsx)(rb.Textarea,{id:"address",rows:2,value:n.address,onChange:e=>l(t=>({...t,address:e.target.value})),placeholder:"Registered address of the vehicle",className:"bg-background border-input text-foreground"})]}),(0,j.jsxs)("div",{className:"space-y-4 rounded-xl border border-border bg-muted/30 p-5",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(T.Label,{className:"text-foreground font-semibold text-base",children:"Service Providers"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assign the arranger and legal counsel for this vehicle."})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,j.jsxs)("div",{className:"space-y-2.5 p-4 rounded-lg bg-background/50 border border-border/50 transition-colors hover:border-border",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10",children:(0,j.jsx)(U.Building2,{className:"h-4 w-4 text-primary"})}),(0,j.jsx)(T.Label,{className:"text-foreground font-medium",children:"Arranger"})]}),(0,j.jsxs)(k.Select,{value:n.arranger_entity_id,onValueChange:e=>l(t=>({...t,arranger_entity_id:"none"===e?"":e})),disabled:p,children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground h-11",children:(0,j.jsx)(k.SelectValue,{placeholder:p?"Loading...":"Select arranger"})}),(0,j.jsxs)(k.SelectContent,{children:[(0,j.jsx)(k.SelectItem,{value:"none",children:"None"}),f.arrangers.map(e=>(0,j.jsx)(k.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"Entity responsible for deal structuring"})]}),(0,j.jsxs)("div",{className:"space-y-2.5 p-4 rounded-lg bg-background/50 border border-border/50 transition-colors hover:border-border",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-amber-500/10",children:(0,j.jsx)(rN.Scale,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"})}),(0,j.jsx)(T.Label,{className:"text-foreground font-medium",children:"Legal Counsel"})]}),(0,j.jsxs)(k.Select,{value:n.lawyer_id,onValueChange:e=>l(t=>({...t,lawyer_id:"none"===e?"":e})),disabled:p,children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground h-11",children:(0,j.jsx)(k.SelectValue,{placeholder:p?"Loading...":"Select legal counsel"})}),(0,j.jsxs)(k.SelectContent,{children:[(0,j.jsx)(k.SelectItem,{value:"none",children:"None"}),f.lawyers.map(e=>(0,j.jsxs)(k.SelectItem,{value:e.id,children:[e.name," ",e.firm_name&&e.name!==e.firm_name?`(${e.firm_name})`:""]},e.id))]})]}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"Law firm handling legal documentation"})]})]})]}),(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Vehicle Logo"}),(0,j.jsx)("div",{className:"flex flex-col gap-3 rounded-xl border border-border bg-muted/30 p-4",children:(0,j.jsxs)("div",{className:"flex items-center gap-4",children:[(0,j.jsx)("div",{className:"h-16 w-16 rounded-lg border border-border bg-muted flex items-center justify-center",children:a?(0,j.jsx)(rf.default,{src:a,alt:"Entity logo preview",width:64,height:64,className:"h-full w-full rounded object-contain p-1"}):(0,j.jsx)("span",{className:"text-xs text-muted-foreground",children:"Upload logo"})}),(0,j.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,j.jsxs)("label",{className:"inline-flex items-center gap-2 rounded-md border border-dashed border-border px-3 py-2 text-sm text-foreground cursor-pointer transition-colors hover:border-primary hover:bg-muted",children:[(0,j.jsx)(ry.Upload,{className:"h-4 w-4"}),(0,j.jsx)("span",{children:a?"Replace Logo":"Upload Logo"}),(0,j.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&(C(t),e.target.value="")}})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,j.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[(0,j.jsx)(rw.Loader2,{className:"h-3 w-3 animate-spin"}),"Uploading"]}),a&&!s&&(0,j.jsxs)(_.Button,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-destructive hover:text-destructive/80",onClick:()=>{i(""),c(null)},children:[(0,j.jsx)(rj.Trash2,{className:"mr-1 h-3 w-3"}),"Remove logo"]})]}),(0,j.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG or JPG, recommended minimum 240240."}),d&&(0,j.jsx)("p",{className:"text-xs text-destructive",children:d})]})]})})]}),(0,j.jsxs)("div",{className:"space-y-4 rounded-xl border border-border bg-muted/30 p-5",children:[(0,j.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsx)(T.Label,{className:"text-foreground font-semibold",children:"Reporting Requirements"}),(0,j.jsx)("p",{className:"text-sm text-muted-foreground",children:y})]}),(0,j.jsx)(rv.Switch,{checked:n.requires_reporting,onCheckedChange:e=>l(t=>({...t,requires_reporting:e,reporting_type:e&&"Not Required"===t.reporting_type?"Company Only":e?t.reporting_type:"Not Required"}))})]}),(0,j.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{className:"text-foreground",children:"Reporting Channel"}),(0,j.jsxs)(k.Select,{value:n.reporting_type,onValueChange:e=>l(t=>({...t,reporting_type:e})),disabled:!n.requires_reporting,children:[(0,j.jsx)(k.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,j.jsx)(k.SelectValue,{placeholder:"Reporting channel"})}),(0,j.jsx)(k.SelectContent,{children:rR.map(e=>(0,j.jsx)(k.SelectItem,{value:e.value,children:e.label},e.value))})]})]})})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(T.Label,{htmlFor:"notes",className:"text-foreground",children:"Notes"}),(0,j.jsx)(rb.Textarea,{id:"notes",rows:3,value:n.notes,onChange:e=>l(t=>({...t,notes:e.target.value})),placeholder:"Add any additional context for this entity.",className:"bg-background border-input text-foreground"})]}),u&&(0,j.jsx)("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:u})]}),(0,j.jsxs)(rx.DialogFooter,{className:"flex items-center justify-end gap-2 border-t border-border pt-4",children:[(0,j.jsx)(_.Button,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:m,children:"Cancel"}),(0,j.jsx)(_.Button,{type:"submit",disabled:m,className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:m?(0,j.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,j.jsx)(rw.Loader2,{className:"h-4 w-4 animate-spin"}),"Creating"]}):"Create Vehicle"})]})]})})})}function rM({entities:e}){let t=(0,N.useRouter)(),[r,n]=(0,w.useState)(e),[l,a]=(0,w.useState)("table"),[i,s]=(0,w.useState)(""),[o,d]=(0,w.useState)("all"),[c,u]=(0,w.useState)("all"),[h,m]=(0,w.useState)("all"),[g,f]=(0,w.useState)(null),[x,p]=(0,w.useState)(!1),[b,v]=(0,w.useState)(null),[y,q]=(0,w.useState)("success"),[U,z]=(0,w.useState)(!1),K=(0,w.useMemo)(()=>{let e=new Set;return r.forEach(t=>{t.platform&&e.add(t.platform)}),Array.from(e).sort()},[r]),H=(0,w.useMemo)(()=>{let e=[...r];if(i){let t=i.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.entity_code?.toLowerCase().includes(t)||e.investment_name?.toLowerCase().includes(t)||e.platform?.toLowerCase().includes(t)||e.former_entity?.toLowerCase().includes(t))}return"all"!==o&&(e=e.filter(e=>e.status===o)),"all"!==c&&(e=e.filter(e=>e.platform===c)),"all"!==h&&(e=e.filter(e=>e.type===h)),U&&(e=e.filter(e=>(e.open_flag_count??0)>0)),e},[r,i,o,c,h,U]),Y=(0,w.useMemo)(()=>({total:r.length,live:r.filter(e=>"LIVE"===e.status).length,closed:r.filter(e=>"CLOSED"===e.status).length,pending:r.filter(e=>"PENDING"===e.status).length,platforms:new Set(r.map(e=>e.platform).filter(Boolean)).size}),[r]),X=(0,w.useMemo)(()=>r.filter(e=>(e.open_flag_count??0)>0).sort((e,t)=>(t.open_flag_count??0)-(e.open_flag_count??0)),[r]),W=e=>{t.push(`/versotech_main/entities/${e}`)},G=e=>{f(e)},J=async(e,t)=>{try{if(!(await fetch(`/api/entities/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok)throw Error("Failed to update status");n(r=>r.map(r=>r.id===e?{...r,status:t}:r)),q("success"),v(`Entity status updated to ${t}`),setTimeout(()=>v(null),3e3)}catch(e){console.error("Failed to update status:",e),q("error"),v("Failed to update entity status"),setTimeout(()=>v(null),3e3)}};return(0,j.jsxs)("div",{className:"p-6 space-y-6 text-foreground",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{className:"text-3xl font-bold",children:"Vehicles"}),(0,j.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage investment vehicles with comprehensive tracking and multiple view modes."})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(_.Button,{variant:"outline",className:"gap-2",asChild:!0,children:(0,j.jsxs)(C.default,{href:"/versotech_main/documents",children:[(0,j.jsx)(O.FileText,{className:"h-4 w-4"}),"Documents Workspace"]})}),(0,j.jsxs)(_.Button,{className:"gap-2",onClick:()=>p(!0),children:[(0,j.jsx)(F.Plus,{className:"h-4 w-4"}),"Create Vehicle"]})]})]}),b&&(0,j.jsx)("div",{className:`rounded-lg border p-4 text-sm ${"success"===y?"border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border-red-400/40 bg-red-500/10 text-red-100"}`,children:b}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,j.jsx)(S.Card,{className:"border border-white/10 bg-white/5",children:(0,j.jsxs)(S.CardHeader,{className:"pb-2",children:[(0,j.jsx)(S.CardTitle,{className:"text-sm text-muted-foreground",children:"Platforms"}),(0,j.jsx)(S.CardDescription,{className:"text-3xl text-foreground font-semibold",children:Y.platforms})]})}),(0,j.jsx)(S.Card,{className:"border border-white/10 bg-white/5",children:(0,j.jsxs)(S.CardHeader,{className:"pb-2",children:[(0,j.jsx)(S.CardTitle,{className:"text-sm text-muted-foreground",children:"Total Vehicles"}),(0,j.jsx)(S.CardDescription,{className:"text-3xl text-foreground font-semibold",children:Y.total})]})}),(0,j.jsx)(S.Card,{className:"border border-white/10 bg-white/5",children:(0,j.jsxs)(S.CardHeader,{className:"pb-2",children:[(0,j.jsx)(S.CardTitle,{className:"text-sm text-muted-foreground",children:"Live"}),(0,j.jsx)(S.CardDescription,{className:"text-3xl text-emerald-400 font-semibold",children:Y.live})]})}),(0,j.jsx)(S.Card,{className:"border border-white/10 bg-white/5",children:(0,j.jsxs)(S.CardHeader,{className:"pb-2",children:[(0,j.jsx)(S.CardTitle,{className:"text-sm text-muted-foreground",children:"Closed"}),(0,j.jsx)(S.CardDescription,{className:"text-3xl text-red-400 font-semibold",children:Y.closed})]})}),(0,j.jsx)(S.Card,{className:"border border-white/10 bg-white/5",children:(0,j.jsxs)(S.CardHeader,{className:"pb-2",children:[(0,j.jsx)(S.CardTitle,{className:"text-sm text-muted-foreground",children:"Pending"}),(0,j.jsx)(S.CardDescription,{className:"text-3xl text-amber-400 font-semibold",children:Y.pending})]})})]}),X.length>0&&(0,j.jsxs)(S.Card,{className:"border border-red-400/30 bg-red-500/10",children:[(0,j.jsxs)(S.CardHeader,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)(S.CardTitle,{className:"text-base text-red-100 flex items-center gap-2",children:[(0,j.jsx)(M,{className:"h-4 w-4"}),"Action Center"]}),(0,j.jsx)(S.CardDescription,{className:"text-red-100/80",children:"Vehicles with outstanding health flags. Resolve issues to keep governance on track."})]}),(0,j.jsx)(E.Badge,{className:"bg-red-500/20 border-red-400/40 text-red-100",children:X.length})]}),(0,j.jsxs)(S.CardContent,{className:"space-y-3",children:[X.slice(0,4).map(e=>(0,j.jsx)("button",{onClick:()=>W(e.id),className:"w-full text-left rounded-lg border border-red-400/30 bg-black/20 px-4 py-3 hover:bg-red-500/10 transition-colors",children:(0,j.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm font-semibold text-foreground",children:e.name}),(0,j.jsxs)("p",{className:"text-xs text-red-100/80",children:[e.open_flag_count," unresolved flag",1===e.open_flag_count?"":"s","  Last update"," ",e.last_event_at?new Date(e.last_event_at).toLocaleDateString():"n/a"]})]}),(0,j.jsx)(E.Badge,{className:"bg-red-500/20 border-red-400/40 text-red-100",children:"Review"})]})},e.id)),X.length>4&&(0,j.jsx)("p",{className:"text-xs text-red-100/60",children:"Showing top priorities. Use the filter below to focus on all flagged vehicles."})]})]}),(0,j.jsx)(S.Card,{className:"border border-white/10 bg-white/5",children:(0,j.jsxs)(S.CardContent,{className:"pt-6 space-y-4",children:[(0,j.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[(0,j.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 flex-1 w-full",children:[(0,j.jsxs)("div",{className:"relative flex-1",children:[(0,j.jsx)(A.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,j.jsx)(D.Input,{placeholder:"Search by code, name, investment, or platform",value:i,onChange:e=>s(e.target.value),className:"pl-10"})]}),(0,j.jsxs)(k.Select,{value:o,onValueChange:d,children:[(0,j.jsx)(k.SelectTrigger,{className:"w-full md:w-[160px]",children:(0,j.jsx)(k.SelectValue,{placeholder:"Status"})}),(0,j.jsxs)(k.SelectContent,{children:[(0,j.jsx)(k.SelectItem,{value:"all",children:"All Status"}),(0,j.jsx)(k.SelectItem,{value:"LIVE",children:"Live"}),(0,j.jsx)(k.SelectItem,{value:"CLOSED",children:"Closed"}),(0,j.jsx)(k.SelectItem,{value:"PENDING",children:"Pending"})]})]}),(0,j.jsxs)(k.Select,{value:c,onValueChange:u,children:[(0,j.jsx)(k.SelectTrigger,{className:"w-full md:w-[160px]",children:(0,j.jsx)(k.SelectValue,{placeholder:"Platform"})}),(0,j.jsxs)(k.SelectContent,{children:[(0,j.jsx)(k.SelectItem,{value:"all",children:"All Platforms"}),K.map(e=>(0,j.jsx)(k.SelectItem,{value:e,children:e},e))]})]}),(0,j.jsxs)(k.Select,{value:h,onValueChange:m,children:[(0,j.jsx)(k.SelectTrigger,{className:"w-full md:w-[180px]",children:(0,j.jsx)(k.SelectValue,{placeholder:"Type"})}),(0,j.jsxs)(k.SelectContent,{children:[(0,j.jsx)(k.SelectItem,{value:"all",children:"All Types"}),(0,j.jsx)(k.SelectItem,{value:"venture_capital",children:"Venture Capital"}),(0,j.jsx)(k.SelectItem,{value:"private_equity",children:"Private Equity"}),(0,j.jsx)(k.SelectItem,{value:"real_estate",children:"Real Estate"}),(0,j.jsx)(k.SelectItem,{value:"fund",children:"Fund"}),(0,j.jsx)(k.SelectItem,{value:"spv",children:"SPV"}),(0,j.jsx)(k.SelectItem,{value:"other",children:"Other"})]})]})]}),(0,j.jsx)(L.Tabs,{value:l,onValueChange:e=>a(e),children:(0,j.jsxs)(L.TabsList,{children:[(0,j.jsxs)(L.TabsTrigger,{value:"table",className:"gap-2",children:[(0,j.jsx)(B.Table,{className:"h-4 w-4"}),"Table"]}),(0,j.jsxs)(L.TabsTrigger,{value:"list",className:"gap-2",children:[(0,j.jsx)(V.List,{className:"h-4 w-4"}),"List"]}),(0,j.jsxs)(L.TabsTrigger,{value:"kanban",className:"gap-2",children:[(0,j.jsx)(P.LayoutGrid,{className:"h-4 w-4"}),"Kanban"]})]})})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,j.jsx)(R.Checkbox,{id:"filter-flagged",checked:U,onCheckedChange:e=>z(!0===e)}),(0,j.jsx)(T.Label,{htmlFor:"filter-flagged",className:"cursor-pointer",children:"Show only vehicles with unresolved flags"})]}),0===H.length?(0,j.jsx)("div",{className:"py-12 text-center text-muted-foreground",children:(0,j.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,j.jsx)(I.AlertCircle,{className:"h-6 w-6"}),(0,j.jsx)("p",{children:"No vehicles found. Try adjusting your filters."})]})}):(0,j.jsxs)(j.Fragment,{children:["table"===l&&(0,j.jsx)(rh,{entities:H,onEntityClick:W,onEntityEdit:G}),"list"===l&&(0,j.jsx)(rm,{entities:H,onEntityClick:W,onEntityEdit:G,onStatusChange:J}),"kanban"===l&&(0,j.jsx)(rg,{entities:H,onEntityClick:W,onEntityEdit:G,onStatusChange:J})]})]})}),g&&(0,j.jsx)(rE,{entity:g,open:!0,onClose:()=>f(null),onSuccess:e=>{n(t=>t.map(t=>t.id===e.id?e:t)),f(null)}}),(0,j.jsx)(rO,{open:x,onOpenChange:p,onSuccess:e=>{n(t=>[e,...t]),q("success"),v(`Entity "${e.name}" created successfully.`),setTimeout(()=>v(null),4e3),t.refresh()}})]})}e.s(["EntitiesPageEnhanced",()=>rM],371432)}]);