(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,429760,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(679472),o=e.i(47264),s=e.i(478985),n=e.i(873358),i=e.i(362208),d=e.i(599205),l=e.i(68977),c=e.i(798827),u="Tabs",[m,h]=(0,o.createContextScope)(u,[s.createRovingFocusGroupScope]),p=(0,s.createRovingFocusGroupScope)(),[f,w]=m(u),v=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:o,onValueChange:s,defaultValue:n,orientation:m="horizontal",dir:h,activationMode:p="automatic",...w}=e,v=(0,d.useDirection)(h),[g,x]=(0,l.useControllableState)({prop:o,onChange:s,defaultProp:n??"",caller:u});return(0,t.jsx)(f,{scope:r,baseId:(0,c.useId)(),value:g,onValueChange:x,orientation:m,dir:v,activationMode:p,children:(0,t.jsx)(i.Primitive.div,{dir:v,"data-orientation":m,...w,ref:a})})});v.displayName=u;var g="TabsList",x=a.forwardRef((e,a)=>{let{__scopeTabs:r,loop:o=!0,...n}=e,d=w(g,r),l=p(r);return(0,t.jsx)(s.Root,{asChild:!0,...l,orientation:d.orientation,dir:d.dir,loop:o,children:(0,t.jsx)(i.Primitive.div,{role:"tablist","aria-orientation":d.orientation,...n,ref:a})})});x.displayName=g;var b="TabsTrigger",y=a.forwardRef((e,a)=>{let{__scopeTabs:o,value:n,disabled:d=!1,...l}=e,c=w(b,o),u=p(o),m=C(c.baseId,n),h=D(c.baseId,n),f=n===c.value;return(0,t.jsx)(s.Item,{asChild:!0,...u,focusable:!d,active:f,children:(0,t.jsx)(i.Primitive.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:m,...l,ref:a,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{d||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;f||d||!e||c.onValueChange(n)})})})});y.displayName=b;var j="TabsContent",N=a.forwardRef((e,r)=>{let{__scopeTabs:o,value:s,forceMount:d,children:l,...c}=e,u=w(j,o),m=C(u.baseId,s),h=D(u.baseId,s),p=s===u.value,f=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:d||p,children:({present:a})=>(0,t.jsx)(i.Primitive.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!a,id:h,tabIndex:0,...c,ref:r,style:{...e.style,animationDuration:f.current?"0s":void 0},children:a&&l})})});function C(e,t){return`${e}-trigger-${t}`}function D(e,t){return`${e}-content-${t}`}N.displayName=j;var T=e.i(282141);let k=a.forwardRef(({id:e,...r},o)=>{let s=a.useId();return(0,t.jsx)(v,{ref:o,id:e??s,...r})});k.displayName="Tabs";let R=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(x,{ref:r,className:(0,T.cn)("inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));R.displayName=x.displayName;let F=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(y,{ref:r,className:(0,T.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));F.displayName=y.displayName;let E=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(N,{ref:r,className:(0,T.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));E.displayName=N.displayName,e.s(["Tabs",()=>k,"TabsContent",()=>E,"TabsList",()=>R,"TabsTrigger",()=>F],429760)},90613,e=>{"use strict";var t=e.i(722679),a=e.i(282141);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>n,"CardFooter",()=>d,"CardHeader",()=>o,"CardTitle",()=>s])},761722,e=>{"use strict";let t=(0,e.i(410587).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],761722)},496383,e=>{"use strict";let t=(0,e.i(410587).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],496383)},722318,676967,e=>{"use strict";class t extends Error{statusCode;originalError;constructor(e,t,a){super(e),this.statusCode=t,this.originalError=a,this.name="DocumentError"}}e.s(["DocumentError",()=>t],676967);class a{static isValidStorageUrl(e){return!!e&&!!e.startsWith("https://")&&(e.includes("supabase.co/storage")||e.includes("supabase.com/storage")||e.startsWith("blob:"))}static async parseResponse(e){let a;try{a=await e.json()}catch(a){throw new t("Invalid response from server",e.status,a)}if(!e.ok)throw new t(a.error||a.message||"Failed to load document",e.status,a);let r=a.url||a.download_url;if(!r)throw new t("No download URL in response",500,a);if(!this.isValidStorageUrl(r))throw new t("Invalid download URL format",500,a);return a.url=r,a.download_url=r,a}static async getPreviewUrl(e){try{let t=await fetch(`/api/documents/${e}/download?mode=preview`,{method:"GET",headers:{"Content-Type":"application/json"}});return await this.parseResponse(t)}catch(e){if(e instanceof t)throw e;throw new t("Network error while loading preview",0,e)}}static async getDownloadUrl(e){try{let t=await fetch(`/api/documents/${e}/download?mode=download`,{method:"GET",headers:{"Content-Type":"application/json"}});return await this.parseResponse(t)}catch(e){if(e instanceof t)throw e;throw new t("Network error while loading download",0,e)}}static async getDealDocumentPreviewUrl(e,a){try{let t=await fetch(`/api/deals/${e}/documents/${a}/download?mode=preview`,{method:"GET",headers:{"Content-Type":"application/json"}});return await this.parseResponse(t)}catch(e){if(e instanceof t)throw e;throw new t("Network error while loading deal document preview",0,e)}}static async getDealDocumentDownloadUrl(e,a){try{let t=await fetch(`/api/deals/${e}/documents/${a}/download?mode=download`,{method:"GET",headers:{"Content-Type":"application/json"}});return await this.parseResponse(t)}catch(e){if(e instanceof t)throw e;throw new t("Network error while loading deal document download",0,e)}}static getErrorMessage(e){switch(e.statusCode){case 401:return"You do not have permission to view this document.";case 403:return"Access to this document is forbidden.";case 404:return"Document not found or has been deleted.";case 413:return"File is too large to process.";case 500:return"Server error while loading document. Please try again.";case 0:return"Network error. Please check your connection and try again.";default:return e.message||"Failed to load document preview."}}}e.s(["DocumentService",()=>a],722318)},90922,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(90613),o=e.i(316264),s=e.i(119311),n=e.i(761722),i=e.i(496383),d=e.i(722318),l=e.i(994500);function c({documents:e}){let[c,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),p=async e=>{try{u(e.id);let{download_url:t}=await d.DocumentService.getDownloadUrl(e.id),a=document.createElement("a");a.href=t,a.download=e.name||e.file_key?.split("/").pop()||"document",document.body.appendChild(a),a.click(),document.body.removeChild(a),l.toast.success("Download started")}catch(e){console.error("Download error:",e),l.toast.error(e.message||"Failed to download document")}finally{u(null)}},f=async e=>{try{h(e.id);let{download_url:t}=await d.DocumentService.getPreviewUrl(e.id);window.open(t,"_blank"),l.toast.success("Opening preview")}catch(e){console.error("Preview error:",e),l.toast.error(e.message||"Failed to preview document")}finally{h(null)}};return(0,t.jsxs)(r.Card,{className:"border-0 shadow-md",children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(s.FileText,{className:"h-5 w-5 text-blue-600"}),"Related Documents"]}),(0,t.jsx)(r.CardDescription,{children:"Documents specific to this investment vehicle"})]}),(0,t.jsx)(r.CardContent,{children:e&&e.length>0?(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s.FileText,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name||e.file_key?.split("/").pop()||e.type}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.type," â€¢ ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Button,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>f(e),disabled:m===e.id||c===e.id,children:m===e.id?(0,t.jsx)(t.Fragment,{children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Eye,{className:"h-4 w-4"}),"Preview"]})}),(0,t.jsx)(o.Button,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>p(e),disabled:c===e.id||m===e.id,children:c===e.id?(0,t.jsx)(t.Fragment,{children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Download,{className:"h-4 w-4"}),"Download"]})})]})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)(s.FileText,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),(0,t.jsx)("p",{children:"No documents available"})]})})]})}e.s(["VehicleDocumentsList",()=>c])}]);