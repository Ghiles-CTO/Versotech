(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,150339,e=>{"use strict";var s=e.i(722679),t=e.i(340915),n=e.i(80465),a=e.i(745083),i=e.i(645855),r=e.i(401148),l=e.i(119311),o=e.i(758171),d=e.i(197098),c=e.i(946738),m=e.i(16479),x=e.i(398472),u=e.i(429747),h=e.i(417439),p=e.i(316264),j=e.i(90613),g=e.i(129432),v=e.i(191569),f=e.i(514133),C=e.i(816654),b=e.i(538892),N=e.i(352776),y=e.i(669019),w=e.i(237635),S=e.i(994500),T=e.i(619962),k=e.i(663216),_=e.i(661521),P=e.i(704477),A=e.i(691974),D=e.i(522195),R=e.i(981218),I=e.i(615870),U=e.i(758768),B=e.i(733179),O=e.i(619324),L=e.i(818798),F=e.i(682836);let E={fullName:"Full Legal Name",dateOfBirth:"Date of Birth",nationality:"Nationality",countryOfResidence:"Country of Residence",residentialAddress:"Residential Address",city:"City",postalCode:"Postal Code",email:"Email Address",phone:"Phone Number",taxIdNumber:"Tax ID Number",taxResidencyCountry:"Tax Residency Country",investmentType:"Investment Type",investmentTypeOther:"Other Investment Type",isWellInformed:"Well-Informed Investor?",wellInformedBasis:"Basis for Well-Informed Status",wellInformedEvidence:"Supporting Evidence",isPEP:"Politically Exposed Person (PEP)?",pepDetails:"PEP Details",isRelatedToPEP:"Related to a PEP?",relatedPEPDetails:"Related PEP Details",isSanctioned:"Subject to Sanctions?",sanctionedDetails:"Sanctions Details",hasCriminalRecord:"Criminal Record?",criminalDetails:"Criminal Record Details",isUnderInvestigation:"Under Investigation?",investigationDetails:"Investigation Details",hasBankruptcy:"Bankruptcy History?",bankruptcyDetails:"Bankruptcy Details",isUSPerson:"US Person?",sourceOfFunds:"Source of Funds",sourceOfWealth:"Source of Wealth",isUSCitizen:"US Citizen?",isUSResident:"US Resident?",hasUSGreenCard:"US Green Card Holder?",hasSubstantialUSPresence:"Substantial US Presence?",hasUSMailingAddress:"US Mailing Address?",hasUSPhoneNumber:"US Phone Number?",hasUSBankAccount:"US Bank Account?",hasUSPowerOfAttorney:"US Power of Attorney?",usConnectionDetails:"US Connection Details",isAccreditedInvestor:"Accredited Investor?",accreditationBasis:"Accreditation Basis",hasReceivedOfferingMaterials:"Received Offering Materials?",understandsRestrictions:"Understands Restrictions?",acknowledgesFATCA:"FATCA Acknowledgment",willProvideW9:"Will Provide W-9?",understandsWithholding:"Understands Withholding?",certifiesTaxCompliance:"Certifies Tax Compliance?",acknowledgesReportingObligations:"Reporting Obligations Acknowledged?",educationLevel:"Education Level",employmentStatus:"Employment Status",occupation:"Occupation",employer:"Employer",yearsInvestingExperience:"Years of Investment Experience",annualIncome:"Annual Income",netWorth:"Net Worth",liquidNetWorth:"Liquid Net Worth",investmentObjective:"Investment Objective",riskTolerance:"Risk Tolerance",investmentHorizon:"Investment Time Horizon",percentageOfNetWorthToInvest:"% of Net Worth to Invest",hasAlternativeInvestmentExperience:"Alternative Investment Experience?",alternativeInvestmentTypes:"Types of Alternative Investments",acknowledgesIlliquidity:"Acknowledges Illiquidity Risk",acknowledgesLossRisk:"Acknowledges Loss Risk",acknowledgesNoGuarantees:"Acknowledges No Guarantees",acknowledgesLimitedInfo:"Acknowledges Limited Information",acknowledgesNoRegulation:"Acknowledges Limited Regulation",acknowledgesConflicts:"Acknowledges Conflicts of Interest",acknowledgesTaxImplications:"Acknowledges Tax Implications",acknowledgesFees:"Acknowledges Fees",hasReadOfferingDocs:"Has Read Offering Documents",hasSoughtIndependentAdvice:"Has Sought Independent Advice",certifiesAccuracy:"Certifies Accuracy",certifiesNoOmissions:"Certifies No Omissions",agreesToUpdates:"Agrees to Provide Updates",consentToProcessing:"Consents to Data Processing",signatureName:"Signature Name",signatureDate:"Signature Date",lastCompletedStep:"Last Completed Step",wizardVersion:"Form Version"},z=["isPEP","isRelatedToPEP","isSanctioned","hasCriminalRecord","isUnderInvestigation","hasBankruptcy"],H={step1:["fullName","dateOfBirth","nationality","countryOfResidence","residentialAddress","city","postalCode","email","phone","taxIdNumber","taxResidencyCountry"],step2:["investmentType","investmentTypeOther"],step3:["isWellInformed","wellInformedBasis","wellInformedEvidence"],step4:["isPEP","pepDetails","isRelatedToPEP","relatedPEPDetails","isSanctioned","sanctionedDetails","hasCriminalRecord","criminalDetails","isUnderInvestigation","investigationDetails","hasBankruptcy","bankruptcyDetails","isUSPerson","sourceOfFunds","sourceOfWealth"],step5:["isUSCitizen","isUSResident","hasUSGreenCard","hasSubstantialUSPresence","hasUSMailingAddress","hasUSPhoneNumber","hasUSBankAccount","hasUSPowerOfAttorney","usConnectionDetails"],step6:["isAccreditedInvestor","accreditationBasis","hasReceivedOfferingMaterials","understandsRestrictions"],step7:["acknowledgesFATCA","willProvideW9","understandsWithholding","certifiesTaxCompliance","acknowledgesReportingObligations"],step8:["educationLevel","employmentStatus","occupation","employer","yearsInvestingExperience","annualIncome","netWorth","liquidNetWorth","investmentObjective","riskTolerance","investmentHorizon","percentageOfNetWorthToInvest","hasAlternativeInvestmentExperience","alternativeInvestmentTypes"],step9:["acknowledgesIlliquidity","acknowledgesLossRisk","acknowledgesNoGuarantees","acknowledgesLimitedInfo","acknowledgesNoRegulation","acknowledgesConflicts","acknowledgesTaxImplications","acknowledgesFees","hasReadOfferingDocs","hasSoughtIndependentAdvice"],step10:["certifiesAccuracy","certifiesNoOmissions","agreesToUpdates","consentToProcessing","signatureName","signatureDate"]},q={step1:P.User,step2:A.Briefcase,step3:D.GraduationCap,step4:R.Shield,step5:I.Flag,step6:l.FileText,step7:U.FileCheck,step8:B.TrendingUp,step9:O.AlertTriangle,step10:L.PenTool};function W(e){return e.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/\b\w/g,e=>e.toUpperCase()).trim()}function $({open:e,onClose:t,investorName:i,submittedAt:o,metadata:d}){if(!d)return null;let c={};for(let[e,s]of Object.entries(d))e.startsWith("step")&&"object"==typeof s&&null!==s?Object.assign(c,s):c[e]=s;let m="yes"===c.isUSPerson;return(0,s.jsx)(N.Dialog,{open:e,onOpenChange:e=>!e&&t(),children:(0,s.jsxs)(N.DialogContent,{className:"max-w-3xl max-h-[85vh] flex flex-col overflow-hidden",children:[(0,s.jsxs)(N.DialogHeader,{className:"flex-shrink-0",children:[(0,s.jsxs)(N.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.FileText,{className:"h-5 w-5"}),"KYC Questionnaire Responses"]}),(0,s.jsxs)(N.DialogDescription,{children:["Submitted by ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:i})," on"," ",new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),(0,s.jsx)("div",{className:"flex-1 min-h-0 -mx-6 px-6 overflow-y-auto",children:(0,s.jsx)("div",{className:"space-y-6 py-4",children:(m?["step1","step2","step3","step4","step5","step6","step7","step8","step9","step10"]:["step1","step2","step3","step4","step8","step9","step10"]).map(e=>{let t,i=(t=parseInt(e.replace("step",""))-1,F.STEP_CONFIG[t]),o=q[e]||l.FileText,d=(H[e]||[]).filter(e=>void 0!==c[e]&&""!==c[e]);return 0===d.length?null:(0,s.jsxs)(j.Card,{className:"border-border/50",children:[(0,s.jsx)(j.CardHeader,{className:"pb-3",children:(0,s.jsxs)(j.CardTitle,{className:"text-base font-semibold flex items-center gap-2",children:[(0,s.jsx)(o,{className:"h-4 w-4 text-muted-foreground"}),i?.title||`Step ${e.replace("step","")}`,"step4"===e&&(0,s.jsx)(g.Badge,{variant:"outline",className:"ml-2 text-xs font-normal",children:"Compliance"})]})}),(0,s.jsx)(j.CardContent,{className:"pt-0",children:(0,s.jsx)("div",{className:"grid gap-3",children:d.map(e=>{var t;let i=c[e],l=!!z.includes(e)&&("yes"===i||!0===i),o=E[e]||W(e),d=null==(t=i)||""===t?"—":"boolean"==typeof t?t?"Yes":"No":"yes"===t||"no"===t?"yes"===t?"Yes":"No":Array.isArray(t)?0===t.length?"—":t.map(e=>W(String(e))).join(", "):"string"==typeof t&&(t.includes("_")||/^[a-z]+[A-Z]/.test(t))?W(t):String(t);return(0,s.jsxs)("div",{className:`flex flex-col gap-1 p-3 rounded-lg ${l?"bg-destructive/10 border border-destructive/30":"bg-muted/50"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:o}),l&&(0,s.jsxs)(g.Badge,{variant:"destructive",className:"text-xs",children:[(0,s.jsx)(r.AlertCircle,{className:"h-3 w-3 mr-1"}),"Requires Review"]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:"boolean"==typeof i||"yes"===i||"no"===i?(0,s.jsxs)(s.Fragment,{children:[!0===i||"yes"===i?(0,s.jsx)(n.CheckCircle,{className:`h-4 w-4 ${l?"text-destructive":"text-emerald-500"}`}):(0,s.jsx)(a.XCircle,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:`text-sm ${l?"font-semibold text-destructive":"text-foreground"}`,children:d})]}):(0,s.jsx)("span",{className:"text-sm text-foreground",children:d})})]},e)})})})]},e)})})}),(0,s.jsx)(_.Separator,{className:"flex-shrink-0"}),(0,s.jsx)(N.DialogFooter,{className:"pt-4 flex-shrink-0",children:(0,s.jsx)(p.Button,{onClick:t,children:"Close"})})]})})}var V=e.i(595195),Y=e.i(282141);function K(){let[e,_]=(0,t.useState)([]),[P,A]=(0,t.useState)(null),[D,R]=(0,t.useState)(null),[I,U]=(0,t.useState)(!0),[B,O]=(0,t.useState)("all"),[L,F]=(0,t.useState)("all"),[E,z]=(0,t.useState)("all"),[H,q]=(0,t.useState)(""),[W,K]=(0,t.useState)(1),[M,G]=(0,t.useState)(25),[X,Q]=(0,t.useState)(!1),[J,Z]=(0,t.useState)(null),[ee,es]=(0,t.useState)("approve"),[et,en]=(0,t.useState)(""),[ea,ei]=(0,t.useState)(""),[er,el]=(0,t.useState)(!1),[eo,ed]=(0,t.useState)(new Set),[ec,em]=(0,t.useState)(!1),[ex,eu]=(0,t.useState)(""),eh=e.filter(e=>["pending","under_review"].includes(e.status)),ep=()=>ed(new Set),ej=async(e,s)=>{if(0!==eo.size){el(!0);try{let t=Array.from(eo).map(t=>fetch(`/api/staff/kyc-submissions/${t}/review`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,rejection_reason:"reject"===e?s:void 0})})),n=(await Promise.all(t)).filter(e=>e.ok).length;S.toast.success(`${n} document${1!==n?"s":""} ${"approve"===e?"approved":"rejected"}`),ep(),em(!1),eu(""),await ek()}catch(e){console.error("Bulk action error:",e),S.toast.error("Failed to process some documents")}finally{el(!1)}}},{isOpen:eg,document:ev,previewUrl:ef,isLoading:eC,error:eb,openPreview:eN,closePreview:ey,downloadDocument:ew}=(0,k.useDocumentViewer)(),[eS,eT]=(0,t.useState)(null),ek=(0,t.useCallback)(async()=>{try{let e=new URLSearchParams;"all"!==B&&e.append("status",B),"all"!==L&&e.append("document_type",L),"all"!==E&&e.append("investor_id",E),e.append("page",String(W)),e.append("pageSize",String(M));let s=await fetch(`/api/staff/kyc-submissions?${e.toString()}`);if(!s.ok){let e=await s.json();throw console.error("API error response:",e),Error(e.error||"Failed to load submissions")}let t=await s.json();_(t.submissions||[]),A(t.statistics||null),R(t.pagination||null)}catch(e){console.error("Error loading submissions:",e),S.toast.error("Failed to load KYC submissions",{description:e.message})}finally{U(!1)}},[B,L,E,W,M]);(0,t.useEffect)(()=>{K(1)},[B,L,E]),(0,t.useEffect)(()=>{ek()},[ek]);let e_=(e,s)=>{Z(e),es(s),en(""),ei(""),Q(!0)},eP=async()=>{if(J){if(("reject"===ee||"request_info"===ee)&&!et.trim())return void S.toast.error("request_info"===ee?"Please specify what additional information is needed":"Please provide a rejection reason");el(!0);try{let e=await fetch(`/api/staff/kyc-submissions/${J.id}/review`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:ee,rejection_reason:"reject"===ee||"request_info"===ee?et:void 0,notes:ea||void 0})});if(!e.ok){let s=await e.json();throw Error(s.error||"Review failed")}S.toast.success({approve:"Document approved successfully",reject:"Document rejected successfully",request_info:"Information request sent to investor"}[ee]),Q(!1),await ek()}catch(e){console.error("Review error:",e),S.toast.error(e.message||"Failed to review document")}finally{el(!1)}}},eA=Array.from(new Set(e.map(e=>e.document_type))).sort(),eD=Array.from(new Map(e.filter(e=>e.investor).map(e=>[e.investor.id,e.investor])).values()).sort((e,s)=>(e.display_name||e.legal_name).localeCompare(s.display_name||s.legal_name)),eR=e.filter(e=>{if(H){let s=H.toLowerCase(),t=(0,V.getDocumentTypeLabel)(e.document_type,e.custom_label).toLowerCase();return e.investor?.display_name.toLowerCase().includes(s)||e.investor?.legal_name.toLowerCase().includes(s)||e.investor?.email.toLowerCase().includes(s)||t.includes(s)||e.counterparty_entity?.legal_name.toLowerCase().includes(s)}return!0});return I?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"KYC Document Review"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Review and approve investor KYC documents"})]}),P&&(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 lg:grid-cols-7",children:[(0,s.jsxs)(j.Card,{children:[(0,s.jsx)(j.CardHeader,{className:"pb-2",children:(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total"})}),(0,s.jsx)(j.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:P.total})})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsx)(j.CardHeader,{className:"pb-2",children:(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Draft"})}),(0,s.jsx)(j.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-slate-500",children:P.draft})})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsx)(j.CardHeader,{className:"pb-2",children:(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Pending"})}),(0,s.jsx)(j.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-amber-500",children:P.pending})})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsx)(j.CardHeader,{className:"pb-2",children:(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Under Review"})}),(0,s.jsx)(j.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:P.under_review})})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsx)(j.CardHeader,{className:"pb-2",children:(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Approved"})}),(0,s.jsx)(j.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-emerald-500",children:P.approved})})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsx)(j.CardHeader,{className:"pb-2",children:(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Rejected"})}),(0,s.jsx)(j.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-rose-500",children:P.rejected})})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsx)(j.CardHeader,{className:"pb-2",children:(0,s.jsx)(j.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Expired"})}),(0,s.jsx)(j.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-slate-400",children:P.expired})})]})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsx)(j.CardHeader,{children:(0,s.jsx)(j.CardTitle,{children:"Filters"})}),(0,s.jsx)(j.CardContent,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{htmlFor:"status-filter",children:"Status"}),(0,s.jsxs)(b.Select,{value:B,onValueChange:O,children:[(0,s.jsx)(b.SelectTrigger,{id:"status-filter",children:(0,s.jsx)(b.SelectValue,{placeholder:"All statuses"})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"all",children:"All Statuses"}),(0,s.jsx)(b.SelectItem,{value:"draft",children:"Draft"}),(0,s.jsx)(b.SelectItem,{value:"pending",children:"Pending"}),(0,s.jsx)(b.SelectItem,{value:"under_review",children:"Under Review"}),(0,s.jsx)(b.SelectItem,{value:"approved",children:"Approved"}),(0,s.jsx)(b.SelectItem,{value:"rejected",children:"Rejected"}),(0,s.jsx)(b.SelectItem,{value:"expired",children:"Expired"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{htmlFor:"type-filter",children:"Document Type"}),(0,s.jsxs)(b.Select,{value:L,onValueChange:F,children:[(0,s.jsx)(b.SelectTrigger,{id:"type-filter",children:(0,s.jsx)(b.SelectValue,{placeholder:"All types"})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"all",children:"All Types"}),eA.map(e=>(0,s.jsx)(b.SelectItem,{value:e,children:(0,V.getDocumentTypeLabel)(e)},e))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{htmlFor:"investor-filter",children:"Investor"}),(0,s.jsxs)(b.Select,{value:E,onValueChange:z,children:[(0,s.jsx)(b.SelectTrigger,{id:"investor-filter",children:(0,s.jsx)(b.SelectValue,{placeholder:"All investors"})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"all",children:"All Investors"}),eD.map(e=>(0,s.jsx)(b.SelectItem,{value:e.id,children:e.display_name||e.legal_name},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{htmlFor:"search",children:"Search"}),(0,s.jsx)(v.Input,{id:"search",placeholder:"Search investor name or email...",value:H,onChange:e=>q(e.target.value)})]})]})})]}),(0,s.jsxs)(j.Card,{children:[(0,s.jsxs)(j.CardHeader,{children:[(0,s.jsxs)(j.CardTitle,{children:["Submissions (",eR.length,")"]}),(0,s.jsx)(j.CardDescription,{children:"Review pending KYC documents and approve or reject them"})]}),(0,s.jsxs)(j.CardContent,{children:[(0,s.jsxs)(w.Table,{children:[(0,s.jsx)(w.TableHeader,{children:(0,s.jsxs)(w.TableRow,{children:[(0,s.jsx)(w.TableHead,{className:"w-10",children:(0,s.jsx)("input",{type:"checkbox",checked:eo.size>0&&eo.size===eh.length,onChange:e=>e.target.checked?void ed(new Set(eh.map(e=>e.id))):ep(),className:"h-4 w-4 rounded border-gray-300"})}),(0,s.jsx)(w.TableHead,{children:"Investor"}),(0,s.jsx)(w.TableHead,{children:"Document Type"}),(0,s.jsx)(w.TableHead,{children:"Content"}),(0,s.jsx)(w.TableHead,{children:"Submitted"}),(0,s.jsx)(w.TableHead,{children:"Status"}),(0,s.jsx)(w.TableHead,{children:"Reviewer"}),(0,s.jsx)(w.TableHead,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(w.TableBody,{children:0===eR.length?(0,s.jsx)(w.TableRow,{children:(0,s.jsx)(w.TableCell,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No submissions found"})}):eR.map(e=>(0,s.jsxs)(w.TableRow,{children:[(0,s.jsx)(w.TableCell,{children:["pending","under_review"].includes(e.status)&&(0,s.jsx)("input",{type:"checkbox",checked:eo.has(e.id),onChange:()=>{var s;return s=e.id,void ed(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:"h-4 w-4 rounded border-gray-300"})}),(0,s.jsx)(w.TableCell,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium flex items-center gap-1",children:e.counterparty_entity?(0,s.jsxs)(s.Fragment,{children:[e.counterparty_entity.legal_name,(0,s.jsx)(g.Badge,{variant:"outline",className:"ml-2 text-xs",children:"Entity"})]}):(0,s.jsxs)(s.Fragment,{children:[e.investor?.display_name||e.investor?.legal_name||"Unknown",e.investor?.id&&(0,s.jsx)("a",{href:`/versotech/staff/investors/${e.investor.id}`,target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-muted-foreground hover:text-foreground transition-colors",title:"View investor profile",children:(0,s.jsx)(x.ExternalLink,{className:"w-3 h-3"})})]})}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1 flex-wrap",children:[e.investor?.email||"",e.investor?.type&&["entity","corporate","institution"].includes(e.investor.type)&&(0,s.jsx)(g.Badge,{variant:"secondary",className:"text-xs",children:e.investor.type}),e.investor?.kyc_status&&(0,s.jsxs)(g.Badge,{variant:"outline",className:`text-xs ${"approved"===e.investor.kyc_status?"border-emerald-500 text-emerald-500":"pending"===e.investor.kyc_status?"border-amber-500 text-amber-500":"rejected"===e.investor.kyc_status?"border-rose-500 text-rose-500":"border-muted-foreground text-muted-foreground"}`,children:["KYC: ",e.investor.kyc_status]})]})]})}),(0,s.jsx)(w.TableCell,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:(0,V.getDocumentTypeLabel)(e.document_type,e.custom_label)}),e.investor_member&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-0.5",children:(0,s.jsxs)(g.Badge,{variant:"outline",className:"text-xs font-normal",children:[e.investor_member.full_name,e.investor_member.role_title&&` (${e.investor_member.role_title})`]})}),e.version&&e.version>1&&(0,s.jsxs)("div",{className:"text-xs text-amber-500 mt-0.5",children:["v",e.version]})]})}),(0,s.jsx)(w.TableCell,{children:e.document?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.FileText,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm truncate max-w-[200px]",children:e.document.name})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground ml-6",children:(0,Y.formatFileSize)(e.document.file_size_bytes)})]}):e.metadata&&"questionnaire"===e.document_type?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.ClipboardList,{className:"w-4 h-4 text-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-blue-500 font-medium",children:"Questionnaire Responses"})]}):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No content"})}),(0,s.jsxs)(w.TableCell,{children:[(0,s.jsx)("div",{className:"text-sm",children:new Date(e.submitted_at).toLocaleDateString()}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.submitted_at).toLocaleTimeString()})]}),(0,s.jsx)(w.TableCell,{children:(0,s.jsxs)("div",{children:[(e=>{switch(e){case"approved":return(0,s.jsxs)(g.Badge,{className:"bg-green-500",children:[(0,s.jsx)(n.CheckCircle,{className:"w-3 h-3 mr-1"}),"Approved"]});case"rejected":return(0,s.jsxs)(g.Badge,{variant:"destructive",children:[(0,s.jsx)(a.XCircle,{className:"w-3 h-3 mr-1"}),"Rejected"]});case"under_review":return(0,s.jsxs)(g.Badge,{variant:"secondary",children:[(0,s.jsx)(i.Clock,{className:"w-3 h-3 mr-1"}),"Under Review"]});case"pending":return(0,s.jsxs)(g.Badge,{className:"bg-amber-500",children:[(0,s.jsx)(i.Clock,{className:"w-3 h-3 mr-1"}),"Pending"]});case"draft":return(0,s.jsxs)(g.Badge,{variant:"outline",className:"border-slate-400 text-slate-400",children:[(0,s.jsx)(i.Clock,{className:"w-3 h-3 mr-1"}),"Draft"]});case"expired":return(0,s.jsxs)(g.Badge,{variant:"outline",children:[(0,s.jsx)(r.AlertCircle,{className:"w-3 h-3 mr-1"}),"Expired"]});default:return null}})(e.status),"rejected"===e.status&&e.rejection_reason&&(0,s.jsx)(y.TooltipProvider,{children:(0,s.jsxs)(y.Tooltip,{children:[(0,s.jsx)(y.TooltipTrigger,{asChild:!0,children:(0,s.jsx)("div",{className:"text-xs text-rose-400 mt-1 max-w-[200px] truncate cursor-help",children:e.rejection_reason})}),(0,s.jsx)(y.TooltipContent,{className:"max-w-[300px]",children:(0,s.jsx)("p",{className:"text-sm",children:e.rejection_reason})})]})})]})}),(0,s.jsx)(w.TableCell,{children:e.reviewer?(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{children:e.reviewer.display_name}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.reviewed_at).toLocaleDateString()})]}):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"-"})}),(0,s.jsx)(w.TableCell,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[e.document&&(0,s.jsx)(y.TooltipProvider,{children:(0,s.jsxs)(y.Tooltip,{children:[(0,s.jsx)(y.TooltipTrigger,{asChild:!0,children:(0,s.jsx)(p.Button,{variant:"ghost",size:"sm",onClick:()=>{e.document&&eN({id:e.document.id,file_name:e.document.name,name:e.document.name,mime_type:e.document.mime_type,file_size_bytes:e.document.file_size_bytes})},children:(0,s.jsx)(l.FileText,{className:"w-4 h-4"})})}),(0,s.jsx)(y.TooltipContent,{children:(0,s.jsx)("p",{children:"View Document"})})]})}),e.metadata&&"questionnaire"===e.document_type&&(0,s.jsx)(y.TooltipProvider,{children:(0,s.jsxs)(y.Tooltip,{children:[(0,s.jsx)(y.TooltipTrigger,{asChild:!0,children:(0,s.jsx)(p.Button,{variant:"ghost",size:"sm",onClick:()=>eT(e),children:(0,s.jsx)(u.ClipboardList,{className:"w-4 h-4"})})}),(0,s.jsx)(y.TooltipContent,{children:(0,s.jsx)("p",{children:"View Questionnaire Answers"})})]})}),["pending","under_review"].includes(e.status)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(p.Button,{variant:"outline",size:"sm",className:"text-emerald-500 border-emerald-500 hover:bg-emerald-950 hover:text-emerald-400",onClick:()=>e_(e,"approve"),children:[(0,s.jsx)(n.CheckCircle,{className:"w-4 h-4 mr-1"}),"Approve"]}),(0,s.jsxs)(p.Button,{variant:"outline",size:"sm",className:"text-amber-500 border-amber-500 hover:bg-amber-950 hover:text-amber-400",onClick:()=>e_(e,"request_info"),children:[(0,s.jsx)(h.MessageSquare,{className:"w-4 h-4 mr-1"}),"Request Info"]}),(0,s.jsxs)(p.Button,{variant:"outline",size:"sm",className:"text-rose-500 border-rose-500 hover:bg-rose-950 hover:text-rose-400",onClick:()=>e_(e,"reject"),children:[(0,s.jsx)(a.XCircle,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})})]},e.id))})]}),D&&D.totalPages>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-2 py-4 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Showing ",(D.page-1)*D.pageSize+1," to"," ",Math.min(D.page*D.pageSize,D.totalCount)," of"," ",D.totalCount," submissions"]}),(0,s.jsxs)(b.Select,{value:String(M),onValueChange:e=>{G(Number(e)),K(1)},children:[(0,s.jsx)(b.SelectTrigger,{className:"h-8 w-[70px]",children:(0,s.jsx)(b.SelectValue,{placeholder:M})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"10",children:"10"}),(0,s.jsx)(b.SelectItem,{value:"25",children:"25"}),(0,s.jsx)(b.SelectItem,{value:"50",children:"50"}),(0,s.jsx)(b.SelectItem,{value:"100",children:"100"})]})]}),(0,s.jsx)("span",{children:"per page"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(p.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>K(1),disabled:!D.hasPrevPage,children:(0,s.jsx)(c.ChevronsLeft,{className:"h-4 w-4"})}),(0,s.jsx)(p.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>K(W-1),disabled:!D.hasPrevPage,children:(0,s.jsx)(o.ChevronLeft,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"flex items-center gap-1 px-2 text-sm",children:["Page ",D.page," of ",D.totalPages]}),(0,s.jsx)(p.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>K(W+1),disabled:!D.hasNextPage,children:(0,s.jsx)(d.ChevronRight,{className:"h-4 w-4"})}),(0,s.jsx)(p.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>K(D.totalPages),disabled:!D.hasNextPage,children:(0,s.jsx)(m.ChevronsRight,{className:"h-4 w-4"})})]})]})]})]}),(0,s.jsx)(N.Dialog,{open:X,onOpenChange:Q,children:(0,s.jsxs)(N.DialogContent,{className:"max-w-md",children:[(0,s.jsxs)(N.DialogHeader,{children:[(0,s.jsxs)(N.DialogTitle,{children:["approve"===ee&&"Approve Document","reject"===ee&&"Reject Document","request_info"===ee&&"Request Additional Information"]}),(0,s.jsx)(N.DialogDescription,{children:J&&(0,s.jsxs)(s.Fragment,{children:[(0,V.getDocumentTypeLabel)(J.document_type,J.custom_label)," for"," ",J.counterparty_entity?`${J.counterparty_entity.legal_name} (Entity of ${J.investor?.display_name||J.investor?.legal_name||"Unknown"})`:J.investor?.display_name||J.investor?.legal_name||"Unknown"]})})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[("reject"===ee||"request_info"===ee)&&(0,s.jsxs)("div",{children:[(0,s.jsxs)(f.Label,{htmlFor:"rejection-reason",children:["request_info"===ee?"What information is needed?":"Rejection Reason"," ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(C.Textarea,{id:"rejection-reason",placeholder:"request_info"===ee?"Please specify what additional information or documents the investor needs to provide...":"Please explain why this document is being rejected...",value:et,onChange:e=>en(e.target.value),rows:4,className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.Label,{htmlFor:"review-notes",children:"Notes (Optional)"}),(0,s.jsx)(C.Textarea,{id:"review-notes",placeholder:"Any additional notes...",value:ea,onChange:e=>ei(e.target.value),rows:3,className:"mt-1"})]})]}),(0,s.jsxs)(N.DialogFooter,{children:[(0,s.jsx)(p.Button,{variant:"outline",onClick:()=>Q(!1),disabled:er,children:"Cancel"}),(0,s.jsx)(p.Button,{onClick:eP,disabled:er,className:"approve"===ee?"bg-emerald-600 hover:bg-emerald-700":"request_info"===ee?"bg-amber-600 hover:bg-amber-700":"",children:er?"Processing...":"approve"===ee?"Approve":"request_info"===ee?"Send Request":"Reject"})]})]})}),(0,s.jsx)(T.DocumentViewerFullscreen,{isOpen:eg,document:ev,previewUrl:ef,isLoading:eC,error:eb,onClose:ey,onDownload:ew}),eS&&(0,s.jsx)($,{open:!!eS,onClose:()=>eT(null),investorName:eS.investor?.display_name||eS.investor?.legal_name||"Unknown",submittedAt:eS.submitted_at,metadata:eS.metadata||{}}),eo.size>0&&(0,s.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-background border border-border rounded-lg shadow-lg p-4 flex items-center gap-4 z-50",children:[(0,s.jsxs)("span",{className:"text-sm text-muted-foreground font-medium",children:[eo.size," selected"]}),(0,s.jsxs)(p.Button,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>ej("approve"),disabled:er,children:[(0,s.jsx)(n.CheckCircle,{className:"h-4 w-4 mr-1"}),"Approve All"]}),(0,s.jsxs)(p.Button,{size:"sm",variant:"destructive",onClick:()=>em(!0),disabled:er,children:[(0,s.jsx)(a.XCircle,{className:"h-4 w-4 mr-1"}),"Reject All"]}),(0,s.jsx)(p.Button,{size:"sm",variant:"ghost",onClick:ep,disabled:er,children:"Cancel"})]}),(0,s.jsx)(N.Dialog,{open:ec,onOpenChange:em,children:(0,s.jsxs)(N.DialogContent,{className:"max-w-md",children:[(0,s.jsxs)(N.DialogHeader,{children:[(0,s.jsxs)(N.DialogTitle,{children:["Reject ",eo.size," Documents"]}),(0,s.jsx)(N.DialogDescription,{children:"This will reject all selected documents with the same reason."})]}),(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsxs)(f.Label,{htmlFor:"bulk-rejection-reason",children:["Rejection Reason ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(C.Textarea,{id:"bulk-rejection-reason",placeholder:"Please explain why these documents are being rejected...",value:ex,onChange:e=>eu(e.target.value),rows:4,className:"mt-1"})]}),(0,s.jsxs)(N.DialogFooter,{children:[(0,s.jsx)(p.Button,{variant:"outline",onClick:()=>em(!1),disabled:er,children:"Cancel"}),(0,s.jsx)(p.Button,{variant:"destructive",onClick:()=>ej("reject",ex),disabled:er||!ex.trim(),children:er?"Processing...":"Reject All"})]})]})})]})}e.s(["KYCReviewClient",()=>K],150339)}]);