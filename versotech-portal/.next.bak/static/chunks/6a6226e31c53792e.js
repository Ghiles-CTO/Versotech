(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,764355,747972,e=>{"use strict";var t=e.i(722679),r=e.i(340915),a=e.i(90613),n=e.i(129432),s=e.i(316264),i=e.i(56213),l=e.i(734213),o=e.i(119311),c=e.i(35334),d=e.i(335994),u=e.i(551544),m=e.i(981218),p=e.i(773510),x=e.i(971743),h=e.i(645855),g=e.i(262823),f=e.i(230112),y=e.i(401148),b=e.i(771750),v=e.i(137533);let j={created:(0,t.jsx)(d.UserPlus,{className:"h-4 w-4"}),updated:(0,t.jsx)(u.Edit,{className:"h-4 w-4"}),kyc_submitted:(0,t.jsx)(m.Shield,{className:"h-4 w-4"}),kyc_approved:(0,t.jsx)(c.UserCheck,{className:"h-4 w-4"}),kyc_rejected:(0,t.jsx)(y.AlertCircle,{className:"h-4 w-4"}),document_uploaded:(0,t.jsx)(o.FileText,{className:"h-4 w-4"}),document_deleted:(0,t.jsx)(o.FileText,{className:"h-4 w-4"}),email_sent:(0,t.jsx)(p.Mail,{className:"h-4 w-4"}),status_changed:(0,t.jsx)(l.Activity,{className:"h-4 w-4"}),bank_details_added:(0,t.jsx)(x.Building2,{className:"h-4 w-4"}),bank_details_updated:(0,t.jsx)(x.Building2,{className:"h-4 w-4"})},w={investor:["investor","investors"],introducer:["introducer","introducers"],arranger:["arranger","arrangers"],lawyer:["lawyer","lawyers"],partner:["partner","partners"],commercial_partner:["commercial_partner","commercial_partners","commercial-partner"]};function _({entityType:e,entityId:o,entityName:c}){let[d,u]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0),[x,_]=(0,r.useState)(null),[C,N]=(0,r.useState)(!1),[D,M]=(0,r.useState)(1),T=(0,r.useCallback)(async(t,r=!1)=>{try{p(!0),_(null);let a=w[e].join(","),n=await fetch(`/api/admin/activity-logs?entityId=${o}&entityTypes=${a}&page=${t}&pageSize=20`);if(!n.ok)throw Error("Failed to fetch activity logs");let s=await n.json();r?u(e=>[...e,...s.logs]):u(s.logs),N(s.hasMore)}catch(e){_(e instanceof Error?e.message:"An error occurred")}finally{p(!1)}},[o,e]);(0,r.useEffect)(()=>{T(1)},[T]);let S=()=>{M(1),T(1)};return m&&0===d.length?(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"Activity History"}),(0,t.jsxs)(a.CardDescription,{children:["Recent activity and changes for this ",e.replace("_"," ")]})]}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(i.Skeleton,{className:"h-8 w-8 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(i.Skeleton,{className:"h-4 w-3/4"}),(0,t.jsx)(i.Skeleton,{className:"h-3 w-1/4"})]})]},e))})})]}):x?(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"Activity History"}),(0,t.jsxs)(a.CardDescription,{children:["Recent activity and changes for this ",e.replace("_"," ")]})]}),(0,t.jsx)(a.CardContent,{children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,t.jsx)(y.AlertCircle,{className:"h-12 w-12 text-red-400 mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:x}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:S,children:[(0,t.jsx)(g.RefreshCw,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})]}):(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.CardTitle,{children:"Activity History"}),(0,t.jsxs)(a.CardDescription,{children:["Recent activity and changes",c?` for ${c}`:""]})]}),(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:S,disabled:m,children:(0,t.jsx)(g.RefreshCw,{className:`h-4 w-4 ${m?"animate-spin":""}`})})]}),(0,t.jsx)(a.CardContent,{children:0===d.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,t.jsx)(l.Activity,{className:"h-12 w-12 text-muted-foreground mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No activity recorded yet"})]}):(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"relative",children:d.map((e,r)=>{var a;return(0,t.jsxs)("div",{className:"relative pl-8 pb-6 last:pb-0",children:[r<d.length-1&&(0,t.jsx)("div",{className:"absolute left-3 top-8 bottom-0 w-px bg-border"}),(0,t.jsx)("div",{className:"absolute left-0 top-1 h-6 w-6 rounded-full bg-muted flex items-center justify-center",children:j[e.action]||(0,t.jsx)(l.Activity,{className:"h-3 w-3"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:(a=e.action)?a.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""}),(0,t.jsx)(n.Badge,{className:function(e){switch(e){case"entity_management":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"kyc_workflow":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"document_management":return"bg-amber-500/20 text-amber-400 border-amber-500/30";case"communication":return"bg-green-500/20 text-green-400 border-green-500/30";case"financial":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}}(e.event_type),children:e.event_type.replace(/_/g," ")})]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.actor_name||e.actor_email||"System"}),e.action_details&&Object.keys(e.action_details).length>0&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1 p-2 rounded bg-muted/50",children:Object.entries(e.action_details).map(([e,r])=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("span",{className:"font-medium",children:[e.replace(/_/g," "),":"]}),(0,t.jsx)("span",{children:"object"==typeof r?JSON.stringify(r):String(r)})]},e))}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[(0,t.jsx)(h.Clock,{className:"h-3 w-3"}),(0,t.jsx)("span",{title:(0,v.format)(new Date(e.timestamp),"PPpp"),children:(0,b.formatDistanceToNow)(new Date(e.timestamp),{addSuffix:!0})})]})]})]},e.id)})}),C&&(0,t.jsx)("div",{className:"flex justify-center pt-4",children:(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>{let e=D+1;M(e),T(e,!0)},disabled:m,children:[m?(0,t.jsx)(g.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}):(0,t.jsx)(f.ChevronDown,{className:"h-4 w-4 mr-2"}),"Load More"]})})]})})]})}function C(e,t){return e&&t[e]||"bg-gray-500/20 text-gray-400 border-gray-500/30"}e.s(["ActivityTimelineTab",()=>_],764355),e.s(["getStatusStyle",()=>C,"kycStyles",0,{approved:"bg-green-500/20 text-green-400 border-green-500/30",draft:"bg-gray-500/20 text-gray-400 border-gray-500/30",pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",not_started:"bg-gray-500/20 text-gray-400 border-gray-500/30",expired:"bg-red-500/20 text-red-400 border-red-500/30",rejected:"bg-red-500/20 text-red-400 border-red-500/30"},"statusStyles",0,{active:"bg-green-500/20 text-green-400 border-green-500/30",pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",inactive:"bg-gray-500/20 text-gray-400 border-gray-500/30",suspended:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",onboarding:"bg-blue-500/20 text-blue-400 border-blue-500/30"}],747972)},429482,e=>{"use strict";var t=e.i(722679),r=e.i(340915),a=e.i(795988),n=e.i(476817),s=e.i(341695),i=e.i(352776),l=e.i(316264),o=e.i(191569),c=e.i(514133),d=e.i(538892),u=e.i(45778),m=e.i(263229),p=e.i(773510),x=e.i(704477),h=e.i(691974),g=e.i(994500);let f=s.z.object({email:s.z.string().email("Please enter a valid email address"),display_name:s.z.string().min(2,"Display name must be at least 2 characters"),title:s.z.string().optional(),role:s.z.string(),is_primary:s.z.boolean(),is_signatory:s.z.boolean(),can_sign:s.z.boolean()}),y={investor:"Investor",arranger:"Arranger",lawyer:"Law Firm",introducer:"Introducer",partner:"Partner",commercial_partner:"Commercial Partner"},b={investor:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],arranger:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],lawyer:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],partner:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],introducer:[{value:"admin",label:"Admin"},{value:"contact",label:"Contact"},{value:"payment_contact",label:"Payment Contact"},{value:"legal_contact",label:"Legal Contact"}],commercial_partner:[{value:"admin",label:"Admin"},{value:"contact",label:"Contact"},{value:"billing_contact",label:"Billing Contact"},{value:"technical_contact",label:"Technical Contact"}]},v={investor:"member",arranger:"member",lawyer:"member",partner:"member",introducer:"contact",commercial_partner:"contact"};function j({entityType:e,entityId:s,entityName:j,open:w,onOpenChange:_,onSuccess:C}){let[N,D]=(0,r.useState)(!1),M=b[e],T=v[e],{register:S,handleSubmit:k,reset:E,watch:R,setValue:I,formState:{errors:L}}=(0,a.useForm)({resolver:(0,n.zodResolver)(f),defaultValues:{email:"",display_name:"",title:"",role:T,is_primary:!1,is_signatory:!1,can_sign:!1}}),A=R("is_primary");R("is_signatory");let P=R("can_sign"),F=R("role"),z=async t=>{D(!0);try{let r=await fetch("/api/admin/entity-invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_type:e,entity_id:s,...t})}),a=await r.json();if(!r.ok)throw Error(a.error||"Failed to invite user");g.toast.success(a.message||`User invited to ${j}`),E(),_(!1),C?.()}catch(e){console.error("Invite error:",e),g.toast.error(e instanceof Error?e.message:"Failed to invite user")}finally{D(!1)}},H=()=>{E(),_(!1)};return(0,t.jsx)(i.Dialog,{open:w,onOpenChange:H,children:(0,t.jsxs)(i.DialogContent,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(i.DialogHeader,{children:[(0,t.jsxs)(i.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Mail,{className:"h-5 w-5"}),"Invite User to ",y[e]]}),(0,t.jsxs)(i.DialogDescription,{children:["Send an invitation email to join ",(0,t.jsx)("span",{className:"font-medium",children:j}),". They will receive instructions to set up their account."]})]}),(0,t.jsxs)("form",{onSubmit:k(z),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"email",children:"Email Address *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.Mail,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(o.Input,{id:"email",type:"email",placeholder:"user@example.com",className:"pl-10",...S("email")})]}),L.email&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:L.email.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"display_name",children:"Display Name *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.User,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(o.Input,{id:"display_name",placeholder:"John Smith",className:"pl-10",...S("display_name")})]}),L.display_name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:L.display_name.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"title",children:"Title (Optional)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Briefcase,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(o.Input,{id:"title",placeholder:"Managing Director",className:"pl-10",...S("title")})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"role",children:"Role"}),(0,t.jsxs)(d.Select,{value:F,onValueChange:e=>I("role",e),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select role"})}),(0,t.jsx)(d.SelectContent,{children:M.map(e=>(0,t.jsx)(d.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.Label,{htmlFor:"is_primary",className:"text-sm font-medium",children:"Primary Contact"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set as the main point of contact for this entity"})]}),(0,t.jsx)(u.Switch,{id:"is_primary",checked:A,onCheckedChange:e=>I("is_primary",e)})]}),"lawyer"===e&&(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(c.Label,{htmlFor:"can_sign",className:"text-sm font-medium",children:"Can Sign Documents"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Has authority to sign on behalf of the law firm"})]}),(0,t.jsx)(u.Switch,{id:"can_sign",checked:P,onCheckedChange:e=>I("can_sign",e)})]}),(0,t.jsxs)(i.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:H,children:"Cancel"}),(0,t.jsx)(l.Button,{type:"submit",disabled:N,children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Invite..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Mail,{className:"mr-2 h-4 w-4"}),"Send Invitation"]})})]})]})]})})}e.s(["InviteUserDialog",()=>j])},56213,e=>{"use strict";var t=e.i(722679),r=e.i(282141);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",e),...a})}e.s(["Skeleton",()=>a])},102728,105938,e=>{"use strict";var t=e.i(295656);function r(e,r,a){let[n,s]=(0,t.normalizeDates)(a?.in,e,r);return 12*(n.getFullYear()-s.getFullYear())+(n.getMonth()-s.getMonth())}e.s(["differenceInCalendarMonths",()=>r],102728);var a=e.i(925362);function n(e,t){let r=(0,a.toDate)(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}e.s(["endOfMonth",()=>n],105938)},771750,e=>{"use strict";var t=e.i(567397),r=e.i(643345),a=e.i(172594),n=e.i(651259),s=e.i(295656),i=e.i(925362);function l(e,t){let r=(0,i.toDate)(e)-(0,i.toDate)(t);return r<0?-1:r>0?1:r}var o=e.i(144145),c=e.i(102728),d=e.i(105938);function u(e,u){return function(e,t,u){var m;let p,x=(0,a.getDefaultOptions)(),h=u?.locale??x.locale??r.defaultLocale,g=l(e,t);if(isNaN(g))throw RangeError("Invalid time value");let f=Object.assign({},u,{addSuffix:u?.addSuffix,comparison:g}),[y,b]=(0,s.normalizeDates)(u?.in,...g>0?[t,e]:[e,t]),v=(m=void 0,e=>{let t=(m?Math[m]:Math.trunc)(e);return 0===t?0:t})(((0,i.toDate)(b)-(0,i.toDate)(y))/1e3),j=Math.round((v-((0,n.getTimezoneOffsetInMilliseconds)(b)-(0,n.getTimezoneOffsetInMilliseconds)(y))/1e3)/60);if(j<2)if(u?.includeSeconds)if(v<5)return h.formatDistance("lessThanXSeconds",5,f);else if(v<10)return h.formatDistance("lessThanXSeconds",10,f);else if(v<20)return h.formatDistance("lessThanXSeconds",20,f);else if(v<40)return h.formatDistance("halfAMinute",0,f);else if(v<60)return h.formatDistance("lessThanXMinutes",1,f);else return h.formatDistance("xMinutes",1,f);else if(0===j)return h.formatDistance("lessThanXMinutes",1,f);else return h.formatDistance("xMinutes",j,f);if(j<45)return h.formatDistance("xMinutes",j,f);if(j<90)return h.formatDistance("aboutXHours",1,f);if(j<o.minutesInDay){let e=Math.round(j/60);return h.formatDistance("aboutXHours",e,f)}if(j<2520)return h.formatDistance("xDays",1,f);else if(j<o.minutesInMonth){let e=Math.round(j/o.minutesInDay);return h.formatDistance("xDays",e,f)}else if(j<2*o.minutesInMonth)return p=Math.round(j/o.minutesInMonth),h.formatDistance("aboutXMonths",p,f);if((p=function(e,t,r){var a;let n,o,[u,m,p]=(0,s.normalizeDates)(void 0,e,e,t),x=l(m,p),h=Math.abs((0,c.differenceInCalendarMonths)(m,p));if(h<1)return 0;1===m.getMonth()&&m.getDate()>27&&m.setDate(30),m.setMonth(m.getMonth()-x*h);let g=l(m,p)===-x;+(n=(0,i.toDate)(u,void 0),a=void 0,(o=(0,i.toDate)(n,a?.in)).setHours(23,59,59,999),o)==+(0,d.endOfMonth)(n,void 0)&&1===h&&1===l(u,p)&&(g=!1);let f=x*(h-g);return 0===f?0:f}(b,y))<12){let e=Math.round(j/o.minutesInMonth);return h.formatDistance("xMonths",e,f)}{let e=p%12,t=Math.trunc(p/12);return e<3?h.formatDistance("aboutXYears",t,f):e<9?h.formatDistance("overXYears",t,f):h.formatDistance("almostXYears",t+1,f)}}(e,(0,t.constructFrom)(e,Date.now()),u)}e.s(["formatDistanceToNow",()=>u],771750)},396132,e=>{"use strict";let t=(0,e.i(410587).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],396132)},703281,e=>{"use strict";let t=(0,e.i(410587).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],703281)},933626,e=>{"use strict";var t=e.i(295656),r=e.i(11574);function a(e,a,s){let[i,l]=(0,t.normalizeDates)(s?.in,e,a),o=n(i,l),c=Math.abs((0,r.differenceInCalendarDays)(i,l));i.setDate(i.getDate()-o*c);let d=Number(n(i,l)===-o),u=o*(c-d);return 0===u?0:u}function n(e,t){let r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}e.s(["differenceInDays",()=>a])},775079,e=>{"use strict";let t=(0,e.i(410587).default)("file-warning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["FileWarning",()=>t],775079)},840298,e=>{"use strict";let t=["passport","national_id","drivers_license","signatory_id","id_card","residence_permit","visa","government_id","member_id","director_id","ubo_id"],r=["proof_of_address","signatory_proof_of_address","utility_bill","bank_statement","tax_bill","council_tax","rental_agreement","mortgage_statement","member_proof_of_address"];function a(e){return t.includes(e)||e.includes("_id")||e.includes("passport")||e.includes("license")}function n(e){return r.includes(e)||e.includes("proof_of_address")||e.includes("utility")||e.includes("statement")}function s(e){return({valid:"Valid",expired:"Expired",expiring_soon:"Expiring Soon",stale:"Stale",pending:"Pending Review",rejected:"Rejected"})[e]||"Unknown"}function i(e){return({valid:"bg-green-500/20 text-green-400",expired:"bg-red-500/20 text-red-400",expiring_soon:"bg-amber-500/20 text-amber-400",stale:"bg-orange-500/20 text-orange-400",pending:"bg-blue-500/20 text-blue-400",rejected:"bg-red-500/20 text-red-400"})[e]||"bg-gray-500/20 text-gray-400"}function l(e){return e<0?`Expired ${Math.abs(e)} days ago`:0===e?"Expires today":1===e?"Expires tomorrow":e<=7?`Expires in ${e} days`:e<=30?`Expires in ${Math.ceil(e/7)} weeks`:`Expires in ${Math.ceil(e/30)} months`}e.s(["formatExpiryCountdown",()=>l,"getValidationStatusColor",()=>i,"getValidationStatusLabel",()=>s,"isIdDocument",()=>a,"isProofOfAddress",()=>n])},669019,e=>{"use strict";let t;var r=e.i(722679),a=e.i(340915),n=e.i(679472),s=e.i(886978),i=e.i(47264),l=e.i(938015),o=e.i(798827),c=e.i(45547),d=(e.i(222578),e.i(873358)),u=e.i(362208),m=Symbol("radix.slottable"),p=e.i(68977),x=e.i(440171),[h,g]=(0,i.createContextScope)("Tooltip",[c.createPopperScope]),f=(0,c.createPopperScope)(),y="TooltipProvider",b="tooltip.open",[v,j]=h(y),w=e=>{let{__scopeTooltip:t,delayDuration:n=700,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:l}=e,o=a.useRef(!0),c=a.useRef(!1),d=a.useRef(0);return a.useEffect(()=>{let e=d.current;return()=>window.clearTimeout(e)},[]),(0,r.jsx)(v,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:a.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:a.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:c,onPointerInTransitChange:a.useCallback(e=>{c.current=e},[]),disableHoverableContent:i,children:l})};w.displayName=y;var _="Tooltip",[C,N]=h(_),D=e=>{let{__scopeTooltip:t,children:n,open:s,defaultOpen:i,onOpenChange:l,disableHoverableContent:d,delayDuration:u}=e,m=j(_,e.__scopeTooltip),x=f(t),[h,g]=a.useState(null),y=(0,o.useId)(),v=a.useRef(0),w=d??m.disableHoverableContent,N=u??m.delayDuration,D=a.useRef(!1),[M,T]=(0,p.useControllableState)({prop:s,defaultProp:i??!1,onChange:e=>{e?(m.onOpen(),document.dispatchEvent(new CustomEvent(b))):m.onClose(),l?.(e)},caller:_}),S=a.useMemo(()=>M?D.current?"delayed-open":"instant-open":"closed",[M]),k=a.useCallback(()=>{window.clearTimeout(v.current),v.current=0,D.current=!1,T(!0)},[T]),E=a.useCallback(()=>{window.clearTimeout(v.current),v.current=0,T(!1)},[T]),R=a.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{D.current=!0,T(!0),v.current=0},N)},[N,T]);return a.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),(0,r.jsx)(c.Root,{...x,children:(0,r.jsx)(C,{scope:t,contentId:y,open:M,stateAttribute:S,trigger:h,onTriggerChange:g,onTriggerEnter:a.useCallback(()=>{m.isOpenDelayedRef.current?R():k()},[m.isOpenDelayedRef,R,k]),onTriggerLeave:a.useCallback(()=>{w?E():(window.clearTimeout(v.current),v.current=0)},[E,w]),onOpen:k,onClose:E,disableHoverableContent:w,children:n})})};D.displayName=_;var M="TooltipTrigger",T=a.forwardRef((e,t)=>{let{__scopeTooltip:i,...l}=e,o=N(M,i),d=j(M,i),m=f(i),p=a.useRef(null),x=(0,s.useComposedRefs)(t,p,o.onTriggerChange),h=a.useRef(!1),g=a.useRef(!1),y=a.useCallback(()=>h.current=!1,[]);return a.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),(0,r.jsx)(c.Anchor,{asChild:!0,...m,children:(0,r.jsx)(u.Primitive.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...l,ref:x,onPointerMove:(0,n.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(g.current||d.isPointerInTransitRef.current||(o.onTriggerEnter(),g.current=!0))}),onPointerLeave:(0,n.composeEventHandlers)(e.onPointerLeave,()=>{o.onTriggerLeave(),g.current=!1}),onPointerDown:(0,n.composeEventHandlers)(e.onPointerDown,()=>{o.open&&o.onClose(),h.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:(0,n.composeEventHandlers)(e.onFocus,()=>{h.current||o.onOpen()}),onBlur:(0,n.composeEventHandlers)(e.onBlur,o.onClose),onClick:(0,n.composeEventHandlers)(e.onClick,o.onClose)})})});T.displayName=M;var[S,k]=h("TooltipPortal",{forceMount:void 0}),E="TooltipContent",R=a.forwardRef((e,t)=>{let a=k(E,e.__scopeTooltip),{forceMount:n=a.forceMount,side:s="top",...i}=e,l=N(E,e.__scopeTooltip);return(0,r.jsx)(d.Presence,{present:n||l.open,children:l.disableHoverableContent?(0,r.jsx)(F,{side:s,...i,ref:t}):(0,r.jsx)(I,{side:s,...i,ref:t})})}),I=a.forwardRef((e,t)=>{let n=N(E,e.__scopeTooltip),i=j(E,e.__scopeTooltip),l=a.useRef(null),o=(0,s.useComposedRefs)(t,l),[c,d]=a.useState(null),{trigger:u,onClose:m}=n,p=l.current,{onPointerInTransitChange:x}=i,h=a.useCallback(()=>{d(null),x(!1)},[x]),g=a.useCallback((e,t)=>{let r,a=e.currentTarget,n={x:e.clientX,y:e.clientY},s=function(e,t){let r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,a,n,s)){case s:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw Error("unreachable")}}(n,a.getBoundingClientRect());d(((r=[...function(e,t,r=5){let a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return a}(n,s),...function(e){let{top:t,right:r,bottom:a,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:a},{x:n,y:a}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let a=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(a.y-r.y)>=(e.y-r.y)*(a.x-r.x))t.pop();else break}t.push(a)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let a=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(a.y-t.y)>=(e.y-t.y)*(a.x-t.x))r.pop();else break}r.push(a)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),x(!0)},[x]);return a.useEffect(()=>()=>h(),[h]),a.useEffect(()=>{if(u&&p){let e=e=>g(e,p),t=e=>g(e,u);return u.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[u,p,g,h]),a.useEffect(()=>{if(c){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},a=u?.contains(t)||p?.contains(t),n=!function(e,t){let{x:r,y:a}=e,n=!1;for(let e=0,s=t.length-1;e<t.length;s=e++){let i=t[e],l=t[s],o=i.x,c=i.y,d=l.x,u=l.y;c>a!=u>a&&r<(d-o)*(a-c)/(u-c)+o&&(n=!n)}return n}(r,c);a?h():n&&(h(),m())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,p,c,m,h]),(0,r.jsx)(F,{...e,ref:o})}),[L,A]=h(_,{isInside:!1}),P=((t=({children:e})=>(0,r.jsx)(r.Fragment,{children:e})).displayName="TooltipContent.Slottable",t.__radixId=m,t),F=a.forwardRef((e,t)=>{let{__scopeTooltip:n,children:s,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:d,...u}=e,m=N(E,n),p=f(n),{onClose:h}=m;return a.useEffect(()=>(document.addEventListener(b,h),()=>document.removeEventListener(b,h)),[h]),a.useEffect(()=>{if(m.trigger){let e=e=>{let t=e.target;t?.contains(m.trigger)&&h()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[m.trigger,h]),(0,r.jsx)(l.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:e=>e.preventDefault(),onDismiss:h,children:(0,r.jsxs)(c.Content,{"data-state":m.stateAttribute,...p,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,r.jsx)(P,{children:s}),(0,r.jsx)(L,{scope:n,isInside:!0,children:(0,r.jsx)(x.Root,{id:m.contentId,role:"tooltip",children:i||s})})]})})});R.displayName=E;var z="TooltipArrow";a.forwardRef((e,t)=>{let{__scopeTooltip:a,...n}=e,s=f(a);return A(z,a).isInside?null:(0,r.jsx)(c.Arrow,{...s,...n,ref:t})}).displayName=z;var H=e.i(282141);let O=a.forwardRef(({className:e,sideOffset:t=4,...a},n)=>(0,r.jsx)(R,{ref:n,sideOffset:t,className:(0,H.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));O.displayName=R.displayName,e.s(["Tooltip",()=>D,"TooltipContent",()=>O,"TooltipProvider",()=>w,"TooltipTrigger",()=>T],669019)},358634,e=>{"use strict";let t=(0,e.i(410587).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],358634)}]);