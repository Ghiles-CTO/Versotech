(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,888389,e=>{"use strict";var t=e.i(722679),a=e.i(340915),s=e.i(603274),i=e.i(263229),l=e.i(831833),n=e.i(335994),r=e.i(971743),o=e.i(704477),c=e.i(994500),d=e.i(352776),m=e.i(316264),h=e.i(191569),x=e.i(514133),u=e.i(538892),g=e.i(45778);function p(){(0,s.useRouter)();let[e,p]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[y,w]=(0,a.useState)([]),[b,N]=(0,a.useState)(!1),[f,C]=(0,a.useState)({email:"",display_name:"",title:""}),[_,S]=(0,a.useState)({type:"individual",email:"",phone:"",country:"",tax_residency:"",primary_rm:"",first_name:"",middle_name:"",last_name:"",legal_name:"",display_name:"",country_of_incorporation:"",representative_name:"",representative_title:""});(0,a.useEffect)(()=>{e&&I()},[e]);let I=async()=>{try{let e=await fetch("/api/staff/available");if(e.ok){let t=await e.json();w(t.staff||[])}}catch(e){console.error("Failed to fetch staff members:",e)}},k=async e=>{if(e.preventDefault(),"individual"===_.type){if(!_.first_name.trim())return void c.toast.error("First name is required for individuals")}else if(!_.legal_name.trim())return void c.toast.error("Legal name is required");let t=f.email.trim().toLowerCase(),a=f.display_name.trim(),s=f.title.trim();if(b){if(!t||!t.includes("@"))return void c.toast.error("Valid invite email is required");if(a.length<2)return void c.toast.error("Invite display name is required")}j(!0);try{let e,i={..._};e=_.type,"individual"===e&&(i.legal_name=[_.first_name.trim(),_.middle_name.trim(),_.last_name.trim()].filter(Boolean).join(" "),i.display_name.trim()||(i.display_name=i.legal_name)),console.log("[AddInvestor] Submitting:",i);let l=await fetch("/api/staff/investors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});console.log("[AddInvestor] Response status:",l.status);let n=await l.json();if(console.log("[AddInvestor] Response data:",n),!l.ok)throw Error(n.error||"Failed to create investor");let r=n?.investor?.id||n?.id;if(b&&r){let e=await fetch("/api/admin/entity-invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_type:"investor",entity_id:r,email:t,display_name:a,title:s||null,is_primary:!0})});if(e.ok){let t=await e.json().catch(()=>({}));!1===t.email_sent?c.toast.warning("Investor created, but invitation email failed to send"):c.toast.success(t.message||"Investor created and invitation sent")}else{let a=await e.json().catch(()=>({}));if(401===e.status||403===e.status){let e=await fetch(`/api/staff/investors/${r}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(e.ok)c.toast.success("Investor created and invitation sent");else{let t=await e.json().catch(()=>({}));c.toast.warning(t.error||a.error||"Investor created, but invitation failed to send")}}else c.toast.warning(a.error||"Investor created, but invitation failed to send")}}else c.toast.success("Investor created successfully");S({type:"individual",email:"",phone:"",country:"",tax_residency:"",primary_rm:"",first_name:"",middle_name:"",last_name:"",legal_name:"",display_name:"",country_of_incorporation:"",representative_name:"",representative_title:""}),N(!1),C({email:"",display_name:"",title:""}),p(!1),window.location.href="/versotech_main/investors"}catch(e){console.error("[AddInvestor] Error:",e),c.toast.error(e.message||"Failed to create investor")}finally{j(!1)}};return(0,t.jsxs)(d.Dialog,{open:e,onOpenChange:p,children:[(0,t.jsx)(d.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(m.Button,{children:[(0,t.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Add Investor"]})}),(0,t.jsxs)(d.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(d.DialogHeader,{children:[(0,t.jsx)(d.DialogTitle,{className:"text-white",children:"Add New Investor"}),(0,t.jsx)(d.DialogDescription,{className:"text-gray-300",children:"Create a new investor profile. Onboarding tasks will be created automatically."})]}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x.Label,{htmlFor:"type",className:"text-white",children:["Investor Type ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)(u.Select,{value:_.type,onValueChange:e=>S({..._,type:e}),children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{})}),(0,t.jsxs)(u.SelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"individual",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.User,{className:"h-4 w-4"}),"Individual"]})}),(0,t.jsx)(u.SelectItem,{value:"entity",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Building2,{className:"h-4 w-4"}),"Entity"]})}),(0,t.jsx)(u.SelectItem,{value:"institutional",children:"Institutional"}),(0,t.jsx)(u.SelectItem,{value:"family_office",children:"Family Office"}),(0,t.jsx)(u.SelectItem,{value:"fund",children:"Fund"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"individual"===_.type?"A natural person investing in their own name":"A company, fund, or institutional entity"})]}),"individual"===_.type&&(0,t.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-zinc-800 bg-zinc-900/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-300",children:[(0,t.jsx)(o.User,{className:"h-4 w-4"}),"Personal Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x.Label,{htmlFor:"first_name",className:"text-white",children:["First Name ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)(h.Input,{id:"first_name",value:_.first_name,onChange:e=>S({..._,first_name:e.target.value}),placeholder:"John",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"middle_name",className:"text-white",children:"Middle Name"}),(0,t.jsx)(h.Input,{id:"middle_name",value:_.middle_name,onChange:e=>S({..._,middle_name:e.target.value}),placeholder:"Michael",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"last_name",className:"text-white",children:"Last Name"}),(0,t.jsx)(h.Input,{id:"last_name",value:_.last_name,onChange:e=>S({..._,last_name:e.target.value}),placeholder:"Smith",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(_.first_name||_.last_name)&&(0,t.jsxs)("div",{className:"text-xs text-gray-400 bg-zinc-800/50 px-3 py-2 rounded",children:["Legal name will be: ",(0,t.jsx)("span",{className:"text-white font-medium",children:[_.first_name,_.middle_name,_.last_name].filter(Boolean).join(" ")})]})]}),["entity","institutional","family_office","fund"].includes(_.type)&&(0,t.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-zinc-800 bg-zinc-900/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-300",children:[(0,t.jsx)(r.Building2,{className:"h-4 w-4"}),"Entity Information"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x.Label,{htmlFor:"legal_name",className:"text-white",children:["Legal Name ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)(h.Input,{id:"legal_name",value:_.legal_name,onChange:e=>S({..._,legal_name:e.target.value}),placeholder:"Acme Investment Holdings LP",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"display_name",className:"text-white",children:"Display Name"}),(0,t.jsx)(h.Input,{id:"display_name",value:_.display_name,onChange:e=>S({..._,display_name:e.target.value}),placeholder:"Acme Holdings (optional short name)",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"country_of_incorporation",className:"text-white",children:"Country of Incorporation"}),(0,t.jsx)(h.Input,{id:"country_of_incorporation",value:_.country_of_incorporation,onChange:e=>S({..._,country_of_incorporation:e.target.value}),placeholder:"Cayman Islands",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"representative_name",className:"text-white",children:"Representative Name"}),(0,t.jsx)(h.Input,{id:"representative_name",value:_.representative_name,onChange:e=>S({..._,representative_name:e.target.value}),placeholder:"Jane Doe",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"representative_title",className:"text-white",children:"Representative Title"}),(0,t.jsx)(h.Input,{id:"representative_title",value:_.representative_title,onChange:e=>S({..._,representative_title:e.target.value}),placeholder:"Managing Director",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-300",children:"Contact Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"email",className:"text-white",children:"Email"}),(0,t.jsx)(h.Input,{id:"email",type:"email",value:_.email,onChange:e=>S({..._,email:e.target.value}),placeholder:"investor@email.com",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"phone",className:"text-white",children:"Phone"}),(0,t.jsx)(h.Input,{id:"phone",type:"tel",value:_.phone,onChange:e=>S({..._,phone:e.target.value}),placeholder:"+1 (555) 123-4567",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"country",className:"text-white",children:"individual"===_.type?"Country of Residence":"Country"}),(0,t.jsx)(h.Input,{id:"country",value:_.country,onChange:e=>S({..._,country:e.target.value}),placeholder:"United States",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"tax_residency",className:"text-white",children:"Tax Residency"}),(0,t.jsx)(h.Input,{id:"tax_residency",value:_.tax_residency,onChange:e=>S({..._,tax_residency:e.target.value}),placeholder:"United States",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"primary_rm",className:"text-white",children:"Relationship Manager"}),(0,t.jsxs)(u.Select,{value:_.primary_rm||void 0,onValueChange:e=>S({..._,primary_rm:e||""}),children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Select a relationship manager (optional)"})}),(0,t.jsx)(u.SelectContent,{children:y.length>0?y.map(e=>(0,t.jsxs)(u.SelectItem,{value:e.id,children:[e.display_name," (",e.role,")"]},e.id)):(0,t.jsx)(u.SelectItem,{value:"loading",disabled:!0,children:"Loading staff..."})})]}),_.primary_rm&&(0,t.jsx)(m.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>S({..._,primary_rm:""}),className:"text-xs",children:"Clear selection"})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t border-zinc-800 pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.UserPlus,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)(x.Label,{className:"text-sm text-white",children:"Invite Portal User"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Send an invitation to join this investor's portal"})]}),(0,t.jsx)(g.Switch,{checked:b,onCheckedChange:N})]}),b&&(0,t.jsxs)("div",{className:"space-y-3 pl-4 border-l border-zinc-800",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x.Label,{htmlFor:"invite_email",className:"text-white",children:["Email Address ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)(h.Input,{id:"invite_email",type:"email",value:f.email,onChange:e=>C({...f,email:e.target.value}),placeholder:"user@email.com",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x.Label,{htmlFor:"invite_display_name",className:"text-white",children:["Display Name ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)(h.Input,{id:"invite_display_name",value:f.display_name,onChange:e=>C({...f,display_name:e.target.value}),placeholder:"John Smith",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{htmlFor:"invite_title",className:"text-white",children:"Title (Optional)"}),(0,t.jsx)(h.Input,{id:"invite_title",value:f.title,onChange:e=>C({...f,title:e.target.value}),placeholder:"Managing Director",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]})]}),(0,t.jsxs)(d.DialogFooter,{children:[(0,t.jsx)(m.Button,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:v,children:"Cancel"}),(0,t.jsxs)(m.Button,{type:"submit",disabled:v,children:[v&&(0,t.jsx)(i.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),b?"Create Investor & Send Invite":"Create Investor"]})]})]})]})]})}e.s(["AddInvestorModal",()=>p])},115273,e=>{"use strict";var t=e.i(722679),a=e.i(340915),s=e.i(603274),i=e.i(510166),l=e.i(316264),n=e.i(382021),r=e.i(432598),o=e.i(263229),c=e.i(129432);function d(){let e=(0,s.useRouter)(),d=(0,s.useSearchParams)(),[m,h]=(0,a.useState)(!1),x=d.get("status"),u=d.get("type"),g=x||u,p=(t,a)=>{h(!0);let s=new URLSearchParams(d.toString());s.get(t)===a?s.delete(t):s.set(t,a),s.set("page","1"),e.push(`/versotech_main/investors?${s.toString()}`),setTimeout(()=>h(!1),500)};return(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(i.DropdownMenu,{children:[(0,t.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",disabled:m,children:[m?(0,t.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,t.jsx)(n.Filter,{className:"h-4 w-4 mr-2"}),"Filter",g&&!m&&(0,t.jsx)(c.Badge,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center",children:+!!x+ +!!u})]})}),(0,t.jsxs)(i.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,t.jsx)(i.DropdownMenuLabel,{children:"KYC Status"}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("status","pending"),children:["pending"===x&&"✓ ","Pending"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("status","review"),children:["review"===x&&"✓ ","In Review"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("status","approved"),children:["approved"===x&&"✓ ","Approved"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("status","completed"),children:["completed"===x&&"✓ ","Completed"]}),(0,t.jsx)(i.DropdownMenuSeparator,{}),(0,t.jsx)(i.DropdownMenuLabel,{children:"Investor Type"}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("type","individual"),children:["individual"===u&&"✓ ","Individual"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("type","entity"),children:["entity"===u&&"✓ ","Entity"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("type","institutional"),children:["institutional"===u&&"✓ ","Institutional"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("type","family_office"),children:["family_office"===u&&"✓ ","Family Office"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>p("type","fund"),children:["fund"===u&&"✓ ","Fund"]}),g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.DropdownMenuSeparator,{}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>{h(!0);let t=new URLSearchParams(d.toString());t.delete("status"),t.delete("type"),t.set("page","1"),e.push(`/versotech_main/investors?${t.toString()}`),setTimeout(()=>h(!1),500)},className:"text-red-500",children:[(0,t.jsx)(r.X,{className:"h-4 w-4 mr-2"}),"Clear All Filters"]})]})]})]})})}e.s(["InvestorFilters",()=>d])},934535,e=>{"use strict";var t=e.i(722679),a=e.i(316264),s=e.i(761722),i=e.i(994500);function l({investors:e}){return(0,t.jsxs)(a.Button,{variant:"outline",size:"sm",onClick:()=>{try{let t=e.map(e=>[e.id,e.name,e.type,e.email,e.kycStatus,e.onboardingStatus,!1===e.metricsAvailable?"Pending":e.totalCommitment,!1===e.metricsAvailable?"Pending":e.totalContributed,!1===e.metricsAvailable?"Pending":e.vehicleCount,e.relationshipManager,e.country,new Date(e.lastActivity).toLocaleDateString()]),a=["ID,Name,Type,Email,KYC Status,Onboarding Status,Total Commitment,Total Contributed,Vehicles,Relationship Manager,Country,Last Activity",...t.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),n=URL.createObjectURL(s);l.setAttribute("href",n),l.setAttribute("download",`investors_export_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),i.toast.success(`Exported ${e.length} investors to CSV`)}catch(e){console.error("Export error:",e),i.toast.error("Failed to export investors")}},children:[(0,t.jsx)(s.Download,{className:"h-4 w-4 mr-2"}),"Export"]})}e.s(["ExportInvestorsButton",()=>l])},662442,e=>{"use strict";var t=e.i(722679),a=e.i(603274),s=e.i(340915),i=e.i(191569),l=e.i(750809),n=e.i(432598),r=e.i(316264);function o(){let e=(0,a.useRouter)(),o=(0,a.usePathname)(),c=(0,a.useSearchParams)(),d=c.get("q")||"",[m,h]=(0,s.useState)(d),[x,u]=(0,s.useState)(!1),g=(0,s.useRef)(!0),p=(0,s.useCallback)(t=>{let a=new URLSearchParams(c.toString());t.trim()?a.set("q",t.trim()):a.delete("q"),a.set("page","1"),e.push(`${o}?${a.toString()}`)},[e,o,c]);return(0,s.useEffect)(()=>{if(g.current){g.current=!1;return}if(m===d)return;u(!0);let e=setTimeout(()=>{p(m),u(!1)},300);return()=>{clearTimeout(e),u(!1)}},[m]),(0,s.useEffect)(()=>{d===m||x||h(d)},[d]),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{value:m,onChange:e=>h(e.target.value),placeholder:"Search investors by name, email, or ID...",className:"pl-10 pr-10"}),m&&(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{h("")},className:"absolute right-1 top-1 h-7 w-7 p-0",children:(0,t.jsx)(n.X,{className:"h-4 w-4"})}),x&&(0,t.jsx)("div",{className:"absolute right-10 top-3",children:(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})})]})}e.s(["InvestorSearch",()=>o])},830511,e=>{"use strict";var t=e.i(722679),a=e.i(340915),s=e.i(615595),i=e.i(729416),l=e.i(237635),n=e.i(316264),r=e.i(758171),o=e.i(197098);function c({columns:e,data:c}){let[d,m]=a.useState([]),[h,x]=a.useState([]),[u,g]=a.useState({}),[p,v]=a.useState({}),j=(0,s.useReactTable)({data:c,columns:e,onSortingChange:m,onColumnFiltersChange:x,getCoreRowModel:(0,i.getCoreRowModel)(),getPaginationRowModel:(0,i.getPaginationRowModel)(),getSortedRowModel:(0,i.getSortedRowModel)(),getFilteredRowModel:(0,i.getFilteredRowModel)(),onColumnVisibilityChange:g,onRowSelectionChange:v,state:{sorting:d,columnFilters:h,columnVisibility:u,rowSelection:p},initialState:{pagination:{pageSize:50}}}),y=j.getFilteredSelectedRowModel().rows.length,w=j.getFilteredRowModel().rows.length;return(0,t.jsxs)("div",{className:"space-y-4",children:[y>0&&(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[y," of ",w," row(s) selected"]}),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>j.toggleAllPageRowsSelected(!1),className:"ml-auto",children:"Clear Selection"})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(l.Table,{children:[(0,t.jsx)(l.TableHeader,{children:j.getHeaderGroups().map(e=>(0,t.jsx)(l.TableRow,{children:e.headers.map(e=>(0,t.jsx)(l.TableHead,{children:e.isPlaceholder?null:(0,s.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(l.TableBody,{children:j.getRowModel().rows?.length?j.getRowModel().rows.map(e=>(0,t.jsx)(l.TableRow,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map(e=>(0,t.jsx)(l.TableCell,{children:(0,s.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(l.TableRow,{children:(0,t.jsx)(l.TableCell,{colSpan:e.length,className:"h-24 text-center",children:"No investors found."})})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",j.getState().pagination.pageIndex+1," of"," ",j.getPageCount()," (",w," total investors)"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>j.previousPage(),disabled:!j.getCanPreviousPage(),children:[(0,t.jsx)(r.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>j.nextPage(),disabled:!j.getCanNextPage(),children:["Next",(0,t.jsx)(o.ChevronRight,{className:"h-4 w-4 ml-1"})]})]})]})]})}e.s(["InvestorsDataTable",()=>c])},308666,e=>{"use strict";var t=e.i(722679),a=e.i(129432),s=e.i(312692),i=e.i(316264),l=e.i(185419),n=e.i(496383),r=e.i(849110),o=e.i(335994),c=e.i(501259),d=e.i(74434),m=e.i(820417),h=e.i(510166);let x=e=>{window.dispatchEvent(new CustomEvent("investor-invite",{detail:e}))},u=[{id:"select",header:({table:e})=>(0,t.jsx)(s.Checkbox,{checked:e.getIsAllPageRowsSelected(),onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:e})=>(0,t.jsx)(s.Checkbox,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:e})=>(0,t.jsxs)(i.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Investor",(0,t.jsx)(l.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let a=e.original,s=(a.name||"U").split(" ").map(e=>e[0]).filter(Boolean).join("").substring(0,2).toUpperCase()||"U";return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(d.Avatar,{className:"h-8 w-8",children:(0,t.jsx)(d.AvatarFallback,{className:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300",children:s})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-semibold",children:a.name||"Unnamed Investor"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:a.email})]})]})}},{accessorKey:"type",header:"Type",cell:({row:e})=>(0,t.jsx)(a.Badge,{variant:"outline",className:"capitalize",children:e.getValue("type")}),filterFn:(e,t,a)=>a.includes(e.getValue(t))},{accessorKey:"kycStatus",header:({column:e})=>(0,t.jsxs)(i.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["KYC",(0,t.jsx)(l.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let s=e.getValue("kycStatus");return(0,t.jsx)(a.Badge,{className:{completed:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",review:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",approved:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}[s]||"bg-gray-100 text-gray-800",children:s})},filterFn:(e,t,a)=>a.includes(e.getValue(t))},{accessorKey:"totalCommitment",header:({column:e})=>(0,t.jsxs)(i.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Commitment",(0,t.jsx)(l.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let{metricsAvailable:a,totalCommitment:s,totalContributed:i}=e.original;if(!a)return(0,t.jsx)("div",{className:"text-right text-xs text-muted-foreground",children:"Pending"});let l=s>0?Math.round(i/s*100):0;return(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-semibold",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(s)}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[l,"% funded"]})]})},sortingFn:"basic"},{accessorKey:"vehicleCount",header:({column:e})=>(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)(i.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-4",children:["Vehicles",(0,t.jsx)(l.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:e})=>(0,t.jsx)("div",{className:"text-center font-medium",children:e.original.metricsAvailable?e.getValue("vehicleCount"):"—"})},{accessorKey:"relationshipManager",header:"RM",cell:({row:e})=>(0,t.jsx)("div",{className:"text-sm",children:e.getValue("relationshipManager")})},{accessorKey:"riskRating",header:"Risk",cell:({row:e})=>{let s=e.getValue("riskRating");return(0,t.jsx)(a.Badge,{className:{low:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",high:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}[s]||"bg-gray-100 text-gray-800",variant:"outline",children:s})},filterFn:(e,t,a)=>a.includes(e.getValue(t))},{accessorKey:"country",header:"Country",cell:({row:e})=>(0,t.jsx)("div",{className:"text-sm",children:e.getValue("country")})},{id:"users",header:"Users",cell:({row:e})=>{let a=e.original;return(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(c.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:a.users?.length||0})]})}},{id:"actions",header:()=>(0,t.jsx)("div",{className:"text-right",children:"Actions"}),cell:({row:e})=>{let a=e.original;return(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)(h.DropdownMenu,{children:[(0,t.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(r.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(h.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(h.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(h.DropdownMenuSeparator,{}),(0,t.jsxs)(h.DropdownMenuItem,{onClick:()=>x(a),children:[(0,t.jsx)(o.UserPlus,{className:"mr-2 h-4 w-4"}),"Invite User"]}),(0,t.jsx)(h.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(m.default,{href:`/versotech_main/investors/${a.id}`,children:[(0,t.jsx)(n.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]})})]})]})})}}];e.s(["dispatchInvestorInvite",0,x,"investorColumns",0,u])}]);