(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,619324,e=>{"use strict";let t=(0,e.i(410587).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],619324)},90613,e=>{"use strict";var t=e.i(722679),a=e.i(282141);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>d,"CardFooter",()=>i,"CardHeader",()=>s,"CardTitle",()=>l])},15098,e=>{"use strict";let t=(0,e.i(410587).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],15098)},237635,e=>{"use strict";var t=e.i(722679),a=e.i(282141);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})})}function s({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...r})}function l({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r})}function d({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function n({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function i({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>i,"TableHead",()=>n,"TableHeader",()=>s,"TableRow",()=>d])},501495,e=>{"use strict";e.s(["formatBps",0,e=>null==e?"—":`${e} bps`,"formatCurrency",0,(e,t="USD")=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:0}).format(e):"$0","formatDate",0,e=>{if(!e)return"—";let t="string"==typeof e?new Date(e):e;return Number.isNaN(t?.getTime?.())?"—":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}])},416469,e=>{"use strict";let t=(0,e.i(410587).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],416469)},360209,e=>{"use strict";let t=(0,e.i(410587).default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);e.s(["Percent",()=>t],360209)},646839,e=>{"use strict";let t=(0,e.i(410587).default)("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);e.s(["FileDown",()=>t],646839)},708767,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(90613),s=e.i(129432),l=e.i(316264),d=e.i(191569),n=e.i(538892),i=e.i(237635),o=e.i(119311),c=e.i(645855),m=e.i(15098),u=e.i(750809),x=e.i(263229),g=e.i(401148),p=e.i(711819),h=e.i(84065),b=e.i(416469),f=e.i(360209),v=e.i(619324),j=e.i(646839),N=e.i(994500),y=e.i(282141),_=e.i(501495),w=e.i(59178),k=e.i(603274);let C={draft:{className:"bg-slate-100 text-slate-700 border-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700",label:"Draft"},sent:{className:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-900/50 dark:text-sky-300 dark:border-sky-800",label:"Sent"},pending_approval:{className:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/50 dark:text-amber-300 dark:border-amber-800",label:"Pending Approval"},approved:{className:"bg-teal-100 text-teal-700 border-teal-200 dark:bg-teal-900/50 dark:text-teal-300 dark:border-teal-800",label:"Approved"},pending_ceo_signature:{className:"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/50 dark:text-indigo-300 dark:border-indigo-800",label:"Awaiting CEO"},pending_introducer_signature:{className:"bg-violet-100 text-violet-700 border-violet-200 dark:bg-violet-900/50 dark:text-violet-300 dark:border-violet-800",label:"Awaiting Introducer"},active:{className:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/50 dark:text-emerald-300 dark:border-emerald-800",label:"Active"},rejected:{className:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/50 dark:text-rose-300 dark:border-rose-800",label:"Rejected"},expired:{className:"bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900/50 dark:text-orange-300 dark:border-orange-800",label:"Expired"},terminated:{className:"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/50 dark:text-red-300 dark:border-red-800",label:"Terminated"}},T=[{label:"All Agreements",value:"all",group:null},{label:"Draft",value:"draft",group:"In Progress"},{label:"Sent",value:"sent",group:"In Progress"},{label:"Pending Approval",value:"pending_approval",group:"In Progress"},{label:"Approved",value:"approved",group:"In Progress"},{label:"Awaiting CEO Signature",value:"pending_ceo_signature",group:"Signatures"},{label:"Awaiting Introducer Signature",value:"pending_introducer_signature",group:"Signatures"},{label:"Active",value:"active",group:"Final"},{label:"Rejected",value:"rejected",group:"Final"},{label:"Expired",value:"expired",group:"Final"},{label:"Terminated",value:"terminated",group:"Final"}],S={referral:"Referral Agreement",revenue_share:"Revenue Share",fixed_fee:"Fixed Fee",hybrid:"Hybrid"};function A(){let e=(0,k.useRouter)(),[A,F]=(0,a.useState)(null),[D,P]=(0,a.useState)([]),[H,I]=(0,a.useState)({totalAgreements:0,activeAgreements:0,pendingAgreements:0,expiringSoon:0}),[L,R]=(0,a.useState)(!0),[E,U]=(0,a.useState)(null),[B,$]=(0,a.useState)(""),[z,M]=(0,a.useState)("all"),[q,G]=(0,a.useState)(null),O=async(e,t,a)=>{e.stopPropagation(),G(t);try{let e=await fetch(`/api/storage/download?path=${encodeURIComponent(t)}&bucket=deal-documents`);if(!e.ok)throw Error("Failed to download file");let r=await e.blob(),s=window.URL.createObjectURL(r),l=document.createElement("a");l.href=s,l.download=t.split("/").pop()||`${a||"Fee_Agreement"}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s),N.toast.success("PDF downloaded successfully")}catch(e){console.error("Error downloading PDF:",e),N.toast.error("Failed to download PDF")}finally{G(null)}};function V(e){if(!e)return!1;let t=new Date,a=new Date(e),r=new Date(t.getTime()+2592e6);return a>t&&a<=r}function K(e){return`${(e/100).toFixed(2)}%`}(0,a.useEffect)(()=>{async function e(e){let{data:a,error:r}=await e.from("introducer_agreements").select(`
          *,
          introducer:introducer_id (
            id,
            legal_name,
            status
          )
        `).order("created_at",{ascending:!1}).limit(100);if(r)throw r;t(a||[])}function t(e){let t=new Date,a=new Date(t.getTime()+2592e6),r=e.map(e=>({id:e.id,agreement_type:e.agreement_type||"referral",signed_date:e.signed_date,effective_date:e.effective_date,expiry_date:e.expiry_date,default_commission_bps:e.default_commission_bps||0,commission_cap_amount:e.commission_cap_amount,payment_terms:e.payment_terms,territory:e.territory,deal_types:e.deal_types,exclusivity_level:e.exclusivity_level,status:e.status||"draft",created_at:e.created_at,pdf_url:e.pdf_url||null,reference_number:e.reference_number||null}));P(r);let s=r.filter(e=>"active"===e.status).length,l=["draft","sent","pending_approval","approved","pending_ceo_signature","pending_introducer_signature"],d=r.filter(e=>l.includes(e.status)).length,n=r.filter(e=>{if(!e.expiry_date)return!1;let r=new Date(e.expiry_date);return r>t&&r<=a&&"active"===e.status}).length;I({totalAgreements:r.length,activeAgreements:s,pendingAgreements:d,expiringSoon:n})}!async function(){try{R(!0);let a=(0,w.createClient)(),{data:{user:r}}=await a.auth.getUser();if(!r)return void U("Not authenticated");let{data:s,error:l}=await a.from("introducer_users").select("introducer_id").eq("user_id",r.id).single();if(l||!s)return void await e(a);let{data:d,error:n}=await a.from("introducers").select("id, legal_name, status, default_commission_bps, logo_url").eq("id",s.introducer_id).single();if(n)throw n;F(d);let{data:i,error:o}=await a.from("introducer_agreements").select("*").eq("introducer_id",s.introducer_id).order("created_at",{ascending:!1});if(o)throw o;t(i||[]),U(null)}catch(e){console.error("[IntroducerAgreementsPage] Error:",e),U(e instanceof Error?e.message:"Failed to load agreements")}finally{R(!1)}}()},[]);let W=D.filter(e=>{let t="all"===z||e.status===z,a=!B||e.agreement_type?.toLowerCase().includes(B.toLowerCase())||e.territory?.toLowerCase().includes(B.toLowerCase());return t&&a});return L?(0,t.jsxs)("div",{className:"flex items-center justify-center py-16",children:[(0,t.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,t.jsx)("span",{className:"ml-3 text-muted-foreground",children:"Loading agreements..."})]}):E?(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)(g.AlertCircle,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Error Loading Agreements"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:E})]}):(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Fee Agreements"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:A?`Manage your commission agreements as ${A.legal_name}`:"View and manage all introducer agreements"})]}),A&&A.default_commission_bps&&(0,t.jsxs)(s.Badge,{variant:"outline",className:"text-sm",children:["Default: ",K(A.default_commission_bps)]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)(r.Card,{className:"relative overflow-hidden group hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-500/5 to-slate-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(r.CardHeader,{className:"pb-2",children:(0,t.jsxs)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-1.5 rounded-lg bg-slate-100 dark:bg-slate-800",children:(0,t.jsx)(o.FileText,{className:"h-3.5 w-3.5 text-slate-600 dark:text-slate-400"})}),"Total Agreements"]})}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold tracking-tight",children:H.totalAgreements}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"All fee arrangements"})]})]}),(0,t.jsxs)(r.Card,{className:"relative overflow-hidden group hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-green-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(r.CardHeader,{className:"pb-2",children:(0,t.jsxs)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-1.5 rounded-lg bg-emerald-100 dark:bg-emerald-900/50",children:(0,t.jsx)(m.CheckCircle2,{className:"h-3.5 w-3.5 text-emerald-600 dark:text-emerald-400"})}),"Active"]})}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold tracking-tight text-emerald-600 dark:text-emerald-400",children:H.activeAgreements}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Currently in effect"})]})]}),(0,t.jsxs)(r.Card,{className:"relative overflow-hidden group hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-yellow-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(r.CardHeader,{className:"pb-2",children:(0,t.jsxs)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-1.5 rounded-lg bg-amber-100 dark:bg-amber-900/50",children:(0,t.jsx)(c.Clock,{className:"h-3.5 w-3.5 text-amber-600 dark:text-amber-400"})}),"In Progress"]})}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold tracking-tight text-amber-600 dark:text-amber-400",children:H.pendingAgreements}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting action"})]})]}),(0,t.jsxs)(r.Card,{className:"relative overflow-hidden group hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-red-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(r.CardHeader,{className:"pb-2",children:(0,t.jsxs)(r.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-1.5 rounded-lg bg-orange-100 dark:bg-orange-900/50",children:(0,t.jsx)(v.AlertTriangle,{className:"h-3.5 w-3.5 text-orange-600 dark:text-orange-400"})}),"Expiring Soon"]})}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold tracking-tight text-orange-600 dark:text-orange-400",children:H.expiringSoon}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Within 30 days"})]})]})]}),(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(d.Input,{placeholder:"Search by type or territory...",value:B,onChange:e=>$(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(n.Select,{value:z,onValueChange:M,children:[(0,t.jsx)(n.SelectTrigger,{className:"w-full md:w-56",children:(0,t.jsx)(n.SelectValue,{placeholder:"Filter by status"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Agreements"}),(0,t.jsxs)(n.SelectGroup,{children:[(0,t.jsx)(n.SelectLabel,{className:"text-xs text-muted-foreground font-semibold px-2 py-1.5",children:"In Progress"}),T.filter(e=>"In Progress"===e.group).map(e=>(0,t.jsx)(n.SelectItem,{value:e.value,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:(0,y.cn)("w-2 h-2 rounded-full","draft"===e.value&&"bg-slate-500","sent"===e.value&&"bg-sky-500","pending_approval"===e.value&&"bg-amber-500","approved"===e.value&&"bg-teal-500")}),e.label]})},e.value))]}),(0,t.jsxs)(n.SelectGroup,{children:[(0,t.jsx)(n.SelectLabel,{className:"text-xs text-muted-foreground font-semibold px-2 py-1.5",children:"Awaiting Signatures"}),T.filter(e=>"Signatures"===e.group).map(e=>(0,t.jsx)(n.SelectItem,{value:e.value,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:(0,y.cn)("w-2 h-2 rounded-full","pending_ceo_signature"===e.value&&"bg-indigo-500","pending_introducer_signature"===e.value&&"bg-violet-500")}),e.label]})},e.value))]}),(0,t.jsxs)(n.SelectGroup,{children:[(0,t.jsx)(n.SelectLabel,{className:"text-xs text-muted-foreground font-semibold px-2 py-1.5",children:"Final States"}),T.filter(e=>"Final"===e.group).map(e=>(0,t.jsx)(n.SelectItem,{value:e.value,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:(0,y.cn)("w-2 h-2 rounded-full","active"===e.value&&"bg-emerald-500","rejected"===e.value&&"bg-rose-500","expired"===e.value&&"bg-orange-500","terminated"===e.value&&"bg-red-500")}),e.label]})},e.value))]})]})]})]})})}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:"Agreements"}),(0,t.jsxs)(r.CardDescription,{children:[W.length," agreement",1!==W.length?"s":""," found"]})]}),(0,t.jsx)(r.CardContent,{children:0===W.length?(0,t.jsxs)("div",{className:"border-2 border-dashed border-muted/50 rounded-xl py-16 flex flex-col items-center justify-center text-center space-y-4 bg-gradient-to-br from-muted/20 to-muted/5",children:[(0,t.jsx)("div",{className:"p-4 rounded-2xl bg-muted/30",children:(0,t.jsx)(p.FileSignature,{className:"h-12 w-12 text-muted-foreground/60"})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-base font-medium text-muted-foreground",children:B||"all"!==z?"No agreements match your filters":A?"No fee agreements on file":"No introducer agreements found"}),A&&0===D.length&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground/70 max-w-sm",children:"Contact your relationship manager to set up a fee agreement and start making introductions."}),(B||"all"!==z)&&(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>{$(""),M("all")},children:"Clear filters"})]})]}):(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(i.TableHeader,{children:(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(i.TableHead,{children:"Type"}),(0,t.jsx)(i.TableHead,{children:"Commission"}),(0,t.jsx)(i.TableHead,{children:"Territory"}),(0,t.jsx)(i.TableHead,{children:"Effective"}),(0,t.jsx)(i.TableHead,{children:"Expires"}),(0,t.jsx)(i.TableHead,{children:"Status"}),(0,t.jsx)(i.TableHead,{className:"w-12",children:"PDF"})]})}),(0,t.jsx)(i.TableBody,{children:W.map(a=>(0,t.jsxs)(i.TableRow,{className:"cursor-pointer hover:bg-muted/50 transition-colors duration-150 group",onClick:()=>e.push(`/versotech_main/introducer-agreements/${a.id}`),children:[(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.FileText,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:S[a.agreement_type]||a.agreement_type}),a.exclusivity_level&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground capitalize",children:a.exclusivity_level})]})]})}),(0,t.jsxs)(i.TableCell,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(f.Percent,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"font-medium",children:K(a.default_commission_bps)})]}),a.commission_cap_amount&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Cap: $",a.commission_cap_amount.toLocaleString()]})]}),(0,t.jsxs)(i.TableCell,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(b.Globe,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{children:a.territory||"Global"})]}),a.deal_types&&a.deal_types.length>0&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.deal_types.slice(0,2).join(", "),a.deal_types.length>2&&` +${a.deal_types.length-2}`]})]}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Calendar,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm",children:a.effective_date?(0,_.formatDate)(a.effective_date):"Not set"})]})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)("div",{className:(0,y.cn)("flex items-center gap-1",V(a.expiry_date)&&"text-orange-600"),children:[V(a.expiry_date)&&(0,t.jsx)(v.AlertTriangle,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-sm",children:a.expiry_date?(0,_.formatDate)(a.expiry_date):"No expiry"})]})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(s.Badge,{variant:"outline",className:(0,y.cn)("font-medium",(C[a.status]||C.draft).className),children:(C[a.status]||C.draft).label})}),(0,t.jsx)(i.TableCell,{children:a.pdf_url?(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:e=>O(e,a.pdf_url,a.reference_number),disabled:q===a.pdf_url,className:"h-8 w-8 p-0 text-blue-500 hover:text-blue-400 hover:bg-blue-500/10",title:"Download PDF",children:q===a.pdf_url?(0,t.jsx)(x.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(j.FileDown,{className:"h-4 w-4"})}):(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"—"})})]},a.id))})]})})})]})]})}e.s(["default",()=>A])}]);