(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,186872,e=>{"use strict";var t=e.i(722679),a=e.i(340915),s=e.i(90613),r=e.i(316264),l=e.i(129432),i=e.i(237635),n=e.i(312692),d=e.i(15098),o=e.i(745083),c=e.i(645855),m=e.i(619324),x=e.i(262823),u=e.i(761722),p=e.i(941844),h=e.i(244994),g=e.i(352776),j=e.i(816654),b=e.i(514133),y=e.i(538892),_=e.i(994500);let f=[{value:"kyc_incomplete",label:"KYC Documentation Incomplete"},{value:"insufficient_funds",label:"Insufficient Funds"},{value:"deal_closed",label:"Deal Closed/No Longer Available"},{value:"minimum_not_met",label:"Minimum Investment Not Met"},{value:"compliance_issue",label:"Compliance Issue"},{value:"investor_ineligible",label:"Investor Ineligible"},{value:"documentation_error",label:"Documentation Error"},{value:"other",label:"Other (please specify)"}];function v({approval:e,action:s,open:l,onOpenChange:i,onSuccess:n}){let[c,x]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[h,v]=(0,a.useState)(!1),N=()=>{x(""),p(""),i(!1)},w=async()=>{if(e&&s){if("reject"===s&&!u)return void _.toast.error("Please select a rejection reason");v(!0);try{let t=await fetch(`/api/approvals/${e.id}/action`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:s,notes:c.trim()||void 0,rejection_reason:"reject"===s?u:void 0})}),a=await t.json();if(!t.ok)throw Error(a.error||`Failed to ${s} approval`);_.toast.success(a.message||`Successfully ${s}d approval`),N(),n()}catch(e){console.error(`Error ${s}ing approval:`,e),_.toast.error(e instanceof Error?e.message:`Failed to ${s} approval`)}finally{v(!1)}}};if(!e||!s)return null;let C="approve"===s,k=e.entity_metadata?.requested_amount||e.entity_metadata?.amount;return(0,t.jsx)(g.Dialog,{open:l,onOpenChange:i,children:(0,t.jsxs)(g.DialogContent,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(g.DialogHeader,{children:[(0,t.jsx)(g.DialogTitle,{className:"flex items-center gap-2",children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.CheckCircle2,{className:"h-5 w-5 text-green-600"}),"Approve Request"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.XCircle,{className:"h-5 w-5 text-red-600"}),"Reject Request"]})}),(0,t.jsx)(g.DialogDescription,{children:C?"Review the details below and confirm your approval.":"Provide a reason for rejection. The requester will be notified."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsx)("div",{className:"rounded-lg border border-border bg-card p-4 space-y-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Request Type:"}),(0,t.jsx)("p",{className:"font-medium capitalize mt-1",children:e.entity_type.replace(/_/g," ")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Requested By:"}),(0,t.jsx)("p",{className:"font-medium mt-1",children:e.requested_by_profile?.display_name||"Unknown"})]}),k&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,t.jsxs)("p",{className:"font-medium mt-1",children:["$",parseFloat(k).toLocaleString()]})]}),e.related_investor&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Investor:"}),(0,t.jsx)("p",{className:"font-medium mt-1",children:e.related_investor.legal_name})]}),e.related_deal&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Deal:"}),(0,t.jsx)("p",{className:"font-medium mt-1",children:e.related_deal.name})]})]})}),C&&k&&parseFloat(k)>5e4&&(0,t.jsxs)("div",{className:"flex items-start gap-2 rounded-lg border border-amber-500/20 bg-amber-500/10 p-3",children:[(0,t.jsx)(m.AlertTriangle,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-amber-900 dark:text-amber-200",children:"High-Value Approval"}),(0,t.jsx)("p",{className:"text-amber-800 dark:text-amber-300 mt-1",children:"This approval involves an amount greater than $50,000. Please ensure all documentation is complete."})]})]}),!C&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.Label,{htmlFor:"rejection-reason",className:"text-sm font-medium",children:"Rejection Reason *"}),(0,t.jsxs)(y.Select,{value:u,onValueChange:p,children:[(0,t.jsx)(y.SelectTrigger,{id:"rejection-reason",children:(0,t.jsx)(y.SelectValue,{placeholder:"Select a reason"})}),(0,t.jsx)(y.SelectContent,{children:f.map(e=>(0,t.jsx)(y.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.Label,{htmlFor:"notes",className:"text-sm font-medium",children:C?"Additional Notes (Optional)":"Additional Details *"}),(0,t.jsx)(j.Textarea,{id:"notes",placeholder:C?"Add any notes about this approval...":"Provide specific details about why this request is being rejected...",value:c,onChange:e=>x(e.target.value),rows:4,className:"resize-none"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:C?"Notes will be saved in the approval history.":"This message will be sent to the requester along with the rejection reason."})]})]}),(0,t.jsxs)(g.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:N,disabled:h,children:"Cancel"}),(0,t.jsx)(r.Button,{variant:C?"default":"destructive",onClick:w,disabled:h||!C&&!u,children:h?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("span",{className:"mr-2",children:"Processing..."})}):(0,t.jsx)(t.Fragment,{children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Confirm Approval"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.XCircle,{className:"mr-2 h-4 w-4"}),"Confirm Rejection"]})})})]})]})})}var N=e.i(335631),w=e.i(382021);function C({onFilterChange:e,currentFilters:s}){let[l,i]=(0,a.useState)(s),d=t=>{let a={...l,...t};i(a),e(a)},o=l.entity_types.length+l.priorities.length+ +!!l.assigned_to_me+ +!!l.overdue_only;return(0,t.jsxs)(N.Popover,{children:[(0,t.jsx)(N.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",className:"relative",children:[(0,t.jsx)(w.Filter,{className:"mr-2 h-4 w-4"}),"Filter",o>0&&(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-blue-600 rounded-full",children:o})]})}),(0,t.jsx)(N.PopoverContent,{className:"w-80 max-h-[80vh] overflow-y-auto",align:"end",side:"bottom",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3 text-sm",children:"Request Type"}),(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[{value:"member_invitation",label:"Member Invitations"},{value:"deal_interest",label:"Deal Interests"},{value:"deal_subscription",label:"Subscriptions"},{value:"deal_close",label:"Deal Close"},{value:"allocation",label:"Allocations"},{value:"kyc_change",label:"KYC Changes"},{value:"withdrawal",label:"Withdrawals"},{value:"profile_update",label:"Profile Updates"},{value:"document_access",label:"Document Access"},{value:"gdpr_deletion_request",label:"GDPR Deletion Requests"}].map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Checkbox,{id:e.value,checked:l.entity_types.includes(e.value),onCheckedChange:t=>{d({entity_types:t?[...l.entity_types,e.value]:l.entity_types.filter(t=>t!==e.value)})}}),(0,t.jsx)(b.Label,{htmlFor:e.value,className:"text-sm font-normal cursor-pointer",children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-3 text-sm",children:"Priority"}),(0,t.jsx)("div",{className:"space-y-2",children:[{value:"critical",label:"Critical",color:"text-red-600"},{value:"high",label:"High",color:"text-orange-600"},{value:"medium",label:"Medium",color:"text-yellow-600"},{value:"low",label:"Low",color:"text-blue-600"}].map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Checkbox,{id:`priority-${e.value}`,checked:l.priorities.includes(e.value),onCheckedChange:t=>{d({priorities:t?[...l.priorities,e.value]:l.priorities.filter(t=>t!==e.value)})}}),(0,t.jsx)(b.Label,{htmlFor:`priority-${e.value}`,className:`text-sm font-normal cursor-pointer ${e.color}`,children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Checkbox,{id:"assigned_to_me",checked:l.assigned_to_me,onCheckedChange:e=>d({assigned_to_me:e})}),(0,t.jsx)(b.Label,{htmlFor:"assigned_to_me",className:"text-sm font-normal cursor-pointer",children:"Assigned to me only"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Checkbox,{id:"overdue_only",checked:l.overdue_only,onCheckedChange:e=>d({overdue_only:e})}),(0,t.jsx)(b.Label,{htmlFor:"overdue_only",className:"text-sm font-normal cursor-pointer",children:"Overdue only"})]})]}),o>0&&(0,t.jsx)("div",{className:"border-t pt-4",children:(0,t.jsx)(r.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{let t={entity_types:[],priorities:[],assigned_to_me:!1,overdue_only:!1};i(t),e(t)},children:"Clear all filters"})})]})})]})}var k=e.i(150327),S=e.i(661521),T=e.i(937368),D=e.i(429760),A=e.i(704477),M=e.i(971743),R=e.i(84065),H=e.i(119311),B=e.i(398472),L=e.i(733179),I=e.i(275034),P=e.i(191026),$=e.i(137533),F=e.i(771750),U=e.i(820417),q=e.i(603274);let O={low:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-500/30",medium:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300 border-yellow-300 dark:border-yellow-500/30",high:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300 border-orange-300 dark:border-orange-500/30",critical:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300 border-red-300 dark:border-red-500/30"},E={pending:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300",approved:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",rejected:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300",awaiting_info:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",escalated:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300",cancelled:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300"},z={deal_interest:"Deal Interest",deal_subscription:"Subscription",deal_close:"Deal Close",allocation:"Allocation",withdrawal:"Withdrawal",kyc_change:"KYC Change",profile_update:"Profile Update",fee_override:"Fee Override",document_access:"Document Access",permission_grant:"Permission Grant"};function V({approval:e,open:i,onOpenChange:n,onApprove:x,onReject:u}){let p=(0,q.useRouter)(),[h,g]=(0,a.useState)(0),[j,b]=(0,a.useState)(!1),[y,f]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(e?.sla_breach_at){let t=new Date().getTime(),a=new Date(e.created_at).getTime();g(Math.min(100,Math.max(0,(t-a)/(new Date(e.sla_breach_at).getTime()-a)*100)))}},[e]),!e)return null;let w=async()=>{if(x){b(!0);try{await x(e.id),n(!1)}catch(e){console.error("Approval failed:",e)}finally{b(!1)}}},C=async()=>{if(!u)return;let t=prompt("Please provide a rejection reason:");if(t){f(!0);try{await u(e.id,t),n(!1)}catch(e){console.error("Rejection failed:",e)}finally{f(!1)}}},V=async()=>{if(!e.requested_by_profile?.id)return void _.toast.error("Cannot message investor",{description:"Investor profile not found"});N(!0);try{let t=e.related_deal?.name||"Deal",a=z[e.entity_type]||e.entity_type,s=`${a} - ${t}`,r=await fetch("/api/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:s,participant_ids:[e.requested_by_profile.id],type:"dm",visibility:"investor",initial_message:`Regarding your ${a.toLowerCase()} for ${t}.`,metadata:{approval_id:e.id,entity_type:e.entity_type,deal_id:e.related_deal?.id}})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create conversation")}let l=await r.json();_.toast.success("Conversation created",{description:`Opening conversation with ${e.requested_by_profile.display_name||"investor"}`}),p.push(`/versotech_main/messages?conversation=${l.conversation.id}`),n(!1)}catch(e){console.error("Error creating conversation:",e),_.toast.error("Failed to create conversation",{description:e instanceof Error?e.message:"Please try again"})}finally{N(!1)}},J=e.sla_breach_at?new Date(e.sla_breach_at):null,K=J&&J<new Date;return(0,t.jsx)(k.Sheet,{open:i,onOpenChange:n,children:(0,t.jsxs)(k.SheetContent,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,t.jsxs)(k.SheetHeader,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Badge,{variant:"outline",className:"text-sm text-foreground border-border",children:z[e.entity_type]||e.entity_type}),(0,t.jsx)(l.Badge,{className:O[e.priority],children:e.priority.toUpperCase()}),(0,t.jsx)(l.Badge,{className:E[e.status],children:e.status.replace("_"," ").toUpperCase()})]}),(0,t.jsx)(k.SheetTitle,{className:"text-2xl text-foreground",children:e.related_deal?.name||e.related_investor?.legal_name||"Approval Details"}),(0,t.jsxs)(k.SheetDescription,{className:"text-muted-foreground",children:["Requested ",(0,F.formatDistanceToNow)(new Date(e.created_at),{addSuffix:!0})," by"," ",e.requested_by_profile?.display_name||"Unknown"]})]})}),J&&(0,t.jsx)(s.Card,{className:"border-border bg-muted/50",children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2 text-foreground",children:[(0,t.jsx)(c.Clock,{className:"h-4 w-4"}),"SLA Deadline"]}),(0,t.jsx)("span",{className:K?"text-red-600 dark:text-red-400 font-semibold":"text-foreground",children:K?(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.AlertTriangle,{className:"h-4 w-4"}),(0,F.formatDistanceToNow)(J)," overdue"]}):(0,$.format)(J,"MMM dd, yyyy HH:mm")})]}),(0,t.jsx)(T.Progress,{value:h,className:"h-2"})]})})}),(0,t.jsxs)("div",{className:"space-y-2",children:["pending"===e.status&&(x||u)&&(0,t.jsxs)("div",{className:"flex gap-2",children:[x&&(0,t.jsxs)(r.Button,{onClick:w,disabled:j,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white",children:[(0,t.jsx)(d.CheckCircle2,{className:"h-4 w-4 mr-2"}),j?"Approving...":"Approve"]}),u&&(0,t.jsxs)(r.Button,{onClick:C,disabled:y,variant:"destructive",className:"flex-1 text-white",children:[(0,t.jsx)(o.XCircle,{className:"h-4 w-4 mr-2"}),y?"Rejecting...":"Reject"]})]}),e.requested_by_profile&&(0,t.jsxs)(r.Button,{onClick:V,disabled:v,variant:"outline",className:"w-full border-blue-300 dark:border-blue-500/30 bg-blue-50 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-500/20 hover:text-blue-800 dark:hover:text-blue-200",children:[(0,t.jsx)(P.MessageCircle,{className:"h-4 w-4 mr-2"}),v?"Creating conversation...":`Message ${e.requested_by_profile.display_name||"Investor"}`]})]})]}),(0,t.jsx)(S.Separator,{className:"my-6"}),(0,t.jsxs)(D.Tabs,{defaultValue:"overview",className:"w-full",id:`approval-tabs-${e?.id||"new"}`,children:[(0,t.jsxs)(D.TabsList,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(D.TabsTrigger,{value:"overview",children:"Overview"}),(0,t.jsx)(D.TabsTrigger,{value:"timeline",children:"Timeline"}),(0,t.jsx)(D.TabsTrigger,{value:"metadata",children:"Data"})]}),(0,t.jsxs)(D.TabsContent,{value:"overview",className:"space-y-4 mt-6",children:[e.related_deal&&(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,t.jsx)(M.Building2,{className:"h-5 w-5"}),"Deal Information"]})}),(0,t.jsx)(s.CardContent,{className:"space-y-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deal Name"}),(0,t.jsxs)(U.default,{href:`/versotech_main/deals/${e.related_deal.id}`,className:"font-medium text-foreground hover:underline flex items-center gap-1",children:[e.related_deal.name,(0,t.jsx)(B.ExternalLink,{className:"h-3 w-3"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Status"}),(0,t.jsx)("p",{className:"font-medium text-foreground capitalize",children:e.related_deal.status||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deal Type"}),(0,t.jsx)("p",{className:"font-medium text-foreground capitalize",children:e.related_deal.deal_type||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Currency"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.related_deal.currency||"USD"})]})]})})]}),e.related_investor&&(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,t.jsx)(A.User,{className:"h-5 w-5"}),"Investor Information"]})}),(0,t.jsx)(s.CardContent,{className:"space-y-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Legal Name"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.related_investor.legal_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"KYC Status"}),(0,t.jsx)(l.Badge,{variant:"outline",className:"text-foreground border-border",children:e.related_investor.kyc_status||"Unknown"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type"}),(0,t.jsx)("p",{className:"font-medium text-foreground capitalize",children:e.related_investor.type||"N/A"})]})]})})]}),"deal_subscription"===e.entity_type&&e.entity_metadata?.subscription_type==="entity"&&e.entity_metadata?.counterparty_entity&&(0,t.jsxs)(s.Card,{className:"border-blue-300 dark:border-blue-500/30 bg-blue-50 dark:bg-blue-500/10",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,t.jsx)(M.Building2,{className:"h-5 w-5 text-blue-400"}),"Subscribing Entity"]}),(0,t.jsx)(s.CardDescription,{className:"text-blue-600 dark:text-blue-300",children:"This subscription is being made through a counterparty entity"})]}),(0,t.jsxs)(s.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Entity Legal Name"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.entity_metadata.counterparty_entity.legal_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Entity Type"}),(0,t.jsx)(l.Badge,{variant:"outline",className:"text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-400/30",children:e.entity_metadata.counterparty_entity.entity_type.replace("_"," ").toUpperCase()})]}),e.entity_metadata.counterparty_entity.jurisdiction&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Jurisdiction"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.entity_metadata.counterparty_entity.jurisdiction})]}),e.entity_metadata.counterparty_entity.registration_number&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Registration Number"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.entity_metadata.counterparty_entity.registration_number})]}),e.entity_metadata.counterparty_entity.tax_id&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tax ID"}),(0,t.jsx)("p",{className:"font-mono text-sm text-foreground",children:e.entity_metadata.counterparty_entity.tax_id})]}),e.entity_metadata.counterparty_entity.representative_name&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Authorized Representative"}),(0,t.jsxs)("p",{className:"font-medium text-foreground",children:[e.entity_metadata.counterparty_entity.representative_name,e.entity_metadata.counterparty_entity.representative_title&&(0,t.jsxs)("span",{className:"text-muted-foreground text-sm ml-1",children:["(",e.entity_metadata.counterparty_entity.representative_title,")"]})]})]})]}),e.entity_metadata.counterparty_entity.kyc_status&&(0,t.jsxs)("div",{className:"col-span-2 mt-2 p-3 rounded-lg bg-muted border border-border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Entity KYC Status"}),(0,t.jsx)(l.Badge,{variant:"approved"===e.entity_metadata.counterparty_entity.kyc_status?"default":"pending"===e.entity_metadata.counterparty_entity.kyc_status?"secondary":"destructive",className:"approved"===e.entity_metadata.counterparty_entity.kyc_status?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 border-emerald-300 dark:border-emerald-500/30":"pending"===e.entity_metadata.counterparty_entity.kyc_status?"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 border-amber-300 dark:border-amber-500/30":"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300 border-rose-300 dark:border-rose-500/30",children:e.entity_metadata.counterparty_entity.kyc_status.toUpperCase()})]}),e.entity_metadata.counterparty_entity.kyc_completed_at&&(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Completed"}),(0,t.jsx)("p",{className:"text-sm text-foreground",children:new Date(e.entity_metadata.counterparty_entity.kyc_completed_at).toLocaleDateString()})]})]}),e.entity_metadata.counterparty_entity.kyc_expiry_date&&(0,t.jsx)("div",{className:"mt-2 pt-2 border-t border-border",children:(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(e.entity_metadata.counterparty_entity.kyc_expiry_date).toLocaleDateString()]})}),e.entity_metadata.counterparty_entity.kyc_notes&&(0,t.jsx)("div",{className:"mt-2 pt-2 border-t border-border",children:(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.entity_metadata.counterparty_entity.kyc_notes})})]}),e.entity_metadata.counterparty_entity.registered_address&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Registered Address"}),(0,t.jsxs)("div",{className:"text-sm text-foreground",children:[e.entity_metadata.counterparty_entity.registered_address.street&&(0,t.jsx)("p",{children:e.entity_metadata.counterparty_entity.registered_address.street}),(0,t.jsx)("p",{children:[e.entity_metadata.counterparty_entity.registered_address.city,e.entity_metadata.counterparty_entity.registered_address.state,e.entity_metadata.counterparty_entity.registered_address.postal_code].filter(Boolean).join(", ")}),e.entity_metadata.counterparty_entity.registered_address.country&&(0,t.jsx)("p",{children:e.entity_metadata.counterparty_entity.registered_address.country})]})]}),(0,t.jsx)("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30",children:(0,t.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[(0,t.jsx)("strong",{children:"Note:"})," The investor (",e.related_investor?.legal_name,") is investing on behalf of this entity. Subscription documents will be prepared in the entity's name."]})})]})]}),(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,t.jsx)(H.FileText,{className:"h-5 w-5"}),"Request Details"]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assigned To"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.assigned_to_profile?.display_name||"Unassigned"}),e.assigned_to_profile?.email&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.assigned_to_profile.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Requested By"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.requested_by_profile?.display_name||"Unknown"}),e.requested_by_profile?.email&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.requested_by_profile.email})]})]}),"deal_subscription"===e.entity_type&&e.entity_metadata?.derived_amount&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Subscription Amount"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-emerald-400",children:[e.entity_metadata.payload?.currency||"USD"," ",e.entity_metadata.derived_amount.toLocaleString()]})]}),"deal_subscription"!==e.entity_type&&e.entity_metadata?.indicative_amount&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Indicative Amount"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-emerald-400",children:[e.entity_metadata.indicative_currency||"USD"," ",e.entity_metadata.indicative_amount.toLocaleString()]})]}),e.entity_metadata?.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Notes"}),(0,t.jsx)("div",{className:"p-3 rounded-lg bg-muted border border-border",children:(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.entity_metadata.notes})})]}),e.request_reason&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Request Reason"}),(0,t.jsx)("div",{className:"p-3 rounded-lg bg-muted border border-border",children:(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.request_reason})})]}),e.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Staff Notes"}),(0,t.jsx)("div",{className:"p-3 rounded-lg bg-muted border border-border",children:(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.notes})})]}),e.rejection_reason&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Rejection Reason"}),(0,t.jsx)("div",{className:"p-3 rounded-lg bg-rose-50 dark:bg-rose-500/10 border border-rose-200 dark:border-rose-500/30",children:(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap text-rose-700 dark:text-rose-300",children:e.rejection_reason})})]})]})]}),e.approved_by_profile&&(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,t.jsx)(d.CheckCircle2,{className:"h-5 w-5"}),"Decision"]})}),(0,t.jsx)(s.CardContent,{className:"space-y-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Decided By"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.approved_by_profile.display_name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.approved_by_profile.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Decided At"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.approved_at&&(0,$.format)(new Date(e.approved_at),"MMM dd, yyyy HH:mm")})]})]})})]}),(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,t.jsx)(I.Info,{className:"h-5 w-5"}),"Reference Information"]})}),(0,t.jsx)(s.CardContent,{className:"space-y-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Approval ID"}),(0,t.jsx)("p",{className:"font-mono text-xs text-foreground",children:e.id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Entity ID"}),(0,t.jsx)("p",{className:"font-mono text-xs text-foreground",children:e.entity_id})]})]})})]})]}),(0,t.jsx)(D.TabsContent,{value:"timeline",className:"space-y-4 mt-6",children:(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,t.jsx)(L.TrendingUp,{className:"h-5 w-5"}),"Approval Timeline"]}),(0,t.jsx)(s.CardDescription,{className:"text-muted-foreground",children:"Complete event history for this approval"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)(X,{approval:e})})]})}),(0,t.jsxs)(D.TabsContent,{value:"metadata",className:"space-y-4 mt-6",children:[e.entity_metadata&&Object.keys(e.entity_metadata).length>0&&(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{className:"text-lg text-foreground",children:"Entity Metadata"}),(0,t.jsx)(s.CardDescription,{className:"text-muted-foreground",children:"Complete data payload for this approval"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("pre",{className:"p-4 rounded-lg bg-muted dark:bg-black/30 border border-border overflow-x-auto text-xs text-foreground",children:JSON.stringify(e.entity_metadata,null,2)})})]}),(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,t.jsx)(R.Calendar,{className:"h-5 w-5"}),"Timestamps"]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Created At"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:(0,$.format)(new Date(e.created_at),"MMM dd, yyyy HH:mm:ss")})]}),e.updated_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Updated At"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:(0,$.format)(new Date(e.updated_at),"MMM dd, yyyy HH:mm:ss")})]}),e.approved_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Approved/Rejected At"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:(0,$.format)(new Date(e.approved_at),"MMM dd, yyyy HH:mm:ss")})]}),e.resolved_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Resolved At"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:(0,$.format)(new Date(e.resolved_at),"MMM dd, yyyy HH:mm:ss")})]}),e.sla_breach_at&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"SLA Deadline"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:(0,$.format)(new Date(e.sla_breach_at),"MMM dd, yyyy HH:mm:ss")})]})]})})]}),(0,t.jsxs)(s.Card,{className:"border-border bg-muted/50",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{className:"text-lg text-foreground",children:"Complete Approval Record"}),(0,t.jsx)(s.CardDescription,{className:"text-muted-foreground",children:"Full approval object (all fields)"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("pre",{className:"p-4 rounded-lg bg-muted dark:bg-black/30 border border-border overflow-x-auto text-xs text-foreground max-h-96 overflow-y-auto",children:JSON.stringify(e,null,2)})})]})]})]})]})})}function X({approval:e}){let a=[];return a.push({label:"Approval Requested",date:new Date(e.created_at),completed:!0,current:!1,icon:H.FileText,description:`Requested by ${e.requested_by_profile?.display_name||"Unknown"}`}),e.assigned_to_profile&&a.push({label:"Assigned for Review",date:new Date(e.created_at),completed:!0,current:!1,icon:A.User,description:`Assigned to ${e.assigned_to_profile.display_name}`}),"pending"===e.status?a.push({label:"Under Review",date:null,completed:!1,current:!0,icon:c.Clock,description:e.sla_breach_at?`SLA deadline: ${(0,$.format)(new Date(e.sla_breach_at),"MMM dd, HH:mm")}`:"Awaiting decision"}):"approved"===e.status?a.push({label:"Approved",date:e.approved_at?new Date(e.approved_at):null,completed:!0,current:!e.resolved_at,icon:d.CheckCircle2,description:e.approved_by_profile?.display_name?`Approved by ${e.approved_by_profile.display_name}`:"Approval granted"}):"rejected"===e.status?(a.push({label:"Rejected",date:e.approved_at?new Date(e.approved_at):null,completed:!0,current:!e.resolved_at,icon:o.XCircle,description:e.approved_by_profile?.display_name?`Rejected by ${e.approved_by_profile.display_name}`:"Approval denied"}),e.rejection_reason&&a.push({label:"Rejection Reason",date:null,completed:!0,current:!1,icon:I.Info,description:e.rejection_reason})):"awaiting_info"===e.status?a.push({label:"Awaiting Information",date:e.updated_at?new Date(e.updated_at):null,completed:!1,current:!0,icon:m.AlertTriangle,description:"Additional information requested"}):"escalated"===e.status?a.push({label:"Escalated",date:e.updated_at?new Date(e.updated_at):null,completed:!0,current:!e.resolved_at,icon:m.AlertTriangle,description:"Escalated to higher authority"}):"cancelled"===e.status&&a.push({label:"Cancelled",date:e.updated_at?new Date(e.updated_at):null,completed:!0,current:!1,icon:o.XCircle,description:"Approval request cancelled"}),e.resolved_at&&a.push({label:"Workflow Completed",date:new Date(e.resolved_at),completed:!0,current:!1,icon:d.CheckCircle2,description:"Approval workflow finalized"}),(0,t.jsx)("div",{className:"space-y-4",children:a.map((e,s)=>{let r=e.icon;return(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:`rounded-full p-2 ${e.completed?"bg-emerald-500/20 text-emerald-400":e.current?"bg-amber-500/20 text-amber-400":"bg-muted text-muted-foreground"}`,children:(0,t.jsx)(r,{className:"h-4 w-4"})}),s<a.length-1&&(0,t.jsx)("div",{className:`w-0.5 h-12 ${e.completed?"bg-emerald-500/30":"bg-border"}`})]}),(0,t.jsxs)("div",{className:"flex-1 pb-8",children:[(0,t.jsx)("p",{className:`font-medium ${e.current?"text-amber-600 dark:text-amber-400":"text-foreground"}`,children:e.label}),e.date&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,$.format)(e.date,"MMM dd, yyyy HH:mm")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})]},s)})})}var J=e.i(725958),K=e.i(776158),G=e.i(110686),Y=e.i(410587);let W=(0,Y.default)("kanban",[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]]);function Q({currentView:e,onViewChange:a}){return(0,t.jsx)(D.Tabs,{value:e,onValueChange:e=>{a(e)},children:(0,t.jsxs)(D.TabsList,{className:"grid w-full grid-cols-4 max-w-md",children:[(0,t.jsxs)(D.TabsTrigger,{value:"table",className:"flex items-center gap-2",children:[(0,t.jsx)(K.Table,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Table"})]}),(0,t.jsxs)(D.TabsTrigger,{value:"kanban",className:"flex items-center gap-2",children:[(0,t.jsx)(W,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Kanban"})]}),(0,t.jsxs)(D.TabsTrigger,{value:"list",className:"flex items-center gap-2",children:[(0,t.jsx)(G.List,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"List"})]}),(0,t.jsxs)(D.TabsTrigger,{value:"database",className:"flex items-center gap-2",children:[(0,t.jsx)(J.LayoutGrid,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Grid"})]})]})})}var Z=e.i(196767);let ee=(0,Y.default)("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]]);var et=e.i(981218);let ea=[{id:"pending",title:"Pending Review",color:"border-amber-500",bgColor:"bg-amber-500/10"},{id:"approved",title:"Approved",color:"border-emerald-500",bgColor:"bg-emerald-500/10"},{id:"rejected",title:"Rejected",color:"border-rose-500",bgColor:"bg-rose-500/10"}],es=[{id:"critical",title:"Critical Priority",color:"border-red-500",bgColor:"bg-red-500/10"},{id:"high",title:"High Priority",color:"border-orange-500",bgColor:"bg-orange-500/10"},{id:"medium",title:"Medium Priority",color:"border-yellow-500",bgColor:"bg-yellow-500/10"},{id:"low",title:"Low Priority",color:"border-blue-500",bgColor:"bg-blue-500/10"}],er={low:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",medium:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300",high:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300",critical:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300"},el={pending:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300",approved:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",rejected:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300",cancelled:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300"};function ei({approvals:e,onApprovalClick:i}){let[n,d]=(0,a.useState)("status");return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between bg-muted/50 p-3 rounded-lg border border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(J.LayoutGrid,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Group by:"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(r.Button,{variant:"status"===n?"default":"outline",size:"sm",onClick:()=>d("status"),className:"status"===n?"bg-blue-600 hover:bg-blue-700":"",children:[(0,t.jsx)(ee,{className:"h-4 w-4 mr-2"}),"Status"]}),(0,t.jsxs)(r.Button,{variant:"priority"===n?"default":"outline",size:"sm",onClick:()=>d("priority"),className:"priority"===n?"bg-blue-600 hover:bg-blue-700":"",children:[(0,t.jsx)(ee,{className:"h-4 w-4 mr-2"}),"Priority"]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:("status"===n?ea:es).map(a=>{let r=e.filter(e=>"status"===n?e.status===a.id:e.priority===a.id);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:`border-l-4 ${a.color} pl-4 ${a.bgColor} py-3 rounded-r-lg`,children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:a.title}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[r.length," items"]})]}),(0,t.jsxs)("div",{className:"space-y-3 min-h-[200px]",children:[r.map(e=>(0,t.jsxs)(s.Card,{className:"cursor-pointer hover:bg-muted transition-all border-border hover:border-primary/30 hover:shadow-lg",onClick:()=>i(e),children:[(0,t.jsx)(s.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"space-y-1.5 flex-1 min-w-0",children:[(0,t.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:e.entity_type.replace(/_/g," ")}),(0,t.jsx)("p",{className:"font-semibold text-sm truncate text-foreground",children:"member_invitation"===e.entity_type?e.entity_metadata?.email||"Unknown":e.related_deal?.name||e.related_investor?.legal_name||"Unknown"})]}),"status"===n?(0,t.jsx)(l.Badge,{className:er[e.priority],children:e.priority}):(0,t.jsx)(l.Badge,{className:el[e.status],children:e.status})]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-2.5",children:[e.sla_breach_at&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)(c.Clock,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:["Due ",(0,$.format)(new Date(e.sla_breach_at),"MMM dd, HH:mm")]})]}),e.entity_metadata?.indicative_amount&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs font-semibold text-emerald-400",children:[(0,t.jsx)(Z.DollarSign,{className:"h-3 w-3"}),e.entity_metadata.indicative_currency||"USD"," ",e.entity_metadata.indicative_amount.toLocaleString()]}),e.assigned_to_profile&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:["Assigned: ",e.assigned_to_profile.display_name]}),"member_invitation"===e.entity_type&&e.entity_metadata&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.entity_metadata.entity_name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{className:"capitalize",children:e.entity_metadata.role||"Member"}),e.entity_metadata.is_signatory&&(0,t.jsxs)(l.Badge,{className:"text-[10px] bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 px-1 py-0",children:[(0,t.jsx)(et.Shield,{className:"h-2.5 w-2.5 mr-0.5"}),"Signatory"]})]})]}),"member_invitation"!==e.entity_type&&e.related_investor&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.related_investor.legal_name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,$.format)(new Date(e.created_at),"MMM dd, HH:mm")})]})]},e.id)),0===r.length&&(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground text-sm border-2 border-dashed border-border rounded-lg",children:["No ",a.title.toLowerCase()]})]})]},a.id)})})]})}var en=e.i(773510),ed=e.i(335994);let eo={low:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",medium:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300",high:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300",critical:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300"},ec={pending:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300",approved:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",rejected:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300",awaiting_info:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",escalated:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300",cancelled:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300"};function em({approvals:e,onApprovalClick:a,onApprove:i,onReject:n}){return(0,t.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,t.jsx)(s.Card,{className:"cursor-pointer hover:bg-muted transition-all border-border hover:border-primary/30",onClick:()=>a(e),children:(0,t.jsx)(s.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(l.Badge,{variant:"outline",children:e.entity_type.replace(/_/g," ").toUpperCase()}),(0,t.jsx)(l.Badge,{className:eo[e.priority],children:e.priority.toUpperCase()}),(0,t.jsx)(l.Badge,{className:ec[e.status],children:e.status.replace(/_/g," ").toUpperCase()})]}),(0,t.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:"member_invitation"===e.entity_type?`Member Invitation: ${e.entity_metadata?.email||"Unknown"}`:e.related_deal?.name||e.related_investor?.legal_name||"Approval Request"}),"member_invitation"===e.entity_type&&e.entity_metadata&&(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(en.Mail,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:e.entity_metadata.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(M.Building2,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:e.entity_metadata.entity_name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(ed.UserPlus,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate capitalize",children:e.entity_metadata.role||"Member"})]}),e.entity_metadata.is_signatory&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-amber-400 font-medium",children:[(0,t.jsx)(et.Shield,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsx)("span",{children:"Signatory"})]}),e.sla_breach_at&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(c.Clock,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsxs)("span",{children:["Due ",(0,$.format)(new Date(e.sla_breach_at),"MMM dd, HH:mm")]})]})]}),"member_invitation"!==e.entity_type&&(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.related_investor&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(A.User,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:e.related_investor.legal_name})]}),e.related_deal&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(M.Building2,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate capitalize",children:e.related_deal.deal_type||"Deal"})]}),e.sla_breach_at&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(c.Clock,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsxs)("span",{children:["Due ",(0,$.format)(new Date(e.sla_breach_at),"MMM dd, HH:mm")]})]}),e.entity_metadata?.indicative_amount&&(0,t.jsxs)("div",{className:"flex items-center gap-2 font-semibold text-emerald-400",children:[(0,t.jsx)(Z.DollarSign,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsxs)("span",{children:[e.entity_metadata.indicative_currency||"USD"," ",e.entity_metadata.indicative_amount.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Requested by ",e.requested_by_profile?.display_name||"Unknown"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:["Assigned to ",e.assigned_to_profile?.display_name||"Unassigned"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:(0,$.format)(new Date(e.created_at),"MMM dd, yyyy")})]})]}),"pending"===e.status&&(i||n)&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",onClick:e=>e.stopPropagation(),children:[i&&(0,t.jsxs)(r.Button,{size:"sm",onClick:t=>{t.stopPropagation(),i(e.id)},className:"bg-emerald-600 hover:bg-emerald-700 min-w-[100px]",children:[(0,t.jsx)(d.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Approve"]}),n&&(0,t.jsxs)(r.Button,{size:"sm",variant:"destructive",onClick:t=>{t.stopPropagation();let a=prompt("Please provide a rejection reason:");a&&n(e.id,a)},className:"min-w-[100px]",children:[(0,t.jsx)(o.XCircle,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})})},e.id)),0===e.length&&(0,t.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No approvals found"})]})}var ex=e.i(191569),eu=e.i(750809),ep=e.i(837221),eh=e.i(432598),eg=e.i(185419),ej=e.i(398739),eb=e.i(478416);let ey={low:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",medium:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300",high:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300",critical:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300"},e_={pending:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300",approved:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",rejected:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300",awaiting_info:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",escalated:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300",cancelled:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300"},ef={critical:0,high:1,medium:2,low:3};function ev({approvals:e,onApprovalClick:n}){let[d,o]=(0,a.useState)(""),[c,m]=(0,a.useState)("all"),[x,u]=(0,a.useState)("all"),[p,h]=(0,a.useState)("all"),[g,j]=(0,a.useState)("all"),[b,_]=(0,a.useState)("created_at"),[f,v]=(0,a.useState)("desc"),[N,C]=(0,a.useState)({entity_type:!0,deal_investor:!0,amount:!0,priority:!0,status:!0,sla:!0,assigned_to:!0,requested_by:!0,created_at:!0}),k=(0,a.useMemo)(()=>{let t=e;if(d.trim()){let e=d.toLowerCase();t=t.filter(t=>t.entity_type.toLowerCase().includes(e)||t.related_deal?.name?.toLowerCase().includes(e)||t.related_investor?.legal_name?.toLowerCase().includes(e)||t.requested_by_profile?.display_name?.toLowerCase().includes(e)||t.assigned_to_profile?.display_name?.toLowerCase().includes(e)||t.id.toLowerCase().includes(e)||"member_invitation"===t.entity_type&&(t.entity_metadata?.email?.toLowerCase().includes(e)||t.entity_metadata?.entity_name?.toLowerCase().includes(e)||t.entity_metadata?.role?.toLowerCase().includes(e)))}if("all"!==c&&(t=t.filter(e=>e.status===c)),"all"!==x&&(t=t.filter(e=>e.priority===x)),"all"!==p&&(t=t.filter(e=>e.entity_type===p)),"all"!==g){let e=new Date;t=t.filter(t=>{if(!t.sla_breach_at)return"no_sla"===g;let a=new Date(t.sla_breach_at);if("overdue"===g)return a<e;if("due_soon"===g){let t=(a.getTime()-e.getTime())/36e5;return t>0&&t<4}return"on_track"!==g||(a.getTime()-e.getTime())/36e5>=4})}return t.sort((e,t)=>{let a,s;switch(b){case"created_at":a=new Date(e.created_at).getTime(),s=new Date(t.created_at).getTime();break;case"priority":a=ef[e.priority],s=ef[t.priority];break;case"sla_breach_at":a=e.sla_breach_at?new Date(e.sla_breach_at).getTime():1/0,s=t.sla_breach_at?new Date(t.sla_breach_at).getTime():1/0;break;case"entity_type":a=e.entity_type,s=t.entity_type;break;case"status":a=e.status,s=t.status;break;default:return 0}return a<s?"asc"===f?-1:1:a>s?"asc"===f?1:-1:0}),t},[e,d,c,x,p,g,b,f]),S=(0,a.useMemo)(()=>Array.from(new Set(e.map(e=>e.entity_type))),[e]),T=e=>{b===e?v("asc"===f?"desc":"asc"):(_(e),v("asc"))},D=()=>{o(""),m("all"),u("all"),h("all"),j("all")},A=d||"all"!==c||"all"!==x||"all"!==p||"all"!==g,M=({field:e})=>b!==e?(0,t.jsx)(eg.ArrowUpDown,{className:"h-3 w-3 ml-1 opacity-50"}):"asc"===f?(0,t.jsx)(ej.ArrowUp,{className:"h-3 w-3 ml-1"}):(0,t.jsx)(eb.ArrowDown,{className:"h-3 w-3 ml-1"});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(s.Card,{className:"border-border bg-muted/50",children:(0,t.jsx)(s.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(eu.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(ex.Input,{placeholder:"Search by deal name, investor, ID, assigned to...",value:d,onChange:e=>o(e.target.value),className:"pl-10 bg-background border-input text-foreground placeholder:text-muted-foreground"})]}),A&&(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:D,className:"shrink-0",children:[(0,t.jsx)(eh.X,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(w.Filter,{className:"h-3 w-3"}),"Status"]}),(0,t.jsxs)(y.Select,{value:c,onValueChange:m,children:[(0,t.jsx)(y.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,t.jsx)(y.SelectValue,{})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"all",children:"All Statuses"}),(0,t.jsx)(y.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(y.SelectItem,{value:"approved",children:"Approved"}),(0,t.jsx)(y.SelectItem,{value:"rejected",children:"Rejected"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(w.Filter,{className:"h-3 w-3"}),"Priority"]}),(0,t.jsxs)(y.Select,{value:x,onValueChange:u,children:[(0,t.jsx)(y.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,t.jsx)(y.SelectValue,{})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"all",children:"All Priorities"}),(0,t.jsx)(y.SelectItem,{value:"critical",children:"Critical"}),(0,t.jsx)(y.SelectItem,{value:"high",children:"High"}),(0,t.jsx)(y.SelectItem,{value:"medium",children:"Medium"}),(0,t.jsx)(y.SelectItem,{value:"low",children:"Low"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(w.Filter,{className:"h-3 w-3"}),"Entity Type"]}),(0,t.jsxs)(y.Select,{value:p,onValueChange:h,children:[(0,t.jsx)(y.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,t.jsx)(y.SelectValue,{})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"all",children:"All Types"}),S.map(e=>(0,t.jsx)(y.SelectItem,{value:e,children:e.replace(/_/g," ")},e))]})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(w.Filter,{className:"h-3 w-3"}),"SLA Status"]}),(0,t.jsxs)(y.Select,{value:g,onValueChange:j,children:[(0,t.jsx)(y.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,t.jsx)(y.SelectValue,{})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"all",children:"All SLA"}),(0,t.jsx)(y.SelectItem,{value:"overdue",children:"Overdue"}),(0,t.jsx)(y.SelectItem,{value:"due_soon",children:"Due Soon (<4h)"}),(0,t.jsx)(y.SelectItem,{value:"on_track",children:"On Track"}),(0,t.jsx)(y.SelectItem,{value:"no_sla",children:"No SLA"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(ep.SlidersHorizontal,{className:"h-3 w-3"}),"Sort By"]}),(0,t.jsxs)(y.Select,{value:b,onValueChange:e=>_(e),children:[(0,t.jsx)(y.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,t.jsx)(y.SelectValue,{})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"created_at",children:"Created Date"}),(0,t.jsx)(y.SelectItem,{value:"priority",children:"Priority"}),(0,t.jsx)(y.SelectItem,{value:"sla_breach_at",children:"SLA Deadline"}),(0,t.jsx)(y.SelectItem,{value:"entity_type",children:"Entity Type"}),(0,t.jsx)(y.SelectItem,{value:"status",children:"Status"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",(0,t.jsx)("span",{className:"font-semibold text-foreground",children:k.length})," of"," ",(0,t.jsx)("span",{className:"font-semibold text-foreground",children:e.length})," approvals"]}),A&&(0,t.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"Filters Active"})]})]})})}),(0,t.jsx)(s.Card,{className:"border-border bg-muted/50",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(i.TableHeader,{children:(0,t.jsxs)(i.TableRow,{className:"border-border hover:bg-white/5",children:[N.entity_type&&(0,t.jsx)(i.TableHead,{children:(0,t.jsxs)("button",{onClick:()=>T("entity_type"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["Type",(0,t.jsx)(M,{field:"entity_type"})]})}),N.deal_investor&&(0,t.jsx)(i.TableHead,{className:"text-muted-foreground font-semibold",children:"Deal / Investor"}),N.amount&&(0,t.jsx)(i.TableHead,{className:"text-muted-foreground font-semibold",children:"Amount"}),N.priority&&(0,t.jsx)(i.TableHead,{children:(0,t.jsxs)("button",{onClick:()=>T("priority"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["Priority",(0,t.jsx)(M,{field:"priority"})]})}),N.status&&(0,t.jsx)(i.TableHead,{children:(0,t.jsxs)("button",{onClick:()=>T("status"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["Status",(0,t.jsx)(M,{field:"status"})]})}),N.sla&&(0,t.jsx)(i.TableHead,{children:(0,t.jsxs)("button",{onClick:()=>T("sla_breach_at"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["SLA Deadline",(0,t.jsx)(M,{field:"sla_breach_at"})]})}),N.assigned_to&&(0,t.jsx)(i.TableHead,{className:"text-muted-foreground font-semibold",children:"Assigned To"}),N.requested_by&&(0,t.jsx)(i.TableHead,{className:"text-muted-foreground font-semibold",children:"Requested By"}),N.created_at&&(0,t.jsx)(i.TableHead,{children:(0,t.jsxs)("button",{onClick:()=>T("created_at"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["Created",(0,t.jsx)(M,{field:"created_at"})]})})]})}),(0,t.jsx)(i.TableBody,{children:k.length>0?k.map(e=>{let a=e.sla_breach_at?new Date(e.sla_breach_at):null,s=a&&a<new Date;return(0,t.jsxs)(i.TableRow,{className:"border-border cursor-pointer hover:bg-muted transition-colors",onClick:()=>n(e),children:[N.entity_type&&(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:e.entity_type.replace(/_/g," ")})}),N.deal_investor&&(0,t.jsx)(i.TableCell,{children:(0,t.jsx)("div",{className:"space-y-1",children:"member_invitation"===e.entity_type&&e.entity_metadata?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"font-medium text-foreground text-sm",children:e.entity_metadata.email}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.entity_metadata.entity_name," • ",e.entity_metadata.role||"Member",e.entity_metadata.is_signatory&&" • Signatory"]})]}):(0,t.jsxs)(t.Fragment,{children:[e.related_deal&&(0,t.jsx)("p",{className:"font-medium text-foreground text-sm",children:e.related_deal.name}),e.related_investor&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.related_investor.legal_name}),!e.related_deal&&!e.related_investor&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground font-mono",children:[e.entity_id.substring(0,12),"..."]})]})})}),N.amount&&(0,t.jsx)(i.TableCell,{children:e.entity_metadata?.indicative_amount?(0,t.jsxs)("p",{className:"text-sm font-semibold text-emerald-400",children:[e.entity_metadata.indicative_currency||"USD"," ",e.entity_metadata.indicative_amount.toLocaleString()]}):(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"—"})}),N.priority&&(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(l.Badge,{className:ey[e.priority],children:e.priority.toUpperCase()})}),N.status&&(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(l.Badge,{className:e_[e.status],children:e.status.replace("_"," ").toUpperCase()})}),N.sla&&(0,t.jsx)(i.TableCell,{children:a?(0,t.jsxs)("div",{className:s?"text-red-400 font-semibold":"text-muted-foreground",children:[(0,t.jsx)("p",{className:"text-xs",children:(0,$.format)(a,"MMM dd, HH:mm")}),s&&(0,t.jsx)("p",{className:"text-xs text-red-400",children:"Overdue"})]}):(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"No SLA"})}),N.assigned_to&&(0,t.jsx)(i.TableCell,{children:(0,t.jsx)("p",{className:"text-sm text-foreground",children:e.assigned_to_profile?.display_name||(0,t.jsx)("span",{className:"text-muted-foreground",children:"Unassigned"})})}),N.requested_by&&(0,t.jsx)(i.TableCell,{children:(0,t.jsx)("p",{className:"text-sm text-foreground",children:e.requested_by_profile?.display_name||"Unknown"})}),N.created_at&&(0,t.jsxs)(i.TableCell,{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,$.format)(new Date(e.created_at),"MMM dd, yyyy")}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,$.format)(new Date(e.created_at),"HH:mm")})]})]},e.id)}):(0,t.jsx)(i.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:9,className:"text-center py-12",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"No approvals match your filters"}),A&&(0,t.jsx)(r.Button,{variant:"outline",size:"sm",onClick:D,children:"Clear all filters"})]})})})})]})})})]})}function eN({initialApprovals:e,initialStats:g,initialCounts:j}){let[b,y]=(0,a.useState)(e),[f,N]=(0,a.useState)(g),[w,k]=(0,a.useState)(j),[S,T]=(0,a.useState)(!1),[D,A]=(0,a.useState)(!0),[M,R]=(0,a.useState)({entity_types:[],priorities:[],assigned_to_me:!1,overdue_only:!1}),[H,B]=(0,a.useState)({page:1,limit:50,total:e?.length||0}),[L,I]=(0,a.useState)(new Set),[P,$]=(0,a.useState)(!1),[F,U]=(0,a.useState)(!1),[q,O]=(0,a.useState)(null),[E,z]=(0,a.useState)(null),[X,J]=(0,a.useState)(!1),[K,G]=(0,a.useState)(null),[Y,W]=(0,a.useState)("table"),Z=(0,a.useMemo)(()=>"kanban"===Y?b:b.filter(e=>"pending"===e.status),[b,Y]);(0,a.useEffect)(()=>{let e=localStorage.getItem("approvals-view-preference");e&&["table","kanban","list","database"].includes(e)&&W(e)},[]),(0,a.useEffect)(()=>{localStorage.setItem("approvals-view-preference",Y)},[Y]),(0,a.useEffect)(()=>{B(e=>({...e,page:1}))},[Y]);let ee=(0,a.useCallback)(async()=>{T(!0);try{let e=new URLSearchParams;e.append("status","pending,approved,rejected");let t=new Date;t.setDate(t.getDate()-30),e.append("decided_after",t.toISOString());let a="kanban"===Y?500:H.limit;e.append("limit",a.toString()),"kanban"!==Y&&e.append("offset",((H.page-1)*H.limit).toString()),M.entity_types.length>0&&e.append("entity_types",M.entity_types.join(",")),M.priorities.length>0&&e.append("priorities",M.priorities.join(",")),M.assigned_to_me&&e.append("assigned_to","me"),M.overdue_only&&e.append("overdue_only","true");let s=await fetch(`/api/approvals?${e.toString()}`,{credentials:"include"});if(!s.ok)throw Error("Failed to fetch approvals");let r=await s.json();y(r.approvals||[]),N(r.stats||g),k(r.counts||j),B(e=>({...e,total:r.total||0}))}catch(e){console.error("Error refreshing approvals:",e),_.toast.error("Failed to refresh approvals data")}finally{T(!1)}},[M,H.page,H.limit,g,j,Y]),et=e=>{G(e),J(!0)},ea=async e=>{try{if(!(await fetch(`/api/approvals/${e}/action`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:"approve"})})).ok)throw Error("Approval failed");_.toast.success("Approval approved successfully"),await ee()}catch(e){throw console.error("Error approving:",e),_.toast.error("Failed to approve"),e}},es=async(e,t)=>{try{if(!(await fetch(`/api/approvals/${e}/action`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:"reject",rejection_reason:t})})).ok)throw Error("Rejection failed");_.toast.success("Approval rejected"),await ee()}catch(e){throw console.error("Error rejecting:",e),_.toast.error("Failed to reject"),e}};(0,a.useEffect)(()=>{D?A(!1):ee()},[M.entity_types,M.priorities,M.assigned_to_me,M.overdue_only,H.page]);let er=async e=>{if(0===L.size)return void _.toast.error("No approvals selected");$(!0);try{let t=await fetch("/api/approvals/bulk-action",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({approval_ids:Array.from(L),action:e,rejection_reason:"reject"===e?"Bulk rejection":void 0})});if(!t.ok)throw Error(`Bulk ${e} failed`);let a=await t.json();a.successful_count>0&&_.toast.success(`${a.successful_count} approval${a.successful_count>1?"s":""} ${e}d successfully`),a.failed_count>0&&_.toast.error(`${a.failed_count} approval${a.failed_count>1?"s":""} failed`),I(new Set),ee()}catch(t){console.error(`Bulk ${e} error:`,t),_.toast.error(`Failed to ${e} selected approvals`)}finally{$(!1)}},el=async()=>{0===f.overdue_count?_.toast.info("No overdue items"):(R({entity_types:[],priorities:[],assigned_to_me:!1,overdue_only:!0}),B(e=>({...e,page:1})))},en=async()=>{R({entity_types:[],priorities:["low"],assigned_to_me:!1,overdue_only:!1}),B(e=>({...e,page:1}))},ed=async()=>{R({entity_types:[],priorities:["critical","high"],assigned_to_me:!1,overdue_only:!1}),B(e=>({...e,page:1}))},eo=async()=>{R({entity_types:["deal_interest"],priorities:[],assigned_to_me:!1,overdue_only:!1}),B(e=>({...e,page:1}))},ec=async()=>{R({entity_types:["deal_subscription"],priorities:[],assigned_to_me:!1,overdue_only:!1}),B(e=>({...e,page:1}))},ex=async()=>{R({entity_types:[],priorities:[],assigned_to_me:!1,overdue_only:!1}),B(e=>({...e,page:1})),I(new Set)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Pending Approvals"}),(0,t.jsx)(c.Clock,{className:"h-4 w-4 text-blue-600"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:f.total_pending}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Requiring review"})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"SLA Breaches"}),(0,t.jsx)(m.AlertTriangle,{className:"h-4 w-4 text-red-600"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:f.overdue_count}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Past deadline"})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Avg Processing Time"}),(0,t.jsx)(d.CheckCircle2,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[f.avg_processing_time_hours.toFixed(1),"h"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Last 30 days"})]})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s.CardTitle,{children:"Pending Approvals"}),(0,t.jsx)(s.CardDescription,{children:"Review deal approvals across commitments, interests, and data-room workflows"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(C,{onFilterChange:R,currentFilters:M}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{try{if(!Z||0===Z.length)return void _.toast.error("No data to export");let e=new Date().toISOString().split("T")[0],t=`approvals-export-${e}.csv`;!function(e,t="approvals-export.csv"){if(!e||0===e.length)throw Error("No data to export");let a=e.map(e=>{let t=e.entity_metadata?.requested_amount||e.entity_metadata?.amount||"",a=e.entity_metadata?.requested_units||"";return[e.id,e.entity_type,e.status,e.priority,e.requested_by_profile?.display_name||"",e.assigned_to_profile?.display_name||"",e.related_investor?.legal_name||"",e.related_deal?.name||"",t,a,e.sla_breach_at?new Date(e.sla_breach_at).toLocaleString():"",new Date(e.created_at).toLocaleString(),e.approved_by_profile?.display_name||"",e.approved_at?new Date(e.approved_at).toLocaleString():"",e.rejection_reason||"",e.notes||""].map(e=>{let t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?`"${t.replace(/"/g,'""')}"`:t})}),s=new Blob([["ID,Request Type,Status,Priority,Requested By,Assigned To,Investor,Deal,Amount,Units,SLA Breach At,Created At,Approved By,Approved At,Rejection Reason,Notes",...a.map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),l=URL.createObjectURL(s);r.setAttribute("href",l),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(Z,t),_.toast.success(`Exported ${Z.length} approvals to CSV`)}catch(e){console.error("Export error:",e),_.toast.error("Failed to export data")}},disabled:!Z||0===Z.length,children:[(0,t.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>ee(),disabled:S,children:[(0,t.jsx)(x.RefreshCw,{className:`h-4 w-4 mr-2 ${S?"animate-spin":""}`}),"Refresh"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"View:"}),(0,t.jsx)(Q,{currentView:Y,onViewChange:W})]}),(0,t.jsxs)(l.Badge,{variant:"secondary",className:"text-sm",children:[Z.length," approval",1!==Z.length?"s":""]})]})]})}),(0,t.jsxs)(s.CardContent,{children:["table"===Y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(i.TableHeader,{children:(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(i.TableHead,{className:"w-12",children:(0,t.jsx)(n.Checkbox,{checked:L.size===Z.length&&Z.length>0,onCheckedChange:()=>{L.size===Z.length&&Z.length>0?I(new Set):I(new Set(Z.map(e=>e.id)))},"aria-label":"Select all"})}),(0,t.jsx)(i.TableHead,{children:"Request Type / User"}),(0,t.jsx)(i.TableHead,{children:"Entity"}),(0,t.jsx)(i.TableHead,{children:"Priority"}),(0,t.jsx)(i.TableHead,{children:"SLA Status"}),(0,t.jsx)(i.TableHead,{children:"Assigned To"}),(0,t.jsx)(i.TableHead,{children:"Actions"})]})}),(0,t.jsx)(i.TableBody,{children:Z&&Z.length>0?Z.map(e=>{let a=function(e){if(!e)return{text:"No SLA",isOverdue:!1,urgency:"low"};let t=new Date,a=Math.floor((new Date(e).getTime()-t.getTime())/36e5);return a<0?{text:`${Math.abs(a)}h overdue`,isOverdue:!0,urgency:"high",hoursRemaining:a}:a<4?{text:`${a}h remaining`,isOverdue:!1,urgency:"high",hoursRemaining:a}:a<12?{text:`${a}h remaining`,isOverdue:!1,urgency:"medium",hoursRemaining:a}:{text:`${a}h remaining`,isOverdue:!1,urgency:"low",hoursRemaining:a}}(e.sla_breach_at);return(0,t.jsxs)(i.TableRow,{className:`cursor-pointer hover:bg-white/5 transition-colors ${L.has(e.id)?"bg-muted/50":""}`,onClick:()=>et(e),children:[(0,t.jsx)(i.TableCell,{className:"w-12",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(n.Checkbox,{checked:L.has(e.id),onCheckedChange:()=>{var t;return t=e.id,void I(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a})},"aria-label":`Select approval ${e.id}`})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-foreground",children:e.entity_type.replace(/_/g," ").toUpperCase()}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.requested_by_profile?.display_name||"Unknown User"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)("div",{children:[e.related_investor&&(0,t.jsx)("div",{className:"font-medium text-foreground",children:e.related_investor.legal_name}),e.related_deal&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.related_deal.name}),!e.related_investor&&!e.related_deal&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground font-mono",children:[e.entity_id.substring(0,8),"..."]}),(()=>{if("deal_subscription"===e.entity_type){let a=e.entity_metadata?.derived_amount;if(a){let s=e.entity_metadata?.payload?.currency||"USD",r=parseFloat(a);if(!Number.isNaN(r))return(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[s," ",r.toLocaleString()]})}}let a=e.entity_metadata?.indicative_amount,s=e.entity_metadata?.requested_amount||e.entity_metadata?.amount,r=e.entity_metadata?.indicative_currency||"",l=null;if(a){let e=parseFloat(a);Number.isNaN(e)||(l=`${r} ${e.toLocaleString()}`.trim())}else if(s){let e=parseFloat(s);Number.isNaN(e)||(l=`$${e.toLocaleString()}`)}return l?(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:l}):null})()]})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"critical"===e.priority||"high"===e.priority?"destructive":"secondary",children:e.priority.toUpperCase()})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(l.Badge,{variant:a.isOverdue||"high"===a.urgency?"destructive":"medium"===a.urgency?"default":"secondary",children:a.text})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.assigned_to_profile?.display_name||"Unassigned"})}),(0,t.jsx)(i.TableCell,{onClick:e=>e.stopPropagation(),children:"pending"===e.status?(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{O(e),z("approve"),U(!0)},className:"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-950",children:(0,t.jsx)(d.CheckCircle2,{className:"h-4 w-4"})}),(0,t.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{O(e),z("reject"),U(!0)},className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",children:(0,t.jsx)(o.XCircle,{className:"h-4 w-4"})})]}):(0,t.jsx)(l.Badge,{variant:"secondary",className:"text-xs",children:e.status})})]},e.id)}):(0,t.jsx)(i.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:S?"Loading approvals...":"No pending approvals found"})})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",Z.length>0?(H.page-1)*H.limit+1:0,"-",Math.min(H.page*H.limit,Math.max(H.total,Z.length))," of ",Math.max(H.total,Z.length)," approvals"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{variant:"outline",size:"sm",disabled:1===H.page||S,onClick:()=>B(e=>({...e,page:e.page-1})),children:"Previous"}),(0,t.jsxs)("span",{className:"inline-flex items-center px-3 text-sm text-muted-foreground",children:["Page ",H.page," of ",Math.ceil(H.total/H.limit)||1]}),(0,t.jsx)(r.Button,{variant:"outline",size:"sm",disabled:H.page>=Math.ceil(H.total/H.limit)||S,onClick:()=>B(e=>({...e,page:e.page+1})),children:"Next"})]})]})]}),"kanban"===Y&&(0,t.jsx)(ei,{approvals:Z,onApprovalClick:et}),"list"===Y&&(0,t.jsx)(em,{approvals:Z,onApprovalClick:et,onApprove:ea,onReject:es}),"database"===Y&&(0,t.jsx)(ev,{approvals:Z,onApprovalClick:et})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"Quick Actions"})}),(0,t.jsxs)(s.CardContent,{className:"space-y-3",children:[(0,t.jsxs)(r.Button,{className:"w-full justify-start",variant:"outline",onClick:el,disabled:0===f.overdue_count,children:[(0,t.jsx)(c.Clock,{className:"mr-2 h-4 w-4 text-red-600"}),"Review Overdue (",f.overdue_count,")"]}),(0,t.jsxs)(r.Button,{className:"w-full justify-start",variant:"outline",onClick:en,disabled:0===b.length,children:[(0,t.jsx)(d.CheckCircle2,{className:"mr-2 h-4 w-4 text-green-600"}),"Show Low Priority"]}),(0,t.jsxs)(r.Button,{className:"w-full justify-start",variant:"outline",onClick:ed,disabled:0===b.length,children:[(0,t.jsx)(m.AlertTriangle,{className:"mr-2 h-4 w-4 text-amber-600"}),"Review High Priority"]}),(0,t.jsxs)(r.Button,{className:"w-full justify-start",variant:"outline",onClick:eo,children:[(0,t.jsx)(p.HandCoins,{className:"mr-2 h-4 w-4 text-purple-600"}),"Deal Interest Approvals"]}),(0,t.jsxs)(r.Button,{className:"w-full justify-start",variant:"outline",onClick:ec,children:[(0,t.jsx)(h.Package,{className:"mr-2 h-4 w-4 text-sky-600"}),"Subscription Approvals"]}),(0,t.jsxs)(r.Button,{className:"w-full justify-start",variant:"outline",onClick:ex,disabled:0===M.entity_types.length&&0===M.priorities.length&&!M.assigned_to_me&&!M.overdue_only,children:[(0,t.jsx)(o.XCircle,{className:"mr-2 h-4 w-4 text-muted-foreground"}),"Clear All Filters"]})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"SLA Performance"})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"On-time approvals (24h)"}),(0,t.jsxs)("span",{className:"font-medium text-green-600",children:[f.approval_rate_24h.toFixed(0),"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"Overdue items"}),(0,t.jsx)("span",{className:"font-medium text-red-600",children:f.overdue_count})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"Average processing"}),(0,t.jsxs)("span",{className:"font-medium",children:[f.avg_processing_time_hours.toFixed(1),"h"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"Approved (30d)"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:f.total_approved_30d})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm",children:"Rejected (30d)"}),(0,t.jsx)("span",{className:"font-medium text-red-600",children:f.total_rejected_30d})]})]})})]})]})]}),L.size>0&&(0,t.jsx)("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white dark:bg-gray-800 shadow-xl rounded-lg p-4 border-2 border-blue-500 z-50 animate-in slide-in-from-bottom duration-300",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"font-medium text-sm",children:[L.size," approval",L.size>1?"s":""," selected"]}),(0,t.jsxs)(r.Button,{size:"sm",onClick:()=>er("approve"),disabled:P,className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,t.jsx)(d.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Approve All"]}),(0,t.jsxs)(r.Button,{size:"sm",variant:"destructive",onClick:()=>er("reject"),disabled:P,children:[(0,t.jsx)(o.XCircle,{className:"mr-2 h-4 w-4"}),"Reject All"]}),(0,t.jsx)(r.Button,{size:"sm",variant:"outline",onClick:()=>I(new Set),disabled:P,children:"Clear"})]})}),(0,t.jsx)(v,{approval:q,action:E,open:F,onOpenChange:U,onSuccess:()=>{I(new Set),ee()}}),(0,t.jsx)(V,{approval:K,open:X,onOpenChange:J,onApprove:ea,onReject:es})]})}e.s(["ApprovalsPageClient",()=>eN],186872)}]);