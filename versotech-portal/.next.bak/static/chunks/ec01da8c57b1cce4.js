(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,788379,e=>{"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let a=t.fetch,r=t.fetch.bind(t),s=t.Headers,n=t.Request,i=t.Response;e.s(["Headers",0,s,"Request",0,n,"Response",0,i,"default",0,r,"fetch",0,a])},432598,e=>{"use strict";var t=e.i(450935);e.s(["X",()=>t.default])},335994,e=>{"use strict";let t=(0,e.i(410587).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],335994)},201495,e=>{"use strict";let t=(0,e.i(410587).default)("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);e.s(["Scale",()=>t],201495)},14467,e=>{"use strict";var t=e.i(340915),a=e.i(679472),r=e.i(47264),s=e.i(68977),n=e.i(990290),i=e.i(886978),l=e.i(362208),o=e.i(873358),c=e.i(798827),d=e.i(722679),h="Collapsible",[m,u]=(0,r.createContextScope)(h),[x,g]=m(h),f=t.forwardRef((e,a)=>{let{__scopeCollapsible:r,open:n,defaultOpen:i,disabled:o,onOpenChange:m,...u}=e,[g,f]=(0,s.useControllableState)({prop:n,defaultProp:i??!1,onChange:m,caller:h});return(0,d.jsx)(x,{scope:r,disabled:o,contentId:(0,c.useId)(),open:g,onOpenToggle:t.useCallback(()=>f(e=>!e),[f]),children:(0,d.jsx)(l.Primitive.div,{"data-state":_(g),"data-disabled":o?"":void 0,...u,ref:a})})});f.displayName=h;var p="CollapsibleTrigger",b=t.forwardRef((e,t)=>{let{__scopeCollapsible:r,...s}=e,n=g(p,r);return(0,d.jsx)(l.Primitive.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":_(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...s,ref:t,onClick:(0,a.composeEventHandlers)(e.onClick,n.onOpenToggle)})});b.displayName=p;var v="CollapsibleContent",y=t.forwardRef((e,t)=>{let{forceMount:a,...r}=e,s=g(v,e.__scopeCollapsible);return(0,d.jsx)(o.Presence,{present:a||s.open,children:({present:e})=>(0,d.jsx)(w,{...r,ref:t,present:e})})});y.displayName=v;var w=t.forwardRef((e,a)=>{let{__scopeCollapsible:r,present:s,children:o,...c}=e,h=g(v,r),[m,u]=t.useState(s),x=t.useRef(null),f=(0,i.useComposedRefs)(a,x),p=t.useRef(0),b=p.current,y=t.useRef(0),w=y.current,j=h.open||m,N=t.useRef(j),k=t.useRef(void 0);return t.useEffect(()=>{let e=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,n.useLayoutEffect)(()=>{let e=x.current;if(e){k.current=k.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();p.current=t.height,y.current=t.width,N.current||(e.style.transitionDuration=k.current.transitionDuration,e.style.animationName=k.current.animationName),u(s)}},[h.open,s]),(0,d.jsx)(l.Primitive.div,{"data-state":_(h.open),"data-disabled":h.disabled?"":void 0,id:h.contentId,hidden:!j,...c,ref:f,style:{"--radix-collapsible-content-height":b?`${b}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:j&&o})});function _(e){return e?"open":"closed"}e.s(["CollapsibleContent",()=>y,"CollapsibleTrigger",()=>b,"Content",()=>y,"Root",()=>f,"Trigger",()=>b,"createCollapsibleScope",()=>u])},799359,e=>{"use strict";var t=e.i(14467);let a=t.Root,r=t.CollapsibleTrigger,s=t.CollapsibleContent;e.s(["Collapsible",()=>a,"CollapsibleContent",()=>s,"CollapsibleTrigger",()=>r])},550418,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(603274),s=e.i(59178);let n=(0,a.createContext)(void 0),i="verso_active_persona",l="verso_active_persona_type";function o(e){document.cookie=`${l}=${e}; path=/; max-age=31536000; SameSite=Lax`}function c({children:e,initialPersonas:c=[]}){let d=(0,r.useRouter)(),[h,m]=(0,a.useState)(c),[u,x]=(0,a.useState)(null),[g,f]=(0,a.useState)(!c.length),[p,b]=(0,a.useState)(null),v=(0,a.useCallback)(async()=>{f(!0),b(null);try{let e=(0,s.createClient)(),{data:{user:t}}=await e.auth.getUser();if(!t){m([]),x(null);return}let{data:a,error:r}=await e.rpc("get_user_personas",{p_user_id:t.id});if(r){console.error("[persona-context] Error fetching personas:",r),b(r.message);return}let n=a||[];m(n);let c=localStorage.getItem(i),d=null;if(c&&(d=n.find(e=>e.entity_id===c)||null),!d){let e={ceo:1,staff:2,arranger:3,introducer:4,partner:5,commercial_partner:6,lawyer:7,investor:8};n.length>0&&(d=n.reduce((t,a)=>{let r=e[t.persona_type]??99;return(e[a.persona_type]??99)<r?a:t}))}if(x(d),d){let e=document.cookie.split("; ").find(e=>e.startsWith(l))?.split("=")[1],t=e&&e!==d.persona_type;if(o(d.persona_type),t&&window.location.pathname.includes("/dashboard"))return void window.location.reload()}}catch(e){console.error("[persona-context] Unexpected error:",e),b(e instanceof Error?e.message:"Failed to load personas")}finally{f(!1)}},[]),y=(0,a.useCallback)(e=>{x(e),localStorage.setItem(i,e.entity_id),o(e.persona_type),d.push("/versotech_main/dashboard")},[d]);(0,a.useEffect)(()=>{if(c.length){let e=localStorage.getItem(i),t=e?c.find(t=>t.entity_id===e):null;if(!t){let e={ceo:1,staff:2,arranger:3,introducer:4,partner:5,commercial_partner:6,lawyer:7,investor:8};c.length>0&&(t=c.reduce((t,a)=>{let r=e[t.persona_type]??99;return(e[a.persona_type]??99)<r?a:t}))}x(t??null),f(!1)}else v()},[c,v]);let w=h.some(e=>"ceo"===e.persona_type),_=h.some(e=>"staff"===e.persona_type),j=h.some(e=>"investor"===e.persona_type),N=h.some(e=>["partner","introducer","commercial_partner","arranger"].includes(e.persona_type)),k=h.some(e=>"lawyer"===e.persona_type),C=h.some(e=>"commercial_partner"===e.persona_type),M=h.some(e=>"introducer"===e.persona_type),D=h.some(e=>"arranger"===e.persona_type),S=h.length>0,T=h.length>1;return(0,t.jsx)(n.Provider,{value:{personas:h,activePersona:u,isLoading:g,error:p,switchPersona:y,refreshPersonas:v,isCEO:w,isStaff:_,isInvestor:j,isPartner:N,isLawyer:k,isCommercialPartner:C,isIntroducer:M,isArranger:D,hasAnyPersona:S,hasMultiplePersonas:T},children:e})}function d(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("usePersona must be used within a PersonaProvider");return e}function h(e){return[...{ceo:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/deals",label:"Deals"},{href:"/versotech_main/subscriptions",label:"Subscriptions"},{href:"/versotech_main/investors",label:"Investors"},{href:"/versotech_main/documents",label:"Documents"},{href:"/versotech_main/messages",label:"Messages"},{href:"/versotech_main/users",label:"Users"},{href:"/versotech_main/kyc-review",label:"KYC Review"},{href:"/versotech_main/fees",label:"Fees"},{href:"/versotech_main/audit",label:"Audit"}],staff:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/deals",label:"Deals"},{href:"/versotech_main/subscriptions",label:"Subscriptions"},{href:"/versotech_main/investors",label:"Investors"},{href:"/versotech_main/documents",label:"Documents"},{href:"/versotech_main/messages",label:"Messages"}],investor:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/opportunities",label:"Opportunities"},{href:"/versotech_main/portfolio",label:"Portfolio"},{href:"/versotech_main/documents",label:"Documents"},{href:"/versotech_main/messages",label:"Messages"}],arranger:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/my-mandates",label:"My Mandates"},{href:"/versotech_main/my-partners",label:"My Partners"},{href:"/versotech_main/my-introducers",label:"My Introducers"},{href:"/versotech_main/my-commercial-partners",label:"My Commercial Partners"},{href:"/versotech_main/my-lawyers",label:"My Lawyers"}],introducer:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/introductions",label:"Introductions"},{href:"/versotech_main/introducer-agreements",label:"Agreements"}],partner:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/partner-transactions",label:"Transactions"},{href:"/versotech_main/shared-transactions",label:"Shared Deals"}],commercial_partner:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/client-transactions",label:"Client Transactions"},{href:"/versotech_main/placement-agreements",label:"Agreements"}],lawyer:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/assigned-deals",label:"Assigned Deals"},{href:"/versotech_main/escrow",label:"Escrow"},{href:"/versotech_main/subscription-packs",label:"Subscription Packs"}]}[e.persona_type]||[]]}e.s(["PersonaProvider",()=>c,"getNavItemsForPersona",()=>h,"usePersona",()=>d])},456992,e=>{"use strict";let t=(0,e.i(410587).default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);e.s(["Menu",()=>t],456992)},756163,e=>{"use strict";let t=(0,e.i(410587).default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["Bot",()=>t],756163)},83399,714652,60810,121772,335782,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(316264),s=e.i(510166),n=e.i(129432),i=e.i(282141),l=e.i(550418),o=e.i(560044),c=e.i(59178),d=e.i(762074),h=e.i(263674),m=e.i(417439),u=e.i(401148),x=e.i(820417);function g({className:e}){let[g,f]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)([]),[w,_]=(0,a.useState)(!0),{activePersona:j}=(0,l.usePersona)(),{theme:N}=(0,o.useTheme)();(0,a.useEffect)(()=>{f(!0)},[]);let k=g&&"staff-dark"===N;(0,a.useEffect)(()=>{!async function(){if(!j||!g)return;_(!0);let e=(0,c.createClient)(),t=[];try{let{data:{user:a},error:r}=await e.auth.getUser();if(r||!a){console.warn("[NotificationCenter] No authenticated user found"),y([]);return}let s=a.id,n=j.persona_type,i="lawyer"===n||"introducer"===n;if(!i){let a=e.from("tasks").select("id, title, description, created_at, owner_user_id, owner_investor_id").in("status",["pending","in_progress"]).order("created_at",{ascending:!1}).limit(5);a="investor"===n?a.or(`owner_user_id.eq.${s},owner_investor_id.eq.${j.entity_id}`):a.eq("owner_user_id",s);let{data:r}=await a;r&&r.forEach(e=>{t.push({id:`task-${e.id}`,type:"task",title:e.title,description:e.description,href:"/versotech_main/tasks",read:!1,created_at:e.created_at})})}if(!i){let{data:a}=await e.from("conversation_participants").select("conversation_id, last_read_at").eq("user_id",s).limit(50),r=(a||[]).map(e=>e.conversation_id).filter(Boolean);if(r.length>0){let s=e.from("conversations").select("id, subject, preview, last_message_at, created_at, visibility").in("id",r).order("last_message_at",{ascending:!1,nullsFirst:!1}).limit(10);"staff"!==n&&(s=s.in("visibility",["investor","deal"]));let{data:i}=await s,l=new Map;(a||[]).forEach(e=>{e.conversation_id&&l.set(e.conversation_id,e.last_read_at??null)}),(i||[]).filter(e=>{let t=e.last_message_at??e.created_at;if(!t)return!1;let a=l.get(e.id);return!a||new Date(t).getTime()>new Date(a).getTime()}).slice(0,5).forEach(e=>{let a=e.last_message_at??e.created_at;t.push({id:`msg-${e.id}`,type:"message",title:e.subject||"New message",description:e.preview||"You have a new message",href:"/versotech_main/inbox?tab=messages",read:!1,created_at:a})})}}let{data:l}=await e.from("investor_notifications").select("id, title, message, created_at, read_at, link").eq("user_id",s).is("read_at",null).order("created_at",{ascending:!1}).limit(5);if(l&&l.forEach(e=>{t.push({id:`notif-${e.id}`,type:"notification",title:e.title,description:e.message,href:e.link||"/versotech_main/notifications",read:null!==e.read_at,created_at:e.created_at})}),"lawyer"===n){let{data:a}=await e.from("notifications").select("id, title, message, created_at, read, link").eq("user_id",s).eq("read",!1).order("created_at",{ascending:!1}).limit(5);a&&a.forEach(e=>{t.push({id:`lawyer-notif-${e.id}`,type:"notification",title:e.title,description:e.message,href:e.link||"/versotech_main/notifications",read:!!e.read,created_at:e.created_at})})}t.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),y(t.slice(0,10))}catch(e){console.error("[NotificationCenter] Error fetching notifications:",e)}finally{_(!1)}}()},[j,g]);let C=v.filter(e=>!e.read).length;return g?(0,t.jsxs)(s.DropdownMenu,{open:p,onOpenChange:b,children:[(0,t.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{variant:"ghost",size:"icon",className:(0,i.cn)("relative",k?"text-gray-400 hover:text-white hover:bg-white/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-100",e),children:[(0,t.jsx)(d.Bell,{className:"h-5 w-5"}),C>0&&(0,t.jsx)(n.Badge,{className:(0,i.cn)("absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-[10px]","bg-red-500 text-white border-0"),children:C>9?"9+":C})]})}),(0,t.jsxs)(s.DropdownMenuContent,{align:"end",className:(0,i.cn)("w-80",k?"bg-zinc-800 border-white/10 text-white":"bg-white border-gray-200"),children:[(0,t.jsxs)(s.DropdownMenuLabel,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:k?"text-white":"text-gray-900",children:"Notifications"}),C>0&&(0,t.jsxs)(n.Badge,{variant:"secondary",className:"text-xs",children:[C," new"]})]}),(0,t.jsx)(s.DropdownMenuSeparator,{className:k?"bg-white/10":"bg-gray-100"}),w?(0,t.jsx)("div",{className:"p-4 text-center",children:(0,t.jsx)("div",{className:(0,i.cn)("animate-spin h-5 w-5 mx-auto border-2 rounded-full",k?"border-white/20 border-t-white":"border-gray-200 border-t-gray-600")})}):0===v.length?(0,t.jsx)("div",{className:(0,i.cn)("p-4 text-center text-sm","text-gray-500"),children:"No notifications"}):(0,t.jsx)("div",{className:"max-h-80 overflow-y-auto",children:v.map(e=>{let a,r,n,l,o=(e=>{switch(e){case"task":return h.CheckSquare;case"message":return m.MessageSquare;case"notification":return u.AlertCircle;default:return d.Bell}})(e.type);return(0,t.jsx)(s.DropdownMenuItem,{asChild:!0,className:(0,i.cn)("flex items-start gap-3 p-3 cursor-pointer",k?"focus:bg-white/10":"focus:bg-gray-50",!e.read&&(k?"bg-white/5":"bg-blue-50/50")),children:(0,t.jsxs)(x.default,{href:e.href,className:"flex items-start gap-3 w-full",children:[(0,t.jsx)("div",{className:(0,i.cn)("h-8 w-8 rounded-full flex items-center justify-center flex-shrink-0",k?"bg-white/10":"bg-gray-100"),children:(0,t.jsx)(o,{className:(0,i.cn)("h-4 w-4","task"===e.type&&"text-blue-500","message"===e.type&&"text-green-500","notification"===e.type&&"text-orange-500")})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:(0,i.cn)("text-sm font-medium truncate",k?"text-white":"text-gray-900"),children:e.title}),e.description&&(0,t.jsx)("div",{className:(0,i.cn)("text-xs truncate",k?"text-gray-400":"text-gray-500"),children:e.description}),(0,t.jsxs)("div",{className:(0,i.cn)("text-xs mt-1",k?"text-gray-500":"text-gray-400"),children:[(a=new Date(e.created_at),l=Math.floor((n=Math.floor((r=Math.floor((new Date().getTime()-a.getTime())/6e4))/60))/24),r<1?"Just now":r<60?`${r}m ago`:n<24?`${n}h ago`:l<7?`${l}d ago`:a.toLocaleDateString()),e.deal_name&&` â€¢ ${e.deal_name}`]})]}),!e.read&&(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500 flex-shrink-0 mt-2"})]})},e.id)})}),(0,t.jsx)(s.DropdownMenuSeparator,{className:k?"bg-white/10":"bg-gray-100"}),(0,t.jsx)(s.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(x.default,{href:"/versotech_main/notifications",className:(0,i.cn)("flex items-center justify-center text-sm py-2",k?"text-blue-400":"text-blue-600"),children:"View all notifications"})})]})]}):(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",className:(0,i.cn)("relative",k?"text-gray-400 hover:text-white hover:bg-white/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-100",e),children:(0,t.jsx)(d.Bell,{className:"h-5 w-5"})})}e.s(["NotificationCenter",()=>g],83399);var f=e.i(603274),p=e.i(74434),b=e.i(230112),v=e.i(310556),y=e.i(971743),w=e.i(501259),_=e.i(335994),j=e.i(691974),N=e.i(201495),k=e.i(704477),C=e.i(723628),M=e.i(579332),D=e.i(337684),S=e.i(553012);let T={ceo:y.Building2,staff:y.Building2,investor:k.User,arranger:j.Briefcase,introducer:_.UserPlus,partner:w.Users,commercial_partner:y.Building2,lawyer:N.Scale},z={ceo:"CEO",staff:"Staff",investor:"Investor",arranger:"Arranger",introducer:"Introducer",partner:"Partner",commercial_partner:"Commercial Partner",lawyer:"Lawyer"};function A({profile:e,className:n}){let c,[d,h]=(0,a.useState)(!1),[m,u]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1),{personas:y,activePersona:w,switchPersona:_,hasMultiplePersonas:j}=(0,l.usePersona)(),{theme:N}=(0,o.useTheme)(),A=(0,f.useRouter)();(0,a.useEffect)(()=>{h(!0)},[]);let P=d&&"staff-dark"===N,U=async()=>{g(!0);let e="/versotech_main/login";try{await (0,S.signOut)(),A.push(e),window.location.href=e}catch(t){console.error("Logout failed:",t),window.location.href=e}},I=e=>e&&e.split(" ").map(e=>e[0]).filter(Boolean).join("").toUpperCase().slice(0,2)||"U";return d?(0,t.jsxs)(s.DropdownMenu,{open:m,onOpenChange:u,children:[(0,t.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{variant:"ghost",className:(0,i.cn)("flex items-center gap-2 h-auto px-3 py-2",P?"hover:bg-white/10":"hover:bg-black/5",n),children:[(0,t.jsxs)(p.Avatar,{className:"h-8 w-8",children:[(0,t.jsx)(p.AvatarImage,{src:e.avatar||void 0,alt:e.displayName}),(0,t.jsx)(p.AvatarFallback,{className:(0,i.cn)("text-xs",P?"bg-white/20 text-white":"bg-black/10 text-black"),children:I(e.displayName)})]}),(0,t.jsx)("div",{className:"text-left",children:(0,t.jsx)("div",{className:(0,i.cn)("font-medium text-sm",P?"text-white":"text-black"),children:e.displayName})}),(0,t.jsx)(b.ChevronDown,{className:(0,i.cn)("h-4 w-4 transition-transform",P?"text-white/70":"text-black/70",m&&"rotate-180")})]})}),(0,t.jsxs)(s.DropdownMenuContent,{align:"end",className:(0,i.cn)("w-72",P?"bg-zinc-800 border-white/10":"bg-white border-gray-200"),children:[(0,t.jsx)("div",{className:"px-3 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(p.Avatar,{className:"h-10 w-10",children:[(0,t.jsx)(p.AvatarImage,{src:e.avatar||void 0,alt:e.displayName}),(0,t.jsx)(p.AvatarFallback,{className:(0,i.cn)("text-sm",P?"bg-white/20 text-white":"bg-black/10 text-black"),children:I(e.displayName)})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:(0,i.cn)("font-medium text-sm truncate",P?"text-white":"text-gray-900"),children:e.displayName}),(0,t.jsx)("div",{className:(0,i.cn)("text-xs truncate",P?"text-gray-400":"text-gray-500"),children:e.email})]})]})}),j&&y.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.DropdownMenuSeparator,{className:P?"bg-white/10":"bg-gray-100"}),(0,t.jsx)(s.DropdownMenuLabel,{className:(0,i.cn)("text-xs uppercase tracking-wider",P?"text-gray-500":"text-gray-400"),children:"Switch Context"}),y.map(e=>{let a=T[e.persona_type]||k.User,r=w?.entity_id===e.entity_id;return(0,t.jsxs)(s.DropdownMenuItem,{onClick:()=>{_(e),u(!1)},className:(0,i.cn)("flex items-center gap-3 py-2.5 cursor-pointer",P?"focus:bg-white/10 focus:text-white":"focus:bg-gray-100 focus:text-gray-900",r&&(P?"bg-white/5":"bg-blue-50")),children:[e.entity_logo_url?(0,t.jsx)("div",{className:"relative h-8 w-8 rounded-full overflow-hidden flex-shrink-0",children:(0,t.jsx)(D.default,{src:e.entity_logo_url,alt:e.entity_name,fill:!0,className:"object-cover"})}):(0,t.jsx)("div",{className:(0,i.cn)("h-8 w-8 rounded-full flex items-center justify-center flex-shrink-0",P?"bg-white/10":"bg-gray-100"),children:(0,t.jsx)(a,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:(0,i.cn)("text-sm font-medium truncate",P?"text-white":"text-gray-900"),children:e.entity_name}),(0,t.jsx)("div",{className:(0,i.cn)("text-xs truncate",P?"text-gray-400":"text-gray-500"),children:"staff"===e.persona_type?e.role_in_entity:z[e.persona_type]})]}),r&&(0,t.jsx)(v.Check,{className:(0,i.cn)("h-4 w-4 flex-shrink-0",P?"text-blue-400":"text-blue-600")})]},e.entity_id)})]}),!j&&w&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.DropdownMenuSeparator,{className:P?"bg-white/10":"bg-gray-100"}),(0,t.jsxs)("div",{className:"px-3 py-2",children:[(0,t.jsx)("div",{className:(0,i.cn)("text-xs uppercase tracking-wider mb-1.5",P?"text-gray-500":"text-gray-400"),children:"Current Context"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[w.entity_logo_url?(0,t.jsx)("div",{className:"relative h-6 w-6 rounded-full overflow-hidden flex-shrink-0",children:(0,t.jsx)(D.default,{src:w.entity_logo_url,alt:w.entity_name,fill:!0,className:"object-cover"})}):(0,t.jsx)("div",{className:(0,i.cn)("h-6 w-6 rounded-full flex items-center justify-center flex-shrink-0",P?"bg-white/10":"bg-gray-100"),children:(c=T[w.persona_type]||k.User,(0,t.jsx)(c,{className:"h-3 w-3"}))}),(0,t.jsx)("div",{className:(0,i.cn)("text-sm",P?"text-white":"text-gray-900"),children:w.entity_name})]})]})]}),(0,t.jsx)(s.DropdownMenuSeparator,{className:P?"bg-white/10":"bg-gray-100"}),(0,t.jsxs)(s.DropdownMenuItem,{onClick:()=>{u(!1);let e=w&&({ceo:"/versotech_main/ceo-profile",staff:"/versotech_main/profile",investor:"/versotech_main/profile",arranger:"/versotech_main/arranger-profile",lawyer:"/versotech_main/lawyer-profile",introducer:"/versotech_main/introducer-profile",partner:"/versotech_main/partner-profile",commercial_partner:"/versotech_main/commercial-partner-profile"})[w.persona_type]||"/versotech_main/profile";A.push(e)},className:P?"focus:bg-white/10 focus:text-white":"",children:[(0,t.jsx)(C.Settings,{className:"mr-2 h-4 w-4"}),"Profile Settings"]}),(0,t.jsxs)(s.DropdownMenuItem,{onClick:U,disabled:x,className:"text-red-600 focus:text-red-600",children:[(0,t.jsx)(M.LogOut,{className:"mr-2 h-4 w-4"}),x?"Signing out...":"Sign Out"]})]})]}):(0,t.jsxs)(r.Button,{variant:"ghost",className:(0,i.cn)("flex items-center gap-2 h-auto px-3 py-2",P?"hover:bg-white/10":"hover:bg-black/5",n),children:[(0,t.jsx)(p.Avatar,{className:"h-8 w-8",children:(0,t.jsx)(p.AvatarFallback,{className:(0,i.cn)("text-xs",P?"bg-white/20 text-white":"bg-black/10 text-black"),children:I(e.displayName)})}),(0,t.jsx)("div",{className:"text-left",children:(0,t.jsx)("div",{className:(0,i.cn)("font-medium text-sm",P?"text-white":"text-black"),children:e.displayName})}),(0,t.jsx)(b.ChevronDown,{className:(0,i.cn)("h-4 w-4",P?"text-white/70":"text-black/70")})]})}e.s(["IdentityMenu",()=>A],714652);var P=e.i(410587);let U=(0,P.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);e.s(["Sun",()=>U],60810);let I=(0,P.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);e.s(["Moon",()=>I],121772);let B=(0,P.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);e.s(["Monitor",()=>B],335782)},396116,e=>{"use strict";var t=e.i(722679),a=e.i(340915),r=e.i(603274),s=e.i(820417),n=e.i(337684),i=e.i(282141),l=e.i(129432),o=e.i(316264),c=e.i(799359),d=e.i(528679),h=e.i(501259),m=e.i(733179),u=e.i(756163),x=e.i(723628),g=e.i(230112),f=e.i(758171),p=e.i(197098),b=e.i(456992),v=e.i(432598);let y=[{name:"Dashboard",href:"/versotech_admin/dashboard",icon:d.LayoutDashboard},{name:"Users",href:"/versotech_admin/users",icon:h.Users,children:[{name:"All Users",href:"/versotech_admin/users",icon:h.Users},{name:"Investors",href:"/versotech_admin/users/investors",icon:h.Users},{name:"Staff",href:"/versotech_admin/users/staff",icon:h.Users}]},{name:"Growth",href:"/versotech_admin/growth",icon:m.TrendingUp,children:[{name:"Overview",href:"/versotech_admin/growth",icon:m.TrendingUp},{name:"Engagement",href:"/versotech_admin/growth/engagement",icon:m.TrendingUp},{name:"Retention",href:"/versotech_admin/growth/retention",icon:m.TrendingUp},{name:"Funnels",href:"/versotech_admin/growth/funnel",icon:m.TrendingUp},{name:"Cohorts",href:"/versotech_admin/growth/cohorts",icon:m.TrendingUp}]},{name:"Agents",href:"/versotech_admin/agents",icon:u.Bot,badge:"Soon"},{name:"Settings",href:"/versotech_admin/settings",icon:x.Settings}];function w({className:e}){let[d,h]=(0,a.useState)(!1),[m,u]=(0,a.useState)(!1),[x,w]=(0,a.useState)(!1),[_,j]=(0,a.useState)(["Users","Growth"]),N=(0,r.usePathname)();(0,a.useEffect)(()=>{h(!0)},[]);let k=()=>(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between h-16 border-b border-gray-100 dark:border-white/5",children:[!m&&(0,t.jsxs)("div",{className:"flex items-center gap-2 animate-in fade-in duration-200",children:[(0,t.jsx)("div",{className:"relative h-8 w-28 overflow-hidden",children:(0,t.jsx)(n.default,{src:"/versotech-logo.jpg",alt:"Versotech Admin",fill:!0,className:"object-contain object-left dark:invert",priority:!0})}),(0,t.jsx)(l.Badge,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:"Admin"})]}),m&&(0,t.jsx)("div",{className:"mx-auto",children:(0,t.jsx)("div",{className:"h-8 w-8 rounded-lg bg-blue-600 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-sm",children:"V"})})}),(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>u(!m),className:"hidden md:flex h-8 w-8 text-gray-500 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white",children:m?(0,t.jsx)(p.ChevronRight,{className:"h-4 w-4"}):(0,t.jsx)(f.ChevronLeft,{className:"h-4 w-4"})})]}),(0,t.jsx)("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1",children:y.map(e=>{let a=e.icon,r=!!(e.children&&e.children.length>0),n=((e,t=!1)=>t?N.startsWith(e):N===e)(e.href,r),o=!!e.children&&(_.includes(e.name)||e.children.some(e=>N.startsWith(e.href)));return r&&!m?d?(0,t.jsxs)(c.Collapsible,{open:o,onOpenChange:()=>{var t;return t=e.name,void j(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},children:[(0,t.jsx)(c.CollapsibleTrigger,{asChild:!0,children:(0,t.jsxs)("button",{className:(0,i.cn)("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 text-left",n?"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[(0,t.jsx)(a,{className:(0,i.cn)("h-5 w-5 flex-shrink-0",n?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-zinc-500")}),(0,t.jsx)("span",{className:"flex-1 text-sm font-medium",children:e.name}),(0,t.jsx)(g.ChevronDown,{className:(0,i.cn)("h-4 w-4 transition-transform duration-200",o&&"rotate-180")})]})}),(0,t.jsx)(c.CollapsibleContent,{className:"animate-in slide-in-from-top-2 duration-200",children:(0,t.jsx)("div",{className:"ml-4 pl-4 border-l border-gray-100 dark:border-white/10 mt-1 space-y-1",children:e.children?.map(e=>{let a=N===e.href;return(0,t.jsx)(s.default,{href:e.href,className:(0,i.cn)("block px-3 py-2 rounded-lg text-sm transition-colors",a?"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400 font-medium":"text-gray-500 dark:text-zinc-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:e.name},e.href)})})})]},e.name):(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{className:(0,i.cn)("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 text-left",n?"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[(0,t.jsx)(a,{className:(0,i.cn)("h-5 w-5 flex-shrink-0",n?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-zinc-500")}),(0,t.jsx)("span",{className:"flex-1 text-sm font-medium",children:e.name}),(0,t.jsx)(g.ChevronDown,{className:(0,i.cn)("h-4 w-4 transition-transform duration-200",o&&"rotate-180")})]}),o&&(0,t.jsx)("div",{className:"ml-4 pl-4 border-l border-gray-100 dark:border-white/10 mt-1 space-y-1",children:e.children?.map(e=>{let a=N===e.href;return(0,t.jsx)(s.default,{href:e.href,className:(0,i.cn)("block px-3 py-2 rounded-lg text-sm transition-colors",a?"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400 font-medium":"text-gray-500 dark:text-zinc-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:e.name},e.href)})})]},e.name):(0,t.jsxs)(s.default,{href:e.href,className:(0,i.cn)("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group relative",n?"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[(0,t.jsx)(a,{className:(0,i.cn)("h-5 w-5 flex-shrink-0",n?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-zinc-500 group-hover:text-gray-600 dark:group-hover:text-white")}),!m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-1 text-sm font-medium",children:e.name}),e.badge&&(0,t.jsx)(l.Badge,{variant:"secondary",className:"text-[10px] px-1.5 py-0 bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-400",children:e.badge})]}),n&&(0,t.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r-full bg-blue-600 dark:bg-blue-500"}),m&&(0,t.jsxs)("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-md text-xs font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 shadow-xl border bg-white dark:bg-zinc-800 border-gray-100 dark:border-white/10 text-gray-900 dark:text-white",children:[e.name,e.badge&&(0,t.jsxs)("span",{className:"ml-2 text-amber-600",children:["(",e.badge,")"]})]})]},e.name)})}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-100 dark:border-white/5",children:!m&&(0,t.jsx)("p",{className:"text-xs text-gray-400 dark:text-zinc-600",children:"Admin Portal v1.0"})})]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 md:hidden h-10 w-10 bg-white dark:bg-zinc-900 shadow-md",onClick:()=>w(!x),children:x?(0,t.jsx)(v.X,{className:"h-5 w-5"}):(0,t.jsx)(b.Menu,{className:"h-5 w-5"})}),x&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>w(!1)}),(0,t.jsx)("aside",{className:(0,i.cn)("fixed inset-y-0 left-0 z-50 w-[280px] bg-white dark:bg-zinc-950 transform transition-transform duration-300 md:hidden",x?"translate-x-0":"-translate-x-full"),children:(0,t.jsx)(k,{})}),(0,t.jsx)("aside",{className:(0,i.cn)("hidden md:flex flex-col h-screen border-r border-gray-100 dark:border-white/5 bg-white dark:bg-zinc-950 transition-all duration-300",m?"w-[72px]":"w-[260px]",e),children:(0,t.jsx)(k,{})})]})}var _=e.i(560044),j=e.i(918964),N=e.i(83399),k=e.i(714652),C=e.i(60810),M=e.i(121772),D=e.i(335782),S=e.i(510166);function T(){let[e,r]=(0,a.useState)(!1),{theme:s,preference:n,setPreference:i}=(0,_.useTheme)();(0,a.useEffect)(()=>{r(!0)},[]);let l="staff-dark"===s;return e?(0,t.jsxs)(S.DropdownMenu,{children:[(0,t.jsx)(S.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{variant:"ghost",size:"icon",className:l?"text-zinc-400 hover:text-white hover:bg-white/10":"text-gray-500 hover:text-gray-900 hover:bg-gray-100",children:["light"===s?(0,t.jsx)(C.Sun,{className:"h-5 w-5"}):(0,t.jsx)(M.Moon,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,t.jsxs)(S.DropdownMenuContent,{align:"end",className:l?"bg-zinc-900 border-white/10":"",children:[(0,t.jsxs)(S.DropdownMenuItem,{onClick:()=>i("light"),className:`${l?"text-zinc-300 focus:text-white focus:bg-white/10":""} ${"light"===n?"font-medium":""}`,children:[(0,t.jsx)(C.Sun,{className:"mr-2 h-4 w-4"}),"Light","light"===n&&(0,t.jsx)("span",{className:"ml-auto text-xs opacity-60",children:"Active"})]}),(0,t.jsxs)(S.DropdownMenuItem,{onClick:()=>i("dark"),className:`${l?"text-zinc-300 focus:text-white focus:bg-white/10":""} ${"dark"===n?"font-medium":""}`,children:[(0,t.jsx)(M.Moon,{className:"mr-2 h-4 w-4"}),"Dark","dark"===n&&(0,t.jsx)("span",{className:"ml-auto text-xs opacity-60",children:"Active"})]}),(0,t.jsxs)(S.DropdownMenuItem,{onClick:()=>i("auto"),className:`${l?"text-zinc-300 focus:text-white focus:bg-white/10":""} ${"auto"===n?"font-medium":""}`,children:[(0,t.jsx)(D.Monitor,{className:"mr-2 h-4 w-4"}),"Auto (by persona)","auto"===n&&(0,t.jsx)("span",{className:"ml-auto text-xs opacity-60",children:"Active"})]})]})]}):(0,t.jsxs)(o.Button,{variant:"ghost",size:"icon",className:"text-gray-500 hover:text-gray-900 hover:bg-gray-100","aria-label":"Toggle theme",children:[(0,t.jsx)(C.Sun,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}function z({children:e,profile:s}){var n;let i,[l,o]=(0,a.useState)(!1),c=(i={"/versotech_admin":"Admin Portal","/versotech_admin/dashboard":"Platform Overview","/versotech_admin/users":"All Users","/versotech_admin/users/staff":"Staff Members","/versotech_admin/growth":"Growth Overview","/versotech_admin/growth/engagement":"Engagement Analytics","/versotech_admin/growth/retention":"Retention Analysis","/versotech_admin/growth/funnel":"Conversion Funnels","/versotech_admin/growth/cohorts":"Cohort Analysis","/versotech_admin/agents":"AI Agents","/versotech_admin/settings":"Settings"})[n=(0,r.usePathname)()]?i[n]:n.match(/^\/versotech_admin\/users\/[^/]+$/)?"User Details":"Admin Portal",{theme:d}=(0,_.useTheme)();(0,a.useEffect)(()=>{o(!0)},[]);let h=l&&"staff-dark"===d;return(0,t.jsxs)("div",{className:"flex h-screen min-h-screen overflow-hidden app-main-bg",children:[(0,t.jsx)(j.GlobalKeyboardShortcuts,{brand:"versotech",role:s.role}),(0,t.jsx)(w,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("header",{className:`
          h-16 px-4 md:px-6 flex items-center justify-between border-b shrink-0
          ${h?"bg-zinc-950 border-white/5":"bg-white border-gray-100"}
        `,children:[(0,t.jsx)("div",{className:"pl-12 md:pl-0",children:(0,t.jsx)("h1",{className:`text-lg font-semibold ${h?"text-white":"text-gray-900"}`,children:c})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(T,{}),(0,t.jsx)(N.NotificationCenter,{}),(0,t.jsx)(k.IdentityMenu,{profile:s})]})]}),(0,t.jsx)("main",{className:`
          flex-1 overflow-y-auto scrollbar-hide
          ${h?"bg-zinc-900":"bg-gray-50"}
        `,children:(0,t.jsx)("div",{className:"min-h-full p-4 md:p-6",children:e})})]})]})}function A({children:e,profile:a}){return(0,t.jsx)(_.ThemeProvider,{defaultTheme:"light",children:(0,t.jsx)(z,{profile:a,children:e})})}e.s(["AdminLayoutContent",()=>A],396116)},68929,e=>{e.v(e=>Promise.resolve().then(()=>e(788379)))}]);