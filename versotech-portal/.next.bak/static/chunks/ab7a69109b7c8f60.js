(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,822747,719551,699553,813306,782635,743125,364054,660711,290069,927231,933482,648116,907107,e=>{"use strict";var t=e.i(722679),s=e.i(340915),a=e.i(230112),r=e.i(197098),l=e.i(282141),c=e.i(90613);function i({title:e,icon:i,defaultOpen:n=!1,children:d,badge:x,isDark:o=!0}){let[m,h]=(0,s.useState)(n);return(0,t.jsxs)(c.Card,{className:(0,l.cn)("overflow-hidden",o?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsxs)("button",{onClick:()=>h(!m),className:(0,l.cn)("w-full flex items-center justify-between p-6 transition-colors",o?"hover:bg-white/5":"hover:bg-gray-50"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,t.jsx)("span",{className:o?"text-zinc-400":"text-gray-500",children:i}),(0,t.jsx)("span",{className:(0,l.cn)("text-lg font-semibold",o?"text-white":"text-gray-900"),children:e}),x]}),(0,t.jsx)("div",{className:o?"text-zinc-400":"text-gray-500",children:m?(0,t.jsx)(a.ChevronDown,{className:"h-5 w-5"}):(0,t.jsx)(r.ChevronRight,{className:"h-5 w-5"})})]}),(0,t.jsx)("div",{className:(0,l.cn)("transition-all duration-300 ease-in-out overflow-hidden",m?"max-h-[5000px] opacity-100":"max-h-0 opacity-0"),children:(0,t.jsx)(c.CardContent,{className:(0,l.cn)("pt-0 border-t",o?"border-white/5":"border-gray-200"),children:(0,t.jsx)("div",{className:"pt-6",children:d})})})]})}e.s(["CollapsibleSection",()=>i],822747);var n=e.i(129432),d=e.i(196767),x=e.i(733179),o=e.i(501259),m=e.i(723884),h=e.i(691974),g=e.i(561866),b=e.i(994659),j=e.i(410587);let p=(0,j.default)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var u=e.i(788135);function y({metrics:e,isDark:s=!0}){if(!e)return(0,t.jsx)(c.Card,{className:(0,l.cn)(s?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-6",children:[(0,t.jsx)("h3",{className:(0,l.cn)("text-lg font-semibold mb-4",s?"text-white":"text-gray-900"),children:"Financial Overview"}),(0,t.jsx)("p",{className:s?"text-zinc-400":"text-gray-500",children:"Loading financial metrics..."})]})});let a=e=>e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toFixed(0)}`,r=e=>e>0?(0,t.jsx)(b.ArrowUpRight,{className:"h-3 w-3 text-emerald-400"}):e<0?(0,t.jsx)(p,{className:"h-3 w-3 text-red-400"}):(0,t.jsx)(u.Minus,{className:(0,l.cn)("h-3 w-3",s?"text-zinc-500":"text-gray-400")}),i=e=>e>0?"text-emerald-400":e<0?"text-red-400":s?"text-zinc-500":"text-gray-400";return(0,t.jsxs)(c.Card,{className:(0,l.cn)(s?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:(0,l.cn)("p-2 rounded-lg",s?"bg-blue-500/10":"bg-blue-50"),children:(0,t.jsx)(d.DollarSign,{className:"h-5 w-5 text-blue-400"})}),(0,t.jsx)(c.CardTitle,{className:(0,l.cn)("text-lg font-semibold",s?"text-white":"text-gray-900"),children:"Financial Overview"})]}),(0,t.jsxs)(n.Badge,{className:(0,l.cn)(s?"bg-zinc-700/50 text-zinc-300 border-zinc-600/30":"bg-gray-100 text-gray-600 border-gray-200"),children:[(0,t.jsx)(d.DollarSign,{className:"h-3 w-3 mr-1"}),"USD"]})]}),(0,t.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-lg border",s?"bg-gradient-to-br from-blue-500/10 to-purple-500/10 border-blue-500/20":"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:s?"text-sm text-zinc-400":"text-sm text-gray-500",children:"Assets Under Management"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[(0,t.jsxs)("span",{className:`flex items-center gap-1 ${i(e.aum?.change_mtd||0)}`,children:[r(e.aum?.change_mtd||0),"MTD: ",e.aum?.change_mtd||0,"%"]}),(0,t.jsxs)("span",{className:`flex items-center gap-1 ${i(e.aum?.change_ytd||0)}`,children:[r(e.aum?.change_ytd||0),"YTD: ",e.aum?.change_ytd||0,"%"]})]})]}),(0,t.jsx)("p",{className:(0,l.cn)("text-3xl font-bold",s?"text-white":"text-gray-900"),children:a(e.aum?.total||0)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-lg border",s?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(h.Briefcase,{className:"h-4 w-4 text-purple-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm font-medium",s?"text-zinc-300":"text-gray-700"),children:"Commitments"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Total"}),(0,t.jsx)("p",{className:(0,l.cn)("text-lg font-bold",s?"text-white":"text-gray-900"),children:a(e.commitments?.total||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Funded"}),(0,t.jsx)("p",{className:"text-lg font-bold text-emerald-400",children:a(e.commitments?.funded||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,t.jsx)("span",{className:s?"text-zinc-500":"text-gray-400",children:"Funding Rate"}),(0,t.jsxs)("span",{className:s?"text-zinc-300":"text-gray-700",children:[e.commitments?.funding_rate||0,"%"]})]}),(0,t.jsx)("div",{className:(0,l.cn)("w-full h-2 rounded-full overflow-hidden",s?"bg-zinc-700":"bg-gray-200"),children:(0,t.jsx)("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${Number(e.commitments?.funding_rate)||0}%`}})})]})]})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-lg border",s?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(g.CreditCard,{className:"h-4 w-4 text-emerald-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm font-medium",s?"text-zinc-300":"text-gray-700"),children:"Revenue"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"MTD"}),(0,t.jsx)("p",{className:(0,l.cn)("text-lg font-bold",s?"text-white":"text-gray-900"),children:a(e.revenue?.revenue_mtd||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"YTD"}),(0,t.jsx)("p",{className:(0,l.cn)("text-lg font-bold",s?"text-white":"text-gray-900"),children:a(e.revenue?.revenue_ytd||0)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Pending"}),(0,t.jsxs)("p",{className:"text-sm font-semibold text-amber-400",children:[e.revenue?.pending_invoices?.count||0,(0,t.jsxs)("span",{className:(0,l.cn)("text-xs ml-1",s?"text-zinc-500":"text-gray-400"),children:["(",a(e.revenue?.pending_invoices?.amount||0),")"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Overdue"}),(0,t.jsxs)("p",{className:`text-sm font-semibold ${e.revenue?.overdue_invoices?.count>0?"text-red-400":s?"text-zinc-400":"text-gray-500"}`,children:[e.revenue?.overdue_invoices?.count||0,(0,t.jsxs)("span",{className:(0,l.cn)("text-xs ml-1",s?"text-zinc-500":"text-gray-400"),children:["(",a(e.revenue?.overdue_invoices?.amount||0),")"]})]})]})]})]})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-lg border",s?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(m.PieChart,{className:"h-4 w-4 text-cyan-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm font-medium",s?"text-zinc-300":"text-gray-700"),children:"Deal Pipeline"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Open Deals"}),(0,t.jsx)("p",{className:(0,l.cn)("text-lg font-bold",s?"text-white":"text-gray-900"),children:e.deal_pipeline?.open_deals||0}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:a(e.deal_pipeline?.total_pipeline_value||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Closed YTD"}),(0,t.jsx)("p",{className:"text-lg font-bold text-emerald-400",children:e.deal_pipeline?.closed_deals_ytd||0}),(0,t.jsxs)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:["Conv: ",e.deal_pipeline?.conversion_rate||0,"%"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Avg Deal Size"}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm font-semibold",s?"text-zinc-300":"text-gray-700"),children:a(e.deal_pipeline?.average_deal_size||0)})]})]})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-lg border",s?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(o.Users,{className:"h-4 w-4 text-orange-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm font-medium",s?"text-zinc-300":"text-gray-700"),children:"Investor Base"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Total"}),(0,t.jsx)("p",{className:(0,l.cn)("text-lg font-bold",s?"text-white":"text-gray-900"),children:e.investors?.total_active||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Approved"}),(0,t.jsx)("p",{className:"text-lg font-bold text-emerald-400",children:e.investors?.kyc_approved||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Pending"}),(0,t.jsx)("p",{className:"text-lg font-bold text-amber-400",children:e.investors?.kyc_pending||0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"New This Month"}),(0,t.jsxs)("p",{className:(0,l.cn)("text-sm font-semibold flex items-center gap-1",s?"text-zinc-300":"text-gray-700"),children:[(0,t.jsx)(b.ArrowUpRight,{className:"h-3 w-3 text-emerald-400"}),e.investors?.new_investors_mtd||0]})]})]})]})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-lg border",s?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(x.TrendingUp,{className:"h-4 w-4 text-emerald-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm font-medium",s?"text-zinc-300":"text-gray-700"),children:"Performance Metrics"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-3 rounded-lg",s?"bg-zinc-800/50":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs mb-1",s?"text-zinc-500":"text-gray-400"),children:"IRR (YTD)"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-emerald-400",children:[e.performance?.irr_ytd||0,"%"]})]}),(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-3 rounded-lg",s?"bg-zinc-800/50":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs mb-1",s?"text-zinc-500":"text-gray-400"),children:"Multiple"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-blue-400",children:[e.performance?.multiple||0,"x"]})]}),(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-3 rounded-lg",s?"bg-zinc-800/50":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs mb-1",s?"text-zinc-500":"text-gray-400"),children:"DPI"}),(0,t.jsx)("p",{className:"text-xl font-bold text-purple-400",children:e.performance?.dpi||0})]}),(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-3 rounded-lg",s?"bg-zinc-800/50":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs mb-1",s?"text-zinc-500":"text-gray-400"),children:"TVPI"}),(0,t.jsx)("p",{className:"text-xl font-bold text-cyan-400",children:e.performance?.tvpi||0})]})]})]}),(0,t.jsx)("div",{className:(0,l.cn)("pt-4 border-t",s?"border-zinc-800":"border-gray-200"),children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center justify-between p-3 rounded-lg",s?"bg-zinc-800/30":"bg-gray-50"),children:[(0,t.jsx)("span",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Portfolio Value"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm font-bold",s?"text-white":"text-gray-900"),children:a(e.summary?.total_portfolio_value||0)})]}),(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center justify-between p-3 rounded-lg",s?"bg-zinc-800/30":"bg-gray-50"),children:[(0,t.jsx)("span",{className:(0,l.cn)("text-xs",s?"text-zinc-500":"text-gray-400"),children:"Distributions YTD"}),(0,t.jsx)("span",{className:"text-sm font-bold text-emerald-400",children:a(e.summary?.total_distributions_ytd||0)})]})]})})]})]})}e.s(["FinancialOverview",()=>y],719551);var N=e.i(316264),f=e.i(352776),v=e.i(237635),w=e.i(191569),z=e.i(514133),C=e.i(312692),_=e.i(538892),T=e.i(994500),S=e.i(335994),k=e.i(295588),D=e.i(734213),A=e.i(849110),R=e.i(981218),F=e.i(645855),B=e.i(773510),H=e.i(510166);function L({staffMembers:e,onStaffUpdate:a,isDark:r=!0}){let[i,d]=(0,s.useState)(!1),[x,o]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),[j,p]=(0,s.useState)(!1),[u,y]=(0,s.useState)({email:"",display_name:"",role:"staff_ops",title:"",is_super_admin:!1}),[L,I]=(0,s.useState)(!1),[$,M]=(0,s.useState)(null),U=async()=>{I(!0);try{let e=await fetch("/api/admin/staff/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),t=await e.json();e.ok?(t.dev_warning&&t.data?.accept_url?(T.toast.success("Invitation created (email skipped in dev mode)"),M(t.data.accept_url)):(T.toast.success("Invitation sent successfully"),d(!1)),a(),y({email:"",display_name:"",role:"staff_ops",title:"",is_super_admin:!1})):T.toast.error(t.error||"Failed to invite staff member")}catch(e){T.toast.error("Failed to send invitation")}finally{I(!1)}},E=()=>{d(!1),M(null)},P=async e=>{if(confirm("Are you sure you want to deactivate this staff member?"))try{let t=await fetch(`/api/admin/staff/${e}/deactivate`,{method:"PATCH"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to deactivate staff")}T.toast.success("Staff member deactivated successfully"),a()}catch(e){T.toast.error(e.message||"Failed to deactivate staff member")}},O=async e=>{o(e),h(!0),p(!0),b(null);try{let t=await fetch(`/api/admin/staff/${e.id}/activity?limit=50`);if(t.ok){let e=await t.json();b(e.data)}else T.toast.error("Failed to load activity data")}catch(e){T.toast.error("Failed to load activity data")}finally{p(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Card,{className:(0,l.cn)(r?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c.CardTitle,{className:r?"text-white":"text-gray-900",children:"Staff Management"}),(0,t.jsxs)(N.Button,{onClick:()=>d(!0),children:[(0,t.jsx)(S.UserPlus,{className:"h-4 w-4 mr-2"}),"Invite Staff"]})]})}),(0,t.jsxs)(c.CardContent,{children:[(0,t.jsx)("div",{className:(0,l.cn)("rounded-md border",r?"border-zinc-700":"border-gray-200"),children:(0,t.jsxs)(v.Table,{children:[(0,t.jsx)(v.TableHeader,{children:(0,t.jsxs)(v.TableRow,{className:r?"border-zinc-700":"border-gray-200",children:[(0,t.jsx)(v.TableHead,{className:r?"text-zinc-400":"text-gray-500",children:"Name"}),(0,t.jsx)(v.TableHead,{className:r?"text-zinc-400":"text-gray-500",children:"Email"}),(0,t.jsx)(v.TableHead,{className:r?"text-zinc-400":"text-gray-500",children:"Role"}),(0,t.jsx)(v.TableHead,{className:r?"text-zinc-400":"text-gray-500",children:"Status"}),(0,t.jsx)(v.TableHead,{className:r?"text-zinc-400":"text-gray-500",children:"Permissions"}),(0,t.jsx)(v.TableHead,{className:r?"text-zinc-400":"text-gray-500",children:"Last Login"}),(0,t.jsx)(v.TableHead,{className:r?"text-zinc-400":"text-gray-500",children:"Last Activity"}),(0,t.jsx)(v.TableHead,{className:(0,l.cn)("text-right",r?"text-zinc-400":"text-gray-500"),children:"Actions"})]})}),(0,t.jsx)(v.TableBody,{children:e.map(e=>(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(r?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,t.jsx)(v.TableCell,{className:"font-medium",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:r?"text-white":"text-gray-900",children:e.display_name||"N/A"}),e.title&&(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:e.title})]})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(B.Mail,{className:(0,l.cn)("h-3 w-3",r?"text-zinc-400":"text-gray-500")}),(0,t.jsx)("span",{className:r?"text-zinc-300":"text-gray-700",children:e.email})]})}),(0,t.jsx)(v.TableCell,{children:(e=>{switch(e){case"staff_admin":return(0,t.jsx)(n.Badge,{className:"bg-purple-500",children:"Admin"});case"staff_ops":return(0,t.jsx)(n.Badge,{className:"bg-blue-500",children:"Operations"});case"staff_rm":return(0,t.jsx)(n.Badge,{className:"bg-green-500",children:"Relationship Manager"});default:return(0,t.jsx)(n.Badge,{variant:"secondary",children:e})}})(e.role)}),(0,t.jsx)(v.TableCell,{children:(e=>{switch(e){case"active":return(0,t.jsx)(n.Badge,{variant:"default",children:"Active"});case"invited":return(0,t.jsx)(n.Badge,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Invited"});default:return(0,t.jsx)(n.Badge,{variant:"secondary",children:"Inactive"})}})(e.status)}),(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.is_super_admin&&(0,t.jsxs)(n.Badge,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(R.Shield,{className:"h-3 w-3 mr-1"}),"Super Admin"]}),e.permissions.length>0&&!e.is_super_admin&&(0,t.jsxs)(n.Badge,{variant:"outline",className:"text-xs",children:[e.permissions.length," permissions"]})]})}),(0,t.jsx)(v.TableCell,{children:e.last_login_at?(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:r?"text-zinc-300":"text-gray-700",children:new Date(e.last_login_at).toLocaleDateString()}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:new Date(e.last_login_at).toLocaleTimeString()})]}):(0,t.jsx)("span",{className:r?"text-zinc-400":"text-gray-500",children:"Never"})}),(0,t.jsxs)(v.TableCell,{children:[e.last_activity?(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-300":"text-gray-700"),children:e.last_action}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:new Date(e.last_activity).toLocaleString()})]}):(0,t.jsx)("span",{className:r?"text-zinc-400":"text-gray-500",children:"No activity"}),e.recent_failed_logins>0&&(0,t.jsxs)(n.Badge,{variant:"destructive",className:"text-xs mt-1",children:[e.recent_failed_logins," failed logins"]})]}),(0,t.jsx)(v.TableCell,{className:"text-right",children:(0,t.jsxs)(H.DropdownMenu,{children:[(0,t.jsx)(H.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(N.Button,{variant:"ghost",className:(0,l.cn)("h-8 w-8 p-0",r?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-900"),children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(A.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,t.jsxs)(H.DropdownMenuContent,{align:"end",className:(0,l.cn)(r?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsx)(H.DropdownMenuLabel,{className:r?"text-zinc-400":"text-gray-500",children:"Actions"}),(0,t.jsxs)(H.DropdownMenuItem,{onClick:()=>O(e),className:(0,l.cn)(r?"text-zinc-300 focus:text-white focus:bg-zinc-700":"text-gray-700 focus:text-gray-900 focus:bg-gray-100"),children:[(0,t.jsx)(D.Activity,{className:"h-4 w-4 mr-2"}),"View Activity"]}),(0,t.jsx)(H.DropdownMenuSeparator,{className:r?"bg-zinc-700":"bg-gray-200"}),(0,t.jsxs)(H.DropdownMenuItem,{className:"text-red-600",onClick:()=>P(e.id),disabled:"inactive"===e.status,children:[(0,t.jsx)(k.UserX,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})})]},e.id))})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-4 rounded-lg",r?"bg-zinc-800/50":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",r?"text-white":"text-gray-900"),children:e.length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:"Total Staff"})]}),(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-4 rounded-lg",r?"bg-zinc-800/50":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",r?"text-white":"text-gray-900"),children:e.filter(e=>"active"===e.status).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:"Active"})]}),(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-4 rounded-lg",r?"bg-zinc-800/50":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",r?"text-white":"text-gray-900"),children:e.filter(e=>e.is_super_admin).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:"Super Admins"})]}),(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-4 rounded-lg",r?"bg-zinc-800/50":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",r?"text-white":"text-gray-900"),children:e.filter(e=>e.recent_failed_logins>0).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:"With Failed Logins"})]})]})]})]}),(0,t.jsx)(f.Dialog,{open:i,onOpenChange:E,children:(0,t.jsxs)(f.DialogContent,{className:(0,l.cn)(r?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:r?"text-white":"text-gray-900",children:"Invite New Staff Member"}),(0,t.jsx)(f.DialogDescription,{className:r?"text-zinc-400":"text-gray-500",children:"Send an invitation to add a new staff member to the platform."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z.Label,{htmlFor:"email",className:r?"text-zinc-300":"text-gray-700",children:"Email Address"}),(0,t.jsx)(w.Input,{id:"email",type:"email",placeholder:"staff@verso.com",value:u.email,onChange:e=>y({...u,email:e.target.value}),className:(0,l.cn)(r?"bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z.Label,{htmlFor:"display_name",className:r?"text-zinc-300":"text-gray-700",children:"Display Name"}),(0,t.jsx)(w.Input,{id:"display_name",placeholder:"John Doe",value:u.display_name,onChange:e=>y({...u,display_name:e.target.value}),className:(0,l.cn)(r?"bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z.Label,{htmlFor:"role",className:r?"text-zinc-300":"text-gray-700",children:"Role"}),(0,t.jsxs)(_.Select,{value:u.role,onValueChange:e=>y({...u,role:e}),children:[(0,t.jsx)(_.SelectTrigger,{className:(0,l.cn)(r?"bg-zinc-800 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,t.jsx)(_.SelectValue,{})}),(0,t.jsxs)(_.SelectContent,{className:(0,l.cn)(r?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsx)(_.SelectItem,{value:"staff_admin",children:"Admin"}),(0,t.jsx)(_.SelectItem,{value:"staff_ops",children:"Operations"}),(0,t.jsx)(_.SelectItem,{value:"staff_rm",children:"Relationship Manager"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z.Label,{htmlFor:"title",className:r?"text-zinc-300":"text-gray-700",children:"Title (Optional)"}),(0,t.jsx)(w.Input,{id:"title",placeholder:"Senior Operations Manager",value:u.title,onChange:e=>y({...u,title:e.target.value}),className:(0,l.cn)(r?"bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center space-x-2 pt-2 border-t",r?"border-zinc-700":"border-gray-200"),children:[(0,t.jsx)(C.Checkbox,{id:"is_super_admin",checked:u.is_super_admin,onCheckedChange:e=>y({...u,is_super_admin:!0===e})}),(0,t.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,t.jsxs)(z.Label,{htmlFor:"is_super_admin",className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2",r?"text-zinc-300":"text-gray-700"),children:[(0,t.jsx)(R.Shield,{className:"h-4 w-4 text-amber-500"}),"Grant Super Admin Access"]}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:"Super admins have full access to system settings and can manage all staff."})]})]})]}),$&&(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-lg border-2 border-dashed",r?"bg-amber-900/20 border-amber-500/50":"bg-amber-50 border-amber-300"),children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:[(0,t.jsx)(n.Badge,{className:"bg-amber-500 text-white",children:"DEV MODE"}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm font-medium",r?"text-amber-400":"text-amber-700"),children:"Email couldn't be sent. Use this link directly:"})]}),(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center gap-2 p-2 rounded",r?"bg-zinc-800":"bg-white border border-gray-200"),children:[(0,t.jsx)("code",{className:(0,l.cn)("text-xs flex-1 break-all",r?"text-zinc-300":"text-gray-700"),children:$}),(0,t.jsx)(N.Button,{size:"sm",onClick:()=>{$&&(navigator.clipboard.writeText($),T.toast.success("Invite URL copied to clipboard!"))},children:"Copy"})]})]}),(0,t.jsxs)(f.DialogFooter,{children:[(0,t.jsx)(N.Button,{variant:"outline",onClick:E,className:(0,l.cn)(r?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:$?"Done":"Cancel"}),!$&&(0,t.jsx)(N.Button,{onClick:U,disabled:L,children:L?"Sending...":"Send Invitation"})]})]})}),(0,t.jsx)(f.Dialog,{open:m,onOpenChange:h,children:(0,t.jsxs)(f.DialogContent,{className:(0,l.cn)("max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",r?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsxs)(f.DialogTitle,{className:r?"text-white":"text-gray-900",children:["Activity Log - ",x?.display_name||x?.email]}),(0,t.jsx)(f.DialogDescription,{className:r?"text-zinc-400":"text-gray-500",children:"Recent activity and login history for this staff member."})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4",children:j?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(F.Clock,{className:(0,l.cn)("h-6 w-6 animate-spin",r?"text-zinc-400":"text-gray-500")})}):g?(0,t.jsxs)(t.Fragment,{children:[g.statistics&&(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-3 rounded-lg",r?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",r?"text-white":"text-gray-900"),children:g.statistics.actions_today||0}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:"Today"})]}),(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-3 rounded-lg",r?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",r?"text-white":"text-gray-900"),children:g.statistics.actions_this_week||0}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:"This Week"})]}),(0,t.jsxs)("div",{className:(0,l.cn)("text-center p-3 rounded-lg",r?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",r?"text-white":"text-gray-900"),children:g.statistics.actions_this_month||0}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:"This Month"})]})]}),g.activities&&g.activities.length>0?(0,t.jsx)("div",{className:(0,l.cn)("border rounded-lg divide-y",r?"border-zinc-700 divide-zinc-700":"border-gray-200 divide-gray-200"),children:g.activities.map(e=>(0,t.jsxs)("div",{className:(0,l.cn)("p-3 text-sm",r?"bg-zinc-800/50":"bg-white"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:(0,l.cn)("font-medium",r?"text-white":"text-gray-900"),children:e.action?.replace(/_/g," ")}),(0,t.jsx)("span",{className:(0,l.cn)("text-xs",r?"text-zinc-400":"text-gray-500"),children:new Date(e.timestamp).toLocaleString()})]}),e.entity_type&&(0,t.jsxs)("p",{className:(0,l.cn)("text-xs mt-1",r?"text-zinc-400":"text-gray-500"),children:[e.entity_type," ",e.entity_id?`(${e.entity_id.slice(0,8)}...)`:""]})]},e.id))}):(0,t.jsx)("p",{className:(0,l.cn)("text-sm text-center py-4",r?"text-zinc-400":"text-gray-500"),children:"No activity recorded for this staff member."})]}):(0,t.jsx)("p",{className:(0,l.cn)("text-sm text-center py-4",r?"text-zinc-400":"text-gray-500"),children:"Failed to load activity data."})}),(0,t.jsx)(f.DialogFooter,{children:(0,t.jsx)(N.Button,{variant:"outline",onClick:()=>h(!1),className:(0,l.cn)(r?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:"Close"})})]})})]})}e.s(["StaffManagementPanel",()=>L],699553);var I=e.i(907434),$=e.i(401148),M=e.i(80465),U=e.i(275034),E=e.i(704477),P=e.i(119311),O=e.i(262823);let K=(0,j.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var Y=e.i(771035);function V({isDark:e=!0}){let[a,r]=(0,s.useState)([]),[i,n]=(0,s.useState)(!1),[d,x]=(0,s.useState)(!0),o=(0,s.useRef)(i);(0,s.useEffect)(()=>{o.current=i},[i]);let m=(0,s.useCallback)(async()=>{try{x(!0);let e=await fetch("/api/admin/activity-feed"),t=await e.json();t.success&&!o.current&&r(t.data)}catch(e){console.error("Failed to fetch activities:",e)}finally{x(!1)}},[]);return(0,s.useEffect)(()=>{m();let e=setInterval(()=>{o.current||m()},3e4);return()=>clearInterval(e)},[m]),(0,t.jsxs)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c.CardTitle,{className:e?"text-white":"text-gray-900",children:"Real-Time Activity Feed"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Button,{variant:"outline",size:"sm",onClick:()=>n(!i),className:(0,l.cn)(e?"border-zinc-700 text-zinc-400 hover:text-white":"border-gray-300 text-gray-600 hover:text-gray-900"),children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.Play,{className:"h-4 w-4 mr-2"}),"Resume"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K,{className:"h-4 w-4 mr-2"}),"Pause"]})}),(0,t.jsx)(N.Button,{variant:"outline",size:"sm",onClick:()=>m(),className:(0,l.cn)(e?"border-zinc-700 text-zinc-400 hover:text-white":"border-gray-300 text-gray-600 hover:text-gray-900"),children:(0,t.jsx)(O.RefreshCw,{className:"h-4 w-4"})})]})]})}),(0,t.jsxs)(c.CardContent,{children:[d?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(O.RefreshCw,{className:(0,l.cn)("h-8 w-8 animate-spin mx-auto",e?"text-zinc-400":"text-gray-500")}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm mt-2",e?"text-zinc-400":"text-gray-500"),children:"Loading activities..."})]}):(0,t.jsx)(I.ScrollArea,{className:"h-[500px]",children:(0,t.jsxs)("div",{className:"space-y-4",children:[a.map(s=>{var a,r;let c=(a=s.action).includes("create")||a.includes("insert")?M.CheckCircle:a.includes("update")?E.User:a.includes("delete")?$.AlertCircle:a.includes("upload")?P.FileText:D.Activity;return(0,t.jsxs)("div",{className:(0,l.cn)("flex items-start gap-3 p-3 rounded-lg border transition-colors",e?"bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800":"bg-gray-50 border-gray-200 hover:bg-gray-100"),children:[(0,t.jsx)("div",{className:`mt-1 ${(r=s.action).includes("create")||r.includes("insert")?"text-green-500":r.includes("update")?"text-blue-500":r.includes("delete")?"text-red-500":e?"text-zinc-400":"text-gray-500"}`,children:(0,t.jsx)(c,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"flex-1 space-y-1",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:(0,l.cn)("font-medium",e?"text-white":"text-gray-900"),children:s.actor_name||"System"}),(0,t.jsx)("span",{className:(0,l.cn)("mx-1",e?"text-zinc-400":"text-gray-500"),children:"â€¢"}),(0,t.jsx)("span",{className:e?"text-zinc-400":"text-gray-500",children:s.action.replace(/_/g," ")})]}),(0,t.jsxs)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:[s.entity_type,": ",s.entity_id]})]}),(0,t.jsx)("span",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:(e=>{let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/6e4);if(s<1)return"Just now";if(s<60)return`${s}m ago`;let a=Math.floor(s/60);return a<24?`${a}h ago`:t.toLocaleDateString()})(s.timestamp)})]})})]},s.id)}),0===a.length&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(D.Activity,{className:(0,l.cn)("h-8 w-8 mx-auto",e?"text-zinc-400":"text-gray-500")}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm mt-2",e?"text-zinc-400":"text-gray-500"),children:"No recent activity"})]})]})}),(0,t.jsxs)("div",{className:(0,l.cn)("grid grid-cols-4 gap-4 mt-6 pt-6 border-t",e?"border-zinc-700":"border-gray-200"),children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:a.length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Total Events"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-500",children:a.filter(e=>e.action.includes("create")||e.action.includes("insert")).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Created"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:a.filter(e=>e.action.includes("update")).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Updated"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-red-500",children:a.filter(e=>e.action.includes("delete")).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Deleted"})]})]}),(0,t.jsx)("div",{className:(0,l.cn)("mt-4 p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:(0,t.jsxs)("p",{className:(0,l.cn)("text-xs flex items-center gap-2",e?"text-zinc-400":"text-gray-500"),children:[(0,t.jsx)(U.Info,{className:"h-3 w-3"}),"Real-time updates ",i?"paused":"active",". Auto-refreshes every 30 seconds."]})})]})]})}e.s(["RealTimeActivityFeed",()=>V],813306);var W=e.i(750809),X=e.i(695817);let Z=(0,j.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var G=e.i(84065);function J({isDark:e=!0}){let[a,r]=(0,s.useState)([]),[i,d]=(0,s.useState)(!0),[x,o]=(0,s.useState)(""),[m,h]=(0,s.useState)("all"),[g,b]=(0,s.useState)("all"),[j,p]=(0,s.useState)(null),[u,y]=(0,s.useState)(!1),[z,C]=(0,s.useState)(!1),[S,k]=(0,s.useState)([]),[R,F]=(0,s.useState)(!1),L=async()=>{try{d(!0);let e=new URLSearchParams;x&&e.set("search",x),"all"!==m&&e.set("role",m),"all"!==g&&e.set("status",g);let t=await fetch(`/api/admin/users?${e.toString()}`);if(t.ok){let e=await t.json();r(e.data?.users||[])}}catch(e){console.error("Failed to fetch users:",e),T.toast.error("Failed to fetch users")}finally{d(!1)}};(0,s.useEffect)(()=>{L()},[m,g]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{L()},300);return()=>clearTimeout(e)},[x]);let I=async()=>{if(j){F(!0);try{let e=await fetch(`/api/admin/users/${j.id}/reset-password`,{method:"POST"});if(e.ok)T.toast.success("Password reset email sent successfully"),C(!1);else{let t=await e.json();T.toast.error(t.error||"Failed to send reset email")}}catch(e){T.toast.error("Failed to send password reset email")}finally{F(!1)}}},$=async e=>{try{let t=await fetch(`/api/admin/users/${e.id}/toggle-lock`,{method:"PATCH"});if(t.ok)T.toast.success(e.is_locked?"User unlocked":"User locked"),L();else{let e=await t.json();T.toast.error(e.error||"Failed to update user")}}catch(e){T.toast.error("Failed to update user status")}},U=async e=>{if(confirm("Are you sure you want to deactivate this user?"))try{let t=await fetch(`/api/admin/users/${e.id}/deactivate`,{method:"PATCH"});if(t.ok)T.toast.success("User deactivated"),L();else{let e=await t.json();T.toast.error(e.error||"Failed to deactivate user")}}catch(e){T.toast.error("Failed to deactivate user")}},P=async e=>{p(e),y(!0);try{let t=await fetch(`/api/admin/users/${e.id}/activity`);if(t.ok){let e=await t.json();k(e.data?.logs||[])}}catch(e){console.error("Failed to fetch activity:",e)}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsx)(c.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(W.Search,{className:(0,l.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",e?"text-zinc-400":"text-gray-400")}),(0,t.jsx)(w.Input,{placeholder:"Search by name or email...",value:x,onChange:e=>o(e.target.value),className:(0,l.cn)("pl-9",e?"bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,t.jsxs)(_.Select,{value:m,onValueChange:h,children:[(0,t.jsx)(_.SelectTrigger,{className:(0,l.cn)("w-40",e?"bg-zinc-800 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,t.jsx)(_.SelectValue,{placeholder:"Role"})}),(0,t.jsxs)(_.SelectContent,{className:(0,l.cn)(e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsx)(_.SelectItem,{value:"all",children:"All Roles"}),(0,t.jsx)(_.SelectItem,{value:"investor",children:"Investor"}),(0,t.jsx)(_.SelectItem,{value:"staff_admin",children:"Staff Admin"}),(0,t.jsx)(_.SelectItem,{value:"staff_ops",children:"Staff Ops"}),(0,t.jsx)(_.SelectItem,{value:"staff_rm",children:"Staff RM"})]})]}),(0,t.jsxs)(_.Select,{value:g,onValueChange:b,children:[(0,t.jsx)(_.SelectTrigger,{className:(0,l.cn)("w-40",e?"bg-zinc-800 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,t.jsx)(_.SelectValue,{placeholder:"Status"})}),(0,t.jsxs)(_.SelectContent,{className:(0,l.cn)(e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsx)(_.SelectItem,{value:"all",children:"All Status"}),(0,t.jsx)(_.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(_.SelectItem,{value:"inactive",children:"Inactive"}),(0,t.jsx)(_.SelectItem,{value:"locked",children:"Locked"})]})]}),(0,t.jsx)(N.Button,{variant:"outline",size:"icon",onClick:L,className:(0,l.cn)(e?"border-zinc-700 text-zinc-400 hover:text-white":"border-gray-300 text-gray-500 hover:text-gray-900"),children:(0,t.jsx)(O.RefreshCw,{className:`h-4 w-4 ${i?"animate-spin":""}`})})]})})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsx)(c.CardContent,{className:"p-0",children:(0,t.jsxs)(v.Table,{children:[(0,t.jsx)(v.TableHeader,{children:(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(e?"border-zinc-700 hover:bg-transparent":"border-gray-200 hover:bg-transparent"),children:[(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"User"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Role"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Status"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Last Sign In"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Failed Logins"}),(0,t.jsx)(v.TableHead,{className:(0,l.cn)("text-right",e?"text-zinc-400":"text-gray-500"),children:"Actions"})]})}),(0,t.jsx)(v.TableBody,{children:i?[void 0,void 0,void 0,void 0,void 0].map((s,a)=>(0,t.jsxs)(v.TableRow,{className:e?"border-zinc-700":"border-gray-200",children:[(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:(0,l.cn)("h-10 rounded animate-pulse",e?"bg-zinc-800":"bg-gray-200")})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:(0,l.cn)("h-6 w-20 rounded animate-pulse",e?"bg-zinc-800":"bg-gray-200")})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:(0,l.cn)("h-6 w-16 rounded animate-pulse",e?"bg-zinc-800":"bg-gray-200")})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:(0,l.cn)("h-4 w-24 rounded animate-pulse",e?"bg-zinc-800":"bg-gray-200")})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:(0,l.cn)("h-4 w-8 rounded animate-pulse",e?"bg-zinc-800":"bg-gray-200")})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:(0,l.cn)("h-8 w-8 rounded animate-pulse ml-auto",e?"bg-zinc-800":"bg-gray-200")})})]},a)):0===a.length?(0,t.jsx)(v.TableRow,{className:e?"border-zinc-700":"border-gray-200",children:(0,t.jsx)(v.TableCell,{colSpan:6,className:(0,l.cn)("text-center py-8",e?"text-zinc-400":"text-gray-500"),children:"No users found"})}):a.map(s=>(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(e?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:(0,l.cn)("h-9 w-9 rounded-full flex items-center justify-center",e?"bg-zinc-800":"bg-gray-100"),children:(0,t.jsx)(E.User,{className:(0,l.cn)("h-4 w-4",e?"text-zinc-400":"text-gray-500")})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("font-medium",e?"text-white":"text-gray-900"),children:s.display_name||"N/A"}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:s.email})]})]})}),(0,t.jsx)(v.TableCell,{children:(e=>{switch(e){case"investor":return(0,t.jsx)(n.Badge,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Investor"});case"staff_admin":return(0,t.jsx)(n.Badge,{className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:"Staff Admin"});case"staff_ops":return(0,t.jsx)(n.Badge,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"Staff Ops"});case"staff_rm":return(0,t.jsx)(n.Badge,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:"Staff RM"});default:return(0,t.jsx)(n.Badge,{variant:"outline",children:e})}})(s.role)}),(0,t.jsx)(v.TableCell,{children:s.is_locked?(0,t.jsx)(n.Badge,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Locked"}):"active"===s.status?(0,t.jsx)(n.Badge,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:"Active"}):(0,t.jsx)(n.Badge,{className:(0,l.cn)("bg-zinc-500/20 border-zinc-500/30",e?"text-zinc-400":"text-zinc-600"),children:s.status})}),(0,t.jsx)(v.TableCell,{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:s.last_sign_in_at?new Date(s.last_sign_in_at).toLocaleDateString():"Never"}),(0,t.jsx)(v.TableCell,{children:s.failed_login_attempts>0?(0,t.jsx)(n.Badge,{variant:"outline",className:`${s.failed_login_attempts>=5?"border-red-500/50 text-red-400":"border-amber-500/50 text-amber-400"}`,children:s.failed_login_attempts}):(0,t.jsx)("span",{className:e?"text-zinc-500":"text-gray-400",children:"0"})}),(0,t.jsx)(v.TableCell,{className:"text-right",children:(0,t.jsxs)(H.DropdownMenu,{children:[(0,t.jsx)(H.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(N.Button,{variant:"ghost",size:"icon",className:(0,l.cn)("h-8 w-8",e?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-900"),children:(0,t.jsx)(A.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(H.DropdownMenuContent,{align:"end",className:(0,l.cn)(e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsx)(H.DropdownMenuLabel,{className:e?"text-zinc-400":"text-gray-500",children:"Actions"}),(0,t.jsxs)(H.DropdownMenuItem,{onClick:()=>P(s),className:(0,l.cn)(e?"text-zinc-300 focus:text-white focus:bg-zinc-700":"text-gray-700 focus:text-gray-900 focus:bg-gray-100"),children:[(0,t.jsx)(D.Activity,{className:"h-4 w-4 mr-2"}),"View Activity"]}),(0,t.jsxs)(H.DropdownMenuItem,{onClick:()=>{p(s),C(!0)},className:(0,l.cn)(e?"text-zinc-300 focus:text-white focus:bg-zinc-700":"text-gray-700 focus:text-gray-900 focus:bg-gray-100"),children:[(0,t.jsx)(X.KeyRound,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),(0,t.jsx)(H.DropdownMenuSeparator,{className:e?"bg-zinc-700":"bg-gray-200"}),s.is_locked?(0,t.jsxs)(H.DropdownMenuItem,{onClick:()=>$(s),className:(0,l.cn)("text-emerald-400",e?"focus:text-emerald-300 focus:bg-zinc-700":"focus:text-emerald-500 focus:bg-gray-100"),children:[(0,t.jsx)(M.CheckCircle,{className:"h-4 w-4 mr-2"}),"Unlock Account"]}):(0,t.jsxs)(H.DropdownMenuItem,{onClick:()=>$(s),className:(0,l.cn)("text-amber-400",e?"focus:text-amber-300 focus:bg-zinc-700":"focus:text-amber-500 focus:bg-gray-100"),children:[(0,t.jsx)(Z,{className:"h-4 w-4 mr-2"}),"Lock Account"]}),(0,t.jsxs)(H.DropdownMenuItem,{onClick:()=>U(s),className:(0,l.cn)("text-red-400",e?"focus:text-red-300 focus:bg-zinc-700":"focus:text-red-500 focus:bg-gray-100"),children:[(0,t.jsx)(Z,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})})]},s.id))})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("p",{className:(0,l.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:a.length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Total Users"})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:a.filter(e=>"active"===e.status&&!e.is_locked).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Active"})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-red-400",children:a.filter(e=>e.is_locked).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Locked"})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-amber-400",children:a.filter(e=>e.failed_login_attempts>0).length}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Failed Logins"})]})})]}),(0,t.jsx)(f.Dialog,{open:z,onOpenChange:C,children:(0,t.jsxs)(f.DialogContent,{className:(0,l.cn)(e?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:e?"text-white":"text-gray-900",children:"Reset Password"}),(0,t.jsxs)(f.DialogDescription,{className:e?"text-zinc-400":"text-gray-500",children:["Send a password reset email to ",j?.email,"?"]})]}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center gap-3 p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)(B.Mail,{className:(0,l.cn)("h-5 w-5",e?"text-zinc-400":"text-gray-500")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("font-medium",e?"text-white":"text-gray-900"),children:j?.display_name||"User"}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:j?.email})]})]}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm mt-4",e?"text-zinc-400":"text-gray-500"),children:"An email with password reset instructions will be sent to this address."})]}),(0,t.jsxs)(f.DialogFooter,{children:[(0,t.jsx)(N.Button,{variant:"outline",onClick:()=>C(!1),className:(0,l.cn)(e?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:"Cancel"}),(0,t.jsx)(N.Button,{onClick:I,disabled:R,children:R?"Sending...":"Send Reset Email"})]})]})}),(0,t.jsx)(f.Dialog,{open:u,onOpenChange:y,children:(0,t.jsxs)(f.DialogContent,{className:(0,l.cn)("max-w-2xl",e?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:e?"text-white":"text-gray-900",children:"User Activity"}),(0,t.jsxs)(f.DialogDescription,{className:e?"text-zinc-400":"text-gray-500",children:["Recent activity for ",j?.display_name||j?.email]})]}),(0,t.jsx)("div",{className:"py-4 max-h-[400px] overflow-y-auto",children:0===S.length?(0,t.jsxs)("div",{className:(0,l.cn)("text-center py-8",e?"text-zinc-400":"text-gray-500"),children:[(0,t.jsx)(D.Activity,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsx)("p",{children:"No activity logs found"})]}):(0,t.jsx)("div",{className:"space-y-3",children:S.map(s=>(0,t.jsxs)("div",{className:(0,l.cn)("flex items-start gap-3 p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)(G.Calendar,{className:(0,l.cn)("h-4 w-4 mt-0.5",e?"text-zinc-400":"text-gray-500")}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:(0,l.cn)("text-sm",e?"text-white":"text-gray-900"),children:s.action}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:new Date(s.timestamp).toLocaleString()}),s.ip_address&&(0,t.jsxs)("p",{className:(0,l.cn)("text-xs mt-1",e?"text-zinc-500":"text-gray-400"),children:["IP: ",s.ip_address]})]})]},s.id))})}),(0,t.jsx)(f.DialogFooter,{children:(0,t.jsx)(N.Button,{variant:"outline",onClick:()=>y(!1),className:(0,l.cn)(e?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:"Close"})})]})})]})}e.s(["UserAccountManagement",()=>J],782635);var Q=e.i(761722),q=e.i(263229);let ee=[{id:"investors",title:"Investors",description:"Export all investor data including KYC status, contact info, and AUM",icon:o.Users,iconColor:"text-blue-400",formats:["csv","xlsx"],hasDateRange:!1,hasFilters:!0},{id:"subscriptions",title:"Subscriptions",description:"Export subscription data with commitments, funding status, and NAV",icon:d.DollarSign,iconColor:"text-emerald-400",formats:["csv","xlsx"],hasDateRange:!0},{id:"deals",title:"Deals",description:"Export deal pipeline data with status, values, and participation",icon:h.Briefcase,iconColor:"text-purple-400",formats:["csv","xlsx"],hasDateRange:!1},{id:"fee-events",title:"Fee Events",description:"Export fee calculations and revenue data by period",icon:d.DollarSign,iconColor:"text-amber-400",formats:["csv","xlsx"],hasDateRange:!0},{id:"audit-logs",title:"Audit Logs",description:"Export compliance audit trail with user actions and timestamps",icon:D.Activity,iconColor:"text-red-400",formats:["csv","xlsx","json"],hasDateRange:!0},{id:"financial-summary",title:"Financial Summary",description:"Generate comprehensive financial report with AUM and revenue breakdown",icon:P.FileText,iconColor:"text-cyan-400",formats:["xlsx","pdf"],hasDateRange:!0}];function et({isDark:e=!0}){let[a,r]=(0,s.useState)(null),[i,d]=(0,s.useState)("csv"),[x,o]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[g,b]=(0,s.useState)("all"),[j,p]=(0,s.useState)(!1),[u,y]=(0,s.useState)([]),f=ee.find(e=>e.id===a),v=async()=>{if(!a)return void T.toast.error("Please select an export type");p(!0);try{let e=new URLSearchParams({type:a,format:i});x&&e.set("from",x),m&&e.set("to",m),"all"!==g&&e.set("kyc_status",g);let t=await fetch(`/api/admin/export?${e.toString()}`);if(t.ok){let e=await t.blob(),s=window.URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=`${a}-export-${new Date().toISOString().split("T")[0]}.${i}`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),r.remove(),T.toast.success("Export downloaded successfully"),y(e=>[{id:Date.now().toString(),type:a,timestamp:new Date().toISOString(),status:"completed"},...e.slice(0,4)])}else{let e=await t.json();T.toast.error(e.error||"Export failed")}}catch(e){T.toast.error("Failed to generate export")}finally{p(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:ee.map(s=>(0,t.jsx)(c.Card,{onClick:()=>{r(s.id),d(s.formats[0])},className:(0,l.cn)("cursor-pointer transition-colors",a===s.id?e?"border-white/30 bg-white/10":"border-blue-500 bg-blue-50":e?"border-zinc-700 bg-zinc-800/50 hover:border-zinc-600 hover:bg-zinc-800":"border-gray-200 bg-white hover:border-gray-300 hover:bg-gray-50 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4 text-left",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(s.icon,{className:`h-5 w-5 ${s.iconColor}`}),(0,t.jsx)("span",{className:(0,l.cn)("font-medium",e?"text-white":"text-gray-900"),children:s.title})]}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs line-clamp-2",e?"text-zinc-400":"text-gray-500"),children:s.description}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-3",children:s.formats.map(s=>(0,t.jsx)(n.Badge,{variant:"outline",className:(0,l.cn)("text-xs",e?"border-zinc-600 text-zinc-400":"border-gray-300 text-gray-500"),children:s.toUpperCase()},s))})]})},s.id))}),f&&(0,t.jsxs)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsx)(c.CardHeader,{className:(0,l.cn)("pb-4 border-b",e?"border-zinc-700":"border-gray-200"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(f.icon,{className:`h-6 w-6 ${f.iconColor}`}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.CardTitle,{className:(0,l.cn)("text-lg",e?"text-white":"text-gray-900"),children:["Export ",f.title]}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:f.description})]})]})}),(0,t.jsxs)(c.CardContent,{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z.Label,{className:e?"text-zinc-400":"text-gray-600",children:"Format"}),(0,t.jsxs)(_.Select,{value:i,onValueChange:d,children:[(0,t.jsx)(_.SelectTrigger,{className:(0,l.cn)(e?"bg-zinc-900 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,t.jsx)(_.SelectValue,{})}),(0,t.jsx)(_.SelectContent,{className:(0,l.cn)(e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:f.formats.map(e=>(0,t.jsx)(_.SelectItem,{value:e,children:e.toUpperCase()},e))})]})]}),f.hasDateRange&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z.Label,{className:e?"text-zinc-400":"text-gray-600",children:"From Date"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(G.Calendar,{className:(0,l.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",e?"text-zinc-400":"text-gray-400")}),(0,t.jsx)(w.Input,{type:"date",value:x,onChange:e=>o(e.target.value),className:(0,l.cn)("pl-9",e?"bg-zinc-900 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900")})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z.Label,{className:e?"text-zinc-400":"text-gray-600",children:"To Date"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(G.Calendar,{className:(0,l.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",e?"text-zinc-400":"text-gray-400")}),(0,t.jsx)(w.Input,{type:"date",value:m,onChange:e=>h(e.target.value),className:(0,l.cn)("pl-9",e?"bg-zinc-900 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900")})]})]})]}),f.hasFilters&&"investors"===a&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(z.Label,{className:e?"text-zinc-400":"text-gray-600",children:"KYC Status"}),(0,t.jsxs)(_.Select,{value:g,onValueChange:b,children:[(0,t.jsx)(_.SelectTrigger,{className:(0,l.cn)(e?"bg-zinc-900 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,t.jsx)(_.SelectValue,{})}),(0,t.jsxs)(_.SelectContent,{className:(0,l.cn)(e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsx)(_.SelectItem,{value:"all",children:"All"}),(0,t.jsx)(_.SelectItem,{value:"approved",children:"Approved"}),(0,t.jsx)(_.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(_.SelectItem,{value:"expired",children:"Expired"})]})]})]})]}),(0,t.jsx)("div",{className:(0,l.cn)("pt-4 border-t",e?"border-zinc-700":"border-gray-200"),children:(0,t.jsx)(N.Button,{onClick:v,disabled:j,className:"w-full sm:w-auto",children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.Download,{className:"h-4 w-4 mr-2"}),"Download Export"]})})})]})]}),u.length>0&&(0,t.jsxs)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsx)(c.CardTitle,{className:(0,l.cn)("text-sm font-medium",e?"text-zinc-400":"text-gray-600"),children:"Recent Exports"})}),(0,t.jsx)(c.CardContent,{className:"space-y-2",children:u.map(s=>{let a=ee.find(e=>e.id===s.type);return(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center justify-between p-3 rounded-lg border",e?"bg-zinc-800/50 border-zinc-700":"bg-gray-50 border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,t.jsx)(a.icon,{className:`h-4 w-4 ${a.iconColor}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,l.cn)("text-sm font-medium",e?"text-white":"text-gray-900"),children:a?.title||s.type}),(0,t.jsx)("p",{className:(0,l.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:new Date(s.timestamp).toLocaleString()})]})]}),(0,t.jsx)(n.Badge,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:"Completed"})]},s.id)})})]})]})}e.s(["DataExportPanel",()=>et],743125);var es=e.i(937368),ea=e.i(355123),er=e.i(745083),el=e.i(619324),ec=e.i(496383);function ei({isDark:e=!0}){let[a,r]=(0,s.useState)([]),[i,d]=(0,s.useState)([]),[x,o]=(0,s.useState)(!0),[m,h]=(0,s.useState)(null),[g,b]=(0,s.useState)(!1),j=async()=>{try{o(!0);let[e,t]=await Promise.all([fetch("/api/admin/workflows"),fetch("/api/admin/workflows/runs?limit=20")]);if(e.ok){let t=await e.json();r(t.data?.workflows||[])}if(t.ok){let e=await t.json();d(e.data?.runs||[])}}catch(e){console.error("Failed to fetch workflow data:",e)}finally{o(!1)}};(0,s.useEffect)(()=>{j();let e=setInterval(j,6e4);return()=>clearInterval(e)},[]);let p=e=>e?e<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`:"N/A",u=a.length>0?a.reduce((e,t)=>e+t.success_rate,0)/a.length:100,y=i.filter(e=>"failed"===e.status).length,w=i.filter(e=>"completed"===e.status).length;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(D.Activity,{className:(0,l.cn)("h-4 w-4",e?"text-zinc-400":"text-gray-500")}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"Overall Health"})]}),(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[(0,t.jsxs)("span",{className:`text-2xl font-bold ${u>=90?"text-emerald-400":u>=70?"text-amber-400":"text-red-400"}`,children:[u.toFixed(0),"%"]}),(0,t.jsx)(es.Progress,{value:u,className:(0,l.cn)("h-2 flex-1",e?"bg-zinc-700":"bg-gray-200")})]})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(ea.Zap,{className:(0,l.cn)("h-4 w-4",e?"text-zinc-400":"text-gray-500")}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"Active Workflows"})]}),(0,t.jsxs)("span",{className:(0,l.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:[a.filter(e=>e.enabled).length,"/",a.length]})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(M.CheckCircle,{className:"h-4 w-4 text-emerald-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"Recent Success"})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-emerald-400",children:w})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(er.XCircle,{className:"h-4 w-4 text-red-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"Recent Failed"})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-red-400",children:y})]})})]}),(0,t.jsxs)(c.Card,{className:(0,l.cn)("overflow-hidden",e?"border-zinc-700":"border-gray-200 shadow-sm"),children:[(0,t.jsxs)(c.CardHeader,{className:(0,l.cn)("px-4 py-3 flex flex-row items-center justify-between space-y-0 border-b",e?"border-zinc-700":"border-gray-200"),children:[(0,t.jsx)(c.CardTitle,{className:(0,l.cn)("font-medium text-base",e?"text-white":"text-gray-900"),children:"Workflow Status"}),(0,t.jsxs)(N.Button,{variant:"outline",size:"sm",onClick:j,className:(0,l.cn)(e?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:[(0,t.jsx)(O.RefreshCw,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),"Refresh"]})]}),(0,t.jsx)(c.CardContent,{className:"p-0",children:(0,t.jsxs)(v.Table,{children:[(0,t.jsx)(v.TableHeader,{children:(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(e?"border-zinc-700 hover:bg-transparent":"border-gray-200 hover:bg-transparent"),children:[(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Workflow"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Category"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Success Rate"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Total Runs"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Last Run"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Avg Duration"}),(0,t.jsx)(v.TableHead,{className:(0,l.cn)("text-right",e?"text-zinc-400":"text-gray-500"),children:"Status"})]})}),(0,t.jsx)(v.TableBody,{children:x?[void 0,void 0,void 0,void 0,void 0].map((s,a)=>(0,t.jsx)(v.TableRow,{className:e?"border-zinc-700":"border-gray-200",children:[...Array(7)].map((s,a)=>(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:(0,l.cn)("h-5 rounded animate-pulse",e?"bg-zinc-800":"bg-gray-200")})},a))},a)):0===a.length?(0,t.jsx)(v.TableRow,{className:e?"border-zinc-700":"border-gray-200",children:(0,t.jsx)(v.TableCell,{colSpan:7,className:(0,l.cn)("text-center py-8",e?"text-zinc-400":"text-gray-500"),children:"No workflows configured"})}):a.map(s=>(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(e?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ea.Zap,{className:(0,l.cn)("h-4 w-4",e?"text-zinc-400":"text-gray-500")}),(0,t.jsx)("span",{className:(0,l.cn)("font-medium",e?"text-white":"text-gray-900"),children:s.title})]})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("span",{className:`text-sm ${(t=>{switch(t){case"documents":return"text-blue-400";case"compliance":return"text-purple-400";case"communications":return"text-amber-400";case"data_processing":return"text-emerald-400";case"multi_step":return"text-red-400";default:return e?"text-zinc-400":"text-gray-500"}})(s.category)}`,children:s.category.replace(/_/g," ")})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(es.Progress,{value:s.success_rate,className:(0,l.cn)("h-2 w-16",e?"bg-zinc-700":"bg-gray-200")}),(0,t.jsxs)("span",{className:`text-sm ${s.success_rate>=90?"text-emerald-400":s.success_rate>=70?"text-amber-400":"text-red-400"}`,children:[s.success_rate.toFixed(0),"%"]})]})}),(0,t.jsx)(v.TableCell,{className:e?"text-zinc-300":"text-gray-700",children:s.total_runs}),(0,t.jsx)(v.TableCell,{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:s.last_run_at?new Date(s.last_run_at).toLocaleString():"Never"}),(0,t.jsx)(v.TableCell,{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:p(s.avg_duration_ms)}),(0,t.jsx)(v.TableCell,{className:"text-right",children:(0,t.jsx)(n.Badge,{className:(0,l.cn)(s.enabled?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":e?"bg-zinc-500/20 text-zinc-400 border-zinc-500/30":"bg-gray-100 text-gray-500 border-gray-300"),children:s.enabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.CheckCircle,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(er.XCircle,{className:"h-3 w-3 mr-1"}),"Inactive"]})})})]},s.key))})]})})]}),(0,t.jsxs)(c.Card,{className:(0,l.cn)("overflow-hidden",e?"border-zinc-700":"border-gray-200 shadow-sm"),children:[(0,t.jsx)(c.CardHeader,{className:(0,l.cn)("px-4 py-3 border-b",e?"border-zinc-700":"border-gray-200"),children:(0,t.jsx)(c.CardTitle,{className:(0,l.cn)("font-medium text-base",e?"text-white":"text-gray-900"),children:"Recent Executions"})}),(0,t.jsx)(c.CardContent,{className:"p-0",children:(0,t.jsxs)(v.Table,{children:[(0,t.jsx)(v.TableHeader,{children:(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(e?"border-zinc-700 hover:bg-transparent":"border-gray-200 hover:bg-transparent"),children:[(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Workflow"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Status"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Started"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Duration"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Trigger"}),(0,t.jsx)(v.TableHead,{className:(0,l.cn)("text-right",e?"text-zinc-400":"text-gray-500"),children:"Actions"})]})}),(0,t.jsx)(v.TableBody,{children:0===i.length?(0,t.jsx)(v.TableRow,{className:e?"border-zinc-700":"border-gray-200",children:(0,t.jsx)(v.TableCell,{colSpan:6,className:(0,l.cn)("text-center py-8",e?"text-zinc-400":"text-gray-500"),children:"No recent workflow runs"})}):i.map(s=>(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(e?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,t.jsx)(v.TableCell,{className:e?"text-white":"text-gray-900",children:s.workflow_key}),(0,t.jsx)(v.TableCell,{children:"completed"===s.status?(0,t.jsxs)(n.Badge,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:[(0,t.jsx)(M.CheckCircle,{className:"h-3 w-3 mr-1"}),"Completed"]}):"failed"===s.status?(0,t.jsxs)(n.Badge,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:[(0,t.jsx)(er.XCircle,{className:"h-3 w-3 mr-1"}),"Failed"]}):(0,t.jsxs)(n.Badge,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:[(0,t.jsx)(F.Clock,{className:"h-3 w-3 mr-1"}),"Running"]})}),(0,t.jsx)(v.TableCell,{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:new Date(s.started_at).toLocaleString()}),(0,t.jsx)(v.TableCell,{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:p(s.duration_ms)}),(0,t.jsx)(v.TableCell,{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:s.trigger_type}),(0,t.jsx)(v.TableCell,{className:"text-right",children:(0,t.jsx)(N.Button,{variant:"ghost",size:"sm",onClick:()=>{h(s),b(!0)},className:(0,l.cn)(e?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-900"),children:(0,t.jsx)(ec.Eye,{className:"h-4 w-4"})})})]},s.id))})]})})]}),(0,t.jsx)(f.Dialog,{open:g,onOpenChange:b,children:(0,t.jsxs)(f.DialogContent,{className:(0,l.cn)("max-w-2xl",e?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:e?"text-white":"text-gray-900",children:"Workflow Run Details"}),(0,t.jsxs)(f.DialogDescription,{className:e?"text-zinc-400":"text-gray-500",children:[m?.workflow_key," - ",m?.id]})]}),m&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:(0,l.cn)("p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs mb-1",e?"text-zinc-400":"text-gray-500"),children:"Status"}),(0,t.jsx)("p",{className:`font-medium ${"completed"===m.status?"text-emerald-400":"failed"===m.status?"text-red-400":"text-amber-400"}`,children:m.status})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs mb-1",e?"text-zinc-400":"text-gray-500"),children:"Duration"}),(0,t.jsx)("p",{className:(0,l.cn)("font-medium",e?"text-white":"text-gray-900"),children:p(m.duration_ms)})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs mb-1",e?"text-zinc-400":"text-gray-500"),children:"Started At"}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm",e?"text-white":"text-gray-900"),children:new Date(m.started_at).toLocaleString()})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,t.jsx)("p",{className:(0,l.cn)("text-xs mb-1",e?"text-zinc-400":"text-gray-500"),children:"Trigger Type"}),(0,t.jsx)("p",{className:(0,l.cn)("font-medium",e?"text-white":"text-gray-900"),children:m.trigger_type})]})]}),m.error_message&&(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-lg border",e?"bg-red-500/10 border-red-500/30":"bg-red-50 border-red-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(el.AlertTriangle,{className:"h-4 w-4 text-red-400"}),(0,t.jsx)("span",{className:"text-red-400 font-medium",children:"Error Message"})]}),(0,t.jsx)("pre",{className:"text-sm text-red-300 whitespace-pre-wrap overflow-auto max-h-[200px]",children:m.error_message})]})]}),(0,t.jsx)(f.DialogFooter,{children:(0,t.jsx)(N.Button,{variant:"outline",onClick:()=>b(!1),className:(0,l.cn)(e?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:"Close"})})]})})]})}e.s(["WorkflowMonitoring",()=>ei],364054);var en=e.i(820417),ed=e.i(775079);function ex({isDark:e=!0}){let[a,i]=(0,s.useState)([]),[d,x]=(0,s.useState)(!0),[o,m]=(0,s.useState)("all"),h=async()=>{try{x(!0);let e=await fetch("/api/admin/compliance/alerts");if(e.ok){let t=await e.json();i(t.data?.alerts||[])}}catch(e){console.error("Failed to fetch compliance alerts:",e)}finally{x(!1)}};(0,s.useEffect)(()=>{h()},[]);let g=a.filter(e=>"all"===o||e.type===o),b=a.filter(e=>"critical"===e.severity).length,j=a.filter(e=>"high"===e.severity).length,p=a.filter(e=>"kyc_expiry"===e.type).length,u=a.filter(e=>"aml_flag"===e.type).length;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(el.AlertTriangle,{className:"h-4 w-4 text-red-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"Critical"})]}),(0,t.jsx)("span",{className:(0,l.cn)("text-2xl font-bold",b>0?"text-red-400":e?"text-zinc-500":"text-gray-400"),children:b})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(F.Clock,{className:"h-4 w-4 text-amber-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"High Priority"})]}),(0,t.jsx)("span",{className:(0,l.cn)("text-2xl font-bold",j>0?"text-amber-400":e?"text-zinc-500":"text-gray-400"),children:j})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(R.Shield,{className:"h-4 w-4 text-blue-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"KYC Expiring"})]}),(0,t.jsx)("span",{className:"text-2xl font-bold text-blue-400",children:p})]})}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(k.UserX,{className:"h-4 w-4 text-purple-400"}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"AML Flags"})]}),(0,t.jsx)("span",{className:(0,l.cn)("text-2xl font-bold",u>0?"text-purple-400":e?"text-zinc-500":"text-gray-400"),children:u})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:["all","kyc_expiry","accreditation_expiry","unsigned_doc","aml_flag"].map(s=>(0,t.jsx)(N.Button,{variant:o===s?"default":"outline",size:"sm",onClick:()=>m(s),className:(0,l.cn)(o!==s&&(e?"border-zinc-700 text-zinc-400 hover:text-white":"border-gray-300 text-gray-600 hover:text-gray-900")),children:"all"===s?"All":"kyc_expiry"===s?"KYC":"accreditation_expiry"===s?"Accreditation":"unsigned_doc"===s?"Documents":"AML"},s))}),(0,t.jsxs)(N.Button,{variant:"outline",size:"sm",onClick:h,className:(0,l.cn)(e?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:[(0,t.jsx)(O.RefreshCw,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]})]}),(0,t.jsx)(c.Card,{className:(0,l.cn)(e?"bg-zinc-900/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,t.jsx)(c.CardContent,{className:"p-0",children:(0,t.jsxs)(v.Table,{children:[(0,t.jsx)(v.TableHeader,{children:(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(e?"border-zinc-700 hover:bg-transparent":"border-gray-200 hover:bg-transparent"),children:[(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Type"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Investor"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Details"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Due Date"}),(0,t.jsx)(v.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Severity"}),(0,t.jsx)(v.TableHead,{className:(0,l.cn)("text-right",e?"text-zinc-400":"text-gray-500"),children:"Action"})]})}),(0,t.jsx)(v.TableBody,{children:d?[void 0,void 0,void 0,void 0,void 0].map((s,a)=>(0,t.jsx)(v.TableRow,{className:e?"border-zinc-700":"border-gray-200",children:[...Array(6)].map((s,a)=>(0,t.jsx)(v.TableCell,{children:(0,t.jsx)("div",{className:(0,l.cn)("h-5 rounded animate-pulse",e?"bg-zinc-800":"bg-gray-200")})},a))},a)):0===g.length?(0,t.jsx)(v.TableRow,{className:e?"border-zinc-700":"border-gray-200",children:(0,t.jsxs)(v.TableCell,{colSpan:6,className:"text-center py-8",children:[(0,t.jsx)(M.CheckCircle,{className:"h-8 w-8 mx-auto text-emerald-400 mb-2"}),(0,t.jsx)("p",{className:(0,l.cn)("font-medium",e?"text-white":"text-gray-900"),children:"All Clear"}),(0,t.jsx)("p",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:"No compliance alerts at this time"})]})}):g.map(s=>{var a;let c=(e=>{switch(e){case"kyc_expiry":return R.Shield;case"accreditation_expiry":return k.UserX;case"unsigned_doc":return ed.FileWarning;default:return el.AlertTriangle}})(s.type);return(0,t.jsxs)(v.TableRow,{className:(0,l.cn)(e?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,t.jsx)(v.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c,{className:`h-4 w-4 ${"critical"===s.severity?"text-red-400":"high"===s.severity?"text-amber-400":"text-blue-400"}`}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-white":"text-gray-900"),children:(e=>{switch(e){case"kyc_expiry":return"KYC Expiring";case"accreditation_expiry":return"Accreditation Expiring";case"unsigned_doc":return"Unsigned Document";case"aml_flag":return"AML Flag";default:return e}})(s.type)})]})}),(0,t.jsx)(v.TableCell,{children:(0,t.jsx)(en.default,{href:`/versotech/staff/investors/${s.investor_id}`,className:"text-blue-400 hover:text-blue-300",children:s.investor_name})}),(0,t.jsx)(v.TableCell,{className:(0,l.cn)("text-sm max-w-xs truncate",e?"text-zinc-300":"text-gray-700"),children:s.details}),(0,t.jsx)(v.TableCell,{children:s.due_date?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(G.Calendar,{className:(0,l.cn)("h-3 w-3",e?"text-zinc-400":"text-gray-500")}),(0,t.jsx)("span",{className:(0,l.cn)("text-sm",e?"text-zinc-400":"text-gray-500"),children:new Date(s.due_date).toLocaleDateString()}),void 0!==s.days_until_due&&(0,t.jsx)(n.Badge,{variant:"outline",className:`text-xs ${void 0===(a=s.days_until_due)?e?"text-zinc-400":"text-gray-500":a<=7?"text-red-400":a<=30?"text-amber-400":"text-emerald-400"} border-current`,children:s.days_until_due<=0?"Overdue":`${s.days_until_due}d`})]}):(0,t.jsx)("span",{className:e?"text-zinc-500":"text-gray-400",children:"-"})}),(0,t.jsx)(v.TableCell,{children:(s=>{switch(s){case"critical":return(0,t.jsx)(n.Badge,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Critical"});case"high":return(0,t.jsx)(n.Badge,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:"High"});case"medium":return(0,t.jsx)(n.Badge,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Medium"});case"low":return(0,t.jsx)(n.Badge,{className:(0,l.cn)("border",e?"bg-zinc-500/20 text-zinc-400 border-zinc-500/30":"bg-gray-100 text-gray-500 border-gray-300"),children:"Low"});default:return(0,t.jsx)(n.Badge,{variant:"outline",children:s})}})(s.severity)}),(0,t.jsx)(v.TableCell,{className:"text-right",children:(0,t.jsx)(N.Button,{variant:"ghost",size:"sm",asChild:!0,className:(0,l.cn)(e?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-900"),children:(0,t.jsxs)(en.default,{href:`/versotech/staff/investors/${s.investor_id}`,children:["View",(0,t.jsx)(r.ChevronRight,{className:"h-4 w-4 ml-1"})]})})})]},s.id)})})]})})}),(0,t.jsxs)(c.Card,{className:(0,l.cn)(e?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsxs)(c.CardTitle,{className:(0,l.cn)("text-base font-medium flex items-center gap-2",e?"text-white":"text-gray-900"),children:[(0,t.jsx)(G.Calendar,{className:(0,l.cn)("h-4 w-4",e?"text-zinc-400":"text-gray-500")}),"KYC Expiry Timeline"]})}),(0,t.jsx)(c.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:(0,l.cn)("p-3 rounded-lg border",e?"bg-red-500/10 border-red-500/30":"bg-red-50 border-red-200"),children:[(0,t.jsx)("p",{className:"text-red-400 text-sm font-medium",children:"Next 7 Days"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-400",children:a.filter(e=>"kyc_expiry"===e.type&&7>=(e.days_until_due||0)).length})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-3 rounded-lg border",e?"bg-amber-500/10 border-amber-500/30":"bg-amber-50 border-amber-200"),children:[(0,t.jsx)("p",{className:"text-amber-400 text-sm font-medium",children:"Next 30 Days"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-amber-400",children:a.filter(e=>"kyc_expiry"===e.type&&(e.days_until_due||0)>7&&30>=(e.days_until_due||0)).length})]}),(0,t.jsxs)("div",{className:(0,l.cn)("p-3 rounded-lg border",e?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"),children:[(0,t.jsx)("p",{className:"text-blue-400 text-sm font-medium",children:"Next 90 Days"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:a.filter(e=>"kyc_expiry"===e.type&&(e.days_until_due||0)>30&&90>=(e.days_until_due||0)).length})]})]})})]})]})}function eo({security:e,complianceForecast:s}){let a=[{title:"Failed Logins",value:e?.failed_logins_24h||0,subtitle:`${e?.failed_logins_7d||0} in 7 days`,icon:el.AlertTriangle,color:e?.failed_logins_24h>0?"text-red-400":"text-emerald-400",bgColor:e?.failed_logins_24h>0?"bg-red-500/10":"bg-emerald-500/10",borderColor:e?.failed_logins_24h>0?"border-red-500/20":"border-emerald-500/20"},{title:"New Accounts",value:e?.new_accounts_7d||0,subtitle:"Past 7 days",icon:o.Users,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20"},{title:"Pending Approvals",value:e?.pending_approvals||0,subtitle:"Waiting review",icon:M.CheckCircle,color:e?.pending_approvals>5?"text-amber-400":"text-emerald-400",bgColor:e?.pending_approvals>5?"bg-amber-500/10":"bg-emerald-500/10",borderColor:e?.pending_approvals>5?"border-amber-500/20":"border-emerald-500/20"},{title:"KYC Expiring",value:s?.next_30_days||0,subtitle:`${s?.next_7_days||0} critical (7d)`,icon:G.Calendar,color:s?.next_7_days>0?"text-red-400":"text-zinc-400",bgColor:s?.next_7_days>0?"bg-red-500/10":"bg-zinc-500/10",borderColor:s?.next_7_days>0?"border-red-500/20":"border-zinc-500/20"}];return(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:a.map((e,s)=>{let a=e.icon;return(0,t.jsx)(c.Card,{className:`${e.bgColor} ${e.borderColor} border`,children:(0,t.jsxs)(c.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(a,{className:`h-5 w-5 ${e.color}`}),(0,t.jsx)("span",{className:"text-xs text-zinc-500",children:e.subtitle})]}),(0,t.jsx)("p",{className:`text-2xl font-bold ${e.color}`,children:e.value}),(0,t.jsx)("p",{className:"text-xs text-zinc-400 mt-1",children:e.title})]})},s)})})}e.s(["ComplianceAlertsPanel",()=>ex],660711),e.s(["AdminKpiCards",()=>eo],290069);var em=e.i(935791),eh=e.i(646773),eg=e.i(47065),eb=e.i(707714),ej=e.i(847645),ep=e.i(627544),eu=e.i(906168);function ey({data:e}){let s=(e||[]).slice(0,8).map(e=>({name:e.name.length>12?e.name.slice(0,12)+"...":e.name,fullName:e.name,actions:e.action_count,lastAction:e.last_action})),a=Math.max(...s.map(e=>e.actions),1);return e&&0!==e.length?(0,t.jsxs)(c.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,t.jsx)(c.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Users,{className:"h-4 w-4 text-blue-400"}),(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium text-white",children:"Staff Activity (7d)"})]})}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)(ep.ResponsiveContainer,{width:"100%",height:200,children:(0,t.jsxs)(em.BarChart,{data:s,layout:"vertical",margin:{top:5,right:30,left:60,bottom:5},children:[(0,t.jsx)(eg.XAxis,{type:"number",stroke:"#71717a",fontSize:10}),(0,t.jsx)(eb.YAxis,{type:"category",dataKey:"name",stroke:"#71717a",fontSize:10,width:60}),(0,t.jsx)(ej.Tooltip,{content:(0,t.jsx)(({active:e,payload:s})=>{if(e&&s&&s.length){let e=s[0].payload;return(0,t.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-3 shadow-lg",children:[(0,t.jsx)("p",{className:"text-white font-medium",children:e.fullName}),(0,t.jsxs)("p",{className:"text-zinc-400 text-sm",children:[e.actions," actions (7d)"]}),e.lastAction&&(0,t.jsxs)("p",{className:"text-zinc-500 text-xs mt-1",children:["Last: ",new Date(e.lastAction).toLocaleDateString()]})]})}return null},{})}),(0,t.jsx)(eh.Bar,{dataKey:"actions",radius:[0,4,4,0],children:s.map((e,s)=>{let r;return(0,t.jsx)(eu.Cell,{fill:(r=e.actions/a)>.7?"#10b981":r>.4?"#3b82f6":r>.1?"#f59e0b":"#6b7280"},`cell-${s}`)})})]})})})]}):(0,t.jsxs)(c.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,t.jsx)(c.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Users,{className:"h-4 w-4 text-blue-400"}),(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium text-white",children:"Staff Activity (7d)"})]})}),(0,t.jsx)(c.CardContent,{className:"flex items-center justify-center h-48",children:(0,t.jsx)("p",{className:"text-zinc-500 text-sm",children:"No staff activity data"})})]})}function eN({data:e}){let s=[{name:"< 1 day",value:e?.under_1_day||0,color:"#10b981"},{name:"1-3 days",value:e?.days_1_to_3||0,color:"#3b82f6"},{name:"3-7 days",value:e?.days_3_to_7||0,color:"#f59e0b"},{name:"7+ days",value:e?.over_7_days||0,color:"#ef4444"}],a=e?.total||0;return 0===a?(0,t.jsxs)(c.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,t.jsx)(c.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.Clock,{className:"h-4 w-4 text-emerald-400"}),(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium text-white",children:"Approval Queue"})]}),(0,t.jsx)("span",{className:"text-xs text-emerald-400",children:"All clear"})]})}),(0,t.jsx)(c.CardContent,{className:"flex items-center justify-center h-48",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-emerald-400 text-2xl font-bold",children:"0"}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm",children:"No pending approvals"})]})})]}):(0,t.jsxs)(c.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,t.jsx)(c.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.Clock,{className:"h-4 w-4 text-amber-400"}),(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium text-white",children:"Approval Queue"})]}),(0,t.jsxs)("span",{className:"text-xs text-zinc-400",children:[a," pending"]})]})}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)(ep.ResponsiveContainer,{width:"100%",height:200,children:(0,t.jsxs)(em.BarChart,{data:s,layout:"vertical",margin:{top:5,right:30,left:60,bottom:5},children:[(0,t.jsx)(eg.XAxis,{type:"number",stroke:"#71717a",fontSize:10}),(0,t.jsx)(eb.YAxis,{type:"category",dataKey:"name",stroke:"#71717a",fontSize:10,width:60}),(0,t.jsx)(ej.Tooltip,{content:(0,t.jsx)(({active:e,payload:s})=>{if(e&&s&&s.length){let e=s[0].payload;return(0,t.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-3 shadow-lg",children:[(0,t.jsx)("p",{className:"text-white font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-zinc-400 text-sm",children:[e.value," approvals pending"]})]})}return null},{})}),(0,t.jsx)(eh.Bar,{dataKey:"value",radius:[0,4,4,0],children:s.map((e,s)=>(0,t.jsx)(eu.Cell,{fill:e.color},`cell-${s}`))})]})})})]})}e.s(["StaffActivityChart",()=>ey],927231),e.s(["ApprovalQueueChart",()=>eN],933482);var ef=e.i(255468),ev=e.i(980841),ew=e.i(888753);function ez({data:e,isDark:s=!0}){let a=(e||[]).map(e=>({...e,dateLabel:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),r=a.reduce((e,t)=>e+t.total_runs,0),i=a.reduce((e,t)=>e+t.completed,0),n=r>0?Math.round(i/r*100):100;if(!e||0===e.length)return(0,t.jsxs)(c.Card,{className:(0,l.cn)("h-full",s?"bg-zinc-900/50 border-zinc-700/50":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsx)(c.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ea.Zap,{className:"h-4 w-4 text-purple-400"}),(0,t.jsx)(c.CardTitle,{className:(0,l.cn)("text-sm font-medium",s?"text-white":"text-gray-900"),children:"Workflow Success (30d)"})]})}),(0,t.jsx)(c.CardContent,{className:"flex items-center justify-center h-48",children:(0,t.jsx)("p",{className:(0,l.cn)("text-sm",s?"text-zinc-500":"text-gray-500"),children:"No workflow data"})})]});let d=s?"#71717a":"#9ca3af";return(0,t.jsxs)(c.Card,{className:(0,l.cn)("h-full",s?"bg-zinc-900/50 border-zinc-700/50":"bg-white border-gray-200 shadow-sm"),children:[(0,t.jsx)(c.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ea.Zap,{className:"h-4 w-4 text-purple-400"}),(0,t.jsx)(c.CardTitle,{className:(0,l.cn)("text-sm font-medium",s?"text-white":"text-gray-900"),children:"Workflow Success (30d)"})]}),(0,t.jsxs)("span",{className:`text-xs font-medium ${n>=90?"text-emerald-500":n>=70?"text-amber-500":"text-red-500"}`,children:[n,"% overall"]})]})}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)(ep.ResponsiveContainer,{width:"100%",height:200,children:(0,t.jsxs)(ef.LineChart,{data:a,margin:{top:10,right:10,left:0,bottom:5},children:[(0,t.jsx)(eg.XAxis,{dataKey:"dateLabel",stroke:d,fontSize:10,tickLine:!1,interval:"preserveStartEnd"}),(0,t.jsx)(eb.YAxis,{domain:[0,100],stroke:d,fontSize:10,tickLine:!1,tickFormatter:e=>`${e}%`}),(0,t.jsx)(ej.Tooltip,{content:(0,t.jsx)(({active:e,payload:a})=>{if(e&&a&&a.length){let e=a[0].payload;return(0,t.jsxs)("div",{className:(0,l.cn)("rounded-lg p-3 shadow-lg border",s?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,t.jsx)("p",{className:(0,l.cn)("font-medium",s?"text-white":"text-gray-900"),children:e.dateLabel}),(0,t.jsxs)("p",{className:"text-emerald-500 text-sm",children:[e.success_rate,"% success"]}),(0,t.jsxs)("p",{className:(0,l.cn)("text-xs mt-1",s?"text-zinc-400":"text-gray-500"),children:[e.completed,"/",e.total_runs," completed"]}),e.failed>0&&(0,t.jsxs)("p",{className:"text-red-500 text-xs",children:[e.failed," failed"]})]})}return null},{})}),(0,t.jsx)(ew.ReferenceLine,{y:90,stroke:"#10b981",strokeDasharray:"3 3",strokeOpacity:.5}),(0,t.jsx)(ev.Line,{type:"monotone",dataKey:"success_rate",stroke:"#a855f7",strokeWidth:2,dot:{fill:"#a855f7",strokeWidth:0,r:3},activeDot:{fill:"#a855f7",strokeWidth:0,r:5}})]})})})]})}function eC({data:e}){let s=[{name:"Next 7d",value:e?.next_7_days||0,color:"#ef4444",urgency:"critical"},{name:"Next 30d",value:e?.next_30_days||0,color:"#f59e0b",urgency:"high"},{name:"Next 90d",value:e?.next_90_days||0,color:"#3b82f6",urgency:"medium"}],a=e?.total||0;return 0===a?(0,t.jsxs)(c.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,t.jsx)(c.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(G.Calendar,{className:"h-4 w-4 text-emerald-400"}),(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium text-white",children:"Compliance Forecast"})]}),(0,t.jsx)("span",{className:"text-xs text-emerald-400",children:"All clear"})]})}),(0,t.jsx)(c.CardContent,{className:"flex items-center justify-center h-48",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-emerald-400 text-2xl font-bold",children:"0"}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm",children:"No upcoming KYC expirations"})]})})]}):(0,t.jsxs)(c.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,t.jsx)(c.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(G.Calendar,{className:"h-4 w-4 text-amber-400"}),(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium text-white",children:"Compliance Forecast"})]}),(0,t.jsxs)("span",{className:"text-xs text-zinc-400",children:[a," expiring"]})]})}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)(ep.ResponsiveContainer,{width:"100%",height:200,children:(0,t.jsxs)(em.BarChart,{data:s,layout:"vertical",margin:{top:5,right:30,left:60,bottom:5},children:[(0,t.jsx)(eg.XAxis,{type:"number",stroke:"#71717a",fontSize:10}),(0,t.jsx)(eb.YAxis,{type:"category",dataKey:"name",stroke:"#71717a",fontSize:10,width:60}),(0,t.jsx)(ej.Tooltip,{content:(0,t.jsx)(({active:e,payload:s})=>{if(e&&s&&s.length){let e=s[0].payload;return(0,t.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-3 shadow-lg",children:[(0,t.jsx)("p",{className:"text-white font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-zinc-400 text-sm",children:[e.value," KYC expirations"]}),(0,t.jsx)("p",{className:`text-xs mt-1 ${"critical"===e.urgency?"text-red-400":"high"===e.urgency?"text-amber-400":"text-blue-400"}`,children:"critical"===e.urgency?"Requires immediate action":"high"===e.urgency?"Plan renewal soon":"Monitor"})]})}return null},{})}),(0,t.jsx)(eh.Bar,{dataKey:"value",radius:[0,4,4,0],children:s.map((e,s)=>(0,t.jsx)(eu.Cell,{fill:e.color},`cell-${s}`))})]})})})]})}e.s(["WorkflowTrendChart",()=>ez],648116),e.s(["ComplianceForecastChart",()=>eC],907107)}]);