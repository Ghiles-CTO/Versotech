{"version":3,"sources":["../../../../versotech-portal/src/app/api/documents/upload/route.ts","../../../../versotech-portal/node_modules/date-fns/differenceInDays.js","../../../../versotech-portal/node_modules/date-fns/compareAsc.js","../../../../versotech-portal/node_modules/next/dist/esm/build/templates/app-route.js","../../../../versotech-portal/node_modules/date-fns/isBefore.js","../../../../versotech-portal/node_modules/date-fns/isLastDayOfMonth.js","../../../../versotech-portal/node_modules/date-fns/differenceInMonths.js","../../../../versotech-portal/node_modules/date-fns/endOfMonth.js","../../../../versotech-portal/node_modules/date-fns/endOfDay.js","../../../../versotech-portal/node_modules/date-fns/differenceInCalendarMonths.js","../../../../versotech-portal/src/lib/validation/document-validation.ts"],"sourcesContent":["import { createClient } from '@/lib/supabase/server'\r\nimport { auditLogger, AuditActions, AuditEntities } from '@/lib/audit'\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport crypto from 'crypto'\r\nimport { validateDocument, isIdDocument, isProofOfAddress } from '@/lib/validation/document-validation'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient()\r\n\r\n    // Authenticate user\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n    if (authError || !user) {\r\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n    }\r\n\r\n    // Check if user is staff\r\n    const { data: profile } = await supabase\r\n      .from('profiles')\r\n      .select('role, title')\r\n      .eq('id', user.id)\r\n      .single()\r\n\r\n    if (!profile || !['staff_admin', 'staff_ops', 'staff_rm', 'ceo'].includes(profile.role)) {\r\n      return NextResponse.json({ error: 'Staff access required for document upload' }, { status: 403 })\r\n    }\r\n\r\n    // Parse multipart form data\r\n    const formData = await request.formData()\r\n    const file = formData.get('file') as File\r\n    const documentType = formData.get('type') as string\r\n    const documentName = formData.get('name') as string\r\n    const description = formData.get('description') as string\r\n    const ownerInvestorId = formData.get('owner_investor_id') as string\r\n    const vehicleId = formData.get('vehicle_id') as string\r\n    const entityId = formData.get('entity_id') as string\r\n    const arrangerEntityId = formData.get('arranger_entity_id') as string\r\n    const introducerId = formData.get('introducer_id') as string\r\n    const lawyerId = formData.get('lawyer_id') as string\r\n    const partnerId = formData.get('partner_id') as string\r\n    const commercialPartnerId = formData.get('commercial_partner_id') as string\r\n    const folderId = formData.get('folder_id') as string\r\n    const tags = formData.get('tags') as string\r\n    const isConfidential = formData.get('confidential') === 'true'\r\n\r\n    // Member ID params (Phase 4: Member document support)\r\n    const investorMemberId = formData.get('investor_member_id') as string\r\n    const arrangerMemberId = formData.get('arranger_member_id') as string\r\n    const partnerMemberId = formData.get('partner_member_id') as string\r\n    const introducerMemberId = formData.get('introducer_member_id') as string\r\n    const lawyerMemberId = formData.get('lawyer_member_id') as string\r\n    const commercialPartnerMemberId = formData.get('commercial_partner_member_id') as string\r\n\r\n    // Document validation params (Phase 5: Strict validation)\r\n    const documentDateStr = formData.get('document_date') as string\r\n    const documentExpiryDateStr = formData.get('document_expiry_date') as string\r\n    const documentIssueDateStr = formData.get('document_issue_date') as string\r\n    const staffOverride = formData.get('staff_override') === 'true'\r\n    const overrideReason = formData.get('override_reason') as string\r\n\r\n    if (!file) {\r\n      return NextResponse.json({ error: 'No file provided' }, { status: 400 })\r\n    }\r\n\r\n    if (!documentType) {\r\n      return NextResponse.json({ error: 'Document type is required' }, { status: 400 })\r\n    }\r\n\r\n    // ============================================================\r\n    // Phase 5: STRICT Document Validation\r\n    // ============================================================\r\n    const documentDate = documentDateStr ? new Date(documentDateStr) : null\r\n    const documentExpiryDate = documentExpiryDateStr ? new Date(documentExpiryDateStr) : null\r\n    const documentIssueDate = documentIssueDateStr ? new Date(documentIssueDateStr) : null\r\n\r\n    // Validate document based on type\r\n    const validationResult = validateDocument({\r\n      documentType,\r\n      documentDate,\r\n      expiryDate: documentExpiryDate,\r\n      issueDate: documentIssueDate,\r\n      isStaffOverride: staffOverride,\r\n      overrideReason,\r\n    })\r\n\r\n    // Block invalid documents based on validation result\r\n    if (!validationResult.isValid) {\r\n      // Check if override is allowed and provided\r\n      if (validationResult.canOverride && staffOverride && overrideReason) {\r\n        // Allow upload with override - log the override\r\n        console.log(`[Document Upload] Staff override applied by ${user.id}: ${overrideReason}`)\r\n      } else {\r\n        // Block the upload\r\n        return NextResponse.json({\r\n          error: validationResult.errors[0] || 'Document validation failed',\r\n          validation: {\r\n            status: validationResult.status,\r\n            errors: validationResult.errors,\r\n            warnings: validationResult.warnings,\r\n            canOverride: validationResult.canOverride,\r\n            daysUntilExpiry: validationResult.daysUntilExpiry,\r\n            documentAgeInDays: validationResult.documentAgeInDays,\r\n          }\r\n        }, { status: 422 }) // 422 Unprocessable Entity\r\n      }\r\n    }\r\n    \r\n    // Parse tags\r\n    const tagArray = tags ? tags.split(',').map(t => t.trim()).filter(Boolean) : []\r\n\r\n    // Validate file type and size\r\n    const allowedTypes = [\r\n      'application/pdf',\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      'text/plain',\r\n      'image/jpeg',\r\n      'image/png'\r\n    ]\r\n\r\n    if (!allowedTypes.includes(file.type)) {\r\n      return NextResponse.json({ \r\n        error: 'Invalid file type. Allowed types: PDF, DOCX, XLSX, TXT, JPG, PNG' \r\n      }, { status: 400 })\r\n    }\r\n\r\n    const maxSize = 50 * 1024 * 1024 // 50MB\r\n    if (file.size > maxSize) {\r\n      return NextResponse.json({ \r\n        error: 'File size too large. Maximum size is 50MB' \r\n      }, { status: 400 })\r\n    }\r\n\r\n    // Generate secure file key\r\n    const fileExtension = file.name.split('.').pop()\r\n    const timestamp = Date.now()\r\n    const randomId = crypto.randomBytes(16).toString('hex')\r\n    const fileKey = `${documentType}/${timestamp}-${randomId}.${fileExtension}`\r\n\r\n    // Convert File to Buffer for upload\r\n    const arrayBuffer = await file.arrayBuffer()\r\n    const fileBuffer = Buffer.from(arrayBuffer)\r\n\r\n    // Upload to Supabase Storage\r\n    const { data: uploadData, error: uploadError } = await supabase.storage\r\n      .from(process.env.STORAGE_BUCKET_NAME || 'documents')\r\n      .upload(fileKey, fileBuffer, {\r\n        contentType: file.type,\r\n        metadata: {\r\n          uploaded_by: user.id,\r\n          uploaded_at: new Date().toISOString(),\r\n          original_name: file.name,\r\n          document_type: documentType,\r\n          confidential: isConfidential.toString()\r\n        }\r\n      })\r\n\r\n    if (uploadError) {\r\n      console.error('Storage upload error:', uploadError)\r\n      return NextResponse.json({ error: 'Failed to upload file' }, { status: 500 })\r\n    }\r\n\r\n    // Create watermark metadata\r\n    const watermarkData = {\r\n      uploaded_by: profile.title || user.email,\r\n      uploaded_at: new Date().toISOString(),\r\n      document_classification: isConfidential ? 'CONFIDENTIAL' : 'INTERNAL',\r\n      verso_holdings_notice: \"Property of VERSO Holdings - Authorized Use Only\",\r\n      compliance_notice: \"Subject to BVI FSC regulation and GDPR data protection\",\r\n      original_filename: file.name,\r\n      file_hash: crypto.createHash('sha256').update(fileBuffer).digest('hex')\r\n    }\r\n\r\n    // Create document record in database\r\n    const { data: document, error: docError } = await supabase\r\n      .from('documents')\r\n      .insert({\r\n        name: documentName || file.name.replace(/\\.[^/.]+$/, ''), // Remove extension\r\n        description: description || null,\r\n        file_key: fileKey,\r\n        type: documentType,\r\n        folder_id: folderId || null,\r\n        tags: tagArray.length > 0 ? tagArray : null,\r\n        // Entity references\r\n        owner_investor_id: ownerInvestorId || null,\r\n        vehicle_id: vehicleId || null,\r\n        entity_id: entityId || null,\r\n        arranger_entity_id: arrangerEntityId || null,\r\n        introducer_id: introducerId || null,\r\n        lawyer_id: lawyerId || null,\r\n        partner_id: partnerId || null,\r\n        commercial_partner_id: commercialPartnerId || null,\r\n        // Member references (Phase 4)\r\n        investor_member_id: investorMemberId || null,\r\n        arranger_member_id: arrangerMemberId || null,\r\n        partner_member_id: partnerMemberId || null,\r\n        introducer_member_id: introducerMemberId || null,\r\n        lawyer_member_id: lawyerMemberId || null,\r\n        commercial_partner_member_id: commercialPartnerMemberId || null,\r\n        // Document validation fields (Phase 5)\r\n        document_date: documentDate || null,\r\n        document_expiry_date: documentExpiryDate || null,\r\n        document_issue_date: documentIssueDate || null,\r\n        validation_status: validationResult.status,\r\n        validation_notes: validationResult.warnings.length > 0 ? validationResult.warnings.join('; ') : null,\r\n        validated_at: new Date().toISOString(),\r\n        validated_by: user.id,\r\n        // File metadata\r\n        file_size_bytes: file.size,\r\n        mime_type: file.type,\r\n        current_version: 1,\r\n        status: 'draft',\r\n        is_published: false,\r\n        created_by: user.id,\r\n        watermark: watermarkData\r\n      })\r\n      .select(`\r\n        *,\r\n        investors:investors!documents_owner_investor_id_fkey(legal_name),\r\n        vehicles:vehicles!documents_vehicle_id_fkey(name, type),\r\n        folder:document_folders(id, name, path)\r\n      `)\r\n      .single()\r\n\r\n    if (docError) {\r\n      // If database insert fails, clean up uploaded file\r\n      await supabase.storage\r\n        .from(process.env.STORAGE_BUCKET_NAME || 'documents')\r\n        .remove([fileKey])\r\n        \r\n      console.error('Document record creation error:', docError)\r\n      return NextResponse.json({ error: 'Failed to create document record' }, { status: 500 })\r\n    }\r\n\r\n    // Create initial version record\r\n    await supabase\r\n      .from('document_versions')\r\n      .insert({\r\n        document_id: document.id,\r\n        version_number: 1,\r\n        file_key: fileKey,\r\n        file_size_bytes: file.size,\r\n        mime_type: file.type,\r\n        created_by: user.id\r\n      })\r\n\r\n    // Log document upload for audit trail\r\n    await auditLogger.log({\r\n      actor_user_id: user.id,\r\n      action: AuditActions.DOCUMENT_UPLOAD,\r\n      entity: AuditEntities.DOCUMENTS,\r\n      entity_id: document.id,\r\n      metadata: {\r\n        file_key: fileKey,\r\n        document_type: documentType,\r\n        file_size: file.size,\r\n        file_type: file.type,\r\n        original_name: file.name,\r\n        confidential: isConfidential,\r\n        // Entity IDs\r\n        owner_investor_id: ownerInvestorId,\r\n        vehicle_id: vehicleId,\r\n        arranger_entity_id: arrangerEntityId,\r\n        introducer_id: introducerId,\r\n        lawyer_id: lawyerId,\r\n        partner_id: partnerId,\r\n        commercial_partner_id: commercialPartnerId,\r\n        // Member IDs (Phase 4)\r\n        investor_member_id: investorMemberId,\r\n        arranger_member_id: arrangerMemberId,\r\n        partner_member_id: partnerMemberId,\r\n        introducer_member_id: introducerMemberId,\r\n        lawyer_member_id: lawyerMemberId,\r\n        commercial_partner_member_id: commercialPartnerMemberId,\r\n        // Validation info (Phase 5)\r\n        validation_status: validationResult.status,\r\n        validation_warnings: validationResult.warnings,\r\n        staff_override: staffOverride,\r\n        override_reason: overrideReason,\r\n      }\r\n    })\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      document: {\r\n        id: document.id,\r\n        file_key: document.file_key,\r\n        type: document.type,\r\n        created_at: document.created_at,\r\n        watermark: watermarkData,\r\n        investor: document.investors,\r\n        vehicle: document.vehicles\r\n      },\r\n      upload_info: {\r\n        path: uploadData.path,\r\n        size: file.size,\r\n        content_type: file.type\r\n      }\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('Document upload error:', error)\r\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\r\n  }\r\n}\r\n\r\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\n\n/**\n * The {@link differenceInDays} function options.\n */\n\n/**\n * @name differenceInDays\n * @category Day Helpers\n * @summary Get the number of full days between the given dates.\n *\n * @description\n * Get the number of full day periods between two dates. Fractional days are\n * truncated towards zero.\n *\n * One \"full day\" is the distance between a local time in one day to the same\n * local time on the next or previous day. A full day can sometimes be less than\n * or more than 24 hours if a daylight savings change happens between two dates.\n *\n * To ignore DST and only measure exact 24-hour periods, use this instead:\n * `Math.trunc(differenceInHours(dateLeft, dateRight)/24)|0`.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - An object with options\n *\n * @returns The number of full days according to the local timezone\n *\n * @example\n * // How many full days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 365\n *\n * @example\n * // How many full days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 0\n *\n * @example\n * // How many full days are between\n * // 1 March 2020 0:00 and 1 June 2020 0:00 ?\n * // Note: because local time is used, the\n * // result will always be 92 days, even in\n * // time zones where DST starts and the\n * // period has only 92*24-1 hours.\n * const result = differenceInDays(\n *   new Date(2020, 5, 1),\n *   new Date(2020, 2, 1)\n * )\n * //=> 92\n */\nexport function differenceInDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const sign = compareLocalAsc(laterDate_, earlierDate_);\n  const difference = Math.abs(\n    differenceInCalendarDays(laterDate_, earlierDate_),\n  );\n\n  laterDate_.setDate(laterDate_.getDate() - sign * difference);\n\n  // Math.abs(diff in full days - diff in calendar days) === 1 if last calendar day is not full\n  // If so, result must be decreased by 1 in absolute value\n  const isLastDayNotFull = Number(\n    compareLocalAsc(laterDate_, earlierDate_) === -sign,\n  );\n\n  const result = sign * (difference - isLastDayNotFull);\n  // Prevent negative zero\n  return result === 0 ? 0 : result;\n}\n\n// Like `compareAsc` but uses local time not UTC, which is needed\n// for accurate equality comparisons of UTC timestamps that end up\n// having the same representation in local time, e.g. one hour before\n// DST ends vs. the instant that DST ends.\nfunction compareLocalAsc(laterDate, earlierDate) {\n  const diff =\n    laterDate.getFullYear() - earlierDate.getFullYear() ||\n    laterDate.getMonth() - earlierDate.getMonth() ||\n    laterDate.getDate() - earlierDate.getDate() ||\n    laterDate.getHours() - earlierDate.getHours() ||\n    laterDate.getMinutes() - earlierDate.getMinutes() ||\n    laterDate.getSeconds() - earlierDate.getSeconds() ||\n    laterDate.getMilliseconds() - earlierDate.getMilliseconds();\n\n  if (diff < 0) return -1;\n  if (diff > 0) return 1;\n\n  // Return 0 if diff is 0; return NaN if diff is NaN\n  return diff;\n}\n\n// Fallback for modularized imports:\nexport default differenceInDays;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * @param dateLeft - The first date to compare\n * @param dateRight - The second date to compare\n *\n * @returns The result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * const result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * const result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\nexport function compareAsc(dateLeft, dateRight) {\n  const diff = +toDate(dateLeft) - +toDate(dateRight);\n\n  if (diff < 0) return -1;\n  else if (diff > 0) return 1;\n\n  // Return 0 if diff is 0; return NaN if diff is NaN\n  return diff;\n}\n\n// Fallback for modularized imports:\nexport default compareAsc;\n","import { AppRouteRouteModule } from \"next/dist/esm/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/esm/server/lib/patch-fetch\";\nimport { addRequestMeta, getRequestMeta } from \"next/dist/esm/server/request-meta\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { setManifestsSingleton } from \"next/dist/esm/server/app-render/manifests-singleton\";\nimport { normalizeAppPath } from \"next/dist/esm/shared/lib/router/utils/app-paths\";\nimport { NodeNextRequest, NodeNextResponse } from \"next/dist/esm/server/base-http/node\";\nimport { NextRequestAdapter, signalFromNodeResponse } from \"next/dist/esm/server/web/spec-extension/adapters/next-request\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { getRevalidateReason } from \"next/dist/esm/server/instrumentation/utils\";\nimport { sendResponse } from \"next/dist/esm/server/send-response\";\nimport { fromNodeOutgoingHttpHeaders, toNodeOutgoingHttpHeaders } from \"next/dist/esm/server/web/utils\";\nimport { getCacheControlHeader } from \"next/dist/esm/server/lib/cache-control\";\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from \"next/dist/esm/lib/constants\";\nimport { NoFallbackError } from \"next/dist/esm/shared/lib/no-fallback-error.external\";\nimport { CachedRouteKind } from \"next/dist/esm/server/response-cache\";\nimport * as userland from \"INNER_APP_ROUTE\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/documents/upload/route\",\n        pathname: \"/api/documents/upload\",\n        filename: \"route\",\n        bundlePath: \"\"\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    resolvedPagePath: \"[project]/versotech-portal/src/app/api/documents/upload/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/documents/upload/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    } else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = process.env.__NEXT_MULTI_ZONE_DRAFT_MODE;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = normalizeAppPath(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        setManifestsSingleton({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = getTracer();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: getRequestMeta(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext, silenceLog)=>routeModule.onRequestError(req, error, errorContext, silenceLog, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new NodeNextRequest(req);\n    const nodeNextRes = new NodeNextResponse(res);\n    const nextReq = NextRequestAdapter.fromNodeNextRequest(nodeNextReq, signalFromNodeResponse(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean(process.env.MINIMAL_MODE || getRequestMeta(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = toNodeOutgoingHttpHeaders(response.headers);\n                        if (cacheTags) {\n                            headers[NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await sendResponse(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        const silenceLog = false;\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: getRevalidateReason({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, silenceLog, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', getCacheControlHeader(cacheEntry.cacheControl));\n            }\n            await sendResponse(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof NoFallbackError)) {\n            const silenceLog = false;\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            }, silenceLog, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await sendResponse(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n","import { toDate } from \"./toDate.js\";\n\n/**\n * @name isBefore\n * @category Common Helpers\n * @summary Is the first date before the second one?\n *\n * @description\n * Is the first date before the second one?\n *\n * @param date - The date that should be before the other one to return true\n * @param dateToCompare - The date to compare with\n *\n * @returns The first date is before the second date\n *\n * @example\n * // Is 10 July 1989 before 11 February 1987?\n * const result = isBefore(new Date(1989, 6, 10), new Date(1987, 1, 11))\n * //=> false\n */\nexport function isBefore(date, dateToCompare) {\n  return +toDate(date) < +toDate(dateToCompare);\n}\n\n// Fallback for modularized imports:\nexport default isBefore;\n","import { endOfDay } from \"./endOfDay.js\";\nimport { endOfMonth } from \"./endOfMonth.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * @name isLastDayOfMonth\n * @category Month Helpers\n * @summary Is the given date the last day of a month?\n *\n * @description\n * Is the given date the last day of a month?\n *\n * @param date - The date to check\n * @param options - An object with options\n *\n * @returns The date is the last day of a month\n *\n * @example\n * // Is 28 February 2014 the last day of a month?\n * const result = isLastDayOfMonth(new Date(2014, 1, 28))\n * //=> true\n */\nexport function isLastDayOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  return +endOfDay(_date, options) === +endOfMonth(_date, options);\n}\n\n// Fallback for modularized imports:\nexport default isLastDayOfMonth;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { compareAsc } from \"./compareAsc.js\";\nimport { differenceInCalendarMonths } from \"./differenceInCalendarMonths.js\";\nimport { isLastDayOfMonth } from \"./isLastDayOfMonth.js\";\n\n/**\n * The {@link differenceInMonths} function options.\n */\n\n/**\n * @name differenceInMonths\n * @category Month Helpers\n * @summary Get the number of full months between the given dates.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - An object with options\n *\n * @returns The number of full months\n *\n * @example\n * // How many full months are between 31 January 2014 and 1 September 2014?\n * const result = differenceInMonths(new Date(2014, 8, 1), new Date(2014, 0, 31))\n * //=> 7\n */\nexport function differenceInMonths(laterDate, earlierDate, options) {\n  const [laterDate_, workingLaterDate, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    laterDate,\n    earlierDate,\n  );\n\n  const sign = compareAsc(workingLaterDate, earlierDate_);\n  const difference = Math.abs(\n    differenceInCalendarMonths(workingLaterDate, earlierDate_),\n  );\n\n  if (difference < 1) return 0;\n\n  if (workingLaterDate.getMonth() === 1 && workingLaterDate.getDate() > 27)\n    workingLaterDate.setDate(30);\n\n  workingLaterDate.setMonth(workingLaterDate.getMonth() - sign * difference);\n\n  let isLastMonthNotFull = compareAsc(workingLaterDate, earlierDate_) === -sign;\n\n  if (\n    isLastDayOfMonth(laterDate_) &&\n    difference === 1 &&\n    compareAsc(laterDate_, earlierDate_) === 1\n  ) {\n    isLastMonthNotFull = false;\n  }\n\n  const result = sign * (difference - +isLastMonthNotFull);\n  return result === 0 ? 0 : result;\n}\n\n// Fallback for modularized imports:\nexport default differenceInMonths;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfMonth} function options.\n */\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a month\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\nexport function endOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  const month = _date.getMonth();\n  _date.setFullYear(_date.getFullYear(), month + 1, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfMonth;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfDay} function options.\n */\n\n/**\n * @name endOfDay\n * @category Day Helpers\n * @summary Return the end of a day for the given date.\n *\n * @description\n * Return the end of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a day\n *\n * @example\n * // The end of a day for 2 September 2014 11:55:00:\n * const result = endOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 23:59:59.999\n */\nexport function endOfDay(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfDay;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\n\n/**\n * The {@link differenceInCalendarMonths} function options.\n */\n\n/**\n * @name differenceInCalendarMonths\n * @category Month Helpers\n * @summary Get the number of calendar months between the given dates.\n *\n * @description\n * Get the number of calendar months between the given dates.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - An object with options\n *\n * @returns The number of calendar months\n *\n * @example\n * // How many calendar months are between 31 January 2014 and 1 September 2014?\n * const result = differenceInCalendarMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 8\n */\nexport function differenceInCalendarMonths(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const yearsDiff = laterDate_.getFullYear() - earlierDate_.getFullYear();\n  const monthsDiff = laterDate_.getMonth() - earlierDate_.getMonth();\n\n  return yearsDiff * 12 + monthsDiff;\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarMonths;\n","/**\r\n * Document Validation Library\r\n *\r\n * Implements STRICT enforcement for KYC document validation:\r\n * - ID Documents: Block expired IDs (expiry_date < today)\r\n * - Proof of Address: Block if > 3 months old (with staff override option)\r\n *\r\n * @module lib/validation/document-validation\r\n */\r\n\r\nimport { differenceInDays, differenceInMonths, isBefore, isAfter, addDays } from 'date-fns'\r\n\r\n// ============================================================\r\n// Types\r\n// ============================================================\r\n\r\nexport type DocumentCategory = 'id_document' | 'proof_of_address' | 'corporate' | 'financial' | 'other'\r\n\r\nexport type ValidationEnforcement = 'strict_block' | 'block_with_override' | 'warn' | 'none'\r\n\r\nexport type ValidationStatus = 'valid' | 'expired' | 'expiring_soon' | 'stale' | 'pending' | 'rejected'\r\n\r\nexport interface DocumentValidationConfig {\r\n  category: DocumentCategory\r\n  maxAgeDays?: number  // For proof of address: 90 days (3 months)\r\n  requiresExpiry?: boolean  // For ID documents\r\n  enforcement: ValidationEnforcement\r\n  warningDays?: number  // Days before expiry to show warning\r\n}\r\n\r\nexport interface ValidationResult {\r\n  isValid: boolean\r\n  status: ValidationStatus\r\n  enforcement: ValidationEnforcement\r\n  errors: string[]\r\n  warnings: string[]\r\n  daysUntilExpiry?: number\r\n  documentAgeInDays?: number\r\n  canOverride: boolean\r\n  overrideReason?: string\r\n}\r\n\r\nexport interface DocumentValidationInput {\r\n  documentType: string\r\n  documentDate?: Date | string | null\r\n  expiryDate?: Date | string | null\r\n  issueDate?: Date | string | null\r\n  isStaffOverride?: boolean\r\n  overrideReason?: string\r\n}\r\n\r\n// ============================================================\r\n// Document Type Configurations\r\n// ============================================================\r\n\r\n/**\r\n * Document types that are ID documents (passports, national IDs, etc.)\r\n * These require valid expiry dates and are STRICTLY blocked if expired\r\n */\r\nexport const ID_DOCUMENT_TYPES = [\r\n  'passport',\r\n  'national_id',\r\n  'drivers_license',\r\n  'signatory_id',\r\n  'id_card',\r\n  'residence_permit',\r\n  'visa',\r\n  'government_id',\r\n  'member_id',\r\n  'director_id',\r\n  'ubo_id',\r\n] as const\r\n\r\n/**\r\n * Document types that are proof of address\r\n * These must be < 3 months old and are blocked with override option\r\n */\r\nexport const PROOF_OF_ADDRESS_TYPES = [\r\n  'proof_of_address',\r\n  'signatory_proof_of_address',\r\n  'utility_bill',\r\n  'bank_statement',\r\n  'tax_bill',\r\n  'council_tax',\r\n  'rental_agreement',\r\n  'mortgage_statement',\r\n  'member_proof_of_address',\r\n] as const\r\n\r\n/**\r\n * Corporate documents (certificates, registrations)\r\n * These may have expiry dates but are typically warning only\r\n */\r\nexport const CORPORATE_DOCUMENT_TYPES = [\r\n  'certificate_of_incorporation',\r\n  'memorandum_articles',\r\n  'register_members_directors',\r\n  'company_registration',\r\n  'regulatory_license',\r\n  'bar_registration',\r\n  'practice_license',\r\n  'firm_registration',\r\n  'partnership_agreement',\r\n] as const\r\n\r\n// ============================================================\r\n// Validation Configuration Map\r\n// ============================================================\r\n\r\nconst VALIDATION_CONFIG: Record<string, DocumentValidationConfig> = {\r\n  // ID Documents - STRICT BLOCK if expired\r\n  passport: {\r\n    category: 'id_document',\r\n    requiresExpiry: true,\r\n    enforcement: 'strict_block',\r\n    warningDays: 30,\r\n  },\r\n  national_id: {\r\n    category: 'id_document',\r\n    requiresExpiry: true,\r\n    enforcement: 'strict_block',\r\n    warningDays: 30,\r\n  },\r\n  drivers_license: {\r\n    category: 'id_document',\r\n    requiresExpiry: true,\r\n    enforcement: 'strict_block',\r\n    warningDays: 30,\r\n  },\r\n  signatory_id: {\r\n    category: 'id_document',\r\n    requiresExpiry: true,\r\n    enforcement: 'strict_block',\r\n    warningDays: 30,\r\n  },\r\n  member_id: {\r\n    category: 'id_document',\r\n    requiresExpiry: true,\r\n    enforcement: 'strict_block',\r\n    warningDays: 30,\r\n  },\r\n  director_id: {\r\n    category: 'id_document',\r\n    requiresExpiry: true,\r\n    enforcement: 'strict_block',\r\n    warningDays: 30,\r\n  },\r\n  ubo_id: {\r\n    category: 'id_document',\r\n    requiresExpiry: true,\r\n    enforcement: 'strict_block',\r\n    warningDays: 30,\r\n  },\r\n\r\n  // Proof of Address - BLOCK WITH OVERRIDE if > 3 months old\r\n  proof_of_address: {\r\n    category: 'proof_of_address',\r\n    maxAgeDays: 90, // 3 months\r\n    enforcement: 'block_with_override',\r\n    warningDays: 14, // Warn when approaching 3-month limit\r\n  },\r\n  signatory_proof_of_address: {\r\n    category: 'proof_of_address',\r\n    maxAgeDays: 90,\r\n    enforcement: 'block_with_override',\r\n    warningDays: 14,\r\n  },\r\n  member_proof_of_address: {\r\n    category: 'proof_of_address',\r\n    maxAgeDays: 90,\r\n    enforcement: 'block_with_override',\r\n    warningDays: 14,\r\n  },\r\n  utility_bill: {\r\n    category: 'proof_of_address',\r\n    maxAgeDays: 90,\r\n    enforcement: 'block_with_override',\r\n    warningDays: 14,\r\n  },\r\n  bank_statement: {\r\n    category: 'proof_of_address',\r\n    maxAgeDays: 90,\r\n    enforcement: 'block_with_override',\r\n    warningDays: 14,\r\n  },\r\n\r\n  // Corporate Documents - WARN only\r\n  certificate_of_incorporation: {\r\n    category: 'corporate',\r\n    enforcement: 'none',\r\n  },\r\n  regulatory_license: {\r\n    category: 'corporate',\r\n    requiresExpiry: true,\r\n    enforcement: 'warn',\r\n    warningDays: 60,\r\n  },\r\n  insurance_certificate: {\r\n    category: 'corporate',\r\n    requiresExpiry: true,\r\n    enforcement: 'warn',\r\n    warningDays: 60,\r\n  },\r\n}\r\n\r\n// Default config for unknown document types\r\nconst DEFAULT_CONFIG: DocumentValidationConfig = {\r\n  category: 'other',\r\n  enforcement: 'none',\r\n}\r\n\r\n// ============================================================\r\n// Validation Functions\r\n// ============================================================\r\n\r\n/**\r\n * Get the validation configuration for a document type\r\n */\r\nexport function getDocumentConfig(documentType: string): DocumentValidationConfig {\r\n  return VALIDATION_CONFIG[documentType] || DEFAULT_CONFIG\r\n}\r\n\r\n/**\r\n * Check if a document type is an ID document\r\n */\r\nexport function isIdDocument(documentType: string): boolean {\r\n  return ID_DOCUMENT_TYPES.includes(documentType as any) ||\r\n    documentType.includes('_id') ||\r\n    documentType.includes('passport') ||\r\n    documentType.includes('license')\r\n}\r\n\r\n/**\r\n * Check if a document type is a proof of address\r\n */\r\nexport function isProofOfAddress(documentType: string): boolean {\r\n  return PROOF_OF_ADDRESS_TYPES.includes(documentType as any) ||\r\n    documentType.includes('proof_of_address') ||\r\n    documentType.includes('utility') ||\r\n    documentType.includes('statement')\r\n}\r\n\r\n/**\r\n * Parse a date value (string, Date, or null)\r\n */\r\nfunction parseDate(value: Date | string | null | undefined): Date | null {\r\n  if (!value) return null\r\n  if (value instanceof Date) return value\r\n  const parsed = new Date(value)\r\n  return isNaN(parsed.getTime()) ? null : parsed\r\n}\r\n\r\n/**\r\n * Validate a document against the strict enforcement rules\r\n *\r\n * @param input - Document validation input\r\n * @returns ValidationResult with status, errors, and warnings\r\n */\r\nexport function validateDocument(input: DocumentValidationInput): ValidationResult {\r\n  const config = getDocumentConfig(input.documentType)\r\n  const today = new Date()\r\n  today.setHours(0, 0, 0, 0) // Normalize to start of day\r\n\r\n  const result: ValidationResult = {\r\n    isValid: true,\r\n    status: 'valid',\r\n    enforcement: config.enforcement,\r\n    errors: [],\r\n    warnings: [],\r\n    canOverride: config.enforcement === 'block_with_override',\r\n  }\r\n\r\n  const expiryDate = parseDate(input.expiryDate)\r\n  const documentDate = parseDate(input.documentDate)\r\n  const issueDate = parseDate(input.issueDate)\r\n\r\n  // ============================================================\r\n  // ID Document Validation (STRICT BLOCK)\r\n  // ============================================================\r\n  if (config.category === 'id_document' || isIdDocument(input.documentType)) {\r\n    // Check if expiry date is provided for ID documents\r\n    if (config.requiresExpiry && !expiryDate) {\r\n      result.warnings.push('ID documents should have an expiry date')\r\n    }\r\n\r\n    // STRICT: Block expired ID documents\r\n    if (expiryDate) {\r\n      result.daysUntilExpiry = differenceInDays(expiryDate, today)\r\n\r\n      if (isBefore(expiryDate, today)) {\r\n        // Document is EXPIRED\r\n        result.isValid = false\r\n        result.status = 'expired'\r\n        result.errors.push(\r\n          `ID document has expired on ${expiryDate.toLocaleDateString()}. Please upload a current, valid document.`\r\n        )\r\n        result.canOverride = false // STRICT - no override for expired IDs\r\n      } else if (config.warningDays && result.daysUntilExpiry <= config.warningDays) {\r\n        // Document expiring soon\r\n        result.status = 'expiring_soon'\r\n        result.warnings.push(\r\n          `ID document expires in ${result.daysUntilExpiry} days (${expiryDate.toLocaleDateString()})`\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  // ============================================================\r\n  // Proof of Address Validation (BLOCK WITH OVERRIDE)\r\n  // ============================================================\r\n  if (config.category === 'proof_of_address' || isProofOfAddress(input.documentType)) {\r\n    const dateToCheck = documentDate || issueDate\r\n\r\n    if (!dateToCheck) {\r\n      result.warnings.push('Proof of address documents should have a document date for freshness validation')\r\n    } else {\r\n      result.documentAgeInDays = differenceInDays(today, dateToCheck)\r\n      const maxAgeDays = config.maxAgeDays || 90 // Default 3 months\r\n\r\n      if (result.documentAgeInDays > maxAgeDays) {\r\n        // Document is STALE (> 3 months old)\r\n        const monthsOld = differenceInMonths(today, dateToCheck)\r\n\r\n        if (input.isStaffOverride && input.overrideReason) {\r\n          // Staff override provided\r\n          result.status = 'valid'\r\n          result.overrideReason = input.overrideReason\r\n          result.warnings.push(\r\n            `Document is ${monthsOld} months old (>${maxAgeDays / 30} months). Staff override applied: ${input.overrideReason}`\r\n          )\r\n        } else {\r\n          // Block upload\r\n          result.isValid = false\r\n          result.status = 'stale'\r\n          result.errors.push(\r\n            `Proof of address must be dated within the last ${maxAgeDays / 30} months. This document is ${monthsOld} months old (dated ${dateToCheck.toLocaleDateString()}). Staff override required.`\r\n          )\r\n          result.canOverride = true\r\n        }\r\n      } else if (config.warningDays) {\r\n        // Check if approaching staleness\r\n        const daysUntilStale = maxAgeDays - result.documentAgeInDays\r\n        if (daysUntilStale <= config.warningDays) {\r\n          result.warnings.push(\r\n            `Proof of address becomes stale in ${daysUntilStale} days`\r\n          )\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // ============================================================\r\n  // Corporate/License Documents (WARN only)\r\n  // ============================================================\r\n  if (config.category === 'corporate' && expiryDate) {\r\n    result.daysUntilExpiry = differenceInDays(expiryDate, today)\r\n\r\n    if (isBefore(expiryDate, today)) {\r\n      result.status = 'expired'\r\n      result.warnings.push(\r\n        `This document expired on ${expiryDate.toLocaleDateString()}. Consider uploading a renewed version.`\r\n      )\r\n    } else if (config.warningDays && result.daysUntilExpiry <= config.warningDays) {\r\n      result.status = 'expiring_soon'\r\n      result.warnings.push(\r\n        `This document expires in ${result.daysUntilExpiry} days`\r\n      )\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n/**\r\n * Calculate the validation status for display purposes\r\n */\r\nexport function calculateValidationStatus(\r\n  documentType: string,\r\n  expiryDate?: Date | string | null,\r\n  documentDate?: Date | string | null\r\n): ValidationStatus {\r\n  const result = validateDocument({\r\n    documentType,\r\n    expiryDate,\r\n    documentDate,\r\n  })\r\n  return result.status\r\n}\r\n\r\n/**\r\n * Get human-readable label for validation status\r\n */\r\nexport function getValidationStatusLabel(status: ValidationStatus): string {\r\n  const labels: Record<ValidationStatus, string> = {\r\n    valid: 'Valid',\r\n    expired: 'Expired',\r\n    expiring_soon: 'Expiring Soon',\r\n    stale: 'Stale',\r\n    pending: 'Pending Review',\r\n    rejected: 'Rejected',\r\n  }\r\n  return labels[status] || 'Unknown'\r\n}\r\n\r\n/**\r\n * Get color class for validation status badge\r\n */\r\nexport function getValidationStatusColor(status: ValidationStatus): string {\r\n  const colors: Record<ValidationStatus, string> = {\r\n    valid: 'bg-green-500/20 text-green-400',\r\n    expired: 'bg-red-500/20 text-red-400',\r\n    expiring_soon: 'bg-amber-500/20 text-amber-400',\r\n    stale: 'bg-orange-500/20 text-orange-400',\r\n    pending: 'bg-blue-500/20 text-blue-400',\r\n    rejected: 'bg-red-500/20 text-red-400',\r\n  }\r\n  return colors[status] || 'bg-gray-500/20 text-gray-400'\r\n}\r\n\r\n/**\r\n * Format days until expiry for display\r\n */\r\nexport function formatExpiryCountdown(daysUntilExpiry: number): string {\r\n  if (daysUntilExpiry < 0) {\r\n    return `Expired ${Math.abs(daysUntilExpiry)} days ago`\r\n  }\r\n  if (daysUntilExpiry === 0) {\r\n    return 'Expires today'\r\n  }\r\n  if (daysUntilExpiry === 1) {\r\n    return 'Expires tomorrow'\r\n  }\r\n  if (daysUntilExpiry <= 7) {\r\n    return `Expires in ${daysUntilExpiry} days`\r\n  }\r\n  if (daysUntilExpiry <= 30) {\r\n    return `Expires in ${Math.ceil(daysUntilExpiry / 7)} weeks`\r\n  }\r\n  return `Expires in ${Math.ceil(daysUntilExpiry / 30)} months`\r\n}\r\n\r\n/**\r\n * Get documents that are expiring within a given number of days\r\n * Utility function for compliance dashboard queries\r\n */\r\nexport function getExpiryDateThreshold(daysFromNow: number): Date {\r\n  return addDays(new Date(), daysFromNow)\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1,2,3,4,5,6,7,8,9]}