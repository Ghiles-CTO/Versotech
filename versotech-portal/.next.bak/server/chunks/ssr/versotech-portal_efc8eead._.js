module.exports=[211374,a=>{"use strict";var b=a.i(352584),c=a.i(888987);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"skeleton",className:(0,c.cn)("bg-accent animate-pulse rounded-md",a),...d})}a.s(["Skeleton",()=>d])},155508,a=>{"use strict";let b=(0,a.i(95799).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],155508)},284169,a=>{"use strict";var b=a.i(352584),c=a.i(888987);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},42329,a=>{"use strict";let b=(0,a.i(95799).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],42329)},771088,a=>{"use strict";var b=a.i(352584),c=a.i(888987);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},294565,a=>{"use strict";let b=(0,a.i(95799).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);a.s(["ArrowUpDown",()=>b],294565)},48481,a=>{"use strict";var b=a.i(352584),c=a.i(284169),d=a.i(211374);function e(){return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:Array.from({length:3}).map((a,e)=>(0,b.jsxs)(c.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Skeleton,{className:"h-4 w-4 rounded"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-24"})]}),(0,b.jsx)(d.Skeleton,{className:"h-8 w-20 mt-2"}),(0,b.jsx)(d.Skeleton,{className:"h-3 w-32 mt-1"})]},e))}),(0,b.jsxs)(c.Card,{children:[(0,b.jsxs)(c.CardHeader,{className:"pb-2",children:[(0,b.jsx)(d.Skeleton,{className:"h-5 w-32"}),(0,b.jsx)(d.Skeleton,{className:"h-3 w-80 mt-1"})]}),(0,b.jsx)(c.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-9 gap-4 pb-2 border-b",children:[(0,b.jsx)(d.Skeleton,{className:"h-4 w-20"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-12"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-16"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-20"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-20"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-20"})]}),Array.from({length:8}).map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-9 gap-4 py-3",children:[(0,b.jsx)(d.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-10"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-12"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-14"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-16"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-16"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-12"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-12"}),(0,b.jsx)(d.Skeleton,{className:"h-4 w-12"})]},c))]})})]})]})}a.s(["CohortsSkeleton",()=>e])},192223,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(951870),f=a.i(48481),g=a.i(784021),h=a.i(391686),i=a.i(284169),j=a.i(421908),k=a.i(211374),l=a.i(771088),m=a.i(294565),n=a.i(478870),o=a.i(966494),p=a.i(42329),q=a.i(155508),r=a.i(888987);function s(a){return -1===a?"text-muted-foreground":a>=70?"text-emerald-600 dark:text-emerald-400":a>=40?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"}function t(a){return a>=50?"text-emerald-600 dark:text-emerald-400":a>=25?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"}function u(a){return -1===a?"N/A":`${a}%`}function v({groupBy:a}){let[d,e]=(0,c.useState)(null),[f,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]);(0,c.useEffect)(()=>{!async function(){v(!0),x(null);try{let b=await fetch(`/api/admin/growth/cohorts?groupBy=${a}`);if(!b.ok)throw Error("Failed to fetch cohort data");let c=await b.json();if(c.success&&c.data)e(c.data.cohorts);else throw Error(c.error||"No data available")}catch(a){x(a instanceof Error?a.message:"Failed to load data")}finally{v(!1)}}()},[a]);let A=(0,c.useMemo)(()=>[{accessorKey:"cohortName",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Cohort",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsx)("div",{className:"font-medium",children:a.getValue("cohortName")})},{accessorKey:"size",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Size",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(n.Users,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)("span",{children:a.getValue("size").toLocaleString()})]})},{accessorKey:"activationRate",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Activation",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("activationRate");return(0,b.jsxs)("span",{className:t(c),children:[c,"%"]})}},{accessorKey:"investmentRate",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Investment Rate",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("investmentRate");return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.TrendingUp,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsxs)("span",{className:t(c),children:[c,"%"]})]})}},{accessorKey:"avgInvestment",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Avg Investment",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("avgInvestment");return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.DollarSign,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)("span",{children:c>0?c>=1e6?`$${(c/1e6).toFixed(1)}M`:c>=1e3?`$${(c/1e3).toFixed(0)}K`:`$${c.toLocaleString()}`:"-"})]})}},{accessorKey:"avgTimeToFirstInvestment",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Days to Invest",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("avgTimeToFirstInvestment");return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(p.Clock,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)("span",{children:null!==c?`${c} days`:"-"})]})}},{accessorKey:"retention30d",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4 whitespace-nowrap",children:["30d Retention",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("retention30d");return(0,b.jsx)("span",{className:s(c),children:u(c)})}},{accessorKey:"retention60d",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4 whitespace-nowrap",children:["60d Retention",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("retention60d");return(0,b.jsx)("span",{className:s(c),children:u(c)})}},{accessorKey:"retention90d",header:({column:a})=>(0,b.jsxs)(j.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4 whitespace-nowrap",children:["90d Retention",(0,b.jsx)(m.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("retention90d");return(0,b.jsx)("span",{className:s(c),children:u(c)})}}],[]),B=(0,g.useReactTable)({data:d||[],columns:A,getCoreRowModel:(0,h.getCoreRowModel)(),getSortedRowModel:(0,h.getSortedRowModel)(),onSortingChange:z,state:{sorting:y}});if(f)return(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{className:"pb-2",children:[(0,b.jsx)(k.Skeleton,{className:"h-5 w-32"}),(0,b.jsx)(k.Skeleton,{className:"h-3 w-56 mt-1"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"grid grid-cols-9 gap-4 pb-2 border-b",children:Array.from({length:9}).map((a,c)=>(0,b.jsx)(k.Skeleton,{className:"h-4 w-16"},c))}),Array.from({length:8}).map((a,c)=>(0,b.jsx)("div",{className:"grid grid-cols-9 gap-4 py-3",children:Array.from({length:9}).map((a,c)=>(0,b.jsx)(k.Skeleton,{className:"h-4 w-14"},c))},c))]})})]});if(w)return(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{className:"text-base",children:"Cohort Analysis"}),(0,b.jsx)(i.CardDescription,{children:"Failed to load cohort data"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("p",{className:"text-destructive text-sm",children:w})})]});if(!d||0===d.length)return(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{className:"text-base",children:"Cohort Analysis"}),(0,b.jsx)(i.CardDescription,{children:"User cohort metrics and retention analysis"})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-muted p-4 mb-4",children:(0,b.jsx)(n.Users,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"No Cohort Data"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground max-w-md mt-1",children:"There are no users in the selected grouping yet. Try selecting a different cohort grouping."})]})})]});let C=d.reduce((a,b)=>a+b.size,0),D=d.reduce((a,b)=>a+b.activationRate,0)/d.length,E=d.reduce((a,b)=>a+b.investmentRate,0)/d.length;return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,b.jsxs)(i.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[(0,b.jsx)(n.Users,{className:"h-4 w-4"}),"Total Users"]}),(0,b.jsx)("div",{className:"text-2xl font-bold mt-1",children:C.toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["across ",d.length," cohorts"]})]}),(0,b.jsxs)(i.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[(0,b.jsx)(o.TrendingUp,{className:"h-4 w-4"}),"Avg Activation Rate"]}),(0,b.jsxs)("div",{className:(0,r.cn)("text-2xl font-bold mt-1",t(D)),children:[D.toFixed(1),"%"]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"profile completed"})]}),(0,b.jsxs)(i.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[(0,b.jsx)(q.DollarSign,{className:"h-4 w-4"}),"Avg Investment Rate"]}),(0,b.jsxs)("div",{className:(0,r.cn)("text-2xl font-bold mt-1",t(E)),children:[E.toFixed(1),"%"]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"made an investment"})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{className:"text-base",children:"Cohort Metrics"}),(0,b.jsx)(i.CardDescription,{children:"Click column headers to sort. Retention shows user activity at 30/60/90 days after joining."})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:B.getHeaderGroups().map(a=>(0,b.jsx)(l.TableRow,{children:a.headers.map(a=>(0,b.jsx)(l.TableHead,{className:"whitespace-nowrap",children:a.isPlaceholder?null:(0,g.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(l.TableBody,{children:B.getRowModel().rows.map(a=>(0,b.jsx)(l.TableRow,{children:a.getVisibleCells().map(a=>(0,b.jsx)(l.TableCell,{children:(0,g.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id))})]})})})]})]})}let w=[{value:"signup_month",label:"By Signup Month"},{value:"signup_week",label:"By Signup Week"},{value:"first_investment_month",label:"By First Investment Month"}];function x(){let a=(0,d.useSearchParams)(),c=(0,d.useRouter)(),f=(0,d.usePathname)(),g=a.get("groupBy")||"signup_month";return(0,b.jsxs)(e.Select,{value:g,onValueChange:b=>{let d=new URLSearchParams(a.toString());d.set("groupBy",b),c.push(`${f}?${d.toString()}`)},children:[(0,b.jsx)(e.SelectTrigger,{className:"w-[220px]",children:(0,b.jsx)(e.SelectValue,{placeholder:"Select grouping"})}),(0,b.jsx)(e.SelectContent,{children:w.map(a=>(0,b.jsx)(e.SelectItem,{value:a.value,children:a.label},a.value))})]})}function y(){let a=(0,d.useSearchParams)().get("groupBy")||"signup_month";return(0,b.jsx)(v,{groupBy:a})}function z(){return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Cohort Analysis"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Analyze user behavior patterns by signup or investment cohorts"})]}),(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"h-10 w-[220px] rounded-md bg-muted animate-pulse"}),children:(0,b.jsx)(x,{})})]}),(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(f.CohortsSkeleton,{}),children:(0,b.jsx)(y,{})})]})}a.s(["default",()=>z],192223)}];

//# sourceMappingURL=versotech-portal_efc8eead._.js.map