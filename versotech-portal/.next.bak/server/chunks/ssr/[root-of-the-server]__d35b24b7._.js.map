{"version":3,"sources":["../../../../../versotech-portal/node_modules/lucide-react/src/defaultAttributes.ts","../../../../../versotech-portal/node_modules/shared/src/utils.ts","../../../../../versotech-portal/node_modules/lucide-react/src/createLucideIcon.ts","../../../../../versotech-portal/node_modules/lucide-react/src/Icon.ts","../../../../../versotech-portal/node_modules/lucide-react/src/icons/circle-alert.ts","../../../../../versotech-portal/src/components/deals/investor-deals-list-client.tsx/__nextjs-internal-proxy.mjs","../../../../../versotech-portal/src/app/%28main%29/versotech_main/opportunities/page.tsx"],"sourcesContent":["export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","import { CamelToPascal } from './utility-types';\n\n/**\n * Converts string to kebab case\n *\n * @param {string} string\n * @returns {string} A kebabized string\n */\nexport const toKebabCase = (string: string) =>\n  string.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n\n/**\n * Converts string to camel case\n *\n * @param {string} string\n * @returns {string} A camelized string\n */\nexport const toCamelCase = <T extends string>(string: T) =>\n  string.replace(/^([A-Z])|[\\s-_]+(\\w)/g, (match, p1, p2) =>\n    p2 ? p2.toUpperCase() : p1.toLowerCase(),\n  );\n\n/**\n * Converts string to pascal case\n *\n * @param {string} string\n * @returns {string} A pascalized string\n */\nexport const toPascalCase = <T extends string>(string: T): CamelToPascal<T> => {\n  const camelCase = toCamelCase(string);\n\n  return (camelCase.charAt(0).toUpperCase() + camelCase.slice(1)) as CamelToPascal<T>;\n};\n\n/**\n * Merges classes into a single string\n *\n * @param {array} classes\n * @returns {string} A string of classes\n */\nexport const mergeClasses = <ClassType = string | undefined | null>(...classes: ClassType[]) =>\n  classes\n    .filter((className, index, array) => {\n      return (\n        Boolean(className) &&\n        (className as string).trim() !== '' &&\n        array.indexOf(className) === index\n      );\n    })\n    .join(' ')\n    .trim();\n\n/**\n * Is empty string\n *\n * @param {unknown} value\n * @returns {boolean} Whether the value is an empty string\n */\nexport const isEmptyString = (value: unknown): boolean => value === '';\n\n/**\n * Check if a component has an accessibility prop\n *\n * @param {object} props\n * @returns {boolean} Whether the component has an accessibility prop\n */\nexport const hasA11yProp = (props: Record<string, any>) => {\n  for (const prop in props) {\n    if (prop.startsWith('aria-') || prop === 'role' || prop === 'title') {\n      return true;\n    }\n  }\n};\n","import { createElement, forwardRef } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from '@lucide/shared';\nimport { IconNode, LucideProps } from './types';\nimport Icon from './Icon';\n\n/**\n * Create a Lucide icon component\n * @param {string} iconName\n * @param {array} iconNode\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst createLucideIcon = (iconName: string, iconNode: IconNode) => {\n  const Component = forwardRef<SVGSVGElement, LucideProps>(({ className, ...props }, ref) =>\n    createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className,\n      ),\n      ...props,\n    }),\n  );\n\n  Component.displayName = toPascalCase(iconName);\n\n  return Component;\n};\n\nexport default createLucideIcon;\n","import { createElement, forwardRef } from 'react';\nimport defaultAttributes from './defaultAttributes';\nimport { IconNode, LucideProps } from './types';\nimport { mergeClasses, hasA11yProp } from '@lucide/shared';\n\ninterface IconComponentProps extends LucideProps {\n  iconNode: IconNode;\n}\n\n/**\n * Lucide icon component\n *\n * @component Icon\n * @param {object} props\n * @param {string} props.color - The color of the icon\n * @param {number} props.size - The size of the icon\n * @param {number} props.strokeWidth - The stroke width of the icon\n * @param {boolean} props.absoluteStrokeWidth - Whether to use absolute stroke width\n * @param {string} props.className - The class name of the icon\n * @param {IconNode} props.children - The children of the icon\n * @param {IconNode} props.iconNode - The icon node of the icon\n *\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst Icon = forwardRef<SVGSVGElement, IconComponentProps>(\n  (\n    {\n      color = 'currentColor',\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = '',\n      children,\n      iconNode,\n      ...rest\n    },\n    ref,\n  ) =>\n    createElement(\n      'svg',\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? (Number(strokeWidth) * 24) / Number(size) : strokeWidth,\n        className: mergeClasses('lucide', className),\n        ...(!children && !hasA11yProp(rest) && { 'aria-hidden': 'true' }),\n        ...rest,\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]),\n      ],\n    ),\n);\n\nexport default Icon;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n];\n\n/**\n * @component @name CircleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleAlert = createLucideIcon('circle-alert', __iconNode);\n\nexport default CircleAlert;\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const InvestorDealsListClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call InvestorDealsListClient() from the server but InvestorDealsListClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/versotech-portal/src/components/deals/investor-deals-list-client.tsx\",\n    \"InvestorDealsListClient\",\n);\n","import { createClient, createServiceClient } from '@/lib/supabase/server'\r\nimport { AlertCircle } from 'lucide-react'\r\nimport { InvestorDealsListClient } from '@/components/deals/investor-deals-list-client'\r\n\r\nexport const dynamic = 'force-dynamic'\r\n\r\ntype Nullable<T> = T | null\r\n\r\n// ============================================================================\r\n// Partner Referral Types (US-5.6.1-01 through 07)\r\n// ============================================================================\r\n\r\ninterface PartnerReferral {\r\n  deal_id: string\r\n  investor_id: string\r\n  investor_name: string\r\n  dispatched_at: string | null\r\n  interest_confirmed_at: string | null\r\n}\r\n\r\ninterface ReferralSubscription {\r\n  investor_id: string\r\n  deal_id: string\r\n  status: string\r\n  commitment: number | null\r\n  currency: string | null\r\n  funded_at: string | null\r\n  signed_at: string | null\r\n}\r\n\r\ninterface PartnerCommission {\r\n  deal_id: string\r\n  investor_id: string\r\n  rate_bps: number | null\r\n  accrual_amount: number | null\r\n  currency: string | null\r\n  status: string\r\n}\r\n\r\ninterface PartnerSummary {\r\n  totalReferrals: number\r\n  converted: number // funded subscriptions\r\n  pipelineValue: number // sum of commitments in progress\r\n  pendingCommissions: number // sum of accrued commissions\r\n  currency: string\r\n}\r\n\r\n// ============================================================================\r\n// Investor Deal Types\r\n// ============================================================================\r\n\r\ninterface InvestorDeal {\r\n  id: string\r\n  name: string\r\n  deal_type: string\r\n  status: string\r\n  currency: string\r\n  offer_unit_price: number | null\r\n  open_at: string | null\r\n  close_at: string | null\r\n  created_at: string\r\n  description?: string | null\r\n  investment_thesis?: string | null\r\n  minimum_investment?: number | null\r\n  maximum_investment?: number | null\r\n  target_amount?: number | null\r\n  company_name?: string | null\r\n  company_logo_url?: string | null\r\n  company_website?: string | null\r\n  sector?: string | null\r\n  stage?: string | null\r\n  location?: string | null\r\n  vehicles?: {\r\n    id: string\r\n    name: string\r\n    type: string\r\n  }\r\n  deal_memberships: Array<{\r\n    role: string\r\n    accepted_at: string | null\r\n    dispatched_at: string | null\r\n  }>\r\n  fee_plans: Array<{\r\n    id: string\r\n    name: string\r\n    description: string | null\r\n    is_default: boolean\r\n    fee_components: Array<{\r\n      id: string\r\n      kind: string\r\n      calc_method: string\r\n      rate_bps: number | null\r\n      flat_amount: number | null\r\n      frequency: string | null\r\n      notes: string | null\r\n    }>\r\n  }>\r\n}\r\n\r\ninterface FeeStructure {\r\n  id: string\r\n  deal_id: string\r\n  created_at?: string\r\n  effective_at?: string | null\r\n  published_at?: string | null\r\n  allocation_up_to: number | null\r\n  price_per_share_text: string | null\r\n  minimum_ticket: number | null\r\n  term_sheet_date: string | null\r\n  transaction_type: string | null\r\n  opportunity_summary: string | null\r\n  issuer: string | null\r\n  vehicle: string | null\r\n  exclusive_arranger: string | null\r\n  purchaser: string | null\r\n  seller: string | null\r\n  structure: string | null\r\n  subscription_fee_percent: number | null\r\n  management_fee_percent: number | null\r\n  carried_interest_percent: number | null\r\n  legal_counsel: string | null\r\n  interest_confirmation_deadline: string | null\r\n  completion_date: string | null\r\n  completion_date_text: string | null\r\n  validity_date: string | null\r\n  term_sheet_attachment_key: string | null\r\n}\r\n\r\ninterface DealInterest {\r\n  id: string\r\n  deal_id: string\r\n  investor_id: string\r\n  status: 'pending_review' | 'approved' | 'rejected' | 'withdrawn'\r\n  submitted_at: string\r\n  approved_at: string | null\r\n  indicative_amount: number | null\r\n  indicative_currency: string | null\r\n  is_post_close: boolean\r\n}\r\n\r\ninterface DataRoomAccess {\r\n  id: string\r\n  deal_id: string\r\n  investor_id: string\r\n  granted_at: string\r\n  expires_at: string | null\r\n  auto_granted: boolean\r\n  revoked_at: string | null\r\n}\r\n\r\ninterface SubscriptionSubmission {\r\n  id: string\r\n  deal_id: string\r\n  investor_id: string\r\n  status: string\r\n  submitted_at: string\r\n}\r\n\r\nfunction groupByDealId<T extends { deal_id: string }>(\r\n  records: T[]\r\n) {\r\n  const map = new Map<string, T>()\r\n  for (const record of records) {\r\n    const existing = map.get(record.deal_id)\r\n    const currentTimestamp = 'submitted_at' in record\r\n      ? new Date((record as { submitted_at: string }).submitted_at).getTime()\r\n      : 'granted_at' in record\r\n        ? new Date((record as { granted_at: string }).granted_at).getTime()\r\n        : 0\r\n\r\n    if (!existing) {\r\n      map.set(record.deal_id, record)\r\n      continue\r\n    }\r\n\r\n    const existingTimestamp = 'submitted_at' in existing\r\n      ? new Date((existing as { submitted_at: string }).submitted_at).getTime()\r\n      : 'granted_at' in existing\r\n        ? new Date((existing as { granted_at: string }).granted_at).getTime()\r\n        : 0\r\n\r\n    if (currentTimestamp > existingTimestamp) {\r\n      map.set(record.deal_id, record)\r\n    }\r\n  }\r\n  return map\r\n}\r\n\r\n/**\r\n * Opportunities List Page - Unified Portal\r\n *\r\n * Access: Any user with deal_memberships (investors, partners, introducers, CPs, lawyers)\r\n * The deal_memberships table tracks who has access to which deals.\r\n */\r\nexport default async function OpportunitiesPage() {\r\n  const clientSupabase = await createClient()\r\n  const { data: { user }, error: userError } = await clientSupabase.auth.getUser()\r\n\r\n  if (!user || userError) {\r\n    throw new Error('Authentication required')\r\n  }\r\n\r\n  const serviceSupabase = createServiceClient()\r\n\r\n  // Fetch all deals accessible to this user via deal_memberships\r\n  // This works for ALL persona types: investors, partners, introducers, CPs, lawyers, arrangers\r\n  const { data: deals, error: dealsError } = await serviceSupabase\r\n    .from('deals')\r\n    .select(`\r\n      *,\r\n      vehicles (\r\n        id,\r\n        name,\r\n        type\r\n      ),\r\n      deal_memberships!inner (\r\n        role,\r\n        accepted_at,\r\n        dispatched_at\r\n      ),\r\n      fee_plans (\r\n        id,\r\n        name,\r\n        description,\r\n        is_default,\r\n        fee_components (\r\n          id,\r\n          kind,\r\n          calc_method,\r\n          rate_bps,\r\n          flat_amount,\r\n          frequency,\r\n          notes\r\n        )\r\n      )\r\n    `)\r\n    .eq('deal_memberships.user_id', user.id)\r\n    .order('status', { ascending: true })\r\n    .order('close_at', { ascending: true, nullsFirst: false })\r\n\r\n  if (dealsError) {\r\n    console.error('Failed to load deals', dealsError)\r\n  }\r\n\r\n  const dealsData = (deals ?? []) as unknown as InvestorDeal[]\r\n\r\n  // If user has no deal memberships, show appropriate message\r\n  if (dealsData.length === 0) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"text-center py-16\">\r\n          <AlertCircle className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n            No opportunities available\r\n          </h3>\r\n          <p className=\"text-muted-foreground\">\r\n            You haven&apos;t been dispatched to any investment opportunities yet.\r\n            <br />\r\n            Please contact your relationship manager for access.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Get investor IDs if user has investor persona (optional - for interest/subscription tracking)\r\n  const { data: investorLinks } = await serviceSupabase\r\n    .from('investor_users')\r\n    .select('investor_id')\r\n    .eq('user_id', user.id)\r\n\r\n  const investorIds = investorLinks?.map(link => link.investor_id) ?? []\r\n  const primaryInvestorId = investorIds[0] ?? null\r\n\r\n  // Get partner ID if user is a partner (PRD Rows 95-96: Partner Share feature)\r\n  const { data: partnerUser } = await serviceSupabase\r\n    .from('partner_users')\r\n    .select('partner_id')\r\n    .eq('user_id', user.id)\r\n    .maybeSingle()\r\n\r\n  const partnerId = partnerUser?.partner_id ?? null\r\n  const dealIds = dealsData.map(deal => deal.id)\r\n\r\n  // ============================================================================\r\n  // Partner Referral Data (US-5.6.1-01 through 07)\r\n  // Fetch referrals, subscription statuses, and commissions for Partner persona\r\n  // ============================================================================\r\n\r\n  let referralsByDeal = new Map<string, PartnerReferral[]>()\r\n  let referralSubscriptionsByDeal = new Map<string, ReferralSubscription[]>()\r\n  let partnerCommissionsByDeal = new Map<string, PartnerCommission[]>()\r\n  let partnerSummary: PartnerSummary = {\r\n    totalReferrals: 0,\r\n    converted: 0,\r\n    pipelineValue: 0,\r\n    pendingCommissions: 0,\r\n    currency: 'USD'\r\n  }\r\n\r\n  if (partnerId && dealIds.length > 0) {\r\n    // 1. Get all deal_memberships where this partner referred investors\r\n    const { data: referralsRaw } = await serviceSupabase\r\n      .from('deal_memberships')\r\n      .select(`\r\n        deal_id,\r\n        investor_id,\r\n        dispatched_at,\r\n        interest_confirmed_at,\r\n        investors:investor_id (\r\n          id,\r\n          legal_name,\r\n          display_name\r\n        )\r\n      `)\r\n      .eq('referred_by_entity_id', partnerId)\r\n      .eq('referred_by_entity_type', 'partner')\r\n      .in('deal_id', dealIds)\r\n\r\n    // Process referrals - group by deal_id\r\n    if (referralsRaw && referralsRaw.length > 0) {\r\n      const referrals: PartnerReferral[] = referralsRaw.map(r => {\r\n        // Supabase returns the joined investor as a single object (not array) when using investor_id FK\r\n        const investor = r.investors as unknown as { id: string; legal_name: string; display_name: string | null } | null\r\n        return {\r\n          deal_id: r.deal_id,\r\n          investor_id: r.investor_id,\r\n          investor_name: investor?.display_name || investor?.legal_name || 'Unknown Investor',\r\n          dispatched_at: r.dispatched_at,\r\n          interest_confirmed_at: r.interest_confirmed_at\r\n        }\r\n      })\r\n\r\n      // Group referrals by deal_id\r\n      for (const referral of referrals) {\r\n        const existing = referralsByDeal.get(referral.deal_id) || []\r\n        existing.push(referral)\r\n        referralsByDeal.set(referral.deal_id, existing)\r\n      }\r\n\r\n      // 2. Get subscription statuses for referred investors\r\n      const referredInvestorIds = [...new Set(referrals.map(r => r.investor_id))]\r\n\r\n      const { data: subscriptionsRaw } = await serviceSupabase\r\n        .from('subscriptions')\r\n        .select('investor_id, deal_id, status, commitment, currency, funded_at, signed_at')\r\n        .in('investor_id', referredInvestorIds)\r\n        .in('deal_id', dealIds)\r\n\r\n      if (subscriptionsRaw) {\r\n        // Group subscriptions by deal_id\r\n        for (const sub of subscriptionsRaw) {\r\n          const existing = referralSubscriptionsByDeal.get(sub.deal_id) || []\r\n          existing.push(sub as ReferralSubscription)\r\n          referralSubscriptionsByDeal.set(sub.deal_id, existing)\r\n        }\r\n      }\r\n\r\n      // 3. Get partner commissions for fee rate display and pending amounts\r\n      const { data: commissionsRaw } = await serviceSupabase\r\n        .from('partner_commissions')\r\n        .select('deal_id, investor_id, rate_bps, accrual_amount, currency, status')\r\n        .eq('partner_id', partnerId)\r\n        .in('deal_id', dealIds)\r\n\r\n      if (commissionsRaw) {\r\n        // Group commissions by deal_id\r\n        for (const comm of commissionsRaw) {\r\n          const existing = partnerCommissionsByDeal.get(comm.deal_id) || []\r\n          existing.push(comm as PartnerCommission)\r\n          partnerCommissionsByDeal.set(comm.deal_id, existing)\r\n        }\r\n      }\r\n\r\n      // 4. Calculate Partner summary metrics\r\n      const fundedStatuses = ['funded', 'active', 'activated', 'committed']\r\n      const pipelineStatuses = ['pending', 'pending_review', 'approved', 'signed', 'pack_sent', 'pack_generated']\r\n\r\n      let totalPipelineValue = 0\r\n      let totalPendingCommissions = 0\r\n      let convertedCount = 0\r\n      let detectedCurrency = 'USD'\r\n\r\n      // Count conversions and pipeline value from subscriptions\r\n      for (const [, subs] of referralSubscriptionsByDeal) {\r\n        for (const sub of subs) {\r\n          if (sub.currency) detectedCurrency = sub.currency\r\n          if (fundedStatuses.includes(sub.status?.toLowerCase())) {\r\n            convertedCount++\r\n          } else if (pipelineStatuses.includes(sub.status?.toLowerCase()) && sub.commitment) {\r\n            totalPipelineValue += Number(sub.commitment)\r\n          }\r\n        }\r\n      }\r\n\r\n      // Sum pending commissions\r\n      for (const [, comms] of partnerCommissionsByDeal) {\r\n        for (const comm of comms) {\r\n          if (comm.status === 'accrued' && comm.accrual_amount) {\r\n            totalPendingCommissions += Number(comm.accrual_amount)\r\n            if (comm.currency) detectedCurrency = comm.currency\r\n          }\r\n        }\r\n      }\r\n\r\n      partnerSummary = {\r\n        totalReferrals: referrals.length,\r\n        converted: convertedCount,\r\n        pipelineValue: totalPipelineValue,\r\n        pendingCommissions: totalPendingCommissions,\r\n        currency: detectedCurrency\r\n      }\r\n    }\r\n  }\r\n\r\n  // ============================================================================\r\n  // Investor-Specific Data\r\n  // ============================================================================\r\n\r\n  let feeStructureMap = new Map<string, FeeStructure>()\r\n  let investorInterests: DealInterest[] = []\r\n  let ndaAccessRecords: DataRoomAccess[] = []\r\n  let subscriptionRecords: SubscriptionSubmission[] = []\r\n\r\n  if (dealIds.length > 0) {\r\n    const { data: feeStructures } = await serviceSupabase\r\n      .from('deal_fee_structures')\r\n      .select(`\r\n        id,\r\n        deal_id,\r\n        created_at,\r\n        effective_at,\r\n        published_at,\r\n        allocation_up_to,\r\n        price_per_share_text,\r\n        minimum_ticket,\r\n        term_sheet_date,\r\n        transaction_type,\r\n        opportunity_summary,\r\n        issuer,\r\n        vehicle,\r\n        exclusive_arranger,\r\n        purchaser,\r\n        seller,\r\n        structure,\r\n        subscription_fee_percent,\r\n        management_fee_percent,\r\n        carried_interest_percent,\r\n        legal_counsel,\r\n        interest_confirmation_deadline,\r\n        completion_date,\r\n        completion_date_text,\r\n        validity_date,\r\n        term_sheet_attachment_key\r\n      `)\r\n      .in('deal_id', dealIds)\r\n      .eq('status', 'published')\r\n      .order('effective_at', { ascending: false })\r\n\r\n      if (feeStructures && feeStructures.length > 0) {\r\n      feeStructureMap = feeStructures.reduce((map, structure) => {\r\n        const existing = map.get(structure.deal_id)\r\n        if (!existing) {\r\n          map.set(structure.deal_id, structure)\r\n          return map\r\n        }\r\n\r\n        const getTimestamp = (item: FeeStructure) => {\r\n          const candidate =\r\n            item.effective_at ??\r\n            item.published_at ??\r\n            item.validity_date ??\r\n            item.term_sheet_date ??\r\n            item.created_at ??\r\n            null\r\n          return candidate ? new Date(candidate).getTime() : 0\r\n        }\r\n\r\n        if (getTimestamp(structure) > getTimestamp(existing)) {\r\n          map.set(structure.deal_id, structure)\r\n        }\r\n        return map\r\n      }, new Map<string, FeeStructure>())\r\n    }\r\n\r\n    if (investorIds.length > 0) {\r\n      const { data: interests } = await serviceSupabase\r\n        .from('investor_deal_interest')\r\n        .select(`\r\n          id,\r\n          deal_id,\r\n          investor_id,\r\n          status,\r\n          submitted_at,\r\n          approved_at,\r\n          indicative_amount,\r\n          indicative_currency,\r\n          is_post_close\r\n        `)\r\n        .in('deal_id', dealIds)\r\n        .in('investor_id', investorIds)\r\n        .order('submitted_at', { ascending: false })\r\n\r\n      investorInterests = interests ?? []\r\n\r\n      const { data: accessData } = await serviceSupabase\r\n        .from('deal_data_room_access')\r\n        .select(`\r\n          id,\r\n          deal_id,\r\n          investor_id,\r\n          granted_at,\r\n          expires_at,\r\n          auto_granted,\r\n          revoked_at\r\n        `)\r\n        .in('deal_id', dealIds)\r\n        .in('investor_id', investorIds)\r\n        .order('granted_at', { ascending: false })\r\n\r\n      ndaAccessRecords = (accessData ?? []).filter(record => !record.revoked_at)\r\n\r\n      const { data: subscriptionData } = await serviceSupabase\r\n        .from('deal_subscription_submissions')\r\n        .select(`\r\n          id,\r\n          deal_id,\r\n          investor_id,\r\n          status,\r\n          submitted_at\r\n        `)\r\n        .in('deal_id', dealIds)\r\n        .in('investor_id', investorIds)\r\n        .order('submitted_at', { ascending: false })\r\n\r\n      subscriptionRecords = subscriptionData ?? []\r\n    }\r\n  }\r\n\r\n  const interestByDeal = groupByDealId(investorInterests)\r\n  const accessByDeal = groupByDealId(ndaAccessRecords)\r\n  const subscriptionByDeal = groupByDealId(subscriptionRecords)\r\n\r\n  // Calculate summary statistics (client-side filtering for getEffectiveStatus compatibility)\r\n  const now = new Date()\r\n  const summary = {\r\n    totalDeals: dealsData.length,\r\n    openDeals: dealsData.filter(deal => {\r\n      if (deal.status === 'closed' || deal.status === 'cancelled') return false\r\n      if (deal.close_at && new Date(deal.close_at) < now) return false\r\n      return deal.status === 'open'\r\n    }).length,\r\n    pendingInterests: investorInterests.filter(interest => interest.status === 'pending_review').length,\r\n    activeNdas: ndaAccessRecords.length,\r\n    submittedSubscriptions: subscriptionRecords.length\r\n  }\r\n\r\n  // Convert Maps to serializable objects for client component\r\n  const referralsByDealObj = Object.fromEntries(referralsByDeal)\r\n  const referralSubscriptionsByDealObj = Object.fromEntries(referralSubscriptionsByDeal)\r\n  const partnerCommissionsByDealObj = Object.fromEntries(partnerCommissionsByDeal)\r\n\r\n  return (\r\n    <InvestorDealsListClient\r\n      dealsData={dealsData}\r\n      feeStructureMap={feeStructureMap}\r\n      interestByDeal={interestByDeal}\r\n      accessByDeal={accessByDeal}\r\n      subscriptionByDeal={subscriptionByDeal}\r\n      primaryInvestorId={primaryInvestorId}\r\n      partnerId={partnerId}\r\n      summary={summary}\r\n      detailUrlBase=\"/versotech_main/opportunities\"\r\n      // Partner-specific props (US-5.6.1-01 through 07)\r\n      referralsByDeal={referralsByDealObj}\r\n      referralSubscriptionsByDeal={referralSubscriptionsByDealObj}\r\n      partnerCommissionsByDeal={partnerCommissionsByDealObj}\r\n      partnerSummary={partnerSummary}\r\n    />\r\n  )\r\n}\r\n"],"names":[],"mappings":"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,CAAlB,CAAA,CAAA,CAAA,CAAA,AACxB,CADwB,CAAA,CAAkB,CAAA,AAC1C,CAD0C,CAAA,AAC1C,CAD0C,AAC1C,CADiE,CAC/C,EAAA,UAAA,CDgB2B,CChBY,CAAC,CCetD,AHrBJ,AEM0D,AAAE,WAAA,CCehD,AHrBJ,ACuBF,ACjBsD,AAAW,CFN/D,AEM+D,ACe3D,AFEN,ECjBoE,CFNlE,AGqBI,AFEM,ACjBwD,CFNlE,AGqBI,AFEM,ACjBwD,ADiBxD,CCjBwD,AFNlE,AGqBI,AFEM,ACjBiE,CCevE,ADf8D,ADiBxD,ACjBiE,GACjF,CDgBkC,CChBlC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,EAAc,EAAM,EAAN,CAAA,EACZ,CCcA,ADdA,AFPJ,CAAA,AGqBI,ADdA,SACA,CAAA,AFPJ,AGqBI,CAAA,ADdA,AFPJ,AEQI,CCcA,ADfA,AFPJ,AGqBI,ADbA,CFRJ,AGqBI,ADdA,ACeA,ADdA,CCaA,AHrBJ,AEOI,ACeA,ADdA,CCaA,AHrBJ,AEOI,ACeA,ADdA,CCaA,AHrBJ,AEOI,AACA,ACcA,CHtBJ,AGqBI,ADdA,ACeA,ADdA,CCaA,AHrBJ,AGsBI,ADdA,CAAA,ACcA,CAAA,ADdA,CFPJ,AGqBI,ADdW,EACT,CAAA,CCcF,ADdE,CCcF,ADdE,CCcF,ADdE,CCcF,ADdE,CAAA,CAAA,CAAA,EAAsB,AAAZ,ADRhB,CAAA,AAmCc,AC3BE,CD2BF,AC3BE,AAAyB,ADRzC,CAAA,AAmCc,AC3BE,AD4BY,AC5Ba,CD2B3B,AC3BE,ADRhB,CAAO,AAmCO,AC3BE,ADRhB,CAmCc,AAnCd,AAAO,ACQS,CDRT,AAmCO,AC3BE,CDRT,AAmCgB,AC3BP,CDRT,AAmCgB,AC3BP,CDRT,AAmCgB,AC3BP,CD2BO,AAnChB,ACQS,CDRT,CAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAsB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAO,EAAE,CAAA,CAAA,CAAA,CAAA,CA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","ignoreList":[0,1,2,3,4,5]}