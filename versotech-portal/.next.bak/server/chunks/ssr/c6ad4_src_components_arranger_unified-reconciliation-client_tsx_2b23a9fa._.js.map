{"version":3,"sources":["../../../../../versotech-portal/src/components/arranger/unified-reconciliation-client.tsx","../../../../../versotech-portal/src/components/arranger/reconciliation-tabs/overview-tab.tsx","../../../../../versotech-portal/src/components/arranger/reconciliation-tabs/commission-tab.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter, useSearchParams } from 'next/navigation'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs'\nimport {\n  Building2,\n  Users,\n  UserPlus,\n  FileSpreadsheet,\n  LayoutDashboard,\n} from 'lucide-react'\n\n// Import sub-components for each tab\nimport { OverviewTab } from './reconciliation-tabs/overview-tab'\nimport { CommissionTab } from './reconciliation-tabs/commission-tab'\n\n// Types\ntype ArrangerInfo = {\n  id: string\n  name: string\n  is_active: boolean\n}\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n  target_amount: number | null\n  currency: string\n  status: string\n}\n\ntype Introducer = {\n  id: string\n  legal_name: string\n}\n\ntype Partner = {\n  id: string\n  name: string\n  legal_name: string\n}\n\ntype CommercialPartner = {\n  id: string\n  name: string\n  legal_name: string\n}\n\ntype TabCounts = {\n  overview: number\n  introducers: number\n  partners: number\n  commercialPartners: number\n}\n\ninterface UnifiedReconciliationClientProps {\n  arrangerInfo: ArrangerInfo | null\n  deals: Deal[]\n  introducers: Introducer[]\n  partners: Partner[]\n  commercialPartners: CommercialPartner[]\n  tabCounts: TabCounts\n  initialTab: string\n}\n\nexport function UnifiedReconciliationClient({\n  arrangerInfo,\n  deals,\n  introducers,\n  partners,\n  commercialPartners,\n  tabCounts,\n  initialTab,\n}: UnifiedReconciliationClientProps) {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const [activeTab, setActiveTab] = useState(initialTab)\n\n  // Update URL when tab changes\n  const handleTabChange = (value: string) => {\n    setActiveTab(value)\n    const params = new URLSearchParams(searchParams.toString())\n    params.set('tab', value)\n    router.push(`?${params.toString()}`, { scroll: false })\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground flex items-center gap-2\">\n            <FileSpreadsheet className=\"h-6 w-6\" />\n            Reconciliation\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">\n            View and manage commissions across all your partner relationships\n          </p>\n        </div>\n        {arrangerInfo && (\n          <div className=\"flex items-center gap-2\">\n            <Badge variant={arrangerInfo.is_active ? 'default' : 'secondary'}>\n              {arrangerInfo.name}\n            </Badge>\n          </div>\n        )}\n      </div>\n\n      {/* Main Tabs */}\n      <Tabs value={activeTab} onValueChange={handleTabChange} className=\"space-y-6\">\n        <TabsList className=\"grid grid-cols-2 md:grid-cols-4 w-full md:w-auto\">\n          <TabsTrigger value=\"overview\" className=\"flex items-center gap-2\">\n            <LayoutDashboard className=\"h-4 w-4\" />\n            <span className=\"hidden sm:inline\">Overview</span>\n            {tabCounts.overview > 0 && (\n              <Badge variant=\"secondary\" className=\"ml-1 h-5 px-1.5 text-xs\">\n                {tabCounts.overview}\n              </Badge>\n            )}\n          </TabsTrigger>\n          <TabsTrigger value=\"introducers\" className=\"flex items-center gap-2\">\n            <UserPlus className=\"h-4 w-4\" />\n            <span className=\"hidden sm:inline\">Introducers</span>\n            {tabCounts.introducers > 0 && (\n              <Badge variant=\"secondary\" className=\"ml-1 h-5 px-1.5 text-xs\">\n                {tabCounts.introducers}\n              </Badge>\n            )}\n          </TabsTrigger>\n          <TabsTrigger value=\"partners\" className=\"flex items-center gap-2\">\n            <Users className=\"h-4 w-4\" />\n            <span className=\"hidden sm:inline\">Partners</span>\n            {tabCounts.partners > 0 && (\n              <Badge variant=\"secondary\" className=\"ml-1 h-5 px-1.5 text-xs\">\n                {tabCounts.partners}\n              </Badge>\n            )}\n          </TabsTrigger>\n          <TabsTrigger value=\"commercial-partners\" className=\"flex items-center gap-2\">\n            <Building2 className=\"h-4 w-4\" />\n            <span className=\"hidden sm:inline\">Commercial</span>\n            {tabCounts.commercialPartners > 0 && (\n              <Badge variant=\"secondary\" className=\"ml-1 h-5 px-1.5 text-xs\">\n                {tabCounts.commercialPartners}\n              </Badge>\n            )}\n          </TabsTrigger>\n        </TabsList>\n\n        {/* Overview Tab */}\n        <TabsContent value=\"overview\" className=\"space-y-6\">\n          <OverviewTab deals={deals} />\n        </TabsContent>\n\n        {/* Introducers Tab */}\n        <TabsContent value=\"introducers\" className=\"space-y-6\">\n          <CommissionTab\n            type=\"introducer\"\n            entities={introducers.map(i => ({ id: i.id, name: i.legal_name }))}\n            deals={deals}\n            apiEndpoint=\"/api/arrangers/me/reports/introducer-reconciliation\"\n            entityLabel=\"Introducer\"\n            entityPlural=\"Introducers\"\n          />\n        </TabsContent>\n\n        {/* Partners Tab */}\n        <TabsContent value=\"partners\" className=\"space-y-6\">\n          <CommissionTab\n            type=\"partner\"\n            entities={partners.map(p => ({ id: p.id, name: p.name || p.legal_name }))}\n            deals={deals}\n            apiEndpoint=\"/api/arrangers/me/reports/partner-reconciliation\"\n            entityLabel=\"Partner\"\n            entityPlural=\"Partners\"\n          />\n        </TabsContent>\n\n        {/* Commercial Partners Tab */}\n        <TabsContent value=\"commercial-partners\" className=\"space-y-6\">\n          <CommissionTab\n            type=\"commercial_partner\"\n            entities={commercialPartners.map(cp => ({ id: cp.id, name: cp.name || cp.legal_name }))}\n            deals={deals}\n            apiEndpoint=\"/api/arrangers/me/reports/commercial-partner-reconciliation\"\n            entityLabel=\"Commercial Partner\"\n            entityPlural=\"Commercial Partners\"\n          />\n        </TabsContent>\n      </Tabs>\n    </div>\n  )\n}\n","'use client'\r\n\r\nimport { useEffect, useState, useMemo } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table'\r\nimport {\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n} from '@/components/ui/tabs'\r\nimport {\r\n  DollarSign,\r\n  FileText,\r\n  Search,\r\n  CheckCircle2,\r\n  Clock,\r\n  TrendingUp,\r\n  Building2,\r\n  AlertCircle,\r\n  CreditCard,\r\n  Loader2,\r\n  RefreshCcw,\r\n} from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { formatDate, formatCurrency } from '@/lib/format'\r\nimport { createClient } from '@/lib/supabase/client'\r\n\r\n// Types\r\ntype Deal = {\r\n  id: string\r\n  name: string\r\n  company_name: string | null\r\n  target_amount: number | null\r\n  currency: string\r\n  status: string\r\n}\r\n\r\ntype Subscription = {\r\n  id: string\r\n  deal_id: string\r\n  deal_name: string\r\n  investor_id: string\r\n  investor_name: string\r\n  status: string\r\n  commitment: number\r\n  currency: string\r\n  funded_amount: number\r\n  outstanding_amount: number\r\n  committed_at: string | null\r\n  funded_at: string | null\r\n}\r\n\r\ntype FeeEvent = {\r\n  id: string\r\n  deal_id: string\r\n  deal_name: string\r\n  investor_id: string | null\r\n  investor_name: string\r\n  fee_type: string | null\r\n  rate_bps: number | null\r\n  base_amount: number | null\r\n  computed_amount: number | null\r\n  currency: string\r\n  status: string\r\n  processed_at: string | null\r\n  event_date: string\r\n  created_at: string\r\n  invoice_number: string | null\r\n  invoice_status: string | null\r\n}\r\n\r\ninterface OverviewTabProps {\r\n  deals: Deal[]\r\n}\r\n\r\nconst SUBSCRIPTION_STATUS_STYLES: Record<string, string> = {\n  committed: 'bg-blue-100 text-blue-800 border-blue-200',\n  partially_funded: 'bg-amber-100 text-amber-800 border-amber-200',\n  funded: 'bg-emerald-100 text-emerald-800 border-emerald-200',\n  active: 'bg-green-100 text-green-800 border-green-200',\n}\n\nconst SUBSCRIPTION_STATUS_LABELS: Record<string, string> = {\n  committed: 'Awaiting Funding',\n  partially_funded: 'Partial',\n  funded: 'Fully Funded',\n  active: 'Active',\n}\n\r\nconst FEE_STATUS_STYLES: Record<string, string> = {\r\n  accrued: 'bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-700',\r\n  invoiced: 'bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-700',\r\n  paid: 'bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-700',\r\n  waived: 'bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800/50 dark:text-gray-300 dark:border-gray-700',\r\n  cancelled: 'bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800/50 dark:text-gray-300 dark:border-gray-700',\r\n  disputed: 'bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-700',\r\n}\r\n\r\nconst FEE_TYPE_LABELS: Record<string, string> = {\r\n  mgmt: 'Management Fee',\r\n  perf: 'Performance Fee',\r\n  carry: 'Carried Interest',\r\n  upfront: 'Upfront Fee',\r\n  placement: 'Placement Fee',\r\n  transaction: 'Transaction Fee',\r\n  admin: 'Admin Fee',\r\n}\r\n\r\nexport function OverviewTab({ deals }: OverviewTabProps) {\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [subscriptions, setSubscriptions] = useState<Subscription[]>([])\r\n  const [feeEvents, setFeeEvents] = useState<FeeEvent[]>([])\r\n  const [search, setSearch] = useState('')\r\n  const [dealFilter, setDealFilter] = useState('all')\r\n  const [activeSubTab, setActiveSubTab] = useState('subscriptions')\r\n\r\n  // Fetch data on mount\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      if (deals.length === 0) {\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      try {\r\n        setLoading(true)\r\n        setError(null)\r\n        const supabase = createClient()\r\n        const dealIds = deals.map(d => d.id)\r\n\r\n        // Fetch subscriptions\r\n        const { data: subsData, error: subsError } = await supabase\r\n          .from('subscriptions')\r\n          .select(`\r\n            id,\r\n            deal_id,\r\n            investor_id,\r\n            status,\r\n            commitment,\r\n            currency,\r\n            funded_amount,\r\n            outstanding_amount,\r\n            committed_at,\r\n            funded_at,\r\n            investors (id, legal_name, display_name)\r\n          `)\r\n          .in('deal_id', dealIds)\r\n          .in('status', ['committed', 'partially_funded', 'funded', 'active'])\n          .order('committed_at', { ascending: false })\r\n\r\n        if (subsError) throw subsError\r\n\r\n        // Fetch fee events\r\n        const { data: feesData, error: feesError } = await supabase\r\n          .from('fee_events')\r\n          .select(`\r\n            id,\r\n            deal_id,\r\n            investor_id,\r\n            fee_type,\r\n            rate_bps,\r\n            base_amount,\r\n            computed_amount,\r\n            currency,\r\n            status,\r\n            processed_at,\r\n            event_date,\r\n            created_at,\r\n            invoice_id,\r\n            investors (id, legal_name, display_name),\r\n            invoices:invoice_id (invoice_number, status)\r\n          `)\r\n          .in('deal_id', dealIds)\r\n          .order('created_at', { ascending: false })\r\n\r\n        if (feesError) throw feesError\r\n\r\n        // Transform subscriptions\r\n        const transformedSubs = (subsData || []).map((sub: any) => {\r\n          const investor = Array.isArray(sub.investors) ? sub.investors[0] : sub.investors\r\n          const deal = deals.find(d => d.id === sub.deal_id)\r\n          return {\r\n            id: sub.id,\r\n            deal_id: sub.deal_id,\r\n            deal_name: deal?.name || 'Unknown Deal',\r\n            investor_id: sub.investor_id,\r\n            investor_name: investor?.display_name || investor?.legal_name || 'Unknown Investor',\r\n            status: sub.status,\r\n            commitment: sub.commitment || 0,\r\n            currency: sub.currency || 'USD',\r\n            funded_amount: sub.funded_amount || 0,\r\n            outstanding_amount: sub.outstanding_amount || 0,\r\n            committed_at: sub.committed_at,\r\n            funded_at: sub.funded_at,\r\n          }\r\n        })\r\n\r\n        // Transform fee events\r\n        const transformedFees = (feesData || []).map((fee: any) => {\r\n          const investor = Array.isArray(fee.investors) ? fee.investors[0] : fee.investors\r\n          const invoice = Array.isArray(fee.invoices) ? fee.invoices[0] : fee.invoices\r\n          const deal = deals.find(d => d.id === fee.deal_id)\r\n          return {\r\n            id: fee.id,\r\n            deal_id: fee.deal_id,\r\n            deal_name: deal?.name || 'Unknown Deal',\r\n            investor_id: fee.investor_id,\r\n            investor_name: investor?.display_name || investor?.legal_name || 'Unknown Investor',\r\n            fee_type: fee.fee_type,\r\n            rate_bps: fee.rate_bps,\r\n            base_amount: fee.base_amount,\r\n            computed_amount: fee.computed_amount,\r\n            currency: fee.currency || 'USD',\r\n            status: fee.status,\r\n            processed_at: fee.processed_at,\r\n            event_date: fee.event_date,\r\n            created_at: fee.created_at,\r\n            invoice_number: invoice?.invoice_number || null,\r\n            invoice_status: invoice?.status || null,\r\n          }\r\n        })\r\n\r\n        setSubscriptions(transformedSubs)\r\n        setFeeEvents(transformedFees)\r\n      } catch (err) {\r\n        console.error('[OverviewTab] Error fetching data:', err)\r\n        setError(err instanceof Error ? err.message : 'Failed to load data')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [deals])\r\n\r\n  // Calculate summary metrics\r\n  const summary = useMemo(() => {\r\n    const totalCommitment = subscriptions.reduce((sum, s) => sum + s.commitment, 0)\r\n    const totalFunded = subscriptions.reduce((sum, s) => sum + s.funded_amount, 0)\r\n    const totalOutstanding = subscriptions.reduce((sum, s) => sum + s.outstanding_amount, 0)\r\n    const awaitingFunding = subscriptions.filter(s => s.status === 'committed').length\r\n    const partiallyFunded = subscriptions.filter(s => s.status === 'partially_funded').length\r\n    const fullyFunded = subscriptions.filter(s => s.status === 'funded' || s.status === 'active').length\n\r\n    const totalFeesAccrued = feeEvents.reduce((sum, f) => sum + (f.computed_amount || 0), 0)\r\n    const feesPaid = feeEvents.filter(f => f.status === 'paid')\r\n    const totalFeesPaid = feesPaid.reduce((sum, f) => sum + (f.computed_amount || 0), 0)\r\n    const feesPending = feeEvents.filter(f => f.status === 'accrued' || f.status === 'invoiced')\r\n    const totalFeesPending = feesPending.reduce((sum, f) => sum + (f.computed_amount || 0), 0)\r\n\r\n    return {\r\n      totalDeals: deals.length,\r\n      totalSubscriptions: subscriptions.length,\r\n      totalCommitment,\r\n      totalFunded,\r\n      totalOutstanding,\r\n      awaitingFunding,\r\n      partiallyFunded,\r\n      fullyFunded,\r\n      totalFeeEvents: feeEvents.length,\r\n      totalFeesAccrued,\r\n      totalFeesPaid,\r\n      totalFeesPending,\r\n      feesPaidCount: feesPaid.length,\r\n      feesPendingCount: feesPending.length,\r\n    }\r\n  }, [deals, subscriptions, feeEvents])\r\n\r\n  // Filter subscriptions\r\n  const filteredSubscriptions = useMemo(() => {\r\n    return subscriptions.filter(sub => {\r\n      const matchesDeal = dealFilter === 'all' || sub.deal_id === dealFilter\r\n      const matchesSearch = !search ||\r\n        sub.investor_name.toLowerCase().includes(search.toLowerCase()) ||\r\n        sub.deal_name.toLowerCase().includes(search.toLowerCase())\r\n      return matchesDeal && matchesSearch\r\n    })\r\n  }, [subscriptions, dealFilter, search])\r\n\r\n  // Filter fee events\r\n  const filteredFeeEvents = useMemo(() => {\r\n    return feeEvents.filter(fee => {\r\n      const matchesDeal = dealFilter === 'all' || fee.deal_id === dealFilter\r\n      const matchesSearch = !search ||\r\n        fee.investor_name.toLowerCase().includes(search.toLowerCase()) ||\r\n        fee.deal_name.toLowerCase().includes(search.toLowerCase())\r\n      return matchesDeal && matchesSearch\r\n    })\r\n  }, [feeEvents, dealFilter, search])\r\n\r\n  // Calculate deal summary\r\n  const dealSummary = useMemo(() => {\r\n    return deals.map(deal => {\r\n      const dealSubs = subscriptions.filter(s => s.deal_id === deal.id)\r\n      const dealFees = feeEvents.filter(f => f.deal_id === deal.id)\r\n\r\n      const totalCommitment = dealSubs.reduce((sum, s) => sum + s.commitment, 0)\r\n      const totalFunded = dealSubs.reduce((sum, s) => sum + s.funded_amount, 0)\r\n      const totalFees = dealFees.reduce((sum, f) => sum + (f.computed_amount || 0), 0)\r\n      const paidFees = dealFees.filter(f => f.status === 'paid').reduce((sum, f) => sum + (f.computed_amount || 0), 0)\r\n\r\n      return {\r\n        ...deal,\r\n        subscription_count: dealSubs.length,\r\n        total_commitment: totalCommitment,\r\n        total_funded: totalFunded,\r\n        funding_percentage: totalCommitment > 0 ? Math.round((totalFunded / totalCommitment) * 100) : 0,\r\n        total_fees: totalFees,\r\n        paid_fees: paidFees,\r\n        fee_count: dealFees.length,\r\n      }\r\n    })\r\n  }, [deals, subscriptions, feeEvents])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-16\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n        <span className=\"ml-3 text-muted-foreground\">Loading overview data...</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card className=\"border-destructive\">\r\n        <CardContent className=\"py-8\">\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <AlertCircle className=\"h-12 w-12 text-destructive\" />\r\n            <p className=\"text-destructive\">{error}</p>\r\n            <Button variant=\"outline\" onClick={() => window.location.reload()}>\r\n              <RefreshCcw className=\"h-4 w-4 mr-2\" />\r\n              Retry\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Summary Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <Building2 className=\"h-4 w-4\" />\r\n              Managed Deals\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{summary.totalDeals}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              {summary.totalSubscriptions} subscriptions\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <DollarSign className=\"h-4 w-4\" />\r\n              Total Commitment\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-primary\">\r\n              {formatCurrency(summary.totalCommitment, 'USD')}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              {formatCurrency(summary.totalFunded, 'USD')} funded\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <CheckCircle2 className=\"h-4 w-4\" />\r\n              Funding Status\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-emerald-600\">{summary.fullyFunded}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              {summary.awaitingFunding} awaiting • {summary.partiallyFunded} partial • {summary.fullyFunded} fully funded\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <CreditCard className=\"h-4 w-4\" />\r\n              Fee Events\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{summary.totalFeeEvents}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              {formatCurrency(summary.totalFeesPaid, 'USD')} paid\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card>\r\n        <CardContent className=\"pt-4\">\r\n          <div className=\"flex flex-col md:flex-row gap-4\">\r\n            <div className=\"relative flex-1\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n              <Input\r\n                placeholder=\"Search investors or deals...\"\r\n                value={search}\r\n                onChange={(e) => setSearch(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n            <Select value={dealFilter} onValueChange={setDealFilter}>\r\n              <SelectTrigger className=\"w-full md:w-[250px]\">\r\n                <SelectValue placeholder=\"All Deals\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">All Deals</SelectItem>\r\n                {deals.map(deal => (\r\n                  <SelectItem key={deal.id} value={deal.id}>\r\n                    {deal.name}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Sub-tabs */}\r\n      <Tabs value={activeSubTab} onValueChange={setActiveSubTab}>\r\n        <TabsList>\r\n          <TabsTrigger value=\"subscriptions\" className=\"flex items-center gap-2\">\r\n            <FileText className=\"h-4 w-4\" />\r\n            Subscriptions ({filteredSubscriptions.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"fees\" className=\"flex items-center gap-2\">\r\n            <DollarSign className=\"h-4 w-4\" />\r\n            Fee Events ({filteredFeeEvents.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"summary\" className=\"flex items-center gap-2\">\r\n            <TrendingUp className=\"h-4 w-4\" />\r\n            Deal Summary\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* Subscriptions Tab */}\r\n        <TabsContent value=\"subscriptions\">\r\n          <Card>\r\n            <CardHeader className=\"pb-4\">\r\n              <CardTitle className=\"text-lg\">Subscriptions</CardTitle>\r\n              <CardDescription>\r\n                {filteredSubscriptions.length} active subscriptions\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"overflow-x-auto\">\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Investor</TableHead>\r\n                      <TableHead>Deal</TableHead>\r\n                      <TableHead className=\"text-right\">Commitment</TableHead>\r\n                      <TableHead className=\"text-right\">Funded</TableHead>\r\n                      <TableHead className=\"text-right\">Outstanding</TableHead>\r\n                      <TableHead>Status</TableHead>\r\n                      <TableHead>Funded Date</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {filteredSubscriptions.length === 0 ? (\r\n                      <TableRow>\r\n                        <TableCell colSpan={7} className=\"text-center py-8 text-muted-foreground\">\r\n                          No subscriptions found\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ) : (\r\n                      filteredSubscriptions.map(sub => (\r\n                        <TableRow key={sub.id}>\r\n                          <TableCell className=\"font-medium\">{sub.investor_name}</TableCell>\r\n                          <TableCell>{sub.deal_name}</TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            {formatCurrency(sub.commitment, sub.currency)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            {formatCurrency(sub.funded_amount, sub.currency)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            {formatCurrency(sub.outstanding_amount, sub.currency)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge\r\n                              variant=\"outline\"\r\n                              className={cn('text-xs', SUBSCRIPTION_STATUS_STYLES[sub.status])}\r\n                            >\r\n                              {SUBSCRIPTION_STATUS_LABELS[sub.status] || sub.status}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {sub.funded_at ? (\r\n                              <span className=\"text-sm\">{formatDate(sub.funded_at)}</span>\r\n                            ) : (\r\n                              <span className=\"text-muted-foreground text-xs\">Pending</span>\r\n                            )}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Fee Events Tab */}\r\n        <TabsContent value=\"fees\">\r\n          <Card>\r\n            <CardHeader className=\"pb-4\">\r\n              <CardTitle className=\"text-lg\">Fee Events</CardTitle>\r\n              <CardDescription>\r\n                {filteredFeeEvents.length} fee events\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"overflow-x-auto\">\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Deal</TableHead>\r\n                      <TableHead>Investor</TableHead>\r\n                      <TableHead>Fee Type</TableHead>\r\n                      <TableHead className=\"text-right\">Amount</TableHead>\r\n                      <TableHead>Invoice</TableHead>\r\n                      <TableHead>Status</TableHead>\r\n                      <TableHead>Event Date</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {filteredFeeEvents.length === 0 ? (\r\n                      <TableRow>\r\n                        <TableCell colSpan={7} className=\"text-center py-8 text-muted-foreground\">\r\n                          No fee events found\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ) : (\r\n                      filteredFeeEvents.map(fee => (\r\n                        <TableRow key={fee.id}>\r\n                          <TableCell className=\"font-medium\">{fee.deal_name}</TableCell>\r\n                          <TableCell>{fee.investor_name}</TableCell>\r\n                          <TableCell>\r\n                            <Badge variant=\"outline\">\r\n                              {FEE_TYPE_LABELS[fee.fee_type || ''] || fee.fee_type || 'Unknown'}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right font-medium\">\r\n                            {formatCurrency(fee.computed_amount || 0, fee.currency)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {fee.invoice_number ? (\r\n                              <div>\r\n                                <div className=\"text-sm font-medium\">{fee.invoice_number}</div>\r\n                                {fee.invoice_status && (\r\n                                  <div className=\"text-xs text-muted-foreground capitalize\">\r\n                                    {fee.invoice_status.replace('_', ' ')}\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            ) : (\r\n                              <span className=\"text-muted-foreground text-xs\">Not issued</span>\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge\r\n                              variant=\"outline\"\r\n                              className={cn('text-xs capitalize', FEE_STATUS_STYLES[fee.status])}\r\n                            >\r\n                              {fee.status}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {fee.event_date ? (\r\n                              <span className=\"text-sm\">{formatDate(fee.event_date)}</span>\r\n                            ) : (\r\n                              <span className=\"text-muted-foreground text-xs\">-</span>\r\n                            )}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Deal Summary Tab */}\r\n        <TabsContent value=\"summary\">\r\n          <Card>\r\n            <CardHeader className=\"pb-4\">\r\n              <CardTitle className=\"text-lg\">Deal Summary</CardTitle>\r\n              <CardDescription>\r\n                Aggregated metrics by deal\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"overflow-x-auto\">\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Deal</TableHead>\r\n                      <TableHead>Company</TableHead>\r\n                      <TableHead className=\"text-right\">Subscriptions</TableHead>\r\n                      <TableHead className=\"text-right\">Commitment</TableHead>\r\n                      <TableHead className=\"text-right\">Funded</TableHead>\r\n                      <TableHead className=\"text-right\">Funding %</TableHead>\r\n                      <TableHead className=\"text-right\">Total Fees</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {dealSummary.length === 0 ? (\r\n                      <TableRow>\r\n                        <TableCell colSpan={7} className=\"text-center py-8 text-muted-foreground\">\r\n                          No deals found\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ) : (\r\n                      dealSummary.map(deal => (\r\n                        <TableRow key={deal.id}>\r\n                          <TableCell className=\"font-medium\">{deal.name}</TableCell>\r\n                          <TableCell>{deal.company_name || '-'}</TableCell>\r\n                          <TableCell className=\"text-right\">{deal.subscription_count}</TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            {formatCurrency(deal.total_commitment, deal.currency)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            {formatCurrency(deal.total_funded, deal.currency)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            <Badge\r\n                              variant=\"outline\"\r\n                              className={cn(\r\n                                'text-xs',\r\n                                deal.funding_percentage >= 100\r\n                                  ? 'bg-emerald-100 text-emerald-800'\r\n                                  : deal.funding_percentage >= 50\r\n                                  ? 'bg-amber-100 text-amber-800'\r\n                                  : 'bg-gray-100 text-gray-800'\r\n                              )}\r\n                            >\r\n                              {deal.funding_percentage}%\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            {formatCurrency(deal.total_fees, deal.currency)}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  Loader2,\n  Download,\n  Filter,\n  RefreshCcw,\n  AlertCircle,\n  ChevronLeft,\n  ChevronRight,\n  Mail,\n  CheckCircle,\n} from 'lucide-react'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { cn } from '@/lib/utils'\nimport { RequestInvoiceDialog, CommissionType } from '@/components/commissions/request-invoice-dialog'\nimport { toast } from 'sonner'\n\n// Types\ntype Commission = {\n  id: string\n  status: string\n  basis_type: string\n  rate_bps: number\n  base_amount: number | null\n  accrual_amount: number\n  currency: string\n  invoice_id: string | null\n  paid_at: string | null\n  payment_due_date: string | null\n  payment_reference: string | null\n  notes: string | null\n  created_at: string\n  updated_at: string\n  entity_id: string\n  entity_name: string\n  entity_email: string | null\n  deal_id: string\n  deal_name: string\n  deal_company: string | null\n  investor_id: string | null\n  investor_name: string | null\n  fee_plan_id: string | null\n  fee_plan_name: string | null\n}\n\n// Map commission type to CommissionType for the dialog\nconst typeToCommissionType: Record<string, CommissionType> = {\n  'introducer': 'introducer',\n  'partner': 'partner',\n  'commercial_partner': 'commercial-partner',\n}\n\ntype Summary = {\n  total_count: number\n  total_amount: number\n  by_status: {\n    accrued: { count: number; amount: number }\n    invoice_requested: { count: number; amount: number }\n    invoice_submitted: { count: number; amount: number }\n    invoiced: { count: number; amount: number }\n    paid: { count: number; amount: number }\n    cancelled: { count: number; amount: number }\n    rejected: { count: number; amount: number }\n  }\n  currency: string\n}\n\ntype Entity = {\n  id: string\n  name: string\n}\n\ntype Deal = {\n  id: string\n  name: string\n}\n\ninterface CommissionTabProps {\n  type: 'introducer' | 'partner' | 'commercial_partner'\n  entities: Entity[]\n  deals: Deal[]\n  apiEndpoint: string\n  entityLabel: string\n  entityPlural: string\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  accrued: 'bg-blue-100 text-blue-800',\n  invoice_requested: 'bg-yellow-100 text-yellow-800',\n  invoice_submitted: 'bg-indigo-100 text-indigo-800',\n  invoiced: 'bg-orange-100 text-orange-800',\n  paid: 'bg-green-100 text-green-800',\n  cancelled: 'bg-red-100 text-red-800',\n  rejected: 'bg-red-100 text-red-800',\n}\n\nconst PAGE_SIZE = 50\nconst ALL_VALUE = '__all__' // Radix UI doesn't allow empty string as SelectItem value\n\nexport function CommissionTab({\n  type,\n  entities,\n  deals,\n  apiEndpoint,\n  entityLabel,\n  entityPlural,\n}: CommissionTabProps) {\n  const [loading, setLoading] = useState(false)\n  const [exporting, setExporting] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [commissions, setCommissions] = useState<Commission[]>([])\n  const [summary, setSummary] = useState<Summary | null>(null)\n  const [totalCount, setTotalCount] = useState(0)\n\n  // Filter state\n  const [fromDate, setFromDate] = useState<string>('')\n  const [toDate, setToDate] = useState<string>('')\n  const [entityId, setEntityId] = useState<string>('')\n  const [dealId, setDealId] = useState<string>('')\n  const [status, setStatus] = useState<string>('')\n\n  // Pagination\n  const [page, setPage] = useState(1)\n  const totalPages = Math.ceil(totalCount / PAGE_SIZE)\n\n  // Active filters count\n  const activeFiltersCount = [fromDate, toDate, entityId, dealId, status].filter(Boolean).length\n\n  // Request Invoice Dialog state\n  const [requestInvoiceDialogOpen, setRequestInvoiceDialogOpen] = useState(false)\n  const [selectedCommission, setSelectedCommission] = useState<Commission | null>(null)\n\n  // Mark Paid loading state\n  const [markingPaidId, setMarkingPaidId] = useState<string | null>(null)\n\n  // Fetch report\n  const fetchReport = useCallback(async (resetPage = false) => {\n    setLoading(true)\n    setError(null)\n    if (resetPage) setPage(1)\n\n    try {\n      const params = new URLSearchParams()\n      if (fromDate) params.append('from_date', fromDate)\n      if (toDate) params.append('to_date', toDate)\n      if (entityId) {\n        params.append(\n          type === 'introducer' ? 'introducer_id' :\n          type === 'partner' ? 'partner_id' : 'commercial_partner_id',\n          entityId\n        )\n      }\n      if (dealId) params.append('deal_id', dealId)\n      if (status) params.append('status', status)\n      params.append('limit', String(PAGE_SIZE))\n      params.append('offset', String((resetPage ? 0 : (page - 1)) * PAGE_SIZE))\n\n      const response = await fetch(`${apiEndpoint}?${params.toString()}`)\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to fetch report')\n      }\n\n      const result = await response.json()\n\n      // Transform entity fields based on type\n      const transformedData = (result.data || []).map((c: any) => ({\n        ...c,\n        entity_id: c[`${type}_id`] || c.entity_id,\n        entity_name: c[`${type}_name`] || c.entity_name || c.introducer_name || c.partner_name || c.commercial_partner_name,\n        entity_email: c[`${type}_email`] || c.entity_email || c.introducer_email || c.partner_email || c.commercial_partner_email,\n      }))\n\n      setCommissions(transformedData)\n      setSummary(result.summary || null)\n      setTotalCount(result.pagination?.total || result.data?.length || 0)\n    } catch (err) {\n      console.error(`[CommissionTab:${type}] Error:`, err)\n      setError(err instanceof Error ? err.message : 'Failed to fetch report')\n    } finally {\n      setLoading(false)\n    }\n  }, [apiEndpoint, type, fromDate, toDate, entityId, dealId, status, page])\n\n  // Export CSV\n  const handleExportCSV = async () => {\n    setExporting(true)\n    try {\n      const params = new URLSearchParams()\n      if (fromDate) params.append('from_date', fromDate)\n      if (toDate) params.append('to_date', toDate)\n      if (entityId) {\n        params.append(\n          type === 'introducer' ? 'introducer_id' :\n          type === 'partner' ? 'partner_id' : 'commercial_partner_id',\n          entityId\n        )\n      }\n      if (dealId) params.append('deal_id', dealId)\n      if (status) params.append('status', status)\n      params.append('format', 'csv')\n\n      const link = document.createElement('a')\n      link.href = `${apiEndpoint}?${params.toString()}`\n      link.download = `${type}_reconciliation_${new Date().toISOString().split('T')[0]}.csv`\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n    } finally {\n      setTimeout(() => setExporting(false), 1000)\n    }\n  }\n\n  // Clear filters\n  const handleClearFilters = () => {\n    setFromDate('')\n    setToDate('')\n    setEntityId('')\n    setDealId('')\n    setStatus('')\n    setPage(1)\n  }\n\n  // Handle Request Invoice click\n  const handleRequestInvoice = (commission: Commission) => {\n    setSelectedCommission(commission)\n    setRequestInvoiceDialogOpen(true)\n  }\n\n  // Handle Request Invoice success\n  const handleRequestInvoiceSuccess = () => {\n    toast.success('Invoice request sent')\n    fetchReport(false) // Refresh data\n  }\n\n  // Handle Mark Paid click\n  const handleMarkPaid = async (commission: Commission) => {\n    if (markingPaidId) return // Prevent double-click\n\n    setMarkingPaidId(commission.id)\n\n    try {\n      const response = await fetch(`/api/staff/fees/commissions/${commission.id}/mark-paid`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ entity_type: type }),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to mark commission as paid')\n      }\n\n      toast.success('Commission marked as paid')\n      fetchReport(false) // Refresh data\n    } catch (err) {\n      console.error('[CommissionTab] Error marking paid:', err)\n      toast.error(err instanceof Error ? err.message : 'Failed to mark commission as paid')\n    } finally {\n      setMarkingPaidId(null)\n    }\n  }\n\n  // Date validation\n  const isDateRangeValid = !fromDate || !toDate || new Date(fromDate) <= new Date(toDate)\n\n  // Load report on mount\n  useEffect(() => {\n    fetchReport(true)\n  }, []) // Only on mount\n\n  // Refetch when page changes (not on initial load)\n  useEffect(() => {\n    if (page > 1) {\n      fetchReport(false)\n    }\n  }, [page])\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Filters */}\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <CardTitle className=\"text-lg flex items-center gap-2\">\n                <Filter className=\"h-5 w-5\" />\n                Filters\n              </CardTitle>\n              {activeFiltersCount > 0 && (\n                <Badge variant=\"secondary\" className=\"text-xs\">\n                  {activeFiltersCount} active\n                </Badge>\n              )}\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleClearFilters}\n                disabled={activeFiltersCount === 0}\n              >\n                Clear\n              </Button>\n              <Button\n                size=\"sm\"\n                onClick={() => fetchReport(true)}\n                disabled={loading || !isDateRangeValid}\n              >\n                {loading ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                ) : (\n                  <RefreshCcw className=\"h-4 w-4\" />\n                )}\n                <span className=\"ml-2\">Apply</span>\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n            {/* Date Range */}\n            <div className=\"space-y-2\">\n              <Label>From Date</Label>\n              <Input\n                type=\"date\"\n                value={fromDate}\n                onChange={(e) => setFromDate(e.target.value)}\n                max={toDate || undefined}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>To Date</Label>\n              <Input\n                type=\"date\"\n                value={toDate}\n                onChange={(e) => setToDate(e.target.value)}\n                min={fromDate || undefined}\n              />\n              {!isDateRangeValid && (\n                <p className=\"text-xs text-destructive\">End date must be after start date</p>\n              )}\n            </div>\n\n            {/* Entity Filter */}\n            <div className=\"space-y-2\">\n              <Label>{entityLabel}</Label>\n              <Select\n                value={entityId || ALL_VALUE}\n                onValueChange={(v) => setEntityId(v === ALL_VALUE ? '' : v)}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder={`All ${entityPlural.toLowerCase()}`} />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value={ALL_VALUE}>All {entityPlural.toLowerCase()}</SelectItem>\n                  {entities.map((e) => (\n                    <SelectItem key={e.id} value={e.id}>\n                      {e.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Deal Filter */}\n            <div className=\"space-y-2\">\n              <Label>Deal</Label>\n              <Select\n                value={dealId || ALL_VALUE}\n                onValueChange={(v) => setDealId(v === ALL_VALUE ? '' : v)}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"All deals\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value={ALL_VALUE}>All deals</SelectItem>\n                  {deals.map((d) => (\n                    <SelectItem key={d.id} value={d.id}>\n                      {d.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Status Filter */}\n            <div className=\"space-y-2\">\n              <Label>Status</Label>\n              <Select\n                value={status || ALL_VALUE}\n                onValueChange={(v) => setStatus(v === ALL_VALUE ? '' : v)}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"All statuses\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value={ALL_VALUE}>All statuses</SelectItem>\n                  <SelectItem value=\"accrued\">Accrued</SelectItem>\n                  <SelectItem value=\"invoice_requested\">Invoice Requested</SelectItem>\n                  <SelectItem value=\"invoice_submitted\">Invoice Submitted</SelectItem>\n                  <SelectItem value=\"invoiced\">Invoiced</SelectItem>\n                  <SelectItem value=\"paid\">Paid</SelectItem>\n                  <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                  <SelectItem value=\"rejected\">Rejected</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Summary - Now includes all 5 statuses */}\n      {summary && (\n        <Card>\n          <CardHeader className=\"pb-4\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-lg\">Summary</CardTitle>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleExportCSV}\n                disabled={exporting || commissions.length === 0}\n              >\n                {exporting ? (\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                ) : (\n                  <Download className=\"h-4 w-4 mr-2\" />\n                )}\n                Export CSV\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-9 gap-4\">\n              <div className=\"text-center p-3 rounded-lg bg-muted/50\">\n                <div className=\"text-2xl font-bold\">{summary.total_count}</div>\n                <div className=\"text-xs text-muted-foreground\">Total Records</div>\n              </div>\n              <div className=\"text-center p-3 rounded-lg bg-muted/50\">\n                <div className=\"text-2xl font-bold text-primary\">\n                  {formatCurrency(summary.total_amount, summary.currency)}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">Total Amount</div>\n              </div>\n              <div className=\"text-center p-3 rounded-lg bg-blue-50\">\n                <div className=\"text-2xl font-bold text-blue-600\">\n                  {formatCurrency(summary.by_status.accrued.amount, summary.currency)}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">\n                  Accrued ({summary.by_status.accrued.count})\n                </div>\n              </div>\n              {/* FIXED: Added Invoice Requested summary card */}\n              <div className=\"text-center p-3 rounded-lg bg-yellow-50\">\n                <div className=\"text-2xl font-bold text-yellow-600\">\n                  {formatCurrency(summary.by_status.invoice_requested.amount, summary.currency)}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">\n                  Invoice Req. ({summary.by_status.invoice_requested.count})\n                </div>\n              </div>\n              <div className=\"text-center p-3 rounded-lg bg-indigo-50\">\n                <div className=\"text-2xl font-bold text-indigo-600\">\n                  {formatCurrency(summary.by_status.invoice_submitted.amount, summary.currency)}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">\n                  Invoice Submitted ({summary.by_status.invoice_submitted.count})\n                </div>\n              </div>\n              <div className=\"text-center p-3 rounded-lg bg-orange-50\">\n                <div className=\"text-2xl font-bold text-orange-600\">\n                  {formatCurrency(summary.by_status.invoiced.amount, summary.currency)}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">\n                  Invoiced ({summary.by_status.invoiced.count})\n                </div>\n              </div>\n              <div className=\"text-center p-3 rounded-lg bg-green-50\">\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {formatCurrency(summary.by_status.paid.amount, summary.currency)}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">\n                  Paid ({summary.by_status.paid.count})\n                </div>\n              </div>\n              <div className=\"text-center p-3 rounded-lg bg-red-50\">\n                <div className=\"text-2xl font-bold text-red-600\">\n                  {formatCurrency(summary.by_status.cancelled.amount, summary.currency)}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">\n                  Cancelled ({summary.by_status.cancelled.count})\n                </div>\n              </div>\n              <div className=\"text-center p-3 rounded-lg bg-rose-50\">\n                <div className=\"text-2xl font-bold text-rose-600\">\n                  {formatCurrency(summary.by_status.rejected.amount, summary.currency)}\n                </div>\n                <div className=\"text-xs text-muted-foreground\">\n                  Rejected ({summary.by_status.rejected.count})\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Error with Retry */}\n      {error && (\n        <Card className=\"border-destructive\">\n          <CardContent className=\"py-6\">\n            <div className=\"flex flex-col items-center gap-4\">\n              <AlertCircle className=\"h-12 w-12 text-destructive\" />\n              <p className=\"text-destructive text-sm\">{error}</p>\n              <Button variant=\"outline\" onClick={() => fetchReport(true)}>\n                <RefreshCcw className=\"h-4 w-4 mr-2\" />\n                Retry\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Data Table with Pagination */}\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"text-lg\">Commission Details</CardTitle>\n              <CardDescription>\n                {commissions.length} of {totalCount} records\n                {totalPages > 1 && ` (Page ${page} of ${totalPages})`}\n              </CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {loading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            </div>\n          ) : commissions.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <div className=\"text-muted-foreground mb-2\">\n                {activeFiltersCount > 0\n                  ? `No commissions match your filters. Try adjusting or clearing filters.`\n                  : `No ${entityPlural.toLowerCase()} commissions found yet.`}\n              </div>\n              {activeFiltersCount > 0 && (\n                <Button variant=\"outline\" size=\"sm\" onClick={handleClearFilters}>\n                  Clear Filters\n                </Button>\n              )}\n            </div>\n          ) : (\n            <>\n              {/* FIXED: Added overflow-x-auto for mobile */}\n              <div className=\"overflow-x-auto\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Status</TableHead>\n                      <TableHead>{entityLabel}</TableHead>\n                      <TableHead>Deal</TableHead>\n                      <TableHead>Investor</TableHead>\n                      <TableHead>Basis</TableHead>\n                      <TableHead className=\"text-right\">Rate (%)</TableHead>\n                      <TableHead className=\"text-right\">Amount</TableHead>\n                      <TableHead>Due Date</TableHead>\n                      <TableHead>Paid At</TableHead>\n                      <TableHead>Created</TableHead>\n                      <TableHead className=\"text-right\">Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {commissions.map((commission) => (\n                      <TableRow key={commission.id}>\n                        <TableCell>\n                          <Badge\n                            variant=\"secondary\"\n                            className={cn('text-xs capitalize', STATUS_STYLES[commission.status])}\n                          >\n                            {commission.status.replace('_', ' ')}\n                          </Badge>\n                        </TableCell>\n                        <TableCell>\n                          <div>\n                            <div className=\"font-medium text-sm\">{commission.entity_name}</div>\n                            {commission.entity_email && (\n                              <div className=\"text-xs text-muted-foreground\">{commission.entity_email}</div>\n                            )}\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          <div>\n                            <div className=\"font-medium text-sm\">{commission.deal_name || '-'}</div>\n                            {commission.deal_company && (\n                              <div className=\"text-xs text-muted-foreground\">{commission.deal_company}</div>\n                            )}\n                          </div>\n                        </TableCell>\n                        <TableCell className=\"text-sm\">\n                          {commission.investor_name || '-'}\n                        </TableCell>\n                        <TableCell className=\"capitalize text-sm\">\n                          {commission.basis_type?.replace('_', ' ') || '-'}\n                        </TableCell>\n                        <TableCell className=\"text-right text-sm\">\n                          {(commission.rate_bps / 100).toFixed(2)}%\n                        </TableCell>\n                        <TableCell className=\"text-right font-medium\">\n                          {formatCurrency(commission.accrual_amount, commission.currency)}\n                        </TableCell>\n                        <TableCell className=\"text-sm\">\n                          {commission.payment_due_date ? formatDate(commission.payment_due_date) : '-'}\n                        </TableCell>\n                        <TableCell className=\"text-sm\">\n                          {commission.paid_at ? formatDate(commission.paid_at) : '-'}\n                        </TableCell>\n                        <TableCell className=\"text-sm text-muted-foreground\">\n                          {formatDate(commission.created_at)}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          <div className=\"flex items-center justify-end gap-1\">\n                            {/* Request Invoice - only for 'accrued' status */}\n                            {commission.status === 'accrued' && (\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={() => handleRequestInvoice(commission)}\n                                title=\"Request Invoice\"\n                                className=\"h-8 w-8 p-0 text-blue-500 hover:text-blue-600 hover:bg-blue-50\"\n                              >\n                                <Mail className=\"h-4 w-4\" />\n                              </Button>\n                            )}\n                            {/* Mark Paid - for 'invoiced' status */}\n                            {commission.status === 'invoiced' && (\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={() => handleMarkPaid(commission)}\n                                disabled={markingPaidId === commission.id}\n                                title=\"Mark as Paid\"\n                                className=\"h-8 w-8 p-0 text-green-500 hover:text-green-600 hover:bg-green-50\"\n                              >\n                                {markingPaidId === commission.id ? (\n                                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                ) : (\n                                  <CheckCircle className=\"h-4 w-4\" />\n                                )}\n                              </Button>\n                            )}\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n\n              {/* Pagination */}\n              {totalPages > 1 && (\n                <div className=\"flex items-center justify-between mt-4 pt-4 border-t\">\n                  <div className=\"text-sm text-muted-foreground\">\n                    Showing {((page - 1) * PAGE_SIZE) + 1} to {Math.min(page * PAGE_SIZE, totalCount)} of {totalCount}\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setPage(p => Math.max(1, p - 1))}\n                      disabled={page === 1 || loading}\n                    >\n                      <ChevronLeft className=\"h-4 w-4\" />\n                      Previous\n                    </Button>\n                    <div className=\"flex items-center gap-1 px-2\">\n                      <span className=\"text-sm font-medium\">{page}</span>\n                      <span className=\"text-sm text-muted-foreground\">of {totalPages}</span>\n                    </div>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setPage(p => Math.min(totalPages, p + 1))}\n                      disabled={page === totalPages || loading}\n                    >\n                      Next\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Request Invoice Dialog */}\n      <RequestInvoiceDialog\n        open={requestInvoiceDialogOpen}\n        onOpenChange={setRequestInvoiceDialogOpen}\n        commission={selectedCommission ? {\n          id: selectedCommission.id,\n          accrual_amount: selectedCommission.accrual_amount,\n          currency: selectedCommission.currency,\n          entity_name: selectedCommission.entity_name,\n          deal: selectedCommission.deal_name ? { name: selectedCommission.deal_name } : undefined,\n        } : null}\n        commissionType={typeToCommissionType[type]}\n        onSuccess={handleRequestInvoiceSuccess}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}