{"version":3,"sources":["../../../../../versotech-portal/src/components/partner-profile/partner-profile-client.tsx/__nextjs-internal-proxy.mjs","../../../../../versotech-portal/src/app/%28main%29/versotech_main/partner-profile/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PartnerProfileClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call PartnerProfileClient() from the server but PartnerProfileClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/versotech-portal/src/components/partner-profile/partner-profile-client.tsx\",\n    \"PartnerProfileClient\",\n);\n","import { redirect } from 'next/navigation'\nimport { createClient, createServiceClient } from '@/lib/supabase/server'\nimport { PartnerProfileClient } from '@/components/partner-profile/partner-profile-client'\n\nexport const dynamic = 'force-dynamic'\nexport const revalidate = 0\n\nexport default async function PartnerProfilePage() {\n  const supabase = await createClient()\n\n  // Get the current user\n  const { data: { user }, error: authError } = await supabase.auth.getUser()\n  if (authError || !user) {\n    redirect('/versotech_main/login')\n  }\n\n  // Fetch user profile\n  const { data: profile } = await supabase\n    .from('profiles')\n    .select('id, display_name, email, avatar_url, full_name')\n    .eq('id', user.id)\n    .single()\n\n  // Use service client to bypass RLS for partner lookups\n  const serviceSupabase = createServiceClient()\n\n  // Check if user is associated with a partner\n  const { data: partnerUser } = await serviceSupabase\n    .from('partner_users')\n    .select('partner_id, role, is_primary, can_sign')\n    .eq('user_id', user.id)\n    .maybeSingle()\n\n  if (!partnerUser) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"max-w-2xl mx-auto text-center py-12\">\n          <h1 className=\"text-2xl font-bold text-foreground mb-2\">No Partner Association</h1>\n          <p className=\"text-muted-foreground\">\n            Your account is not associated with any partner entity.\n            Please contact support if you believe this is an error.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  // Fetch partner details\n  const { data: partner } = await serviceSupabase\n    .from('partners')\n    .select('*')\n    .eq('id', partnerUser.partner_id)\n    .single()\n\n  if (!partner) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"max-w-2xl mx-auto text-center py-12\">\n          <h1 className=\"text-2xl font-bold text-foreground mb-2\">Partner Not Found</h1>\n          <p className=\"text-muted-foreground\">\n            The partner entity associated with your account could not be found.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <PartnerProfileClient\n      userEmail={user.email || ''}\n      profile={profile ? {\n        full_name: profile.full_name || profile.display_name,\n        email: profile.email,\n        avatar_url: profile.avatar_url\n      } : null}\n      partnerInfo={{\n        id: partner.id,\n        name: partner.name,\n        legal_name: partner.legal_name,\n        type: partner.type,\n        partner_type: partner.partner_type,\n        status: partner.status,\n        contact_name: partner.contact_name,\n        contact_email: partner.contact_email,\n        contact_phone: partner.contact_phone,\n        website: partner.website,\n        address_line_1: partner.address_line_1,\n        address_line_2: partner.address_line_2,\n        city: partner.city,\n        state_province: partner.state_province,\n        postal_code: partner.postal_code,\n        country: partner.country,\n        preferred_sectors: partner.preferred_sectors,\n        preferred_geographies: partner.preferred_geographies,\n        kyc_status: partner.kyc_status,\n        logo_url: partner.logo_url,\n        // Phone numbers\n        phone: partner.phone,\n        phone_mobile: partner.phone_mobile,\n        phone_office: partner.phone_office,\n        email: partner.email,\n        // Individual KYC fields\n        first_name: partner.first_name,\n        middle_name: partner.middle_name,\n        last_name: partner.last_name,\n        name_suffix: partner.name_suffix,\n        date_of_birth: partner.date_of_birth,\n        country_of_birth: partner.country_of_birth,\n        nationality: partner.nationality,\n        // US Tax compliance\n        is_us_citizen: partner.is_us_citizen,\n        is_us_taxpayer: partner.is_us_taxpayer,\n        us_taxpayer_id: partner.us_taxpayer_id,\n        country_of_tax_residency: partner.country_of_tax_residency,\n        // Entity fields\n        country_of_incorporation: partner.country_of_incorporation,\n        registration_number: partner.registration_number,\n        tax_id: partner.tax_id,\n        // ID Document\n        id_type: partner.id_type,\n        id_number: partner.id_number,\n        id_issue_date: partner.id_issue_date,\n        id_expiry_date: partner.id_expiry_date,\n        id_issuing_country: partner.id_issuing_country,\n        // Residential Address\n        residential_street: partner.residential_street,\n        residential_line_2: partner.residential_line_2,\n        residential_city: partner.residential_city,\n        residential_state: partner.residential_state,\n        residential_postal_code: partner.residential_postal_code,\n        residential_country: partner.residential_country,\n        // Additional KYC fields\n        middle_initial: partner.middle_initial,\n        proof_of_address_date: partner.proof_of_address_date,\n        proof_of_address_expiry: partner.proof_of_address_expiry,\n        tax_id_number: partner.tax_id_number,\n      }}\n      partnerUserInfo={{\n        role: partnerUser.role,\n        is_primary: partnerUser.is_primary,\n        can_sign: partnerUser.can_sign || false\n      }}\n    />\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}