module.exports=[302649,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(284169),e=a.i(421908),f=a.i(15788),g=a.i(771088),h=a.i(266828),i=a.i(399580),j=a.i(625473),k=a.i(42329),l=a.i(838086),m=a.i(908513),n=a.i(425622),o=a.i(455964),p=a.i(796300),q=a.i(470305),r=a.i(191675),s=a.i(249464),t=a.i(951870),u=a.i(899750);let v=[{value:"kyc_incomplete",label:"KYC Documentation Incomplete"},{value:"insufficient_funds",label:"Insufficient Funds"},{value:"deal_closed",label:"Deal Closed/No Longer Available"},{value:"minimum_not_met",label:"Minimum Investment Not Met"},{value:"compliance_issue",label:"Compliance Issue"},{value:"investor_ineligible",label:"Investor Ineligible"},{value:"documentation_error",label:"Documentation Error"},{value:"other",label:"Other (please specify)"}];function w({approval:a,action:d,open:f,onOpenChange:g,onSuccess:h}){let[k,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,w]=(0,c.useState)(!1),x=()=>{m(""),o(""),g(!1)},y=async()=>{if(a&&d){if("reject"===d&&!n)return void u.toast.error("Please select a rejection reason");w(!0);try{let b=await fetch(`/api/approvals/${a.id}/action`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:d,notes:k.trim()||void 0,rejection_reason:"reject"===d?n:void 0})}),c=await b.json();if(!b.ok)throw Error(c.error||`Failed to ${d} approval`);u.toast.success(c.message||`Successfully ${d}d approval`),x(),h()}catch(a){console.error(`Error ${d}ing approval:`,a),u.toast.error(a instanceof Error?a.message:`Failed to ${d} approval`)}finally{w(!1)}}};if(!a||!d)return null;let z="approve"===d,A=a.entity_metadata?.requested_amount||a.entity_metadata?.amount;return(0,b.jsx)(q.Dialog,{open:f,onOpenChange:g,children:(0,b.jsxs)(q.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsx)(q.DialogTitle,{className:"flex items-center gap-2",children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.CheckCircle2,{className:"h-5 w-5 text-green-600"}),"Approve Request"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.XCircle,{className:"h-5 w-5 text-red-600"}),"Reject Request"]})}),(0,b.jsx)(q.DialogDescription,{children:z?"Review the details below and confirm your approval.":"Provide a reason for rejection. The requester will be notified."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsx)("div",{className:"rounded-lg border border-border bg-card p-4 space-y-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Request Type:"}),(0,b.jsx)("p",{className:"font-medium capitalize mt-1",children:a.entity_type.replace(/_/g," ")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Requested By:"}),(0,b.jsx)("p",{className:"font-medium mt-1",children:a.requested_by_profile?.display_name||"Unknown"})]}),A&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,b.jsxs)("p",{className:"font-medium mt-1",children:["$",parseFloat(A).toLocaleString()]})]}),a.related_investor&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Investor:"}),(0,b.jsx)("p",{className:"font-medium mt-1",children:a.related_investor.legal_name})]}),a.related_deal&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Deal:"}),(0,b.jsx)("p",{className:"font-medium mt-1",children:a.related_deal.name})]})]})}),z&&A&&parseFloat(A)>5e4&&(0,b.jsxs)("div",{className:"flex items-start gap-2 rounded-lg border border-amber-500/20 bg-amber-500/10 p-3",children:[(0,b.jsx)(l.AlertTriangle,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium text-amber-900 dark:text-amber-200",children:"High-Value Approval"}),(0,b.jsx)("p",{className:"text-amber-800 dark:text-amber-300 mt-1",children:"This approval involves an amount greater than $50,000. Please ensure all documentation is complete."})]})]}),!z&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"rejection-reason",className:"text-sm font-medium",children:"Rejection Reason *"}),(0,b.jsxs)(t.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(t.SelectTrigger,{id:"rejection-reason",children:(0,b.jsx)(t.SelectValue,{placeholder:"Select a reason"})}),(0,b.jsx)(t.SelectContent,{children:v.map(a=>(0,b.jsx)(t.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"notes",className:"text-sm font-medium",children:z?"Additional Notes (Optional)":"Additional Details *"}),(0,b.jsx)(r.Textarea,{id:"notes",placeholder:z?"Add any notes about this approval...":"Provide specific details about why this request is being rejected...",value:k,onChange:a=>m(a.target.value),rows:4,className:"resize-none"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:z?"Notes will be saved in the approval history.":"This message will be sent to the requester along with the rejection reason."})]})]}),(0,b.jsxs)(q.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:x,disabled:p,children:"Cancel"}),(0,b.jsx)(e.Button,{variant:z?"default":"destructive",onClick:y,disabled:p||!z&&!n,children:p?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("span",{className:"mr-2",children:"Processing..."})}):(0,b.jsx)(b.Fragment,{children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Confirm Approval"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.XCircle,{className:"mr-2 h-4 w-4"}),"Confirm Rejection"]})})})]})]})})}var x=a.i(623157),y=a.i(166457);function z({onFilterChange:a,currentFilters:d}){let[f,g]=(0,c.useState)(d),i=b=>{let c={...f,...b};g(c),a(c)},j=f.entity_types.length+f.priorities.length+ +!!f.assigned_to_me+ +!!f.overdue_only;return(0,b.jsxs)(x.Popover,{children:[(0,b.jsx)(x.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"relative",children:[(0,b.jsx)(y.Filter,{className:"mr-2 h-4 w-4"}),"Filter",j>0&&(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-blue-600 rounded-full",children:j})]})}),(0,b.jsx)(x.PopoverContent,{className:"w-80 max-h-[80vh] overflow-y-auto",align:"end",side:"bottom",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium mb-3 text-sm",children:"Request Type"}),(0,b.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[{value:"member_invitation",label:"Member Invitations"},{value:"deal_interest",label:"Deal Interests"},{value:"deal_subscription",label:"Subscriptions"},{value:"deal_close",label:"Deal Close"},{value:"allocation",label:"Allocations"},{value:"kyc_change",label:"KYC Changes"},{value:"withdrawal",label:"Withdrawals"},{value:"profile_update",label:"Profile Updates"},{value:"document_access",label:"Document Access"},{value:"gdpr_deletion_request",label:"GDPR Deletion Requests"}].map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(h.Checkbox,{id:a.value,checked:f.entity_types.includes(a.value),onCheckedChange:b=>{i({entity_types:b?[...f.entity_types,a.value]:f.entity_types.filter(b=>b!==a.value)})}}),(0,b.jsx)(s.Label,{htmlFor:a.value,className:"text-sm font-normal cursor-pointer",children:a.label})]},a.value))})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsx)("h4",{className:"font-medium mb-3 text-sm",children:"Priority"}),(0,b.jsx)("div",{className:"space-y-2",children:[{value:"critical",label:"Critical",color:"text-red-600"},{value:"high",label:"High",color:"text-orange-600"},{value:"medium",label:"Medium",color:"text-yellow-600"},{value:"low",label:"Low",color:"text-blue-600"}].map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(h.Checkbox,{id:`priority-${a.value}`,checked:f.priorities.includes(a.value),onCheckedChange:b=>{i({priorities:b?[...f.priorities,a.value]:f.priorities.filter(b=>b!==a.value)})}}),(0,b.jsx)(s.Label,{htmlFor:`priority-${a.value}`,className:`text-sm font-normal cursor-pointer ${a.color}`,children:a.label})]},a.value))})]}),(0,b.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(h.Checkbox,{id:"assigned_to_me",checked:f.assigned_to_me,onCheckedChange:a=>i({assigned_to_me:a})}),(0,b.jsx)(s.Label,{htmlFor:"assigned_to_me",className:"text-sm font-normal cursor-pointer",children:"Assigned to me only"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(h.Checkbox,{id:"overdue_only",checked:f.overdue_only,onCheckedChange:a=>i({overdue_only:a})}),(0,b.jsx)(s.Label,{htmlFor:"overdue_only",className:"text-sm font-normal cursor-pointer",children:"Overdue only"})]})]}),j>0&&(0,b.jsx)("div",{className:"border-t pt-4",children:(0,b.jsx)(e.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{let b={entity_types:[],priorities:[],assigned_to_me:!1,overdue_only:!1};g(b),a(b)},children:"Clear all filters"})})]})})]})}var A=a.i(140561),B=a.i(877028),C=a.i(778541),D=a.i(181608),E=a.i(325866),F=a.i(278541),G=a.i(724070),H=a.i(816854),I=a.i(618287),J=a.i(966494),K=a.i(587143),L=a.i(789523),M=a.i(948153),N=a.i(380640),O=a.i(497412),P=a.i(289633);let Q={low:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-500/30",medium:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300 border-yellow-300 dark:border-yellow-500/30",high:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300 border-orange-300 dark:border-orange-500/30",critical:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300 border-red-300 dark:border-red-500/30"},R={pending:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300",approved:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",rejected:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300",awaiting_info:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",escalated:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300",cancelled:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300"},S={deal_interest:"Deal Interest",deal_subscription:"Subscription",deal_close:"Deal Close",allocation:"Allocation",withdrawal:"Withdrawal",kyc_change:"KYC Change",profile_update:"Profile Update",fee_override:"Fee Override",document_access:"Document Access",permission_grant:"Permission Grant"};function T({approval:a,open:g,onOpenChange:h,onApprove:m,onReject:n}){let o=(0,P.useRouter)(),[p,q]=(0,c.useState)(0),[r,s]=(0,c.useState)(!1),[t,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{if(a?.sla_breach_at){let b=new Date().getTime(),c=new Date(a.created_at).getTime();q(Math.min(100,Math.max(0,(b-c)/(new Date(a.sla_breach_at).getTime()-c)*100)))}},[a]),!a)return null;let y=async()=>{if(m){s(!0);try{await m(a.id),h(!1)}catch(a){console.error("Approval failed:",a)}finally{s(!1)}}},z=async()=>{if(!n)return;let b=prompt("Please provide a rejection reason:");if(b){v(!0);try{await n(a.id,b),h(!1)}catch(a){console.error("Rejection failed:",a)}finally{v(!1)}}},T=async()=>{if(!a.requested_by_profile?.id)return void u.toast.error("Cannot message investor",{description:"Investor profile not found"});x(!0);try{let b=a.related_deal?.name||"Deal",c=S[a.entity_type]||a.entity_type,d=`${c} - ${b}`,e=await fetch("/api/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:d,participant_ids:[a.requested_by_profile.id],type:"dm",visibility:"investor",initial_message:`Regarding your ${c.toLowerCase()} for ${b}.`,metadata:{approval_id:a.id,entity_type:a.entity_type,deal_id:a.related_deal?.id}})});if(!e.ok){let a=await e.json();throw Error(a.error||"Failed to create conversation")}let f=await e.json();u.toast.success("Conversation created",{description:`Opening conversation with ${a.requested_by_profile.display_name||"investor"}`}),o.push(`/versotech_main/messages?conversation=${f.conversation.id}`),h(!1)}catch(a){console.error("Error creating conversation:",a),u.toast.error("Failed to create conversation",{description:a instanceof Error?a.message:"Please try again"})}finally{x(!1)}},V=a.sla_breach_at?new Date(a.sla_breach_at):null,W=V&&V<new Date;return(0,b.jsx)(A.Sheet,{open:g,onOpenChange:h,children:(0,b.jsxs)(A.SheetContent,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,b.jsxs)(A.SheetHeader,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Badge,{variant:"outline",className:"text-sm text-foreground border-border",children:S[a.entity_type]||a.entity_type}),(0,b.jsx)(f.Badge,{className:Q[a.priority],children:a.priority.toUpperCase()}),(0,b.jsx)(f.Badge,{className:R[a.status],children:a.status.replace("_"," ").toUpperCase()})]}),(0,b.jsx)(A.SheetTitle,{className:"text-2xl text-foreground",children:a.related_deal?.name||a.related_investor?.legal_name||"Approval Details"}),(0,b.jsxs)(A.SheetDescription,{className:"text-muted-foreground",children:["Requested ",(0,N.formatDistanceToNow)(new Date(a.created_at),{addSuffix:!0})," by"," ",a.requested_by_profile?.display_name||"Unknown"]})]})}),V&&(0,b.jsx)(d.Card,{className:"border-border bg-muted/50",children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2 text-foreground",children:[(0,b.jsx)(k.Clock,{className:"h-4 w-4"}),"SLA Deadline"]}),(0,b.jsx)("span",{className:W?"text-red-600 dark:text-red-400 font-semibold":"text-foreground",children:W?(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(l.AlertTriangle,{className:"h-4 w-4"}),(0,N.formatDistanceToNow)(V)," overdue"]}):(0,M.format)(V,"MMM dd, yyyy HH:mm")})]}),(0,b.jsx)(C.Progress,{value:p,className:"h-2"})]})})}),(0,b.jsxs)("div",{className:"space-y-2",children:["pending"===a.status&&(m||n)&&(0,b.jsxs)("div",{className:"flex gap-2",children:[m&&(0,b.jsxs)(e.Button,{onClick:y,disabled:r,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white",children:[(0,b.jsx)(i.CheckCircle2,{className:"h-4 w-4 mr-2"}),r?"Approving...":"Approve"]}),n&&(0,b.jsxs)(e.Button,{onClick:z,disabled:t,variant:"destructive",className:"flex-1 text-white",children:[(0,b.jsx)(j.XCircle,{className:"h-4 w-4 mr-2"}),t?"Rejecting...":"Reject"]})]}),a.requested_by_profile&&(0,b.jsxs)(e.Button,{onClick:T,disabled:w,variant:"outline",className:"w-full border-blue-300 dark:border-blue-500/30 bg-blue-50 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-500/20 hover:text-blue-800 dark:hover:text-blue-200",children:[(0,b.jsx)(L.MessageCircle,{className:"h-4 w-4 mr-2"}),w?"Creating conversation...":`Message ${a.requested_by_profile.display_name||"Investor"}`]})]})]}),(0,b.jsx)(B.Separator,{className:"my-6"}),(0,b.jsxs)(D.Tabs,{defaultValue:"overview",className:"w-full",id:`approval-tabs-${a?.id||"new"}`,children:[(0,b.jsxs)(D.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsx)(D.TabsTrigger,{value:"overview",children:"Overview"}),(0,b.jsx)(D.TabsTrigger,{value:"timeline",children:"Timeline"}),(0,b.jsx)(D.TabsTrigger,{value:"metadata",children:"Data"})]}),(0,b.jsxs)(D.TabsContent,{value:"overview",className:"space-y-4 mt-6",children:[a.related_deal&&(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,b.jsx)(F.Building2,{className:"h-5 w-5"}),"Deal Information"]})}),(0,b.jsx)(d.CardContent,{className:"space-y-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deal Name"}),(0,b.jsxs)(O.default,{href:`/versotech_main/deals/${a.related_deal.id}`,className:"font-medium text-foreground hover:underline flex items-center gap-1",children:[a.related_deal.name,(0,b.jsx)(I.ExternalLink,{className:"h-3 w-3"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Status"}),(0,b.jsx)("p",{className:"font-medium text-foreground capitalize",children:a.related_deal.status||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deal Type"}),(0,b.jsx)("p",{className:"font-medium text-foreground capitalize",children:a.related_deal.deal_type||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Currency"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.related_deal.currency||"USD"})]})]})})]}),a.related_investor&&(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,b.jsx)(E.User,{className:"h-5 w-5"}),"Investor Information"]})}),(0,b.jsx)(d.CardContent,{className:"space-y-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Legal Name"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.related_investor.legal_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"KYC Status"}),(0,b.jsx)(f.Badge,{variant:"outline",className:"text-foreground border-border",children:a.related_investor.kyc_status||"Unknown"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type"}),(0,b.jsx)("p",{className:"font-medium text-foreground capitalize",children:a.related_investor.type||"N/A"})]})]})})]}),"deal_subscription"===a.entity_type&&a.entity_metadata?.subscription_type==="entity"&&a.entity_metadata?.counterparty_entity&&(0,b.jsxs)(d.Card,{className:"border-blue-300 dark:border-blue-500/30 bg-blue-50 dark:bg-blue-500/10",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,b.jsx)(F.Building2,{className:"h-5 w-5 text-blue-400"}),"Subscribing Entity"]}),(0,b.jsx)(d.CardDescription,{className:"text-blue-600 dark:text-blue-300",children:"This subscription is being made through a counterparty entity"})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Entity Legal Name"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.entity_metadata.counterparty_entity.legal_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Entity Type"}),(0,b.jsx)(f.Badge,{variant:"outline",className:"text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-400/30",children:a.entity_metadata.counterparty_entity.entity_type.replace("_"," ").toUpperCase()})]}),a.entity_metadata.counterparty_entity.jurisdiction&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Jurisdiction"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.entity_metadata.counterparty_entity.jurisdiction})]}),a.entity_metadata.counterparty_entity.registration_number&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Registration Number"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.entity_metadata.counterparty_entity.registration_number})]}),a.entity_metadata.counterparty_entity.tax_id&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tax ID"}),(0,b.jsx)("p",{className:"font-mono text-sm text-foreground",children:a.entity_metadata.counterparty_entity.tax_id})]}),a.entity_metadata.counterparty_entity.representative_name&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Authorized Representative"}),(0,b.jsxs)("p",{className:"font-medium text-foreground",children:[a.entity_metadata.counterparty_entity.representative_name,a.entity_metadata.counterparty_entity.representative_title&&(0,b.jsxs)("span",{className:"text-muted-foreground text-sm ml-1",children:["(",a.entity_metadata.counterparty_entity.representative_title,")"]})]})]})]}),a.entity_metadata.counterparty_entity.kyc_status&&(0,b.jsxs)("div",{className:"col-span-2 mt-2 p-3 rounded-lg bg-muted border border-border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Entity KYC Status"}),(0,b.jsx)(f.Badge,{variant:"approved"===a.entity_metadata.counterparty_entity.kyc_status?"default":"pending"===a.entity_metadata.counterparty_entity.kyc_status?"secondary":"destructive",className:"approved"===a.entity_metadata.counterparty_entity.kyc_status?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 border-emerald-300 dark:border-emerald-500/30":"pending"===a.entity_metadata.counterparty_entity.kyc_status?"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 border-amber-300 dark:border-amber-500/30":"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300 border-rose-300 dark:border-rose-500/30",children:a.entity_metadata.counterparty_entity.kyc_status.toUpperCase()})]}),a.entity_metadata.counterparty_entity.kyc_completed_at&&(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Completed"}),(0,b.jsx)("p",{className:"text-sm text-foreground",children:new Date(a.entity_metadata.counterparty_entity.kyc_completed_at).toLocaleDateString()})]})]}),a.entity_metadata.counterparty_entity.kyc_expiry_date&&(0,b.jsx)("div",{className:"mt-2 pt-2 border-t border-border",children:(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(a.entity_metadata.counterparty_entity.kyc_expiry_date).toLocaleDateString()]})}),a.entity_metadata.counterparty_entity.kyc_notes&&(0,b.jsx)("div",{className:"mt-2 pt-2 border-t border-border",children:(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.entity_metadata.counterparty_entity.kyc_notes})})]}),a.entity_metadata.counterparty_entity.registered_address&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Registered Address"}),(0,b.jsxs)("div",{className:"text-sm text-foreground",children:[a.entity_metadata.counterparty_entity.registered_address.street&&(0,b.jsx)("p",{children:a.entity_metadata.counterparty_entity.registered_address.street}),(0,b.jsx)("p",{children:[a.entity_metadata.counterparty_entity.registered_address.city,a.entity_metadata.counterparty_entity.registered_address.state,a.entity_metadata.counterparty_entity.registered_address.postal_code].filter(Boolean).join(", ")}),a.entity_metadata.counterparty_entity.registered_address.country&&(0,b.jsx)("p",{children:a.entity_metadata.counterparty_entity.registered_address.country})]})]}),(0,b.jsx)("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30",children:(0,b.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[(0,b.jsx)("strong",{children:"Note:"})," The investor (",a.related_investor?.legal_name,") is investing on behalf of this entity. Subscription documents will be prepared in the entity's name."]})})]})]}),(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,b.jsx)(H.FileText,{className:"h-5 w-5"}),"Request Details"]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assigned To"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.assigned_to_profile?.display_name||"Unassigned"}),a.assigned_to_profile?.email&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.assigned_to_profile.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Requested By"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.requested_by_profile?.display_name||"Unknown"}),a.requested_by_profile?.email&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.requested_by_profile.email})]})]}),"deal_subscription"===a.entity_type&&a.entity_metadata?.derived_amount&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Subscription Amount"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-emerald-400",children:[a.entity_metadata.payload?.currency||"USD"," ",a.entity_metadata.derived_amount.toLocaleString()]})]}),"deal_subscription"!==a.entity_type&&a.entity_metadata?.indicative_amount&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Indicative Amount"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-emerald-400",children:[a.entity_metadata.indicative_currency||"USD"," ",a.entity_metadata.indicative_amount.toLocaleString()]})]}),a.entity_metadata?.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Notes"}),(0,b.jsx)("div",{className:"p-3 rounded-lg bg-muted border border-border",children:(0,b.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:a.entity_metadata.notes})})]}),a.request_reason&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Request Reason"}),(0,b.jsx)("div",{className:"p-3 rounded-lg bg-muted border border-border",children:(0,b.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:a.request_reason})})]}),a.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Staff Notes"}),(0,b.jsx)("div",{className:"p-3 rounded-lg bg-muted border border-border",children:(0,b.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:a.notes})})]}),a.rejection_reason&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Rejection Reason"}),(0,b.jsx)("div",{className:"p-3 rounded-lg bg-rose-50 dark:bg-rose-500/10 border border-rose-200 dark:border-rose-500/30",children:(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap text-rose-700 dark:text-rose-300",children:a.rejection_reason})})]})]})]}),a.approved_by_profile&&(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,b.jsx)(i.CheckCircle2,{className:"h-5 w-5"}),"Decision"]})}),(0,b.jsx)(d.CardContent,{className:"space-y-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Decided By"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.approved_by_profile.display_name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.approved_by_profile.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Decided At"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.approved_at&&(0,M.format)(new Date(a.approved_at),"MMM dd, yyyy HH:mm")})]})]})})]}),(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,b.jsx)(K.Info,{className:"h-5 w-5"}),"Reference Information"]})}),(0,b.jsx)(d.CardContent,{className:"space-y-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Approval ID"}),(0,b.jsx)("p",{className:"font-mono text-xs text-foreground",children:a.id})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Entity ID"}),(0,b.jsx)("p",{className:"font-mono text-xs text-foreground",children:a.entity_id})]})]})})]})]}),(0,b.jsx)(D.TabsContent,{value:"timeline",className:"space-y-4 mt-6",children:(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,b.jsx)(J.TrendingUp,{className:"h-5 w-5"}),"Approval Timeline"]}),(0,b.jsx)(d.CardDescription,{className:"text-muted-foreground",children:"Complete event history for this approval"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(U,{approval:a})})]})}),(0,b.jsxs)(D.TabsContent,{value:"metadata",className:"space-y-4 mt-6",children:[a.entity_metadata&&Object.keys(a.entity_metadata).length>0&&(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{className:"text-lg text-foreground",children:"Entity Metadata"}),(0,b.jsx)(d.CardDescription,{className:"text-muted-foreground",children:"Complete data payload for this approval"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("pre",{className:"p-4 rounded-lg bg-muted dark:bg-black/30 border border-border overflow-x-auto text-xs text-foreground",children:JSON.stringify(a.entity_metadata,null,2)})})]}),(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2 text-foreground",children:[(0,b.jsx)(G.Calendar,{className:"h-5 w-5"}),"Timestamps"]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Created At"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:(0,M.format)(new Date(a.created_at),"MMM dd, yyyy HH:mm:ss")})]}),a.updated_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Updated At"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:(0,M.format)(new Date(a.updated_at),"MMM dd, yyyy HH:mm:ss")})]}),a.approved_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Approved/Rejected At"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:(0,M.format)(new Date(a.approved_at),"MMM dd, yyyy HH:mm:ss")})]}),a.resolved_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Resolved At"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:(0,M.format)(new Date(a.resolved_at),"MMM dd, yyyy HH:mm:ss")})]}),a.sla_breach_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"SLA Deadline"}),(0,b.jsx)("p",{className:"font-medium text-foreground",children:(0,M.format)(new Date(a.sla_breach_at),"MMM dd, yyyy HH:mm:ss")})]})]})})]}),(0,b.jsxs)(d.Card,{className:"border-border bg-muted/50",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{className:"text-lg text-foreground",children:"Complete Approval Record"}),(0,b.jsx)(d.CardDescription,{className:"text-muted-foreground",children:"Full approval object (all fields)"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("pre",{className:"p-4 rounded-lg bg-muted dark:bg-black/30 border border-border overflow-x-auto text-xs text-foreground max-h-96 overflow-y-auto",children:JSON.stringify(a,null,2)})})]})]})]})]})})}function U({approval:a}){let c=[];return c.push({label:"Approval Requested",date:new Date(a.created_at),completed:!0,current:!1,icon:H.FileText,description:`Requested by ${a.requested_by_profile?.display_name||"Unknown"}`}),a.assigned_to_profile&&c.push({label:"Assigned for Review",date:new Date(a.created_at),completed:!0,current:!1,icon:E.User,description:`Assigned to ${a.assigned_to_profile.display_name}`}),"pending"===a.status?c.push({label:"Under Review",date:null,completed:!1,current:!0,icon:k.Clock,description:a.sla_breach_at?`SLA deadline: ${(0,M.format)(new Date(a.sla_breach_at),"MMM dd, HH:mm")}`:"Awaiting decision"}):"approved"===a.status?c.push({label:"Approved",date:a.approved_at?new Date(a.approved_at):null,completed:!0,current:!a.resolved_at,icon:i.CheckCircle2,description:a.approved_by_profile?.display_name?`Approved by ${a.approved_by_profile.display_name}`:"Approval granted"}):"rejected"===a.status?(c.push({label:"Rejected",date:a.approved_at?new Date(a.approved_at):null,completed:!0,current:!a.resolved_at,icon:j.XCircle,description:a.approved_by_profile?.display_name?`Rejected by ${a.approved_by_profile.display_name}`:"Approval denied"}),a.rejection_reason&&c.push({label:"Rejection Reason",date:null,completed:!0,current:!1,icon:K.Info,description:a.rejection_reason})):"awaiting_info"===a.status?c.push({label:"Awaiting Information",date:a.updated_at?new Date(a.updated_at):null,completed:!1,current:!0,icon:l.AlertTriangle,description:"Additional information requested"}):"escalated"===a.status?c.push({label:"Escalated",date:a.updated_at?new Date(a.updated_at):null,completed:!0,current:!a.resolved_at,icon:l.AlertTriangle,description:"Escalated to higher authority"}):"cancelled"===a.status&&c.push({label:"Cancelled",date:a.updated_at?new Date(a.updated_at):null,completed:!0,current:!1,icon:j.XCircle,description:"Approval request cancelled"}),a.resolved_at&&c.push({label:"Workflow Completed",date:new Date(a.resolved_at),completed:!0,current:!1,icon:i.CheckCircle2,description:"Approval workflow finalized"}),(0,b.jsx)("div",{className:"space-y-4",children:c.map((a,d)=>{let e=a.icon;return(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`rounded-full p-2 ${a.completed?"bg-emerald-500/20 text-emerald-400":a.current?"bg-amber-500/20 text-amber-400":"bg-muted text-muted-foreground"}`,children:(0,b.jsx)(e,{className:"h-4 w-4"})}),d<c.length-1&&(0,b.jsx)("div",{className:`w-0.5 h-12 ${a.completed?"bg-emerald-500/30":"bg-border"}`})]}),(0,b.jsxs)("div",{className:"flex-1 pb-8",children:[(0,b.jsx)("p",{className:`font-medium ${a.current?"text-amber-600 dark:text-amber-400":"text-foreground"}`,children:a.label}),a.date&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,M.format)(a.date,"MMM dd, yyyy HH:mm")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]})]},d)})})}var V=a.i(3191),W=a.i(257451),X=a.i(292944),Y=a.i(95799);let Z=(0,Y.default)("kanban",[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]]);function $({currentView:a,onViewChange:c}){return(0,b.jsx)(D.Tabs,{value:a,onValueChange:a=>{c(a)},children:(0,b.jsxs)(D.TabsList,{className:"grid w-full grid-cols-4 max-w-md",children:[(0,b.jsxs)(D.TabsTrigger,{value:"table",className:"flex items-center gap-2",children:[(0,b.jsx)(W.Table,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Table"})]}),(0,b.jsxs)(D.TabsTrigger,{value:"kanban",className:"flex items-center gap-2",children:[(0,b.jsx)(Z,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Kanban"})]}),(0,b.jsxs)(D.TabsTrigger,{value:"list",className:"flex items-center gap-2",children:[(0,b.jsx)(X.List,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"List"})]}),(0,b.jsxs)(D.TabsTrigger,{value:"database",className:"flex items-center gap-2",children:[(0,b.jsx)(V.LayoutGrid,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Grid"})]})]})})}var _=a.i(155508);let aa=(0,Y.default)("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]]);var ab=a.i(496392);let ac=[{id:"pending",title:"Pending Review",color:"border-amber-500",bgColor:"bg-amber-500/10"},{id:"approved",title:"Approved",color:"border-emerald-500",bgColor:"bg-emerald-500/10"},{id:"rejected",title:"Rejected",color:"border-rose-500",bgColor:"bg-rose-500/10"}],ad=[{id:"critical",title:"Critical Priority",color:"border-red-500",bgColor:"bg-red-500/10"},{id:"high",title:"High Priority",color:"border-orange-500",bgColor:"bg-orange-500/10"},{id:"medium",title:"Medium Priority",color:"border-yellow-500",bgColor:"bg-yellow-500/10"},{id:"low",title:"Low Priority",color:"border-blue-500",bgColor:"bg-blue-500/10"}],ae={low:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",medium:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300",high:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300",critical:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300"},af={pending:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300",approved:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",rejected:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300",cancelled:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300"};function ag({approvals:a,onApprovalClick:g}){let[h,i]=(0,c.useState)("status");return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-muted/50 p-3 rounded-lg border border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(V.LayoutGrid,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Group by:"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"status"===h?"default":"outline",size:"sm",onClick:()=>i("status"),className:"status"===h?"bg-blue-600 hover:bg-blue-700":"",children:[(0,b.jsx)(aa,{className:"h-4 w-4 mr-2"}),"Status"]}),(0,b.jsxs)(e.Button,{variant:"priority"===h?"default":"outline",size:"sm",onClick:()=>i("priority"),className:"priority"===h?"bg-blue-600 hover:bg-blue-700":"",children:[(0,b.jsx)(aa,{className:"h-4 w-4 mr-2"}),"Priority"]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:("status"===h?ac:ad).map(c=>{let e=a.filter(a=>"status"===h?a.status===c.id:a.priority===c.id);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:`border-l-4 ${c.color} pl-4 ${c.bgColor} py-3 rounded-r-lg`,children:[(0,b.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:c.title}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.length," items"]})]}),(0,b.jsxs)("div",{className:"space-y-3 min-h-[200px]",children:[e.map(a=>(0,b.jsxs)(d.Card,{className:"cursor-pointer hover:bg-muted transition-all border-border hover:border-primary/30 hover:shadow-lg",onClick:()=>g(a),children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"space-y-1.5 flex-1 min-w-0",children:[(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.entity_type.replace(/_/g," ")}),(0,b.jsx)("p",{className:"font-semibold text-sm truncate text-foreground",children:"member_invitation"===a.entity_type?a.entity_metadata?.email||"Unknown":a.related_deal?.name||a.related_investor?.legal_name||"Unknown"})]}),"status"===h?(0,b.jsx)(f.Badge,{className:ae[a.priority],children:a.priority}):(0,b.jsx)(f.Badge,{className:af[a.status],children:a.status})]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-2.5",children:[a.sla_breach_at&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)(k.Clock,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["Due ",(0,M.format)(new Date(a.sla_breach_at),"MMM dd, HH:mm")]})]}),a.entity_metadata?.indicative_amount&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs font-semibold text-emerald-400",children:[(0,b.jsx)(_.DollarSign,{className:"h-3 w-3"}),a.entity_metadata.indicative_currency||"USD"," ",a.entity_metadata.indicative_amount.toLocaleString()]}),a.assigned_to_profile&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:["Assigned: ",a.assigned_to_profile.display_name]}),"member_invitation"===a.entity_type&&a.entity_metadata&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.entity_metadata.entity_name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"capitalize",children:a.entity_metadata.role||"Member"}),a.entity_metadata.is_signatory&&(0,b.jsxs)(f.Badge,{className:"text-[10px] bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 px-1 py-0",children:[(0,b.jsx)(ab.Shield,{className:"h-2.5 w-2.5 mr-0.5"}),"Signatory"]})]})]}),"member_invitation"!==a.entity_type&&a.related_investor&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.related_investor.legal_name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,M.format)(new Date(a.created_at),"MMM dd, HH:mm")})]})]},a.id)),0===e.length&&(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground text-sm border-2 border-dashed border-border rounded-lg",children:["No ",c.title.toLowerCase()]})]})]},c.id)})})]})}var ah=a.i(439467),ai=a.i(799373);let aj={low:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",medium:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300",high:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300",critical:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300"},ak={pending:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300",approved:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",rejected:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300",awaiting_info:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",escalated:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300",cancelled:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300"};function al({approvals:a,onApprovalClick:c,onApprove:g,onReject:h}){return(0,b.jsxs)("div",{className:"space-y-4",children:[a.map(a=>(0,b.jsx)(d.Card,{className:"cursor-pointer hover:bg-muted transition-all border-border hover:border-primary/30",onClick:()=>c(a),children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)(f.Badge,{variant:"outline",children:a.entity_type.replace(/_/g," ").toUpperCase()}),(0,b.jsx)(f.Badge,{className:aj[a.priority],children:a.priority.toUpperCase()}),(0,b.jsx)(f.Badge,{className:ak[a.status],children:a.status.replace(/_/g," ").toUpperCase()})]}),(0,b.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:"member_invitation"===a.entity_type?`Member Invitation: ${a.entity_metadata?.email||"Unknown"}`:a.related_deal?.name||a.related_investor?.legal_name||"Approval Request"}),"member_invitation"===a.entity_type&&a.entity_metadata&&(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(ah.Mail,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:a.entity_metadata.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(F.Building2,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:a.entity_metadata.entity_name})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(ai.UserPlus,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate capitalize",children:a.entity_metadata.role||"Member"})]}),a.entity_metadata.is_signatory&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-amber-400 font-medium",children:[(0,b.jsx)(ab.Shield,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{children:"Signatory"})]}),a.sla_breach_at&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(k.Clock,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsxs)("span",{children:["Due ",(0,M.format)(new Date(a.sla_breach_at),"MMM dd, HH:mm")]})]})]}),"member_invitation"!==a.entity_type&&(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[a.related_investor&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(E.User,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:a.related_investor.legal_name})]}),a.related_deal&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(F.Building2,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate capitalize",children:a.related_deal.deal_type||"Deal"})]}),a.sla_breach_at&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(k.Clock,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsxs)("span",{children:["Due ",(0,M.format)(new Date(a.sla_breach_at),"MMM dd, HH:mm")]})]}),a.entity_metadata?.indicative_amount&&(0,b.jsxs)("div",{className:"flex items-center gap-2 font-semibold text-emerald-400",children:[(0,b.jsx)(_.DollarSign,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsxs)("span",{children:[a.entity_metadata.indicative_currency||"USD"," ",a.entity_metadata.indicative_amount.toLocaleString()]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Requested by ",a.requested_by_profile?.display_name||"Unknown"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:["Assigned to ",a.assigned_to_profile?.display_name||"Unassigned"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:(0,M.format)(new Date(a.created_at),"MMM dd, yyyy")})]})]}),"pending"===a.status&&(g||h)&&(0,b.jsxs)("div",{className:"flex flex-col gap-2",onClick:a=>a.stopPropagation(),children:[g&&(0,b.jsxs)(e.Button,{size:"sm",onClick:b=>{b.stopPropagation(),g(a.id)},className:"bg-emerald-600 hover:bg-emerald-700 min-w-[100px]",children:[(0,b.jsx)(i.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Approve"]}),h&&(0,b.jsxs)(e.Button,{size:"sm",variant:"destructive",onClick:b=>{b.stopPropagation();let c=prompt("Please provide a rejection reason:");c&&h(a.id,c)},className:"min-w-[100px]",children:[(0,b.jsx)(j.XCircle,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})})},a.id)),0===a.length&&(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No approvals found"})]})}var am=a.i(663475),an=a.i(487068),ao=a.i(657668),ap=a.i(823879),aq=a.i(294565),ar=a.i(396008),as=a.i(946256);let at={low:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",medium:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300",high:"bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300",critical:"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300"},au={pending:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300",approved:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",rejected:"bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300",awaiting_info:"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300",escalated:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300",cancelled:"bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300"},av={critical:0,high:1,medium:2,low:3};function aw({approvals:a,onApprovalClick:h}){let[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)("all"),[m,n]=(0,c.useState)("all"),[o,p]=(0,c.useState)("all"),[q,r]=(0,c.useState)("all"),[s,u]=(0,c.useState)("created_at"),[v,w]=(0,c.useState)("desc"),[x,z]=(0,c.useState)({entity_type:!0,deal_investor:!0,amount:!0,priority:!0,status:!0,sla:!0,assigned_to:!0,requested_by:!0,created_at:!0}),A=(0,c.useMemo)(()=>{let b=a;if(i.trim()){let a=i.toLowerCase();b=b.filter(b=>b.entity_type.toLowerCase().includes(a)||b.related_deal?.name?.toLowerCase().includes(a)||b.related_investor?.legal_name?.toLowerCase().includes(a)||b.requested_by_profile?.display_name?.toLowerCase().includes(a)||b.assigned_to_profile?.display_name?.toLowerCase().includes(a)||b.id.toLowerCase().includes(a)||"member_invitation"===b.entity_type&&(b.entity_metadata?.email?.toLowerCase().includes(a)||b.entity_metadata?.entity_name?.toLowerCase().includes(a)||b.entity_metadata?.role?.toLowerCase().includes(a)))}if("all"!==k&&(b=b.filter(a=>a.status===k)),"all"!==m&&(b=b.filter(a=>a.priority===m)),"all"!==o&&(b=b.filter(a=>a.entity_type===o)),"all"!==q){let a=new Date;b=b.filter(b=>{if(!b.sla_breach_at)return"no_sla"===q;let c=new Date(b.sla_breach_at);if("overdue"===q)return c<a;if("due_soon"===q){let b=(c.getTime()-a.getTime())/36e5;return b>0&&b<4}return"on_track"!==q||(c.getTime()-a.getTime())/36e5>=4})}return b.sort((a,b)=>{let c,d;switch(s){case"created_at":c=new Date(a.created_at).getTime(),d=new Date(b.created_at).getTime();break;case"priority":c=av[a.priority],d=av[b.priority];break;case"sla_breach_at":c=a.sla_breach_at?new Date(a.sla_breach_at).getTime():1/0,d=b.sla_breach_at?new Date(b.sla_breach_at).getTime():1/0;break;case"entity_type":c=a.entity_type,d=b.entity_type;break;case"status":c=a.status,d=b.status;break;default:return 0}return c<d?"asc"===v?-1:1:c>d?"asc"===v?1:-1:0}),b},[a,i,k,m,o,q,s,v]),B=(0,c.useMemo)(()=>Array.from(new Set(a.map(a=>a.entity_type))),[a]),C=a=>{s===a?w("asc"===v?"desc":"asc"):(u(a),w("asc"))},D=()=>{j(""),l("all"),n("all"),p("all"),r("all")},E=i||"all"!==k||"all"!==m||"all"!==o||"all"!==q,F=({field:a})=>s!==a?(0,b.jsx)(aq.ArrowUpDown,{className:"h-3 w-3 ml-1 opacity-50"}):"asc"===v?(0,b.jsx)(ar.ArrowUp,{className:"h-3 w-3 ml-1"}):(0,b.jsx)(as.ArrowDown,{className:"h-3 w-3 ml-1"});return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(d.Card,{className:"border-border bg-muted/50",children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(an.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(am.Input,{placeholder:"Search by deal name, investor, ID, assigned to...",value:i,onChange:a=>j(a.target.value),className:"pl-10 bg-background border-input text-foreground placeholder:text-muted-foreground"})]}),E&&(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:D,className:"shrink-0",children:[(0,b.jsx)(ap.X,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(y.Filter,{className:"h-3 w-3"}),"Status"]}),(0,b.jsxs)(t.Select,{value:k,onValueChange:l,children:[(0,b.jsx)(t.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"all",children:"All Statuses"}),(0,b.jsx)(t.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(t.SelectItem,{value:"approved",children:"Approved"}),(0,b.jsx)(t.SelectItem,{value:"rejected",children:"Rejected"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(y.Filter,{className:"h-3 w-3"}),"Priority"]}),(0,b.jsxs)(t.Select,{value:m,onValueChange:n,children:[(0,b.jsx)(t.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"all",children:"All Priorities"}),(0,b.jsx)(t.SelectItem,{value:"critical",children:"Critical"}),(0,b.jsx)(t.SelectItem,{value:"high",children:"High"}),(0,b.jsx)(t.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(t.SelectItem,{value:"low",children:"Low"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(y.Filter,{className:"h-3 w-3"}),"Entity Type"]}),(0,b.jsxs)(t.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(t.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"all",children:"All Types"}),B.map(a=>(0,b.jsx)(t.SelectItem,{value:a,children:a.replace(/_/g," ")},a))]})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(y.Filter,{className:"h-3 w-3"}),"SLA Status"]}),(0,b.jsxs)(t.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(t.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"all",children:"All SLA"}),(0,b.jsx)(t.SelectItem,{value:"overdue",children:"Overdue"}),(0,b.jsx)(t.SelectItem,{value:"due_soon",children:"Due Soon (<4h)"}),(0,b.jsx)(t.SelectItem,{value:"on_track",children:"On Track"}),(0,b.jsx)(t.SelectItem,{value:"no_sla",children:"No SLA"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(ao.SlidersHorizontal,{className:"h-3 w-3"}),"Sort By"]}),(0,b.jsxs)(t.Select,{value:s,onValueChange:a=>u(a),children:[(0,b.jsx)(t.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"created_at",children:"Created Date"}),(0,b.jsx)(t.SelectItem,{value:"priority",children:"Priority"}),(0,b.jsx)(t.SelectItem,{value:"sla_breach_at",children:"SLA Deadline"}),(0,b.jsx)(t.SelectItem,{value:"entity_type",children:"Entity Type"}),(0,b.jsx)(t.SelectItem,{value:"status",children:"Status"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:A.length})," of"," ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:a.length})," approvals"]}),E&&(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:"Filters Active"})]})]})})}),(0,b.jsx)(d.Card,{className:"border-border bg-muted/50",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{className:"border-border hover:bg-white/5",children:[x.entity_type&&(0,b.jsx)(g.TableHead,{children:(0,b.jsxs)("button",{onClick:()=>C("entity_type"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["Type",(0,b.jsx)(F,{field:"entity_type"})]})}),x.deal_investor&&(0,b.jsx)(g.TableHead,{className:"text-muted-foreground font-semibold",children:"Deal / Investor"}),x.amount&&(0,b.jsx)(g.TableHead,{className:"text-muted-foreground font-semibold",children:"Amount"}),x.priority&&(0,b.jsx)(g.TableHead,{children:(0,b.jsxs)("button",{onClick:()=>C("priority"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["Priority",(0,b.jsx)(F,{field:"priority"})]})}),x.status&&(0,b.jsx)(g.TableHead,{children:(0,b.jsxs)("button",{onClick:()=>C("status"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["Status",(0,b.jsx)(F,{field:"status"})]})}),x.sla&&(0,b.jsx)(g.TableHead,{children:(0,b.jsxs)("button",{onClick:()=>C("sla_breach_at"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["SLA Deadline",(0,b.jsx)(F,{field:"sla_breach_at"})]})}),x.assigned_to&&(0,b.jsx)(g.TableHead,{className:"text-muted-foreground font-semibold",children:"Assigned To"}),x.requested_by&&(0,b.jsx)(g.TableHead,{className:"text-muted-foreground font-semibold",children:"Requested By"}),x.created_at&&(0,b.jsx)(g.TableHead,{children:(0,b.jsxs)("button",{onClick:()=>C("created_at"),className:"flex items-center text-muted-foreground hover:text-foreground font-semibold",children:["Created",(0,b.jsx)(F,{field:"created_at"})]})})]})}),(0,b.jsx)(g.TableBody,{children:A.length>0?A.map(a=>{let c=a.sla_breach_at?new Date(a.sla_breach_at):null,d=c&&c<new Date;return(0,b.jsxs)(g.TableRow,{className:"border-border cursor-pointer hover:bg-muted transition-colors",onClick:()=>h(a),children:[x.entity_type&&(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.entity_type.replace(/_/g," ")})}),x.deal_investor&&(0,b.jsx)(g.TableCell,{children:(0,b.jsx)("div",{className:"space-y-1",children:"member_invitation"===a.entity_type&&a.entity_metadata?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"font-medium text-foreground text-sm",children:a.entity_metadata.email}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.entity_metadata.entity_name," • ",a.entity_metadata.role||"Member",a.entity_metadata.is_signatory&&" • Signatory"]})]}):(0,b.jsxs)(b.Fragment,{children:[a.related_deal&&(0,b.jsx)("p",{className:"font-medium text-foreground text-sm",children:a.related_deal.name}),a.related_investor&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.related_investor.legal_name}),!a.related_deal&&!a.related_investor&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground font-mono",children:[a.entity_id.substring(0,12),"..."]})]})})}),x.amount&&(0,b.jsx)(g.TableCell,{children:a.entity_metadata?.indicative_amount?(0,b.jsxs)("p",{className:"text-sm font-semibold text-emerald-400",children:[a.entity_metadata.indicative_currency||"USD"," ",a.entity_metadata.indicative_amount.toLocaleString()]}):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"—"})}),x.priority&&(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(f.Badge,{className:at[a.priority],children:a.priority.toUpperCase()})}),x.status&&(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(f.Badge,{className:au[a.status],children:a.status.replace("_"," ").toUpperCase()})}),x.sla&&(0,b.jsx)(g.TableCell,{children:c?(0,b.jsxs)("div",{className:d?"text-red-400 font-semibold":"text-muted-foreground",children:[(0,b.jsx)("p",{className:"text-xs",children:(0,M.format)(c,"MMM dd, HH:mm")}),d&&(0,b.jsx)("p",{className:"text-xs text-red-400",children:"Overdue"})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"No SLA"})}),x.assigned_to&&(0,b.jsx)(g.TableCell,{children:(0,b.jsx)("p",{className:"text-sm text-foreground",children:a.assigned_to_profile?.display_name||(0,b.jsx)("span",{className:"text-muted-foreground",children:"Unassigned"})})}),x.requested_by&&(0,b.jsx)(g.TableCell,{children:(0,b.jsx)("p",{className:"text-sm text-foreground",children:a.requested_by_profile?.display_name||"Unknown"})}),x.created_at&&(0,b.jsxs)(g.TableCell,{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,M.format)(new Date(a.created_at),"MMM dd, yyyy")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,M.format)(new Date(a.created_at),"HH:mm")})]})]},a.id)}):(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:9,className:"text-center py-12",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"No approvals match your filters"}),E&&(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:D,children:"Clear all filters"})]})})})})]})})})]})}function ax({initialApprovals:a,initialStats:q,initialCounts:r}){let[s,t]=(0,c.useState)(a),[v,x]=(0,c.useState)(q),[y,A]=(0,c.useState)(r),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)({entity_types:[],priorities:[],assigned_to_me:!1,overdue_only:!1}),[H,I]=(0,c.useState)({page:1,limit:50,total:a?.length||0}),[J,K]=(0,c.useState)(new Set),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(null),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)(null),[Y,Z]=(0,c.useState)("table"),_=(0,c.useMemo)(()=>"kanban"===Y?s:s.filter(a=>"pending"===a.status),[s,Y]);(0,c.useEffect)(()=>{let a=localStorage.getItem("approvals-view-preference");a&&["table","kanban","list","database"].includes(a)&&Z(a)},[]),(0,c.useEffect)(()=>{localStorage.setItem("approvals-view-preference",Y)},[Y]),(0,c.useEffect)(()=>{I(a=>({...a,page:1}))},[Y]);let aa=(0,c.useCallback)(async()=>{C(!0);try{let a=new URLSearchParams;a.append("status","pending,approved,rejected");let b=new Date;b.setDate(b.getDate()-30),a.append("decided_after",b.toISOString());let c="kanban"===Y?500:H.limit;a.append("limit",c.toString()),"kanban"!==Y&&a.append("offset",((H.page-1)*H.limit).toString()),F.entity_types.length>0&&a.append("entity_types",F.entity_types.join(",")),F.priorities.length>0&&a.append("priorities",F.priorities.join(",")),F.assigned_to_me&&a.append("assigned_to","me"),F.overdue_only&&a.append("overdue_only","true");let d=await fetch(`/api/approvals?${a.toString()}`,{credentials:"include"});if(!d.ok)throw Error("Failed to fetch approvals");let e=await d.json();t(e.approvals||[]),x(e.stats||q),A(e.counts||r),I(a=>({...a,total:e.total||0}))}catch(a){console.error("Error refreshing approvals:",a),u.toast.error("Failed to refresh approvals data")}finally{C(!1)}},[F,H.page,H.limit,q,r,Y]),ab=a=>{X(a),V(!0)},ac=async a=>{try{if(!(await fetch(`/api/approvals/${a}/action`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:"approve"})})).ok)throw Error("Approval failed");u.toast.success("Approval approved successfully"),await aa()}catch(a){throw console.error("Error approving:",a),u.toast.error("Failed to approve"),a}},ad=async(a,b)=>{try{if(!(await fetch(`/api/approvals/${a}/action`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:"reject",rejection_reason:b})})).ok)throw Error("Rejection failed");u.toast.success("Approval rejected"),await aa()}catch(a){throw console.error("Error rejecting:",a),u.toast.error("Failed to reject"),a}};(0,c.useEffect)(()=>{D?E(!1):aa()},[F.entity_types,F.priorities,F.assigned_to_me,F.overdue_only,H.page]);let ae=async a=>{if(0===J.size)return void u.toast.error("No approvals selected");M(!0);try{let b=await fetch("/api/approvals/bulk-action",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({approval_ids:Array.from(J),action:a,rejection_reason:"reject"===a?"Bulk rejection":void 0})});if(!b.ok)throw Error(`Bulk ${a} failed`);let c=await b.json();c.successful_count>0&&u.toast.success(`${c.successful_count} approval${c.successful_count>1?"s":""} ${a}d successfully`),c.failed_count>0&&u.toast.error(`${c.failed_count} approval${c.failed_count>1?"s":""} failed`),K(new Set),aa()}catch(b){console.error(`Bulk ${a} error:`,b),u.toast.error(`Failed to ${a} selected approvals`)}finally{M(!1)}},af=async()=>{0===v.overdue_count?u.toast.info("No overdue items"):(G({entity_types:[],priorities:[],assigned_to_me:!1,overdue_only:!0}),I(a=>({...a,page:1})))},ah=async()=>{G({entity_types:[],priorities:["low"],assigned_to_me:!1,overdue_only:!1}),I(a=>({...a,page:1}))},ai=async()=>{G({entity_types:[],priorities:["critical","high"],assigned_to_me:!1,overdue_only:!1}),I(a=>({...a,page:1}))},aj=async()=>{G({entity_types:["deal_interest"],priorities:[],assigned_to_me:!1,overdue_only:!1}),I(a=>({...a,page:1}))},ak=async()=>{G({entity_types:["deal_subscription"],priorities:[],assigned_to_me:!1,overdue_only:!1}),I(a=>({...a,page:1}))},am=async()=>{G({entity_types:[],priorities:[],assigned_to_me:!1,overdue_only:!1}),I(a=>({...a,page:1})),K(new Set)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Pending Approvals"}),(0,b.jsx)(k.Clock,{className:"h-4 w-4 text-blue-600"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:v.total_pending}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Requiring review"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"SLA Breaches"}),(0,b.jsx)(l.AlertTriangle,{className:"h-4 w-4 text-red-600"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:v.overdue_count}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Past deadline"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Avg Processing Time"}),(0,b.jsx)(i.CheckCircle2,{className:"h-4 w-4 text-green-600"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[v.avg_processing_time_hours.toFixed(1),"h"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Last 30 days"})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{children:"Pending Approvals"}),(0,b.jsx)(d.CardDescription,{children:"Review deal approvals across commitments, interests, and data-room workflows"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(z,{onFilterChange:G,currentFilters:F}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>{try{if(!_||0===_.length)return void u.toast.error("No data to export");let a=new Date().toISOString().split("T")[0],b=`approvals-export-${a}.csv`;!function(a,b="approvals-export.csv"){if(!a||0===a.length)throw Error("No data to export");let c=a.map(a=>{let b=a.entity_metadata?.requested_amount||a.entity_metadata?.amount||"",c=a.entity_metadata?.requested_units||"";return[a.id,a.entity_type,a.status,a.priority,a.requested_by_profile?.display_name||"",a.assigned_to_profile?.display_name||"",a.related_investor?.legal_name||"",a.related_deal?.name||"",b,c,a.sla_breach_at?new Date(a.sla_breach_at).toLocaleString():"",new Date(a.created_at).toLocaleString(),a.approved_by_profile?.display_name||"",a.approved_at?new Date(a.approved_at).toLocaleString():"",a.rejection_reason||"",a.notes||""].map(a=>{let b=String(a);return b.includes(",")||b.includes('"')||b.includes("\n")?`"${b.replace(/"/g,'""')}"`:b})}),d=new Blob([["ID,Request Type,Status,Priority,Requested By,Assigned To,Investor,Deal,Amount,Units,SLA Breach At,Created At,Approved By,Approved At,Rejection Reason,Notes",...c.map(a=>a.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),e=document.createElement("a"),f=URL.createObjectURL(d);e.setAttribute("href",f),e.setAttribute("download",b),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e)}(_,b),u.toast.success(`Exported ${_.length} approvals to CSV`)}catch(a){console.error("Export error:",a),u.toast.error("Failed to export data")}},disabled:!_||0===_.length,children:[(0,b.jsx)(n.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>aa(),disabled:B,children:[(0,b.jsx)(m.RefreshCw,{className:`h-4 w-4 mr-2 ${B?"animate-spin":""}`}),"Refresh"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"View:"}),(0,b.jsx)($,{currentView:Y,onViewChange:Z})]}),(0,b.jsxs)(f.Badge,{variant:"secondary",className:"text-sm",children:[_.length," approval",1!==_.length?"s":""]})]})]})}),(0,b.jsxs)(d.CardContent,{children:["table"===Y&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{className:"w-12",children:(0,b.jsx)(h.Checkbox,{checked:J.size===_.length&&_.length>0,onCheckedChange:()=>{J.size===_.length&&_.length>0?K(new Set):K(new Set(_.map(a=>a.id)))},"aria-label":"Select all"})}),(0,b.jsx)(g.TableHead,{children:"Request Type / User"}),(0,b.jsx)(g.TableHead,{children:"Entity"}),(0,b.jsx)(g.TableHead,{children:"Priority"}),(0,b.jsx)(g.TableHead,{children:"SLA Status"}),(0,b.jsx)(g.TableHead,{children:"Assigned To"}),(0,b.jsx)(g.TableHead,{children:"Actions"})]})}),(0,b.jsx)(g.TableBody,{children:_&&_.length>0?_.map(a=>{let c=function(a){if(!a)return{text:"No SLA",isOverdue:!1,urgency:"low"};let b=new Date,c=Math.floor((new Date(a).getTime()-b.getTime())/36e5);return c<0?{text:`${Math.abs(c)}h overdue`,isOverdue:!0,urgency:"high",hoursRemaining:c}:c<4?{text:`${c}h remaining`,isOverdue:!1,urgency:"high",hoursRemaining:c}:c<12?{text:`${c}h remaining`,isOverdue:!1,urgency:"medium",hoursRemaining:c}:{text:`${c}h remaining`,isOverdue:!1,urgency:"low",hoursRemaining:c}}(a.sla_breach_at);return(0,b.jsxs)(g.TableRow,{className:`cursor-pointer hover:bg-white/5 transition-colors ${J.has(a.id)?"bg-muted/50":""}`,onClick:()=>ab(a),children:[(0,b.jsx)(g.TableCell,{className:"w-12",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(h.Checkbox,{checked:J.has(a.id),onCheckedChange:()=>{var b;return b=a.id,void K(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},"aria-label":`Select approval ${a.id}`})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:a.entity_type.replace(/_/g," ").toUpperCase()}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.requested_by_profile?.display_name||"Unknown User"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()})]})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsxs)("div",{children:[a.related_investor&&(0,b.jsx)("div",{className:"font-medium text-foreground",children:a.related_investor.legal_name}),a.related_deal&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.related_deal.name}),!a.related_investor&&!a.related_deal&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground font-mono",children:[a.entity_id.substring(0,8),"..."]}),(()=>{if("deal_subscription"===a.entity_type){let c=a.entity_metadata?.derived_amount;if(c){let d=a.entity_metadata?.payload?.currency||"USD",e=parseFloat(c);if(!Number.isNaN(e))return(0,b.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[d," ",e.toLocaleString()]})}}let c=a.entity_metadata?.indicative_amount,d=a.entity_metadata?.requested_amount||a.entity_metadata?.amount,e=a.entity_metadata?.indicative_currency||"",f=null;if(c){let a=parseFloat(c);Number.isNaN(a)||(f=`${e} ${a.toLocaleString()}`.trim())}else if(d){let a=parseFloat(d);Number.isNaN(a)||(f=`$${a.toLocaleString()}`)}return f?(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:f}):null})()]})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"critical"===a.priority||"high"===a.priority?"destructive":"secondary",children:a.priority.toUpperCase()})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(f.Badge,{variant:c.isOverdue||"high"===c.urgency?"destructive":"medium"===c.urgency?"default":"secondary",children:c.text})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.assigned_to_profile?.display_name||"Unassigned"})}),(0,b.jsx)(g.TableCell,{onClick:a=>a.stopPropagation(),children:"pending"===a.status?(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{Q(a),S("approve"),O(!0)},className:"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-950",children:(0,b.jsx)(i.CheckCircle2,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{Q(a),S("reject"),O(!0)},className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",children:(0,b.jsx)(j.XCircle,{className:"h-4 w-4"})})]}):(0,b.jsx)(f.Badge,{variant:"secondary",className:"text-xs",children:a.status})})]},a.id)}):(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:B?"Loading approvals...":"No pending approvals found"})})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",_.length>0?(H.page-1)*H.limit+1:0,"-",Math.min(H.page*H.limit,Math.max(H.total,_.length))," of ",Math.max(H.total,_.length)," approvals"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",disabled:1===H.page||B,onClick:()=>I(a=>({...a,page:a.page-1})),children:"Previous"}),(0,b.jsxs)("span",{className:"inline-flex items-center px-3 text-sm text-muted-foreground",children:["Page ",H.page," of ",Math.ceil(H.total/H.limit)||1]}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",disabled:H.page>=Math.ceil(H.total/H.limit)||B,onClick:()=>I(a=>({...a,page:a.page+1})),children:"Next"})]})]})]}),"kanban"===Y&&(0,b.jsx)(ag,{approvals:_,onApprovalClick:ab}),"list"===Y&&(0,b.jsx)(al,{approvals:_,onApprovalClick:ab,onApprove:ac,onReject:ad}),"database"===Y&&(0,b.jsx)(aw,{approvals:_,onApprovalClick:ab})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-lg",children:"Quick Actions"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-3",children:[(0,b.jsxs)(e.Button,{className:"w-full justify-start",variant:"outline",onClick:af,disabled:0===v.overdue_count,children:[(0,b.jsx)(k.Clock,{className:"mr-2 h-4 w-4 text-red-600"}),"Review Overdue (",v.overdue_count,")"]}),(0,b.jsxs)(e.Button,{className:"w-full justify-start",variant:"outline",onClick:ah,disabled:0===s.length,children:[(0,b.jsx)(i.CheckCircle2,{className:"mr-2 h-4 w-4 text-green-600"}),"Show Low Priority"]}),(0,b.jsxs)(e.Button,{className:"w-full justify-start",variant:"outline",onClick:ai,disabled:0===s.length,children:[(0,b.jsx)(l.AlertTriangle,{className:"mr-2 h-4 w-4 text-amber-600"}),"Review High Priority"]}),(0,b.jsxs)(e.Button,{className:"w-full justify-start",variant:"outline",onClick:aj,children:[(0,b.jsx)(o.HandCoins,{className:"mr-2 h-4 w-4 text-purple-600"}),"Deal Interest Approvals"]}),(0,b.jsxs)(e.Button,{className:"w-full justify-start",variant:"outline",onClick:ak,children:[(0,b.jsx)(p.Package,{className:"mr-2 h-4 w-4 text-sky-600"}),"Subscription Approvals"]}),(0,b.jsxs)(e.Button,{className:"w-full justify-start",variant:"outline",onClick:am,disabled:0===F.entity_types.length&&0===F.priorities.length&&!F.assigned_to_me&&!F.overdue_only,children:[(0,b.jsx)(j.XCircle,{className:"mr-2 h-4 w-4 text-muted-foreground"}),"Clear All Filters"]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-lg",children:"SLA Performance"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm",children:"On-time approvals (24h)"}),(0,b.jsxs)("span",{className:"font-medium text-green-600",children:[v.approval_rate_24h.toFixed(0),"%"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm",children:"Overdue items"}),(0,b.jsx)("span",{className:"font-medium text-red-600",children:v.overdue_count})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm",children:"Average processing"}),(0,b.jsxs)("span",{className:"font-medium",children:[v.avg_processing_time_hours.toFixed(1),"h"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm",children:"Approved (30d)"}),(0,b.jsx)("span",{className:"font-medium text-green-600",children:v.total_approved_30d})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm",children:"Rejected (30d)"}),(0,b.jsx)("span",{className:"font-medium text-red-600",children:v.total_rejected_30d})]})]})})]})]})]}),J.size>0&&(0,b.jsx)("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white dark:bg-gray-800 shadow-xl rounded-lg p-4 border-2 border-blue-500 z-50 animate-in slide-in-from-bottom duration-300",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"font-medium text-sm",children:[J.size," approval",J.size>1?"s":""," selected"]}),(0,b.jsxs)(e.Button,{size:"sm",onClick:()=>ae("approve"),disabled:L,className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,b.jsx)(i.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Approve All"]}),(0,b.jsxs)(e.Button,{size:"sm",variant:"destructive",onClick:()=>ae("reject"),disabled:L,children:[(0,b.jsx)(j.XCircle,{className:"mr-2 h-4 w-4"}),"Reject All"]}),(0,b.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>K(new Set),disabled:L,children:"Clear"})]})}),(0,b.jsx)(w,{approval:P,action:R,open:N,onOpenChange:O,onSuccess:()=>{K(new Set),aa()}}),(0,b.jsx)(T,{approval:W,open:U,onOpenChange:V,onApprove:ac,onReject:ad})]})}a.s(["ApprovalsPageClient",()=>ax],302649)}];

//# sourceMappingURL=versotech-portal_src_components_approvals_approvals-page-client_tsx_dacf5159._.js.map