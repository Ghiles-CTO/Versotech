module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},9349,a=>{a.n(a.i(142710))},199585,a=>{a.n(a.i(701395))},929852,a=>{a.n(a.i(816404))},516153,a=>{a.n(a.i(422096))},911164,a=>{a.n(a.i(273021))},450926,a=>{a.n(a.i(933743))},718829,a=>{"use strict";var b=a.i(999684);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],718829)},441196,a=>{"use strict";let b=(0,a.i(718829).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],441196)},416869,a=>{"use strict";a.s(["CalendarSplitView",()=>b]);let b=(0,a.i(578644).registerClientReference)(function(){throw Error("Attempted to call CalendarSplitView() from the server but CalendarSplitView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/versotech-portal/src/components/calendar/calendar-split-view.tsx <module evaluation>","CalendarSplitView")},249364,a=>{"use strict";a.s(["CalendarSplitView",()=>b]);let b=(0,a.i(578644).registerClientReference)(function(){throw Error("Attempted to call CalendarSplitView() from the server but CalendarSplitView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/versotech-portal/src/components/calendar/calendar-split-view.tsx","CalendarSplitView")},77088,a=>{"use strict";a.i(416869);var b=a.i(249364);a.n(b)},988408,a=>{"use strict";var b=a.i(714898),c=a.i(77088),d=a.i(198307),e=a.i(441196),f=a.i(243085);let g={high:{id:"task-high",name:"Task • High priority",color:"#dc2626"},medium:{id:"task-medium",name:"Task • Medium priority",color:"#f97316"},low:{id:"task-low",name:"Task • Standard priority",color:"#2563eb"}},h={urgent:{id:"request-urgent",name:"Investor request • Urgent",color:"#be123c"},high:{id:"request-high",name:"Investor request • High",color:"#b45309"},normal:{id:"request-normal",name:"Investor request • Standard",color:"#0ea5e9"},low:{id:"request-low",name:"Investor request • Low",color:"#64748b"}},i={open:{id:"deal-open",name:"Deal close • Open",color:"#7c3aed"},allocation_pending:{id:"deal-allocation",name:"Deal close • Allocation pending",color:"#a855f7"},due_diligence:{id:"deal-dd",name:"Deal close • Due diligence",color:"#9333ea"},closed:{id:"deal-closed",name:"Deal close • Closed",color:"#64748b"}},j={id:"call-pending",name:"Capital call due",color:"#dc2626"},k={id:"call-draft",name:"Capital call • Draft",color:"#f97316"},l={id:"dist-scheduled",name:"Distribution",color:"#16a34a"},m={id:"kyc-expiring",name:"KYC expiring",color:"#f59e0b"},n={id:"kyc-expired",name:"KYC expired",color:"#dc2626"},o={id:"accred-expiring",name:"Accreditation expiring",color:"#ea580c"},p={id:"approval-breach",name:"Approval • SLA breach",color:"#dc2626"},q={id:"approval-pending",name:"Approval pending",color:"#f59e0b"},r={id:"fee-accrued",name:"Fee event",color:"#14b8a6"},s={id:"data-room-expiring",name:"Data room access expiring",color:"#8b5cf6"},t={id:"sub-funding",name:"Subscription funding due",color:"#10b981"};function u(a,b){return new Date(a.getTime()+864e5*b)}function v(a){if(a)return a.toLowerCase().split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}async function w(){let a=await (0,d.createClient)(),{data:{user:w},error:x}=await a.auth.getUser();if(!w||x)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)(e.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Authentication Required"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Please log in to view calendar."})]})});let y=await (0,f.checkStaffAccess)(w.id),z=(0,d.createServiceClient)();if(!y)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)(e.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Access Restricted"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Calendar is only available to staff members."})]})});let A=[],{data:B}=await z.from("tasks").select("id, title, status, priority, due_at, category, created_at").not("status","eq","completed").not("owner_user_id","is",null).order("due_at",{ascending:!0,nullsFirst:!1}).limit(50);for(let a of B??[]){let b=g[a.priority||"medium"]??g.low,c=new Date(a.due_at?a.due_at:a.created_at),d=a.due_at?u(c,-1):new Date(a.created_at);A.push({id:`task-${a.id}`,name:a.title,startAt:d.toISOString(),endAt:c.toISOString(),status:b,description:a.category?`Category • ${v(a.category)}`:void 0})}let{data:C}=await z.from("deals").select("id, name, status, close_at, created_at, vehicles ( name )").in("status",["open","allocation_pending","draft"]).not("close_at","is",null).order("close_at",{ascending:!0}).limit(30);for(let a of C??[]){let b=i[a.status??"open"]??i.open,c=u(new Date(a.close_at),-7);A.push({id:`deal-${a.id}`,name:`Deal Close: ${a.name}`,startAt:c.toISOString(),endAt:a.close_at,status:b,description:a.vehicles?.[0]?.name?`Vehicle • ${a.vehicles[0].name}`:void 0})}let{data:D}=await z.from("capital_calls").select("id, name, due_date, status, vehicles ( name )").in("status",["draft","pending","active"]).not("due_date","is",null).order("due_date",{ascending:!0}).limit(30);for(let a of D??[]){let b="pending"===a.status?j:k,c=u(new Date(a.due_date),-3);A.push({id:`call-${a.id}`,name:a.name,startAt:c.toISOString(),endAt:a.due_date,status:b,description:a.vehicles?.[0]?.name?`Vehicle • ${a.vehicles[0].name}`:void 0})}let{data:E}=await z.from("distributions").select("id, name, date, vehicles ( name )").gte("date",new Date(Date.now()-2592e6).toISOString().split("T")[0]).order("date",{ascending:!0}).limit(30);for(let a of E??[]){let b=new Date(a.date);A.push({id:`dist-${a.id}`,name:a.name,startAt:b.toISOString(),endAt:b.toISOString(),status:l,description:a.vehicles?.[0]?.name?`Vehicle • ${a.vehicles[0].name}`:void 0})}let F=new Date(Date.now()+7776e6).toISOString().split("T")[0],{data:G}=await z.from("investors").select("id, legal_name, kyc_expiry_date, accreditation_expiry").or(`kyc_expiry_date.lte.${F},accreditation_expiry.lte.${F}`).limit(50);for(let a of G??[]){if(a.kyc_expiry_date){let b=new Date(a.kyc_expiry_date),c=b<new Date,d=c?n:m,e=u(b,-14);A.push({id:`kyc-${a.id}`,name:`KYC Renewal: ${a.legal_name}`,startAt:e.toISOString(),endAt:a.kyc_expiry_date,status:d,description:c?"Expired":"Expiring soon"})}if(a.accreditation_expiry){let b=u(new Date(a.accreditation_expiry),-14);A.push({id:`accred-${a.id}`,name:`Accreditation Renewal: ${a.legal_name}`,startAt:b.toISOString(),endAt:a.accreditation_expiry,status:o,description:"Accreditation expiring"})}}let{data:H}=await z.from("approvals").select("id, entity_type, action, entity_id, created_at, sla_breach_at, requested_by:profiles!requested_by ( display_name )").eq("status","pending").order("sla_breach_at",{ascending:!0,nullsFirst:!1}).limit(30);for(let a of H??[]){let b=a.sla_breach_at?new Date(a.sla_breach_at):u(new Date(a.created_at),3),c=b<new Date?p:q,d=new Date(a.created_at),e=a.action?v(a.action):v(a.entity_type);A.push({id:`approval-${a.id}`,name:`Approval: ${e}`,startAt:d.toISOString(),endAt:b.toISOString(),status:c,description:Array.isArray(a.requested_by)&&a.requested_by[0]?.display_name?`Requested by ${a.requested_by[0].display_name}`:void 0})}let{data:I}=await z.from("subscriptions").select("id, subscription_number, funding_due_at, investors ( legal_name ), vehicles ( name )").in("status",["committed","active"]).not("funding_due_at","is",null).gte("funding_due_at",new Date().toISOString()).order("funding_due_at",{ascending:!0}).limit(30);for(let a of I??[]){let b=u(new Date(a.funding_due_at),-5);A.push({id:`sub-${a.id}`,name:`Funding Due: ${(Array.isArray(a.investors)?a.investors[0]?.legal_name:null)||a.subscription_number}`,startAt:b.toISOString(),endAt:a.funding_due_at,status:t,description:a.vehicles?.[0]?.name?`Vehicle • ${a.vehicles[0].name}`:void 0})}let{data:J}=await z.from("fee_events").select("id, fee_type, event_date, computed_amount, deals ( name ), investors ( legal_name, display_name )").in("status",["accrued","invoiced"]).gte("event_date",new Date(Date.now()-2592e6).toISOString().split("T")[0]).order("event_date",{ascending:!0}).limit(30);for(let a of J??[]){let b=new Date(a.event_date),c=Array.isArray(a.deals)&&a.deals[0]?.name?a.deals[0].name:null,d=Array.isArray(a.investors)&&a.investors[0]?a.investors[0].display_name||a.investors[0].legal_name:null,e=c?`Deal • ${c}`:d?`Investor • ${d}`:void 0;A.push({id:`fee-${a.id}`,name:`Fee Event: ${v(a.fee_type)}`,startAt:b.toISOString(),endAt:b.toISOString(),status:r,description:e})}let{data:K}=await z.from("request_tickets").select("id, subject, status, priority, due_date, created_at, investors ( legal_name )").in("status",["open","in_progress"]).order("due_date",{ascending:!0,nullsFirst:!1}).limit(30);for(let a of K??[]){let b=h[a.priority]??h.normal,c=a.due_date?new Date(a.due_date):u(new Date(a.created_at),5),d=new Date(a.created_at);A.push({id:`request-${a.id}`,name:a.subject||"Investor Request",startAt:d.toISOString(),endAt:c.toISOString(),status:b,description:Array.isArray(a.investors)&&a.investors[0]?.legal_name?`Investor • ${a.investors[0].legal_name}`:void 0})}let L=new Date(Date.now()+2592e6).toISOString(),{data:M}=await z.from("deal_data_room_access").select("id, expires_at, deals ( name ), investors ( legal_name, display_name )").is("revoked_at",null).lte("expires_at",L).order("expires_at",{ascending:!0}).limit(30);for(let a of M??[]){let b=u(new Date(a.expires_at),-3),c=Array.isArray(a.investors)&&a.investors[0]?a.investors[0].display_name||a.investors[0].legal_name:null;A.push({id:`dataroom-${a.id}`,name:`Data Room Expiry: ${(Array.isArray(a.deals)?a.deals[0]?.name:null)||"Deal"}`,startAt:b.toISOString(),endAt:a.expires_at,status:s,description:c?`Investor • ${c}`:void 0})}return A.sort((a,b)=>new Date(a.startAt).getTime()-new Date(b.startAt).getTime()),(0,b.jsxs)("div",{className:"space-y-8 px-6 py-8",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Calendar"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"View all important deadlines, events, and tasks across the platform"})]}),(0,b.jsx)(c.CalendarSplitView,{calendarEvents:A,emptyCalendarMessage:"No upcoming events or deadlines scheduled.",brand:"versotech"})]})}a.s(["default",()=>w,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d29c1cc9._.js.map