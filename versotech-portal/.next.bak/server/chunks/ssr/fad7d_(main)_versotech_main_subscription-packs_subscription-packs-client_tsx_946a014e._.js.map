{"version":3,"sources":["../../../../../versotech-portal/src/app/%28main%29/versotech_main/subscription-packs/subscription-packs-client.tsx"],"sourcesContent":["'use client'\n\nimport { useMemo, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  CheckCircle2,\n  Clock,\n  DollarSign,\n  Download,\n  FileText,\n  Search,\n  Loader2,\n  Users,\n  Briefcase,\n  X,\n  Calendar,\n  Eye,\n  ChevronLeft,\n  ChevronRight,\n  ArrowUpDown,\n  ArrowUp,\n  ArrowDown,\n} from 'lucide-react'\nimport { Progress } from '@/components/ui/progress'\nimport { cn } from '@/lib/utils'\nimport { formatDate, formatCurrency } from '@/lib/format'\nimport { toast } from 'sonner'\nimport { useDocumentViewer } from '@/hooks/useDocumentViewer'\nimport { DocumentViewerFullscreen } from '@/components/documents/DocumentViewerFullscreen'\n\n// Updated type to support both lawyer and arranger personas\ntype EntityInfo = {\n  id: string\n  firm_name: string | null\n  display_name: string | null\n  specializations: string[] | null\n  is_active: boolean\n  entity_type: 'lawyer' | 'arranger'\n}\n\ntype SignedSubscription = {\n  id: string\n  deal_id: string\n  investor_id: string\n  status: string\n  commitment: number\n  currency: string\n  funded_amount: number\n  signed_at: string | null  // Actual signature date (primary)\n  committed_at: string | null\n  funded_at: string | null\n  subscription_number: number | null\n  subscription_date: string | null\n  // Additional useful fields\n  effective_date: string | null\n  funding_due_at: string | null\n  num_shares: number | null\n  price_per_share: number | null\n  pack_sent_at: string | null\n  deal_name: string\n  investor_name: string\n  document_id: string | null\n  document_file_key: string | null\n  document_file_name: string | null\n  document_mime_type: string | null\n  document_file_size: number | null\n  document_type: string | null\n}\n\ntype SubscriptionPacksClientProps = {\n  entityInfo: EntityInfo | null\n  subscriptions: SignedSubscription[]\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  committed: 'bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800',\n  partially_funded: 'bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800',\n  funded: 'bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800',\n  active: 'bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800',\n}\n\nconst STATUS_LABELS: Record<string, string> = {\n  committed: 'Signed',\n  partially_funded: 'Partially Funded',\n  funded: 'Fully Funded',\n  active: 'Active',\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Statuses', value: 'all' },\n  { label: 'Signed (Awaiting Funding)', value: 'committed' },\n  { label: 'Partially Funded', value: 'partially_funded' },\n  { label: 'Fully Funded', value: 'funded' },\n  { label: 'Active', value: 'active' },\n]\n\n// Pagination constants\nconst ITEMS_PER_PAGE = 10\n\n// Sortable columns configuration\ntype SortColumn = 'deal_name' | 'investor_name' | 'commitment' | 'funded_amount' | 'status' | 'signed_at' | 'subscription_number'\ntype SortDirection = 'asc' | 'desc'\n\n// Using shared formatCurrency utility from @/lib/format\n// Note: The shared utility handles null/undefined values and defaults to 'USD'\n\nexport function SubscriptionPacksClient({ entityInfo, subscriptions }: SubscriptionPacksClientProps) {\n  // Existing filter states\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [downloadingId, setDownloadingId] = useState<string | null>(null)\n\n  // NEW: Additional filter states for full implementation (User Story Row 69)\n  const [investorFilter, setInvestorFilter] = useState('all')\n  const [dealFilter, setDealFilter] = useState('all')\n  const [dateRange, setDateRange] = useState<{\n    startDate: string\n    endDate: string\n  }>({ startDate: '', endDate: '' })\n\n  // Pagination state\n  const [currentPage, setCurrentPage] = useState(1)\n\n  // Sorting state\n  const [sortColumn, setSortColumn] = useState<SortColumn>('signed_at')\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc')\n\n  // Document preview functionality (same as CEO/staff documents page)\n  const {\n    isOpen: isPreviewOpen,\n    document: previewDocument,\n    previewUrl,\n    isLoading: isPreviewLoading,\n    error: previewError,\n    openPreview,\n    closePreview,\n    downloadDocument: downloadFromPreview,\n  } = useDocumentViewer()\n\n  // Compute unique investors and deals for dropdown options\n  const filterOptions = useMemo(() => {\n    const investors = new Map<string, string>()\n    const deals = new Map<string, string>()\n\n    subscriptions.forEach((sub) => {\n      if (sub.investor_id && sub.investor_name) {\n        investors.set(sub.investor_id, sub.investor_name)\n      }\n      if (sub.deal_id && sub.deal_name) {\n        deals.set(sub.deal_id, sub.deal_name)\n      }\n    })\n\n    return {\n      investors: Array.from(investors.entries())\n        .map(([id, name]) => ({ id, name }))\n        .sort((a, b) => a.name.localeCompare(b.name)),\n      deals: Array.from(deals.entries())\n        .map(([id, name]) => ({ id, name }))\n        .sort((a, b) => a.name.localeCompare(b.name))\n    }\n  }, [subscriptions])\n\n  // Calculate summary based on ALL subscriptions (not filtered) for context\n  const totalSummary = useMemo(() => {\n    const committed = subscriptions.filter(s => s.status === 'committed').length\n    const partiallyFunded = subscriptions.filter(s => s.status === 'partially_funded').length\n    const fullyFunded = subscriptions.filter(s => s.status === 'funded' || s.status === 'active').length\n\n    const totalCommitment = subscriptions.reduce((sum, s) => sum + s.commitment, 0)\n    const totalFunded = subscriptions.reduce((sum, s) => sum + s.funded_amount, 0)\n\n    return {\n      total: subscriptions.length,\n      committed,\n      partiallyFunded,\n      fullyFunded,\n      totalCommitment,\n      totalFunded,\n    }\n  }, [subscriptions])\n\n  // Updated filter logic with all filters + sorting\n  const filteredSubscriptions = useMemo(() => {\n    // First, filter\n    const filtered = subscriptions.filter(subscription => {\n      // Status filter\n      const matchesStatus = statusFilter === 'all' || subscription.status === statusFilter\n\n      // Search filter\n      const matchesSearch = !search ||\n        subscription.deal_name.toLowerCase().includes(search.toLowerCase()) ||\n        subscription.investor_name.toLowerCase().includes(search.toLowerCase())\n\n      // NEW: Investor filter\n      const matchesInvestor = investorFilter === 'all' || subscription.investor_id === investorFilter\n\n      // NEW: Deal/Opportunity filter\n      const matchesDeal = dealFilter === 'all' || subscription.deal_id === dealFilter\n\n      // Date range filter (using signed_at - the actual signature date)\n      // Convert both to YYYY-MM-DD format for consistent comparison\n      let matchesDateRange = true\n      if (subscription.signed_at) {\n        // Extract just the date portion from the ISO timestamp (YYYY-MM-DD)\n        const subDateStr = subscription.signed_at.split('T')[0]\n\n        if (dateRange.startDate) {\n          // Compare date strings directly (lexicographic comparison works for YYYY-MM-DD)\n          matchesDateRange = matchesDateRange && subDateStr >= dateRange.startDate\n        }\n        if (dateRange.endDate) {\n          matchesDateRange = matchesDateRange && subDateStr <= dateRange.endDate\n        }\n      }\n\n      return matchesStatus && matchesSearch && matchesInvestor && matchesDeal && matchesDateRange\n    })\n\n    // Then, sort\n    return [...filtered].sort((a, b) => {\n      let comparison = 0\n\n      switch (sortColumn) {\n        case 'deal_name':\n          comparison = a.deal_name.localeCompare(b.deal_name)\n          break\n        case 'investor_name':\n          comparison = a.investor_name.localeCompare(b.investor_name)\n          break\n        case 'commitment':\n          comparison = a.commitment - b.commitment\n          break\n        case 'funded_amount':\n          comparison = a.funded_amount - b.funded_amount\n          break\n        case 'status':\n          comparison = a.status.localeCompare(b.status)\n          break\n        case 'signed_at':\n          const dateA = a.signed_at ? new Date(a.signed_at).getTime() : 0\n          const dateB = b.signed_at ? new Date(b.signed_at).getTime() : 0\n          comparison = dateA - dateB\n          break\n        case 'subscription_number':\n          comparison = (a.subscription_number || 0) - (b.subscription_number || 0)\n          break\n      }\n\n      return sortDirection === 'asc' ? comparison : -comparison\n    })\n  }, [search, statusFilter, investorFilter, dealFilter, dateRange, subscriptions, sortColumn, sortDirection])\n\n  // Calculate filtered summary for context\n  const filteredSummary = useMemo(() => {\n    const committed = filteredSubscriptions.filter(s => s.status === 'committed').length\n    const partiallyFunded = filteredSubscriptions.filter(s => s.status === 'partially_funded').length\n    const fullyFunded = filteredSubscriptions.filter(s => s.status === 'funded' || s.status === 'active').length\n\n    return {\n      total: filteredSubscriptions.length,\n      committed,\n      partiallyFunded,\n      fullyFunded,\n    }\n  }, [filteredSubscriptions])\n\n  // Pagination calculations\n  const totalPages = Math.ceil(filteredSubscriptions.length / ITEMS_PER_PAGE)\n  const startIndex = (currentPage - 1) * ITEMS_PER_PAGE\n  const endIndex = Math.min(startIndex + ITEMS_PER_PAGE, filteredSubscriptions.length)\n  const paginatedSubscriptions = filteredSubscriptions.slice(startIndex, endIndex)\n\n  // Check if any advanced filters are active\n  const hasActiveFilters = investorFilter !== 'all' || dealFilter !== 'all' || dateRange.startDate || dateRange.endDate || search || statusFilter !== 'all'\n\n  // Reset page to 1 when filters change\n  const handleFilterChange = <T,>(setter: (value: T) => void, value: T) => {\n    setter(value)\n    setCurrentPage(1)\n  }\n\n  // Clear all filters\n  const clearFilters = () => {\n    setSearch('')\n    setStatusFilter('all')\n    setInvestorFilter('all')\n    setDealFilter('all')\n    setDateRange({ startDate: '', endDate: '' })\n    setCurrentPage(1)\n  }\n\n  // Handle column sort toggle\n  const handleSort = (column: SortColumn) => {\n    if (sortColumn === column) {\n      // Toggle direction if same column\n      setSortDirection(prev => prev === 'asc' ? 'desc' : 'asc')\n    } else {\n      // New column, default to descending for dates/amounts, ascending for text\n      setSortColumn(column)\n      setSortDirection(['commitment', 'funded_amount', 'signed_at'].includes(column) ? 'desc' : 'asc')\n    }\n    setCurrentPage(1) // Reset to first page on sort change\n  }\n\n  // Get sort indicator for column header\n  const SortIndicator = ({ column }: { column: SortColumn }) => {\n    if (sortColumn !== column) {\n      return <ArrowUpDown className=\"ml-1 h-4 w-4 text-muted-foreground/50\" />\n    }\n    return sortDirection === 'asc'\n      ? <ArrowUp className=\"ml-1 h-4 w-4\" />\n      : <ArrowDown className=\"ml-1 h-4 w-4\" />\n  }\n\n  const handleDownloadPdf = async (subscription: SignedSubscription) => {\n    if (!subscription.document_file_key || !subscription.document_id) {\n      toast.error('No signed document available for download')\n      return\n    }\n\n    setDownloadingId(subscription.id)\n    try {\n      // First, get the signed URL from the API\n      const response = await fetch(`/api/documents/${subscription.document_id}/download`)\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to get download link')\n      }\n\n      // Fetch the actual file from the signed URL\n      const fileResponse = await fetch(data.url)\n      if (!fileResponse.ok) {\n        throw new Error('Failed to download document file')\n      }\n\n      const blob = await fileResponse.blob()\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = subscription.document_file_name || data.fileName || `subscription-pack-${subscription.id}.pdf`\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(a)\n\n      toast.success('Document downloaded successfully')\n    } catch (error) {\n      console.error('Download error:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to download document')\n    } finally {\n      setDownloadingId(null)\n    }\n  }\n\n  // Handle document preview (same pattern as CEO/staff documents page)\n  const handlePreview = (subscription: SignedSubscription) => {\n    if (!subscription.document_id) {\n      toast.error('No document available for preview')\n      return\n    }\n\n    // Check if it's an office document (can't be previewed)\n    const fileName = subscription.document_file_name || ''\n    const fileExt = fileName.split('.').pop()?.toLowerCase() || ''\n    const officeExtensions = ['docx', 'doc', 'xlsx', 'xls', 'pptx', 'ppt', 'odt', 'ods', 'odp']\n\n    if (officeExtensions.includes(fileExt)) {\n      toast.info('Office documents cannot be previewed. Downloading instead...')\n      handleDownloadPdf(subscription)\n      return\n    }\n\n    // Create DocumentReference for the preview hook\n    openPreview({\n      id: subscription.document_id,\n      file_name: subscription.document_file_name,\n      name: subscription.document_file_name,\n      mime_type: subscription.document_mime_type,\n      file_size_bytes: subscription.document_file_size,\n      type: subscription.document_type,\n    })\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Dynamic header based on entity type */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">Signed Subscription Packs</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {entityInfo?.entity_type === 'arranger'\n              ? `Subscription packs for mandates managed by ${entityInfo?.display_name || 'your entity'}`\n              : entityInfo\n              ? `Subscription packs for deals assigned to ${entityInfo?.display_name || entityInfo?.firm_name || 'your firm'}`\n              : 'View signed subscription packs for your deals'}\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {/* Entity type badge */}\n          {entityInfo?.entity_type && (\n            <Badge variant=\"outline\" className=\"capitalize\">\n              {entityInfo.entity_type}\n            </Badge>\n          )}\n          {/* Specializations for lawyers */}\n          {entityInfo?.entity_type === 'lawyer' && entityInfo?.specializations?.length ? (\n            entityInfo.specializations.slice(0, 2).map((spec, idx) => (\n              <Badge key={idx} variant=\"outline\" className=\"capitalize\">\n                {spec}\n              </Badge>\n            ))\n          ) : null}\n        </div>\n      </div>\n\n      {/* Summary Cards - Show filtered counts with total context when filters are active */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <FileText className=\"h-4 w-4\" />\n              Total Signed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {hasActiveFilters ? (\n                <span>{filteredSummary.total} <span className=\"text-base font-normal text-muted-foreground\">/ {totalSummary.total}</span></span>\n              ) : (\n                totalSummary.total\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {hasActiveFilters ? 'Matching filters' : 'Subscription packs signed'}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              Awaiting Funding\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">\n              {hasActiveFilters ? (\n                <span>{filteredSummary.committed} <span className=\"text-base font-normal text-muted-foreground\">/ {totalSummary.committed}</span></span>\n              ) : (\n                totalSummary.committed\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Signed, pending escrow\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <DollarSign className=\"h-4 w-4\" />\n              Partially Funded\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-amber-600\">\n              {hasActiveFilters ? (\n                <span>{filteredSummary.partiallyFunded} <span className=\"text-base font-normal text-muted-foreground\">/ {totalSummary.partiallyFunded}</span></span>\n              ) : (\n                totalSummary.partiallyFunded\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Partial escrow received\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />\n              Fully Funded\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-emerald-600\">\n              {hasActiveFilters ? (\n                <span>{filteredSummary.fullyFunded} <span className=\"text-base font-normal text-muted-foreground\">/ {totalSummary.fullyFunded}</span></span>\n              ) : (\n                totalSummary.fullyFunded\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Complete funding received\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filter Section */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          {/* Row 1: Search + Status */}\n          <div className=\"flex flex-col md:flex-row gap-4 mb-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search by deal or investor name...\"\n                  value={search}\n                  onChange={(e) => handleFilterChange(setSearch, e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <Select value={statusFilter} onValueChange={(value) => handleFilterChange(setStatusFilter, value)}>\n              <SelectTrigger className=\"w-full md:w-56\">\n                <SelectValue placeholder=\"Filter by status\" />\n              </SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((option) => (\n                  <SelectItem key={option.value} value={option.value}>\n                    {option.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Row 2: Investor + Deal + Date Range (NEW - User Story Row 69) */}\n          <div className=\"flex flex-col lg:flex-row gap-4 items-end\">\n            {/* Investor Filter */}\n            <div className=\"w-full lg:w-48\">\n              <label className=\"text-xs text-muted-foreground mb-1.5 block\">Investor</label>\n              <Select value={investorFilter} onValueChange={(value) => handleFilterChange(setInvestorFilter, value)}>\n                <SelectTrigger>\n                  <Users className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                  <SelectValue placeholder=\"All Investors\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Investors</SelectItem>\n                  {filterOptions.investors.map((inv) => (\n                    <SelectItem key={inv.id} value={inv.id}>{inv.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Deal/Opportunity Filter */}\n            <div className=\"w-full lg:w-48\">\n              <label className=\"text-xs text-muted-foreground mb-1.5 block\">Opportunity</label>\n              <Select value={dealFilter} onValueChange={(value) => handleFilterChange(setDealFilter, value)}>\n                <SelectTrigger>\n                  <Briefcase className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                  <SelectValue placeholder=\"All Opportunities\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Opportunities</SelectItem>\n                  {filterOptions.deals.map((deal) => (\n                    <SelectItem key={deal.id} value={deal.id}>{deal.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Date Range Filter */}\n            <div className=\"flex flex-col sm:flex-row items-end gap-2\">\n              <div>\n                <label className=\"text-xs text-muted-foreground mb-1.5 block flex items-center gap-1\">\n                  <Calendar className=\"h-3 w-3\" />\n                  From Date\n                </label>\n                <Input\n                  type=\"date\"\n                  value={dateRange.startDate}\n                  onChange={(e) => {\n                    setDateRange(prev => ({ ...prev, startDate: e.target.value }))\n                    setCurrentPage(1)\n                  }}\n                  className=\"w-36\"\n                />\n              </div>\n              <div>\n                <label className=\"text-xs text-muted-foreground mb-1.5 block flex items-center gap-1\">\n                  <Calendar className=\"h-3 w-3\" />\n                  To Date\n                </label>\n                <Input\n                  type=\"date\"\n                  value={dateRange.endDate}\n                  onChange={(e) => {\n                    setDateRange(prev => ({ ...prev, endDate: e.target.value }))\n                    setCurrentPage(1)\n                  }}\n                  className=\"w-36\"\n                />\n              </div>\n            </div>\n\n            {/* Clear All Filters Button */}\n            {hasActiveFilters && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={clearFilters}\n                className=\"h-10 px-3\"\n              >\n                <X className=\"h-4 w-4 mr-1\" />\n                Clear All\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Data Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Signed Subscriptions</CardTitle>\n          <CardDescription>\n            {filteredSubscriptions.length === 0\n              ? 'No subscriptions found'\n              : totalPages > 1\n              ? `Showing ${startIndex + 1}-${endIndex} of ${filteredSubscriptions.length} subscriptions`\n              : `${filteredSubscriptions.length} subscription${filteredSubscriptions.length !== 1 ? 's' : ''}`}\n            {hasActiveFilters && filteredSubscriptions.length > 0 && ` (filtered from ${subscriptions.length} total)`}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredSubscriptions.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <FileText className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">\n                {hasActiveFilters\n                  ? 'No subscriptions match your filters'\n                  : 'No signed subscription packs yet'}\n              </p>\n              {hasActiveFilters && (\n                <Button variant=\"link\" size=\"sm\" onClick={clearFilters}>\n                  Clear filters to see all subscriptions\n                </Button>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"rounded-md border\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('deal_name')}\n                      >\n                        <div className=\"flex items-center\">\n                          Deal\n                          <SortIndicator column=\"deal_name\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('investor_name')}\n                      >\n                        <div className=\"flex items-center\">\n                          Investor\n                          <SortIndicator column=\"investor_name\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('commitment')}\n                      >\n                        <div className=\"flex items-center\">\n                          Commitment\n                          <SortIndicator column=\"commitment\" />\n                        </div>\n                      </TableHead>\n                      <TableHead className=\"text-center\">\n                        Shares\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none min-w-[140px]\"\n                        onClick={() => handleSort('funded_amount')}\n                      >\n                        <div className=\"flex items-center\">\n                          Funded\n                          <SortIndicator column=\"funded_amount\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('status')}\n                      >\n                        <div className=\"flex items-center\">\n                          Status\n                          <SortIndicator column=\"status\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('subscription_number')}\n                      >\n                        <div className=\"flex items-center\">\n                          #\n                          <SortIndicator column=\"subscription_number\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('signed_at')}\n                      >\n                        <div className=\"flex items-center\">\n                          Signed Date\n                          <SortIndicator column=\"signed_at\" />\n                        </div>\n                      </TableHead>\n                      <TableHead className=\"text-right\">Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {paginatedSubscriptions.map((subscription) => {\n                      const fundingPercentage = subscription.commitment > 0\n                        ? Math.round((subscription.funded_amount / subscription.commitment) * 100)\n                        : 0\n\n                      return (\n                        <TableRow key={subscription.id}>\n                          <TableCell>\n                            <div className=\"font-medium\">{subscription.deal_name}</div>\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"font-medium\">{subscription.investor_name}</div>\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"font-medium\">\n                              {formatCurrency(subscription.commitment, subscription.currency)}\n                            </div>\n                          </TableCell>\n                          {/* Shares column */}\n                          <TableCell className=\"text-center\">\n                            {subscription.num_shares ? (\n                              <div className=\"space-y-0.5\">\n                                <div className=\"font-medium text-sm\">\n                                  {Number(subscription.num_shares).toLocaleString()}\n                                </div>\n                                {subscription.price_per_share && (\n                                  <div className=\"text-xs text-muted-foreground\">\n                                    @ {formatCurrency(Number(subscription.price_per_share), subscription.currency)}\n                                  </div>\n                                )}\n                              </div>\n                            ) : (\n                              <span className=\"text-muted-foreground text-xs\">—</span>\n                            )}\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"space-y-1.5\">\n                              <div className=\"flex items-center justify-between text-sm\">\n                                <span className=\"font-medium\">\n                                  {formatCurrency(subscription.funded_amount, subscription.currency)}\n                                </span>\n                                <span className=\"text-xs text-muted-foreground\">\n                                  {fundingPercentage}%\n                                </span>\n                              </div>\n                              <Progress\n                                value={fundingPercentage}\n                                className=\"h-1.5\"\n                              />\n                            </div>\n                          </TableCell>\n                          <TableCell>\n                            <Badge\n                              variant=\"outline\"\n                              className={cn('capitalize', STATUS_STYLES[subscription.status] || 'bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700')}\n                            >\n                              {STATUS_LABELS[subscription.status] || subscription.status.replace('_', ' ')}\n                            </Badge>\n                          </TableCell>\n                          {/* Subscription Number */}\n                          <TableCell>\n                            {subscription.subscription_number ? (\n                              <span className=\"text-sm font-mono\">{subscription.subscription_number}</span>\n                            ) : (\n                              <span className=\"text-muted-foreground text-xs\">—</span>\n                            )}\n                          </TableCell>\n                          {/* Signed Date - uses signed_at (actual signature date) */}\n                          <TableCell>\n                            <div className=\"space-y-1\">\n                              {subscription.signed_at ? (\n                                <div className=\"text-sm\">\n                                  {formatDate(subscription.signed_at)}\n                                </div>\n                              ) : (\n                                <span className=\"text-muted-foreground text-xs\">Unknown</span>\n                              )}\n                              {/* Funding due date indicator */}\n                              {subscription.funding_due_at && subscription.status !== 'active' && (\n                                <div className={cn(\n                                  \"text-xs flex items-center gap-1\",\n                                  new Date(subscription.funding_due_at) < new Date()\n                                    ? \"text-red-600 dark:text-red-400\"\n                                    : new Date(subscription.funding_due_at) < new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)\n                                    ? \"text-amber-600 dark:text-amber-400\"\n                                    : \"text-muted-foreground\"\n                                )}>\n                                  <Clock className=\"h-3 w-3\" />\n                                  Due: {formatDate(subscription.funding_due_at)}\n                                </div>\n                              )}\n                            </div>\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            {subscription.document_file_key ? (\n                              <div className=\"flex items-center justify-end gap-2\">\n                                {/* Preview Button */}\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  onClick={() => handlePreview(subscription)}\n                                  title=\"Preview document\"\n                                >\n                                  <Eye className=\"h-4 w-4\" />\n                                </Button>\n                                {/* Download Button */}\n                                <Button\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  onClick={() => handleDownloadPdf(subscription)}\n                                  disabled={downloadingId === subscription.id}\n                                  title=\"Download PDF\"\n                                >\n                                  {downloadingId === subscription.id ? (\n                                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                  ) : (\n                                    <>\n                                      <Download className=\"h-4 w-4 mr-1\" />\n                                      PDF\n                                    </>\n                                  )}\n                                </Button>\n                              </div>\n                            ) : (\n                              <span className=\"text-xs text-muted-foreground\">No document</span>\n                            )}\n                          </TableCell>\n                        </TableRow>\n                      )\n                    })}\n                  </TableBody>\n                </Table>\n              </div>\n\n              {/* Pagination Controls */}\n              {totalPages > 1 && (\n                <div className=\"flex items-center justify-between pt-2 border-t\">\n                  <p className=\"text-sm text-muted-foreground\">\n                    Showing {startIndex + 1}-{endIndex} of {filteredSubscriptions.length} subscriptions\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n                      disabled={currentPage === 1}\n                    >\n                      <ChevronLeft className=\"h-4 w-4\" />\n                      Previous\n                    </Button>\n                    <div className=\"flex items-center gap-1\">\n                      {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                        let pageNum: number\n                        if (totalPages <= 5) {\n                          pageNum = i + 1\n                        } else if (currentPage <= 3) {\n                          pageNum = i + 1\n                        } else if (currentPage >= totalPages - 2) {\n                          pageNum = totalPages - 4 + i\n                        } else {\n                          pageNum = currentPage - 2 + i\n                        }\n                        return (\n                          <Button\n                            key={pageNum}\n                            variant={currentPage === pageNum ? 'default' : 'outline'}\n                            size=\"sm\"\n                            onClick={() => setCurrentPage(pageNum)}\n                            className=\"w-8 h-8 p-0\"\n                          >\n                            {pageNum}\n                          </Button>\n                        )\n                      })}\n                    </div>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\n                      disabled={currentPage === totalPages}\n                    >\n                      Next\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Document Preview Modal */}\n      <DocumentViewerFullscreen\n        isOpen={isPreviewOpen}\n        document={previewDocument}\n        previewUrl={previewUrl}\n        isLoading={isPreviewLoading}\n        error={previewError}\n        onClose={closePreview}\n        onDownload={downloadFromPreview}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}