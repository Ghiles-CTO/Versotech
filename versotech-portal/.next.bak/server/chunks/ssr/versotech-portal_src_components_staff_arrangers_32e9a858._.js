module.exports=[100291,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633);let e=(0,c.createContext)(void 0);function f({children:a}){let[f,g]=(0,c.useState)(!1),h=(0,d.useRouter)(),i=(0,c.useCallback)(()=>{h.refresh()},[h]);return(0,b.jsx)(e.Provider,{value:{open:f,setOpen:g,refresh:i},children:a})}function g(){let a=(0,c.useContext)(e);if(!a)throw Error("useAddArranger must be used within a AddArrangerProvider");return a}a.s(["AddArrangerProvider",()=>f,"useAddArranger",()=>g])},365925,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(284169),e=a.i(15788),f=a.i(421908),g=a.i(663475),h=a.i(951870),i=a.i(871057),j=a.i(278541),k=a.i(787957),l=a.i(399580),m=a.i(405708),n=a.i(487068),o=a.i(405398),p=a.i(816854),q=a.i(155508),r=a.i(799373),s=a.i(888987),t=a.i(201986),u=a.i(100291),v=a.i(43569),w=a.i(470305),x=a.i(249464),y=a.i(191675),z=a.i(899750),A=a.i(289633),B=a.i(625473),C=a.i(42329);function D({open:a,onOpenChange:d,arranger:g}){let[i,j]=(0,c.useState)("draft"),[k,m]=(0,c.useState)(""),[n,o]=(0,c.useTransition)(),p=(0,A.useRouter)();if((0,c.useEffect)(()=>{g&&(j(g.kycStatus),m(g.kycNotes||""))},[g]),!g)return null;let q={draft:{icon:C.Clock,color:"text-yellow-400",label:"Draft / Pending"},approved:{icon:l.CheckCircle2,color:"text-green-400",label:"Approved"},expired:{icon:B.XCircle,color:"text-red-400",label:"Expired"},rejected:{icon:B.XCircle,color:"text-red-400",label:"Rejected"}},r=q[g.kycStatus]||q.draft,s=r.icon;return(0,b.jsx)(w.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)(w.DialogHeader,{children:[(0,b.jsx)(w.DialogTitle,{children:"KYC Management"}),(0,b.jsxs)(w.DialogDescription,{children:["Manage KYC status for ",g.legalName]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"border border-white/10 rounded-lg p-4 bg-white/5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Current Status"}),(0,b.jsxs)(e.Badge,{className:`capitalize ${r.color}`,children:[(0,b.jsx)(s,{className:"h-3 w-3 mr-1"}),r.label]})]}),g.kycApprovedAt&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Approved: ",(0,t.formatDate)(g.kycApprovedAt)]}),g.kycExpiresAt&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Expires: ",(0,t.formatDate)(g.kycExpiresAt)]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(x.Label,{children:"Update KYC Status"}),(0,b.jsxs)(h.Select,{value:i,onValueChange:j,children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"draft",children:"Draft / Pending Review"}),(0,b.jsx)(h.SelectItem,{value:"approved",children:"Approved (Valid 1 year)"}),(0,b.jsx)(h.SelectItem,{value:"expired",children:"Expired"}),(0,b.jsx)(h.SelectItem,{value:"rejected",children:"Rejected"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(x.Label,{htmlFor:"kycNotes",children:"KYC Notes"}),(0,b.jsx)(y.Textarea,{id:"kycNotes",value:k,onChange:a=>m(a.target.value),placeholder:"Document verification notes, compliance findings, etc.",rows:4})]}),g.metadata&&Object.keys(g.metadata).length>0&&(0,b.jsxs)("div",{className:"border border-white/10 rounded-lg p-4 bg-white/5",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-foreground mb-2",children:"Additional Metadata"}),(0,b.jsx)("pre",{className:"text-xs text-muted-foreground overflow-auto max-h-32",children:JSON.stringify(g.metadata,null,2)})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Approving KYC will set the approval date to today and expiry date to 1 year from now. Ensure all required documents have been uploaded and verified before approval."})]}),(0,b.jsxs)(w.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>d(!1),disabled:n,children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:()=>{g&&o(async()=>{try{let a=await fetch(`/api/admin/arrangers/${g.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({kyc_status:i,kyc_notes:k.trim()||null,kyc_approved_at:"approved"===i?new Date().toISOString():null,kyc_expires_at:"approved"===i?new Date(Date.now()+31536e6).toISOString():null})});if(!a.ok){let b=await a.json().catch(()=>null);console.error("[ArrangerKYCDialog] Failed to update KYC",b),z.toast.error(b?.error??"Failed to update KYC status");return}z.toast.success("KYC status updated successfully"),d(!1),p.refresh()}catch(a){console.error("[ArrangerKYCDialog] Unexpected error",a),z.toast.error("Failed to update KYC status")}})},disabled:n,children:n?"Updating…":"Update KYC Status"})]})]})})}var E=a.i(468095),F=a.i(425622),G=a.i(134303),H=a.i(591808),I=a.i(3321);let J=[{label:"Certificate of Incorporation",value:"certificate_of_incorporation"},{label:"FCA Authorization Letter / SEC Form ADV",value:"regulatory_license"},{label:"Professional Indemnity Insurance",value:"insurance_certificate"},{label:"AML/CTF Policy Document",value:"aml_policy"},{label:"Latest Financial Statements",value:"financial_statements"},{label:"Beneficial Ownership Declaration",value:"beneficial_ownership"},{label:"Proof of Registered Address",value:"proof_of_address"}];function K({open:a,onOpenChange:d,arranger:e}){let[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),o=(0,c.useRef)({}),q=(0,c.useCallback)(async()=>{if(e?.id){k(!0);try{let a=await fetch(`/api/documents?arranger_entity_id=${e.id}&limit=100`);if(!a.ok)throw Error("Failed to fetch documents");let b=await a.json();i(b.documents||[])}catch(a){console.error("Error fetching documents:",a),z.toast.error("Failed to load documents")}finally{k(!1)}}},[e?.id]);(0,c.useEffect)(()=>{a&&e?.id&&q()},[a,e?.id,q]);let r=async(a,b)=>{if(e?.id){if(a.size>0x3200000)return void z.toast.error("File size exceeds 50MB limit");if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","image/jpeg","image/png","text/plain"].includes(a.type))return void z.toast.error("Invalid file type. Please upload PDF, DOC, DOCX, JPG, PNG, or TXT files");n(!0);try{let c=new FormData;c.append("file",a),c.append("type",b),c.append("arranger_entity_id",e.id),c.append("name",a.name.replace(/\.[^/.]+$/,""));let d=await fetch("/api/documents/upload",{method:"POST",body:c});if(!d.ok){let a=await d.json();throw Error(a.error||"Upload failed")}let f=J.find(a=>a.value===b)?.label||b;z.toast.success(`${f} uploaded successfully`),await q()}catch(a){console.error("Upload error:",a),z.toast.error(a.message||"Failed to upload document")}finally{n(!1),o.current[b]&&(o.current[b].value="")}}},s=async a=>{if(confirm(`Delete "${a.name}"? This action cannot be undone.`))try{let b=await fetch(`/api/staff/documents/${a.id}`,{method:"DELETE"});if(!b.ok){let a=await b.json();throw Error(a.error||"Delete failed")}z.toast.success("Document deleted successfully"),await q()}catch(a){console.error("Delete error:",a),z.toast.error(a.message||"Failed to delete document")}},t=async a=>{try{let b=await fetch(`/api/documents/${a.id}/download`);if(!b.ok)throw Error("Download failed");let c=await b.blob(),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=a.file_name||a.name,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(d),document.body.removeChild(e),z.toast.success("Document downloaded")}catch(a){console.error("Download error:",a),z.toast.error("Failed to download document")}},u=a=>a?a<1024?`${a} B`:a<1048576?`${(a/1024).toFixed(1)} KB`:`${(a/1048576).toFixed(1)} MB`:"Unknown size";return e?(0,b.jsx)(w.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-3xl max-h-[85vh] overflow-y-auto",children:[(0,b.jsxs)(w.DialogHeader,{children:[(0,b.jsxs)(w.DialogTitle,{children:["Documents - ",e.legalName]}),(0,b.jsx)(w.DialogDescription,{children:"Manage KYC documents, licenses, and certificates for this arranger entity"})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"border border-white/10 rounded-lg p-4 bg-white/5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-4",children:"Required Documents"}),j?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(I.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,b.jsx)("div",{className:"space-y-3",children:J.map(a=>{let c=h.find(b=>b.type===a.value);return(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 py-2 px-3 rounded-lg hover:bg-white/5 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c?(0,b.jsx)(l.CheckCircle2,{className:"h-5 w-5 text-green-400 flex-shrink-0"}):(0,b.jsx)(H.Circle,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:a.label}),c&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:[c.file_name," • ",u(c.file_size_bytes)]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 flex-shrink-0",children:c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>t(c),className:"h-8 w-8 p-0",children:(0,b.jsx)(F.Download,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>s(c),className:"h-8 w-8 p-0 text-red-400 hover:text-red-300",children:(0,b.jsx)(G.Trash2,{className:"h-4 w-4"})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Input,{ref:b=>{o.current[a.value]=b},type:"file",className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt",onChange:b=>{let c=b.target.files?.[0];c&&r(c,a.value)},disabled:m}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>o.current[a.value]?.click(),disabled:m,children:[m?(0,b.jsx)(I.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(E.Upload,{className:"h-4 w-4 mr-2"}),"Upload"]})]})})]},a.value)})})]}),h.filter(a=>!J.some(b=>b.value===a.type)).length>0&&(0,b.jsxs)("div",{className:"border border-white/10 rounded-lg p-4 bg-white/5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Other Documents"}),(0,b.jsx)("div",{className:"space-y-2",children:h.filter(a=>!J.some(b=>b.value===a.type)).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 py-2 px-3 rounded-lg hover:bg-white/5 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,b.jsx)(p.FileText,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:[a.file_name," • ",u(a.file_size_bytes)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>t(a),className:"h-8 w-8 p-0",children:(0,b.jsx)(F.Download,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>s(a),className:"h-8 w-8 p-0 text-red-400 hover:text-red-300",children:(0,b.jsx)(G.Trash2,{className:"h-4 w-4"})})]})]},a.id))})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border border-white/10 rounded-lg p-4 bg-white/5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Documents"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:h.length})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Required Uploaded"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-foreground",children:[h.filter(a=>J.some(b=>b.value===a.type)).length," / ",J.length]})]})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1 border-t border-white/10 pt-4",children:[(0,b.jsx)("p",{children:"• Supported formats: PDF, DOC, DOCX, JPG, PNG, TXT"}),(0,b.jsx)("p",{children:"• Maximum file size: 50MB per file"}),(0,b.jsx)("p",{children:"• Documents are stored securely and linked to this arranger entity"}),(0,b.jsx)("p",{children:"• Upload actions are logged for audit trail"})]})]})]})}):null}var L=a.i(698004);let M=[{label:"All status",value:"all"},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Suspended",value:"suspended"}],N=[{label:"All KYC",value:"all"},{label:"Approved",value:"approved"},{label:"Pending",value:"draft"},{label:"Expired",value:"expired"},{label:"Rejected",value:"rejected"}];function O({summary:a,arrangers:e,deals:i=[],vehicles:o=[]}){let[p,r]=(0,c.useState)(""),[s,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(null),{setOpen:I}=(0,u.useAddArranger)(),J=(0,c.useMemo)(()=>e.filter(a=>{let b="all"===s||a.status===s,c="all"===x||a.kycStatus===x,d=!p||a.legalName.toLowerCase().includes(p.toLowerCase())||(a.registrationNumber?.toLowerCase().includes(p.toLowerCase())??!1)||(a.licenseNumber?.toLowerCase().includes(p.toLowerCase())??!1)||(a.email?.toLowerCase().includes(p.toLowerCase())??!1);return b&&c&&d}),[e,s,x,p]);return(0,b.jsxs)("div",{className:"p-6 space-y-6 text-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Arrangers & Advisors"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage regulated entities arranging deals and managing vehicles"})]}),(0,b.jsxs)(f.Button,{onClick:()=>I(!0),children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Add Arranger"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,b.jsx)(P,{icon:(0,b.jsx)(j.Building2,{className:"h-4 w-4"}),label:"Active Entities",primary:a.activeEntities,secondary:`${a.totalEntities} total`}),(0,b.jsx)(P,{icon:(0,b.jsx)(l.CheckCircle2,{className:"h-4 w-4"}),label:"KYC Approved",primary:a.kycApproved,secondary:`${a.totalEntities-a.kycApproved} pending`,primaryClassName:"text-green-400"}),(0,b.jsx)(P,{icon:(0,b.jsx)(k.Activity,{className:"h-4 w-4"}),label:"Total Deals",primary:a.totalDeals,secondary:"Arranged"}),(0,b.jsx)(P,{icon:(0,b.jsx)(q.DollarSign,{className:"h-4 w-4"}),label:"Total AUM",primary:(0,t.formatCurrency)(a.totalAum),secondary:`${a.totalVehicles} vehicles`})]}),(0,b.jsxs)(d.Card,{className:"border border-white/10",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Search & Filters"}),(0,b.jsx)(d.CardDescription,{children:"Filter arrangers by status, KYC status, or keywords"})]}),(0,b.jsx)(d.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search legal name, registration #, license #, email...",value:p,onChange:a=>r(a.target.value),className:"pl-10"})]})}),(0,b.jsxs)(h.Select,{value:s,onValueChange:w,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-full md:w-48",children:(0,b.jsx)(h.SelectValue,{placeholder:"Filter status"})}),(0,b.jsx)(h.SelectContent,{children:M.map(a=>(0,b.jsx)(h.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)(h.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-full md:w-48",children:(0,b.jsx)(h.SelectValue,{placeholder:"Filter KYC"})}),(0,b.jsx)(h.SelectContent,{children:N.map(a=>(0,b.jsx)(h.SelectItem,{value:a.value,children:a.label},a.value))})]})]})})]}),(0,b.jsxs)(d.Card,{className:"border border-white/10",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{children:["Arranger Entities (",J.length,")"]}),(0,b.jsx)(d.CardDescription,{children:"Regulated entities with deal and vehicle assignments"})]}),(0,b.jsx)(d.CardContent,{className:"space-y-4",children:0===J.length?(0,b.jsx)(S,{message:p?"No arrangers match your filters.":"No arrangers available yet."}):J.map(a=>(0,b.jsx)(Q,{arranger:a,onEdit:()=>A(a),onManageKYC:()=>C(a),onManageDocuments:()=>F(a),onInvite:()=>H(a)},a.id))})]}),(0,b.jsx)(v.EditArrangerDialog,{open:!!z,onOpenChange:a=>!a&&A(null),arranger:z}),(0,b.jsx)(D,{open:!!B,onOpenChange:a=>!a&&C(null),arranger:B}),(0,b.jsx)(K,{open:!!E,onOpenChange:a=>!a&&F(null),arranger:E}),G&&(0,b.jsx)(L.InviteUserDialog,{open:!!G,onOpenChange:a=>!a&&H(null),entityType:"arranger",entityId:G.id,entityName:G.legalName})]})}function P({icon:a,label:c,primary:e,secondary:f,primaryClassName:g}){return(0,b.jsxs)(d.Card,{className:"border border-white/10",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[a,c]})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:(0,s.cn)("text-2xl font-bold",g),children:e}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:f})]})]})}function Q({arranger:a,onEdit:c,onManageKYC:d,onManageDocuments:g,onInvite:h}){return(0,b.jsx)("div",{className:"border border-white/10 bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg border border-primary/30 bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(i.Briefcase,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:a.legalName}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:c,className:"h-7 w-7 p-0",children:(0,b.jsx)(o.Edit,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.regulator&&a.licenseNumber&&(0,b.jsxs)("span",{className:"font-medium",children:[a.regulator,": ",a.licenseNumber]}),a.registrationNumber&&(0,b.jsxs)("span",{className:"ml-2",children:["• Reg: ",a.registrationNumber]})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.email||"No email"," • ",a.phone||"No phone"]}),a.licenseType&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Type: ",a.licenseType,a.licenseExpiryDate&&(0,b.jsxs)("span",{className:"ml-2",children:["• Expires: ",(0,t.formatDate)(a.licenseExpiryDate)]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsx)(R,{label:"Deals",value:a.totalDeals,subtitle:`${a.activeDeals} active`}),(0,b.jsx)(R,{label:"Vehicles",value:a.totalVehicles}),(0,b.jsx)(R,{label:"AUM",value:(0,t.formatCurrency)(a.totalAum)}),(0,b.jsx)(R,{label:"Docs",value:a.documentCount})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(e.Badge,{className:(0,s.cn)("capitalize",{active:"bg-green-500/20 text-green-400 border-green-500/30",inactive:"bg-gray-500/20 text-gray-400 border-gray-500/30",suspended:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"}[a.status]??"bg-gray-500/20 text-gray-400"),children:a.status}),(0,b.jsxs)(e.Badge,{className:(0,s.cn)("capitalize",{approved:"bg-green-500/20 text-green-400 border-green-500/30",draft:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",expired:"bg-red-500/20 text-red-400 border-red-500/30",rejected:"bg-red-500/20 text-red-400 border-red-500/30"}[a.kycStatus]??"bg-gray-500/20 text-gray-400"),children:["KYC: ",a.kycStatus]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:d,className:"h-7 text-xs",children:[(0,b.jsx)(l.CheckCircle2,{className:"h-3 w-3 mr-1"}),"KYC"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:g,className:"h-7 text-xs",children:[(0,b.jsx)(p.FileText,{className:"h-3 w-3 mr-1"}),"Docs"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:h,className:"h-7 text-xs",children:[(0,b.jsx)(r.UserPlus,{className:"h-3 w-3 mr-1"}),"Invite"]})]})]})]})})}function R({label:a,value:c,subtitle:d,className:e}){return(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:(0,s.cn)("font-semibold tabular-nums",e),children:c}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:a}),d&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:d})]})}function S({message:a}){return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)(i.Briefcase,{className:"h-12 w-12 text-muted-foreground mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:a})]})}a.s(["ArrangersDashboard",()=>O],365925)},126407,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(470305),e=a.i(421908),f=a.i(663475),g=a.i(249464),h=a.i(191675),i=a.i(951870),j=a.i(100291),k=a.i(899750);function l(){let[a,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)("active"),[E,F]=(0,c.useTransition)(),{open:G,setOpen:H,refresh:I}=(0,j.useAddArranger)(),J=()=>{l(""),n(""),p(""),r(""),t(""),v(""),x(""),z(""),B(""),D("active")};return(0,b.jsx)(d.Dialog,{open:G,onOpenChange:a=>{H(a),a||J()},children:(0,b.jsxs)(d.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(d.DialogHeader,{children:[(0,b.jsx)(d.DialogTitle,{children:"Add Arranger Entity"}),(0,b.jsx)(d.DialogDescription,{children:"Register a new regulated entity (advisor/arranger) for deal and vehicle management."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Basic Information"}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"legalName",children:"Legal Name *"}),(0,b.jsx)(f.Input,{id:"legalName",value:a,onChange:a=>l(a.target.value),placeholder:"e.g. VERSO MANAGEMENT LTD",autoFocus:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"registrationNumber",children:"Company Registration Number"}),(0,b.jsx)(f.Input,{id:"registrationNumber",value:m,onChange:a=>n(a.target.value),placeholder:"e.g. 12345678"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"taxId",children:"Tax ID"}),(0,b.jsx)(f.Input,{id:"taxId",value:o,onChange:a=>p(a.target.value),placeholder:"e.g. EIN or UTR"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Regulatory Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"regulator",children:"Regulator"}),(0,b.jsxs)(i.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select regulator"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"FCA",children:"FCA (UK)"}),(0,b.jsx)(i.SelectItem,{value:"SEC",children:"SEC (US)"}),(0,b.jsx)(i.SelectItem,{value:"FINMA",children:"FINMA (Switzerland)"}),(0,b.jsx)(i.SelectItem,{value:"MAS",children:"MAS (Singapore)"}),(0,b.jsx)(i.SelectItem,{value:"ASIC",children:"ASIC (Australia)"}),(0,b.jsx)(i.SelectItem,{value:"Other",children:"Other"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"licenseNumber",children:"License Number"}),(0,b.jsx)(f.Input,{id:"licenseNumber",value:s,onChange:a=>t(a.target.value),placeholder:"e.g. FRN or CRD number"})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"licenseType",children:"License Type"}),(0,b.jsx)(f.Input,{id:"licenseType",value:u,onChange:a=>v(a.target.value),placeholder:"e.g. Investment Advisor, Broker-Dealer, Fund Manager"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Contact Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(f.Input,{id:"email",type:"email",value:w,onChange:a=>x(a.target.value),placeholder:"compliance@example.com"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"phone",children:"Phone"}),(0,b.jsx)(f.Input,{id:"phone",type:"tel",value:y,onChange:a=>z(a.target.value),placeholder:"+44 20 1234 5678"})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"address",children:"Registered Address"}),(0,b.jsx)(h.Textarea,{id:"address",value:A,onChange:a=>B(a.target.value),placeholder:"Street address, city, postal code, country",rows:2})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{children:"Status"}),(0,b.jsxs)(i.Select,{value:C,onValueChange:D,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(i.SelectItem,{value:"inactive",children:"Inactive"}),(0,b.jsx)(i.SelectItem,{value:"suspended",children:"Suspended"})]})]})]})]}),(0,b.jsxs)(d.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>H(!1),disabled:E,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:()=>{F(async()=>{if(!a.trim())return void k.toast.error("Legal name is required");try{let b=await fetch("/api/admin/arrangers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({legal_name:a.trim(),registration_number:m.trim()||null,tax_id:o.trim()||null,regulator:q.trim()||null,license_number:s.trim()||null,license_type:u.trim()||null,email:w.trim()||null,phone:y.trim()||null,address:A.trim()||null,status:C,kyc_status:"draft"})});if(!b.ok){let a=await b.json().catch(()=>null);console.error("[AddArrangerDialog] Failed to create arranger",a),k.toast.error(a?.error??"Failed to create arranger entity");return}k.toast.success("Arranger entity created successfully"),H(!1),J(),I()}catch(a){console.error("[AddArrangerDialog] Unexpected error",a),k.toast.error("Failed to create arranger entity")}})},disabled:E,children:E?"Creating…":"Create Arranger"})]})]})})}a.s(["AddArrangerDialog",()=>l])}];

//# sourceMappingURL=versotech-portal_src_components_staff_arrangers_32e9a858._.js.map