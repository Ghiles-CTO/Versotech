module.exports=[274929,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.HooksClientContext},530136,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.ServerInsertedHtml},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},571370,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.AppRouterContext},257264,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored["react-ssr"].ReactServerDOMTurbopackClient},637036,a=>{"use strict";let b=(0,a.i(95799).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["default",()=>b])},487068,a=>{"use strict";var b=a.i(637036);a.s(["Search",()=>b.default])},264890,a=>{"use strict";let b=(0,a.i(95799).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],264890)},823879,a=>{"use strict";var b=a.i(713382);a.s(["X",()=>b.default])},618287,a=>{"use strict";let b=(0,a.i(95799).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],618287)},266828,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(429770),e=a.i(948624),f=a.i(983639),g=a.i(256832),h=a.i(895834),i=a.i(311449),j=a.i(994358),k=a.i(579119),l="Checkbox",[m,n]=(0,e.createContextScope)(l),[o,p]=m(l);function q(a){let{__scopeCheckbox:d,checked:e,children:f,defaultChecked:h,disabled:i,form:j,name:k,onCheckedChange:m,required:n,value:p="on",internal_do_not_use_render:q}=a,[r,s]=(0,g.useControllableState)({prop:e,defaultProp:h??!1,onChange:m,caller:l}),[t,u]=c.useState(null),[v,w]=c.useState(null),x=c.useRef(!1),z=!t||!!j||!!t.closest("form"),A={checked:r,disabled:i,setChecked:s,control:t,setControl:u,name:k,form:j,value:p,hasConsumerStoppedPropagationRef:x,required:n,defaultChecked:!y(h)&&h,isFormControl:z,bubbleInput:v,setBubbleInput:w};return(0,b.jsx)(o,{scope:d,...A,children:"function"==typeof q?q(A):f})}var r="CheckboxTrigger",s=c.forwardRef(({__scopeCheckbox:a,onKeyDown:e,onClick:g,...h},i)=>{let{control:j,value:l,disabled:m,checked:n,required:o,setControl:q,setChecked:s,hasConsumerStoppedPropagationRef:t,isFormControl:u,bubbleInput:v}=p(r,a),w=(0,d.useComposedRefs)(i,q),x=c.useRef(n);return c.useEffect(()=>{let a=j?.form;if(a){let b=()=>s(x.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[j,s]),(0,b.jsx)(k.Primitive.button,{type:"button",role:"checkbox","aria-checked":y(n)?"mixed":n,"aria-required":o,"data-state":z(n),"data-disabled":m?"":void 0,disabled:m,value:l,...h,ref:w,onKeyDown:(0,f.composeEventHandlers)(e,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,f.composeEventHandlers)(g,a=>{s(a=>!!y(a)||!a),v&&u&&(t.current=a.isPropagationStopped(),t.current||a.stopPropagation())})})});s.displayName=r;var t=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,b.jsx)(q,{__scopeCheckbox:d,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s,{...m,ref:c,__scopeCheckbox:d}),a&&(0,b.jsx)(x,{__scopeCheckbox:d})]})})});t.displayName=l;var u="CheckboxIndicator",v=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=p(u,d);return(0,b.jsx)(j.Presence,{present:e||y(g.checked)||!0===g.checked,children:(0,b.jsx)(k.Primitive.span,{"data-state":z(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});v.displayName=u;var w="CheckboxBubbleInput",x=c.forwardRef(({__scopeCheckbox:a,...e},f)=>{let{control:g,hasConsumerStoppedPropagationRef:j,checked:l,defaultChecked:m,required:n,disabled:o,name:q,value:r,form:s,bubbleInput:t,setBubbleInput:u}=p(w,a),v=(0,d.useComposedRefs)(f,u),x=(0,h.usePrevious)(l),z=(0,i.useSize)(g);c.useEffect(()=>{if(!t)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!j.current;if(x!==l&&a){let c=new Event("click",{bubbles:b});t.indeterminate=y(l),a.call(t,!y(l)&&l),t.dispatchEvent(c)}},[t,x,l,j]);let A=c.useRef(!y(l)&&l);return(0,b.jsx)(k.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??A.current,required:n,disabled:o,name:q,value:r,form:s,...e,tabIndex:-1,ref:v,style:{...e.style,...z,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function y(a){return"indeterminate"===a}function z(a){return y(a)?"indeterminate":a?"checked":"unchecked"}x.displayName=w;var A=a.i(696661),B=a.i(888987);let C=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(t,{ref:d,className:(0,B.cn)("peer h-5 w-5 md:h-4 md:w-4 shrink-0 rounded border border-white/20 bg-white/5 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400/20 focus-visible:border-blue-400/50 disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(v,{className:(0,B.cn)("flex items-center justify-center text-white"),children:(0,b.jsx)(A.Check,{className:"h-4 w-4 md:h-3.5 md:w-3.5"})})}));C.displayName=t.displayName,a.s(["Checkbox",()=>C],266828)},191675,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(888987);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},425622,a=>{"use strict";let b=(0,a.i(95799).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],425622)},84818,a=>{"use strict";let b=(0,a.i(95799).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],84818)},314449,a=>{"use strict";var b=a.i(611038),c=a.i(983639),d=a.i(948624),e=a.i(256832),f=a.i(125136),g=a.i(429770),h=a.i(579119),i=a.i(994358),j=a.i(385487),k=a.i(352584),l="Collapsible",[m,n]=(0,d.createContextScope)(l),[o,p]=m(l),q=b.forwardRef((a,c)=>{let{__scopeCollapsible:d,open:f,defaultOpen:g,disabled:i,onOpenChange:m,...n}=a,[p,q]=(0,e.useControllableState)({prop:f,defaultProp:g??!1,onChange:m,caller:l});return(0,k.jsx)(o,{scope:d,disabled:i,contentId:(0,j.useId)(),open:p,onOpenToggle:b.useCallback(()=>q(a=>!a),[q]),children:(0,k.jsx)(h.Primitive.div,{"data-state":w(p),"data-disabled":i?"":void 0,...n,ref:c})})});q.displayName=l;var r="CollapsibleTrigger",s=b.forwardRef((a,b)=>{let{__scopeCollapsible:d,...e}=a,f=p(r,d);return(0,k.jsx)(h.Primitive.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":w(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...e,ref:b,onClick:(0,c.composeEventHandlers)(a.onClick,f.onOpenToggle)})});s.displayName=r;var t="CollapsibleContent",u=b.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=p(t,a.__scopeCollapsible);return(0,k.jsx)(i.Presence,{present:c||e.open,children:({present:a})=>(0,k.jsx)(v,{...d,ref:b,present:a})})});u.displayName=t;var v=b.forwardRef((a,c)=>{let{__scopeCollapsible:d,present:e,children:i,...j}=a,l=p(t,d),[m,n]=b.useState(e),o=b.useRef(null),q=(0,g.useComposedRefs)(c,o),r=b.useRef(0),s=r.current,u=b.useRef(0),v=u.current,x=l.open||m,y=b.useRef(x),z=b.useRef(void 0);return b.useEffect(()=>{let a=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,f.useLayoutEffect)(()=>{let a=o.current;if(a){z.current=z.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();r.current=b.height,u.current=b.width,y.current||(a.style.transitionDuration=z.current.transitionDuration,a.style.animationName=z.current.animationName),n(e)}},[l.open,e]),(0,k.jsx)(h.Primitive.div,{"data-state":w(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!x,...j,ref:q,style:{"--radix-collapsible-content-height":s?`${s}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...a.style},children:x&&i})});function w(a){return a?"open":"closed"}a.s(["CollapsibleContent",()=>u,"CollapsibleTrigger",()=>s,"Content",()=>u,"Root",()=>q,"Trigger",()=>s,"createCollapsibleScope",()=>n])},778541,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(948624),e=a.i(579119),f="Progress",[g,h]=(0,d.createContextScope)(f),[i,j]=g(f),k=c.forwardRef((a,c)=>{var d,f;let{__scopeProgress:g,value:h=null,max:j,getValueLabel:k=n,...l}=a;(j||0===j)&&!q(j)&&console.error((d=`${j}`,`Invalid prop \`max\` of value \`${d}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=q(j)?j:100;null===h||r(h,m)||console.error((f=`${h}`,`Invalid prop \`value\` of value \`${f}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let s=r(h,m)?h:null,t=p(s)?k(s,m):void 0;return(0,b.jsx)(i,{scope:g,value:s,max:m,children:(0,b.jsx)(e.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":p(s)?s:void 0,"aria-valuetext":t,role:"progressbar","data-state":o(s,m),"data-value":s??void 0,"data-max":m,...l,ref:c})})});k.displayName=f;var l="ProgressIndicator",m=c.forwardRef((a,c)=>{let{__scopeProgress:d,...f}=a,g=j(l,d);return(0,b.jsx)(e.Primitive.div,{"data-state":o(g.value,g.max),"data-value":g.value??void 0,"data-max":g.max,...f,ref:c})});function n(a,b){return`${Math.round(a/b*100)}%`}function o(a,b){return null==a?"indeterminate":a===b?"complete":"loading"}function p(a){return"number"==typeof a}function q(a){return p(a)&&!isNaN(a)&&a>0}function r(a,b){return p(a)&&!isNaN(a)&&a<=b&&a>=0}m.displayName=l;var s=a.i(888987);let t=c.forwardRef(({className:a,value:c,...d},e)=>(0,b.jsx)(k,{ref:e,className:(0,s.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...d,children:(0,b.jsx)(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(c||0)}%)`}})}));t.displayName=k.displayName,a.s(["Progress",()=>t],778541)},118234,a=>{"use strict";let b=(0,a.i(95799).default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["HelpCircle",()=>b],118234)},160409,a=>{"use strict";var b=a.i(611038),c=a.i(899750),d=a.i(217906),e=a.i(937199);let f=["application/pdf","image/png","image/jpeg","image/jpg","image/gif","image/webp","text/plain"],g=["pdf","png","jpeg","jpg","gif","webp","txt","text"];function h(){let[a,h]=(0,b.useState)(!1),[i,j]=(0,b.useState)(null),[k,l]=(0,b.useState)(null),[m,n]=(0,b.useState)(!1),[o,p]=(0,b.useState)(null),q=(0,b.useCallback)(async(a,b)=>{p(null),l(null);let i=(a=>{let b;if(a.file_size_bytes&&!(a.file_size_bytes<=0xa00000))return"File is too large for preview (maximum 10MB). Please download to view.";let c=a.file_name||a.name||"",d=!!c&&!!(b=c.split(".").pop()?.toLowerCase())&&g.includes(b),e=a.mime_type||"",h=!!e&&f.includes(e);return["docx","doc","xlsx","xls","pptx","ppt","odt","ods","odp"].includes(c.split(".").pop()?.toLowerCase()||"")||e&&(e.includes("officedocument")||e.includes("msword")||e.includes("ms-excel")||e.includes("ms-powerpoint")||e.includes("opendocument"))?"Office documents cannot be previewed. Please download to view.":d||h?null:"Preview not supported for this file type. Please download to view."})(a);if(i)return void c.toast.error(i);j(a),h(!0),n(!0);try{let c=b?await d.DocumentService.getDealDocumentPreviewUrl(b,a.id):await d.DocumentService.getPreviewUrl(a.id);l(c.download_url),n(!1)}catch(b){console.error("Failed to load document preview:",b);let a=b instanceof e.DocumentError?d.DocumentService.getErrorMessage(b):"Failed to load document preview. Please try downloading instead.";p(a),n(!1),c.toast.error(a)}},[]),r=(0,b.useCallback)(()=>{h(!1),setTimeout(()=>{j(null),l(null),p(null),n(!1)},300)},[]),s=(0,b.useCallback)(async()=>{if(i)try{if(k)return void window.open(k,"_blank");let a=await d.DocumentService.getDownloadUrl(i.id);window.open(a.download_url,"_blank")}catch(b){console.error("Failed to download document:",b);let a=b instanceof e.DocumentError?d.DocumentService.getErrorMessage(b):"Failed to download document";c.toast.error(a)}},[i,k]);return{isOpen:a,document:i,previewUrl:k,isLoading:m,error:o,openPreview:q,closePreview:r,downloadDocument:s}}a.s(["useDocumentViewer",()=>h],160409)},518173,a=>{"use strict";var b=a.i(352584),c=a.i(611038);a.i(776777);var d=a.i(823879),e=a.i(425622),f=a.i(3321),g=a.i(877918),h=a.i(816854),i=a.i(421908),j=a.i(888987);function k({isOpen:a,document:k,previewUrl:l,isLoading:m,error:n,onClose:o,onDownload:p}){let[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1);return(0,c.useEffect)(()=>(t(!0),()=>t(!1)),[]),(0,c.useMemo)(()=>{var a;return l?(a=k?.file_name||k?.name,a?.toLowerCase().endsWith(".pdf")||l?.toLowerCase().includes(".pdf")||l?.includes("deal-documents")&&l?.includes(".pdf")||0)?l.includes("#")?l:`${l}#navpanes=0&view=FitH&pagemode=none`:l:null},[l,k]),(0,c.useEffect)(()=>{},[a,o,p]),(0,c.useEffect)(()=>{r(!1)},[l]),a&&s&&(h.FileText,k?.file_name||k?.name,k?.type&&k.type,k?.file_size_bytes&&(b.Fragment,(0,j.formatFileSize)(k.file_size_bytes)),i.Button,e.Download,i.Button,d.X,(m||n||q)&&(m&&f.Loader2,n&&!m&&(g.AlertCircle,i.Button,e.Download),!q||m||n||(g.AlertCircle,i.Button,e.Download))),null}a.s(["DocumentViewerFullscreen",()=>k])},217906,937199,a=>{"use strict";class b extends Error{statusCode;originalError;constructor(a,b,c){super(a),this.statusCode=b,this.originalError=c,this.name="DocumentError"}}a.s(["DocumentError",()=>b],937199);class c{static isValidStorageUrl(a){return!!a&&!!a.startsWith("https://")&&(a.includes("supabase.co/storage")||a.includes("supabase.com/storage")||a.startsWith("blob:"))}static async parseResponse(a){let c;try{c=await a.json()}catch(c){throw new b("Invalid response from server",a.status,c)}if(!a.ok)throw new b(c.error||c.message||"Failed to load document",a.status,c);let d=c.url||c.download_url;if(!d)throw new b("No download URL in response",500,c);if(!this.isValidStorageUrl(d))throw new b("Invalid download URL format",500,c);return c.url=d,c.download_url=d,c}static async getPreviewUrl(a){try{let b=await fetch(`/api/documents/${a}/download?mode=preview`,{method:"GET",headers:{"Content-Type":"application/json"}});return await this.parseResponse(b)}catch(a){if(a instanceof b)throw a;throw new b("Network error while loading preview",0,a)}}static async getDownloadUrl(a){try{let b=await fetch(`/api/documents/${a}/download?mode=download`,{method:"GET",headers:{"Content-Type":"application/json"}});return await this.parseResponse(b)}catch(a){if(a instanceof b)throw a;throw new b("Network error while loading download",0,a)}}static async getDealDocumentPreviewUrl(a,c){try{let b=await fetch(`/api/deals/${a}/documents/${c}/download?mode=preview`,{method:"GET",headers:{"Content-Type":"application/json"}});return await this.parseResponse(b)}catch(a){if(a instanceof b)throw a;throw new b("Network error while loading deal document preview",0,a)}}static async getDealDocumentDownloadUrl(a,c){try{let b=await fetch(`/api/deals/${a}/documents/${c}/download?mode=download`,{method:"GET",headers:{"Content-Type":"application/json"}});return await this.parseResponse(b)}catch(a){if(a instanceof b)throw a;throw new b("Network error while loading deal document download",0,a)}}static getErrorMessage(a){switch(a.statusCode){case 401:return"You do not have permission to view this document.";case 403:return"Access to this document is forbidden.";case 404:return"Document not found or has been deleted.";case 413:return"File is too large to process.";case 500:return"Server error while loading document. Please try again.";case 0:return"Network error. Please check your connection and try again.";default:return a.message||"Failed to load document preview."}}}a.s(["DocumentService",()=>c],217906)},941766,a=>{"use strict";let b=(0,a.i(95799).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);a.s(["FolderOpen",()=>b],941766)},905219,a=>{"use strict";let b=(0,a.i(95799).default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);a.s(["Folder",()=>b],905219)},863133,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(663475),e=a.i(191675),f=a.i(421908),g=a.i(249464),h=a.i(266828),i=a.i(284169),j=a.i(3321),k=a.i(838086),l=a.i(966494),m=a.i(883236),n=a.i(951870),o=a.i(405708),p=a.i(278541),q=a.i(325866),r=a.i(899750),s=a.i(203002);function t({value:a,onChange:d}){let e,[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,t]=(0,c.useState)(!1);(0,c.useEffect)(()=>{u()},[]);let u=async()=>{try{let a=await fetch("/api/investors/me/counterparty-entities");if(!a.ok)throw Error("Failed to load entities");let b=await a.json();i(b.entities||[])}catch(a){console.error("Error loading entities:",a),r.toast.error("Failed to load entities")}finally{k(!1)}},v=async()=>{t(!1),await u()},w=a=>({trust:"Trust",llc:"LLC",partnership:"Partnership",family_office:"Family Office",law_firm:"Law Firm",investment_bank:"Investment Bank",fund:"Fund",corporation:"Corporation",other:"Other"})[a]||a;return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(g.Label,{className:"text-base font-medium",children:"Investment Type"}),(0,b.jsxs)(m.RadioGroup,{value:a.subscription_type,onValueChange:b=>{d({subscription_type:b,counterparty_entity_id:"personal"===b?null:a.counterparty_entity_id})},className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 rounded-lg border p-4 hover:bg-muted transition-colors",children:[(0,b.jsx)(m.RadioGroupItem,{value:"personal",id:"personal"}),(0,b.jsxs)(g.Label,{htmlFor:"personal",className:"flex-1 cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.User,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"font-medium",children:"Invest Personally"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Subscribe using your personal investor profile"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-3 rounded-lg border p-4 hover:bg-muted transition-colors",children:[(0,b.jsx)(m.RadioGroupItem,{value:"entity",id:"entity"}),(0,b.jsxs)(g.Label,{htmlFor:"entity",className:"flex-1 cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Building2,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"font-medium",children:"Invest Through Entity"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Subscribe through a legal entity (trust, LLC, partnership, etc.)"})]})]})]})]}),"entity"===a.subscription_type&&(0,b.jsxs)("div",{className:"space-y-3 pl-8 border-l-2 border-primary/20",children:[(0,b.jsx)(g.Label,{htmlFor:"entity-select",children:"Select Entity"}),j?(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading entities..."}):0===h.length?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"You haven't added any entities yet. Create one to invest through a legal entity."}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",onClick:()=>t(!0),children:[(0,b.jsx)(o.Plus,{className:"w-4 h-4 mr-2"}),"Create Entity"]})]}):(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(n.Select,{value:a.counterparty_entity_id||"",onValueChange:a=>{d({subscription_type:"entity",counterparty_entity_id:a})},children:[(0,b.jsx)(n.SelectTrigger,{id:"entity-select",className:"bg-background text-foreground border-border",children:(0,b.jsx)(n.SelectValue,{placeholder:"Select an entity"})}),(0,b.jsx)(n.SelectContent,{className:"bg-background text-foreground border-border",children:h.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,className:"text-foreground focus:bg-muted focus:text-foreground",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium",children:a.legal_name}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground/70",children:["(",w(a.entity_type),")"]})]})},a.id))})]}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>t(!0),children:[(0,b.jsx)(o.Plus,{className:"w-4 h-4 mr-2"}),"Add New Entity"]}),a.counterparty_entity_id&&(0,b.jsx)("div",{className:"rounded-lg bg-muted border border-border p-3",children:(e=h.find(b=>b.id===a.counterparty_entity_id))?(0,b.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:e.legal_name}),(0,b.jsxs)("div",{className:"text-muted-foreground",children:["Type: ",w(e.entity_type)]}),e.jurisdiction&&(0,b.jsxs)("div",{className:"text-muted-foreground",children:["Jurisdiction: ",e.jurisdiction]}),e.representative_name&&(0,b.jsxs)("div",{className:"text-muted-foreground",children:["Representative: ",e.representative_name]})]}):null})]})]}),(0,b.jsx)(s.EntityFormDialog,{open:l,onClose:()=>t(!1),onSuccess:v})]})}var u=a.i(403205),v=a.i(778541);function w({dealId:a,currency:m,existingSubmission:n}){let[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,w]=(0,c.useState)(""),[x,y]=(0,c.useState)({subscription_type:"personal",counterparty_entity_id:null}),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!0);(0,c.useEffect)(()=>{!async function(){try{let b=await fetch(`/api/deals/${a}/capacity`);if(b.ok){let a=await b.json();G(a)}}catch(a){console.error("Failed to fetch deal capacity:",a)}finally{I(!1)}}()},[a]);let J=F?.target_raise?F.total_subscribed/F.target_raise*100:0,K=J>100;F?.target_raise&&(F.target_raise,F.total_subscribed);let L=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:m,minimumFractionDigits:0,maximumFractionDigits:0}).format(a),M=n&&"pending_review"===n.status,N=async b=>{if(b.preventDefault(),!M){A(!0),C(null),E(null);try{let b=parseFloat(o);if(!b||Number.isNaN(b)||b<=0){E("Enter a valid subscription amount."),A(!1);return}if("entity"===x.subscription_type&&!x.counterparty_entity_id){E("Please select an entity or create one to invest through an entity."),A(!1);return}let c=await fetch(`/api/deals/${a}/subscriptions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:{amount:b,currency:m,bank_confirmation:q,notes:s.trim()||null},subscription_type:x.subscription_type,counterparty_entity_id:x.counterparty_entity_id||null})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to submit subscription");C("Subscription submitted for review. The VERSO team will follow up shortly."),p(""),r(!1),w("")}catch(a){E(a instanceof Error?a.message:"Unexpected error submitting subscription")}finally{A(!1)}}};if(M){let a=n?.submitted_at?new Date(n.submitted_at).toLocaleString():"Recently";return(0,b.jsx)(i.Card,{className:"border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20",children:(0,b.jsxs)(i.CardContent,{className:"py-4 text-sm text-muted-foreground space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-amber-700 dark:text-amber-300",children:[(0,b.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}),"Subscription under review"]}),(0,b.jsxs)("p",{children:["Submitted on ",a,". The VERSO team is reviewing your request."]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"You'll be notified once a decision is made. Contact your relationship manager if you need to make urgent changes."})]})})}let O=parseFloat(o),P=[];return!isNaN(O)&&O>0&&(F?.min_ticket&&O<F.min_ticket&&P.push(`Below minimum investment of ${L(F.min_ticket)}`),F?.max_ticket&&O>F.max_ticket&&P.push(`Above maximum investment of ${L(F.max_ticket)}`)),(0,b.jsxs)("form",{onSubmit:N,className:"space-y-5",children:[!H&&F&&F.target_raise&&(0,b.jsx)(i.Card,{className:K?"border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/20":"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20",children:(0,b.jsx)(i.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Deal Progress"}),(0,b.jsxs)("span",{className:"text-sm font-bold text-foreground",children:[J.toFixed(1),"% subscribed"]})]}),(0,b.jsx)(v.Progress,{value:Math.min(J,100),className:K?"bg-orange-200 dark:bg-orange-800":"bg-blue-200 dark:bg-blue-800"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:[L(F.total_subscribed)," committed"]}),(0,b.jsxs)("span",{children:["Target: ",L(F.target_raise)]})]}),K&&(0,b.jsxs)(u.Alert,{className:"border-orange-300 bg-orange-100",children:[(0,b.jsx)(l.TrendingUp,{className:"h-4 w-4"}),(0,b.jsxs)(u.AlertDescription,{className:"text-xs",children:["This deal is oversubscribed by ",(J-100).toFixed(1),"%. You can still submit your interest, but allocation is not guaranteed."]})]}),F.min_ticket&&F.max_ticket&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground pt-1 border-t border-border",children:["Investment range: ",L(F.min_ticket)," - ",L(F.max_ticket)]})]})})}),(0,b.jsx)(t,{value:x,onChange:y}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(g.Label,{htmlFor:`subscription-amount-${a}`,className:"text-base font-semibold",children:["Subscription Amount (",m,")"]}),(0,b.jsx)(d.Input,{id:`subscription-amount-${a}`,type:"number",min:"0",step:"0.01",value:o,onChange:a=>p(a.target.value),placeholder:"e.g. 250000",className:"text-foreground text-lg h-12"}),P.length>0&&(0,b.jsxs)(u.Alert,{className:"mt-2 border-yellow-300 bg-yellow-50",children:[(0,b.jsx)(k.AlertTriangle,{className:"h-4 w-4 text-yellow-600"}),(0,b.jsxs)(u.AlertDescription,{className:"text-xs text-yellow-800",children:[P.join(". "),". You may still submit, but staff review is required."]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-base font-semibold",children:"Bank & Compliance"}),(0,b.jsxs)("div",{className:"flex items-start space-x-3 rounded-md border-2 border-border px-4 py-3 bg-muted",children:[(0,b.jsx)(h.Checkbox,{id:`bank-confirmation-${a}`,checked:q,onCheckedChange:a=>r(!!a),className:"mt-0.5"}),(0,b.jsx)(g.Label,{htmlFor:`bank-confirmation-${a}`,className:"text-sm text-foreground font-normal cursor-pointer leading-relaxed",children:"I confirm my bank/KYC documentation is ready for the subscription pack."})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:`subscription-notes-${a}`,className:"text-base font-semibold",children:"Additional Notes (optional)"}),(0,b.jsx)(e.Textarea,{id:`subscription-notes-${a}`,value:s,onChange:a=>w(a.target.value),rows:3,placeholder:"Share wiring preferences, co-investor details, or other information for the VERSO team.",className:"text-foreground"})]}),D&&(0,b.jsx)("div",{className:"text-sm text-red-600 font-medium bg-red-50 p-3 rounded-md border border-red-200",children:D}),B&&(0,b.jsx)("div",{className:"text-sm text-emerald-600 font-medium bg-emerald-50 p-3 rounded-md border border-emerald-200",children:B}),(0,b.jsxs)(f.Button,{type:"submit",disabled:z,className:"w-full h-14 text-lg font-bold bg-blue-600 hover:bg-blue-700 text-white gap-2 shadow-md",children:[z&&(0,b.jsx)(j.Loader2,{className:"h-5 w-5 animate-spin"}),"Submit Subscription Request"]})]})}a.s(["SubmitSubscriptionForm",()=>w],863133)},240004,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(948624),e=a.i(769996),f=a.i(429770),g=a.i(983639),h=a.i(256832),i=a.i(579119),j=a.i(314449),k=a.i(385487),l=a.i(559387),m="Accordion",n=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[o,p,q]=(0,e.createCollection)(m),[r,s]=(0,d.createContextScope)(m,[q,j.createCollapsibleScope]),t=(0,j.createCollapsibleScope)(),u=c.default.forwardRef((a,c)=>{let{type:d,...e}=a;return(0,b.jsx)(o.Provider,{scope:a.__scopeAccordion,children:"multiple"===d?(0,b.jsx)(A,{...e,ref:c}):(0,b.jsx)(z,{...e,ref:c})})});u.displayName=m;var[v,w]=r(m),[x,y]=r(m,{collapsible:!1}),z=c.default.forwardRef((a,d)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},collapsible:i=!1,...j}=a,[k,l]=(0,h.useControllableState)({prop:e,defaultProp:f??"",onChange:g,caller:m});return(0,b.jsx)(v,{scope:a.__scopeAccordion,value:c.default.useMemo(()=>k?[k]:[],[k]),onItemOpen:l,onItemClose:c.default.useCallback(()=>i&&l(""),[i,l]),children:(0,b.jsx)(x,{scope:a.__scopeAccordion,collapsible:i,children:(0,b.jsx)(D,{...j,ref:d})})})}),A=c.default.forwardRef((a,d)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},...i}=a,[j,k]=(0,h.useControllableState)({prop:e,defaultProp:f??[],onChange:g,caller:m}),l=c.default.useCallback(a=>k((b=[])=>[...b,a]),[k]),n=c.default.useCallback(a=>k((b=[])=>b.filter(b=>b!==a)),[k]);return(0,b.jsx)(v,{scope:a.__scopeAccordion,value:j,onItemOpen:l,onItemClose:n,children:(0,b.jsx)(x,{scope:a.__scopeAccordion,collapsible:!0,children:(0,b.jsx)(D,{...i,ref:d})})})}),[B,C]=r(m),D=c.default.forwardRef((a,d)=>{let{__scopeAccordion:e,disabled:h,dir:j,orientation:k="vertical",...m}=a,q=c.default.useRef(null),r=(0,f.useComposedRefs)(q,d),s=p(e),t="ltr"===(0,l.useDirection)(j),u=(0,g.composeEventHandlers)(a.onKeyDown,a=>{if(!n.includes(a.key))return;let b=a.target,c=s().filter(a=>!a.ref.current?.disabled),d=c.findIndex(a=>a.ref.current===b),e=c.length;if(-1===d)return;a.preventDefault();let f=d,g=e-1,h=()=>{(f=d+1)>g&&(f=0)},i=()=>{(f=d-1)<0&&(f=g)};switch(a.key){case"Home":f=0;break;case"End":f=g;break;case"ArrowRight":"horizontal"===k&&(t?h():i());break;case"ArrowDown":"vertical"===k&&h();break;case"ArrowLeft":"horizontal"===k&&(t?i():h());break;case"ArrowUp":"vertical"===k&&i()}let j=f%e;c[j].ref.current?.focus()});return(0,b.jsx)(B,{scope:e,disabled:h,direction:j,orientation:k,children:(0,b.jsx)(o.Slot,{scope:e,children:(0,b.jsx)(i.Primitive.div,{...m,"data-orientation":k,ref:r,onKeyDown:h?void 0:u})})})}),E="AccordionItem",[F,G]=r(E),H=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,value:e,...f}=a,g=C(E,d),h=w(E,d),i=t(d),l=(0,k.useId)(),m=e&&h.value.includes(e)||!1,n=g.disabled||a.disabled;return(0,b.jsx)(F,{scope:d,open:m,disabled:n,triggerId:l,children:(0,b.jsx)(j.Root,{"data-orientation":g.orientation,"data-state":O(m),...i,...f,ref:c,disabled:n,open:m,onOpenChange:a=>{a?h.onItemOpen(e):h.onItemClose(e)}})})});H.displayName=E;var I="AccordionHeader",J=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=C(m,d),g=G(I,d);return(0,b.jsx)(i.Primitive.h3,{"data-orientation":f.orientation,"data-state":O(g.open),"data-disabled":g.disabled?"":void 0,...e,ref:c})});J.displayName=I;var K="AccordionTrigger",L=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=C(m,d),g=G(K,d),h=y(K,d),i=t(d);return(0,b.jsx)(o.ItemSlot,{scope:d,children:(0,b.jsx)(j.Trigger,{"aria-disabled":g.open&&!h.collapsible||void 0,"data-orientation":f.orientation,id:g.triggerId,...i,...e,ref:c})})});L.displayName=K;var M="AccordionContent",N=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=C(m,d),g=G(M,d),h=t(d);return(0,b.jsx)(j.Content,{role:"region","aria-labelledby":g.triggerId,"data-orientation":f.orientation,...h,...e,ref:c,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});function O(a){return a?"open":"closed"}N.displayName=M;var P=a.i(168118),Q=a.i(888987);let R=({className:a,children:c,...d})=>(0,b.jsx)(J,{className:"flex",children:(0,b.jsxs)(L,{className:(0,Q.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline",a),...d,children:[c,(0,b.jsx)(P.ChevronDown,{className:"h-4 w-4 shrink-0 transition-transform duration-200 [data-state=open]:rotate-180"})]})});R.displayName=L.displayName;let S=({className:a,children:c,...d})=>(0,b.jsx)(N,{className:(0,Q.cn)("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",a),...d,children:(0,b.jsx)("div",{className:"pb-4 pt-0",children:c})});S.displayName=N.displayName,a.s(["Accordion",()=>u,"AccordionContent",()=>S,"AccordionItem",()=>H,"AccordionTrigger",()=>R],240004)},75788,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(284169),e=a.i(240004),f=a.i(3321),g=a.i(118234),h=a.i(899750);function i({dealId:a}){let[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),m=(0,c.useCallback)(async()=>{try{let b=await fetch(`/api/deals/${a}/faqs`);if(!b.ok)throw Error(`HTTP ${b.status}`);let c=await b.json();j(c.faqs||[])}catch(a){console.error("Error fetching FAQs:",a),h.toast.error("Failed to load FAQs",{description:"Please try refreshing the page."})}finally{l(!1)}},[a]);return((0,c.useEffect)(()=>{m()},[m]),k)?(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"py-12",children:(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(f.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})})})}):0===i.length?null:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.HelpCircle,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(d.CardTitle,{children:"Frequently Asked Questions"})]}),(0,b.jsx)(d.CardDescription,{children:"Common questions about this investment opportunity"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(e.Accordion,{type:"single",collapsible:!0,className:"w-full",children:i.map(a=>(0,b.jsxs)(e.AccordionItem,{value:a.id,children:[(0,b.jsx)(e.AccordionTrigger,{className:"text-left",children:a.question}),(0,b.jsx)(e.AccordionContent,{className:"text-muted-foreground whitespace-pre-wrap",children:a.answer})]},a.id))})})]})}a.s(["DealFaqSection",()=>i])},268563,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(58834),e=a.i(421908),f=a.i(816854),g=a.i(425622),h=a.i(618287),i=a.i(3321),j=a.i(672606),k=a.i(168118),l=a.i(905219),m=a.i(941766),n=a.i(264890),o=a.i(84818),p=a.i(160409),q=a.i(518173);function r({documents:a}){let[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(new Set),{isOpen:v,document:w,previewUrl:x,isLoading:y,error:z,openPreview:A,closePreview:B,downloadDocument:C}=(0,p.useDocumentViewer)(),D=a.filter(a=>a.is_featured),E=a.filter(a=>!a.is_featured).reduce((a,b)=>{let c=b.folder||"General";return a[c]||(a[c]=[]),a[c].push(b),a},{}),F=Object.keys(E).sort(),G=async a=>{a.external_link?window.open(a.external_link,"_blank","noopener,noreferrer"):await A({id:a.id,file_name:a.file_name,name:a.file_name},a.deal_id)},H=async a=>{s(a.id);try{if(a.external_link){window.open(a.external_link,"_blank","noopener,noreferrer"),s(null);return}if(!a.file_key)throw Error("No file available for download");let b=(0,d.createClient)(),{data:c,error:e}=await b.storage.from("deal-documents").download(a.file_key);if(e||!c)throw Error(e?.message||"Download failed");let f=window.URL.createObjectURL(c),g=document.createElement("a");g.href=f,g.download=a.file_name||"document",document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(f)}catch(a){console.error("Download error:",a),alert(a instanceof Error?a.message:"Failed to download document")}finally{s(null)}};return 0===a.length?(0,b.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No documents available yet"}):(0,b.jsxs)("div",{className:"space-y-4",children:[D.length>0&&(0,b.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-xl p-4 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(o.Star,{className:"h-5 w-5 text-amber-500 fill-amber-500"}),(0,b.jsx)("h3",{className:"font-semibold text-amber-900",children:"Featured Documents"}),(0,b.jsxs)("span",{className:"text-xs text-amber-600 bg-amber-100 px-2 py-0.5 rounded-full",children:[D.length," key document",1!==D.length?"s":""]})]}),(0,b.jsx)("div",{className:"space-y-2",children:D.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-amber-200 px-4 py-3 flex items-center justify-between hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,b.jsx)(f.FileText,{className:"h-5 w-5 text-amber-600 flex-shrink-0"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-foreground block truncate",children:a.file_name||"Untitled"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[!a.external_link&&(0,b.jsxs)(e.Button,{onClick:()=>G(a),variant:"ghost",size:"sm",className:"text-amber-700 hover:text-amber-800 hover:bg-amber-100",children:[(0,b.jsx)(n.Eye,{className:"h-4 w-4 mr-1.5"}),"Preview"]}),(0,b.jsx)(e.Button,{onClick:()=>H(a),disabled:r===a.id,variant:"ghost",size:"sm",className:"text-amber-700 hover:text-amber-800 hover:bg-amber-100",children:r===a.id?(0,b.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin"}):a.external_link?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.ExternalLink,{className:"h-4 w-4 mr-1.5"}),"View"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Download,{className:"h-4 w-4 mr-1.5"}),"Download"]})})]})]},a.id))})]}),F.map(a=>{let c,d=E[a],o=t.has(a),p=(c=a.toLowerCase()).includes("legal")||c.includes("contract")?{icon:"text-blue-600",accent:"border-l-blue-500"}:c.includes("financial")||c.includes("finance")?{icon:"text-emerald-600",accent:"border-l-emerald-500"}:c.includes("due diligence")||c.includes("diligence")?{icon:"text-violet-600",accent:"border-l-violet-500"}:c.includes("marketing")||c.includes("presentation")?{icon:"text-amber-600",accent:"border-l-amber-500"}:{icon:"text-muted-foreground",accent:"border-l-primary/40"};return(0,b.jsxs)("div",{className:`bg-card border border-border rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden ${o?"border-l-2 "+p.accent:""}`,children:[(0,b.jsx)("button",{onClick:()=>{let b;(b=new Set(t)).has(a)?b.delete(a):b.add(a),u(b)},className:`w-full px-5 py-4 flex items-center justify-between transition-all duration-200 ${o?"bg-muted/70":"hover:bg-muted/50"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.ChevronDown,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(m.FolderOpen,{className:`h-5 w-5 ${p.icon}`})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.ChevronRight,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(l.Folder,{className:`h-5 w-5 ${p.icon}`})]}),(0,b.jsx)("span",{className:"font-medium text-sm text-foreground",children:a}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded-full",children:[d.length," ",1===d.length?"item":"items"]})]})}),o&&(0,b.jsx)("div",{className:"bg-card divide-y divide-border",children:d.map(a=>(0,b.jsxs)("div",{className:"px-5 py-3.5 flex items-center justify-between hover:bg-muted/50 transition-all duration-150 border-l-2 border-transparent hover:border-l-blue-400",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(a=>{switch(a.split(".").pop()?.toLowerCase()){case"pdf":return(0,b.jsx)(f.FileText,{className:"h-4 w-4 text-red-500"});case"xlsx":case"xls":return(0,b.jsx)(f.FileText,{className:"h-4 w-4 text-emerald-600"});case"docx":case"doc":return(0,b.jsx)(f.FileText,{className:"h-4 w-4 text-blue-600"});case"pptx":case"ppt":return(0,b.jsx)(f.FileText,{className:"h-4 w-4 text-orange-500"});case"jpg":case"jpeg":case"png":case"gif":return(0,b.jsx)(f.FileText,{className:"h-4 w-4 text-purple-500"});default:return(0,b.jsx)(f.FileText,{className:"h-4 w-4 text-muted-foreground"})}})(a.file_name||""),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-foreground block truncate",children:a.file_name||"Untitled"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[!a.external_link&&(0,b.jsxs)(e.Button,{onClick:()=>G(a),variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-blue-600 hover:bg-primary/10",children:[(0,b.jsx)(n.Eye,{className:"h-4 w-4 mr-1.5"}),"Preview"]}),(0,b.jsx)(e.Button,{onClick:()=>H(a),disabled:r===a.id,variant:"ghost",size:"sm",className:"text-slate-600 hover:text-blue-600 hover:bg-blue-50/50",children:r===a.id?(0,b.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin"}):a.external_link?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.ExternalLink,{className:"h-4 w-4 mr-1.5"}),"View"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Download,{className:"h-4 w-4 mr-1.5"}),"Download"]})})]})]},a.id))})]},a)}),(0,b.jsx)(q.DocumentViewerFullscreen,{isOpen:v,document:w,previewUrl:x,isLoading:y,error:z,onClose:B,onDownload:C})]})}a.s(["DataRoomDocumentsGrouped",()=>r])},176624,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(421908),e=a.i(42329),f=a.i(3321),g=a.i(696661);function h({dealId:a,dealName:h,expiresAt:i,daysRemaining:j,className:k}){let[l,m]=(0,c.useState)("idle"),[n,o]=(0,c.useState)(null);if(!i||null!==j&&j>7)return null;let p=async()=>{m("saving"),o(null);try{let b=await fetch("/api/data-room-access/request-extension",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deal_id:a,reason:`Requesting additional time to review ${h} data room materials`})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to submit extension request");m("saved"),setTimeout(()=>m("idle"),3e3)}catch(a){console.error("Failed to request extension",a),m("error"),o(a instanceof Error?a.message:"Could not submit the request. Please try again."),setTimeout(()=>m("idle"),4e3)}};return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",size:"sm",className:k||"border-2 border-blue-600 text-blue-700 hover:bg-blue-50",disabled:"saving"===l||"saved"===l,onClick:p,children:"saving"===l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"h-4 w-4 animate-spin mr-1.5"}),"Requestingâ€¦"]}):"saved"===l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Check,{className:"h-4 w-4 mr-1.5 text-emerald-600"}),"Request Submitted"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Clock,{className:"h-4 w-4 mr-1.5"}),"Request Extension"]})}),"error"===l&&n&&(0,b.jsx)("p",{className:"text-xs text-red-600",children:n})]})}a.s(["RequestExtensionButton",()=>h])},142368,a=>{a.v(a=>Promise.resolve().then(()=>a(648232)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e01f944f._.js.map