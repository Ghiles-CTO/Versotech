module.exports=[531774,867236,79189,640124,10469,182154,325e3,465267,298309,723967,43925,372211,32281,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(168118),e=a.i(672606),f=a.i(888987),g=a.i(284169);function h({title:a,icon:h,defaultOpen:i=!1,children:j,badge:k,isDark:l=!0}){let[m,n]=(0,c.useState)(i);return(0,b.jsxs)(g.Card,{className:(0,f.cn)("overflow-hidden",l?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsxs)("button",{onClick:()=>n(!m),className:(0,f.cn)("w-full flex items-center justify-between p-6 transition-colors",l?"hover:bg-white/5":"hover:bg-gray-50"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[h&&(0,b.jsx)("span",{className:l?"text-zinc-400":"text-gray-500",children:h}),(0,b.jsx)("span",{className:(0,f.cn)("text-lg font-semibold",l?"text-white":"text-gray-900"),children:a}),k]}),(0,b.jsx)("div",{className:l?"text-zinc-400":"text-gray-500",children:m?(0,b.jsx)(d.ChevronDown,{className:"h-5 w-5"}):(0,b.jsx)(e.ChevronRight,{className:"h-5 w-5"})})]}),(0,b.jsx)("div",{className:(0,f.cn)("transition-all duration-300 ease-in-out overflow-hidden",m?"max-h-[5000px] opacity-100":"max-h-0 opacity-0"),children:(0,b.jsx)(g.CardContent,{className:(0,f.cn)("pt-0 border-t",l?"border-white/5":"border-gray-200"),children:(0,b.jsx)("div",{className:"pt-6",children:j})})})]})}a.s(["CollapsibleSection",()=>h],531774);var i=a.i(15788),j=a.i(155508),k=a.i(966494),l=a.i(478870),m=a.i(688611),n=a.i(871057),o=a.i(13542),p=a.i(324117),q=a.i(95799);let r=(0,q.default)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var s=a.i(365966);function t({metrics:a,isDark:c=!0}){if(!a)return(0,b.jsx)(g.Card,{className:(0,f.cn)(c?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-6",children:[(0,b.jsx)("h3",{className:(0,f.cn)("text-lg font-semibold mb-4",c?"text-white":"text-gray-900"),children:"Financial Overview"}),(0,b.jsx)("p",{className:c?"text-zinc-400":"text-gray-500",children:"Loading financial metrics..."})]})});let d=a=>a>=1e6?`$${(a/1e6).toFixed(1)}M`:a>=1e3?`$${(a/1e3).toFixed(0)}K`:`$${a.toFixed(0)}`,e=a=>a>0?(0,b.jsx)(p.ArrowUpRight,{className:"h-3 w-3 text-emerald-400"}):a<0?(0,b.jsx)(r,{className:"h-3 w-3 text-red-400"}):(0,b.jsx)(s.Minus,{className:(0,f.cn)("h-3 w-3",c?"text-zinc-500":"text-gray-400")}),h=a=>a>0?"text-emerald-400":a<0?"text-red-400":c?"text-zinc-500":"text-gray-400";return(0,b.jsxs)(g.Card,{className:(0,f.cn)(c?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,f.cn)("p-2 rounded-lg",c?"bg-blue-500/10":"bg-blue-50"),children:(0,b.jsx)(j.DollarSign,{className:"h-5 w-5 text-blue-400"})}),(0,b.jsx)(g.CardTitle,{className:(0,f.cn)("text-lg font-semibold",c?"text-white":"text-gray-900"),children:"Financial Overview"})]}),(0,b.jsxs)(i.Badge,{className:(0,f.cn)(c?"bg-zinc-700/50 text-zinc-300 border-zinc-600/30":"bg-gray-100 text-gray-600 border-gray-200"),children:[(0,b.jsx)(j.DollarSign,{className:"h-3 w-3 mr-1"}),"USD"]})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg border",c?"bg-gradient-to-br from-blue-500/10 to-purple-500/10 border-blue-500/20":"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:c?"text-sm text-zinc-400":"text-sm text-gray-500",children:"Assets Under Management"}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[(0,b.jsxs)("span",{className:`flex items-center gap-1 ${h(a.aum?.change_mtd||0)}`,children:[e(a.aum?.change_mtd||0),"MTD: ",a.aum?.change_mtd||0,"%"]}),(0,b.jsxs)("span",{className:`flex items-center gap-1 ${h(a.aum?.change_ytd||0)}`,children:[e(a.aum?.change_ytd||0),"YTD: ",a.aum?.change_ytd||0,"%"]})]})]}),(0,b.jsx)("p",{className:(0,f.cn)("text-3xl font-bold",c?"text-white":"text-gray-900"),children:d(a.aum?.total||0)})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg border",c?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(n.Briefcase,{className:"h-4 w-4 text-purple-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm font-medium",c?"text-zinc-300":"text-gray-700"),children:"Commitments"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Total"}),(0,b.jsx)("p",{className:(0,f.cn)("text-lg font-bold",c?"text-white":"text-gray-900"),children:d(a.commitments?.total||0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Funded"}),(0,b.jsx)("p",{className:"text-lg font-bold text-emerald-400",children:d(a.commitments?.funded||0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,b.jsx)("span",{className:c?"text-zinc-500":"text-gray-400",children:"Funding Rate"}),(0,b.jsxs)("span",{className:c?"text-zinc-300":"text-gray-700",children:[a.commitments?.funding_rate||0,"%"]})]}),(0,b.jsx)("div",{className:(0,f.cn)("w-full h-2 rounded-full overflow-hidden",c?"bg-zinc-700":"bg-gray-200"),children:(0,b.jsx)("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${Number(a.commitments?.funding_rate)||0}%`}})})]})]})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg border",c?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(o.CreditCard,{className:"h-4 w-4 text-emerald-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm font-medium",c?"text-zinc-300":"text-gray-700"),children:"Revenue"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"MTD"}),(0,b.jsx)("p",{className:(0,f.cn)("text-lg font-bold",c?"text-white":"text-gray-900"),children:d(a.revenue?.revenue_mtd||0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"YTD"}),(0,b.jsx)("p",{className:(0,f.cn)("text-lg font-bold",c?"text-white":"text-gray-900"),children:d(a.revenue?.revenue_ytd||0)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Pending"}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-amber-400",children:[a.revenue?.pending_invoices?.count||0,(0,b.jsxs)("span",{className:(0,f.cn)("text-xs ml-1",c?"text-zinc-500":"text-gray-400"),children:["(",d(a.revenue?.pending_invoices?.amount||0),")"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Overdue"}),(0,b.jsxs)("p",{className:`text-sm font-semibold ${a.revenue?.overdue_invoices?.count>0?"text-red-400":c?"text-zinc-400":"text-gray-500"}`,children:[a.revenue?.overdue_invoices?.count||0,(0,b.jsxs)("span",{className:(0,f.cn)("text-xs ml-1",c?"text-zinc-500":"text-gray-400"),children:["(",d(a.revenue?.overdue_invoices?.amount||0),")"]})]})]})]})]})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg border",c?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(m.PieChart,{className:"h-4 w-4 text-cyan-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm font-medium",c?"text-zinc-300":"text-gray-700"),children:"Deal Pipeline"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Open Deals"}),(0,b.jsx)("p",{className:(0,f.cn)("text-lg font-bold",c?"text-white":"text-gray-900"),children:a.deal_pipeline?.open_deals||0}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:d(a.deal_pipeline?.total_pipeline_value||0)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Closed YTD"}),(0,b.jsx)("p",{className:"text-lg font-bold text-emerald-400",children:a.deal_pipeline?.closed_deals_ytd||0}),(0,b.jsxs)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:["Conv: ",a.deal_pipeline?.conversion_rate||0,"%"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Avg Deal Size"}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm font-semibold",c?"text-zinc-300":"text-gray-700"),children:d(a.deal_pipeline?.average_deal_size||0)})]})]})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg border",c?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4 text-orange-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm font-medium",c?"text-zinc-300":"text-gray-700"),children:"Investor Base"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Total"}),(0,b.jsx)("p",{className:(0,f.cn)("text-lg font-bold",c?"text-white":"text-gray-900"),children:a.investors?.total_active||0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Approved"}),(0,b.jsx)("p",{className:"text-lg font-bold text-emerald-400",children:a.investors?.kyc_approved||0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Pending"}),(0,b.jsx)("p",{className:"text-lg font-bold text-amber-400",children:a.investors?.kyc_pending||0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"New This Month"}),(0,b.jsxs)("p",{className:(0,f.cn)("text-sm font-semibold flex items-center gap-1",c?"text-zinc-300":"text-gray-700"),children:[(0,b.jsx)(p.ArrowUpRight,{className:"h-3 w-3 text-emerald-400"}),a.investors?.new_investors_mtd||0]})]})]})]})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg border",c?"bg-zinc-800/30 border-zinc-700/30":"bg-gray-50 border-gray-200"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(k.TrendingUp,{className:"h-4 w-4 text-emerald-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm font-medium",c?"text-zinc-300":"text-gray-700"),children:"Performance Metrics"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-3 rounded-lg",c?"bg-zinc-800/50":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs mb-1",c?"text-zinc-500":"text-gray-400"),children:"IRR (YTD)"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-emerald-400",children:[a.performance?.irr_ytd||0,"%"]})]}),(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-3 rounded-lg",c?"bg-zinc-800/50":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs mb-1",c?"text-zinc-500":"text-gray-400"),children:"Multiple"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-blue-400",children:[a.performance?.multiple||0,"x"]})]}),(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-3 rounded-lg",c?"bg-zinc-800/50":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs mb-1",c?"text-zinc-500":"text-gray-400"),children:"DPI"}),(0,b.jsx)("p",{className:"text-xl font-bold text-purple-400",children:a.performance?.dpi||0})]}),(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-3 rounded-lg",c?"bg-zinc-800/50":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs mb-1",c?"text-zinc-500":"text-gray-400"),children:"TVPI"}),(0,b.jsx)("p",{className:"text-xl font-bold text-cyan-400",children:a.performance?.tvpi||0})]})]})]}),(0,b.jsx)("div",{className:(0,f.cn)("pt-4 border-t",c?"border-zinc-800":"border-gray-200"),children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center justify-between p-3 rounded-lg",c?"bg-zinc-800/30":"bg-gray-50"),children:[(0,b.jsx)("span",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Portfolio Value"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm font-bold",c?"text-white":"text-gray-900"),children:d(a.summary?.total_portfolio_value||0)})]}),(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center justify-between p-3 rounded-lg",c?"bg-zinc-800/30":"bg-gray-50"),children:[(0,b.jsx)("span",{className:(0,f.cn)("text-xs",c?"text-zinc-500":"text-gray-400"),children:"Distributions YTD"}),(0,b.jsx)("span",{className:"text-sm font-bold text-emerald-400",children:d(a.summary?.total_distributions_ytd||0)})]})]})})]})]})}a.s(["FinancialOverview",()=>t],867236);var u=a.i(421908),v=a.i(470305),w=a.i(771088),x=a.i(663475),y=a.i(249464),z=a.i(266828),A=a.i(951870),B=a.i(899750),C=a.i(799373),D=a.i(586105),E=a.i(787957),F=a.i(703606),G=a.i(496392),H=a.i(42329),I=a.i(439467),J=a.i(216316);function K({staffMembers:a,onStaffUpdate:d,isDark:e=!0}){let[h,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({email:"",display_name:"",role:"staff_ops",title:"",is_super_admin:!1}),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),O=async()=>{L(!0);try{let a=await fetch("/api/admin/staff/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),b=await a.json();a.ok?(b.dev_warning&&b.data?.accept_url?(B.toast.success("Invitation created (email skipped in dev mode)"),N(b.data.accept_url)):(B.toast.success("Invitation sent successfully"),j(!1)),d(),t({email:"",display_name:"",role:"staff_ops",title:"",is_super_admin:!1})):B.toast.error(b.error||"Failed to invite staff member")}catch(a){B.toast.error("Failed to send invitation")}finally{L(!1)}},P=()=>{j(!1),N(null)},Q=async a=>{if(confirm("Are you sure you want to deactivate this staff member?"))try{let b=await fetch(`/api/admin/staff/${a}/deactivate`,{method:"PATCH"});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to deactivate staff")}B.toast.success("Staff member deactivated successfully"),d()}catch(a){B.toast.error(a.message||"Failed to deactivate staff member")}},R=async a=>{l(a),n(!0),r(!0),p(null);try{let b=await fetch(`/api/admin/staff/${a.id}/activity?limit=50`);if(b.ok){let a=await b.json();p(a.data)}else B.toast.error("Failed to load activity data")}catch(a){B.toast.error("Failed to load activity data")}finally{r(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(g.Card,{className:(0,f.cn)(e?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(g.CardTitle,{className:e?"text-white":"text-gray-900",children:"Staff Management"}),(0,b.jsxs)(u.Button,{onClick:()=>j(!0),children:[(0,b.jsx)(C.UserPlus,{className:"h-4 w-4 mr-2"}),"Invite Staff"]})]})}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:(0,f.cn)("rounded-md border",e?"border-zinc-700":"border-gray-200"),children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{className:e?"border-zinc-700":"border-gray-200",children:[(0,b.jsx)(w.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Name"}),(0,b.jsx)(w.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Email"}),(0,b.jsx)(w.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Role"}),(0,b.jsx)(w.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Status"}),(0,b.jsx)(w.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Permissions"}),(0,b.jsx)(w.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Last Login"}),(0,b.jsx)(w.TableHead,{className:e?"text-zinc-400":"text-gray-500",children:"Last Activity"}),(0,b.jsx)(w.TableHead,{className:(0,f.cn)("text-right",e?"text-zinc-400":"text-gray-500"),children:"Actions"})]})}),(0,b.jsx)(w.TableBody,{children:a.map(a=>(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(e?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,b.jsx)(w.TableCell,{className:"font-medium",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:e?"text-white":"text-gray-900",children:a.display_name||"N/A"}),a.title&&(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:a.title})]})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(I.Mail,{className:(0,f.cn)("h-3 w-3",e?"text-zinc-400":"text-gray-500")}),(0,b.jsx)("span",{className:e?"text-zinc-300":"text-gray-700",children:a.email})]})}),(0,b.jsx)(w.TableCell,{children:(a=>{switch(a){case"staff_admin":return(0,b.jsx)(i.Badge,{className:"bg-purple-500",children:"Admin"});case"staff_ops":return(0,b.jsx)(i.Badge,{className:"bg-blue-500",children:"Operations"});case"staff_rm":return(0,b.jsx)(i.Badge,{className:"bg-green-500",children:"Relationship Manager"});default:return(0,b.jsx)(i.Badge,{variant:"secondary",children:a})}})(a.role)}),(0,b.jsx)(w.TableCell,{children:(a=>{switch(a){case"active":return(0,b.jsx)(i.Badge,{variant:"default",children:"Active"});case"invited":return(0,b.jsx)(i.Badge,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Invited"});default:return(0,b.jsx)(i.Badge,{variant:"secondary",children:"Inactive"})}})(a.status)}),(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.is_super_admin&&(0,b.jsxs)(i.Badge,{variant:"outline",className:"text-xs",children:[(0,b.jsx)(G.Shield,{className:"h-3 w-3 mr-1"}),"Super Admin"]}),a.permissions.length>0&&!a.is_super_admin&&(0,b.jsxs)(i.Badge,{variant:"outline",className:"text-xs",children:[a.permissions.length," permissions"]})]})}),(0,b.jsx)(w.TableCell,{children:a.last_login_at?(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:e?"text-zinc-300":"text-gray-700",children:new Date(a.last_login_at).toLocaleDateString()}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:new Date(a.last_login_at).toLocaleTimeString()})]}):(0,b.jsx)("span",{className:e?"text-zinc-400":"text-gray-500",children:"Never"})}),(0,b.jsxs)(w.TableCell,{children:[a.last_activity?(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-300":"text-gray-700"),children:a.last_action}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:new Date(a.last_activity).toLocaleString()})]}):(0,b.jsx)("span",{className:e?"text-zinc-400":"text-gray-500",children:"No activity"}),a.recent_failed_logins>0&&(0,b.jsxs)(i.Badge,{variant:"destructive",className:"text-xs mt-1",children:[a.recent_failed_logins," failed logins"]})]}),(0,b.jsx)(w.TableCell,{className:"text-right",children:(0,b.jsxs)(J.DropdownMenu,{children:[(0,b.jsx)(J.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(u.Button,{variant:"ghost",className:(0,f.cn)("h-8 w-8 p-0",e?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-900"),children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(F.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,b.jsxs)(J.DropdownMenuContent,{align:"end",className:(0,f.cn)(e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsx)(J.DropdownMenuLabel,{className:e?"text-zinc-400":"text-gray-500",children:"Actions"}),(0,b.jsxs)(J.DropdownMenuItem,{onClick:()=>R(a),className:(0,f.cn)(e?"text-zinc-300 focus:text-white focus:bg-zinc-700":"text-gray-700 focus:text-gray-900 focus:bg-gray-100"),children:[(0,b.jsx)(E.Activity,{className:"h-4 w-4 mr-2"}),"View Activity"]}),(0,b.jsx)(J.DropdownMenuSeparator,{className:e?"bg-zinc-700":"bg-gray-200"}),(0,b.jsxs)(J.DropdownMenuItem,{className:"text-red-600",onClick:()=>Q(a.id),disabled:"inactive"===a.status,children:[(0,b.jsx)(D.UserX,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-4 rounded-lg",e?"bg-zinc-800/50":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:a.length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Total Staff"})]}),(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-4 rounded-lg",e?"bg-zinc-800/50":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:a.filter(a=>"active"===a.status).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Active"})]}),(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-4 rounded-lg",e?"bg-zinc-800/50":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:a.filter(a=>a.is_super_admin).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Super Admins"})]}),(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-4 rounded-lg",e?"bg-zinc-800/50":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:a.filter(a=>a.recent_failed_logins>0).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"With Failed Logins"})]})]})]})]}),(0,b.jsx)(v.Dialog,{open:h,onOpenChange:P,children:(0,b.jsxs)(v.DialogContent,{className:(0,f.cn)(e?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{className:e?"text-white":"text-gray-900",children:"Invite New Staff Member"}),(0,b.jsx)(v.DialogDescription,{className:e?"text-zinc-400":"text-gray-500",children:"Send an invitation to add a new staff member to the platform."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"email",className:e?"text-zinc-300":"text-gray-700",children:"Email Address"}),(0,b.jsx)(x.Input,{id:"email",type:"email",placeholder:"staff@verso.com",value:s.email,onChange:a=>t({...s,email:a.target.value}),className:(0,f.cn)(e?"bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"display_name",className:e?"text-zinc-300":"text-gray-700",children:"Display Name"}),(0,b.jsx)(x.Input,{id:"display_name",placeholder:"John Doe",value:s.display_name,onChange:a=>t({...s,display_name:a.target.value}),className:(0,f.cn)(e?"bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"role",className:e?"text-zinc-300":"text-gray-700",children:"Role"}),(0,b.jsxs)(A.Select,{value:s.role,onValueChange:a=>t({...s,role:a}),children:[(0,b.jsx)(A.SelectTrigger,{className:(0,f.cn)(e?"bg-zinc-800 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,b.jsx)(A.SelectValue,{})}),(0,b.jsxs)(A.SelectContent,{className:(0,f.cn)(e?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsx)(A.SelectItem,{value:"staff_admin",children:"Admin"}),(0,b.jsx)(A.SelectItem,{value:"staff_ops",children:"Operations"}),(0,b.jsx)(A.SelectItem,{value:"staff_rm",children:"Relationship Manager"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"title",className:e?"text-zinc-300":"text-gray-700",children:"Title (Optional)"}),(0,b.jsx)(x.Input,{id:"title",placeholder:"Senior Operations Manager",value:s.title,onChange:a=>t({...s,title:a.target.value}),className:(0,f.cn)(e?"bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center space-x-2 pt-2 border-t",e?"border-zinc-700":"border-gray-200"),children:[(0,b.jsx)(z.Checkbox,{id:"is_super_admin",checked:s.is_super_admin,onCheckedChange:a=>t({...s,is_super_admin:!0===a})}),(0,b.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,b.jsxs)(y.Label,{htmlFor:"is_super_admin",className:(0,f.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2",e?"text-zinc-300":"text-gray-700"),children:[(0,b.jsx)(G.Shield,{className:"h-4 w-4 text-amber-500"}),"Grant Super Admin Access"]}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Super admins have full access to system settings and can manage all staff."})]})]})]}),M&&(0,b.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg border-2 border-dashed",e?"bg-amber-900/20 border-amber-500/50":"bg-amber-50 border-amber-300"),children:[(0,b.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:[(0,b.jsx)(i.Badge,{className:"bg-amber-500 text-white",children:"DEV MODE"}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm font-medium",e?"text-amber-400":"text-amber-700"),children:"Email couldn't be sent. Use this link directly:"})]}),(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center gap-2 p-2 rounded",e?"bg-zinc-800":"bg-white border border-gray-200"),children:[(0,b.jsx)("code",{className:(0,f.cn)("text-xs flex-1 break-all",e?"text-zinc-300":"text-gray-700"),children:M}),(0,b.jsx)(u.Button,{size:"sm",onClick:()=>{M&&(navigator.clipboard.writeText(M),B.toast.success("Invite URL copied to clipboard!"))},children:"Copy"})]})]}),(0,b.jsxs)(v.DialogFooter,{children:[(0,b.jsx)(u.Button,{variant:"outline",onClick:P,className:(0,f.cn)(e?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:M?"Done":"Cancel"}),!M&&(0,b.jsx)(u.Button,{onClick:O,disabled:K,children:K?"Sending...":"Send Invitation"})]})]})}),(0,b.jsx)(v.Dialog,{open:m,onOpenChange:n,children:(0,b.jsxs)(v.DialogContent,{className:(0,f.cn)("max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",e?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsxs)(v.DialogTitle,{className:e?"text-white":"text-gray-900",children:["Activity Log - ",k?.display_name||k?.email]}),(0,b.jsx)(v.DialogDescription,{className:e?"text-zinc-400":"text-gray-500",children:"Recent activity and login history for this staff member."})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4",children:q?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(H.Clock,{className:(0,f.cn)("h-6 w-6 animate-spin",e?"text-zinc-400":"text-gray-500")})}):o?(0,b.jsxs)(b.Fragment,{children:[o.statistics&&(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:o.statistics.actions_today||0}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"Today"})]}),(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:o.statistics.actions_this_week||0}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"This Week"})]}),(0,b.jsxs)("div",{className:(0,f.cn)("text-center p-3 rounded-lg",e?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",e?"text-white":"text-gray-900"),children:o.statistics.actions_this_month||0}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:"This Month"})]})]}),o.activities&&o.activities.length>0?(0,b.jsx)("div",{className:(0,f.cn)("border rounded-lg divide-y",e?"border-zinc-700 divide-zinc-700":"border-gray-200 divide-gray-200"),children:o.activities.map(a=>(0,b.jsxs)("div",{className:(0,f.cn)("p-3 text-sm",e?"bg-zinc-800/50":"bg-white"),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:(0,f.cn)("font-medium",e?"text-white":"text-gray-900"),children:a.action?.replace(/_/g," ")}),(0,b.jsx)("span",{className:(0,f.cn)("text-xs",e?"text-zinc-400":"text-gray-500"),children:new Date(a.timestamp).toLocaleString()})]}),a.entity_type&&(0,b.jsxs)("p",{className:(0,f.cn)("text-xs mt-1",e?"text-zinc-400":"text-gray-500"),children:[a.entity_type," ",a.entity_id?`(${a.entity_id.slice(0,8)}...)`:""]})]},a.id))}):(0,b.jsx)("p",{className:(0,f.cn)("text-sm text-center py-4",e?"text-zinc-400":"text-gray-500"),children:"No activity recorded for this staff member."})]}):(0,b.jsx)("p",{className:(0,f.cn)("text-sm text-center py-4",e?"text-zinc-400":"text-gray-500"),children:"Failed to load activity data."})}),(0,b.jsx)(v.DialogFooter,{children:(0,b.jsx)(u.Button,{variant:"outline",onClick:()=>n(!1),className:(0,f.cn)(e?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:"Close"})})]})})]})}a.s(["StaffManagementPanel",()=>K],79189);var L=a.i(537412),M=a.i(877918),N=a.i(441278),O=a.i(587143),P=a.i(325866),Q=a.i(816854),R=a.i(908513);let S=(0,q.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var T=a.i(429306);function U({isDark:a=!0}){let[d,e]=(0,c.useState)([]),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!0),l=(0,c.useRef)(h);(0,c.useEffect)(()=>{l.current=h},[h]);let m=(0,c.useCallback)(async()=>{try{k(!0);let a=await fetch("/api/admin/activity-feed"),b=await a.json();b.success&&!l.current&&e(b.data)}catch(a){console.error("Failed to fetch activities:",a)}finally{k(!1)}},[]);return(0,c.useEffect)(()=>{m();let a=setInterval(()=>{l.current||m()},3e4);return()=>clearInterval(a)},[m]),(0,b.jsxs)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(g.CardTitle,{className:a?"text-white":"text-gray-900",children:"Real-Time Activity Feed"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Button,{variant:"outline",size:"sm",onClick:()=>i(!h),className:(0,f.cn)(a?"border-zinc-700 text-zinc-400 hover:text-white":"border-gray-300 text-gray-600 hover:text-gray-900"),children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(T.Play,{className:"h-4 w-4 mr-2"}),"Resume"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S,{className:"h-4 w-4 mr-2"}),"Pause"]})}),(0,b.jsx)(u.Button,{variant:"outline",size:"sm",onClick:()=>m(),className:(0,f.cn)(a?"border-zinc-700 text-zinc-400 hover:text-white":"border-gray-300 text-gray-600 hover:text-gray-900"),children:(0,b.jsx)(R.RefreshCw,{className:"h-4 w-4"})})]})]})}),(0,b.jsxs)(g.CardContent,{children:[j?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(R.RefreshCw,{className:(0,f.cn)("h-8 w-8 animate-spin mx-auto",a?"text-zinc-400":"text-gray-500")}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm mt-2",a?"text-zinc-400":"text-gray-500"),children:"Loading activities..."})]}):(0,b.jsx)(L.ScrollArea,{className:"h-[500px]",children:(0,b.jsxs)("div",{className:"space-y-4",children:[d.map(c=>{var d,e;let g=(d=c.action).includes("create")||d.includes("insert")?N.CheckCircle:d.includes("update")?P.User:d.includes("delete")?M.AlertCircle:d.includes("upload")?Q.FileText:E.Activity;return(0,b.jsxs)("div",{className:(0,f.cn)("flex items-start gap-3 p-3 rounded-lg border transition-colors",a?"bg-zinc-800/50 border-zinc-700 hover:bg-zinc-800":"bg-gray-50 border-gray-200 hover:bg-gray-100"),children:[(0,b.jsx)("div",{className:`mt-1 ${(e=c.action).includes("create")||e.includes("insert")?"text-green-500":e.includes("update")?"text-blue-500":e.includes("delete")?"text-red-500":a?"text-zinc-400":"text-gray-500"}`,children:(0,b.jsx)(g,{className:"h-5 w-5"})}),(0,b.jsx)("div",{className:"flex-1 space-y-1",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm",children:[(0,b.jsx)("span",{className:(0,f.cn)("font-medium",a?"text-white":"text-gray-900"),children:c.actor_name||"System"}),(0,b.jsx)("span",{className:(0,f.cn)("mx-1",a?"text-zinc-400":"text-gray-500"),children:"â€¢"}),(0,b.jsx)("span",{className:a?"text-zinc-400":"text-gray-500",children:c.action.replace(/_/g," ")})]}),(0,b.jsxs)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:[c.entity_type,": ",c.entity_id]})]}),(0,b.jsx)("span",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:(a=>{let b=new Date(a),c=Math.floor((new Date().getTime()-b.getTime())/6e4);if(c<1)return"Just now";if(c<60)return`${c}m ago`;let d=Math.floor(c/60);return d<24?`${d}h ago`:b.toLocaleDateString()})(c.timestamp)})]})})]},c.id)}),0===d.length&&(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(E.Activity,{className:(0,f.cn)("h-8 w-8 mx-auto",a?"text-zinc-400":"text-gray-500")}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm mt-2",a?"text-zinc-400":"text-gray-500"),children:"No recent activity"})]})]})}),(0,b.jsxs)("div",{className:(0,f.cn)("grid grid-cols-4 gap-4 mt-6 pt-6 border-t",a?"border-zinc-700":"border-gray-200"),children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",a?"text-white":"text-gray-900"),children:d.length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:"Total Events"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-500",children:d.filter(a=>a.action.includes("create")||a.action.includes("insert")).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:"Created"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:d.filter(a=>a.action.includes("update")).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:"Updated"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-red-500",children:d.filter(a=>a.action.includes("delete")).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:"Deleted"})]})]}),(0,b.jsx)("div",{className:(0,f.cn)("mt-4 p-3 rounded-lg",a?"bg-zinc-800":"bg-gray-100"),children:(0,b.jsxs)("p",{className:(0,f.cn)("text-xs flex items-center gap-2",a?"text-zinc-400":"text-gray-500"),children:[(0,b.jsx)(O.Info,{className:"h-3 w-3"}),"Real-time updates ",h?"paused":"active",". Auto-refreshes every 30 seconds."]})})]})]})}a.s(["RealTimeActivityFeed",()=>U],640124);var V=a.i(487068),W=a.i(635136);let X=(0,q.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var Y=a.i(724070);function Z({isDark:a=!0}){let[d,e]=(0,c.useState)([]),[h,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)("all"),[o,p]=(0,c.useState)("all"),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[C,D]=(0,c.useState)([]),[G,H]=(0,c.useState)(!1),K=async()=>{try{j(!0);let a=new URLSearchParams;k&&a.set("search",k),"all"!==m&&a.set("role",m),"all"!==o&&a.set("status",o);let b=await fetch(`/api/admin/users?${a.toString()}`);if(b.ok){let a=await b.json();e(a.data?.users||[])}}catch(a){console.error("Failed to fetch users:",a),B.toast.error("Failed to fetch users")}finally{j(!1)}};(0,c.useEffect)(()=>{K()},[m,o]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{K()},300);return()=>clearTimeout(a)},[k]);let L=async()=>{if(q){H(!0);try{let a=await fetch(`/api/admin/users/${q.id}/reset-password`,{method:"POST"});if(a.ok)B.toast.success("Password reset email sent successfully"),z(!1);else{let b=await a.json();B.toast.error(b.error||"Failed to send reset email")}}catch(a){B.toast.error("Failed to send password reset email")}finally{H(!1)}}},M=async a=>{try{let b=await fetch(`/api/admin/users/${a.id}/toggle-lock`,{method:"PATCH"});if(b.ok)B.toast.success(a.is_locked?"User unlocked":"User locked"),K();else{let a=await b.json();B.toast.error(a.error||"Failed to update user")}}catch(a){B.toast.error("Failed to update user status")}},O=async a=>{if(confirm("Are you sure you want to deactivate this user?"))try{let b=await fetch(`/api/admin/users/${a.id}/deactivate`,{method:"PATCH"});if(b.ok)B.toast.success("User deactivated"),K();else{let a=await b.json();B.toast.error(a.error||"Failed to deactivate user")}}catch(a){B.toast.error("Failed to deactivate user")}},Q=async a=>{r(a),t(!0);try{let b=await fetch(`/api/admin/users/${a.id}/activity`);if(b.ok){let a=await b.json();D(a.data?.logs||[])}}catch(a){console.error("Failed to fetch activity:",a)}};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsx)(g.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,b.jsx)(V.Search,{className:(0,f.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",a?"text-zinc-400":"text-gray-400")}),(0,b.jsx)(x.Input,{placeholder:"Search by name or email...",value:k,onChange:a=>l(a.target.value),className:(0,f.cn)("pl-9",a?"bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,b.jsxs)(A.Select,{value:m,onValueChange:n,children:[(0,b.jsx)(A.SelectTrigger,{className:(0,f.cn)("w-40",a?"bg-zinc-800 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,b.jsx)(A.SelectValue,{placeholder:"Role"})}),(0,b.jsxs)(A.SelectContent,{className:(0,f.cn)(a?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsx)(A.SelectItem,{value:"all",children:"All Roles"}),(0,b.jsx)(A.SelectItem,{value:"investor",children:"Investor"}),(0,b.jsx)(A.SelectItem,{value:"staff_admin",children:"Staff Admin"}),(0,b.jsx)(A.SelectItem,{value:"staff_ops",children:"Staff Ops"}),(0,b.jsx)(A.SelectItem,{value:"staff_rm",children:"Staff RM"})]})]}),(0,b.jsxs)(A.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(A.SelectTrigger,{className:(0,f.cn)("w-40",a?"bg-zinc-800 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,b.jsx)(A.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(A.SelectContent,{className:(0,f.cn)(a?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsx)(A.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(A.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(A.SelectItem,{value:"inactive",children:"Inactive"}),(0,b.jsx)(A.SelectItem,{value:"locked",children:"Locked"})]})]}),(0,b.jsx)(u.Button,{variant:"outline",size:"icon",onClick:K,className:(0,f.cn)(a?"border-zinc-700 text-zinc-400 hover:text-white":"border-gray-300 text-gray-500 hover:text-gray-900"),children:(0,b.jsx)(R.RefreshCw,{className:`h-4 w-4 ${h?"animate-spin":""}`})})]})})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(a?"border-zinc-700 hover:bg-transparent":"border-gray-200 hover:bg-transparent"),children:[(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"User"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Role"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Status"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Last Sign In"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Failed Logins"}),(0,b.jsx)(w.TableHead,{className:(0,f.cn)("text-right",a?"text-zinc-400":"text-gray-500"),children:"Actions"})]})}),(0,b.jsx)(w.TableBody,{children:h?[void 0,void 0,void 0,void 0,void 0].map((c,d)=>(0,b.jsxs)(w.TableRow,{className:a?"border-zinc-700":"border-gray-200",children:[(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("div",{className:(0,f.cn)("h-10 rounded animate-pulse",a?"bg-zinc-800":"bg-gray-200")})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("div",{className:(0,f.cn)("h-6 w-20 rounded animate-pulse",a?"bg-zinc-800":"bg-gray-200")})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("div",{className:(0,f.cn)("h-6 w-16 rounded animate-pulse",a?"bg-zinc-800":"bg-gray-200")})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("div",{className:(0,f.cn)("h-4 w-24 rounded animate-pulse",a?"bg-zinc-800":"bg-gray-200")})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("div",{className:(0,f.cn)("h-4 w-8 rounded animate-pulse",a?"bg-zinc-800":"bg-gray-200")})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("div",{className:(0,f.cn)("h-8 w-8 rounded animate-pulse ml-auto",a?"bg-zinc-800":"bg-gray-200")})})]},d)):0===d.length?(0,b.jsx)(w.TableRow,{className:a?"border-zinc-700":"border-gray-200",children:(0,b.jsx)(w.TableCell,{colSpan:6,className:(0,f.cn)("text-center py-8",a?"text-zinc-400":"text-gray-500"),children:"No users found"})}):d.map(c=>(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(a?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,f.cn)("h-9 w-9 rounded-full flex items-center justify-center",a?"bg-zinc-800":"bg-gray-100"),children:(0,b.jsx)(P.User,{className:(0,f.cn)("h-4 w-4",a?"text-zinc-400":"text-gray-500")})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("font-medium",a?"text-white":"text-gray-900"),children:c.display_name||"N/A"}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:c.email})]})]})}),(0,b.jsx)(w.TableCell,{children:(a=>{switch(a){case"investor":return(0,b.jsx)(i.Badge,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Investor"});case"staff_admin":return(0,b.jsx)(i.Badge,{className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:"Staff Admin"});case"staff_ops":return(0,b.jsx)(i.Badge,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"Staff Ops"});case"staff_rm":return(0,b.jsx)(i.Badge,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:"Staff RM"});default:return(0,b.jsx)(i.Badge,{variant:"outline",children:a})}})(c.role)}),(0,b.jsx)(w.TableCell,{children:c.is_locked?(0,b.jsx)(i.Badge,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Locked"}):"active"===c.status?(0,b.jsx)(i.Badge,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:"Active"}):(0,b.jsx)(i.Badge,{className:(0,f.cn)("bg-zinc-500/20 border-zinc-500/30",a?"text-zinc-400":"text-zinc-600"),children:c.status})}),(0,b.jsx)(w.TableCell,{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:c.last_sign_in_at?new Date(c.last_sign_in_at).toLocaleDateString():"Never"}),(0,b.jsx)(w.TableCell,{children:c.failed_login_attempts>0?(0,b.jsx)(i.Badge,{variant:"outline",className:`${c.failed_login_attempts>=5?"border-red-500/50 text-red-400":"border-amber-500/50 text-amber-400"}`,children:c.failed_login_attempts}):(0,b.jsx)("span",{className:a?"text-zinc-500":"text-gray-400",children:"0"})}),(0,b.jsx)(w.TableCell,{className:"text-right",children:(0,b.jsxs)(J.DropdownMenu,{children:[(0,b.jsx)(J.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(u.Button,{variant:"ghost",size:"icon",className:(0,f.cn)("h-8 w-8",a?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-900"),children:(0,b.jsx)(F.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(J.DropdownMenuContent,{align:"end",className:(0,f.cn)(a?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsx)(J.DropdownMenuLabel,{className:a?"text-zinc-400":"text-gray-500",children:"Actions"}),(0,b.jsxs)(J.DropdownMenuItem,{onClick:()=>Q(c),className:(0,f.cn)(a?"text-zinc-300 focus:text-white focus:bg-zinc-700":"text-gray-700 focus:text-gray-900 focus:bg-gray-100"),children:[(0,b.jsx)(E.Activity,{className:"h-4 w-4 mr-2"}),"View Activity"]}),(0,b.jsxs)(J.DropdownMenuItem,{onClick:()=>{r(c),z(!0)},className:(0,f.cn)(a?"text-zinc-300 focus:text-white focus:bg-zinc-700":"text-gray-700 focus:text-gray-900 focus:bg-gray-100"),children:[(0,b.jsx)(W.KeyRound,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),(0,b.jsx)(J.DropdownMenuSeparator,{className:a?"bg-zinc-700":"bg-gray-200"}),c.is_locked?(0,b.jsxs)(J.DropdownMenuItem,{onClick:()=>M(c),className:(0,f.cn)("text-emerald-400",a?"focus:text-emerald-300 focus:bg-zinc-700":"focus:text-emerald-500 focus:bg-gray-100"),children:[(0,b.jsx)(N.CheckCircle,{className:"h-4 w-4 mr-2"}),"Unlock Account"]}):(0,b.jsxs)(J.DropdownMenuItem,{onClick:()=>M(c),className:(0,f.cn)("text-amber-400",a?"focus:text-amber-300 focus:bg-zinc-700":"focus:text-amber-500 focus:bg-gray-100"),children:[(0,b.jsx)(X,{className:"h-4 w-4 mr-2"}),"Lock Account"]}),(0,b.jsxs)(J.DropdownMenuItem,{onClick:()=>O(c),className:(0,f.cn)("text-red-400",a?"focus:text-red-300 focus:bg-zinc-700":"focus:text-red-500 focus:bg-gray-100"),children:[(0,b.jsx)(X,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})})]},c.id))})]})})}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("p",{className:(0,f.cn)("text-2xl font-bold",a?"text-white":"text-gray-900"),children:d.length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:"Total Users"})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:d.filter(a=>"active"===a.status&&!a.is_locked).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:"Active"})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-red-400",children:d.filter(a=>a.is_locked).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:"Locked"})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-white/10":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-amber-400",children:d.filter(a=>a.failed_login_attempts>0).length}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:"Failed Logins"})]})})]}),(0,b.jsx)(v.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(v.DialogContent,{className:(0,f.cn)(a?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{className:a?"text-white":"text-gray-900",children:"Reset Password"}),(0,b.jsxs)(v.DialogDescription,{className:a?"text-zinc-400":"text-gray-500",children:["Send a password reset email to ",q?.email,"?"]})]}),(0,b.jsxs)("div",{className:"py-4",children:[(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center gap-3 p-3 rounded-lg",a?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)(I.Mail,{className:(0,f.cn)("h-5 w-5",a?"text-zinc-400":"text-gray-500")}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("font-medium",a?"text-white":"text-gray-900"),children:q?.display_name||"User"}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:q?.email})]})]}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm mt-4",a?"text-zinc-400":"text-gray-500"),children:"An email with password reset instructions will be sent to this address."})]}),(0,b.jsxs)(v.DialogFooter,{children:[(0,b.jsx)(u.Button,{variant:"outline",onClick:()=>z(!1),className:(0,f.cn)(a?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:"Cancel"}),(0,b.jsx)(u.Button,{onClick:L,disabled:G,children:G?"Sending...":"Send Reset Email"})]})]})}),(0,b.jsx)(v.Dialog,{open:s,onOpenChange:t,children:(0,b.jsxs)(v.DialogContent,{className:(0,f.cn)("max-w-2xl",a?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{className:a?"text-white":"text-gray-900",children:"User Activity"}),(0,b.jsxs)(v.DialogDescription,{className:a?"text-zinc-400":"text-gray-500",children:["Recent activity for ",q?.display_name||q?.email]})]}),(0,b.jsx)("div",{className:"py-4 max-h-[400px] overflow-y-auto",children:0===C.length?(0,b.jsxs)("div",{className:(0,f.cn)("text-center py-8",a?"text-zinc-400":"text-gray-500"),children:[(0,b.jsx)(E.Activity,{className:"h-8 w-8 mx-auto mb-2"}),(0,b.jsx)("p",{children:"No activity logs found"})]}):(0,b.jsx)("div",{className:"space-y-3",children:C.map(c=>(0,b.jsxs)("div",{className:(0,f.cn)("flex items-start gap-3 p-3 rounded-lg",a?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)(Y.Calendar,{className:(0,f.cn)("h-4 w-4 mt-0.5",a?"text-zinc-400":"text-gray-500")}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:(0,f.cn)("text-sm",a?"text-white":"text-gray-900"),children:c.action}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:new Date(c.timestamp).toLocaleString()}),c.ip_address&&(0,b.jsxs)("p",{className:(0,f.cn)("text-xs mt-1",a?"text-zinc-500":"text-gray-400"),children:["IP: ",c.ip_address]})]})]},c.id))})}),(0,b.jsx)(v.DialogFooter,{children:(0,b.jsx)(u.Button,{variant:"outline",onClick:()=>t(!1),className:(0,f.cn)(a?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:"Close"})})]})})]})}a.s(["UserAccountManagement",()=>Z],10469);var $=a.i(425622),_=a.i(3321);let aa=[{id:"investors",title:"Investors",description:"Export all investor data including KYC status, contact info, and AUM",icon:l.Users,iconColor:"text-blue-400",formats:["csv","xlsx"],hasDateRange:!1,hasFilters:!0},{id:"subscriptions",title:"Subscriptions",description:"Export subscription data with commitments, funding status, and NAV",icon:j.DollarSign,iconColor:"text-emerald-400",formats:["csv","xlsx"],hasDateRange:!0},{id:"deals",title:"Deals",description:"Export deal pipeline data with status, values, and participation",icon:n.Briefcase,iconColor:"text-purple-400",formats:["csv","xlsx"],hasDateRange:!1},{id:"fee-events",title:"Fee Events",description:"Export fee calculations and revenue data by period",icon:j.DollarSign,iconColor:"text-amber-400",formats:["csv","xlsx"],hasDateRange:!0},{id:"audit-logs",title:"Audit Logs",description:"Export compliance audit trail with user actions and timestamps",icon:E.Activity,iconColor:"text-red-400",formats:["csv","xlsx","json"],hasDateRange:!0},{id:"financial-summary",title:"Financial Summary",description:"Generate comprehensive financial report with AUM and revenue breakdown",icon:Q.FileText,iconColor:"text-cyan-400",formats:["xlsx","pdf"],hasDateRange:!0}];function ab({isDark:a=!0}){let[d,e]=(0,c.useState)(null),[h,j]=(0,c.useState)("csv"),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)("all"),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)([]),v=aa.find(a=>a.id===d),w=async()=>{if(!d)return void B.toast.error("Please select an export type");r(!0);try{let a=new URLSearchParams({type:d,format:h});k&&a.set("from",k),m&&a.set("to",m),"all"!==o&&a.set("kyc_status",o);let b=await fetch(`/api/admin/export?${a.toString()}`);if(b.ok){let a=await b.blob(),c=window.URL.createObjectURL(a),e=document.createElement("a");e.href=c,e.download=`${d}-export-${new Date().toISOString().split("T")[0]}.${h}`,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(c),e.remove(),B.toast.success("Export downloaded successfully"),t(a=>[{id:Date.now().toString(),type:d,timestamp:new Date().toISOString(),status:"completed"},...a.slice(0,4)])}else{let a=await b.json();B.toast.error(a.error||"Export failed")}}catch(a){B.toast.error("Failed to generate export")}finally{r(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:aa.map(c=>(0,b.jsx)(g.Card,{onClick:()=>{e(c.id),j(c.formats[0])},className:(0,f.cn)("cursor-pointer transition-colors",d===c.id?a?"border-white/30 bg-white/10":"border-blue-500 bg-blue-50":a?"border-zinc-700 bg-zinc-800/50 hover:border-zinc-600 hover:bg-zinc-800":"border-gray-200 bg-white hover:border-gray-300 hover:bg-gray-50 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4 text-left",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(c.icon,{className:`h-5 w-5 ${c.iconColor}`}),(0,b.jsx)("span",{className:(0,f.cn)("font-medium",a?"text-white":"text-gray-900"),children:c.title})]}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs line-clamp-2",a?"text-zinc-400":"text-gray-500"),children:c.description}),(0,b.jsx)("div",{className:"flex items-center gap-2 mt-3",children:c.formats.map(c=>(0,b.jsx)(i.Badge,{variant:"outline",className:(0,f.cn)("text-xs",a?"border-zinc-600 text-zinc-400":"border-gray-300 text-gray-500"),children:c.toUpperCase()},c))})]})},c.id))}),v&&(0,b.jsxs)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsx)(g.CardHeader,{className:(0,f.cn)("pb-4 border-b",a?"border-zinc-700":"border-gray-200"),children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(v.icon,{className:`h-6 w-6 ${v.iconColor}`}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(g.CardTitle,{className:(0,f.cn)("text-lg",a?"text-white":"text-gray-900"),children:["Export ",v.title]}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:v.description})]})]})}),(0,b.jsxs)(g.CardContent,{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{className:a?"text-zinc-400":"text-gray-600",children:"Format"}),(0,b.jsxs)(A.Select,{value:h,onValueChange:j,children:[(0,b.jsx)(A.SelectTrigger,{className:(0,f.cn)(a?"bg-zinc-900 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,b.jsx)(A.SelectValue,{})}),(0,b.jsx)(A.SelectContent,{className:(0,f.cn)(a?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:v.formats.map(a=>(0,b.jsx)(A.SelectItem,{value:a,children:a.toUpperCase()},a))})]})]}),v.hasDateRange&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{className:a?"text-zinc-400":"text-gray-600",children:"From Date"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(Y.Calendar,{className:(0,f.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",a?"text-zinc-400":"text-gray-400")}),(0,b.jsx)(x.Input,{type:"date",value:k,onChange:a=>l(a.target.value),className:(0,f.cn)("pl-9",a?"bg-zinc-900 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900")})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{className:a?"text-zinc-400":"text-gray-600",children:"To Date"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(Y.Calendar,{className:(0,f.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",a?"text-zinc-400":"text-gray-400")}),(0,b.jsx)(x.Input,{type:"date",value:m,onChange:a=>n(a.target.value),className:(0,f.cn)("pl-9",a?"bg-zinc-900 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900")})]})]})]}),v.hasFilters&&"investors"===d&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{className:a?"text-zinc-400":"text-gray-600",children:"KYC Status"}),(0,b.jsxs)(A.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(A.SelectTrigger,{className:(0,f.cn)(a?"bg-zinc-900 border-zinc-700 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,b.jsx)(A.SelectValue,{})}),(0,b.jsxs)(A.SelectContent,{className:(0,f.cn)(a?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsx)(A.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(A.SelectItem,{value:"approved",children:"Approved"}),(0,b.jsx)(A.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(A.SelectItem,{value:"expired",children:"Expired"})]})]})]})]}),(0,b.jsx)("div",{className:(0,f.cn)("pt-4 border-t",a?"border-zinc-700":"border-gray-200"),children:(0,b.jsx)(u.Button,{onClick:w,disabled:q,className:"w-full sm:w-auto",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(_.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)($.Download,{className:"h-4 w-4 mr-2"}),"Download Export"]})})})]})]}),s.length>0&&(0,b.jsxs)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:(0,f.cn)("text-sm font-medium",a?"text-zinc-400":"text-gray-600"),children:"Recent Exports"})}),(0,b.jsx)(g.CardContent,{className:"space-y-2",children:s.map(c=>{let d=aa.find(a=>a.id===c.type);return(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center justify-between p-3 rounded-lg border",a?"bg-zinc-800/50 border-zinc-700":"bg-gray-50 border-gray-200"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[d&&(0,b.jsx)(d.icon,{className:`h-4 w-4 ${d.iconColor}`}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,f.cn)("text-sm font-medium",a?"text-white":"text-gray-900"),children:d?.title||c.type}),(0,b.jsx)("p",{className:(0,f.cn)("text-xs",a?"text-zinc-400":"text-gray-500"),children:new Date(c.timestamp).toLocaleString()})]})]}),(0,b.jsx)(i.Badge,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:"Completed"})]},c.id)})})]})]})}a.s(["DataExportPanel",()=>ab],182154);var ac=a.i(778541),ad=a.i(562879),ae=a.i(625473),af=a.i(838086),ag=a.i(264890);function ah({isDark:a=!0}){let[d,e]=(0,c.useState)([]),[h,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),q=async()=>{try{l(!0);let[a,b]=await Promise.all([fetch("/api/admin/workflows"),fetch("/api/admin/workflows/runs?limit=20")]);if(a.ok){let b=await a.json();e(b.data?.workflows||[])}if(b.ok){let a=await b.json();j(a.data?.runs||[])}}catch(a){console.error("Failed to fetch workflow data:",a)}finally{l(!1)}};(0,c.useEffect)(()=>{q();let a=setInterval(q,6e4);return()=>clearInterval(a)},[]);let r=a=>a?a<1e3?`${a}ms`:a<6e4?`${(a/1e3).toFixed(1)}s`:`${(a/6e4).toFixed(1)}m`:"N/A",s=d.length>0?d.reduce((a,b)=>a+b.success_rate,0)/d.length:100,t=h.filter(a=>"failed"===a.status).length,x=h.filter(a=>"completed"===a.status).length;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(E.Activity,{className:(0,f.cn)("h-4 w-4",a?"text-zinc-400":"text-gray-500")}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"Overall Health"})]}),(0,b.jsxs)("div",{className:"flex items-end gap-2",children:[(0,b.jsxs)("span",{className:`text-2xl font-bold ${s>=90?"text-emerald-400":s>=70?"text-amber-400":"text-red-400"}`,children:[s.toFixed(0),"%"]}),(0,b.jsx)(ac.Progress,{value:s,className:(0,f.cn)("h-2 flex-1",a?"bg-zinc-700":"bg-gray-200")})]})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(ad.Zap,{className:(0,f.cn)("h-4 w-4",a?"text-zinc-400":"text-gray-500")}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"Active Workflows"})]}),(0,b.jsxs)("span",{className:(0,f.cn)("text-2xl font-bold",a?"text-white":"text-gray-900"),children:[d.filter(a=>a.enabled).length,"/",d.length]})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(N.CheckCircle,{className:"h-4 w-4 text-emerald-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"Recent Success"})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-emerald-400",children:x})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(ae.XCircle,{className:"h-4 w-4 text-red-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"Recent Failed"})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-red-400",children:t})]})})]}),(0,b.jsxs)(g.Card,{className:(0,f.cn)("overflow-hidden",a?"border-zinc-700":"border-gray-200 shadow-sm"),children:[(0,b.jsxs)(g.CardHeader,{className:(0,f.cn)("px-4 py-3 flex flex-row items-center justify-between space-y-0 border-b",a?"border-zinc-700":"border-gray-200"),children:[(0,b.jsx)(g.CardTitle,{className:(0,f.cn)("font-medium text-base",a?"text-white":"text-gray-900"),children:"Workflow Status"}),(0,b.jsxs)(u.Button,{variant:"outline",size:"sm",onClick:q,className:(0,f.cn)(a?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:[(0,b.jsx)(R.RefreshCw,{className:`h-4 w-4 mr-2 ${k?"animate-spin":""}`}),"Refresh"]})]}),(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(a?"border-zinc-700 hover:bg-transparent":"border-gray-200 hover:bg-transparent"),children:[(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Workflow"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Category"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Success Rate"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Total Runs"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Last Run"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Avg Duration"}),(0,b.jsx)(w.TableHead,{className:(0,f.cn)("text-right",a?"text-zinc-400":"text-gray-500"),children:"Status"})]})}),(0,b.jsx)(w.TableBody,{children:k?[void 0,void 0,void 0,void 0,void 0].map((c,d)=>(0,b.jsx)(w.TableRow,{className:a?"border-zinc-700":"border-gray-200",children:[...Array(7)].map((c,d)=>(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("div",{className:(0,f.cn)("h-5 rounded animate-pulse",a?"bg-zinc-800":"bg-gray-200")})},d))},d)):0===d.length?(0,b.jsx)(w.TableRow,{className:a?"border-zinc-700":"border-gray-200",children:(0,b.jsx)(w.TableCell,{colSpan:7,className:(0,f.cn)("text-center py-8",a?"text-zinc-400":"text-gray-500"),children:"No workflows configured"})}):d.map(c=>(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(a?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ad.Zap,{className:(0,f.cn)("h-4 w-4",a?"text-zinc-400":"text-gray-500")}),(0,b.jsx)("span",{className:(0,f.cn)("font-medium",a?"text-white":"text-gray-900"),children:c.title})]})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("span",{className:`text-sm ${(b=>{switch(b){case"documents":return"text-blue-400";case"compliance":return"text-purple-400";case"communications":return"text-amber-400";case"data_processing":return"text-emerald-400";case"multi_step":return"text-red-400";default:return a?"text-zinc-400":"text-gray-500"}})(c.category)}`,children:c.category.replace(/_/g," ")})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ac.Progress,{value:c.success_rate,className:(0,f.cn)("h-2 w-16",a?"bg-zinc-700":"bg-gray-200")}),(0,b.jsxs)("span",{className:`text-sm ${c.success_rate>=90?"text-emerald-400":c.success_rate>=70?"text-amber-400":"text-red-400"}`,children:[c.success_rate.toFixed(0),"%"]})]})}),(0,b.jsx)(w.TableCell,{className:a?"text-zinc-300":"text-gray-700",children:c.total_runs}),(0,b.jsx)(w.TableCell,{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:c.last_run_at?new Date(c.last_run_at).toLocaleString():"Never"}),(0,b.jsx)(w.TableCell,{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:r(c.avg_duration_ms)}),(0,b.jsx)(w.TableCell,{className:"text-right",children:(0,b.jsx)(i.Badge,{className:(0,f.cn)(c.enabled?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":a?"bg-zinc-500/20 text-zinc-400 border-zinc-500/30":"bg-gray-100 text-gray-500 border-gray-300"),children:c.enabled?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N.CheckCircle,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ae.XCircle,{className:"h-3 w-3 mr-1"}),"Inactive"]})})})]},c.key))})]})})]}),(0,b.jsxs)(g.Card,{className:(0,f.cn)("overflow-hidden",a?"border-zinc-700":"border-gray-200 shadow-sm"),children:[(0,b.jsx)(g.CardHeader,{className:(0,f.cn)("px-4 py-3 border-b",a?"border-zinc-700":"border-gray-200"),children:(0,b.jsx)(g.CardTitle,{className:(0,f.cn)("font-medium text-base",a?"text-white":"text-gray-900"),children:"Recent Executions"})}),(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(a?"border-zinc-700 hover:bg-transparent":"border-gray-200 hover:bg-transparent"),children:[(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Workflow"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Status"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Started"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Duration"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Trigger"}),(0,b.jsx)(w.TableHead,{className:(0,f.cn)("text-right",a?"text-zinc-400":"text-gray-500"),children:"Actions"})]})}),(0,b.jsx)(w.TableBody,{children:0===h.length?(0,b.jsx)(w.TableRow,{className:a?"border-zinc-700":"border-gray-200",children:(0,b.jsx)(w.TableCell,{colSpan:6,className:(0,f.cn)("text-center py-8",a?"text-zinc-400":"text-gray-500"),children:"No recent workflow runs"})}):h.map(c=>(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(a?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,b.jsx)(w.TableCell,{className:a?"text-white":"text-gray-900",children:c.workflow_key}),(0,b.jsx)(w.TableCell,{children:"completed"===c.status?(0,b.jsxs)(i.Badge,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:[(0,b.jsx)(N.CheckCircle,{className:"h-3 w-3 mr-1"}),"Completed"]}):"failed"===c.status?(0,b.jsxs)(i.Badge,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:[(0,b.jsx)(ae.XCircle,{className:"h-3 w-3 mr-1"}),"Failed"]}):(0,b.jsxs)(i.Badge,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:[(0,b.jsx)(H.Clock,{className:"h-3 w-3 mr-1"}),"Running"]})}),(0,b.jsx)(w.TableCell,{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:new Date(c.started_at).toLocaleString()}),(0,b.jsx)(w.TableCell,{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:r(c.duration_ms)}),(0,b.jsx)(w.TableCell,{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:c.trigger_type}),(0,b.jsx)(w.TableCell,{className:"text-right",children:(0,b.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:()=>{n(c),p(!0)},className:(0,f.cn)(a?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-900"),children:(0,b.jsx)(ag.Eye,{className:"h-4 w-4"})})})]},c.id))})]})})]}),(0,b.jsx)(v.Dialog,{open:o,onOpenChange:p,children:(0,b.jsxs)(v.DialogContent,{className:(0,f.cn)("max-w-2xl",a?"bg-zinc-900 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{className:a?"text-white":"text-gray-900",children:"Workflow Run Details"}),(0,b.jsxs)(v.DialogDescription,{className:a?"text-zinc-400":"text-gray-500",children:[m?.workflow_key," - ",m?.id]})]}),m&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:(0,f.cn)("p-3 rounded-lg",a?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs mb-1",a?"text-zinc-400":"text-gray-500"),children:"Status"}),(0,b.jsx)("p",{className:`font-medium ${"completed"===m.status?"text-emerald-400":"failed"===m.status?"text-red-400":"text-amber-400"}`,children:m.status})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-3 rounded-lg",a?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs mb-1",a?"text-zinc-400":"text-gray-500"),children:"Duration"}),(0,b.jsx)("p",{className:(0,f.cn)("font-medium",a?"text-white":"text-gray-900"),children:r(m.duration_ms)})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-3 rounded-lg",a?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs mb-1",a?"text-zinc-400":"text-gray-500"),children:"Started At"}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm",a?"text-white":"text-gray-900"),children:new Date(m.started_at).toLocaleString()})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-3 rounded-lg",a?"bg-zinc-800":"bg-gray-100"),children:[(0,b.jsx)("p",{className:(0,f.cn)("text-xs mb-1",a?"text-zinc-400":"text-gray-500"),children:"Trigger Type"}),(0,b.jsx)("p",{className:(0,f.cn)("font-medium",a?"text-white":"text-gray-900"),children:m.trigger_type})]})]}),m.error_message&&(0,b.jsxs)("div",{className:(0,f.cn)("p-4 rounded-lg border",a?"bg-red-500/10 border-red-500/30":"bg-red-50 border-red-200"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(af.AlertTriangle,{className:"h-4 w-4 text-red-400"}),(0,b.jsx)("span",{className:"text-red-400 font-medium",children:"Error Message"})]}),(0,b.jsx)("pre",{className:"text-sm text-red-300 whitespace-pre-wrap overflow-auto max-h-[200px]",children:m.error_message})]})]}),(0,b.jsx)(v.DialogFooter,{children:(0,b.jsx)(u.Button,{variant:"outline",onClick:()=>p(!1),className:(0,f.cn)(a?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:"Close"})})]})})]})}a.s(["WorkflowMonitoring",()=>ah],325e3);var ai=a.i(497412),aj=a.i(599499);function ak({isDark:a=!0}){let[d,h]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)("all"),n=async()=>{try{k(!0);let a=await fetch("/api/admin/compliance/alerts");if(a.ok){let b=await a.json();h(b.data?.alerts||[])}}catch(a){console.error("Failed to fetch compliance alerts:",a)}finally{k(!1)}};(0,c.useEffect)(()=>{n()},[]);let o=d.filter(a=>"all"===l||a.type===l),p=d.filter(a=>"critical"===a.severity).length,q=d.filter(a=>"high"===a.severity).length,r=d.filter(a=>"kyc_expiry"===a.type).length,s=d.filter(a=>"aml_flag"===a.type).length;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(af.AlertTriangle,{className:"h-4 w-4 text-red-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"Critical"})]}),(0,b.jsx)("span",{className:(0,f.cn)("text-2xl font-bold",p>0?"text-red-400":a?"text-zinc-500":"text-gray-400"),children:p})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(H.Clock,{className:"h-4 w-4 text-amber-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"High Priority"})]}),(0,b.jsx)("span",{className:(0,f.cn)("text-2xl font-bold",q>0?"text-amber-400":a?"text-zinc-500":"text-gray-400"),children:q})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(G.Shield,{className:"h-4 w-4 text-blue-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"KYC Expiring"})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-blue-400",children:r})]})}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(D.UserX,{className:"h-4 w-4 text-purple-400"}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"AML Flags"})]}),(0,b.jsx)("span",{className:(0,f.cn)("text-2xl font-bold",s>0?"text-purple-400":a?"text-zinc-500":"text-gray-400"),children:s})]})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:["all","kyc_expiry","accreditation_expiry","unsigned_doc","aml_flag"].map(c=>(0,b.jsx)(u.Button,{variant:l===c?"default":"outline",size:"sm",onClick:()=>m(c),className:(0,f.cn)(l!==c&&(a?"border-zinc-700 text-zinc-400 hover:text-white":"border-gray-300 text-gray-600 hover:text-gray-900")),children:"all"===c?"All":"kyc_expiry"===c?"KYC":"accreditation_expiry"===c?"Accreditation":"unsigned_doc"===c?"Documents":"AML"},c))}),(0,b.jsxs)(u.Button,{variant:"outline",size:"sm",onClick:n,className:(0,f.cn)(a?"border-zinc-700 text-zinc-400":"border-gray-300 text-gray-600"),children:[(0,b.jsx)(R.RefreshCw,{className:`h-4 w-4 mr-2 ${j?"animate-spin":""}`}),"Refresh"]})]}),(0,b.jsx)(g.Card,{className:(0,f.cn)(a?"bg-zinc-900/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(a?"border-zinc-700 hover:bg-transparent":"border-gray-200 hover:bg-transparent"),children:[(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Type"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Investor"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Details"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Due Date"}),(0,b.jsx)(w.TableHead,{className:a?"text-zinc-400":"text-gray-500",children:"Severity"}),(0,b.jsx)(w.TableHead,{className:(0,f.cn)("text-right",a?"text-zinc-400":"text-gray-500"),children:"Action"})]})}),(0,b.jsx)(w.TableBody,{children:j?[void 0,void 0,void 0,void 0,void 0].map((c,d)=>(0,b.jsx)(w.TableRow,{className:a?"border-zinc-700":"border-gray-200",children:[...Array(6)].map((c,d)=>(0,b.jsx)(w.TableCell,{children:(0,b.jsx)("div",{className:(0,f.cn)("h-5 rounded animate-pulse",a?"bg-zinc-800":"bg-gray-200")})},d))},d)):0===o.length?(0,b.jsx)(w.TableRow,{className:a?"border-zinc-700":"border-gray-200",children:(0,b.jsxs)(w.TableCell,{colSpan:6,className:"text-center py-8",children:[(0,b.jsx)(N.CheckCircle,{className:"h-8 w-8 mx-auto text-emerald-400 mb-2"}),(0,b.jsx)("p",{className:(0,f.cn)("font-medium",a?"text-white":"text-gray-900"),children:"All Clear"}),(0,b.jsx)("p",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:"No compliance alerts at this time"})]})}):o.map(c=>{var d;let g=(a=>{switch(a){case"kyc_expiry":return G.Shield;case"accreditation_expiry":return D.UserX;case"unsigned_doc":return aj.FileWarning;default:return af.AlertTriangle}})(c.type);return(0,b.jsxs)(w.TableRow,{className:(0,f.cn)(a?"border-zinc-700 hover:bg-zinc-800/50":"border-gray-200 hover:bg-gray-50"),children:[(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g,{className:`h-4 w-4 ${"critical"===c.severity?"text-red-400":"high"===c.severity?"text-amber-400":"text-blue-400"}`}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-white":"text-gray-900"),children:(a=>{switch(a){case"kyc_expiry":return"KYC Expiring";case"accreditation_expiry":return"Accreditation Expiring";case"unsigned_doc":return"Unsigned Document";case"aml_flag":return"AML Flag";default:return a}})(c.type)})]})}),(0,b.jsx)(w.TableCell,{children:(0,b.jsx)(ai.default,{href:`/versotech/staff/investors/${c.investor_id}`,className:"text-blue-400 hover:text-blue-300",children:c.investor_name})}),(0,b.jsx)(w.TableCell,{className:(0,f.cn)("text-sm max-w-xs truncate",a?"text-zinc-300":"text-gray-700"),children:c.details}),(0,b.jsx)(w.TableCell,{children:c.due_date?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Y.Calendar,{className:(0,f.cn)("h-3 w-3",a?"text-zinc-400":"text-gray-500")}),(0,b.jsx)("span",{className:(0,f.cn)("text-sm",a?"text-zinc-400":"text-gray-500"),children:new Date(c.due_date).toLocaleDateString()}),void 0!==c.days_until_due&&(0,b.jsx)(i.Badge,{variant:"outline",className:`text-xs ${void 0===(d=c.days_until_due)?a?"text-zinc-400":"text-gray-500":d<=7?"text-red-400":d<=30?"text-amber-400":"text-emerald-400"} border-current`,children:c.days_until_due<=0?"Overdue":`${c.days_until_due}d`})]}):(0,b.jsx)("span",{className:a?"text-zinc-500":"text-gray-400",children:"-"})}),(0,b.jsx)(w.TableCell,{children:(c=>{switch(c){case"critical":return(0,b.jsx)(i.Badge,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Critical"});case"high":return(0,b.jsx)(i.Badge,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:"High"});case"medium":return(0,b.jsx)(i.Badge,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Medium"});case"low":return(0,b.jsx)(i.Badge,{className:(0,f.cn)("border",a?"bg-zinc-500/20 text-zinc-400 border-zinc-500/30":"bg-gray-100 text-gray-500 border-gray-300"),children:"Low"});default:return(0,b.jsx)(i.Badge,{variant:"outline",children:c})}})(c.severity)}),(0,b.jsx)(w.TableCell,{className:"text-right",children:(0,b.jsx)(u.Button,{variant:"ghost",size:"sm",asChild:!0,className:(0,f.cn)(a?"text-zinc-400 hover:text-white":"text-gray-500 hover:text-gray-900"),children:(0,b.jsxs)(ai.default,{href:`/versotech/staff/investors/${c.investor_id}`,children:["View",(0,b.jsx)(e.ChevronRight,{className:"h-4 w-4 ml-1"})]})})})]},c.id)})})]})})}),(0,b.jsxs)(g.Card,{className:(0,f.cn)(a?"bg-zinc-800/50 border-zinc-700":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)(g.CardTitle,{className:(0,f.cn)("text-base font-medium flex items-center gap-2",a?"text-white":"text-gray-900"),children:[(0,b.jsx)(Y.Calendar,{className:(0,f.cn)("h-4 w-4",a?"text-zinc-400":"text-gray-500")}),"KYC Expiry Timeline"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:(0,f.cn)("p-3 rounded-lg border",a?"bg-red-500/10 border-red-500/30":"bg-red-50 border-red-200"),children:[(0,b.jsx)("p",{className:"text-red-400 text-sm font-medium",children:"Next 7 Days"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-400",children:d.filter(a=>"kyc_expiry"===a.type&&7>=(a.days_until_due||0)).length})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-3 rounded-lg border",a?"bg-amber-500/10 border-amber-500/30":"bg-amber-50 border-amber-200"),children:[(0,b.jsx)("p",{className:"text-amber-400 text-sm font-medium",children:"Next 30 Days"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-amber-400",children:d.filter(a=>"kyc_expiry"===a.type&&(a.days_until_due||0)>7&&30>=(a.days_until_due||0)).length})]}),(0,b.jsxs)("div",{className:(0,f.cn)("p-3 rounded-lg border",a?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200"),children:[(0,b.jsx)("p",{className:"text-blue-400 text-sm font-medium",children:"Next 90 Days"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:d.filter(a=>"kyc_expiry"===a.type&&(a.days_until_due||0)>30&&90>=(a.days_until_due||0)).length})]})]})})]})]})}function al({security:a,complianceForecast:c}){let d=[{title:"Failed Logins",value:a?.failed_logins_24h||0,subtitle:`${a?.failed_logins_7d||0} in 7 days`,icon:af.AlertTriangle,color:a?.failed_logins_24h>0?"text-red-400":"text-emerald-400",bgColor:a?.failed_logins_24h>0?"bg-red-500/10":"bg-emerald-500/10",borderColor:a?.failed_logins_24h>0?"border-red-500/20":"border-emerald-500/20"},{title:"New Accounts",value:a?.new_accounts_7d||0,subtitle:"Past 7 days",icon:l.Users,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20"},{title:"Pending Approvals",value:a?.pending_approvals||0,subtitle:"Waiting review",icon:N.CheckCircle,color:a?.pending_approvals>5?"text-amber-400":"text-emerald-400",bgColor:a?.pending_approvals>5?"bg-amber-500/10":"bg-emerald-500/10",borderColor:a?.pending_approvals>5?"border-amber-500/20":"border-emerald-500/20"},{title:"KYC Expiring",value:c?.next_30_days||0,subtitle:`${c?.next_7_days||0} critical (7d)`,icon:Y.Calendar,color:c?.next_7_days>0?"text-red-400":"text-zinc-400",bgColor:c?.next_7_days>0?"bg-red-500/10":"bg-zinc-500/10",borderColor:c?.next_7_days>0?"border-red-500/20":"border-zinc-500/20"}];return(0,b.jsx)("div",{className:"grid grid-cols-4 gap-4",children:d.map((a,c)=>{let d=a.icon;return(0,b.jsx)(g.Card,{className:`${a.bgColor} ${a.borderColor} border`,children:(0,b.jsxs)(g.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(d,{className:`h-5 w-5 ${a.color}`}),(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:a.subtitle})]}),(0,b.jsx)("p",{className:`text-2xl font-bold ${a.color}`,children:a.value}),(0,b.jsx)("p",{className:"text-xs text-zinc-400 mt-1",children:a.title})]})},c)})})}a.s(["ComplianceAlertsPanel",()=>ak],465267),a.s(["AdminKpiCards",()=>al],298309);var am=a.i(828087),an=a.i(861486),ao=a.i(849928),ap=a.i(66579),aq=a.i(921819),ar=a.i(799524),as=a.i(562044);function at({data:a}){let c=(a||[]).slice(0,8).map(a=>({name:a.name.length>12?a.name.slice(0,12)+"...":a.name,fullName:a.name,actions:a.action_count,lastAction:a.last_action})),d=Math.max(...c.map(a=>a.actions),1);return a&&0!==a.length?(0,b.jsxs)(g.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4 text-blue-400"}),(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-white",children:"Staff Activity (7d)"})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(ar.ResponsiveContainer,{width:"100%",height:200,children:(0,b.jsxs)(am.BarChart,{data:c,layout:"vertical",margin:{top:5,right:30,left:60,bottom:5},children:[(0,b.jsx)(ao.XAxis,{type:"number",stroke:"#71717a",fontSize:10}),(0,b.jsx)(ap.YAxis,{type:"category",dataKey:"name",stroke:"#71717a",fontSize:10,width:60}),(0,b.jsx)(aq.Tooltip,{content:(0,b.jsx)(({active:a,payload:c})=>{if(a&&c&&c.length){let a=c[0].payload;return(0,b.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-3 shadow-lg",children:[(0,b.jsx)("p",{className:"text-white font-medium",children:a.fullName}),(0,b.jsxs)("p",{className:"text-zinc-400 text-sm",children:[a.actions," actions (7d)"]}),a.lastAction&&(0,b.jsxs)("p",{className:"text-zinc-500 text-xs mt-1",children:["Last: ",new Date(a.lastAction).toLocaleDateString()]})]})}return null},{})}),(0,b.jsx)(an.Bar,{dataKey:"actions",radius:[0,4,4,0],children:c.map((a,c)=>{let e;return(0,b.jsx)(as.Cell,{fill:(e=a.actions/d)>.7?"#10b981":e>.4?"#3b82f6":e>.1?"#f59e0b":"#6b7280"},`cell-${c}`)})})]})})})]}):(0,b.jsxs)(g.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4 text-blue-400"}),(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-white",children:"Staff Activity (7d)"})]})}),(0,b.jsx)(g.CardContent,{className:"flex items-center justify-center h-48",children:(0,b.jsx)("p",{className:"text-zinc-500 text-sm",children:"No staff activity data"})})]})}function au({data:a}){let c=[{name:"< 1 day",value:a?.under_1_day||0,color:"#10b981"},{name:"1-3 days",value:a?.days_1_to_3||0,color:"#3b82f6"},{name:"3-7 days",value:a?.days_3_to_7||0,color:"#f59e0b"},{name:"7+ days",value:a?.over_7_days||0,color:"#ef4444"}],d=a?.total||0;return 0===d?(0,b.jsxs)(g.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(H.Clock,{className:"h-4 w-4 text-emerald-400"}),(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-white",children:"Approval Queue"})]}),(0,b.jsx)("span",{className:"text-xs text-emerald-400",children:"All clear"})]})}),(0,b.jsx)(g.CardContent,{className:"flex items-center justify-center h-48",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-emerald-400 text-2xl font-bold",children:"0"}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm",children:"No pending approvals"})]})})]}):(0,b.jsxs)(g.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(H.Clock,{className:"h-4 w-4 text-amber-400"}),(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-white",children:"Approval Queue"})]}),(0,b.jsxs)("span",{className:"text-xs text-zinc-400",children:[d," pending"]})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(ar.ResponsiveContainer,{width:"100%",height:200,children:(0,b.jsxs)(am.BarChart,{data:c,layout:"vertical",margin:{top:5,right:30,left:60,bottom:5},children:[(0,b.jsx)(ao.XAxis,{type:"number",stroke:"#71717a",fontSize:10}),(0,b.jsx)(ap.YAxis,{type:"category",dataKey:"name",stroke:"#71717a",fontSize:10,width:60}),(0,b.jsx)(aq.Tooltip,{content:(0,b.jsx)(({active:a,payload:c})=>{if(a&&c&&c.length){let a=c[0].payload;return(0,b.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-3 shadow-lg",children:[(0,b.jsx)("p",{className:"text-white font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-zinc-400 text-sm",children:[a.value," approvals pending"]})]})}return null},{})}),(0,b.jsx)(an.Bar,{dataKey:"value",radius:[0,4,4,0],children:c.map((a,c)=>(0,b.jsx)(as.Cell,{fill:a.color},`cell-${c}`))})]})})})]})}a.s(["StaffActivityChart",()=>at],723967),a.s(["ApprovalQueueChart",()=>au],43925);var av=a.i(268208),aw=a.i(353667),ax=a.i(235164);function ay({data:a,isDark:c=!0}){let d=(a||[]).map(a=>({...a,dateLabel:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),e=d.reduce((a,b)=>a+b.total_runs,0),h=d.reduce((a,b)=>a+b.completed,0),i=e>0?Math.round(h/e*100):100;if(!a||0===a.length)return(0,b.jsxs)(g.Card,{className:(0,f.cn)("h-full",c?"bg-zinc-900/50 border-zinc-700/50":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ad.Zap,{className:"h-4 w-4 text-purple-400"}),(0,b.jsx)(g.CardTitle,{className:(0,f.cn)("text-sm font-medium",c?"text-white":"text-gray-900"),children:"Workflow Success (30d)"})]})}),(0,b.jsx)(g.CardContent,{className:"flex items-center justify-center h-48",children:(0,b.jsx)("p",{className:(0,f.cn)("text-sm",c?"text-zinc-500":"text-gray-500"),children:"No workflow data"})})]});let j=c?"#71717a":"#9ca3af";return(0,b.jsxs)(g.Card,{className:(0,f.cn)("h-full",c?"bg-zinc-900/50 border-zinc-700/50":"bg-white border-gray-200 shadow-sm"),children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ad.Zap,{className:"h-4 w-4 text-purple-400"}),(0,b.jsx)(g.CardTitle,{className:(0,f.cn)("text-sm font-medium",c?"text-white":"text-gray-900"),children:"Workflow Success (30d)"})]}),(0,b.jsxs)("span",{className:`text-xs font-medium ${i>=90?"text-emerald-500":i>=70?"text-amber-500":"text-red-500"}`,children:[i,"% overall"]})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(ar.ResponsiveContainer,{width:"100%",height:200,children:(0,b.jsxs)(av.LineChart,{data:d,margin:{top:10,right:10,left:0,bottom:5},children:[(0,b.jsx)(ao.XAxis,{dataKey:"dateLabel",stroke:j,fontSize:10,tickLine:!1,interval:"preserveStartEnd"}),(0,b.jsx)(ap.YAxis,{domain:[0,100],stroke:j,fontSize:10,tickLine:!1,tickFormatter:a=>`${a}%`}),(0,b.jsx)(aq.Tooltip,{content:(0,b.jsx)(({active:a,payload:d})=>{if(a&&d&&d.length){let a=d[0].payload;return(0,b.jsxs)("div",{className:(0,f.cn)("rounded-lg p-3 shadow-lg border",c?"bg-zinc-800 border-zinc-700":"bg-white border-gray-200"),children:[(0,b.jsx)("p",{className:(0,f.cn)("font-medium",c?"text-white":"text-gray-900"),children:a.dateLabel}),(0,b.jsxs)("p",{className:"text-emerald-500 text-sm",children:[a.success_rate,"% success"]}),(0,b.jsxs)("p",{className:(0,f.cn)("text-xs mt-1",c?"text-zinc-400":"text-gray-500"),children:[a.completed,"/",a.total_runs," completed"]}),a.failed>0&&(0,b.jsxs)("p",{className:"text-red-500 text-xs",children:[a.failed," failed"]})]})}return null},{})}),(0,b.jsx)(ax.ReferenceLine,{y:90,stroke:"#10b981",strokeDasharray:"3 3",strokeOpacity:.5}),(0,b.jsx)(aw.Line,{type:"monotone",dataKey:"success_rate",stroke:"#a855f7",strokeWidth:2,dot:{fill:"#a855f7",strokeWidth:0,r:3},activeDot:{fill:"#a855f7",strokeWidth:0,r:5}})]})})})]})}function az({data:a}){let c=[{name:"Next 7d",value:a?.next_7_days||0,color:"#ef4444",urgency:"critical"},{name:"Next 30d",value:a?.next_30_days||0,color:"#f59e0b",urgency:"high"},{name:"Next 90d",value:a?.next_90_days||0,color:"#3b82f6",urgency:"medium"}],d=a?.total||0;return 0===d?(0,b.jsxs)(g.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Y.Calendar,{className:"h-4 w-4 text-emerald-400"}),(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-white",children:"Compliance Forecast"})]}),(0,b.jsx)("span",{className:"text-xs text-emerald-400",children:"All clear"})]})}),(0,b.jsx)(g.CardContent,{className:"flex items-center justify-center h-48",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-emerald-400 text-2xl font-bold",children:"0"}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm",children:"No upcoming KYC expirations"})]})})]}):(0,b.jsxs)(g.Card,{className:"bg-zinc-900/50 border-zinc-700/50 h-full",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Y.Calendar,{className:"h-4 w-4 text-amber-400"}),(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-white",children:"Compliance Forecast"})]}),(0,b.jsxs)("span",{className:"text-xs text-zinc-400",children:[d," expiring"]})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(ar.ResponsiveContainer,{width:"100%",height:200,children:(0,b.jsxs)(am.BarChart,{data:c,layout:"vertical",margin:{top:5,right:30,left:60,bottom:5},children:[(0,b.jsx)(ao.XAxis,{type:"number",stroke:"#71717a",fontSize:10}),(0,b.jsx)(ap.YAxis,{type:"category",dataKey:"name",stroke:"#71717a",fontSize:10,width:60}),(0,b.jsx)(aq.Tooltip,{content:(0,b.jsx)(({active:a,payload:c})=>{if(a&&c&&c.length){let a=c[0].payload;return(0,b.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-3 shadow-lg",children:[(0,b.jsx)("p",{className:"text-white font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-zinc-400 text-sm",children:[a.value," KYC expirations"]}),(0,b.jsx)("p",{className:`text-xs mt-1 ${"critical"===a.urgency?"text-red-400":"high"===a.urgency?"text-amber-400":"text-blue-400"}`,children:"critical"===a.urgency?"Requires immediate action":"high"===a.urgency?"Plan renewal soon":"Monitor"})]})}return null},{})}),(0,b.jsx)(an.Bar,{dataKey:"value",radius:[0,4,4,0],children:c.map((a,c)=>(0,b.jsx)(as.Cell,{fill:a.color},`cell-${c}`))})]})})})]})}a.s(["WorkflowTrendChart",()=>ay],372211),a.s(["ComplianceForecastChart",()=>az],32281)}];

//# sourceMappingURL=7c344_app_%28staff%29_versotech_staff_admin_components_collapsible-section_tsx_6c65c9ac._.js.map