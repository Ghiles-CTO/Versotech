{"version":3,"sources":["../../../../../versotech-portal/src/app/%28main%29/versotech_main/my-commercial-partners/page.tsx","../../../../../versotech-portal/src/components/commercial-partners/commercial-partner-detail-drawer.tsx","../../../../../versotech-portal/src/components/commercial-partners/record-cp-commission-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  Building2,\n  CheckCircle2,\n  Search,\n  Loader2,\n  AlertCircle,\n  Mail,\n  Globe,\n  Users,\n  FileText,\n  DollarSign,\n  Handshake,\n  ChevronRight,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\nimport { CommercialPartnerDetailDrawer } from '@/components/commercial-partners/commercial-partner-detail-drawer'\nimport {\n  PartnerCommissionSummary,\n  type CommissionSummary,\n} from '@/components/partners/partner-commission-summary'\n\ntype ArrangerInfo = {\n  id: string\n  legal_name: string\n  status: string\n}\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  is_active: boolean\n}\n\ntype CommercialPartner = {\n  id: string\n  name: string\n  legal_name: string | null\n  cp_type: string | null\n  status: string\n  regulatory_status: string | null\n  jurisdiction: string | null\n  contact_name: string | null\n  contact_email: string | null\n  contact_phone: string | null\n  country: string | null\n  logo_url: string | null\n  kyc_status: string | null\n  contract_end_date: string | null\n  deals_count: number\n  clients_count: number\n  total_placement_value: number\n  fee_plans: FeePlan[]\n  commission_summary: CommissionSummary\n  deal_ids: string[] // Added for deal filtering\n}\n\ntype Summary = {\n  totalCPs: number\n  activeCPs: number\n  totalClients: number\n  totalPlacementValue: number\n  totalOwed: number\n  totalPaid: number\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300 border-green-200 dark:border-green-700',\n  pending: 'bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 border-yellow-200 dark:border-yellow-700',\n  inactive: 'bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 border-gray-200 dark:border-gray-600',\n  suspended: 'bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300 border-red-200 dark:border-red-700',\n}\n\nconst KYC_STYLES: Record<string, string> = {\n  approved: 'bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300',\n  pending: 'bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300',\n  expired: 'bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300',\n  not_started: 'bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300',\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Status', value: 'all' },\n  { label: 'Active', value: 'active' },\n  { label: 'Pending', value: 'pending' },\n  { label: 'Inactive', value: 'inactive' },\n]\n\nexport default function MyCommercialPartnersPage() {\n  const [arrangerInfo, setArrangerInfo] = useState<ArrangerInfo | null>(null)\n  const [arrangerId, setArrangerId] = useState<string | null>(null)\n  const [commercialPartners, setCommercialPartners] = useState<CommercialPartner[]>([])\n  const [deals, setDeals] = useState<Deal[]>([])\n  const [summary, setSummary] = useState<Summary>({\n    totalCPs: 0,\n    activeCPs: 0,\n    totalClients: 0,\n    totalPlacementValue: 0,\n    totalOwed: 0,\n    totalPaid: 0,\n  })\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [dealFilter, setDealFilter] = useState('all')\n\n  // Detail drawer state\n  const [selectedCPId, setSelectedCPId] = useState<string | null>(null)\n  const [drawerOpen, setDrawerOpen] = useState(false)\n\n  const handleCPClick = (cpId: string) => {\n    setSelectedCPId(cpId)\n    setDrawerOpen(true)\n  }\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        setLoading(true)\n        const supabase = createClient()\n\n        const { data: { user } } = await supabase.auth.getUser()\n        if (!user) {\n          setError('Not authenticated')\n          return\n        }\n\n        const { data: arrangerUser, error: arrangerUserError } = await supabase\n          .from('arranger_users')\n          .select('arranger_id')\n          .eq('user_id', user.id)\n          .single()\n\n        if (arrangerUserError || !arrangerUser) {\n          await fetchAllCommercialPartners(supabase)\n          return\n        }\n\n        setArrangerId(arrangerUser.arranger_id)\n\n        const { data: arranger, error: arrangerError } = await supabase\n          .from('arranger_entities')\n          .select('id, legal_name, status')\n          .eq('id', arrangerUser.arranger_id)\n          .single()\n\n        if (arrangerError) throw arrangerError\n        setArrangerInfo(arranger)\n\n        // Get deals for this arranger (for filter dropdown)\n        const { data: arrangerDeals, error: dealsError } = await supabase\n          .from('deals')\n          .select('id, name, company_name')\n          .eq('arranger_entity_id', arrangerUser.arranger_id)\n          .order('name')\n\n        if (dealsError) throw dealsError\n        setDeals(arrangerDeals || [])\n\n        if (!arrangerDeals || arrangerDeals.length === 0) {\n          setCommercialPartners([])\n          setSummary({ totalCPs: 0, activeCPs: 0, totalClients: 0, totalPlacementValue: 0, totalOwed: 0, totalPaid: 0 })\n          return\n        }\n\n        const dealIds = arrangerDeals.map(d => d.id)\n\n        const { data: referrals, error: refError } = await supabase\n          .from('deal_memberships')\n          .select(`referred_by_entity_id, investor_id, deal_id, deal:deal_id (id, name)`)\n          .in('deal_id', dealIds)\n          .eq('referred_by_entity_type', 'commercial_partner')\n          .not('referred_by_entity_id', 'is', null)\n\n        if (refError) throw refError\n\n        const cpIds = [...new Set((referrals || []).map(r => r.referred_by_entity_id))]\n\n        if (cpIds.length === 0) {\n          setCommercialPartners([])\n          setSummary({ totalCPs: 0, activeCPs: 0, totalClients: 0, totalPlacementValue: 0, totalOwed: 0, totalPaid: 0 })\n          return\n        }\n\n        const { data: cpsData, error: cpsError } = await supabase\n          .from('commercial_partners')\n          .select('*')\n          .in('id', cpIds)\n          .order('name')\n\n        if (cpsError) throw cpsError\n\n        // Get client counts\n        const { data: clients } = await supabase\n          .from('commercial_partner_clients')\n          .select('commercial_partner_id')\n          .in('commercial_partner_id', cpIds)\n\n        const clientCountsByCP = new Map<string, number>()\n        ;(clients || []).forEach((c: any) => {\n          const current = clientCountsByCP.get(c.commercial_partner_id) || 0\n          clientCountsByCP.set(c.commercial_partner_id, current + 1)\n        })\n\n        const investorIds = [...new Set((referrals || []).filter(r => r.investor_id).map(r => r.investor_id))]\n        const { data: subs } = await supabase\n          .from('subscriptions')\n          .select('investor_id, commitment')\n          .in('investor_id', investorIds)\n\n        const subsByInvestor = new Map<string, number>()\n        ;(subs || []).forEach((s: any) => {\n          const current = subsByInvestor.get(s.investor_id) || 0\n          subsByInvestor.set(s.investor_id, current + (Number(s.commitment) || 0))\n        })\n\n        // Get fee plans for these CPs (created by this arranger)\n        const { data: feePlans } = await supabase\n          .from('fee_plans')\n          .select('id, name, is_active, commercial_partner_id')\n          .in('commercial_partner_id', cpIds)\n          .eq('created_by_arranger_id', arrangerUser.arranger_id)\n\n        const feePlansByCP = new Map<string, FeePlan[]>()\n        ;(feePlans || []).forEach((fp: any) => {\n          const existing = feePlansByCP.get(fp.commercial_partner_id) || []\n          existing.push({ id: fp.id, name: fp.name, is_active: fp.is_active })\n          feePlansByCP.set(fp.commercial_partner_id, existing)\n        })\n\n        // Get commissions for these CPs\n        const { data: commissions } = await supabase\n          .from('commercial_partner_commissions')\n          .select('commercial_partner_id, status, accrual_amount, currency')\n          .in('commercial_partner_id', cpIds)\n          .eq('arranger_id', arrangerUser.arranger_id)\n\n        // Build commission summaries by CP\n        const commissionsByCP = new Map<string, CommissionSummary>()\n        cpIds.forEach(cpId => {\n          commissionsByCP.set(cpId, {\n            accrued: 0,\n            invoice_requested: 0,\n            invoiced: 0,\n            paid: 0,\n            cancelled: 0,\n            total_owed: 0,\n            currency: 'USD',\n          })\n        })\n\n        ;(commissions || []).forEach((c: any) => {\n          const summary = commissionsByCP.get(c.commercial_partner_id)\n          if (!summary) return\n          const amount = Number(c.accrual_amount) || 0\n          if (c.status === 'accrued') summary.accrued += amount\n          else if (c.status === 'invoice_requested') summary.invoice_requested += amount\n          else if (c.status === 'invoiced') summary.invoiced += amount\n          else if (c.status === 'paid') summary.paid += amount\n          else if (c.status === 'cancelled') summary.cancelled += amount\n          if (['accrued', 'invoice_requested', 'invoiced'].includes(c.status)) {\n            summary.total_owed += amount\n          }\n          if (c.currency) summary.currency = c.currency\n        })\n\n        const processedCPs: CommercialPartner[] = (cpsData || []).map((cp: any) => {\n          const cpRefs = (referrals || []).filter(r => r.referred_by_entity_id === cp.id)\n          const dealsInvolved = [...new Set(cpRefs.map(r => {\n            const deal = Array.isArray(r.deal) ? r.deal[0] : r.deal\n            return deal?.id\n          }).filter(Boolean))]\n          const totalValue = cpRefs.reduce((sum, r) => {\n            if (r.investor_id) return sum + (subsByInvestor.get(r.investor_id) || 0)\n            return sum\n          }, 0)\n\n          return {\n            id: cp.id,\n            name: cp.name || cp.legal_name || 'Unknown CP',\n            legal_name: cp.legal_name,\n            cp_type: cp.cp_type,\n            status: cp.status || 'active',\n            regulatory_status: cp.regulatory_status,\n            jurisdiction: cp.jurisdiction,\n            contact_name: cp.contact_name,\n            contact_email: cp.contact_email,\n            contact_phone: cp.contact_phone,\n            country: cp.country,\n            logo_url: cp.logo_url,\n            kyc_status: cp.kyc_status,\n            contract_end_date: cp.contract_end_date,\n            deals_count: dealsInvolved.length,\n            clients_count: clientCountsByCP.get(cp.id) || 0,\n            total_placement_value: totalValue,\n            fee_plans: feePlansByCP.get(cp.id) || [],\n            commission_summary: commissionsByCP.get(cp.id) || {\n              accrued: 0,\n              invoice_requested: 0,\n              invoiced: 0,\n              paid: 0,\n              cancelled: 0,\n              total_owed: 0,\n              currency: 'USD',\n            },\n            deal_ids: dealsInvolved as string[],\n          }\n        })\n\n        setCommercialPartners(processedCPs)\n\n        const active = processedCPs.filter(cp => cp.status === 'active').length\n        const totalClients = processedCPs.reduce((sum, cp) => sum + cp.clients_count, 0)\n        const totalVal = processedCPs.reduce((sum, cp) => sum + cp.total_placement_value, 0)\n        const totalOwed = processedCPs.reduce((sum, cp) => sum + cp.commission_summary.total_owed, 0)\n        const totalPaid = processedCPs.reduce((sum, cp) => sum + cp.commission_summary.paid, 0)\n\n        setSummary({\n          totalCPs: processedCPs.length,\n          activeCPs: active,\n          totalClients,\n          totalPlacementValue: totalVal,\n          totalOwed,\n          totalPaid,\n        })\n        setError(null)\n      } catch (err) {\n        console.error('[MyCommercialPartnersPage] Error:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load commercial partners')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    async function fetchAllCommercialPartners(supabase: any) {\n      const { data: cpsData, error: cpsError } = await supabase\n        .from('commercial_partners')\n        .select('*')\n        .order('name')\n        .limit(100)\n\n      if (cpsError) throw cpsError\n\n      const emptyCommission: CommissionSummary = {\n        accrued: 0,\n        invoice_requested: 0,\n        invoiced: 0,\n        paid: 0,\n        cancelled: 0,\n        total_owed: 0,\n        currency: 'USD',\n      }\n\n      const processedCPs: CommercialPartner[] = (cpsData || []).map((cp: any) => ({\n        id: cp.id,\n        name: cp.name || cp.legal_name || 'Unknown CP',\n        legal_name: cp.legal_name,\n        cp_type: cp.cp_type,\n        status: cp.status || 'active',\n        regulatory_status: cp.regulatory_status,\n        jurisdiction: cp.jurisdiction,\n        contact_name: cp.contact_name,\n        contact_email: cp.contact_email,\n        contact_phone: cp.contact_phone,\n        country: cp.country,\n        logo_url: cp.logo_url,\n        kyc_status: cp.kyc_status,\n        contract_end_date: cp.contract_end_date,\n        deals_count: 0,\n        clients_count: 0,\n        total_placement_value: 0,\n        fee_plans: [],\n        commission_summary: emptyCommission,\n        deal_ids: [],\n      }))\n\n      setCommercialPartners(processedCPs)\n      setSummary({\n        totalCPs: processedCPs.length,\n        activeCPs: processedCPs.filter(cp => cp.status === 'active').length,\n        totalClients: 0,\n        totalPlacementValue: 0,\n        totalOwed: 0,\n        totalPaid: 0,\n      })\n    }\n\n    fetchData()\n  }, [])\n\n  const filteredCPs = commercialPartners.filter(cp => {\n    const matchesStatus = statusFilter === 'all' || cp.status === statusFilter\n    const matchesSearch = !search ||\n      cp.name?.toLowerCase().includes(search.toLowerCase()) ||\n      cp.legal_name?.toLowerCase().includes(search.toLowerCase()) ||\n      cp.contact_name?.toLowerCase().includes(search.toLowerCase()) ||\n      cp.jurisdiction?.toLowerCase().includes(search.toLowerCase())\n    const matchesDeal = dealFilter === 'all' || cp.deal_ids.includes(dealFilter)\n    return matchesStatus && matchesSearch && matchesDeal\n  })\n\n  const today = new Date()\n  const thirtyDaysFromNow = new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000)\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        <span className=\"ml-3 text-muted-foreground\">Loading commercial partners...</span>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-16\">\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Commercial Partners</h3>\n        <p className=\"text-muted-foreground\">{error}</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">My Commercial Partners</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {arrangerInfo ? `Commercial partners working with ${arrangerInfo.legal_name}` : 'View all commercial partners'}\n          </p>\n        </div>\n        <Link href=\"/versotech_main/fee-plans\">\n          <Button variant=\"outline\" size=\"sm\">\n            <FileText className=\"h-4 w-4 mr-2\" />\n            Fee Plans\n          </Button>\n        </Link>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Building2 className=\"h-4 w-4\" />Total CPs\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{summary.totalCPs}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">In your network</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />Active\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">{summary.activeCPs}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">With valid contracts</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Users className=\"h-4 w-4\" />Clients\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">{summary.totalClients}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Total clients served</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Handshake className=\"h-4 w-4\" />Placement Value\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-purple-600 dark:text-purple-400\">{formatCurrency(summary.totalPlacementValue, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Total placed</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <DollarSign className=\"h-4 w-4\" />Fees Owed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-yellow-600 dark:text-yellow-400\">{formatCurrency(summary.totalOwed, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Pending payment</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />Fees Paid\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">{formatCurrency(summary.totalPaid, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Total paid out</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input placeholder=\"Search commercial partners...\" value={search} onChange={(e) => setSearch(e.target.value)} className=\"pl-10\" />\n            </div>\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-full md:w-48\"><SelectValue placeholder=\"Filter by status\" /></SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((o) => <SelectItem key={o.value} value={o.value}>{o.label}</SelectItem>)}\n              </SelectContent>\n            </Select>\n            {deals.length > 0 && (\n              <Select value={dealFilter} onValueChange={setDealFilter}>\n                <SelectTrigger className=\"w-full md:w-56\">\n                  <SelectValue placeholder=\"Filter by deal\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Deals</SelectItem>\n                  {deals.map((deal) => (\n                    <SelectItem key={deal.id} value={deal.id}>\n                      {deal.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Commercial Partners Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Commercial Partners</CardTitle>\n          <CardDescription>\n            {filteredCPs.length} partner{filteredCPs.length !== 1 ? 's' : ''} found\n            {arrangerInfo && ' • Click a row to view details'}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredCPs.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <Building2 className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">{search || statusFilter !== 'all' ? 'No partners match your filters' : 'No commercial partners in your network yet'}</p>\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Partner</TableHead>\n                    <TableHead>Type</TableHead>\n                    <TableHead>Jurisdiction</TableHead>\n                    <TableHead>Fee Plans</TableHead>\n                    <TableHead>Placements</TableHead>\n                    <TableHead>Payments</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead className=\"w-10\"></TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredCPs.map((cp) => {\n                    const isExpiringSoon = cp.contract_end_date && new Date(cp.contract_end_date) <= thirtyDaysFromNow && new Date(cp.contract_end_date) > today\n                    const isExpired = cp.contract_end_date && new Date(cp.contract_end_date) <= today\n                    return (\n                      <TableRow\n                        key={cp.id}\n                        className={cn(arrangerInfo && 'cursor-pointer hover:bg-muted/50 transition-colors')}\n                        onClick={() => arrangerInfo && handleCPClick(cp.id)}\n                      >\n                        <TableCell>\n                          <div className=\"flex items-center gap-3\">\n                            {cp.logo_url ? (\n                              <img src={cp.logo_url} alt={cp.name} className=\"h-10 w-10 rounded-lg object-cover\" />\n                            ) : (\n                              <div className=\"h-10 w-10 rounded-lg bg-muted flex items-center justify-center\"><Building2 className=\"h-5 w-5 text-muted-foreground\" /></div>\n                            )}\n                            <div>\n                              <div className=\"font-medium\">{cp.name}</div>\n                              {cp.contact_email && <div className=\"text-xs text-muted-foreground flex items-center gap-1\"><Mail className=\"h-3 w-3\" />{cp.contact_email}</div>}\n                            </div>\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          {cp.cp_type ? <Badge variant=\"secondary\" className=\"capitalize\">{cp.cp_type.replace('_', ' ')}</Badge> : <span className=\"text-muted-foreground text-xs\">—</span>}\n                        </TableCell>\n                        <TableCell>\n                          {cp.jurisdiction ? (\n                            <div className=\"flex items-center gap-1\">\n                              <Globe className=\"h-3 w-3 text-muted-foreground\" />\n                              <span className=\"text-sm\">{cp.jurisdiction}</span>\n                            </div>\n                          ) : <span className=\"text-muted-foreground text-xs\">—</span>}\n                        </TableCell>\n                        <TableCell>\n                          {cp.fee_plans.length > 0 ? (\n                            <div className=\"flex flex-wrap gap-1\">\n                              {cp.fee_plans.slice(0, 2).map((fp) => (\n                                <Badge\n                                  key={fp.id}\n                                  variant={fp.is_active ? 'default' : 'secondary'}\n                                  className=\"text-xs\"\n                                >\n                                  {fp.name}\n                                </Badge>\n                              ))}\n                              {cp.fee_plans.length > 2 && (\n                                <Badge variant=\"outline\" className=\"text-xs\">\n                                  +{cp.fee_plans.length - 2}\n                                </Badge>\n                              )}\n                            </div>\n                          ) : (\n                            <span className=\"text-muted-foreground text-xs\">No fee plans</span>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          <div>\n                            <div className=\"font-medium\">{formatCurrency(cp.total_placement_value, 'USD')}</div>\n                            <div className=\"text-xs text-muted-foreground\">{cp.deals_count} deal{cp.deals_count !== 1 ? 's' : ''} • {cp.clients_count} client{cp.clients_count !== 1 ? 's' : ''}</div>\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          <PartnerCommissionSummary\n                            summary={cp.commission_summary}\n                            variant=\"inline\"\n                          />\n                        </TableCell>\n                        <TableCell>\n                          <div className=\"space-y-1\">\n                            <Badge variant=\"outline\" className={cn('capitalize', STATUS_STYLES[cp.status] || STATUS_STYLES.active)}>{cp.status}</Badge>\n                            {cp.kyc_status && <div><Badge variant=\"secondary\" className={cn('text-xs', KYC_STYLES[cp.kyc_status] || '')}>KYC: {cp.kyc_status.replace('_', ' ')}</Badge></div>}\n                            {isExpired && <Badge variant=\"destructive\" className=\"text-xs\">Contract Expired</Badge>}\n                            {isExpiringSoon && !isExpired && <Badge variant=\"outline\" className=\"text-xs bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300\">Expiring Soon</Badge>}\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          {arrangerInfo && (\n                            <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n                          )}\n                        </TableCell>\n                      </TableRow>\n                    )\n                  })}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Detail Drawer */}\n      <CommercialPartnerDetailDrawer\n        commercialPartnerId={selectedCPId}\n        open={drawerOpen}\n        onOpenChange={setDrawerOpen}\n      />\n    </div>\n  )\n}\n","'use client'\n\nimport { useEffect, useState } from 'react'\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from '@/components/ui/sheet'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Separator } from '@/components/ui/separator'\nimport {\n  Building2,\n  Loader2,\n  AlertCircle,\n  Mail,\n  Phone,\n  Globe,\n  Users,\n  FileText,\n  DollarSign,\n  Handshake,\n  CheckCircle2,\n  Clock,\n  TrendingUp,\n  ShieldCheck,\n  Scale,\n  CalendarDays,\n  CreditCard,\n  Send,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport {\n  PartnerCommissionSummary,\n  type CommissionSummary,\n} from '@/components/partners/partner-commission-summary'\nimport { RecordCPCommissionDialog } from './record-cp-commission-dialog'\nimport Link from 'next/link'\n\ntype CommercialPartnerDetail = {\n  id: string\n  name: string\n  legal_name: string | null\n  cp_type: string | null\n  status: string\n  regulatory_status: string | null\n  jurisdiction: string | null\n  contact_name: string | null\n  contact_email: string | null\n  contact_phone: string | null\n  country: string | null\n  logo_url: string | null\n  kyc_status: string | null\n  contract_end_date: string | null\n  created_at: string\n}\n\ntype FeeComponent = {\n  id: string\n  kind: string\n  rate_bps: number | null\n  flat_amount: number | null\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  description: string | null\n  is_active: boolean\n  effective_from: string | null\n  effective_until: string | null\n  deal_id: string | null\n  created_at: string\n  components: FeeComponent[]\n}\n\ntype PlacementAgreement = {\n  id: string\n  agreement_type: string\n  default_commission_bps: number\n  commission_cap_amount: number | null\n  territory: string | null\n  exclusivity_level: string | null\n  effective_date: string | null\n  expiry_date: string | null\n  status: string\n  created_at: string\n}\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n  status: string\n  currency: string | null\n}\n\ntype Referral = {\n  id: string\n  created_at: string\n  investor: { id: string; name: string } | null\n  deal: { id: string; name: string; company_name: string | null } | null\n}\n\ntype Commission = {\n  id: string\n  status: string\n  accrual_amount: number\n  currency: string\n  created_at: string\n  deal?: { id: string; name: string } | null\n}\n\nconst COMMISSION_STATUS_CONFIG: Record<string, { icon: typeof Clock; color: string }> = {\n  accrued: { icon: Clock, color: 'text-blue-600' },\n  invoice_requested: { icon: Send, color: 'text-yellow-600' },\n  invoice_submitted: { icon: FileText, color: 'text-indigo-600' },\n  invoiced: { icon: FileText, color: 'text-orange-600' },\n  paid: { icon: CheckCircle2, color: 'text-green-600' },\n  cancelled: { icon: AlertCircle, color: 'text-gray-400' },\n  rejected: { icon: AlertCircle, color: 'text-red-600' },\n}\n\ntype CPData = {\n  commercial_partner: CommercialPartnerDetail\n  fee_plans: FeePlan[]\n  commission_summary: CommissionSummary\n  placement_agreements: PlacementAgreement[]\n  deals: Deal[]\n  recent_referrals: Referral[]\n  stats: {\n    total_deals: number\n    total_referrals: number\n    active_fee_plans: number\n    active_agreements: number\n  }\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 border-green-200',\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  inactive: 'bg-gray-100 text-gray-800 border-gray-200',\n  suspended: 'bg-red-100 text-red-800 border-red-200',\n  draft: 'bg-gray-100 text-gray-800 border-gray-200',\n  pending_internal_approval: 'bg-orange-100 text-orange-800 border-orange-200',\n  pending_approval: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  approved: 'bg-blue-100 text-blue-800 border-blue-200',\n  rejected: 'bg-red-100 text-red-800 border-red-200',\n}\n\nconst KYC_STYLES: Record<string, string> = {\n  approved: 'bg-green-100 text-green-800',\n  pending: 'bg-yellow-100 text-yellow-800',\n  expired: 'bg-red-100 text-red-800',\n  not_started: 'bg-gray-100 text-gray-800',\n}\n\ninterface CommercialPartnerDetailDrawerProps {\n  commercialPartnerId: string | null\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function CommercialPartnerDetailDrawer({\n  commercialPartnerId,\n  open,\n  onOpenChange,\n}: CommercialPartnerDetailDrawerProps) {\n  const [data, setData] = useState<CPData | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [recordCommissionOpen, setRecordCommissionOpen] = useState(false)\n  const [commissions, setCommissions] = useState<Commission[]>([])\n  const [commissionsLoading, setCommissionsLoading] = useState(false)\n  const [actionLoading, setActionLoading] = useState<string | null>(null)\n\n  const fetchCPDetails = async () => {\n    if (!commercialPartnerId) return\n    try {\n      setLoading(true)\n      setError(null)\n\n      const response = await fetch(`/api/arrangers/me/commercial-partners/${commercialPartnerId}`)\n\n      if (!response.ok) {\n        const errData = await response.json()\n        throw new Error(errData.error || 'Failed to fetch commercial partner details')\n      }\n\n      const result = await response.json()\n      setData(result.data)\n    } catch (err) {\n      console.error('[CPDetailDrawer] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load details')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchCommissions = async () => {\n    if (!commercialPartnerId) return\n    try {\n      setCommissionsLoading(true)\n      const response = await fetch(\n        `/api/arrangers/me/commercial-partner-commissions?commercial_partner_id=${commercialPartnerId}`\n      )\n      if (response.ok) {\n        const result = await response.json()\n        setCommissions(result.data || [])\n      }\n    } catch (err) {\n      console.error('[CPDetailDrawer] Error fetching commissions:', err)\n    } finally {\n      setCommissionsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    if (!commercialPartnerId || !open) {\n      setData(null)\n      setCommissions([])\n      return\n    }\n    fetchCPDetails()\n    fetchCommissions()\n  }, [commercialPartnerId, open])\n\n  const handleCommissionRecorded = () => {\n    fetchCPDetails()\n    fetchCommissions()\n  }\n\n  const handleRequestInvoice = async (commission: Commission) => {\n    setActionLoading(commission.id)\n    try {\n      const response = await fetch(\n        `/api/arrangers/me/commercial-partner-commissions/${commission.id}/request-invoice`,\n        { method: 'POST', headers: { 'Content-Type': 'application/json' } }\n      )\n      if (!response.ok) {\n        const errData = await response.json()\n        throw new Error(errData.error || 'Failed to request invoice')\n      }\n      // Refresh data\n      fetchCPDetails()\n      fetchCommissions()\n    } catch (err) {\n      console.error('[CPDetailDrawer] Request invoice error:', err)\n      alert(err instanceof Error ? err.message : 'Failed to request invoice')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  const handleRequestPayment = async (commission: Commission) => {\n    setActionLoading(commission.id)\n    try {\n      const response = await fetch(\n        `/api/arrangers/me/commercial-partner-commissions/${commission.id}/request-payment`,\n        { method: 'POST', headers: { 'Content-Type': 'application/json' } }\n      )\n      if (!response.ok) {\n        const errData = await response.json()\n        throw new Error(errData.error || 'Failed to request payment')\n      }\n      // Refresh data\n      fetchCPDetails()\n      fetchCommissions()\n    } catch (err) {\n      console.error('[CPDetailDrawer] Request payment error:', err)\n      alert(err instanceof Error ? err.message : 'Failed to request payment')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  if (!open) return null\n\n  return (\n    <>\n      <Sheet open={open} onOpenChange={onOpenChange}>\n        <SheetContent className=\"w-full sm:max-w-xl overflow-y-auto\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-16\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            </div>\n          ) : error ? (\n            <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n              <AlertCircle className=\"h-12 w-12 text-destructive mb-4\" />\n              <p className=\"text-sm text-muted-foreground\">{error}</p>\n            </div>\n          ) : data ? (\n            <>\n              <SheetHeader className=\"pb-4\">\n                <div className=\"flex items-start gap-4\">\n                  {data.commercial_partner.logo_url ? (\n                    <img\n                      src={data.commercial_partner.logo_url}\n                      alt={data.commercial_partner.name}\n                      className=\"h-16 w-16 rounded-lg object-cover\"\n                    />\n                  ) : (\n                    <div className=\"h-16 w-16 rounded-lg bg-muted flex items-center justify-center\">\n                      <Building2 className=\"h-8 w-8 text-muted-foreground\" />\n                    </div>\n                  )}\n                  <div className=\"flex-1\">\n                    <SheetTitle className=\"text-xl\">{data.commercial_partner.name}</SheetTitle>\n                    <SheetDescription className=\"flex items-center gap-2 mt-1\">\n                      {data.commercial_partner.cp_type && (\n                        <Badge variant=\"secondary\" className=\"capitalize\">\n                          {data.commercial_partner.cp_type.replace('_', ' ')}\n                        </Badge>\n                      )}\n                      {data.commercial_partner.jurisdiction && (\n                        <span className=\"flex items-center gap-1 text-xs\">\n                          <Globe className=\"h-3 w-3\" />\n                          {data.commercial_partner.jurisdiction}\n                        </span>\n                      )}\n                    </SheetDescription>\n                    <div className=\"flex items-center gap-2 mt-2\">\n                      <Badge\n                        variant=\"outline\"\n                        className={cn('capitalize', STATUS_STYLES[data.commercial_partner.status])}\n                      >\n                        {data.commercial_partner.status}\n                      </Badge>\n                      {data.commercial_partner.kyc_status && (\n                        <Badge\n                          variant=\"secondary\"\n                          className={cn('text-xs', KYC_STYLES[data.commercial_partner.kyc_status])}\n                        >\n                          KYC: {data.commercial_partner.kyc_status.replace('_', ' ')}\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </SheetHeader>\n\n              {/* Quick Stats */}\n              <div className=\"grid grid-cols-4 gap-2 py-4\">\n                <Card className=\"p-3\">\n                  <div className=\"text-xs text-muted-foreground\">Deals</div>\n                  <div className=\"text-lg font-semibold\">{data.stats.total_deals}</div>\n                </Card>\n                <Card className=\"p-3\">\n                  <div className=\"text-xs text-muted-foreground\">Referrals</div>\n                  <div className=\"text-lg font-semibold\">{data.stats.total_referrals}</div>\n                </Card>\n                <Card className=\"p-3\">\n                  <div className=\"text-xs text-muted-foreground\">Fee Plans</div>\n                  <div className=\"text-lg font-semibold\">{data.stats.active_fee_plans}</div>\n                </Card>\n                <Card className=\"p-3\">\n                  <div className=\"text-xs text-muted-foreground\">Agreements</div>\n                  <div className=\"text-lg font-semibold\">{data.stats.active_agreements}</div>\n                </Card>\n              </div>\n\n              <Separator />\n\n              <Tabs defaultValue=\"overview\" className=\"mt-4\">\n                <TabsList className=\"grid w-full grid-cols-5\">\n                  <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n                  <TabsTrigger value=\"fee-plans\">Fee Plans</TabsTrigger>\n                  <TabsTrigger value=\"commissions\">Commissions</TabsTrigger>\n                  <TabsTrigger value=\"agreements\">Agreements</TabsTrigger>\n                  <TabsTrigger value=\"referrals\">Referrals</TabsTrigger>\n                </TabsList>\n\n                {/* Overview Tab */}\n                <TabsContent value=\"overview\" className=\"space-y-4 mt-4\">\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Contact Information</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-2\">\n                      {data.commercial_partner.contact_name && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Users className=\"h-4 w-4 text-muted-foreground\" />\n                          {data.commercial_partner.contact_name}\n                        </div>\n                      )}\n                      {data.commercial_partner.contact_email && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                          <a\n                            href={`mailto:${data.commercial_partner.contact_email}`}\n                            className=\"text-primary hover:underline\"\n                          >\n                            {data.commercial_partner.contact_email}\n                          </a>\n                        </div>\n                      )}\n                      {data.commercial_partner.contact_phone && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                          {data.commercial_partner.contact_phone}\n                        </div>\n                      )}\n                      {data.commercial_partner.country && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Globe className=\"h-4 w-4 text-muted-foreground\" />\n                          {data.commercial_partner.country}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Regulatory Information</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-2\">\n                      {data.commercial_partner.regulatory_status && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <ShieldCheck className=\"h-4 w-4 text-muted-foreground\" />\n                          Status: {data.commercial_partner.regulatory_status}\n                        </div>\n                      )}\n                      {data.commercial_partner.jurisdiction && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Scale className=\"h-4 w-4 text-muted-foreground\" />\n                          Jurisdiction: {data.commercial_partner.jurisdiction}\n                        </div>\n                      )}\n                      {data.commercial_partner.contract_end_date && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <CalendarDays className=\"h-4 w-4 text-muted-foreground\" />\n                          Contract expires: {formatDate(data.commercial_partner.contract_end_date)}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n\n                  {data.deals.length > 0 && (\n                    <Card>\n                      <CardHeader className=\"pb-2\">\n                        <CardTitle className=\"text-sm\">Deals Involved</CardTitle>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"space-y-2\">\n                          {data.deals.slice(0, 5).map((deal) => (\n                            <div\n                              key={deal.id}\n                              className=\"flex items-center justify-between text-sm\"\n                            >\n                              <span>{deal.name}</span>\n                              <Badge variant=\"outline\" className=\"capitalize\">\n                                {deal.status}\n                              </Badge>\n                            </div>\n                          ))}\n                          {data.deals.length > 5 && (\n                            <p className=\"text-xs text-muted-foreground\">\n                              +{data.deals.length - 5} more deals\n                            </p>\n                          )}\n                        </div>\n                      </CardContent>\n                    </Card>\n                  )}\n                </TabsContent>\n\n                {/* Fee Plans Tab */}\n                <TabsContent value=\"fee-plans\" className=\"space-y-4 mt-4\">\n                  {data.fee_plans.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <FileText className=\"h-10 w-10 text-muted-foreground mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">No fee plans assigned</p>\n                      <Button variant=\"outline\" size=\"sm\" className=\"mt-4\" asChild>\n                        <Link href=\"/versotech_main/fee-plans\">Create Fee Plan</Link>\n                      </Button>\n                    </div>\n                  ) : (\n                    data.fee_plans.map((plan) => (\n                      <Card key={plan.id}>\n                        <CardHeader className=\"pb-2\">\n                          <div className=\"flex items-center justify-between\">\n                            <CardTitle className=\"text-sm\">{plan.name}</CardTitle>\n                            <Badge variant={plan.is_active ? 'default' : 'secondary'}>\n                              {plan.is_active ? 'Active' : 'Inactive'}\n                            </Badge>\n                          </div>\n                          {plan.description && (\n                            <CardDescription className=\"text-xs\">\n                              {plan.description}\n                            </CardDescription>\n                          )}\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"text-xs text-muted-foreground mb-2\">\n                            Effective: {formatDate(plan.effective_from || '')}\n                            {plan.effective_until && ` - ${formatDate(plan.effective_until)}`}\n                          </div>\n                          {plan.components && plan.components.length > 0 && (\n                            <div className=\"space-y-1\">\n                              {plan.components.map((comp) => (\n                                <div\n                                  key={comp.id}\n                                  className=\"flex items-center justify-between text-xs bg-muted/50 p-2 rounded\"\n                                >\n                                  <span className=\"capitalize\">{comp.kind.replace('_', ' ')}</span>\n                                  <span className=\"font-medium\">\n                                    {comp.rate_bps\n                                      ? `${(comp.rate_bps / 100).toFixed(2)}%`\n                                      : formatCurrency(comp.flat_amount || 0, 'USD')}\n                                  </span>\n                                </div>\n                              ))}\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </TabsContent>\n\n                {/* Commissions Tab */}\n                <TabsContent value=\"commissions\" className=\"space-y-4 mt-4\">\n                  <PartnerCommissionSummary summary={data.commission_summary} variant=\"card\" />\n\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setRecordCommissionOpen(true)}\n                    >\n                      <DollarSign className=\"h-4 w-4 mr-2\" />\n                      Record Commission\n                    </Button>\n                    <Button variant=\"ghost\" size=\"sm\" asChild>\n                      <Link href=\"/versotech_main/lawyer-reconciliation\">\n                        <TrendingUp className=\"h-4 w-4 mr-2\" />\n                        Reconciliation\n                      </Link>\n                    </Button>\n                  </div>\n\n                  {/* Commissions List with Actions */}\n                  {commissionsLoading ? (\n                    <div className=\"flex items-center justify-center py-4\">\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    </div>\n                  ) : commissions.length > 0 ? (\n                    <Card>\n                      <CardHeader className=\"pb-2\">\n                        <CardTitle className=\"text-sm\">Recent Commissions</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-2\">\n                        {commissions.slice(0, 10).map((commission) => {\n                          const config = COMMISSION_STATUS_CONFIG[commission.status] || COMMISSION_STATUS_CONFIG.accrued\n                          const StatusIcon = config.icon\n\n                          return (\n                            <div key={commission.id} className=\"flex items-center justify-between p-2 rounded-md bg-muted/50\">\n                              <div className=\"flex items-center gap-2\">\n                                <StatusIcon className={cn('h-4 w-4', config.color)} />\n                                <div>\n                                  <div className=\"font-medium text-sm\">\n                                    {formatCurrency(commission.accrual_amount, commission.currency)}\n                                  </div>\n                                  <div className=\"text-xs text-muted-foreground\">\n                                    {commission.deal?.name || 'No deal'} • {formatDate(commission.created_at)}\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"flex items-center gap-2\">\n                                <Badge variant=\"outline\" className=\"text-xs capitalize\">\n                                  {commission.status.replace(/_/g, ' ')}\n                                </Badge>\n                                {commission.status === 'accrued' && (\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => handleRequestInvoice(commission)}\n                                    disabled={actionLoading === commission.id}\n                                  >\n                                    {actionLoading === commission.id ? (\n                                      <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n                                    ) : (\n                                      <>\n                                        <FileText className=\"h-3.5 w-3.5 mr-1\" />\n                                        Request Invoice\n                                      </>\n                                    )}\n                                  </Button>\n                                )}\n                                {commission.status === 'invoiced' && (\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => handleRequestPayment(commission)}\n                                    disabled={actionLoading === commission.id}\n                                  >\n                                    {actionLoading === commission.id ? (\n                                      <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n                                    ) : (\n                                      <>\n                                        <CreditCard className=\"h-3.5 w-3.5 mr-1\" />\n                                        Request Payment\n                                      </>\n                                    )}\n                                  </Button>\n                                )}\n                              </div>\n                            </div>\n                          )\n                        })}\n                      </CardContent>\n                    </Card>\n                  ) : (\n                    <Card>\n                      <CardContent className=\"py-6 text-center text-muted-foreground text-sm\">\n                        No commissions recorded yet\n                      </CardContent>\n                    </Card>\n                  )}\n                </TabsContent>\n\n                {/* Agreements Tab */}\n                <TabsContent value=\"agreements\" className=\"space-y-4 mt-4\">\n                  {data.placement_agreements.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <Handshake className=\"h-10 w-10 text-muted-foreground mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">No placement agreements</p>\n                    </div>\n                  ) : (\n                    data.placement_agreements.map((agreement) => (\n                      <Card key={agreement.id}>\n                        <CardHeader className=\"pb-2\">\n                          <div className=\"flex items-center justify-between\">\n                            <CardTitle className=\"text-sm capitalize\">\n                              {agreement.agreement_type.replace('_', ' ')} Agreement\n                            </CardTitle>\n                            <Badge\n                              variant=\"outline\"\n                              className={cn('capitalize', STATUS_STYLES[agreement.status])}\n                            >\n                              {agreement.status.replace(/_/g, ' ')}\n                            </Badge>\n                          </div>\n                        </CardHeader>\n                        <CardContent className=\"space-y-2\">\n                          <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                            <div>\n                              <span className=\"text-muted-foreground\">Commission:</span>\n                              <span className=\"ml-1 font-medium\">\n                                {(agreement.default_commission_bps / 100).toFixed(2)}%\n                              </span>\n                            </div>\n                            {agreement.commission_cap_amount && (\n                              <div>\n                                <span className=\"text-muted-foreground\">Cap:</span>\n                                <span className=\"ml-1 font-medium\">\n                                  {formatCurrency(agreement.commission_cap_amount, 'USD')}\n                                </span>\n                              </div>\n                            )}\n                            {agreement.territory && (\n                              <div>\n                                <span className=\"text-muted-foreground\">Territory:</span>\n                                <span className=\"ml-1\">{agreement.territory}</span>\n                              </div>\n                            )}\n                            {agreement.exclusivity_level && (\n                              <div>\n                                <span className=\"text-muted-foreground\">Exclusivity:</span>\n                                <span className=\"ml-1 capitalize\">\n                                  {agreement.exclusivity_level.replace('_', ' ')}\n                                </span>\n                              </div>\n                            )}\n                          </div>\n                          {agreement.effective_date && (\n                            <div className=\"text-xs text-muted-foreground\">\n                              Effective: {formatDate(agreement.effective_date)}\n                              {agreement.expiry_date && ` - ${formatDate(agreement.expiry_date)}`}\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </TabsContent>\n\n                {/* Referrals Tab */}\n                <TabsContent value=\"referrals\" className=\"space-y-4 mt-4\">\n                  {data.recent_referrals.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <Users className=\"h-10 w-10 text-muted-foreground mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">No referrals yet</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {data.recent_referrals.map((referral) => (\n                        <Card key={referral.id} className=\"p-3\">\n                          <div className=\"flex items-center justify-between\">\n                            <div>\n                              <div className=\"font-medium text-sm\">\n                                {referral.investor?.name || 'Unknown Investor'}\n                              </div>\n                              <div className=\"text-xs text-muted-foreground\">\n                                {referral.deal?.name || 'Unknown Deal'}\n                              </div>\n                            </div>\n                            <div className=\"text-xs text-muted-foreground\">\n                              {formatDate(referral.created_at)}\n                            </div>\n                          </div>\n                        </Card>\n                      ))}\n                    </div>\n                  )}\n                </TabsContent>\n              </Tabs>\n            </>\n          ) : null}\n        </SheetContent>\n      </Sheet>\n\n      {data && (\n        <RecordCPCommissionDialog\n          open={recordCommissionOpen}\n          onOpenChange={setRecordCommissionOpen}\n          commercialPartnerId={data.commercial_partner.id}\n          commercialPartnerName={data.commercial_partner.name}\n          deals={data.deals}\n          feePlans={data.fee_plans}\n          onSuccess={handleCommissionRecorded}\n        />\n      )}\n    </>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Loader2, Calculator } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n  currency?: string | null\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  components: any[]\n}\n\ninterface RecordCPCommissionDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  commercialPartnerId: string\n  commercialPartnerName: string\n  deals: Deal[]\n  feePlans: FeePlan[]\n  onSuccess: () => void\n}\n\nconst BASIS_TYPES = [\n  { value: 'invested_amount', label: 'Invested Amount' },\n  { value: 'spread', label: 'Spread' },\n  { value: 'management_fee', label: 'Management Fee' },\n  { value: 'performance_fee', label: 'Performance Fee' },\n]\n\nexport function RecordCPCommissionDialog({\n  open,\n  onOpenChange,\n  commercialPartnerId,\n  commercialPartnerName,\n  deals,\n  feePlans,\n  onSuccess,\n}: RecordCPCommissionDialogProps) {\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Form state - use 'none' as placeholder for unselected state (Radix doesn't allow empty strings)\n  const [dealId, setDealId] = useState<string>('none')\n  const [feePlanId, setFeePlanId] = useState<string>('none')\n  const [basisType, setBasisType] = useState<string>('invested_amount')\n  const [rateBps, setRateBps] = useState<string>('')\n  const [baseAmount, setBaseAmount] = useState<string>('')\n  const [accrualAmount, setAccrualAmount] = useState<string>('')\n  const [currency, setCurrency] = useState<string>('USD')\n  const [paymentDueDate, setPaymentDueDate] = useState<string>('')\n  const [notes, setNotes] = useState<string>('')\n\n  // Reset form when dialog opens\n  useEffect(() => {\n    if (open) {\n      setDealId('none')\n      setFeePlanId('none')\n      setBasisType('invested_amount')\n      setRateBps('')\n      setBaseAmount('')\n      setAccrualAmount('')\n      setCurrency('USD')\n      setPaymentDueDate('')\n      setNotes('')\n      setError(null)\n    }\n  }, [open])\n\n  // Auto-calculate accrual when rate and base amount change\n  useEffect(() => {\n    if (rateBps && baseAmount) {\n      const rate = parseFloat(rateBps) / 10000 // Convert bps to decimal\n      const base = parseFloat(baseAmount)\n      if (!isNaN(rate) && !isNaN(base)) {\n        const calculated = (base * rate).toFixed(2)\n        setAccrualAmount(calculated)\n      }\n    }\n  }, [rateBps, baseAmount])\n\n  // Update currency when deal changes\n  useEffect(() => {\n    if (dealId && dealId !== 'none') {\n      const deal = deals.find(d => d.id === dealId)\n      if (deal?.currency) {\n        setCurrency(deal.currency)\n      }\n    }\n  }, [dealId, deals])\n\n  // Auto-fill rate from fee plan\n  useEffect(() => {\n    if (feePlanId && feePlanId !== 'none') {\n      const plan = feePlans.find(p => p.id === feePlanId)\n      if (plan?.components && plan.components.length > 0) {\n        // Find first component with rate_bps\n        const comp = plan.components.find((c: any) => c.rate_bps)\n        if (comp?.rate_bps) {\n          setRateBps(comp.rate_bps.toString())\n        }\n      }\n    }\n  }, [feePlanId, feePlans])\n\n  const handleSubmit = async () => {\n    // Validation\n    if (!rateBps || parseFloat(rateBps) <= 0) {\n      setError('Rate is required and must be greater than 0')\n      return\n    }\n    if (!accrualAmount || parseFloat(accrualAmount) <= 0) {\n      setError('Commission amount is required and must be greater than 0')\n      return\n    }\n\n    setSaving(true)\n    setError(null)\n\n    try {\n      const payload = {\n        commercial_partner_id: commercialPartnerId,\n        deal_id: dealId !== 'none' ? dealId : undefined,\n        fee_plan_id: feePlanId !== 'none' ? feePlanId : undefined,\n        basis_type: basisType,\n        rate_bps: parseInt(rateBps, 10),\n        base_amount: baseAmount ? parseFloat(baseAmount) : undefined,\n        accrual_amount: parseFloat(accrualAmount),\n        currency,\n        payment_due_date: paymentDueDate || undefined,\n        notes: notes || undefined,\n      }\n\n      const response = await fetch('/api/arrangers/me/commercial-partner-commissions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to record commission')\n      }\n\n      onSuccess()\n      onOpenChange(false)\n    } catch (err) {\n      console.error('[RecordCPCommissionDialog] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to record commission')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const ratePercent = rateBps ? (parseFloat(rateBps) / 100).toFixed(2) : '0.00'\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Record Commission</DialogTitle>\n          <DialogDescription>\n            Record a commission owed to {commercialPartnerName}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded\">\n              {error}\n            </div>\n          )}\n\n          {/* Deal Selection */}\n          <div className=\"space-y-2\">\n            <Label>Deal (Optional)</Label>\n            <Select value={dealId} onValueChange={setDealId}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select deal...\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"none\">No specific deal</SelectItem>\n                {deals.map((deal) => (\n                  <SelectItem key={deal.id} value={deal.id}>\n                    {deal.name} {deal.company_name && `(${deal.company_name})`}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Fee Plan Selection */}\n          {feePlans.length > 0 && (\n            <div className=\"space-y-2\">\n              <Label>Fee Plan (Optional)</Label>\n              <Select value={feePlanId} onValueChange={setFeePlanId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select fee plan...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"none\">No fee plan</SelectItem>\n                  {feePlans.map((plan) => (\n                    <SelectItem key={plan.id} value={plan.id}>\n                      {plan.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n\n          {/* Basis Type */}\n          <div className=\"space-y-2\">\n            <Label>Commission Basis</Label>\n            <Select value={basisType} onValueChange={setBasisType}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {BASIS_TYPES.map((type) => (\n                  <SelectItem key={type.value} value={type.value}>\n                    {type.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Rate and Base Amount */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label>Rate (basis points) *</Label>\n              <Input\n                type=\"number\"\n                value={rateBps}\n                onChange={(e) => setRateBps(e.target.value)}\n                placeholder=\"e.g., 100 = 1%\"\n              />\n              {rateBps && (\n                <p className=\"text-xs text-muted-foreground\">= {ratePercent}%</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Base Amount ({currency})</Label>\n              <Input\n                type=\"number\"\n                value={baseAmount}\n                onChange={(e) => setBaseAmount(e.target.value)}\n                placeholder=\"e.g., 100000\"\n              />\n            </div>\n          </div>\n\n          {/* Commission Amount */}\n          <div className=\"space-y-2\">\n            <Label className=\"flex items-center gap-2\">\n              Commission Amount ({currency}) *\n              {rateBps && baseAmount && (\n                <span className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <Calculator className=\"h-3 w-3\" />\n                  Auto-calculated\n                </span>\n              )}\n            </Label>\n            <Input\n              type=\"number\"\n              value={accrualAmount}\n              onChange={(e) => setAccrualAmount(e.target.value)}\n              placeholder=\"Commission amount\"\n            />\n            {accrualAmount && (\n              <p className=\"text-sm font-medium text-primary\">\n                {formatCurrency(parseFloat(accrualAmount), currency)}\n              </p>\n            )}\n          </div>\n\n          {/* Payment Due Date */}\n          <div className=\"space-y-2\">\n            <Label>Payment Due Date (Optional)</Label>\n            <Input\n              type=\"date\"\n              value={paymentDueDate}\n              onChange={(e) => setPaymentDueDate(e.target.value)}\n            />\n          </div>\n\n          {/* Notes */}\n          <div className=\"space-y-2\">\n            <Label>Notes (Optional)</Label>\n            <Textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Any additional notes...\"\n              rows={2}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={saving}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={saving}>\n            {saving ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Recording...\n              </>\n            ) : (\n              'Record Commission'\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}