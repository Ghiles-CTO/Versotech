module.exports=[610947,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(284169),e=a.i(421908),f=a.i(15788),g=a.i(181608),h=a.i(877028),i=a.i(975965),j=a.i(405398),k=a.i(278541),l=a.i(325866),m=a.i(724070),n=a.i(155508),o=a.i(816854),p=a.i(966494),q=a.i(365966),r=a.i(497412),s=a.i(470305),t=a.i(663475),u=a.i(249464),v=a.i(951870),w=a.i(191675),x=a.i(899750),y=a.i(537412);function z({subscription:a,open:d,onOpenChange:f,onSuccess:h}){let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)({status:a.status||"pending",effective_date:a.effective_date||"",committed_at:a.committed_at||"",funding_due_at:a.funding_due_at||"",contract_date:a.contract_date||"",opportunity_name:a.opportunity_name||"",sourcing_contract_ref:a.sourcing_contract_ref||"",commitment:a.commitment?.toString()||"0",currency:a.currency||"USD",units:a.units?.toString()||"",num_shares:a.num_shares?.toString()||"",price_per_share:a.price_per_share?.toString()||"",cost_per_share:a.cost_per_share?.toString()||"",spread_per_share:a.spread_per_share?.toString()||"",spread_fee_amount:a.spread_fee_amount?.toString()||"",subscription_fee_percent:a.subscription_fee_percent?.toString()||"",subscription_fee_amount:a.subscription_fee_amount?.toString()||"",bd_fee_percent:a.bd_fee_percent?.toString()||"",bd_fee_amount:a.bd_fee_amount?.toString()||"",finra_fee_amount:a.finra_fee_amount?.toString()||"",performance_fee_tier1_percent:a.performance_fee_tier1_percent?.toString()||"",performance_fee_tier1_threshold:a.performance_fee_tier1_threshold?.toString()||"",performance_fee_tier2_percent:a.performance_fee_tier2_percent?.toString()||"",performance_fee_tier2_threshold:a.performance_fee_tier2_threshold?.toString()||"",funded_amount:a.funded_amount?.toString()||"0",outstanding_amount:a.outstanding_amount?.toString()||"",capital_calls_total:a.capital_calls_total?.toString()||"0",distributions_total:a.distributions_total?.toString()||"0",current_nav:a.current_nav?.toString()||"",introducer_id:a.introducer_id||"",introduction_id:a.introduction_id||"",acknowledgement_notes:a.acknowledgement_notes||""});(0,c.useEffect)(()=>{let a=parseFloat(k.price_per_share)||0,b=parseFloat(k.cost_per_share)||0,c=parseFloat(k.num_shares)||0;if(a>0&&b>0){let d=a-b,e=d*c;l(a=>({...a,spread_per_share:d.toFixed(6),spread_fee_amount:e.toFixed(2)}))}},[k.price_per_share,k.cost_per_share,k.num_shares]);let m=async b=>{b.preventDefault(),j(!0);try{let b={status:k.status,effective_date:k.effective_date||null,committed_at:k.committed_at||null,funding_due_at:k.funding_due_at||null,contract_date:k.contract_date||null,opportunity_name:k.opportunity_name||null,sourcing_contract_ref:k.sourcing_contract_ref||null,commitment:parseFloat(k.commitment),currency:k.currency,units:k.units?parseFloat(k.units):null,num_shares:k.num_shares?parseFloat(k.num_shares):null,price_per_share:k.price_per_share?parseFloat(k.price_per_share):null,cost_per_share:k.cost_per_share?parseFloat(k.cost_per_share):null,spread_per_share:k.spread_per_share?parseFloat(k.spread_per_share):null,spread_fee_amount:k.spread_fee_amount?parseFloat(k.spread_fee_amount):null,subscription_fee_percent:k.subscription_fee_percent?parseFloat(k.subscription_fee_percent):null,subscription_fee_amount:k.subscription_fee_amount?parseFloat(k.subscription_fee_amount):null,bd_fee_percent:k.bd_fee_percent?parseFloat(k.bd_fee_percent):null,bd_fee_amount:k.bd_fee_amount?parseFloat(k.bd_fee_amount):null,finra_fee_amount:k.finra_fee_amount?parseFloat(k.finra_fee_amount):null,performance_fee_tier1_percent:k.performance_fee_tier1_percent?parseFloat(k.performance_fee_tier1_percent):null,performance_fee_tier1_threshold:k.performance_fee_tier1_threshold?parseFloat(k.performance_fee_tier1_threshold):null,performance_fee_tier2_percent:k.performance_fee_tier2_percent?parseFloat(k.performance_fee_tier2_percent):null,performance_fee_tier2_threshold:k.performance_fee_tier2_threshold?parseFloat(k.performance_fee_tier2_threshold):null,funded_amount:parseFloat(k.funded_amount),outstanding_amount:k.outstanding_amount?parseFloat(k.outstanding_amount):null,capital_calls_total:parseFloat(k.capital_calls_total),distributions_total:parseFloat(k.distributions_total),current_nav:k.current_nav?parseFloat(k.current_nav):null,introducer_id:k.introducer_id||null,introduction_id:k.introduction_id||null,acknowledgement_notes:k.acknowledgement_notes||null},c=await fetch(`/api/subscriptions/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to update subscription")}x.toast.success("Subscription updated successfully"),h(),f(!1)}catch(a){console.error("Update error:",a),x.toast.error(a instanceof Error?a.message:"Failed to update subscription")}finally{j(!1)}};return(0,b.jsx)(s.Dialog,{open:d,onOpenChange:f,children:(0,b.jsxs)(s.DialogContent,{className:"w-[calc(100vw-2rem)] sm:max-w-5xl max-h-[90vh] bg-card text-foreground border-border",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsxs)(s.DialogTitle,{className:"text-foreground",children:["Edit Subscription #",a.subscription_number]}),(0,b.jsxs)(s.DialogDescription,{className:"text-muted-foreground",children:["Update all subscription details for ",a.investor?.legal_name||"Unknown Investor"]})]}),(0,b.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,b.jsxs)(g.Tabs,{defaultValue:"basic",className:"w-full",id:`subscription-edit-tabs-${a.id}`,children:[(0,b.jsxs)(g.TabsList,{className:"grid w-full grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 bg-muted",children:[(0,b.jsx)(g.TabsTrigger,{value:"basic",className:"text-xs",children:"Basic"}),(0,b.jsx)(g.TabsTrigger,{value:"financial",className:"text-xs",children:"Financial"}),(0,b.jsx)(g.TabsTrigger,{value:"shares",className:"text-xs",children:"Shares"}),(0,b.jsx)(g.TabsTrigger,{value:"fees",className:"text-xs",children:"Fees"}),(0,b.jsx)(g.TabsTrigger,{value:"tracking",className:"text-xs",children:"Tracking"}),(0,b.jsx)(g.TabsTrigger,{value:"relationships",className:"text-xs",children:"Relations"}),(0,b.jsx)(g.TabsTrigger,{value:"notes",className:"text-xs",children:"Notes"})]}),(0,b.jsxs)(y.ScrollArea,{className:"h-[400px] pr-4",children:[(0,b.jsx)(g.TabsContent,{value:"basic",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"status",className:"text-foreground",children:"Status *"}),(0,b.jsxs)(v.Select,{value:k.status,onValueChange:a=>l({...k,status:a}),children:[(0,b.jsx)(v.SelectTrigger,{id:"status",className:"bg-muted border-border text-foreground",children:(0,b.jsx)(v.SelectValue,{})}),(0,b.jsxs)(v.SelectContent,{className:"bg-muted border-border",children:[(0,b.jsx)(v.SelectItem,{value:"pending",className:"text-foreground",children:"Pending"}),(0,b.jsx)(v.SelectItem,{value:"committed",className:"text-foreground",children:"Committed"}),(0,b.jsx)(v.SelectItem,{value:"partially_funded",className:"text-foreground",children:"Partially Funded"}),(0,b.jsx)(v.SelectItem,{value:"funded",className:"text-foreground",children:"Funded"}),(0,b.jsx)(v.SelectItem,{value:"active",className:"text-foreground",children:"Active"}),(0,b.jsx)(v.SelectItem,{value:"closed",className:"text-foreground",children:"Closed"}),(0,b.jsx)(v.SelectItem,{value:"cancelled",className:"text-foreground",children:"Cancelled"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"opportunity_name",className:"text-foreground",children:"Opportunity Name"}),(0,b.jsx)(t.Input,{id:"opportunity_name",type:"text",value:k.opportunity_name,onChange:a=>l({...k,opportunity_name:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Deal or opportunity name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"effective_date",className:"text-foreground",children:"Effective Date"}),(0,b.jsx)(t.Input,{id:"effective_date",type:"date",value:k.effective_date,onChange:a=>l({...k,effective_date:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"committed_at",className:"text-foreground",children:"Committed Date"}),(0,b.jsx)(t.Input,{id:"committed_at",type:"date",value:k.committed_at,onChange:a=>l({...k,committed_at:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"funding_due_at",className:"text-foreground",children:"Funding Due Date"}),(0,b.jsx)(t.Input,{id:"funding_due_at",type:"date",value:k.funding_due_at,onChange:a=>l({...k,funding_due_at:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"contract_date",className:"text-foreground",children:"Contract Date"}),(0,b.jsx)(t.Input,{id:"contract_date",type:"date",value:k.contract_date,onChange:a=>l({...k,contract_date:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)(u.Label,{htmlFor:"sourcing_contract_ref",className:"text-foreground",children:"Sourcing Contract Reference"}),(0,b.jsx)(t.Input,{id:"sourcing_contract_ref",type:"text",value:k.sourcing_contract_ref,onChange:a=>l({...k,sourcing_contract_ref:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"External contract reference"})]})]})}),(0,b.jsx)(g.TabsContent,{value:"financial",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"commitment",className:"text-foreground",children:"Commitment Amount *"}),(0,b.jsx)(t.Input,{id:"commitment",type:"number",step:"0.01",value:k.commitment,onChange:a=>l({...k,commitment:a.target.value}),className:"bg-muted border-border text-foreground",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"currency",className:"text-foreground",children:"Currency *"}),(0,b.jsxs)(v.Select,{value:k.currency,onValueChange:a=>l({...k,currency:a}),children:[(0,b.jsx)(v.SelectTrigger,{id:"currency",className:"bg-muted border-border text-foreground",children:(0,b.jsx)(v.SelectValue,{})}),(0,b.jsxs)(v.SelectContent,{className:"bg-muted border-border",children:[(0,b.jsx)(v.SelectItem,{value:"USD",className:"text-foreground",children:"USD"}),(0,b.jsx)(v.SelectItem,{value:"EUR",className:"text-foreground",children:"EUR"}),(0,b.jsx)(v.SelectItem,{value:"GBP",className:"text-foreground",children:"GBP"}),(0,b.jsx)(v.SelectItem,{value:"AUD",className:"text-foreground",children:"AUD"}),(0,b.jsx)(v.SelectItem,{value:"CAD",className:"text-foreground",children:"CAD"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)(u.Label,{htmlFor:"units",className:"text-foreground",children:"Units"}),(0,b.jsx)(t.Input,{id:"units",type:"number",step:"0.01",value:k.units,onChange:a=>l({...k,units:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Number of units"})]})]})}),(0,b.jsx)(g.TabsContent,{value:"shares",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"num_shares",className:"text-foreground",children:"Number of Shares"}),(0,b.jsx)(t.Input,{id:"num_shares",type:"number",step:"1",value:k.num_shares,onChange:a=>l({...k,num_shares:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Total shares"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"price_per_share",className:"text-foreground",children:"Price Per Share"}),(0,b.jsx)(t.Input,{id:"price_per_share",type:"number",step:"0.01",value:k.price_per_share,onChange:a=>l({...k,price_per_share:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Sell price"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"cost_per_share",className:"text-foreground",children:"Cost Per Share"}),(0,b.jsx)(t.Input,{id:"cost_per_share",type:"number",step:"0.01",value:k.cost_per_share,onChange:a=>l({...k,cost_per_share:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Acquisition cost"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(u.Label,{htmlFor:"spread_per_share",className:"text-foreground",children:["Spread Per Share",(0,b.jsx)("span",{className:"ml-2 text-xs text-amber-400",children:"(auto-calculated)"})]}),(0,b.jsx)(t.Input,{id:"spread_per_share",type:"number",step:"0.01",value:k.spread_per_share,onChange:a=>l({...k,spread_per_share:a.target.value}),className:"bg-muted border-amber-500/30 text-foreground",placeholder:"Spread markup"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground/70",children:"Price − Cost (can override)"})]}),(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsxs)(u.Label,{htmlFor:"spread_fee_amount",className:"text-foreground",children:["Spread Fee Amount",(0,b.jsx)("span",{className:"ml-2 text-xs text-amber-400",children:"(auto-calculated)"})]}),(0,b.jsx)(t.Input,{id:"spread_fee_amount",type:"number",step:"0.01",value:k.spread_fee_amount,onChange:a=>l({...k,spread_fee_amount:a.target.value}),className:"bg-muted border-amber-500/30 text-foreground",placeholder:"Total spread fee"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground/70",children:"Spread × Shares (can override)"})]})]})}),(0,b.jsx)(g.TabsContent,{value:"fees",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Subscription Fees"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"subscription_fee_percent",className:"text-foreground",children:"Subscription Fee %"}),(0,b.jsx)(t.Input,{id:"subscription_fee_percent",type:"number",step:"0.01",value:k.subscription_fee_percent,onChange:a=>l({...k,subscription_fee_percent:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"e.g., 2.0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"subscription_fee_amount",className:"text-foreground",children:"Subscription Fee Amount"}),(0,b.jsx)(t.Input,{id:"subscription_fee_amount",type:"number",step:"0.01",value:k.subscription_fee_amount,onChange:a=>l({...k,subscription_fee_amount:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Fixed amount"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Broker-Dealer Fees"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"bd_fee_percent",className:"text-foreground",children:"BD Fee %"}),(0,b.jsx)(t.Input,{id:"bd_fee_percent",type:"number",step:"0.01",value:k.bd_fee_percent,onChange:a=>l({...k,bd_fee_percent:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"e.g., 1.5"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"bd_fee_amount",className:"text-foreground",children:"BD Fee Amount"}),(0,b.jsx)(t.Input,{id:"bd_fee_amount",type:"number",step:"0.01",value:k.bd_fee_amount,onChange:a=>l({...k,bd_fee_amount:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Fixed amount"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Regulatory Fees"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"finra_fee_amount",className:"text-foreground",children:"FINRA Fee Amount"}),(0,b.jsx)(t.Input,{id:"finra_fee_amount",type:"number",step:"0.01",value:k.finra_fee_amount,onChange:a=>l({...k,finra_fee_amount:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"FINRA regulatory fee"})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Performance Fees (Tier Structure)"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"performance_fee_tier1_percent",className:"text-foreground",children:"Tier 1 %"}),(0,b.jsx)(t.Input,{id:"performance_fee_tier1_percent",type:"number",step:"0.01",value:k.performance_fee_tier1_percent,onChange:a=>l({...k,performance_fee_tier1_percent:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"e.g., 20.0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"performance_fee_tier1_threshold",className:"text-foreground",children:"Tier 1 Threshold"}),(0,b.jsx)(t.Input,{id:"performance_fee_tier1_threshold",type:"number",step:"0.01",value:k.performance_fee_tier1_threshold,onChange:a=>l({...k,performance_fee_tier1_threshold:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Hurdle amount"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"performance_fee_tier2_percent",className:"text-foreground",children:"Tier 2 %"}),(0,b.jsx)(t.Input,{id:"performance_fee_tier2_percent",type:"number",step:"0.01",value:k.performance_fee_tier2_percent,onChange:a=>l({...k,performance_fee_tier2_percent:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"e.g., 30.0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"performance_fee_tier2_threshold",className:"text-foreground",children:"Tier 2 Threshold"}),(0,b.jsx)(t.Input,{id:"performance_fee_tier2_threshold",type:"number",step:"0.01",value:k.performance_fee_tier2_threshold,onChange:a=>l({...k,performance_fee_tier2_threshold:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Higher hurdle"})]})]})]})]})}),(0,b.jsx)(g.TabsContent,{value:"tracking",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"funded_amount",className:"text-foreground",children:"Funded Amount"}),(0,b.jsx)(t.Input,{id:"funded_amount",type:"number",step:"0.01",value:k.funded_amount,onChange:a=>l({...k,funded_amount:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"outstanding_amount",className:"text-foreground",children:"Outstanding Amount"}),(0,b.jsx)(t.Input,{id:"outstanding_amount",type:"number",step:"0.01",value:k.outstanding_amount,onChange:a=>l({...k,outstanding_amount:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Unfunded commitment"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"capital_calls_total",className:"text-foreground",children:"Capital Calls Total"}),(0,b.jsx)(t.Input,{id:"capital_calls_total",type:"number",step:"0.01",value:k.capital_calls_total,onChange:a=>l({...k,capital_calls_total:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"distributions_total",className:"text-foreground",children:"Distributions Total"}),(0,b.jsx)(t.Input,{id:"distributions_total",type:"number",step:"0.01",value:k.distributions_total,onChange:a=>l({...k,distributions_total:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)(u.Label,{htmlFor:"current_nav",className:"text-foreground",children:"Current NAV"}),(0,b.jsx)(t.Input,{id:"current_nav",type:"number",step:"0.01",value:k.current_nav,onChange:a=>l({...k,current_nav:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"Current net asset value"})]})]})}),(0,b.jsx)(g.TabsContent,{value:"relationships",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)(u.Label,{htmlFor:"introducer_id",className:"text-foreground",children:"Introducer ID"}),(0,b.jsx)(t.Input,{id:"introducer_id",type:"text",value:k.introducer_id,onChange:a=>l({...k,introducer_id:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"UUID of introducer"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground/70",children:"Link to introducer who referred this subscription"})]}),(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsx)(u.Label,{htmlFor:"introduction_id",className:"text-foreground",children:"Introduction ID"}),(0,b.jsx)(t.Input,{id:"introduction_id",type:"text",value:k.introduction_id,onChange:a=>l({...k,introduction_id:a.target.value}),className:"bg-muted border-border text-foreground",placeholder:"UUID of introduction record"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground/70",children:"Link to specific introduction event"})]})]})}),(0,b.jsx)(g.TabsContent,{value:"notes",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"notes",className:"text-foreground",children:"Acknowledgement Notes"}),(0,b.jsx)(w.Textarea,{id:"notes",value:k.acknowledgement_notes,onChange:a=>l({...k,acknowledgement_notes:a.target.value}),className:"bg-muted border-border text-foreground min-h-[300px]",placeholder:"Add any notes, acknowledgements, or special terms for this subscription..."})]})})]})]}),(0,b.jsxs)(s.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:i,className:"bg-muted text-foreground border-border hover:bg-muted/80",children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",disabled:i,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:i?"Saving...":"Save All Changes"})]})]})]})})}var A=a.i(479612),B=a.i(771088),C=a.i(95799);let D=(0,C.default)("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),E=(0,C.default)("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);var F=a.i(458332),G=a.i(405708),H=a.i(134303),I=a.i(289633);function J({cashflows:a,capitalCalls:d,distributions:h,currency:i,vehicleId:j,investorId:k,isStaff:l=!1}){let m=(0,I.useRouter)(),[n,o]=(0,c.useState)({open:!1,type:null}),[p,q]=(0,c.useState)({open:!1,type:null,data:null}),[r,w]=(0,c.useState)({open:!1,type:null,id:null}),[y,z]=(0,c.useState)({}),[C,J]=(0,c.useState)(!1),K=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:i||"USD",minimumFractionDigits:2}).format(a),L=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=async()=>{if(n.type){J(!0);try{let a="cashflow"===n.type?"/api/cashflows":"capitalCall"===n.type?"/api/capital-calls":"/api/distributions",b=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to create");x.toast.success(`${"cashflow"===n.type?"Cashflow":"capitalCall"===n.type?"Capital call":"Distribution"} created successfully`),o({open:!1,type:null}),z({}),m.refresh()}catch(a){x.toast.error(a.message||"Failed to create")}finally{J(!1)}}},N=async()=>{if(p.type&&p.data?.id){J(!0);try{let a="cashflow"===p.type?`/api/cashflows/${p.data.id}`:"capitalCall"===p.type?`/api/capital-calls/${p.data.id}`:`/api/distributions/${p.data.id}`,b=await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to update");x.toast.success(`${"cashflow"===p.type?"Cashflow":"capitalCall"===p.type?"Capital call":"Distribution"} updated successfully`),q({open:!1,type:null,data:null}),z({}),m.refresh()}catch(a){x.toast.error(a.message||"Failed to update")}finally{J(!1)}}},O=async()=>{if(r.type&&r.id){J(!0);try{let a="cashflow"===r.type?`/api/cashflows/${r.id}`:"capitalCall"===r.type?`/api/capital-calls/${r.id}`:`/api/distributions/${r.id}`,b=await fetch(a,{method:"DELETE"}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to delete");x.toast.success(`${"cashflow"===r.type?"Cashflow":"capitalCall"===r.type?"Capital call":"Distribution"} deleted successfully`),w({open:!1,type:null,id:null}),m.refresh()}catch(a){x.toast.error(a.message||"Failed to delete")}finally{J(!1)}}},P=a=>{z("cashflow"===a?{investor_id:k,vehicle_id:j,type:"call",amount:0,date:""}:"capitalCall"===a?{vehicle_id:j,name:"",call_pct:0,due_date:"",status:"draft"}:{vehicle_id:j,name:"",amount:0,date:"",classification:""}),o({open:!0,type:a})},Q=(a,b)=>{z(b),q({open:!0,type:a,data:b})},R=(a,b)=>{w({open:!0,type:a,id:b})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(g.Tabs,{defaultValue:"cashflows",className:"w-full",id:`capital-activity-tabs-${j}-${k}`,children:[(0,b.jsxs)(g.TabsList,{className:"bg-muted",children:[(0,b.jsxs)(g.TabsTrigger,{value:"cashflows",className:"data-[state=active]:bg-muted text-foreground",children:["Cashflows (",a.length,")"]}),(0,b.jsxs)(g.TabsTrigger,{value:"calls",className:"data-[state=active]:bg-muted text-foreground",children:["Capital Calls (",d.length,")"]}),(0,b.jsxs)(g.TabsTrigger,{value:"distributions",className:"data-[state=active]:bg-muted text-foreground",children:["Distributions (",h.length,")"]})]}),(0,b.jsxs)(g.TabsContent,{value:"cashflows",className:"mt-4",children:[l&&(0,b.jsx)("div",{className:"mb-4 flex justify-end",children:(0,b.jsxs)(e.Button,{onClick:()=>P("cashflow"),className:"bg-blue-600 hover:bg-blue-700",children:[(0,b.jsx)(G.Plus,{className:"h-4 w-4 mr-2"}),"Add Cashflow"]})}),(0,b.jsx)("div",{className:"rounded-md border border-border",children:(0,b.jsxs)(B.Table,{children:[(0,b.jsx)(B.TableHeader,{children:(0,b.jsxs)(B.TableRow,{className:"border-border hover:bg-muted/50",children:[(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Type"}),(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Date"}),(0,b.jsx)(B.TableHead,{className:"text-right text-muted-foreground",children:"Amount"}),l&&(0,b.jsx)(B.TableHead,{className:"text-right text-muted-foreground",children:"Actions"})]})}),(0,b.jsx)(B.TableBody,{children:a.length>0?a.map(a=>(0,b.jsxs)(B.TableRow,{className:"border-border hover:bg-muted/50",children:[(0,b.jsx)(B.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["contribution"===a.type||"call"===a.type?(0,b.jsx)(D,{className:"h-4 w-4 text-green-400"}):(0,b.jsx)(E,{className:"h-4 w-4 text-blue-400"}),(0,b.jsx)("span",{className:"capitalize text-foreground",children:a.type})]})}),(0,b.jsx)(B.TableCell,{className:"text-muted-foreground",children:L(a.date)}),(0,b.jsx)(B.TableCell,{className:"text-right font-semibold text-foreground",children:K(a.amount)}),l&&(0,b.jsx)(B.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>Q("cashflow",a),className:"text-blue-400 hover:text-blue-300 hover:bg-blue-900/20",children:(0,b.jsx)(F.Edit2,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>R("cashflow",a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:(0,b.jsx)(H.Trash2,{className:"h-4 w-4"})})]})})]},a.id)):(0,b.jsx)(B.TableRow,{children:(0,b.jsx)(B.TableCell,{colSpan:l?4:3,className:"text-center text-muted-foreground py-8",children:"No cashflows recorded yet"})})})]})})]}),(0,b.jsxs)(g.TabsContent,{value:"calls",className:"mt-4",children:[l&&(0,b.jsx)("div",{className:"mb-4 flex justify-end",children:(0,b.jsxs)(e.Button,{onClick:()=>P("capitalCall"),className:"bg-blue-600 hover:bg-blue-700",children:[(0,b.jsx)(G.Plus,{className:"h-4 w-4 mr-2"}),"Add Capital Call"]})}),(0,b.jsx)("div",{className:"rounded-md border border-border",children:(0,b.jsxs)(B.Table,{children:[(0,b.jsx)(B.TableHeader,{children:(0,b.jsxs)(B.TableRow,{className:"border-border hover:bg-muted/50",children:[(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Call Name"}),(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Call %"}),(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Due Date"}),(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Status"}),l&&(0,b.jsx)(B.TableHead,{className:"text-right text-muted-foreground",children:"Actions"})]})}),(0,b.jsx)(B.TableBody,{children:d.length>0?d.map(a=>(0,b.jsxs)(B.TableRow,{className:"border-border hover:bg-muted/50",children:[(0,b.jsx)(B.TableCell,{className:"font-medium text-foreground",children:a.name}),(0,b.jsxs)(B.TableCell,{className:"text-muted-foreground",children:[a.call_pct,"%"]}),(0,b.jsx)(B.TableCell,{className:"text-muted-foreground",children:L(a.due_date)}),(0,b.jsx)(B.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"completed"===a.status?"default":"secondary",className:"completed"===a.status?"bg-green-900 text-green-200":"bg-yellow-900 text-yellow-200",children:a.status})}),l&&(0,b.jsx)(B.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>Q("capitalCall",a),className:"text-blue-400 hover:text-blue-300 hover:bg-blue-900/20",children:(0,b.jsx)(F.Edit2,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>R("capitalCall",a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:(0,b.jsx)(H.Trash2,{className:"h-4 w-4"})})]})})]},a.id)):(0,b.jsx)(B.TableRow,{children:(0,b.jsx)(B.TableCell,{colSpan:l?5:4,className:"text-center text-muted-foreground py-8",children:"No capital calls issued yet"})})})]})})]}),(0,b.jsxs)(g.TabsContent,{value:"distributions",className:"mt-4",children:[l&&(0,b.jsx)("div",{className:"mb-4 flex justify-end",children:(0,b.jsxs)(e.Button,{onClick:()=>P("distribution"),className:"bg-blue-600 hover:bg-blue-700",children:[(0,b.jsx)(G.Plus,{className:"h-4 w-4 mr-2"}),"Add Distribution"]})}),(0,b.jsx)("div",{className:"rounded-md border border-border",children:(0,b.jsxs)(B.Table,{children:[(0,b.jsx)(B.TableHeader,{children:(0,b.jsxs)(B.TableRow,{className:"border-border hover:bg-muted/50",children:[(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Distribution Name"}),(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Date"}),(0,b.jsx)(B.TableHead,{className:"text-muted-foreground",children:"Classification"}),(0,b.jsx)(B.TableHead,{className:"text-right text-muted-foreground",children:"Amount"}),l&&(0,b.jsx)(B.TableHead,{className:"text-right text-muted-foreground",children:"Actions"})]})}),(0,b.jsx)(B.TableBody,{children:h.length>0?h.map(a=>(0,b.jsxs)(B.TableRow,{className:"border-border hover:bg-muted/50",children:[(0,b.jsx)(B.TableCell,{className:"font-medium text-foreground",children:a.name}),(0,b.jsx)(B.TableCell,{className:"text-muted-foreground",children:L(a.date)}),(0,b.jsx)(B.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",className:"capitalize text-blue-300 border-blue-700",children:a.classification})}),(0,b.jsx)(B.TableCell,{className:"text-right font-semibold text-foreground",children:K(a.amount)}),l&&(0,b.jsx)(B.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>Q("distribution",a),className:"text-blue-400 hover:text-blue-300 hover:bg-blue-900/20",children:(0,b.jsx)(F.Edit2,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>R("distribution",a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:(0,b.jsx)(H.Trash2,{className:"h-4 w-4"})})]})})]},a.id)):(0,b.jsx)(B.TableRow,{children:(0,b.jsx)(B.TableCell,{colSpan:l?5:4,className:"text-center text-muted-foreground py-8",children:"No distributions made yet"})})})]})})]})]}),(0,b.jsx)(s.Dialog,{open:n.open||p.open,onOpenChange:a=>{a||(o({open:!1,type:null}),q({open:!1,type:null,data:null}),z({}))},children:(0,b.jsxs)(s.DialogContent,{className:"bg-card text-foreground border-border",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsxs)(s.DialogTitle,{children:[p.open?"Edit":"Create"," ","cashflow"===n.type||"cashflow"===p.type?"Cashflow":"capitalCall"===n.type||"capitalCall"===p.type?"Capital Call":"Distribution"]}),(0,b.jsx)(s.DialogDescription,{className:"text-muted-foreground",children:p.open?"Update the details below":"Fill in the details below"})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[("cashflow"===n.type||"cashflow"===p.type)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"type",children:"Type"}),(0,b.jsxs)(v.Select,{value:y.type||"call",onValueChange:a=>z({...y,type:a}),children:[(0,b.jsx)(v.SelectTrigger,{className:"bg-muted border-border",children:(0,b.jsx)(v.SelectValue,{})}),(0,b.jsxs)(v.SelectContent,{className:"bg-muted border-border",children:[(0,b.jsx)(v.SelectItem,{value:"call",children:"Call"}),(0,b.jsx)(v.SelectItem,{value:"distribution",children:"Distribution"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"amount",children:"Amount"}),(0,b.jsx)(t.Input,{id:"amount",type:"number",step:"0.01",value:y.amount||0,onChange:a=>z({...y,amount:parseFloat(a.target.value)}),className:"bg-muted border-border"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"date",children:"Date"}),(0,b.jsx)(t.Input,{id:"date",type:"date",value:y.date||"",onChange:a=>z({...y,date:a.target.value}),className:"bg-muted border-border"})]})]}),("capitalCall"===n.type||"capitalCall"===p.type)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"name",children:"Name"}),(0,b.jsx)(t.Input,{id:"name",value:y.name||"",onChange:a=>z({...y,name:a.target.value}),className:"bg-muted border-border"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"call_pct",children:"Call %"}),(0,b.jsx)(t.Input,{id:"call_pct",type:"number",step:"0.01",min:"0",max:"100",value:y.call_pct||0,onChange:a=>z({...y,call_pct:parseFloat(a.target.value)}),className:"bg-muted border-border"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"due_date",children:"Due Date"}),(0,b.jsx)(t.Input,{id:"due_date",type:"date",value:y.due_date||"",onChange:a=>z({...y,due_date:a.target.value}),className:"bg-muted border-border"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"status",children:"Status"}),(0,b.jsxs)(v.Select,{value:y.status||"draft",onValueChange:a=>z({...y,status:a}),children:[(0,b.jsx)(v.SelectTrigger,{className:"bg-muted border-border",children:(0,b.jsx)(v.SelectValue,{})}),(0,b.jsxs)(v.SelectContent,{className:"bg-muted border-border",children:[(0,b.jsx)(v.SelectItem,{value:"draft",children:"Draft"}),(0,b.jsx)(v.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(v.SelectItem,{value:"completed",children:"Completed"}),(0,b.jsx)(v.SelectItem,{value:"cancelled",children:"Cancelled"})]})]})]})]}),("distribution"===n.type||"distribution"===p.type)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"name",children:"Name"}),(0,b.jsx)(t.Input,{id:"name",value:y.name||"",onChange:a=>z({...y,name:a.target.value}),className:"bg-muted border-border"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"amount",children:"Amount"}),(0,b.jsx)(t.Input,{id:"amount",type:"number",step:"0.01",value:y.amount||0,onChange:a=>z({...y,amount:parseFloat(a.target.value)}),className:"bg-muted border-border"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"date",children:"Date"}),(0,b.jsx)(t.Input,{id:"date",type:"date",value:y.date||"",onChange:a=>z({...y,date:a.target.value}),className:"bg-muted border-border"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(u.Label,{htmlFor:"classification",children:"Classification"}),(0,b.jsx)(t.Input,{id:"classification",value:y.classification||"",onChange:a=>z({...y,classification:a.target.value}),className:"bg-muted border-border",placeholder:"e.g., Return of Capital, Income"})]})]})]}),(0,b.jsxs)(s.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>{o({open:!1,type:null}),q({open:!1,type:null,data:null}),z({})},disabled:C,className:"border-border text-muted-foreground hover:bg-muted",children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:p.open?N:M,disabled:C,className:"bg-blue-600 hover:bg-blue-700",children:C?"Saving...":p.open?"Update":"Create"})]})]})}),(0,b.jsx)(A.AlertDialog,{open:r.open,onOpenChange:a=>{a||w({open:!1,type:null,id:null})},children:(0,b.jsxs)(A.AlertDialogContent,{className:"bg-card text-foreground border-border",children:[(0,b.jsxs)(A.AlertDialogHeader,{children:[(0,b.jsx)(A.AlertDialogTitle,{children:"Are you sure?"}),(0,b.jsxs)(A.AlertDialogDescription,{className:"text-muted-foreground",children:["This action cannot be undone. This will permanently delete this"," ","cashflow"===r.type?"cashflow":"capitalCall"===r.type?"capital call":"distribution","."]})]}),(0,b.jsxs)(A.AlertDialogFooter,{children:[(0,b.jsx)(A.AlertDialogCancel,{className:"border-border text-muted-foreground hover:bg-muted",children:"Cancel"}),(0,b.jsx)(A.AlertDialogAction,{onClick:O,disabled:C,className:"bg-red-600 hover:bg-red-700",children:C?"Deleting...":"Delete"})]})]})})]})}var K=a.i(468095),L=a.i(425622),M=a.i(441278),N=a.i(42329),O=a.i(877918),P=a.i(3321),Q=a.i(873785),R=a.i(264890),S=a.i(908513),T=a.i(680039),U=a.i(38125);let V=(0,C.default)("file-type",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);var W=a.i(160409),X=a.i(518173),Y=a.i(211374),Z=a.i(403205),$=a.i(92881),_=a.i(478870),aa=a.i(439467),ab=a.i(871057),ac=a.i(696661);function ad({open:a,onOpenChange:d,subscriptionId:g,documentId:h,documentName:i,onConfirm:j}){let[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,t]=(0,c.useState)(null),[v,w]=(0,c.useState)("individual"),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)("ceo"),[B,C]=(0,c.useState)(null);(0,c.useEffect)(()=>{a&&D()},[a,g]);let D=async()=>{o(!0),t(null);try{let[a,b]=await Promise.all([fetch(`/api/subscriptions/${g}/signatories`),fetch(`/api/documents/${h}`)]);if(!a.ok)throw Error("Failed to fetch signatories");let c=await a.json(),d=(c.signatories||[]).filter(a=>a.is_signatory||a.is_primary);if(m(d),w(c.investor_type||"individual"),c.arranger?(y(c.arranger),A("arranger")):(y(null),A("ceo")),b.ok){let a=await b.json();a.countersigner_type&&(C({countersigner_type:a.countersigner_type,countersigner_name:a.countersigner_name,countersigner_title:a.countersigner_title}),A(a.countersigner_type))}}catch(a){t(a instanceof Error?a.message:"Unknown error")}finally{o(!1)}},E=async()=>{if(0===l.length)return void t("No signatories found for this investor");q(!0);try{let a=l.map(a=>a.id);await j(a,z,"arranger"===z&&x?x.id:void 0),d(!1)}catch(a){t(a instanceof Error?a.message:"Failed to send for signature")}finally{q(!1)}};return(0,b.jsx)(s.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(s.DialogContent,{className:"sm:max-w-[500px] bg-background border-border",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsxs)(s.DialogTitle,{className:"flex items-center gap-2 text-foreground",children:[(0,b.jsx)($.UserCheck,{className:"h-5 w-5 text-emerald-500"}),"Confirm Signatories"]}),(0,b.jsxs)(s.DialogDescription,{children:['The following signatories will receive signature requests for "',i,'"']})]}),(0,b.jsx)("div",{className:"py-4 space-y-4",children:n?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(Y.Skeleton,{className:"h-12 w-full"}),(0,b.jsx)(Y.Skeleton,{className:"h-12 w-full"})]}):r?(0,b.jsxs)(Z.Alert,{variant:"destructive",children:[(0,b.jsx)(O.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(Z.AlertDescription,{children:r})]}):0===l.length?(0,b.jsxs)(Z.Alert,{className:"bg-amber-500/10 border-amber-500/30",children:[(0,b.jsx)(O.AlertCircle,{className:"h-4 w-4 text-amber-500"}),(0,b.jsx)(Z.AlertDescription,{className:"text-amber-700 dark:text-amber-200",children:"No designated signatories found for this investor. Please add signatories to the investor entity first."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(f.Badge,{variant:"outline",className:"border-emerald-500/50 text-emerald-400 bg-emerald-500/10",children:[(0,b.jsx)(_.Users,{className:"h-3 w-3 mr-1"}),l.length," ",1===l.length?"Signatory":"Signatories"]})}),(0,b.jsx)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto pr-2",children:l.map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/10",children:[(0,b.jsx)(ac.Check,{className:"h-5 w-5 text-emerald-500 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.full_name}),a.is_primary&&(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs border-blue-500/50 text-blue-400 bg-blue-500/10",children:"Primary"}),a.is_signatory&&!a.is_primary&&(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs border-emerald-500/50 text-emerald-400 bg-emerald-500/10",children:"Signatory"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(aa.Mail,{className:"h-3 w-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground truncate",children:a.email||"No email"})]}),a.role_title&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground capitalize block mt-1",children:a.role_title})]})]},a.id))}),(0,b.jsxs)("div",{className:"space-y-3 pt-4 border-t border-border",children:[(0,b.jsx)(u.Label,{className:"text-sm font-medium text-foreground",children:"VERSO Signatories (Added Automatically)"}),(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-blue-500/30 bg-blue-500/10",children:[(0,b.jsx)(ac.Check,{className:"h-5 w-5 text-blue-500 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Building2,{className:"h-4 w-4 text-blue-400"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:"VERSO Capital 2 GP SARL"}),(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs border-blue-500/50 text-blue-400 bg-blue-500/10",children:"Issuer"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Signed by CEO on behalf of the Issuer"})]})]}),x&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/10",children:[(0,b.jsx)(ac.Check,{className:"h-5 w-5 text-emerald-500 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ab.Briefcase,{className:"h-4 w-4 text-emerald-400"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:x.company_name||x.legal_name}),(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs border-emerald-500/50 text-emerald-400 bg-emerald-500/10",children:"Arranger"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Signed as Attorney under Clause 6"})]})]})]}),(0,b.jsxs)(Z.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:[(0,b.jsx)(_.Users,{className:"h-4 w-4 text-blue-500"}),(0,b.jsxs)(Z.AlertDescription,{className:"text-blue-700 dark:text-blue-200 text-sm",children:[l.length+1+ +!!x," signature requests will be created. The document will be marked complete after all parties have signed."]})]})]})}),(0,b.jsxs)(s.DialogFooter,{className:"flex-col sm:flex-row gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>d(!1),disabled:p,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:E,disabled:n||p||0===l.length,className:"gap-2 bg-emerald-500 hover:bg-emerald-600",children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P.Loader2,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Q.Send,{className:"h-4 w-4"}),"Send for Signature"]})})]})]})})}function ae({subscriptionId:a}){let[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),[r,w]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)("docx"),{isOpen:Y,document:Z,previewUrl:$,isLoading:_,error:aa,openPreview:ab,closePreview:ac,downloadDocument:ae}=(0,W.useDocumentViewer)(),af={draft:"bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-200",final:"bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-200",published:"bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-200",pending_signature:"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-200",signed:"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-200"},ag={draft:(0,b.jsx)(N.Clock,{className:"h-4 w-4"}),final:(0,b.jsx)(M.CheckCircle,{className:"h-4 w-4"}),published:(0,b.jsx)(M.CheckCircle,{className:"h-4 w-4"}),pending_signature:(0,b.jsx)(O.AlertCircle,{className:"h-4 w-4"}),signed:(0,b.jsx)(M.CheckCircle,{className:"h-4 w-4"})},ah={draft:"Draft",final:"Final (Ready)",published:"Final (Ready)",pending_signature:"Pending Signatures",signed:"Fully Executed"},ai=(0,c.useCallback)(async()=>{j(!0);try{let b=await fetch(`/api/subscriptions/${a}/documents`);if(!b.ok)throw Error("Failed to fetch documents");let c=await b.json();h(c.documents||[])}catch(a){console.error("Error fetching documents:",a),x.toast.error("Failed to load documents")}finally{j(!1)}},[a]);(0,c.useEffect)(()=>{ai()},[a,ai]);let aj=async a=>{n(a.id);try{let b=await fetch(`/api/storage/download?bucket=deal-documents&path=${encodeURIComponent(a.file_key)}`);if(!b.ok)throw Error("Failed to download document");let c=await b.blob(),d=window.URL.createObjectURL(c),e=window.document.createElement("a");e.href=d,e.download=a.file_key.split("/").pop()||"document",window.document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(d),window.document.body.removeChild(e),x.toast.success("Document downloaded successfully")}catch(a){console.error("Error downloading document:",a),x.toast.error("Failed to download document")}finally{n(null)}},ak=async()=>{if(!y)return void x.toast.error("Please select a file to upload");l(!0);try{let b=new FormData;if(b.append("file",y),b.append("documentType","subscription_pack"),!(await fetch(`/api/subscriptions/${a}/documents/upload`,{method:"POST",body:b})).ok)throw Error("Failed to upload document");x.toast.success("Final subscription pack uploaded successfully"),w(!1),z(null),ai()}catch(a){console.error("Error uploading document:",a),x.toast.error("Failed to upload document")}finally{l(!1)}},al=async(b,c,d)=>{if(C){q(C.id);try{let e=b.filter(a=>"investor_primary"!==a),f=await fetch(`/api/subscriptions/${a}/documents/${C.id}/ready-for-signature`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signatory_member_ids:e.length>0?e:void 0,countersigner_type:c,arranger_id:d})});if(!f.ok){let a=await f.json();throw Error(a.error||"Failed to send for signature")}let g=await f.json(),h="arranger"===g.countersigner_type?`arranger (${g.countersigner_name})`:"CEO";x.toast.success(`Document sent to ${g.total_signatories} signatories for signature. Countersigner: ${h}`),console.log("Signature requests created:",g),ai()}catch(a){throw console.error("Error sending for signature:",a),x.toast.error(a instanceof Error?a.message:"Failed to send for signature"),a}finally{q(null),D(null)}}},am=async()=>{F(!0);try{let b=await fetch(`/api/subscriptions/${a}/regenerate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:I})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to regenerate subscription pack")}let c=await b.json(),d=c.format?.toUpperCase()||I.toUpperCase();x.toast.success(`Subscription pack regenerated as ${d}`),console.log("Regeneration result:",c),ai()}catch(a){console.error("Error regenerating subscription pack:",a),x.toast.error(a instanceof Error?a.message:"Failed to regenerate subscription pack")}finally{F(!1)}},an=async(b,c)=>{H(b);try{let c=await fetch(`/api/subscriptions/${a}/documents/${b}/mark-final`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to update document status")}let d=await c.json();"finalized"===d.action?x.toast.success("Document marked as final - ready for signature"):x.toast.success("Document reverted to draft"),ai()}catch(a){console.error("Error updating document status:",a),x.toast.error(a instanceof Error?a.message:"Failed to update document status")}finally{H(null)}},ao=a=>a<1024?`${a} B`:a<1048576?`${(a/1024).toFixed(1)} KB`:`${(a/1048576).toFixed(1)} MB`;return(g.some(a=>"final"===a.status||"published"===a.status||"pending_signature"===a.status||"signed"===a.status),i)?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(P.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.Card,{className:"border border-border bg-muted/50",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(o.FileText,{className:"h-5 w-5"}),"Subscription Pack Documents"]}),(0,b.jsx)(d.CardDescription,{children:"Manage draft and final subscription pack documents"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(v.Select,{value:I,onValueChange:a=>J(a),disabled:E,children:[(0,b.jsx)(v.SelectTrigger,{className:"w-[100px] h-9 bg-muted/50 border-border",children:(0,b.jsx)(v.SelectValue,{})}),(0,b.jsxs)(v.SelectContent,{className:"bg-background border-border",children:[(0,b.jsx)(v.SelectItem,{value:"docx",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(V,{className:"h-3 w-3"}),"DOCX"]})}),(0,b.jsx)(v.SelectItem,{value:"pdf",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.FileText,{className:"h-3 w-3"}),"PDF"]})})]})]}),(0,b.jsx)(e.Button,{variant:"outline",className:"gap-2",onClick:am,disabled:E,children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P.Loader2,{className:"h-4 w-4 animate-spin"}),"Regenerating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.RefreshCw,{className:"h-4 w-4"}),"Regenerate"]})})]}),(0,b.jsxs)(s.Dialog,{open:r,onOpenChange:w,children:[(0,b.jsx)(s.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{className:"gap-2",children:[(0,b.jsx)(K.Upload,{className:"h-4 w-4"}),"Upload Final Pack"]})}),(0,b.jsxs)(s.DialogContent,{className:"bg-background border border-border",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsx)(s.DialogTitle,{className:"text-foreground",children:"Upload Final Subscription Pack"}),(0,b.jsx)(s.DialogDescription,{children:"Upload the edited and finalized subscription pack PDF"})]}),(0,b.jsx)("div",{className:"space-y-4 py-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"file",className:"text-foreground",children:"Document File"}),(0,b.jsx)(t.Input,{id:"file",type:"file",accept:".pdf",onChange:a=>{let b=a.target.files?.[0];if(b){if(!("application/pdf"===b.type||b.name.toLowerCase().endsWith(".pdf")))return void x.toast.error("Please upload a PDF file");z(b)}},className:"bg-muted/50 border-border text-foreground"}),y&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Selected: ",y.name," (",ao(y.size),")"]})]})}),(0,b.jsxs)(s.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>w(!1),disabled:k,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:ak,disabled:!y||k,className:"gap-2",children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P.Loader2,{className:"h-4 w-4 animate-spin"}),"Uploading..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(K.Upload,{className:"h-4 w-4"}),"Upload Final"]})})]})]})]})]})]})}),(0,b.jsx)(d.CardContent,{children:0===g.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(o.FileText,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"No documents generated yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Draft subscription pack will be generated automatically when subscription is approved"})]}):(0,b.jsx)("div",{className:"space-y-3",children:g.map(a=>(0,b.jsxs)("div",{className:"flex items-start justify-between py-4 px-4 rounded-lg border border-border bg-muted/50 hover:bg-muted transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,b.jsx)(o.FileText,{className:"h-5 w-5 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.name}),(0,b.jsx)(f.Badge,{className:af[a.status],children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[ag[a.status],ah[a.status]]})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[ao(a.file_size_bytes)," •",a.mime_type.includes("pdf")?" PDF":" DOCX"]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Uploaded ",new Date(a.created_at).toLocaleDateString()," at"," ",new Date(a.created_at).toLocaleTimeString(),a.created_by_profile&&` by ${a.created_by_profile.display_name}`]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>ab({id:a.id,name:a.name,file_name:a.name,mime_type:a.mime_type,file_size_bytes:a.file_size_bytes,type:a.type}),children:[(0,b.jsx)(R.Eye,{className:"h-4 w-4"}),"View"]}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>aj(a),disabled:m===a.id,children:m===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P.Loader2,{className:"h-4 w-4 animate-spin"}),"Downloading..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(L.Download,{className:"h-4 w-4"}),"Download"]})}),("draft"===a.status||"final"===a.status||"published"===a.status)&&(0,b.jsx)(e.Button,{variant:"final"===a.status||"published"===a.status?"outline":"default",size:"sm",className:"final"===a.status||"published"===a.status?"gap-2 border-amber-500/50 text-amber-400 hover:bg-amber-500/10":"gap-2 bg-cyan-600 hover:bg-cyan-700",onClick:()=>an(a.id,a.status),disabled:G===a.id,children:G===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P.Loader2,{className:"h-4 w-4 animate-spin"}),"final"===a.status||"published"===a.status?"Reverting...":"Marking..."]}):"final"===a.status||"published"===a.status?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(U.RotateCcw,{className:"h-4 w-4"}),"Revert to Draft"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(T.BadgeCheck,{className:"h-4 w-4"}),"Mark as Final"]})}),("final"===a.status||"published"===a.status)&&!a.ready_for_signature&&(0,b.jsx)(e.Button,{variant:"default",size:"sm",className:"gap-2 bg-emerald-500 hover:bg-emerald-600",onClick:()=>{D(a),B(!0)},disabled:p===a.id,children:p===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P.Loader2,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Q.Send,{className:"h-4 w-4"}),"Ready for Signature"]})})]})]},a.id))})})]}),(0,b.jsxs)(d.Card,{className:"border border-border bg-muted/50",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-sm text-foreground",children:"Subscription Pack Workflow"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-purple-500/20 text-purple-200 flex items-center justify-center text-xs font-bold",children:"1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Draft Generation"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"System automatically generates draft subscription pack when subscription is approved"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-cyan-500/20 text-cyan-200 flex items-center justify-center text-xs font-bold",children:"2"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Staff Review & Edit"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Download draft, work with lawyers to finalize, then upload the final PDF"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-amber-500/20 text-amber-200 flex items-center justify-center text-xs font-bold",children:"3"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Send for Signatures"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:'Click "Ready for Signature" to initiate dual-signature workflow (investor + staff)'})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-emerald-500/20 text-emerald-200 flex items-center justify-center text-xs font-bold",children:"4"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Execution Complete"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:'Once both parties sign, subscription status automatically changes to "committed"'})]})]})]})})]}),(0,b.jsx)(X.DocumentViewerFullscreen,{isOpen:Y,document:Z,previewUrl:$,isLoading:_,error:aa,onClose:ac,onDownload:ae}),C&&(0,b.jsx)(ad,{open:A,onOpenChange:a=>{B(a),a||D(null)},subscriptionId:a,documentId:C.id,documentName:C.name,onConfirm:al})]})}function af({subscription:a,cashflows:s,capitalCalls:t,distributions:u,metrics:v}){let[w,x]=(0,c.useState)(!1),y=b=>new Intl.NumberFormat("en-US",{style:"currency",currency:a.currency||"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(b),A=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-";return(0,b.jsxs)("div",{className:"min-h-screen bg-background text-foreground p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(r.default,{href:"/versotech_main/subscriptions",children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"bg-muted text-foreground border-border hover:bg-muted",children:[(0,b.jsx)(i.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Subscriptions"]})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-foreground",children:["Subscription #",a.subscription_number]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[a.investor?.legal_name||"Unknown Investor"," · ",a.vehicle?.name||"No Vehicle"]})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)(e.Button,{onClick:()=>x(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[(0,b.jsx)(j.Edit,{className:"h-4 w-4 mr-2"}),"Edit Subscription"]})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Badge,{className:{active:"bg-green-500/20 text-green-600 dark:text-green-400",committed:"bg-blue-500/20 text-blue-600 dark:text-blue-400",pending:"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400",closed:"bg-muted text-muted-foreground",cancelled:"bg-red-500/20 text-red-600 dark:text-red-400"}[a.status]||"bg-muted text-muted-foreground",children:a.status.toUpperCase()}),a.investor?.kyc_status&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"border-border text-muted-foreground",children:["KYC: ",a.investor.kyc_status]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Commitment"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-foreground",children:y(v.total_commitment)}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground",children:[(0,b.jsx)(n.DollarSign,{className:"h-3 w-3"}),a.currency]})]})]}),(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Contributed"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-400",children:y(v.total_contributed)}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground",children:[(0,b.jsx)(p.TrendingUp,{className:"h-3 w-3"}),v.total_contributed>0?`${(v.total_contributed/v.total_commitment*100).toFixed(1)}% funded`:"No contributions"]})]})]}),(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Unfunded"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:y(v.unfunded_commitment)}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground",children:[(0,b.jsx)(q.Minus,{className:"h-3 w-3"}),"Remaining commitment"]})]})]}),(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Current NAV"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:y(v.current_nav)}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground",children:[(0,b.jsx)(p.TrendingUp,{className:"h-3 w-3"}),"Distributed: ",y(v.total_distributed)]})]})]})]}),(0,b.jsxs)(g.Tabs,{defaultValue:"details",className:"w-full",id:`subscription-tabs-${a.id}`,children:[(0,b.jsxs)(g.TabsList,{className:"bg-card border-border",children:[(0,b.jsx)(g.TabsTrigger,{value:"details",className:"data-[state=active]:bg-muted text-foreground",children:"Details"}),(0,b.jsx)(g.TabsTrigger,{value:"activity",className:"data-[state=active]:bg-muted text-foreground",children:"Capital Activity"}),(0,b.jsx)(g.TabsTrigger,{value:"documents",className:"data-[state=active]:bg-muted text-foreground",children:"Documents"})]}),(0,b.jsx)(g.TabsContent,{value:"details",className:"mt-6 space-y-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Subscription Details"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(o.FileText,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Subscription Number"}),(0,b.jsxs)("div",{className:"text-sm font-semibold text-foreground",children:["#",String(a.subscription_number).padStart(5,"0")]})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(m.Calendar,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Effective Date"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:A(a.effective_date)})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(m.Calendar,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Funding Due Date"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:A(a.funding_due_at)})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(m.Calendar,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Committed At"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:A(a.committed_at)})]})]}),a.units&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(n.DollarSign,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Units"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:a.units.toLocaleString()})]})]})]}),a.acknowledgement_notes&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Notes"}),(0,b.jsx)("div",{className:"text-sm text-foreground bg-muted p-3 rounded-md",children:a.acknowledgement_notes})]})]})]})]}),(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Investor Information"})}),(0,b.jsx)(d.CardContent,{className:"space-y-4",children:a.investor?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(l.User,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Legal Name"}),(0,b.jsx)(r.default,{href:`/versotech_main/investors/${a.investor.id}`,className:"text-sm font-semibold text-foreground hover:underline",children:a.investor.legal_name})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.Building2,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Type"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground capitalize",children:a.investor.type})]})]}),a.investor.country&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.Building2,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Country"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:a.investor.country})]})]}),a.investor.email&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(l.User,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Email"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:a.investor.email})]})]})]}):(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"No investor linked"})})]}),(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Vehicle Information"})}),(0,b.jsx)(d.CardContent,{className:"space-y-4",children:a.vehicle?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.Building2,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Vehicle Name"}),(0,b.jsx)("div",{className:"text-sm font-semibold text-foreground",children:a.vehicle.name})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"}),a.vehicle.entity_code&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(o.FileText,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Entity Code"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:a.vehicle.entity_code})]})]}),a.vehicle.type&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.Building2,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Type"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground capitalize",children:a.vehicle.type.replace("_"," ")})]})]}),a.vehicle.currency&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(n.DollarSign,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Currency"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:a.vehicle.currency})]})]}),a.vehicle.domicile&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.Building2,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Domicile"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:a.vehicle.domicile})]})]})]}):(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"No vehicle linked"})})]}),(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Capital Summary"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Calls"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:v.total_calls})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Pending Calls"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-yellow-400",children:v.pending_calls})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Contribution Rate"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:v.total_commitment>0?`${(v.total_contributed/v.total_commitment*100).toFixed(1)}%`:"0%"})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Capital Calls Total"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:y(a.capital_calls_total||0)})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Distributions Total"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-green-400",children:y(a.distributions_total||0)})]}),null!=a.outstanding_amount&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Separator,{className:"bg-muted"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Outstanding Amount"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-yellow-400",children:y(a.outstanding_amount)})]})]})]})]}),(null!=a.num_shares||null!=a.price_per_share||null!=a.cost_per_share)&&(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Share Structure"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[null!=a.num_shares&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Number of Shares"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:a.num_shares.toLocaleString()})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),null!=a.price_per_share&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Price Per Share"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:y(a.price_per_share)})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),null!=a.cost_per_share&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Cost Per Share"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:y(a.cost_per_share)})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),null!=a.spread_per_share&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Spread Per Share"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-green-400",children:y(a.spread_per_share)})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),null!=a.spread_fee_amount&&(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Spread Fee Amount"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:y(a.spread_fee_amount)})]})]})]}),(null!=a.subscription_fee_amount||null!=a.bd_fee_amount||null!=a.finra_fee_amount)&&(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Fee Structure"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[null!=a.subscription_fee_percent&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Subscription Fee"}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-foreground",children:y(a.subscription_fee_amount||0)}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground/70",children:[a.subscription_fee_percent,"%"]})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),null!=a.bd_fee_percent&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Broker-Dealer Fee"}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-foreground",children:y(a.bd_fee_amount||0)}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground/70",children:[a.bd_fee_percent,"%"]})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),null!=a.finra_fee_amount&&(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"FINRA Fee"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:y(a.finra_fee_amount)})]})]})]}),(null!=a.performance_fee_tier1_percent||null!=a.performance_fee_tier2_percent)&&(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Performance Fees"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[null!=a.performance_fee_tier1_percent&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Tier 1"}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-sm font-semibold text-purple-400",children:[a.performance_fee_tier1_percent,"%"]}),null!=a.performance_fee_tier1_threshold&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground/70",children:["Threshold: ",y(a.performance_fee_tier1_threshold)]})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),null!=a.performance_fee_tier2_percent&&(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Tier 2"}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-sm font-semibold text-purple-300",children:[a.performance_fee_tier2_percent,"%"]}),null!=a.performance_fee_tier2_threshold&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground/70",children:["Threshold: ",y(a.performance_fee_tier2_threshold)]})]})]})]})]}),(a.opportunity_name||a.contract_date||a.sourcing_contract_ref)&&(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Opportunity & Contract"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[a.opportunity_name&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(o.FileText,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Opportunity Name"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:a.opportunity_name})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),a.contract_date&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(m.Calendar,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Contract Date"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:A(a.contract_date)})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),a.sourcing_contract_ref&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(o.FileText,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Sourcing Contract Reference"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground font-mono",children:a.sourcing_contract_ref})]})]})]})]}),(a.introducer_id||a.introduction_id)&&(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Relationships"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[a.introducer_id&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(l.User,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Introducer ID"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground font-mono text-xs",children:a.introducer_id})]})]}),(0,b.jsx)(h.Separator,{className:"bg-muted"})]}),a.introduction_id&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(l.User,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Introduction ID"}),(0,b.jsx)("div",{className:"text-sm font-medium text-foreground font-mono text-xs",children:a.introduction_id})]})]})]})]})]})}),(0,b.jsx)(g.TabsContent,{value:"activity",className:"mt-6",children:(0,b.jsxs)(d.Card,{className:"bg-card border-border",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Capital Activity"}),(0,b.jsx)(d.CardDescription,{className:"text-muted-foreground",children:"View all cashflows, capital calls, and distributions for this subscription"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(J,{cashflows:s,capitalCalls:t,distributions:u,currency:a.currency,vehicleId:a.vehicle_id,investorId:a.investor_id,isStaff:!0})})]})}),(0,b.jsx)(g.TabsContent,{value:"documents",className:"mt-6",children:(0,b.jsx)(ae,{subscriptionId:a.id})})]}),(0,b.jsx)(z,{subscription:a,open:w,onOpenChange:x,onSuccess:()=>{window.location.reload()}})]})}a.s(["SubscriptionDetailClient",()=>af],610947)}];

//# sourceMappingURL=c6ad4_src_components_subscriptions_subscription-detail-client_tsx_12d0b19d._.js.map