module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},9349,a=>{a.n(a.i(142710))},199585,a=>{a.n(a.i(701395))},929852,a=>{a.n(a.i(816404))},516153,a=>{a.n(a.i(422096))},911164,a=>{a.n(a.i(273021))},450926,a=>{a.n(a.i(933743))},601947,a=>{"use strict";a.s(["ProfilePageClient",()=>b]);let b=(0,a.i(578644).registerClientReference)(function(){throw Error("Attempted to call ProfilePageClient() from the server but ProfilePageClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/versotech-portal/src/components/profile/profile-page-client.tsx <module evaluation>","ProfilePageClient")},486840,a=>{"use strict";a.s(["ProfilePageClient",()=>b]);let b=(0,a.i(578644).registerClientReference)(function(){throw Error("Attempted to call ProfilePageClient() from the server but ProfilePageClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/versotech-portal/src/components/profile/profile-page-client.tsx","ProfilePageClient")},257656,a=>{"use strict";a.i(601947);var b=a.i(486840);a.n(b)},402840,a=>{"use strict";var b=a.i(714898);a.i(937413);var c=a.i(131360),d=a.i(621599),e=a.i(198307),f=a.i(257656);async function g({searchParams:a}){let g=(await a).tab||"overview",h=await (0,e.createClient)(),i=(0,e.createServiceClient)(),{data:{user:j},error:k}=await h.auth.getUser();(k||!j)&&(0,c.redirect)("/versotech_main/login");let l=await (0,d.cookies)(),m=l.get("verso_active_persona_type")?.value,{data:n,error:o}=await h.from("profiles").select("*").eq("id",j.id).single();if(o||!n)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-12",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Error Loading Profile"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Unable to load your profile data. Please try again."})]})});let p=null,q=null,{data:r,error:s}=await i.from("investor_users").select("investor_id, role, is_primary, can_sign").eq("user_id",j.id).maybeSingle();if(s&&console.error("[ProfilePage] Error fetching investor_users:",s),console.log("[ProfilePage] investorUser result:",{investorUser:r,investorUserError:s}),r){let{data:a,error:b}=await i.from("investors").select(`
        id,
        legal_name,
        display_name,
        type,
        status,
        kyc_status,
        onboarding_status,
        country,
        country_of_incorporation,
        tax_residency,
        email,
        phone,
        website,
        registered_address,
        city,
        representative_name,
        representative_title,
        is_professional_investor,
        is_qualified_purchaser,
        aml_risk_rating,
        logo_url,
        first_name,
        middle_name,
        last_name,
        name_suffix,
        date_of_birth,
        country_of_birth,
        nationality,
        phone_mobile,
        phone_office,
        residential_street,
        residential_line_2,
        residential_city,
        residential_state,
        residential_postal_code,
        residential_country,
        registered_address_line_1,
        registered_address_line_2,
        registered_city,
        registered_state,
        registered_postal_code,
        registered_country,
        is_us_citizen,
        is_us_taxpayer,
        us_taxpayer_id,
        id_type,
        id_number,
        id_issue_date,
        id_expiry_date,
        id_issuing_country,
        middle_initial,
        proof_of_address_date,
        proof_of_address_expiry,
        tax_id_number
      `).eq("id",r.investor_id).single();b&&console.error("[ProfilePage] Error fetching investor:",b),console.log("[ProfilePage] investor result:",{investor:a?.id,investorError:b}),a&&(p={id:a.id,legal_name:a.legal_name,display_name:a.display_name,type:a.type,status:a.status,kyc_status:a.kyc_status,onboarding_status:a.onboarding_status,country:a.country,country_of_incorporation:a.country_of_incorporation,tax_residency:a.tax_residency,email:a.email,phone:a.phone,website:a.website,registered_address:a.registered_address,city:a.city,representative_name:a.representative_name,representative_title:a.representative_title,is_professional_investor:a.is_professional_investor,is_qualified_purchaser:a.is_qualified_purchaser,aml_risk_rating:a.aml_risk_rating,logo_url:a.logo_url,first_name:a.first_name,middle_name:a.middle_name,last_name:a.last_name,name_suffix:a.name_suffix,date_of_birth:a.date_of_birth,country_of_birth:a.country_of_birth,nationality:a.nationality,phone_mobile:a.phone_mobile,phone_office:a.phone_office,residential_street:a.residential_street,residential_line_2:a.residential_line_2,residential_city:a.residential_city,residential_state:a.residential_state,residential_postal_code:a.residential_postal_code,residential_country:a.residential_country,registered_address_line_1:a.registered_address_line_1,registered_address_line_2:a.registered_address_line_2,registered_city:a.registered_city,registered_state:a.registered_state,registered_postal_code:a.registered_postal_code,registered_country:a.registered_country,is_us_citizen:a.is_us_citizen,is_us_taxpayer:a.is_us_taxpayer,us_taxpayer_id:a.us_taxpayer_id,country_of_tax_residency:a.tax_residency,id_type:a.id_type,id_number:a.id_number,id_issue_date:a.id_issue_date,id_expiry_date:a.id_expiry_date,id_issuing_country:a.id_issuing_country,middle_initial:a.middle_initial,proof_of_address_date:a.proof_of_address_date,proof_of_address_expiry:a.proof_of_address_expiry,tax_id_number:a.tax_id_number},q={role:r.role,is_primary:r.is_primary,can_sign:r.can_sign||!1})}let t=!!m&&["ceo","staff"].includes(m),u=["staff_admin","staff_ops","staff_rm","staff","admin"].includes(n.role),v=!!p,w=m?t&&!v:u&&!v;return console.log("[ProfilePage] Debug:",{email:n.email,activePersonaType:m,isActivePersonaStaff:t,isProfileRoleStaff:u,hasInvestorLink:v,showAsStaff:w,variant:w?"staff":"investor",investorInfo:p?{id:p.id,legal_name:p.legal_name,type:p.type}:null,investorUserInfo:q}),(0,b.jsx)(f.ProfilePageClient,{userEmail:j.email||"",profile:{id:n.id,email:n.email,display_name:n.display_name,full_name:n.display_name,title:n.title,avatar_url:n.avatar_url,phone:n.phone,office_location:n.office_location,bio:n.bio,role:n.role,created_at:n.created_at},variant:w?"staff":"investor",defaultTab:g,investorInfo:p,investorUserInfo:q})}a.s(["default",()=>g,"dynamic",0,"force-dynamic","revalidate",0,0])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__afa89f9c._.js.map