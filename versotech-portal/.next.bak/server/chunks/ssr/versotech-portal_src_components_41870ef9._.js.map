{"version":3,"sources":["../../../../../versotech-portal/src/components/layout/sidebar.tsx","../../../../../versotech-portal/src/hooks/use-notifications.ts","../../../../../versotech-portal/src/components/layout/user-menu.tsx","../../../../../versotech-portal/src/components/dashboard/kyc-alert.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { usePathname, useRouter } from 'next/navigation'\r\nimport Image from 'next/image'\r\nimport { Button } from '@/components/ui/button'\r\nimport { useNotifications } from '@/hooks/use-notifications'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  LayoutDashboard,\r\n  Building2,\r\n  FileText,\r\n  FileSignature,\r\n  MessageSquare,\r\n  CheckSquare,\r\n  TrendingUp,\r\n  Settings,\r\n  Users,\r\n  Workflow,\r\n  ClipboardList,\r\n  Shield,\r\n  Database,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  LogOut,\r\n  HandHeart,\r\n  CreditCard,\r\n  Calculator,\r\n  Activity,\r\n  Briefcase,\r\n  UserCheck,\r\n  Search,\r\n  Bell,\r\n  Calendar\r\n} from 'lucide-react'\r\n\r\ninterface SidebarItem {\r\n  name: string\r\n  href: string\r\n  icon: React.ComponentType<{ className?: string }>\r\n  badge?: string | number\r\n  description?: string\r\n  notificationKey?: keyof NotificationCounts\r\n  requiredPermission?: string\r\n}\r\n\r\ninterface NotificationCounts {\r\n  tasks: number\r\n  messages: number\r\n  deals: number\r\n  requests: number\r\n  approvals: number\r\n  notifications: number\r\n  signatures: number\r\n  reconciliation: number\r\n  fees: number\r\n  totalUnread: number\r\n}\r\n\r\ninterface SidebarProps {\r\n  brand: 'versoholdings' | 'versotech'\r\n  userProfile: {\r\n    displayName?: string\r\n    email?: string\r\n    role: string\r\n    title?: string\r\n    id?: string\r\n    permissions?: string[]\r\n  }\r\n}\r\n\r\n// Navigation items\r\nconst investorNavItems: SidebarItem[] = [\r\n  {\r\n    name: 'Dashboard',\r\n    href: '/versotech_main/dashboard',\r\n    icon: LayoutDashboard,\r\n    description: 'Portfolio overview'\r\n  },\r\n  {\r\n    name: 'Active Deals',\r\n    href: '/versotech_main/opportunities',\r\n    icon: Activity,\r\n    notificationKey: 'deals',\r\n    description: 'Investment opportunities'\r\n  },\r\n  {\r\n    name: 'Portfolio',\r\n    href: '/versotech_main/portfolio',\r\n    icon: Briefcase,\r\n    description: 'My investments'\r\n  },\r\n  {\r\n    name: 'Calendar',\r\n    href: '/versotech_main/calendar',\r\n    icon: Calendar,\r\n    description: 'Schedule'\r\n  },\r\n  {\r\n    name: 'Reports',\r\n    href: '/versotech_main/documents',\r\n    icon: TrendingUp,\r\n    description: 'Performance reports'\r\n  },\r\n  {\r\n    name: 'Tasks',\r\n    href: '/versotech_main/tasks',\r\n    icon: CheckSquare,\r\n    notificationKey: 'tasks',\r\n    description: 'Action items'\r\n  },\r\n  {\r\n    name: 'Messages',\r\n    href: '/versotech_main/messages',\r\n    icon: MessageSquare,\r\n    notificationKey: 'messages',\r\n    description: 'Communications'\r\n  },\r\n  {\r\n    name: 'Notifications',\r\n    href: '/versotech_main/notifications',\r\n    icon: Bell,\r\n    notificationKey: 'notifications',\r\n    description: 'Alerts'\r\n  }\r\n]\r\n\r\nconst staffNavItems: SidebarItem[] = [\r\n  {\r\n    name: 'Dashboard',\r\n    href: '/versotech_main',\r\n    icon: LayoutDashboard,\r\n    description: 'Overview'\r\n  },\r\n  {\r\n    name: 'Messages',\r\n    href: '/versotech_main/messages',\r\n    icon: MessageSquare,\r\n    notificationKey: 'messages',\r\n    description: 'Inbox'\r\n  },\r\n  {\r\n    name: 'Approvals',\r\n    href: '/versotech_main/approvals',\r\n    icon: UserCheck,\r\n    notificationKey: 'approvals',\r\n    description: 'Pending approvals'\r\n  },\r\n  {\r\n    name: 'Deals',\r\n    href: '/versotech_main/deals',\r\n    icon: Activity,\r\n    description: 'Deal management'\r\n  },\r\n  {\r\n    name: 'Vehicles',\r\n    href: '/versotech_main/entities',\r\n    icon: Building2,\r\n    description: 'Investment vehicles'\r\n  },\r\n  {\r\n    name: 'Investors',\r\n    href: '/versotech_main/investors',\r\n    icon: Users,\r\n    description: 'Investor relations'\r\n  },\r\n  {\r\n    name: 'KYC Review',\r\n    href: '/versotech_main/kyc-review',\r\n    icon: UserCheck,\r\n    description: 'KYC compliance review'\r\n  },\r\n  {\r\n    name: 'Subscriptions',\r\n    href: '/versotech_main/subscriptions',\r\n    icon: FileText,\r\n    description: 'Subscription tracking'\r\n  },\r\n  {\r\n    name: 'Processes',\r\n    href: '/versotech_main/processes',\r\n    icon: Workflow,\r\n    description: 'Workflows'\r\n  },\r\n  {\r\n    name: 'Requests',\r\n    href: '/versotech_main/requests',\r\n    icon: ClipboardList,\r\n    notificationKey: 'requests',\r\n    description: 'Service requests'\r\n  },\r\n  {\r\n    name: 'Documents',\r\n    href: '/versotech_main/documents',\r\n    icon: FileText,\r\n    description: 'Document center'\r\n  },\r\n  {\r\n    name: 'VersoSign',\r\n    href: '/versotech_main/versosign',\r\n    icon: FileSignature,\r\n    notificationKey: 'signatures',\r\n    description: 'E-signatures'\r\n  },\r\n  {\r\n    name: 'Introducers',\r\n    href: '/versotech_main/introducers',\r\n    icon: HandHeart,\r\n    description: 'Partners'\r\n  },\r\n  {\r\n    name: 'Arrangers',\r\n    href: '/versotech_main/arrangers',\r\n    icon: Briefcase,\r\n    description: 'Regulated entities'\r\n  },\r\n  {\r\n    name: 'Fees',\r\n    href: '/versotech_main/fees',\r\n    icon: Calculator,\r\n    notificationKey: 'fees',\r\n    description: 'Billing'\r\n  },\r\n  {\r\n    name: 'Reconciliation',\r\n    href: '/versotech_main/reconciliation',\r\n    icon: CreditCard,\r\n    notificationKey: 'reconciliation',\r\n    description: 'Payments'\r\n  },\r\n  {\r\n    name: 'Calendar',\r\n    href: '/versotech_main/calendar',\r\n    icon: Calendar,\r\n    description: 'Schedule'\r\n  },\r\n  {\r\n    name: 'Audit',\r\n    href: '/versotech_main/audit',\r\n    icon: Shield,\r\n    description: 'Compliance logs'\r\n  },\r\n  {\r\n    name: 'Admin',\r\n    href: '/versotech_main/admin',\r\n    icon: Database,\r\n    description: 'System settings',\r\n    requiredPermission: 'super_admin'\r\n  }\r\n]\r\n\r\nexport function Sidebar({ brand, userProfile }: SidebarProps) {\r\n  const [collapsed, setCollapsed] = useState(false)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const pathname = usePathname()\r\n  const router = useRouter()\r\n\r\n  // Fetch real notification counts\r\n  const { counts, loading: notificationsLoading } = useNotifications(userProfile.role, userProfile.id)\r\n\r\n  const baseNavItems = brand === 'versoholdings' ? investorNavItems : staffNavItems\r\n  // isDark kept for conditional logic that can't use CSS dark: prefix\r\n  const isDark = brand === 'versotech'\r\n\r\n  // Filter nav items based on required permissions\r\n  const navItems = baseNavItems.filter(item => {\r\n    if (!item.requiredPermission) return true\r\n    return userProfile.permissions?.includes(item.requiredPermission)\r\n  })\r\n\r\n  // Handle sign out\r\n  const handleSignOut = async (e: React.MouseEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    try {\r\n      const supabase = createClient()\r\n      await supabase.auth.signOut()\r\n      router.push('/login')\r\n    } catch (error) {\r\n      console.error('Sign out error:', error)\r\n    }\r\n  }\r\n\r\n  const filteredNavItems = navItems.filter(item =>\r\n    item.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  )\r\n\r\n  return (\r\n    <div className={cn(\r\n      \"flex flex-col h-screen transition-all duration-300 border-r relative z-50\",\r\n      collapsed ? \"w-[80px]\" : \"w-[280px]\",\r\n      // Theme-responsive colors using dark: prefix\r\n      \"bg-white dark:bg-zinc-950 border-gray-100 dark:border-white/5 text-gray-600 dark:text-zinc-400\"\r\n    )}>\r\n      {/* Header */}\r\n      <div className=\"p-6 flex items-center justify-between h-20\">\r\n        {!collapsed && (\r\n          <div className=\"flex items-center gap-3 animate-in fade-in duration-300\">\r\n            <div className={cn(\r\n              \"relative h-10 w-32 overflow-hidden\", // Increased size\r\n            )}>\r\n              <Image\r\n                src={brand === 'versotech' ? '/versotech-logo.jpg' : '/versoholdings-logo.jpg'}\r\n                alt=\"Logo\"\r\n                fill\r\n                className=\"object-contain object-left dark:invert\"\r\n                priority\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {collapsed && (\r\n          <div className=\"mx-auto\">\r\n            <div className=\"relative h-8 w-8 rounded-lg overflow-hidden bg-gray-50 dark:bg-white/5 ring-1 ring-gray-100 dark:ring-white/10\">\r\n              <Image\r\n                src={brand === 'versotech' ? '/versotech-logo.jpg' : '/versoholdings-logo.jpg'}\r\n                alt=\"Logo\"\r\n                fill\r\n                className=\"object-cover\"\r\n                priority\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={() => setCollapsed(!collapsed)}\r\n          className=\"absolute -right-3 top-8 h-6 w-6 rounded-full border shadow-sm z-50 hidden md:flex items-center justify-center transition-colors bg-white dark:bg-zinc-900 border-gray-200 dark:border-white/10 text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5\"\r\n        >\r\n          {collapsed ? <ChevronRight className=\"h-3 w-3\" /> : <ChevronLeft className=\"h-3 w-3\" />}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      {!collapsed && (\r\n        <div className=\"px-4 mb-4 animate-in fade-in slide-in-from-top-2 duration-300\">\r\n          <div className=\"relative group\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 transition-colors text-gray-400 dark:text-gray-500 group-focus-within:text-gray-900 dark:group-focus-within:text-white\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"w-full pl-9 pr-4 py-2 rounded-lg text-sm transition-all outline-none bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-600 focus:bg-white dark:focus:bg-white/10 focus:border-gray-200 dark:focus:border-white/10 focus:ring-2 focus:ring-blue-500/10 dark:focus:ring-0\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex-1 overflow-y-auto scrollbar-hide px-3 py-2 space-y-1\">\r\n        {filteredNavItems.map((item) => {\r\n          // Special case: dashboard paths that are base paths (e.g., /versotech/staff)\r\n          // should only match exactly, not all sub-paths\r\n          const isDashboard = item.name === 'Dashboard'\r\n          const isActive = isDashboard\r\n            ? pathname === item.href\r\n            : pathname === item.href || pathname.startsWith(`${item.href}/`)\r\n          const Icon = item.icon\r\n          const badgeCount = item.notificationKey && !notificationsLoading ? counts[item.notificationKey] : item.badge\r\n\r\n          // Generate data-tour attribute from item name (lowercase, hyphenated)\r\n          const tourId = `nav-${item.name.toLowerCase().replace(/\\s+/g, '-')}`\r\n\r\n          return (\r\n            <Link key={item.name} href={item.href} className=\"block group relative\" data-tour={tourId}>\r\n              <div className={cn(\r\n                \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\",\r\n                isActive\r\n                  ? \"bg-blue-50 dark:bg-gradient-to-r dark:from-blue-600/20 dark:to-blue-600/5 text-blue-700 dark:text-blue-400\"\r\n                  : \"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5\"\r\n              )}>\r\n                <Icon className={cn(\r\n                  \"h-5 w-5 transition-colors\",\r\n                  isActive\r\n                    ? \"text-blue-600 dark:text-blue-400\"\r\n                    : \"text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-white\"\r\n                )} />\r\n\r\n                {!collapsed && (\r\n                  <>\r\n                    <span className=\"flex-1 text-sm font-medium\">{item.name}</span>\r\n                    {badgeCount && Number(badgeCount) > 0 && (\r\n                      <span className=\"px-2 py-0.5 rounded-full text-[10px] font-bold bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400\">\r\n                        {Number(badgeCount) > 99 ? '99+' : badgeCount}\r\n                      </span>\r\n                    )}\r\n                  </>\r\n                )}\r\n\r\n                {/* Active Indicator Bar */}\r\n                {isActive && (\r\n                  <div className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r-full bg-blue-600 dark:bg-blue-500\" />\r\n                )}\r\n              </div>\r\n\r\n              {/* Tooltip for collapsed state */}\r\n              {collapsed && (\r\n                <div className=\"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-md text-xs font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 shadow-xl border bg-white dark:bg-zinc-800 border-gray-100 dark:border-white/10 text-gray-900 dark:text-white\">\r\n                  {item.name}\r\n                  {badgeCount && Number(badgeCount) > 0 && (\r\n                    <span className=\"ml-2 opacity-75\">({badgeCount})</span>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </Link>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {/* User Profile / Settings Section */}\r\n      <div className=\"p-4 border-t mt-auto border-gray-100 dark:border-white/5\">\r\n        <Link href={`/${brand}${brand === 'versotech' ? '/staff' : ''}/profile`} data-tour=\"nav-profile\">\r\n          <div className=\"flex items-center gap-3 p-2 rounded-xl transition-all cursor-pointer group hover:bg-gray-50 dark:hover:bg-white/5\">\r\n            <div className=\"h-9 w-9 rounded-full flex items-center justify-center text-sm font-bold shadow-sm ring-2 bg-white dark:bg-gradient-to-br dark:from-blue-500 dark:to-blue-600 text-blue-600 dark:text-white ring-white dark:ring-black border border-gray-100 dark:border-transparent\">\r\n              {userProfile.displayName?.[0]?.toUpperCase() || 'U'}\r\n            </div>\r\n\r\n            {!collapsed && (\r\n              <div className=\"flex-1 min-w-0 text-left\">\r\n                <p className=\"text-sm font-semibold truncate text-gray-900 dark:text-white\">\r\n                  {userProfile.displayName || 'User'}\r\n                </p>\r\n                <p className=\"text-xs truncate flex items-center gap-1 text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-400\">\r\n                  View Profile\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {!collapsed && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={handleSignOut}\r\n                className=\"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-white/5\"\r\n              >\r\n                <LogOut className=\"h-4 w-4\" />\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\n\r\ninterface NotificationCounts {\r\n  tasks: number\r\n  messages: number\r\n  deals: number\r\n  requests: number\r\n  approvals: number\r\n  notifications: number\r\n  signatures: number\r\n  reconciliation: number\r\n  fees: number\r\n  totalUnread: number\r\n}\r\n\r\nconst INITIAL_COUNTS: NotificationCounts = {\r\n  tasks: 0,\r\n  messages: 0,\r\n  deals: 0,\r\n  requests: 0,\r\n  approvals: 0,\r\n  notifications: 0,\r\n  signatures: 0,\r\n  reconciliation: 0,\r\n  fees: 0,\r\n  totalUnread: 0\r\n}\r\n\r\nconst STAFF_REQUEST_STATUSES = ['open', 'assigned', 'in_progress', 'awaiting_info'] as const\r\nconst STAFF_APPROVAL_STATUSES = ['pending'] as const\r\nconst STAFF_STATUS_FILTER = STAFF_REQUEST_STATUSES.join(',')\r\nconst STAFF_APPROVAL_FILTER = STAFF_APPROVAL_STATUSES.join(',')\r\n\r\nexport function useNotifications(userRole: string, userId?: string) {\r\n  const [counts, setCounts] = useState<NotificationCounts>(INITIAL_COUNTS)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    if (!userId) {\r\n      return\r\n    }\r\n\r\n    let isMounted = true\r\n    let supabaseClient: ReturnType<typeof createClient> | null = null\r\n\r\n    const fetchCounts = async (silent = false) => {\r\n      if (!silent) {\r\n        setLoading(true)\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('/api/notifications/counts', {\r\n          cache: 'no-store',\r\n          signal: AbortSignal.timeout(10000), // 10s timeout\r\n        })\r\n\r\n        if (response.status === 401) {\r\n          if (isMounted) {\r\n            setCounts(INITIAL_COUNTS)\r\n            if (!silent) {\r\n              setLoading(false)\r\n            }\r\n          }\r\n          return\r\n        }\r\n\r\n        if (!response.ok) {\r\n          // Don't throw on 404 or other errors during dev server restarts\r\n          if (!silent) {\r\n            console.warn(`Failed to load notification counts (${response.status})`)\r\n          }\r\n          return\r\n        }\r\n\r\n        const payload = await response.json()\r\n        if (isMounted && payload?.counts) {\r\n          setCounts(payload.counts as NotificationCounts)\r\n        }\r\n      } catch (error) {\r\n        // Silently ignore fetch errors during polling - they happen during dev server restarts\r\n        if (!silent && error instanceof Error && error.name !== 'TimeoutError' && error.name !== 'AbortError') {\r\n          console.warn('Failed to fetch notification counts:', error.message)\r\n        }\r\n      } finally {\r\n        if (isMounted && !silent) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    }\r\n\r\n    void fetchCounts()\r\n\r\n    try {\r\n      supabaseClient = createClient()\r\n    } catch (error) {\r\n      console.error('Failed to initialize Supabase client for notifications:', error)\r\n      setLoading(false)\r\n      return () => {\r\n        isMounted = false\r\n      }\r\n    }\r\n\r\n    const subscriptions: any[] = []\r\n\r\n    subscriptions.push(\r\n      supabaseClient\r\n        .channel(`notifications_tasks_${userId}`)\r\n        .on(\r\n          'postgres_changes',\r\n          { event: '*', schema: 'public', table: 'tasks', filter: `owner_user_id=eq.${userId}` },\r\n          () => {\r\n            void fetchCounts(true)\r\n          }\r\n        )\r\n        .subscribe()\r\n    )\r\n\r\n    subscriptions.push(\r\n      supabaseClient\r\n        .channel(`notifications_investor_${userId}`)\r\n        .on(\r\n          'postgres_changes',\r\n          { event: '*', schema: 'public', table: 'investor_notifications', filter: `user_id=eq.${userId}` },\r\n          () => {\r\n            void fetchCounts(true)\r\n          }\r\n        )\r\n        .subscribe()\r\n    )\r\n\r\n    if (userRole.startsWith('staff_') || userRole === 'ceo') {\n      subscriptions.push(\r\n        supabaseClient\r\n          .channel('notifications_requests')\r\n          .on(\r\n            'postgres_changes',\r\n            { event: '*', schema: 'public', table: 'request_tickets', filter: `status=in.(${STAFF_STATUS_FILTER})` },\r\n            () => {\r\n              void fetchCounts(true)\r\n            }\r\n          )\r\n          .subscribe()\r\n      )\r\n\r\n      subscriptions.push(\r\n        supabaseClient\r\n          .channel('notifications_approvals')\r\n          .on(\r\n            'postgres_changes',\r\n            { event: '*', schema: 'public', table: 'approvals', filter: `status=in.(${STAFF_APPROVAL_FILTER})` },\r\n            () => {\r\n              void fetchCounts(true)\r\n            }\r\n          )\r\n          .subscribe()\r\n      )\r\n    }\r\n\r\n    const intervalId = window.setInterval(() => {\r\n      void fetchCounts(true)\r\n    }, 60_000)\r\n\r\n    return () => {\r\n      isMounted = false\r\n      subscriptions.forEach((channel) => {\r\n        supabaseClient?.removeChannel(channel)\r\n      })\r\n      window.clearInterval(intervalId)\r\n    }\r\n  }, [userId, userRole])\r\n\r\n  return { counts, loading }\r\n}\r\n","'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\r\nimport { User, Settings, LogOut, Shield, Building2 } from 'lucide-react'\r\nimport { Profile } from '@/lib/auth'\r\nimport { signOut } from '@/lib/auth-client'\r\nimport { useTheme } from '@/components/theme-provider'\r\n\r\ninterface UserMenuProps {\r\n  profile: Profile\r\n  brand?: 'versoholdings' | 'versotech'\r\n  useThemeColors?: boolean\r\n}\r\n\r\nexport function UserMenu({ profile, brand = 'versotech', useThemeColors = false }: UserMenuProps) {\r\n  const [mounted, setMounted] = useState(false)\r\n  const { theme } = useTheme()\r\n  const isDark = useThemeColors ? theme === 'staff-dark' : brand === 'versotech'\r\n  const router = useRouter()\r\n  const [isLoggingOut, setIsLoggingOut] = useState(false)\r\n\r\n  // Wait for client-side hydration to complete\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  const handleLogout = async () => {\r\n    setIsLoggingOut(true)\r\n    const loginPath = '/versotech_main/login'\r\n\r\n    try {\r\n      await signOut()\r\n      router.push(loginPath)\r\n      window.location.href = loginPath\r\n    } catch (error) {\r\n      console.error('Logout failed:', error)\r\n      window.location.href = loginPath\r\n    }\r\n  }\r\n\r\n  const getProfileRoute = (role: string) => {\r\n    // All users now use unified portal profile\r\n    // Legacy routes redirect via next.config.ts\r\n    return '/versotech_main/profile'\r\n  }\r\n\r\n  const handleProfileClick = () => {\r\n    router.push(getProfileRoute(profile.role))\r\n  }\r\n\r\n  const getRoleDisplay = (role: string) => {\r\n    switch (role) {\r\n      case 'investor': return 'Investor'\r\n      case 'staff_admin': return 'CEO'\r\n      case 'staff_ops': return 'Operations'\r\n      case 'staff_rm': return 'Relationship Manager'\r\n      case 'ceo': return 'CEO'\r\n      default: return role\r\n    }\r\n  }\r\n\r\n  const getRoleIcon = (role: string) => {\r\n    if (role === 'investor') return Building2\r\n    if (role.startsWith('staff_') || role === 'ceo') return Shield\r\n    return User\r\n  }\r\n\r\n  const getInitials = (name: string | null | undefined) => {\r\n    if (!name) return 'U'\r\n    return name\r\n      .split(' ')\r\n      .map(part => part[0])\r\n      .filter(Boolean)\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2) || 'U'\r\n  }\r\n\r\n  const RoleIcon = getRoleIcon(profile.role)\r\n\r\n  // Render placeholder until mounted to prevent Radix UI hydration mismatch\r\n  if (!mounted) {\r\n    return (\r\n      <Button variant=\"ghost\" className={`flex items-center gap-2 h-auto px-3 py-2 ${isDark ? 'hover:bg-white/10' : 'hover:bg-black/5'}`}>\r\n        <Avatar className=\"h-8 w-8\">\r\n          <AvatarFallback className={`${isDark ? 'bg-white/20 text-white' : 'bg-black/10 text-black'} text-xs`}>\r\n            {getInitials(profile.displayName)}\r\n          </AvatarFallback>\r\n        </Avatar>\r\n        <div className=\"text-left\">\r\n          <div className={`font-medium text-sm ${isDark ? 'text-white' : 'text-black'}`}>{profile.displayName}</div>\r\n          <div className={`text-xs ${isDark ? 'text-white/70' : 'text-black/70'}`}>{getRoleDisplay(profile.role)}</div>\r\n        </div>\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <DropdownMenu>\r\n      <DropdownMenuTrigger asChild>\r\n        <Button variant=\"ghost\" className={`flex items-center gap-2 h-auto px-3 py-2 ${isDark ? 'hover:bg-white/10' : 'hover:bg-black/5'}`}>\r\n          <Avatar className=\"h-8 w-8\">\r\n            <AvatarImage src={profile.avatar || undefined} alt={profile.displayName} />\r\n            <AvatarFallback className={`${isDark ? 'bg-white/20 text-white' : 'bg-black/10 text-black'} text-xs`}>\r\n              {getInitials(profile.displayName)}\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          <div className=\"text-left\">\r\n            <div className={`font-medium text-sm ${isDark ? 'text-white' : 'text-black'}`}>{profile.displayName}</div>\r\n            <div className={`text-xs ${isDark ? 'text-white/70' : 'text-black/70'}`}>{getRoleDisplay(profile.role)}</div>\r\n          </div>\r\n        </Button>\r\n      </DropdownMenuTrigger>\r\n      \r\n      <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n        <DropdownMenuLabel>My Account</DropdownMenuLabel>\r\n        <div className=\"px-2 py-1.5\">\r\n          <div className=\"text-sm font-medium\">{profile.displayName}</div>\r\n          <div className=\"text-xs text-muted-foreground\">{profile.email}</div>\r\n          {profile.title && (\r\n            <div className=\"text-xs text-muted-foreground\">{profile.title}</div>\r\n          )}\r\n        </div>\r\n        \r\n        <DropdownMenuSeparator />\r\n\r\n        <DropdownMenuItem onClick={handleProfileClick}>\r\n          <User className=\"mr-2 h-4 w-4\" />\r\n          Profile Settings\r\n        </DropdownMenuItem>\r\n\r\n        <DropdownMenuSeparator />\r\n        \r\n        <DropdownMenuItem \r\n          onClick={handleLogout}\r\n          disabled={isLoggingOut}\r\n          className=\"text-red-600 focus:text-red-600\"\r\n        >\r\n          <LogOut className=\"mr-2 h-4 w-4\" />\r\n          {isLoggingOut ? 'Signing out...' : 'Sign out'}\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  )\r\n}\r\n\r\n","'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { AlertTriangle, ArrowRight, CheckCircle2, Clock } from 'lucide-react'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Button } from '@/components/ui/button'\r\n\r\ninterface KYCAlertProps {\r\n    status: string // 'not_started' | 'pending' | 'approved' | 'rejected'\r\n}\r\n\r\nexport function KYCAlert({ status }: KYCAlertProps) {\r\n    if (status === 'approved') return null\r\n\r\n    if (status === 'pending') {\r\n        return (\r\n            <Alert className=\"border-amber-500/50 bg-amber-500/20 mb-6\">\r\n                <Clock className=\"h-4 w-4 text-amber-500\" />\r\n                <AlertTitle className=\"text-amber-500 font-semibold\">KYC Verification Pending</AlertTitle>\r\n                <AlertDescription className=\"text-white/90\">\r\n                    Your KYC application is currently under review by our compliance team. We will notify you once the review is complete.\r\n                </AlertDescription>\r\n            </Alert>\r\n        )\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n        return (\r\n            <Alert variant=\"destructive\" className=\"mb-6\">\r\n                <AlertTriangle className=\"h-4 w-4\" />\r\n                <AlertTitle>KYC Verification Failed</AlertTitle>\r\n                <AlertDescription className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                    <span>\r\n                        Your KYC application was rejected. Please review the feedback and update your information.\r\n                    </span>\r\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full sm:w-auto bg-background text-foreground hover:bg-accent\" asChild>\r\n                        <Link href=\"/versotech_main/profile?tab=kyc\">\r\n                            Update Information\r\n                            <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n                        </Link>\r\n                    </Button>\r\n                </AlertDescription>\r\n            </Alert>\r\n        )\r\n    }\r\n\r\n    // Default: not_started or any other status\r\n    return (\r\n        <Alert className=\"border-blue-500/30 bg-blue-500/10 text-blue-200 mb-6\">\r\n            <AlertTriangle className=\"h-4 w-4 text-blue-400\" />\r\n            <AlertTitle className=\"text-blue-400\">Action Required: Complete KYC</AlertTitle>\r\n            <AlertDescription className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                <span>\r\n                    To access all investment features, please complete your Know Your Customer (KYC) verification.\r\n                </span>\r\n                <Button size=\"sm\" className=\"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white border-0\" asChild>\r\n                    <Link href=\"/versotech_main/profile?tab=kyc\">\r\n                        Complete Now\r\n                        <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n                    </Link>\r\n                </Button>\r\n            </AlertDescription>\r\n        </Alert>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}