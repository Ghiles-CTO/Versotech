module.exports=[264890,a=>{"use strict";let b=(0,a.i(95799).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],264890)},618287,a=>{"use strict";let b=(0,a.i(95799).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],618287)},201986,a=>{"use strict";a.s(["formatBps",0,a=>null==a?"—":`${a} bps`,"formatCurrency",0,(a,b="USD")=>a?new Intl.NumberFormat("en-US",{style:"currency",currency:b,maximumFractionDigits:0}).format(a):"$0","formatDate",0,a=>{if(!a)return"—";let b="string"==typeof a?new Date(a):a;return Number.isNaN(b?.getTime?.())?"—":b.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}])},403205,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(364284),e=a.i(888987);let f=(0,d.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,role:"alert",className:(0,e.cn)(f({variant:c}),a),...d}));g.displayName="Alert";let h=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h5",{ref:d,className:(0,e.cn)("mb-1 font-medium leading-none tracking-tight",a),...c}));h.displayName="AlertTitle";let i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{ref:d,className:(0,e.cn)("text-sm [&_p]:leading-relaxed",a),...c}));i.displayName="AlertDescription",a.s(["Alert",()=>g,"AlertDescription",()=>i,"AlertTitle",()=>h])},438436,a=>{"use strict";let b=(0,a.i(95799).default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);a.s(["Percent",()=>b],438436)},964313,(a,b,c)=>{"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},753166,(a,b,c)=>{"use strict";var d=a.r(964313);function e(){}function f(){}f.resetWarningCache=e,b.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},202519,(a,b,c)=>{b.exports=a.r(753166)()},933838,a=>{"use strict";let b=(0,a.i(95799).default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["PenLine",()=>b],933838)},737022,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(497412),f=a.i(284169),g=a.i(421908),h=a.i(771088),i=a.i(933838),j=a.i(3321),k=a.i(278541),l=a.i(724070),m=a.i(438436),n=a.i(264890),o=a.i(871057),p=a.i(899750),q=a.i(201986),r=a.i(68020),s=a.i(121736);function t({agreements:a,isStaff:t,isArranger:u=!1}){let v=(0,d.useRouter)(),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)({active:!1,agreement:null,token:null,pdfUrl:null}),[A,B]=(0,c.useState)(!1),C=a=>a?.display_name||a?.legal_name||"Unknown Partner",D=async a=>{x(a.id);try{let b=await fetch(`/api/placement-agreements/${a.id}/sign`,{method:"POST"});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to initiate signing")}let c=await b.json();if(c.signing_url){let b=c.signing_url.split("/sign/")[1];z({active:!0,agreement:a,token:b,pdfUrl:c.pdf_url||a.pdf_url})}else p.toast.error("No signing URL returned")}catch(a){p.toast.error(a instanceof Error?a.message:"Failed to initiate signing")}finally{x(null)}},E=async a=>{if(y.token&&y.agreement){B(!0);try{let b=await fetch("/api/signature/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:y.token,signature_data_url:a})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to complete signature")}p.toast.success("Placement agreement signed successfully!"),z({active:!1,agreement:null,token:null,pdfUrl:null}),v.refresh()}catch(a){p.toast.error(a instanceof Error?a.message:"Failed to complete signature")}finally{B(!1)}}};return y.active&&y.agreement?(0,b.jsxs)(f.Card,{className:"border-purple-500/30 bg-gradient-to-br from-purple-500/5 to-pink-500/5",children:[(0,b.jsx)(f.CardHeader,{className:"border-b border-purple-500/20",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-500/20",children:(0,b.jsx)(i.PenLine,{className:"h-5 w-5 text-purple-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{className:"text-lg",children:"Sign Placement Agreement"}),(0,b.jsxs)(f.CardDescription,{children:["Agreement with ",C(y.agreement.commercial_partner)]})]})]}),(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>{z({active:!1,agreement:null,token:null,pdfUrl:null})},disabled:A,children:"Cancel"})]})}),(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium text-sm text-muted-foreground",children:"Document Preview"}),y.pdfUrl?(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden h-[500px]",children:(0,b.jsx)(s.InlinePdfViewer,{pdfUrl:y.pdfUrl,documentName:`Placement Agreement - ${C(y.agreement.commercial_partner)}`})}):(0,b.jsx)("div",{className:"border rounded-lg h-[500px] flex items-center justify-center bg-muted/50",children:(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"PDF not available"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium text-sm text-muted-foreground",children:"Your Signature"}),(0,b.jsx)(r.SignatureCanvasWidget,{onSignatureCapture:E,signerName:u?"Arranger":"CEO",signerEmail:"",isSubmitting:A}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"By signing, you agree to the terms of this placement fee agreement."})]})]})})]}):(0,b.jsxs)(f.Card,{className:"border-purple-500/20",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-500/20",children:(0,b.jsx)(o.Briefcase,{className:"h-5 w-5 text-purple-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{className:"text-lg",children:t?"Placement Agreements Awaiting Your Signature":u?"My Mandates - Placement Fee Agreements":"Your Pending Placement Agreements"}),(0,b.jsx)(f.CardDescription,{children:t?"These agreements have been approved and are ready for CEO signature":u?"Placement fee agreements for your mandates requiring your signature":"These agreements are ready for your signature"})]})]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"rounded-lg border",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Commercial Partner"}),(0,b.jsx)(h.TableHead,{children:"Commission"}),(0,b.jsx)(h.TableHead,{children:"Created"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:a.map(a=>{var c;return(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,b.jsx)(k.Building2,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:C(a.commercial_partner)}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.commercial_partner?.email})]})]})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(m.Percent,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium",children:null===(c=a.default_commission_bps)?"N/A":`${(c/100).toFixed(2)}%`})]})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,b.jsx)(l.Calendar,{className:"h-3.5 w-3.5"}),(0,q.formatDate)(a.created_at)]})}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsxs)(e.default,{href:`/versotech_main/commercial-partner-agreements/${a.id}`,children:[(0,b.jsx)(n.Eye,{className:"h-4 w-4 mr-1"}),"View"]})}),(0,b.jsx)(g.Button,{size:"sm",onClick:()=>D(a),disabled:w===a.id,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white",children:w===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}),"Loading..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.PenLine,{className:"h-4 w-4 mr-1"}),"Sign Now"]})})]})})]},a.id)})})]})})})]})}a.s(["PlacementAgreementSigningSection",()=>t])}];

//# sourceMappingURL=versotech-portal_247c9b7c._.js.map