module.exports=[69962,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(723603),f=a.i(390354),g=a.i(478870),h=a.i(816854),i=a.i(278541),j=a.i(787957),k=a.i(724070),l=a.i(142015),m=a.i(92881),n=a.i(158800),o=a.i(405708),p=a.i(487068),q=a.i(966494),r=a.i(188530),s=a.i(540316),t=a.i(167156),u=a.i(290913),v=a.i(13542),w=a.i(496392),x=a.i(64730);function y({onQuickAddSubscription:a,brand:y="versotech"}){let z=(0,d.useRouter)(),A=(0,d.usePathname)(),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1);(0,c.useEffect)(()=>{E(!0)},[]);let F=D&&"undefined"!=typeof navigator&&navigator.platform.toUpperCase().indexOf("MAC")>=0,G=[{id:"nav-dashboard",label:"Dashboard",description:"Operations overview",icon:f.LayoutDashboard,keywords:["home","overview","metrics"],action:()=>z.push("/versotech_main"),group:"navigation"},{id:"nav-investors",label:"Investors",description:"Manage investor accounts",icon:g.Users,keywords:["clients","kyc","accounts"],action:()=>z.push("/versotech_main/investors"),group:"navigation"},{id:"nav-subscriptions",label:"Subscriptions",description:"Manage subscriptions",icon:h.FileText,keywords:["commitments","deals"],action:()=>z.push("/versotech_main/subscriptions"),group:"navigation"},{id:"nav-entities",label:"Vehicles",description:"Manage investment vehicles",icon:i.Building2,keywords:["vehicles","funds","spvs","entities"],action:()=>z.push("/versotech_main/entities"),group:"navigation"},{id:"nav-deals",label:"Deals",description:"Manage deal inventory",icon:j.Activity,keywords:["opportunities","investments"],action:()=>z.push("/versotech_main/deals"),group:"navigation"},{id:"nav-approvals",label:"Approvals",description:"Review and approve",icon:m.UserCheck,keywords:["review","approve","pending"],action:()=>z.push("/versotech_main/approvals"),group:"navigation"},{id:"nav-messages",label:"Messages",description:"Investor communication",icon:l.MessageSquare,keywords:["chat","inbox","communication"],action:()=>z.push("/versotech_main/messages"),group:"navigation"},{id:"nav-calendar",label:"Calendar",description:"Deadlines and schedule",icon:k.Calendar,keywords:["schedule","deadlines","events"],action:()=>z.push("/versotech_main/calendar"),group:"navigation"},{id:"nav-processes",label:"Processes",description:"Workflow automation",icon:r.Workflow,keywords:["automation","workflows"],action:()=>z.push("/versotech_main/processes"),group:"navigation"},{id:"nav-requests",label:"Requests",description:"Investor requests",icon:s.ClipboardList,keywords:["tickets","support"],action:()=>z.push("/versotech_main/requests"),group:"navigation"},{id:"nav-introducers",label:"Introducers",description:"Manage introducers",icon:t.HandHeart,keywords:["referrals","partners"],action:()=>z.push("/versotech_main/introducers"),group:"navigation"},{id:"nav-fees",label:"Fees",description:"Fee management",icon:u.Calculator,keywords:["billing","charges"],action:()=>z.push("/versotech_main/fees"),group:"navigation"},{id:"nav-reconciliation",label:"Reconciliation",description:"Bank reconciliation",icon:v.CreditCard,keywords:["payments","banking"],action:()=>z.push("/versotech_main/reconciliation"),group:"navigation"},{id:"nav-audit",label:"Audit",description:"Audit logs",icon:w.Shield,keywords:["compliance","logs","security"],action:()=>z.push("/versotech_main/audit"),group:"navigation"},{id:"nav-admin",label:"Admin",description:"System administration",icon:x.Database,keywords:["settings","config"],action:()=>z.push("/versotech_main/admin"),group:"navigation"},{id:"nav-settings",label:"Settings",description:"Account settings",icon:n.Settings,keywords:["preferences","profile"],action:()=>z.push("/versotech_main/admin"),group:"navigation"},{id:"action-add-subscription",label:"Add Subscription",description:"Quick add a new subscription",icon:o.Plus,shortcut:`${F?"⌘":"Ctrl"}⇧S`,keywords:["create","new","subscription"],action:()=>{C(!1),a?.()},group:"actions"},{id:"action-search-investors",label:"Search Investors",description:"Find an investor",icon:p.Search,keywords:["find","investor","search"],action:()=>z.push("/versotech_main/investors"),group:"actions"}],H=[{id:"nav-dashboard",label:"Dashboard",description:"Portfolio overview",icon:f.LayoutDashboard,keywords:["home","overview"],action:()=>z.push("/versotech_main/dashboard"),group:"navigation"},{id:"nav-deals",label:"Active Deals",description:"Investment opportunities",icon:j.Activity,keywords:["investments","opportunities"],action:()=>z.push("/versotech_main/opportunities"),group:"navigation"},{id:"nav-holdings",label:"Portfolio",description:"My investments",icon:q.TrendingUp,keywords:["investments","positions"],action:()=>z.push("/versotech_main/portfolio"),group:"navigation"},{id:"nav-calendar",label:"Calendar",description:"Deadlines and events",icon:k.Calendar,keywords:["schedule","deadlines"],action:()=>z.push("/versotech_main/calendar"),group:"navigation"},{id:"nav-messages",label:"Messages",description:"Communication",icon:l.MessageSquare,keywords:["chat","inbox"],action:()=>z.push("/versotech_main/messages"),group:"navigation"},{id:"nav-settings",label:"Settings",description:"Account settings",icon:n.Settings,keywords:["preferences","profile"],action:()=>z.push("/versotech_main/profile"),group:"navigation"}],I="versotech"===y?G:H;(0,c.useEffect)(()=>{let a=a=>{"k"===a.key&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),C(a=>!a))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]);let J=I.filter(a=>"navigation"===a.group),K=I.filter(a=>"actions"===a.group);return D?(0,b.jsxs)(e.CommandDialog,{open:B,onOpenChange:C,children:[(0,b.jsx)(e.CommandInput,{placeholder:"Type a command or search..."}),(0,b.jsxs)(e.CommandList,{children:[(0,b.jsx)(e.CommandEmpty,{children:"No results found."}),K.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.CommandGroup,{heading:"Quick Actions",children:K.map(a=>{let c=a.icon;return(0,b.jsxs)(e.CommandItem,{value:`${a.label} ${a.description} ${a.keywords?.join(" ")}`,onSelect:()=>{a.action(),C(!1)},children:[c&&(0,b.jsx)(c,{className:"mr-2 h-4 w-4"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{children:a.label}),a.description&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.description})]}),a.shortcut&&(0,b.jsx)(e.CommandShortcut,{children:a.shortcut})]},a.id)})}),(0,b.jsx)(e.CommandSeparator,{})]}),(0,b.jsx)(e.CommandGroup,{heading:"Navigation",children:J.map(a=>{let c=a.icon,d=A===a.action.toString().match(/push\('(.+?)'\)/)?.[1];return(0,b.jsxs)(e.CommandItem,{value:`${a.label} ${a.description} ${a.keywords?.join(" ")}`,onSelect:()=>{a.action(),C(!1)},children:[c&&(0,b.jsx)(c,{className:"mr-2 h-4 w-4"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:d?"font-semibold":"",children:a.label}),a.description&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.description})]}),a.shortcut&&(0,b.jsx)(e.CommandShortcut,{children:a.shortcut})]},a.id)})})]})]}):null}var z=a.i(470305),A=a.i(421908),B=a.i(663475),C=a.i(249464),D=a.i(951870),E=a.i(3321),F=a.i(877918),G=a.i(899750),H=a.i(58834);function I({open:a,onOpenChange:e,defaultInvestorId:f,defaultVehicleId:g}){let h=(0,d.useRouter)(),i=(0,H.createClient)(),[j,k]=(0,c.useState)(f||""),[l,m]=(0,c.useState)(g||""),[n,p]=(0,c.useState)(""),[q,r]=(0,c.useState)("USD"),[s,t]=(0,c.useState)("draft"),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)("");(0,c.useEffect)(()=>{let b=async()=>{try{I(!0);let{data:a,error:b}=await i.from("investors").select("id, legal_name, email").eq("status","active").order("legal_name").limit(1e3);if(b)throw b;v(a||[]);let{data:c,error:d}=await i.from("vehicles").select("id, name, type").eq("status","active").order("name");if(d)throw d;x(c||[])}catch(a){console.error("Failed to load data:",a),M("Failed to load investors and vehicles")}finally{I(!1)}};a&&b()},[a,i]),(0,c.useEffect)(()=>{a&&(k(f||""),m(g||""),p(""),r("USD"),t("draft"),M(null),O(""),Q(""))},[a,f,g]);let R=u.filter(a=>a.legal_name.toLowerCase().includes(N.toLowerCase())||a.email?.toLowerCase().includes(N.toLowerCase())),S=w.filter(a=>a.name.toLowerCase().includes(P.toLowerCase())),T=async a=>{if(a.preventDefault(),M(null),!j)return void M("Please select an investor");if(!l)return void M("Please select a vehicle");if(!n||0>=parseFloat(n))return void M("Please enter a valid commitment amount");try{K(!0);let{data:a,error:b}=await i.from("subscriptions").insert({investor_id:j,vehicle_id:l,commitment:parseFloat(n),currency:q,status:s,subscription_date:new Date().toISOString(),created_at:new Date().toISOString()}).select().single();if(b)throw b;G.toast.success("Subscription created successfully",{description:`Created subscription for ${u.find(a=>a.id===j)?.legal_name}`,action:{label:"View",onClick:()=>h.push("/versotech_main/subscriptions")}}),e(!1),h.refresh()}catch(a){console.error("Failed to create subscription:",a),M(a instanceof Error?a.message:"Failed to create subscription"),G.toast.error("Failed to create subscription")}finally{K(!1)}};return(0,b.jsx)(z.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(z.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(z.DialogHeader,{children:[(0,b.jsxs)(z.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Plus,{className:"h-5 w-5"}),"Quick Add Subscription"]}),(0,b.jsx)(z.DialogDescription,{children:"Create a new subscription quickly. Press Cmd/Ctrl+Shift+S to open this dialog."})]}),(0,b.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[L&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded-lg",children:[(0,b.jsx)(F.AlertCircle,{className:"h-4 w-4"}),L]}),y?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(E.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"investor",children:"Investor *"}),(0,b.jsxs)(D.Select,{value:j,onValueChange:k,children:[(0,b.jsx)(D.SelectTrigger,{id:"investor",children:(0,b.jsx)(D.SelectValue,{placeholder:"Select investor..."})}),(0,b.jsxs)(D.SelectContent,{children:[(0,b.jsx)("div",{className:"p-2",children:(0,b.jsx)(B.Input,{placeholder:"Search investors...",value:N,onChange:a=>O(a.target.value),className:"h-8"})}),0===R.length?(0,b.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No investors found"}):R.map(a=>(0,b.jsxs)(D.SelectItem,{value:a.id,children:[a.legal_name,a.email&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:a.email})]},a.id))]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"vehicle",children:"Vehicle *"}),(0,b.jsxs)(D.Select,{value:l,onValueChange:m,children:[(0,b.jsx)(D.SelectTrigger,{id:"vehicle",children:(0,b.jsx)(D.SelectValue,{placeholder:"Select vehicle..."})}),(0,b.jsxs)(D.SelectContent,{children:[(0,b.jsx)("div",{className:"p-2",children:(0,b.jsx)(B.Input,{placeholder:"Search vehicles...",value:P,onChange:a=>Q(a.target.value),className:"h-8"})}),0===S.length?(0,b.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No vehicles found"}):S.map(a=>(0,b.jsxs)(D.SelectItem,{value:a.id,children:[a.name,(0,b.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:a.type})]},a.id))]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"commitment",children:"Commitment Amount *"}),(0,b.jsx)(B.Input,{id:"commitment",type:"number",placeholder:"1000000",value:n,onChange:a=>p(a.target.value),min:"0",step:"0.01",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"currency",children:"Currency"}),(0,b.jsxs)(D.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(D.SelectTrigger,{id:"currency",children:(0,b.jsx)(D.SelectValue,{})}),(0,b.jsxs)(D.SelectContent,{children:[(0,b.jsx)(D.SelectItem,{value:"USD",children:"USD"}),(0,b.jsx)(D.SelectItem,{value:"EUR",children:"EUR"}),(0,b.jsx)(D.SelectItem,{value:"GBP",children:"GBP"}),(0,b.jsx)(D.SelectItem,{value:"CHF",children:"CHF"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Label,{htmlFor:"status",children:"Initial Status"}),(0,b.jsxs)(D.Select,{value:s,onValueChange:t,children:[(0,b.jsx)(D.SelectTrigger,{id:"status",children:(0,b.jsx)(D.SelectValue,{})}),(0,b.jsxs)(D.SelectContent,{children:[(0,b.jsx)(D.SelectItem,{value:"draft",children:"Draft"}),(0,b.jsx)(D.SelectItem,{value:"pending",children:"Pending Review"}),(0,b.jsx)(D.SelectItem,{value:"active",children:"Active"})]})]})]})]}),(0,b.jsxs)(z.DialogFooter,{children:[(0,b.jsx)(A.Button,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:J,children:"Cancel"}),(0,b.jsx)(A.Button,{type:"submit",disabled:J||y,children:J?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(E.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Create Subscription"]})})]})]})]})})}function J({brand:a,role:d}){let[e,f]=(0,c.useState)(!1),g=["staff_admin","staff_ops","staff_rm","ceo"].includes(d);return(!function(a,b,d={}){let{ctrl:e=!1,meta:f=!1,shift:g=!1,alt:h=!1,enabled:i=!0}=d;(0,c.useEffect)(()=>{if(!i)return;let a=a=>{if(!a.key)return;let c="s"===a.key.toLowerCase(),d=e?a.ctrlKey:!a.ctrlKey,i=f?a.metaKey:!a.metaKey,j=g?a.shiftKey:!a.shiftKey,k=h?a.altKey:!a.altKey,l=e||f?(a.ctrlKey||a.metaKey)&&j&&k:d&&i&&j&&k;c&&l&&(a.preventDefault(),b(a))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},["s",e,f,g,h,i,b])}(0,()=>f(!0),{meta:!0,shift:!0,enabled:g&&"versotech"===a}),g&&"versotech"===a)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{brand:a,onQuickAddSubscription:()=>f(!0)}),(0,b.jsx)(I,{open:e,onOpenChange:f})]}):(0,b.jsx)(y,{brand:a})}a.s(["GlobalKeyboardShortcuts",()=>J],69962)}];

//# sourceMappingURL=versotech-portal_src_components_layout_global-keyboard-shortcuts_tsx_3d923e5d._.js.map