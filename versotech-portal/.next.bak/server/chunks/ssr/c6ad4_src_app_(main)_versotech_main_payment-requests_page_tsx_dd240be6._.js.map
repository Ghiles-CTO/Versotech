{"version":3,"sources":["../../../../../versotech-portal/src/components/commissions/request-payment-dialog.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/payment-requests/page.tsx","../../../../../versotech-portal/node_modules/lucide-react/src/icons/arrow-down-left.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Loader2, CreditCard, Scale, AlertCircle } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\n\nexport type CommissionType = 'partner' | 'introducer' | 'commercial-partner'\n\ninterface Commission {\n  id: string\n  accrual_amount: number\n  currency: string\n  entity_name: string\n  deal_id?: string\n  deal?: {\n    id: string\n    name: string\n  }\n}\n\ninterface Lawyer {\n  id: string\n  firm_name: string\n  display_name?: string\n}\n\ninterface RequestPaymentDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  commission: Commission | null\n  commissionType: CommissionType\n  onSuccess: () => void\n}\n\nconst ENTITY_LABELS: Record<CommissionType, string> = {\n  'partner': 'Partner',\n  'introducer': 'Introducer',\n  'commercial-partner': 'Commercial Partner',\n}\n\n/**\n * Generic Request Payment Dialog\n * Works for all commission types: partner, introducer, commercial-partner\n * Sends payment request to lawyers and CEO for approval\n */\nexport function RequestPaymentDialog({\n  open,\n  onOpenChange,\n  commission,\n  commissionType,\n  onSuccess,\n}: RequestPaymentDialogProps) {\n  const [sending, setSending] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [notes, setNotes] = useState('')\n  const [selectedLawyerId, setSelectedLawyerId] = useState<string>('')\n  const [lawyers, setLawyers] = useState<Lawyer[]>([])\n  const [loadingLawyers, setLoadingLawyers] = useState(false)\n\n  // Fetch lawyers assigned to the deal\n  useEffect(() => {\n    const fetchLawyers = async () => {\n      if (!open || !commission?.deal_id) {\n        setLawyers([])\n        return\n      }\n\n      setLoadingLawyers(true)\n      try {\n        const supabase = createClient()\n\n        // Get lawyer assignments for this deal\n        const { data: assignments, error: assignError } = await supabase\n          .from('deal_lawyer_assignments')\n          .select('lawyer_id')\n          .eq('deal_id', commission.deal_id)\n\n        if (assignError || !assignments?.length) {\n          setLawyers([])\n          return\n        }\n\n        const lawyerIds = assignments.map(a => a.lawyer_id)\n\n        // Fetch lawyer details\n        const { data: lawyerData, error: lawyerError } = await supabase\n          .from('lawyers')\n          .select('id, firm_name, display_name')\n          .in('id', lawyerIds)\n\n        if (lawyerError) {\n          console.error('[RequestPaymentDialog] Error fetching lawyers:', lawyerError)\n          setLawyers([])\n          return\n        }\n\n        setLawyers(lawyerData || [])\n      } catch (err) {\n        console.error('[RequestPaymentDialog] Unexpected error:', err)\n        setLawyers([])\n      } finally {\n        setLoadingLawyers(false)\n      }\n    }\n\n    fetchLawyers()\n  }, [open, commission?.deal_id])\n\n  // Reset state when dialog opens/closes\n  useEffect(() => {\n    if (!open) {\n      setNotes('')\n      setSelectedLawyerId('')\n      setError(null)\n    }\n  }, [open])\n\n  const handleSubmit = async () => {\n    if (!commission) return\n\n    setSending(true)\n    setError(null)\n\n    try {\n      // Build API URL based on commission type\n      const apiUrl = `/api/arrangers/me/${commissionType}-commissions/${commission.id}/request-payment`\n\n      const requestBody: Record<string, any> = {}\n      if (notes.trim()) requestBody.notes = notes.trim()\n      if (selectedLawyerId && selectedLawyerId !== 'none') {\n        requestBody.lawyer_id = selectedLawyerId\n      }\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(requestBody),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to request payment')\n      }\n\n      const result = await response.json()\n\n      onSuccess()\n      onOpenChange(false)\n    } catch (err) {\n      console.error('[RequestPaymentDialog] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to request payment')\n    } finally {\n      setSending(false)\n    }\n  }\n\n  if (!commission) return null\n\n  const entityLabel = ENTITY_LABELS[commissionType]\n  const formattedAmount = formatCurrency(\n    commission.accrual_amount,\n    commission.currency || 'USD'\n  )\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <CreditCard className=\"h-5 w-5\" />\n            Request Payment\n          </DialogTitle>\n          <DialogDescription>\n            Send a payment request to lawyers and CEO for approval.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"py-4 space-y-4\">\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded flex items-start gap-2\">\n              <AlertCircle className=\"h-4 w-4 mt-0.5 flex-shrink-0\" />\n              <span>{error}</span>\n            </div>\n          )}\n\n          {/* Commission Summary */}\n          <div className=\"bg-muted/50 p-4 rounded-lg space-y-2\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-muted-foreground\">{entityLabel}:</span>\n              <span className=\"font-medium\">{commission.entity_name || 'Unknown'}</span>\n            </div>\n            {commission.deal && (\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Deal:</span>\n                <span className=\"font-medium\">{commission.deal.name}</span>\n              </div>\n            )}\n            <div className=\"flex justify-between\">\n              <span className=\"text-muted-foreground\">Amount:</span>\n              <span className=\"font-medium text-green-600\">{formattedAmount}</span>\n            </div>\n          </div>\n\n          {/* Lawyer Selection */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"lawyer\" className=\"flex items-center gap-2\">\n              <Scale className=\"h-4 w-4\" />\n              Priority Lawyer (Optional)\n            </Label>\n            {loadingLawyers ? (\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground py-2\">\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n                Loading lawyers...\n              </div>\n            ) : lawyers.length > 0 ? (\n              <Select value={selectedLawyerId} onValueChange={setSelectedLawyerId}>\n                <SelectTrigger id=\"lawyer\">\n                  <SelectValue placeholder=\"Select a lawyer (optional)\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"none\">No specific lawyer</SelectItem>\n                  {lawyers.map((lawyer) => (\n                    <SelectItem key={lawyer.id} value={lawyer.id}>\n                      {lawyer.display_name || lawyer.firm_name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            ) : (\n              <p className=\"text-sm text-muted-foreground py-2\">\n                {commission.deal_id\n                  ? 'No lawyers assigned to this deal'\n                  : 'No deal associated - CEO will be notified'}\n              </p>\n            )}\n          </div>\n\n          {/* Notes */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Notes (Optional)</Label>\n            <Textarea\n              id=\"notes\"\n              placeholder=\"Add any payment instructions or notes...\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              rows={3}\n            />\n          </div>\n\n          {/* Info Box */}\n          <div className=\"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 rounded-lg text-sm\">\n            <p className=\"text-blue-800 dark:text-blue-200\">\n              <strong>Who will be notified:</strong>\n            </p>\n            <ul className=\"mt-1 text-blue-700 dark:text-blue-300 list-disc list-inside space-y-0.5\">\n              {lawyers.length > 0 && (\n                <li>Lawyers assigned to this deal ({lawyers.length})</li>\n              )}\n              <li>CEO / Staff administrators</li>\n              {selectedLawyerId && selectedLawyerId !== 'none' && (\n                <li>Priority notification to selected lawyer</li>\n              )}\n            </ul>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={sending}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={sending}>\n            {sending ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Sending...\n              </>\n            ) : (\n              <>\n                <CreditCard className=\"h-4 w-4 mr-2\" />\n                Request Payment\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","'use client'\r\n\r\nimport { useEffect, useState, useCallback } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table'\r\nimport {\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n} from '@/components/ui/tabs'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport {\r\n  DollarSign,\r\n  Clock,\r\n  CheckCircle2,\r\n  Search,\r\n  Loader2,\r\n  AlertCircle,\r\n  FileText,\r\n  Send,\r\n  Receipt,\r\n  Building2,\r\n  ArrowDownLeft,\r\n  ArrowUpRight,\r\n  Users,\r\n  Briefcase,\r\n  Handshake,\r\n  MoreHorizontal,\r\n  Mail,\r\n  CreditCard,\r\n  Eye,\r\n  XCircle,\r\n  Wallet,\r\n} from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { formatCurrency, formatDate } from '@/lib/format'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { RequestInvoiceDialog, type CommissionType } from '@/components/commissions/request-invoice-dialog'\r\nimport { RequestPaymentDialog } from '@/components/commissions/request-payment-dialog'\r\nimport { ViewInvoiceDialog } from '@/components/commissions/view-invoice-dialog'\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\n\r\ntype ArrangerInfo = {\r\n  id: string\r\n  legal_name: string\r\n}\r\n\r\ntype FeeEvent = {\r\n  id: string\r\n  deal_id: string\r\n  deal_name: string\r\n  investor_name: string\r\n  fee_type: string\r\n  computed_amount: number\r\n  currency: string\r\n  status: string\r\n  event_date: string\r\n  invoice_id: string | null\r\n}\r\n\r\ntype PaymentRequest = {\r\n  id: string\r\n  invoice_number: string\r\n  deal_name: string\r\n  investor_name: string\r\n  total: number\r\n  paid_amount: number\r\n  status: string\r\n  due_date: string\r\n  created_at: string\r\n}\r\n\r\ntype InboundSummary = {\r\n  pendingFees: number\r\n  pendingTotal: number\r\n  invoicedCount: number\r\n  invoicedTotal: number\r\n  paidCount: number\r\n  paidTotal: number\r\n}\r\n\r\n// Outbound commission (fees I owe to partners/introducers/CPs)\r\ntype OutboundCommission = {\r\n  id: string\r\n  type: 'partner' | 'introducer' | 'commercial-partner'\r\n  entity_id: string\r\n  entity_name: string\r\n  entity_type_label: string\r\n  deal_id: string | null\r\n  deal_name: string | null\r\n  accrual_amount: number\r\n  currency: string\r\n  status: 'accrued' | 'invoice_requested' | 'invoiced' | 'paid' | 'cancelled'\r\n  invoice_id: string | null\r\n  created_at: string\r\n  payment_due_date: string | null\r\n}\r\n\r\ntype OutboundSummary = {\r\n  total_accrued: number\r\n  total_invoice_requested: number\r\n  total_invoiced: number\r\n  total_paid: number\r\n  total_owed: number // accrued + invoice_requested + invoiced\r\n  count: number\r\n  by_type: {\r\n    partner: { count: number; total: number }\r\n    introducer: { count: number; total: number }\r\n    commercial_partner: { count: number; total: number }\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// Status Styling\r\n// ============================================================================\r\n\r\nconst STATUS_STYLES: Record<string, string> = {\r\n  accrued: 'bg-blue-100 text-blue-800 border-blue-200',\r\n  invoice_requested: 'bg-amber-100 text-amber-800 border-amber-200',\r\n  invoiced: 'bg-purple-100 text-purple-800 border-purple-200',\r\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\r\n  paid: 'bg-green-100 text-green-800 border-green-200',\r\n  sent: 'bg-purple-100 text-purple-800 border-purple-200',\r\n  overdue: 'bg-red-100 text-red-800 border-red-200',\r\n  cancelled: 'bg-gray-100 text-gray-800 border-gray-200',\r\n}\r\n\r\nconst STATUS_LABELS: Record<string, string> = {\r\n  accrued: 'Accrued',\r\n  invoice_requested: 'Invoice Requested',\r\n  invoiced: 'Invoiced',\r\n  paid: 'Paid',\r\n  cancelled: 'Cancelled',\r\n}\r\n\r\nconst ENTITY_TYPE_ICONS: Record<string, React.ReactNode> = {\r\n  partner: <Briefcase className=\"h-3 w-3\" />,\r\n  introducer: <Handshake className=\"h-3 w-3\" />,\r\n  'commercial-partner': <Building2 className=\"h-3 w-3\" />,\r\n}\r\n\r\nconst ENTITY_TYPE_LABELS: Record<string, string> = {\r\n  partner: 'Partner',\r\n  introducer: 'Introducer',\r\n  'commercial-partner': 'Commercial Partner',\r\n}\r\n\r\n// ============================================================================\r\n// Main Component\r\n// ============================================================================\r\n\r\nexport default function PaymentRequestsPage() {\r\n  // Arranger info\r\n  const [arrangerInfo, setArrangerInfo] = useState<ArrangerInfo | null>(null)\r\n\r\n  // Inbound data (fees owed TO arranger)\r\n  const [feeEvents, setFeeEvents] = useState<FeeEvent[]>([])\r\n  const [paymentRequests, setPaymentRequests] = useState<PaymentRequest[]>([])\r\n  const [inboundSummary, setInboundSummary] = useState<InboundSummary>({\r\n    pendingFees: 0,\r\n    pendingTotal: 0,\r\n    invoicedCount: 0,\r\n    invoicedTotal: 0,\r\n    paidCount: 0,\r\n    paidTotal: 0,\r\n  })\r\n\r\n  // Outbound data (fees arranger must PAY)\r\n  const [outboundCommissions, setOutboundCommissions] = useState<OutboundCommission[]>([])\r\n  const [outboundSummary, setOutboundSummary] = useState<OutboundSummary>({\r\n    total_accrued: 0,\r\n    total_invoice_requested: 0,\r\n    total_invoiced: 0,\r\n    total_paid: 0,\r\n    total_owed: 0,\r\n    count: 0,\r\n    by_type: {\r\n      partner: { count: 0, total: 0 },\r\n      introducer: { count: 0, total: 0 },\r\n      commercial_partner: { count: 0, total: 0 },\r\n    },\r\n  })\r\n\r\n  // UI state\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [search, setSearch] = useState('')\r\n  const [selectedFeeEvents, setSelectedFeeEvents] = useState<Set<string>>(new Set())\r\n  const [submitting, setSubmitting] = useState(false)\r\n\r\n  // Tab state\r\n  const [mainTab, setMainTab] = useState<'inbound' | 'outbound'>('inbound')\r\n  const [inboundSubTab, setInboundSubTab] = useState('pending')\r\n  const [entityTypeFilter, setEntityTypeFilter] = useState<'all' | 'partner' | 'introducer' | 'commercial-partner'>('all')\r\n\r\n  // Dialog state\r\n  const [invoiceDialogOpen, setInvoiceDialogOpen] = useState(false)\r\n  const [paymentDialogOpen, setPaymentDialogOpen] = useState(false)\r\n  const [viewInvoiceDialogOpen, setViewInvoiceDialogOpen] = useState(false)\r\n  const [selectedCommission, setSelectedCommission] = useState<OutboundCommission | null>(null)\r\n\r\n  // ============================================================================\r\n  // Data Fetching\r\n  // ============================================================================\r\n\r\n  const fetchData = useCallback(async () => {\r\n    try {\r\n      setLoading(true)\r\n      const supabase = createClient()\r\n\r\n      // Get current user\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      if (!user) {\r\n        setError('Not authenticated')\r\n        return\r\n      }\r\n\r\n      // Check if user is an arranger\r\n      const { data: arrangerUser, error: arrangerUserError } = await supabase\r\n        .from('arranger_users')\r\n        .select('arranger_id')\r\n        .eq('user_id', user.id)\r\n        .maybeSingle()\r\n\r\n      if (arrangerUserError || !arrangerUser) {\r\n        setError('Only arrangers can access this page')\r\n        return\r\n      }\r\n\r\n      // Fetch arranger info\r\n      const { data: arranger, error: arrangerError } = await supabase\r\n        .from('arranger_entities')\r\n        .select('id, legal_name')\r\n        .eq('id', arrangerUser.arranger_id)\r\n        .single()\r\n\r\n      if (arrangerError) throw arrangerError\r\n      setArrangerInfo(arranger)\r\n\r\n      // Parallel fetch all data\r\n      const [inboundResult, outboundResult] = await Promise.all([\r\n        fetchInboundData(supabase, arrangerUser.arranger_id),\r\n        fetchOutboundData(arrangerUser.arranger_id),\r\n      ])\r\n\r\n      // Set inbound data\r\n      setFeeEvents(inboundResult.feeEvents)\r\n      setPaymentRequests(inboundResult.paymentRequests)\r\n      setInboundSummary(inboundResult.summary)\r\n\r\n      // Set outbound data\r\n      setOutboundCommissions(outboundResult.commissions)\r\n      setOutboundSummary(outboundResult.summary)\r\n\r\n      setError(null)\r\n    } catch (err) {\r\n      console.error('[PaymentRequestsPage] Error:', err)\r\n      setError(err instanceof Error ? err.message : 'Failed to load data')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    fetchData()\r\n  }, [fetchData])\r\n\r\n  async function fetchInboundData(supabase: any, arrangerId: string) {\r\n    // Fetch fee events where arranger is the payee\r\n    const { data: events, error: eventsError } = await supabase\r\n      .from('fee_events')\r\n      .select(`\r\n        id,\r\n        deal_id,\r\n        investor_id,\r\n        fee_type,\r\n        computed_amount,\r\n        currency,\r\n        status,\r\n        event_date,\r\n        invoice_id,\r\n        deal:deal_id (id, name),\r\n        investor:investor_id (id, display_name, legal_name)\r\n      `)\r\n      .eq('payee_arranger_id', arrangerId)\r\n      .order('event_date', { ascending: false })\r\n\r\n    if (eventsError) throw eventsError\r\n\r\n    const feeEvents: FeeEvent[] = (events || []).map((event: any) => ({\r\n      id: event.id,\r\n      deal_id: event.deal_id,\r\n      deal_name: event.deal?.name || 'Unknown Deal',\r\n      investor_name: event.investor?.display_name || event.investor?.legal_name || 'Unknown',\r\n      fee_type: event.fee_type || 'fee',\r\n      computed_amount: Number(event.computed_amount) || 0,\r\n      currency: event.currency || 'USD',\r\n      status: event.status || 'accrued',\r\n      event_date: event.event_date,\r\n      invoice_id: event.invoice_id,\r\n    }))\r\n\r\n    // Fetch payment requests via API\r\n    let paymentRequests: PaymentRequest[] = []\r\n    const response = await fetch('/api/arrangers/me/payment-requests')\r\n    if (response.ok) {\r\n      const { payment_requests } = await response.json()\r\n      paymentRequests = (payment_requests || []).map((req: any) => ({\r\n        id: req.id,\r\n        invoice_number: req.invoice_number,\r\n        deal_name: req.deal?.name || 'Multiple',\r\n        investor_name: req.investor?.display_name || req.investor?.legal_name || 'Multiple',\r\n        total: Number(req.total) || 0,\r\n        paid_amount: Number(req.paid_amount) || 0,\r\n        status: req.status,\r\n        due_date: req.due_date,\r\n        created_at: req.created_at,\r\n      }))\r\n    }\r\n\r\n    // Calculate summary\r\n    const pendingEvents = feeEvents.filter(e => e.status === 'accrued')\r\n    const invoicedEvents = feeEvents.filter(e => e.status === 'invoiced')\r\n    const paidEvents = feeEvents.filter(e => e.status === 'paid')\r\n\r\n    return {\r\n      feeEvents,\r\n      paymentRequests,\r\n      summary: {\r\n        pendingFees: pendingEvents.length,\r\n        pendingTotal: pendingEvents.reduce((sum, e) => sum + e.computed_amount, 0),\r\n        invoicedCount: invoicedEvents.length,\r\n        invoicedTotal: invoicedEvents.reduce((sum, e) => sum + e.computed_amount, 0),\r\n        paidCount: paidEvents.length,\r\n        paidTotal: paidEvents.reduce((sum, e) => sum + e.computed_amount, 0),\r\n      },\r\n    }\r\n  }\r\n\r\n  async function fetchOutboundData(arrangerId: string) {\r\n    // Fetch all 3 commission types in parallel\r\n    const [partnerRes, introducerRes, cpRes] = await Promise.all([\r\n      fetch('/api/arrangers/me/partner-commissions'),\r\n      fetch('/api/arrangers/me/introducer-commissions'),\r\n      fetch('/api/arrangers/me/commercial-partner-commissions'),\r\n    ])\r\n\r\n    const [partnerData, introducerData, cpData] = await Promise.all([\r\n      partnerRes.ok ? partnerRes.json() : { data: [] },\r\n      introducerRes.ok ? introducerRes.json() : { data: [] },\r\n      cpRes.ok ? cpRes.json() : { data: [] },\r\n    ])\r\n\r\n    // Transform to unified format\r\n    const commissions: OutboundCommission[] = []\r\n\r\n    // Partner commissions\r\n    for (const c of (partnerData.data || [])) {\r\n      commissions.push({\r\n        id: c.id,\r\n        type: 'partner',\r\n        entity_id: c.partner_id || c.partner?.id,\r\n        entity_name: c.partner?.name || c.partner?.legal_name || 'Unknown Partner',\r\n        entity_type_label: 'Partner',\r\n        deal_id: c.deal_id || c.deal?.id || null,\r\n        deal_name: c.deal?.name || null,\r\n        accrual_amount: Number(c.accrual_amount) || 0,\r\n        currency: c.currency || 'USD',\r\n        status: c.status || 'accrued',\r\n        invoice_id: c.invoice_id || null,\r\n        created_at: c.created_at,\r\n        payment_due_date: c.payment_due_date || null,\r\n      })\r\n    }\r\n\r\n    // Introducer commissions\r\n    for (const c of (introducerData.data || [])) {\r\n      commissions.push({\r\n        id: c.id,\r\n        type: 'introducer',\r\n        entity_id: c.introducer_id || c.introducer?.id,\r\n        entity_name: c.introducer?.name || c.introducer?.legal_name || 'Unknown Introducer',\r\n        entity_type_label: 'Introducer',\r\n        deal_id: c.deal_id || c.deal?.id || null,\r\n        deal_name: c.deal?.name || null,\r\n        accrual_amount: Number(c.accrual_amount) || 0,\r\n        currency: c.currency || 'USD',\r\n        status: c.status || 'accrued',\r\n        invoice_id: c.invoice_id || null,\r\n        created_at: c.created_at,\r\n        payment_due_date: c.payment_due_date || null,\r\n      })\r\n    }\r\n\r\n    // Commercial partner commissions\r\n    for (const c of (cpData.data || [])) {\r\n      commissions.push({\r\n        id: c.id,\r\n        type: 'commercial-partner',\r\n        entity_id: c.commercial_partner_id || c.commercial_partner?.id,\r\n        entity_name: c.commercial_partner?.name || c.commercial_partner?.legal_name || 'Unknown Commercial Partner',\r\n        entity_type_label: 'Commercial Partner',\r\n        deal_id: c.deal_id || c.deal?.id || null,\r\n        deal_name: c.deal?.name || null,\r\n        accrual_amount: Number(c.accrual_amount) || 0,\r\n        currency: c.currency || 'USD',\r\n        status: c.status || 'accrued',\r\n        invoice_id: c.invoice_id || null,\r\n        created_at: c.created_at,\r\n        payment_due_date: c.payment_due_date || null,\r\n      })\r\n    }\r\n\r\n    // Sort by created_at descending\r\n    commissions.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())\r\n\r\n    // Calculate summary\r\n    const activeCommissions = commissions.filter(c => c.status !== 'cancelled')\r\n    const accrued = activeCommissions.filter(c => c.status === 'accrued')\r\n    const invoiceRequested = activeCommissions.filter(c => c.status === 'invoice_requested')\r\n    const invoiced = activeCommissions.filter(c => c.status === 'invoiced')\r\n    const paid = activeCommissions.filter(c => c.status === 'paid')\r\n\r\n    const partnerCommissions = activeCommissions.filter(c => c.type === 'partner')\r\n    const introducerCommissions = activeCommissions.filter(c => c.type === 'introducer')\r\n    const cpCommissions = activeCommissions.filter(c => c.type === 'commercial-partner')\r\n\r\n    return {\r\n      commissions,\r\n      summary: {\r\n        total_accrued: accrued.reduce((sum, c) => sum + c.accrual_amount, 0),\r\n        total_invoice_requested: invoiceRequested.reduce((sum, c) => sum + c.accrual_amount, 0),\r\n        total_invoiced: invoiced.reduce((sum, c) => sum + c.accrual_amount, 0),\r\n        total_paid: paid.reduce((sum, c) => sum + c.accrual_amount, 0),\r\n        total_owed: [...accrued, ...invoiceRequested, ...invoiced].reduce((sum, c) => sum + c.accrual_amount, 0),\r\n        count: activeCommissions.length,\r\n        by_type: {\r\n          partner: {\r\n            count: partnerCommissions.length,\r\n            total: partnerCommissions.reduce((sum, c) => sum + c.accrual_amount, 0),\r\n          },\r\n          introducer: {\r\n            count: introducerCommissions.length,\r\n            total: introducerCommissions.reduce((sum, c) => sum + c.accrual_amount, 0),\r\n          },\r\n          commercial_partner: {\r\n            count: cpCommissions.length,\r\n            total: cpCommissions.reduce((sum, c) => sum + c.accrual_amount, 0),\r\n          },\r\n        },\r\n      },\r\n    }\r\n  }\r\n\r\n  // ============================================================================\r\n  // Event Handlers\r\n  // ============================================================================\r\n\r\n  const toggleFeeEvent = (id: string) => {\r\n    const newSelected = new Set(selectedFeeEvents)\r\n    if (newSelected.has(id)) {\r\n      newSelected.delete(id)\r\n    } else {\r\n      newSelected.add(id)\r\n    }\r\n    setSelectedFeeEvents(newSelected)\r\n  }\r\n\r\n  const selectAllPending = () => {\r\n    const pendingIds = feeEvents.filter(e => e.status === 'accrued').map(e => e.id)\r\n    setSelectedFeeEvents(new Set(pendingIds))\r\n  }\r\n\r\n  const clearSelection = () => {\r\n    setSelectedFeeEvents(new Set())\r\n  }\r\n\r\n  const handleSubmitRequest = async () => {\r\n    if (selectedFeeEvents.size === 0) return\r\n\r\n    setSubmitting(true)\r\n    try {\r\n      const response = await fetch('/api/arrangers/me/payment-requests', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          fee_event_ids: Array.from(selectedFeeEvents),\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Failed to create payment request')\r\n      }\r\n\r\n      // Refresh page to show updated data\r\n      window.location.reload()\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to submit payment request')\r\n    } finally {\r\n      setSubmitting(false)\r\n    }\r\n  }\r\n\r\n  // Commission actions\r\n  const handleRequestInvoice = (commission: OutboundCommission) => {\r\n    setSelectedCommission(commission)\r\n    setInvoiceDialogOpen(true)\r\n  }\r\n\r\n  const handleRequestPayment = (commission: OutboundCommission) => {\r\n    setSelectedCommission(commission)\r\n    setPaymentDialogOpen(true)\r\n  }\r\n\r\n  const handleViewInvoice = (commission: OutboundCommission) => {\r\n    setSelectedCommission(commission)\r\n    setViewInvoiceDialogOpen(true)\r\n  }\r\n\r\n  const handleActionSuccess = () => {\r\n    fetchData()\r\n  }\r\n\r\n  // ============================================================================\r\n  // Filtered Data\r\n  // ============================================================================\r\n\r\n  const filteredPendingEvents = feeEvents\r\n    .filter(e => e.status === 'accrued')\r\n    .filter(e => {\r\n      if (!search) return true\r\n      return (\r\n        e.deal_name.toLowerCase().includes(search.toLowerCase()) ||\r\n        e.investor_name.toLowerCase().includes(search.toLowerCase())\r\n      )\r\n    })\r\n\r\n  const filteredRequests = paymentRequests.filter(req => {\r\n    if (!search) return true\r\n    return (\r\n      req.invoice_number.toLowerCase().includes(search.toLowerCase()) ||\r\n      req.deal_name.toLowerCase().includes(search.toLowerCase())\r\n    )\r\n  })\r\n\r\n  const filteredOutboundCommissions = outboundCommissions\r\n    .filter(c => c.status !== 'cancelled')\r\n    .filter(c => entityTypeFilter === 'all' || c.type === entityTypeFilter)\r\n    .filter(c => {\r\n      if (!search) return true\r\n      const searchLower = search.toLowerCase()\r\n      return (\r\n        c.entity_name.toLowerCase().includes(searchLower) ||\r\n        c.deal_name?.toLowerCase().includes(searchLower) ||\r\n        c.entity_type_label.toLowerCase().includes(searchLower)\r\n      )\r\n    })\r\n\r\n  const selectedTotal = feeEvents\r\n    .filter(e => selectedFeeEvents.has(e.id))\r\n    .reduce((sum, e) => sum + e.computed_amount, 0)\r\n\r\n  // ============================================================================\r\n  // Loading & Error States\r\n  // ============================================================================\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-16\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n        <span className=\"ml-3 text-muted-foreground\">Loading payment data...</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center py-16\">\r\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\r\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error</h3>\r\n        <p className=\"text-muted-foreground\">{error}</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // ============================================================================\r\n  // Render\r\n  // ============================================================================\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-foreground\">Payment Management</h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            {arrangerInfo\r\n              ? `Manage fees for ${arrangerInfo.legal_name}`\r\n              : 'Manage your fee collections and payments'}\r\n          </p>\r\n        </div>\r\n        {arrangerInfo && (\r\n          <Badge variant=\"secondary\" className=\"flex items-center gap-1\">\r\n            <Building2 className=\"h-3 w-3\" />\r\n            Arranger\r\n          </Badge>\r\n        )}\r\n      </div>\r\n\r\n      {/* Main Tabs: Inbound (Fees To Me) vs Outbound (Fees I Owe) */}\r\n      <Tabs value={mainTab} onValueChange={(v) => setMainTab(v as 'inbound' | 'outbound')} className=\"space-y-4\">\r\n        <TabsList className=\"grid w-full max-w-md grid-cols-2\">\r\n          <TabsTrigger value=\"inbound\" className=\"flex items-center gap-2\">\r\n            <ArrowDownLeft className=\"h-4 w-4\" />\r\n            Fees Owed To Me\r\n            <Badge variant=\"secondary\" className=\"ml-1 text-xs\">\r\n              {formatCurrency(inboundSummary.pendingTotal + inboundSummary.invoicedTotal, 'USD')}\r\n            </Badge>\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"outbound\" className=\"flex items-center gap-2\">\r\n            <ArrowUpRight className=\"h-4 w-4\" />\r\n            Fees I Owe\r\n            <Badge variant=\"secondary\" className=\"ml-1 text-xs\">\r\n              {formatCurrency(outboundSummary.total_owed, 'USD')}\r\n            </Badge>\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* ================================================================\r\n            INBOUND TAB (Fees Owed TO Arranger)\r\n            ================================================================ */}\r\n        <TabsContent value=\"inbound\" className=\"space-y-4\">\r\n          {/* Inbound Summary Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  Pending Fees\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold text-blue-600\">\r\n                  {formatCurrency(inboundSummary.pendingTotal, 'USD')}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {inboundSummary.pendingFees} event{inboundSummary.pendingFees !== 1 ? 's' : ''} awaiting invoice\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                  <FileText className=\"h-4 w-4\" />\r\n                  Invoiced\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold text-amber-600\">\r\n                  {formatCurrency(inboundSummary.invoicedTotal, 'USD')}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {inboundSummary.invoicedCount} event{inboundSummary.invoicedCount !== 1 ? 's' : ''} awaiting payment\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                  <CheckCircle2 className=\"h-4 w-4\" />\r\n                  Paid\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold text-green-600\">\r\n                  {formatCurrency(inboundSummary.paidTotal, 'USD')}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {inboundSummary.paidCount} event{inboundSummary.paidCount !== 1 ? 's' : ''} collected\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Search */}\r\n          <Card>\r\n            <CardContent className=\"pt-6\">\r\n              <div className=\"flex flex-col md:flex-row gap-4\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"relative\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                      placeholder=\"Search by deal or investor...\"\r\n                      value={search}\r\n                      onChange={(e) => setSearch(e.target.value)}\r\n                      className=\"pl-10\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Inbound Sub-Tabs */}\r\n          <Tabs value={inboundSubTab} onValueChange={setInboundSubTab} className=\"space-y-4\">\r\n            <TabsList>\r\n              <TabsTrigger value=\"pending\" className=\"flex items-center gap-2\">\r\n                <Clock className=\"h-4 w-4\" />\r\n                Pending Fees ({inboundSummary.pendingFees})\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"requests\" className=\"flex items-center gap-2\">\r\n                <Receipt className=\"h-4 w-4\" />\r\n                Payment Requests ({paymentRequests.length})\r\n              </TabsTrigger>\r\n            </TabsList>\r\n\r\n            <TabsContent value=\"pending\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <CardTitle>Pending Fee Events</CardTitle>\r\n                      <CardDescription>\r\n                        Select fee events to create a payment request\r\n                      </CardDescription>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {selectedFeeEvents.size > 0 && (\r\n                        <>\r\n                          <span className=\"text-sm text-muted-foreground\">\r\n                            {selectedFeeEvents.size} selected ({formatCurrency(selectedTotal, 'USD')})\r\n                          </span>\r\n                          <Button variant=\"ghost\" size=\"sm\" onClick={clearSelection}>\r\n                            Clear\r\n                          </Button>\r\n                        </>\r\n                      )}\r\n                      <Button variant=\"outline\" size=\"sm\" onClick={selectAllPending}>\r\n                        Select All\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        onClick={handleSubmitRequest}\r\n                        disabled={selectedFeeEvents.size === 0 || submitting}\r\n                      >\r\n                        {submitting ? (\r\n                          <Loader2 className=\"h-4 w-4 animate-spin mr-1\" />\r\n                        ) : (\r\n                          <Send className=\"h-4 w-4 mr-1\" />\r\n                        )}\r\n                        Request Payment\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  {filteredPendingEvents.length === 0 ? (\r\n                    <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\r\n                      <DollarSign className=\"h-10 w-10 text-muted-foreground\" />\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        {search\r\n                          ? 'No pending fees match your search'\r\n                          : 'No pending fee events to invoice'}\r\n                      </p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"rounded-md border\">\r\n                      <Table>\r\n                        <TableHeader>\r\n                          <TableRow>\r\n                            <TableHead className=\"w-12\"></TableHead>\r\n                            <TableHead>Deal</TableHead>\r\n                            <TableHead>Investor</TableHead>\r\n                            <TableHead>Fee Type</TableHead>\r\n                            <TableHead>Amount</TableHead>\r\n                            <TableHead>Date</TableHead>\r\n                            <TableHead>Status</TableHead>\r\n                          </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                          {filteredPendingEvents.map((event) => (\r\n                            <TableRow key={event.id}>\r\n                              <TableCell>\r\n                                <Checkbox\r\n                                  checked={selectedFeeEvents.has(event.id)}\r\n                                  onCheckedChange={() => toggleFeeEvent(event.id)}\r\n                                />\r\n                              </TableCell>\r\n                              <TableCell className=\"font-medium\">{event.deal_name}</TableCell>\r\n                              <TableCell>{event.investor_name}</TableCell>\r\n                              <TableCell className=\"capitalize\">\r\n                                {event.fee_type.replace('_', ' ')}\r\n                              </TableCell>\r\n                              <TableCell className=\"font-medium\">\r\n                                {formatCurrency(event.computed_amount, event.currency)}\r\n                              </TableCell>\r\n                              <TableCell>{formatDate(event.event_date)}</TableCell>\r\n                              <TableCell>\r\n                                <Badge\r\n                                  variant=\"outline\"\r\n                                  className={cn('capitalize', STATUS_STYLES[event.status])}\r\n                                >\r\n                                  {event.status}\r\n                                </Badge>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </div>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"requests\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle>Payment Requests</CardTitle>\r\n                  <CardDescription>\r\n                    {filteredRequests.length} payment request{filteredRequests.length !== 1 ? 's' : ''} submitted\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  {filteredRequests.length === 0 ? (\r\n                    <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\r\n                      <Receipt className=\"h-10 w-10 text-muted-foreground\" />\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        {search\r\n                          ? 'No payment requests match your search'\r\n                          : 'No payment requests submitted yet'}\r\n                      </p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"rounded-md border\">\r\n                      <Table>\r\n                        <TableHeader>\r\n                          <TableRow>\r\n                            <TableHead>Invoice #</TableHead>\r\n                            <TableHead>Deal</TableHead>\r\n                            <TableHead>Amount</TableHead>\r\n                            <TableHead>Paid</TableHead>\r\n                            <TableHead>Due Date</TableHead>\r\n                            <TableHead>Status</TableHead>\r\n                            <TableHead>Created</TableHead>\r\n                          </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                          {filteredRequests.map((request) => (\r\n                            <TableRow key={request.id}>\r\n                              <TableCell className=\"font-mono text-sm\">\r\n                                {request.invoice_number}\r\n                              </TableCell>\r\n                              <TableCell className=\"font-medium\">{request.deal_name}</TableCell>\r\n                              <TableCell className=\"font-medium\">\r\n                                {formatCurrency(request.total, 'USD')}\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                {request.paid_amount > 0 ? (\r\n                                  <span className=\"text-green-600\">\r\n                                    {formatCurrency(request.paid_amount, 'USD')}\r\n                                  </span>\r\n                                ) : (\r\n                                  <span className=\"text-muted-foreground\">â€”</span>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell>{formatDate(request.due_date)}</TableCell>\r\n                              <TableCell>\r\n                                <Badge\r\n                                  variant=\"outline\"\r\n                                  className={cn('capitalize', STATUS_STYLES[request.status])}\r\n                                >\r\n                                  {request.status}\r\n                                </Badge>\r\n                              </TableCell>\r\n                              <TableCell>{formatDate(request.created_at)}</TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </div>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            </TabsContent>\r\n          </Tabs>\r\n        </TabsContent>\r\n\r\n        {/* ================================================================\r\n            OUTBOUND TAB (Fees Arranger Must PAY)\r\n            ================================================================ */}\r\n        <TabsContent value=\"outbound\" className=\"space-y-4\">\r\n          {/* Outbound Summary Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n            {/* Total Owed Card */}\r\n            <Card className=\"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/30 dark:to-amber-950/30 border-orange-200 dark:border-orange-800\">\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-orange-700 dark:text-orange-300 flex items-center gap-2\">\r\n                  <Wallet className=\"h-4 w-4\" />\r\n                  Total Owed\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold text-orange-600 dark:text-orange-400\">\r\n                  {formatCurrency(outboundSummary.total_owed, 'USD')}\r\n                </div>\r\n                <p className=\"text-xs text-orange-600/70 dark:text-orange-400/70 mt-1\">\r\n                  To partners, introducers & CPs\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* By Entity Type Cards */}\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                  <Briefcase className=\"h-4 w-4\" />\r\n                  Partners\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-xl font-bold text-foreground\">\r\n                  {formatCurrency(outboundSummary.by_type.partner.total, 'USD')}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {outboundSummary.by_type.partner.count} commission{outboundSummary.by_type.partner.count !== 1 ? 's' : ''}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                  <Handshake className=\"h-4 w-4\" />\r\n                  Introducers\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-xl font-bold text-foreground\">\r\n                  {formatCurrency(outboundSummary.by_type.introducer.total, 'USD')}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {outboundSummary.by_type.introducer.count} commission{outboundSummary.by_type.introducer.count !== 1 ? 's' : ''}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                  <Building2 className=\"h-4 w-4\" />\r\n                  Commercial Partners\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-xl font-bold text-foreground\">\r\n                  {formatCurrency(outboundSummary.by_type.commercial_partner.total, 'USD')}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {outboundSummary.by_type.commercial_partner.count} commission{outboundSummary.by_type.commercial_partner.count !== 1 ? 's' : ''}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Filters Row */}\r\n          <Card>\r\n            <CardContent className=\"pt-6\">\r\n              <div className=\"flex flex-col md:flex-row gap-4 items-start md:items-center\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"relative\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                      placeholder=\"Search by entity, deal, or type...\"\r\n                      value={search}\r\n                      onChange={(e) => setSearch(e.target.value)}\r\n                      className=\"pl-10\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Entity Type Filter */}\r\n                <Tabs value={entityTypeFilter} onValueChange={(v) => setEntityTypeFilter(v as any)}>\r\n                  <TabsList>\r\n                    <TabsTrigger value=\"all\" className=\"text-xs\">\r\n                      All ({outboundSummary.count})\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"partner\" className=\"text-xs\">\r\n                      <Briefcase className=\"h-3 w-3 mr-1\" />\r\n                      Partners ({outboundSummary.by_type.partner.count})\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"introducer\" className=\"text-xs\">\r\n                      <Handshake className=\"h-3 w-3 mr-1\" />\r\n                      Introducers ({outboundSummary.by_type.introducer.count})\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"commercial-partner\" className=\"text-xs\">\r\n                      <Building2 className=\"h-3 w-3 mr-1\" />\r\n                      CPs ({outboundSummary.by_type.commercial_partner.count})\r\n                    </TabsTrigger>\r\n                  </TabsList>\r\n                </Tabs>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Outbound Commissions Table */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <ArrowUpRight className=\"h-5 w-5 text-orange-500\" />\r\n                Commissions To Pay\r\n              </CardTitle>\r\n              <CardDescription>\r\n                {filteredOutboundCommissions.length} commission{filteredOutboundCommissions.length !== 1 ? 's' : ''} to process\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {filteredOutboundCommissions.length === 0 ? (\r\n                <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\r\n                  <Users className=\"h-10 w-10 text-muted-foreground\" />\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    {search\r\n                      ? 'No commissions match your search'\r\n                      : 'No commissions to pay'}\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"rounded-md border\">\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead className=\"w-[120px]\">Type</TableHead>\r\n                        <TableHead>Entity</TableHead>\r\n                        <TableHead>Deal</TableHead>\r\n                        <TableHead className=\"text-right\">Amount</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Due Date</TableHead>\r\n                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {filteredOutboundCommissions.map((commission) => (\r\n                        <TableRow key={`${commission.type}-${commission.id}`}>\r\n                          <TableCell>\r\n                            <Badge variant=\"outline\" className=\"flex items-center gap-1 w-fit\">\r\n                              {ENTITY_TYPE_ICONS[commission.type]}\r\n                              <span className=\"text-xs\">{commission.entity_type_label}</span>\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell className=\"font-medium\">\r\n                            {commission.entity_name}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-muted-foreground\">\r\n                            {commission.deal_name || 'â€”'}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right font-medium\">\r\n                            {formatCurrency(commission.accrual_amount, commission.currency)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge\r\n                              variant=\"outline\"\r\n                              className={cn(STATUS_STYLES[commission.status])}\r\n                            >\r\n                              {STATUS_LABELS[commission.status] || commission.status}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {commission.payment_due_date\r\n                              ? formatDate(commission.payment_due_date)\r\n                              : <span className=\"text-muted-foreground\">â€”</span>}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            <CommissionActions\r\n                              commission={commission}\r\n                              onRequestInvoice={handleRequestInvoice}\r\n                              onRequestPayment={handleRequestPayment}\r\n                              onViewInvoice={handleViewInvoice}\r\n                            />\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      {/* Dialogs */}\r\n      <RequestInvoiceDialog\r\n        open={invoiceDialogOpen}\r\n        onOpenChange={setInvoiceDialogOpen}\r\n        commission={selectedCommission ? {\r\n          id: selectedCommission.id,\r\n          accrual_amount: selectedCommission.accrual_amount,\r\n          currency: selectedCommission.currency,\r\n          entity_name: selectedCommission.entity_name,\r\n          deal: selectedCommission.deal_name ? { name: selectedCommission.deal_name } : undefined,\r\n        } : null}\r\n        commissionType={selectedCommission?.type || 'partner'}\r\n        onSuccess={handleActionSuccess}\r\n      />\r\n\r\n      <RequestPaymentDialog\r\n        open={paymentDialogOpen}\r\n        onOpenChange={setPaymentDialogOpen}\r\n        commission={selectedCommission ? {\r\n          id: selectedCommission.id,\r\n          accrual_amount: selectedCommission.accrual_amount,\r\n          currency: selectedCommission.currency,\r\n          entity_name: selectedCommission.entity_name,\r\n          deal_id: selectedCommission.deal_id || undefined,\r\n          deal: selectedCommission.deal_name ? { id: selectedCommission.deal_id || '', name: selectedCommission.deal_name } : undefined,\r\n        } : null}\r\n        commissionType={selectedCommission?.type || 'partner'}\r\n        onSuccess={handleActionSuccess}\r\n      />\r\n\r\n      <ViewInvoiceDialog\r\n        open={viewInvoiceDialogOpen}\r\n        onOpenChange={setViewInvoiceDialogOpen}\r\n        commission={selectedCommission ? {\r\n          id: selectedCommission.id,\r\n          accrual_amount: selectedCommission.accrual_amount,\r\n          currency: selectedCommission.currency,\r\n          entity_name: selectedCommission.entity_name,\r\n          invoice_id: selectedCommission.invoice_id,\r\n          deal: selectedCommission.deal_name ? { name: selectedCommission.deal_name } : undefined,\r\n        } : null}\r\n        commissionType={selectedCommission?.type || 'partner'}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n// ============================================================================\r\n// Commission Actions Component\r\n// ============================================================================\r\n\r\nfunction CommissionActions({\r\n  commission,\r\n  onRequestInvoice,\r\n  onRequestPayment,\r\n  onViewInvoice,\r\n}: {\r\n  commission: OutboundCommission\r\n  onRequestInvoice: (c: OutboundCommission) => void\r\n  onRequestPayment: (c: OutboundCommission) => void\r\n  onViewInvoice: (c: OutboundCommission) => void\r\n}) {\r\n  switch (commission.status) {\r\n    case 'accrued':\r\n      return (\r\n        <Button\r\n          size=\"sm\"\r\n          variant=\"outline\"\r\n          onClick={() => onRequestInvoice(commission)}\r\n          className=\"gap-1\"\r\n        >\r\n          <Mail className=\"h-3.5 w-3.5\" />\r\n          Request Invoice\r\n        </Button>\r\n      )\r\n\r\n    case 'invoice_requested':\r\n      return (\r\n        <Badge variant=\"outline\" className=\"bg-amber-50 text-amber-700 border-amber-200\">\r\n          <Clock className=\"h-3 w-3 mr-1\" />\r\n          Awaiting Invoice\r\n        </Badge>\r\n      )\r\n\r\n    case 'invoiced':\r\n      return (\r\n        <div className=\"flex items-center gap-2\">\r\n          {commission.invoice_id && (\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"ghost\"\r\n              onClick={() => onViewInvoice(commission)}\r\n              className=\"gap-1\"\r\n            >\r\n              <Eye className=\"h-3.5 w-3.5\" />\r\n              View\r\n            </Button>\r\n          )}\r\n          <Button\r\n            size=\"sm\"\r\n            onClick={() => onRequestPayment(commission)}\r\n            className=\"gap-1\"\r\n          >\r\n            <CreditCard className=\"h-3.5 w-3.5\" />\r\n            Request Payment\r\n          </Button>\r\n        </div>\r\n      )\r\n\r\n    case 'paid':\r\n      return (\r\n        <Badge variant=\"outline\" className=\"bg-green-50 text-green-700 border-green-200\">\r\n          <CheckCircle2 className=\"h-3 w-3 mr-1\" />\r\n          Paid\r\n        </Badge>\r\n      )\r\n\r\n    case 'cancelled':\r\n      return (\r\n        <Badge variant=\"outline\" className=\"bg-gray-50 text-gray-500 border-gray-200\">\r\n          <XCircle className=\"h-3 w-3 mr-1\" />\r\n          Cancelled\r\n        </Badge>\r\n      )\r\n\r\n    default:\r\n      return null\r\n  }\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M17 7 7 17', key: '15tmo1' }],\n  ['path', { d: 'M17 17H7V7', key: '1org7z' }],\n];\n\n/**\n * @component @name ArrowDownLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTcgNyA3IDE3IiAvPgogIDxwYXRoIGQ9Ik0xNyAxN0g3VjciIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/arrow-down-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowDownLeft = createLucideIcon('arrow-down-left', __iconNode);\n\nexport default ArrowDownLeft;\n"],"names":[],"mappings":"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","ignoreList":[2]}