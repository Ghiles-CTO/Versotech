module.exports=[925970,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(284169),e=a.i(421908),f=a.i(15788),g=a.i(181608),h=a.i(771088),i=a.i(278541),j=a.i(478870),k=a.i(816854),l=a.i(975965),m=a.i(42329),n=a.i(441278),o=a.i(264890),p=a.i(203297),q=a.i(941766),r=a.i(966494),s=a.i(289907),t=a.i(425622),u=a.i(166457),v=a.i(993009),w=a.i(877918),x=a.i(689680),y=a.i(455964),z=a.i(618287),A=a.i(663475),B=a.i(497412),C=a.i(201986);let D={draft:"bg-white/10 text-foreground border border-white/20",open:"bg-emerald-500/20 text-emerald-200 border border-emerald-400/30",allocation_pending:"bg-amber-500/15 text-amber-200 border border-amber-400/30",closed:"bg-blue-500/20 text-blue-200 border border-blue-400/30",cancelled:"bg-red-500/20 text-red-200 border border-red-400/30"},E={equity_secondary:"Secondary",equity_primary:"Primary",credit_trade_finance:"Credit/Trade",other:"Other"},F={pending:"bg-amber-500/20 text-amber-200 border-amber-400/30",sent:"bg-blue-500/20 text-blue-200 border-blue-400/30",signed:"bg-emerald-500/20 text-emerald-200 border-emerald-400/30",completed:"bg-emerald-500/20 text-emerald-200 border-emerald-400/30",expired:"bg-red-500/20 text-red-200 border-red-400/30",cancelled:"bg-gray-500/20 text-gray-200 border-gray-400/30"};function G({deal:a,termSheets:G,dataRoomDocuments:H,subscriptions:I,pendingTasks:J,interests:K,signatureHistory:L,viewerType:M="arranger",feeModel:N}){let O="introducer"!==M,[P,Q]=(0,c.useState)("overview"),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(null),X=new Map(I.map(a=>[a.investor_id,a])),Y=(a.deal_memberships||[]).filter(a=>a.investor_id).map(a=>({...a,subscription:a.investor_id?X.get(a.investor_id):null})),Z={total:Y.length,dispatched:Y.filter(a=>a.dispatched_at).length,viewed:Y.filter(a=>a.viewed_at).length,interested:Y.filter(a=>a.interest_confirmed_at).length,ndaSigned:Y.filter(a=>a.nda_signed_at).length,dataRoom:Y.filter(a=>a.data_room_granted_at).length,packGen:Y.filter(a=>a.subscription?.pack_generated_at).length,packSent:Y.filter(a=>a.subscription?.pack_sent_at).length,signed:Y.filter(a=>a.subscription?.signed_at).length,funded:Y.filter(a=>a.subscription?.funded_at).length},$=[{label:"Dispatched",count:Z.dispatched},{label:"Viewed",count:Z.viewed},{label:"Interested",count:Z.interested},{label:"NDA",count:Z.ndaSigned},{label:"Data Room",count:Z.dataRoom},{label:"Pack Gen",count:Z.packGen},{label:"Pack Sent",count:Z.packSent},{label:"Signed",count:Z.signed},{label:"Funded",count:Z.funded}],_=L.filter(a=>{let b=a.signature_timestamp||a.created_at;if(!b)return!0;let c=new Date(b);return!(R&&c<new Date(R)||T&&c>new Date(T+"T23:59:59"))}),aa=_.filter(a=>"signed"===a.status||"completed"===a.status),ab=_.filter(a=>"pending"===a.status||"sent"===a.status),ac=async(a,b,c)=>{if(!a)return void alert("Document file not available");W(a);try{console.log(`[Document ${c}] Fetching: ${a}`);let d=await fetch(`/api/storage/download?bucket=deal-documents&path=${encodeURIComponent(a)}`);if(!d.ok){let a=d.headers.get("content-type"),b=`Failed to ${c} document (${d.status})`;if(a?.includes("application/json")){let a=await d.json().catch(()=>({}));console.error("Document action error:",a),b=a.error||b}alert(b);return}let e=await d.blob();if(0===e.size)return void alert("Document is empty or not found");let f=URL.createObjectURL(e);if("preview"===c)window.open(f,"_blank","noopener,noreferrer");else{let a=document.createElement("a");a.href=f,a.download=b,document.body.appendChild(a),a.click(),document.body.removeChild(a)}setTimeout(()=>URL.revokeObjectURL(f),1e4)}catch(a){console.error("Document action error:",a),alert("Failed to access document. Please check your connection and try again.")}finally{W(null)}};return L.length,L.filter(a=>"signed"===a.status||"completed"===a.status).length,L.filter(a=>"pending"===a.status||"sent"===a.status).length,(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(B.default,{href:"/versotech_main/my-mandates",children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(l.ArrowLeft,{className:"h-5 w-5"})})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[a.company_logo_url?(0,b.jsx)("img",{src:a.company_logo_url,alt:a.company_name||a.name,className:"h-12 w-12 rounded-lg object-cover"}):(0,b.jsx)("div",{className:"h-12 w-12 rounded-lg bg-white/10 flex items-center justify-center",children:(0,b.jsx)(i.Building2,{className:"h-6 w-6 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(f.Badge,{className:D[a.status]||D.draft,children:a.status?.replace("_"," ")}),(0,b.jsx)("span",{className:"text-muted-foreground",children:E[a.deal_type]||a.deal_type})]})]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(f.Badge,{variant:"outline",className:"border-amber-500/30 text-amber-400 bg-amber-500/10",children:[(0,b.jsx)(i.Building2,{className:"h-3 w-3 mr-1"}),"Your Mandate"]})})]}),(0,b.jsxs)(g.Tabs,{value:P,onValueChange:Q,className:"space-y-6",children:[(0,b.jsxs)(g.TabsList,{className:"bg-white/5 border border-white/10",children:[(0,b.jsxs)(g.TabsTrigger,{value:"overview",className:"data-[state=active]:bg-white/10",children:[(0,b.jsx)(r.TrendingUp,{className:"h-4 w-4 mr-2"}),"Overview"]}),(0,b.jsxs)(g.TabsTrigger,{value:"investors",className:"data-[state=active]:bg-white/10",children:[(0,b.jsx)(j.Users,{className:"h-4 w-4 mr-2"}),"Investors (",Y.length,")"]}),O&&(0,b.jsxs)(g.TabsTrigger,{value:"termsheets",className:"data-[state=active]:bg-white/10",children:[(0,b.jsx)(x.ScrollText,{className:"h-4 w-4 mr-2"}),"Term Sheets (",G.length,")"]}),("introducer"===M||"partner"===M)&&(0,b.jsxs)(g.TabsTrigger,{value:"feemodel",className:"data-[state=active]:bg-white/10",children:[(0,b.jsx)(y.HandCoins,{className:"h-4 w-4 mr-2"}),"Fee Model"]}),(0,b.jsxs)(g.TabsTrigger,{value:"dataroom",className:"data-[state=active]:bg-white/10",children:[(0,b.jsx)(q.FolderOpen,{className:"h-4 w-4 mr-2"}),"Data Room (",H.length,")"]}),(0,b.jsxs)(g.TabsTrigger,{value:"signatures",className:"data-[state=active]:bg-white/10",children:[(0,b.jsx)(p.FileSignature,{className:"h-4 w-4 mr-2"}),"Signatures (",L.length+J.length,")"]})]}),(0,b.jsxs)(g.TabsContent,{value:"overview",className:"space-y-6",children:[Y.length>0&&(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/[0.02] overflow-hidden",children:[(0,b.jsx)(d.CardHeader,{className:"pb-2 pt-4 px-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground tracking-wide uppercase",children:"Investor Pipeline"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[Z.total," total"]})]})}),(0,b.jsxs)(d.CardContent,{className:"px-6 pb-5",children:[(0,b.jsxs)("div",{className:"relative pt-2",children:[(0,b.jsx)("div",{className:"absolute top-[26px] left-5 right-5 h-[2px] bg-gradient-to-r from-emerald-500/20 via-emerald-500/10 to-transparent"}),(0,b.jsx)("div",{className:"relative flex items-start justify-between",children:$.map((a,c)=>{let d=a.count>0,e="Funded"===a.label,f=(a=>{if(0===a)return Z.total>0?Math.round($[0].count/Z.total*100):0;let b=$[a-1].count;return 0===b?0:Math.round($[a].count/b*100)})(c);return(0,b.jsxs)("div",{className:"flex flex-col items-center group",style:{flex:"1 1 0"},children:[(0,b.jsx)("div",{className:`
                              relative z-10 w-11 h-11 rounded-full flex items-center justify-center
                              text-sm font-semibold transition-all duration-300 cursor-default
                              ${d?e?"bg-emerald-500/25 text-emerald-300 ring-2 ring-emerald-500/40 shadow-[0_0_20px_rgba(16,185,129,0.15)]":"bg-emerald-500/15 text-emerald-400 ring-1 ring-emerald-500/25":"bg-white/5 text-muted-foreground/60"}
                              group-hover:scale-110 group-hover:ring-emerald-400/40
                            `,children:a.count}),(0,b.jsx)("span",{className:`
                            text-[10px] mt-2 text-center leading-tight transition-colors
                            ${d?"text-foreground/70":"text-muted-foreground/50"}
                            group-hover:text-foreground
                          `,children:a.label}),c>0&&(0,b.jsxs)("span",{className:`
                              text-[9px] mt-0.5 transition-opacity
                              ${a.count>0?"text-emerald-400/60":"text-muted-foreground/30"}
                            `,children:[f,"%"]})]},a.label)})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-8 mt-6 pt-4 border-t border-white/5",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-lg font-semibold text-foreground",children:Z.funded}),(0,b.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Funded"})]}),(0,b.jsx)("div",{className:"w-px h-8 bg-white/10"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-lg font-semibold text-foreground",children:[Z.total>0?Math.round(Z.funded/Z.total*100):0,"%"]}),(0,b.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Conversion"})]}),(0,b.jsx)("div",{className:"w-px h-8 bg-white/10"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-lg font-semibold text-foreground",children:Z.signed}),(0,b.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Signed"})]})]})]})]}),(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Deal Information"}),(0,b.jsx)(d.CardDescription,{children:"Core details and structure"})]}),(0,b.jsx)(d.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Deal Name"}),(0,b.jsx)("p",{className:"text-lg text-foreground mt-1",children:a.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),(0,b.jsx)("p",{className:"text-lg text-foreground mt-1",children:a.company_name||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),(0,b.jsx)("div",{className:"flex items-center gap-2 mt-1",children:a.vehicles?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-foreground",children:a.vehicles.name}),(0,b.jsx)(f.Badge,{variant:"outline",className:"border-white/20",children:a.vehicles.type})]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"No vehicle assigned"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Sector / Stage"}),(0,b.jsxs)("p",{className:"text-foreground mt-1",children:[a.sector||"—"," ",a.stage&&`• ${a.stage}`]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),(0,b.jsx)("p",{className:"text-foreground mt-1",children:a.location||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Currency"}),(0,b.jsx)("p",{className:"text-foreground mt-1",children:a.currency})]})]})})]}),(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(s.CalendarDays,{className:"h-5 w-5"}),"Timeline"]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Open Date"}),(0,b.jsx)("p",{className:"text-foreground mt-1",children:a.open_at?(0,C.formatDate)(a.open_at):"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Close Date"}),(0,b.jsx)("p",{className:"text-foreground mt-1",children:a.close_at?(0,C.formatDate)(a.close_at):"—"})]})]})})]}),(a.description||a.investment_thesis)&&(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(r.TrendingUp,{className:"h-5 w-5"}),"Deal Overview"]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[a.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),(0,b.jsx)("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:a.description})]}),a.investment_thesis&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Investment Thesis"}),(0,b.jsx)("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:a.investment_thesis})]})]})]})]}),O&&(0,b.jsx)(g.TabsContent,{value:"termsheets",className:"space-y-6",children:(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(x.ScrollText,{className:"h-5 w-5"}),"Term Sheets"]}),(0,b.jsx)(d.CardDescription,{children:"Fee structures and deal terms for this mandate"})]}),(0,b.jsx)(d.CardContent,{children:0===G.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No term sheets created yet"}):(0,b.jsx)("div",{className:"space-y-4",children:G.map(c=>(0,b.jsx)(d.Card,{className:`border ${"published"===c.status?"border-emerald-500/30 bg-emerald-500/5":"border-white/10 bg-white/[0.02]"}`,children:(0,b.jsxs)(d.CardContent,{className:"py-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsxs)("span",{className:"font-medium text-foreground",children:["Version ",c.version||1]}),(0,b.jsx)(f.Badge,{className:"published"===c.status?"bg-emerald-500/20 text-emerald-200 border-emerald-400/30":"draft"===c.status?"bg-amber-500/20 text-amber-200 border-amber-400/30":"bg-white/10 text-foreground border-white/20",children:c.status})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c.term_sheet_date?(0,C.formatDate)(c.term_sheet_date):"No date set"})]}),c.term_sheet_attachment_key&&(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>ac(c.term_sheet_attachment_key,`term-sheet-v${c.version||1}.pdf`,"preview"),className:"border-white/20",children:[(0,b.jsx)(z.ExternalLink,{className:"h-4 w-4 mr-1"}),"View PDF"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-muted-foreground",children:"Transaction Type"}),(0,b.jsx)("p",{className:"text-foreground font-medium",children:c.transaction_type||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-muted-foreground",children:"Min Ticket"}),(0,b.jsx)("p",{className:"text-foreground font-medium",children:c.minimum_ticket?`${a.currency} ${Number(c.minimum_ticket).toLocaleString()}`:"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-muted-foreground",children:"Max Ticket"}),(0,b.jsx)("p",{className:"text-foreground font-medium",children:c.maximum_ticket?`${a.currency} ${Number(c.maximum_ticket).toLocaleString()}`:"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-muted-foreground",children:"Interest Deadline"}),(0,b.jsx)("p",{className:"text-foreground font-medium",children:c.interest_confirmation_deadline?(0,C.formatDate)(c.interest_confirmation_deadline):"—"})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Fee Structure"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:null!=c.subscription_fee_percent?`${c.subscription_fee_percent}%`:"—"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Subscription Fee"})]}),(0,b.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:null!=c.management_fee_percent?`${c.management_fee_percent}%`:"—"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Management Fee"})]}),(0,b.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:null!=c.carried_interest_percent?`${c.carried_interest_percent}%`:"—"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Carried Interest"})]})]})]}),c.opportunity_summary&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Opportunity Summary"}),(0,b.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:c.opportunity_summary})]})]})},c.id))})})]})}),("introducer"===M||"partner"===M)&&(0,b.jsx)(g.TabsContent,{value:"feemodel",className:"space-y-6",children:(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(y.HandCoins,{className:"h-5 w-5"}),"Your Fee Model"]}),(0,b.jsx)(d.CardDescription,{children:"Commission agreement for this investment opportunity"})]}),(0,b.jsx)(d.CardContent,{children:N?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-foreground",children:N.name}),N.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:N.description})]}),(0,b.jsxs)(f.Badge,{className:"accepted"===N.status?"bg-emerald-500/20 text-emerald-200 border-emerald-400/30":"sent"===N.status||"pending_signature"===N.status?"bg-amber-500/20 text-amber-200 border-amber-400/30":"bg-white/10 text-foreground border-white/20",children:["accepted"===N.status&&(0,b.jsx)(n.CheckCircle,{className:"h-3 w-3 mr-1"}),"pending_signature"===N.status&&(0,b.jsx)(m.Clock,{className:"h-3 w-3 mr-1"}),N.status||"Draft"]})]}),N.fee_components&&N.fee_components.length>0?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground font-medium",children:"Fee Structure"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:N.fee_components.map(a=>(0,b.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:a.kind?.replace("_"," ")}),(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:a.rate_bps?`${(a.rate_bps/100).toFixed(2)}%`:a.flat_amount?`$${Number(a.flat_amount).toLocaleString()}`:"—"}),a.payment_schedule&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1 capitalize",children:a.payment_schedule.replace("_"," ")})]},a.id))})]}):(0,b.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No fee components defined"}),"accepted"===N.status&&N.accepted_at&&(0,b.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-emerald-400",children:[(0,b.jsx)(n.CheckCircle,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Fee Model Accepted"})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Accepted on ",(0,C.formatDate)(N.accepted_at)]})]}),("sent"===N.status||"pending_signature"===N.status)&&(0,b.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-amber-400",children:[(0,b.jsx)(m.Clock,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Pending Your Acceptance"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Please review and accept this fee model to proceed with investor dispatch."})]}),(0,b.jsx)(e.Button,{className:"bg-amber-500 hover:bg-amber-600 text-white",children:"Accept Fee Model"})]})})]}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"text-muted-foreground mb-2",children:"No fee model assigned yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"A fee model will be created and assigned to you by the deal manager."})]})})]})}),(0,b.jsxs)(g.TabsContent,{value:"investors",className:"space-y-6",children:[(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Investor Journey"}),(0,b.jsx)(d.CardDescription,{children:"Track investor progress through the subscription process"})]}),(0,b.jsx)(d.CardContent,{children:0===Y.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No investors invited yet"}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Investor"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Type"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-center",children:"Dispatched"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-center",children:"Viewed"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-center",children:"Interested"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-center",children:"NDA"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-center",children:"Data Room"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-center",children:"Signed"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-center",children:"Funded"})]})}),(0,b.jsx)(h.TableBody,{children:Y.map(a=>(0,b.jsxs)(h.TableRow,{className:"border-white/10",children:[(0,b.jsx)(h.TableCell,{className:"font-medium text-foreground",children:a.investors?.legal_name||"Unknown Investor"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",className:"border-white/20",children:a.investors?.type||"N/A"})}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.dispatched_at?(0,b.jsx)(n.CheckCircle,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,b.jsx)(m.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.viewed_at?(0,b.jsx)(o.Eye,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,b.jsx)(m.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.interest_confirmed_at?(0,b.jsx)(n.CheckCircle,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,b.jsx)(m.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.nda_signed_at?(0,b.jsx)(p.FileSignature,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,b.jsx)(m.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.data_room_granted_at?(0,b.jsx)(q.FolderOpen,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,b.jsx)(m.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.subscription?.signed_at?(0,b.jsx)(n.CheckCircle,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,b.jsx)(m.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.subscription?.funded_at?(0,b.jsx)(n.CheckCircle,{className:"h-4 w-4 text-emerald-400 mx-auto"}):(0,b.jsx)(m.Clock,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})})]},`${a.deal_id}-${a.investor_id}`))})]})})]}),(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(y.HandCoins,{className:"h-5 w-5 text-blue-400"}),"Interest Submissions (",K.length,")"]}),(0,b.jsx)(d.CardDescription,{children:"Investors who have expressed interest in this deal"})]}),(0,b.jsx)(d.CardContent,{children:0===K.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No interest submissions yet"}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Investor"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Submitted"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Status"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Notes"})]})}),(0,b.jsx)(h.TableBody,{children:K.map(a=>(0,b.jsxs)(h.TableRow,{className:"border-white/10",children:[(0,b.jsx)(h.TableCell,{className:"font-medium text-foreground",children:a.investors?.legal_name||"Unknown Investor"}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground",children:a.submitted_at?(0,C.formatDate)(a.submitted_at):"—"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{className:"approved"===a.status?"bg-emerald-500/20 text-emerald-200 border-emerald-400/30":"pending"===a.status?"bg-amber-500/20 text-amber-200 border-amber-400/30":"rejected"===a.status?"bg-red-500/20 text-red-200 border-red-400/30":"bg-white/10 text-foreground border-white/20",children:a.status})}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground max-w-[200px] truncate",children:a.notes||"—"})]},a.id))})]})})]})]}),(0,b.jsx)(g.TabsContent,{value:"dataroom",className:"space-y-6",children:(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{className:"text-foreground",children:"Data Room Documents"}),(0,b.jsx)(d.CardDescription,{children:"Documents available for investor due diligence"})]}),(0,b.jsx)(d.CardContent,{children:0===H.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No documents uploaded yet"}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Document"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Folder"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Uploaded"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"By"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:H.map(a=>{let c=a.file_key?.split("/").pop()||"Unknown";return(0,b.jsxs)(h.TableRow,{className:"border-white/10",children:[(0,b.jsx)(h.TableCell,{className:"font-medium text-foreground",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.FileText,{className:"h-4 w-4 text-muted-foreground"}),c]})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",className:"border-white/20",children:a.folder||"General"})}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground",children:(0,C.formatDate)(a.created_at)}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground",children:a.created_by_profile?.display_name||"System"}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.file_key?(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",onClick:()=>ac(a.file_key,c,"preview"),disabled:V===a.file_key,className:"text-muted-foreground hover:text-foreground",children:[V===a.file_key?(0,b.jsx)("span",{className:"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"}):(0,b.jsx)(o.Eye,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"ml-1 hidden sm:inline",children:"Preview"})]}),(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",onClick:()=>ac(a.file_key,c,"download"),disabled:V===a.file_key,className:"text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(t.Download,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"ml-1 hidden sm:inline",children:"Download"})]})]}):(0,b.jsx)("span",{className:"text-muted-foreground/50 text-sm",children:"No file"})})]},a.id)})})]})})]})}),(0,b.jsxs)(g.TabsContent,{value:"signatures",className:"space-y-6",children:[(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(u.Filter,{className:"h-5 w-5"}),"Filter by Date"]}),(R||T)&&(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{S(""),U("")},className:"text-muted-foreground hover:text-foreground",children:"Clear Filter"})]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"From:"}),(0,b.jsx)(A.Input,{type:"date",value:R,onChange:a=>S(a.target.value),className:"w-40 bg-white/5 border-white/10"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"To:"}),(0,b.jsx)(A.Input,{type:"date",value:T,onChange:a=>U(a.target.value),className:"w-40 bg-white/5 border-white/10"})]}),(0,b.jsx)("div",{className:"flex items-center gap-4 ml-auto text-sm",children:(0,b.jsxs)("span",{className:"text-muted-foreground",children:["Showing ",_.length," of ",L.length," signatures"]})})]})})]}),(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(m.Clock,{className:"h-5 w-5 text-amber-400"}),"Pending Signatures (",ab.length,")"]}),(0,b.jsx)(d.CardDescription,{children:"Signature requests awaiting action"})]}),(0,b.jsx)(d.CardContent,{children:0===ab.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No pending signatures"}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Investor"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Signer"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Role"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Document"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Sent"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Status"})]})}),(0,b.jsx)(h.TableBody,{children:ab.map(a=>(0,b.jsxs)(h.TableRow,{className:"border-white/10",children:[(0,b.jsx)(h.TableCell,{className:"font-medium text-foreground",children:a.investors?.legal_name||"—"}),(0,b.jsx)(h.TableCell,{className:"text-foreground",children:a.signer_name||a.signer_email}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",className:"border-white/20 capitalize",children:a.signer_role?.replace("_"," ")||"Signer"})}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground",children:a.document_type?.replace("_"," ")||"Document"}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground",children:a.email_sent_at?(0,C.formatDate)(a.email_sent_at):"—"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{className:F[a.status]||"bg-white/10",children:a.status})})]},a.id))})]})})]}),(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(v.History,{className:"h-5 w-5 text-emerald-400"}),"Signature History (",aa.length,")"]}),(0,b.jsx)(d.CardDescription,{children:"Completed signatures for this mandate"})]}),(0,b.jsx)(d.CardContent,{children:0===aa.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:["No completed signatures",R||T?" in selected date range":""]}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Investor"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Signer"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Role"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Document"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Signed At"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Status"})]})}),(0,b.jsx)(h.TableBody,{children:aa.map(a=>(0,b.jsxs)(h.TableRow,{className:"border-white/10",children:[(0,b.jsx)(h.TableCell,{className:"font-medium text-foreground",children:a.investors?.legal_name||"—"}),(0,b.jsx)(h.TableCell,{className:"text-foreground",children:a.signer_name||a.signer_email}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",className:"border-white/20 capitalize",children:a.signer_role?.replace("_"," ")||"Signer"})}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground",children:a.document_type?.replace("_"," ")||"Document"}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground",children:a.signature_timestamp?(0,C.formatDate)(a.signature_timestamp):"—"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)(f.Badge,{className:F[a.status]||"bg-emerald-500/20 text-emerald-200",children:[(0,b.jsx)(n.CheckCircle,{className:"h-3 w-3 mr-1"}),a.status]})})]},a.id))})]})})]}),J.length>0&&(0,b.jsx)(d.Card,{className:"border border-amber-500/30 bg-amber-500/10",children:(0,b.jsx)(d.CardContent,{className:"py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-full bg-amber-500/20",children:(0,b.jsx)(p.FileSignature,{className:"h-5 w-5 text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-medium text-foreground",children:["You have ",J.length," signature",1!==J.length?"s":""," pending"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click to sign subscription packs for this mandate"})]})]}),(0,b.jsx)(B.default,{href:"/versotech_main/versosign",children:(0,b.jsxs)(e.Button,{className:"bg-amber-500 hover:bg-amber-600 text-white",children:[(0,b.jsx)(p.FileSignature,{className:"h-4 w-4 mr-2"}),"Sign Packs"]})})]})})}),J.length>0&&(0,b.jsxs)(d.Card,{className:"border border-white/10 bg-white/5",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-foreground flex items-center gap-2",children:[(0,b.jsx)(w.AlertCircle,{className:"h-5 w-5 text-amber-400"}),"Your Signature Tasks (",J.length,")"]}),(0,b.jsx)(d.CardDescription,{children:"Tasks assigned to you for this mandate"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"border-white/10 hover:bg-transparent",children:[(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Task"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Type"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Priority"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Due Date"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground",children:"Status"}),(0,b.jsx)(h.TableHead,{className:"text-muted-foreground text-right",children:"Action"})]})}),(0,b.jsx)(h.TableBody,{children:J.map(a=>(0,b.jsxs)(h.TableRow,{className:"border-white/10",children:[(0,b.jsx)(h.TableCell,{className:"font-medium text-foreground",children:a.title||a.kind?.replace("_"," ")}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",className:"border-white/20",children:a.kind?.replace("_"," ")})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{className:"high"===a.priority?"bg-red-500/20 text-red-200 border-red-400/30":"medium"===a.priority?"bg-amber-500/20 text-amber-200 border-amber-400/30":"bg-white/10 text-foreground border-white/20",children:a.priority})}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground",children:a.due_at?(0,C.formatDate)(a.due_at):"—"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(f.Badge,{className:"pending"===a.status?"bg-amber-500/20 text-amber-200 border-amber-400/30":"bg-blue-500/20 text-blue-200 border-blue-400/30",children:a.status})}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsx)(B.default,{href:"/versotech_main/versosign",children:(0,b.jsxs)(e.Button,{size:"sm",variant:"outline",className:"border-amber-500/30 text-amber-400 hover:bg-amber-500/10",children:[(0,b.jsx)(p.FileSignature,{className:"h-3 w-3 mr-1"}),"Sign"]})})})]},a.id))})]})})]})]})]})]})}a.s(["MandateDetailClient",()=>G])}];

//# sourceMappingURL=versotech-portal_src_components_mandates_mandate-detail-client_tsx_631223d3._.js.map