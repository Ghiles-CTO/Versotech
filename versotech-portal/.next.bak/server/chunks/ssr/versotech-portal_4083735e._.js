module.exports=[264890,a=>{"use strict";let b=(0,a.i(95799).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],264890)},618287,a=>{"use strict";let b=(0,a.i(95799).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],618287)},908513,a=>{"use strict";let b=(0,a.i(95799).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],908513)},201986,a=>{"use strict";a.s(["formatBps",0,a=>null==a?"—":`${a} bps`,"formatCurrency",0,(a,b="USD")=>a?new Intl.NumberFormat("en-US",{style:"currency",currency:b,maximumFractionDigits:0}).format(a):"$0","formatDate",0,a=>{if(!a)return"—";let b="string"==typeof a?new Date(a):a;return Number.isNaN(b?.getTime?.())?"—":b.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}])},316629,433888,a=>{"use strict";var b=a.i(949119);function c(a,c,d){let[e,f]=(0,b.normalizeDates)(d?.in,a,c);return 12*(e.getFullYear()-f.getFullYear())+(e.getMonth()-f.getMonth())}a.s(["differenceInCalendarMonths",()=>c],316629);var d=a.i(665635);function e(a,b){let c=(0,d.toDate)(a,b?.in),e=c.getMonth();return c.setFullYear(c.getFullYear(),e+1,0),c.setHours(23,59,59,999),c}a.s(["endOfMonth",()=>e],433888)},468095,a=>{"use strict";let b=(0,a.i(95799).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],468095)},625473,a=>{"use strict";let b=(0,a.i(95799).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],625473)},441278,a=>{"use strict";let b=(0,a.i(95799).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],441278)},425622,a=>{"use strict";let b=(0,a.i(95799).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],425622)},284169,a=>{"use strict";var b=a.i(352584),c=a.i(888987);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},771088,a=>{"use strict";var b=a.i(352584),c=a.i(888987);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},600900,a=>{"use strict";let b=(0,a.i(95799).default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);a.s(["Wallet",()=>b],600900)},13289,a=>{"use strict";let b=(0,a.i(95799).default)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);a.s(["Handshake",()=>b],13289)},789523,a=>{"use strict";let b=(0,a.i(95799).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);a.s(["MessageCircle",()=>b],789523)},449448,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(470305),e=a.i(421908),f=a.i(3321),g=a.i(425622),h=a.i(816854),i=a.i(618287),j=a.i(877918),k=a.i(201986);let l={partner:"Partner",introducer:"Introducer","commercial-partner":"Commercial Partner"};function m({open:a,onOpenChange:m,commission:n,commissionType:o}){let[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{if(!a||!n?.invoice_id){u(null),w(null);return}q(!0),s(null);try{let a=`/api/commissions/${o}/${n.id}/invoice`,b=await fetch(a);if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to fetch invoice")}let c=await b.json();u(c.data.url),w(c.data.path)}catch(a){console.error("[ViewInvoiceDialog] Error:",a),s(a instanceof Error?a.message:"Failed to load invoice")}finally{q(!1)}})()},[a,n?.id,n?.invoice_id,o]),(0,c.useEffect)(()=>{a||(u(null),w(null),s(null))},[a]);let x=()=>{t&&window.open(t,"_blank")};if(!n)return null;let y=l[o],z=(0,k.formatCurrency)(n.accrual_amount,n.currency||"USD"),A=v?.toLowerCase().endsWith(".pdf"),B=v?.match(/\.(png|jpg|jpeg)$/i);return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:m,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[(0,b.jsxs)(d.DialogHeader,{children:[(0,b.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.FileText,{className:"h-5 w-5"}),"Invoice from ",n.entity_name]}),(0,b.jsxs)(d.DialogDescription,{children:[y," commission invoice for ",z,n.deal&&` - ${n.deal.name}`]})]}),(0,b.jsxs)("div",{className:"flex-1 min-h-[400px] relative",children:[p&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)(f.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading invoice..."})]})}),r&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center p-6",children:[(0,b.jsx)(j.AlertCircle,{className:"h-12 w-12 text-destructive"}),(0,b.jsx)("p",{className:"text-destructive font-medium",children:"Failed to load invoice"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:r})]})}),!p&&!r&&t&&(0,b.jsxs)(b.Fragment,{children:[A&&(0,b.jsx)("iframe",{src:t,className:"w-full h-full min-h-[500px] rounded-lg border",title:"Invoice PDF"}),B&&(0,b.jsx)("div",{className:"w-full h-full min-h-[400px] flex items-center justify-center bg-muted/30 rounded-lg border overflow-auto p-4",children:(0,b.jsx)("img",{src:t,alt:"Invoice",className:"max-w-full max-h-full object-contain"})}),!A&&!B&&(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsxs)("div",{className:"text-center p-6",children:[(0,b.jsx)(h.FileText,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Preview not available for this file type."}),(0,b.jsxs)(e.Button,{className:"mt-4",onClick:x,children:[(0,b.jsx)(g.Download,{className:"h-4 w-4 mr-2"}),"Download Invoice"]})]})})]}),!p&&!r&&!t&&!n.invoice_id&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center p-6",children:[(0,b.jsx)(h.FileText,{className:"h-12 w-12 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No invoice has been uploaded yet."})]})})]}),(0,b.jsxs)(d.DialogFooter,{className:"flex-shrink-0 gap-2 sm:gap-0",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>m(!1),children:"Close"}),t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>{t&&window.open(t,"_blank")},children:[(0,b.jsx)(i.ExternalLink,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),(0,b.jsxs)(e.Button,{onClick:x,children:[(0,b.jsx)(g.Download,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]})})}a.s(["ViewInvoiceDialog",()=>m])}];

//# sourceMappingURL=versotech-portal_4083735e._.js.map