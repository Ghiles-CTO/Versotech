module.exports=[274929,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.HooksClientContext},530136,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.ServerInsertedHtml},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},571370,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.AppRouterContext},257264,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored["react-ssr"].ReactServerDOMTurbopackClient},908513,a=>{"use strict";let b=(0,a.i(95799).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],908513)},134303,a=>{"use strict";let b=(0,a.i(95799).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],134303)},479612,a=>{"use strict";let b;var c=a.i(352584),d=a.i(611038),e=a.i(948624),f=a.i(429770),g=a.i(434412),h=a.i(983639),i=Symbol("radix.slottable"),j="AlertDialog",[k,l]=(0,e.createContextScope)(j,[g.createDialogScope]),m=(0,g.createDialogScope)(),n=a=>{let{__scopeAlertDialog:b,...d}=a,e=m(b);return(0,c.jsx)(g.Root,{...e,...d,modal:!0})};n.displayName=j;var o=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Trigger,{...f,...e,ref:b})});o.displayName="AlertDialogTrigger";var p=a=>{let{__scopeAlertDialog:b,...d}=a,e=m(b);return(0,c.jsx)(g.Portal,{...e,...d})};p.displayName="AlertDialogPortal";var q=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Overlay,{...f,...e,ref:b})});q.displayName="AlertDialogOverlay";var r="AlertDialogContent",[s,t]=k(r),u=((b=({children:a})=>(0,c.jsx)(c.Fragment,{children:a})).displayName="AlertDialogContent.Slottable",b.__radixId=i,b),v=d.forwardRef((a,b)=>{let{__scopeAlertDialog:e,children:i,...j}=a,k=m(e),l=d.useRef(null),n=(0,f.useComposedRefs)(b,l),o=d.useRef(null);return(0,c.jsx)(g.WarningProvider,{contentName:r,titleName:w,docsSlug:"alert-dialog",children:(0,c.jsx)(s,{scope:e,cancelRef:o,children:(0,c.jsxs)(g.Content,{role:"alertdialog",...k,...j,ref:n,onOpenAutoFocus:(0,h.composeEventHandlers)(j.onOpenAutoFocus,a=>{a.preventDefault(),o.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,c.jsx)(u,{children:i}),(0,c.jsx)(D,{contentRef:l})]})})})});v.displayName=r;var w="AlertDialogTitle",x=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Title,{...f,...e,ref:b})});x.displayName=w;var y="AlertDialogDescription",z=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Description,{...f,...e,ref:b})});z.displayName=y;var A=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Close,{...f,...e,ref:b})});A.displayName="AlertDialogAction";var B="AlertDialogCancel",C=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:h}=t(B,d),i=m(d),j=(0,f.useComposedRefs)(b,h);return(0,c.jsx)(g.Close,{...i,...e,ref:j})});C.displayName=B;var D=({contentRef:a})=>{let b=`\`${r}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${r}\` by passing a \`${y}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${r}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},E=a.i(888987),F=a.i(421908);function G({...a}){return(0,c.jsx)(n,{"data-slot":"alert-dialog",...a})}function H({...a}){return(0,c.jsx)(o,{"data-slot":"alert-dialog-trigger",...a})}function I({...a}){return(0,c.jsx)(p,{"data-slot":"alert-dialog-portal",...a})}function J({className:a,...b}){return(0,c.jsx)(q,{"data-slot":"alert-dialog-overlay",className:(0,E.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80 backdrop-blur-sm",a),...b})}function K({className:a,...b}){return(0,c.jsxs)(I,{children:[(0,c.jsx)(J,{}),(0,c.jsx)(v,{"data-slot":"alert-dialog-content",className:(0,E.cn)("bg-background border-border text-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg backdrop-blur-xl",a),...b})]})}function L({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,E.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function M({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,E.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function N({className:a,...b}){return(0,c.jsx)(x,{"data-slot":"alert-dialog-title",className:(0,E.cn)("text-lg font-semibold text-foreground",a),...b})}function O({className:a,...b}){return(0,c.jsx)(z,{"data-slot":"alert-dialog-description",className:(0,E.cn)("text-muted-foreground text-sm",a),...b})}function P({className:a,...b}){return(0,c.jsx)(A,{className:(0,E.cn)((0,F.buttonVariants)(),a),...b})}function Q({className:a,...b}){return(0,c.jsx)(C,{className:(0,E.cn)((0,F.buttonVariants)({variant:"outline"}),a),...b})}a.s(["AlertDialog",()=>G,"AlertDialogAction",()=>P,"AlertDialogCancel",()=>Q,"AlertDialogContent",()=>K,"AlertDialogDescription",()=>O,"AlertDialogFooter",()=>M,"AlertDialogHeader",()=>L,"AlertDialogTitle",()=>N,"AlertDialogTrigger",()=>H],479612)},873785,a=>{"use strict";let b=(0,a.i(95799).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],873785)},50828,a=>{"use strict";let b=(0,a.i(95799).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],50828)},496392,a=>{"use strict";let b=(0,a.i(95799).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],496392)},325866,a=>{"use strict";let b=(0,a.i(95799).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],325866)},838086,a=>{"use strict";let b=(0,a.i(95799).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],838086)},787957,a=>{"use strict";let b=(0,a.i(95799).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);a.s(["Activity",()=>b],787957)},92881,a=>{"use strict";let b=(0,a.i(95799).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["UserCheck",()=>b],92881)},577955,a=>{"use strict";let b=(0,a.i(95799).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],577955)},284074,(a,b,c)=>{"use strict";var d=a.r(611038);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},872437,(a,b,c)=>{"use strict";b.exports=a.r(284074)},105874,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(948624),e=a.i(129178),f=a.i(125136),g=a.i(579119),h=a.i(872437);function i(){return()=>{}}var j="Avatar",[k,l]=(0,d.createContextScope)(j),[m,n]=k(j),o=c.forwardRef((a,d)=>{let{__scopeAvatar:e,...f}=a,[h,i]=c.useState("idle");return(0,b.jsx)(m,{scope:e,imageLoadingStatus:h,onImageLoadingStatusChange:i,children:(0,b.jsx)(g.Primitive.span,{...f,ref:d})})});o.displayName=j;var p="AvatarImage",q=c.forwardRef((a,d)=>{let{__scopeAvatar:j,src:k,onLoadingStatusChange:l=()=>{},...m}=a,o=n(p,j),q=function(a,{referrerPolicy:b,crossOrigin:d}){let e=(0,h.useSyncExternalStore)(i,()=>!0,()=>!1),g=c.useRef(null),j=e?(g.current||(g.current=new window.Image),g.current):null,[k,l]=c.useState(()=>t(j,a));return(0,f.useLayoutEffect)(()=>{l(t(j,a))},[j,a]),(0,f.useLayoutEffect)(()=>{let a=a=>()=>{l(a)};if(!j)return;let c=a("loaded"),e=a("error");return j.addEventListener("load",c),j.addEventListener("error",e),b&&(j.referrerPolicy=b),"string"==typeof d&&(j.crossOrigin=d),()=>{j.removeEventListener("load",c),j.removeEventListener("error",e)}},[j,d,b]),k}(k,m),r=(0,e.useCallbackRef)(a=>{l(a),o.onImageLoadingStatusChange(a)});return(0,f.useLayoutEffect)(()=>{"idle"!==q&&r(q)},[q,r]),"loaded"===q?(0,b.jsx)(g.Primitive.img,{...m,ref:d,src:k}):null});q.displayName=p;var r="AvatarFallback",s=c.forwardRef((a,d)=>{let{__scopeAvatar:e,delayMs:f,...h}=a,i=n(r,e),[j,k]=c.useState(void 0===f);return c.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>k(!0),f);return()=>window.clearTimeout(a)}},[f]),j&&"loaded"!==i.imageLoadingStatus?(0,b.jsx)(g.Primitive.span,{...h,ref:d}):null});function t(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}s.displayName=r;var u=a.i(888987);let v=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(o,{ref:d,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...c}));v.displayName=o.displayName;let w=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(q,{ref:d,className:(0,u.cn)("aspect-square h-full w-full",a),...c}));w.displayName=q.displayName;let x=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(s,{ref:d,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...c}));x.displayName=s.displayName,a.s(["Avatar",()=>v,"AvatarFallback",()=>x,"AvatarImage",()=>w],105874)},672606,a=>{"use strict";let b=(0,a.i(95799).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],672606)},241376,a=>{"use strict";let b=(0,a.i(95799).default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["default",()=>b])},591808,a=>{"use strict";var b=a.i(241376);a.s(["Circle",()=>b.default])},203297,a=>{"use strict";let b=(0,a.i(95799).default)("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);a.s(["FileSignature",()=>b],203297)},403205,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(364284),e=a.i(888987);let f=(0,d.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,role:"alert",className:(0,e.cn)(f({variant:c}),a),...d}));g.displayName="Alert";let h=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h5",{ref:d,className:(0,e.cn)("mb-1 font-medium leading-none tracking-tight",a),...c}));h.displayName="AlertTitle";let i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{ref:d,className:(0,e.cn)("text-sm [&_p]:leading-relaxed",a),...c}));i.displayName="AlertDescription",a.s(["Alert",()=>g,"AlertDescription",()=>i,"AlertTitle",()=>h])},142015,a=>{"use strict";let b=(0,a.i(95799).default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);a.s(["MessageSquare",()=>b],142015)},71459,a=>{"use strict";let b=(0,a.i(95799).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);a.s(["Bell",()=>b],71459)},158800,a=>{"use strict";let b=(0,a.i(95799).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],158800)},264634,a=>{"use strict";let b=(0,a.i(95799).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);a.s(["MoreVertical",()=>b],264634)},175846,a=>{"use strict";let b=(0,a.i(95799).default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);a.s(["CheckCheck",()=>b],175846)},257781,a=>{"use strict";var b=a.i(352584),c=a.i(611038);a.i(182584);var d=a.i(590612),e=a.i(888987),f=a.i(421908),g=a.i(15788),h=a.i(663475),i=a.i(105874),j=a.i(908513),k=a.i(124737),l=a.i(200365);function m({conversations:a,filters:d,onFiltersChange:m,onRefresh:n,onSelectConversation:o,activeConversationId:p,isLoading:q}){let[r,s]=(0,c.useState)(d.search||""),t=(0,c.useMemo)(()=>{let b={...d,search:r||void 0},c=(0,k.applyConversationFilters)(a,b);return(0,k.sortConversations)(c)},[a,d,r]),u=a.reduce((a,b)=>a+(b.unreadCount||0),0);return(0,b.jsxs)("aside",{className:"w-full sm:w-[320px] border-r bg-card flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Team Contacts"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Message your Verso relationship team"})]}),(0,b.jsx)(f.Button,{variant:"outline",size:"icon",onClick:n,disabled:q,children:(0,b.jsx)(j.RefreshCw,{className:(0,e.cn)("h-4 w-4",q&&"animate-spin")})})]}),(0,b.jsx)(h.Input,{value:r,onChange:a=>s(a.target.value),placeholder:"Search conversations"}),(0,b.jsxs)(f.Button,{variant:d.unreadOnly?"default":"outline",size:"sm",onClick:()=>m({...d,unreadOnly:!d.unreadOnly}),children:["Unread ",d.unreadOnly?"":`(${u})`]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto bg-background",children:0===t.length?(0,b.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground text-sm",children:q?"Loading conversationsâ€¦":"No conversations yet."}):(0,b.jsx)("ul",{className:"p-2 space-y-1",children:t.map(a=>{let c=a.id===p,d=a.participants.find(a=>(a.role||"").startsWith("staff_")||"ceo"===a.role),f=d?.displayName||d?.email||a.subject||"Verso Team",h=a.participants.length>2?` +${a.participants.length-2}`:"",j=a.lastMessageAt||a.createdAt;return(0,b.jsx)("li",{children:(0,b.jsx)("button",{className:(0,e.cn)("w-full text-left px-3 py-3 rounded-lg group","transition-all duration-200 ease-out","hover:bg-muted/70 hover:shadow-md hover:scale-[1.02]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","active:scale-[0.98]",c?"bg-muted shadow-sm scale-[1.01]":"bg-transparent"),onClick:()=>o(a.id),children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(i.Avatar,{className:"h-11 w-11 transition-transform duration-200 group-hover:scale-110",children:[d?.avatarUrl&&(0,b.jsx)(i.AvatarImage,{src:d.avatarUrl,alt:f}),(0,b.jsx)(i.AvatarFallback,{className:"bg-primary/10 text-primary text-sm font-medium",children:(0,l.getInitials)(f)})]}),a.unreadCount>0&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-primary flex items-center justify-center shadow-lg animate-pulse",children:(0,b.jsx)("span",{className:"text-[10px] font-bold text-primary-foreground",children:a.unreadCount>9?"9+":a.unreadCount})})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-baseline justify-between gap-2 mb-1",children:[(0,b.jsxs)("span",{className:(0,e.cn)("font-semibold truncate text-sm",(a.unreadCount,"text-foreground")),children:[f,h&&(0,b.jsx)("span",{className:"font-normal text-muted-foreground",children:h})]}),(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground shrink-0",suppressHydrationWarning:!0,children:(0,l.formatRelativeTime)(j)})]}),(0,b.jsx)("p",{className:(0,e.cn)("text-xs truncate",a.unreadCount>0?"text-foreground/80 font-medium":"text-muted-foreground"),children:(0,l.truncateText)(a.preview||a.latestMessage?.body||"Start the conversation",60)}),d?.role&&(0,b.jsx)("div",{className:"flex items-center gap-2 mt-1.5",children:(0,b.jsx)(g.Badge,{variant:"outline",className:"text-[10px] capitalize px-1.5 py-0",children:d.role.replace("staff_","")})})]})]})})},a.id)})})})]})}var n=a.i(174297),o=a.i(58834),p=a.i(899750);let q={visibility:"investor",type:"all"};function r({currentUserId:a,initialConversations:e}){let[f,g]=(0,c.useState)(e),[h,i]=(0,c.useState)(e[0]?.id||null),[j,k]=(0,c.useState)(q),[l,r]=(0,c.useState)(!1),s=(0,c.useRef)(h);s.current=h;let t=(0,c.useMemo)(()=>f.find(a=>a.id===h)||null,[f,h]),u=(0,c.useCallback)(async(a,b=!1)=>{b||r(!0);try{let b=a||j,{conversations:c}=await (0,d.fetchConversationsClient)({...b,includeMessages:!0,limit:50});g(c),c.length>0&&!h&&i(c[0].id)}catch(a){p.toast.error(a.message||"Failed to load conversations")}finally{b||r(!1)}},[j,h]),v=(0,c.useCallback)(a=>{i(a),g(b=>b.map(b=>b.id===a?{...b,unreadCount:0}:b)),(0,d.markConversationRead)(a).catch(console.error)},[]);return(0,c.useEffect)(()=>{u(j)},[j,u]),(0,c.useEffect)(()=>{console.log("[Investor Messages] Setting up realtime subscription");let a=(0,o.createClient)(),b=a.channel("investor_conversations_all").on("postgres_changes",{event:"INSERT",schema:"public",table:"conversations"},()=>{console.log("[Realtime] New conversation created, refreshing list"),(0,d.fetchConversationsClient)({...j,includeMessages:!0,limit:50}).then(({conversations:a})=>{g(a)}).catch(console.error)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},a=>{let b=a.new?.conversation_id;b&&b!==s.current&&(console.log("[Realtime] New message in background conversation, refreshing list"),(0,d.fetchConversationsClient)({...j,includeMessages:!0,limit:50}).then(({conversations:a})=>{g(a)}).catch(console.error))}).subscribe(a=>{console.log("[Realtime] Subscription status:",a)});return()=>{console.log("[Investor Messages] Cleaning up realtime subscription"),a.removeChannel(b)}},[j]),(0,b.jsxs)("div",{className:"flex h-[calc(100vh-4rem)] overflow-hidden",children:[(0,b.jsx)(m,{conversations:f,filters:j,onFiltersChange:k,onRefresh:()=>void u(j),onSelectConversation:v,activeConversationId:h,isLoading:l}),(0,b.jsx)("div",{className:"flex-1 flex flex-col",children:t?(0,b.jsx)(n.ConversationView,{conversation:t,currentUserId:a,onRead:()=>(0,d.markConversationRead)(t.id),onError:a=>p.toast.error(a),onDelete:a=>{g(b=>b.filter(b=>b.id!==a)),i(null),p.toast.success("Conversation deleted")}},t.id):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Select a conversation to view messages."})})]})}a.s(["InvestorMessagingClient",()=>r],257781)},142368,a=>{a.v(a=>Promise.resolve().then(()=>a(648232)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__439a79b1._.js.map