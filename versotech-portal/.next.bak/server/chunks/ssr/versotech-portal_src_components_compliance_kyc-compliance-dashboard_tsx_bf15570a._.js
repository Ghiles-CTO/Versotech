module.exports=[761934,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(497412),e=a.i(284169),f=a.i(15788),g=a.i(421908),h=a.i(181608),i=a.i(951870),j=a.i(399580),k=a.i(42329),l=a.i(838086),m=a.i(877918),n=a.i(278541),o=a.i(478870),p=a.i(816854),q=a.i(455966),r=a.i(618287),s=a.i(3321),t=a.i(966494),u=a.i(871057),v=a.i(504839),w=a.i(203422),x=a.i(13289),y=a.i(586105),z=a.i(599499),A=a.i(724070),B=a.i(899750),C=a.i(660599);let D={investor:{label:"Investor",icon:n.Building2,href:"/versotech_main/users"},arranger:{label:"Arranger",icon:u.Briefcase,href:"/versotech_main/users"},partner:{label:"Partner",icon:x.Handshake,href:"/versotech_main/users"},introducer:{label:"Introducer",icon:t.TrendingUp,href:"/versotech_main/users"},lawyer:{label:"Lawyer",icon:v.Scale,href:"/versotech_main/users"},commercial_partner:{label:"Commercial Partner",icon:w.Landmark,href:"/versotech_main/users"}};function E(){let[a,d]=(0,c.useState)(null),[p,r]=(0,c.useState)(null),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)("30"),[x,C]=(0,c.useState)("all"),E=async()=>{u(!0);try{let a="all"!==x?`&entity_type=${x}`:"",[b,c]=await Promise.all([fetch("/api/staff/compliance/overview"),fetch(`/api/staff/compliance/expiring-documents?days=${v}&include_expired=true&include_stale=true${a}`)]);if(!b.ok||!c.ok)throw Error("Failed to fetch compliance data");let[e,f]=await Promise.all([b.json(),c.json()]);d(e),r(f)}catch(a){console.error("Fetch error:",a),B.toast.error("Failed to load compliance data")}finally{u(!1)}};return((0,c.useEffect)(()=>{E()},[v,x]),t)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"KYC Compliance Dashboard"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Monitor KYC status across all entities and track document expiry"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(i.Select,{value:x,onValueChange:C,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(i.SelectValue,{placeholder:"All Entity Types"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Entity Types"}),(0,b.jsx)(i.SelectItem,{value:"investor",children:"Investors"}),(0,b.jsx)(i.SelectItem,{value:"arranger",children:"Arrangers"}),(0,b.jsx)(i.SelectItem,{value:"partner",children:"Partners"}),(0,b.jsx)(i.SelectItem,{value:"introducer",children:"Introducers"}),(0,b.jsx)(i.SelectItem,{value:"lawyer",children:"Lawyers"}),(0,b.jsx)(i.SelectItem,{value:"commercial_partner",children:"Commercial Partners"})]})]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:E,children:[(0,b.jsx)(q.RefreshCcw,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsxs)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(j.CheckCircle2,{className:"h-4 w-4 text-green-400"}),"KYC Complete"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-green-400",children:a.summary.kyc_complete}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[a.summary.completion_percentage,"% of all entities"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsxs)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(k.Clock,{className:"h-4 w-4 text-blue-400"}),"KYC Pending"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-blue-400",children:a.summary.kyc_pending}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting completion"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsxs)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(l.AlertTriangle,{className:"h-4 w-4 text-amber-400"}),"Expiring Soon"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-amber-400",children:a.documents_expiring_30_days}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Documents in next 30 days"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsxs)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4 text-red-400"}),"Expired"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-red-400",children:a.documents_expired}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Require immediate action"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsxs)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(z.FileWarning,{className:"h-4 w-4 text-orange-400"}),"Stale Documents"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-orange-400",children:a.stale_proof_of_address}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Proof of address > 90 days"})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(e.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(o.Users,{className:"h-5 w-5"}),"Member Compliance"]}),(0,b.jsx)(e.CardDescription,{children:"Directors, UBOs, and Signatories requiring attention across all entities"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-white/10 bg-white/5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(o.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Members"})]}),(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.member_compliance.total_members})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-amber-500/30 bg-amber-500/10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(k.Clock,{className:"h-4 w-4 text-amber-400"}),(0,b.jsx)("span",{className:"text-sm text-amber-400",children:"Incomplete KYC"})]}),(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:a.member_compliance.incomplete_kyc})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-red-500/30 bg-red-500/10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(y.UserX,{className:"h-4 w-4 text-red-400"}),(0,b.jsx)("span",{className:"text-sm text-red-400",children:"Expired IDs"})]}),(0,b.jsx)("div",{className:"text-2xl font-bold text-red-400",children:a.member_compliance.expired_ids})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-orange-500/30 bg-orange-500/10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(z.FileWarning,{className:"h-4 w-4 text-orange-400"}),(0,b.jsx)("span",{className:"text-sm text-orange-400",children:"UBOs Missing Data"})]}),(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-400",children:a.member_compliance.missing_documents})]})]}),a.members_needing_attention>0&&(0,b.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4 text-red-400"}),(0,b.jsxs)("span",{className:"text-sm text-red-400 font-medium",children:[a.members_needing_attention," members require immediate attention"]})]})})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"pb-3",children:[(0,b.jsx)(e.CardTitle,{className:"text-base",children:"Overall KYC Completion"}),(0,b.jsxs)(e.CardDescription,{children:[a.summary.kyc_complete," of ",a.summary.total_entities," entities have completed KYC"]})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"w-full bg-white/10 rounded-full h-4",children:(0,b.jsx)("div",{className:`h-4 rounded-full transition-all ${a.summary.completion_percentage>=80?"bg-green-500":a.summary.completion_percentage>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${a.summary.completion_percentage}%`}})}),(0,b.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"0%"}),(0,b.jsxs)("span",{children:[a.summary.completion_percentage,"%"]}),(0,b.jsx)("span",{children:"100%"})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{className:"text-base",children:"KYC Status by Entity Type"}),(0,b.jsx)(e.CardDescription,{children:"Breakdown across all 6 persona types"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(a.by_entity_type).map(([a,c])=>{let d=D[a],e=c.total>0?Math.round(c.complete/c.total*100):0,g=d?.icon??n.Building2;return(0,b.jsxs)("div",{className:`p-4 rounded-lg border transition-colors cursor-pointer ${x===a?"border-primary bg-primary/10":"border-white/10 hover:bg-white/5"}`,onClick:()=>C(x===a?"all":a),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium",children:d?.label||a})]}),(0,b.jsx)(f.Badge,{variant:"outline",children:c.total})]}),(0,b.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2 mb-2",children:(0,b.jsx)("div",{className:"h-2 rounded-full bg-green-500",style:{width:`${e}%`}})}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:[c.complete," complete"]}),(0,b.jsxs)("span",{children:[c.pending," pending"]})]}),(c.expired>0||c.expiring_soon>0)&&(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[c.expiring_soon>0&&(0,b.jsxs)(f.Badge,{className:"bg-amber-500/20 text-amber-400 text-xs",children:[c.expiring_soon," expiring"]}),c.expired>0&&(0,b.jsxs)(f.Badge,{className:"bg-red-500/20 text-red-400 text-xs",children:[c.expired," expired"]})]})]},a)})})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{className:"text-base",children:"Documents Requiring Attention"}),(0,b.jsx)(e.CardDescription,{children:"Expired, expiring, and stale documents across all entities"})]}),(0,b.jsxs)(i.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[150px]",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"30",children:"Next 30 days"}),(0,b.jsx)(i.SelectItem,{value:"60",children:"Next 60 days"}),(0,b.jsx)(i.SelectItem,{value:"90",children:"Next 90 days"})]})]})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)(h.Tabs,{defaultValue:"expired",className:"space-y-4",children:[(0,b.jsxs)(h.TabsList,{children:[(0,b.jsxs)(h.TabsTrigger,{value:"expired",className:"gap-2",children:[(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4"}),"Expired (",p?.summary.expired_count||0,")"]}),(0,b.jsxs)(h.TabsTrigger,{value:"expiring",className:"gap-2",children:[(0,b.jsx)(k.Clock,{className:"h-4 w-4"}),"Expiring (",p?.summary.expiring_soon_count||0,")"]}),(0,b.jsxs)(h.TabsTrigger,{value:"stale",className:"gap-2",children:[(0,b.jsx)(A.Calendar,{className:"h-4 w-4"}),"Stale (",p?.summary.stale_count||0,")"]})]}),(0,b.jsx)(h.TabsContent,{value:"expired",children:p?.expired.length===0?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(j.CheckCircle2,{className:"h-12 w-12 text-green-400 mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No expired documents"})]}):(0,b.jsx)("div",{className:"space-y-2",children:p?.expired.map(a=>(0,b.jsx)(F,{doc:a,variant:"expired"},a.id))})}),(0,b.jsx)(h.TabsContent,{value:"expiring",children:p?.expiring_soon.length===0?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(j.CheckCircle2,{className:"h-12 w-12 text-green-400 mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No documents expiring soon"})]}):(0,b.jsx)("div",{className:"space-y-2",children:p?.expiring_soon.map(a=>(0,b.jsx)(F,{doc:a,variant:"expiring"},a.id))})}),(0,b.jsx)(h.TabsContent,{value:"stale",children:p?.stale?.length===0?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(j.CheckCircle2,{className:"h-12 w-12 text-green-400 mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No stale proof of address documents"})]}):(0,b.jsx)("div",{className:"space-y-2",children:p?.stale?.map(a=>(0,b.jsx)(F,{doc:a,variant:"stale"},a.id))})})]})})]})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[(0,b.jsx)(m.AlertCircle,{className:"h-12 w-12 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Failed to load compliance data"}),(0,b.jsxs)(g.Button,{onClick:E,children:[(0,b.jsx)(q.RefreshCcw,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}function F({doc:a,variant:c}){let e=D[a.entity_type],h=e?.icon||n.Building2;return(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-white/10 hover:bg-white/5 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${(()=>{switch(c){case"expired":return"bg-red-500/20";case"expiring":return"bg-amber-500/20";case"stale":return"bg-orange-500/20"}})()}`,children:(0,b.jsx)(p.FileText,{className:`h-4 w-4 ${(()=>{switch(c){case"expired":return"text-red-400";case"expiring":return"text-amber-400";case"stale":return"text-orange-400"}})()}`})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:a.name}),(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.type.replace(/_/g," ")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)(h,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.entity_name}),a.member_name&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsx)(o.Users,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.member_name})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.Badge,{className:(()=>{switch(c){case"expired":return"bg-red-500/20 text-red-400";case"expiring":return"bg-amber-500/20 text-amber-400";case"stale":return"bg-orange-500/20 text-orange-400"}})(),children:(()=>{if("stale"===c&&null!==a.days_since_document_date){let b=Math.floor(a.days_since_document_date/30);return`${b} months old`}return null!==a.days_until_expiry?(0,C.formatExpiryCountdown)(a.days_until_expiry):"Unknown"})()}),(0,b.jsx)(d.default,{href:`/versotech_main/users/${{investor:"investors",arranger:"arrangers",partner:"partners",introducer:"introducers",lawyer:"lawyers",commercial_partner:"commercial-partners"}[a.entity_type]||"investors"}/${a.entity_id}`,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(r.ExternalLink,{className:"h-4 w-4"})})})]})]})}a.s(["KYCComplianceDashboard",()=>E])}];

//# sourceMappingURL=versotech-portal_src_components_compliance_kyc-compliance-dashboard_tsx_bf15570a._.js.map