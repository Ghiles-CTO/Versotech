module.exports=[703629,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(284169),f=a.i(15788),g=a.i(421908),h=a.i(211374),i=a.i(816854),j=a.i(399580),k=a.i(42329),l=a.i(877918),m=a.i(203297),n=a.i(724070),o=a.i(318525),p=a.i(438436),q=a.i(278541),r=a.i(975965),s=a.i(425622),t=a.i(752907),u=a.i(3321),v=a.i(888987),w=a.i(497412);let x={active:{bg:"bg-green-100 text-green-800",icon:j.CheckCircle2},pending_signature:{bg:"bg-yellow-100 text-yellow-800",icon:k.Clock},pending_ceo_signature:{bg:"bg-blue-100 text-blue-800",icon:t.PenTool},pending_arranger_signature:{bg:"bg-purple-100 text-purple-800",icon:t.PenTool},pending_cp_signature:{bg:"bg-orange-100 text-orange-800",icon:m.FileSignature},approved:{bg:"bg-blue-100 text-blue-800",icon:j.CheckCircle2},draft:{bg:"bg-gray-100 text-gray-800",icon:i.FileText},expired:{bg:"bg-red-100 text-red-800",icon:l.AlertCircle},terminated:{bg:"bg-red-100 text-red-800",icon:l.AlertCircle}},y={referral:"Referral Agreement",revenue_share:"Revenue Share Agreement",fixed_fee:"Fixed Fee Agreement",hybrid:"Hybrid Agreement",placement:"Placement Agreement"},z={net_15:"Net 15 Days",net_30:"Net 30 Days",net_45:"Net 45 Days",net_60:"Net 60 Days"};function A(a){return a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function B(){var a;let t=(0,d.useParams)(),B=(0,d.useRouter)(),C=t.id,[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!1);(0,c.useEffect)(()=>{async function a(){try{G(!0);let a=await fetch(`/api/placement-agreements/${C}`);if(!a.ok){if(404===a.status)throw Error("Agreement not found");throw Error("Failed to fetch agreement")}let b=await a.json();E(b.agreement||b)}catch(a){console.error("Error fetching agreement:",a),I(a instanceof Error?a.message:"Failed to load agreement")}finally{G(!1)}}C&&a()},[C]);let L=async()=>{try{K(!0);let a=await fetch(`/api/placement-agreements/${C}/sign`,{method:"POST"});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to initiate signing")}let b=await a.json();b.signing_url&&B.push(b.signing_url)}catch(a){console.error("Error initiating signing:",a),I(a instanceof Error?a.message:"Failed to start signing process")}finally{K(!1)}};if(F)return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)(h.Skeleton,{className:"h-8 w-64"}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(h.Skeleton,{className:"h-6 w-48"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-96"})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-3/4"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-1/2"})]})]})]});if(H||!D)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)(e.Card,{className:"max-w-lg mx-auto",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2 text-destructive",children:[(0,b.jsx)(l.AlertCircle,{className:"h-5 w-5"}),"Error"]}),(0,b.jsx)(e.CardDescription,{children:H||"Agreement not found"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>B.back(),children:[(0,b.jsx)(r.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Go Back"]})})]})});let M=x[D.status]||x.draft,N=M.icon,O="pending_cp_signature"===D.status,P="active"===D.status,Q=D.signed_pdf_url||D.pdf_url;return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>B.back(),children:(0,b.jsx)(r.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Placement Agreement"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:y[D.agreement_type]||D.agreement_type})]})]}),(0,b.jsxs)(f.Badge,{className:(0,v.cn)("flex items-center gap-1",M.bg),children:[(0,b.jsx)(N,{className:"h-3 w-3"}),D.status.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,b.jsxs)(e.Card,{className:"md:col-span-2",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.FileText,{className:"h-5 w-5"}),"Agreement Details"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-6",children:[D.commercial_partner&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,b.jsx)(q.Building2,{className:"h-8 w-8 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Commercial Partner"}),(0,b.jsx)("p",{className:"font-medium",children:D.commercial_partner.legal_name||D.commercial_partner.display_name})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(p.Percent,{className:"h-4 w-4"}),"Commission Rate"]}),(0,b.jsx)("p",{className:"font-medium text-lg",children:(a=D.default_commission_bps,`${(a/100).toFixed(2)}%`)})]}),D.commission_cap_amount&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Commission Cap"}),(0,b.jsxs)("p",{className:"font-medium",children:["$",D.commission_cap_amount.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(o.Globe,{className:"h-4 w-4"}),"Territory"]}),(0,b.jsx)("p",{className:"font-medium",children:D.territory||"Global"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Exclusivity"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:D.exclusivity_level?.replace(/_/g," ")||"Non-exclusive"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Payment Terms"}),(0,b.jsx)("p",{className:"font-medium",children:z[D.payment_terms||""]||D.payment_terms||"-"})]}),D.deal_types&&D.deal_types.length>0&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deal Types"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:D.deal_types.map(a=>(0,b.jsx)(f.Badge,{variant:"secondary",className:"text-xs",children:a},a))})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4"}),"Important Dates"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Created"}),(0,b.jsx)("p",{className:"font-medium",children:A(D.created_at)})]}),D.signed_date&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Signed"}),(0,b.jsx)("p",{className:"font-medium",children:A(D.signed_date)})]}),D.effective_date&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Effective From"}),(0,b.jsx)("p",{className:"font-medium",children:A(D.effective_date)})]}),D.expiry_date&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Expires"}),(0,b.jsx)("p",{className:"font-medium",children:A(D.expiry_date)})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-base",children:"Actions"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-3",children:[O&&(0,b.jsx)(g.Button,{className:"w-full",onClick:L,disabled:J,children:J?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Preparing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.FileSignature,{className:"h-4 w-4 mr-2"}),"Sign Agreement"]})}),Q&&(0,b.jsx)(g.Button,{variant:"outline",className:"w-full",asChild:!0,children:(0,b.jsxs)("a",{href:D.signed_pdf_url||D.pdf_url||"#",target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)(s.Download,{className:"h-4 w-4 mr-2"}),P?"Download Signed Agreement":"View Agreement PDF"]})}),(0,b.jsx)(g.Button,{variant:"ghost",className:"w-full",asChild:!0,children:(0,b.jsxs)(w.default,{href:"/versotech_main/placement-agreements",children:[(0,b.jsx)(r.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Agreements"]})})]})]}),"pending_ceo_signature"===D.status&&(0,b.jsx)(e.Card,{className:"border-blue-200 bg-blue-50",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.Clock,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-blue-900",children:"Awaiting CEO Signature"}),(0,b.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"The CEO must sign this agreement before you can add your signature."})]})]})})}),"pending_arranger_signature"===D.status&&(0,b.jsx)(e.Card,{className:"border-purple-200 bg-purple-50",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k.Clock,{className:"h-5 w-5 text-purple-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-purple-900",children:"Awaiting Arranger Signature"}),(0,b.jsx)("p",{className:"text-sm text-purple-700 mt-1",children:"The Arranger must sign this agreement before you can add your signature."})]})]})})}),"pending_cp_signature"===D.status&&(0,b.jsx)(e.Card,{className:"border-orange-200 bg-orange-50",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(m.FileSignature,{className:"h-5 w-5 text-orange-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-orange-900",children:"Your Signature Required"}),(0,b.jsx)("p",{className:"text-sm text-orange-700 mt-1",children:'This agreement has been signed and is ready for your signature. Click "Sign Agreement" to complete the signing process.'})]})]})})}),P&&(0,b.jsx)(e.Card,{className:"border-green-200 bg-green-50",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(j.CheckCircle2,{className:"h-5 w-5 text-green-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-green-900",children:"Agreement Active"}),(0,b.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"This agreement is fully executed and active."})]})]})})})]})]})]})}a.s(["default",()=>B])}];

//# sourceMappingURL=c6ad4_src_app_%28main%29_versotech_main_placement-agreements_%5Bid%5D_page_tsx_b7fd16fc._.js.map