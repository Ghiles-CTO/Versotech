module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},9349,a=>{a.n(a.i(142710))},199585,a=>{a.n(a.i(701395))},929852,a=>{a.n(a.i(816404))},516153,a=>{a.n(a.i(422096))},911164,a=>{a.n(a.i(273021))},16933,a=>{a.n(a.i(618450))},498419,a=>{a.n(a.i(72598))},368965,a=>{"use strict";a.s(["VersoSignPageClient",()=>b]);let b=(0,a.i(578644).registerClientReference)(function(){throw Error("Attempted to call VersoSignPageClient() from the server but VersoSignPageClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/versotech-portal/src/app/(staff)/versotech/staff/versosign/versosign-page-client.tsx <module evaluation>","VersoSignPageClient")},457243,a=>{"use strict";a.s(["VersoSignPageClient",()=>b]);let b=(0,a.i(578644).registerClientReference)(function(){throw Error("Attempted to call VersoSignPageClient() from the server but VersoSignPageClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/versotech-portal/src/app/(staff)/versotech/staff/versosign/versosign-page-client.tsx","VersoSignPageClient")},180424,a=>{"use strict";a.i(368965);var b=a.i(457243);a.n(b)},889804,a=>{"use strict";var b=a.i(714898),c=a.i(198307),d=a.i(180424);a.i(937413);var e=a.i(131360),f=a.i(243085);async function g(){let a=await (0,f.getCurrentUser)();a&&(a.role?.startsWith("staff_")||"ceo"===a.role)||(0,e.redirect)("/versotech/login");let g=await (0,c.createClient)(),{data:h}=await g.from("tasks").select("*").eq("owner_user_id",a.id).in("kind",["countersignature","subscription_pack_signature","other"]).order("due_at",{ascending:!0,nullsFirst:!1}),i=h||[];if(i.length>0){let a=i.filter(a=>("pending"===a.status||"in_progress"===a.status)&&"signature_request"===a.related_entity_type&&a.related_entity_id);if(a.length>0){let b=a.map(a=>a.related_entity_id),{data:c}=await g.from("signature_requests").select("id").in("id",b).eq("status","expired"),d=new Set((c||[]).map(a=>a.id));i=i.map(a=>d.has(a.related_entity_id)&&("pending"===a.status||"in_progress"===a.status)?{...a,_expired:!0}:a)}}let{data:j}=await g.from("signature_requests").select(`
      id, signer_name, signer_email, document_type,
      token_expires_at, created_at, investor_id,
      investor:investors(display_name, legal_name)
    `).eq("status","expired").order("token_expires_at",{ascending:!1}).limit(50),k={high:0,medium:1,low:2},l=(i||[]).sort((a,b)=>{let c=k[a.priority]??99,d=k[b.priority]??99;return c!==d?c-d:a.due_at||b.due_at?a.due_at?b.due_at?new Date(a.due_at).getTime()-new Date(b.due_at).getTime():-1:1:0}),m=l.filter(a=>!a._expired),n=l.filter(a=>a._expired),o=[{category:"countersignatures",title:"Pending Countersignatures",description:"Subscription agreements awaiting your countersignature",tasks:m.filter(a=>"countersignature"===a.kind&&("pending"===a.status||"in_progress"===a.status))},{category:"follow_ups",title:"Manual Follow-ups Required",description:"Investors without platform accounts - manual intervention needed",tasks:m.filter(a=>a.metadata?.issue==="investor_no_user_account"&&"pending"===a.status)},{category:"other",title:"Completed Signatures",description:"Recently completed signature tasks",tasks:l.filter(a=>("countersignature"===a.kind||"subscription_pack_signature"===a.kind)&&"completed"===a.status).slice(0,10)},{category:"expired",title:"Expired Signatures",description:"Signature requests that have expired - may need to be resent",tasks:n,expiredSignatures:j||[]}],p={pending:m.filter(a=>"pending"===a.status).length,in_progress:m.filter(a=>"in_progress"===a.status).length,completed_today:l.filter(a=>"completed"===a.status&&a.completed_at&&new Date(a.completed_at).toDateString()===new Date().toDateString()).length,overdue:m.filter(a=>"pending"===a.status&&a.due_at&&new Date(a.due_at)<new Date).length,expired:(j||[]).length+n.length};return(0,b.jsx)(d.VersoSignPageClient,{userId:a.id,signatureGroups:o,stats:p})}a.s(["default",()=>g,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b06769e3._.js.map