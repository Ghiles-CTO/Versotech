module.exports=[274929,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.HooksClientContext},530136,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.ServerInsertedHtml},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},571370,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.AppRouterContext},257264,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored["react-ssr"].ReactServerDOMTurbopackClient},823879,a=>{"use strict";var b=a.i(713382);a.s(["X",()=>b.default])},799373,a=>{"use strict";let b=(0,a.i(95799).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],799373)},504839,a=>{"use strict";let b=(0,a.i(95799).default)("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);a.s(["Scale",()=>b],504839)},314449,a=>{"use strict";var b=a.i(611038),c=a.i(983639),d=a.i(948624),e=a.i(256832),f=a.i(125136),g=a.i(429770),h=a.i(579119),i=a.i(994358),j=a.i(385487),k=a.i(352584),l="Collapsible",[m,n]=(0,d.createContextScope)(l),[o,p]=m(l),q=b.forwardRef((a,c)=>{let{__scopeCollapsible:d,open:f,defaultOpen:g,disabled:i,onOpenChange:m,...n}=a,[p,q]=(0,e.useControllableState)({prop:f,defaultProp:g??!1,onChange:m,caller:l});return(0,k.jsx)(o,{scope:d,disabled:i,contentId:(0,j.useId)(),open:p,onOpenToggle:b.useCallback(()=>q(a=>!a),[q]),children:(0,k.jsx)(h.Primitive.div,{"data-state":w(p),"data-disabled":i?"":void 0,...n,ref:c})})});q.displayName=l;var r="CollapsibleTrigger",s=b.forwardRef((a,b)=>{let{__scopeCollapsible:d,...e}=a,f=p(r,d);return(0,k.jsx)(h.Primitive.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":w(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...e,ref:b,onClick:(0,c.composeEventHandlers)(a.onClick,f.onOpenToggle)})});s.displayName=r;var t="CollapsibleContent",u=b.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=p(t,a.__scopeCollapsible);return(0,k.jsx)(i.Presence,{present:c||e.open,children:({present:a})=>(0,k.jsx)(v,{...d,ref:b,present:a})})});u.displayName=t;var v=b.forwardRef((a,c)=>{let{__scopeCollapsible:d,present:e,children:i,...j}=a,l=p(t,d),[m,n]=b.useState(e),o=b.useRef(null),q=(0,g.useComposedRefs)(c,o),r=b.useRef(0),s=r.current,u=b.useRef(0),v=u.current,x=l.open||m,y=b.useRef(x),z=b.useRef(void 0);return b.useEffect(()=>{let a=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,f.useLayoutEffect)(()=>{let a=o.current;if(a){z.current=z.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();r.current=b.height,u.current=b.width,y.current||(a.style.transitionDuration=z.current.transitionDuration,a.style.animationName=z.current.animationName),n(e)}},[l.open,e]),(0,k.jsx)(h.Primitive.div,{"data-state":w(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!x,...j,ref:q,style:{"--radix-collapsible-content-height":s?`${s}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...a.style},children:x&&i})});function w(a){return a?"open":"closed"}a.s(["CollapsibleContent",()=>u,"CollapsibleTrigger",()=>s,"Content",()=>u,"Root",()=>q,"Trigger",()=>s,"createCollapsibleScope",()=>n])},926076,a=>{"use strict";var b=a.i(314449);let c=b.Root,d=b.CollapsibleTrigger,e=b.CollapsibleContent;a.s(["Collapsible",()=>c,"CollapsibleContent",()=>e,"CollapsibleTrigger",()=>d])},520783,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(58834);let f=(0,c.createContext)(void 0),g="verso_active_persona",h="verso_active_persona_type";function i(a){document.cookie=`${h}=${a}; path=/; max-age=31536000; SameSite=Lax`}function j({children:a,initialPersonas:j=[]}){let k=(0,d.useRouter)(),[l,m]=(0,c.useState)(j),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!j.length),[r,s]=(0,c.useState)(null),t=(0,c.useCallback)(async()=>{q(!0),s(null);try{let a=(0,e.createClient)(),{data:{user:b}}=await a.auth.getUser();if(!b){m([]),o(null);return}let{data:c,error:d}=await a.rpc("get_user_personas",{p_user_id:b.id});if(d){console.error("[persona-context] Error fetching personas:",d),s(d.message);return}let f=c||[];m(f);let j=localStorage.getItem(g),k=null;if(j&&(k=f.find(a=>a.entity_id===j)||null),!k){let a={ceo:1,staff:2,arranger:3,introducer:4,partner:5,commercial_partner:6,lawyer:7,investor:8};f.length>0&&(k=f.reduce((b,c)=>{let d=a[b.persona_type]??99;return(a[c.persona_type]??99)<d?c:b}))}if(o(k),k){let a=document.cookie.split("; ").find(a=>a.startsWith(h))?.split("=")[1],b=a&&a!==k.persona_type;if(i(k.persona_type),b&&window.location.pathname.includes("/dashboard"))return void window.location.reload()}}catch(a){console.error("[persona-context] Unexpected error:",a),s(a instanceof Error?a.message:"Failed to load personas")}finally{q(!1)}},[]),u=(0,c.useCallback)(a=>{o(a),localStorage.setItem(g,a.entity_id),i(a.persona_type),k.push("/versotech_main/dashboard")},[k]);(0,c.useEffect)(()=>{if(j.length){let a=localStorage.getItem(g),b=a?j.find(b=>b.entity_id===a):null;if(!b){let a={ceo:1,staff:2,arranger:3,introducer:4,partner:5,commercial_partner:6,lawyer:7,investor:8};j.length>0&&(b=j.reduce((b,c)=>{let d=a[b.persona_type]??99;return(a[c.persona_type]??99)<d?c:b}))}o(b??null),q(!1)}else t()},[j,t]);let v=l.some(a=>"ceo"===a.persona_type),w=l.some(a=>"staff"===a.persona_type),x=l.some(a=>"investor"===a.persona_type),y=l.some(a=>["partner","introducer","commercial_partner","arranger"].includes(a.persona_type)),z=l.some(a=>"lawyer"===a.persona_type),A=l.some(a=>"commercial_partner"===a.persona_type),B=l.some(a=>"introducer"===a.persona_type),C=l.some(a=>"arranger"===a.persona_type),D=l.length>0,E=l.length>1;return(0,b.jsx)(f.Provider,{value:{personas:l,activePersona:n,isLoading:p,error:r,switchPersona:u,refreshPersonas:t,isCEO:v,isStaff:w,isInvestor:x,isPartner:y,isLawyer:z,isCommercialPartner:A,isIntroducer:B,isArranger:C,hasAnyPersona:D,hasMultiplePersonas:E},children:a})}function k(){let a=(0,c.useContext)(f);if(void 0===a)throw Error("usePersona must be used within a PersonaProvider");return a}function l(a){return[...{ceo:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/deals",label:"Deals"},{href:"/versotech_main/subscriptions",label:"Subscriptions"},{href:"/versotech_main/investors",label:"Investors"},{href:"/versotech_main/documents",label:"Documents"},{href:"/versotech_main/messages",label:"Messages"},{href:"/versotech_main/users",label:"Users"},{href:"/versotech_main/kyc-review",label:"KYC Review"},{href:"/versotech_main/fees",label:"Fees"},{href:"/versotech_main/audit",label:"Audit"}],staff:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/deals",label:"Deals"},{href:"/versotech_main/subscriptions",label:"Subscriptions"},{href:"/versotech_main/investors",label:"Investors"},{href:"/versotech_main/documents",label:"Documents"},{href:"/versotech_main/messages",label:"Messages"}],investor:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/opportunities",label:"Opportunities"},{href:"/versotech_main/portfolio",label:"Portfolio"},{href:"/versotech_main/documents",label:"Documents"},{href:"/versotech_main/messages",label:"Messages"}],arranger:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/my-mandates",label:"My Mandates"},{href:"/versotech_main/my-partners",label:"My Partners"},{href:"/versotech_main/my-introducers",label:"My Introducers"},{href:"/versotech_main/my-commercial-partners",label:"My Commercial Partners"},{href:"/versotech_main/my-lawyers",label:"My Lawyers"}],introducer:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/introductions",label:"Introductions"},{href:"/versotech_main/introducer-agreements",label:"Agreements"}],partner:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/partner-transactions",label:"Transactions"},{href:"/versotech_main/shared-transactions",label:"Shared Deals"}],commercial_partner:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/client-transactions",label:"Client Transactions"},{href:"/versotech_main/placement-agreements",label:"Agreements"}],lawyer:[{href:"/versotech_main/dashboard",label:"Dashboard"},{href:"/versotech_main/assigned-deals",label:"Assigned Deals"},{href:"/versotech_main/escrow",label:"Escrow"},{href:"/versotech_main/subscription-packs",label:"Subscription Packs"}]}[a.persona_type]||[]]}a.s(["PersonaProvider",()=>j,"getNavItemsForPersona",()=>l,"usePersona",()=>k])},716052,a=>{"use strict";let b=(0,a.i(95799).default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);a.s(["Bot",()=>b],716052)},643232,a=>{"use strict";let b=(0,a.i(95799).default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);a.s(["Menu",()=>b],643232)},142368,a=>{a.v(a=>Promise.resolve().then(()=>a(648232)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8c39055b._.js.map