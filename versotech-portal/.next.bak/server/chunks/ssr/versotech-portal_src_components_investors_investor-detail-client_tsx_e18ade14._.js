module.exports=[722165,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(284169),e=a.i(421908),f=a.i(15788),g=a.i(181608),h=a.i(497412),i=a.i(975965),j=a.i(439467),k=a.i(231276),l=a.i(318525),m=a.i(278541),n=a.i(724070),o=a.i(325866),p=a.i(155508),q=a.i(816854),r=a.i(90516),s=a.i(478870),t=a.i(787957),u=a.i(289633),v=a.i(470305),w=a.i(663475),x=a.i(249464),y=a.i(951870),z=a.i(3321),A=a.i(899750);function B({investor:a,open:d,onOpenChange:f}){let g=(0,u.useRouter)(),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)([]),[l,n]=(0,c.useState)({type:a.type||"individual",email:a.email||"",phone:a.phone||"",country:a.country||"",tax_residency:a.tax_residency||"",primary_rm:a.primary_rm||"",first_name:a.first_name||"",middle_name:a.middle_name||"",last_name:a.last_name||"",legal_name:a.legal_name||"",display_name:a.display_name||"",country_of_incorporation:a.country_of_incorporation||"",representative_name:a.representative_name||"",representative_title:a.representative_title||""});(0,c.useEffect)(()=>{d&&(p(),n({type:a.type||"individual",email:a.email||"",phone:a.phone||"",country:a.country||"",tax_residency:a.tax_residency||"",primary_rm:a.primary_rm||"",first_name:a.first_name||"",middle_name:a.middle_name||"",last_name:a.last_name||"",legal_name:a.legal_name||"",display_name:a.display_name||"",country_of_incorporation:a.country_of_incorporation||"",representative_name:a.representative_name||"",representative_title:a.representative_title||""}))},[d,a]);let p=async()=>{try{let a=await fetch("/api/staff/available");if(a.ok){let b=await a.json();k(b.staff||[])}}catch(a){console.error("Failed to fetch staff members:",a)}},q=async b=>{if(b.preventDefault(),"individual"===l.type){if(!l.first_name.trim())return void A.toast.error("First name is required for individuals")}else if(!l.legal_name.trim())return void A.toast.error("Legal name is required");i(!0);try{let b,c={...l};b=l.type,"individual"===b&&(c.legal_name=[l.first_name.trim(),l.middle_name.trim(),l.last_name.trim()].filter(Boolean).join(" "),c.display_name.trim()||(c.display_name=c.legal_name));let d=await fetch(`/api/staff/investors/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){let a=await d.json();throw Error(a.error||"Failed to update investor")}A.toast.success("Investor updated successfully"),f(!1),g.refresh()}catch(b){let a=b instanceof Error?b.message:"Failed to update investor";A.toast.error(a)}finally{i(!1)}};return(0,b.jsx)(v.Dialog,{open:d,onOpenChange:f,children:(0,b.jsxs)(v.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{className:"text-white",children:"Edit Investor"}),(0,b.jsx)(v.DialogDescription,{className:"text-gray-300",children:"Update investor profile information"})]}),(0,b.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(x.Label,{htmlFor:"type",className:"text-white",children:["Investor Type ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)(y.Select,{value:l.type,onValueChange:a=>n({...l,type:a}),children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{})}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"individual",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.User,{className:"h-4 w-4"}),"Individual"]})}),(0,b.jsx)(y.SelectItem,{value:"entity",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Building2,{className:"h-4 w-4"}),"Entity"]})}),(0,b.jsx)(y.SelectItem,{value:"institutional",children:"Institutional"}),(0,b.jsx)(y.SelectItem,{value:"family_office",children:"Family Office"}),(0,b.jsx)(y.SelectItem,{value:"fund",children:"Fund"})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"individual"===l.type?"A natural person investing in their own name":"A company, fund, or institutional entity"})]}),"individual"===l.type&&(0,b.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-zinc-800 bg-zinc-900/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-300",children:[(0,b.jsx)(o.User,{className:"h-4 w-4"}),"Personal Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(x.Label,{htmlFor:"first_name",className:"text-white",children:["First Name ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(w.Input,{id:"first_name",value:l.first_name,onChange:a=>n({...l,first_name:a.target.value}),placeholder:"John",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"middle_name",className:"text-white",children:"Middle Name"}),(0,b.jsx)(w.Input,{id:"middle_name",value:l.middle_name,onChange:a=>n({...l,middle_name:a.target.value}),placeholder:"Michael",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"last_name",className:"text-white",children:"Last Name"}),(0,b.jsx)(w.Input,{id:"last_name",value:l.last_name,onChange:a=>n({...l,last_name:a.target.value}),placeholder:"Smith",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(l.first_name||l.last_name)&&(0,b.jsxs)("div",{className:"text-xs text-gray-400 bg-zinc-800/50 px-3 py-2 rounded",children:["Legal name will be: ",(0,b.jsx)("span",{className:"text-white font-medium",children:[l.first_name,l.middle_name,l.last_name].filter(Boolean).join(" ")})]})]}),["entity","institutional","family_office","fund"].includes(l.type)&&(0,b.jsxs)("div",{className:"space-y-4 p-4 rounded-lg border border-zinc-800 bg-zinc-900/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-300",children:[(0,b.jsx)(m.Building2,{className:"h-4 w-4"}),"Entity Information"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(x.Label,{htmlFor:"legal_name",className:"text-white",children:["Legal Name ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(w.Input,{id:"legal_name",value:l.legal_name,onChange:a=>n({...l,legal_name:a.target.value}),placeholder:"Acme Investment Holdings LP",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"display_name",className:"text-white",children:"Display Name"}),(0,b.jsx)(w.Input,{id:"display_name",value:l.display_name,onChange:a=>n({...l,display_name:a.target.value}),placeholder:"Acme Holdings (optional short name)",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"country_of_incorporation",className:"text-white",children:"Country of Incorporation"}),(0,b.jsx)(w.Input,{id:"country_of_incorporation",value:l.country_of_incorporation,onChange:a=>n({...l,country_of_incorporation:a.target.value}),placeholder:"Cayman Islands",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"representative_name",className:"text-white",children:"Representative Name"}),(0,b.jsx)(w.Input,{id:"representative_name",value:l.representative_name,onChange:a=>n({...l,representative_name:a.target.value}),placeholder:"Jane Doe",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"representative_title",className:"text-white",children:"Representative Title"}),(0,b.jsx)(w.Input,{id:"representative_title",value:l.representative_title,onChange:a=>n({...l,representative_title:a.target.value}),placeholder:"Managing Director",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-300",children:"Contact Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"email",className:"text-white",children:"Email"}),(0,b.jsx)(w.Input,{id:"email",type:"email",value:l.email,onChange:a=>n({...l,email:a.target.value}),placeholder:"investor@email.com",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"phone",className:"text-white",children:"Phone"}),(0,b.jsx)(w.Input,{id:"phone",type:"tel",value:l.phone,onChange:a=>n({...l,phone:a.target.value}),placeholder:"+1 (555) 123-4567",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"country",className:"text-white",children:"individual"===l.type?"Country of Residence":"Country"}),(0,b.jsx)(w.Input,{id:"country",value:l.country,onChange:a=>n({...l,country:a.target.value}),placeholder:"United States",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"tax_residency",className:"text-white",children:"Tax Residency"}),(0,b.jsx)(w.Input,{id:"tax_residency",value:l.tax_residency,onChange:a=>n({...l,tax_residency:a.target.value}),placeholder:"United States",className:"bg-zinc-900 border-zinc-700 text-white placeholder:text-gray-500"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"primary_rm",className:"text-white",children:"Relationship Manager"}),(0,b.jsxs)(y.Select,{value:l.primary_rm||void 0,onValueChange:a=>n({...l,primary_rm:a||""}),children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{placeholder:"Select a relationship manager (optional)"})}),(0,b.jsx)(y.SelectContent,{children:j.length>0?j.map(a=>(0,b.jsxs)(y.SelectItem,{value:a.id,children:[a.display_name," (",a.role,")"]},a.id)):(0,b.jsx)(y.SelectItem,{value:"loading",disabled:!0,children:"Loading staff..."})})]}),l.primary_rm&&(0,b.jsx)(e.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>n({...l,primary_rm:""}),className:"text-xs",children:"Clear selection"})]}),(0,b.jsxs)(v.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:h,children:"Cancel"}),(0,b.jsxs)(e.Button,{type:"submit",disabled:h,children:[h&&(0,b.jsx)(z.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})]})})}function C({investorId:a,open:d,onOpenChange:f}){(0,u.useRouter)();let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)("existing"),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,t]=(0,c.useState)([]);(0,c.useEffect)(()=>{d&&B()},[d]);let B=async()=>{k(!0);try{let a=await fetch("/api/profiles?role=investor");if(a.ok){let b=await a.json();t(b.profiles||[])}}catch(a){console.error("Failed to fetch users:",a)}finally{k(!1)}},C=async b=>{if(b.preventDefault(),"existing"===l&&!p)return void A.toast.error("Please select a user");if("invite"===l&&(!n||!n.includes("@")))return void A.toast.error("Valid email is required");i(!0);try{let b="existing"===l?r.find(a=>a.id===p)?.email:n;console.log("[AddUser] Sending request:",{mode:l,email:b,userId:p});let c=await fetch(`/api/staff/investors/${a}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b?.trim().toLowerCase(),user_id:"existing"===l?p:void 0})}),d=await c.json();if(console.log("[AddUser] Response:",d),!c.ok)throw Error(d.error||"Failed to add user");d.invited?A.toast.success(`Invitation sent to ${b}. They will receive an email to set up their account.`):A.toast.success(`User ${b} has been linked to this investor.`),o(""),q(""),m("existing"),f(!1),window.location.reload()}catch(a){console.error("[AddUser] Error:",a),A.toast.error(a.message||"Failed to add user")}finally{i(!1)}};return(0,b.jsx)(v.Dialog,{open:d,onOpenChange:f,children:(0,b.jsxs)(v.DialogContent,{className:"bg-zinc-950 border-white/10 text-white",children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{className:"text-white",children:"Add Portal User"}),(0,b.jsx)(v.DialogDescription,{className:"text-gray-400",children:"Link an existing user or send an invitation to create a new account"})]}),(0,b.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,b.jsxs)(g.Tabs,{value:l,onValueChange:a=>m(a),children:[(0,b.jsxs)(g.TabsList,{className:"grid w-full grid-cols-2 bg-white/5 border-white/10",children:[(0,b.jsx)(g.TabsTrigger,{value:"existing",className:"data-[state=active]:bg-white/10 data-[state=active]:text-white",children:"Select Existing User"}),(0,b.jsx)(g.TabsTrigger,{value:"invite",className:"data-[state=active]:bg-white/10 data-[state=active]:text-white",children:"Send Invitation"})]}),(0,b.jsxs)(g.TabsContent,{value:"existing",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(x.Label,{htmlFor:"user_select",className:"text-white",children:["Select User ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)(y.Select,{value:p,onValueChange:q,disabled:j,children:[(0,b.jsx)(y.SelectTrigger,{className:"bg-white/5 border-white/10 text-white",children:(0,b.jsx)(y.SelectValue,{placeholder:j?"Loading users...":"Choose a user"})}),(0,b.jsx)(y.SelectContent,{className:"max-h-[300px] bg-zinc-950 border-white/10",children:r.length>0?r.map(a=>(0,b.jsx)(y.SelectItem,{value:a.id,className:"text-white",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Users,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.display_name}),(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:["(",a.email,")"]})]})},a.id)):(0,b.jsx)(y.SelectItem,{value:"no-users",disabled:!0,className:"text-gray-400",children:j?"Loading...":"No users found"})})]}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Select from existing users in the system"})]}),(0,b.jsxs)("div",{className:"rounded-md bg-blue-500/10 border border-blue-400/20 p-3 text-xs text-blue-100",children:[(0,b.jsx)("strong",{className:"text-blue-100",children:"How it works:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1 text-blue-200",children:[(0,b.jsx)("li",{children:"User is immediately linked to this investor"}),(0,b.jsx)("li",{children:"They can access this investor's data in the portal"})]})]})]}),(0,b.jsxs)(g.TabsContent,{value:"invite",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(x.Label,{htmlFor:"email",className:"text-white",children:["Email Address ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(w.Input,{id:"email",type:"email",value:n,onChange:a=>o(a.target.value),placeholder:"newuser@email.com",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"An invitation email will be sent to this address"})]}),(0,b.jsxs)("div",{className:"rounded-md bg-blue-500/10 border border-blue-400/20 p-3 text-xs text-blue-100",children:[(0,b.jsx)("strong",{className:"text-blue-100",children:"How it works:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1 text-blue-200",children:[(0,b.jsx)("li",{children:"Invitation email sent with signup link"}),(0,b.jsx)("li",{children:"They create account and get portal access"}),(0,b.jsx)("li",{children:"Automatically linked to this investor"})]})]})]})]}),(0,b.jsxs)(v.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:h,className:"border-white/10 text-white hover:bg-white/10 bg-white/5",children:"Cancel"}),(0,b.jsxs)(e.Button,{type:"submit",disabled:h,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[h&&(0,b.jsx)(z.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Add User"]})]})]})]})})}var D=a.i(405398),E=a.i(799373),F=a.i(292944);function G({investor:a}){let d=(0,u.useRouter)(),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(e.Button,{variant:"outline",className:"bg-white text-gray-900 hover:bg-gray-100 border-gray-300",onClick:()=>g(!0),children:[(0,b.jsx)(D.Edit,{className:"h-4 w-4 mr-2"}),"Edit Investor"]}),(0,b.jsxs)(e.Button,{className:"bg-blue-600 text-white hover:bg-blue-700",onClick:()=>i(!0),children:[(0,b.jsx)(E.UserPlus,{className:"h-4 w-4 mr-2"}),"Add User"]}),(0,b.jsxs)(e.Button,{className:"bg-green-600 text-white hover:bg-green-700",onClick:()=>d.push("/versotech_main/subscriptions"),children:[(0,b.jsx)(F.List,{className:"h-4 w-4 mr-2"}),"Manage Subscriptions"]}),(0,b.jsx)(B,{investor:a,open:f,onOpenChange:g}),(0,b.jsx)(C,{investorId:a.id,open:h,onOpenChange:i})]})}function H({investorId:a,users:c}){(0,u.useRouter)();let d=async(b,c)=>{if(confirm(`Remove ${c} from the investor portal?`))try{let c=await fetch(`/api/staff/investors/${a}/users/${b}`,{method:"DELETE"});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to remove user")}A.toast.success("User removed successfully"),window.location.reload()}catch(a){A.toast.error(a.message||"Failed to remove user")}};return c&&0!==c.length?(0,b.jsx)("div",{className:"space-y-3",children:c.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between border border-gray-800 rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:a.profiles?.display_name||"Unknown User"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.profiles?.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.profiles?.role}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",className:"hover:bg-red-100 hover:text-red-600",onClick:()=>d(a.user_id,a.profiles?.display_name||"this user"),children:"Remove"})]})]},a.user_id))}):(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(s.Users,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No portal users assigned"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:'Click "Add User" to invite someone to access the portal'})]})}function I({investorId:a,users:c}){return(0,b.jsxs)(d.Card,{id:"portal-users-section",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{children:"Portal Users"}),(0,b.jsx)(d.CardDescription,{children:'Users with access to the investor portal. Use "Add User" button in the page header to add new users.'})]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(H,{investorId:a,users:c})})]})}var J=a.i(211374),K=a.i(529183),L=a.i(50828);function M({investorId:a}){let g=(0,u.useRouter)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0),[l,n]=(0,c.useState)(null),o=(0,c.useCallback)(async()=>{try{k(!0);let b=await fetch(`/api/investors/${a}/subscriptions`);if(!b.ok){let a=`Failed to fetch subscriptions (status ${b.status})`;try{let c=await b.json();c?.error&&(a=c.details?`${c.error}: ${c.details}`:c.error)}catch{}throw Error(a)}let c=await b.json();i(c),n(null)}catch(a){console.error("Failed to fetch subscriptions:",a),n(a instanceof Error?a.message:"Failed to load subscriptions")}finally{k(!1)}},[a]);(0,c.useEffect)(()=>{o()},[a,o]);let p=(a,b)=>new Intl.NumberFormat("en-US",{style:"currency",currency:b||"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),q=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-";return j?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(J.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(J.Skeleton,{className:"h-64 w-full"})]}):l?(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-destructive",children:l}),(0,b.jsx)(e.Button,{onClick:o,className:"mt-4",children:"Retry"})]})}):h?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold",children:["Subscriptions (",h.summary.total_subscriptions,")"]}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:[h.summary.total_vehicles,' vehicles. Use "Manage Subscriptions" button to view and manage all subscriptions.']})]}),0===h.grouped_by_vehicle.length?(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:'No subscriptions yet. Use the "Manage Subscriptions" button to navigate to the subscriptions page.'})})}):(0,b.jsxs)(b.Fragment,{children:[h.grouped_by_vehicle.map((a,c)=>(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Building2,{className:"h-5 w-5"}),a.vehicle?.name??"No Vehicle Assigned"]}),(0,b.jsxs)(d.CardDescription,{className:"mt-1",children:[a.subscriptions.length," subscription",1!==a.subscriptions.length?"s":""]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Commitment"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:p(a.total_commitment,a.currency)})]})]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:a.subscriptions.map(a=>{let c=a.commitment>0?a.funded_amount/a.commitment*100:0,d=a.subscription_fee_amount||a.bd_fee_amount||a.spread_fee_amount||a.finra_fee_amount,h=[a.subscription_fee_amount,a.bd_fee_amount,a.spread_fee_amount,a.finra_fee_amount].reduce((a,b)=>a+(b||0),0),i=a.funded_amount>0&&a.current_nav?a.current_nav/a.funded_amount:null;return(0,b.jsxs)("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(K.Hash,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-mono font-semibold text-lg",children:a.subscription_number})]}),(0,b.jsx)(f.Badge,{className:(a=>{switch(a){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"committed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"closed":default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}})(a.status),children:a.status}),a.opportunity_name&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground italic",children:a.opportunity_name})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>g.push("/versotech_main/subscriptions"),children:["View Details",(0,b.jsx)(L.ArrowRight,{className:"h-4 w-4 ml-2"})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Commitment"}),(0,b.jsx)("p",{className:"font-semibold",children:p(a.commitment,a.currency)}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Funded: ",p(a.funded_amount,a.currency)," (",c.toFixed(0),"%)"]}),null!=a.outstanding_amount&&a.outstanding_amount>0&&(0,b.jsxs)("p",{className:"text-xs text-yellow-600 font-medium",children:["Outstanding: ",p(a.outstanding_amount,a.currency)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Important Dates"}),a.committed_at&&(0,b.jsxs)("p",{className:"text-sm",children:["Committed: ",q(a.committed_at)]}),a.created_at&&(0,b.jsxs)("p",{className:"text-sm",children:["Created: ",q(a.created_at)]}),!a.committed_at&&!a.created_at&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No dates set"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Share Structure"}),null!=a.num_shares?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-sm font-medium",children:[a.num_shares.toLocaleString()," shares"]}),null!=a.price_per_share&&(0,b.jsxs)("p",{className:"text-xs",children:["@ ",p(a.price_per_share,a.currency)]}),null!=a.spread_per_share&&a.spread_per_share>0&&(0,b.jsxs)("p",{className:"text-xs text-green-600",children:["Spread: ",p(a.spread_per_share,a.currency)]})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No share data"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Fees & Performance"}),d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-sm font-medium",children:["Total Fees: ",p(h,a.currency)]}),a.subscription_fee_percent&&(0,b.jsxs)("p",{className:"text-xs",children:["Sub: ",a.subscription_fee_percent.toFixed(2),"%"]}),a.bd_fee_percent&&(0,b.jsxs)("p",{className:"text-xs",children:["BD: ",a.bd_fee_percent.toFixed(2),"%"]})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No fees"}),null!=i&&(0,b.jsxs)("p",{className:`text-xs font-medium mt-1 ${i>=1?"text-green-600":"text-red-600"}`,children:["MOIC: ",i.toFixed(2),"x"]})]})]}),(a.capital_calls_total>0||a.distributions_total>0||null!=a.current_nav)&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t grid grid-cols-3 gap-4 text-sm",children:[a.capital_calls_total>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Capital Calls"}),(0,b.jsx)("p",{className:"font-medium",children:p(a.capital_calls_total,a.currency)})]}),a.distributions_total>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Distributions"}),(0,b.jsx)("p",{className:"font-medium text-green-600",children:p(a.distributions_total,a.currency)})]}),null!=a.current_nav&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current NAV"}),(0,b.jsx)("p",{className:`font-medium ${i&&i>=1?"text-green-600":"text-red-600"}`,children:p(a.current_nav,a.currency)})]})]})]},a.id)})})})]},a.vehicle?.id??`no-vehicle-${c}`)),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Grand Total"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:Object.entries(h.summary.total_commitment_by_currency).map(([a,c])=>(0,b.jsxs)("div",{className:"flex justify-between text-lg",children:[(0,b.jsxs)("span",{className:"font-medium",children:[a,":"]}),(0,b.jsx)("span",{className:"font-bold",children:p(c,a)})]},a))})})]})]})]}):null}var N=a.i(537412),O=a.i(966494),P=a.i(92881),Q=a.i(142015),R=a.i(468095),S=a.i(399580),T=a.i(877918),U=a.i(587143),V=a.i(42329),W=a.i(166457),X=a.i(425622),Y=a.i(380640),Z=a.i(948153);let $={subscription:q.FileText,capital_call:p.DollarSign,distribution:O.TrendingUp,kyc:P.UserCheck,document:R.Upload,message:Q.MessageSquare,profile:P.UserCheck,system:U.Info},_={subscription:"text-blue-600",capital_call:"text-orange-600",distribution:"text-green-600",kyc:"text-purple-600",document:"text-indigo-600",message:"text-pink-600",profile:"text-gray-600",system:"text-gray-500"},aa={subscription:"bg-blue-50",capital_call:"bg-orange-50",distribution:"bg-green-50",kyc:"bg-purple-50",document:"bg-indigo-50",message:"bg-pink-50",profile:"bg-gray-50",system:"bg-gray-50"};function ab({investorId:a,compact:g=!1,maxHeight:h="600px"}){let[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)("all");(0,c.useEffect)(()=>{(async()=>{try{l(!0);let b=await fetch(`/api/staff/investors/${a}/activity?type=${o}`);if(!b.ok){if(404===b.status||500===b.status){let a=await b.json().catch(()=>({}));if(a.error?.includes("relation")||a.error?.includes("does not exist")){j([]),n(null),l(!1);return}}throw Error("Failed to fetch activity timeline")}let c=await b.json();j(c.activities||[]),n(null)}catch(a){console.error("Failed to fetch activities:",a),j([]),n(null)}finally{l(!1)}})()},[a,o]);let q=async()=>{try{let b=await fetch(`/api/staff/investors/${a}/activity/export`),c=await b.blob(),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`investor-${a}-activity-${(0,Z.format)(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(d),document.body.removeChild(e)}catch(a){console.error("Failed to export activities:",a)}};return k?(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(J.Skeleton,{className:"h-6 w-32"}),(0,b.jsx)(J.Skeleton,{className:"h-4 w-48"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(a=>(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(J.Skeleton,{className:"h-10 w-10 rounded-full"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(J.Skeleton,{className:"h-4 w-3/4"}),(0,b.jsx)(J.Skeleton,{className:"h-3 w-1/2"})]})]},a))})})]}):m?(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,b.jsx)(T.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)("p",{children:m})]})})}):(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(V.Clock,{className:"h-5 w-5"}),"Activity Timeline"]}),(0,b.jsx)(d.CardDescription,{children:"Chronological history of all investor interactions"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(y.Select,{value:o,onValueChange:p,children:[(0,b.jsxs)(y.SelectTrigger,{className:"w-[180px]",children:[(0,b.jsx)(W.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(y.SelectValue,{})]}),(0,b.jsxs)(y.SelectContent,{children:[(0,b.jsx)(y.SelectItem,{value:"all",children:"All Activities"}),(0,b.jsx)(y.SelectItem,{value:"subscription",children:"Subscriptions"}),(0,b.jsx)(y.SelectItem,{value:"capital_call",children:"Capital Calls"}),(0,b.jsx)(y.SelectItem,{value:"distribution",children:"Distributions"}),(0,b.jsx)(y.SelectItem,{value:"kyc",children:"KYC Changes"}),(0,b.jsx)(y.SelectItem,{value:"document",children:"Documents"}),(0,b.jsx)(y.SelectItem,{value:"message",children:"Messages"})]})]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:q,children:[(0,b.jsx)(X.Download,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(N.ScrollArea,{style:{height:h},className:"pr-4",children:0===i.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(V.Clock,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No activities found"})]}):(0,b.jsx)("div",{className:"space-y-4",children:i.map((a,c)=>{let d=$[a.type],e=_[a.type],g=aa[a.type],h=c===i.length-1;return(0,b.jsxs)("div",{className:"relative",children:[!h&&(0,b.jsx)("div",{className:"absolute left-5 top-12 bottom-0 w-px bg-border"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:`flex-shrink-0 w-10 h-10 rounded-full ${g} flex items-center justify-center relative z-10`,children:(0,b.jsx)(d,{className:`h-5 w-5 ${e}`})}),(0,b.jsx)("div",{className:"flex-1 pb-8",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:a.action}),(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.type.replace("_"," ")})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a.description}),a.metadata&&Object.keys(a.metadata).length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:Object.entries(a.metadata).map(([a,c])=>(0,b.jsxs)("div",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(0,b.jsxs)("span",{className:"font-medium",children:[a,":"]})," ",(0,b.jsx)("span",{children:String(c)})]},a))}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.created_by&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("span",{children:["by ",a.created_by.display_name]}),(0,b.jsx)("span",{children:"â€¢"})]}),(0,b.jsx)("span",{title:(0,Z.format)(new Date(a.created_at),"PPpp"),children:(0,Y.formatDistanceToNow)(new Date(a.created_at),{addSuffix:!0})})]})]}),a.metadata?.status==="success"&&(0,b.jsx)(S.CheckCircle2,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),a.metadata?.status==="error"&&(0,b.jsx)(T.AlertCircle,{className:"h-4 w-4 text-red-600 flex-shrink-0"})]})})]})]},a.id)})})})})]})}function ac({investorId:a}){return(0,b.jsx)(ab,{investorId:a})}var ad=a.i(872287),ae=a.i(326486);a.i(73475);var af=a.i(493469),ag=a.i(108284),ah=a.i(108868);function ai({investor:a,capitalMetrics:u,metricsAvailable:v}){let[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),A=!1!==v;return(0,c.useEffect)(()=>{x(!0)},[]),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.default,{href:"/versotech_main/users",children:(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",className:"bg-gray-800 text-white hover:bg-gray-700",children:[(0,b.jsx)(i.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Users"]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:a.legal_name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Investor ID: ",a.id.slice(0,8)]})]})]}),(0,b.jsx)(G,{investor:a})]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(f.Badge,{variant:"completed"===a.kyc_status||"approved"===a.kyc_status?"default":"secondary",children:["KYC: ",a.kyc_status]}),(0,b.jsx)(f.Badge,{variant:"active"===a.status?"default":"secondary",children:a.status}),(0,b.jsx)(f.Badge,{variant:"outline",className:"capitalize",children:a.type}),a.aml_risk_rating&&(0,b.jsxs)(f.Badge,{variant:"low"===a.aml_risk_rating?"default":"high"===a.aml_risk_rating?"destructive":"secondary",children:["Risk: ",a.aml_risk_rating]}),a.is_pep&&(0,b.jsx)(f.Badge,{variant:"destructive",children:"PEP"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Commitment"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:A?"text-2xl font-bold text-foreground":"text-2xl font-semibold text-muted-foreground",children:A?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(u.total_commitment):"Pending"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:A?u.vehicle_count>0?(0,b.jsxs)(b.Fragment,{children:["Across ",u.vehicle_count," vehicle",1!==u.vehicle_count?"s":""]}):(0,b.jsx)(b.Fragment,{children:"No subscriptions yet"}):(0,b.jsx)(b.Fragment,{children:"Metrics pending"})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Contributed / Unfunded"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:A?"text-2xl font-bold text-green-400":"text-2xl font-semibold text-muted-foreground",children:A?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(u.total_contributed):"Pending"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:A?(0,b.jsxs)(b.Fragment,{children:["Unfunded: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(u.unfunded_commitment)]}):(0,b.jsx)(b.Fragment,{children:"Metrics pending"})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Current NAV"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:A?"text-2xl font-bold text-blue-400":"text-2xl font-semibold text-muted-foreground",children:A?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(u.current_nav):"Pending"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:A?(0,b.jsxs)(b.Fragment,{children:["Distributed: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(u.total_distributed)]}):(0,b.jsx)(b.Fragment,{children:"Metrics pending"})})]})]})]}),w?(0,b.jsxs)(g.Tabs,{defaultValue:"overview",className:"space-y-6",id:`investor-tabs-${a.id}`,children:[(0,b.jsxs)(g.TabsList,{className:"grid w-full grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 lg:w-auto lg:inline-grid",children:[(0,b.jsxs)(g.TabsTrigger,{value:"overview",className:"gap-2",children:[(0,b.jsx)(m.Building2,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,b.jsxs)(g.TabsTrigger,{value:"members",className:"gap-2",children:[(0,b.jsx)(o.User,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Members"})]}),(0,b.jsxs)(g.TabsTrigger,{value:"subscriptions",className:"gap-2",children:[(0,b.jsx)(p.DollarSign,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Subscriptions"})]}),(0,b.jsxs)(g.TabsTrigger,{value:"kyc",className:"gap-2",children:[(0,b.jsx)(q.FileText,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"KYC Documents"})]}),(0,b.jsxs)(g.TabsTrigger,{value:"bank",className:"gap-2",children:[(0,b.jsx)(r.Banknote,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Bank Details"})]}),(0,b.jsxs)(g.TabsTrigger,{value:"users",className:"gap-2",children:[(0,b.jsx)(s.Users,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Portal Users"})]}),(0,b.jsxs)(g.TabsTrigger,{value:"activity",className:"gap-2",children:[(0,b.jsx)(t.Activity,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Activity"})]})]}),(0,b.jsxs)(g.TabsContent,{value:"overview",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Contact Information"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Email"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.email})]})]}),a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Phone"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.phone})]})]}),a.country&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.Globe,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Country"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.country})]})]}),a.primary_rm_profile&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(o.User,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Relationship Manager"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.primary_rm_profile.display_name})]})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Entity Information"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[a.display_name&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(m.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Display Name"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.display_name})]})]}),a.country_of_incorporation&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.Globe,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Country of Incorporation"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.country_of_incorporation})]})]}),a.tax_residency&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(p.DollarSign,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Tax Residency"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.tax_residency})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Created"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:new Date(a.created_at).toLocaleDateString()})]})]})]})]})]}),"individual"===a.type&&(0,b.jsx)(af.IndividualKycDisplay,{data:{first_name:a.first_name,middle_name:a.middle_name,last_name:a.last_name,name_suffix:a.name_suffix,date_of_birth:a.date_of_birth,country_of_birth:a.country_of_birth,nationality:a.nationality,email:a.email,phone_mobile:a.phone_mobile,phone_office:a.phone_office,residential_street:a.residential_street,residential_line_2:a.residential_line_2,residential_city:a.residential_city,residential_state:a.residential_state,residential_postal_code:a.residential_postal_code,residential_country:a.residential_country,is_us_citizen:a.is_us_citizen,is_us_taxpayer:a.is_us_taxpayer,us_taxpayer_id:a.us_taxpayer_id,country_of_tax_residency:a.country_of_tax_residency,id_type:a.id_type,id_number:a.id_number,id_issue_date:a.id_issue_date,id_expiry_date:a.id_expiry_date,id_issuing_country:a.id_issuing_country},showEditButton:!0,onEdit:()=>z(!0),title:"Personal KYC Information"})]}),(0,b.jsx)(g.TabsContent,{value:"members",children:(0,b.jsx)(ah.StaffEntityMembersTab,{entityType:"investor",entityId:a.id,entityName:a.legal_name})}),(0,b.jsx)(g.TabsContent,{value:"subscriptions",children:(0,b.jsx)(M,{investorId:a.id})}),(0,b.jsx)(g.TabsContent,{value:"kyc",children:(0,b.jsx)(ad.KYCDocumentsTab,{entityType:"investor",entityId:a.id,entityName:a.legal_name})}),(0,b.jsx)(g.TabsContent,{value:"bank",children:(0,b.jsx)(ae.BankDetailsTab,{entityType:"investor",entityId:a.id,entityName:a.legal_name})}),(0,b.jsx)(g.TabsContent,{value:"users",children:(0,b.jsx)(I,{investorId:a.id,users:a.investor_users||[]})}),(0,b.jsx)(g.TabsContent,{value:"activity",children:(0,b.jsx)(ac,{investorId:a.id})})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"h-10 rounded-md bg-muted/50"}),(0,b.jsx)("div",{className:"h-64 rounded-lg border border-dashed border-muted-foreground/30 bg-muted/20"})]}),"individual"===a.type&&(0,b.jsx)(ag.EntityKYCEditDialog,{open:y,onOpenChange:z,entityType:"investor",entityId:a.id,entityName:a.legal_name,apiEndpoint:`/api/staff/investors/${a.id}`,initialData:{first_name:a.first_name??void 0,middle_name:a.middle_name??void 0,last_name:a.last_name??void 0,name_suffix:a.name_suffix??void 0,date_of_birth:a.date_of_birth??void 0,country_of_birth:a.country_of_birth??void 0,nationality:a.nationality??void 0,email:a.email??void 0,phone_mobile:a.phone_mobile??void 0,phone_office:a.phone_office??void 0,residential_street:a.residential_street??void 0,residential_line_2:a.residential_line_2??void 0,residential_city:a.residential_city??void 0,residential_state:a.residential_state??void 0,residential_postal_code:a.residential_postal_code??void 0,residential_country:a.residential_country??void 0,is_us_citizen:a.is_us_citizen??void 0,is_us_taxpayer:a.is_us_taxpayer??void 0,us_taxpayer_id:a.us_taxpayer_id??void 0,country_of_tax_residency:a.country_of_tax_residency??void 0,id_type:a.id_type??void 0,id_number:a.id_number??void 0,id_issue_date:a.id_issue_date??void 0,id_expiry_date:a.id_expiry_date??void 0,id_issuing_country:a.id_issuing_country??void 0},onSuccess:()=>window.location.reload()})]})}a.s(["InvestorDetailClient",()=>ai],722165)}];

//# sourceMappingURL=versotech-portal_src_components_investors_investor-detail-client_tsx_e18ade14._.js.map