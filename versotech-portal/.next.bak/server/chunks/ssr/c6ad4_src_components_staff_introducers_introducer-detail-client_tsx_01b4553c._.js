module.exports=[825465,a=>{"use strict";var b=a.i(352584),c=a.i(284169),d=a.i(421908),e=a.i(15788),f=a.i(181608),g=a.i(497412),h=a.i(975965),i=a.i(439467),j=a.i(231276),k=a.i(325866),l=a.i(724070),m=a.i(816854),n=a.i(90516),o=a.i(787957),p=a.i(155508),q=a.i(966494),r=a.i(278541),s=a.i(405398),t=a.i(799373),u=a.i(42329),v=a.i(438436),w=a.i(203297),x=a.i(703606),y=a.i(264890),z=a.i(873785),A=a.i(933838),B=a.i(405708),C=a.i(399580),D=a.i(625473),E=a.i(877918),F=a.i(675167),G=a.i(478870),H=a.i(871057),I=a.i(618287),J=a.i(425622),K=a.i(446803),L=a.i(168118),M=a.i(711903),N=a.i(3321),O=a.i(587143),P=a.i(216316),Q=a.i(611038),R=a.i(872287),S=a.i(326486),T=a.i(162477);a.i(73475);var U=a.i(493469),V=a.i(108284),W=a.i(108868),X=a.i(652412),Y=a.i(29427),Z=a.i(698004),$=a.i(470305),_=a.i(249464),aa=a.i(951870),ab=a.i(50828),ac=a.i(289633),ad=a.i(899750),ae=a.i(888987);function af({open:a,onOpenChange:c,introducerId:f,introducerName:g,feePlans:h}){let i=(0,ac.useRouter)(),[j,k]=(0,Q.useState)(!1),[l,m]=(0,Q.useState)(null),[n,o]=(0,Q.useState)(""),[p,q]=(0,Q.useState)(""),[r,s]=(0,Q.useState)(null),[t,u]=(0,Q.useState)([]),[v,x]=(0,Q.useState)(!1),[y,z]=(0,Q.useState)(""),A=(0,Q.useMemo)(()=>h.filter(a=>"accepted"===a.status&&a.is_active&&a.introducer_agreement?.status==="active"&&a.introducer_agreement?.signed_date!==null&&null!==a.deal),[h]),B=(0,Q.useMemo)(()=>A.reduce((a,b)=>(b.deal&&!a.find(a=>a.id===b.deal.id)&&a.push(b.deal),a),[]),[A]),D=(0,Q.useMemo)(()=>n?A.filter(a=>a.deal?.id===n):[],[n,A]);(0,Q.useEffect)(()=>{a||(o(""),q(""),s(null),u([]),z(""),m(null))},[a]),(0,Q.useEffect)(()=>{q(""),s(null),u([]),z(""),1===D.length&&(q(D[0].id),s(D[0]))},[n]),(0,Q.useEffect)(()=>{if(!p){s(null),u([]),z("");return}s(A.find(a=>a.id===p)||null)},[p,A]),(0,Q.useEffect)(()=>{let a=r?.deal?.id,b=r?.term_sheet?.id;if(!a||!b){u([]),z("");return}let c=new AbortController;return(async()=>{x(!0),u([]),z("");try{let d=await fetch(`/api/deals/${a}/linkable-investors?term_sheet_id=${b}`,{signal:c.signal});if(d.ok){let a=await d.json();u(a.investors||[])}else console.error("Failed to fetch linkable investors:",d.status,d.statusText),u([])}catch(a){"AbortError"!==a.name&&console.error("Failed to fetch linkable investors:",a)}finally{c.signal.aborted||x(!1)}})(),()=>c.abort()},[r]);let F=async()=>{if(!r||!y)return void m("Please complete all selections");if(!r.deal?.id)return void m("Invalid fee plan selected - missing deal information");k(!0),m(null);try{let a=await fetch(`/api/deals/${r.deal.id}/members/${y}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({referred_by_entity_id:f,referred_by_entity_type:"introducer",assigned_fee_plan_id:p,role:"introducer_investor"})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to link investor to introducer")}ad.toast.success("Investor successfully linked to introducer"),c(!1),i.refresh()}catch(a){m(a.message)}finally{k(!1)}},I=n&&p&&y;return(0,b.jsx)($.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)($.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)($.DialogHeader,{children:[(0,b.jsxs)($.DialogTitle,{children:["Dispatch Investor for ",g]}),(0,b.jsx)($.DialogDescription,{children:"Link an investor to this introducer using an active fee agreement"})]}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[0===A.length?(0,b.jsx)("div",{className:"p-4 rounded-lg border border-amber-500/30 bg-amber-500/5",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(E.AlertCircle,{className:"h-5 w-5 text-amber-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-300",children:"No active fee agreements"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[g," has no active fee agreements with signed terms. Create and sign an introducer agreement from a deal first."]})]})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(_.Label,{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 text-primary text-xs font-medium",children:"1"}),"Select Deal"]}),(0,b.jsxs)(aa.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(aa.SelectTrigger,{className:(0,ae.cn)(n&&"border-primary/50"),children:(0,b.jsx)(aa.SelectValue,{placeholder:"Select a deal"})}),(0,b.jsx)(aa.SelectContent,{children:B.map(a=>(0,b.jsx)(aa.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(H.Briefcase,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{children:a.name})]})},a.id))})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Only deals with active signed agreements are shown"})]}),n&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(_.Label,{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 text-primary text-xs font-medium",children:"2"}),"Select Fee Plan"]}),1===D.length?(0,b.jsx)("div",{className:"p-3 rounded-lg bg-muted/50 border border-primary/30",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(w.FileSignature,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:D[0].name}),D[0].term_sheet&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Term Sheet v",D[0].term_sheet.version]})]}),(0,b.jsx)(e.Badge,{className:"ml-auto bg-green-500/20 text-green-400",children:"Active"})]})}):(0,b.jsxs)(aa.Select,{value:p,onValueChange:q,children:[(0,b.jsx)(aa.SelectTrigger,{className:(0,ae.cn)(p&&"border-primary/50"),children:(0,b.jsx)(aa.SelectValue,{placeholder:"Select a fee plan"})}),(0,b.jsx)(aa.SelectContent,{children:D.map(a=>(0,b.jsx)(aa.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),a.term_sheet&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Term Sheet v",a.term_sheet.version]})]})},a.id))})]})]}),r&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(_.Label,{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 text-primary text-xs font-medium",children:"3"}),"Select Investor"]}),v?(0,b.jsxs)("div",{className:"flex items-center gap-2 py-3",children:[(0,b.jsx)(N.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading eligible investors..."})]}):0===t.length?(0,b.jsx)("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(E.AlertCircle,{className:"h-4 w-4 text-blue-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-300",children:"No eligible investors"}),(0,b.jsx)("p",{className:"text-xs text-blue-300/80 mt-1",children:"No investors on this term sheet are available. They may already be linked to an introducer."})]})]})}):(0,b.jsxs)(aa.Select,{value:y,onValueChange:z,children:[(0,b.jsx)(aa.SelectTrigger,{className:(0,ae.cn)(y&&"border-primary/50"),children:(0,b.jsx)(aa.SelectValue,{placeholder:"Select an investor"})}),(0,b.jsx)(aa.SelectContent,{children:t.map(a=>(0,b.jsx)(aa.SelectItem,{value:a.user_id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(G.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{children:a.display_name}),a.email&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.email})]})]})},a.user_id))})]})]}),I&&(0,b.jsx)("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(C.CheckCircle2,{className:"h-5 w-5 text-emerald-400 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"text-emerald-300 font-medium",children:"Ready to dispatch"}),(0,b.jsxs)("p",{className:"text-emerald-300/80 text-xs mt-1",children:["The selected investor will be linked to ",(0,b.jsx)("strong",{children:g})," using the ",(0,b.jsx)("strong",{children:r?.name})," fee plan."]})]})]})})]}),l&&(0,b.jsx)("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:l}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>c(!1),disabled:j,children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:F,disabled:j||!I||0===A.length,className:"gap-2",children:j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N.Loader2,{className:"h-4 w-4 animate-spin"}),"Linking..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ab.ArrowRight,{className:"h-4 w-4"}),"Dispatch Investor"]})})]})]})]})})}var ag=a.i(201986),ah=a.i(310702);function ai({introducer:a,metrics:$,introductions:_,commissions:aa,agreements:ab}){let ae=(0,ac.useRouter)(),[ai,aj]=(0,Q.useState)(!1),[ak,al]=(0,Q.useState)(!1),[am,an]=(0,Q.useState)(!1),[ao,ap]=(0,Q.useState)(!1),[aq,ar]=(0,Q.useState)(!1),[as,at]=(0,Q.useState)(null),[au,av]=(0,Q.useState)(null),aw=async(a,b)=>{av(a);try{let c=await fetch(`/api/storage/download?path=${encodeURIComponent(a)}&bucket=deal-documents`);if(!c.ok)throw Error("Failed to download file");let d=await c.blob(),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=a.split("/").pop()||`${b||"agreement"}.pdf`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(e),ad.toast.success("PDF downloaded successfully")}catch(a){console.error("Error downloading PDF:",a),ad.toast.error("Failed to download PDF")}finally{av(null)}},ax=async a=>{try{let b=await fetch(`/api/storage/download?path=${encodeURIComponent(a)}&bucket=deal-documents`);if(!b.ok)throw Error("Failed to load file");let c=await b.blob(),d=window.URL.createObjectURL(c);window.open(d,"_blank")}catch(a){console.error("Error previewing PDF:",a),ad.toast.error("Failed to preview PDF")}},[ay,az]=(0,Q.useState)([]),[aA,aB]=(0,Q.useState)(!1),[aC,aD]=(0,Q.useState)(null),[aE,aF]=(0,Q.useState)([]),[aG,aH]=(0,Q.useState)(!1),aI={subscription:"Subscription Fee",management:"Management Fee",performance:"Performance Fee",spread_markup:"Spread Markup",flat:"Flat Fee",other:"Other"},aJ=(0,Q.useCallback)(async()=>{aB(!0);try{let b=await fetch(`/api/introducers/${a.id}/fee-plans`);if(b.ok){let a=await b.json();az(a.fee_plans||[])}}catch(a){console.error("Error fetching fee plans:",a)}finally{aB(!1)}},[a.id]),aK=(0,Q.useCallback)(async()=>{aH(!0);try{let b=await fetch(`/api/introducers/${a.id}/referred-investors`);if(b.ok){let a=await b.json();aF(a.referred_investors||[])}}catch(a){console.error("Error fetching referred investors:",a)}finally{aH(!1)}},[a.id]);(0,Q.useEffect)(()=>{aJ(),aK()},[aJ,aK]);let aL={draft:"bg-slate-500/20 text-slate-400",sent:"bg-blue-500/20 text-blue-400",pending_signature:"bg-purple-500/20 text-purple-400",accepted:"bg-green-500/20 text-green-400",rejected:"bg-red-500/20 text-red-400"},aM={allocated:"bg-green-500/20 text-green-400",converted:"bg-green-500/20 text-green-400",pending:"bg-yellow-500/20 text-yellow-400",expired:"bg-gray-500/20 text-gray-400"},aN={paid:"bg-green-500/20 text-green-400",accrued:"bg-yellow-500/20 text-yellow-400",invoiced:"bg-blue-500/20 text-blue-400",cancelled:"bg-red-500/20 text-red-400"},aO={draft:{bg:"bg-slate-500/20",text:"text-slate-400",icon:(0,b.jsx)(m.FileText,{className:"h-3 w-3"})},sent:{bg:"bg-blue-500/20",text:"text-blue-400",icon:(0,b.jsx)(z.Send,{className:"h-3 w-3"})},pending_approval:{bg:"bg-amber-500/20",text:"text-amber-400",icon:(0,b.jsx)(E.AlertCircle,{className:"h-3 w-3"})},approved:{bg:"bg-indigo-500/20",text:"text-indigo-400",icon:(0,b.jsx)(C.CheckCircle2,{className:"h-3 w-3"})},pending_ceo_signature:{bg:"bg-purple-500/20",text:"text-purple-400",icon:(0,b.jsx)(A.PenLine,{className:"h-3 w-3"})},pending_introducer_signature:{bg:"bg-cyan-500/20",text:"text-cyan-400",icon:(0,b.jsx)(A.PenLine,{className:"h-3 w-3"})},active:{bg:"bg-emerald-500/20",text:"text-emerald-400",icon:(0,b.jsx)(C.CheckCircle2,{className:"h-3 w-3"})},expired:{bg:"bg-gray-500/20",text:"text-gray-400",icon:(0,b.jsx)(u.Clock,{className:"h-3 w-3"})},rejected:{bg:"bg-red-500/20",text:"text-red-400",icon:(0,b.jsx)(D.XCircle,{className:"h-3 w-3"})}},aP={id:a.id,legalName:a.legal_name,contactName:a.contact_name,email:a.email,defaultCommissionBps:a.default_commission_bps||0,commissionCapAmount:a.commission_cap_amount,paymentTerms:a.payment_terms,status:a.status,notes:a.notes};return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(g.default,{href:"/versotech_main/users",children:(0,b.jsxs)(d.Button,{variant:"ghost",size:"sm",className:"bg-gray-800 text-white hover:bg-gray-700",children:[(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Users"]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:a.legal_name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Introducer ID: ",a.id.slice(0,8)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(d.Button,{variant:"default",size:"sm",onClick:()=>ar(!0),className:"bg-gradient-to-r from-orange-600 to-amber-600 hover:from-orange-500 hover:to-amber-500 text-white",children:[(0,b.jsx)(z.Send,{className:"h-4 w-4 mr-2"}),"Dispatch Investor"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>al(!0),children:[(0,b.jsx)(t.UserPlus,{className:"h-4 w-4 mr-2"}),"Invite User"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>aj(!0),children:[(0,b.jsx)(s.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsx)(e.Badge,{className:(0,ah.getStatusStyle)(a.status,ah.statusStyles),children:a.status}),a.kyc_status&&(0,b.jsxs)(e.Badge,{className:(0,ah.getStatusStyle)(a.kyc_status,ah.kycStyles),children:["KYC: ",a.kyc_status]}),a.default_commission_bps&&(0,b.jsxs)(e.Badge,{variant:"outline",children:[(0,ag.formatBps)(a.default_commission_bps)," Commission"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{className:"pb-3",children:(0,b.jsxs)(c.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(q.TrendingUp,{className:"h-4 w-4"}),"Introductions"]})}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-foreground",children:$.totalIntroductions}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[$.successfulAllocations," converted"]})]})]}),(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{className:"pb-3",children:(0,b.jsxs)(c.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(v.Percent,{className:"h-4 w-4"}),"Conversion Rate"]})}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[$.conversionRate.toFixed(1),"%"]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Success rate"})]})]}),(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{className:"pb-3",children:(0,b.jsxs)(c.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(p.DollarSign,{className:"h-4 w-4"}),"Paid Commissions"]})}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-400",children:(0,ag.formatCurrency)($.totalCommissionPaid)}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"All time"})]})]}),(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{className:"pb-3",children:(0,b.jsxs)(c.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(u.Clock,{className:"h-4 w-4"}),"Pending"]})}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-400",children:(0,ag.formatCurrency)($.pendingCommission)}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Owed"})]})]}),(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{className:"pb-3",children:(0,b.jsxs)(c.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(v.Percent,{className:"h-4 w-4"}),"Default Rate"]})}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-foreground",children:(0,ag.formatBps)(a.default_commission_bps||0)}),a.commission_cap_amount&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:["Cap: ",(0,ag.formatCurrency)(a.commission_cap_amount)]})]})]})]}),(0,b.jsxs)(f.Tabs,{defaultValue:"overview",className:"space-y-6",id:`introducer-tabs-${a.id}`,children:[(0,b.jsxs)(f.TabsList,{className:"grid w-full grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-10 lg:w-auto lg:inline-grid",children:[(0,b.jsxs)(f.TabsTrigger,{value:"overview",className:"gap-2",children:[(0,b.jsx)(r.Building2,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"members",className:"gap-2",children:[(0,b.jsx)(k.User,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Members"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"fee-plans",className:"gap-2",children:[(0,b.jsx)(F.FileCheck,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Fee Plans"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"referred-investors",className:"gap-2",children:[(0,b.jsx)(G.Users,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Investors"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"agreements",className:"gap-2",children:[(0,b.jsx)(w.FileSignature,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Agreements"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"introductions",className:"gap-2",children:[(0,b.jsx)(q.TrendingUp,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Introductions"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"commissions",className:"gap-2",children:[(0,b.jsx)(p.DollarSign,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Commissions"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"kyc",className:"gap-2",children:[(0,b.jsx)(m.FileText,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"KYC"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"bank",className:"gap-2",children:[(0,b.jsx)(n.Banknote,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Bank"})]}),(0,b.jsxs)(f.TabsTrigger,{value:"activity",className:"gap-2",children:[(0,b.jsx)(o.Activity,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Activity"})]})]}),(0,b.jsxs)(f.TabsContent,{value:"overview",className:"space-y-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsx)(c.CardTitle,{children:"Contact Information"})}),(0,b.jsxs)(c.CardContent,{className:"space-y-4",children:[a.contact_name&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.User,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Primary Contact"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.contact_name})]})]}),a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(i.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Email"}),(0,b.jsx)("a",{href:`mailto:${a.email}`,className:"text-sm font-medium text-blue-400 hover:underline",children:a.email})]})]}),a.phone_mobile&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Mobile"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.phone_mobile})]})]}),a.phone_office&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Office"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:a.phone_office})]})]}),a.created_at&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Member Since"}),(0,b.jsx)("div",{className:"text-sm font-medium",children:(0,ag.formatDate)(a.created_at)})]})]}),!a.contact_name&&!a.email&&!a.phone_mobile&&!a.phone_office&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No contact information available"})]})]})}),"individual"===a.type&&(0,b.jsx)(U.IndividualKycDisplay,{data:{first_name:a.first_name,middle_name:a.middle_name,last_name:a.last_name,name_suffix:a.name_suffix,date_of_birth:a.date_of_birth,country_of_birth:a.country_of_birth,nationality:a.nationality,email:a.email,phone_mobile:a.phone_mobile,phone_office:a.phone_office,residential_street:a.residential_street,residential_line_2:a.residential_line_2,residential_city:a.residential_city,residential_state:a.residential_state,residential_postal_code:a.residential_postal_code,residential_country:a.residential_country,is_us_citizen:a.is_us_citizen,is_us_taxpayer:a.is_us_taxpayer,us_taxpayer_id:a.us_taxpayer_id,country_of_tax_residency:a.country_of_tax_residency,id_type:a.id_type,id_number:a.id_number,id_issue_date:a.id_issue_date,id_expiry_date:a.id_expiry_date,id_issuing_country:a.id_issuing_country},showEditButton:!0,onEdit:()=>ap(!0),title:"Personal KYC Information"}),a.notes&&(0,b.jsxs)(c.Card,{children:[(0,b.jsx)(c.CardHeader,{children:(0,b.jsx)(c.CardTitle,{children:"Notes"})}),(0,b.jsx)(c.CardContent,{children:(0,b.jsx)("div",{className:"text-sm bg-white/5 rounded-lg p-4 whitespace-pre-wrap",children:a.notes})})]})]}),(0,b.jsx)(f.TabsContent,{value:"members",children:(0,b.jsx)(W.StaffEntityMembersTab,{entityType:"introducer",entityId:a.id,entityName:a.legal_name})}),(0,b.jsx)(f.TabsContent,{value:"fee-plans",children:(0,b.jsxs)(c.Card,{children:[(0,b.jsxs)(c.CardHeader,{children:[(0,b.jsx)(c.CardTitle,{children:"Fee Plans"}),(0,b.jsxs)(c.CardDescription,{children:["All fee plans linked to ",a.legal_name," across deals. Click to expand details."]})]}),(0,b.jsx)(c.CardContent,{children:aA?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(N.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===ay.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border border-blue-500/20 mb-4",children:(0,b.jsx)(F.FileCheck,{className:"h-10 w-10 text-blue-400/60"})}),(0,b.jsx)("p",{className:"text-muted-foreground mb-1",children:"No fee plans yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"Fee plans will appear here when created from deals"})]}):(0,b.jsx)("div",{className:"space-y-4",children:ay.map(a=>{let c=aC===a.id,f=a.introducer_agreement?.pdf_url;return(0,b.jsxs)("div",{className:`rounded-xl border transition-all ${c?"border-blue-500/30 bg-blue-500/5":"border-white/10 hover:border-white/20"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer",onClick:()=>aD(c?null:a.id),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-2.5 rounded-lg ${"accepted"===a.status?"bg-green-500/20":"bg-slate-500/20"}`,children:(0,b.jsx)(F.FileCheck,{className:`h-5 w-5 ${"accepted"===a.status?"text-green-400":"text-slate-400"}`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:a.name}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2 mt-0.5",children:[(0,b.jsx)(H.Briefcase,{className:"h-3 w-3"}),a.deal?.name||"Unknown Deal",a.term_sheet&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground/70",children:["• Term Sheet v",a.term_sheet.version]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.investor_count>0&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,b.jsx)(G.Users,{className:"h-4 w-4"}),a.investor_count]}),f&&(0,b.jsx)(e.Badge,{className:"bg-green-500/20 text-green-400 border-green-500/30 text-xs",children:"PDF"}),(0,b.jsx)(e.Badge,{className:aL[a.status]||"bg-gray-500/20 text-gray-400",children:a.status}),c?(0,b.jsx)(M.ChevronUp,{className:"h-5 w-5 text-muted-foreground"}):(0,b.jsx)(L.ChevronDown,{className:"h-5 w-5 text-muted-foreground"})]})]}),c&&(0,b.jsx)("div",{className:"px-4 pb-4 pt-0 border-t border-white/10 mt-0",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Fee Components"}),a.fee_components&&a.fee_components.length>0?(0,b.jsx)("div",{className:"space-y-2",children:a.fee_components.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 rounded bg-white/5",children:[(0,b.jsx)("span",{className:"text-sm text-foreground",children:aI[a.kind]||a.kind}),(0,b.jsx)(e.Badge,{variant:"outline",className:"border-white/20 text-muted-foreground",children:a.rate_bps?`${a.rate_bps/100}%`:a.flat_amount?`$${a.flat_amount.toLocaleString()}`:"—"})]},a.id))}):a.term_sheet?(0,b.jsxs)("div",{className:"space-y-2",children:[a.term_sheet.subscription_fee_percent&&(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 rounded bg-white/5",children:[(0,b.jsx)("span",{className:"text-sm text-foreground",children:"Subscription Fee"}),(0,b.jsxs)(e.Badge,{variant:"outline",className:"border-white/20 text-muted-foreground",children:[a.term_sheet.subscription_fee_percent,"%"]})]}),a.term_sheet.management_fee_percent&&(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 rounded bg-white/5",children:[(0,b.jsx)("span",{className:"text-sm text-foreground",children:"Management Fee"}),(0,b.jsxs)(e.Badge,{variant:"outline",className:"border-white/20 text-muted-foreground",children:[a.term_sheet.management_fee_percent,"%"]})]}),a.term_sheet.carried_interest_percent&&(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 rounded bg-white/5",children:[(0,b.jsx)("span",{className:"text-sm text-foreground",children:"Carried Interest"}),(0,b.jsxs)(e.Badge,{variant:"outline",className:"border-white/20 text-muted-foreground",children:[a.term_sheet.carried_interest_percent,"%"]})]})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No fee components defined"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Agreement"}),a.introducer_agreement?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-green-500/10",children:(0,b.jsx)(w.FileSignature,{className:"h-5 w-5 text-green-400"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:a.introducer_agreement.reference_number||"Agreement"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Status: ",a.introducer_agreement.status]})]})]}),a.introducer_agreement.pdf_url&&(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",className:"flex-1 text-blue-400 border-blue-400/30 hover:bg-blue-400/10",onClick:b=>{b.stopPropagation(),fetch(`/api/storage/download?path=${encodeURIComponent(a.introducer_agreement.pdf_url)}&bucket=deal-documents`).then(a=>a.blob()).then(a=>{let b=window.URL.createObjectURL(a);window.open(b,"_blank")})},children:[(0,b.jsx)(y.Eye,{className:"h-4 w-4 mr-1"}),"Preview"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",className:"flex-1 text-green-400 border-green-400/30 hover:bg-green-400/10",onClick:b=>{b.stopPropagation(),aw(a.introducer_agreement.pdf_url,a.introducer_agreement.reference_number)},disabled:au===a.introducer_agreement.pdf_url,children:[au===a.introducer_agreement.pdf_url?(0,b.jsx)(N.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,b.jsx)(J.Download,{className:"h-4 w-4 mr-1"}),"Download"]})]})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[(0,b.jsx)(E.AlertCircle,{className:"h-4 w-4 text-amber-400"}),(0,b.jsx)("p",{className:"text-sm text-amber-400",children:"No agreement generated yet"})]}),(0,b.jsxs)("div",{className:"mt-4 space-y-2",children:[a.accepted_at&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-400",children:[(0,b.jsx)(C.CheckCircle2,{className:"h-4 w-4"}),"Accepted ",(0,ag.formatDate)(a.accepted_at)]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4"}),"Created ",(0,ag.formatDate)(a.created_at)]})]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",className:"mt-4 w-full",onClick:b=>{b.stopPropagation(),ae.push(`/versotech_main/deals/${a.deal?.id}?tab=fees`)},children:[(0,b.jsx)(I.ExternalLink,{className:"h-4 w-4 mr-2"}),"View in Deal"]})]})]})})]},a.id)})})})]})}),(0,b.jsx)(f.TabsContent,{value:"referred-investors",children:(0,b.jsxs)(c.Card,{children:[(0,b.jsxs)(c.CardHeader,{children:[(0,b.jsx)(c.CardTitle,{children:"Referred Investors"}),(0,b.jsxs)(c.CardDescription,{children:["Investors dispatched through ",a.legal_name]})]}),(0,b.jsx)(c.CardContent,{children:aG?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(N.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===aE.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 mb-4",children:(0,b.jsx)(G.Users,{className:"h-10 w-10 text-purple-400/60"})}),(0,b.jsx)("p",{className:"text-muted-foreground mb-1",children:"No referred investors yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/70 mb-4",children:"Investors dispatched through this introducer will appear here"}),(0,b.jsxs)(d.Button,{onClick:()=>ar(!0),className:"mb-4 bg-gradient-to-r from-orange-600 to-amber-600 hover:from-orange-500 hover:to-amber-500 text-white",children:[(0,b.jsx)(z.Send,{className:"h-4 w-4 mr-2"}),"Dispatch Investor"]}),(0,b.jsx)("div",{className:"max-w-md p-4 rounded-lg bg-blue-500/10 border border-blue-500/20 text-left",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(O.Info,{className:"h-5 w-5 text-blue-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-400 mb-1",children:"How to link investors"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:['Click "Dispatch Investor" above to link an investor from a deal where ',a.legal_name," has an active fee agreement. You can also dispatch from the Deal's Members tab."]})]})]})})]}):(0,b.jsx)("div",{className:"space-y-3",children:aE.map(a=>(0,b.jsxs)("div",{className:"group flex items-center justify-between p-4 rounded-xl border border-white/10 hover:border-white/20 hover:bg-white/5 transition-all cursor-pointer",onClick:()=>ae.push(`/versotech_main/deals/${a.deal?.id}?tab=members`),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-2.5 rounded-lg bg-purple-500/20",children:(0,b.jsx)(k.User,{className:"h-5 w-5 text-purple-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:a.investor?.legal_name||a.profile?.display_name||a.profile?.email||"Unknown"}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2 mt-0.5",children:[(0,b.jsx)(H.Briefcase,{className:"h-3 w-3"}),a.deal?.name||"Unknown Deal",a.fee_plan&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground/70",children:["• ",a.fee_plan.name]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.subscription?.amount&&(0,b.jsx)("div",{className:"text-sm font-medium text-foreground",children:(0,ag.formatCurrency)(a.subscription.amount)}),(0,b.jsx)(e.Badge,{className:a.subscription?.status==="funded"?"bg-green-500/20 text-green-400":a.subscription?.status?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400",children:a.subscription?.status||"Invited"}),(0,b.jsx)(I.ExternalLink,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},a.id))})})]})}),(0,b.jsx)(f.TabsContent,{value:"agreements",children:(0,b.jsxs)(c.Card,{children:[(0,b.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(c.CardTitle,{children:"Fee Agreements"}),(0,b.jsxs)(c.CardDescription,{children:["Manage commission agreements with ",a.legal_name]})]}),(0,b.jsxs)(d.Button,{onClick:()=>an(!0),className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 text-white",children:[(0,b.jsx)(B.Plus,{className:"h-4 w-4 mr-2"}),"Create Agreement"]})]}),(0,b.jsx)(c.CardContent,{children:0===ab.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-amber-500/10 to-orange-500/10 border border-amber-500/20 mb-4",children:(0,b.jsx)(w.FileSignature,{className:"h-10 w-10 text-amber-400/60"})}),(0,b.jsx)("p",{className:"text-muted-foreground mb-1",children:"No agreements yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/70",children:"Create a fee agreement to enable introductions"})]}):(0,b.jsx)("div",{className:"space-y-3",children:ab.map(a=>{var c;let f=aO[a.status]||{bg:"bg-gray-500/20",text:"text-gray-400",icon:(0,b.jsx)(m.FileText,{className:"h-3 w-3"})},g="active"===a.status;return a.status,a.status,(0,b.jsxs)("div",{className:`group relative flex items-center justify-between p-4 rounded-xl border transition-all duration-200 cursor-pointer
                          ${g?"border-emerald-500/30 bg-gradient-to-r from-emerald-500/5 to-transparent hover:from-emerald-500/10":"border-white/10 hover:border-white/20 hover:bg-white/5"}`,onClick:()=>ae.push(`/versotech_main/introducer-agreements/${a.id}`),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-2.5 rounded-lg ${f.bg}`,children:(0,b.jsx)(w.FileSignature,{className:`h-5 w-5 ${f.text}`})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.reference_number||`Agreement ${a.id.slice(0,8)}`}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["• ",(0,ag.formatBps)(a.default_commission_bps||0)]}),g&&(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-400 font-medium",children:"Current"})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground mt-0.5 flex items-center gap-2",children:[a.deal&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(H.Briefcase,{className:"h-3 w-3"}),a.deal.name]}),a.effective_date&&(0,b.jsxs)("span",{children:["• ",(0,ag.formatDate)(a.effective_date)]}),a.expiry_date&&(0,b.jsxs)("span",{className:"text-muted-foreground/70",children:["→ ",(0,ag.formatDate)(a.expiry_date)]}),!a.deal&&!a.effective_date&&(0,b.jsxs)(b.Fragment,{children:["Created ",(0,ag.formatDate)(a.created_at)]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.pdf_url&&(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",className:"h-8 gap-1.5 text-blue-400 border-blue-500/30 hover:bg-blue-500/10 hover:border-blue-500/50",onClick:b=>{b.stopPropagation(),aw(a.pdf_url,a.reference_number)},disabled:au===a.pdf_url,children:[au===a.pdf_url?(0,b.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-blue-400"}):(0,b.jsx)(K.FileDown,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"PDF"})]}),(0,b.jsxs)(e.Badge,{className:`${f.bg} ${f.text} gap-1.5 font-medium`,children:[f.icon,{draft:"Draft",sent:"Sent",pending_approval:"Pending Approval",approved:"Approved",pending_ceo_signature:"Awaiting CEO Signature",pending_introducer_signature:"Awaiting Introducer Signature",active:"Active",expired:"Expired",rejected:"Rejected"}[c=a.status]||c]}),a.pdf_url&&(0,b.jsxs)(P.DropdownMenu,{children:[(0,b.jsx)(P.DropdownMenuTrigger,{asChild:!0,onClick:a=>a.stopPropagation(),children:(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(x.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(P.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsxs)(P.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),ax(a.pdf_url)},children:[(0,b.jsx)(y.Eye,{className:"h-4 w-4 mr-2"}),"Preview"]}),(0,b.jsxs)(P.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),aw(a.pdf_url,a.reference_number)},disabled:au===a.pdf_url,children:[(0,b.jsx)(J.Download,{className:"h-4 w-4 mr-2"}),au===a.pdf_url?"Downloading...":"Download"]})]})]})]})]},a.id)})})})]})}),(0,b.jsx)(f.TabsContent,{value:"introductions",children:(0,b.jsxs)(c.Card,{children:[(0,b.jsxs)(c.CardHeader,{children:[(0,b.jsx)(c.CardTitle,{children:"Introductions"}),(0,b.jsxs)(c.CardDescription,{children:["All prospects introduced by ",a.legal_name]})]}),(0,b.jsx)(c.CardContent,{children:0===_.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(q.TrendingUp,{className:"h-12 w-12 text-muted-foreground mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No introductions yet"})]}):(0,b.jsx)("div",{className:"space-y-3",children:_.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-white/10 hover:bg-white/5 transition-colors",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:a.investor?.legal_name||a.prospect_email||"Unknown"}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.prospect_email&&a.investor?.legal_name&&(0,b.jsx)("span",{className:"mr-2",children:a.prospect_email}),a.deal?.name||"No deal linked",a.introduced_at&&` • ${(0,ag.formatDate)(a.introduced_at)}`]})]}),(0,b.jsx)(e.Badge,{className:aM[a.status]??"bg-gray-500/20 text-gray-400",children:a.status})]},a.id))})})]})}),(0,b.jsx)(f.TabsContent,{value:"commissions",children:(0,b.jsxs)(c.Card,{children:[(0,b.jsxs)(c.CardHeader,{children:[(0,b.jsx)(c.CardTitle,{children:"Commission History"}),(0,b.jsxs)(c.CardDescription,{children:["All commissions earned by ",a.legal_name]})]}),(0,b.jsx)(c.CardContent,{children:0===aa.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(p.DollarSign,{className:"h-12 w-12 text-muted-foreground mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No commissions yet"})]}):(0,b.jsx)("div",{className:"space-y-3",children:aa.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-white/10 hover:bg-white/5 transition-colors",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:(0,ag.formatCurrency)(a.accrual_amount)}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.investor?.legal_name||"Unknown investor",a.deal&&(0,b.jsxs)(b.Fragment,{children:[" • ",a.deal.name]})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Created ",(0,ag.formatDate)(a.created_at),a.paid_at&&` • Paid ${(0,ag.formatDate)(a.paid_at)}`]})]}),(0,b.jsx)(e.Badge,{className:aN[a.status]??"bg-gray-500/20 text-gray-400",children:a.status})]},a.id))})})]})}),(0,b.jsx)(f.TabsContent,{value:"kyc",children:(0,b.jsx)(R.KYCDocumentsTab,{entityType:"introducer",entityId:a.id,entityName:a.legal_name})}),(0,b.jsx)(f.TabsContent,{value:"bank",children:(0,b.jsx)(S.BankDetailsTab,{entityType:"introducer",entityId:a.id,entityName:a.legal_name})}),(0,b.jsx)(f.TabsContent,{value:"activity",children:(0,b.jsx)(T.ActivityTimelineTab,{entityType:"introducer",entityId:a.id,entityName:a.legal_name})})]}),(0,b.jsx)(X.EditIntroducerDialog,{open:ai,onOpenChange:aj,introducer:aP}),(0,b.jsx)(Z.InviteUserDialog,{open:ak,onOpenChange:al,entityType:"introducer",entityId:a.id,entityName:a.legal_name}),(0,b.jsx)(Y.CreateAgreementDialog,{open:am,onOpenChange:an,introducerId:a.id,introducerName:a.legal_name,defaultCommissionBps:a.default_commission_bps||100}),(0,b.jsx)(af,{open:aq,onOpenChange:ar,introducerId:a.id,introducerName:a.legal_name,feePlans:ay}),"individual"===a.type&&(0,b.jsx)(V.EntityKYCEditDialog,{open:ao,onOpenChange:ap,entityType:"introducer",entityId:a.id,entityName:a.legal_name,apiEndpoint:`/api/admin/introducers/${a.id}`,initialData:{first_name:a.first_name??void 0,middle_name:a.middle_name??void 0,last_name:a.last_name??void 0,name_suffix:a.name_suffix??void 0,date_of_birth:a.date_of_birth??void 0,country_of_birth:a.country_of_birth??void 0,nationality:a.nationality??void 0,email:a.email??void 0,phone_mobile:a.phone_mobile??void 0,phone_office:a.phone_office??void 0,residential_street:a.residential_street??void 0,residential_line_2:a.residential_line_2??void 0,residential_city:a.residential_city??void 0,residential_state:a.residential_state??void 0,residential_postal_code:a.residential_postal_code??void 0,residential_country:a.residential_country??void 0,is_us_citizen:a.is_us_citizen??void 0,is_us_taxpayer:a.is_us_taxpayer??void 0,us_taxpayer_id:a.us_taxpayer_id??void 0,country_of_tax_residency:a.country_of_tax_residency??void 0,id_type:a.id_type??void 0,id_number:a.id_number??void 0,id_issue_date:a.id_issue_date??void 0,id_expiry_date:a.id_expiry_date??void 0,id_issuing_country:a.id_issuing_country??void 0},onSuccess:()=>ae.refresh()})]})}a.s(["IntroducerDetailClient",()=>ai],825465)}];

//# sourceMappingURL=c6ad4_src_components_staff_introducers_introducer-detail-client_tsx_01b4553c._.js.map