module.exports=[38086,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(105874),e=a.i(421908),f=a.i(923251),g=a.i(134303),h=a.i(468095),i=a.i(3321),j=a.i(899750);function k({currentAvatarUrl:a,userName:k,onAvatarUpdate:l,compact:m=!1}){let[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),t=(0,c.useRef)(null),u=a=>a&&a.split(" ").map(a=>a[0]).filter(Boolean).join("").toUpperCase().slice(0,2)||"U",v=a=>{let b=a.target.files?.[0];if(!b)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(b.type))return void j.toast.error("Invalid file type",{description:"Please select a JPEG, PNG, GIF, or WEBP image"});if(b.size>2097152)return void j.toast.error("File too large",{description:"Maximum file size is 2MB"});let c=new FileReader;c.onloadend=()=>{s(c.result)},c.readAsDataURL(b),w(b)},w=async a=>{o(!0);try{let b=new FormData;b.append("avatar",a);let c=await fetch("/api/profiles/avatar",{method:"POST",body:b}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to upload avatar");j.toast.success("Avatar updated successfully"),l(d.avatar_url),s(null)}catch(a){console.error("Error uploading avatar:",a),j.toast.error("Failed to upload avatar",{description:a.message}),s(null)}finally{o(!1),t.current&&(t.current.value="")}},x=async()=>{if(a){q(!0);try{let a=await fetch("/api/profiles/avatar",{method:"DELETE"}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to delete avatar");j.toast.success("Avatar removed successfully"),l(""),s(null)}catch(a){console.error("Error deleting avatar:",a),j.toast.error("Failed to delete avatar",{description:a.message})}finally{q(!1)}}},y=r||a;return m?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(d.Avatar,{className:"h-16 w-16 border-2 border-background shadow-md",children:[(0,b.jsx)(d.AvatarImage,{src:y||void 0,alt:k}),(0,b.jsx)(d.AvatarFallback,{className:"text-lg",children:u(k)})]}),n&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full",children:(0,b.jsx)(i.Loader2,{className:"h-5 w-5 animate-spin text-primary"})}),(0,b.jsx)("button",{type:"button",onClick:()=>t.current?.click(),disabled:n||p,className:"absolute -bottom-1 -right-1 p-1.5 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-blue-700",children:(0,b.jsx)(f.Camera,{className:"h-3 w-3"})}),(0,b.jsx)("input",{ref:t,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:v,disabled:n||p})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(d.Avatar,{className:"h-32 w-32 border-4 border-background shadow-lg",children:[(0,b.jsx)(d.AvatarImage,{src:y||void 0,alt:k}),(0,b.jsx)(d.AvatarFallback,{className:"text-2xl",children:u(k)})]}),n&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full",children:(0,b.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),(0,b.jsx)("button",{type:"button",onClick:()=>t.current?.click(),disabled:n||p,className:"absolute bottom-0 right-0 p-2 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-blue-700",children:(0,b.jsx)(f.Camera,{className:"h-4 w-4"})})]}),(0,b.jsx)("input",{ref:t,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:v,disabled:n||p}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>t.current?.click(),disabled:n||p,children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Upload,{className:"mr-2 h-4 w-4"}),"Change Photo"]})}),a&&(0,b.jsx)(e.Button,{type:"button",variant:"outline",size:"sm",onClick:x,disabled:n||p,className:"hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Removing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Trash2,{className:"mr-2 h-4 w-4"}),"Remove"]})})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 text-center max-w-xs",children:["Recommended: Square image, at least 200×200px",(0,b.jsx)("br",{}),"Max size: 2MB • Formats: JPEG, PNG, GIF, WEBP"]})]})}var l=a.i(663475),m=a.i(249464),n=a.i(191675),o=a.i(284169),p=a.i(113276);function q({userId:a,initialData:d,onUpdate:f,showStaffFields:g=!1}){let[h,k]=(0,c.useState)(!1),[q,r]=(0,c.useState)({display_name:d.display_name||"",title:d.title||"",phone:d.phone||"",office_location:d.office_location||"",bio:d.bio||""}),s=a=>{let{name:b,value:c}=a.target;r(a=>({...a,[b]:c}))},t=async b=>{b.preventDefault(),k(!0);try{let b=await fetch(`/api/profiles/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to update profile");j.toast.success("Profile updated successfully"),f(c.profile)}catch(a){console.error("Error updating profile:",a),j.toast.error("Failed to update profile",{description:a.message})}finally{k(!1)}},u=JSON.stringify(q)!==JSON.stringify({display_name:d.display_name||"",title:d.title||"",phone:d.phone||"",office_location:d.office_location||"",bio:d.bio||""});return(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsx)(o.CardTitle,{children:"Profile Information"}),(0,b.jsx)(o.CardDescription,{children:"Update your personal information and profile details"})]}),(0,b.jsx)(o.CardContent,{children:(0,b.jsxs)("form",{onSubmit:t,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(m.Label,{htmlFor:"display_name",children:["Display Name ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(l.Input,{id:"display_name",name:"display_name",value:q.display_name,onChange:s,required:!0,placeholder:"Enter your display name"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"This is how your name will appear throughout the portal"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"email",children:"Email Address"}),(0,b.jsx)(l.Input,{id:"email",type:"email",value:d.email||"",disabled:!0}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Email cannot be changed here. Contact support to update your email."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"title",children:"Job Title / Position"}),(0,b.jsx)(l.Input,{id:"title",name:"title",value:q.title,onChange:s,placeholder:"e.g., Portfolio Manager, Investment Director"})]}),g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"phone",children:"Phone Number"}),(0,b.jsx)(l.Input,{id:"phone",name:"phone",type:"tel",value:q.phone,onChange:s,placeholder:"+1 (555) 123-4567"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"office_location",children:"Office Location"}),(0,b.jsx)(l.Input,{id:"office_location",name:"office_location",value:q.office_location,onChange:s,placeholder:"e.g., London Office, New York HQ"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"bio",children:"Bio / About"}),(0,b.jsx)(n.Textarea,{id:"bio",name:"bio",value:q.bio,onChange:s,placeholder:"Brief description about yourself, your expertise, and role...",rows:4,className:"resize-none"}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[q.bio.length,"/500 characters"]})]})]}),(0,b.jsxs)("div",{className:"pt-4 border-t",children:[(0,b.jsx)(e.Button,{type:"submit",disabled:h||!u,className:"w-full sm:w-auto",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving Changes..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]})}),u&&!h&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"You have unsaved changes"})]})]})})]})}var r=a.i(815917),s=a.i(737172),t=a.i(441278),u=a.i(625473),v=a.i(42329),w=a.i(425622),x=a.i(877918),y=a.i(816854),z=a.i(325866),A=a.i(15788),B=a.i(771088),C=a.i(470305),D=a.i(951870),E=a.i(278541),F=a.i(478274),G=a.i(403205);function H({open:a,onOpenChange:d,onUploadSuccess:f,entityId:g=null,category:k="both",members:o=[],memberType:p}){let[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,y]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(!1),L="entity"===k,M=H&&"entity-level"!==H,N=o.length>0,O=(0,c.useMemo)(()=>L?M?(0,F.getMemberDocumentTypes)():(0,F.getEntityDocumentTypes)():(0,F.getIndividualDocumentTypes)(),[L,M]);(0,c.useEffect)(()=>{t("")},[H]),(0,c.useEffect)(()=>{a&&(r(null),t(""),v(""),y(""),B(""),I(""))},[a]);let P=async a=>{if(a.preventDefault(),!q)return void j.toast.error("Please select a file");if(L&&!H)return void j.toast.error("Please select who this document is for");if(!s)return void j.toast.error("Please select a document type");K(!0);try{let a=new FormData;a.append("file",q),a.append("documentType","custom"===s?u.toLowerCase().replace(/\s+/g,"_"):s),"custom"===s&&u&&a.append("customLabel",u),w&&a.append("expiryDate",w),A&&a.append("notes",A),g&&a.append("entityId",g),M&&p&&("investor"===p?a.append("investorMemberId",H):"counterparty"===p&&a.append("counterpartyMemberId",H));let b=await fetch("/api/investors/me/documents/upload",{method:"POST",body:a}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to upload document");j.toast.success("Document uploaded successfully"),d(!1),f()}catch(a){console.error("Upload error:",a),j.toast.error("Upload failed",{description:a.message})}finally{K(!1)}};return(0,b.jsx)(C.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(C.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(C.DialogHeader,{children:[(0,b.jsx)(C.DialogTitle,{children:"Upload KYC Document"}),(0,b.jsx)(C.DialogDescription,{children:L?"Upload entity documents or member ID documents":"Upload your ID and proof of address"})]}),(0,b.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[L&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-base font-semibold",children:"Step 1: Who is this document for?"}),(0,b.jsxs)(D.Select,{value:H,onValueChange:I,children:[(0,b.jsx)(D.SelectTrigger,{className:H?"":"border-amber-400 bg-amber-50",children:(0,b.jsx)(D.SelectValue,{placeholder:"Select..."})}),(0,b.jsxs)(D.SelectContent,{children:[(0,b.jsx)(D.SelectItem,{value:"entity-level",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.Building2,{className:"h-4 w-4 text-blue-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Entity (Company Documents)"})]})}),N&&o.map(a=>(0,b.jsx)(D.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z.User,{className:"h-4 w-4 text-green-600"}),(0,b.jsx)("span",{children:a.full_name}),(0,b.jsxs)("span",{className:"text-muted-foreground text-xs",children:["(",a.role,")"]})]})},a.id))]})]}),"entity-level"===H&&(0,b.jsx)("p",{className:"text-sm text-blue-600",children:"Entity docs: Incorporation Certificate, Memo & Articles, Registers, Bank Confirmation"}),M&&(0,b.jsx)("p",{className:"text-sm text-green-600",children:"Member docs: Passport/ID, Proof of Address"}),!N&&(0,b.jsxs)(G.Alert,{className:"border-amber-300 bg-amber-50",children:[(0,b.jsx)(x.AlertCircle,{className:"h-4 w-4 text-amber-600"}),(0,b.jsxs)(G.AlertDescription,{className:"text-amber-800",children:[(0,b.jsx)("strong",{children:"No members added yet."})," To upload ID documents for Directors/UBOs, first add them in the ",(0,b.jsx)("span",{className:"font-semibold",children:"Directors/UBOs tab"}),"."]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:L?"text-base font-semibold":"",children:L?"Step 2: Document Type":"Document Type"}),(0,b.jsxs)(D.Select,{value:s,onValueChange:t,disabled:L&&!H,children:[(0,b.jsx)(D.SelectTrigger,{className:L&&!H?"opacity-50":"",children:(0,b.jsx)(D.SelectValue,{placeholder:L&&!H?"First select who...":"Select document type..."})}),(0,b.jsxs)(D.SelectContent,{children:[O.map(a=>(0,b.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value)),(0,b.jsx)(D.SelectItem,{value:"custom",children:"Other (Custom)"})]})]}),s&&"custom"!==s&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:O.find(a=>a.value===s)?.description})]}),"custom"===s&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{children:"Custom Document Name"}),(0,b.jsx)(l.Input,{value:u,onChange:a=>v(a.target.value),placeholder:"e.g., Trust Agreement",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{children:"File"}),(0,b.jsx)(l.Input,{type:"file",accept:".pdf,.jpg,.jpeg,.png,.heic,.webp",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>0xa00000)return void j.toast.error("File too large",{description:"Maximum file size is 10MB"});if(!["application/pdf","image/jpeg","image/jpg","image/png","image/heic","image/webp"].includes(b.type))return void j.toast.error("Invalid file type",{description:"Only PDF and image files are allowed"});r(b)}},required:!0}),q&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Selected: ",q.name," (",(q.size/1024/1024).toFixed(2)," MB)"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Max 10MB. PDF, JPEG, PNG, HEIC, WEBP accepted."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{children:"Expiry Date (Optional)"}),(0,b.jsx)(l.Input,{type:"date",value:w,onChange:a=>y(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{children:"Notes (Optional)"}),(0,b.jsx)(n.Textarea,{value:A,onChange:a=>B(a.target.value),placeholder:"Any additional info...",rows:2})]}),(0,b.jsxs)(C.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:J,children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",disabled:J||!q||!s||L&&!H||"custom"===s&&!u.trim(),children:J?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Upload,{className:"mr-2 h-4 w-4"}),"Upload"]})})]})]})]})})}function I(){let[a,d]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{C()},[]);let C=async()=>{n(!0);try{let a=await fetch("/api/investors/me/kyc-submissions");if(!a.ok)throw Error("Failed to load KYC submissions");let b=await a.json();d(b.submissions||[]),g(b.investor_members||[]),l(b.is_entity_investor||!1)}catch(a){console.error("Error loading KYC submissions:",a),j.toast.error("Failed to load KYC documents",{description:a.message})}finally{n(!1)}},D=async(a,b)=>{s(a);try{let c=await fetch(`/api/documents/${a}/download`);if(!c.ok)throw Error("Failed to download document");let d=await c.blob(),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=b,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(e),document.body.removeChild(f),j.toast.success("Download started")}catch(a){console.error("Download error:",a),j.toast.error("Download failed",{description:a.message})}finally{s(null)}},E=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return m?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin text-gray-400"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(o.CardTitle,{children:"KYC Documents"}),(0,b.jsx)(o.CardDescription,{children:"Upload your required KYC verification documents"})]}),(0,b.jsxs)(e.Button,{onClick:()=>q(!0),children:[(0,b.jsx)(h.Upload,{className:"mr-2 h-4 w-4"}),"Upload Document"]})]})}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[k?(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50/50",children:[(0,b.jsx)("h4",{className:"font-medium text-sm text-blue-900 mb-2",children:"Entity Documents"}),(0,b.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,b.jsx)("li",{children:"• Incorporation Certificate"}),(0,b.jsx)("li",{children:"• Memo & Articles"}),(0,b.jsx)("li",{children:"• Register of Directors"}),(0,b.jsx)("li",{children:"• Register of Members/Shareholders"}),(0,b.jsx)("li",{children:"• Register of UBOs"}),(0,b.jsx)("li",{children:"• Bank Confirmation Letter"})]})]}),(0,b.jsxs)("div",{className:"p-4 border rounded-lg bg-green-50/50",children:[(0,b.jsx)("h4",{className:"font-medium text-sm text-green-900 mb-2",children:"For Each Director/UBO"}),(0,b.jsxs)("ul",{className:"text-sm text-green-800 space-y-1",children:[(0,b.jsx)("li",{children:"• Passport / ID"}),(0,b.jsx)("li",{children:"• Proof of Address (less than 3 months)"})]})]})]}):(0,b.jsxs)("div",{className:"p-4 border rounded-lg bg-slate-50",children:[(0,b.jsx)("h4",{className:"font-medium text-sm text-slate-900 mb-2",children:"Required Documents"}),(0,b.jsxs)("ul",{className:"text-sm text-slate-700 space-y-1",children:[(0,b.jsx)("li",{children:"• Passport / ID"}),(0,b.jsx)("li",{children:"• Proof of Address (utility bill or bank statement, less than 3 months)"})]})]}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,b.jsx)(y.FileText,{className:"h-10 w-10 mx-auto text-gray-400 mb-3"}),(0,b.jsx)("p",{className:"text-gray-600 mb-2",children:"No documents uploaded yet"}),(0,b.jsxs)(e.Button,{onClick:()=>q(!0),variant:"outline",size:"sm",children:[(0,b.jsx)(h.Upload,{className:"mr-2 h-4 w-4"}),"Upload Document"]})]}):(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)(B.Table,{children:[(0,b.jsx)(B.TableHeader,{children:(0,b.jsxs)(B.TableRow,{children:[(0,b.jsx)(B.TableHead,{children:"Document Type"}),k&&(0,b.jsx)(B.TableHead,{children:"Member"}),(0,b.jsx)(B.TableHead,{children:"Status"}),(0,b.jsx)(B.TableHead,{children:"Uploaded"}),(0,b.jsx)(B.TableHead,{children:"Expiry"}),(0,b.jsx)(B.TableHead,{children:"File"}),(0,b.jsx)(B.TableHead,{children:"Actions"})]})}),(0,b.jsx)(B.TableBody,{children:a.map(a=>{var c;return(0,b.jsxs)(B.TableRow,{children:[(0,b.jsx)(B.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium text-gray-900",children:(0,F.getDocumentTypeLabel)(a.document_type,a.custom_label)}),a.version>1&&(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["Version ",a.version]})]})}),k&&(0,b.jsx)(B.TableCell,{children:a.investor_member?(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(z.User,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:a.investor_member.full_name})]}):(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}),(0,b.jsx)(B.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(a=>{switch(a){case"approved":return(0,b.jsxs)(A.Badge,{variant:"default",className:"bg-emerald-500/20 text-emerald-700 border-emerald-500/30",children:[(0,b.jsx)(t.CheckCircle,{className:"mr-1 h-3 w-3"}),"Approved"]});case"pending":return(0,b.jsxs)(A.Badge,{variant:"secondary",className:"bg-amber-500/20 text-amber-700 border-amber-500/30",children:[(0,b.jsx)(v.Clock,{className:"mr-1 h-3 w-3"}),"Pending Review"]});case"draft":return(0,b.jsxs)(A.Badge,{variant:"outline",className:"bg-slate-500/10 text-slate-600 border-slate-500/30",children:[(0,b.jsx)(v.Clock,{className:"mr-1 h-3 w-3"}),"Draft (Not Submitted)"]});case"rejected":return(0,b.jsxs)(A.Badge,{variant:"destructive",className:"bg-rose-500/20 text-rose-700 border-rose-500/30",children:[(0,b.jsx)(u.XCircle,{className:"mr-1 h-3 w-3"}),"Rejected"]});case"expired":return(0,b.jsxs)(A.Badge,{variant:"outline",className:"bg-gray-500/20 text-gray-700 border-gray-500/30",children:[(0,b.jsx)(x.AlertCircle,{className:"mr-1 h-3 w-3"}),"Expired"]});case"under_review":return(0,b.jsxs)(A.Badge,{variant:"secondary",className:"bg-blue-500/20 text-blue-700 border-blue-500/30",children:[(0,b.jsx)(v.Clock,{className:"mr-1 h-3 w-3"}),"Under Review"]});default:return(0,b.jsx)(A.Badge,{variant:"outline",children:a})}})(a.status),"rejected"===a.status&&a.rejection_reason&&(0,b.jsx)("p",{className:"text-xs text-rose-600 max-w-xs",children:a.rejection_reason})]})}),(0,b.jsx)(B.TableCell,{className:"text-gray-600",children:E(a.created_at)}),(0,b.jsx)(B.TableCell,{className:"text-gray-600",children:a.expiry_date?E(a.expiry_date):"—"}),(0,b.jsx)(B.TableCell,{children:a.document&&(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-sm text-gray-900 truncate max-w-[200px]",children:a.document.name}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:(c=a.document.file_size_bytes)<1024?c+" B":c<1048576?(c/1024).toFixed(1)+" KB":(c/1048576).toFixed(1)+" MB"})]})}),(0,b.jsx)(B.TableCell,{children:a.document&&(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>D(a.document.id,a.document.name),disabled:r===a.document.id,children:r===a.document.id?(0,b.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(w.Download,{className:"h-4 w-4"})})})]},a.id)})})]})})]})]}),(0,b.jsx)(H,{open:p,onOpenChange:q,onUploadSuccess:C,category:k?"entity":"individual",members:k?f:[],memberType:k?"investor":void 0})]})}var J=a.i(405708),K=a.i(405398),L=a.i(478870),M=a.i(806640),N=a.i(724070),O=a.i(529183),P=a.i(203002),Q=a.i(181608),R=a.i(399580),S=a.i(587143);function T({entityId:a,entityName:d}){let[f,g]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),t=(0,c.useCallback)(async()=>{n(!0);try{let b=await fetch(`/api/investors/me/counterparty-entities/${a}/kyc-submissions`);if(!b.ok)throw Error("Failed to fetch KYC submissions");let c=await b.json();g(c.submissions||[]),l(c.members||[])}catch(a){console.error("Error fetching entity KYC submissions:",a),j.toast.error("Failed to load KYC documents",{description:a.message})}finally{n(!1)}},[a]);(0,c.useEffect)(()=>{t()},[a,t]);let u=async(a,b)=>{s(a);try{let c=await fetch(`/api/documents/${a}/download`);if(!c.ok)throw Error("Failed to download document");let d=await c.blob(),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=b,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(e),document.body.removeChild(f),j.toast.success("Download started")}catch(a){console.error("Download error:",a),j.toast.error("Download failed",{description:a.message})}finally{s(null)}},C=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-foreground",children:[d," - KYC Documents"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload and manage KYC documents for this entity"})]}),(0,b.jsxs)(e.Button,{onClick:()=>q(!0),children:[(0,b.jsx)(h.Upload,{className:"mr-2 h-4 w-4"}),"Upload Document"]})]}),(0,b.jsxs)(G.Alert,{children:[(0,b.jsx)(S.Info,{className:"h-4 w-4"}),(0,b.jsx)(G.AlertDescription,{className:"text-sm",children:"Required: NDA/NDNC, Incorporation Certificate, Memo & Articles, Register of Members, Register of Directors, Bank Confirmation. For each member/director: ID/Passport and Utility Bill (less than 3 months old)."})]}),m?(0,b.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,b.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===f.length?(0,b.jsx)(o.Card,{className:"border-dashed border-border",children:(0,b.jsxs)(o.CardContent,{className:"flex flex-col items-center justify-center p-12",children:[(0,b.jsx)(y.FileText,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"No KYC documents uploaded yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload entity documents and ID/Utility Bill for each member/director"}),(0,b.jsxs)(e.Button,{onClick:()=>q(!0),children:[(0,b.jsx)(h.Upload,{className:"mr-2 h-4 w-4"}),"Upload First Document"]})]})}):(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardContent,{className:"p-0",children:(0,b.jsxs)(B.Table,{children:[(0,b.jsx)(B.TableHeader,{children:(0,b.jsxs)(B.TableRow,{children:[(0,b.jsx)(B.TableHead,{children:"Document Type"}),k.length>0&&(0,b.jsx)(B.TableHead,{children:"Member"}),(0,b.jsx)(B.TableHead,{children:"Status"}),(0,b.jsx)(B.TableHead,{children:"Uploaded"}),(0,b.jsx)(B.TableHead,{children:"Expiry"}),(0,b.jsx)(B.TableHead,{children:"File"}),(0,b.jsx)(B.TableHead,{children:"Actions"})]})}),(0,b.jsx)(B.TableBody,{children:f.map(a=>{var c;return(0,b.jsxs)(B.TableRow,{children:[(0,b.jsx)(B.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:(0,F.getDocumentTypeLabel)(a.document_type,a.custom_label)}),a.version>1&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Version ",a.version]})]})}),k.length>0&&(0,b.jsx)(B.TableCell,{children:a.counterparty_member?(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(z.User,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.counterparty_member.full_name})]}):(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"—"})}),(0,b.jsx)(B.TableCell,{children:(a=>{switch(a){case"approved":return(0,b.jsxs)(A.Badge,{variant:"default",className:"bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 border-emerald-500/30",children:[(0,b.jsx)(R.CheckCircle2,{className:"mr-1 h-3 w-3"}),"Approved"]});case"pending":return(0,b.jsxs)(A.Badge,{variant:"secondary",className:"bg-amber-500/20 text-amber-700 dark:text-amber-300 border-amber-500/30",children:[(0,b.jsx)(v.Clock,{className:"mr-1 h-3 w-3"}),"Pending Review"]});case"rejected":return(0,b.jsxs)(A.Badge,{variant:"destructive",className:"bg-rose-500/20 text-rose-700 dark:text-rose-300 border-rose-500/30",children:[(0,b.jsx)(x.AlertCircle,{className:"mr-1 h-3 w-3"}),"Rejected"]});case"expired":return(0,b.jsxs)(A.Badge,{variant:"outline",className:"bg-gray-500/20 text-gray-600 dark:text-gray-300 border-gray-500/30",children:[(0,b.jsx)(x.AlertCircle,{className:"mr-1 h-3 w-3"}),"Expired"]});default:return(0,b.jsx)(A.Badge,{variant:"outline",children:a})}})(a.status)}),(0,b.jsx)(B.TableCell,{className:"text-muted-foreground",children:C(a.created_at)}),(0,b.jsx)(B.TableCell,{className:"text-muted-foreground",children:a.expiry_date?C(a.expiry_date):"—"}),(0,b.jsx)(B.TableCell,{children:a.document&&(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:a.document.name}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:(c=a.document.file_size_bytes)<1024?c+" B":c<1048576?(c/1024).toFixed(1)+" KB":(c/1048576).toFixed(1)+" MB"})]})}),(0,b.jsx)(B.TableCell,{children:a.document&&(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>u(a.document.id,a.document.name),disabled:r===a.document.id,children:r===a.document.id?(0,b.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(w.Download,{className:"h-4 w-4"})})})]},a.id)})})]})})}),(0,b.jsx)(H,{open:p,onOpenChange:q,onUploadSuccess:t,entityId:a,category:"entity",members:k,memberType:"counterparty"})]})}var U=a.i(799373),V=a.i(47748);let W=[{value:"director",label:"Director"},{value:"shareholder",label:"Shareholder"},{value:"beneficial_owner",label:"Beneficial Owner"},{value:"trustee",label:"Trustee"},{value:"beneficiary",label:"Beneficiary"},{value:"managing_member",label:"Managing Member"},{value:"general_partner",label:"General Partner"},{value:"limited_partner",label:"Limited Partner"},{value:"authorized_signatory",label:"Authorized Signatory"},{value:"other",label:"Other"}],X=[{value:"passport",label:"Passport"},{value:"national_id",label:"National ID"},{value:"drivers_license",label:"Driver's License"},{value:"other",label:"Other"}];function Y({entityId:a,entityName:d}){let[f,h]=(0,c.useState)([]),[i,k]=(0,c.useState)(!0),[n,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[u,w]=(0,c.useState)(null),[x,y]=(0,c.useState)({full_name:"",role:"",role_title:"",email:"",phone:"",nationality:"",id_type:"",id_number:"",id_expiry_date:"",ownership_percentage:"",is_beneficial_owner:!1});(0,c.useEffect)(()=>{z()},[a]);let z=async()=>{try{let b=await fetch(`/api/investors/me/counterparty-entities/${a}/members`);if(!b.ok)throw Error("Failed to load members");let c=await b.json();h(c.members||[])}catch(a){console.error("Error loading members:",a),j.toast.error("Failed to load members")}finally{k(!1)}},E=()=>{y({full_name:"",role:"",role_title:"",email:"",phone:"",nationality:"",id_type:"",id_number:"",id_expiry_date:"",ownership_percentage:"",is_beneficial_owner:!1}),r(null)},F=a=>{a?(r(a),y({full_name:a.full_name||"",role:a.role||"",role_title:a.role_title||"",email:a.email||"",phone:a.phone||"",nationality:a.nationality||"",id_type:a.id_type||"",id_number:a.id_number||"",id_expiry_date:a.id_expiry_date||"",ownership_percentage:a.ownership_percentage?.toString()||"",is_beneficial_owner:a.is_beneficial_owner||!1})):E(),p(!0)},G=async()=>{if(!x.full_name||!x.role)return void j.toast.error("Please fill in all required fields");t(!0);try{let b={full_name:x.full_name,role:x.role,role_title:x.role_title||null,email:x.email||null,phone:x.phone||null,nationality:x.nationality||null,id_type:x.id_type||null,id_number:x.id_number||null,id_expiry_date:x.id_expiry_date||null,ownership_percentage:x.ownership_percentage?parseFloat(x.ownership_percentage):null,is_beneficial_owner:x.is_beneficial_owner},c=q?`/api/investors/me/counterparty-entities/${a}/members/${q.id}`:`/api/investors/me/counterparty-entities/${a}/members`,d=await fetch(c,{method:q?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!d.ok){let a=await d.json();throw Error(a.error||"Failed to save member")}j.toast.success(q?"Member updated":"Member added"),p(!1),E(),await z()}catch(a){console.error("Save error:",a),j.toast.error(a.message||"Failed to save member")}finally{t(!1)}},H=async b=>{if(confirm("Are you sure you want to remove this member?")){w(b);try{let c=await fetch(`/api/investors/me/counterparty-entities/${a}/members/${b}`,{method:"DELETE"});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to remove member")}j.toast.success("Member removed"),await z()}catch(a){console.error("Delete error:",a),j.toast.error(a.message||"Failed to remove member")}finally{w(null)}}};return i?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)("div",{className:"text-muted-foreground",children:"Loading members..."})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,b.jsx)(L.Users,{className:"h-5 w-5"}),"Entity Members"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Directors, trustees, partners, and beneficial owners"})]}),(0,b.jsxs)(e.Button,{onClick:()=>F(),size:"sm",children:[(0,b.jsx)(U.UserPlus,{className:"w-4 h-4 mr-2"}),"Add Member"]})]}),0===f.length?(0,b.jsx)(o.Card,{children:(0,b.jsxs)(o.CardContent,{className:"py-8 text-center",children:[(0,b.jsx)(L.Users,{className:"w-10 h-10 mx-auto text-muted-foreground mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm mb-3",children:"No members added yet"}),(0,b.jsxs)(e.Button,{onClick:()=>F(),variant:"outline",size:"sm",children:[(0,b.jsx)(U.UserPlus,{className:"w-4 h-4 mr-2"}),"Add First Member"]})]})}):(0,b.jsxs)(B.Table,{children:[(0,b.jsx)(B.TableHeader,{children:(0,b.jsxs)(B.TableRow,{children:[(0,b.jsx)(B.TableHead,{children:"Name"}),(0,b.jsx)(B.TableHead,{children:"Role"}),(0,b.jsx)(B.TableHead,{children:"Ownership"}),(0,b.jsx)(B.TableHead,{children:"KYC"}),(0,b.jsx)(B.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(B.TableBody,{children:f.map(a=>{var c;let d;return(0,b.jsxs)(B.TableRow,{children:[(0,b.jsxs)(B.TableCell,{className:"font-medium",children:[a.full_name,a.is_beneficial_owner&&(0,b.jsx)(A.Badge,{variant:"secondary",className:"ml-2 text-xs",children:"UBO"})]}),(0,b.jsx)(B.TableCell,{children:(c=a.role,d=W.find(a=>a.value===c),(0,b.jsx)(A.Badge,{variant:"outline",children:d?.label||c}))}),(0,b.jsx)(B.TableCell,{children:a.ownership_percentage?`${a.ownership_percentage}%`:"—"}),(0,b.jsx)(B.TableCell,{children:(a=>{switch(a){case"approved":return(0,b.jsxs)(A.Badge,{className:"bg-green-500",children:[(0,b.jsx)(V.ShieldCheck,{className:"w-3 h-3 mr-1"}),"Approved"]});case"pending":return(0,b.jsxs)(A.Badge,{className:"bg-yellow-500",children:[(0,b.jsx)(v.Clock,{className:"w-3 h-3 mr-1"}),"Pending"]});default:return(0,b.jsx)(A.Badge,{variant:"outline",children:"Not Submitted"})}})(a.kyc_status)}),(0,b.jsx)(B.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>F(a),children:(0,b.jsx)(K.Edit,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>H(a.id),disabled:u===a.id,children:(0,b.jsx)(g.Trash2,{className:"w-4 h-4"})})]})})]},a.id)})})]}),(0,b.jsx)(C.Dialog,{open:n,onOpenChange:p,children:(0,b.jsxs)(C.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)(C.DialogHeader,{children:[(0,b.jsx)(C.DialogTitle,{children:q?"Edit Member":"Add Member"}),(0,b.jsx)(C.DialogDescription,{children:q?"Update member details":`Add a member to ${d}`})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(m.Label,{htmlFor:"full_name",children:["Full Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(l.Input,{id:"full_name",value:x.full_name,onChange:a=>y({...x,full_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(m.Label,{htmlFor:"role",children:["Role ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)(D.Select,{value:x.role,onValueChange:a=>y({...x,role:a}),children:[(0,b.jsx)(D.SelectTrigger,{children:(0,b.jsx)(D.SelectValue,{placeholder:"Select role"})}),(0,b.jsx)(D.SelectContent,{children:W.map(a=>(0,b.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(l.Input,{id:"email",type:"email",value:x.email,onChange:a=>y({...x,email:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"phone",children:"Phone"}),(0,b.jsx)(l.Input,{id:"phone",value:x.phone,onChange:a=>y({...x,phone:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"ownership_percentage",children:"Ownership %"}),(0,b.jsx)(l.Input,{id:"ownership_percentage",type:"number",min:"0",max:"100",value:x.ownership_percentage,onChange:a=>y({...x,ownership_percentage:a.target.value})})]}),(0,b.jsx)("div",{className:"space-y-2 flex items-end",children:(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:x.is_beneficial_owner,onChange:a=>y({...x,is_beneficial_owner:a.target.checked}),className:"rounded"}),(0,b.jsx)("span",{className:"text-sm",children:"Beneficial Owner (UBO)"})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"id_type",children:"ID Type"}),(0,b.jsxs)(D.Select,{value:x.id_type,onValueChange:a=>y({...x,id_type:a}),children:[(0,b.jsx)(D.SelectTrigger,{children:(0,b.jsx)(D.SelectValue,{placeholder:"Select"})}),(0,b.jsx)(D.SelectContent,{children:X.map(a=>(0,b.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"id_number",children:"ID Number"}),(0,b.jsx)(l.Input,{id:"id_number",value:x.id_number,onChange:a=>y({...x,id_number:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"id_expiry_date",children:"ID Expiry"}),(0,b.jsx)(l.Input,{id:"id_expiry_date",type:"date",value:x.id_expiry_date,onChange:a=>y({...x,id_expiry_date:a.target.value})})]})]})]}),(0,b.jsxs)(C.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>p(!1),disabled:s,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:G,disabled:s,children:s?"Saving...":q?"Update":"Add Member"})]})]})})]})}var Z=a.i(496392),$=a.i(439467),_=a.i(231276);function aa({open:a,onClose:d,entity:e,onUpdate:f}){var g;let[h,i]=(0,c.useState)("details"),[j,k]=(0,c.useState)(!1);if(!e)return null;let l=a=>({trust:"Trust",llc:"LLC",partnership:"Partnership",family_office:"Family Office",law_firm:"Law Firm",investment_bank:"Investment Bank",fund:"Fund",corporation:"Corporation",other:"Other"})[a]||a;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(C.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsx)(C.DialogHeader,{children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(C.DialogTitle,{className:"text-2xl",children:e.legal_name}),(0,b.jsxs)(C.DialogDescription,{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(A.Badge,{variant:"outline",children:l(e.entity_type)}),(a=>{if(!a)return(0,b.jsx)(A.Badge,{variant:"outline",className:"bg-gray-500/20 text-gray-300 border-gray-500/30",children:"No KYC"});switch(a){case"approved":return(0,b.jsx)(A.Badge,{variant:"default",className:"bg-emerald-500/20 text-emerald-300 border-emerald-500/30",children:"Approved"});case"pending":return(0,b.jsx)(A.Badge,{variant:"secondary",className:"bg-amber-500/20 text-amber-300 border-amber-500/30",children:"Pending Review"});case"rejected":return(0,b.jsx)(A.Badge,{variant:"destructive",className:"bg-rose-500/20 text-rose-300 border-rose-500/30",children:"Rejected"});default:return(0,b.jsx)(A.Badge,{variant:"outline",children:a})}})(e.kyc_status)]})]})})}),(0,b.jsxs)(Q.Tabs,{value:h,onValueChange:i,className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsxs)(Q.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsx)(Q.TabsTrigger,{value:"details",children:"Entity Details"}),(0,b.jsx)(Q.TabsTrigger,{value:"members",children:"Members"}),(0,b.jsx)(Q.TabsTrigger,{value:"kyc",children:"KYC Documents"})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto mt-4",children:[(0,b.jsxs)(Q.TabsContent,{value:"details",className:"space-y-4 m-0",children:[(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(E.Building2,{className:"h-5 w-5"}),"Basic Information"]})}),(0,b.jsxs)(o.CardContent,{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Legal Name"}),(0,b.jsx)("p",{className:"font-medium",children:e.legal_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Entity Type"}),(0,b.jsx)("p",{className:"font-medium",children:l(e.entity_type)})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)(O.Hash,{className:"h-3 w-3"}),"Registration Number"]}),(0,b.jsx)("p",{className:"font-medium",children:e.registration_number||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)(Z.Shield,{className:"h-3 w-3"}),"Tax ID / EIN"]}),(0,b.jsx)("p",{className:"font-medium",children:e.tax_id||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)(M.MapPin,{className:"h-3 w-3"}),"Jurisdiction"]}),(0,b.jsx)("p",{className:"font-medium",children:e.jurisdiction||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)(N.Calendar,{className:"h-3 w-3"}),"Formation Date"]}),(0,b.jsx)("p",{className:"font-medium",children:(g=e.formation_date)?new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"—"})]})]})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(M.MapPin,{className:"h-5 w-5"}),"Registered Address"]})}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)("p",{className:"font-medium",children:(a=>{if(!a)return"—";let b=[a.street,a.city,a.state,a.postal_code,a.country].filter(Boolean);return b.length>0?b.join(", "):"—"})(e.registered_address)})})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(z.User,{className:"h-5 w-5"}),"Authorized Representative"]})}),(0,b.jsxs)(o.CardContent,{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Name"}),(0,b.jsx)("p",{className:"font-medium",children:e.representative_name||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Title"}),(0,b.jsx)("p",{className:"font-medium",children:e.representative_title||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)($.Mail,{className:"h-3 w-3"}),"Email"]}),(0,b.jsx)("p",{className:"font-medium",children:e.representative_email||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)(_.Phone,{className:"h-3 w-3"}),"Phone"]}),(0,b.jsx)("p",{className:"font-medium",children:e.representative_phone||"—"})]})]})]}),e.notes&&(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(y.FileText,{className:"h-5 w-5"}),"Notes"]})}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.notes})})]})]}),(0,b.jsx)(Q.TabsContent,{value:"members",className:"m-0",children:(0,b.jsx)(Y,{entityId:e.id,entityName:e.legal_name})}),(0,b.jsx)(Q.TabsContent,{value:"kyc",className:"m-0",children:(0,b.jsx)(T,{entityId:e.id,entityName:e.legal_name})})]})]})]})}),(0,b.jsx)(P.EntityFormDialog,{open:j,onClose:()=>k(!1),onSuccess:()=>{k(!1),f()},entity:e})]})}function ab(){let[a,d]=(0,c.useState)([]),[f,h]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{w()},[]);let w=async()=>{try{let a=await fetch("/api/investors/me/counterparty-entities");if(!a.ok)throw Error("Failed to load entities");let b=await a.json();d(b.entities||[])}catch(a){console.error("Error loading entities:",a),j.toast.error("Failed to load entities")}finally{h(!1)}},x=()=>{q(null),l(!0)},B=async a=>{if(confirm("Are you sure you want to delete this entity? This action cannot be undone.")){s(a);try{let b=await fetch(`/api/investors/me/counterparty-entities/${a}`,{method:"DELETE"});if(!b.ok){let a=await b.json();throw Error(a.error||"Delete failed")}j.toast.success("Entity deleted successfully"),await w()}catch(a){console.error("Delete error:",a),j.toast.error(a.message||"Failed to delete entity")}finally{s(null)}}},C=async()=>{l(!1),q(null),await w()},D=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—";return f?(0,b.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,b.jsx)(i.Loader2,{className:"w-6 h-6 animate-spin text-slate-400"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(o.CardTitle,{className:"text-xl",children:"Counterparty Entities"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage legal entities you invest through (trusts, LLCs, partnerships, etc.)"})]}),(0,b.jsxs)(e.Button,{onClick:x,className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,b.jsx)(J.Plus,{className:"w-4 h-4 mr-2"}),"Add Entity"]})]})})}),0===a.length?(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardContent,{className:"py-16",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(E.Building2,{className:"w-12 h-12 mx-auto text-slate-400 mb-4"}),(0,b.jsx)("p",{className:"text-slate-600 font-medium text-lg mb-2",children:"No entities added yet"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mb-6 max-w-md mx-auto",children:"Add a legal entity to invest through trusts, LLCs, or partnerships."}),(0,b.jsxs)(e.Button,{onClick:x,variant:"outline",size:"lg",children:[(0,b.jsx)(J.Plus,{className:"w-4 h-4 mr-2"}),"Add Your First Entity"]})]})})}):(0,b.jsx)("div",{className:"space-y-6",children:a.map(a=>{var c;return(0,b.jsxs)(o.Card,{className:"overflow-hidden",children:[(0,b.jsx)(o.CardHeader,{className:"bg-slate-50/80 border-b pb-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-slate-900 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(E.Building2,{className:"w-6 h-6 text-white"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:a.legal_name}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(A.Badge,{variant:"outline",className:"font-medium px-3 py-1",children:{trust:"Trust",llc:"LLC",partnership:"Partnership",family_office:"Family Office",law_firm:"Law Firm",investment_bank:"Investment Bank",fund:"Fund",corporation:"Corporation",other:"Other"}[c=a.entity_type]||c}),(a=>{switch(a){case"approved":return(0,b.jsxs)(A.Badge,{className:"bg-emerald-500/15 text-emerald-700 border-emerald-500/30 px-3 py-1",children:[(0,b.jsx)(t.CheckCircle,{className:"w-3.5 h-3.5 mr-1.5"}),"Verified"]});case"pending":return(0,b.jsxs)(A.Badge,{className:"bg-amber-500/15 text-amber-700 border-amber-500/30 px-3 py-1",children:[(0,b.jsx)(v.Clock,{className:"w-3.5 h-3.5 mr-1.5"}),"Pending Review"]});case"rejected":return(0,b.jsxs)(A.Badge,{className:"bg-rose-500/15 text-rose-700 border-rose-500/30 px-3 py-1",children:[(0,b.jsx)(u.XCircle,{className:"w-3.5 h-3.5 mr-1.5"}),"Rejected"]});case"expired":return(0,b.jsx)(A.Badge,{variant:"outline",className:"text-orange-600 border-orange-400 px-3 py-1",children:"Expired"});default:return(0,b.jsx)(A.Badge,{variant:"outline",className:"text-slate-500 border-slate-300 px-3 py-1",children:"Not Submitted"})}})(a.kyc_status)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.Button,{variant:"default",size:"sm",onClick:()=>{q(a),n(!0)},className:"h-9 bg-slate-900 hover:bg-slate-800",children:[(0,b.jsx)(L.Users,{className:"w-4 h-4 mr-2"}),"Members & KYC"]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>{q(a),l(!0)},className:"h-9",children:[(0,b.jsx)(K.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>B(a.id),disabled:r===a.id,className:"h-9 hover:bg-rose-50 hover:text-rose-600 hover:border-rose-300",children:r===a.id?(0,b.jsx)(i.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(g.Trash2,{className:"w-4 h-4"})})]})]})}),(0,b.jsxs)(o.CardContent,{className:"pt-6 pb-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-6",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,b.jsx)(M.MapPin,{className:"w-4 h-4"}),"Jurisdiction"]}),(0,b.jsx)("p",{className:"text-base text-slate-900 pl-6",children:a.jurisdiction||(0,b.jsx)("span",{className:"text-slate-400",children:"Not specified"})})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,b.jsx)(O.Hash,{className:"w-4 h-4"}),"Registration Number"]}),(0,b.jsx)("p",{className:"text-base text-slate-900 font-mono pl-6",children:a.registration_number||(0,b.jsx)("span",{className:"text-slate-400 font-sans",children:"Not specified"})})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,b.jsx)(y.FileText,{className:"w-4 h-4"}),"Tax ID"]}),(0,b.jsx)("p",{className:"text-base text-slate-900 font-mono pl-6",children:a.tax_id||(0,b.jsx)("span",{className:"text-slate-400 font-sans",children:"Not specified"})})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,b.jsx)(N.Calendar,{className:"w-4 h-4"}),"Formation Date"]}),(0,b.jsx)("p",{className:"text-base text-slate-900 pl-6",children:"—"!==D(a.formation_date)?D(a.formation_date):(0,b.jsx)("span",{className:"text-slate-400",children:"Not specified"})})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,b.jsx)(z.User,{className:"w-4 h-4"}),"Authorized Representative"]}),(0,b.jsx)("div",{className:"pl-6",children:a.representative_name?(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-base text-slate-900 font-medium",children:a.representative_name}),a.representative_title&&(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a.representative_title})]}):(0,b.jsx)("p",{className:"text-slate-400",children:"Not specified"})})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500",children:[(0,b.jsx)(M.MapPin,{className:"w-4 h-4"}),"Registered Address"]}),(0,b.jsx)("p",{className:"text-base text-slate-900 pl-6",children:(a=>{if(!a)return null;let b=[a.street,a.city,a.state,a.postal_code,a.country].filter(Boolean);return b.length>0?b.join(", "):null})(a.registered_address)||(0,b.jsx)("span",{className:"text-slate-400",children:"Not specified"})})]})]}),a.notes&&(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500 mb-2",children:[(0,b.jsx)(y.FileText,{className:"w-4 h-4"}),"Notes"]}),(0,b.jsx)("p",{className:"text-base text-slate-700 pl-6 whitespace-pre-wrap",children:a.notes})]})]})]},a.id)})}),(0,b.jsx)(P.EntityFormDialog,{open:k,onClose:()=>{l(!1),q(null)},onSuccess:C,entity:p}),(0,b.jsx)(aa,{open:m,onClose:()=>{n(!1),q(null)},entity:p,onUpdate:w})]})}var ac=a.i(211374),ad=a.i(292209),ae=a.i(838086),af=a.i(908513),ag=a.i(948153),ah=a.i(137708),ai=a.i(665635),aj=a.i(888987);function ak(a){if(!a)return{status:"not_set",daysLeft:null};let b=new Date(a),c=new Date,d=(0,ah.differenceInDays)(b,c);return+(0,ai.toDate)(b)<Date.now()?{status:"expired",daysLeft:d}:d<=30?{status:"expiring_soon",daysLeft:d}:{status:"valid",daysLeft:d}}function al({date:a,label:c}){let{status:d,daysLeft:e}=ak(a);return"not_set"===d?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(v.Clock,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Not set"})]}):(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["expired"===d&&(0,b.jsxs)(A.Badge,{variant:"destructive",className:"gap-1",children:[(0,b.jsx)(u.XCircle,{className:"h-3 w-3"}),"Expired"]}),"expiring_soon"===d&&(0,b.jsxs)(A.Badge,{variant:"outline",className:"gap-1 border-amber-500/50 text-amber-500 bg-amber-500/10",children:[(0,b.jsx)(ae.AlertTriangle,{className:"h-3 w-3"}),"Expires in ",e," days"]}),"valid"===d&&(0,b.jsxs)(A.Badge,{variant:"outline",className:"gap-1 border-green-500/50 text-green-500 bg-green-500/10",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-3 w-3"}),"Valid"]})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(N.Calendar,{className:"h-3 w-3"}),(0,ag.format)(new Date(a),"MMM dd, yyyy")]})]})}function am(){let[a,d]=(0,c.useState)(null),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null);(0,c.useEffect)(()=>{j()},[]);let j=async()=>{try{g(!0);let a=await fetch("/api/investors/me/compliance");if(!a.ok)throw Error("Failed to fetch compliance data");let b=await a.json();d(b)}catch(a){i(a instanceof Error?a.message:"Unknown error")}finally{g(!1)}};if(f)return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(ac.Skeleton,{className:"h-8 w-48"}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsx)(ac.Skeleton,{className:"h-48"}),(0,b.jsx)(ac.Skeleton,{className:"h-48"}),(0,b.jsx)(ac.Skeleton,{className:"h-48"}),(0,b.jsx)(ac.Skeleton,{className:"h-48"})]})]});if(h)return(0,b.jsx)(o.Card,{className:"border-destructive/50 bg-destructive/5",children:(0,b.jsx)(o.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(u.XCircle,{className:"h-5 w-5 text-destructive"}),(0,b.jsx)("p",{className:"text-sm text-destructive",children:h}),(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",onClick:j,children:[(0,b.jsx)(af.RefreshCw,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})});if(!a)return null;let k=ak(a.kyc_expiry_date),l=ak(a.accreditation_expiry),m=a.is_sanctioned||"expired"===k.status||"expired"===l.status;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Compliance Status"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Your AML, PEP screening, and accreditation status."})]}),m&&(0,b.jsx)(o.Card,{className:"border-destructive/50 bg-destructive/5",children:(0,b.jsx)(o.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(ad.ShieldAlert,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-destructive",children:"Compliance Action Required"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"One or more compliance items need attention. Please contact your relationship manager."})]})]})})}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(V.ShieldCheck,{className:"h-5 w-5 text-primary"}),"AML Status"]}),(0,b.jsx)(o.CardDescription,{children:"Anti-Money Laundering risk assessment"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Risk Rating"}),(0,b.jsx)(A.Badge,{variant:"outline",className:(0,aj.cn)("capitalize",function(a){switch(a?.toLowerCase()){case"low":return"bg-green-500/10 text-green-500 border-green-500/20";case"medium":return"bg-amber-500/10 text-amber-500 border-amber-500/20";case"high":return"bg-red-500/10 text-red-500 border-red-500/20";default:return"bg-muted text-muted-foreground"}}(a.aml_risk_rating)),children:a.aml_risk_rating||"Not Assessed"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Last Reviewed"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.aml_last_reviewed_at?(0,ag.format)(new Date(a.aml_last_reviewed_at),"MMM dd, yyyy"):"Never"})]})]})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(ae.AlertTriangle,{className:"h-5 w-5 text-amber-500"}),"PEP & Sanctions"]}),(0,b.jsx)(o.CardDescription,{children:"Politically Exposed Person and sanctions screening"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"PEP Status"}),a.is_pep?(0,b.jsxs)(A.Badge,{variant:"outline",className:"border-amber-500/50 text-amber-500 bg-amber-500/10",children:[(0,b.jsx)(ae.AlertTriangle,{className:"h-3 w-3 mr-1"}),"PEP Identified"]}):(0,b.jsxs)(A.Badge,{variant:"outline",className:"border-green-500/50 text-green-500 bg-green-500/10",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Clear"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Sanctions Status"}),a.is_sanctioned?(0,b.jsxs)(A.Badge,{variant:"destructive",children:[(0,b.jsx)(u.XCircle,{className:"h-3 w-3 mr-1"}),"Sanctions Match"]}):(0,b.jsxs)(A.Badge,{variant:"outline",className:"border-green-500/50 text-green-500 bg-green-500/10",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Clear"]})]})]})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(y.FileText,{className:"h-5 w-5 text-primary"}),"KYC Verification"]}),(0,b.jsx)(o.CardDescription,{children:"Know Your Customer verification status"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Status"}),(0,b.jsx)(A.Badge,{variant:"outline",className:(0,aj.cn)("approved"===a.kyc_status||"verified"===a.kyc_status?"border-green-500/50 text-green-500 bg-green-500/10":"pending"===a.kyc_status||"submitted"===a.kyc_status?"border-amber-500/50 text-amber-500 bg-amber-500/10":"border-muted text-muted-foreground"),children:a.kyc_status?.replace("_"," ")||"Not Started"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm font-medium block mb-2",children:"Expiry"}),(0,b.jsx)(al,{date:a.kyc_expiry_date,label:"KYC"})]}),a.kyc_completed_at&&(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Completed"}),(0,b.jsx)("span",{className:"text-muted-foreground",children:(0,ag.format)(new Date(a.kyc_completed_at),"MMM dd, yyyy")})]})]})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-5 w-5 text-primary"}),"Accreditation"]}),(0,b.jsx)(o.CardDescription,{children:"Investor accreditation and qualification status"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Professional Investor"}),a.is_professional_investor?(0,b.jsxs)(A.Badge,{variant:"outline",className:"border-green-500/50 text-green-500 bg-green-500/10",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Yes"]}):(0,b.jsx)(A.Badge,{variant:"outline",className:"text-muted-foreground",children:"No"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Qualified Purchaser"}),a.is_qualified_purchaser?(0,b.jsxs)(A.Badge,{variant:"outline",className:"border-green-500/50 text-green-500 bg-green-500/10",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Yes"]}):(0,b.jsx)(A.Badge,{variant:"outline",className:"text-muted-foreground",children:"No"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm font-medium block mb-2",children:"Accreditation Expiry"}),(0,b.jsx)(al,{date:a.accreditation_expiry,label:"Accreditation"})]})]})]})]}),(0,b.jsx)(o.Card,{className:"bg-muted/50",children:(0,b.jsx)(o.CardContent,{className:"pt-6",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Compliance status is managed by VERSO Holdings. If you believe any information is incorrect or needs updating, please contact your relationship manager or email"," ",(0,b.jsx)("a",{href:"mailto:compliance@versoholdings.com",className:"text-primary hover:underline",children:"compliance@versoholdings.com"})]})})})]})}var an=a.i(674875),ao=a.i(38373);let ap=(0,c.createContext)(null);function aq({children:a,onComplete:d,initialData:e,submissionId:f}){let[g,h]=(0,c.useState)(()=>({currentStep:e?.lastCompletedStep?Math.min(e.lastCompletedStep+1,10):1,formData:e||{},completedSteps:new Set(e?.lastCompletedStep?Array.from({length:e.lastCompletedStep},(a,b)=>b+1):[]),isLoading:!1,isSaving:!1,lastSavedAt:null,submissionId:f||null,errors:{}})),i=(0,c.useRef)(null),k=(0,c.useRef)(!1),l=(0,c.useRef)(!1),m=(0,c.useRef)(!1),n=(0,c.useRef)(void 0),o=(0,ao.getVisibleSteps)(g.formData),p=o.length,q=o.indexOf(g.currentStep),r=-1===q?0:q,s=-1===q?o[0]:g.currentStep;(0,c.useEffect)(()=>{if(-1===q&&o.length>0){let a=o.find(a=>a>=g.currentStep)||o[o.length-1];h(b=>({...b,currentStep:a}))}},[q,o,g.currentStep]);let t=Math.max(0,Math.round((r+1)/p*100)),u=ao.STEP_CONFIG[s-1],v=0===r,w=r===p-1;(0,c.useEffect)(()=>(k.current&&n.current&&(i.current=setTimeout(()=>{n.current?.()},3e4)),()=>{i.current&&clearTimeout(i.current)}),[g.formData]);let x=(0,c.useCallback)(a=>g.formData[a],[g.formData]),y=(0,c.useCallback)((a,b)=>{k.current=!0,h(c=>({...c,formData:{...c.formData,[a]:b},errors:{...c.errors,[parseInt(a.replace("step",""))]:[]}}))},[]),z=(0,c.useCallback)(async()=>{let a=`step${g.currentStep}`,b=g.formData[a],c=(0,ao.getStepSchema)(g.currentStep);if(!c)return{valid:!0,errors:[]};try{return await c.parseAsync(b||(0,ao.getStepDefaults)(g.currentStep)),h(a=>({...a,errors:{...a.errors,[g.currentStep]:[]}})),{valid:!0,errors:[]}}catch(b){let a=b.issues?.map(a=>a.message)||["Validation failed"];return h(b=>({...b,errors:{...b.errors,[g.currentStep]:a}})),{valid:!1,errors:a}}},[g.currentStep,g.formData]),A=(0,c.useCallback)(async()=>{if(!l.current&&!m.current){l.current=!0,h(a=>({...a,isSaving:!0}));try{let a,b={document_type:"questionnaire",custom_label:"KYC Compliance Questionnaire",metadata:{...g.formData,lastCompletedStep:Math.max(...Array.from(g.completedSteps),0),wizardVersion:"2.0"},status:"draft"};if(!(a=g.submissionId?await fetch(`/api/investors/me/kyc-submissions/${g.submissionId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}):await fetch("/api/investors/me/kyc-submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw Error("Failed to save progress");let c=await a.json();h(a=>({...a,isSaving:!1,lastSavedAt:new Date,submissionId:c.submission?.id||a.submissionId})),k.current=!1}catch(a){console.error("Failed to save progress:",a),h(a=>({...a,isSaving:!1})),j.toast.error("Failed to save progress. Your changes may not be saved.")}finally{l.current=!1}}},[g.formData,g.completedSteps,g.submissionId]);(0,c.useEffect)(()=>{n.current=A},[A]);let B=(0,c.useCallback)(a=>{o.includes(a)?h(b=>({...b,currentStep:a})):j.toast.error("This step is not available")},[o]),C=(0,c.useCallback)(async()=>{let{valid:a,errors:b}=await z();if(!a){let a=b.slice(0,3).join(", ")+(b.length>3?` (+${b.length-3} more)`:"");return j.toast.error("Please complete all required fields",{description:a}),!1}return(0,ao.getVisibleSteps)(g.formData).indexOf(g.currentStep),h(a=>{let b=new Set(a.completedSteps);b.add(a.currentStep);let c=(0,ao.getVisibleSteps)(a.formData),d=c.indexOf(a.currentStep)+1,e=d<c.length?c[d]:a.currentStep;return{...a,completedSteps:b,currentStep:e}}),await A(),!0},[z,A,g.formData,g.currentStep]),D=(0,c.useCallback)(()=>{r>0&&h(a=>({...a,currentStep:o[r-1]}))},[r,o]),E=(0,c.useCallback)(async()=>{i.current&&(clearTimeout(i.current),i.current=null);let a=(0,ao.getVisibleSteps)(g.formData);for(let b=0;b<a.length;b++){let c=a[b],d=b+1,e=`step${c}`,f=g.formData[e],h=(0,ao.getStepSchema)(c);if(h)try{await h.parseAsync(f||(0,ao.getStepDefaults)(c))}catch(e){let a=e.issues?.map(a=>a.message)||[],b=a.slice(0,3).join(", ")+(a.length>3?` (+${a.length-3} more)`:"");return j.toast.error(`Please complete Step ${d}: ${ao.STEP_CONFIG[c-1].title}`,{description:b||"Please fill in all required fields"}),B(c),!1}}h(a=>({...a,isSaving:!0}));try{let b={};for(let c of a){let a=`step${c}`;g.formData[a]&&(b[a]=g.formData[a])}let c={document_type:"questionnaire",custom_label:"KYC Compliance Questionnaire",metadata:{...b,lastCompletedStep:10,wizardVersion:"2.0",submittedAt:new Date().toISOString()},status:"pending"};if(!(g.submissionId?await fetch(`/api/investors/me/kyc-submissions/${g.submissionId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}):await fetch("/api/investors/me/kyc-submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw Error("Failed to submit questionnaire");return m.current=!0,h(a=>({...a,isSaving:!1,lastSavedAt:new Date})),j.toast.success("Questionnaire submitted successfully!"),d?.(),!0}catch(a){return console.error("Failed to submit:",a),h(a=>({...a,isSaving:!1})),j.toast.error("Failed to submit questionnaire"),!1}},[g.formData,g.submissionId,B,d]),F={currentStep:g.currentStep,formData:g.formData,isLoading:g.isLoading,isSaving:g.isSaving,lastSavedAt:g.lastSavedAt,state:g,visibleSteps:o,totalVisibleSteps:p,currentStepIndex:r,progress:t,currentStepConfig:u,isFirstStep:v,isLastStep:w,canGoNext:!w,canGoBack:!v,goToStep:B,nextStep:C,previousStep:D,updateStepData:y,validateCurrentStep:z,saveProgress:A,submitQuestionnaire:E,getStepData:x};return(0,b.jsx)(ap.Provider,{value:F,children:a})}function ar(){let a=(0,c.useContext)(ap);if(!a)throw Error("useWizard must be used within a WizardProvider");return a}function as(){let{state:a,visibleSteps:c,currentStepIndex:d,progress:e,goToStep:f}=ar();return(0,b.jsxs)("div",{className:"w-full space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground mb-2",children:[(0,b.jsxs)("span",{className:"font-medium",children:["Step ",d+1," of ",c.length]}),(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[a.isSaving&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"h-3 w-3 animate-spin"}),(0,b.jsx)("span",{children:"Saving..."})]}),!a.isSaving&&a.lastSavedAt&&(0,b.jsxs)("span",{className:"text-emerald-500 flex items-center gap-1",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-3 w-3"}),"Saved"]}),(0,b.jsxs)("span",{children:[e,"% complete"]})]})]}),(0,b.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full transition-all duration-500 ease-out",style:{width:`${e}%`}})})]}),(0,b.jsx)("div",{className:"flex justify-between gap-1 pt-2",children:c.map((c,e)=>{let g=ao.STEP_CONFIG[c-1],h=a.completedSteps.has(c),i=c===a.currentStep,j=h||e<=d+1;return(0,b.jsxs)("button",{onClick:()=>j&&f(c),disabled:!j,className:(0,aj.cn)("group flex flex-col items-center flex-1 transition-all duration-200",j?"cursor-pointer":"cursor-not-allowed opacity-50"),title:g.title,children:[(0,b.jsx)("div",{className:(0,aj.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300",h&&"bg-emerald-500 text-white",i&&!h&&"bg-emerald-100 border-2 border-emerald-500 text-emerald-600",!h&&!i&&"bg-gray-100 text-gray-500 border border-gray-200",j&&!i&&"group-hover:scale-110"),children:h?(0,b.jsx)(R.CheckCircle2,{className:"h-4 w-4"}):(0,b.jsx)("span",{className:"text-xs font-medium",children:e+1})}),(0,b.jsx)("span",{className:(0,aj.cn)("hidden md:block text-[10px] mt-1 text-center max-w-[60px] truncate transition-colors",i?"text-emerald-600 font-medium":"text-gray-500"),children:g.title})]},c)})})]})}var at=a.i(577955),au=a.i(672606),av=a.i(873785);function aw({onSubmit:a,isSubmitting:c}={}){let{isSaving:d,isFirstStep:f,isLastStep:g,canGoBack:h,nextStep:j,previousStep:k,saveProgress:l,submitQuestionnaire:m}=ar(),n=c??d,o=async()=>{await j()},q=async()=>{a?await a():await m()};return(0,b.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-zinc-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(e.Button,{type:"button",variant:"outline",onClick:k,disabled:!h||n,className:"gap-2 border-gray-300 dark:border-zinc-600 hover:bg-gray-50 dark:hover:bg-zinc-800",children:[(0,b.jsx)(at.ChevronLeft,{className:"h-4 w-4"}),"Back"]}),(0,b.jsxs)(e.Button,{type:"button",variant:"ghost",onClick:()=>l(),disabled:n,className:"gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800",children:[d?(0,b.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(p.Save,{className:"h-4 w-4"}),"Save Progress"]})]}),(0,b.jsx)("div",{children:g?(0,b.jsx)(e.Button,{type:"button",onClick:q,disabled:n,className:"gap-2 bg-emerald-600 hover:bg-emerald-700",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin"}),"Submitting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(av.Send,{className:"h-4 w-4"}),"Submit Questionnaire"]})}):(0,b.jsx)(e.Button,{type:"button",onClick:o,disabled:n,className:"gap-2 bg-emerald-600 hover:bg-emerald-700",children:n?(0,b.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:["Continue",(0,b.jsx)(au.ChevronRight,{className:"h-4 w-4"})]})})})]})}var ax=a.i(169091),ay=a.i(601527),az=a.i(652212);function aA(){let{getStepData:a,updateStepData:d}=ar(),e=a("step1"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step1Schema),defaultValues:e||(0,ao.getStepDefaults)(1)});return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step1",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Tell us about yourself"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"We need some basic information to get started"})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(az.FormField,{control:f.control,name:"fullName",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Full Legal Name"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"John Smith",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"dateOfBirth",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Date of Birth"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{type:"date",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(az.FormField,{control:f.control,name:"nationality",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Nationality"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"e.g. British",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"countryOfResidence",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Country of Residence"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"e.g. United Kingdom",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]}),(0,b.jsx)(az.FormField,{control:f.control,name:"residentialAddress",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Residential Address"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"Street address",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(az.FormField,{control:f.control,name:"city",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"City"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"London",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"postalCode",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Postal Code"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"SW1A 1AA",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(az.FormField,{control:f.control,name:"email",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Email Address"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{type:"email",placeholder:"john@example.com",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"phone",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Phone Number"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{type:"tel",placeholder:"+44 20 1234 5678",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(az.FormField,{control:f.control,name:"taxResidencyCountry",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Tax Residency Country"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"e.g. United Kingdom",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"taxIdNumber",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Tax ID Number (Optional)"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"National Insurance / SSN / TIN",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]})]})})]})}var aB=a.i(883236),aC=a.i(871057),aD=a.i(118234),aE=a.i(203422);let aF={individual:(0,b.jsx)(z.User,{className:"h-5 w-5"}),joint:(0,b.jsx)(L.Users,{className:"h-5 w-5"}),trust:(0,b.jsx)(aE.Landmark,{className:"h-5 w-5"}),corporation:(0,b.jsx)(E.Building2,{className:"h-5 w-5"}),partnership:(0,b.jsx)(aC.Briefcase,{className:"h-5 w-5"}),other:(0,b.jsx)(aD.HelpCircle,{className:"h-5 w-5"})};function aG(){let{getStepData:a,updateStepData:d}=ar(),e=a("step2"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step2Schema),defaultValues:e||(0,ao.getStepDefaults)(2)}),g=f.watch("investmentType");return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step2",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"How will you be investing?"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Select the type of investment account"})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(az.FormField,{control:f.control,name:"investmentType",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aB.RadioGroup,{onValueChange:a.onChange,value:a.value,className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:ao.investmentTypeOptions.map(c=>(0,b.jsxs)("label",{className:(0,aj.cn)("flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all",a.value===c.value?"border-emerald-500 bg-emerald-50 dark:bg-emerald-950":"border-border hover:border-muted-foreground/50 bg-card"),children:[(0,b.jsx)(aB.RadioGroupItem,{value:c.value,className:"sr-only"}),(0,b.jsx)("div",{className:(0,aj.cn)("p-2 rounded-lg",a.value===c.value?"bg-emerald-500 text-white":"bg-muted text-muted-foreground"),children:aF[c.value]}),(0,b.jsx)("span",{className:"font-medium",children:c.label})]},c.value))})}),(0,b.jsx)(az.FormMessage,{})]})}),"other"===g&&(0,b.jsx)(az.FormField,{control:f.control,name:"investmentTypeOther",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Please specify"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"Describe your investment type",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]})})]})}var aH=a.i(266828);function aI(){let{getStepData:a,updateStepData:d}=ar(),e=a("step3"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step3Schema),defaultValues:e||(0,ao.getStepDefaults)(3)}),g=f.watch("isWellInformed");return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step3",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Investor Status"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Are you a well-informed or professional investor?"})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(az.FormField,{control:f.control,name:"isWellInformed",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Do you qualify as a well-informed investor?"}),(0,b.jsx)(az.FormDescription,{children:"A well-informed investor typically has significant investment experience, a net worth exceeding €1,250,000, or is advised by a regulated professional."}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aB.RadioGroup,{onValueChange:a.onChange,value:a.value,className:"grid gap-3 md:grid-cols-3 mt-4",children:[{value:"yes",label:"Yes",icon:R.CheckCircle2,color:"emerald"},{value:"no",label:"No",icon:u.XCircle,color:"red"},{value:"unsure",label:"I'm not sure",icon:aD.HelpCircle,color:"amber"}].map(c=>{let d=c.icon,e=a.value===c.value;return(0,b.jsxs)("label",{className:(0,aj.cn)("flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all",e?`border-${c.color}-500 bg-${c.color}-500/10`:"border-border hover:border-muted-foreground/50",e&&"yes"===c.value&&"border-emerald-500 bg-emerald-500/10",e&&"no"===c.value&&"border-red-500 bg-red-500/10",e&&"unsure"===c.value&&"border-amber-500 bg-amber-500/10"),children:[(0,b.jsx)(aB.RadioGroupItem,{value:c.value,className:"sr-only"}),(0,b.jsx)(d,{className:(0,aj.cn)("h-5 w-5",e&&"yes"===c.value&&"text-emerald-500",e&&"no"===c.value&&"text-red-500",e&&"unsure"===c.value&&"text-amber-500",!e&&"text-slate-500")}),(0,b.jsx)("span",{className:"font-medium",children:c.label})]},c.value)})})}),(0,b.jsx)(az.FormMessage,{})]})}),("yes"===g||"unsure"===g)&&(0,b.jsx)(az.FormField,{control:f.control,name:"wellInformedBasis",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"On what basis? (Select all that apply)"}),(0,b.jsx)("div",{className:"grid gap-3 mt-3",children:ao.wellInformedBasisOptions.map(c=>(0,b.jsxs)("label",{className:(0,aj.cn)("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all",a.value?.includes(c.value)?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,b.jsx)(aH.Checkbox,{checked:a.value?.includes(c.value),onCheckedChange:b=>{let d=a.value||[];b?a.onChange([...d,c.value]):a.onChange(d.filter(a=>a!==c.value))}}),(0,b.jsx)("span",{children:c.label})]},c.value))}),(0,b.jsx)(az.FormMessage,{})]})}),"yes"===g&&(0,b.jsx)(az.FormField,{control:f.control,name:"wellInformedEvidence",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Additional details (Optional)"}),(0,b.jsx)(az.FormDescription,{children:"Provide any additional information supporting your investor status"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(n.Textarea,{placeholder:"e.g., Years of experience, relevant certifications, regulated advisor details...",className:"min-h-[100px]",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]})})]})}var aJ=a.i(877028),aK=a.i(776404);function aL({control:a,name:c,label:d,description:e,detailsName:f,detailsLabel:g,showDetails:h}){return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(az.FormField,{control:a,name:c,render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(az.FormLabel,{className:"text-base",children:d}),e&&(0,b.jsx)(az.FormDescription,{className:"mt-1",children:e})]}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aB.RadioGroup,{onValueChange:a.onChange,value:a.value,className:"flex gap-4",children:["yes","no"].map(c=>(0,b.jsxs)("label",{className:(0,aj.cn)("px-4 py-2 rounded-lg border cursor-pointer transition-all capitalize",a.value===c?"yes"===c?"border-amber-500 bg-amber-50 dark:bg-amber-950 text-amber-600 dark:text-amber-400":"border-emerald-500 bg-emerald-50 dark:bg-emerald-950 text-emerald-600 dark:text-emerald-400":"border-border hover:border-muted-foreground/50 bg-card"),children:[(0,b.jsx)(aB.RadioGroupItem,{value:c,className:"sr-only"}),c]},c))})})]}),(0,b.jsx)(az.FormMessage,{})]})}),h&&f&&(0,b.jsx)(az.FormField,{control:a,name:f,render:({field:a})=>(0,b.jsxs)(az.FormItem,{className:"pl-4 border-l-2 border-border",children:[(0,b.jsx)(az.FormLabel,{children:g||"Please provide details"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(n.Textarea,{placeholder:"Provide relevant details...",className:"min-h-[80px]",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]})}function aM(){let{getStepData:a,updateStepData:d}=ar(),e=a("step4"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step4Schema),defaultValues:e||(0,ao.getStepDefaults)(4)}),g=f.watch();return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step4",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Compliance Declarations"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Required regulatory questions"})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(ae.AlertTriangle,{className:"h-5 w-5 text-amber-500"}),"Political Exposure"]}),(0,b.jsx)(aL,{control:f.control,name:"isPEP",label:"Are you a Politically Exposed Person (PEP)?",description:"A PEP is someone entrusted with a prominent public function",detailsName:"pepDetails",detailsLabel:"Please provide details about your role",showDetails:"yes"===g.isPEP}),(0,b.jsx)(aL,{control:f.control,name:"isRelatedToPEP",label:"Are you related to or closely associated with a PEP?",detailsName:"relatedPEPDetails",detailsLabel:"Please describe the relationship",showDetails:"yes"===g.isRelatedToPEP})]}),(0,b.jsx)(aJ.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Legal & Regulatory Status"}),(0,b.jsx)(aL,{control:f.control,name:"isSanctioned",label:"Are you subject to any sanctions or restrictions?",detailsName:"sanctionedDetails",showDetails:"yes"===g.isSanctioned}),(0,b.jsx)(aL,{control:f.control,name:"hasCriminalRecord",label:"Do you have any criminal convictions related to financial matters?",detailsName:"criminalDetails",showDetails:"yes"===g.hasCriminalRecord}),(0,b.jsx)(aL,{control:f.control,name:"isUnderInvestigation",label:"Are you currently under any regulatory investigation?",detailsName:"investigationDetails",showDetails:"yes"===g.isUnderInvestigation}),(0,b.jsx)(aL,{control:f.control,name:"hasBankruptcy",label:"Have you been declared bankrupt or insolvent?",detailsName:"bankruptcyDetails",showDetails:"yes"===g.hasBankruptcy})]}),(0,b.jsx)(aJ.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(aK.Flag,{className:"h-5 w-5"}),"US Person Status"]}),(0,b.jsx)(G.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:(0,b.jsx)(G.AlertDescription,{children:"Your answer here determines if additional US-specific compliance steps are required."})}),(0,b.jsx)(aL,{control:f.control,name:"isUSPerson",label:"Are you a US Person for tax purposes?",description:"Includes US citizens, green card holders, and those with substantial US presence"}),"yes"===g.isUSPerson&&(0,b.jsx)(G.Alert,{className:"bg-amber-500/10 border-amber-500/30",children:(0,b.jsx)(G.AlertDescription,{children:"Additional US compliance steps will be shown next."})})]}),(0,b.jsx)(aJ.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Source of Funds"}),(0,b.jsx)(az.FormField,{control:f.control,name:"sourceOfFunds",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"What is the source of funds for this investment?"}),(0,b.jsx)(az.FormDescription,{children:"Describe the origin of funds (e.g., salary, business income, inheritance)"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(n.Textarea,{placeholder:"e.g., Savings from employment income over the past 10 years...",className:"min-h-[100px]",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"sourceOfWealth",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"What is your overall source of wealth?"}),(0,b.jsx)(az.FormDescription,{children:"Describe how you accumulated your wealth"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(n.Textarea,{placeholder:"e.g., Built and sold a technology company, professional career...",className:"min-h-[100px]",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]})]})})]})}function aN({control:a,name:c,label:d}){return(0,b.jsx)(az.FormField,{control:a,name:c,render:({field:a})=>(0,b.jsxs)(az.FormItem,{className:"flex items-center justify-between gap-4 p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors",children:[(0,b.jsx)(az.FormLabel,{className:"flex-1 cursor-pointer font-normal",children:d}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aB.RadioGroup,{onValueChange:a.onChange,value:a.value,className:"flex gap-2",children:["yes","no"].map(c=>(0,b.jsxs)("label",{className:(0,aj.cn)("px-3 py-1.5 rounded text-sm font-medium cursor-pointer transition-all capitalize",a.value===c?"yes"===c?"bg-amber-500 text-white":"bg-emerald-500 text-white":"bg-muted text-muted-foreground hover:bg-muted/80"),children:[(0,b.jsx)(aB.RadioGroupItem,{value:c,className:"sr-only"}),c]},c))})}),(0,b.jsx)(az.FormMessage,{})]})})}function aO(){let{getStepData:a,updateStepData:d}=ar(),e=a("step5"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step5Schema),defaultValues:e||(0,ao.getStepDefaults)(5)});return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step5",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,b.jsx)(aK.Flag,{className:"h-6 w-6"}),"US Person Definition"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Detailed US tax residency questions"})]}),(0,b.jsxs)(G.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:[(0,b.jsx)(S.Info,{className:"h-4 w-4"}),(0,b.jsx)(G.AlertTitle,{children:"Why we ask these questions"}),(0,b.jsx)(G.AlertDescription,{children:"Under Regulation S and FATCA, we need to determine your US Person status for tax and regulatory compliance purposes."})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(aN,{control:f.control,name:"isUSCitizen",label:"Are you a US citizen?"}),(0,b.jsx)(aN,{control:f.control,name:"isUSResident",label:"Are you a US resident alien (permanent resident)?"}),(0,b.jsx)(aN,{control:f.control,name:"hasUSGreenCard",label:"Do you hold a US Green Card?"}),(0,b.jsx)(aN,{control:f.control,name:"hasSubstantialUSPresence",label:"Have you spent 183+ days in the US in the past 3 years?"}),(0,b.jsx)(aN,{control:f.control,name:"hasUSMailingAddress",label:"Do you have a US mailing address?"}),(0,b.jsx)(aN,{control:f.control,name:"hasUSPhoneNumber",label:"Do you have a US phone number?"}),(0,b.jsx)(aN,{control:f.control,name:"hasUSBankAccount",label:"Do you have a US bank account?"}),(0,b.jsx)(aN,{control:f.control,name:"hasUSPowerOfAttorney",label:"Have you granted power of attorney to someone in the US?"}),(0,b.jsx)(az.FormField,{control:f.control,name:"usConnectionDetails",render:({field:a})=>(0,b.jsxs)(az.FormItem,{className:"pt-4",children:[(0,b.jsx)(az.FormLabel,{children:"Additional US Connection Details (Optional)"}),(0,b.jsx)(az.FormDescription,{children:"Provide any additional context about your US connections"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(n.Textarea,{placeholder:"Any other relevant information about your US connections...",className:"min-h-[80px]",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]})})]})}var aP=a.i(155508);let aQ=[{value:"income",label:"Annual income over $200K (or $300K joint)",icon:aP.DollarSign},{value:"net_worth",label:"Net worth over $1M (excluding primary residence)",icon:E.Building2},{value:"professional",label:"Licensed professional (Series 7, 65, or 82)",icon:aC.Briefcase},{value:"entity",label:"Entity with $5M+ in assets",icon:E.Building2},{value:"other",label:"Other qualifying criteria",icon:aD.HelpCircle}];function aR({control:a,name:c,label:d,description:e}){return(0,b.jsx)(az.FormField,{control:a,name:c,render:({field:a})=>(0,b.jsxs)(az.FormItem,{className:"p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(az.FormLabel,{className:"text-base font-medium",children:d}),e&&(0,b.jsx)(az.FormDescription,{className:"mt-1",children:e})]}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aB.RadioGroup,{onValueChange:a.onChange,value:a.value,className:"flex gap-2",children:["yes","no"].map(c=>(0,b.jsxs)("label",{className:(0,aj.cn)("px-4 py-2 rounded-lg text-sm font-medium cursor-pointer transition-all capitalize",a.value===c?"yes"===c?"bg-emerald-500 text-white":"bg-red-500 text-white":"bg-muted text-muted-foreground hover:bg-muted/80"),children:[(0,b.jsx)(aB.RadioGroupItem,{value:c,className:"sr-only"}),c]},c))})})]}),(0,b.jsx)(az.FormMessage,{})]})})}function aS(){let{getStepData:a,updateStepData:d}=ar(),e=a("step6"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step6Schema),defaultValues:e||(0,ao.getStepDefaults)(6)}),g=f.watch();return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step6",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,b.jsx)(y.FileText,{className:"h-6 w-6"}),"Offer Details"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Accreditation and offering acknowledgments"})]}),(0,b.jsxs)(G.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:[(0,b.jsx)(y.FileText,{className:"h-4 w-4"}),(0,b.jsx)(G.AlertTitle,{children:"US Investor Requirements"}),(0,b.jsx)(G.AlertDescription,{children:"Under Regulation D, we need to verify your accredited investor status before you can participate in this offering."})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(aR,{control:f.control,name:"isAccreditedInvestor",label:"Are you an accredited investor?",description:"Under SEC Regulation D, accredited investors meet specific income or net worth thresholds"}),"yes"===g.isAccreditedInvestor&&(0,b.jsx)(az.FormField,{control:f.control,name:"accreditationBasis",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"On what basis do you qualify?"}),(0,b.jsx)(az.FormDescription,{children:"Select the criteria that best describes your accredited investor status"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aB.RadioGroup,{onValueChange:a.onChange,value:a.value,className:"grid gap-3 mt-3",children:aQ.map(c=>{let d=c.icon;return(0,b.jsxs)("label",{className:(0,aj.cn)("flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all",a.value===c.value?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,b.jsx)(aB.RadioGroupItem,{value:c.value,className:"sr-only"}),(0,b.jsx)("div",{className:(0,aj.cn)("p-2 rounded-lg",a.value===c.value?"bg-emerald-500 text-white":"bg-muted text-muted-foreground"),children:(0,b.jsx)(d,{className:"h-4 w-4"})}),(0,b.jsx)("span",{className:"font-medium",children:c.label}),a.value===c.value&&(0,b.jsx)(R.CheckCircle2,{className:"h-5 w-5 text-emerald-500 ml-auto"})]},c.value)})})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(aR,{control:f.control,name:"hasReceivedOfferingMaterials",label:"Have you received and reviewed the offering materials?",description:"Including the Private Placement Memorandum (PPM) and related documents"}),(0,b.jsx)(aR,{control:f.control,name:"understandsRestrictions",label:"Do you understand the restrictions on transfer and resale?",description:"Securities offered under Regulation D cannot be freely resold and are subject to holding periods"}),"yes"===g.hasReceivedOfferingMaterials&&"yes"===g.understandsRestrictions&&(0,b.jsxs)(G.Alert,{className:"bg-emerald-500/10 border-emerald-500/30",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),(0,b.jsx)(G.AlertDescription,{children:"Great! You've confirmed receipt of materials and understanding of restrictions."})]})]})})]})}var aT=a.i(675167);let aU=[{name:"acknowledgesFATCA",title:"FATCA Acknowledgment",description:"I acknowledge that as a US Person, I am subject to the Foreign Account Tax Compliance Act (FATCA) and may be required to provide additional documentation.",icon:"🏛️"},{name:"willProvideW9",title:"Form W-9 Requirement",description:"I agree to provide a completed Form W-9 (Request for Taxpayer Identification Number and Certification) if required.",icon:"📋"},{name:"understandsWithholding",title:"Withholding Requirements",description:"I understand that backup withholding may apply at a rate of 24% if I fail to provide a valid TIN or fail to certify my status.",icon:"💰"},{name:"certifiesTaxCompliance",title:"Tax Compliance Certification",description:"I certify that I am in compliance with my US federal and state tax obligations, or I am working with a tax advisor to resolve any outstanding issues.",icon:"✅"},{name:"acknowledgesReportingObligations",title:"Reporting Obligations",description:"I acknowledge that the fund may be required to report my investment information to the IRS and/or relevant tax authorities under FATCA and other applicable laws.",icon:"📊"}];function aV(){let{getStepData:a,updateStepData:d}=ar(),e=a("step7"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step7Schema),defaultValues:e||(0,ao.getStepDefaults)(7)}),g=f.watch(),h=aU.every(a=>!0===g[a.name]);return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step7",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,b.jsx)(aT.FileCheck,{className:"h-6 w-6"}),"US Tax Compliance"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"FATCA and reporting requirements"})]}),(0,b.jsxs)(G.Alert,{className:"bg-amber-500/10 border-amber-500/30",children:[(0,b.jsx)(ae.AlertTriangle,{className:"h-4 w-4"}),(0,b.jsx)(G.AlertTitle,{children:"Important Tax Information"}),(0,b.jsx)(G.AlertDescription,{children:"As a US Person, you are subject to specific tax reporting requirements. Please review and acknowledge each item below."})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsx)("div",{className:"space-y-4",children:aU.map(a=>(0,b.jsx)(az.FormField,{control:f.control,name:a.name,render:({field:c})=>(0,b.jsxs)(az.FormItem,{className:(0,aj.cn)("p-4 rounded-lg border-2 transition-all",c.value?"border-emerald-500/50 bg-emerald-500/5":"border-border hover:border-muted-foreground/50"),children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aH.Checkbox,{checked:c.value,onCheckedChange:c.onChange,className:"mt-1"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(az.FormLabel,{className:"flex items-center gap-2 text-base font-medium cursor-pointer",children:[(0,b.jsx)("span",{children:a.icon}),a.title,c.value&&(0,b.jsx)(R.CheckCircle2,{className:"h-4 w-4 text-emerald-500 ml-auto"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.description})]})]}),(0,b.jsx)(az.FormMessage,{})]})},a.name))})}),h&&(0,b.jsxs)(G.Alert,{className:"bg-emerald-500/10 border-emerald-500/30",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),(0,b.jsx)(G.AlertDescription,{children:"All US tax compliance acknowledgments completed. You may proceed to the next step."})]})]})}var aW=a.i(966494),aX=a.i(671948),aY=a.i(376515);let aZ=[{value:"private_equity",label:"Private Equity"},{value:"venture_capital",label:"Venture Capital"},{value:"hedge_funds",label:"Hedge Funds"},{value:"real_estate",label:"Real Estate (non-REIT)"},{value:"commodities",label:"Commodities"},{value:"structured_products",label:"Structured Products"},{value:"cryptocurrency",label:"Cryptocurrency"}];function a$({field:a,options:c,columns:d=2}){return(0,b.jsx)(aB.RadioGroup,{onValueChange:a.onChange,value:a.value,className:(0,aj.cn)("grid gap-3 mt-2",3===d?"md:grid-cols-3":"md:grid-cols-2"),children:c.map(c=>(0,b.jsxs)("label",{className:(0,aj.cn)("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all",a.value===c.value?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,b.jsx)(aB.RadioGroupItem,{value:c.value,className:"sr-only"}),(0,b.jsx)("div",{className:(0,aj.cn)("w-4 h-4 rounded-full border-2 flex items-center justify-center",a.value===c.value?"border-emerald-500":"border-slate-500"),children:a.value===c.value&&(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})}),(0,b.jsx)("span",{className:"text-sm",children:c.label})]},c.value))})}function a_(){let{getStepData:a,updateStepData:d}=ar(),e=a("step8"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step8Schema),defaultValues:e||(0,ao.getStepDefaults)(8)}),g=f.watch();return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step8",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,b.jsx)(aW.TrendingUp,{className:"h-6 w-6"}),"Investment Suitability"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Help us understand your financial profile"})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(aX.GraduationCap,{className:"h-5 w-5 text-blue-500"}),"Education & Employment"]}),(0,b.jsx)(az.FormField,{control:f.control,name:"educationLevel",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Highest level of education"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(a$,{field:a,options:ao.educationLevelOptions,columns:3})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"employmentStatus",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Employment status"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(a$,{field:a,options:ao.employmentStatusOptions,columns:3})}),(0,b.jsx)(az.FormMessage,{})]})}),("employed"===g.employmentStatus||"self_employed"===g.employmentStatus)&&(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(az.FormField,{control:f.control,name:"occupation",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Occupation"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"e.g., Software Engineer",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"employer",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"self_employed"===g.employmentStatus?"Business Name":"Employer"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"Company name",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]}),(0,b.jsx)(az.FormField,{control:f.control,name:"yearsInvestingExperience",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Years of investment experience"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{type:"number",min:"0",max:"60",placeholder:"e.g., 10",...a,className:"max-w-[150px]"})}),(0,b.jsx)(az.FormMessage,{})]})})]}),(0,b.jsx)(aJ.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(aP.DollarSign,{className:"h-5 w-5 text-emerald-500"}),"Financial Profile"]}),(0,b.jsx)(az.FormField,{control:f.control,name:"annualIncome",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Annual income"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(a$,{field:a,options:ao.incomeRangeOptions})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"netWorth",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Total net worth (excluding primary residence)"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(a$,{field:a,options:ao.netWorthRangeOptions})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"liquidNetWorth",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Liquid net worth (cash and readily convertible assets)"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(a$,{field:a,options:ao.netWorthRangeOptions})}),(0,b.jsx)(az.FormMessage,{})]})})]}),(0,b.jsx)(aJ.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(aY.Target,{className:"h-5 w-5 text-purple-500"}),"Investment Preferences"]}),(0,b.jsx)(az.FormField,{control:f.control,name:"investmentObjective",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Primary investment objective"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(a$,{field:a,options:ao.investmentObjectiveOptions})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"riskTolerance",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Risk tolerance"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(a$,{field:a,options:ao.riskToleranceOptions})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"investmentHorizon",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsxs)(az.FormLabel,{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Clock,{className:"h-4 w-4"}),"Investment time horizon"]}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(a$,{field:a,options:ao.timeHorizonOptions})}),(0,b.jsx)(az.FormMessage,{})]})})]}),(0,b.jsx)(aJ.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(aC.Briefcase,{className:"h-5 w-5 text-amber-500"}),"Alternative Investment Experience"]}),(0,b.jsx)(az.FormField,{control:f.control,name:"percentageOfNetWorthToInvest",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Percentage of net worth you plan to invest in this offering"}),(0,b.jsx)(az.FormDescription,{children:"Enter a percentage between 1 and 100"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2 max-w-[150px]",children:[(0,b.jsx)(l.Input,{type:"number",min:"1",max:"100",placeholder:"e.g., 5",...a}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"%"})]})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:f.control,name:"hasAlternativeInvestmentExperience",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Do you have prior experience with alternative investments?"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aB.RadioGroup,{onValueChange:a.onChange,value:a.value,className:"flex gap-4 mt-2",children:["yes","no"].map(c=>(0,b.jsxs)("label",{className:(0,aj.cn)("px-6 py-2 rounded-lg border cursor-pointer transition-all capitalize",a.value===c?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,b.jsx)(aB.RadioGroupItem,{value:c,className:"sr-only"}),c]},c))})}),(0,b.jsx)(az.FormMessage,{})]})}),"yes"===g.hasAlternativeInvestmentExperience&&(0,b.jsx)(az.FormField,{control:f.control,name:"alternativeInvestmentTypes",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Which types of alternative investments? (Select all that apply)"}),(0,b.jsx)("div",{className:"grid gap-2 mt-2 md:grid-cols-2",children:aZ.map(c=>(0,b.jsxs)("label",{className:(0,aj.cn)("flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all",a.value?.includes(c.value)?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-muted-foreground/50"),children:[(0,b.jsx)(aH.Checkbox,{checked:a.value?.includes(c.value),onCheckedChange:b=>{let d=a.value||[];b?a.onChange([...d,c.value]):a.onChange(d.filter(a=>a!==c.value))}}),(0,b.jsx)("span",{className:"text-sm",children:c.label})]},c.value))}),(0,b.jsx)(az.FormMessage,{})]})})]})]})})]})}var a0=a.i(778541),a1=a.i(686331),a2=a.i(504839),a3=a.i(947208);let a4=(0,a.i(95799).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),a5=[{name:"acknowledgesIlliquidity",title:"Illiquidity Risk",description:"I understand that interests in the Fund are illiquid and there is no public market for these securities. I may not be able to sell my investment or access my capital for an extended period.",icon:a1.Lock},{name:"acknowledgesLossRisk",title:"Capital Loss Risk",description:"I understand that investing in alternative investments involves significant risks, including the potential loss of my entire investment.",icon:aP.DollarSign},{name:"acknowledgesNoGuarantees",title:"No Guarantees",description:"I understand that there are no guarantees of returns or distributions, and past performance is not indicative of future results.",icon:ae.AlertTriangle},{name:"acknowledgesLimitedInfo",title:"Limited Information",description:"I understand that I may receive limited information about the underlying investments and that the Fund is not subject to the same disclosure requirements as public companies.",icon:y.FileText},{name:"acknowledgesNoRegulation",title:"Limited Regulatory Protection",description:"I understand that alternative investment funds are generally not registered with the SEC and do not receive the same regulatory protections as registered investment companies.",icon:Z.Shield},{name:"acknowledgesConflicts",title:"Conflicts of Interest",description:"I understand that the Fund Manager and its affiliates may have conflicts of interest in managing the Fund, and I have reviewed the disclosure of potential conflicts.",icon:L.Users},{name:"acknowledgesTaxImplications",title:"Tax Implications",description:"I understand that this investment may have complex tax implications and I should consult with my own tax advisor regarding my specific situation.",icon:a3.Receipt},{name:"acknowledgesFees",title:"Fees and Expenses",description:"I understand and accept the fee structure including management fees, performance fees, and other expenses that will reduce my returns.",icon:a2.Scale},{name:"hasReadOfferingDocs",title:"Offering Documents Review",description:"I confirm that I have received, read, and understand the Private Placement Memorandum (PPM), Limited Partnership Agreement, and other offering documents.",icon:a4},{name:"hasSoughtIndependentAdvice",title:"Independent Advice",description:"I confirm that I have had the opportunity to seek independent legal, tax, and financial advice regarding this investment.",icon:a2.Scale}];function a6(){let{getStepData:a,updateStepData:d}=ar(),e=a("step9"),f=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step9Schema),defaultValues:e||(0,ao.getStepDefaults)(9)}),g=f.watch(),h=a5.length,i=a5.filter(a=>!0===g[a.name]).length;return(0,c.useEffect)(()=>{let a=f.watch(a=>{d("step9",a)});return()=>a.unsubscribe()},[f,d]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,b.jsx)(ae.AlertTriangle,{className:"h-6 w-6 text-amber-500"}),"Risk Acknowledgments"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Please review and acknowledge each risk factor"})]}),(0,b.jsxs)("div",{className:"bg-muted p-4 rounded-lg space-y-2 border border-border",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Acknowledgment Progress"}),(0,b.jsxs)("span",{className:"font-medium",children:[i," of ",h," completed"]})]}),(0,b.jsx)(a0.Progress,{value:i/h*100,className:"h-2"})]}),(0,b.jsxs)(G.Alert,{className:"bg-amber-500/10 border-amber-500/30",children:[(0,b.jsx)(ae.AlertTriangle,{className:"h-4 w-4"}),(0,b.jsx)(G.AlertTitle,{children:"Important"}),(0,b.jsx)(G.AlertDescription,{children:"Please carefully read and acknowledge each item below. These acknowledgments confirm your understanding of the risks associated with this investment."})]}),(0,b.jsx)(az.Form,{...f,children:(0,b.jsx)("div",{className:"space-y-3",children:a5.map((a,c)=>{let d=a.icon;return(0,b.jsx)(az.FormField,{control:f.control,name:a.name,render:({field:e})=>(0,b.jsxs)(az.FormItem,{className:(0,aj.cn)("p-4 rounded-lg border-2 transition-all bg-card",e.value?"border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950":"border-border hover:border-muted-foreground/50"),children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aH.Checkbox,{checked:e.value,onCheckedChange:e.onChange,className:"mt-1"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(az.FormLabel,{className:"flex items-center gap-2 text-base font-medium cursor-pointer",children:[(0,b.jsx)(d,{className:(0,aj.cn)("h-4 w-4",e.value?"text-emerald-500":"text-muted-foreground")}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground mr-2",children:[c+1,"."]}),a.title,e.value&&(0,b.jsx)(R.CheckCircle2,{className:"h-4 w-4 text-emerald-500 ml-auto flex-shrink-0"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2 leading-relaxed",children:a.description})]})]}),(0,b.jsx)(az.FormMessage,{})]})},a.name)})})}),i===h&&(0,b.jsxs)(G.Alert,{className:"bg-emerald-500/10 border-emerald-500/30",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),(0,b.jsx)(G.AlertDescription,{children:"All risk acknowledgments completed. You may proceed to the final step to review and sign."})]})]})}var a7=a.i(752907);let a8=[{name:"certifiesAccuracy",title:"Accuracy Certification",description:"I certify that all information provided in this questionnaire is true, complete, and accurate to the best of my knowledge."},{name:"certifiesNoOmissions",title:"No Material Omissions",description:"I certify that I have not omitted any material information that could affect the evaluation of my suitability for this investment."},{name:"agreesToUpdates",title:"Update Obligation",description:"I agree to promptly notify VERSO Holdings of any material changes to the information provided herein."},{name:"consentToProcessing",title:"Data Processing Consent",description:"I consent to the collection, processing, and storage of my personal information for compliance and regulatory purposes."}];function a9({icon:a,title:c,items:d}){return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h4",{className:"font-medium flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(a,{className:"h-4 w-4"}),c]}),(0,b.jsx)("div",{className:"grid gap-1 pl-6",children:d.filter(a=>a.value).map((a,c)=>(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:[a.label,":"]})," ",(0,b.jsx)("span",{className:"font-medium",children:a.value})]},c))})]})}function ba(){let{getStepData:a,updateStepData:d,formData:e}=ar(),f=a("step10"),g=(0,ax.useForm)({resolver:(0,ay.zodResolver)(ao.step10Schema),defaultValues:f||(0,ao.getStepDefaults)(10)}),h=g.watch(),i=a8.every(a=>!0===h[a.name]);(0,c.useEffect)(()=>{let a=g.watch(a=>{d("step10",a)});return()=>a.unsubscribe()},[g,d]);let j=e.step1,k=e.step2,m=e.step4,n=e.step8;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,b.jsx)(a7.PenTool,{className:"h-6 w-6 text-emerald-500"}),"Review & Sign"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Final review and certification"})]}),(0,b.jsxs)("div",{className:"bg-muted p-6 rounded-lg space-y-6 border border-border",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(y.FileText,{className:"h-5 w-5"}),"Application Summary"]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsx)(a9,{icon:z.User,title:"Personal Information",items:[{label:"Name",value:j?.fullName},{label:"Email",value:j?.email},{label:"Nationality",value:j?.nationality},{label:"Country",value:j?.countryOfResidence}]}),(0,b.jsx)(a9,{icon:aC.Briefcase,title:"Investment Details",items:[{label:"Type",value:k?.investmentType==="other"?k?.investmentTypeOther:k?.investmentType}]}),(0,b.jsx)(a9,{icon:Z.Shield,title:"Compliance Status",items:[{label:"PEP Status",value:m?.isPEP==="yes"?"Yes":"No"},{label:"US Person",value:m?.isUSPerson==="yes"?"Yes":"No"}]}),(0,b.jsx)(a9,{icon:aW.TrendingUp,title:"Investment Profile",items:[{label:"Risk Tolerance",value:n?.riskTolerance},{label:"Time Horizon",value:n?.investmentHorizon},{label:"Objective",value:n?.investmentObjective}]})]})]}),(0,b.jsx)(aJ.Separator,{}),(0,b.jsx)(az.Form,{...g,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Certifications"}),(0,b.jsx)("div",{className:"space-y-3",children:a8.map(a=>(0,b.jsx)(az.FormField,{control:g.control,name:a.name,render:({field:c})=>(0,b.jsxs)(az.FormItem,{className:(0,aj.cn)("p-4 rounded-lg border-2 transition-all bg-card",c.value?"border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950":"border-border hover:border-muted-foreground/50"),children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(aH.Checkbox,{checked:c.value,onCheckedChange:c.onChange,className:"mt-1"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(az.FormLabel,{className:"flex items-center gap-2 text-base font-medium cursor-pointer",children:[a.title,c.value&&(0,b.jsx)(R.CheckCircle2,{className:"h-4 w-4 text-emerald-500 ml-auto"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.description})]})]}),(0,b.jsx)(az.FormMessage,{})]})},a.name))})]}),(0,b.jsx)(aJ.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(a7.PenTool,{className:"h-5 w-5 text-emerald-500"}),"Electronic Signature"]}),(0,b.jsxs)(G.Alert,{className:"bg-blue-500/10 border-blue-500/30",children:[(0,b.jsx)(y.FileText,{className:"h-4 w-4"}),(0,b.jsx)(G.AlertTitle,{children:"Electronic Signature Notice"}),(0,b.jsx)(G.AlertDescription,{children:"By typing your name below, you are providing an electronic signature that is legally equivalent to a handwritten signature under applicable law."})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(az.FormField,{control:g.control,name:"signatureName",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsx)(az.FormLabel,{children:"Type your full legal name"}),(0,b.jsx)(az.FormDescription,{children:"This serves as your electronic signature"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{placeholder:"John Smith",className:"font-serif text-lg",...a})}),(0,b.jsx)(az.FormMessage,{})]})}),(0,b.jsx)(az.FormField,{control:g.control,name:"signatureDate",render:({field:a})=>(0,b.jsxs)(az.FormItem,{children:[(0,b.jsxs)(az.FormLabel,{className:"flex items-center gap-2",children:[(0,b.jsx)(N.Calendar,{className:"h-4 w-4"}),"Signature Date"]}),(0,b.jsx)(az.FormDescription,{children:"Today's date"}),(0,b.jsx)(az.FormControl,{children:(0,b.jsx)(l.Input,{type:"date",...a})}),(0,b.jsx)(az.FormMessage,{})]})})]}),h.signatureName&&(0,b.jsxs)("div",{className:"p-4 bg-muted rounded-lg border border-border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Signature Preview"}),(0,b.jsx)("p",{className:"font-serif text-2xl italic text-emerald-600 dark:text-emerald-400",children:h.signatureName})]})]})]})}),i&&h.signatureName&&(0,b.jsxs)(G.Alert,{className:"bg-emerald-500/10 border-emerald-500/30",children:[(0,b.jsx)(R.CheckCircle2,{className:"h-4 w-4 text-emerald-500"}),(0,b.jsx)(G.AlertTitle,{children:"Ready to Submit"}),(0,b.jsx)(G.AlertDescription,{children:'All certifications completed and signature provided. Click "Submit" below to finalize your application.'})]})]})}function bb({onComplete:a}){let{currentStep:d,visibleSteps:e,formData:f,isLoading:g,submitQuestionnaire:h}=ar(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,p]=(0,c.useState)(null),q={1:(0,b.jsx)(aA,{}),2:(0,b.jsx)(aG,{}),3:(0,b.jsx)(aI,{}),4:(0,b.jsx)(aM,{}),5:(0,b.jsx)(aO,{}),6:(0,b.jsx)(aS,{}),7:(0,b.jsx)(aV,{}),8:(0,b.jsx)(a_,{}),9:(0,b.jsx)(a6,{}),10:(0,b.jsx)(ba,{})},r=async()=>{k(!0),p(null);try{if(!await h())return;m(!0),a?.()}catch(a){p(a instanceof Error?a.message:"Failed to submit questionnaire")}finally{k(!1)}};return g?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin mx-auto text-emerald-500"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading your questionnaire..."})]})}):l?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsxs)("div",{className:"text-center space-y-6 max-w-md mx-auto",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"h-24 w-24 rounded-full bg-emerald-500/20 animate-pulse"})}),(0,b.jsx)(R.CheckCircle2,{className:"h-16 w-16 mx-auto text-emerald-500 relative z-10"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[(0,b.jsx)(an.Sparkles,{className:"h-5 w-5 text-amber-500"}),"Questionnaire Submitted!"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Thank you for completing your KYC questionnaire. Our compliance team will review your submission and contact you if any additional information is needed."})]}),(0,b.jsxs)(G.Alert,{className:"bg-blue-500/10 border-blue-500/30 text-left",children:[(0,b.jsx)(G.AlertTitle,{children:"What happens next?"}),(0,b.jsx)(G.AlertDescription,{children:(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[(0,b.jsx)("li",{children:"Our team will review your submission within 2-3 business days"}),(0,b.jsx)("li",{children:"You may be asked to provide supporting documentation"}),(0,b.jsx)("li",{children:"You'll receive an email notification when your status is updated"})]})})]})]})}):(ao.STEP_CONFIG[d-1],(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(as,{}),(0,b.jsx)("div",{className:"text-center py-2",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Step ",e.indexOf(d)+1," of ",e.length]})}),n&&(0,b.jsxs)(G.Alert,{className:"bg-red-500/10 border-red-500/30",children:[(0,b.jsx)(ae.AlertTriangle,{className:"h-4 w-4"}),(0,b.jsx)(G.AlertTitle,{children:"Submission Error"}),(0,b.jsx)(G.AlertDescription,{children:n})]}),(0,b.jsx)(o.Card,{className:"border-border bg-card shadow-sm",children:(0,b.jsx)(o.CardContent,{className:"pt-6",children:(0,b.jsx)("div",{className:"min-h-[400px]",children:q[d]})})}),(0,b.jsx)(aw,{onSubmit:r,isSubmitting:j})]}))}function bc({initialData:a,submissionId:c,onComplete:d}){return(0,b.jsx)(aq,{initialData:a,submissionId:c,onComplete:d,children:(0,b.jsx)(bb,{onComplete:d})})}function bd({onComplete:a}){let[d,e]=(0,c.useState)(!0),[f,g]=(0,c.useState)(null),[h,j]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(async()=>{e(!0);try{let a=await fetch("/api/investors/me/kyc-submissions");if(a.ok){let b=await a.json(),c=b.submissions?.find(a=>"questionnaire"===a.document_type&&a.metadata?.wizardVersion==="2.0");c&&c.metadata&&(g(c.metadata),j(c.id))}}catch(a){console.error("Failed to load KYC data",a)}finally{e(!1)}})()},[]),d)?(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardContent,{className:"flex justify-center items-center min-h-[400px]",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading questionnaire..."})]})})}):(0,b.jsxs)(o.Card,{className:"border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-sm",children:[(0,b.jsxs)(o.CardHeader,{className:"border-b border-gray-100 dark:border-zinc-700 bg-gray-50/50 dark:bg-zinc-800/50",children:[(0,b.jsx)(o.CardTitle,{className:"text-gray-900 dark:text-white",children:"Compliance Questionnaire"}),(0,b.jsx)(o.CardDescription,{className:"text-gray-600 dark:text-gray-400",children:"Complete the following compliance questionnaire to proceed with your KYC verification. Your progress is saved automatically."})]}),(0,b.jsx)(o.CardContent,{className:"pt-6",children:(0,b.jsx)(bc,{initialData:f||void 0,submissionId:h||void 0,onComplete:a})})]})}var be=a.i(149159),bf=a.i(158800),bg=a.i(71459),bh=a.i(203297),bi=a.i(318525),bj=a.i(466932),bk=a.i(354726);a.i(73475);var bl=a.i(493469),bm=a.i(108284),bn=a.i(99422),bo=a.i(967487);let bp={active:{label:"Active",className:"bg-emerald-100 text-emerald-800 border-emerald-200",icon:R.CheckCircle2},pending:{label:"Pending",className:"bg-amber-100 text-amber-800 border-amber-200",icon:v.Clock},inactive:{label:"Inactive",className:"bg-gray-100 text-gray-800 border-gray-200",icon:x.AlertCircle},suspended:{label:"Suspended",className:"bg-red-100 text-red-800 border-red-200",icon:x.AlertCircle}},bq={approved:{label:"KYC Approved",className:"bg-emerald-100 text-emerald-800 border-emerald-200"},pending:{label:"KYC Pending",className:"bg-amber-100 text-amber-800 border-amber-200"},rejected:{label:"KYC Rejected",className:"bg-red-100 text-red-800 border-red-200"},not_started:{label:"KYC Not Started",className:"bg-gray-100 text-gray-800 border-gray-200"}};function br({userEmail:a,profile:d,variant:f="investor",defaultTab:g="overview",investorInfo:h,investorUserInfo:i}){let[j,l]=(0,c.useState)(d),[n,p]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),y="staff"===f,B=!!h,C=h?.type==="individual",D=B&&h?.type!=="individual";console.log("[ProfilePageClient] Props received:",{variant:f,isStaff:y,hasInvestorEntity:B,isIndividual:C,isEntity:D,investorInfo:h?{id:h.id,legal_name:h.legal_name,type:h.type}:null});let F=a=>{l(b=>({...b,avatar_url:a}))},G=a=>{l(b=>({...b,...a}))},H=bp[h?.status||"pending"]||bp.pending,J=H.icon,N=bq[h?.kyc_status||"not_started"]||bq.not_started;return y?(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"sticky top-6",children:[(0,b.jsx)(k,{currentAvatarUrl:j.avatar_url,userName:j.display_name||j.email||"Staff User",onAvatarUpdate:F}),(0,b.jsxs)("div",{className:"mt-6 p-4 border border-border rounded-lg bg-muted/50 space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Contact"}),(0,b.jsx)("p",{className:"text-sm mt-1 text-foreground",children:j.email}),j.phone&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:j.phone})]}),j.office_location&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Office"}),(0,b.jsx)("p",{className:"text-sm mt-1 text-foreground",children:j.office_location})]}),j.title&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Title"}),(0,b.jsx)("p",{className:"text-sm mt-1 text-foreground",children:j.title})]})]})]})}),(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)(Q.Tabs,{defaultValue:"profile",className:"w-full",children:[(0,b.jsxs)(Q.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsxs)(Q.TabsTrigger,{value:"profile",children:[(0,b.jsx)(aC.Briefcase,{className:"h-4 w-4 mr-2"}),"Profile"]}),(0,b.jsxs)(Q.TabsTrigger,{value:"security",children:[(0,b.jsx)(a1.Lock,{className:"h-4 w-4 mr-2"}),"Security"]}),(0,b.jsxs)(Q.TabsTrigger,{value:"preferences",children:[(0,b.jsx)(bg.Bell,{className:"h-4 w-4 mr-2"}),"Notifications"]})]}),(0,b.jsx)(Q.TabsContent,{value:"profile",className:"mt-6",children:(0,b.jsx)(q,{userId:j.id,initialData:j,onUpdate:G,showStaffFields:!0})}),(0,b.jsx)(Q.TabsContent,{value:"security",className:"mt-6",children:(0,b.jsx)(r.PasswordChangeForm,{})}),(0,b.jsx)(Q.TabsContent,{value:"preferences",className:"mt-6",children:(0,b.jsx)(s.PreferencesEditor,{variant:"staff"})})]})})]}):(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(k,{currentAvatarUrl:j.avatar_url,userName:j.display_name||j.email||"User",onAvatarUpdate:F,compact:!0}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:B?h.display_name||h.legal_name:"My Profile"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:B?"Manage your investor profile, documents, and team":"Manage your personal profile settings"})]})]}),B&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(A.Badge,{className:H.className,children:[(0,b.jsx)(J,{className:"h-3 w-3 mr-1"}),H.label]}),(0,b.jsx)(A.Badge,{className:N.className,children:N.label})]})]}),(0,b.jsxs)(Q.Tabs,{defaultValue:g,className:"space-y-6",children:[(0,b.jsxs)(Q.TabsList,{children:[(0,b.jsxs)(Q.TabsTrigger,{value:"overview",className:"flex items-center gap-2",children:[(0,b.jsx)(E.Building2,{className:"h-4 w-4"}),"Overview"]}),B&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(Q.TabsTrigger,{value:"kyc",className:"flex items-center gap-2",children:[(0,b.jsx)(V.ShieldCheck,{className:"h-4 w-4"}),"KYC"]}),(0,b.jsxs)(Q.TabsTrigger,{value:"compliance",className:"flex items-center gap-2",children:[(0,b.jsx)(ad.ShieldAlert,{className:"h-4 w-4"}),"Compliance"]}),(0,b.jsxs)(Q.TabsTrigger,{value:"members",className:"flex items-center gap-2",children:[(0,b.jsx)(L.Users,{className:"h-4 w-4"}),"Team"]}),D&&(0,b.jsxs)(Q.TabsTrigger,{value:"entity-members",className:"flex items-center gap-2",children:[(0,b.jsx)(L.Users,{className:"h-4 w-4"}),"Directors/UBOs"]}),(0,b.jsxs)(Q.TabsTrigger,{value:"entities",className:"flex items-center gap-2",children:[(0,b.jsx)(E.Building2,{className:"h-4 w-4"}),"Entities"]}),(0,b.jsxs)(Q.TabsTrigger,{value:"signature",className:"flex items-center gap-2",children:[(0,b.jsx)(bh.FileSignature,{className:"h-4 w-4"}),"Signature"]})]}),(0,b.jsxs)(Q.TabsTrigger,{value:"security",className:"flex items-center gap-2",children:[(0,b.jsx)(a1.Lock,{className:"h-4 w-4"}),"Security"]}),(0,b.jsxs)(Q.TabsTrigger,{value:"preferences",className:"flex items-center gap-2",children:[(0,b.jsx)(bf.Settings,{className:"h-4 w-4"}),"Preferences"]})]}),(0,b.jsxs)(Q.TabsContent,{value:"overview",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.User,{className:"h-5 w-5"}),"Your Information"]}),(0,b.jsx)(o.CardDescription,{children:"Your account details within this investor entity"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Full Name"}),(0,b.jsx)("div",{className:"font-medium",children:j.display_name||"Not set"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Email"}),(0,b.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)($.Mail,{className:"h-4 w-4 text-muted-foreground"}),j.email||a]})]}),B&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Role"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Badge,{variant:"outline",className:"capitalize",children:i?.role||"member"}),i?.is_primary&&(0,b.jsx)(A.Badge,{variant:"secondary",children:"Primary Contact"}),i?.can_sign&&(0,b.jsx)(A.Badge,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Signatory"})]})]})]})]}),D&&h&&(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(E.Building2,{className:"h-5 w-5"}),"Entity Information"]}),(0,b.jsx)(o.CardDescription,{children:"Organization details"})]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>w(!0),children:[(0,b.jsx)(K.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Display Name"}),(0,b.jsx)("div",{className:"font-medium",children:h.display_name||"-"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Legal Name"}),(0,b.jsx)("div",{className:"font-medium",children:h.legal_name||"-"})]}),h.country_of_incorporation&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Country of Incorporation"}),(0,b.jsx)("div",{className:"font-medium",children:h.country_of_incorporation})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Type"}),(0,b.jsx)(A.Badge,{variant:"outline",className:"capitalize",children:(h.type||"entity").replace(/_/g," ")})]})]})]})]}),D&&(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(_.Phone,{className:"h-5 w-5"}),"Contact Information"]})}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>u(!0),children:[(0,b.jsx)(K.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[h.email&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Email"}),(0,b.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)($.Mail,{className:"h-4 w-4 text-muted-foreground"}),h.email]})]}),h.phone&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Phone"}),(0,b.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)(_.Phone,{className:"h-4 w-4 text-muted-foreground"}),h.phone]})]}),h.phone_mobile&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Mobile"}),(0,b.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)(_.Phone,{className:"h-4 w-4 text-muted-foreground"}),h.phone_mobile]})]}),h.website&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Website"}),(0,b.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)(bi.Globe,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("a",{href:h.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:h.website})]})]}),!h.email&&!h.phone&&!h.phone_mobile&&!h.website&&(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"No contact information available"})]})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(M.MapPin,{className:"h-5 w-5"}),D?"Registered Address":"Address"]})}),(0,b.jsx)(o.CardContent,{className:"space-y-4",children:D?h.registered_address_line_1?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"font-medium",children:h.registered_address_line_1}),h.registered_address_line_2&&(0,b.jsx)("div",{className:"text-muted-foreground",children:h.registered_address_line_2}),(h.registered_city||h.registered_state||h.registered_postal_code||h.registered_country)&&(0,b.jsx)("div",{className:"text-muted-foreground",children:[h.registered_city,h.registered_state,h.registered_postal_code,h.registered_country].filter(Boolean).join(", ")})]}):(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"No address information available"}):h.residential_street?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"font-medium",children:h.residential_street}),h.residential_line_2&&(0,b.jsx)("div",{className:"text-muted-foreground",children:h.residential_line_2}),(h.residential_city||h.residential_state||h.residential_postal_code||h.residential_country)&&(0,b.jsx)("div",{className:"text-muted-foreground",children:[h.residential_city,h.residential_state,h.residential_postal_code,h.residential_country].filter(Boolean).join(", ")})]}):(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"No address information available"})})]})]}),C&&h&&(0,b.jsx)(bl.IndividualKycDisplay,{data:{first_name:h.first_name,middle_name:h.middle_name,last_name:h.last_name,name_suffix:h.name_suffix,date_of_birth:h.date_of_birth,country_of_birth:h.country_of_birth,nationality:h.nationality,email:h.email,phone_mobile:h.phone_mobile,phone_office:h.phone_office,residential_street:h.residential_street,residential_city:h.residential_city,residential_state:h.residential_state,residential_postal_code:h.residential_postal_code,residential_country:h.residential_country,is_us_citizen:h.is_us_citizen,is_us_taxpayer:h.is_us_taxpayer,us_taxpayer_id:h.us_taxpayer_id,country_of_tax_residency:h.country_of_tax_residency,id_type:h.id_type,id_number:h.id_number,id_issue_date:h.id_issue_date,id_expiry_date:h.id_expiry_date,id_issuing_country:h.id_issuing_country},onEdit:()=>p(!0),title:"Personal KYC Information"}),!B&&(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(bf.Settings,{className:"h-5 w-5"}),"Edit Profile"]}),(0,b.jsx)(o.CardDescription,{children:"Update your profile information"})]}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)(q,{userId:j.id,initialData:j,onUpdate:G,showStaffFields:!1})})]})]}),B&&(0,b.jsxs)(Q.TabsContent,{value:"kyc",className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"KYC Documents"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Upload required identity and verification documents."})]}),(0,b.jsx)(I,{})]}),B&&(0,b.jsxs)(Q.TabsContent,{value:"compliance",className:"space-y-6",children:[(0,b.jsx)(am,{}),(0,b.jsx)("div",{className:"pt-6 border-t",children:(0,b.jsx)(bd,{})})]}),B&&h&&(0,b.jsx)(Q.TabsContent,{value:"members",className:"space-y-4",children:(0,b.jsx)(bj.MembersManagementTab,{entityType:"investor",entityId:h.id,entityName:h.display_name||h.legal_name,showSignatoryOption:D,canManageMembers:i?.role==="admin"||i?.is_primary})}),D&&h&&(0,b.jsx)(Q.TabsContent,{value:"entity-members",className:"space-y-4",children:(0,b.jsx)(be.GenericEntityMembersTab,{entityType:"investor",entityId:h.id,entityName:h.display_name||h.legal_name,apiEndpoint:"/api/investors/me/members",canManage:i?.role==="admin"||i?.is_primary,title:"Directors, UBOs & Signatories",description:"Manage directors, beneficial owners (>25% ownership), and authorized signatories with full KYC information"})}),B&&(0,b.jsx)(Q.TabsContent,{value:"entities",className:"space-y-4",children:(0,b.jsx)(ab,{})}),B&&(0,b.jsx)(Q.TabsContent,{value:"signature",className:"space-y-6",children:i?.can_sign?(0,b.jsx)(bk.SignatureSpecimenTab,{entityType:"investor",entityId:h?.id}):(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(bh.FileSignature,{className:"h-5 w-5"}),"Signature Specimen"]}),(0,b.jsx)(o.CardDescription,{children:"You do not have signing permissions for this investor entity"})]}),(0,b.jsx)(o.CardContent,{children:(0,b.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-8 px-4 text-center",children:[(0,b.jsx)(x.AlertCircle,{className:"h-10 w-10 text-muted-foreground mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Signing permissions are required to upload a signature specimen. Contact your entity administrator for access."})]})})]})}),(0,b.jsx)(Q.TabsContent,{value:"security",className:"space-y-4",children:(0,b.jsx)(r.PasswordChangeForm,{})}),(0,b.jsx)(Q.TabsContent,{value:"preferences",className:"space-y-4",children:(0,b.jsx)(s.PreferencesEditor,{variant:"investor"})})]}),C&&h&&(0,b.jsx)(bm.EntityKYCEditDialog,{open:n,onOpenChange:p,entityType:"investor",entityId:h.id,entityName:h.display_name||h.legal_name,initialData:{first_name:h.first_name??void 0,middle_name:h.middle_name??void 0,last_name:h.last_name??void 0,name_suffix:h.name_suffix??void 0,date_of_birth:h.date_of_birth??void 0,nationality:h.nationality??void 0,country_of_birth:h.country_of_birth??void 0,phone_mobile:h.phone_mobile??void 0,phone_office:h.phone_office??void 0,is_us_citizen:!0===h.is_us_citizen,is_us_taxpayer:!0===h.is_us_taxpayer,us_taxpayer_id:h.us_taxpayer_id??void 0,country_of_tax_residency:h.country_of_tax_residency??void 0,id_type:h.id_type??void 0,id_number:h.id_number??void 0,id_issue_date:h.id_issue_date??void 0,id_expiry_date:h.id_expiry_date??void 0,id_issuing_country:h.id_issuing_country??void 0,residential_street:h.residential_street??void 0,residential_city:h.residential_city??void 0,residential_state:h.residential_state??void 0,residential_postal_code:h.residential_postal_code??void 0,residential_country:h.residential_country??void 0},apiEndpoint:"/api/investors/me",onSuccess:()=>window.location.reload()}),B&&h&&(0,b.jsx)(bn.EntityAddressEditDialog,{open:t,onOpenChange:u,entityType:"investor",entityName:h.display_name||h.legal_name,initialData:D?{email:h.email??void 0,phone:h.phone??void 0,phone_mobile:h.phone_mobile??void 0,phone_office:h.phone_office??void 0,website:h.website??void 0,address_line_1:h.registered_address_line_1??void 0,address_line_2:h.registered_address_line_2??void 0,city:h.registered_city??void 0,state_province:h.registered_state??void 0,postal_code:h.registered_postal_code??void 0,country:h.registered_country??void 0}:{email:h.email??void 0,phone:h.phone??void 0,phone_mobile:h.phone_mobile??void 0,phone_office:h.phone_office??void 0,website:h.website??void 0,address_line_1:h.residential_street??void 0,address_line_2:h.residential_line_2??void 0,city:h.residential_city??void 0,state_province:h.residential_state??void 0,postal_code:h.residential_postal_code??void 0,country:h.residential_country??void 0},apiEndpoint:"/api/investors/me",onSuccess:()=>window.location.reload()}),D&&h&&(0,b.jsx)(bo.EntityInfoEditDialog,{open:v,onOpenChange:w,initialData:{display_name:h.display_name,legal_name:h.legal_name,country_of_incorporation:h.country_of_incorporation},onSuccess:()=>window.location.reload()})]})}a.s(["ProfilePageClient",()=>br],38086)}];

//# sourceMappingURL=versotech-portal_src_components_profile_profile-page-client_tsx_bdfd5adf._.js.map