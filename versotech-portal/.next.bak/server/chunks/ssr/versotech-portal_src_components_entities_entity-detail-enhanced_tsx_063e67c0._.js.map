{"version":3,"sources":["../../../../../versotech-portal/src/components/entities/entity-detail-enhanced.tsx","../../../../../versotech-portal/src/components/deals/upload-document-modal.tsx","../../../../../versotech-portal/src/components/entities/director-modal-refactored.tsx","../../../../../versotech-portal/src/hooks/use-director-form.ts","../../../../../versotech-portal/src/lib/schemas/director-schema.ts","../../../../../versotech-portal/src/lib/schemas/stakeholder-schema.ts","../../../../../versotech-portal/src/hooks/use-stakeholder-form.ts","../../../../../versotech-portal/src/components/entities/stakeholder-modal-refactored.tsx","../../../../../versotech-portal/src/components/entities/edit-entity-modal-refactored.tsx","../../../../../versotech-portal/src/lib/schemas/entity-schema.ts","../../../../../versotech-portal/src/hooks/use-entity-form.ts","../../../../../versotech-portal/src/hooks/use-confirmation-dialog.tsx","../../../../../versotech-portal/src/components/entities/delete-entity-dialog.tsx","../../../../../versotech-portal/src/components/entities/edit-document-modal.tsx","../../../../../versotech-portal/src/components/entities/link-entity-investor-modal.tsx","../../../../../versotech-portal/src/components/entities/add-entity-flag-modal.tsx","../../../../../versotech-portal/src/components/entities/entity-health-monitor.tsx","../../../../../versotech-portal/src/lib/entity-health-checker.ts","../../../../../versotech-portal/src/components/entities/folder-manager.tsx","../../../../../versotech-portal/src/lib/schemas/subscription-schema.ts","../../../../../versotech-portal/src/hooks/use-subscription-form.ts","../../../../../versotech-portal/src/components/entities/subscription-edit-modal.tsx","../../../../../versotech-portal/src/components/entities/add-valuation-modal.tsx","../../../../../versotech-portal/src/components/entities/edit-valuation-modal.tsx","../../../../../versotech-portal/src/components/entities/import-valuations-dialog.tsx","../../../../../versotech-portal/src/components/entities/position-modal.tsx","../../../../../versotech-portal/src/components/entities/import-positions-dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\r\nimport Image from 'next/image'\r\nimport Link from 'next/link'\r\nimport {\r\n  ArrowLeft,\r\n  Building2,\r\n  CalendarClock,\r\n  Download,\r\n  FileText,\r\n  Plus,\r\n  Users,\r\n  ClipboardList,\r\n  Activity,\r\n  Briefcase,\r\n  ShieldCheck,\r\n  Edit,\r\n  FolderOpen,\r\n  AlertTriangle,\r\n  CheckCircle2,\r\n  AlertCircle,\r\n  Info,\r\n  Loader2,\r\n  ExternalLink,\r\n  RefreshCw,\r\n  Trash2,\r\n  Eye,\r\n  TrendingUp\r\n} from 'lucide-react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue\r\n} from '@/components/ui/select'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle\r\n} from '@/components/ui/dialog'\r\nimport { UploadDocumentModal } from '@/components/deals/upload-document-modal'\r\nimport { DirectorModalRefactored } from './director-modal-refactored'\r\nimport { StakeholderModalRefactored } from './stakeholder-modal-refactored'\r\nimport { useDocumentViewer } from '@/hooks/useDocumentViewer'\r\nimport { DocumentViewerFullscreen } from '@/components/documents/DocumentViewerFullscreen'\r\nimport { EditEntityModalRefactored } from './edit-entity-modal-refactored'\r\nimport { DeleteEntityDialog } from './delete-entity-dialog'\r\nimport { EditDocumentModal } from './edit-document-modal'\r\nimport { ScrollArea } from '@/components/ui/scroll-area'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { LinkEntityInvestorModal } from './link-entity-investor-modal'\r\nimport { EntityInvestorSummary, EntityFlagSummary } from './types'\r\nimport { toast } from 'sonner'\r\nimport { AddEntityFlagModal } from './add-entity-flag-modal'\r\nimport { EntityHealthMonitor } from './entity-health-monitor'\r\nimport { FolderManager } from './folder-manager'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { cn } from '@/lib/utils'\r\nimport { useConfirmationDialog } from '@/hooks/use-confirmation-dialog'\r\nimport { SubscriptionEditModal } from './subscription-edit-modal'\r\nimport { AddValuationModal } from './add-valuation-modal'\r\nimport { EditValuationModal } from './edit-valuation-modal'\r\nimport { ImportValuationsDialog } from './import-valuations-dialog'\r\nimport { PositionModal } from './position-modal'\r\nimport { ImportPositionsDialog } from './import-positions-dialog'\r\n\r\ninterface Director {\r\n  id: string\r\n  full_name: string\r\n  role: string | null\r\n  email: string | null\r\n  effective_from: string | null\r\n  effective_to: string | null\r\n  notes: string | null\r\n  created_at: string\r\n}\r\n\r\ninterface Stakeholder {\r\n  id: string\r\n  role: string\r\n  company_name: string | null\r\n  contact_person: string | null\r\n  email: string | null\r\n  phone: string | null\r\n  effective_from: string | null\r\n  effective_to: string | null\r\n  notes: string | null\r\n  created_at: string\r\n}\r\n\r\ninterface Folder {\r\n  id: string\r\n  parent_folder_id: string | null\r\n  name: string\r\n  path: string\r\n  folder_type: string\r\n  vehicle_id: string\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\ninterface EntityDocument {\r\n  id: string\r\n  name: string | null\r\n  file_name?: string | null\r\n  type: string | null\r\n  description?: string | null\r\n  file_key?: string | null\r\n  external_url?: string | null\r\n  link_type?: string | null\r\n  created_at: string\r\n  created_by?: string | null\r\n  folder_id: string | null\r\n}\r\n\r\ninterface EntityEvent {\r\n  id: string\r\n  event_type: string\r\n  description: string | null\r\n  payload?: Record<string, unknown> | null\r\n  created_at: string\r\n  changed_by_profile?: {\r\n    id: string\r\n    display_name: string | null\r\n    email: string | null\r\n  } | null\r\n}\r\n\r\ninterface LinkedDeal {\r\n  id: string\r\n  name: string\r\n  status: string\r\n  deal_type: string\r\n  currency: string | null\r\n  created_at: string\r\n}\r\n\r\ninterface Entity {\r\n  id: string\r\n  name: string\r\n  entity_code: string | null\r\n  platform: string | null\r\n  investment_name: string | null\r\n  former_entity: string | null\r\n  status: string | null\r\n  type: string\r\n  domicile: string | null\r\n  currency: string\r\n  formation_date: string | null\r\n  legal_jurisdiction: string | null\r\n  registration_number: string | null\r\n  reporting_type: string | null\r\n  requires_reporting: boolean | null\r\n  notes: string | null\r\n  created_at: string\r\n  updated_at: string | null\r\n  logo_url: string | null\r\n  website_url: string | null\r\n  address: string | null\r\n  arranger_entity_id: string | null\r\n  lawyer_id: string | null\r\n  arranger_entity?: { id: string; legal_name: string; email?: string | null } | null\r\n  lawyer?: { id: string; firm_name: string; display_name?: string | null; primary_contact_email?: string | null } | null\r\n}\r\n\r\ninterface Valuation {\r\n  id: string\r\n  vehicle_id: string\r\n  as_of_date: string\r\n  nav_total: number | null\r\n  nav_per_unit: number | null\r\n}\r\n\r\ninterface Position {\r\n  id: string\r\n  investor_id: string\r\n  vehicle_id: string\r\n  units: number | null\r\n  cost_basis: number | null\r\n  last_nav: number | null\r\n  as_of_date: string | null\r\n  investor?: {\r\n    id: string\r\n    legal_name: string | null\r\n    display_name: string | null\r\n    type: string | null\r\n    email: string | null\r\n  }\r\n}\r\n\r\ninterface EntityDetailEnhancedProps {\r\n  entity: Entity\r\n  directors: Director[]\r\n  stakeholders: Stakeholder[]\r\n  folders: Folder[]\r\n  flags: EntityFlagSummary[]\r\n  deals: LinkedDeal[]\r\n  events: EntityEvent[]\r\n  investors: EntityInvestorSummary[]\r\n  valuations: Valuation[]\r\n  positions: Position[]\r\n}\r\n\r\nconst entityTypeLabels: Record<string, string> = {\r\n  fund: 'Fund',\r\n  spv: 'SPV',\r\n  securitization: 'Securitization',\r\n  note: 'Note',\r\n  venture_capital: 'Venture Capital',\r\n  private_equity: 'Private Equity',\r\n  real_estate: 'Real Estate',\r\n  other: 'Other'\r\n}\r\n\r\nconst getSeverityIcon = (severity: string) => {\r\n  switch (severity) {\r\n    case 'critical':\r\n      return <AlertTriangle className=\"h-4 w-4 text-red-400\" />\r\n    case 'warning':\r\n      return <AlertCircle className=\"h-4 w-4 text-amber-400\" />\r\n    case 'info':\r\n      return <Info className=\"h-4 w-4 text-blue-400\" />\r\n    case 'success':\r\n      return <CheckCircle2 className=\"h-4 w-4 text-emerald-400\" />\r\n    default:\r\n      return <AlertCircle className=\"h-4 w-4\" />\r\n  }\r\n}\r\n\r\nconst getSeverityColor = (severity: string) => {\r\n  switch (severity) {\r\n    case 'critical':\r\n      return 'bg-red-500/20 border-red-400/40 text-red-100'\r\n    case 'warning':\r\n      return 'bg-amber-500/20 border-amber-400/40 text-amber-100'\r\n    case 'info':\r\n      return 'bg-blue-500/20 border-blue-400/40 text-blue-100'\r\n    case 'success':\r\n      return 'bg-emerald-500/20 border-emerald-400/40 text-emerald-100'\r\n    default:\r\n      return 'bg-white/10 border-white/10 text-foreground'\r\n  }\r\n}\r\n\r\nconst getAllocationStatusColor = (status?: string | null) => {\r\n  switch (status) {\r\n    case 'active':\r\n    case 'committed':\r\n      return 'bg-emerald-500/20 border-emerald-400/40 text-emerald-100'\r\n    case 'closed':\r\n      return 'bg-blue-500/20 border-blue-400/40 text-blue-100'\r\n    case 'cancelled':\r\n      return 'bg-red-500/20 border-red-400/40 text-red-100'\r\n    default:\r\n      return 'bg-amber-500/20 border-amber-400/40 text-amber-100'\r\n  }\r\n}\r\n\r\nconst getFlagStatusColor = (status: string) => {\r\n  switch (status) {\r\n    case 'open':\r\n      return 'bg-red-500/20 border-red-400/40 text-red-100'\r\n    case 'in_progress':\r\n      return 'bg-blue-500/20 border-blue-400/40 text-blue-100'\r\n    case 'closed':\r\n      return 'bg-emerald-500/20 border-emerald-400/40 text-emerald-100'\r\n    default:\r\n      return 'bg-white/10 border-white/10 text-foreground'\r\n  }\r\n}\r\n\r\nconst formatCurrencyValue = (amount?: number | null, currency?: string | null) => {\r\n  if (amount == null) return null\r\n  const currencyCode = (currency || 'USD').toUpperCase()\r\n  try {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: currencyCode,\r\n      maximumFractionDigits: 0\r\n    }).format(amount)\r\n  } catch {\r\n    return `${currencyCode} ${amount.toLocaleString()}`\r\n  }\r\n}\r\n\r\nconst formatWorkbookDate = (value?: string | number | null) => {\r\n  if (value == null || value === '') {\r\n    return '—'\r\n  }\r\n\r\n  const castNumber = typeof value === 'number' ? value : Number(value)\r\n  if (!Number.isNaN(castNumber) && castNumber > 0) {\r\n    const excelEpoch = new Date(1899, 11, 30)\r\n    const computed = new Date(excelEpoch.getTime() + castNumber * 24 * 60 * 60 * 1000)\r\n    if (!Number.isNaN(computed.getTime())) {\r\n      return computed.toLocaleDateString()\r\n    }\r\n  }\r\n\r\n  if (typeof value === 'string') {\r\n    const parsed = new Date(value)\r\n    if (!Number.isNaN(parsed.getTime())) {\r\n      return parsed.toLocaleDateString()\r\n    }\r\n  }\r\n\r\n  return String(value)\r\n}\r\n\r\nconst AcknowledgementNotes = ({ notes }: { notes: string }) => {\r\n  try {\r\n    const parsed = JSON.parse(notes)\r\n    const lineItems: Array<Record<string, unknown>> = Array.isArray(parsed?.line_items)\r\n      ? parsed.line_items\r\n      : []\r\n\r\n    if (lineItems.length > 0) {\r\n      return (\r\n        <div className=\"mt-2 space-y-2 rounded-md border border-emerald-400/30 bg-emerald-500/5 p-3 text-xs text-emerald-50\">\r\n          <div className=\"flex flex-wrap items-center gap-2 text-emerald-200\">\r\n            <span className=\"font-semibold uppercase tracking-wide\">\r\n              {parsed?.source ? String(parsed.source) : 'Legacy workbook import'}\r\n            </span>\r\n            {parsed?.run_id && <span>Run ID {parsed.run_id}</span>}\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            {lineItems.map((item, index) => {\r\n              const sheet = String(item.sheet ?? 'Sheet')\r\n              const row = item.row != null ? String(item.row) : '?'\r\n              const amountValue =\r\n                item.amount_converted ??\r\n                item.amount_original ??\r\n                undefined\r\n              const amountNumber =\r\n                typeof amountValue === 'number'\r\n                  ? amountValue\r\n                  : amountValue != null\r\n                    ? Number(amountValue)\r\n                    : undefined\r\n              const currency =\r\n                item.currency_converted ??\r\n                item.currency_original ??\r\n                parsed?.currency ??\r\n                'USD'\r\n              const comment = item.comments ? String(item.comments) : null\r\n              const orderDate = formatWorkbookDate(item.order_date as string | number | null)\r\n              const settlementDate = formatWorkbookDate(\r\n                item.settlement_date as string | number | null\r\n              )\r\n\r\n              const amountDisplay =\r\n                amountNumber != null && !Number.isNaN(amountNumber)\r\n                  ? formatCurrencyValue(amountNumber, String(currency)) ??\r\n                  amountNumber.toLocaleString()\r\n                  : null\r\n\r\n              return (\r\n                <div\r\n                  key={`${sheet}-${row}-${index}`}\r\n                  className=\"rounded border border-emerald-500/20 bg-emerald-500/10 p-2\"\r\n                >\r\n                  <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n                    <span className=\"font-semibold uppercase tracking-wide text-emerald-200\">\r\n                      {sheet} #{row}\r\n                    </span>\r\n                    {amountDisplay && <span>{amountDisplay}</span>}\r\n                  </div>\r\n                  <div className=\"mt-1 flex flex-wrap gap-4 text-emerald-100\">\r\n                    {orderDate !== '—' && <span>Order: {orderDate}</span>}\r\n                    {settlementDate !== '—' && <span>Settlement: {settlementDate}</span>}\r\n                  </div>\r\n                  {comment && <p className=\"mt-1 italic text-emerald-200\">{comment}</p>}\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  } catch (error) {\r\n    // fall back to default rendering below\r\n  }\r\n\r\n  return (\r\n    <p className=\"mt-2 whitespace-pre-wrap break-words text-emerald-50\">\r\n      {notes}\r\n    </p>\r\n  )\r\n}\r\n\r\nconst stakeholderCategoryConfig = [\r\n  { key: 'shareholders', label: 'Shareholders', roles: ['shareholder'] },\r\n  { key: 'legal', label: 'Legal & Counsel', roles: ['lawyer'] },\r\n  { key: 'accounting', label: 'Accounting', roles: ['accountant'] },\r\n  { key: 'auditors', label: 'Auditors', roles: ['auditor'] },\r\n  { key: 'administrators', label: 'Administrators', roles: ['administrator'] },\r\n  { key: 'strategic', label: 'Strategic Partners', roles: ['strategic_partner'] },\r\n  { key: 'other', label: 'Other Stakeholders', roles: ['other'] }\r\n]\r\n\r\nconst formatWebsite = (website?: string | null) => {\r\n  if (!website) return null\r\n\r\n  try {\r\n    const url = new URL(website)\r\n    return url.hostname.replace(/^www\\./, '')\r\n  } catch {\r\n    return website.replace(/^https?:\\/\\//, '')\r\n  }\r\n}\r\n\r\nconst allocationStatusOptions = [\r\n  { value: 'pending', label: 'Pending' },\r\n  { value: 'committed', label: 'Committed' },\r\n  { value: 'active', label: 'Active' },\r\n  { value: 'closed', label: 'Closed' },\r\n  { value: 'cancelled', label: 'Cancelled' }\r\n]\r\n\r\nexport function EntityDetailEnhanced({\r\n  entity: initialEntity,\r\n  directors: initialDirectors,\r\n  stakeholders: initialStakeholders,\r\n  folders: initialFolders,\r\n  flags: initialFlags,\r\n  deals,\r\n  events: initialEvents,\r\n  investors: initialInvestors,\r\n  valuations: initialValuations,\r\n  positions: initialPositions\r\n}: EntityDetailEnhancedProps) {\r\n  const [activeTab, setActiveTab] = useState('overview')\r\n  const [entity, setEntity] = useState(initialEntity)\r\n  const [directors, setDirectors] = useState<Director[]>(initialDirectors)\r\n  const [stakeholders, setStakeholders] = useState<Stakeholder[]>(initialStakeholders)\r\n  const [folders, setFolders] = useState<Folder[]>(initialFolders)\r\n  const [flags, setFlags] = useState<EntityFlagSummary[]>(initialFlags)\r\n  const [documents, setDocuments] = useState<EntityDocument[]>([])\r\n  const [documentsLoading, setDocumentsLoading] = useState(true)\r\n  const [documentsError, setDocumentsError] = useState<string | null>(null)\r\n  const [selectedFolderId, setSelectedFolderId] = useState<string | null>(null)\r\n  const [events, setEvents] = useState<EntityEvent[]>(initialEvents)\r\n  const [eventsLoading, setEventsLoading] = useState(false)\r\n  const [directorModalOpen, setDirectorModalOpen] = useState(false)\r\n  const [directorModalMode, setDirectorModalMode] = useState<'create' | 'edit'>('create')\r\n  const [editingDirector, setEditingDirector] = useState<Director | null>(null)\r\n  const [stakeholderModalOpen, setStakeholderModalOpen] = useState(false)\r\n  const [stakeholderModalMode, setStakeholderModalMode] = useState<'create' | 'edit'>('create')\r\n  const [editingStakeholder, setEditingStakeholder] = useState<Stakeholder | null>(null)\r\n  const [editEntityModalOpen, setEditEntityModalOpen] = useState(false)\r\n  const [deleteEntityDialogOpen, setDeleteEntityDialogOpen] = useState(false)\r\n  const [investors, setInvestors] = useState<EntityInvestorSummary[]>(initialInvestors)\r\n  const [valuations, setValuations] = useState<Valuation[]>(initialValuations)\r\n  const [editingValuation, setEditingValuation] = useState<Valuation | null>(null)\r\n  const [positions, setPositions] = useState<Position[]>(initialPositions)\r\n  const [positionModalOpen, setPositionModalOpen] = useState(false)\r\n  const [editingPosition, setEditingPosition] = useState<Position | null>(null)\r\n  const [investorModalOpen, setInvestorModalOpen] = useState(false)\r\n  const [updatingInvestorId, setUpdatingInvestorId] = useState<string | null>(null)\r\n  const [removingInvestorId, setRemovingInvestorId] = useState<string | null>(null)\r\n  const [investorRefreshLoading, setInvestorRefreshLoading] = useState(false)\r\n  const [flagModalOpen, setFlagModalOpen] = useState(false)\r\n  const [resolvingFlagId, setResolvingFlagId] = useState<string | null>(null)\r\n  const [flagRefreshLoading, setFlagRefreshLoading] = useState(false)\r\n  const [valuationModalOpen, setValuationModalOpen] = useState(false)\r\n\r\n  // Document preview hook (replaces old preview state)\r\n  const documentViewer = useDocumentViewer()\r\n\r\n  const [editingDocument, setEditingDocument] = useState<EntityDocument | null>(null)\r\n  const [editDocumentModalOpen, setEditDocumentModalOpen] = useState(false)\r\n  const [editingSubscription, setEditingSubscription] = useState<{ investorId: string, subscription: any } | null>(null)\r\n  const [subscriptionModalOpen, setSubscriptionModalOpen] = useState(false)\r\n  const [savingSubscription, setSavingSubscription] = useState(false)\r\n  const [editingInvestorId, setEditingInvestorId] = useState<string | null>(null)\r\n  const [editingSubscriptionData, setEditingSubscriptionData] = useState<any>(null)\r\n\r\n  // Subscription form refs\r\n  const commitmentRef = useRef<HTMLInputElement>(null)\r\n  const currencyRef = useRef<HTMLInputElement>(null)\r\n  const statusRef = useRef<string>('')\r\n  const effectiveDateRef = useRef<HTMLInputElement>(null)\r\n  const fundingDueDateRef = useRef<HTMLInputElement>(null)\r\n  const unitsRef = useRef<HTMLInputElement>(null)\r\n  const notesRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n  // Confirmation dialog hook\r\n  const { confirm, ConfirmationDialog } = useConfirmationDialog()\r\n\r\n  const fetchFolders = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`/api/entities/${entity.id}/folders`)\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch folders')\r\n      }\r\n      const data = await response.json()\r\n      setFolders(data.folders || [])\r\n    } catch (error) {\r\n      console.error('Failed to fetch folders:', error)\r\n      toast.error('Failed to refresh folders')\r\n    }\r\n  }, [entity.id])\r\n\r\n  const fetchDocuments = useCallback(async () => {\r\n    setDocumentsLoading(true)\r\n    setDocumentsError(null)\r\n    try {\r\n      const response = await fetch(`/api/documents?entity_id=${entity.id}`)\r\n      if (!response.ok) {\r\n        const data = await response.json().catch(() => ({}))\r\n        throw new Error(data.error || 'Failed to load documents')\r\n      }\r\n      const data = await response.json()\r\n      setDocuments(data.documents || [])\r\n    } catch (error: any) {\r\n      setDocumentsError(error.message)\r\n    } finally {\r\n      setDocumentsLoading(false)\r\n    }\r\n  }, [entity.id])\r\n\r\n  const refreshEntityData = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`/api/entities/${entity.id}`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setEntity(data.entity)\r\n        setDirectors(data.directors || [])\r\n        setStakeholders(data.stakeholders || [])\r\n        setFolders(data.folders || [])\r\n        setFlags(data.flags || [])\r\n        setInvestors((data.investors || []) as EntityInvestorSummary[])\r\n        setEvents((data.entity_events || []) as EntityEvent[])\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to refresh entity data:', error)\r\n    }\r\n  }, [entity.id])\r\n\r\n  useEffect(() => {\r\n    fetchDocuments()\r\n  }, [fetchDocuments])\r\n\r\n  useEffect(() => {\r\n    if (selectedFolderId && folders.some((folder) => folder.id === selectedFolderId)) {\r\n      return\r\n    }\r\n    if (folders.length > 0) {\r\n      setSelectedFolderId(folders[0].id)\r\n    } else {\r\n      setSelectedFolderId(null)\r\n    }\r\n  }, [folders, selectedFolderId])\r\n\r\n  const activeDirectors = useMemo(\r\n    () => directors.filter((director) => !director.effective_to),\r\n    [directors]\r\n  )\r\n\r\n  const formerDirectors = useMemo(\r\n    () => directors.filter((director) => director.effective_to),\r\n    [directors]\r\n  )\r\n\r\n  const stakeholderSections = useMemo(() => {\r\n    const groups: Record<string, Stakeholder[]> = {}\r\n    stakeholderCategoryConfig.forEach((category) => {\r\n      groups[category.key] = []\r\n    })\r\n\r\n    stakeholders.forEach((stakeholder) => {\r\n      const category =\r\n        stakeholderCategoryConfig.find((config) => config.roles.includes(stakeholder.role)) ??\r\n        stakeholderCategoryConfig.find((config) => config.key === 'other')\r\n      const key = category?.key ?? 'other'\r\n      if (!groups[key]) groups[key] = []\r\n      groups[key].push(stakeholder)\r\n    })\r\n\r\n    return groups\r\n  }, [stakeholders])\r\n\r\n  const folderMap = useMemo(() => {\r\n    const map = new Map<string, Folder>()\r\n    folders.forEach((folder) => map.set(folder.id, folder))\r\n    return map\r\n  }, [folders])\r\n\r\n  const filteredDocuments = useMemo(() => {\r\n    if (!selectedFolderId) return documents\r\n    return documents.filter((doc) => doc.folder_id === selectedFolderId)\r\n  }, [documents, selectedFolderId])\r\n\r\n  const activeFolder = selectedFolderId ? folderMap.get(selectedFolderId) ?? null : null\r\n\r\n  const sortedFlags = useMemo(() => {\r\n    const statusPriority: Record<string, number> = {\r\n      open: 0,\r\n      in_progress: 1,\r\n      closed: 2\r\n    }\r\n\r\n    return [...flags].sort((a, b) => {\r\n      const priorityDiff =\r\n        (statusPriority[a.status] ?? 3) - (statusPriority[b.status] ?? 3)\r\n      if (priorityDiff !== 0) return priorityDiff\r\n      return new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n    })\r\n  }, [flags])\r\n\r\n  const refreshInvestors = useCallback(async () => {\r\n    setInvestorRefreshLoading(true)\r\n    try {\r\n      const response = await fetch(`/api/entities/${entity.id}/investors`)\r\n      if (!response.ok) {\r\n        const data = await response.json().catch(() => ({}))\r\n        throw new Error(data.error || 'Failed to load investors')\r\n      }\r\n      const data = await response.json()\r\n      setInvestors((data.investors || []) as EntityInvestorSummary[])\r\n    } catch (error) {\r\n      console.error('Failed to refresh investors:', error)\r\n      toast.error('Unable to reload entity investors.')\r\n    } finally {\r\n      setInvestorRefreshLoading(false)\r\n    }\r\n  }, [entity.id])\r\n\r\n  const refreshFlags = useCallback(async () => {\r\n    setFlagRefreshLoading(true)\r\n    try {\r\n      const response = await fetch(`/api/entities/${entity.id}/flags`)\r\n      if (!response.ok) {\r\n        const data = await response.json().catch(() => ({}))\r\n        throw new Error(data.error || 'Failed to load flags')\r\n      }\r\n      const data = await response.json()\r\n      setFlags((data.flags || []) as EntityFlagSummary[])\r\n    } catch (error) {\r\n      console.error('Failed to refresh flags:', error)\r\n      toast.error('Unable to reload entity flags.')\r\n    } finally {\r\n      setFlagRefreshLoading(false)\r\n    }\r\n  }, [entity.id])\r\n\r\n  const refreshValuations = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`/api/staff/vehicles/${entity.id}/valuations`)\r\n      if (!response.ok) {\r\n        throw new Error('Failed to load valuations')\r\n      }\r\n      const data = await response.json()\r\n      setValuations((data.valuations || []) as Valuation[])\r\n    } catch (error) {\r\n      console.error('Failed to refresh valuations:', error)\r\n      toast.error('Unable to reload valuations.')\r\n    }\r\n  }, [entity.id])\r\n\r\n  const refreshPositions = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`/api/staff/vehicles/${entity.id}/positions`)\r\n      if (!response.ok) {\r\n        throw new Error('Failed to load positions')\r\n      }\r\n      const data = await response.json()\r\n      setPositions((data.positions || []) as Position[])\r\n    } catch (error) {\r\n      console.error('Failed to refresh positions:', error)\r\n      toast.error('Unable to reload positions.')\r\n    }\r\n  }, [entity.id])\r\n\r\n  const handleDeleteValuation = useCallback((valuation: Valuation) => {\r\n    confirm(\r\n      {\r\n        title: 'Delete valuation?',\r\n        description: `This will permanently remove the valuation dated ${new Date(valuation.as_of_date).toLocaleDateString()}.`,\r\n        confirmText: 'Delete',\r\n        cancelText: 'Cancel',\r\n        variant: 'destructive'\r\n      },\r\n      async () => {\r\n        try {\r\n          const response = await fetch(\r\n            `/api/staff/vehicles/${entity.id}/valuations/${valuation.id}`,\r\n            { method: 'DELETE' }\r\n          )\r\n          if (!response.ok) {\r\n            const data = await response.json().catch(() => ({}))\r\n            throw new Error(data.error || 'Failed to delete valuation')\r\n          }\r\n          toast.success('Valuation deleted.')\r\n          await refreshValuations()\r\n        } catch (error: any) {\r\n          console.error('Failed to delete valuation:', error)\r\n          toast.error(error.message || 'Unable to delete valuation.')\r\n        }\r\n      }\r\n    )\r\n  }, [confirm, entity.id, refreshValuations])\r\n\r\n  const handleDeletePosition = useCallback((position: Position) => {\r\n    confirm(\r\n      {\r\n        title: 'Delete position?',\r\n        description: 'This will permanently remove this position record.',\r\n        confirmText: 'Delete',\r\n        cancelText: 'Cancel',\r\n        variant: 'destructive'\r\n      },\r\n      async () => {\r\n        try {\r\n          const response = await fetch(\r\n            `/api/staff/vehicles/${entity.id}/positions/${position.id}`,\r\n            { method: 'DELETE' }\r\n          )\r\n          if (!response.ok) {\r\n            const data = await response.json().catch(() => ({}))\r\n            throw new Error(data.error || 'Failed to delete position')\r\n          }\r\n          toast.success('Position deleted.')\r\n          await refreshPositions()\r\n        } catch (error: any) {\r\n          console.error('Failed to delete position:', error)\r\n          toast.error(error.message || 'Unable to delete position.')\r\n        }\r\n      }\r\n    )\r\n  }, [confirm, entity.id, refreshPositions])\r\n\r\n  const handleInvestorAdded = useCallback(\r\n    (investor: EntityInvestorSummary) => {\r\n      setInvestors((prev) => [investor, ...prev])\r\n      toast.success('Investor linked to entity.')\r\n    },\r\n    []\r\n  )\r\n\r\n  const handleInvestorStatusChange = useCallback(\r\n    async (linkId: string, newStatus: string, hasSubscription: boolean) => {\r\n      setUpdatingInvestorId(linkId)\r\n      try {\r\n        const payload: Record<string, any> = { allocation_status: newStatus }\r\n        if (hasSubscription) {\r\n          payload.subscription = { status: newStatus }\r\n        }\r\n\r\n        const response = await fetch(`/api/entities/${entity.id}/investors/${linkId}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload)\r\n        })\r\n\r\n        if (!response.ok) {\r\n          const data = await response.json().catch(() => ({}))\r\n          throw new Error(data.error || 'Failed to update investor')\r\n        }\r\n\r\n        const data = await response.json()\r\n        setInvestors((prev) => prev.map((inv) => (inv.id === linkId ? (data.investor as EntityInvestorSummary) : inv)))\r\n        toast.success('Investor allocation updated.')\r\n      } catch (error) {\r\n        console.error('Failed to update investor status:', error)\r\n        toast.error('Unable to update investor allocation.')\r\n      } finally {\r\n        setUpdatingInvestorId(null)\r\n      }\r\n    },\r\n    [entity.id]\r\n  )\r\n\r\n  // Initialize statusRef when editing subscription changes\r\n  useEffect(() => {\r\n    if (editingSubscription?.subscription) {\r\n      statusRef.current = editingSubscription.subscription.status || 'pending'\r\n    }\r\n  }, [editingSubscription])\r\n\r\n  const handleSaveSubscription = useCallback(async () => {\r\n    if (!editingSubscription) return\r\n\r\n    setSavingSubscription(true)\r\n    try {\r\n      const payload: Record<string, any> = {}\r\n\r\n      // Build subscription update object\r\n      const subscriptionUpdate: Record<string, any> = {}\r\n\r\n      if (commitmentRef.current?.value) {\r\n        subscriptionUpdate.commitment = parseFloat(commitmentRef.current.value)\r\n      }\r\n\r\n      if (currencyRef.current?.value) {\r\n        subscriptionUpdate.currency = currencyRef.current.value.toUpperCase()\r\n      }\r\n\r\n      if (statusRef.current) {\r\n        subscriptionUpdate.status = statusRef.current\r\n        payload.allocation_status = statusRef.current\r\n      }\r\n\r\n      if (effectiveDateRef.current?.value) {\r\n        subscriptionUpdate.effective_date = effectiveDateRef.current.value\r\n      }\r\n\r\n      if (fundingDueDateRef.current?.value) {\r\n        subscriptionUpdate.funding_due_at = fundingDueDateRef.current.value\r\n      }\r\n\r\n      if (unitsRef.current?.value) {\r\n        subscriptionUpdate.units = parseFloat(unitsRef.current.value)\r\n      }\r\n\r\n      if (notesRef.current?.value !== undefined) {\r\n        subscriptionUpdate.acknowledgement_notes = notesRef.current.value\r\n      }\r\n\r\n      payload.subscription = subscriptionUpdate\r\n\r\n      const response = await fetch(`/api/entities/${entity.id}/investors/${editingSubscription.investorId}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json().catch(() => ({}))\r\n        throw new Error(data.error || 'Failed to update subscription')\r\n      }\r\n\r\n      const data = await response.json()\r\n      setInvestors((prev) =>\r\n        prev.map((inv) =>\r\n          inv.id === editingSubscription.investorId ? (data.investor as EntityInvestorSummary) : inv\r\n        )\r\n      )\r\n\r\n      toast.success('Subscription updated successfully!')\r\n      setSubscriptionModalOpen(false)\r\n      setEditingSubscription(null)\r\n    } catch (error) {\r\n      console.error('Failed to update subscription:', error)\r\n      toast.error('Unable to update subscription.')\r\n    } finally {\r\n      setSavingSubscription(false)\r\n    }\r\n  }, [editingSubscription, entity.id])\r\n\r\n  const handleRemoveInvestor = useCallback(\r\n    async (linkId: string, investorName: string) => {\r\n      confirm(\r\n        {\r\n          title: 'Remove Investor',\r\n          description: `Are you sure you want to unlink ${investorName} from this entity? This action cannot be undone. The entity-investor link data will be permanently deleted.`,\r\n          confirmText: 'Remove Investor',\r\n          cancelText: 'Keep Investor',\r\n          variant: 'destructive'\r\n        },\r\n        async () => {\r\n          setRemovingInvestorId(linkId)\r\n          try {\r\n            const response = await fetch(`/api/entities/${entity.id}/investors/${linkId}`, {\r\n              method: 'DELETE'\r\n            })\r\n\r\n            if (!response.ok) {\r\n              const data = await response.json().catch(() => ({}))\r\n              throw new Error(data.error || 'Failed to remove investor')\r\n            }\r\n\r\n            setInvestors((prev) => prev.filter((inv) => inv.id !== linkId))\r\n            toast.success('Investor unlinked from entity.')\r\n          } catch (error) {\r\n            console.error('Failed to remove investor:', error)\r\n            toast.error('Unable to remove investor from entity.')\r\n          } finally {\r\n            setRemovingInvestorId(null)\r\n          }\r\n        }\r\n      )\r\n    },\r\n    [entity.id, confirm]\r\n  )\r\n\r\n  // Document preview now handled by useDocumentViewer hook\r\n\r\n  const handleDownloadDocument = useCallback(async (docId: string) => {\r\n    try {\r\n      const response = await fetch(`/api/documents/${docId}/download`)\r\n      if (!response.ok) {\r\n        throw new Error('Failed to get download URL')\r\n      }\r\n\r\n      const data = await response.json()\r\n      if (data.download_url) {\r\n        window.open(data.download_url, '_blank')\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to download document:', error)\r\n      toast.error('Failed to download document')\r\n    }\r\n  }, [])\r\n\r\n  const handleEditDocument = useCallback((doc: EntityDocument) => {\r\n    setEditingDocument(doc)\r\n    setEditDocumentModalOpen(true)\r\n  }, [])\r\n\r\n  const handleDeleteDocument = useCallback(\r\n    async (docId: string, docName: string) => {\r\n      confirm(\r\n        {\r\n          title: 'Delete Document',\r\n          description: `Are you sure you want to delete \"${docName}\"? This action cannot be undone and will permanently remove the document and all its versions.`,\r\n          confirmText: 'Delete Document',\r\n          variant: 'destructive'\r\n        },\r\n        async () => {\r\n          try {\r\n            const response = await fetch(`/api/staff/documents/${docId}`, {\r\n              method: 'DELETE'\r\n            })\r\n\r\n            if (!response.ok) {\r\n              const data = await response.json().catch(() => ({}))\r\n              throw new Error(data.error || 'Failed to delete document')\r\n            }\r\n\r\n            // Remove from local state\r\n            setDocuments((prev) => prev.filter((d) => d.id !== docId))\r\n            toast.success('Document deleted successfully')\r\n            await fetchDocuments()\r\n          } catch (error) {\r\n            console.error('Failed to delete document:', error)\r\n            toast.error(error instanceof Error ? error.message : 'Failed to delete document')\r\n          }\r\n        }\r\n      )\r\n    },\r\n    [confirm, fetchDocuments]\r\n  )\r\n\r\n  const handleFlagCreated = useCallback(\r\n    (flag: EntityFlagSummary) => {\r\n      setFlags((prev) => [flag, ...prev])\r\n      toast.success('Flag created for this entity.')\r\n    },\r\n    []\r\n  )\r\n\r\n  const updateFlag = useCallback(\r\n    async (flagId: string, updates: Record<string, unknown>, message?: string) => {\r\n      setResolvingFlagId(flagId)\r\n      try {\r\n        const response = await fetch(`/api/entities/${entity.id}/flags/${flagId}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(updates)\r\n        })\r\n\r\n        if (!response.ok) {\r\n          const data = await response.json().catch(() => ({}))\r\n          throw new Error(data.error || 'Failed to update flag')\r\n        }\r\n\r\n        const data = await response.json()\r\n        setFlags((prev) =>\r\n          prev.map((flag) => (flag.id === flagId ? (data.flag as EntityFlagSummary) : flag))\r\n        )\r\n        if (message) {\r\n          toast.success(message)\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to update flag:', error)\r\n        toast.error(error instanceof Error ? error.message : 'Unable to update flag.')\r\n      } finally {\r\n        setResolvingFlagId(null)\r\n      }\r\n    },\r\n    [entity.id]\r\n  )\r\n\r\n  const handleResolveFlag = useCallback(\r\n    async (flagId: string) => {\r\n      await updateFlag(flagId, { status: 'closed' }, 'Flag marked as resolved.')\r\n    },\r\n    [updateFlag]\r\n  )\r\n\r\n  const handleReopenFlag = useCallback(\r\n    async (flagId: string) => {\r\n      await updateFlag(\r\n        flagId,\r\n        { status: 'open', resolution_notes: null, resolved_at: null },\r\n        'Flag reopened.'\r\n      )\r\n    },\r\n    [updateFlag]\r\n  )\r\n\r\n  const handleProgressFlag = useCallback(\r\n    async (flagId: string) => {\r\n      await updateFlag(flagId, { status: 'in_progress' }, 'Flag marked in progress.')\r\n    },\r\n    [updateFlag]\r\n  )\r\n\r\n  const handleDeleteFlag = useCallback(\r\n    async (flagId: string, flagTitle: string) => {\r\n      confirm(\r\n        {\r\n          title: 'Delete Flag',\r\n          description: `Are you sure you want to delete the flag \"${flagTitle}\"? This action cannot be undone.`,\r\n          confirmText: 'Delete Flag',\r\n          variant: 'destructive'\r\n        },\r\n        async () => {\r\n          try {\r\n            const response = await fetch(`/api/entities/${entity.id}/flags/${flagId}`, {\r\n              method: 'DELETE'\r\n            })\r\n\r\n            if (!response.ok) {\r\n              const data = await response.json().catch(() => ({}))\r\n              throw new Error(data.error || 'Failed to remove flag')\r\n            }\r\n\r\n            setFlags((prev) => prev.filter((flag) => flag.id !== flagId))\r\n            toast.success('Flag removed from entity.')\r\n          } catch (error) {\r\n            console.error('Failed to delete flag:', error)\r\n            toast.error(error instanceof Error ? error.message : 'Unable to delete flag.')\r\n          }\r\n        }\r\n      )\r\n    },\r\n    [entity.id, confirm]\r\n  )\r\n\r\n  // Director handlers\r\n  const handleEditDirector = useCallback((director: Director) => {\r\n    setEditingDirector(director)\r\n    setDirectorModalMode('edit')\r\n    setDirectorModalOpen(true)\r\n  }, [])\r\n\r\n  const handleDeleteDirector = useCallback(\r\n    async (directorId: string, directorName: string) => {\r\n      confirm(\r\n        {\r\n          title: 'Delete Director',\r\n          description: `Are you sure you want to remove ${directorName} from this entity? This action cannot be undone.`,\r\n          confirmText: 'Delete Director',\r\n          variant: 'destructive'\r\n        },\r\n        async () => {\r\n          try {\r\n            const response = await fetch(\r\n              `/api/entities/${entity.id}/directors/${directorId}`,\r\n              { method: 'DELETE' }\r\n            )\r\n\r\n            if (!response.ok) {\r\n              const data = await response.json().catch(() => ({}))\r\n              throw new Error(data.error || 'Failed to delete director')\r\n            }\r\n\r\n            setDirectors((prev) => prev.filter((d) => d.id !== directorId))\r\n            toast.success('Director removed successfully')\r\n            await refreshEntityData()\r\n          } catch (error) {\r\n            console.error('Failed to delete director:', error)\r\n            toast.error(error instanceof Error ? error.message : 'Failed to delete director')\r\n          }\r\n        }\r\n      )\r\n    },\r\n    [entity.id, confirm, refreshEntityData]\r\n  )\r\n\r\n  // Stakeholder handlers\r\n  const handleEditStakeholder = useCallback((stakeholder: Stakeholder) => {\r\n    setEditingStakeholder(stakeholder)\r\n    setStakeholderModalMode('edit')\r\n    setStakeholderModalOpen(true)\r\n  }, [])\r\n\r\n  const handleDeleteStakeholder = useCallback(\r\n    async (stakeholderId: string, stakeholderName: string) => {\r\n      confirm(\r\n        {\r\n          title: 'Delete Stakeholder',\r\n          description: `Are you sure you want to remove ${stakeholderName} from this entity? This action cannot be undone.`,\r\n          confirmText: 'Delete Stakeholder',\r\n          variant: 'destructive'\r\n        },\r\n        async () => {\r\n          try {\r\n            const response = await fetch(\r\n              `/api/entities/${entity.id}/stakeholders/${stakeholderId}`,\r\n              { method: 'DELETE' }\r\n            )\r\n\r\n            if (!response.ok) {\r\n              const data = await response.json().catch(() => ({}))\r\n              throw new Error(data.error || 'Failed to delete stakeholder')\r\n            }\r\n\r\n            setStakeholders((prev) => prev.filter((s) => s.id !== stakeholderId))\r\n            toast.success('Stakeholder removed successfully')\r\n            await refreshEntityData()\r\n          } catch (error) {\r\n            console.error('Failed to delete stakeholder:', error)\r\n            toast.error(error instanceof Error ? error.message : 'Failed to delete stakeholder')\r\n          }\r\n        }\r\n      )\r\n    },\r\n    [entity.id, confirm, refreshEntityData]\r\n  )\r\n\r\n  const overviewStats = useMemo(() => {\r\n    return [\r\n      {\r\n        label: 'Vehicle Code',\r\n        value: entity.entity_code || '—',\r\n        icon: ClipboardList\r\n      },\r\n      {\r\n        label: 'Platform',\r\n        value: entity.platform || '—',\r\n        icon: Building2\r\n      },\r\n      {\r\n        label: 'Formation Date',\r\n        value: entity.formation_date\r\n          ? new Date(entity.formation_date).toLocaleDateString()\r\n          : '—',\r\n        icon: CalendarClock\r\n      },\r\n      {\r\n        label: 'Active Stakeholders',\r\n        value: stakeholders.filter((s) => !s.effective_to).length.toString(),\r\n        icon: Users\r\n      }\r\n    ]\r\n  }, [entity, stakeholders])\r\n  const logoUrl = entity.logo_url || ''\r\n  const [imageError, setImageError] = useState(false)\r\n\r\n  // Reset image error when entity changes\r\n  useEffect(() => {\r\n    setImageError(false)\r\n  }, [entity.id, entity.logo_url])\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-6\">\r\n        <div className=\"space-y-4 max-w-3xl\">\r\n          <Link href=\"/versotech_main/entities\" className=\"inline-flex\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"gap-2 text-foreground hover:text-emerald-200 hover:bg-white/10\"\r\n            >\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              Back to Vehicles\r\n            </Button>\r\n          </Link>\r\n          <div className=\"flex items-center gap-3 flex-wrap\">\r\n            {entity.entity_code && (\r\n              <Badge\r\n                variant=\"outline\"\r\n                className=\"font-mono text-lg px-3 py-1 border-emerald-400/40 text-emerald-100\"\r\n              >\r\n                {entity.entity_code}\r\n              </Badge>\r\n            )}\r\n            <h1 className=\"text-3xl font-bold text-foreground\">{entity.name}</h1>\r\n            <Badge className=\"bg-white/10 border-white/15 text-foreground\">\r\n              {entityTypeLabels[entity.type] || entity.type}\r\n            </Badge>\r\n            {entity.status && (\r\n              <Badge\r\n                className={\r\n                  entity.status === 'LIVE'\r\n                    ? 'bg-emerald-500/20 border-emerald-400/40 text-emerald-100'\r\n                    : entity.status === 'CLOSED'\r\n                      ? 'bg-red-500/20 border-red-400/40 text-red-100'\r\n                      : 'bg-amber-500/20 border-amber-400/40 text-amber-100'\r\n                }\r\n              >\r\n                {entity.status}\r\n              </Badge>\r\n            )}\r\n            <Badge variant=\"outline\" className=\"border-emerald-400/40 text-emerald-100\">\r\n              {entity.currency}\r\n            </Badge>\r\n          </div>\r\n          <div className=\"text-muted-foreground space-y-1\">\r\n            {entity.investment_name && (\r\n              <p className=\"font-medium text-foreground text-lg\">\r\n                Investment: {entity.investment_name}\r\n              </p>\r\n            )}\r\n            {entity.platform && <p>Platform: {entity.platform}</p>}\r\n            {entity.former_entity && <p>Formerly: {entity.former_entity}</p>}\r\n            <p>{entity.domicile || 'Domicile unknown'}</p>\r\n            <p className=\"text-sm\">\r\n              Created {new Date(entity.created_at).toLocaleString()}\r\n              {entity.updated_at && ` • Updated ${new Date(entity.updated_at).toLocaleString()}`}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex flex-col items-center md:items-end gap-4 shrink-0\">\r\n          <div className=\"rounded-2xl border border-white/10 bg-white/[0.06] p-5 w-[220px] flex flex-col items-center gap-3 text-sm\">\r\n            <div className=\"h-24 w-24 rounded-xl border border-white/10 bg-black/60 flex items-center justify-center overflow-hidden\">\r\n              {logoUrl && !imageError ? (\r\n                <Image\r\n                  src={logoUrl}\r\n                  alt={`${entity.name} logo`}\r\n                  width={96}\r\n                  height={96}\r\n                  className=\"h-full w-full object-contain p-2\"\r\n                  unoptimized\r\n                  onError={() => {\r\n                    console.error('Failed to load logo:', logoUrl)\r\n                    setImageError(true)\r\n                  }}\r\n                />\r\n              ) : (\r\n                <Building2 className=\"h-10 w-10 text-muted-foreground\" />\r\n              )}\r\n            </div>\r\n            <div className=\"text-center space-y-1\">\r\n              <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">Branding</p>\r\n              <p className=\"text-sm font-medium text-foreground\">\r\n                {logoUrl && !imageError ? 'Logo uploaded' : imageError ? 'Logo failed to load' : 'No logo set'}\r\n              </p>\r\n              {formatWebsite(entity.website_url) && (\r\n                <a\r\n                  href={entity.website_url || '#'}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"text-xs text-emerald-300 hover:text-emerald-200 transition-colors\"\r\n                >\r\n                  {formatWebsite(entity.website_url)}\r\n                </a>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Button\r\n              onClick={() => setEditEntityModalOpen(true)}\r\n              className=\"gap-2 rounded-full bg-emerald-500 text-emerald-950 px-5 shadow-[0_12px_30px_rgba(16,185,129,0.35)] transition-colors hover:bg-emerald-400\"\r\n            >\r\n              <Edit className=\"h-4 w-4\" />\r\n              Edit Metadata\r\n            </Button>\r\n            <Button\r\n              onClick={() => setDeleteEntityDialogOpen(true)}\r\n              variant=\"outline\"\r\n              className=\"gap-2 rounded-full border-red-500/50 text-red-400 hover:bg-red-500/10 hover:text-red-300\"\r\n            >\r\n              <Trash2 className=\"h-4 w-4\" />\r\n              Delete Entity\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {flags.length > 0 && (\r\n        <Card className=\"border-amber-400/40 bg-amber-500/10\">\r\n          <CardHeader className=\"pb-3 flex flex-row items-center justify-between space-y-0\">\r\n            <CardTitle className=\"text-amber-100 flex items-center gap-2\">\r\n              <AlertTriangle className=\"h-5 w-5\" />\r\n              Action Required ({flags.length})\r\n            </CardTitle>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={() => setFlagModalOpen(true)}\r\n              className=\"gap-2 border-amber-400/40 text-amber-100 hover:bg-amber-500/20\"\r\n            >\r\n              <Plus className=\"h-4 w-4\" />\r\n              Add Flag\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-2\">\r\n              {flags.slice(0, 3).map((flag) => (\r\n                <div\r\n                  key={flag.id}\r\n                  className=\"flex items-start gap-3 rounded-lg border border-white/10 bg-white/5 p-3\"\r\n                >\r\n                  {getSeverityIcon(flag.severity)}\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"font-medium text-foreground\">{flag.title}</p>\r\n                    {flag.description && (\r\n                      <p className=\"text-sm text-muted-foreground\">{flag.description}</p>\r\n                    )}\r\n                  </div>\r\n                  <Badge className={getSeverityColor(flag.severity)}>{flag.severity}</Badge>\r\n                </div>\r\n              ))}\r\n              {flags.length > 3 && (\r\n                <Button variant=\"ghost\" size=\"sm\" onClick={() => setActiveTab('flags')}>\r\n                  View all {flags.length} flags\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        {overviewStats.map((stat) => (\r\n          <Card key={stat.label} className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                {stat.label}\r\n              </CardTitle>\r\n              <stat.icon className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-lg font-semibold text-foreground\">{stat.value}</div>\r\n            </CardContent>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n\r\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-4\">\r\n        <TabsList className=\"bg-white/5 border border-white/10\">\r\n          <TabsTrigger value=\"overview\" className=\"gap-2\">\r\n            <Building2 className=\"h-4 w-4\" />\r\n            Overview\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"investors\" className=\"gap-2\">\r\n            <ShieldCheck className=\"h-4 w-4\" />\r\n            Subscriptions ({investors.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"documents\" className=\"gap-2\">\r\n            <FolderOpen className=\"h-4 w-4\" />\r\n            Documents & Folders\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"stakeholders\" className=\"gap-2\">\r\n            <Users className=\"h-4 w-4\" />\r\n            Stakeholders ({stakeholders.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"directors\" className=\"gap-2\">\r\n            <Users className=\"h-4 w-4\" />\r\n            Directors ({directors.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"deals\" className=\"gap-2\">\r\n            <Briefcase className=\"h-4 w-4\" />\r\n            Deals ({deals.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"health\" className=\"gap-2\">\r\n            <Activity className=\"h-4 w-4\" />\r\n            Health\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"activity\" className=\"gap-2\">\r\n            <Activity className=\"h-4 w-4\" />\r\n            Activity Log\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"valuations\" className=\"gap-2\">\r\n            <TrendingUp className=\"h-4 w-4\" />\r\n            Valuations ({valuations.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"positions\" className=\"gap-2\">\r\n            <ClipboardList className=\"h-4 w-4\" />\r\n            Positions ({positions.length})\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* Overview Tab - showing CSV fields */}\r\n        <TabsContent value=\"overview\" className=\"space-y-4\">\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader>\r\n              <CardTitle>Vehicle Details</CardTitle>\r\n              <CardDescription>Complete information about this vehicle</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm\">\r\n              {entity.entity_code && (\r\n                <div>\r\n                  <p className=\"text-muted-foreground\">Vehicle Code</p>\r\n                  <p className=\"text-foreground font-medium font-mono text-lg\">\r\n                    {entity.entity_code}\r\n                  </p>\r\n                </div>\r\n              )}\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Legal Name</p>\r\n                <p className=\"text-foreground font-medium\">{entity.name}</p>\r\n              </div>\r\n              {entity.investment_name && (\r\n                <div>\r\n                  <p className=\"text-muted-foreground\">Investment Name</p>\r\n                  <p className=\"text-foreground font-medium\">{entity.investment_name}</p>\r\n                </div>\r\n              )}\r\n              {entity.platform && (\r\n                <div>\r\n                  <p className=\"text-muted-foreground\">Platform</p>\r\n                  <p className=\"text-foreground font-medium\">{entity.platform}</p>\r\n                </div>\r\n              )}\r\n              {entity.former_entity && (\r\n                <div>\r\n                  <p className=\"text-muted-foreground\">Former Entity</p>\r\n                  <p className=\"text-foreground font-medium\">{entity.former_entity}</p>\r\n                </div>\r\n              )}\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Type</p>\r\n                <p className=\"text-foreground font-medium\">\r\n                  {entityTypeLabels[entity.type] || entity.type}\r\n                </p>\r\n              </div>\r\n              {entity.status && (\r\n                <div>\r\n                  <p className=\"text-muted-foreground\">Status</p>\r\n                  <Badge\r\n                    className={\r\n                      entity.status === 'LIVE'\r\n                        ? 'bg-emerald-500/20 border-emerald-400/40 text-emerald-100'\r\n                        : entity.status === 'CLOSED'\r\n                          ? 'bg-red-500/20 border-red-400/40 text-red-100'\r\n                          : 'bg-amber-500/20 border-amber-400/40 text-amber-100'\r\n                    }\r\n                  >\r\n                    {entity.status}\r\n                  </Badge>\r\n                </div>\r\n              )}\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Domicile</p>\r\n                <p className=\"text-foreground font-medium\">{entity.domicile || '—'}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Jurisdiction</p>\r\n                <p className=\"text-foreground font-medium\">{entity.legal_jurisdiction || '—'}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Registration Number</p>\r\n                <p className=\"text-foreground font-medium\">{entity.registration_number || '—'}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Currency</p>\r\n                <p className=\"text-foreground font-medium\">{entity.currency}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Formation Date</p>\r\n                <p className=\"text-foreground font-medium\">\r\n                  {entity.formation_date\r\n                    ? new Date(entity.formation_date).toLocaleDateString()\r\n                    : '—'}\r\n                </p>\r\n              </div>\r\n              {entity.reporting_type && (\r\n                <div>\r\n                  <p className=\"text-muted-foreground\">Reporting Type</p>\r\n                  <p className=\"text-foreground font-medium\">{entity.reporting_type}</p>\r\n                </div>\r\n              )}\r\n              {entity.requires_reporting !== null && (\r\n                <div>\r\n                  <p className=\"text-muted-foreground\">Requires Reporting</p>\r\n                  <Badge variant=\"outline\">\r\n                    {entity.requires_reporting ? 'Yes' : 'No'}\r\n                  </Badge>\r\n                </div>\r\n              )}\r\n              {entity.address && (\r\n                <div className=\"md:col-span-2\">\r\n                  <p className=\"text-muted-foreground\">Address</p>\r\n                  <p className=\"text-foreground whitespace-pre-wrap\">{entity.address}</p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Service Providers Section */}\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-lg\">Service Providers</CardTitle>\r\n              <CardDescription>Arranger and legal counsel assignments for this vehicle</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Arranger</p>\r\n                {entity.arranger_entity ? (\r\n                  <div>\r\n                    <p className=\"text-foreground font-medium\">{entity.arranger_entity.legal_name}</p>\r\n                    {entity.arranger_entity.email && (\r\n                      <p className=\"text-xs text-muted-foreground\">{entity.arranger_entity.email}</p>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"text-foreground\">—</p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <p className=\"text-muted-foreground\">Legal Counsel</p>\r\n                {entity.lawyer ? (\r\n                  <div>\r\n                    <p className=\"text-foreground font-medium\">\r\n                      {entity.lawyer.display_name || entity.lawyer.firm_name}\r\n                    </p>\r\n                    {entity.lawyer.firm_name && entity.lawyer.display_name && entity.lawyer.firm_name !== entity.lawyer.display_name && (\r\n                      <p className=\"text-xs text-muted-foreground\">{entity.lawyer.firm_name}</p>\r\n                    )}\r\n                    {entity.lawyer.primary_contact_email && (\r\n                      <p className=\"text-xs text-muted-foreground\">{entity.lawyer.primary_contact_email}</p>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"text-foreground\">—</p>\r\n                )}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Notes Section */}\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-lg\">Notes</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <p className=\"text-foreground whitespace-pre-wrap leading-relaxed\">\r\n                {entity.notes?.trim() || 'No notes recorded yet.'}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Investors Tab */}\r\n        <TabsContent value=\"investors\" className=\"space-y-4\">\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader className=\"flex flex-row items-center justify-between gap-4\">\r\n              <div>\r\n                <CardTitle>Subscriptions & Allocations</CardTitle>\r\n                <CardDescription>\r\n                  Manage allocations, commitments, and onboarding for this vehicle.\r\n                </CardDescription>\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <Button variant=\"outline\" size=\"sm\" onClick={refreshInvestors} disabled={investorRefreshLoading}>\r\n                  {investorRefreshLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                  Refresh\r\n                </Button>\r\n                <Button size=\"sm\" className=\"gap-2\" onClick={() => setInvestorModalOpen(true)}>\r\n                  <Plus className=\"h-4 w-4\" />\r\n                  Link Investor\r\n                </Button>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-3\">\r\n              {investors.length === 0 ? (\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  No investors linked yet. Use &ldquo;Link Investor&rdquo; to allocate commitments to this\r\n                  vehicle.\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {investors.map((investor) => {\r\n                    const allocationStatus = investor.allocation_status || 'pending'\r\n                    const investorProfile = investor.investor\r\n                    const subscriptionEntries = investor.subscriptions ?? []\r\n                    const primarySubscription = investor.subscription\r\n                    const hasSubscription = subscriptionEntries.length > 0\r\n                    const holdings = investor.holdings ?? []\r\n                    const hasHoldings = holdings.length > 0\r\n                    const totalCommitment =\r\n                      investor.total_commitment ??\r\n                      (hasSubscription\r\n                        ? subscriptionEntries.reduce(\r\n                          (sum, entry) => sum + (entry.commitment ?? 0),\r\n                          0\r\n                        )\r\n                        : null)\r\n                    const totalHoldingsAmount =\r\n                      investor.total_holdings_amount ??\r\n                      (hasHoldings\r\n                        ? holdings.reduce((sum, entry) => sum + (entry.subscribed_amount ?? 0), 0)\r\n                        : null)\r\n\r\n                    return (\r\n                      <div\r\n                        key={investor.id}\r\n                        className=\"rounded-lg border border-white/10 bg-white/5 p-3 transition-colors hover:bg-white/10\"\r\n                      >\r\n                        <div className=\"flex flex-col gap-3 md:flex-row md:items-start md:justify-between\">\r\n                          <div className=\"flex-1 space-y-2.5\">\r\n                            {/* Investor Header */}\r\n                            <div className=\"flex flex-wrap items-center gap-2\">\r\n                              <p className=\"text-base font-semibold text-foreground\">\r\n                                {investorProfile?.legal_name || 'Unknown Investor'}\r\n                              </p>\r\n                              {investorProfile?.type && (\r\n                                <Badge variant=\"outline\" className=\"bg-white/10 text-xs capitalize\">\r\n                                  {investorProfile.type.replace(/_/g, ' ')}\r\n                                </Badge>\r\n                              )}\r\n                              <Badge className={getAllocationStatusColor(allocationStatus)}>\r\n                                {allocationStatus.replace(/_/g, ' ').toUpperCase()}\r\n                              </Badge>\r\n                            </div>\r\n\r\n                            {/* Investor Meta */}\r\n                            <div className=\"text-xs text-muted-foreground flex flex-wrap gap-x-4 gap-y-1\">\r\n                              {investor.relationship_role && (\r\n                                <span>\r\n                                  <span className=\"font-medium text-foreground\">Role:</span>{' '}\r\n                                  {investor.relationship_role}\r\n                                </span>\r\n                              )}\r\n                              {investorProfile?.email && <span>{investorProfile.email}</span>}\r\n                              <span>Linked {new Date(investor.created_at).toLocaleDateString()}</span>\r\n                            </div>\r\n\r\n                            {/* Subscriptions Section - Compact */}\r\n                            {hasSubscription && (\r\n                              <div className=\"rounded-md border border-emerald-400/30 bg-emerald-500/5 p-2.5\">\r\n                                <div className=\"flex items-center justify-between mb-2\">\r\n                                  <div className=\"flex items-center gap-1.5\">\r\n                                    <h4 className=\"text-xs font-semibold text-emerald-100 uppercase\">\r\n                                      Subscription{subscriptionEntries.length > 1 ? 's' : ''}\r\n                                    </h4>\r\n                                    {subscriptionEntries.length > 1 && (\r\n                                      <Badge variant=\"outline\" className=\"border-emerald-400/40 bg-emerald-500/10 text-emerald-100 text-xs h-4 px-1.5\">\r\n                                        {subscriptionEntries.length}\r\n                                      </Badge>\r\n                                    )}\r\n                                  </div>\r\n                                  <Button\r\n                                    variant=\"ghost\"\r\n                                    size=\"sm\"\r\n                                    className=\"h-6 px-1.5 text-xs text-emerald-200 hover:text-emerald-100 hover:bg-emerald-500/20\"\r\n                                    onClick={() => {\r\n                                      setEditingInvestorId(investor.id)\r\n                                      setEditingSubscriptionData(primarySubscription)\r\n                                      setSubscriptionModalOpen(true)\r\n                                    }}\r\n                                  >\r\n                                    <Edit className=\"h-3 w-3 mr-1\" />\r\n                                    Edit\r\n                                  </Button>\r\n                                </div>\r\n\r\n                                {totalCommitment != null && (\r\n                                  <div className=\"text-base font-bold text-emerald-100 mb-2\">\r\n                                    {formatCurrencyValue(totalCommitment, primarySubscription?.currency)}\r\n                                  </div>\r\n                                )}\r\n\r\n                                <div className=\"space-y-2\">\r\n                                  {subscriptionEntries.map((entry) => {\r\n                                    const displayAmount = formatCurrencyValue(entry.commitment, entry.currency)\r\n                                    const percentFunded = entry.commitment && entry.commitment > 0 && entry.funded_amount ? (entry.funded_amount / entry.commitment) * 100 : 0\r\n                                    const hasFees = entry.subscription_fee_amount || entry.bd_fee_amount || entry.spread_fee_amount || entry.finra_fee_amount\r\n                                    const totalFees = [\r\n                                      entry.subscription_fee_amount,\r\n                                      entry.bd_fee_amount,\r\n                                      entry.spread_fee_amount,\r\n                                      entry.finra_fee_amount\r\n                                    ].reduce((sum: number, fee) => sum + (fee || 0), 0)\r\n                                    const moic = entry.funded_amount && entry.funded_amount > 0 && entry.current_nav ? entry.current_nav / entry.funded_amount : null\r\n\r\n                                    return (\r\n                                      <div key={entry.id} className=\"text-xs border-b border-emerald-400/10 pb-2 last:border-0\">\r\n                                        <div className=\"flex items-center justify-between mb-1.5\">\r\n                                          <div className=\"flex items-center gap-2\">\r\n                                            <span className=\"font-medium text-emerald-100\">\r\n                                              {displayAmount || 'Pending'}\r\n                                            </span>\r\n                                            {entry.opportunity_name && (\r\n                                              <span className=\"text-emerald-300 italic text-[10px]\">\r\n                                                ({entry.opportunity_name})\r\n                                              </span>\r\n                                            )}\r\n                                          </div>\r\n                                          <Badge className=\"bg-emerald-500/20 text-emerald-100 text-xs h-4 px-1.5 uppercase\">\r\n                                            {entry.status?.replace(/_/g, ' ') || 'Pending'}\r\n                                          </Badge>\r\n                                        </div>\r\n\r\n                                        {/* Dates row */}\r\n                                        {(entry.committed_at || entry.created_at) && (\r\n                                          <div className=\"flex gap-3 text-emerald-200 mb-1\">\r\n                                            {entry.committed_at && (\r\n                                              <span>\r\n                                                <span className=\"text-emerald-300\">Committed:</span>{' '}\r\n                                                {new Date(entry.committed_at).toLocaleDateString()}\r\n                                              </span>\r\n                                            )}\r\n                                            {entry.created_at && (\r\n                                              <span>\r\n                                                <span className=\"text-emerald-300\">Created:</span>{' '}\r\n                                                {new Date(entry.created_at).toLocaleDateString()}\r\n                                              </span>\r\n                                            )}\r\n                                          </div>\r\n                                        )}\r\n\r\n                                        {/* Share structure */}\r\n                                        {(entry.num_shares || entry.price_per_share) && (\r\n                                          <div className=\"flex gap-3 text-emerald-200 mb-1\">\r\n                                            {entry.num_shares && (\r\n                                              <span>\r\n                                                <span className=\"text-emerald-300\">Shares:</span> {entry.num_shares.toLocaleString()}\r\n                                              </span>\r\n                                            )}\r\n                                            {entry.price_per_share && (\r\n                                              <span>\r\n                                                <span className=\"text-emerald-300\">Price:</span> {formatCurrencyValue(entry.price_per_share, entry.currency)}\r\n                                              </span>\r\n                                            )}\r\n                                            {entry.spread_per_share && entry.spread_per_share > 0 && (\r\n                                              <span className=\"text-green-300\">\r\n                                                <span className=\"text-emerald-300\">Spread:</span> {formatCurrencyValue(entry.spread_per_share, entry.currency)}\r\n                                              </span>\r\n                                            )}\r\n                                          </div>\r\n                                        )}\r\n\r\n                                        {/* Fees and funded amount */}\r\n                                        <div className=\"flex gap-3 text-emerald-200\">\r\n                                          {entry.funded_amount != null && (\r\n                                            <span>\r\n                                              <span className=\"text-emerald-300\">Funded:</span> {formatCurrencyValue(entry.funded_amount, entry.currency)} ({percentFunded.toFixed(0)}%)\r\n                                            </span>\r\n                                          )}\r\n                                          {hasFees && (\r\n                                            <span>\r\n                                              <span className=\"text-emerald-300\">Fees:</span> {formatCurrencyValue(totalFees, entry.currency)}\r\n                                            </span>\r\n                                          )}\r\n                                          {moic != null && (\r\n                                            <span className={moic >= 1 ? 'text-green-300' : 'text-red-300'}>\r\n                                              <span className=\"text-emerald-300\">MOIC:</span> {moic.toFixed(2)}x\r\n                                            </span>\r\n                                          )}\r\n                                        </div>\r\n\r\n                                        {entry.acknowledgement_notes && (\r\n                                          <AcknowledgementNotes notes={entry.acknowledgement_notes} />\r\n                                        )}\r\n                                      </div>\r\n                                    )\r\n                                  })}\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n\r\n                            {/* Holdings Section - Compact */}\r\n                            {hasHoldings && (\r\n                              <div className=\"rounded-md border border-blue-400/30 bg-blue-500/5 p-2.5\">\r\n                                <div className=\"flex items-center gap-1.5 mb-2\">\r\n                                  <h4 className=\"text-xs font-semibold text-blue-100 uppercase\">Holdings</h4>\r\n                                  <Badge variant=\"outline\" className=\"border-blue-400/40 bg-blue-500/10 text-blue-100 text-xs h-4 px-1.5\">\r\n                                    {holdings.length}\r\n                                  </Badge>\r\n                                </div>\r\n\r\n                                {totalHoldingsAmount != null && (\r\n                                  <div className=\"text-base font-bold text-blue-100 mb-2\">\r\n                                    {formatCurrencyValue(\r\n                                      totalHoldingsAmount,\r\n                                      holdings[0]?.currency ?? primarySubscription?.currency\r\n                                    )}\r\n                                  </div>\r\n                                )}\r\n\r\n                                <div className=\"space-y-1.5\">\r\n                                  {holdings.map((holding) => {\r\n                                    const holdingAmount = formatCurrencyValue(holding.subscribed_amount, holding.currency)\r\n                                    return (\r\n                                      <div key={holding.id} className=\"text-xs\">\r\n                                        <div className=\"flex items-center justify-between mb-1\">\r\n                                          <div>\r\n                                            <div className=\"font-medium text-blue-100\">\r\n                                              {holding.deal_name || 'Deal Allocation'}\r\n                                            </div>\r\n                                            <div className=\"font-semibold text-blue-100\">\r\n                                              {holdingAmount || 'Pending'}\r\n                                            </div>\r\n                                          </div>\r\n                                          <Badge className=\"bg-blue-500/20 text-blue-100 text-xs h-4 px-1.5 uppercase\">\r\n                                            {holding.status?.replace(/_/g, ' ') || 'Pending'}\r\n                                          </Badge>\r\n                                        </div>\r\n                                        <div className=\"flex gap-3 text-blue-200\">\r\n                                          <span>\r\n                                            <span className=\"text-blue-300\">Eff:</span>{' '}\r\n                                            {holding.effective_date\r\n                                              ? new Date(holding.effective_date).toLocaleDateString()\r\n                                              : '—'}\r\n                                          </span>\r\n                                          <span>\r\n                                            <span className=\"text-blue-300\">Due:</span>{' '}\r\n                                            {holding.funding_due_at\r\n                                              ? new Date(holding.funding_due_at).toLocaleDateString()\r\n                                              : '—'}\r\n                                          </span>\r\n                                        </div>\r\n                                      </div>\r\n                                    )\r\n                                  })}\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n\r\n                            {/* Notes Section */}\r\n                            {investor.notes && (\r\n                              <div className=\"text-sm text-muted-foreground whitespace-pre-wrap border-l-2 border-white/10 pl-3 py-1\">\r\n                                {investor.notes}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n\r\n                          {/* Right Controls Column */}\r\n                          <div className=\"flex flex-col items-end gap-2 min-w-[160px]\">\r\n                            <div className=\"space-y-1.5 text-right w-full\">\r\n                              <Label className=\"text-xs uppercase text-muted-foreground\">Status</Label>\r\n                              <Select\r\n                                value={allocationStatus}\r\n                                onValueChange={(value) =>\r\n                                  handleInvestorStatusChange(investor.id, value, hasSubscription)\r\n                                }\r\n                                disabled={updatingInvestorId === investor.id}\r\n                              >\r\n                                <SelectTrigger className=\"w-full h-8 text-xs\">\r\n                                  <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                  {allocationStatusOptions.map((option) => (\r\n                                    <SelectItem key={option.value} value={option.value}>\r\n                                      {option.label}\r\n                                    </SelectItem>\r\n                                  ))}\r\n                                </SelectContent>\r\n                              </Select>\r\n                            </div>\r\n\r\n                            {investor.source === 'entity_link' || investor.source === 'hybrid' ? (\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                className=\"text-red-400 hover:text-red-200 text-xs\"\r\n                                onClick={() =>\r\n                                  handleRemoveInvestor(investor.id, investorProfile?.legal_name || 'this investor')\r\n                                }\r\n                                disabled={removingInvestorId === investor.id}\r\n                              >\r\n                                {removingInvestorId === investor.id ? (\r\n                                  <Loader2 className=\"mr-1 h-3 w-3 animate-spin\" />\r\n                                ) : null}\r\n                                Remove\r\n                              </Button>\r\n                            ) : (\r\n                              <div className=\"text-xs text-gray-500 italic\">Auto-discovered</div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )\r\n                  })}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Documents & Folders Tab - Combined */}\r\n        <TabsContent value=\"documents\" className=\"space-y-4\">\r\n          {/* Folder Structure with Management */}\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader>\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <CardTitle>Document Folders</CardTitle>\r\n                  <CardDescription>\r\n                    Create, organize, and manage document folders with Google Drive-like structure\r\n                  </CardDescription>\r\n                </div>\r\n                <UploadDocumentModal\r\n                  entityId={entity.id}\r\n                  triggerLabel=\"Upload Document\"\r\n                  onUploaded={fetchDocuments}\r\n                  defaultFolderId={selectedFolderId}\r\n                  folderOptions={folders\r\n                    .filter((folder) => {\r\n                      const isRootEntityFolder =\r\n                        (folder.folder_type === 'entity' || folder.folder_type === 'vehicle_root') &&\r\n                        !folder.parent_folder_id\r\n                      return !isRootEntityFolder\r\n                    })\r\n                    .map((folder) => ({\r\n                      id: folder.id,\r\n                      name: folder.name,\r\n                      path: folder.path\r\n                    }))}\r\n                />\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <FolderManager\r\n                entityId={entity.id}\r\n                folders={folders}\r\n                documents={documents}\r\n                onFoldersChange={fetchFolders}\r\n                onFolderSelect={setSelectedFolderId}\r\n                selectedFolderId={selectedFolderId}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* All Documents List */}\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader>\r\n              <CardTitle>\r\n                {activeFolder ? `${activeFolder.name} Documents` : 'All Documents'} ({filteredDocuments.length})\r\n              </CardTitle>\r\n              <CardDescription>\r\n                {activeFolder\r\n                  ? `Showing files stored under ${activeFolder.path}`\r\n                  : 'Complete list of all documents across all folders'}\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {documentsLoading ? (\r\n                <div className=\"text-gray-400 text-sm\">Loading documents…</div>\r\n              ) : documentsError ? (\r\n                <div className=\"text-red-200 text-sm\">{documentsError}</div>\r\n              ) : filteredDocuments.length === 0 ? (\r\n                <div className=\"text-gray-400 text-sm\">\r\n                  No documents uploaded yet. Use the \"Upload Document\" button above to add documents.\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {filteredDocuments.map((doc) => {\r\n                    const isExternal = Boolean(doc.external_url)\r\n                    const actionHref = isExternal\r\n                      ? (doc.external_url as string)\r\n                      : `/api/documents/${doc.id}/download`\r\n                    const actionText = isExternal ? 'Open Link' : 'Download'\r\n                    const timestampLabel = isExternal ? 'Linked' : 'Uploaded'\r\n                    const folderInfo = doc.folder_id ? folderMap.get(doc.folder_id) : null\r\n\r\n                    return (\r\n                      <div\r\n                        key={doc.id}\r\n                        className=\"flex items-center justify-between rounded-lg border border-white/10 bg-white/5 px-4 py-3 hover:bg-white/10 transition-colors\"\r\n                      >\r\n                        <div className=\"space-y-1\">\r\n                          <div className=\"flex flex-wrap items-center gap-2\">\r\n                            <FileText className=\"h-4 w-4 text-gray-400\" />\r\n                            <span className=\"font-medium text-white\">\r\n                              {doc.name || doc.file_key?.split('/').pop() || 'Untitled document'}\r\n                            </span>\r\n                            {doc.type && (\r\n                              <Badge className=\"bg-white/10 border border-white/10 text-white capitalize\">\r\n                                {doc.type.replace('_', ' ')}\r\n                              </Badge>\r\n                            )}\r\n                            {isExternal && (\r\n                              <Badge variant=\"outline\" className=\"text-xs bg-emerald-500/10 border-emerald-400/30 text-emerald-100\">\r\n                                External Link\r\n                              </Badge>\r\n                            )}\r\n                          </div>\r\n                          <p className=\"text-xs text-gray-400\">\r\n                            {timestampLabel} {new Date(doc.created_at).toLocaleString()}\r\n                            {doc.created_by && ` • ${doc.created_by}`}\r\n                          </p>\r\n                          {folderInfo && (\r\n                            <p className=\"text-xs text-gray-400\">\r\n                              Folder: {folderInfo.path} ({folderInfo.folder_type.replace('_', ' ')})\r\n                            </p>\r\n                          )}\r\n                          {doc.description && (\r\n                            <p className=\"text-sm text-gray-400 max-w-2xl\">\r\n                              {doc.description}\r\n                            </p>\r\n                          )}\r\n                          {isExternal && (\r\n                            <p className=\"text-xs text-emerald-200 break-all\">\r\n                              {doc.external_url}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          {isExternal ? (\r\n                            <>\r\n                              <Button variant=\"outline\" size=\"sm\" className=\"gap-2\" asChild>\r\n                                <Link\r\n                                  href={actionHref}\r\n                                  target=\"_blank\"\r\n                                  rel=\"noopener noreferrer\"\r\n                                >\r\n                                  <ExternalLink className=\"h-4 w-4\" />\r\n                                  Visit\r\n                                </Link>\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                className=\"h-8 px-2 text-white hover:text-emerald-100 hover:bg-white/10\"\r\n                                onClick={() => handleEditDocument(doc)}\r\n                              >\r\n                                <Edit className=\"h-4 w-4\" />\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                className=\"h-8 px-2 text-white hover:text-red-400 hover:bg-red-500/10\"\r\n                                onClick={() => handleDeleteDocument(doc.id, doc.name || 'Untitled document')}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                className=\"gap-2\"\r\n                                onClick={() => documentViewer.openPreview({\r\n                                  id: doc.id,\r\n                                  file_name: doc.name || doc.file_name || 'document',\r\n                                  mime_type: doc.type || undefined,\r\n                                  type: doc.type || undefined,\r\n                                  file_size_bytes: undefined,\r\n                                })}\r\n                              >\r\n                                <Eye className=\"h-4 w-4\" />\r\n                                Preview\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                className=\"gap-2\"\r\n                                onClick={() => handleDownloadDocument(doc.id)}\r\n                              >\r\n                                <Download className=\"h-4 w-4\" />\r\n                                Download\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                className=\"h-8 px-2 text-white hover:text-emerald-100 hover:bg-white/10\"\r\n                                onClick={() => handleEditDocument(doc)}\r\n                              >\r\n                                <Edit className=\"h-4 w-4\" />\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                className=\"h-8 px-2 text-white hover:text-red-400 hover:bg-red-500/10\"\r\n                                onClick={() => handleDeleteDocument(doc.id, doc.name || 'Untitled document')}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )\r\n                  })}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Stakeholders Tab */}\r\n        <TabsContent value=\"stakeholders\" className=\"space-y-4\">\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader className=\"flex flex-row items-center justify-between\">\r\n              <div>\r\n                <CardTitle>Stakeholders</CardTitle>\r\n                <CardDescription>\r\n                  Lawyers, accountants, auditors, administrators, and strategic partners\r\n                </CardDescription>\r\n              </div>\r\n              <Button\r\n                size=\"sm\"\r\n                className=\"gap-2\"\r\n                onClick={() => {\r\n                  setStakeholderModalMode('create')\r\n                  setEditingStakeholder(null)\r\n                  setStakeholderModalOpen(true)\r\n                }}\r\n              >\r\n                <Plus className=\"h-4 w-4\" />\r\n                Add Stakeholder\r\n              </Button>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {stakeholders.length === 0 ? (\r\n                <div className=\"text-gray-400 text-sm\">\r\n                  No stakeholders recorded yet.\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-4\">\r\n                  {stakeholderCategoryConfig.map((category) => {\r\n                    const group = stakeholderSections[category.key] ?? []\r\n                    return (\r\n                      <div key={category.key} className=\"rounded-lg border border-white/10 bg-white/5 p-4\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <div>\r\n                            <p className=\"text-sm font-semibold text-white\">{category.label}</p>\r\n                            <p className=\"text-xs text-gray-400\">\r\n                              {group.length === 0\r\n                                ? 'No relationships recorded yet.'\r\n                                : `Tracking ${group.length} relationship${group.length === 1 ? '' : 's'}.`}\r\n                            </p>\r\n                          </div>\r\n                          <Badge className=\"bg-white/10 border border-white/10 text-white\">\r\n                            {group.length}\r\n                          </Badge>\r\n                        </div>\r\n\r\n                        {group.length > 0 && (\r\n                          <div className=\"space-y-3\">\r\n                            {group.map((stakeholder) => (\r\n                              <div\r\n                                key={stakeholder.id}\r\n                                className=\"rounded-md border border-white/10 bg-black/20 px-4 py-3\"\r\n                              >\r\n                                <div className=\"flex items-center justify-between\">\r\n                                  <div className=\"flex-1\">\r\n                                    <p className=\"font-medium text-white\">\r\n                                      {stakeholder.company_name || stakeholder.contact_person || 'Unnamed'}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-gray-400\">\r\n                                      {stakeholder.contact_person && `Contact: ${stakeholder.contact_person}`}\r\n                                      {stakeholder.email && ` • ${stakeholder.email}`}\r\n                                      {stakeholder.phone && ` • ${stakeholder.phone}`}\r\n                                    </p>\r\n                                  </div>\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <Badge className=\"bg-white/10 border border-white/10 text-white\">\r\n                                      {stakeholder.effective_to ? 'Former' : 'Active'}\r\n                                    </Badge>\r\n                                    <Button\r\n                                      variant=\"ghost\"\r\n                                      size=\"sm\"\r\n                                      className=\"h-8 px-2 text-white hover:text-emerald-100 hover:bg-white/10\"\r\n                                      onClick={() => handleEditStakeholder(stakeholder)}\r\n                                    >\r\n                                      <Edit className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                    <Button\r\n                                      variant=\"ghost\"\r\n                                      size=\"sm\"\r\n                                      className=\"h-8 px-2 text-white hover:text-red-400 hover:bg-red-500/10\"\r\n                                      onClick={() =>\r\n                                        handleDeleteStakeholder(\r\n                                          stakeholder.id,\r\n                                          stakeholder.company_name || stakeholder.contact_person || 'stakeholder'\r\n                                        )\r\n                                      }\r\n                                    >\r\n                                      <Trash2 className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                  </div>\r\n                                </div>\r\n                                <p className=\"text-xs text-gray-400 mt-1\">\r\n                                  Effective {stakeholder.effective_from\r\n                                    ? new Date(stakeholder.effective_from).toLocaleDateString()\r\n                                    : 'unknown'}\r\n                                  {stakeholder.effective_to &&\r\n                                    ` • Ended ${new Date(stakeholder.effective_to).toLocaleDateString()}`}\r\n                                </p>\r\n                                {stakeholder.notes && (\r\n                                  <p className=\"text-sm text-gray-400 mt-2\">{stakeholder.notes}</p>\r\n                                )}\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )\r\n                  })}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Directors Tab */}\r\n        <TabsContent value=\"directors\" className=\"space-y-4\">\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader className=\"flex flex-row items-center justify-between\">\r\n              <div>\r\n                <CardTitle>Directors & Officers</CardTitle>\r\n                <CardDescription>\r\n                  Maintain the current roster and historical appointments\r\n                </CardDescription>\r\n              </div>\r\n              <Button\r\n                size=\"sm\"\r\n                className=\"gap-2\"\r\n                onClick={() => {\r\n                  setDirectorModalMode('create')\r\n                  setEditingDirector(null)\r\n                  setDirectorModalOpen(true)\r\n                }}\r\n              >\r\n                <Plus className=\"h-4 w-4\" />\r\n                Add Director\r\n              </Button>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {directors.length === 0 ? (\r\n                <div className=\"text-gray-400 text-sm\">No directors recorded yet.</div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {directors.map((director) => (\r\n                    <div\r\n                      key={director.id}\r\n                      className=\"rounded-lg border border-white/10 bg-white/5 px-4 py-3\"\r\n                    >\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"font-medium text-white\">{director.full_name}</p>\r\n                          <p className=\"text-xs text-gray-400\">\r\n                            {director.role || 'Role not specified'}\r\n                            {director.email && ` • ${director.email}`}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Badge className=\"bg-white/10 border border-white/10 text-white\">\r\n                            {director.effective_to ? 'Former' : 'Active'}\r\n                          </Badge>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            className=\"h-8 px-2 text-white hover:text-emerald-100 hover:bg-white/10\"\r\n                            onClick={() => handleEditDirector(director)}\r\n                          >\r\n                            <Edit className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            className=\"h-8 px-2 text-white hover:text-red-400 hover:bg-red-500/10\"\r\n                            onClick={() => handleDeleteDirector(director.id, director.full_name)}\r\n                          >\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-400 mt-2\">\r\n                        Effective{' '}\r\n                        {director.effective_from\r\n                          ? new Date(director.effective_from).toLocaleDateString()\r\n                          : 'unknown'}\r\n                        {director.effective_to &&\r\n                          ` • Ended ${new Date(director.effective_to).toLocaleDateString()}`}\r\n                      </div>\r\n                      {director.notes && (\r\n                        <p className=\"text-sm text-gray-400 mt-2\">{director.notes}</p>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Deals Tab */}\r\n        <TabsContent value=\"deals\" className=\"space-y-4\">\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader>\r\n              <CardTitle>Deals Linked to {entity.name}</CardTitle>\r\n              <CardDescription>\r\n                Click on any deal to view details and manage investment opportunities\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {deals.length === 0 ? (\r\n                <div className=\"text-gray-400 text-sm py-8 text-center\">\r\n                  <Briefcase className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\r\n                  <p className=\"text-white\">No deals linked to this entity yet.</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {deals.map((deal) => (\r\n                    <Link\r\n                      key={deal.id}\r\n                      href={`/versotech_main/deals/${deal.id}`}\r\n                      className=\"flex items-center justify-between rounded-lg border border-white/10 bg-white/5 px-4 py-3 transition-all hover:bg-white/10 hover:border-emerald-400/30 cursor-pointer group\"\r\n                    >\r\n                      <div className=\"flex items-start gap-3 flex-1\">\r\n                        <div className=\"h-10 w-10 rounded-full bg-emerald-500/10 flex items-center justify-center shrink-0 group-hover:bg-emerald-500/20 transition-colors\">\r\n                          <Briefcase className=\"h-5 w-5 text-emerald-400\" />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"font-medium text-white group-hover:text-emerald-100 transition-colors\">{deal.name}</p>\r\n                          <p className=\"text-xs text-gray-400 capitalize\">\r\n                            {deal.deal_type.replace('_', ' ')} • {deal.currency || '—'}\r\n                          </p>\r\n                          <p className=\"text-xs text-gray-400 mt-1\">\r\n                            Created {new Date(deal.created_at).toLocaleDateString()}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <Badge className={\r\n                        deal.status === 'active'\r\n                          ? 'bg-emerald-500/20 border-emerald-400/40 text-emerald-100'\r\n                          : deal.status === 'closed'\r\n                            ? 'bg-blue-500/20 border-blue-400/40 text-blue-100'\r\n                            : 'bg-amber-500/20 border-amber-400/40 text-amber-100'\r\n                      }>\r\n                        {deal.status}\r\n                      </Badge>\r\n                      <ExternalLink className=\"h-4 w-4 text-muted-foreground group-hover:text-emerald-400 transition-colors ml-2\" />\r\n                    </Link>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Health Tab - New automatic health monitoring system */}\r\n        <TabsContent value=\"health\" className=\"space-y-4\">\r\n          <EntityHealthMonitor\r\n            entity={entity}\r\n            directors={directors}\r\n            stakeholders={stakeholders}\r\n            documents={documents}\r\n            folders={folders}\r\n            deals={deals}\r\n            investors={investors}\r\n            onAction={(action) => {\r\n              // Handle quick actions from health monitor\r\n              switch (action) {\r\n                case 'edit_metadata':\r\n                  setEditEntityModalOpen(true)\r\n                  break\r\n                case 'add_stakeholder':\r\n                  setStakeholderModalOpen(true)\r\n                  break\r\n                case 'add_director':\r\n                  setDirectorModalOpen(true)\r\n                  break\r\n                case 'link_investor':\r\n                  setInvestorModalOpen(true)\r\n                  break\r\n                case 'create_flag':\r\n                  setFlagModalOpen(true)\r\n                  break\r\n                case 'upload_document':\r\n                case 'create_folder':\r\n                  setActiveTab('documents')\r\n                  break\r\n                default:\r\n                  console.log('Action not implemented:', action)\r\n              }\r\n            }}\r\n          />\r\n          <div className=\"flex justify-end\">\r\n            <Button\r\n              onClick={() => setFlagModalOpen(true)}\r\n              className=\"gap-2 bg-emerald-600 hover:bg-emerald-700 text-white\"\r\n            >\r\n              <Plus className=\"h-4 w-4\" />\r\n              Create Health Flag\r\n            </Button>\r\n          </div>\r\n        </TabsContent>\r\n\r\n        {/* Activity Tab */}\r\n        <TabsContent value=\"activity\" className=\"space-y-4\">\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader className=\"flex flex-row items-center justify-between\">\r\n              <div>\r\n                <CardTitle>Change Log</CardTitle>\r\n                <CardDescription>\r\n                  Automatic and manual updates recorded against this entity\r\n                </CardDescription>\r\n              </div>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={refreshEntityData}\r\n                disabled={eventsLoading}\r\n              >\r\n                Refresh\r\n              </Button>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {events.length === 0 ? (\r\n                <div className=\"text-muted-foreground text-sm\">\r\n                  No change events recorded yet.\r\n                </div>\r\n              ) : (\r\n                <ScrollArea className=\"max-h-[24rem] pr-4\">\r\n                  <div className=\"space-y-4\">\r\n                    {events.map((event) => (\r\n                      <div key={event.id} className=\"border-l-2 border-emerald-400/40 pl-4\">\r\n                        <p className=\"text-sm font-medium text-foreground\">\r\n                          {event.event_type.replace(/_/g, ' ')}\r\n                        </p>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {new Date(event.created_at).toLocaleString()}\r\n                          {event.changed_by_profile?.display_name &&\r\n                            ` • ${event.changed_by_profile.display_name}`}\r\n                        </p>\r\n                        {event.description && (\r\n                          <p className=\"text-sm text-muted-foreground mt-1\">{event.description}</p>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </ScrollArea>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Valuations Tab */}\r\n        <TabsContent value=\"valuations\" className=\"space-y-4\">\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader className=\"flex flex-row items-center justify-between\">\r\n              <div>\r\n                <CardTitle>NAV History</CardTitle>\r\n                <CardDescription>\r\n                  Net Asset Value (NAV) entries for this vehicle over time\r\n                </CardDescription>\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <ImportValuationsDialog\r\n                  vehicleId={entity.id}\r\n                  onImported={refreshValuations}\r\n                />\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => setValuationModalOpen(true)}\r\n                >\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Valuation\r\n                </Button>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {valuations.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <TrendingUp className=\"h-12 w-12 mx-auto text-muted-foreground mb-3\" />\r\n                  <p className=\"text-muted-foreground text-sm\">\r\n                    No valuations recorded yet. Add the first valuation to track NAV over time.\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full\">\r\n                    <thead>\r\n                      <tr className=\"border-b border-white/10\">\r\n                        <th className=\"text-left py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          As of Date\r\n                        </th>\r\n                        <th className=\"text-right py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          Total NAV\r\n                        </th>\r\n                        <th className=\"text-right py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          NAV per Unit\r\n                        </th>\r\n                        <th className=\"text-right py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          Actions\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {valuations.map((valuation) => (\r\n                        <tr key={valuation.id} className=\"border-b border-white/5 hover:bg-white/5\">\r\n                          <td className=\"py-3 px-4 text-sm\">\r\n                            {new Date(valuation.as_of_date).toLocaleDateString()}\r\n                          </td>\r\n                          <td className=\"py-3 px-4 text-sm text-right font-mono\">\r\n                            {valuation.nav_total\r\n                              ? `$${valuation.nav_total.toLocaleString('en-US', {\r\n                                minimumFractionDigits: 2,\r\n                                maximumFractionDigits: 2\r\n                              })}`\r\n                              : '-'}\r\n                          </td>\r\n                          <td className=\"py-3 px-4 text-sm text-right font-mono\">\r\n                            {valuation.nav_per_unit\r\n                              ? `$${valuation.nav_per_unit.toLocaleString('en-US', {\r\n                                minimumFractionDigits: 2,\r\n                                maximumFractionDigits: 6\r\n                              })}`\r\n                              : '-'}\r\n                          </td>\r\n                          <td className=\"py-3 px-4 text-right\">\r\n                            <div className=\"flex justify-end gap-2\">\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => setEditingValuation(valuation)}\r\n                              >\r\n                                <Edit className=\"h-4 w-4\" />\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleDeleteValuation(valuation)}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Positions Tab */}\r\n        <TabsContent value=\"positions\" className=\"space-y-4\">\r\n          <Card className=\"border border-white/10 bg-white/5\">\r\n            <CardHeader className=\"flex flex-row items-center justify-between\">\r\n              <div>\r\n                <CardTitle>Investor Positions</CardTitle>\r\n                <CardDescription>\r\n                  Unit balances and cost basis per investor for this vehicle\r\n                </CardDescription>\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <ImportPositionsDialog vehicleId={entity.id} onImported={refreshPositions} />\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    setEditingPosition(null)\r\n                    setPositionModalOpen(true)\r\n                  }}\r\n                >\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Position\r\n                </Button>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {positions.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <ClipboardList className=\"h-12 w-12 mx-auto text-muted-foreground mb-3\" />\r\n                  <p className=\"text-muted-foreground text-sm\">\r\n                    No position records yet. Import a CSV or add one manually.\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full\">\r\n                    <thead>\r\n                      <tr className=\"border-b border-white/10\">\r\n                        <th className=\"text-left py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          Investor\r\n                        </th>\r\n                        <th className=\"text-right py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          Units\r\n                        </th>\r\n                        <th className=\"text-right py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          Cost Basis\r\n                        </th>\r\n                        <th className=\"text-right py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          Last NAV\r\n                        </th>\r\n                        <th className=\"text-left py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          As of Date\r\n                        </th>\r\n                        <th className=\"text-right py-3 px-4 text-sm font-medium text-muted-foreground\">\r\n                          Actions\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {positions.map((position) => {\r\n                        const investorName =\r\n                          position.investor?.display_name ||\r\n                          position.investor?.legal_name ||\r\n                          position.investor?.email ||\r\n                          position.investor_id\r\n\r\n                        return (\r\n                          <tr\r\n                            key={position.id}\r\n                            className=\"border-b border-white/5 hover:bg-white/5\"\r\n                          >\r\n                            <td className=\"py-3 px-4 text-sm\">\r\n                              <div className=\"flex flex-col\">\r\n                                <span className=\"text-foreground\">{investorName}</span>\r\n                                {position.investor?.email && (\r\n                                  <span className=\"text-xs text-muted-foreground\">\r\n                                    {position.investor.email}\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"py-3 px-4 text-sm text-right font-mono\">\r\n                              {position.units != null\r\n                                ? position.units.toLocaleString('en-US', {\r\n                                  minimumFractionDigits: 0,\r\n                                  maximumFractionDigits: 6\r\n                                })\r\n                                : '-'}\r\n                            </td>\r\n                            <td className=\"py-3 px-4 text-sm text-right font-mono\">\r\n                              {position.cost_basis != null\r\n                                ? `$${position.cost_basis.toLocaleString('en-US', {\r\n                                  minimumFractionDigits: 2,\r\n                                  maximumFractionDigits: 2\r\n                                })}`\r\n                                : '-'}\r\n                            </td>\r\n                            <td className=\"py-3 px-4 text-sm text-right font-mono\">\r\n                              {position.last_nav != null\r\n                                ? `$${position.last_nav.toLocaleString('en-US', {\r\n                                  minimumFractionDigits: 2,\r\n                                  maximumFractionDigits: 6\r\n                                })}`\r\n                                : '-'}\r\n                            </td>\r\n                            <td className=\"py-3 px-4 text-sm\">\r\n                              {position.as_of_date\r\n                                ? new Date(position.as_of_date).toLocaleDateString()\r\n                                : '-'}\r\n                            </td>\r\n                            <td className=\"py-3 px-4 text-right\">\r\n                              <div className=\"flex justify-end gap-2\">\r\n                                <Button\r\n                                  variant=\"ghost\"\r\n                                  size=\"sm\"\r\n                                  onClick={() => {\r\n                                    setEditingPosition(position)\r\n                                    setPositionModalOpen(true)\r\n                                  }}\r\n                                >\r\n                                  <Edit className=\"h-4 w-4\" />\r\n                                </Button>\r\n                                <Button\r\n                                  variant=\"ghost\"\r\n                                  size=\"sm\"\r\n                                  onClick={() => handleDeletePosition(position)}\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4\" />\r\n                                </Button>\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        )\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      {/* Modals */}\r\n      <DirectorModalRefactored\r\n        entityId={entity.id}\r\n        open={directorModalOpen}\r\n        onClose={() => {\r\n          setDirectorModalOpen(false)\r\n          setDirectorModalMode('create')\r\n          setEditingDirector(null)\r\n        }}\r\n        onSuccess={refreshEntityData}\r\n        mode={directorModalMode}\r\n        existingDirector={editingDirector || undefined}\r\n      />\r\n\r\n      <StakeholderModalRefactored\r\n        entityId={entity.id}\r\n        open={stakeholderModalOpen}\r\n        onClose={() => {\r\n          setStakeholderModalOpen(false)\r\n          setStakeholderModalMode('create')\r\n          setEditingStakeholder(null)\r\n        }}\r\n        onSuccess={refreshEntityData}\r\n        mode={stakeholderModalMode}\r\n        existingStakeholder={editingStakeholder || undefined}\r\n      />\r\n\r\n      <AddEntityFlagModal\r\n        entityId={entity.id}\r\n        open={flagModalOpen}\r\n        onClose={() => setFlagModalOpen(false)}\r\n        onSuccess={(flag) => {\r\n          handleFlagCreated(flag)\r\n          refreshFlags()\r\n        }}\r\n      />\r\n\r\n      <LinkEntityInvestorModal\r\n        entityId={entity.id}\r\n        open={investorModalOpen}\r\n        onClose={() => setInvestorModalOpen(false)}\r\n        onSuccess={handleInvestorAdded}\r\n      />\r\n\r\n      <AddValuationModal\r\n        vehicleId={entity.id}\r\n        open={valuationModalOpen}\r\n        onClose={() => setValuationModalOpen(false)}\r\n        onSuccess={() => {\r\n          refreshValuations()\r\n          toast.success('Valuation added successfully')\r\n        }}\r\n      />\r\n\r\n      <EditValuationModal\r\n        vehicleId={entity.id}\r\n        valuation={editingValuation}\r\n        open={!!editingValuation}\r\n        onClose={() => setEditingValuation(null)}\r\n        onSuccess={() => {\r\n          refreshValuations()\r\n          toast.success('Valuation updated successfully')\r\n        }}\r\n      />\r\n\r\n      <PositionModal\r\n        vehicleId={entity.id}\r\n        position={editingPosition}\r\n        open={positionModalOpen}\r\n        onClose={() => {\r\n          setPositionModalOpen(false)\r\n          setEditingPosition(null)\r\n        }}\r\n        onSuccess={() => {\r\n          refreshPositions()\r\n          toast.success(editingPosition ? 'Position updated successfully' : 'Position added successfully')\r\n        }}\r\n      />\r\n\r\n      <EditEntityModalRefactored\r\n        entity={entity}\r\n        open={editEntityModalOpen}\r\n        onClose={() => setEditEntityModalOpen(false)}\r\n        onSuccess={(updated) => {\r\n          setEntity(updated as Entity)\r\n          setEditEntityModalOpen(false)\r\n        }}\r\n      />\r\n\r\n      {/* Document Preview - Full Screen */}\r\n      <DocumentViewerFullscreen\r\n        isOpen={documentViewer.isOpen}\r\n        document={documentViewer.document}\r\n        previewUrl={documentViewer.previewUrl}\r\n        isLoading={documentViewer.isLoading}\r\n        error={documentViewer.error}\r\n        onClose={documentViewer.closePreview}\r\n        onDownload={documentViewer.downloadDocument}\r\n      />\r\n\r\n      {/* Edit Subscription Modal - New */}\r\n      {editingInvestorId && (\r\n        <SubscriptionEditModal\r\n          open={subscriptionModalOpen}\r\n          onClose={() => {\r\n            setSubscriptionModalOpen(false)\r\n            setEditingInvestorId(null)\r\n            setEditingSubscriptionData(null)\r\n          }}\r\n          entityId={entity.id}\r\n          investorId={editingInvestorId}\r\n          defaultValues={editingSubscriptionData}\r\n          onSuccess={(updatedInvestor) => {\r\n            setInvestors((prev) =>\r\n              prev.map((inv) => (inv.id === editingInvestorId ? updatedInvestor : inv))\r\n            )\r\n            setSubscriptionModalOpen(false)\r\n            setEditingInvestorId(null)\r\n            setEditingSubscriptionData(null)\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Delete Entity Dialog */}\r\n      <DeleteEntityDialog\r\n        open={deleteEntityDialogOpen}\r\n        onClose={() => setDeleteEntityDialogOpen(false)}\r\n        entityId={entity.id}\r\n        entityName={entity.name}\r\n      />\r\n\r\n      {/* Edit Document Modal */}\r\n      {editingDocument && (\r\n        <EditDocumentModal\r\n          open={editDocumentModalOpen}\r\n          onClose={() => {\r\n            setEditDocumentModalOpen(false)\r\n            setEditingDocument(null)\r\n          }}\r\n          document={editingDocument}\r\n          onSuccess={() => {\r\n            fetchDocuments()\r\n            setEditDocumentModalOpen(false)\r\n            setEditingDocument(null)\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Confirmation Dialog */}\r\n      <ConfirmationDialog />\r\n    </div>\r\n  )\r\n}\r\n","'use client'\n\nimport { useEffect, useState } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { Upload, Loader2, FileText, Info } from 'lucide-react'\nimport { useRouter } from 'next/navigation'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\n\ninterface FolderOption {\n  id: string\n  name: string\n  path?: string\n}\n\ninterface UploadDocumentModalProps {\n  dealId?: string\n  entityId?: string\n  triggerLabel?: string\n  onUploaded?: () => void\n  defaultFolderId?: string | null\n  folderOptions?: FolderOption[]\n}\n\nexport function UploadDocumentModal({\n  dealId,\n  entityId,\n  triggerLabel,\n  onUploaded,\n  defaultFolderId = null,\n  folderOptions = []\n}: UploadDocumentModalProps) {\n  const router = useRouter()\n  const [open, setOpen] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [file, setFile] = useState<File | null>(null)\n  const [docType, setDocType] = useState('contract')\n  const [name, setName] = useState('')\n  const [description, setDescription] = useState('')\n  const [mode, setMode] = useState<'file' | 'link'>('file')\n  const [linkUrl, setLinkUrl] = useState('')\n  const [linkType, setLinkType] = useState('external')\n  const [folderId, setFolderId] = useState<string | null>(defaultFolderId)\n\n  const scopeProvided = Boolean(dealId || entityId)\n  const isFileMode = mode === 'file'\n\n  useEffect(() => {\n    if (!open) {\n      setMode('file')\n      setFile(null)\n      setLinkUrl('')\n      setLinkType('external')\n      setError(null)\n      setFolderId(defaultFolderId ?? null)\n    }\n  }, [open, defaultFolderId])\n\n  const handleSubmit = async () => {\n    if (!scopeProvided) {\n      setError('Document scope is not configured')\n      return\n    }\n\n    setLoading(true)\n    setError(null)\n\n    try {\n      if (mode === 'file') {\n        if (!file) {\n          setError('Please select a file')\n          setLoading(false)\n          return\n        }\n\n        const formData = new FormData()\n        formData.append('file', file)\n        formData.append('type', docType)\n        if (name.trim()) {\n          formData.append('name', name.trim())\n        }\n        if (description.trim()) {\n          formData.append('description', description.trim())\n        }\n        if (dealId) {\n          formData.append('deal_id', dealId)\n        }\n        if (entityId) {\n          formData.append('entity_id', entityId)\n          formData.append('vehicle_id', entityId)\n        }\n        if (folderId) {\n          formData.append('folder_id', folderId)\n        }\n\n        const response = await fetch('/api/documents/upload', {\n          method: 'POST',\n          body: formData\n        })\n\n        if (!response.ok) {\n          const data = await response.json()\n          throw new Error(data.error || 'Failed to upload document')\n        }\n      } else {\n        if (!linkUrl.trim()) {\n          setError('Please provide a valid external link')\n          setLoading(false)\n          return\n        }\n\n        const payload: Record<string, any> = {\n          name: name.trim() || null,\n          type: docType || null,\n          description: description.trim() || null,\n          external_url: linkUrl.trim(),\n          link_type: linkType\n        }\n\n        if (dealId) {\n          payload.deal_id = dealId\n        }\n        if (entityId) {\n          payload.entity_id = entityId\n          payload.vehicle_id = entityId\n        }\n        if (folderId) {\n          payload.folder_id = folderId\n        }\n\n        const response = await fetch('/api/documents/link', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n        })\n\n        if (!response.ok) {\n          const data = await response.json()\n          throw new Error(data.error || 'Failed to save link')\n        }\n      }\n\n      setFile(null)\n      setName('')\n      setDescription('')\n      setLinkUrl('')\n      setLinkType('external')\n      setMode('file')\n      setOpen(false)\n      setFolderId(defaultFolderId ?? null)\n      router.refresh()\n      onUploaded?.()\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button className=\"gap-2\">\n          <Upload className=\"h-4 w-4\" />\n          {triggerLabel || 'Upload Document'}\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"bg-background border-border max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2 text-foreground\">\n            <Upload className=\"h-5 w-5 text-emerald-500 dark:text-emerald-400\" />\n            Upload Document\n          </DialogTitle>\n          <DialogDescription className=\"text-muted-foreground\">\n            Add a document scoped to this {dealId ? 'deal' : 'entity'}\n          </DialogDescription>\n        </DialogHeader>\n\n        {folderOptions.length > 0 && (\n          <div className=\"mt-4 space-y-2\">\n            <Label htmlFor=\"doc-folder-select\" className=\"text-sm font-medium text-foreground\">Folder</Label>\n            <Select\n              value={folderId ?? 'none'}\n              onValueChange={(value) => setFolderId(value === 'none' ? null : value)}\n            >\n              <SelectTrigger id=\"doc-folder-select\" className=\"bg-background border-input text-foreground\">\n                <SelectValue placeholder=\"Select folder\" />\n              </SelectTrigger>\n              <SelectContent className=\"bg-popover border-border\">\n                <SelectItem value=\"none\" className=\"text-foreground\">Unfiled</SelectItem>\n                {folderOptions.map((folder) => (\n                  <SelectItem key={folder.id} value={folder.id} className=\"text-foreground\">\n                    {folder.path ?? folder.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        )}\n\n        <Tabs value={mode} onValueChange={(value) => setMode(value as 'file' | 'link')}>\n          <TabsList className=\"grid grid-cols-2 bg-muted/50 border border-border\">\n            <TabsTrigger value=\"file\" className=\"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-800 dark:data-[state=active]:text-emerald-100 text-foreground\">\n              <Upload className=\"h-4 w-4 mr-2\" />\n              Upload File\n            </TabsTrigger>\n            <TabsTrigger value=\"link\" className=\"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-800 dark:data-[state=active]:text-emerald-100 text-foreground\">\n              <FileText className=\"h-4 w-4 mr-2\" />\n              Link Document\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"file\" className=\"mt-4 space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"doc_type_file\" className=\"text-sm font-medium text-foreground\">Document Type *</Label>\n              <Select value={docType} onValueChange={setDocType}>\n                <SelectTrigger id=\"doc_type_file\" className=\"bg-background border-input text-foreground\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent className=\"bg-popover border-border\">\n                  <SelectItem value=\"nda\" className=\"text-foreground\">NDA</SelectItem>\n                  <SelectItem value=\"term_sheet\" className=\"text-foreground\">Term Sheet</SelectItem>\n                  <SelectItem value=\"subscription\" className=\"text-foreground\">Subscription Agreement</SelectItem>\n                  <SelectItem value=\"contract\" className=\"text-foreground\">Contract</SelectItem>\n                  <SelectItem value=\"report\" className=\"text-foreground\">Report</SelectItem>\n                  <SelectItem value=\"other\" className=\"text-foreground\">Other</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"doc_name_file\" className=\"text-sm font-medium text-foreground\">Title</Label>\n              <Input\n                id=\"doc_name_file\"\n                placeholder=\"e.g., Board Resolution - Jan 2025\"\n                value={name}\n                onChange={(event) => setName(event.target.value)}\n                className=\"bg-background border-input text-foreground placeholder:text-muted-foreground focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"doc_description_file\" className=\"text-sm font-medium text-foreground\">Description</Label>\n              <Input\n                id=\"doc_description_file\"\n                placeholder=\"Optional summary or context\"\n                value={description}\n                onChange={(event) => setDescription(event.target.value)}\n                className=\"bg-background border-input text-foreground placeholder:text-muted-foreground focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"file-input\" className=\"text-sm font-medium text-foreground\">File *</Label>\n              <Input\n                id=\"file-input\"\n                type=\"file\"\n                onChange={(e) => setFile(e.target.files?.[0] || null)}\n                accept=\".pdf,.doc,.docx,.xls,.xlsx\"\n                className=\"bg-background border-input text-foreground file:text-foreground\"\n              />\n              {file && (\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <FileText className=\"h-4 w-4\" />\n                  <span className=\"text-foreground\">{file.name}</span>\n                  <span className=\"text-xs\">({(file.size / 1024).toFixed(1)} KB)</span>\n                </div>\n              )}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"link\" className=\"mt-4 space-y-4\">\n            <div className=\"rounded-lg border border-border bg-muted/50 p-4 space-y-3\">\n              <div className=\"flex items-center gap-2 pb-2 border-b border-border\">\n                <div className=\"h-8 w-8 rounded-full bg-emerald-500/20 flex items-center justify-center\">\n                  <FileText className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-sm font-semibold text-foreground\">Link External Document</h3>\n                  <p className=\"text-xs text-muted-foreground\">Connect to documents stored in Google Drive or other platforms</p>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"link-type\" className=\"text-sm font-medium text-foreground\">Link Source *</Label>\n                <Select value={linkType} onValueChange={setLinkType}>\n                  <SelectTrigger id=\"link-type\" className=\"bg-background border-input text-foreground\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent className=\"bg-popover border-border\">\n                    <SelectItem value=\"google_drive\" className=\"text-foreground\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"h-4 w-4 rounded bg-blue-500/20 flex items-center justify-center\">\n                          <span className=\"text-xs\">G</span>\n                        </div>\n                        Google Drive\n                      </div>\n                    </SelectItem>\n                    <SelectItem value=\"sharepoint\" className=\"text-foreground\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"h-4 w-4 rounded bg-blue-500/20 flex items-center justify-center\">\n                          <span className=\"text-xs\">S</span>\n                        </div>\n                        SharePoint\n                      </div>\n                    </SelectItem>\n                    <SelectItem value=\"dropbox\" className=\"text-foreground\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"h-4 w-4 rounded bg-blue-500/20 flex items-center justify-center\">\n                          <span className=\"text-xs\">D</span>\n                        </div>\n                        Dropbox\n                      </div>\n                    </SelectItem>\n                    <SelectItem value=\"external\" className=\"text-foreground\">External URL</SelectItem>\n                    <SelectItem value=\"other\" className=\"text-foreground\">Other</SelectItem>\n                  </SelectContent>\n                </Select>\n                {linkType === 'google_drive' && (\n                  <p className=\"text-xs text-muted-foreground\">\n                    Make sure the Google Drive link has proper sharing permissions\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"link-url\" className=\"text-sm font-medium text-foreground\">\n                  {linkType === 'google_drive' ? 'Google Drive Share Link' : 'External URL'} *\n                </Label>\n                <Input\n                  id=\"link-url\"\n                  type=\"url\"\n                  placeholder={\n                    linkType === 'google_drive'\n                      ? 'https://drive.google.com/file/d/...'\n                      : 'https://example.com/document.pdf'\n                  }\n                  value={linkUrl}\n                  onChange={(event) => setLinkUrl(event.target.value)}\n                  className=\"bg-background border-input text-foreground placeholder:text-muted-foreground focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                />\n                {linkType === 'google_drive' && linkUrl && (\n                  <div className=\"flex items-start gap-2 p-2 rounded-md bg-blue-500/10 border border-blue-400/20\">\n                    <Info className=\"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5 shrink-0\" />\n                    <div className=\"text-xs text-blue-800 dark:text-blue-200\">\n                      <p className=\"font-medium\">Google Drive Link Detected</p>\n                      <p className=\"mt-0.5 opacity-80\">Verify the link is accessible to intended users</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"doc_type_link\" className=\"text-sm font-medium text-foreground\">Document Type *</Label>\n              <Select value={docType} onValueChange={setDocType}>\n                <SelectTrigger id=\"doc_type_link\" className=\"bg-background border-input text-foreground\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent className=\"bg-popover border-border\">\n                  <SelectItem value=\"nda\" className=\"text-foreground\">NDA</SelectItem>\n                  <SelectItem value=\"term_sheet\" className=\"text-foreground\">Term Sheet</SelectItem>\n                  <SelectItem value=\"subscription\" className=\"text-foreground\">Subscription Agreement</SelectItem>\n                  <SelectItem value=\"contract\" className=\"text-foreground\">Contract</SelectItem>\n                  <SelectItem value=\"report\" className=\"text-foreground\">Report</SelectItem>\n                  <SelectItem value=\"other\" className=\"text-foreground\">Other</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"doc_name_link\" className=\"text-sm font-medium text-foreground\">Title</Label>\n              <Input\n                id=\"doc_name_link\"\n                placeholder=\"e.g., Investor Presentation August 2025\"\n                value={name}\n                onChange={(event) => setName(event.target.value)}\n                className=\"bg-background border-input text-foreground placeholder:text-muted-foreground focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"doc_description_link\" className=\"text-sm font-medium text-foreground\">Description</Label>\n              <Input\n                id=\"doc_description_link\"\n                placeholder=\"Optional summary or context\"\n                value={description}\n                onChange={(event) => setDescription(event.target.value)}\n                className=\"bg-background border-input text-foreground placeholder:text-muted-foreground focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n              />\n            </div>\n          </TabsContent>\n        </Tabs>\n\n        {error && (\n          <div className=\"p-3 rounded-lg bg-red-100 dark:bg-red-500/20 border border-red-300 dark:border-red-400/30 text-red-700 dark:text-red-200 text-sm\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"flex justify-end gap-2 pt-4\">\n          <Button variant=\"outline\" onClick={() => setOpen(false)} disabled={loading}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={loading || (isFileMode && !file) || (!isFileMode && !linkUrl.trim())} className=\"bg-emerald-600 hover:bg-emerald-700 text-white\">\n            {loading ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                {isFileMode ? 'Uploading...' : 'Saving...'}\n              </>\n            ) : (\n              <>\n                <Upload className=\"mr-2 h-4 w-4\" />\n                {isFileMode ? 'Upload' : 'Save Link'}\n              </>\n            )}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n","'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage\n} from '@/components/ui/form'\nimport { Loader2, Search, Plus, User, Edit } from 'lucide-react'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { Card } from '@/components/ui/card'\nimport {\n  useDirectorAssignmentForm,\n  useDirectorCreateAndAssignForm,\n  useDirectorEditForm\n} from '@/hooks/use-director-form'\nimport { toast } from 'sonner'\n\ninterface Director {\n  id: string\n  full_name: string\n  email: string | null\n  phone: string | null\n  nationality: string | null\n  id_number: string | null\n  notes: string | null\n}\n\ninterface EntityDirector {\n  id: string\n  full_name: string\n  role: string | null\n  email: string | null\n  effective_from: string | null\n  effective_to: string | null\n  notes: string | null\n  created_at: string\n}\n\ninterface DirectorModalRefactoredProps {\n  entityId: string\n  open: boolean\n  onClose: () => void\n  onSuccess: () => void\n  mode: 'create' | 'edit'\n  existingDirector?: EntityDirector // For edit mode\n}\n\nexport function DirectorModalRefactored({\n  entityId,\n  open,\n  onClose,\n  onSuccess,\n  mode,\n  existingDirector\n}: DirectorModalRefactoredProps) {\n  // UI state\n  const [createMode, setCreateMode] = useState<'select' | 'create'>('select')\n  const [searching, setSearching] = useState(false)\n  const [searchQuery, setSearchQuery] = useState('')\n  const [directors, setDirectors] = useState<Director[]>([])\n  const [selectedDirector, setSelectedDirector] = useState<Director | null>(null)\n\n  // Edit mode form\n  const editForm = useDirectorEditForm({\n    entityId,\n    directorId: existingDirector?.id || '',\n    defaultValues: existingDirector\n      ? {\n          role: existingDirector.role || 'Director',\n          effective_from: existingDirector.effective_from || new Date().toISOString().split('T')[0],\n          effective_to: existingDirector.effective_to || null,\n          notes: existingDirector.notes || null\n        }\n      : undefined,\n    onSuccess: () => {\n      onSuccess()\n      handleClose()\n    }\n  })\n\n  // Assignment form (for selecting existing director)\n  const assignmentForm = useDirectorAssignmentForm({\n    entityId,\n    directorData: selectedDirector || { full_name: '', email: null },\n    defaultValues: {\n      role: 'Director',\n      effective_from: new Date().toISOString().split('T')[0],\n      effective_to: null,\n      notes: null\n    },\n    onSuccess: () => {\n      onSuccess()\n      handleClose()\n    }\n  })\n\n  // Create and assign form\n  const createAndAssignForm = useDirectorCreateAndAssignForm({\n    entityId,\n    defaultValues: {\n      full_name: '',\n      email: null,\n      phone: null,\n      nationality: null,\n      id_number: null,\n      director_notes: null,\n      role: 'Director',\n      effective_from: new Date().toISOString().split('T')[0],\n      effective_to: null,\n      assignment_notes: null\n    },\n    onSuccess: () => {\n      onSuccess()\n      handleClose()\n    }\n  })\n\n  const fetchDirectors = useCallback(async () => {\n    setSearching(true)\n    try {\n      const url = searchQuery\n        ? `/api/director-registry?search=${encodeURIComponent(searchQuery)}`\n        : '/api/director-registry'\n\n      const response = await fetch(url)\n      if (!response.ok) throw new Error('Failed to fetch directors')\n\n      const data = await response.json()\n      setDirectors(data.directors || [])\n    } catch (err: any) {\n      console.error('Failed to fetch directors:', err)\n      toast.error('Failed to load directors')\n    } finally {\n      setSearching(false)\n    }\n  }, [searchQuery])\n\n  // Fetch directors from registry\n  useEffect(() => {\n    if (open && mode === 'create' && createMode === 'select') {\n      fetchDirectors()\n    }\n  }, [open, mode, createMode, searchQuery, fetchDirectors])\n\n  const handleSelectDirector = (director: Director) => {\n    setSelectedDirector(director)\n  }\n\n  const handleClose = () => {\n    setCreateMode('select')\n    setSelectedDirector(null)\n    setSearchQuery('')\n    assignmentForm.form.reset()\n    createAndAssignForm.form.reset()\n    editForm.form.reset()\n    onClose()\n  }\n\n  // Edit mode UI\n  if (mode === 'edit' && existingDirector) {\n    return (\n      <Dialog open={open} onOpenChange={handleClose}>\n        <DialogContent className=\"sm:max-w-[600px] bg-zinc-950 border-white/10\">\n          <DialogHeader>\n            <DialogTitle className=\"text-white flex items-center gap-2\">\n              <Edit className=\"h-5 w-5 text-emerald-400\" />\n              Edit Director Assignment\n            </DialogTitle>\n            <DialogDescription className=\"text-gray-400\">\n              Update assignment details for {existingDirector.full_name}\n            </DialogDescription>\n          </DialogHeader>\n\n          <Form {...editForm.form}>\n            <form onSubmit={editForm.onSubmit} className=\"space-y-4 py-4\">\n              <FormField\n                control={editForm.form.control}\n                name=\"role\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Role *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"e.g., Director, Chairman\"\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={editForm.form.control}\n                  name=\"effective_from\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-white\">Effective From *</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"date\"\n                          className=\"bg-white/5 border-white/10 text-white\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={editForm.form.control}\n                  name=\"effective_to\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-white\">Effective To</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"date\"\n                          className=\"bg-white/5 border-white/10 text-white\"\n                          {...field}\n                          value={field.value || ''}\n                        />\n                      </FormControl>\n                      <FormDescription className=\"text-xs text-gray-400\">\n                        Leave empty if still active\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={editForm.form.control}\n                name=\"notes\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Notes</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        placeholder=\"Additional notes about this assignment...\"\n                        rows={3}\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                        value={field.value || ''}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <DialogFooter className=\"border-t border-white/10 pt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleClose}\n                  disabled={editForm.isSubmitting}\n                  className=\"border-white/10 text-white hover:bg-white/10 bg-white/5\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={editForm.isSubmitting}\n                  className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n                >\n                  {editForm.isSubmitting ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      Saving...\n                    </>\n                  ) : (\n                    'Save Changes'\n                  )}\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n    )\n  }\n\n  // Create mode UI\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[700px] bg-zinc-950 border-white/10 max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white flex items-center gap-2\">\n            <User className=\"h-5 w-5 text-emerald-400\" />\n            {createMode === 'select' ? 'Add Director from Registry' : 'Register New Director'}\n          </DialogTitle>\n          <DialogDescription className=\"text-gray-400\">\n            {createMode === 'select'\n              ? 'Select an existing director or register a new one'\n              : 'Add a new director to the registry and assign to this entity'}\n          </DialogDescription>\n        </DialogHeader>\n\n        {createMode === 'select' ? (\n          <div className=\"space-y-4\">\n            {/* Search */}\n            <div className=\"space-y-2\">\n              <Label className=\"text-sm font-medium text-white\">Search Directors</Label>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-3 h-4 w-4 text-gray-500\" />\n                <Input\n                  placeholder=\"Search directors by name or email...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-9 bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                />\n              </div>\n              <p className=\"text-xs text-gray-400\">Start typing to filter the director registry</p>\n            </div>\n\n            {/* Directors List */}\n            <ScrollArea className=\"h-[300px] rounded border border-white/10 bg-white/5\">\n              <div className=\"p-2 space-y-2\">\n                {searching ? (\n                  <div className=\"text-center py-8 text-gray-400\">\n                    <Loader2 className=\"h-6 w-6 animate-spin mx-auto mb-2 text-emerald-400\" />\n                    <p>Searching...</p>\n                  </div>\n                ) : directors.length === 0 ? (\n                  <div className=\"text-center py-8 text-gray-400\">\n                    <div className=\"h-12 w-12 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-2\">\n                      <User className=\"h-6 w-6\" />\n                    </div>\n                    <p className=\"text-white\">No directors found</p>\n                    <Button\n                      variant=\"link\"\n                      size=\"sm\"\n                      onClick={() => setCreateMode('create')}\n                      className=\"mt-2 text-emerald-400 hover:text-emerald-300\"\n                    >\n                      Register new director\n                    </Button>\n                  </div>\n                ) : (\n                  directors.map((director) => (\n                    <Card\n                      key={director.id}\n                      className={`p-3 cursor-pointer transition-all ${\n                        selectedDirector?.id === director.id\n                          ? 'border-emerald-500 bg-emerald-500/10'\n                          : 'border-white/10 bg-white/5 hover:bg-white/10'\n                      }`}\n                      onClick={() => handleSelectDirector(director)}\n                    >\n                      <div className=\"font-medium text-white\">{director.full_name}</div>\n                      {director.email && <div className=\"text-sm text-gray-400\">{director.email}</div>}\n                      {director.nationality && (\n                        <div className=\"text-xs text-gray-400 mt-1\">{director.nationality}</div>\n                      )}\n                    </Card>\n                  ))\n                )}\n              </div>\n            </ScrollArea>\n\n            {/* Assignment Form (shown when director is selected) */}\n            {selectedDirector && (\n              <Form {...assignmentForm.form}>\n                <form onSubmit={assignmentForm.onSubmit} className=\"border-t border-white/10 pt-4 space-y-3\">\n                  <h4 className=\"font-medium text-sm text-white\">Assignment Details</h4>\n\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <FormField\n                      control={assignmentForm.form.control}\n                      name=\"role\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Role *</FormLabel>\n                          <FormControl>\n                            <Input\n                              placeholder=\"e.g., Director, Chairman\"\n                              className=\"bg-white/5 border-white/10 text-white\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={assignmentForm.form.control}\n                      name=\"effective_from\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Effective From *</FormLabel>\n                          <FormControl>\n                            <Input\n                              type=\"date\"\n                              className=\"bg-white/5 border-white/10 text-white\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <FormField\n                    control={assignmentForm.form.control}\n                    name=\"notes\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">Notes</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Any additional notes...\"\n                            rows={2}\n                            className=\"bg-white/5 border-white/10 text-white\"\n                            {...field}\n                            value={field.value || ''}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </form>\n              </Form>\n            )}\n\n            {/* Switch Mode Button */}\n            <Button\n              variant=\"outline\"\n              onClick={() => setCreateMode('create')}\n              className=\"w-full gap-2 border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/10 bg-emerald-500/5\"\n              disabled={assignmentForm.isSubmitting}\n            >\n              <Plus className=\"h-4 w-4\" />\n              Register New Director\n            </Button>\n\n            <DialogFooter className=\"border-t border-white/10 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={handleClose}\n                disabled={assignmentForm.isSubmitting}\n                className=\"border-white/10 text-white hover:bg-white/10 bg-white/5\"\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={assignmentForm.onSubmit}\n                disabled={assignmentForm.isSubmitting || !selectedDirector}\n                className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n              >\n                {assignmentForm.isSubmitting ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Assigning...\n                  </>\n                ) : (\n                  'Assign Director'\n                )}\n              </Button>\n            </DialogFooter>\n          </div>\n        ) : (\n          <Form {...createAndAssignForm.form}>\n            <form onSubmit={createAndAssignForm.onSubmit} className=\"space-y-4\">\n              {/* New Director Form */}\n              <div className=\"rounded-lg border border-white/10 bg-white/5 p-4 space-y-3\">\n                <div className=\"flex items-center gap-2 pb-2 border-b border-white/10\">\n                  <div className=\"h-8 w-8 rounded-full bg-emerald-500/20 flex items-center justify-center\">\n                    <User className=\"h-4 w-4 text-emerald-400\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-sm font-semibold text-white\">Director Information</h3>\n                    <p className=\"text-xs text-gray-400\">Enter the director's personal details</p>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div className=\"col-span-2\">\n                    <FormField\n                      control={createAndAssignForm.form.control}\n                      name=\"full_name\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Full Name *</FormLabel>\n                          <FormControl>\n                            <Input\n                              placeholder=\"John Smith\"\n                              className=\"bg-white/5 border-white/10 text-white\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <FormField\n                    control={createAndAssignForm.form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">Email</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"email\"\n                            placeholder=\"john@example.com\"\n                            className=\"bg-white/5 border-white/10 text-white\"\n                            {...field}\n                            value={field.value || ''}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={createAndAssignForm.form.control}\n                    name=\"phone\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">Phone</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"+1 234 567 8900\"\n                            className=\"bg-white/5 border-white/10 text-white\"\n                            {...field}\n                            value={field.value || ''}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={createAndAssignForm.form.control}\n                    name=\"nationality\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">Nationality</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"e.g., British, American\"\n                            className=\"bg-white/5 border-white/10 text-white\"\n                            {...field}\n                            value={field.value || ''}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={createAndAssignForm.form.control}\n                    name=\"id_number\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">ID/Passport Number</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"AB123456\"\n                            className=\"bg-white/5 border-white/10 text-white\"\n                            {...field}\n                            value={field.value || ''}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"col-span-2\">\n                    <FormField\n                      control={createAndAssignForm.form.control}\n                      name=\"director_notes\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-white\">Notes</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Additional information...\"\n                              rows={2}\n                              className=\"bg-white/5 border-white/10 text-white\"\n                              {...field}\n                              value={field.value || ''}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {/* Assignment Details */}\n              <div className=\"border-t border-white/10 pt-4 space-y-3\">\n                <h4 className=\"font-medium text-sm text-white\">Entity Assignment</h4>\n\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <FormField\n                    control={createAndAssignForm.form.control}\n                    name=\"role\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">Role *</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"e.g., Director, Chairman\"\n                            className=\"bg-white/5 border-white/10 text-white\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={createAndAssignForm.form.control}\n                    name=\"effective_from\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"text-white\">Effective From *</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"date\"\n                            className=\"bg-white/5 border-white/10 text-white\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={createAndAssignForm.form.control}\n                  name=\"assignment_notes\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel className=\"text-white\">Assignment Notes</FormLabel>\n                      <FormControl>\n                        <Textarea\n                          placeholder=\"Notes about this assignment...\"\n                          rows={2}\n                          className=\"bg-white/5 border-white/10 text-white\"\n                          {...field}\n                          value={field.value || ''}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              {/* Back Button */}\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setCreateMode('select')}\n                className=\"w-full border-white/10 text-white hover:bg-white/10 bg-white/5\"\n                disabled={createAndAssignForm.isSubmitting}\n              >\n                Back to Selection\n              </Button>\n\n              <DialogFooter className=\"border-t border-white/10 pt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleClose}\n                  disabled={createAndAssignForm.isSubmitting}\n                  className=\"border-white/10 text-white hover:bg-white/10 bg-white/5\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createAndAssignForm.isSubmitting}\n                  className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n                >\n                  {createAndAssignForm.isSubmitting ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      Creating...\n                    </>\n                  ) : (\n                    'Register & Assign'\n                  )}\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        )}\n      </DialogContent>\n    </Dialog>\n  )\n}\n","import { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport {\n  directorAssignmentSchema,\n  DirectorAssignmentFormData,\n  directorCreateAndAssignSchema,\n  DirectorCreateAndAssignFormData,\n  directorEditSchema,\n  DirectorEditFormData\n} from '@/lib/schemas/director-schema'\nimport { toast } from 'sonner'\n\n// Hook for assigning an existing director to an entity\ninterface UseDirectorAssignmentFormProps {\n  entityId: string\n  directorData: {\n    full_name: string\n    email: string | null\n  }\n  defaultValues?: Partial<DirectorAssignmentFormData>\n  onSuccess?: (data: any) => void\n}\n\nexport function useDirectorAssignmentForm({\n  entityId,\n  directorData,\n  defaultValues,\n  onSuccess\n}: UseDirectorAssignmentFormProps) {\n  const form = useForm<DirectorAssignmentFormData>({\n    resolver: zodResolver(directorAssignmentSchema),\n    defaultValues: defaultValues || {\n      role: 'Director',\n      effective_from: new Date().toISOString().split('T')[0],\n      effective_to: null,\n      notes: null\n    }\n  })\n\n  const onSubmit = async (data: DirectorAssignmentFormData) => {\n    try {\n      const response = await fetch('/api/entity-directors', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          vehicle_id: entityId,\n          full_name: directorData.full_name,\n          email: directorData.email,\n          role: data.role,\n          effective_from: data.effective_from,\n          effective_to: data.effective_to,\n          notes: data.notes\n        })\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to assign director')\n      }\n\n      const result = await response.json()\n      toast.success('Director assigned successfully')\n      onSuccess?.(result)\n    } catch (error) {\n      console.error('Failed to assign director:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to assign director')\n      throw error\n    }\n  }\n\n  return {\n    form,\n    onSubmit: form.handleSubmit(onSubmit),\n    isSubmitting: form.formState.isSubmitting,\n    errors: form.formState.errors\n  }\n}\n\n// Hook for creating and assigning a director in one step\ninterface UseDirectorCreateAndAssignFormProps {\n  entityId: string\n  defaultValues?: Partial<DirectorCreateAndAssignFormData>\n  onSuccess?: (data: any) => void\n}\n\nexport function useDirectorCreateAndAssignForm({\n  entityId,\n  defaultValues,\n  onSuccess\n}: UseDirectorCreateAndAssignFormProps) {\n  const form = useForm<DirectorCreateAndAssignFormData>({\n    resolver: zodResolver(directorCreateAndAssignSchema),\n    defaultValues: defaultValues || {\n      full_name: '',\n      email: null,\n      phone: null,\n      nationality: null,\n      id_number: null,\n      director_notes: null,\n      role: 'Director',\n      effective_from: new Date().toISOString().split('T')[0],\n      effective_to: null,\n      assignment_notes: null\n    }\n  })\n\n  const onSubmit = async (data: DirectorCreateAndAssignFormData) => {\n    try {\n      // First, register the new director\n      const registerResponse = await fetch('/api/director-registry', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          full_name: data.full_name,\n          email: data.email,\n          phone: data.phone,\n          nationality: data.nationality,\n          id_number: data.id_number,\n          notes: data.director_notes\n        })\n      })\n\n      if (!registerResponse.ok) {\n        const error = await registerResponse.json()\n        throw new Error(error.error || 'Failed to register director')\n      }\n\n      // Then, assign them to the entity\n      const assignResponse = await fetch('/api/entity-directors', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          vehicle_id: entityId,\n          full_name: data.full_name,\n          email: data.email,\n          role: data.role,\n          effective_from: data.effective_from,\n          effective_to: data.effective_to,\n          notes: data.assignment_notes\n        })\n      })\n\n      if (!assignResponse.ok) {\n        const error = await assignResponse.json()\n        throw new Error(error.error || 'Failed to assign director')\n      }\n\n      const result = await assignResponse.json()\n      toast.success('Director registered and assigned successfully')\n      onSuccess?.(result)\n    } catch (error) {\n      console.error('Failed to create and assign director:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to create and assign director')\n      throw error\n    }\n  }\n\n  return {\n    form,\n    onSubmit: form.handleSubmit(onSubmit),\n    isSubmitting: form.formState.isSubmitting,\n    errors: form.formState.errors\n  }\n}\n\n// Hook for editing an existing director assignment\ninterface UseDirectorEditFormProps {\n  entityId: string\n  directorId: string\n  defaultValues?: Partial<DirectorEditFormData>\n  onSuccess?: (data: any) => void\n}\n\nexport function useDirectorEditForm({\n  entityId,\n  directorId,\n  defaultValues,\n  onSuccess\n}: UseDirectorEditFormProps) {\n  const form = useForm<DirectorEditFormData>({\n    resolver: zodResolver(directorEditSchema),\n    defaultValues: defaultValues || {\n      role: '',\n      effective_from: new Date().toISOString().split('T')[0],\n      effective_to: null,\n      notes: null\n    }\n  })\n\n  const onSubmit = async (data: DirectorEditFormData) => {\n    try {\n      const response = await fetch(`/api/entities/${entityId}/directors/${directorId}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          role: data.role,\n          effective_from: data.effective_from,\n          effective_to: data.effective_to,\n          notes: data.notes\n        })\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to update director')\n      }\n\n      const result = await response.json()\n      toast.success('Director updated successfully')\n      onSuccess?.(result)\n    } catch (error) {\n      console.error('Failed to update director:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to update director')\n      throw error\n    }\n  }\n\n  return {\n    form,\n    onSubmit: form.handleSubmit(onSubmit),\n    isSubmitting: form.formState.isSubmitting,\n    errors: form.formState.errors\n  }\n}\n","import { z } from 'zod'\n\n// Schema for director registry (creating a new director in the global registry)\nexport const directorRegistrySchema = z.object({\n  full_name: z\n    .string()\n    .min(1, 'Full name is required')\n    .max(200, 'Name must be less than 200 characters'),\n\n  email: z\n    .string()\n    .email('Must be a valid email address')\n    .max(255, 'Email must be less than 255 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  phone: z\n    .string()\n    .max(50, 'Phone must be less than 50 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  nationality: z\n    .string()\n    .max(100, 'Nationality must be less than 100 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  id_number: z\n    .string()\n    .max(100, 'ID number must be less than 100 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  notes: z\n    .string()\n    .max(5000, 'Notes must be less than 5000 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val))\n})\n\nexport type DirectorRegistryFormData = z.infer<typeof directorRegistrySchema>\n\n// Schema for director assignment (linking a director to an entity)\nexport const directorAssignmentSchema = z.object({\n  role: z\n    .string()\n    .min(1, 'Role is required')\n    .max(100, 'Role must be less than 100 characters'),\n\n  effective_from: z\n    .string()\n    .min(1, 'Effective from date is required')\n    .refine((date) => {\n      const d = new Date(date)\n      return !isNaN(d.getTime())\n    }, 'Must be a valid date'),\n\n  effective_to: z\n    .string()\n    .nullable()\n    .refine(\n      (date) => {\n        if (!date) return true\n        const d = new Date(date)\n        return !isNaN(d.getTime())\n      },\n      'Must be a valid date'\n    )\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  notes: z\n    .string()\n    .max(5000, 'Notes must be less than 5000 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val))\n}).refine(\n  (data) => {\n    if (data.effective_to && data.effective_from) {\n      return new Date(data.effective_from) <= new Date(data.effective_to)\n    }\n    return true\n  },\n  {\n    message: 'End date must be after start date',\n    path: ['effective_to']\n  }\n)\n\nexport type DirectorAssignmentFormData = z.infer<typeof directorAssignmentSchema>\n\n// Combined schema for creating and assigning a director in one step\nexport const directorCreateAndAssignSchema = z.object({\n  // Director information\n  full_name: z\n    .string()\n    .min(1, 'Full name is required')\n    .max(200, 'Name must be less than 200 characters'),\n\n  email: z\n    .string()\n    .email('Must be a valid email address')\n    .max(255, 'Email must be less than 255 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  phone: z\n    .string()\n    .max(50, 'Phone must be less than 50 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  nationality: z\n    .string()\n    .max(100, 'Nationality must be less than 100 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  id_number: z\n    .string()\n    .max(100, 'ID number must be less than 100 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  director_notes: z\n    .string()\n    .max(5000, 'Notes must be less than 5000 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  // Assignment information\n  role: z\n    .string()\n    .min(1, 'Role is required')\n    .max(100, 'Role must be less than 100 characters'),\n\n  effective_from: z\n    .string()\n    .min(1, 'Effective from date is required')\n    .refine((date) => {\n      const d = new Date(date)\n      return !isNaN(d.getTime())\n    }, 'Must be a valid date'),\n\n  effective_to: z\n    .string()\n    .nullable()\n    .refine(\n      (date) => {\n        if (!date) return true\n        const d = new Date(date)\n        return !isNaN(d.getTime())\n      },\n      'Must be a valid date'\n    )\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  assignment_notes: z\n    .string()\n    .max(5000, 'Notes must be less than 5000 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val))\n}).refine(\n  (data) => {\n    if (data.effective_to && data.effective_from) {\n      return new Date(data.effective_from) <= new Date(data.effective_to)\n    }\n    return true\n  },\n  {\n    message: 'End date must be after start date',\n    path: ['effective_to']\n  }\n)\n\nexport type DirectorCreateAndAssignFormData = z.infer<typeof directorCreateAndAssignSchema>\n\n// Schema for editing an existing director assignment\nexport const directorEditSchema = z.object({\n  role: z\n    .string()\n    .min(1, 'Role is required')\n    .max(100, 'Role must be less than 100 characters'),\n\n  effective_from: z\n    .string()\n    .min(1, 'Effective from date is required')\n    .refine((date) => {\n      const d = new Date(date)\n      return !isNaN(d.getTime())\n    }, 'Must be a valid date'),\n\n  effective_to: z\n    .string()\n    .nullable()\n    .refine(\n      (date) => {\n        if (!date) return true\n        const d = new Date(date)\n        return !isNaN(d.getTime())\n      },\n      'Must be a valid date'\n    )\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  notes: z\n    .string()\n    .max(5000, 'Notes must be less than 5000 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val))\n}).refine(\n  (data) => {\n    if (data.effective_to && data.effective_from) {\n      return new Date(data.effective_from) <= new Date(data.effective_to)\n    }\n    return true\n  },\n  {\n    message: 'End date must be after start date',\n    path: ['effective_to']\n  }\n)\n\nexport type DirectorEditFormData = z.infer<typeof directorEditSchema>\n","import { z } from 'zod'\n\n// Stakeholder role enum\nexport const stakeholderRoles = [\n  'lawyer',\n  'accountant',\n  'auditor',\n  'administrator',\n  'strategic_partner',\n  'shareholder',\n  'other'\n] as const\n\n// Schema for creating a stakeholder\nexport const stakeholderFormSchema = z.object({\n  role: z.enum(stakeholderRoles),\n\n  company_name: z\n    .string()\n    .min(1, 'Company/Firm name is required')\n    .max(200, 'Company name must be less than 200 characters'),\n\n  contact_person: z\n    .string()\n    .max(200, 'Contact person name must be less than 200 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  email: z\n    .string()\n    .email('Must be a valid email address')\n    .max(255, 'Email must be less than 255 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  phone: z\n    .string()\n    .max(50, 'Phone must be less than 50 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  effective_from: z\n    .string()\n    .min(1, 'Effective from date is required')\n    .refine((date) => {\n      const d = new Date(date)\n      return !isNaN(d.getTime())\n    }, 'Must be a valid date'),\n\n  effective_to: z\n    .string()\n    .nullable()\n    .refine(\n      (date) => {\n        if (!date) return true\n        const d = new Date(date)\n        return !isNaN(d.getTime())\n      },\n      'Must be a valid date'\n    )\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  notes: z\n    .string()\n    .max(5000, 'Notes must be less than 5000 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val))\n}).refine(\n  (data) => {\n    if (data.effective_to && data.effective_from) {\n      return new Date(data.effective_from) <= new Date(data.effective_to)\n    }\n    return true\n  },\n  {\n    message: 'End date must be after start date',\n    path: ['effective_to']\n  }\n)\n\nexport type StakeholderFormData = z.infer<typeof stakeholderFormSchema>\n\n// Schema for editing an existing stakeholder\nexport const stakeholderEditSchema = z.object({\n  role: z.enum(stakeholderRoles),\n\n  company_name: z\n    .string()\n    .min(1, 'Company/Firm name is required')\n    .max(200, 'Company name must be less than 200 characters'),\n\n  contact_person: z\n    .string()\n    .max(200, 'Contact person name must be less than 200 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  email: z\n    .string()\n    .email('Must be a valid email address')\n    .max(255, 'Email must be less than 255 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  phone: z\n    .string()\n    .max(50, 'Phone must be less than 50 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  effective_from: z\n    .string()\n    .min(1, 'Effective from date is required')\n    .refine((date) => {\n      const d = new Date(date)\n      return !isNaN(d.getTime())\n    }, 'Must be a valid date'),\n\n  effective_to: z\n    .string()\n    .nullable()\n    .refine(\n      (date) => {\n        if (!date) return true\n        const d = new Date(date)\n        return !isNaN(d.getTime())\n      },\n      'Must be a valid date'\n    )\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  notes: z\n    .string()\n    .max(5000, 'Notes must be less than 5000 characters')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val))\n}).refine(\n  (data) => {\n    if (data.effective_to && data.effective_from) {\n      return new Date(data.effective_from) <= new Date(data.effective_to)\n    }\n    return true\n  },\n  {\n    message: 'End date must be after start date',\n    path: ['effective_to']\n  }\n)\n\nexport type StakeholderEditFormData = z.infer<typeof stakeholderEditSchema>\n\n// Helper function to get stakeholder role label\nexport function getStakeholderRoleLabel(role: typeof stakeholderRoles[number]): string {\n  const labels: Record<typeof stakeholderRoles[number], string> = {\n    lawyer: 'Lawyer / Legal Counsel',\n    accountant: 'Accountant',\n    auditor: 'Auditor',\n    administrator: 'Administrator',\n    strategic_partner: 'Strategic Partner',\n    shareholder: 'Shareholder',\n    other: 'Other'\n  }\n  return labels[role] || role\n}\n","import { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport {\n  stakeholderFormSchema,\n  StakeholderFormData,\n  stakeholderEditSchema,\n  StakeholderEditFormData\n} from '@/lib/schemas/stakeholder-schema'\nimport { toast } from 'sonner'\n\n// Hook for creating a stakeholder\ninterface UseStakeholderFormProps {\n  entityId: string\n  defaultValues?: Partial<StakeholderFormData>\n  onSuccess?: (data: any) => void\n}\n\nexport function useStakeholderForm({\n  entityId,\n  defaultValues,\n  onSuccess\n}: UseStakeholderFormProps) {\n  const form = useForm<StakeholderFormData>({\n    resolver: zodResolver(stakeholderFormSchema),\n    defaultValues: defaultValues || {\n      role: 'lawyer',\n      company_name: '',\n      contact_person: null,\n      email: null,\n      phone: null,\n      effective_from: new Date().toISOString().split('T')[0],\n      effective_to: null,\n      notes: null\n    }\n  })\n\n  const onSubmit = async (data: StakeholderFormData) => {\n    try {\n      const response = await fetch(`/api/entities/${entityId}/stakeholders`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data)\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to add stakeholder')\n      }\n\n      const result = await response.json()\n      toast.success('Stakeholder added successfully')\n      onSuccess?.(result)\n    } catch (error) {\n      console.error('Failed to add stakeholder:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to add stakeholder')\n      throw error\n    }\n  }\n\n  return {\n    form,\n    onSubmit: form.handleSubmit(onSubmit),\n    isSubmitting: form.formState.isSubmitting,\n    errors: form.formState.errors\n  }\n}\n\n// Hook for editing an existing stakeholder\ninterface UseStakeholderEditFormProps {\n  entityId: string\n  stakeholderId: string\n  defaultValues?: Partial<StakeholderEditFormData>\n  onSuccess?: (data: any) => void\n}\n\nexport function useStakeholderEditForm({\n  entityId,\n  stakeholderId,\n  defaultValues,\n  onSuccess\n}: UseStakeholderEditFormProps) {\n  const form = useForm<StakeholderEditFormData>({\n    resolver: zodResolver(stakeholderEditSchema),\n    defaultValues: defaultValues || {\n      role: 'lawyer',\n      company_name: '',\n      contact_person: null,\n      email: null,\n      phone: null,\n      effective_from: new Date().toISOString().split('T')[0],\n      effective_to: null,\n      notes: null\n    }\n  })\n\n  const onSubmit = async (data: StakeholderEditFormData) => {\n    try {\n      const response = await fetch(`/api/entities/${entityId}/stakeholders/${stakeholderId}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data)\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to update stakeholder')\n      }\n\n      const result = await response.json()\n      toast.success('Stakeholder updated successfully')\n      onSuccess?.(result)\n    } catch (error) {\n      console.error('Failed to update stakeholder:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to update stakeholder')\n      throw error\n    }\n  }\n\n  return {\n    form,\n    onSubmit: form.handleSubmit(onSubmit),\n    isSubmitting: form.formState.isSubmitting,\n    errors: form.formState.errors\n  }\n}\n","'use client'\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from '@/components/ui/select'\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage\n} from '@/components/ui/form'\nimport { Loader2, Users, Edit, Plus } from 'lucide-react'\nimport { useStakeholderForm, useStakeholderEditForm } from '@/hooks/use-stakeholder-form'\nimport { stakeholderRoles, getStakeholderRoleLabel } from '@/lib/schemas/stakeholder-schema'\n\ninterface Stakeholder {\n  id: string\n  role: string\n  company_name: string | null\n  contact_person: string | null\n  email: string | null\n  phone: string | null\n  effective_from: string | null\n  effective_to: string | null\n  notes: string | null\n  created_at: string\n}\n\ninterface StakeholderModalRefactoredProps {\n  entityId: string\n  open: boolean\n  onClose: () => void\n  onSuccess: () => void\n  mode: 'create' | 'edit'\n  existingStakeholder?: Stakeholder\n}\n\nexport function StakeholderModalRefactored({\n  entityId,\n  open,\n  onClose,\n  onSuccess,\n  mode,\n  existingStakeholder\n}: StakeholderModalRefactoredProps) {\n  // Create form\n  const createForm = useStakeholderForm({\n    entityId,\n    defaultValues: {\n      role: 'lawyer',\n      company_name: '',\n      contact_person: null,\n      email: null,\n      phone: null,\n      effective_from: new Date().toISOString().split('T')[0],\n      effective_to: null,\n      notes: null\n    },\n    onSuccess: () => {\n      onSuccess()\n      handleClose()\n    }\n  })\n\n  // Edit form\n  const editForm = useStakeholderEditForm({\n    entityId,\n    stakeholderId: existingStakeholder?.id || '',\n    defaultValues: existingStakeholder\n      ? {\n          role: existingStakeholder.role as any,\n          company_name: existingStakeholder.company_name || '',\n          contact_person: existingStakeholder.contact_person || null,\n          email: existingStakeholder.email || null,\n          phone: existingStakeholder.phone || null,\n          effective_from:\n            existingStakeholder.effective_from || new Date().toISOString().split('T')[0],\n          effective_to: existingStakeholder.effective_to || null,\n          notes: existingStakeholder.notes || null\n        }\n      : undefined,\n    onSuccess: () => {\n      onSuccess()\n      handleClose()\n    }\n  })\n\n  const form = mode === 'edit' ? editForm.form : createForm.form\n  const onSubmit = mode === 'edit' ? editForm.onSubmit : createForm.onSubmit\n  const isSubmitting = mode === 'edit' ? editForm.isSubmitting : createForm.isSubmitting\n\n  const handleClose = () => {\n    createForm.form.reset()\n    editForm.form.reset()\n    onClose()\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[600px] max-h-[90vh] overflow-y-auto bg-zinc-950 border-white/10\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white flex items-center gap-2\">\n            {mode === 'edit' ? (\n              <>\n                <Edit className=\"h-5 w-5 text-emerald-400\" />\n                Edit Stakeholder\n              </>\n            ) : (\n              <>\n                <Users className=\"h-5 w-5 text-emerald-400\" />\n                Add Stakeholder\n              </>\n            )}\n          </DialogTitle>\n          <DialogDescription className=\"text-gray-400\">\n            {mode === 'edit'\n              ? 'Update stakeholder information and assignment details'\n              : 'Add lawyers, accountants, auditors, administrators, or strategic partners to this entity'}\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={onSubmit} className=\"space-y-4 py-4\">\n            {/* Role Selection */}\n            <FormField\n              control={form.control}\n              name=\"role\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white\">Stakeholder Role *</FormLabel>\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\n                    <FormControl>\n                      <SelectTrigger className=\"bg-white/5 border-white/10 text-white\">\n                        <SelectValue />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent className=\"bg-zinc-950 border-white/10\">\n                      {stakeholderRoles.map((role) => (\n                        <SelectItem key={role} value={role} className=\"text-white\">\n                          {getStakeholderRoleLabel(role)}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {/* Company/Firm Name */}\n            <FormField\n              control={form.control}\n              name=\"company_name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white\">Company / Firm Name *</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"e.g., Arendt & Medernach, KPMG Luxembourg\"\n                      className=\"bg-white/5 border-white/10 text-white\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {/* Contact Person */}\n            <FormField\n              control={form.control}\n              name=\"contact_person\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white\">Contact Person</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"Primary contact name\"\n                      className=\"bg-white/5 border-white/10 text-white\"\n                      {...field}\n                      value={field.value || ''}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {/* Email and Phone */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Email</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"email\"\n                        placeholder=\"contact@firm.com\"\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                        value={field.value || ''}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Phone</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"tel\"\n                        placeholder=\"+352 123 456\"\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                        value={field.value || ''}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            {/* Effective Dates */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"effective_from\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Effective From *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"effective_to\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Effective To</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                        value={field.value || ''}\n                      />\n                    </FormControl>\n                    <FormDescription className=\"text-xs text-gray-400\">\n                      Leave empty if currently active\n                    </FormDescription>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            {/* Notes */}\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white\">Additional Notes</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Add any relevant information about this stakeholder...\"\n                      rows={3}\n                      className=\"bg-white/5 border-white/10 text-white\"\n                      {...field}\n                      value={field.value || ''}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter className=\"border-t border-white/10 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={handleClose}\n                disabled={isSubmitting}\n                className=\"border-white/10 text-white hover:bg-white/10 bg-white/5\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={isSubmitting}\n                className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n              >\n                {isSubmitting ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    {mode === 'edit' ? 'Saving...' : 'Adding...'}\n                  </>\n                ) : mode === 'edit' ? (\n                  'Save Changes'\n                ) : (\n                  'Add Stakeholder'\n                )}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","'use client'\r\n\r\nimport { useCallback, useEffect, useState } from 'react'\r\nimport Image from 'next/image'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle\r\n} from '@/components/ui/dialog'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue\r\n} from '@/components/ui/select'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormDescription,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage\r\n} from '@/components/ui/form'\r\nimport { Switch } from '@/components/ui/switch'\r\nimport { Upload, Trash2, Loader2, Edit, AlertCircle } from 'lucide-react'\r\nimport { useEntityForm } from '@/hooks/use-entity-form'\r\nimport { toast } from 'sonner'\r\nimport { useConfirmationDialog } from '@/hooks/use-confirmation-dialog'\r\n\r\nconst STATUS_OPTIONS = [\r\n  { value: 'LIVE', label: 'Live' },\r\n  { value: 'TBD', label: 'TBD' },\r\n  { value: 'CLOSED', label: 'Closed' }\r\n]\r\n\r\nconst VEHICLE_TYPES = [\r\n  { value: 'fund', label: 'Fund' },\r\n  { value: 'spv', label: 'SPV' },\r\n  { value: 'securitization', label: 'Securitization' },\r\n  { value: 'note', label: 'Note' },\r\n  { value: 'venture_capital', label: 'Venture Capital' },\r\n  { value: 'private_equity', label: 'Private Equity' },\r\n  { value: 'real_estate', label: 'Real Estate' },\r\n  { value: 'other', label: 'Other' }\r\n]\r\n\r\nconst REPORTING_OPTIONS = [\r\n  { value: 'Not Required', label: 'Not Required' },\r\n  { value: 'Company Only', label: 'Company Only' },\r\n  { value: 'Online only', label: 'Online Only' },\r\n  { value: 'Company + Online', label: 'Company + Online' }\r\n]\r\n\r\nconst CURRENCIES = ['USD', 'EUR', 'GBP', 'CHF', 'JPY', 'AUD', 'CAD']\r\n\r\ninterface DropdownOption {\r\n  id: string\r\n  name?: string\r\n  email?: string\r\n  firm_name?: string\r\n  display_name?: string\r\n}\r\n\r\ninterface DropdownOptions {\r\n  arrangers: DropdownOption[]\r\n  lawyers: DropdownOption[]\r\n}\r\n\r\ninterface EditEntityModalProps {\r\n  entity: {\r\n    id: string\r\n    name: string\r\n    entity_code: string | null\r\n    platform: string | null\r\n    investment_name: string | null\r\n    former_entity: string | null\r\n    status: string | null\r\n    type: string\r\n    domicile: string | null\r\n    currency: string\r\n    formation_date: string | null\r\n    legal_jurisdiction: string | null\r\n    registration_number: string | null\r\n    reporting_type: string | null\r\n    requires_reporting: boolean | null\r\n    notes: string | null\r\n    logo_url: string | null\r\n    website_url: string | null\r\n    address?: string | null\r\n    arranger_entity_id?: string | null\r\n    lawyer_id?: string | null\r\n  }\r\n  open: boolean\r\n  onClose: () => void\r\n  onSuccess: (entity: any) => void\r\n}\r\n\r\nexport function EditEntityModalRefactored({\r\n  entity,\r\n  open,\r\n  onClose,\r\n  onSuccess\r\n}: EditEntityModalProps) {\r\n  const [logoUrl, setLogoUrl] = useState(entity.logo_url || '')\r\n  const [logoUploading, setLogoUploading] = useState(false)\r\n  const [logoError, setLogoError] = useState<string | null>(null)\r\n  const { confirm, ConfirmationDialog } = useConfirmationDialog()\r\n\r\n  // Dropdown options state\r\n  const [dropdownOptions, setDropdownOptions] = useState<DropdownOptions>({\r\n    arrangers: [],\r\n    lawyers: []\r\n  })\r\n  const [dropdownsLoading, setDropdownsLoading] = useState(false)\r\n\r\n  // Service provider state (managed separately from form)\r\n  const [arrangerEntityId, setArrangerEntityId] = useState(entity.arranger_entity_id || '')\r\n  const [lawyerId, setLawyerId] = useState(entity.lawyer_id || '')\r\n  const [address, setAddress] = useState(entity.address || '')\r\n\r\n  const fetchDropdownOptions = useCallback(async () => {\r\n    setDropdownsLoading(true)\r\n    try {\r\n      const response = await fetch('/api/vehicles/dropdown-options')\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setDropdownOptions(data)\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch dropdown options:', err)\r\n    } finally {\r\n      setDropdownsLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  const { form, onSubmit, isSubmitting } = useEntityForm({\r\n    entityId: entity.id,\r\n    mode: 'edit',\r\n    defaultValues: {\r\n      name: entity.name || '',\r\n      entity_code: entity.entity_code || '',\r\n      platform: entity.platform || '',\r\n      investment_name: entity.investment_name || '',\r\n      former_entity: entity.former_entity || '',\r\n      status: (entity.status as any) || 'LIVE',\r\n      type: (entity.type as any) || 'fund',\r\n      domicile: entity.domicile || '',\r\n      currency: entity.currency || 'USD',\r\n      formation_date: entity.formation_date ? entity.formation_date.slice(0, 10) : null,\r\n      legal_jurisdiction: entity.legal_jurisdiction || '',\r\n      registration_number: entity.registration_number || '',\r\n      reporting_type: (entity.reporting_type as any) || 'Not Required',\r\n      requires_reporting: entity.requires_reporting ?? false,\r\n      notes: entity.notes || '',\r\n      logo_url: entity.logo_url || null,\r\n      website_url: entity.website_url || ''\r\n    },\r\n    onSuccess: (data) => {\r\n      onSuccess(data.entity)\r\n      onClose()\r\n    }\r\n  })\r\n\r\n  // Fetch dropdown options when modal opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      void fetchDropdownOptions()\r\n    }\r\n  }, [open, fetchDropdownOptions])\r\n\r\n  // Reset all state when modal opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      setLogoUrl(entity.logo_url || '')\r\n      setLogoError(null)\r\n      setArrangerEntityId(entity.arranger_entity_id || '')\r\n      setLawyerId(entity.lawyer_id || '')\r\n      setAddress(entity.address || '')\r\n      form.reset({\r\n        name: entity.name || '',\r\n        entity_code: entity.entity_code || '',\r\n        platform: entity.platform || '',\r\n        investment_name: entity.investment_name || '',\r\n        former_entity: entity.former_entity || '',\r\n        status: (entity.status as any) || 'LIVE',\r\n        type: (entity.type as any) || 'fund',\r\n        domicile: entity.domicile || '',\r\n        currency: entity.currency || 'USD',\r\n        formation_date: entity.formation_date ? entity.formation_date.slice(0, 10) : null,\r\n        legal_jurisdiction: entity.legal_jurisdiction || '',\r\n        registration_number: entity.registration_number || '',\r\n        reporting_type: (entity.reporting_type as any) || 'Not Required',\r\n        requires_reporting: entity.requires_reporting ?? false,\r\n        notes: entity.notes || '',\r\n        logo_url: entity.logo_url || null,\r\n        website_url: entity.website_url || ''\r\n      })\r\n    }\r\n  }, [entity, open, form])\r\n\r\n  const handleLogoUpload = async (file: File) => {\r\n    setLogoError(null)\r\n    setLogoUploading(true)\r\n\r\n    try {\r\n      const payload = new FormData()\r\n      payload.append('file', file)\r\n      payload.append('vehicle_id', entity.id)\r\n\r\n      const response = await fetch('/api/entities/logo-upload', {\r\n        method: 'POST',\r\n        body: payload\r\n      })\r\n\r\n      const data = await response.json().catch(() => ({}))\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to upload logo')\r\n      }\r\n\r\n      setLogoUrl(data.url)\r\n      form.setValue('logo_url', data.url)\r\n      toast.success('Logo uploaded successfully')\r\n    } catch (error) {\r\n      const message = error instanceof Error ? error.message : 'Failed to upload logo'\r\n      setLogoError(message)\r\n      toast.error(message)\r\n    } finally {\r\n      setLogoUploading(false)\r\n    }\r\n  }\r\n\r\n  const handleRemoveLogo = () => {\r\n    confirm(\r\n      {\r\n        title: 'Remove Logo',\r\n        description: 'Are you sure you want to remove this logo?',\r\n        confirmText: 'Remove',\r\n        variant: 'destructive'\r\n      },\r\n      () => {\r\n        setLogoUrl('')\r\n        form.setValue('logo_url', null)\r\n        toast.success('Logo removed')\r\n      }\r\n    )\r\n  }\r\n\r\n  const handleSubmitWithServiceProviders = async () => {\r\n    // First save the main form data via the hook\r\n    const formValid = await form.trigger()\r\n    if (!formValid) return\r\n\r\n    // Then save the service provider fields via direct API call\r\n    try {\r\n      const response = await fetch(`/api/entities/${entity.id}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          ...form.getValues(),\r\n          logo_url: logoUrl || null,\r\n          address: address || null,\r\n          arranger_entity_id: arrangerEntityId || null,\r\n          lawyer_id: lawyerId || null\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json().catch(() => ({}))\r\n        throw new Error(data.error || 'Failed to update vehicle')\r\n      }\r\n\r\n      const data = await response.json()\r\n      toast.success('Vehicle updated successfully')\r\n      onSuccess(data.entity)\r\n      onClose()\r\n    } catch (error) {\r\n      toast.error(error instanceof Error ? error.message : 'Failed to update vehicle')\r\n    }\r\n  }\r\n\r\n  const handleSubmitWithConfirmation = () => {\r\n    confirm(\r\n      {\r\n        title: 'Confirm Changes',\r\n        description: 'Are you sure you want to save these changes to the vehicle?',\r\n        confirmText: 'Save Changes',\r\n        variant: 'default'\r\n      },\r\n      () => {\r\n        handleSubmitWithServiceProviders()\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onClose}>\r\n        <DialogContent className=\"bg-background border-border max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2 text-foreground\">\r\n              <Edit className=\"h-5 w-5 text-emerald-400\" />\r\n              Edit Vehicle\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-muted-foreground\">\r\n              Update vehicle information and metadata\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <Form {...form}>\r\n            <form onSubmit={(e) => { e.preventDefault(); handleSubmitWithConfirmation(); }} className=\"space-y-6\">\r\n              {/* Basic Information */}\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"text-sm font-semibold text-emerald-400 uppercase tracking-wide\">\r\n                  Basic Information\r\n                </h3>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"name\"\r\n                    render={({ field }) => (\r\n                      <FormItem className=\"col-span-2\">\r\n                        <FormLabel className=\"text-foreground\">Vehicle Name *</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            className=\"bg-background border-input text-foreground\"\r\n                            placeholder=\"Enter vehicle name\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"entity_code\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Vehicle Code</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            className=\"bg-background border-input text-foreground font-mono\"\r\n                            placeholder=\"e.g., VEH001\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormDescription className=\"text-xs text-muted-foreground\">\r\n                          Unique identifier for this vehicle\r\n                        </FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"platform\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Platform</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            className=\"bg-background border-input text-foreground\"\r\n                            placeholder=\"e.g., Fund Admin Platform\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"type\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Vehicle Type *</FormLabel>\r\n                        <Select onValueChange={field.onChange} value={field.value}>\r\n                          <FormControl>\r\n                            <SelectTrigger className=\"bg-background border-input text-foreground\">\r\n                              <SelectValue />\r\n                            </SelectTrigger>\r\n                          </FormControl>\r\n                          <SelectContent className=\"bg-popover border-border\">\r\n                            {VEHICLE_TYPES.map((type) => (\r\n                              <SelectItem key={type.value} value={type.value} className=\"text-foreground\">\r\n                                {type.label}\r\n                              </SelectItem>\r\n                            ))}\r\n                          </SelectContent>\r\n                        </Select>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"status\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Status *</FormLabel>\r\n                        <Select onValueChange={field.onChange} value={field.value}>\r\n                          <FormControl>\r\n                            <SelectTrigger className=\"bg-background border-input text-foreground\">\r\n                              <SelectValue />\r\n                            </SelectTrigger>\r\n                          </FormControl>\r\n                          <SelectContent className=\"bg-popover border-border\">\r\n                            {STATUS_OPTIONS.map((status) => (\r\n                              <SelectItem\r\n                                key={status.value}\r\n                                value={status.value}\r\n                                className=\"text-foreground\"\r\n                              >\r\n                                {status.label}\r\n                              </SelectItem>\r\n                            ))}\r\n                          </SelectContent>\r\n                        </Select>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"investment_name\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Investment Name</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            className=\"bg-background border-input text-foreground\"\r\n                            placeholder=\"Investment vehicle name\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"former_entity\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Former Vehicle Name</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            className=\"bg-background border-input text-foreground\"\r\n                            placeholder=\"Previous name if renamed\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Service Providers */}\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"text-sm font-semibold text-emerald-400 uppercase tracking-wide\">\r\n                  Service Providers\r\n                </h3>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"text-foreground\">Arranger</Label>\r\n                    <Select\r\n                      value={arrangerEntityId}\r\n                      onValueChange={(value) => setArrangerEntityId(value === 'none' ? '' : value)}\r\n                      disabled={dropdownsLoading}\r\n                    >\r\n                      <SelectTrigger className=\"bg-background border-input text-foreground\">\r\n                        <SelectValue placeholder={dropdownsLoading ? 'Loading...' : 'Select arranger'} />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"none\">None</SelectItem>\r\n                        {dropdownOptions.arrangers.map((arranger) => (\r\n                          <SelectItem key={arranger.id} value={arranger.id}>\r\n                            {arranger.name}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"text-foreground\">Legal Counsel</Label>\r\n                    <Select\r\n                      value={lawyerId}\r\n                      onValueChange={(value) => setLawyerId(value === 'none' ? '' : value)}\r\n                      disabled={dropdownsLoading}\r\n                    >\r\n                      <SelectTrigger className=\"bg-background border-input text-foreground\">\r\n                        <SelectValue placeholder={dropdownsLoading ? 'Loading...' : 'Select legal counsel'} />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"none\">None</SelectItem>\r\n                        {dropdownOptions.lawyers.map((lawyer) => (\r\n                          <SelectItem key={lawyer.id} value={lawyer.id}>\r\n                            {lawyer.name} {lawyer.firm_name && lawyer.name !== lawyer.firm_name ? `(${lawyer.firm_name})` : ''}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"text-foreground\">Address</Label>\r\n                  <Textarea\r\n                    value={address}\r\n                    onChange={(e) => setAddress(e.target.value)}\r\n                    className=\"bg-background border-input text-foreground\"\r\n                    placeholder=\"Registered address of the vehicle\"\r\n                    rows={2}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Legal & Compliance */}\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"text-sm font-semibold text-emerald-400 uppercase tracking-wide\">\r\n                  Legal & Compliance\r\n                </h3>\r\n\r\n                <div className=\"grid grid-cols-3 gap-4\">\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"domicile\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Domicile</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            className=\"bg-background border-input text-foreground\"\r\n                            placeholder=\"e.g., Cayman Islands\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"legal_jurisdiction\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Legal Jurisdiction</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            className=\"bg-background border-input text-foreground\"\r\n                            placeholder=\"e.g., Delaware\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"registration_number\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Registration Number</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            className=\"bg-background border-input text-foreground font-mono\"\r\n                            placeholder=\"Registration ID\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-3 gap-4\">\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"currency\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Currency *</FormLabel>\r\n                        <Select onValueChange={field.onChange} value={field.value}>\r\n                          <FormControl>\r\n                            <SelectTrigger className=\"bg-background border-input text-foreground\">\r\n                              <SelectValue />\r\n                            </SelectTrigger>\r\n                          </FormControl>\r\n                          <SelectContent className=\"bg-popover border-border\">\r\n                            {CURRENCIES.map((curr) => (\r\n                              <SelectItem key={curr} value={curr} className=\"text-foreground\">\r\n                                {curr}\r\n                              </SelectItem>\r\n                            ))}\r\n                          </SelectContent>\r\n                        </Select>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"formation_date\"\r\n                    render={({ field }) => (\r\n                      <FormItem className=\"col-span-2\">\r\n                        <FormLabel className=\"text-foreground\">Formation Date</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            type=\"date\"\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            className=\"bg-background border-input text-foreground\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Reporting */}\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"text-sm font-semibold text-emerald-400 uppercase tracking-wide\">\r\n                  Reporting\r\n                </h3>\r\n\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"requires_reporting\"\r\n                  render={({ field }) => (\r\n                    <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border bg-muted/30 p-4\">\r\n                      <div className=\"space-y-0.5\">\r\n                        <FormLabel className=\"text-foreground\">Requires Reporting</FormLabel>\r\n                        <FormDescription className=\"text-xs text-muted-foreground\">\r\n                          Enable if this vehicle has reporting obligations\r\n                        </FormDescription>\r\n                      </div>\r\n                      <FormControl>\r\n                        <Switch checked={field.value || false} onCheckedChange={field.onChange} />\r\n                      </FormControl>\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n\r\n                {form.watch('requires_reporting') && (\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"reporting_type\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Reporting Type</FormLabel>\r\n                        <Select\r\n                          onValueChange={field.onChange}\r\n                          value={field.value || 'Not Required'}\r\n                        >\r\n                          <FormControl>\r\n                            <SelectTrigger className=\"bg-background border-input text-foreground\">\r\n                              <SelectValue />\r\n                            </SelectTrigger>\r\n                          </FormControl>\r\n                          <SelectContent className=\"bg-popover border-border\">\r\n                            {REPORTING_OPTIONS.map((option) => (\r\n                              <SelectItem\r\n                                key={option.value}\r\n                                value={option.value}\r\n                                className=\"text-foreground\"\r\n                              >\r\n                                {option.label}\r\n                              </SelectItem>\r\n                            ))}\r\n                          </SelectContent>\r\n                        </Select>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                )}\r\n              </div>\r\n\r\n              {/* Logo & Branding */}\r\n              <div className=\"space-y-4\">\r\n                <h3 className=\"text-sm font-semibold text-emerald-400 uppercase tracking-wide\">\r\n                  Branding\r\n                </h3>\r\n\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <Label className=\"text-foreground mb-2 block\">Vehicle Logo</Label>\r\n                    {logoUrl ? (\r\n                      <div className=\"flex items-start gap-4\">\r\n                        <Image\r\n                          src={logoUrl}\r\n                          alt=\"Vehicle logo\"\r\n                          width={96}\r\n                          height={96}\r\n                          className=\"w-24 h-24 object-contain bg-muted rounded border border-border\"\r\n                        />\r\n                        <div className=\"flex flex-col gap-2\">\r\n                          <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={handleRemoveLogo}\r\n                            className=\"text-red-400 hover:text-red-200 border-red-400/40 hover:bg-red-500/10\"\r\n                            disabled={logoUploading}\r\n                          >\r\n                            <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                            Remove Logo\r\n                          </Button>\r\n                          <p className=\"text-xs text-muted-foreground\">Click to remove current logo</p>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div>\r\n                        <input\r\n                          type=\"file\"\r\n                          accept=\"image/*\"\r\n                          onChange={(e) => {\r\n                            const file = e.target.files?.[0]\r\n                            if (file) handleLogoUpload(file)\r\n                          }}\r\n                          className=\"hidden\"\r\n                          id=\"logo-upload\"\r\n                          disabled={logoUploading}\r\n                        />\r\n                        <label htmlFor=\"logo-upload\">\r\n                          <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            disabled={logoUploading}\r\n                            className=\"cursor-pointer border-border text-foreground hover:bg-muted bg-background\"\r\n                            onClick={(e) => {\r\n                              e.preventDefault()\r\n                              document.getElementById('logo-upload')?.click()\r\n                            }}\r\n                          >\r\n                            {logoUploading ? (\r\n                              <>\r\n                                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                                Uploading...\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <Upload className=\"h-4 w-4 mr-2\" />\r\n                                Upload Logo\r\n                              </>\r\n                            )}\r\n                          </Button>\r\n                        </label>\r\n                        {logoError && (\r\n                          <p className=\"text-xs text-red-400 mt-2 flex items-center gap-1\">\r\n                            <AlertCircle className=\"h-3 w-3\" />\r\n                            {logoError}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"website_url\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"text-foreground\">Website URL</FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            {...field}\r\n                            value={field.value || ''}\r\n                            type=\"url\"\r\n                            className=\"bg-background border-input text-foreground\"\r\n                            placeholder=\"https://example.com\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Notes */}\r\n              <FormField\r\n                control={form.control}\r\n                name=\"notes\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"text-foreground\">Internal Notes</FormLabel>\r\n                    <FormControl>\r\n                      <Textarea\r\n                        {...field}\r\n                        value={field.value || ''}\r\n                        className=\"bg-background border-input text-foreground\"\r\n                        placeholder=\"Add any internal notes or comments about this vehicle...\"\r\n                        rows={4}\r\n                      />\r\n                    </FormControl>\r\n                    <FormDescription className=\"text-xs text-muted-foreground\">\r\n                      These notes are for internal use only and not visible to investors\r\n                    </FormDescription>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <DialogFooter>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={onClose}\r\n                  className=\"bg-muted text-foreground border-border hover:bg-muted/80\"\r\n                  disabled={isSubmitting}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  className=\"bg-primary hover:bg-primary/90 text-primary-foreground\"\r\n                  disabled={isSubmitting || logoUploading}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <>\r\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                      Saving...\r\n                    </>\r\n                  ) : (\r\n                    'Save Changes'\r\n                  )}\r\n                </Button>\r\n              </DialogFooter>\r\n            </form>\r\n          </Form>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <ConfirmationDialog />\r\n    </>\r\n  )\r\n}\r\n","import { z } from 'zod'\n\nexport const entityFormSchema = z.object({\n  name: z\n    .string()\n    .min(1, 'Entity name is required')\n    .max(200, 'Name must be less than 200 characters'),\n\n  entity_code: z\n    .string()\n    .min(1, 'Entity code is required')\n    .max(50, 'Entity code must be less than 50 characters')\n    .nullable(),\n\n  platform: z.string().max(100, 'Platform must be less than 100 characters').nullable(),\n\n  investment_name: z\n    .string()\n    .max(200, 'Investment name must be less than 200 characters')\n    .nullable(),\n\n  former_entity: z\n    .string()\n    .max(200, 'Former entity name must be less than 200 characters')\n    .nullable(),\n\n  status: z.enum(['LIVE', 'CLOSED', 'TBD']),\n\n  type: z.enum([\n    'fund',\n    'spv',\n    'securitization',\n    'note',\n    'venture_capital',\n    'private_equity',\n    'real_estate',\n    'other'\n  ]),\n\n  domicile: z.string().max(100, 'Domicile must be less than 100 characters').nullable(),\n\n  currency: z\n    .string()\n    .length(3, 'Currency must be exactly 3 letters')\n    .transform((val) => val.toUpperCase()),\n\n  formation_date: z.string().nullable(),\n\n  legal_jurisdiction: z\n    .string()\n    .max(100, 'Legal jurisdiction must be less than 100 characters')\n    .nullable(),\n\n  registration_number: z\n    .string()\n    .max(100, 'Registration number must be less than 100 characters')\n    .nullable(),\n\n  reporting_type: z\n    .enum(['Not Required', 'Company Only', 'Online only', 'Company + Online'])\n    .nullable(),\n\n  requires_reporting: z.boolean().nullable(),\n\n  notes: z.string().max(5000, 'Notes must be less than 5000 characters').nullable(),\n\n  logo_url: z\n    .string()\n    .url('Logo URL must be a valid URL')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val)),\n\n  website_url: z\n    .string()\n    .url('Website URL must be a valid URL')\n    .nullable()\n    .or(z.literal(''))\n    .transform((val) => (val === '' ? null : val))\n})\n\nexport type EntityFormData = z.infer<typeof entityFormSchema>\n\n// Validation for entity code uniqueness (to be used with async validation)\nexport async function validateEntityCodeUnique(\n  entityCode: string,\n  currentEntityId?: string\n): Promise<boolean> {\n  try {\n    const response = await fetch(\n      `/api/entities/validate-code?code=${encodeURIComponent(entityCode)}${currentEntityId ? `&excludeId=${currentEntityId}` : ''}`\n    )\n    const data = await response.json()\n    return data.isUnique\n  } catch (error) {\n    console.error('Failed to validate entity code:', error)\n    return true // Allow on error to not block the user\n  }\n}\n","import { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { entityFormSchema, EntityFormData } from '@/lib/schemas/entity-schema'\nimport { toast } from 'sonner'\nimport { useRouter } from 'next/navigation'\n\ninterface UseEntityFormProps {\n  entityId?: string // If provided, we're editing; otherwise creating\n  defaultValues?: Partial<EntityFormData>\n  onSuccess?: (data: any) => void\n  mode?: 'create' | 'edit'\n}\n\nexport function useEntityForm({\n  entityId,\n  defaultValues,\n  onSuccess,\n  mode = 'edit'\n}: UseEntityFormProps) {\n  const router = useRouter()\n\n  const form = useForm<EntityFormData>({\n    resolver: zodResolver(entityFormSchema),\n    defaultValues: defaultValues || {\n      name: '',\n      entity_code: '',\n      platform: '',\n      investment_name: '',\n      former_entity: '',\n      status: 'LIVE',\n      type: 'fund',\n      domicile: '',\n      currency: 'USD',\n      formation_date: null,\n      legal_jurisdiction: '',\n      registration_number: '',\n      reporting_type: 'Not Required',\n      requires_reporting: false,\n      notes: '',\n      logo_url: null,\n      website_url: null\n    }\n  })\n\n  const onSubmit = async (data: EntityFormData) => {\n    try {\n      const endpoint = mode === 'edit' && entityId ? `/api/entities/${entityId}` : '/api/vehicles'\n      const method = mode === 'edit' ? 'PATCH' : 'POST'\n\n      const response = await fetch(endpoint, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data)\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || `Failed to ${mode} entity`)\n      }\n\n      const result = await response.json()\n      const successMessage =\n        mode === 'edit' ? 'Entity updated successfully' : 'Entity created successfully'\n      toast.success(successMessage)\n\n      onSuccess?.(result)\n\n      // If creating, redirect to the new entity\n      if (mode === 'create' && result.vehicle?.id) {\n        router.push(`/versotech_main/entities/${result.vehicle.id}`)\n      }\n    } catch (error) {\n      console.error(`Failed to ${mode} entity:`, error)\n      toast.error(error instanceof Error ? error.message : `Failed to ${mode} entity`)\n      throw error\n    }\n  }\n\n  return {\n    form,\n    onSubmit: form.handleSubmit(onSubmit),\n    isSubmitting: form.formState.isSubmitting,\n    errors: form.formState.errors\n  }\n}\n","'use client'\n\nimport { useState, useCallback } from 'react'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle\n} from '@/components/ui/alert-dialog'\n\ninterface ConfirmationConfig {\n  title: string\n  description: string\n  confirmText?: string\n  cancelText?: string\n  variant?: 'default' | 'destructive'\n}\n\nexport function useConfirmationDialog() {\n  const [isOpen, setIsOpen] = useState(false)\n  const [config, setConfig] = useState<ConfirmationConfig | null>(null)\n  const [onConfirmCallback, setOnConfirmCallback] = useState<(() => void) | null>(null)\n\n  const confirm = useCallback((cfg: ConfirmationConfig, onConfirm: () => void) => {\n    setConfig(cfg)\n    setOnConfirmCallback(() => onConfirm)\n    setIsOpen(true)\n  }, [])\n\n  const handleConfirm = useCallback(() => {\n    onConfirmCallback?.()\n    setIsOpen(false)\n  }, [onConfirmCallback])\n\n  const handleCancel = useCallback(() => {\n    setIsOpen(false)\n  }, [])\n\n  const ConfirmationDialog = useCallback(() => {\n    if (!config) return null\n\n    return (\n      <AlertDialog open={isOpen} onOpenChange={setIsOpen}>\n        <AlertDialogContent className=\"bg-zinc-950 border-white/10\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"text-white\">{config.title}</AlertDialogTitle>\n            <AlertDialogDescription className=\"text-gray-400\">\n              {config.description}\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel\n              onClick={handleCancel}\n              className=\"bg-gray-700 text-white border-gray-600 hover:bg-gray-600\"\n            >\n              {config.cancelText || 'Cancel'}\n            </AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleConfirm}\n              className={\n                config.variant === 'destructive'\n                  ? 'bg-red-600 hover:bg-red-700 text-white'\n                  : 'bg-emerald-600 hover:bg-emerald-700 text-white'\n              }\n            >\n              {config.confirmText || 'Confirm'}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    )\n  }, [config, isOpen, handleConfirm, handleCancel])\n\n  return {\n    confirm,\n    ConfirmationDialog\n  }\n}\n","'use client'\n\nimport { useState } from 'react'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle\n} from '@/components/ui/alert-dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { toast } from 'sonner'\nimport { Loader2, AlertTriangle, CheckCircle2 } from 'lucide-react'\nimport { useRouter } from 'next/navigation'\n\ninterface Dependencies {\n  directors: number\n  stakeholders: number\n  investors: number\n  documents: number\n  folders: number\n  deals: number\n  subscriptions: number\n  valuations: number\n}\n\ninterface DeleteEntityDialogProps {\n  open: boolean\n  onClose: () => void\n  entityId: string\n  entityName: string\n}\n\nexport function DeleteEntityDialog({ open, onClose, entityId, entityName }: DeleteEntityDialogProps) {\n  const router = useRouter()\n  const [confirmationText, setConfirmationText] = useState('')\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [dependencies, setDependencies] = useState<Dependencies | null>(null)\n  const [isCheckingDependencies, setIsCheckingDependencies] = useState(false)\n\n  // Check dependencies when dialog opens\n  const handleOpenChange = async (isOpen: boolean) => {\n    if (isOpen) {\n      setIsCheckingDependencies(true)\n      try {\n        // Call DELETE endpoint to check dependencies (it will return 409 if there are dependencies)\n        const response = await fetch(`/api/entities/${entityId}`, {\n          method: 'DELETE'\n        })\n\n        if (response.status === 409) {\n          // Has dependencies - show them\n          const data = await response.json()\n          setDependencies(data.dependencies)\n        } else if (response.ok) {\n          // No dependencies - but we haven&apos;t confirmed yet, so just show success state\n          setDependencies({\n            directors: 0,\n            stakeholders: 0,\n            investors: 0,\n            documents: 0,\n            folders: 0,\n            deals: 0,\n            subscriptions: 0,\n            valuations: 0\n          })\n        } else {\n          // Error\n          const data = await response.json().catch(() => ({}))\n          toast.error(data.error || 'Failed to check dependencies')\n          onClose()\n        }\n      } catch (error) {\n        console.error('Failed to check dependencies:', error)\n        toast.error('Failed to check dependencies')\n        onClose()\n      } finally {\n        setIsCheckingDependencies(false)\n      }\n    } else {\n      setConfirmationText('')\n      setDependencies(null)\n      onClose()\n    }\n  }\n\n  const handleDelete = async () => {\n    if (confirmationText !== entityName) {\n      toast.error('Confirmation text does not match')\n      return\n    }\n\n    setIsDeleting(true)\n    try {\n      const response = await fetch(`/api/entities/${entityId}`, {\n        method: 'DELETE'\n      })\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => ({}))\n        if (response.status === 409) {\n          toast.error('Cannot delete entity with dependencies. Please remove all dependencies first.')\n        } else {\n          throw new Error(data.error || 'Failed to delete entity')\n        }\n        return\n      }\n\n      toast.success(`Entity \"${entityName}\" deleted successfully`)\n      router.push('/versotech_main/entities')\n      router.refresh()\n    } catch (error) {\n      console.error('Failed to delete entity:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to delete entity')\n    } finally {\n      setIsDeleting(false)\n      onClose()\n    }\n  }\n\n  const hasDependencies =\n    dependencies && Object.values(dependencies).some((count) => count > 0)\n  const canDelete = !hasDependencies && confirmationText === entityName\n\n  return (\n    <AlertDialog open={open} onOpenChange={handleOpenChange}>\n      <AlertDialogContent className=\"bg-zinc-950 border-red-500/20 text-white max-w-2xl\">\n        <AlertDialogHeader>\n          <AlertDialogTitle className=\"flex items-center gap-2 text-red-400\">\n            <AlertTriangle className=\"h-5 w-5\" />\n            Delete Entity: {entityName}\n          </AlertDialogTitle>\n          <AlertDialogDescription className=\"text-gray-400\">\n            This action cannot be undone. This will permanently delete the entity and all\n            associated data from the system.\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n\n        {isCheckingDependencies ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-emerald-400\" />\n            <span className=\"ml-3 text-gray-400\">Checking dependencies...</span>\n          </div>\n        ) : dependencies ? (\n          <div className=\"space-y-4\">\n            {hasDependencies ? (\n              <div className=\"rounded-lg border border-red-500/30 bg-red-500/10 p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <AlertTriangle className=\"h-5 w-5 text-red-400 shrink-0 mt-0.5\" />\n                  <div className=\"space-y-2 flex-1\">\n                    <p className=\"font-semibold text-red-300\">\n                      Cannot Delete: Entity Has Dependencies\n                    </p>\n                    <p className=\"text-sm text-gray-300\">\n                      This entity has the following linked data that must be removed first:\n                    </p>\n                    <ul className=\"space-y-1 text-sm\">\n                      {dependencies.directors > 0 && (\n                        <li className=\"text-gray-300\">\n                          • {dependencies.directors} Director{dependencies.directors !== 1 ? 's' : ''}\n                        </li>\n                      )}\n                      {dependencies.stakeholders > 0 && (\n                        <li className=\"text-gray-300\">\n                          • {dependencies.stakeholders} Stakeholder{dependencies.stakeholders !== 1 ? 's' : ''}\n                        </li>\n                      )}\n                      {dependencies.investors > 0 && (\n                        <li className=\"text-gray-300\">\n                          • {dependencies.investors} Investor Relationship{dependencies.investors !== 1 ? 's' : ''}\n                        </li>\n                      )}\n                      {dependencies.subscriptions > 0 && (\n                        <li className=\"text-gray-300\">\n                          • {dependencies.subscriptions} Subscription{dependencies.subscriptions !== 1 ? 's' : ''}\n                        </li>\n                      )}\n                      {dependencies.documents > 0 && (\n                        <li className=\"text-gray-300\">\n                          • {dependencies.documents} Document{dependencies.documents !== 1 ? 's' : ''}\n                        </li>\n                      )}\n                      {dependencies.folders > 0 && (\n                        <li className=\"text-gray-300\">\n                          • {dependencies.folders} Folder{dependencies.folders !== 1 ? 's' : ''}\n                        </li>\n                      )}\n                      {dependencies.deals > 0 && (\n                        <li className=\"text-gray-300\">\n                          • {dependencies.deals} Deal{dependencies.deals !== 1 ? 's' : ''}\n                        </li>\n                      )}\n                      {dependencies.valuations > 0 && (\n                        <li className=\"text-gray-300\">\n                          • {dependencies.valuations} Valuation{dependencies.valuations !== 1 ? 's' : ''}\n                        </li>\n                      )}\n                    </ul>\n                    <p className=\"text-sm text-gray-400 mt-3\">\n                      Please remove all dependencies before deleting this entity.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <CheckCircle2 className=\"h-5 w-5 text-emerald-400 shrink-0 mt-0.5\" />\n                  <div className=\"space-y-2 flex-1\">\n                    <p className=\"font-semibold text-emerald-300\">No Dependencies Found</p>\n                    <p className=\"text-sm text-gray-300\">\n                      This entity has no linked data and can be safely deleted.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {!hasDependencies && (\n              <div className=\"space-y-3 pt-2\">\n                <Label htmlFor=\"confirmation\" className=\"text-white\">\n                  Type <span className=\"font-mono text-emerald-400\">{entityName}</span> to confirm\n                  deletion:\n                </Label>\n                <Input\n                  id=\"confirmation\"\n                  value={confirmationText}\n                  onChange={(e) => setConfirmationText(e.target.value)}\n                  placeholder={entityName}\n                  className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\n                  autoComplete=\"off\"\n                />\n              </div>\n            )}\n          </div>\n        ) : null}\n\n        <AlertDialogFooter>\n          <AlertDialogCancel\n            onClick={onClose}\n            disabled={isDeleting}\n            className=\"bg-white/10 border-white/10 text-white hover:bg-white/20\"\n          >\n            Cancel\n          </AlertDialogCancel>\n          {!hasDependencies && (\n            <AlertDialogAction\n              onClick={handleDelete}\n              disabled={!canDelete || isDeleting}\n              className=\"bg-red-600 hover:bg-red-700 text-white\"\n            >\n              {isDeleting ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Deleting...\n                </>\n              ) : (\n                'Delete Entity'\n              )}\n            </AlertDialogAction>\n          )}\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport { toast } from 'sonner'\nimport { Loader2, FileText } from 'lucide-react'\n\ninterface EntityDocument {\n  id: string\n  name: string | null\n  type: string | null\n  description?: string | null\n  file_key?: string | null\n  external_url?: string | null\n  link_type?: string | null\n  created_at: string\n  created_by?: string | null\n  folder_id?: string | null\n}\n\ninterface EditDocumentModalProps {\n  open: boolean\n  onClose: () => void\n  document: EntityDocument\n  onSuccess: () => void\n}\n\nexport function EditDocumentModal({ open, onClose, document, onSuccess }: EditDocumentModalProps) {\n  const [name, setName] = useState(document.name || '')\n  const [description, setDescription] = useState(document.description || '')\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  // Update form when document changes\n  useEffect(() => {\n    setName(document.name || '')\n    setDescription(document.description || '')\n  }, [document])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!name.trim()) {\n      toast.error('Document name is required')\n      return\n    }\n\n    setIsSubmitting(true)\n    try {\n      const response = await fetch(`/api/staff/documents/${document.id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          name: name.trim(),\n          description: description.trim() || null\n        })\n      })\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => ({}))\n        throw new Error(data.error || 'Failed to update document')\n      }\n\n      toast.success('Document updated successfully')\n      onSuccess()\n      onClose()\n    } catch (error) {\n      console.error('Failed to update document:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to update document')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleClose = () => {\n    if (!isSubmitting) {\n      setName(document.name || '')\n      setDescription(document.description || '')\n      onClose()\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[500px] bg-zinc-950 border-white/10\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white flex items-center gap-2\">\n            <FileText className=\"h-5 w-5 text-emerald-400\" />\n            Edit Document\n          </DialogTitle>\n          <DialogDescription className=\"text-gray-400\">\n            Update document name and description\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4 py-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\" className=\"text-white\">\n              Document Name *\n            </Label>\n            <Input\n              id=\"name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"Enter document name\"\n              className=\"bg-white/5 border-white/10 text-white\"\n              disabled={isSubmitting}\n              required\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\" className=\"text-white\">\n              Description\n            </Label>\n            <Textarea\n              id=\"description\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              placeholder=\"Add document description (optional)\"\n              rows={3}\n              className=\"bg-white/5 border-white/10 text-white\"\n              disabled={isSubmitting}\n            />\n          </div>\n\n          {document.file_key && (\n            <div className=\"text-xs text-gray-400 pt-2 border-t border-white/10\">\n              File: {document.file_key.split('/').pop()}\n            </div>\n          )}\n\n          <DialogFooter className=\"border-t border-white/10 pt-4\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={handleClose}\n              disabled={isSubmitting}\n              className=\"border-white/10 text-white hover:bg-white/10\"\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={isSubmitting || !name.trim()}\n              className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n            >\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Saving...\n                </>\n              ) : (\n                'Save Changes'\n              )}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","'use client'\n\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from '@/components/ui/select'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { Loader2, Plus, Search, FileText } from 'lucide-react'\nimport type { EntityInvestorSummary } from './types'\nimport { toast } from 'sonner'\n\nconst allocationStatusOptions = [\n  { value: 'pending', label: 'Pending' },\n  { value: 'committed', label: 'Committed' },\n  { value: 'active', label: 'Active' },\n  { value: 'closed', label: 'Closed' },\n  { value: 'cancelled', label: 'Cancelled' }\n]\n\nconst investorTypeOptions = [\n  { value: 'individual', label: 'Individual' },\n  { value: 'institutional', label: 'Institutional' },\n  { value: 'entity', label: 'Entity' },\n  { value: 'family_office', label: 'Family Office' },\n  { value: 'fund', label: 'Fund' }\n]\n\nconst subscriptionStatusOptions = allocationStatusOptions\n\ninterface StaffInvestorSummary {\n  id: string\n  legal_name: string\n  display_name?: string | null\n  email?: string | null\n  type?: string | null\n  status?: string | null\n}\n\ninterface LinkEntityInvestorModalProps {\n  entityId: string\n  open: boolean\n  onClose: () => void\n  onSuccess: (investor: EntityInvestorSummary) => void\n}\n\nexport function LinkEntityInvestorModal({\n  entityId,\n  open,\n  onClose,\n  onSuccess\n}: LinkEntityInvestorModalProps) {\n  const [mode, setMode] = useState<'existing' | 'new'>('existing')\n  const [loading, setLoading] = useState(false)\n  const [searchLoading, setSearchLoading] = useState(false)\n  const [searchQuery, setSearchQuery] = useState('')\n  const [investors, setInvestors] = useState<StaffInvestorSummary[]>([])\n  const [selectedInvestor, setSelectedInvestor] = useState<string>('')\n\n  const [relationshipRole, setRelationshipRole] = useState('')\n  const [allocationStatus, setAllocationStatus] = useState<string>('pending')\n  const [notes, setNotes] = useState('')\n  const [sendInvite, setSendInvite] = useState(true)\n\n  const [commitment, setCommitment] = useState<string>('')\n  const [currency, setCurrency] = useState<string>('USD')\n  const [subscriptionStatus, setSubscriptionStatus] = useState<string>('pending')\n  const [effectiveDate, setEffectiveDate] = useState<string>('')\n  const [fundingDueAt, setFundingDueAt] = useState<string>('')\n  const [units, setUnits] = useState<string>('')\n  const [acknowledgementNotes, setAcknowledgementNotes] = useState<string>('')\n\n  const [newInvestor, setNewInvestor] = useState({\n    legal_name: '',\n    display_name: '',\n    type: 'institutional',\n    email: '',\n    phone: '',\n    country: '',\n    country_of_incorporation: '',\n    tax_residency: ''\n  })\n\n  useEffect(() => {\n    if (!open) {\n      setMode('existing')\n      setSearchQuery('')\n      setSelectedInvestor('')\n      setRelationshipRole('')\n      setAllocationStatus('pending')\n      setNotes('')\n      setSendInvite(true)\n      setCommitment('')\n      setCurrency('USD')\n      setSubscriptionStatus('pending')\n      setEffectiveDate('')\n      setFundingDueAt('')\n      setUnits('')\n      setAcknowledgementNotes('')\n      setNewInvestor({\n        legal_name: '',\n        display_name: '',\n        type: 'institutional',\n        email: '',\n        phone: '',\n        country: '',\n        country_of_incorporation: '',\n        tax_residency: ''\n      })\n      return\n    }\n\n    setSearchLoading(true)\n    fetch('/api/staff/investors')\n      .then((res) => res.json())\n      .then((data) => {\n        setInvestors(data.investors || [])\n      })\n      .catch((error) => {\n        console.error('Failed to load investors:', error)\n      })\n      .finally(() => setSearchLoading(false))\n  }, [open])\n\n  useEffect(() => {\n    if (!open) return\n    const controller = new AbortController()\n\n    const handler = setTimeout(() => {\n      setSearchLoading(true)\n      const url = searchQuery.trim()\n        ? `/api/staff/investors?search=${encodeURIComponent(searchQuery.trim())}`\n        : '/api/staff/investors'\n\n      fetch(url, { signal: controller.signal })\n        .then((res) => res.json())\n        .then((data) => setInvestors(data.investors || []))\n        .catch((error) => {\n          if (error.name !== 'AbortError') {\n            console.error('Investor search failed:', error)\n          }\n        })\n        .finally(() => setSearchLoading(false))\n    }, 300)\n\n    return () => {\n      controller.abort()\n      clearTimeout(handler)\n    }\n  }, [searchQuery, open])\n\n  const selectedInvestorSummary = useMemo(\n    () => investors.find((inv) => inv.id === selectedInvestor),\n    [investors, selectedInvestor]\n  )\n\n  const handleSubmit = useCallback(async () => {\n    if (mode === 'existing' && !selectedInvestor) {\n      return\n    }\n\n    if (mode === 'new' && !newInvestor.legal_name.trim()) {\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      const payload: Record<string, any> = {\n        relationship_role: relationshipRole.trim() || null,\n        allocation_status: allocationStatus,\n        notes: notes.trim() || null,\n        send_invite: sendInvite\n      }\n\n      const subscriptionPayload: Record<string, any> = {}\n      if (commitment) {\n        const value = Number(commitment)\n        if (!Number.isNaN(value)) {\n          subscriptionPayload.commitment = value\n        }\n      }\n      if (units) {\n        const value = Number(units)\n        if (!Number.isNaN(value)) {\n          subscriptionPayload.units = value\n        }\n      }\n\n      if (Object.keys(subscriptionPayload).length > 0 || effectiveDate || fundingDueAt || acknowledgementNotes || subscriptionStatus !== 'pending' || currency !== 'USD') {\n        subscriptionPayload.currency = currency.toUpperCase()\n        subscriptionPayload.status = subscriptionStatus\n        subscriptionPayload.effective_date = effectiveDate || null\n        subscriptionPayload.funding_due_at = fundingDueAt || null\n        subscriptionPayload.acknowledgement_notes = acknowledgementNotes.trim() || null\n        payload.subscription = subscriptionPayload\n      }\n\n      if (mode === 'existing') {\n        payload.investor_id = selectedInvestor\n      } else {\n        payload.investor = {\n          legal_name: newInvestor.legal_name.trim(),\n          display_name: newInvestor.display_name.trim() || null,\n          type: newInvestor.type,\n          email: newInvestor.email.trim() || null,\n          phone: newInvestor.phone.trim() || null,\n          country: newInvestor.country.trim() || null,\n          country_of_incorporation: newInvestor.country_of_incorporation.trim() || null,\n          tax_residency: newInvestor.tax_residency.trim() || null\n        }\n      }\n\n      const response = await fetch(`/api/entities/${entityId}/investors`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      })\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => ({}))\n        throw new Error(data.error || 'Failed to link investor')\n      }\n\n      const data = await response.json()\n      onSuccess(data.investor as EntityInvestorSummary)\n      onClose()\n    } catch (error) {\n      console.error('Failed to link investor:', error)\n      throw error\n    } finally {\n      setLoading(false)\n    }\n  }, [\n    mode,\n    selectedInvestor,\n    newInvestor,\n    relationshipRole,\n    allocationStatus,\n    notes,\n    sendInvite,\n    commitment,\n    units,\n    currency,\n    subscriptionStatus,\n    effectiveDate,\n    fundingDueAt,\n    acknowledgementNotes,\n    entityId,\n    onClose,\n    onSuccess\n  ])\n\n  const handleConfirm = async () => {\n    try {\n      await handleSubmit()\n    } catch (error) {\n      if (error instanceof Error) {\n        toast.error(error.message)\n      } else {\n        toast.error('Failed to link investor. Please try again.')\n      }\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl h-[90vh] bg-zinc-950 border-white/10 flex flex-col gap-0 p-0 overflow-hidden\">\n        <DialogHeader className=\"px-6 pt-6 pb-4 shrink-0 border-b border-white/10\">\n          <DialogTitle className=\"text-white flex items-center gap-2\">\n            <Plus className=\"h-5 w-5 text-emerald-400\" />\n            Allocate Investor to Entity\n          </DialogTitle>\n          <DialogDescription className=\"text-gray-400\">\n            Link an existing investor or create a new profile and capture their subscription details.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"flex-1 overflow-y-auto px-6\">\n          <div className=\"space-y-6 py-6\">\n            <Tabs value={mode} onValueChange={(value) => setMode(value as 'existing' | 'new')}>\n              <TabsList className=\"grid grid-cols-2 bg-white/5 border border-white/10 w-full\">\n                <TabsTrigger value=\"existing\" className=\"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-100 text-white\">\n                  Select Existing Investor\n                </TabsTrigger>\n                <TabsTrigger value=\"new\" className=\"data-[state=active]:bg-emerald-500/20 data-[state=active]:text-emerald-100 text-white\">\n                  Create New Investor\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"existing\" className=\"mt-4 space-y-3\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"investor-search\" className=\"text-sm font-medium text-white\">\n                    Search Investors\n                  </Label>\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-3 h-4 w-4 text-gray-500\" />\n                    <Input\n                      id=\"investor-search\"\n                      className=\"pl-9 bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                      placeholder=\"Search by name, email, or type\"\n                      value={searchQuery}\n                      onChange={(event) => setSearchQuery(event.target.value)}\n                    />\n                  </div>\n                  <p className=\"text-xs text-gray-400\">Start typing to filter the investor list</p>\n                </div>\n\n                <ScrollArea className=\"h-[240px] rounded-md border border-white/10 bg-white/5\">\n                  <div className=\"divide-y divide-white/5\">\n                    {searchLoading && (\n                      <div className=\"flex items-center justify-center py-8 text-sm text-gray-400\">\n                        <Loader2 className=\"mr-2 h-5 w-5 animate-spin text-emerald-400\" />\n                        <span>Loading investors...</span>\n                      </div>\n                    )}\n                    {!searchLoading && investors.length === 0 && (\n                      <div className=\"py-8 text-center text-sm text-gray-400\">\n                        <div className=\"flex flex-col items-center gap-2\">\n                          <div className=\"h-12 w-12 rounded-full bg-white/5 flex items-center justify-center\">\n                            <Search className=\"h-6 w-6\" />\n                          </div>\n                          <p className=\"text-white\">No investors found.</p>\n                          <p className=\"text-xs\">Try adjusting your search or create a new investor.</p>\n                        </div>\n                      </div>\n                    )}\n                    {investors.map((investor) => (\n                      <button\n                        key={investor.id}\n                        type=\"button\"\n                        onClick={() => setSelectedInvestor(investor.id)}\n                        className={`w-full px-4 py-3 text-left transition-all ${\n                          selectedInvestor === investor.id\n                            ? 'bg-emerald-500/10 border-l-2 border-emerald-400'\n                            : 'hover:bg-white/10 border-l-2 border-transparent'\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between gap-3\">\n                          <div className=\"flex-1\">\n                            <p className=\"font-medium text-white\">{investor.legal_name}</p>\n                            <p className=\"text-xs text-gray-400 capitalize\">\n                              {investor.type ? investor.type.replace(/_/g, ' ') : 'Type unknown'}\n                              {investor.email ? ` • ${investor.email}` : ''}\n                            </p>\n                          </div>\n                          {selectedInvestor === investor.id && (\n                            <Badge variant=\"outline\" className=\"text-xs bg-emerald-500/20 border-emerald-400/40 text-emerald-100\">\n                              Selected\n                            </Badge>\n                          )}\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                </ScrollArea>\n\n                {selectedInvestorSummary && (\n                  <div className=\"rounded-md border border-emerald-400/40 bg-emerald-500/10 p-4 text-sm\">\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"h-10 w-10 rounded-full bg-emerald-500/20 flex items-center justify-center shrink-0\">\n                        <span className=\"text-emerald-200 font-semibold text-lg\">\n                          {selectedInvestorSummary.legal_name.charAt(0)}\n                        </span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"font-semibold text-emerald-100\">{selectedInvestorSummary.legal_name}</p>\n                        {selectedInvestorSummary.email && <p className=\"text-emerald-200 text-xs\">{selectedInvestorSummary.email}</p>}\n                        {selectedInvestorSummary.type && (\n                          <p className=\"capitalize text-emerald-300 text-xs mt-1\">{selectedInvestorSummary.type.replace(/_/g, ' ')}</p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"new\" className=\"mt-4 space-y-4\">\n                <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n                  <div className=\"space-y-2 md:col-span-2\">\n                    <Label htmlFor=\"new-legal-name\" className=\"text-sm font-medium text-white\">Legal Name *</Label>\n                    <Input\n                      id=\"new-legal-name\"\n                      value={newInvestor.legal_name}\n                      onChange={(event) =>\n                        setNewInvestor((prev) => ({ ...prev, legal_name: event.target.value }))\n                      }\n                      placeholder=\"Investor legal name\"\n                      className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"new-display-name\" className=\"text-sm font-medium text-white\">Display Name</Label>\n                    <Input\n                      id=\"new-display-name\"\n                      value={newInvestor.display_name}\n                      onChange={(event) =>\n                        setNewInvestor((prev) => ({ ...prev, display_name: event.target.value }))\n                      }\n                      placeholder=\"Optional short label\"\n                      className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"new-type\" className=\"text-sm font-medium text-white\">Investor Type</Label>\n                    <Select\n                      value={newInvestor.type}\n                      onValueChange={(value) => setNewInvestor((prev) => ({ ...prev, type: value }))}\n                    >\n                      <SelectTrigger id=\"new-type\" className=\"bg-white/5 border-white/10 text-white\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent className=\"bg-zinc-950 border-white/10\">\n                        {investorTypeOptions.map((option) => (\n                          <SelectItem key={option.value} value={option.value} className=\"text-white\">\n                            {option.label}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"new-email\" className=\"text-sm font-medium text-white\">Email</Label>\n                    <Input\n                      id=\"new-email\"\n                      type=\"email\"\n                      value={newInvestor.email}\n                      onChange={(event) =>\n                        setNewInvestor((prev) => ({ ...prev, email: event.target.value }))\n                      }\n                      placeholder=\"investor@email.com\"\n                      className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"new-phone\" className=\"text-sm font-medium text-white\">Phone</Label>\n                    <Input\n                      id=\"new-phone\"\n                      value={newInvestor.phone}\n                      onChange={(event) =>\n                        setNewInvestor((prev) => ({ ...prev, phone: event.target.value }))\n                      }\n                      placeholder=\"+1 (555) 123-4567\"\n                      className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"new-country\" className=\"text-sm font-medium text-white\">Country</Label>\n                    <Input\n                      id=\"new-country\"\n                      value={newInvestor.country}\n                      onChange={(event) =>\n                        setNewInvestor((prev) => ({ ...prev, country: event.target.value }))\n                      }\n                      placeholder=\"Country of residence\"\n                      className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"new-incorporation\" className=\"text-sm font-medium text-white\">Country of Incorporation</Label>\n                    <Input\n                      id=\"new-incorporation\"\n                      value={newInvestor.country_of_incorporation}\n                      onChange={(event) =>\n                        setNewInvestor((prev) => ({\n                          ...prev,\n                          country_of_incorporation: event.target.value\n                        }))\n                      }\n                      placeholder=\"Jurisdiction\"\n                      className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2 md:col-span-2\">\n                    <Label htmlFor=\"new-tax-residency\" className=\"text-sm font-medium text-white\">Tax Residency</Label>\n                    <Input\n                      id=\"new-tax-residency\"\n                      value={newInvestor.tax_residency}\n                      onChange={(event) =>\n                        setNewInvestor((prev) => ({ ...prev, tax_residency: event.target.value }))\n                      }\n                      placeholder=\"Tax residency\"\n                      className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                    />\n                  </div>\n                </div>\n              </TabsContent>\n            </Tabs>\n\n            <div className=\"rounded-lg border border-white/10 bg-white/5 p-5 space-y-4\">\n              <div className=\"flex items-center gap-2 pb-2 border-b border-white/10\">\n                <div className=\"h-8 w-8 rounded-full bg-emerald-500/20 flex items-center justify-center\">\n                  <FileText className=\"h-4 w-4 text-emerald-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-sm font-semibold text-white\">Allocation Details</h3>\n                  <p className=\"text-xs text-gray-400\">Define the investor's role and subscription terms</p>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"relationship_role\" className=\"text-sm font-medium text-white\">Relationship Role</Label>\n                  <Input\n                    id=\"relationship_role\"\n                    value={relationshipRole}\n                    onChange={(event) => setRelationshipRole(event.target.value)}\n                    placeholder=\"e.g., Lead LP, Co-investor, Cornerstone\"\n                    className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"allocation_status\" className=\"text-sm font-medium text-white\">Allocation Status</Label>\n                  <Select\n                    value={allocationStatus}\n                    onValueChange={(value) => setAllocationStatus(value)}\n                  >\n                    <SelectTrigger id=\"allocation_status\" className=\"bg-white/5 border-white/10 text-white\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent className=\"bg-zinc-950 border-white/10\">\n                      {allocationStatusOptions.map((option) => (\n                        <SelectItem key={option.value} value={option.value} className=\"text-white\">\n                          {option.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"commitment\" className=\"text-sm font-medium text-white\">Commitment Amount</Label>\n                  <Input\n                    id=\"commitment\"\n                    value={commitment}\n                    onChange={(event) => setCommitment(event.target.value)}\n                    placeholder=\"e.g., 2500000\"\n                    inputMode=\"numeric\"\n                    className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"currency\" className=\"text-sm font-medium text-white\">Currency</Label>\n                  <Input\n                    id=\"currency\"\n                    value={currency}\n                    maxLength={3}\n                    onChange={(event) => setCurrency(event.target.value.toUpperCase())}\n                    className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"subscription_status\" className=\"text-sm font-medium text-white\">Subscription Status</Label>\n                  <Select\n                    value={subscriptionStatus}\n                    onValueChange={(value) => setSubscriptionStatus(value)}\n                  >\n                    <SelectTrigger id=\"subscription_status\" className=\"bg-white/5 border-white/10 text-white\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent className=\"bg-zinc-950 border-white/10\">\n                      {subscriptionStatusOptions.map((option) => (\n                        <SelectItem key={option.value} value={option.value} className=\"text-white\">\n                          {option.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"effective_date\" className=\"text-sm font-medium text-white\">Effective Date</Label>\n                  <Input\n                    id=\"effective_date\"\n                    type=\"date\"\n                    value={effectiveDate}\n                    onChange={(event) => setEffectiveDate(event.target.value)}\n                    className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"funding_due_at\" className=\"text-sm font-medium text-white\">Funding Due Date</Label>\n                  <Input\n                    id=\"funding_due_at\"\n                    type=\"date\"\n                    value={fundingDueAt}\n                    onChange={(event) => setFundingDueAt(event.target.value)}\n                    className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"units\" className=\"text-sm font-medium text-white\">Units</Label>\n                  <Input\n                    id=\"units\"\n                    value={units}\n                    onChange={(event) => setUnits(event.target.value)}\n                    placeholder=\"e.g., 1000\"\n                    inputMode=\"numeric\"\n                    className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"ack-notes\" className=\"text-sm font-medium text-white\">Acknowledgement Notes</Label>\n                <Textarea\n                  id=\"ack-notes\"\n                  value={acknowledgementNotes}\n                  onChange={(event) => setAcknowledgementNotes(event.target.value)}\n                  placeholder=\"Internal notes about subscription acknowledgement or pending actions\"\n                  rows={2}\n                  className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"investor-notes\" className=\"text-sm font-medium text-white\">Internal Notes</Label>\n                <Textarea\n                  id=\"investor-notes\"\n                  value={notes}\n                  onChange={(event) => setNotes(event.target.value)}\n                  placeholder=\"Add any context for the team (not shared with investors)\"\n                  rows={3}\n                  className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-emerald-400/50 focus:ring-emerald-400/20\"\n                />\n              </div>\n\n              <div className=\"flex items-center gap-2 rounded-md border border-white/10 bg-white/5 p-3\">\n                <Checkbox\n                  id=\"send-invite\"\n                  checked={sendInvite}\n                  onCheckedChange={(value) => setSendInvite(Boolean(value))}\n                  className=\"border-white/20 data-[state=checked]:bg-emerald-500 data-[state=checked]:border-emerald-500\"\n                />\n                <Label htmlFor=\"send-invite\" className=\"text-sm text-white cursor-pointer\">\n                  Send investor portal invitation (if not already invited)\n                </Label>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <DialogFooter className=\"px-6 py-4 shrink-0 flex flex-col gap-2 sm:flex-row sm:justify-end border-t border-white/10 bg-zinc-950\">\n          <Button variant=\"outline\" onClick={onClose} disabled={loading} className=\"border-white/20 text-white hover:bg-white/10 bg-transparent\">\n            Cancel\n          </Button>\n          <Button\n            onClick={handleConfirm}\n            disabled={loading || (mode === 'existing' && !selectedInvestor) || (mode === 'new' && !newInvestor.legal_name.trim())}\n            className=\"bg-emerald-500 hover:bg-emerald-600 text-emerald-950 font-semibold\"\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Linking...\n              </>\n            ) : (\n              <>\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Link Investor\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","'use client'\n\nimport { useState } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from '@/components/ui/select'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Button } from '@/components/ui/button'\nimport { Loader2, Plus } from 'lucide-react'\nimport { toast } from 'sonner'\nimport type { EntityFlagSummary } from './types'\n\nconst severityOptions = [\n  { value: 'critical', label: 'Critical' },\n  { value: 'warning', label: 'Warning' },\n  { value: 'info', label: 'Info' },\n  { value: 'success', label: 'Success' }\n]\n\nconst flagTypeOptions = [\n  { value: 'compliance', label: 'Compliance' },\n  { value: 'documentation', label: 'Documentation' },\n  { value: 'reporting', label: 'Reporting' },\n  { value: 'tasks', label: 'Operational Task' },\n  { value: 'other', label: 'Other' }\n]\n\ninterface AddEntityFlagModalProps {\n  entityId: string\n  open: boolean\n  onClose: () => void\n  onSuccess: (flag: EntityFlagSummary) => void\n}\n\nexport function AddEntityFlagModal({ entityId, open, onClose, onSuccess }: AddEntityFlagModalProps) {\n  const [loading, setLoading] = useState(false)\n  const [title, setTitle] = useState('')\n  const [severity, setSeverity] = useState('warning')\n  const [flagType, setFlagType] = useState('documentation')\n  const [dueDate, setDueDate] = useState('')\n  const [description, setDescription] = useState('')\n\n  const resetForm = () => {\n    setTitle('')\n    setSeverity('warning')\n    setFlagType('documentation')\n    setDueDate('')\n    setDescription('')\n  }\n\n  const handleClose = () => {\n    if (!loading) {\n      resetForm()\n      onClose()\n    }\n  }\n\n  const handleSubmit = async () => {\n    if (!title.trim()) {\n      toast.error('A title is required for the flag.')\n      return\n    }\n\n    setLoading(true)\n    try {\n      const response = await fetch(`/api/entities/${entityId}/flags`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          title: title.trim(),\n          flag_type: flagType,\n          severity,\n          description: description.trim() || null,\n          due_date: dueDate || null\n        })\n      })\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => ({}))\n        throw new Error(data.error || 'Failed to create flag')\n      }\n\n      const data = await response.json()\n      toast.success('Flag created for this entity.')\n      onSuccess(data.flag)\n      resetForm()\n      onClose()\n    } catch (error) {\n      console.error('Failed to create flag:', error)\n      toast.error(error instanceof Error ? error.message : 'Unable to create flag.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-lg bg-zinc-950 border-white/10 text-white\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white\">Raise Entity Flag</DialogTitle>\n          <DialogDescription className=\"text-gray-400\">\n            Highlight a compliance issue, missing documentation, or follow-up item for this vehicle.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"flag-title\" className=\"text-white\">Title *</Label>\n            <Input\n              id=\"flag-title\"\n              value={title}\n              onChange={(event) => setTitle(event.target.value)}\n              placeholder=\"e.g., KYC documents outstanding\"\n              className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\n              autoFocus\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"flag-severity\" className=\"text-white\">Severity</Label>\n              <Select value={severity} onValueChange={setSeverity}>\n                <SelectTrigger id=\"flag-severity\" className=\"bg-white/5 border-white/10 text-white\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent className=\"bg-zinc-950 border-white/10\">\n                  {severityOptions.map((option) => (\n                    <SelectItem key={option.value} value={option.value} className=\"text-white\">\n                      {option.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"flag-type\" className=\"text-white\">Category</Label>\n              <Select value={flagType} onValueChange={setFlagType}>\n                <SelectTrigger id=\"flag-type\" className=\"bg-white/5 border-white/10 text-white\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent className=\"bg-zinc-950 border-white/10\">\n                  {flagTypeOptions.map((option) => (\n                    <SelectItem key={option.value} value={option.value} className=\"text-white\">\n                      {option.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"flag-due-date\" className=\"text-white\">Due Date</Label>\n            <Input\n              id=\"flag-due-date\"\n              type=\"date\"\n              value={dueDate}\n              onChange={(event) => setDueDate(event.target.value)}\n              className=\"bg-white/5 border-white/10 text-white\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"flag-description\" className=\"text-white\">Details</Label>\n            <Textarea\n              id=\"flag-description\"\n              rows={4}\n              value={description}\n              onChange={(event) => setDescription(event.target.value)}\n              placeholder=\"Optional context or remediation steps.\"\n              className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\n            />\n          </div>\n        </div>\n\n        <DialogFooter className=\"gap-2 sm:gap-0\">\n          <Button\n            variant=\"outline\"\n            onClick={handleClose}\n            disabled={loading}\n            className=\"border-white/10 text-white hover:bg-white/10\"\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleSubmit}\n            disabled={loading}\n            className=\"bg-emerald-500 hover:bg-emerald-600 text-emerald-950 font-semibold\"\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              <>\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Create Flag\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","'use client'\r\n\r\nimport { useMemo } from 'react'\r\nimport {\r\n  AlertCircle,\r\n  AlertTriangle,\r\n  CheckCircle2,\r\n  ChevronDown,\r\n  ChevronRight,\r\n  Activity,\r\n  FileText,\r\n  Users,\r\n  User,\r\n  Briefcase,\r\n  ShieldCheck,\r\n  Info\r\n} from 'lucide-react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { runEntityHealthChecks, type HealthCheck, type HealthStatus } from '@/lib/entity-health-checker'\r\nimport { useState } from 'react'\r\n\r\ninterface EntityHealthMonitorProps {\r\n  entity: any\r\n  directors: any[]\r\n  stakeholders: any[]\r\n  documents: any[]\r\n  folders: any[]\r\n  deals: any[]\r\n  investors: any[]\r\n  onAction?: (action: string) => void\r\n}\r\n\r\ntype IconType = React.ComponentType<{ className?: string }>\r\n\r\nconst categoryIcons: Record<string, IconType> = {\r\n  metadata: Info,\r\n  stakeholders: Users,\r\n  directors: User,\r\n  documents: FileText,\r\n  deals: Briefcase,\r\n  investors: ShieldCheck\r\n}\r\n\r\nconst categoryLabels: Record<string, string> = {\r\n  metadata: 'Metadata Completeness',\r\n  stakeholders: 'Stakeholder Coverage',\r\n  directors: 'Director Status',\r\n  documents: 'Document Requirements',\r\n  deals: 'Deal Activity',\r\n  investors: 'Investor Status'\r\n}\r\n\r\nfunction getStatusIcon(status: HealthStatus) {\r\n  switch (status) {\r\n    case 'pass':\r\n      return <CheckCircle2 className=\"h-4 w-4 text-emerald-400\" />\r\n    case 'warning':\r\n      return <AlertTriangle className=\"h-4 w-4 text-amber-400\" />\r\n    case 'fail':\r\n      return <AlertCircle className=\"h-4 w-4 text-red-400\" />\r\n  }\r\n}\r\n\r\nfunction getStatusColor(status: HealthStatus) {\r\n  switch (status) {\r\n    case 'pass':\r\n      return 'text-emerald-400'\r\n    case 'warning':\r\n      return 'text-amber-400'\r\n    case 'fail':\r\n      return 'text-red-400'\r\n  }\r\n}\r\n\r\nfunction getStatusBadgeColor(status: HealthStatus) {\r\n  switch (status) {\r\n    case 'pass':\r\n      return 'bg-emerald-500/20 border-emerald-400/40 text-emerald-100'\r\n    case 'warning':\r\n      return 'bg-amber-500/20 border-amber-400/40 text-amber-100'\r\n    case 'fail':\r\n      return 'bg-red-500/20 border-red-400/40 text-red-100'\r\n  }\r\n}\r\n\r\nfunction HealthCheckItem({ check, onAction }: { check: HealthCheck; onAction?: (action: string) => void }) {\r\n  return (\r\n    <div className=\"flex items-start gap-3 p-3 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 transition-colors\">\r\n      <div className=\"pt-0.5\">{getStatusIcon(check.status)}</div>\r\n      <div className=\"flex-1 min-w-0\">\r\n        <div className=\"flex items-start justify-between gap-2\">\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-sm font-medium text-foreground\">{check.title}</p>\r\n            <p className={`text-xs mt-0.5 ${check.status === 'pass' ? 'text-muted-foreground' : getStatusColor(check.status)}`}>\r\n              {check.message}\r\n            </p>\r\n            {check.details && (\r\n              <p className=\"text-xs text-muted-foreground mt-1 italic\">{check.details}</p>\r\n            )}\r\n          </div>\r\n          <Badge className={getStatusBadgeColor(check.status)} variant=\"outline\">\r\n            {check.status}\r\n          </Badge>\r\n        </div>\r\n        {check.actionable && onAction && check.status !== 'pass' && (\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            className=\"mt-2 h-7 text-xs\"\r\n            onClick={() => onAction(check.actionable!.action)}\r\n          >\r\n            {check.actionable.label}\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function EntityHealthMonitor({\r\n  entity,\r\n  directors,\r\n  stakeholders,\r\n  documents,\r\n  folders,\r\n  deals,\r\n  investors,\r\n  onAction\r\n}: EntityHealthMonitorProps) {\r\n  const healthResult = useMemo(() => {\r\n    return runEntityHealthChecks({\r\n      entity,\r\n      directors,\r\n      stakeholders,\r\n      documents,\r\n      folders,\r\n      deals,\r\n      investors\r\n    })\r\n  }, [entity, directors, stakeholders, documents, folders, deals, investors])\r\n\r\n  const checksByCategory = useMemo(() => {\r\n    const grouped: Record<string, HealthCheck[]> = {}\r\n    healthResult.checks.forEach((check) => {\r\n      if (!grouped[check.category]) {\r\n        grouped[check.category] = []\r\n      }\r\n      grouped[check.category].push(check)\r\n    })\r\n    return grouped\r\n  }, [healthResult.checks])\r\n\r\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set(['metadata']))\r\n\r\n  const toggleCategory = (category: string) => {\r\n    setExpandedCategories((prev) => {\r\n      const next = new Set(prev)\r\n      if (next.has(category)) {\r\n        next.delete(category)\r\n      } else {\r\n        next.add(category)\r\n      }\r\n      return next\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Overall Health Score */}\r\n      <Card className=\"border border-white/10 bg-gradient-to-br from-white/5 to-white/10\">\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"h-12 w-12 rounded-full bg-emerald-500/20 flex items-center justify-center\">\r\n                <Activity className=\"h-6 w-6 text-emerald-400\" />\r\n              </div>\r\n              <div>\r\n                <CardTitle className=\"text-2xl\">Entity Health Score</CardTitle>\r\n                <CardDescription>Real-time monitoring of entity compliance and completeness</CardDescription>\r\n              </div>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className={`text-4xl font-bold ${getStatusColor(healthResult.overallStatus)}`}>\r\n                {healthResult.overallScore}%\r\n              </div>\r\n              <Badge className={getStatusBadgeColor(healthResult.overallStatus)}>\r\n                {healthResult.overallStatus === 'pass' && 'Healthy'}\r\n                {healthResult.overallStatus === 'warning' && 'Needs Attention'}\r\n                {healthResult.overallStatus === 'fail' && 'Critical Issues'}\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-3\">\r\n            <Progress value={healthResult.overallScore} className=\"h-3\" />\r\n            <div className=\"flex items-center justify-between text-sm\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className=\"flex items-center gap-1.5\">\r\n                  <CheckCircle2 className=\"h-4 w-4 text-emerald-400\" />\r\n                  <span className=\"text-foreground font-medium\">{healthResult.passCount}</span>\r\n                  <span className=\"text-muted-foreground\">Passed</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-1.5\">\r\n                  <AlertTriangle className=\"h-4 w-4 text-amber-400\" />\r\n                  <span className=\"text-foreground font-medium\">{healthResult.warningCount}</span>\r\n                  <span className=\"text-muted-foreground\">Warnings</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-1.5\">\r\n                  <AlertCircle className=\"h-4 w-4 text-red-400\" />\r\n                  <span className=\"text-foreground font-medium\">{healthResult.failCount}</span>\r\n                  <span className=\"text-muted-foreground\">Failed</span>\r\n                </div>\r\n              </div>\r\n              <span className=\"text-muted-foreground\">\r\n                {healthResult.checks.length} total checks\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Health Checks by Category */}\r\n      <div className=\"space-y-3\">\r\n        {Object.entries(checksByCategory).map(([category, checks]) => {\r\n          const Icon: IconType = categoryIcons[category] || Info\r\n          const isExpanded = expandedCategories.has(category)\r\n          const categoryPassCount = checks.filter(c => c.status === 'pass').length\r\n          const categoryWarningCount = checks.filter(c => c.status === 'warning').length\r\n          const categoryFailCount = checks.filter(c => c.status === 'fail').length\r\n\r\n          let categoryStatus: HealthStatus = 'pass'\r\n          if (categoryFailCount > 0) categoryStatus = 'fail'\r\n          else if (categoryWarningCount > 0) categoryStatus = 'warning'\r\n\r\n          return (\r\n            <Collapsible key={category} open={isExpanded} onOpenChange={() => toggleCategory(category)}>\r\n              <Card className=\"border border-white/10 bg-white/5\">\r\n                <CollapsibleTrigger asChild>\r\n                  <CardHeader className=\"cursor-pointer hover:bg-white/5 transition-colors\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        {isExpanded ? (\r\n                          <ChevronDown className=\"h-5 w-5 text-muted-foreground\" />\r\n                        ) : (\r\n                          <ChevronRight className=\"h-5 w-5 text-muted-foreground\" />\r\n                        )}\r\n                        <div className={`h-10 w-10 rounded-full flex items-center justify-center ${\r\n                          categoryStatus === 'pass'\r\n                            ? 'bg-emerald-500/20'\r\n                            : categoryStatus === 'warning'\r\n                            ? 'bg-amber-500/20'\r\n                            : 'bg-red-500/20'\r\n                        }`}>\r\n                          <Icon className={`h-5 w-5 ${\r\n                            categoryStatus === 'pass'\r\n                              ? 'text-emerald-400'\r\n                              : categoryStatus === 'warning'\r\n                              ? 'text-amber-400'\r\n                              : 'text-red-400'\r\n                          }`} />\r\n                        </div>\r\n                        <div>\r\n                          <CardTitle className=\"text-base\">{categoryLabels[category]}</CardTitle>\r\n                          <div className=\"flex items-center gap-2 mt-1\">\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {checks.length} check{checks.length > 1 ? 's' : ''}\r\n                            </span>\r\n                            {categoryFailCount > 0 && (\r\n                              <Badge className=\"bg-red-500/20 border-red-400/40 text-red-100 text-xs h-5\">\r\n                                {categoryFailCount} failed\r\n                              </Badge>\r\n                            )}\r\n                            {categoryWarningCount > 0 && categoryFailCount === 0 && (\r\n                              <Badge className=\"bg-amber-500/20 border-amber-400/40 text-amber-100 text-xs h-5\">\r\n                                {categoryWarningCount} warning{categoryWarningCount > 1 ? 's' : ''}\r\n                              </Badge>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        {getStatusIcon(categoryStatus)}\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                </CollapsibleTrigger>\r\n                <CollapsibleContent>\r\n                  <CardContent className=\"space-y-2 pt-0\">\r\n                    <div className=\"h-px bg-white/10 mb-3\" />\r\n                    {checks.map((check) => (\r\n                      <HealthCheckItem key={check.id} check={check} onAction={onAction} />\r\n                    ))}\r\n                  </CardContent>\r\n                </CollapsibleContent>\r\n              </Card>\r\n            </Collapsible>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      {healthResult.overallStatus !== 'pass' && (\r\n        <Card className=\"border border-emerald-400/40 bg-emerald-500/10\">\r\n          <CardHeader>\r\n            <CardTitle className=\"text-emerald-100 flex items-center gap-2\">\r\n              <Activity className=\"h-5 w-5\" />\r\n              Recommended Actions\r\n            </CardTitle>\r\n            <CardDescription className=\"text-emerald-200/80\">\r\n              Take these actions to improve your entity health score\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-2\">\r\n            {healthResult.checks\r\n              .filter(c => c.status !== 'pass' && c.actionable)\r\n              .slice(0, 5)\r\n              .map((check) => (\r\n                <div key={check.id} className=\"flex items-center justify-between p-3 rounded-lg border border-emerald-400/20 bg-emerald-500/5\">\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium text-emerald-100\">{check.title}</p>\r\n                    <p className=\"text-xs text-emerald-200/70\">{check.message}</p>\r\n                  </div>\r\n                  {check.actionable && onAction && (\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"outline\"\r\n                      className=\"ml-3 border-emerald-400/40 text-emerald-100 hover:bg-emerald-500/20\"\r\n                      onClick={() => onAction(check.actionable!.action)}\r\n                    >\r\n                      {check.actionable.label}\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              ))}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\n * Entity Health Checker\n *\n * Provides real-time health monitoring for entities by checking:\n * - Metadata completeness\n * - Stakeholder coverage\n * - Director status\n * - Document requirements\n * - Deal activity\n * - Investor status\n */\n\nexport type HealthStatus = 'pass' | 'warning' | 'fail'\n\nexport interface HealthCheck {\n  id: string\n  category: string\n  title: string\n  status: HealthStatus\n  message: string\n  details?: string\n  actionable?: {\n    label: string\n    action: string\n  }\n}\n\nexport interface EntityHealthResult {\n  overallScore: number\n  overallStatus: HealthStatus\n  checks: HealthCheck[]\n  passCount: number\n  warningCount: number\n  failCount: number\n}\n\ninterface Entity {\n  id: string\n  name: string\n  entity_code: string | null\n  type: string\n  status: string | null\n  domicile: string | null\n  legal_jurisdiction: string | null\n  formation_date: string | null\n  registration_number: string | null\n  currency: string\n}\n\ninterface Director {\n  id: string\n  full_name: string\n  effective_from: string | null\n  effective_to: string | null\n}\n\ninterface Stakeholder {\n  id: string\n  role: string\n  effective_to: string | null\n}\n\ninterface Document {\n  id: string\n  type: string | null\n  folder_id?: string | null\n}\n\ninterface Folder {\n  id: string\n  folder_type: string\n}\n\ninterface Deal {\n  id: string\n  status: string\n}\n\ninterface Investor {\n  id: string\n  allocation_status: string | null\n}\n\n/**\n * Check metadata completeness\n */\nexport function checkMetadataCompleteness(entity: Entity): HealthCheck[] {\n  const checks: HealthCheck[] = []\n\n  // Entity name (always present)\n  checks.push({\n    id: 'metadata_name',\n    category: 'metadata',\n    title: 'Legal Name',\n    status: 'pass',\n    message: 'Entity has a valid legal name'\n  })\n\n  // Entity code\n  if (!entity.entity_code) {\n    checks.push({\n      id: 'metadata_code',\n      category: 'metadata',\n      title: 'Entity Code',\n      status: 'warning',\n      message: 'Entity code is not set',\n      actionable: {\n        label: 'Add entity code',\n        action: 'edit_metadata'\n      }\n    })\n  } else {\n    checks.push({\n      id: 'metadata_code',\n      category: 'metadata',\n      title: 'Entity Code',\n      status: 'pass',\n      message: `Entity code: ${entity.entity_code}`\n    })\n  }\n\n  // Status\n  if (!entity.status || entity.status === 'TBD') {\n    checks.push({\n      id: 'metadata_status',\n      category: 'metadata',\n      title: 'Entity Status',\n      status: 'warning',\n      message: 'Entity status needs clarification',\n      details: entity.status === 'TBD' ? 'Status is marked as To Be Determined' : 'No status set',\n      actionable: {\n        label: 'Update status',\n        action: 'edit_metadata'\n      }\n    })\n  } else {\n    checks.push({\n      id: 'metadata_status',\n      category: 'metadata',\n      title: 'Entity Status',\n      status: 'pass',\n      message: `Status: ${entity.status}`\n    })\n  }\n\n  // Domicile\n  if (!entity.domicile) {\n    checks.push({\n      id: 'metadata_domicile',\n      category: 'metadata',\n      title: 'Domicile',\n      status: 'fail',\n      message: 'Domicile is required but not set',\n      actionable: {\n        label: 'Set domicile',\n        action: 'edit_metadata'\n      }\n    })\n  } else {\n    checks.push({\n      id: 'metadata_domicile',\n      category: 'metadata',\n      title: 'Domicile',\n      status: 'pass',\n      message: `Domicile: ${entity.domicile}`\n    })\n  }\n\n  // Legal jurisdiction\n  if (!entity.legal_jurisdiction) {\n    checks.push({\n      id: 'metadata_jurisdiction',\n      category: 'metadata',\n      title: 'Legal Jurisdiction',\n      status: 'warning',\n      message: 'Legal jurisdiction not specified',\n      actionable: {\n        label: 'Add jurisdiction',\n        action: 'edit_metadata'\n      }\n    })\n  } else {\n    checks.push({\n      id: 'metadata_jurisdiction',\n      category: 'metadata',\n      title: 'Legal Jurisdiction',\n      status: 'pass',\n      message: `Jurisdiction: ${entity.legal_jurisdiction}`\n    })\n  }\n\n  // Formation date\n  if (!entity.formation_date) {\n    checks.push({\n      id: 'metadata_formation',\n      category: 'metadata',\n      title: 'Formation Date',\n      status: 'warning',\n      message: 'Formation date not recorded',\n      actionable: {\n        label: 'Add formation date',\n        action: 'edit_metadata'\n      }\n    })\n  } else {\n    checks.push({\n      id: 'metadata_formation',\n      category: 'metadata',\n      title: 'Formation Date',\n      status: 'pass',\n      message: `Formed: ${new Date(entity.formation_date).toLocaleDateString()}`\n    })\n  }\n\n  // Registration number\n  if (!entity.registration_number) {\n    checks.push({\n      id: 'metadata_registration',\n      category: 'metadata',\n      title: 'Registration Number',\n      status: 'warning',\n      message: 'Registration number not recorded',\n      details: 'Important for legal documentation and filings',\n      actionable: {\n        label: 'Add registration number',\n        action: 'edit_metadata'\n      }\n    })\n  } else {\n    checks.push({\n      id: 'metadata_registration',\n      category: 'metadata',\n      title: 'Registration Number',\n      status: 'pass',\n      message: `Registration: ${entity.registration_number}`\n    })\n  }\n\n  return checks\n}\n\n/**\n * Check stakeholder coverage\n */\nexport function checkStakeholderCoverage(stakeholders: Stakeholder[]): HealthCheck[] {\n  const checks: HealthCheck[] = []\n  const activeStakeholders = stakeholders.filter(s => !s.effective_to)\n\n  const requiredRoles = [\n    { role: 'lawyer', title: 'Legal Counsel', severity: 'fail' as HealthStatus },\n    { role: 'accountant', title: 'Accountant', severity: 'fail' as HealthStatus },\n    { role: 'auditor', title: 'Auditor', severity: 'warning' as HealthStatus },\n    { role: 'administrator', title: 'Administrator', severity: 'warning' as HealthStatus }\n  ]\n\n  requiredRoles.forEach(({ role, title, severity }) => {\n    const hasRole = activeStakeholders.some(s => s.role === role)\n\n    if (!hasRole) {\n      checks.push({\n        id: `stakeholder_${role}`,\n        category: 'stakeholders',\n        title: `${title} Coverage`,\n        status: severity,\n        message: `No active ${title.toLowerCase()} assigned`,\n        details: severity === 'fail' ? 'This is a critical requirement for entity governance' : undefined,\n        actionable: {\n          label: `Add ${title.toLowerCase()}`,\n          action: 'add_stakeholder'\n        }\n      })\n    } else {\n      const count = activeStakeholders.filter(s => s.role === role).length\n      checks.push({\n        id: `stakeholder_${role}`,\n        category: 'stakeholders',\n        title: `${title} Coverage`,\n        status: 'pass',\n        message: `${count} active ${title.toLowerCase()}${count > 1 ? 's' : ''} assigned`\n      })\n    }\n  })\n\n  // Overall stakeholder count\n  if (activeStakeholders.length === 0) {\n    checks.push({\n      id: 'stakeholder_count',\n      category: 'stakeholders',\n      title: 'Total Stakeholders',\n      status: 'fail',\n      message: 'No stakeholders assigned to this entity',\n      actionable: {\n        label: 'Add stakeholders',\n        action: 'add_stakeholder'\n      }\n    })\n  } else {\n    checks.push({\n      id: 'stakeholder_count',\n      category: 'stakeholders',\n      title: 'Total Stakeholders',\n      status: 'pass',\n      message: `${activeStakeholders.length} active stakeholder${activeStakeholders.length > 1 ? 's' : ''}`\n    })\n  }\n\n  return checks\n}\n\n/**\n * Check director status\n */\nexport function checkDirectorStatus(directors: Director[]): HealthCheck[] {\n  const checks: HealthCheck[] = []\n  const activeDirectors = directors.filter(d => !d.effective_to)\n\n  if (activeDirectors.length === 0) {\n    checks.push({\n      id: 'director_count',\n      category: 'directors',\n      title: 'Active Directors',\n      status: 'fail',\n      message: 'Entity has no active directors',\n      details: 'At least one director is required for legal compliance',\n      actionable: {\n        label: 'Add director',\n        action: 'add_director'\n      }\n    })\n  } else if (activeDirectors.length === 1) {\n    checks.push({\n      id: 'director_count',\n      category: 'directors',\n      title: 'Active Directors',\n      status: 'warning',\n      message: 'Only one active director',\n      details: 'Consider adding additional directors for governance best practices'\n    })\n  } else {\n    checks.push({\n      id: 'director_count',\n      category: 'directors',\n      title: 'Active Directors',\n      status: 'pass',\n      message: `${activeDirectors.length} active directors`\n    })\n  }\n\n  // Check for directors with invalid dates\n  const invalidDirectors = directors.filter(d => {\n    if (!d.effective_from) return false\n    if (!d.effective_to) return false\n    return new Date(d.effective_to) < new Date(d.effective_from)\n  })\n\n  if (invalidDirectors.length > 0) {\n    checks.push({\n      id: 'director_dates',\n      category: 'directors',\n      title: 'Director Date Validity',\n      status: 'fail',\n      message: `${invalidDirectors.length} director(s) have invalid date ranges`,\n      details: 'Effective end date is before start date'\n    })\n  } else {\n    checks.push({\n      id: 'director_dates',\n      category: 'directors',\n      title: 'Director Date Validity',\n      status: 'pass',\n      message: 'All director date ranges are valid'\n    })\n  }\n\n  return checks\n}\n\n/**\n * Check document requirements\n */\nexport function checkDocumentRequirements(documents: Document[], folders: Folder[]): HealthCheck[] {\n  const checks: HealthCheck[] = []\n\n  const requiredFolderTypes = [\n    { type: 'kyc', title: 'KYC Documents', severity: 'fail' as HealthStatus },\n    { type: 'legal', title: 'Legal Documents', severity: 'fail' as HealthStatus },\n    { type: 'formation', title: 'Formation Documents', severity: 'warning' as HealthStatus },\n    { type: 'regulatory', title: 'Regulatory Filings', severity: 'warning' as HealthStatus }\n  ]\n\n  requiredFolderTypes.forEach(({ type, title, severity }) => {\n    const folder = folders.find(f => f.folder_type === type)\n    if (!folder) {\n      checks.push({\n        id: `documents_${type}`,\n        category: 'documents',\n        title,\n        status: severity,\n        message: `No ${type} folder exists`,\n        actionable: {\n          label: `Create ${type} folder`,\n          action: 'create_folder'\n        }\n      })\n      return\n    }\n\n    const docsInFolder = documents.filter(d => d.folder_id === folder.id)\n    if (docsInFolder.length === 0) {\n      checks.push({\n        id: `documents_${type}`,\n        category: 'documents',\n        title,\n        status: severity,\n        message: `No ${type} documents uploaded`,\n        details: `${title} folder exists but is empty`,\n        actionable: {\n          label: 'Upload documents',\n          action: 'upload_document'\n        }\n      })\n    } else {\n      checks.push({\n        id: `documents_${type}`,\n        category: 'documents',\n        title,\n        status: 'pass',\n        message: `${docsInFolder.length} ${type} document${docsInFolder.length > 1 ? 's' : ''}`\n      })\n    }\n  })\n\n  // Overall document count\n  if (documents.length === 0) {\n    checks.push({\n      id: 'documents_total',\n      category: 'documents',\n      title: 'Total Documents',\n      status: 'fail',\n      message: 'No documents uploaded for this entity',\n      actionable: {\n        label: 'Upload document',\n        action: 'upload_document'\n      }\n    })\n  } else {\n    checks.push({\n      id: 'documents_total',\n      category: 'documents',\n      title: 'Total Documents',\n      status: 'pass',\n      message: `${documents.length} document${documents.length > 1 ? 's' : ''} uploaded`\n    })\n  }\n\n  return checks\n}\n\n/**\n * Check deal activity\n */\nexport function checkDealActivity(deals: Deal[]): HealthCheck[] {\n  const checks: HealthCheck[] = []\n\n  if (deals.length === 0) {\n    checks.push({\n      id: 'deal_count',\n      category: 'deals',\n      title: 'Deal Activity',\n      status: 'warning',\n      message: 'No deals linked to this entity',\n      details: 'Entity may not be actively used for investments'\n    })\n  } else {\n    const activeDeals = deals.filter(d => d.status === 'active')\n\n    if (activeDeals.length === 0) {\n      checks.push({\n        id: 'deal_active',\n        category: 'deals',\n        title: 'Active Deals',\n        status: 'warning',\n        message: 'No active deals',\n        details: `${deals.length} total deal${deals.length > 1 ? 's' : ''}, but none are active`\n      })\n    } else {\n      checks.push({\n        id: 'deal_active',\n        category: 'deals',\n        title: 'Active Deals',\n        status: 'pass',\n        message: `${activeDeals.length} active deal${activeDeals.length > 1 ? 's' : ''}`\n      })\n    }\n\n    checks.push({\n      id: 'deal_count',\n      category: 'deals',\n      title: 'Total Deals',\n      status: 'pass',\n      message: `${deals.length} deal${deals.length > 1 ? 's' : ''} linked`\n    })\n  }\n\n  return checks\n}\n\n/**\n * Check investor status\n */\nexport function checkInvestorStatus(investors: Investor[]): HealthCheck[] {\n  const checks: HealthCheck[] = []\n\n  if (investors.length === 0) {\n    checks.push({\n      id: 'investor_count',\n      category: 'investors',\n      title: 'Investor Coverage',\n      status: 'warning',\n      message: 'No investors linked to this entity',\n      actionable: {\n        label: 'Link investor',\n        action: 'link_investor'\n      }\n    })\n  } else {\n    const activeInvestors = investors.filter(i =>\n      i.allocation_status === 'active' || i.allocation_status === 'committed'\n    )\n\n    if (activeInvestors.length === 0) {\n      checks.push({\n        id: 'investor_active',\n        category: 'investors',\n        title: 'Active Investors',\n        status: 'warning',\n        message: 'No active investor allocations',\n        details: `${investors.length} investor${investors.length > 1 ? 's' : ''} linked but none are active/committed`\n      })\n    } else {\n      checks.push({\n        id: 'investor_active',\n        category: 'investors',\n        title: 'Active Investors',\n        status: 'pass',\n        message: `${activeInvestors.length} active/committed investor${activeInvestors.length > 1 ? 's' : ''}`\n      })\n    }\n\n    checks.push({\n      id: 'investor_count',\n      category: 'investors',\n      title: 'Total Investors',\n      status: 'pass',\n      message: `${investors.length} investor${investors.length > 1 ? 's' : ''} linked`\n    })\n  }\n\n  return checks\n}\n\n/**\n * Calculate overall health score and status\n */\nexport function calculateOverallHealth(checks: HealthCheck[]): EntityHealthResult {\n  const passCount = checks.filter(c => c.status === 'pass').length\n  const warningCount = checks.filter(c => c.status === 'warning').length\n  const failCount = checks.filter(c => c.status === 'fail').length\n\n  const totalChecks = checks.length\n  const score = Math.round((passCount / totalChecks) * 100)\n\n  let overallStatus: HealthStatus\n  if (failCount > 0) {\n    overallStatus = 'fail'\n  } else if (warningCount > 3) {\n    overallStatus = 'warning'\n  } else if (warningCount > 0) {\n    overallStatus = 'warning'\n  } else {\n    overallStatus = 'pass'\n  }\n\n  return {\n    overallScore: score,\n    overallStatus,\n    checks,\n    passCount,\n    warningCount,\n    failCount\n  }\n}\n\n/**\n * Run all health checks\n */\nexport function runEntityHealthChecks(data: {\n  entity: Entity\n  directors: Director[]\n  stakeholders: Stakeholder[]\n  documents: Document[]\n  folders: Folder[]\n  deals: Deal[]\n  investors: Investor[]\n}): EntityHealthResult {\n  const allChecks: HealthCheck[] = [\n    ...checkMetadataCompleteness(data.entity),\n    ...checkStakeholderCoverage(data.stakeholders),\n    ...checkDirectorStatus(data.directors),\n    ...checkDocumentRequirements(data.documents, data.folders),\n    ...checkDealActivity(data.deals),\n    ...checkInvestorStatus(data.investors)\n  ]\n\n  return calculateOverallHealth(allChecks)\n}\n","'use client'\n\nimport { useState, useMemo } from 'react'\nimport {\n  Folder,\n  FolderOpen,\n  FolderPlus,\n  Edit2,\n  Trash2,\n  ChevronRight,\n  ChevronDown,\n  FileText,\n  MoreVertical\n} from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger\n} from '@/components/ui/dropdown-menu'\nimport { Badge } from '@/components/ui/badge'\nimport { toast } from 'sonner'\n\ninterface Folder {\n  id: string\n  name: string\n  path: string\n  parent_folder_id: string | null\n  folder_type: string\n  vehicle_id: string\n}\n\ninterface FolderManagerProps {\n  entityId: string\n  folders: Folder[]\n  documents?: Array<{ id: string; folder_id: string | null }>\n  selectedFolderId: string | null\n  onFolderSelect: (folderId: string | null) => void\n  onFoldersChange: () => void\n}\n\ninterface FolderNode extends Folder {\n  children: FolderNode[]\n  documentCount: number\n  isExpanded: boolean\n}\n\nconst isRootFolder = (folder: Folder) =>\n  (folder.folder_type === 'entity' || folder.folder_type === 'vehicle_root') &&\n  !folder.parent_folder_id\n\nexport function FolderManager({\n  entityId,\n  folders,\n  documents = [],\n  selectedFolderId,\n  onFolderSelect,\n  onFoldersChange\n}: FolderManagerProps) {\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(new Set())\n  const [createModalOpen, setCreateModalOpen] = useState(false)\n  const [renameModalOpen, setRenameModalOpen] = useState(false)\n  const [deleteModalOpen, setDeleteModalOpen] = useState(false)\n  const [parentFolderId, setParentFolderId] = useState<string | null>(null)\n  const [folderToEdit, setFolderToEdit] = useState<Folder | null>(null)\n  const [folderToDelete, setFolderToDelete] = useState<Folder | null>(null)\n  const [newFolderName, setNewFolderName] = useState('')\n  const [loading, setLoading] = useState(false)\n\n  // Build folder tree - filter out the root entity folder\n  const folderTree = useMemo(() => {\n    const documentCounts = new Map<string, number>()\n    documents.forEach(doc => {\n      if (doc.folder_id) {\n        documentCounts.set(doc.folder_id, (documentCounts.get(doc.folder_id) || 0) + 1)\n      }\n    })\n\n    // Find the root entity folder (the one with folder_type 'entity' and no parent)\n    const rootEntityFolder = folders.find((folder) => isRootFolder(folder))\n\n    // Filter out the root entity folder - only show its children and custom folders\n    const filteredFolders = folders.filter(folder => {\n      // Exclude the root entity folder itself\n      if (rootEntityFolder && folder.id === rootEntityFolder.id) {\n        return false\n      }\n      return true\n    })\n\n    const nodeMap = new Map<string, FolderNode>()\n    const rootNodes: FolderNode[] = []\n\n    // Create nodes from filtered folders\n    filteredFolders.forEach(folder => {\n      nodeMap.set(folder.id, {\n        ...folder,\n        children: [],\n        documentCount: documentCounts.get(folder.id) || 0,\n        isExpanded: expandedFolders.has(folder.id)\n      })\n    })\n\n    // Build tree - treat children of root entity folder as root nodes\n    filteredFolders.forEach(folder => {\n      const node = nodeMap.get(folder.id)!\n      // If parent is the root entity folder, treat this as a root node\n      if (rootEntityFolder && folder.parent_folder_id === rootEntityFolder.id) {\n        rootNodes.push(node)\n      } else if (folder.parent_folder_id && nodeMap.has(folder.parent_folder_id)) {\n        nodeMap.get(folder.parent_folder_id)!.children.push(node)\n      } else if (!folder.parent_folder_id) {\n        // Custom folders with no parent\n        rootNodes.push(node)\n      }\n    })\n\n    // Sort by name\n    const sortNodes = (nodes: FolderNode[]) => {\n      nodes.sort((a, b) => a.name.localeCompare(b.name))\n      nodes.forEach(node => sortNodes(node.children))\n    }\n    sortNodes(rootNodes)\n\n    return rootNodes\n  }, [folders, documents, expandedFolders])\n\n  const toggleFolder = (folderId: string) => {\n    setExpandedFolders(prev => {\n      const next = new Set(prev)\n      if (next.has(folderId)) {\n        next.delete(folderId)\n      } else {\n        next.add(folderId)\n      }\n      return next\n    })\n  }\n\n  const handleCreateFolder = async () => {\n    if (!newFolderName.trim()) {\n      toast.error('Folder name is required')\n      return\n    }\n\n    // Find the root entity folder to use as parent if no parent specified\n    const rootEntityFolder = folders.find((folder) => isRootFolder(folder))\n\n    const actualParentId = parentFolderId || (rootEntityFolder?.id || null)\n\n    setLoading(true)\n    try {\n      const response = await fetch(`/api/entities/${entityId}/folders`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          name: newFolderName.trim(),\n          parent_folder_id: actualParentId,\n          folder_type: 'custom'\n        })\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to create folder')\n      }\n\n      toast.success('Folder created successfully')\n      setNewFolderName('')\n      setParentFolderId(null)\n      setCreateModalOpen(false)\n      onFoldersChange()\n    } catch (error) {\n      console.error('Failed to create folder:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to create folder')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleRenameFolder = async () => {\n    if (!folderToEdit || !newFolderName.trim()) {\n      toast.error('Folder name is required')\n      return\n    }\n\n    setLoading(true)\n    try {\n      const response = await fetch(`/api/entities/${entityId}/folders/${folderToEdit.id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          name: newFolderName.trim()\n        })\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to rename folder')\n      }\n\n      toast.success('Folder renamed successfully')\n      setNewFolderName('')\n      setFolderToEdit(null)\n      setRenameModalOpen(false)\n      onFoldersChange()\n    } catch (error) {\n      console.error('Failed to rename folder:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to rename folder')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleDeleteFolder = async () => {\n    if (!folderToDelete) return\n\n    setLoading(true)\n    try {\n      const response = await fetch(`/api/entities/${entityId}/folders/${folderToDelete.id}`, {\n        method: 'DELETE'\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to delete folder')\n      }\n\n      toast.success('Folder deleted successfully')\n      setFolderToDelete(null)\n      setDeleteModalOpen(false)\n      if (selectedFolderId === folderToDelete.id) {\n        onFolderSelect(null)\n      }\n      onFoldersChange()\n    } catch (error) {\n      console.error('Failed to delete folder:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to delete folder')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const openCreateModal = (parentId: string | null = null) => {\n    setParentFolderId(parentId)\n    setNewFolderName('')\n    setCreateModalOpen(true)\n  }\n\n  const openRenameModal = (folder: Folder) => {\n    setFolderToEdit(folder)\n    setNewFolderName(folder.name)\n    setRenameModalOpen(true)\n  }\n\n  const openDeleteModal = (folder: Folder) => {\n    setFolderToDelete(folder)\n    setDeleteModalOpen(true)\n  }\n\n  const renderFolderNode = (node: FolderNode, depth: number = 0) => {\n    const isSelected = selectedFolderId === node.id\n    const hasChildren = node.children.length > 0\n    const isSystemFolder = node.folder_type === 'vehicle_root' || node.folder_type === 'category'\n\n    return (\n      <div key={node.id}>\n        <div\n          className={`flex items-center justify-between gap-2 px-2 py-1.5 rounded-md cursor-pointer transition-colors ${\n            isSelected\n              ? 'bg-emerald-500/20 border-l-2 border-emerald-400'\n              : 'hover:bg-white/5 border-l-2 border-transparent'\n          }`}\n          style={{ paddingLeft: `${depth * 16 + 8}px` }}\n        >\n          <div className=\"flex items-center gap-2 flex-1 min-w-0\" onClick={() => onFolderSelect(node.id)}>\n            {hasChildren && (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation()\n                  toggleFolder(node.id)\n                }}\n                className=\"p-0.5 hover:bg-white/10 rounded\"\n              >\n                {node.isExpanded ? (\n                  <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n                ) : (\n                  <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n                )}\n              </button>\n            )}\n            {!hasChildren && <div className=\"w-5\" />}\n\n            {node.isExpanded || isSelected ? (\n              <FolderOpen className=\"h-4 w-4 text-emerald-400 shrink-0\" />\n            ) : (\n              <Folder className=\"h-4 w-4 text-emerald-400 shrink-0\" />\n            )}\n\n            <span className={`text-sm truncate ${isSelected ? 'text-foreground font-medium' : 'text-muted-foreground'}`}>\n              {node.name}\n            </span>\n\n            {node.documentCount > 0 && (\n              <Badge variant=\"outline\" className=\"text-xs h-5 bg-white/5 border-white/10\">\n                {node.documentCount}\n              </Badge>\n            )}\n          </div>\n\n          {!isSystemFolder && (\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild onClick={(e) => e.stopPropagation()}>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 hover:bg-white/10\"\n                >\n                  <MoreVertical className=\"h-3 w-3\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"bg-zinc-950 border-white/10\">\n                <DropdownMenuItem onClick={() => openCreateModal(node.id)} className=\"gap-2\">\n                  <FolderPlus className=\"h-4 w-4\" />\n                  New Subfolder\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => openRenameModal(node)} className=\"gap-2\">\n                  <Edit2 className=\"h-4 w-4\" />\n                  Rename\n                </DropdownMenuItem>\n                <DropdownMenuItem\n                  onClick={() => openDeleteModal(node)}\n                  className=\"gap-2 text-red-400 focus:text-red-300\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                  Delete\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          )}\n        </div>\n\n        {node.isExpanded && node.children.map(child => renderFolderNode(child, depth + 1))}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-medium text-foreground\">Folders</h3>\n        <Button\n          size=\"sm\"\n          variant=\"outline\"\n          className=\"h-7 gap-1 text-xs\"\n          onClick={() => openCreateModal(null)}\n        >\n          <FolderPlus className=\"h-3 w-3\" />\n          New Folder\n        </Button>\n      </div>\n\n      <div className=\"border border-white/10 rounded-lg bg-white/5 p-2 space-y-0.5 max-h-[400px] overflow-y-auto\">\n        {folderTree.length === 0 ? (\n          <div className=\"py-8 text-center text-sm text-muted-foreground\">\n            <Folder className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n            <p>No folders yet</p>\n            <p className=\"text-xs mt-1\">Create your first folder to organize documents</p>\n          </div>\n        ) : (\n          folderTree.map(node => renderFolderNode(node))\n        )}\n      </div>\n\n      {/* Create Folder Modal */}\n      <Dialog open={createModalOpen} onOpenChange={setCreateModalOpen}>\n        <DialogContent className=\"bg-zinc-950 border-white/10 text-white\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2 text-white\">\n              <FolderPlus className=\"h-5 w-5 text-emerald-400\" />\n              Create New Folder\n            </DialogTitle>\n            <DialogDescription className=\"text-gray-400\">\n              {parentFolderId\n                ? `Creating subfolder in \"${folders.find(f => f.id === parentFolderId)?.name}\"`\n                : 'Creating folder at root level'}\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"folder-name\" className=\"text-white\">Folder Name *</Label>\n              <Input\n                id=\"folder-name\"\n                value={newFolderName}\n                onChange={(e) => setNewFolderName(e.target.value)}\n                placeholder=\"e.g., Q4 2024 Reports\"\n                className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' && newFolderName.trim()) {\n                    handleCreateFolder()\n                  }\n                }}\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setCreateModalOpen(false)} disabled={loading} className=\"bg-gray-700 text-white border-gray-600 hover:bg-gray-600\">\n              Cancel\n            </Button>\n            <Button onClick={handleCreateFolder} disabled={loading || !newFolderName.trim()} className=\"bg-emerald-600 hover:bg-emerald-700 text-white\">\n              Create Folder\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Rename Folder Modal */}\n      <Dialog open={renameModalOpen} onOpenChange={setRenameModalOpen}>\n        <DialogContent className=\"bg-zinc-950 border-white/10 text-white\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2 text-white\">\n              <Edit2 className=\"h-5 w-5 text-emerald-400\" />\n              Rename Folder\n            </DialogTitle>\n            <DialogDescription className=\"text-gray-400\">\n              Renaming \"{folderToEdit?.name}\"\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"rename-folder\" className=\"text-white\">New Name *</Label>\n              <Input\n                id=\"rename-folder\"\n                value={newFolderName}\n                onChange={(e) => setNewFolderName(e.target.value)}\n                placeholder=\"Enter new folder name\"\n                className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' && newFolderName.trim()) {\n                    handleRenameFolder()\n                  }\n                }}\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setRenameModalOpen(false)} disabled={loading} className=\"bg-gray-700 text-white border-gray-600 hover:bg-gray-600\">\n              Cancel\n            </Button>\n            <Button onClick={handleRenameFolder} disabled={loading || !newFolderName.trim()} className=\"bg-emerald-600 hover:bg-emerald-700 text-white\">\n              Rename\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Folder Modal */}\n      <Dialog open={deleteModalOpen} onOpenChange={setDeleteModalOpen}>\n        <DialogContent className=\"bg-zinc-950 border-white/10 text-white\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2 text-red-400\">\n              <Trash2 className=\"h-5 w-5\" />\n              Delete Folder\n            </DialogTitle>\n            <DialogDescription className=\"text-gray-400\">\n              Are you sure you want to delete \"{folderToDelete?.name}\"?\n              This action cannot be undone.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"py-4 text-sm text-gray-400\">\n            {folderToDelete && (\n              <>\n                <p className=\"mb-2 text-white\">The folder must be empty before deletion:</p>\n                <ul className=\"list-disc list-inside space-y-1\">\n                  <li>Move all documents to another folder</li>\n                  <li>Delete all subfolders first</li>\n                </ul>\n              </>\n            )}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setDeleteModalOpen(false)} disabled={loading} className=\"bg-gray-700 text-white border-gray-600 hover:bg-gray-600\">\n              Cancel\n            </Button>\n            <Button\n              variant=\"destructive\"\n              onClick={handleDeleteFolder}\n              disabled={loading}\n              className=\"bg-red-500 hover:bg-red-600 text-white\"\n            >\n              Delete Folder\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n","import { z } from 'zod'\n\nexport const subscriptionFormSchema = z\n  .object({\n    // Core fields (required)\n    commitment: z\n      .number()\n      .nonnegative('Commitment must be positive'),\n\n    currency: z\n      .string()\n      .length(3, 'Currency must be 3 letters')\n      .transform((val) => val.toUpperCase()),\n\n    status: z.enum(['pending', 'committed', 'partially_funded', 'funded', 'active', 'closed', 'cancelled']),\n\n    // Date fields (optional)\n    effective_date: z.string().optional().nullable(),\n    funding_due_at: z.string().optional().nullable(),\n    committed_at: z.string().optional().nullable(),\n    contract_date: z.string().optional().nullable(),\n\n    // Share/Unit fields (optional)\n    price_per_share: z.number().nonnegative('Price per share must be positive').optional().nullable(),\n    cost_per_share: z.number().nonnegative('Cost per share must be positive').optional().nullable(),\n    num_shares: z.number().nonnegative('Number of shares must be positive').optional().nullable(),\n    units: z.number().nonnegative('Units must be positive').optional().nullable(),\n    spread_per_share: z.number().optional().nullable(),\n\n    // Fee fields (optional)\n    spread_fee_amount: z.number().nonnegative('Spread fee must be positive').optional().nullable(),\n    subscription_fee_percent: z\n      .number()\n      .min(0, 'Subscription fee percent must be positive')\n      .max(100, 'Subscription fee percent cannot exceed 100%')\n      .optional()\n      .nullable(),\n    subscription_fee_amount: z.number().nonnegative('Subscription fee must be positive').optional().nullable(),\n    bd_fee_percent: z\n      .number()\n      .min(0, 'BD fee percent must be positive')\n      .max(100, 'BD fee percent cannot exceed 100%')\n      .optional()\n      .nullable(),\n    bd_fee_amount: z.number().nonnegative('BD fee must be positive').optional().nullable(),\n    finra_fee_amount: z.number().nonnegative('FINRA fee must be positive').optional().nullable(),\n    performance_fee_tier1_percent: z\n      .number()\n      .min(0, 'Performance fee tier 1 percent must be positive')\n      .max(100, 'Performance fee tier 1 percent cannot exceed 100%')\n      .optional()\n      .nullable(),\n    performance_fee_tier1_threshold: z.number().nonnegative('Performance fee tier 1 threshold must be positive').optional().nullable(),\n    performance_fee_tier2_percent: z\n      .number()\n      .min(0, 'Performance fee tier 2 percent must be positive')\n      .max(100, 'Performance fee tier 2 percent cannot exceed 100%')\n      .optional()\n      .nullable(),\n    performance_fee_tier2_threshold: z.number().nonnegative('Performance fee tier 2 threshold must be positive').optional().nullable(),\n\n    // Financial tracking fields (optional)\n    funded_amount: z.number().nonnegative('Funded amount must be positive').optional().nullable(),\n    outstanding_amount: z.number().nonnegative('Outstanding amount must be positive').optional().nullable(),\n    capital_calls_total: z.number().nonnegative('Capital calls total must be positive').optional().nullable(),\n    distributions_total: z.number().nonnegative('Distributions total must be positive').optional().nullable(),\n    current_nav: z.number().optional().nullable(),\n\n    // Business context fields (optional)\n    signed_doc_id: z.string().uuid('Signed document ID must be a valid UUID').optional().nullable(),\n    acknowledgement_notes: z.string().optional().nullable(),\n    opportunity_name: z.string().optional().nullable(),\n    sourcing_contract_ref: z.string().optional().nullable(),\n    introducer_id: z.string().uuid('Introducer ID must be a valid UUID').optional().nullable(),\n    introduction_id: z.string().uuid('Introduction ID must be a valid UUID').optional().nullable()\n  })\n  // Business logic validation refinements\n  .refine(\n    (data) => {\n      // Effective date must be before or equal to funding due date\n      if (data.effective_date && data.funding_due_at) {\n        return new Date(data.effective_date) <= new Date(data.funding_due_at)\n      }\n      return true\n    },\n    {\n      message: 'Funding due date must be after effective date',\n      path: ['funding_due_at']\n    }\n  )\n  .refine(\n    (data) => {\n      // Contract date should not be in the future\n      if (data.contract_date) {\n        return new Date(data.contract_date) <= new Date()\n      }\n      return true\n    },\n    {\n      message: 'Contract date cannot be in the future',\n      path: ['contract_date']\n    }\n  )\n  .refine(\n    (data) => {\n      // Spread per share should equal price - cost (within 1 cent tolerance)\n      if (data.price_per_share != null && data.cost_per_share != null && data.spread_per_share != null) {\n        const expectedSpread = data.price_per_share - data.cost_per_share\n        const diff = Math.abs(data.spread_per_share - expectedSpread)\n        return diff <= 0.01\n      }\n      return true\n    },\n    {\n      message: 'Spread per share must equal price per share minus cost per share',\n      path: ['spread_per_share']\n    }\n  )\n  .refine(\n    (data) => {\n      // Subscription fee amount should match percentage (within 1 cent tolerance)\n      if (data.subscription_fee_percent != null && data.subscription_fee_amount != null && data.commitment) {\n        const expectedAmount = (data.commitment * data.subscription_fee_percent) / 100\n        const diff = Math.abs(data.subscription_fee_amount - expectedAmount)\n        return diff <= 0.01\n      }\n      return true\n    },\n    {\n      message: 'Subscription fee amount must match subscription fee percentage',\n      path: ['subscription_fee_amount']\n    }\n  )\n  .refine(\n    (data) => {\n      // BD fee amount should match percentage (within 1 cent tolerance)\n      if (data.bd_fee_percent != null && data.bd_fee_amount != null && data.commitment) {\n        const expectedAmount = (data.commitment * data.bd_fee_percent) / 100\n        const diff = Math.abs(data.bd_fee_amount - expectedAmount)\n        return diff <= 0.01\n      }\n      return true\n    },\n    {\n      message: 'BD fee amount must match BD fee percentage',\n      path: ['bd_fee_amount']\n    }\n  )\n  .refine(\n    (data) => {\n      // Spread fee amount should match spread * shares (within 1 cent tolerance)\n      if (data.spread_per_share != null && data.num_shares != null && data.spread_fee_amount != null) {\n        const expectedAmount = data.spread_per_share * data.num_shares\n        const diff = Math.abs(data.spread_fee_amount - expectedAmount)\n        return diff <= 0.01\n      }\n      return true\n    },\n    {\n      message: 'Spread fee amount must equal spread per share times number of shares',\n      path: ['spread_fee_amount']\n    }\n  )\n  .refine(\n    (data) => {\n      // Performance fee tier 2 threshold must be >= tier 1 threshold\n      if (data.performance_fee_tier1_threshold != null && data.performance_fee_tier2_threshold != null) {\n        return data.performance_fee_tier2_threshold >= data.performance_fee_tier1_threshold\n      }\n      return true\n    },\n    {\n      message: 'Performance fee tier 2 threshold must be greater than or equal to tier 1 threshold',\n      path: ['performance_fee_tier2_threshold']\n    }\n  )\n  .refine(\n    (data) => {\n      // Funded amount must not exceed commitment\n      if (data.funded_amount != null && data.commitment) {\n        return data.funded_amount <= data.commitment\n      }\n      return true\n    },\n    {\n      message: 'Funded amount cannot exceed commitment',\n      path: ['funded_amount']\n    }\n  )\n  .refine(\n    (data) => {\n      // Outstanding amount should equal commitment - funded (within 1 cent tolerance)\n      if (data.funded_amount != null && data.outstanding_amount != null && data.commitment) {\n        const expectedOutstanding = data.commitment - data.funded_amount\n        const diff = Math.abs(data.outstanding_amount - expectedOutstanding)\n        return diff <= 0.01\n      }\n      return true\n    },\n    {\n      message: 'Outstanding amount must equal commitment minus funded amount',\n      path: ['outstanding_amount']\n    }\n  )\n\nexport type SubscriptionFormData = z.infer<typeof subscriptionFormSchema>\n","import { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport {\n  subscriptionFormSchema,\n  SubscriptionFormData\n} from '@/lib/schemas/subscription-schema'\nimport { toast } from 'sonner'\n\ninterface UseSubscriptionFormProps {\n  entityId: string\n  investorId: string\n  defaultValues?: Partial<SubscriptionFormData>\n  onSuccess?: (data: any) => void\n}\n\nexport function useSubscriptionForm({\n  entityId,\n  investorId,\n  defaultValues,\n  onSuccess\n}: UseSubscriptionFormProps) {\n  const form = useForm<SubscriptionFormData>({\n    resolver: zodResolver(subscriptionFormSchema),\n    defaultValues: defaultValues || {\n      commitment: 0,\n      currency: 'USD',\n      status: 'pending'\n    }\n  })\n\n  const onSubmit = async (data: SubscriptionFormData) => {\n    try {\n      const response = await fetch(`/api/entities/${entityId}/investors/${investorId}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          allocation_status: data.status,\n          subscription: data\n        })\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to update subscription')\n      }\n\n      const result = await response.json()\n      toast.success('Subscription updated successfully')\n      onSuccess?.(result)\n    } catch (error) {\n      console.error('Failed to update subscription:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to update subscription')\n      throw error\n    }\n  }\n\n  return {\n    form,\n    onSubmit: form.handleSubmit(onSubmit),\n    isSubmitting: form.formState.isSubmitting\n  }\n}\n","'use client'\n\nimport { Button } from '@/components/ui/button'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from '@/components/ui/select'\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage\n} from '@/components/ui/form'\nimport { useSubscriptionForm } from '@/hooks/use-subscription-form'\nimport { Loader2, Edit } from 'lucide-react'\n\ninterface SubscriptionEditModalProps {\n  open: boolean\n  onClose: () => void\n  entityId: string\n  investorId: string\n  defaultValues?: any\n  onSuccess?: (data: any) => void\n}\n\nexport function SubscriptionEditModal({\n  open,\n  onClose,\n  entityId,\n  investorId,\n  defaultValues,\n  onSuccess\n}: SubscriptionEditModalProps) {\n  const { form, onSubmit, isSubmitting } = useSubscriptionForm({\n    entityId,\n    investorId,\n    defaultValues,\n    onSuccess: (data) => {\n      onSuccess?.(data.investor)\n      onClose()\n    }\n  })\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"bg-zinc-950 border-white/10 text-white max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2 text-white\">\n            <Edit className=\"h-5 w-5 text-emerald-400\" />\n            Edit Subscription\n          </DialogTitle>\n          <DialogDescription className=\"text-gray-400\">\n            Update subscription details for this investor&apos;s commitment to the vehicle\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={onSubmit} className=\"space-y-4 py-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"commitment\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Commitment Amount *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        step=\"0.01\"\n                        placeholder=\"0.00\"\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                        onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"currency\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Currency *</FormLabel>\n                    <FormControl>\n                      <Input\n                        maxLength={3}\n                        placeholder=\"USD\"\n                        className=\"bg-white/5 border-white/10 text-white uppercase\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"status\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white\">Status *</FormLabel>\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\n                    <FormControl>\n                      <SelectTrigger className=\"bg-white/5 border-white/10 text-white\">\n                        <SelectValue />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent className=\"bg-zinc-950 border-white/10\">\n                      <SelectItem value=\"pending\" className=\"text-white\">\n                        Pending\n                      </SelectItem>\n                      <SelectItem value=\"committed\" className=\"text-white\">\n                        Committed\n                      </SelectItem>\n                      <SelectItem value=\"active\" className=\"text-white\">\n                        Active\n                      </SelectItem>\n                      <SelectItem value=\"closed\" className=\"text-white\">\n                        Closed\n                      </SelectItem>\n                      <SelectItem value=\"cancelled\" className=\"text-white\">\n                        Cancelled\n                      </SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"effective_date\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Effective Date</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                        value={field.value || ''}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"funding_due_at\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-white\">Funding Due Date</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        className=\"bg-white/5 border-white/10 text-white\"\n                        {...field}\n                        value={field.value || ''}\n                      />\n                    </FormControl>\n                    <FormDescription className=\"text-xs text-gray-400\">\n                      Must be after effective date\n                    </FormDescription>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"units\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white\">Units</FormLabel>\n                  <FormControl>\n                    <Input\n                      type=\"number\"\n                      step=\"0.01\"\n                      placeholder=\"Number of units\"\n                      className=\"bg-white/5 border-white/10 text-white\"\n                      {...field}\n                      value={field.value || ''}\n                      onChange={(e) => field.onChange(parseFloat(e.target.value) || null)}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"acknowledgement_notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-white\">Acknowledgement Notes</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Internal notes about this subscription\"\n                      className=\"bg-white/5 border-white/10 text-white\"\n                      rows={3}\n                      {...field}\n                      value={field.value || ''}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                className=\"bg-gray-700 text-white border-gray-600 hover:bg-gray-600\"\n                disabled={isSubmitting}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Saving...\n                  </>\n                ) : (\n                  'Save Changes'\n                )}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","'use client'\r\n\r\nimport { useState } from 'react'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Loader2, TrendingUp } from 'lucide-react'\r\n\r\ninterface AddValuationModalProps {\r\n  vehicleId: string\r\n  open: boolean\r\n  onClose: () => void\r\n  onSuccess: () => void\r\n}\r\n\r\nexport function AddValuationModal({ vehicleId, open, onClose, onSuccess }: AddValuationModalProps) {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [formData, setFormData] = useState({\r\n    nav_total: '',\r\n    nav_per_unit: '',\r\n    as_of_date: new Date().toISOString().split('T')[0]\r\n  })\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    setError(null)\r\n\r\n    try {\r\n      const response = await fetch(`/api/staff/vehicles/${vehicleId}/valuations`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          nav_total: parseFloat(formData.nav_total),\r\n          nav_per_unit: parseFloat(formData.nav_per_unit),\r\n          as_of_date: formData.as_of_date\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json().catch(() => ({}))\r\n        throw new Error(data.error || 'Failed to add valuation')\r\n      }\r\n\r\n      // Reset form\r\n      setFormData({\r\n        nav_total: '',\r\n        nav_per_unit: '',\r\n        as_of_date: new Date().toISOString().split('T')[0]\r\n      })\r\n\r\n      onSuccess()\r\n      onClose()\r\n    } catch (err: any) {\r\n      setError(err.message)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"sm:max-w-[500px]\">\r\n        <form onSubmit={handleSubmit}>\r\n          <DialogHeader>\r\n            <div className=\"flex items-center gap-2\">\r\n              <TrendingUp className=\"h-5 w-5 text-emerald-500\" />\r\n              <DialogTitle>Add Valuation</DialogTitle>\r\n            </div>\r\n            <DialogDescription>\r\n              Add a new NAV valuation for this vehicle\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-4 py-4\">\r\n            {error && (\r\n              <div className=\"rounded-md bg-red-500/10 border border-red-500/20 p-3 text-sm text-red-400\">\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"as_of_date\">Valuation Date *</Label>\r\n              <Input\r\n                id=\"as_of_date\"\r\n                type=\"date\"\r\n                value={formData.as_of_date}\r\n                onChange={(e) => setFormData({ ...formData, as_of_date: e.target.value })}\r\n                required\r\n                className=\"bg-background border-border\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"nav_total\">Total NAV *</Label>\r\n              <Input\r\n                id=\"nav_total\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                placeholder=\"1000000.00\"\r\n                value={formData.nav_total}\r\n                onChange={(e) => setFormData({ ...formData, nav_total: e.target.value })}\r\n                required\r\n                className=\"bg-background border-border\"\r\n              />\r\n              <p className=\"text-xs text-muted-foreground\">Total Net Asset Value</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"nav_per_unit\">NAV Per Unit *</Label>\r\n              <Input\r\n                id=\"nav_per_unit\"\r\n                type=\"number\"\r\n                step=\"0.0001\"\r\n                placeholder=\"100.00\"\r\n                value={formData.nav_per_unit}\r\n                onChange={(e) => setFormData({ ...formData, nav_per_unit: e.target.value })}\r\n                required\r\n                className=\"bg-background border-border\"\r\n              />\r\n              <p className=\"text-xs text-muted-foreground\">NAV per individual unit/share</p>\r\n            </div>\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              disabled={loading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading}>\r\n              {loading && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n              Add Valuation\r\n            </Button>\r\n          </DialogFooter>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n","'use client'\n\nimport { useEffect, useState } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Loader2, TrendingUp } from 'lucide-react'\n\ninterface Valuation {\n  id: string\n  as_of_date: string\n  nav_total: number | null\n  nav_per_unit: number | null\n}\n\ninterface EditValuationModalProps {\n  vehicleId: string\n  valuation: Valuation | null\n  open: boolean\n  onClose: () => void\n  onSuccess: () => void\n}\n\nexport function EditValuationModal({\n  vehicleId,\n  valuation,\n  open,\n  onClose,\n  onSuccess\n}: EditValuationModalProps) {\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [formData, setFormData] = useState({\n    nav_total: '',\n    nav_per_unit: '',\n    as_of_date: ''\n  })\n\n  useEffect(() => {\n    if (valuation) {\n      setFormData({\n        nav_total: valuation.nav_total != null ? String(valuation.nav_total) : '',\n        nav_per_unit: valuation.nav_per_unit != null ? String(valuation.nav_per_unit) : '',\n        as_of_date: valuation.as_of_date\n      })\n      setError(null)\n    }\n  }, [valuation])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!valuation) return\n\n    setLoading(true)\n    setError(null)\n\n    try {\n      const response = await fetch(`/api/staff/vehicles/${vehicleId}/valuations/${valuation.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          nav_total: parseFloat(formData.nav_total),\n          nav_per_unit: parseFloat(formData.nav_per_unit),\n          as_of_date: formData.as_of_date\n        })\n      })\n\n      if (!response.ok) {\n        const data = await response.json().catch(() => ({}))\n        throw new Error(data.error || 'Failed to update valuation')\n      }\n\n      onSuccess()\n      onClose()\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[500px] bg-zinc-950 border-white/10\">\n        <form onSubmit={handleSubmit}>\n          <DialogHeader>\n            <div className=\"flex items-center gap-2\">\n              <TrendingUp className=\"h-5 w-5 text-emerald-500\" />\n              <DialogTitle>Edit Valuation</DialogTitle>\n            </div>\n            <DialogDescription>\n              Update the NAV valuation for this vehicle\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            {error && (\n              <div className=\"rounded-md bg-red-500/10 border border-red-500/20 p-3 text-sm text-red-400\">\n                {error}\n              </div>\n            )}\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"as_of_date\">Valuation Date *</Label>\n              <Input\n                id=\"as_of_date\"\n                type=\"date\"\n                value={formData.as_of_date}\n                onChange={(e) => setFormData({ ...formData, as_of_date: e.target.value })}\n                required\n                className=\"bg-zinc-900 border-white/10\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"nav_total\">Total NAV *</Label>\n              <Input\n                id=\"nav_total\"\n                type=\"number\"\n                step=\"0.01\"\n                placeholder=\"1000000.00\"\n                value={formData.nav_total}\n                onChange={(e) => setFormData({ ...formData, nav_total: e.target.value })}\n                required\n                className=\"bg-zinc-900 border-white/10\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"nav_per_unit\">NAV Per Unit *</Label>\n              <Input\n                id=\"nav_per_unit\"\n                type=\"number\"\n                step=\"0.0001\"\n                placeholder=\"100.00\"\n                value={formData.nav_per_unit}\n                onChange={(e) => setFormData({ ...formData, nav_per_unit: e.target.value })}\n                required\n                className=\"bg-zinc-900 border-white/10\"\n              />\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={onClose}\n              disabled={loading}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={loading || !valuation}>\n              {loading && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n              Save Changes\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n","'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog'\nimport { Label } from '@/components/ui/label'\nimport { Input } from '@/components/ui/input'\nimport { Upload } from 'lucide-react'\nimport { toast } from 'sonner'\nimport { useRouter } from 'next/navigation'\n\ninterface ImportValuationsDialogProps {\n  vehicleId: string\n  onImported?: () => void\n}\n\nexport function ImportValuationsDialog({ vehicleId, onImported }: ImportValuationsDialogProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [file, setFile] = useState<File | null>(null)\n  const [isUploading, setIsUploading] = useState(false)\n  const router = useRouter()\n\n  const handleUpload = async () => {\n    if (!file) {\n      toast.error('Please select a CSV file')\n      return\n    }\n\n    setIsUploading(true)\n    try {\n      const formData = new FormData()\n      formData.append('file', file)\n\n      const response = await fetch(`/api/staff/vehicles/${vehicleId}/valuations/import`, {\n        method: 'POST',\n        body: formData\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to import valuations')\n      }\n\n      toast.success(data.message || `Imported ${data.imported} valuation(s)`)\n      setIsOpen(false)\n      setFile(null)\n      onImported?.()\n      router.refresh()\n    } catch (error: any) {\n      toast.error(error.message || 'Failed to import valuations')\n    } finally {\n      setIsUploading(false)\n    }\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\">\n          <Upload className=\"h-4 w-4 mr-2\" />\n          Import CSV\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"bg-zinc-950 border-white/10\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white\">Import Valuations</DialogTitle>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"valuation-file\">CSV File</Label>\n            <Input\n              id=\"valuation-file\"\n              type=\"file\"\n              accept=\".csv\"\n              onChange={(e) => setFile(e.target.files?.[0] || null)}\n              className=\"bg-zinc-900 border-white/10\"\n            />\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Expected columns: as_of_date, nav_total, nav_per_unit (header names flexible)\n            </p>\n          </div>\n          <div className=\"flex justify-end gap-2\">\n            <Button variant=\"outline\" onClick={() => setIsOpen(false)} disabled={isUploading}>\n              Cancel\n            </Button>\n            <Button onClick={handleUpload} disabled={!file || isUploading}>\n              {isUploading ? 'Importing...' : 'Import'}\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n","'use client'\n\nimport { useEffect, useState } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Loader2 } from 'lucide-react'\n\ninterface Position {\n  id: string\n  investor_id: string\n  units: number | null\n  cost_basis: number | null\n  last_nav: number | null\n  as_of_date: string | null\n}\n\ninterface PositionModalProps {\n  vehicleId: string\n  position: Position | null\n  open: boolean\n  onClose: () => void\n  onSuccess: () => void\n}\n\nexport function PositionModal({\n  vehicleId,\n  position,\n  open,\n  onClose,\n  onSuccess\n}: PositionModalProps) {\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [formData, setFormData] = useState({\n    investor_id: '',\n    units: '',\n    cost_basis: '',\n    last_nav: '',\n    as_of_date: ''\n  })\n\n  useEffect(() => {\n    if (position) {\n      setFormData({\n        investor_id: position.investor_id,\n        units: position.units != null ? String(position.units) : '',\n        cost_basis: position.cost_basis != null ? String(position.cost_basis) : '',\n        last_nav: position.last_nav != null ? String(position.last_nav) : '',\n        as_of_date: position.as_of_date || ''\n      })\n      setError(null)\n    } else {\n      setFormData({\n        investor_id: '',\n        units: '',\n        cost_basis: '',\n        last_nav: '',\n        as_of_date: ''\n      })\n    }\n  }, [position])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setError(null)\n\n    try {\n      const payload: any = {\n        investor_id: formData.investor_id,\n        units: parseFloat(formData.units),\n      }\n      if (formData.cost_basis) payload.cost_basis = parseFloat(formData.cost_basis)\n      if (formData.last_nav) payload.last_nav = parseFloat(formData.last_nav)\n      if (formData.as_of_date) payload.as_of_date = formData.as_of_date\n\n      const endpoint = position\n        ? `/api/staff/vehicles/${vehicleId}/positions/${position.id}`\n        : `/api/staff/vehicles/${vehicleId}/positions`\n\n      const res = await fetch(endpoint, {\n        method: position ? 'PUT' : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      })\n\n      const data = await res.json().catch(() => ({}))\n      if (!res.ok) {\n        throw new Error(data.error || 'Failed to save position')\n      }\n\n      onSuccess()\n      onClose()\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[520px] bg-zinc-950 border-white/10\">\n        <form onSubmit={handleSubmit}>\n          <DialogHeader>\n            <DialogTitle className=\"text-white\">{position ? 'Edit Position' : 'Add Position'}</DialogTitle>\n            <DialogDescription>\n              Manual position entry or correction for this vehicle\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            {error && (\n              <div className=\"rounded-md bg-red-500/10 border border-red-500/20 p-3 text-sm text-red-400\">\n                {error}\n              </div>\n            )}\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"investor_id\">Investor ID *</Label>\n              <Input\n                id=\"investor_id\"\n                value={formData.investor_id}\n                onChange={(e) => setFormData({ ...formData, investor_id: e.target.value })}\n                required\n                disabled={!!position}\n                className=\"bg-zinc-900 border-white/10\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"units\">Units / Shares *</Label>\n              <Input\n                id=\"units\"\n                type=\"number\"\n                step=\"0.0001\"\n                value={formData.units}\n                onChange={(e) => setFormData({ ...formData, units: e.target.value })}\n                required\n                className=\"bg-zinc-900 border-white/10\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"cost_basis\">Cost Basis</Label>\n                <Input\n                  id=\"cost_basis\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={formData.cost_basis}\n                  onChange={(e) => setFormData({ ...formData, cost_basis: e.target.value })}\n                  className=\"bg-zinc-900 border-white/10\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"last_nav\">Last NAV</Label>\n                <Input\n                  id=\"last_nav\"\n                  type=\"number\"\n                  step=\"0.0001\"\n                  value={formData.last_nav}\n                  onChange={(e) => setFormData({ ...formData, last_nav: e.target.value })}\n                  className=\"bg-zinc-900 border-white/10\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"as_of_date\">As of Date</Label>\n              <Input\n                id=\"as_of_date\"\n                type=\"date\"\n                value={formData.as_of_date}\n                onChange={(e) => setFormData({ ...formData, as_of_date: e.target.value })}\n                className=\"bg-zinc-900 border-white/10\"\n              />\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} disabled={loading}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={loading}>\n              {loading && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n              {position ? 'Save Changes' : 'Add Position'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n","'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog'\nimport { Label } from '@/components/ui/label'\nimport { Input } from '@/components/ui/input'\nimport { Upload } from 'lucide-react'\nimport { toast } from 'sonner'\nimport { useRouter } from 'next/navigation'\n\ninterface ImportPositionsDialogProps {\n  vehicleId: string\n  onImported?: () => void\n}\n\nexport function ImportPositionsDialog({ vehicleId, onImported }: ImportPositionsDialogProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [file, setFile] = useState<File | null>(null)\n  const [isUploading, setIsUploading] = useState(false)\n  const router = useRouter()\n\n  const handleUpload = async () => {\n    if (!file) {\n      toast.error('Please select a CSV file')\n      return\n    }\n\n    setIsUploading(true)\n    try {\n      const formData = new FormData()\n      formData.append('file', file)\n\n      const response = await fetch(`/api/staff/vehicles/${vehicleId}/positions/import`, {\n        method: 'POST',\n        body: formData\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to import positions')\n      }\n\n      toast.success(data.message || `Imported ${data.imported} position(s)`)\n      setIsOpen(false)\n      setFile(null)\n      onImported?.()\n      router.refresh()\n    } catch (error: any) {\n      toast.error(error.message || 'Failed to import positions')\n    } finally {\n      setIsUploading(false)\n    }\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\">\n          <Upload className=\"h-4 w-4 mr-2\" />\n          Import CSV\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"bg-zinc-950 border-white/10\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white\">Import Positions</DialogTitle>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"positions-file\">CSV File</Label>\n            <Input\n              id=\"positions-file\"\n              type=\"file\"\n              accept=\".csv\"\n              onChange={(e) => setFile(e.target.files?.[0] || null)}\n              className=\"bg-zinc-900 border-white/10\"\n            />\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Expected columns: investor_id, units, cost_basis, last_nav, as_of_date\n            </p>\n          </div>\n          <div className=\"flex justify-end gap-2\">\n            <Button variant=\"outline\" onClick={() => setIsOpen(false)} disabled={isUploading}>\n              Cancel\n            </Button>\n            <Button onClick={handleUpload} disabled={!file || isUploading}>\n              {isUploading ? 'Importing...' : 'Import'}\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n"],"names":[],"mappings":"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"}