{"version":3,"sources":["../../../../../versotech-portal/src/app/%28main%29/versotech_main/my-partners/page.tsx","../../../../../versotech-portal/src/components/partners/partner-detail-drawer.tsx","../../../../../versotech-portal/src/components/partners/record-commission-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  Users,\n  Building2,\n  CheckCircle2,\n  Search,\n  Loader2,\n  AlertCircle,\n  Globe,\n  Mail,\n  Handshake,\n  FileText,\n  DollarSign,\n  ChevronRight,\n  TrendingUp,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { formatCurrency } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\nimport { PartnerDetailDrawer } from '@/components/partners/partner-detail-drawer'\nimport {\n  PartnerCommissionSummary,\n  type CommissionSummary,\n} from '@/components/partners/partner-commission-summary'\n\ntype ArrangerInfo = {\n  id: string\n  legal_name: string\n  status: string\n}\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  is_active: boolean\n}\n\ntype Partner = {\n  id: string\n  name: string\n  legal_name: string | null\n  partner_type: string | null\n  status: string\n  contact_name: string | null\n  contact_email: string | null\n  contact_phone: string | null\n  country: string | null\n  logo_url: string | null\n  kyc_status: string | null\n  deals_count: number\n  referrals_count: number\n  total_referral_value: number\n  last_activity: string | null\n  fee_plans: FeePlan[]\n  commission_summary: CommissionSummary\n}\n\ntype Summary = {\n  totalPartners: number\n  activePartners: number\n  totalReferrals: number\n  totalReferralValue: number\n  totalOwed: number\n  totalPaid: number\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 border-green-200',\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  inactive: 'bg-gray-100 text-gray-800 border-gray-200',\n  suspended: 'bg-red-100 text-red-800 border-red-200',\n}\n\nconst KYC_STYLES: Record<string, string> = {\n  approved: 'bg-green-100 text-green-800',\n  pending: 'bg-yellow-100 text-yellow-800',\n  expired: 'bg-red-100 text-red-800',\n  not_started: 'bg-gray-100 text-gray-800',\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Status', value: 'all' },\n  { label: 'Active', value: 'active' },\n  { label: 'Pending', value: 'pending' },\n  { label: 'Inactive', value: 'inactive' },\n]\n\nexport default function MyPartnersPage() {\n  const [arrangerInfo, setArrangerInfo] = useState<ArrangerInfo | null>(null)\n  const [arrangerId, setArrangerId] = useState<string | null>(null)\n  const [partners, setPartners] = useState<Partner[]>([])\n  const [deals, setDeals] = useState<Deal[]>([])\n  const [summary, setSummary] = useState<Summary>({\n    totalPartners: 0,\n    activePartners: 0,\n    totalReferrals: 0,\n    totalReferralValue: 0,\n    totalOwed: 0,\n    totalPaid: 0,\n  })\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [dealFilter, setDealFilter] = useState('all')\n\n  // Detail drawer state\n  const [selectedPartnerId, setSelectedPartnerId] = useState<string | null>(null)\n  const [drawerOpen, setDrawerOpen] = useState(false)\n\n  const handlePartnerClick = (partnerId: string) => {\n    setSelectedPartnerId(partnerId)\n    setDrawerOpen(true)\n  }\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        setLoading(true)\n        const supabase = createClient()\n\n        // Get current user\n        const { data: { user } } = await supabase.auth.getUser()\n        if (!user) {\n          setError('Not authenticated')\n          return\n        }\n\n        // Check if user is an arranger\n        const { data: arrangerUser, error: arrangerUserError } = await supabase\n          .from('arranger_users')\n          .select('arranger_id')\n          .eq('user_id', user.id)\n          .single()\n\n        if (arrangerUserError || !arrangerUser) {\n          // Staff view - show all partners\n          await fetchAllPartners(supabase)\n          return\n        }\n\n        setArrangerId(arrangerUser.arranger_id)\n\n        // Fetch arranger info\n        const { data: arranger, error: arrangerError } = await supabase\n          .from('arranger_entities')\n          .select('id, legal_name, status')\n          .eq('id', arrangerUser.arranger_id)\n          .single()\n\n        if (arrangerError) throw arrangerError\n        setArrangerInfo(arranger)\n\n        // Get deals for this arranger (for filter dropdown)\n        const { data: arrangerDeals, error: dealsError } = await supabase\n          .from('deals')\n          .select('id, name, company_name')\n          .eq('arranger_entity_id', arrangerUser.arranger_id)\n          .order('name')\n\n        if (dealsError) throw dealsError\n        setDeals(arrangerDeals || [])\n\n        if (!arrangerDeals || arrangerDeals.length === 0) {\n          setPartners([])\n          setSummary({\n            totalPartners: 0,\n            activePartners: 0,\n            totalReferrals: 0,\n            totalReferralValue: 0,\n            totalOwed: 0,\n            totalPaid: 0,\n          })\n          return\n        }\n\n        const dealIds = arrangerDeals.map(d => d.id)\n\n        // CORRECT APPROACH: Get partners via fee_plans (partner assignment to deals)\n        // Partners are linked to deals when CEO dispatches with a fee model\n        const { data: feePlansWithPartners, error: fpError } = await supabase\n          .from('fee_plans')\n          .select(`\n            id,\n            name,\n            is_active,\n            partner_id,\n            deal_id,\n            created_at,\n            deal:deals(id, name, currency, created_at)\n          `)\n          .in('deal_id', dealIds)\n          .not('partner_id', 'is', null)\n\n        if (fpError) throw fpError\n\n        // Get unique partner IDs from fee_plans\n        const partnerIds = [...new Set((feePlansWithPartners || []).map(fp => fp.partner_id).filter(Boolean))]\n\n        if (partnerIds.length === 0) {\n          setPartners([])\n          setSummary({\n            totalPartners: 0,\n            activePartners: 0,\n            totalReferrals: 0,\n            totalReferralValue: 0,\n            totalOwed: 0,\n            totalPaid: 0,\n          })\n          return\n        }\n\n        // Fetch partner details\n        const { data: partnersData, error: partnersError } = await supabase\n          .from('partners')\n          .select('*')\n          .in('id', partnerIds)\n          .order('name')\n\n        if (partnersError) throw partnersError\n\n        // Build fee plans by partner\n        const feePlansByPartner = new Map<string, FeePlan[]>()\n        const dealsByPartner = new Map<string, Set<string>>()\n        ;(feePlansWithPartners || []).forEach((fp: any) => {\n          if (!fp.partner_id) return\n          const existing = feePlansByPartner.get(fp.partner_id) || []\n          existing.push({ id: fp.id, name: fp.name, is_active: fp.is_active })\n          feePlansByPartner.set(fp.partner_id, existing)\n\n          // Track which deals this partner is assigned to\n          const dealSet = dealsByPartner.get(fp.partner_id) || new Set()\n          if (fp.deal_id) dealSet.add(fp.deal_id)\n          dealsByPartner.set(fp.partner_id, dealSet)\n        })\n\n        // Get commissions for these partners\n        const { data: commissions } = await supabase\n          .from('partner_commissions')\n          .select('partner_id, status, accrual_amount, currency')\n          .in('partner_id', partnerIds)\n          .eq('arranger_id', arrangerUser.arranger_id)\n\n        // Build commission summaries by partner\n        const commissionsByPartner = new Map<string, CommissionSummary>()\n        partnerIds.forEach(pid => {\n          commissionsByPartner.set(pid, {\n            accrued: 0,\n            invoice_requested: 0,\n            invoice_submitted: 0,\n            invoiced: 0,\n            paid: 0,\n            cancelled: 0,\n            total_owed: 0,\n            currency: 'USD',\n          })\n        })\n\n        ;(commissions || []).forEach((c: any) => {\n          const summary = commissionsByPartner.get(c.partner_id)\n          if (!summary) return\n          const amount = Number(c.accrual_amount) || 0\n          if (c.status === 'accrued') summary.accrued += amount\n          else if (c.status === 'invoice_requested') summary.invoice_requested += amount\n          else if (c.status === 'invoice_submitted') summary.invoice_submitted = (summary.invoice_submitted || 0) + amount\n          else if (c.status === 'invoiced') summary.invoiced += amount\n          else if (c.status === 'paid') summary.paid += amount\n          else if (c.status === 'cancelled') summary.cancelled += amount\n          if (['accrued', 'invoice_requested', 'invoice_submitted', 'invoiced'].includes(c.status)) {\n            summary.total_owed += amount\n          }\n          if (c.currency) summary.currency = c.currency\n        })\n\n        // Process partners with stats\n        const processedPartners: Partner[] = (partnersData || []).map((p: any) => {\n          const partnerFeePlans = feePlansByPartner.get(p.id) || []\n          const partnerDealIds = dealsByPartner.get(p.id) || new Set()\n\n          return {\n            id: p.id,\n            name: p.name || p.legal_name || 'Unknown Partner',\n            legal_name: p.legal_name,\n            partner_type: p.partner_type,\n            status: p.status || 'active',\n            contact_name: p.contact_name,\n            contact_email: p.contact_email,\n            contact_phone: p.contact_phone,\n            country: p.country,\n            logo_url: p.logo_url,\n            kyc_status: p.kyc_status,\n            deals_count: partnerDealIds.size,\n            referrals_count: 0, // Will be populated if we track referrals separately\n            total_referral_value: 0, // Will be populated if we track referrals separately\n            last_activity: null,\n            fee_plans: partnerFeePlans,\n            commission_summary: commissionsByPartner.get(p.id) || {\n              accrued: 0,\n              invoice_requested: 0,\n              invoice_submitted: 0,\n              invoiced: 0,\n              paid: 0,\n              cancelled: 0,\n              total_owed: 0,\n              currency: 'USD',\n            },\n          }\n        })\n\n        setPartners(processedPartners)\n\n        const active = processedPartners.filter(p => p.status === 'active').length\n        const totalRefs = processedPartners.reduce((sum, p) => sum + p.referrals_count, 0)\n        const totalVal = processedPartners.reduce((sum, p) => sum + p.total_referral_value, 0)\n        const totalOwed = processedPartners.reduce((sum, p) => sum + p.commission_summary.total_owed, 0)\n        const totalPaid = processedPartners.reduce((sum, p) => sum + p.commission_summary.paid, 0)\n\n        setSummary({\n          totalPartners: processedPartners.length,\n          activePartners: active,\n          totalReferrals: totalRefs,\n          totalReferralValue: totalVal,\n          totalOwed,\n          totalPaid,\n        })\n\n        setError(null)\n      } catch (err) {\n        console.error('[MyPartnersPage] Error:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load partners')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    async function fetchAllPartners(supabase: any) {\n      // Staff view - show all partners\n      const { data: partnersData, error: partnersError } = await supabase\n        .from('partners')\n        .select('*')\n        .order('name')\n        .limit(100)\n\n      if (partnersError) throw partnersError\n\n      const emptyCommission: CommissionSummary = {\n        accrued: 0,\n        invoice_requested: 0,\n        invoiced: 0,\n        paid: 0,\n        cancelled: 0,\n        total_owed: 0,\n        currency: 'USD',\n      }\n\n      const processedPartners: Partner[] = (partnersData || []).map((p: any) => ({\n        id: p.id,\n        name: p.name || p.legal_name || 'Unknown Partner',\n        legal_name: p.legal_name,\n        partner_type: p.partner_type,\n        status: p.status || 'active',\n        contact_name: p.contact_name,\n        contact_email: p.contact_email,\n        contact_phone: p.contact_phone,\n        country: p.country,\n        logo_url: p.logo_url,\n        kyc_status: p.kyc_status,\n        deals_count: 0,\n        referrals_count: 0,\n        total_referral_value: 0,\n        last_activity: null,\n        fee_plans: [],\n        commission_summary: emptyCommission,\n      }))\n\n      setPartners(processedPartners)\n      setSummary({\n        totalPartners: processedPartners.length,\n        activePartners: processedPartners.filter(p => p.status === 'active').length,\n        totalReferrals: 0,\n        totalReferralValue: 0,\n        totalOwed: 0,\n        totalPaid: 0,\n      })\n    }\n\n    fetchData()\n  }, [])\n\n  // Filter partners\n  const filteredPartners = partners.filter(partner => {\n    const matchesStatus = statusFilter === 'all' || partner.status === statusFilter\n    const matchesSearch = !search ||\n      partner.name?.toLowerCase().includes(search.toLowerCase()) ||\n      partner.legal_name?.toLowerCase().includes(search.toLowerCase()) ||\n      partner.contact_name?.toLowerCase().includes(search.toLowerCase()) ||\n      partner.country?.toLowerCase().includes(search.toLowerCase())\n\n    // Deal filter - only applies if we have deal data\n    // Note: This is a simplified filter. For a real deal filter, you'd need\n    // to store which deals each partner has referrals on.\n    const matchesDeal = dealFilter === 'all' // TODO: Implement deal-specific filtering\n\n    return matchesStatus && matchesSearch && matchesDeal\n  })\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        <span className=\"ml-3 text-muted-foreground\">Loading partners...</span>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-16\">\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Partners</h3>\n        <p className=\"text-muted-foreground\">{error}</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">My Partners</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {arrangerInfo\n              ? `Partners working with ${arrangerInfo.legal_name}`\n              : 'View all distribution partners'}\n          </p>\n        </div>\n        <Link href=\"/versotech_main/fee-plans\">\n          <Button variant=\"outline\" size=\"sm\">\n            <FileText className=\"h-4 w-4 mr-2\" />\n            Fee Plans\n          </Button>\n        </Link>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Users className=\"h-4 w-4\" />\n              Total Partners\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{summary.totalPartners}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              In your network\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />\n              Active Partners\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{summary.activePartners}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Currently active\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Handshake className=\"h-4 w-4\" />\n              Total Referrals\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">{summary.totalReferrals}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Investors referred\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <TrendingUp className=\"h-4 w-4\" />\n              Referral Value\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-purple-600\">\n              {formatCurrency(summary.totalReferralValue, 'USD')}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Total commitments\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <DollarSign className=\"h-4 w-4\" />\n              Fees Owed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-yellow-600\">\n              {formatCurrency(summary.totalOwed, 'USD')}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Pending payment\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />\n              Fees Paid\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">\n              {formatCurrency(summary.totalPaid, 'USD')}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Total paid out\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search partners...\"\n                  value={search}\n                  onChange={(e) => setSearch(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-full md:w-48\">\n                <SelectValue placeholder=\"Filter by status\" />\n              </SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((option) => (\n                  <SelectItem key={option.value} value={option.value}>\n                    {option.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            {deals.length > 0 && (\n              <Select value={dealFilter} onValueChange={setDealFilter}>\n                <SelectTrigger className=\"w-full md:w-56\">\n                  <SelectValue placeholder=\"Filter by deal\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Deals</SelectItem>\n                  {deals.map((deal) => (\n                    <SelectItem key={deal.id} value={deal.id}>\n                      {deal.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Partners Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Partners</CardTitle>\n          <CardDescription>\n            {filteredPartners.length} partner{filteredPartners.length !== 1 ? 's' : ''} found\n            {arrangerInfo && ' • Click a row to view details'}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredPartners.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <Users className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">\n                {search || statusFilter !== 'all'\n                  ? 'No partners match your filters'\n                  : 'No partners in your network yet'}\n              </p>\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Partner</TableHead>\n                    <TableHead>Type</TableHead>\n                    <TableHead>Contact</TableHead>\n                    <TableHead>Fee Plans</TableHead>\n                    <TableHead>Referrals</TableHead>\n                    <TableHead>Payments</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead className=\"w-10\"></TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredPartners.map((partner) => (\n                    <TableRow\n                      key={partner.id}\n                      className={cn(\n                        arrangerInfo && 'cursor-pointer hover:bg-muted/50 transition-colors'\n                      )}\n                      onClick={() => arrangerInfo && handlePartnerClick(partner.id)}\n                    >\n                      <TableCell>\n                        <div className=\"flex items-center gap-3\">\n                          {partner.logo_url ? (\n                            <img\n                              src={partner.logo_url}\n                              alt={partner.name}\n                              className=\"h-10 w-10 rounded-lg object-cover\"\n                            />\n                          ) : (\n                            <div className=\"h-10 w-10 rounded-lg bg-muted flex items-center justify-center\">\n                              <Building2 className=\"h-5 w-5 text-muted-foreground\" />\n                            </div>\n                          )}\n                          <div>\n                            <div className=\"font-medium\">{partner.name}</div>\n                            {partner.country && (\n                              <div className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                                <Globe className=\"h-3 w-3\" />\n                                {partner.country}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        {partner.partner_type ? (\n                          <Badge variant=\"secondary\" className=\"capitalize\">\n                            {partner.partner_type.replace('_', ' ')}\n                          </Badge>\n                        ) : (\n                          <span className=\"text-muted-foreground text-xs\">—</span>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"space-y-1\">\n                          {partner.contact_name && (\n                            <div className=\"text-sm\">{partner.contact_name}</div>\n                          )}\n                          {partner.contact_email && (\n                            <div className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                              <Mail className=\"h-3 w-3\" />\n                              {partner.contact_email}\n                            </div>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        {partner.fee_plans.length > 0 ? (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {partner.fee_plans.slice(0, 2).map((fp) => (\n                              <Badge\n                                key={fp.id}\n                                variant={fp.is_active ? 'default' : 'secondary'}\n                                className=\"text-xs\"\n                              >\n                                {fp.name}\n                              </Badge>\n                            ))}\n                            {partner.fee_plans.length > 2 && (\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                +{partner.fee_plans.length - 2}\n                              </Badge>\n                            )}\n                          </div>\n                        ) : (\n                          <span className=\"text-muted-foreground text-xs\">No fee plans</span>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        <div>\n                          <div className=\"font-medium\">{partner.referrals_count} referrals</div>\n                          {partner.total_referral_value > 0 && (\n                            <div className=\"text-xs text-muted-foreground\">\n                              {formatCurrency(partner.total_referral_value, 'USD')}\n                            </div>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <PartnerCommissionSummary\n                          summary={partner.commission_summary}\n                          variant=\"inline\"\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"space-y-1\">\n                          <Badge\n                            variant=\"outline\"\n                            className={cn('capitalize', STATUS_STYLES[partner.status] || STATUS_STYLES.active)}\n                          >\n                            {partner.status}\n                          </Badge>\n                          {partner.kyc_status && (\n                            <div>\n                              <Badge\n                                variant=\"secondary\"\n                                className={cn('text-xs', KYC_STYLES[partner.kyc_status] || '')}\n                              >\n                                KYC: {partner.kyc_status.replace('_', ' ')}\n                              </Badge>\n                            </div>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        {arrangerInfo && (\n                          <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n                        )}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Partner Detail Drawer */}\n      <PartnerDetailDrawer\n        partnerId={selectedPartnerId}\n        open={drawerOpen}\n        onOpenChange={setDrawerOpen}\n      />\n    </div>\n  )\n}\n","'use client'\n\nimport { useEffect, useState } from 'react'\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from '@/components/ui/sheet'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Separator } from '@/components/ui/separator'\nimport {\n  Building2,\n  Mail,\n  Phone,\n  Globe,\n  FileText,\n  Users,\n  TrendingUp,\n  ExternalLink,\n  Loader2,\n  AlertCircle,\n  Briefcase,\n} from 'lucide-react'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { cn } from '@/lib/utils'\nimport { PartnerCommissionSummary, type CommissionSummary } from './partner-commission-summary'\nimport { RecordCommissionDialog } from './record-commission-dialog'\nimport Link from 'next/link'\nimport { Plus } from 'lucide-react'\n\ntype PartnerDetail = {\n  id: string\n  name: string\n  legal_name: string | null\n  partner_type: string | null\n  status: string\n  contact_name: string | null\n  contact_email: string | null\n  contact_phone: string | null\n  country: string | null\n  logo_url: string | null\n  kyc_status: string | null\n  created_at: string | null\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  description: string | null\n  is_active: boolean\n  effective_from: string | null\n  effective_until: string | null\n  deal_id: string | null\n  created_at: string | null\n  components: any[]\n}\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n  status: string\n  currency: string\n}\n\ntype Referral = {\n  id: string\n  created_at: string\n  investor: { id: string; name: string } | null\n  deal: { id: string; name: string; company_name: string | null } | null\n}\n\ntype PartnerData = {\n  partner: PartnerDetail\n  fee_plans: FeePlan[]\n  commission_summary: CommissionSummary\n  deals: Deal[]\n  recent_referrals: Referral[]\n  stats: {\n    total_deals: number\n    total_referrals: number\n    active_fee_plans: number\n  }\n}\n\ninterface PartnerDetailDrawerProps {\n  partnerId: string | null\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 border-green-200',\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  inactive: 'bg-gray-100 text-gray-800 border-gray-200',\n  suspended: 'bg-red-100 text-red-800 border-red-200',\n}\n\nconst KYC_STYLES: Record<string, string> = {\n  approved: 'bg-green-100 text-green-800',\n  pending: 'bg-yellow-100 text-yellow-800',\n  expired: 'bg-red-100 text-red-800',\n  not_started: 'bg-gray-100 text-gray-800',\n}\n\nexport function PartnerDetailDrawer({\n  partnerId,\n  open,\n  onOpenChange,\n}: PartnerDetailDrawerProps) {\n  const [data, setData] = useState<PartnerData | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [recordCommissionOpen, setRecordCommissionOpen] = useState(false)\n\n  const fetchPartnerDetail = async () => {\n    if (!partnerId) return\n\n    setLoading(true)\n    setError(null)\n\n    try {\n      const response = await fetch(`/api/arrangers/me/partners/${partnerId}`)\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to load partner details')\n      }\n\n      const result = await response.json()\n      setData(result.data)\n    } catch (err) {\n      console.error('[PartnerDetailDrawer] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load partner details')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    if (!open || !partnerId) {\n      setData(null)\n      setError(null)\n      return\n    }\n\n    fetchPartnerDetail()\n  }, [open, partnerId])\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent className=\"w-full sm:max-w-xl overflow-y-auto\">\n        {loading && (\n          <div className=\"flex items-center justify-center py-16\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            <span className=\"ml-3 text-muted-foreground\">Loading partner details...</span>\n          </div>\n        )}\n\n        {error && (\n          <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n            <AlertCircle className=\"h-12 w-12 text-destructive mb-4\" />\n            <p className=\"text-muted-foreground\">{error}</p>\n            <Button\n              variant=\"outline\"\n              className=\"mt-4\"\n              onClick={() => onOpenChange(false)}\n            >\n              Close\n            </Button>\n          </div>\n        )}\n\n        {data && (\n          <>\n            <SheetHeader className=\"pb-4\">\n              <div className=\"flex items-center gap-3\">\n                {data.partner.logo_url ? (\n                  <img\n                    src={data.partner.logo_url}\n                    alt={data.partner.name}\n                    className=\"h-12 w-12 rounded-lg object-cover\"\n                  />\n                ) : (\n                  <div className=\"h-12 w-12 rounded-lg bg-muted flex items-center justify-center\">\n                    <Building2 className=\"h-6 w-6 text-muted-foreground\" />\n                  </div>\n                )}\n                <div>\n                  <SheetTitle>{data.partner.name}</SheetTitle>\n                  <SheetDescription>\n                    {data.partner.partner_type && (\n                      <span className=\"capitalize\">{data.partner.partner_type.replace('_', ' ')}</span>\n                    )}\n                    {data.partner.country && ` • ${data.partner.country}`}\n                  </SheetDescription>\n                </div>\n              </div>\n\n              {/* Status badges */}\n              <div className=\"flex gap-2 mt-3\">\n                <Badge\n                  variant=\"outline\"\n                  className={cn('capitalize', STATUS_STYLES[data.partner.status] || STATUS_STYLES.active)}\n                >\n                  {data.partner.status}\n                </Badge>\n                {data.partner.kyc_status && (\n                  <Badge\n                    variant=\"secondary\"\n                    className={cn('text-xs', KYC_STYLES[data.partner.kyc_status] || '')}\n                  >\n                    KYC: {data.partner.kyc_status.replace('_', ' ')}\n                  </Badge>\n                )}\n              </div>\n            </SheetHeader>\n\n            <Separator className=\"my-4\" />\n\n            {/* Quick Stats */}\n            <div className=\"grid grid-cols-3 gap-3 mb-6\">\n              <Card className=\"p-3\">\n                <div className=\"text-2xl font-bold text-primary\">{data.stats.total_deals}</div>\n                <div className=\"text-xs text-muted-foreground\">Deals</div>\n              </Card>\n              <Card className=\"p-3\">\n                <div className=\"text-2xl font-bold text-blue-600\">{data.stats.total_referrals}</div>\n                <div className=\"text-xs text-muted-foreground\">Referrals</div>\n              </Card>\n              <Card className=\"p-3\">\n                <div className=\"text-2xl font-bold text-purple-600\">{data.stats.active_fee_plans}</div>\n                <div className=\"text-xs text-muted-foreground\">Fee Plans</div>\n              </Card>\n            </div>\n\n            <Tabs defaultValue=\"overview\" className=\"w-full\">\n              <TabsList className=\"grid w-full grid-cols-4\">\n                <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n                <TabsTrigger value=\"fees\">Fee Plans</TabsTrigger>\n                <TabsTrigger value=\"commissions\">Commissions</TabsTrigger>\n                <TabsTrigger value=\"activity\">Activity</TabsTrigger>\n              </TabsList>\n\n              {/* Overview Tab */}\n              <TabsContent value=\"overview\" className=\"mt-4 space-y-4\">\n                {/* Contact Info */}\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Contact Information</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-2 text-sm\">\n                    {data.partner.contact_name && (\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"h-4 w-4 text-muted-foreground\" />\n                        <span>{data.partner.contact_name}</span>\n                      </div>\n                    )}\n                    {data.partner.contact_email && (\n                      <div className=\"flex items-center gap-2\">\n                        <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                        <a href={`mailto:${data.partner.contact_email}`} className=\"text-primary hover:underline\">\n                          {data.partner.contact_email}\n                        </a>\n                      </div>\n                    )}\n                    {data.partner.contact_phone && (\n                      <div className=\"flex items-center gap-2\">\n                        <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                        <span>{data.partner.contact_phone}</span>\n                      </div>\n                    )}\n                    {data.partner.country && (\n                      <div className=\"flex items-center gap-2\">\n                        <Globe className=\"h-4 w-4 text-muted-foreground\" />\n                        <span>{data.partner.country}</span>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n\n                {/* Deals List */}\n                {data.deals.length > 0 && (\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Deals Involved</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-2\">\n                        {data.deals.map((deal) => (\n                          <div key={deal.id} className=\"flex items-center justify-between p-2 rounded-md bg-muted/50\">\n                            <div>\n                              <div className=\"font-medium text-sm\">{deal.name}</div>\n                              {deal.company_name && (\n                                <div className=\"text-xs text-muted-foreground\">{deal.company_name}</div>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Badge variant=\"outline\" className=\"text-xs capitalize\">\n                                {deal.status}\n                              </Badge>\n                              <Link href={`/versotech_main/opportunities/${deal.id}`}>\n                                <Button variant=\"ghost\" size=\"sm\">\n                                  <ExternalLink className=\"h-3.5 w-3.5\" />\n                                </Button>\n                              </Link>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n              </TabsContent>\n\n              {/* Fee Plans Tab */}\n              <TabsContent value=\"fees\" className=\"mt-4 space-y-4\">\n                {data.fee_plans.length === 0 ? (\n                  <Card>\n                    <CardContent className=\"py-8 text-center\">\n                      <FileText className=\"h-10 w-10 text-muted-foreground mx-auto mb-3\" />\n                      <p className=\"text-sm text-muted-foreground\">No fee plans assigned to this partner</p>\n                      <Link href=\"/versotech_main/fee-plans\">\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-3\">\n                          Create Fee Plan\n                        </Button>\n                      </Link>\n                    </CardContent>\n                  </Card>\n                ) : (\n                  data.fee_plans.map((plan) => (\n                    <Card key={plan.id}>\n                      <CardHeader className=\"pb-2\">\n                        <div className=\"flex items-center justify-between\">\n                          <CardTitle className=\"text-sm\">{plan.name}</CardTitle>\n                          <Badge variant={plan.is_active ? 'default' : 'secondary'}>\n                            {plan.is_active ? 'Active' : 'Inactive'}\n                          </Badge>\n                        </div>\n                        {plan.description && (\n                          <CardDescription className=\"text-xs\">{plan.description}</CardDescription>\n                        )}\n                      </CardHeader>\n                      <CardContent>\n                        {plan.components && plan.components.length > 0 ? (\n                          <div className=\"flex flex-wrap gap-2\">\n                            {plan.components.map((comp: any, idx: number) => (\n                              <Badge key={idx} variant=\"outline\" className=\"text-xs\">\n                                {comp.kind}: {comp.rate_bps ? `${(comp.rate_bps / 100).toFixed(2)}%` : comp.flat_amount ? `$${comp.flat_amount}` : 'N/A'}\n                              </Badge>\n                            ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-xs text-muted-foreground\">No fee components defined</p>\n                        )}\n                        {plan.effective_from && (\n                          <p className=\"text-xs text-muted-foreground mt-2\">\n                            Effective from {formatDate(plan.effective_from)}\n                            {plan.effective_until && ` to ${formatDate(plan.effective_until)}`}\n                          </p>\n                        )}\n                      </CardContent>\n                    </Card>\n                  ))\n                )}\n              </TabsContent>\n\n              {/* Commissions Tab */}\n              <TabsContent value=\"commissions\" className=\"mt-4 space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-sm font-medium\">Commission Summary</h3>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => setRecordCommissionOpen(true)}\n                  >\n                    <Plus className=\"h-4 w-4 mr-1\" />\n                    Record Commission\n                  </Button>\n                </div>\n\n                <PartnerCommissionSummary summary={data.commission_summary} />\n\n                <div className=\"flex justify-end\">\n                  <Link href=\"/versotech_main/lawyer-reconciliation\">\n                    <Button variant=\"outline\" size=\"sm\">\n                      <TrendingUp className=\"h-4 w-4 mr-2\" />\n                      View Reconciliation\n                    </Button>\n                  </Link>\n                </div>\n              </TabsContent>\n\n              {/* Activity Tab - Shows fee plan assignments */}\n              <TabsContent value=\"activity\" className=\"mt-4 space-y-4\">\n                {data.recent_referrals.length === 0 ? (\n                  <Card>\n                    <CardContent className=\"py-8 text-center\">\n                      <FileText className=\"h-10 w-10 text-muted-foreground mx-auto mb-3\" />\n                      <p className=\"text-sm text-muted-foreground\">No activity yet</p>\n                    </CardContent>\n                  </Card>\n                ) : (\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Recent Activity</CardTitle>\n                      <CardDescription className=\"text-xs\">Fee plan assignments to deals</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-3\">\n                        {data.recent_referrals.map((activity) => (\n                          <div key={activity.id} className=\"flex items-center justify-between p-2 rounded-md bg-muted/50\">\n                            <div>\n                              <div className=\"font-medium text-sm\">\n                                Assigned to {activity.deal?.name || 'Unknown Deal'}\n                              </div>\n                              <div className=\"text-xs text-muted-foreground\">\n                                {activity.deal?.company_name && `${activity.deal.company_name} • `}\n                                {activity.created_at && formatDate(activity.created_at)}\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n              </TabsContent>\n            </Tabs>\n\n            {/* Record Commission Dialog */}\n            <RecordCommissionDialog\n              open={recordCommissionOpen}\n              onOpenChange={setRecordCommissionOpen}\n              partnerId={data.partner.id}\n              partnerName={data.partner.name}\n              deals={data.deals}\n              feePlans={data.fee_plans}\n              onSuccess={fetchPartnerDetail}\n            />\n          </>\n        )}\n      </SheetContent>\n    </Sheet>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Loader2, Calculator } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n  currency: string\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  components: any[]\n}\n\ninterface RecordCommissionDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  partnerId: string\n  partnerName: string\n  deals: Deal[]\n  feePlans: FeePlan[]\n  onSuccess: () => void\n}\n\nconst BASIS_TYPES = [\n  { value: 'invested_amount', label: 'Invested Amount' },\n  { value: 'spread', label: 'Spread' },\n  { value: 'management_fee', label: 'Management Fee' },\n  { value: 'performance_fee', label: 'Performance Fee' },\n]\n\nexport function RecordCommissionDialog({\n  open,\n  onOpenChange,\n  partnerId,\n  partnerName,\n  deals,\n  feePlans,\n  onSuccess,\n}: RecordCommissionDialogProps) {\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Form state\n  const [dealId, setDealId] = useState<string>('')\n  const [feePlanId, setFeePlanId] = useState<string>('')\n  const [basisType, setBasisType] = useState<string>('invested_amount')\n  const [rateBps, setRateBps] = useState<string>('')\n  const [baseAmount, setBaseAmount] = useState<string>('')\n  const [accrualAmount, setAccrualAmount] = useState<string>('')\n  const [currency, setCurrency] = useState<string>('USD')\n  const [paymentDueDate, setPaymentDueDate] = useState<string>('')\n  const [notes, setNotes] = useState<string>('')\n\n  // Reset form when dialog opens\n  useEffect(() => {\n    if (open) {\n      setDealId('')\n      setFeePlanId('')\n      setBasisType('invested_amount')\n      setRateBps('')\n      setBaseAmount('')\n      setAccrualAmount('')\n      setCurrency('USD')\n      setPaymentDueDate('')\n      setNotes('')\n      setError(null)\n    }\n  }, [open])\n\n  // Auto-calculate accrual when rate and base amount change\n  useEffect(() => {\n    if (rateBps && baseAmount) {\n      const rate = parseFloat(rateBps) / 10000 // Convert bps to decimal\n      const base = parseFloat(baseAmount)\n      if (!isNaN(rate) && !isNaN(base)) {\n        const calculated = (base * rate).toFixed(2)\n        setAccrualAmount(calculated)\n      }\n    }\n  }, [rateBps, baseAmount])\n\n  // Update currency when deal changes\n  useEffect(() => {\n    if (dealId) {\n      const deal = deals.find(d => d.id === dealId)\n      if (deal?.currency) {\n        setCurrency(deal.currency)\n      }\n    }\n  }, [dealId, deals])\n\n  // Auto-fill rate from fee plan\n  useEffect(() => {\n    if (feePlanId) {\n      const plan = feePlans.find(p => p.id === feePlanId)\n      if (plan?.components && plan.components.length > 0) {\n        // Find first component with rate_bps\n        const comp = plan.components.find((c: any) => c.rate_bps)\n        if (comp?.rate_bps) {\n          setRateBps(comp.rate_bps.toString())\n        }\n      }\n    }\n  }, [feePlanId, feePlans])\n\n  const handleSubmit = async () => {\n    // Validation\n    if (!rateBps || parseFloat(rateBps) <= 0) {\n      setError('Rate is required and must be greater than 0')\n      return\n    }\n    if (!accrualAmount || parseFloat(accrualAmount) <= 0) {\n      setError('Commission amount is required and must be greater than 0')\n      return\n    }\n\n    setSaving(true)\n    setError(null)\n\n    try {\n      const payload = {\n        partner_id: partnerId,\n        deal_id: dealId || undefined,\n        fee_plan_id: feePlanId || undefined,\n        basis_type: basisType,\n        rate_bps: parseInt(rateBps, 10),\n        base_amount: baseAmount ? parseFloat(baseAmount) : undefined,\n        accrual_amount: parseFloat(accrualAmount),\n        currency,\n        payment_due_date: paymentDueDate || undefined,\n        notes: notes || undefined,\n      }\n\n      const response = await fetch('/api/arrangers/me/partner-commissions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to record commission')\n      }\n\n      onSuccess()\n      onOpenChange(false)\n    } catch (err) {\n      console.error('[RecordCommissionDialog] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to record commission')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const ratePercent = rateBps ? (parseFloat(rateBps) / 100).toFixed(2) : '0.00'\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Record Commission</DialogTitle>\n          <DialogDescription>\n            Record a commission owed to {partnerName}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded\">\n              {error}\n            </div>\n          )}\n\n          {/* Deal Selection */}\n          <div className=\"space-y-2\">\n            <Label>Deal (Optional)</Label>\n            <Select value={dealId} onValueChange={setDealId}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select deal...\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"\">No specific deal</SelectItem>\n                {deals.map((deal) => (\n                  <SelectItem key={deal.id} value={deal.id}>\n                    {deal.name} {deal.company_name && `(${deal.company_name})`}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Fee Plan Selection */}\n          {feePlans.length > 0 && (\n            <div className=\"space-y-2\">\n              <Label>Fee Plan (Optional)</Label>\n              <Select value={feePlanId} onValueChange={setFeePlanId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select fee plan...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">No fee plan</SelectItem>\n                  {feePlans.map((plan) => (\n                    <SelectItem key={plan.id} value={plan.id}>\n                      {plan.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n\n          {/* Basis Type */}\n          <div className=\"space-y-2\">\n            <Label>Commission Basis</Label>\n            <Select value={basisType} onValueChange={setBasisType}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {BASIS_TYPES.map((type) => (\n                  <SelectItem key={type.value} value={type.value}>\n                    {type.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Rate and Base Amount */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label>Rate (basis points) *</Label>\n              <Input\n                type=\"number\"\n                value={rateBps}\n                onChange={(e) => setRateBps(e.target.value)}\n                placeholder=\"e.g., 100 = 1%\"\n              />\n              {rateBps && (\n                <p className=\"text-xs text-muted-foreground\">= {ratePercent}%</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Base Amount ({currency})</Label>\n              <Input\n                type=\"number\"\n                value={baseAmount}\n                onChange={(e) => setBaseAmount(e.target.value)}\n                placeholder=\"e.g., 100000\"\n              />\n            </div>\n          </div>\n\n          {/* Commission Amount */}\n          <div className=\"space-y-2\">\n            <Label className=\"flex items-center gap-2\">\n              Commission Amount ({currency}) *\n              {rateBps && baseAmount && (\n                <span className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <Calculator className=\"h-3 w-3\" />\n                  Auto-calculated\n                </span>\n              )}\n            </Label>\n            <Input\n              type=\"number\"\n              value={accrualAmount}\n              onChange={(e) => setAccrualAmount(e.target.value)}\n              placeholder=\"Commission amount\"\n            />\n            {accrualAmount && (\n              <p className=\"text-sm font-medium text-primary\">\n                {formatCurrency(parseFloat(accrualAmount), currency)}\n              </p>\n            )}\n          </div>\n\n          {/* Payment Due Date */}\n          <div className=\"space-y-2\">\n            <Label>Payment Due Date (Optional)</Label>\n            <Input\n              type=\"date\"\n              value={paymentDueDate}\n              onChange={(e) => setPaymentDueDate(e.target.value)}\n            />\n          </div>\n\n          {/* Notes */}\n          <div className=\"space-y-2\">\n            <Label>Notes (Optional)</Label>\n            <Textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Any additional notes...\"\n              rows={2}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={saving}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={saving}>\n            {saving ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Recording...\n              </>\n            ) : (\n              'Record Commission'\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}