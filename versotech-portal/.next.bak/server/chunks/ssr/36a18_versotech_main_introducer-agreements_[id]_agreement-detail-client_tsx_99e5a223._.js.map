{"version":3,"sources":["../../../../../versotech-portal/src/app/%28main%29/versotech_main/introducer-agreements/%5Bid%5D/agreement-detail-client.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/introducer-agreements/%5Bid%5D/agreement-status-timeline.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n  AlertDialogTrigger,\r\n} from '@/components/ui/alert-dialog'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n  ArrowLeft,\r\n  FileSignature,\r\n  Calendar,\r\n  Percent,\r\n  Clock,\r\n  CheckCircle2,\r\n  XCircle,\r\n  Send,\r\n  PenLine,\r\n  AlertCircle,\r\n  Building2,\r\n  Mail,\r\n  Phone,\r\n  User,\r\n  FileText,\r\n  Loader2,\r\n  ExternalLink,\r\n  FileDown,\r\n  Download,\r\n  Eye,\r\n} from 'lucide-react'\r\nimport { toast } from 'sonner'\r\nimport { formatDate } from '@/lib/format'\r\nimport { cn } from '@/lib/utils'\r\nimport { AgreementStatusTimeline } from './agreement-status-timeline'\r\nimport { DocumentViewerFullscreen } from '@/components/documents/DocumentViewerFullscreen'\r\n\r\ntype Introducer = {\r\n  id: string\r\n  legal_name: string\r\n  contact_name: string | null\r\n  email: string | null\r\n  phone: string | null\r\n  status: string\r\n  logo_url: string | null\r\n}\r\n\r\ntype SignatureRequest = {\r\n  id: string\r\n  status: string\r\n  signer_name: string\r\n  signer_email: string\r\n  signature_timestamp: string | null\r\n  signed_pdf_path: string | null\r\n} | null\r\n\r\ntype Agreement = {\r\n  id: string\r\n  introducer_id: string\r\n  status: string\r\n  agreement_type: string | null\r\n  default_commission_bps: number | null\r\n  commission_cap_amount: number | null\r\n  effective_date: string | null\r\n  expiry_date: string | null\r\n  payment_terms: string | null\r\n  territory: string | null\r\n  exclusivity_level: string | null\r\n  signed_date: string | null\r\n  created_at: string\r\n  updated_at: string\r\n  introducer: Introducer\r\n  ceo_signature_request: SignatureRequest\r\n  introducer_signature_request: SignatureRequest\r\n  // New fields for PDF visibility\r\n  pdf_url: string | null\r\n  signed_pdf_url: string | null\r\n  reference_number: string | null\r\n  performance_fee_bps: number | null\r\n  hurdle_rate_bps: number | null\r\n}\r\n\r\ninterface AgreementDetailClientProps {\r\n  agreement: Agreement\r\n  isStaff: boolean\r\n  currentUserId: string\r\n}\r\n\r\nconst STATUS_STYLES: Record<string, { bg: string; text: string; icon: any }> = {\r\n  draft: { bg: 'bg-gray-500/10', text: 'text-gray-500', icon: FileText },\r\n  sent: { bg: 'bg-blue-500/10', text: 'text-blue-500', icon: Send },\r\n  pending_approval: { bg: 'bg-yellow-500/10', text: 'text-yellow-500', icon: Clock },\r\n  approved: { bg: 'bg-emerald-500/10', text: 'text-emerald-500', icon: CheckCircle2 },\r\n  pending_ceo_signature: { bg: 'bg-amber-500/10', text: 'text-amber-500', icon: PenLine },\r\n  pending_introducer_signature: { bg: 'bg-orange-500/10', text: 'text-orange-500', icon: PenLine },\r\n  active: { bg: 'bg-green-500/10', text: 'text-green-500', icon: CheckCircle2 },\r\n  rejected: { bg: 'bg-red-500/10', text: 'text-red-500', icon: XCircle },\r\n  expired: { bg: 'bg-gray-500/10', text: 'text-gray-500', icon: AlertCircle },\r\n  terminated: { bg: 'bg-red-500/10', text: 'text-red-500', icon: XCircle },\r\n}\r\n\r\nconst STATUS_LABELS: Record<string, string> = {\r\n  draft: 'Draft',\r\n  sent: 'Sent to Introducer',\r\n  pending_approval: 'Pending Approval',\r\n  approved: 'Approved - Awaiting Signatures',\r\n  pending_ceo_signature: 'Awaiting CEO Signature',\r\n  pending_introducer_signature: 'Awaiting Introducer Signature',\r\n  active: 'Active',\r\n  rejected: 'Rejected',\r\n  expired: 'Expired',\r\n  terminated: 'Terminated',\r\n}\r\n\r\nexport function AgreementDetailClient({\r\n  agreement,\r\n  isStaff,\r\n  currentUserId,\r\n}: AgreementDetailClientProps) {\r\n  const router = useRouter()\r\n  const [loading, setLoading] = useState<string | null>(null)\r\n  const [rejectReason, setRejectReason] = useState('')\r\n  const [downloadingPdf, setDownloadingPdf] = useState(false)\r\n\r\n  // PDF Preview state\r\n  const [isPreviewOpen, setIsPreviewOpen] = useState(false)\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null)\r\n  const [previewLoading, setPreviewLoading] = useState(false)\r\n  const [previewError, setPreviewError] = useState<string | null>(null)\r\n\r\n  // Handle PDF download - use signed PDF for active agreements\r\n  const handleDownloadPdf = async () => {\r\n    // For active agreements, prefer the signed PDF; otherwise use the original\r\n    const isActive = agreement.status === 'active'\r\n    const pdfPath = isActive && agreement.signed_pdf_url ? agreement.signed_pdf_url : agreement.pdf_url\r\n    // Signed PDFs are in 'signatures' bucket, originals in 'deal-documents'\r\n    const bucket = isActive && agreement.signed_pdf_url ? 'signatures' : 'deal-documents'\r\n\r\n    if (!pdfPath) return\r\n\r\n    setDownloadingPdf(true)\r\n    try {\r\n      const response = await fetch(`/api/storage/download?path=${encodeURIComponent(pdfPath)}&bucket=${bucket}`)\r\n      if (!response.ok) {\r\n        throw new Error('Failed to download file')\r\n      }\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.download = `${agreement.reference_number || 'Fee_Agreement'}.pdf`\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      window.URL.revokeObjectURL(url)\r\n      toast.success('PDF downloaded successfully')\r\n    } catch (error) {\r\n      console.error('Error downloading PDF:', error)\r\n      toast.error('Failed to download PDF')\r\n    } finally {\r\n      setDownloadingPdf(false)\r\n    }\r\n  }\r\n\r\n  // Handle PDF preview - opens fullscreen viewer\r\n  const handlePreviewPdf = async () => {\r\n    const isActive = agreement.status === 'active'\r\n    const pdfPath = isActive && agreement.signed_pdf_url ? agreement.signed_pdf_url : agreement.pdf_url\r\n    const bucket = isActive && agreement.signed_pdf_url ? 'signatures' : 'deal-documents'\r\n\r\n    if (!pdfPath) return\r\n\r\n    setPreviewLoading(true)\r\n    setPreviewError(null)\r\n    setIsPreviewOpen(true)\r\n\r\n    try {\r\n      // Get a signed URL for the PDF\r\n      const response = await fetch(`/api/storage/signed-url?path=${encodeURIComponent(pdfPath)}&bucket=${bucket}`)\r\n      if (!response.ok) {\r\n        throw new Error('Failed to get preview URL')\r\n      }\r\n      const data = await response.json()\r\n      setPreviewUrl(data.signedUrl)\r\n    } catch (error) {\r\n      console.error('Error loading PDF preview:', error)\r\n      setPreviewError('Failed to load PDF preview')\r\n      toast.error('Failed to load PDF preview')\r\n    } finally {\r\n      setPreviewLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleClosePreview = () => {\r\n    setIsPreviewOpen(false)\r\n    setTimeout(() => {\r\n      setPreviewUrl(null)\r\n      setPreviewError(null)\r\n    }, 300)\r\n  }\r\n\r\n  const statusStyle = STATUS_STYLES[agreement.status] || STATUS_STYLES.draft\r\n  const StatusIcon = statusStyle.icon\r\n\r\n  const formatCommission = (bps: number | null) => {\r\n    if (bps === null) return 'Not set'\r\n    return `${(bps / 100).toFixed(2)}%`\r\n  }\r\n\r\n  const handleSend = async () => {\r\n    setLoading('send')\r\n    try {\r\n      const response = await fetch(`/api/introducer-agreements/${agreement.id}/send`, {\r\n        method: 'POST',\r\n      })\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Failed to send agreement')\r\n      }\r\n      toast.success('Agreement sent to introducer for approval')\r\n      router.refresh()\r\n    } catch (error) {\r\n      toast.error(error instanceof Error ? error.message : 'Failed to send agreement')\r\n    } finally {\r\n      setLoading(null)\r\n    }\r\n  }\r\n\r\n  const handleApprove = async () => {\r\n    setLoading('approve')\r\n    try {\r\n      const response = await fetch(`/api/introducer-agreements/${agreement.id}/approve`, {\r\n        method: 'POST',\r\n      })\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Failed to approve agreement')\r\n      }\r\n      toast.success('Agreement approved! CEO will be notified to sign.')\r\n      router.refresh()\r\n    } catch (error) {\r\n      toast.error(error instanceof Error ? error.message : 'Failed to approve agreement')\r\n    } finally {\r\n      setLoading(null)\r\n    }\r\n  }\r\n\r\n  const handleReject = async () => {\r\n    setLoading('reject')\r\n    try {\r\n      const response = await fetch(`/api/introducer-agreements/${agreement.id}/reject`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ reason: rejectReason }),\r\n      })\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Failed to reject agreement')\r\n      }\r\n      toast.success('Agreement rejected')\r\n      router.refresh()\r\n    } catch (error) {\r\n      toast.error(error instanceof Error ? error.message : 'Failed to reject agreement')\r\n    } finally {\r\n      setLoading(null)\r\n      setRejectReason('')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6 max-w-5xl mx-auto\">\r\n      {/* Header */}\r\n      <div className=\"flex items-start justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            asChild\r\n            className=\"rounded-full\"\r\n          >\r\n            <Link href=\"/versotech_main/introducer-agreements\">\r\n              <ArrowLeft className=\"h-5 w-5\" />\r\n            </Link>\r\n          </Button>\r\n          <div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <h1 className=\"text-2xl font-bold text-foreground\">Fee Agreement</h1>\r\n              <Badge\r\n                variant=\"outline\"\r\n                className={cn('capitalize', statusStyle.bg, statusStyle.text)}\r\n              >\r\n                <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n                {STATUS_LABELS[agreement.status] || agreement.status}\r\n              </Badge>\r\n            </div>\r\n            <p className=\"text-muted-foreground mt-1\">\r\n              Agreement with {agreement.introducer?.legal_name}\r\n              {agreement.reference_number && (\r\n                <span className=\"ml-2 text-xs font-mono text-muted-foreground/70\">\r\n                  ({agreement.reference_number})\r\n                </span>\r\n              )}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Staff: Send draft to introducer */}\r\n          {isStaff && agreement.status === 'draft' && (\r\n            <Button\r\n              onClick={handleSend}\r\n              disabled={loading === 'send'}\r\n              className=\"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500\"\r\n            >\r\n              {loading === 'send' ? (\r\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n              ) : (\r\n                <Send className=\"h-4 w-4 mr-2\" />\r\n              )}\r\n              Send to Introducer\r\n            </Button>\r\n          )}\r\n\r\n          {/* Introducer: Approve or Reject */}\r\n          {!isStaff && agreement.status === 'pending_approval' && (\r\n            <>\r\n              <AlertDialog>\r\n                <AlertDialogTrigger asChild>\r\n                  <Button variant=\"outline\" className=\"border-red-500/30 text-red-500 hover:bg-red-500/10\">\r\n                    <XCircle className=\"h-4 w-4 mr-2\" />\r\n                    Reject\r\n                  </Button>\r\n                </AlertDialogTrigger>\r\n                <AlertDialogContent>\r\n                  <AlertDialogHeader>\r\n                    <AlertDialogTitle>Reject Agreement?</AlertDialogTitle>\r\n                    <AlertDialogDescription>\r\n                      Are you sure you want to reject this fee agreement? You can provide a reason below.\r\n                    </AlertDialogDescription>\r\n                  </AlertDialogHeader>\r\n                  <div className=\"py-4\">\r\n                    <Label htmlFor=\"reject-reason\">Reason (optional)</Label>\r\n                    <Textarea\r\n                      id=\"reject-reason\"\r\n                      placeholder=\"Enter reason for rejection...\"\r\n                      value={rejectReason}\r\n                      onChange={(e) => setRejectReason(e.target.value)}\r\n                      className=\"mt-2\"\r\n                    />\r\n                  </div>\r\n                  <AlertDialogFooter>\r\n                    <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                    <AlertDialogAction\r\n                      onClick={handleReject}\r\n                      className=\"bg-red-600 hover:bg-red-700\"\r\n                      disabled={loading === 'reject'}\r\n                    >\r\n                      {loading === 'reject' ? 'Rejecting...' : 'Reject Agreement'}\r\n                    </AlertDialogAction>\r\n                  </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n              </AlertDialog>\r\n\r\n              <Button\r\n                onClick={handleApprove}\r\n                disabled={loading === 'approve'}\r\n                className=\"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500\"\r\n              >\r\n                {loading === 'approve' ? (\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                ) : (\r\n                  <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                )}\r\n                Approve Agreement\r\n              </Button>\r\n            </>\r\n          )}\r\n\r\n          {/* Staff: Sign (if pending CEO signature) */}\r\n          {isStaff && agreement.status === 'approved' && (\r\n            <Button\r\n              asChild\r\n              className=\"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500\"\r\n            >\r\n              <Link href={`/versotech_main/versosign?agreement=${agreement.id}`}>\r\n                <PenLine className=\"h-4 w-4 mr-2\" />\r\n                Sign Agreement\r\n              </Link>\r\n            </Button>\r\n          )}\r\n\r\n          {/* Introducer: Sign (if pending introducer signature) */}\r\n          {!isStaff && agreement.status === 'pending_introducer_signature' && (\r\n            <Button\r\n              asChild\r\n              className=\"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500\"\r\n            >\r\n              <Link href={`/versotech_main/versosign?agreement=${agreement.id}`}>\r\n                <PenLine className=\"h-4 w-4 mr-2\" />\r\n                Sign Agreement\r\n              </Link>\r\n            </Button>\r\n          )}\r\n\r\n          {/* PDF Preview & Download - visible when any PDF exists */}\r\n          {(agreement.pdf_url || agreement.signed_pdf_url) && (\r\n            <>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handlePreviewPdf}\r\n                disabled={previewLoading}\r\n                className=\"border-emerald-500/30 text-emerald-600 hover:bg-emerald-500/10\"\r\n              >\r\n                {previewLoading ? (\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                ) : (\r\n                  <Eye className=\"h-4 w-4 mr-2\" />\r\n                )}\r\n                Preview\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleDownloadPdf}\r\n                disabled={downloadingPdf}\r\n                className=\"border-blue-500/30 text-blue-500 hover:bg-blue-500/10\"\r\n              >\r\n                {downloadingPdf ? (\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                ) : (\r\n                  <FileDown className=\"h-4 w-4 mr-2\" />\r\n                )}\r\n                {agreement.status === 'active' ? 'Download Signed Agreement' : 'Download PDF'}\r\n              </Button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Main Content */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          {/* Agreement Details */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <FileSignature className=\"h-5 w-5 text-amber-500\" />\r\n                Agreement Details\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-2 gap-6\">\r\n                <div>\r\n                  <Label className=\"text-muted-foreground text-sm\">Commission Rate</Label>\r\n                  <div className=\"flex items-center gap-2 mt-1\">\r\n                    <Percent className=\"h-4 w-4 text-muted-foreground\" />\r\n                    <span className=\"text-lg font-semibold\">\r\n                      {formatCommission(agreement.default_commission_bps)}\r\n                    </span>\r\n                    {agreement.default_commission_bps && (\r\n                      <span className=\"text-sm text-muted-foreground\">\r\n                        ({agreement.default_commission_bps} bps)\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <Label className=\"text-muted-foreground text-sm\">Agreement Type</Label>\r\n                  <div className=\"flex items-center gap-2 mt-1\">\r\n                    <FileSignature className=\"h-4 w-4 text-muted-foreground\" />\r\n                    <span className=\"font-medium capitalize\">\r\n                      {agreement.agreement_type?.replace(/_/g, ' ') || 'Not set'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <Label className=\"text-muted-foreground text-sm\">Effective Date</Label>\r\n                  <div className=\"flex items-center gap-2 mt-1\">\r\n                    <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n                    <span className=\"font-medium\">\r\n                      {agreement.effective_date\r\n                        ? formatDate(agreement.effective_date)\r\n                        : 'Not set'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <Label className=\"text-muted-foreground text-sm\">Expiry Date</Label>\r\n                  <div className=\"flex items-center gap-2 mt-1\">\r\n                    <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n                    <span className=\"font-medium\">\r\n                      {agreement.expiry_date\r\n                        ? formatDate(agreement.expiry_date)\r\n                        : 'No expiry'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {agreement.territory && (\r\n                  <div>\r\n                    <Label className=\"text-muted-foreground text-sm\">Territory</Label>\r\n                    <div className=\"flex items-center gap-2 mt-1\">\r\n                      <span className=\"font-medium\">{agreement.territory}</span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {agreement.payment_terms && (\r\n                  <div>\r\n                    <Label className=\"text-muted-foreground text-sm\">Payment Terms</Label>\r\n                    <div className=\"flex items-center gap-2 mt-1\">\r\n                      <span className=\"font-medium capitalize\">\r\n                        {agreement.payment_terms.replace(/_/g, ' ')}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Signed Status */}\r\n              {agreement.status === 'active' && agreement.signed_date && (\r\n                <>\r\n                  <Separator />\r\n                  <div className=\"flex items-center justify-between p-4 bg-green-500/10 rounded-lg border border-green-500/20\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"p-2 bg-green-500/20 rounded-lg\">\r\n                        <FileText className=\"h-5 w-5 text-green-500\" />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"font-medium text-green-700 dark:text-green-400\">Agreement Active</p>\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                          Fully signed on {formatDate(agreement.signed_date)}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Status Timeline */}\r\n          <AgreementStatusTimeline\r\n            status={agreement.status}\r\n            createdAt={agreement.created_at}\r\n            signedDate={agreement.signed_date}\r\n            ceoSignature={agreement.ceo_signature_request}\r\n            introducerSignature={agreement.introducer_signature_request}\r\n          />\r\n        </div>\r\n\r\n        {/* Sidebar */}\r\n        <div className=\"space-y-6\">\r\n          {/* Introducer Info */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Building2 className=\"h-5 w-5 text-blue-500\" />\r\n                Introducer\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {agreement.introducer?.logo_url && (\r\n                <div className=\"flex justify-center\">\r\n                  <img\r\n                    src={agreement.introducer.logo_url}\r\n                    alt={agreement.introducer.legal_name}\r\n                    className=\"h-16 w-auto object-contain\"\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <p className=\"font-semibold text-lg\">{agreement.introducer?.legal_name}</p>\r\n                <Badge\r\n                  variant=\"outline\"\r\n                  className={cn(\r\n                    'mt-1 capitalize',\r\n                    agreement.introducer?.status === 'active'\r\n                      ? 'bg-green-500/10 text-green-500'\r\n                      : 'bg-gray-500/10 text-gray-500'\r\n                  )}\r\n                >\r\n                  {agreement.introducer?.status}\r\n                </Badge>\r\n              </div>\r\n\r\n              <Separator />\r\n\r\n              {agreement.introducer?.contact_name && (\r\n                <div className=\"flex items-center gap-3 text-sm\">\r\n                  <User className=\"h-4 w-4 text-muted-foreground\" />\r\n                  <span>{agreement.introducer.contact_name}</span>\r\n                </div>\r\n              )}\r\n\r\n              {agreement.introducer?.email && (\r\n                <div className=\"flex items-center gap-3 text-sm\">\r\n                  <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n                  <a\r\n                    href={`mailto:${agreement.introducer.email}`}\r\n                    className=\"text-blue-500 hover:underline\"\r\n                  >\r\n                    {agreement.introducer.email}\r\n                  </a>\r\n                </div>\r\n              )}\r\n\r\n              {agreement.introducer?.phone && (\r\n                <div className=\"flex items-center gap-3 text-sm\">\r\n                  <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                  <span>{agreement.introducer.phone}</span>\r\n                </div>\r\n              )}\r\n\r\n              {isStaff && (\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  className=\"w-full mt-2\"\r\n                  asChild\r\n                >\r\n                  <Link href={`/versotech_main/introducers/${agreement.introducer_id}`}>\r\n                    View Introducer Profile\r\n                  </Link>\r\n                </Button>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* PDF Preview Modal */}\r\n      <DocumentViewerFullscreen\r\n        isOpen={isPreviewOpen}\r\n        document={{\r\n          id: agreement.id,\r\n          name: `${agreement.reference_number || 'Fee_Agreement'}.pdf`,\r\n          file_name: `${agreement.reference_number || 'Fee_Agreement'}.pdf`,\r\n          type: 'introducer_agreement',\r\n        }}\r\n        previewUrl={previewUrl}\r\n        isLoading={previewLoading}\r\n        error={previewError}\r\n        onClose={handleClosePreview}\r\n        onDownload={handleDownloadPdf}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  FileText,\r\n  Send,\r\n  Clock,\r\n  CheckCircle2,\r\n  PenLine,\r\n  XCircle,\r\n  User,\r\n  UserCheck,\r\n} from 'lucide-react'\r\nimport { formatDate } from '@/lib/format'\r\n\r\ntype SignatureRequest = {\r\n  id: string\r\n  status: string\r\n  signer_name: string\r\n  signer_email: string\r\n  signature_timestamp: string | null\r\n  signed_pdf_path: string | null\r\n} | null\r\n\r\ninterface AgreementStatusTimelineProps {\r\n  status: string\r\n  createdAt: string\r\n  signedDate: string | null\r\n  ceoSignature: SignatureRequest\r\n  introducerSignature: SignatureRequest\r\n}\r\n\r\ntype TimelineStep = {\r\n  id: string\r\n  label: string\r\n  description: string\r\n  icon: any\r\n  status: 'completed' | 'current' | 'upcoming' | 'failed'\r\n  timestamp?: string | null\r\n}\r\n\r\nexport function AgreementStatusTimeline({\r\n  status,\r\n  createdAt,\r\n  signedDate,\r\n  ceoSignature,\r\n  introducerSignature,\r\n}: AgreementStatusTimelineProps) {\r\n  const getTimelineSteps = (): TimelineStep[] => {\r\n    const steps: TimelineStep[] = [\r\n      {\r\n        id: 'created',\r\n        label: 'Agreement Created',\r\n        description: 'Draft agreement prepared',\r\n        icon: FileText,\r\n        status: 'completed',\r\n        timestamp: createdAt,\r\n      },\r\n      {\r\n        id: 'sent',\r\n        label: 'Sent to Introducer',\r\n        description: 'Agreement sent for review',\r\n        icon: Send,\r\n        status: ['draft'].includes(status) ? 'upcoming' : 'completed',\r\n        timestamp: null,\r\n      },\r\n      {\r\n        id: 'approval',\r\n        label: 'Introducer Review',\r\n        description: status === 'rejected' ? 'Agreement rejected' : 'Awaiting approval',\r\n        icon: status === 'rejected' ? XCircle : Clock,\r\n        status: getApprovalStatus(),\r\n        timestamp: null,\r\n      },\r\n      {\r\n        id: 'ceo_signature',\r\n        label: 'CEO Signature',\r\n        description: getCeoSignatureDescription(),\r\n        icon: PenLine,\r\n        status: getCeoSignatureStatus(),\r\n        timestamp: ceoSignature?.signature_timestamp,\r\n      },\r\n      {\r\n        id: 'introducer_signature',\r\n        label: 'Introducer Signature',\r\n        description: getIntroducerSignatureDescription(),\r\n        icon: PenLine,\r\n        status: getIntroducerSignatureStatus(),\r\n        timestamp: introducerSignature?.signature_timestamp,\r\n      },\r\n      {\r\n        id: 'active',\r\n        label: 'Agreement Active',\r\n        description: 'Fee agreement in effect',\r\n        icon: CheckCircle2,\r\n        status: status === 'active' ? 'completed' : 'upcoming',\r\n        timestamp: signedDate,\r\n      },\r\n    ]\r\n\r\n    return steps\r\n  }\r\n\r\n  const getApprovalStatus = (): 'completed' | 'current' | 'upcoming' | 'failed' => {\r\n    if (status === 'rejected') return 'failed'\r\n    if (['draft', 'sent'].includes(status)) return 'upcoming'\r\n    if (status === 'pending_approval') return 'current'\r\n    return 'completed'\r\n  }\r\n\r\n  const getCeoSignatureStatus = (): 'completed' | 'current' | 'upcoming' | 'failed' => {\r\n    if (['draft', 'sent', 'pending_approval', 'rejected'].includes(status)) return 'upcoming'\r\n    if (['approved', 'pending_ceo_signature'].includes(status)) return 'current'\r\n    if (ceoSignature?.status === 'signed') return 'completed'\r\n    return 'completed'\r\n  }\r\n\r\n  const getCeoSignatureDescription = (): string => {\r\n    if (ceoSignature?.status === 'signed') {\r\n      return `Signed by ${ceoSignature.signer_name}`\r\n    }\r\n    if (['approved', 'pending_ceo_signature'].includes(status)) {\r\n      return 'Awaiting CEO signature'\r\n    }\r\n    return 'CEO to sign first'\r\n  }\r\n\r\n  const getIntroducerSignatureStatus = (): 'completed' | 'current' | 'upcoming' | 'failed' => {\r\n    if (['draft', 'sent', 'pending_approval', 'approved', 'pending_ceo_signature', 'rejected'].includes(status)) {\r\n      return 'upcoming'\r\n    }\r\n    if (status === 'pending_introducer_signature') return 'current'\r\n    if (introducerSignature?.status === 'signed' || status === 'active') return 'completed'\r\n    return 'upcoming'\r\n  }\r\n\r\n  const getIntroducerSignatureDescription = (): string => {\r\n    if (introducerSignature?.status === 'signed') {\r\n      return `Signed by ${introducerSignature.signer_name}`\r\n    }\r\n    if (status === 'pending_introducer_signature') {\r\n      return 'Awaiting introducer signature'\r\n    }\r\n    return 'Introducer to countersign'\r\n  }\r\n\r\n  const steps = getTimelineSteps()\r\n\r\n  const getStepStyles = (step: TimelineStep) => {\r\n    switch (step.status) {\r\n      case 'completed':\r\n        return {\r\n          line: 'bg-gradient-to-b from-emerald-500 to-emerald-400',\r\n          circle: 'bg-gradient-to-br from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-500/25',\r\n          text: 'text-foreground',\r\n          glow: false,\r\n        }\r\n      case 'current':\r\n        return {\r\n          line: 'bg-gradient-to-b from-emerald-500 via-amber-400 to-amber-500',\r\n          circle: 'bg-gradient-to-br from-amber-400 to-orange-500 text-white ring-4 ring-amber-400/30 shadow-lg shadow-amber-500/40 animate-pulse',\r\n          text: 'text-foreground font-semibold',\r\n          glow: true,\r\n        }\r\n      case 'failed':\r\n        return {\r\n          line: 'bg-gradient-to-b from-rose-500 to-red-600',\r\n          circle: 'bg-gradient-to-br from-rose-500 to-red-600 text-white shadow-lg shadow-rose-500/25',\r\n          text: 'text-rose-600 dark:text-rose-400 font-medium',\r\n          glow: false,\r\n        }\r\n      case 'upcoming':\r\n      default:\r\n        return {\r\n          line: 'bg-muted/50',\r\n          circle: 'bg-muted/80 text-muted-foreground border-2 border-muted-foreground/20',\r\n          text: 'text-muted-foreground',\r\n          glow: false,\r\n        }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Clock className=\"h-5 w-5 text-blue-500\" />\r\n          Agreement Timeline\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"relative\">\r\n          {steps.map((step, index) => {\r\n            const styles = getStepStyles(step)\r\n            const Icon = step.icon\r\n            const isLast = index === steps.length - 1\r\n\r\n            return (\r\n              <div key={step.id} className=\"flex gap-4 pb-6 last:pb-0 group\">\r\n                {/* Timeline line and circle */}\r\n                <div className=\"flex flex-col items-center relative\">\r\n                  {/* Glow effect for current step */}\r\n                  {styles.glow && (\r\n                    <div className=\"absolute inset-0 w-10 h-10 rounded-full bg-amber-400/20 blur-xl animate-pulse\" />\r\n                  )}\r\n                  <div\r\n                    className={cn(\r\n                      'relative flex items-center justify-center w-10 h-10 rounded-full shrink-0 transition-all duration-300',\r\n                      styles.circle\r\n                    )}\r\n                  >\r\n                    <Icon className={cn('h-5 w-5', step.status === 'current' && 'drop-shadow-sm')} />\r\n                  </div>\r\n                  {!isLast && (\r\n                    <div\r\n                      className={cn(\r\n                        'w-0.5 flex-1 min-h-[28px] mt-2 rounded-full transition-all',\r\n                        styles.line\r\n                      )}\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className={cn(\r\n                  'flex-1 pt-1.5 transition-all',\r\n                  step.status === 'current' && 'pl-2 border-l-2 border-amber-400/50 -ml-2'\r\n                )}>\r\n                  <p className={cn('text-sm font-medium transition-colors', styles.text)}>\r\n                    {step.label}\r\n                  </p>\r\n                  <p className={cn(\r\n                    'text-xs mt-0.5',\r\n                    step.status === 'current' ? 'text-amber-600 dark:text-amber-400' : 'text-muted-foreground'\r\n                  )}>\r\n                    {step.description}\r\n                  </p>\r\n                  {step.timestamp && (\r\n                    <p className=\"text-xs text-muted-foreground mt-1 flex items-center gap-1\">\r\n                      <Clock className=\"h-3 w-3\" />\r\n                      {formatDate(step.timestamp)}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}