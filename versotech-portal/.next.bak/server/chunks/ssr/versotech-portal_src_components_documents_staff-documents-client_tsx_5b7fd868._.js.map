{"version":3,"sources":["../../../../../versotech-portal/src/components/documents/navigation/FolderCard.tsx","../../../../../versotech-portal/src/components/documents/rename-document-dialog.tsx","../../../../../versotech-portal/src/components/documents/navigation/FolderBreadcrumbs.tsx","../../../../../versotech-portal/src/components/documents/staff-documents-client.tsx","../../../../../versotech-portal/src/components/documents/navigation/FolderNavigator.tsx","../../../../../versotech-portal/src/components/documents/navigation/FolderTreeDrawer.tsx","../../../../../versotech-portal/src/components/documents/upload/UploadDestinationBanner.tsx","../../../../../versotech-portal/src/components/documents/document-upload-dialog.tsx","../../../../../versotech-portal/src/components/documents/move-document-dialog.tsx","../../../../../versotech-portal/src/components/documents/create-folder-dialog.tsx","../../../../../versotech-portal/src/components/documents/rename-folder-dialog.tsx","../../../../../versotech-portal/node_modules/lucide-react/src/icons/grid-3x3.ts","../../../../../versotech-portal/node_modules/lucide-react/src/icons/folder-tree.ts","../../../../../versotech-portal/src/lib/design-tokens.ts"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react'\r\nimport {\r\n  Folder,\r\n  FolderOpen,\r\n  MoreVertical,\r\n  Edit,\r\n  Trash2,\r\n  FolderPlus,\r\n  ChevronRight,\r\n} from 'lucide-react'\r\nimport { DocumentFolder } from '@/types/documents'\r\nimport { FOLDER_ICON_COLORS } from '@/lib/design-tokens'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\n\r\ninterface FolderCardProps {\r\n  folder: DocumentFolder\r\n  onNavigate: (folderId: string) => void\r\n  onRename?: (folderId: string) => void\r\n  onDelete?: (folderId: string) => void\r\n  onCreateSubfolder?: (parentId: string) => void\r\n  className?: string\r\n  variant?: 'default' | 'compact'\r\n}\r\n\r\n/**\r\n * FolderCard - Professional Folder Display Component\r\n *\r\n * Institutional-grade folder card with:\r\n * - Refined hover states\r\n * - Precise iconography\r\n * - Context menu actions\r\n * - Keyboard navigation support\r\n *\r\n * Design: Financial Terminal Elegance\r\n */\r\nexport function FolderCard({\r\n  folder,\r\n  onNavigate,\r\n  onRename,\r\n  onDelete,\r\n  onCreateSubfolder,\r\n  className,\r\n  variant = 'default',\r\n}: FolderCardProps) {\r\n  const [isHovered, setIsHovered] = React.useState(false)\r\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false)\r\n\r\n  // Get folder type styling\r\n  const colorScheme = FOLDER_ICON_COLORS[folder.folder_type] || FOLDER_ICON_COLORS.custom\r\n\r\n  // Handle keyboard navigation\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      e.preventDefault()\r\n      onNavigate(folder.id)\r\n    }\r\n  }\r\n\r\n  if (variant === 'compact') {\r\n    return (\r\n      <button\r\n        onClick={() => onNavigate(folder.id)}\r\n        onKeyDown={handleKeyDown}\r\n        className={cn(\r\n          'group flex items-center gap-3 w-full',\r\n          'px-4 py-3 rounded-md',\r\n          'hover:bg-white/10 transition-colors duration-150',\r\n          'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1',\r\n          className\r\n        )}\r\n      >\r\n        <Folder className=\"w-5 h-5 text-blue-400 flex-shrink-0\" strokeWidth={2} />\r\n        <span className=\"text-sm font-medium text-white flex-1 text-left break-words line-clamp-1\">\r\n          {folder.name}\r\n        </span>\r\n        <ChevronRight className=\"w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0\" />\r\n      </button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'group relative',\r\n        'bg-white/5 border border-white/10 rounded-lg',\r\n        'hover:bg-white/10 hover:border-white/20',\r\n        'transition-all duration-200',\r\n        'cursor-pointer',\r\n        className\r\n      )}\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      onClick={() => onNavigate(folder.id)}\r\n      onKeyDown={handleKeyDown}\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      aria-label={`Navigate to folder ${folder.name}`}\r\n    >\r\n      {/* Main Content */}\r\n      <div className=\"p-5\">\r\n        <div className=\"flex items-start gap-4\">\r\n          {/* Folder Icon */}\r\n          <div\r\n            className={cn(\r\n              'w-14 h-14 rounded-lg border flex items-center justify-center',\r\n              'flex-shrink-0 transition-all duration-200',\r\n              colorScheme.bg,\r\n              colorScheme.border,\r\n              colorScheme.hoverBg,\r\n              colorScheme.hoverBorder\r\n            )}\r\n          >\r\n            {isHovered ? (\r\n              <FolderOpen className={cn('w-6 h-6', colorScheme.icon)} strokeWidth={2} />\r\n            ) : (\r\n              <Folder className={cn('w-6 h-6', colorScheme.icon)} strokeWidth={2} />\r\n            )}\r\n          </div>\r\n\r\n          {/* Folder Info */}\r\n          <div className=\"flex-1 min-w-0 overflow-hidden\">\r\n            {/* Folder Name - Allow wrapping for long names */}\r\n            <h3 className=\"font-semibold text-white text-sm leading-tight mb-2 break-words line-clamp-2\">\r\n              {folder.name}\r\n            </h3>\r\n\r\n            {/* Metadata */}\r\n            <div className=\"flex items-center gap-3 text-sm text-gray-400\">\r\n              {folder.subfolder_count !== undefined && (\r\n                <span className=\"inline-flex items-center gap-1.5\">\r\n                  <Folder className=\"w-3.5 h-3.5\" strokeWidth={2} />\r\n                  <span>{folder.subfolder_count}</span>\r\n                </span>\r\n              )}\r\n              {folder.document_count !== undefined && (\r\n                <span className=\"inline-flex items-center gap-1.5\">\r\n                  <span className=\"w-3.5 h-3.5 inline-flex items-center justify-center\">\r\n                    <svg\r\n                      viewBox=\"0 0 16 16\"\r\n                      fill=\"none\"\r\n                      className=\"w-3.5 h-3.5 text-gray-400\"\r\n                      strokeWidth={2}\r\n                    >\r\n                      <path\r\n                        d=\"M9 1H3a1 1 0 00-1 1v12a1 1 0 001 1h10a1 1 0 001-1V6M9 1l5 5M9 1v5h5\"\r\n                        stroke=\"currentColor\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                      />\r\n                    </svg>\r\n                  </span>\r\n                  <span>{folder.document_count}</span>\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {/* Folder Type Badge (subtle) */}\r\n            {folder.folder_type === 'vehicle_root' && (\r\n              <div className=\"mt-2\">\r\n                <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-500/20 text-blue-200 border border-blue-400/30\">\r\n                  Vehicle Root\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Context Menu */}\r\n          {(onRename || onDelete || onCreateSubfolder) && (\r\n            <DropdownMenu open={isMenuOpen} onOpenChange={setIsMenuOpen}>\r\n              <DropdownMenuTrigger\r\n                className={cn(\r\n                  'opacity-0 group-hover:opacity-100 transition-opacity duration-150',\r\n                  'p-1 rounded hover:bg-white/10',\r\n                  'focus:outline-none focus:ring-2 focus:ring-blue-500',\r\n                  isMenuOpen && 'opacity-100'\r\n                )}\r\n                onClick={(e) => {\r\n                  e.stopPropagation() // Prevent folder navigation\r\n                }}\r\n              >\r\n                <MoreVertical className=\"w-4 h-4 text-gray-400\" strokeWidth={2} />\r\n                <span className=\"sr-only\">Folder actions</span>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent align=\"end\" className=\"w-48 bg-zinc-900 border-white/10\">\r\n                {onCreateSubfolder && (\r\n                  <DropdownMenuItem\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      onCreateSubfolder(folder.id)\r\n                    }}\r\n                    className=\"text-gray-200 focus:bg-white/10 focus:text-white\"\r\n                  >\r\n                    <FolderPlus className=\"w-4 h-4 mr-2 text-blue-400\" strokeWidth={2} />\r\n                    <span>New Subfolder</span>\r\n                  </DropdownMenuItem>\r\n                )}\r\n                {onRename && (\r\n                  <DropdownMenuItem\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      onRename(folder.id)\r\n                    }}\r\n                    className=\"text-gray-200 focus:bg-white/10 focus:text-white\"\r\n                  >\r\n                    <Edit className=\"w-4 h-4 mr-2 text-gray-400\" strokeWidth={2} />\r\n                    <span>Rename</span>\r\n                  </DropdownMenuItem>\r\n                )}\r\n                {onDelete && (\r\n                  <>\r\n                    <DropdownMenuSeparator className=\"bg-white/10\" />\r\n                    <DropdownMenuItem\r\n                      onClick={(e) => {\r\n                        e.stopPropagation()\r\n                        onDelete(folder.id)\r\n                      }}\r\n                      className=\"text-red-400 focus:text-red-300 focus:bg-red-500/20\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4 mr-2\" strokeWidth={2} />\r\n                      <span>Delete</span>\r\n                    </DropdownMenuItem>\r\n                  </>\r\n                )}\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Hover Indicator (subtle bottom border) */}\r\n      <div\r\n        className={cn(\r\n          'absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500',\r\n          'transform scale-x-0 group-hover:scale-x-100',\r\n          'transition-transform duration-200 origin-left',\r\n          'rounded-b-lg'\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Folder Card Skeleton (for loading states)\r\n */\r\nexport function FolderCardSkeleton({ className }: { className?: string }) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'bg-white/5 border border-white/10 rounded-lg p-4',\r\n        'animate-pulse',\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"flex items-start gap-3\">\r\n        {/* Icon skeleton */}\r\n        <div className=\"w-11 h-11 rounded-lg bg-white/10 flex-shrink-0\" />\r\n\r\n        {/* Content skeleton */}\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"h-4 bg-white/10 rounded w-3/4 mb-2\" />\r\n          <div className=\"h-3 bg-white/10 rounded w-1/2\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { toast } from 'sonner'\r\n\r\ninterface RenameDocumentDialogProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  documentId: string | null\r\n  currentName: string\r\n  onSuccess: () => void\r\n}\r\n\r\nexport function RenameDocumentDialog({\r\n  open,\r\n  onOpenChange,\r\n  documentId,\r\n  currentName,\r\n  onSuccess,\r\n}: RenameDocumentDialogProps) {\r\n  const [newName, setNewName] = useState(currentName)\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!documentId || !newName.trim()) {\r\n      toast.error('Document name is required')\r\n      return\r\n    }\r\n\r\n    if (newName.trim() === currentName) {\r\n      toast.info('Name unchanged')\r\n      onOpenChange(false)\r\n      return\r\n    }\r\n\r\n    setIsSubmitting(true)\r\n\r\n    try {\r\n      const response = await fetch(`/api/staff/documents/${documentId}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name: newName.trim() }),\r\n      })\r\n\r\n      if (response.ok) {\r\n        toast.success('Document renamed successfully')\r\n        onSuccess()\r\n        onOpenChange(false)\r\n        setNewName('')\r\n      } else {\r\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }))\r\n        const errorMsg = errorData.details || errorData.error || 'Unknown error'\r\n        toast.error(`Failed to rename document: ${errorMsg}`)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error renaming document:', error)\r\n      toast.error('Failed to rename document')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  // Reset name when dialog opens\r\n  const handleOpenChange = (open: boolean) => {\r\n    if (open) {\r\n      setNewName(currentName)\r\n    }\r\n    onOpenChange(open)\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleOpenChange}>\r\n      <DialogContent className=\"bg-zinc-900 border-white/10 text-white\">\r\n        <form onSubmit={handleSubmit}>\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-white\">Rename Document</DialogTitle>\r\n            <DialogDescription className=\"text-gray-400\">\r\n              Enter a new name for this document\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"py-4\">\r\n            <Label htmlFor=\"document-name\" className=\"text-white\">\r\n              Document Name\r\n            </Label>\r\n            <Input\r\n              id=\"document-name\"\r\n              value={newName}\r\n              onChange={(e) => setNewName(e.target.value)}\r\n              placeholder=\"Enter document name\"\r\n              className=\"mt-2 bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\r\n              disabled={isSubmitting}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => onOpenChange(false)}\r\n              disabled={isSubmitting}\r\n              className=\"border-white/20 text-white hover:bg-white/10\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isSubmitting || !newName.trim()}\r\n              className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n            >\r\n              {isSubmitting ? 'Renaming...' : 'Rename'}\r\n            </Button>\r\n          </DialogFooter>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport React, { Fragment } from 'react'\r\nimport { Home, ChevronRight, Folder } from 'lucide-react'\r\nimport { Breadcrumb, DocumentFolder } from '@/types/documents'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface FolderBreadcrumbsProps {\r\n  currentFolder: DocumentFolder | null\r\n  onNavigate: (folderId: string | null) => void\r\n  className?: string\r\n}\r\n\r\n/**\r\n * FolderBreadcrumbs - Institutional Navigation Component\r\n *\r\n * Professional breadcrumb navigation for folder hierarchy.\r\n * Features:\r\n * - Precise typography hierarchy\r\n * - Subtle hover states\r\n * - Responsive collapsing on mobile\r\n * - Keyboard accessible\r\n *\r\n * Design: Financial Terminal Elegance\r\n */\r\nexport function FolderBreadcrumbs({\r\n  currentFolder,\r\n  onNavigate,\r\n  className,\r\n}: FolderBreadcrumbsProps) {\r\n  // Parse folder path into breadcrumb segments\r\n  const breadcrumbs = React.useMemo((): Breadcrumb[] => {\r\n    if (!currentFolder) return []\r\n\r\n    const segments = currentFolder.path.split('/').filter(Boolean)\r\n    const crumbs: Breadcrumb[] = []\r\n\r\n    // Build breadcrumbs from path segments\r\n    let accumulatedPath = ''\r\n    segments.forEach((segment, index) => {\r\n      accumulatedPath += `/${segment}`\r\n      crumbs.push({\r\n        id: index === segments.length - 1 ? currentFolder.id : null, // Only last segment has ID\r\n        name: segment,\r\n        path: accumulatedPath,\r\n      })\r\n    })\r\n\r\n    return crumbs\r\n  }, [currentFolder])\r\n\r\n  // Responsive: Show only last 3 breadcrumbs on mobile\r\n  const displayBreadcrumbs = breadcrumbs.length > 3\r\n    ? [\r\n        ...breadcrumbs.slice(0, 1),\r\n        { id: '...', name: '...', path: '...' },\r\n        ...breadcrumbs.slice(-2),\r\n      ]\r\n    : breadcrumbs\r\n\r\n  return (\r\n    <nav\r\n      className={cn(\r\n        'flex items-center gap-2 px-6 py-3.5',\r\n        'bg-black/40 border-b border-white/10',\r\n        'transition-colors duration-200',\r\n        className\r\n      )}\r\n      aria-label=\"Folder navigation breadcrumbs\"\r\n    >\r\n      {/* Home Button */}\r\n      <button\r\n        onClick={() => onNavigate(null)}\r\n        className={cn(\r\n          'inline-flex items-center justify-center',\r\n          'w-8 h-8 rounded-md',\r\n          'transition-all duration-150',\r\n          !currentFolder\r\n            ? 'bg-blue-500/20 text-blue-400 border border-blue-400/30'\r\n            : 'text-gray-400 hover:bg-white/10 hover:text-white',\r\n          'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2'\r\n        )}\r\n        aria-label=\"Navigate to root\"\r\n        aria-current={!currentFolder ? 'page' : undefined}\r\n      >\r\n        <Home className=\"w-4 h-4\" strokeWidth={2} />\r\n      </button>\r\n\r\n      {/* Breadcrumb Trail */}\r\n      {displayBreadcrumbs.map((crumb, index) => {\r\n        const isLast = index === displayBreadcrumbs.length - 1\r\n        const isEllipsis = crumb.id === '...'\r\n\r\n        return (\r\n          <Fragment key={crumb.id || index}>\r\n            {/* Separator */}\r\n            <ChevronRight\r\n              className=\"w-4 h-4 text-gray-600 flex-shrink-0\"\r\n              strokeWidth={2}\r\n              aria-hidden=\"true\"\r\n            />\r\n\r\n            {/* Breadcrumb Segment */}\r\n            {isEllipsis ? (\r\n              // Ellipsis indicator\r\n              <span className=\"text-sm text-gray-500 px-2 select-none\">\r\n                {crumb.name}\r\n              </span>\r\n            ) : isLast ? (\r\n              // Current location - not clickable, emphasized\r\n              <div className=\"flex items-center gap-2 px-3 py-1.5 bg-white/5 border border-white/10 rounded-md\">\r\n                <Folder className=\"w-3.5 h-3.5 text-blue-400 flex-shrink-0\" strokeWidth={2} />\r\n                <span className=\"text-sm font-medium text-white truncate max-w-[200px]\">\r\n                  {crumb.name}\r\n                </span>\r\n              </div>\r\n            ) : (\r\n              // Previous locations - clickable\r\n              <button\r\n                onClick={() => {\r\n                  // Find the folder ID for this breadcrumb\r\n                  // For now, we navigate to root then manually to this level\r\n                  // In production, you'd store folder IDs in breadcrumbs\r\n                  onNavigate(crumb.id)\r\n                }}\r\n                className={cn(\r\n                  'text-sm text-gray-400 px-3 py-1.5 rounded-md',\r\n                  'hover:text-white hover:bg-white/10',\r\n                  'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\r\n                  'transition-all duration-150',\r\n                  'truncate max-w-[160px]'\r\n                )}\r\n                title={crumb.name}\r\n              >\r\n                {crumb.name}\r\n              </button>\r\n            )}\r\n          </Fragment>\r\n        )\r\n      })}\r\n\r\n      {/* Path Display (for reference, hidden on mobile) */}\r\n      {currentFolder && (\r\n        <div className=\"ml-auto hidden lg:flex items-center gap-2 text-xs text-gray-400 font-mono\">\r\n          <span className=\"opacity-60\">Path:</span>\r\n          <span className=\"px-2 py-1 bg-white/5 rounded border border-white/10 text-gray-300\">\r\n            {currentFolder.path}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </nav>\r\n  )\r\n}\r\n\r\n/**\r\n * Compact Breadcrumb variant (for mobile or compact layouts)\r\n */\r\nexport function FolderBreadcrumbsCompact({\r\n  currentFolder,\r\n  onNavigate,\r\n  className,\r\n}: FolderBreadcrumbsProps) {\r\n  return (\r\n    <nav\r\n      className={cn(\r\n        'flex items-center gap-2 px-4 py-2.5',\r\n        'bg-black/40 border-b border-white/10',\r\n        className\r\n      )}\r\n      aria-label=\"Folder navigation\"\r\n    >\r\n      {/* Back Button */}\r\n      <button\r\n        onClick={() => onNavigate(null)}\r\n        className=\"text-gray-400 hover:text-white transition-colors\"\r\n        aria-label=\"Back to root\"\r\n      >\r\n        <Home className=\"w-4 h-4\" />\r\n      </button>\r\n\r\n      <ChevronRight className=\"w-3.5 h-3.5 text-gray-600\" />\r\n\r\n      {/* Current Folder Name */}\r\n      <span className=\"text-sm font-medium text-white truncate\">\r\n        {currentFolder?.name || 'All Documents'}\r\n      </span>\r\n    </nav>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState, useEffect, useMemo, useCallback } from 'react'\r\nimport {\r\n  Upload,\r\n  FolderPlus,\r\n  RefreshCw,\r\n  Menu,\r\n  ArrowLeft,\r\n  Home\r\n} from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger\r\n} from '@/components/ui/dropdown-menu'\r\nimport { FolderBreadcrumbs } from './navigation/FolderBreadcrumbs'\r\nimport { FolderNavigator } from './navigation/FolderNavigator'\r\nimport { FolderTreeDrawer } from './navigation/FolderTreeDrawer'\r\nimport { ScrollArea } from '@/components/ui/scroll-area'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Search, X, Folder, FolderOpen, ChevronRight, ChevronDown } from 'lucide-react'\r\nimport { FOLDER_ICON_COLORS } from '@/lib/design-tokens'\r\nimport { cn } from '@/lib/utils'\r\nimport { UploadDestinationBanner } from './upload/UploadDestinationBanner'\r\nimport { DocumentUploadDialog } from './document-upload-dialog'\r\nimport { MoveDocumentDialog } from './move-document-dialog'\r\nimport { CreateFolderDialog } from './create-folder-dialog'\r\nimport { RenameFolderDialog } from './rename-folder-dialog'\r\nimport { RenameDocumentDialog } from './rename-document-dialog'\r\nimport { DocumentFolder } from '@/types/documents'\r\nimport { toast } from 'sonner'\r\nimport { useDocumentViewer } from '@/hooks/useDocumentViewer'\r\nimport { DocumentViewerFullscreen } from './DocumentViewerFullscreen'\r\n\r\ninterface Vehicle {\r\n  id: string\r\n  name: string\r\n  type: string\r\n}\r\n\r\ninterface StaffDocument {\r\n  id: string\r\n  name: string\r\n  type: string\r\n  status: string\r\n  file_size_bytes: number\r\n  is_published: boolean\r\n  created_at: string\r\n  mime_type?: string\r\n  folder?: {\r\n    id: string\r\n    name: string\r\n    path: string\r\n  }\r\n  vehicle?: {\r\n    id: string\r\n    name: string\r\n  }\r\n  created_by_profile?: {\r\n    display_name: string\r\n  }\r\n}\r\n\r\ninterface StaffDocumentsClientProps {\r\n  initialVehicles: Vehicle[]\r\n  userProfile: {\r\n    role: string\r\n    display_name: string\r\n    title?: string\r\n  }\r\n}\r\n\r\nexport function StaffDocumentsClient({ initialVehicles, userProfile }: StaffDocumentsClientProps) {\r\n  // Navigation State\r\n  const [currentFolderId, setCurrentFolderId] = useState<string | null>(null)\r\n  const [currentFolder, setCurrentFolder] = useState<DocumentFolder | null>(null)\r\n  const [navigationHistory, setNavigationHistory] = useState<string[]>([])\r\n  const [showTreeDrawer, setShowTreeDrawer] = useState(false)\r\n\r\n  // Data State\r\n  const [folders, setFolders] = useState<DocumentFolder[]>([])\r\n  const [documents, setDocuments] = useState<StaffDocument[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  // Dialog State\r\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false)\r\n  const [createFolderDialogOpen, setCreateFolderDialogOpen] = useState(false)\r\n  const [createFolderParentId, setCreateFolderParentId] = useState<string | null>(null)\r\n  const [moveDialogOpen, setMoveDialogOpen] = useState(false)\r\n  const [moveDialogDocId, setMoveDialogDocId] = useState<string | null>(null)\r\n  const [moveDialogDocName, setMoveDialogDocName] = useState<string>('')\r\n  const [moveDialogCurrentFolder, setMoveDialogCurrentFolder] = useState<string | null>(null)\r\n  const [renameFolderDialogOpen, setRenameFolderDialogOpen] = useState(false)\r\n  const [renameFolderId, setRenameFolderId] = useState<string | null>(null)\r\n  const [renameFolderName, setRenameFolderName] = useState<string>('')\r\n  const [renameDocumentDialogOpen, setRenameDocumentDialogOpen] = useState(false)\r\n  const [renameDocumentId, setRenameDocumentId] = useState<string | null>(null)\r\n  const [renameDocumentName, setRenameDocumentName] = useState<string>('')\r\n\r\n  // UI State\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [statusFilter, setStatusFilter] = useState<string>('all')\r\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid')\r\n  const [sortBy, setSortBy] = useState<'name' | 'date' | 'type'>('name')\r\n\r\n  // Tree Sidebar State\r\n  const [treeSearchQuery, setTreeSearchQuery] = useState('')\r\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(new Set())\r\n\r\n  // Document viewer hook\r\n  const {\r\n    isOpen: previewOpen,\r\n    document: previewDocument,\r\n    previewUrl,\r\n    isLoading: isLoadingPreview,\r\n    error: previewError,\r\n    openPreview,\r\n    closePreview,\r\n    downloadDocument: downloadFromPreview\r\n  } = useDocumentViewer()\r\n\r\n  // Navigation Functions (NEW)\r\n  const navigateToFolder = (folderId: string | null) => {\r\n    if (currentFolderId !== null && currentFolderId !== folderId) {\r\n      setNavigationHistory(prev => [...prev, currentFolderId])\r\n    }\r\n\r\n    setCurrentFolderId(folderId)\r\n\r\n    const folder = folders.find(f => f.id === folderId)\r\n    setCurrentFolder(folder || null)\r\n  }\r\n\r\n  const navigateBack = () => {\r\n    if (navigationHistory.length === 0) return\r\n\r\n    const previousId = navigationHistory[navigationHistory.length - 1]\r\n    setNavigationHistory(prev => prev.slice(0, -1))\r\n    setCurrentFolderId(previousId)\r\n\r\n    const folder = folders.find(f => f.id === previousId)\r\n    setCurrentFolder(folder || null)\r\n  }\r\n\r\n  // Get subfolders of current location (with search filtering)\r\n  const getSubfolders = useMemo((): DocumentFolder[] => {\r\n    let result = folders.filter(f => f.parent_folder_id === (currentFolderId || null))\r\n\r\n    // Filter folders by search query\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase()\r\n      result = result.filter(folder => {\r\n        const nameMatch = folder.name.toLowerCase().includes(query)\r\n        const pathMatch = folder.path.toLowerCase().includes(query)\r\n        return nameMatch || pathMatch\r\n      })\r\n    }\r\n\r\n    return result\r\n  }, [folders, currentFolderId, searchQuery])\r\n\r\n  // Get filtered documents\r\n  const filteredDocuments = useMemo(() => {\r\n    let result = documents\r\n\r\n    // Search filter - comprehensive search across all relevant fields\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase()\r\n      result = result.filter(doc => {\r\n        const nameMatch = doc.name.toLowerCase().includes(query)\r\n        const vehicleNameMatch = doc.vehicle?.name.toLowerCase().includes(query) || false\r\n        const folderNameMatch = doc.folder?.name.toLowerCase().includes(query) || false\r\n        const folderPathMatch = doc.folder?.path.toLowerCase().includes(query) || false\r\n        const typeMatch = doc.type.toLowerCase().includes(query)\r\n        const createdByMatch = doc.created_by_profile?.display_name.toLowerCase().includes(query) || false\r\n\r\n        return nameMatch || vehicleNameMatch || folderNameMatch || folderPathMatch || typeMatch || createdByMatch\r\n      })\r\n    }\r\n\r\n    // Sort\r\n    result = [...result].sort((a, b) => {\r\n      if (sortBy === 'name') {\r\n        return a.name.localeCompare(b.name)\r\n      } else if (sortBy === 'date') {\r\n        return new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n      } else if (sortBy === 'type') {\r\n        return a.type.localeCompare(b.type)\r\n      }\r\n      return 0\r\n    })\r\n\r\n    return result\r\n  }, [documents, searchQuery, sortBy])\r\n\r\n  // Build tree structure for sidebar\r\n  interface TreeNode {\r\n    folder: DocumentFolder\r\n    children: TreeNode[]\r\n  }\r\n\r\n  const buildFolderTree = useCallback((folders: DocumentFolder[]): TreeNode[] => {\r\n    const folderMap = new Map<string | null, TreeNode[]>()\r\n\r\n    folders.forEach((folder) => {\r\n      if (!folderMap.has(folder.parent_folder_id)) {\r\n        folderMap.set(folder.parent_folder_id, [])\r\n      }\r\n      folderMap.get(folder.parent_folder_id)!.push({\r\n        folder,\r\n        children: [],\r\n      })\r\n    })\r\n\r\n    function buildChildren(parentId: string | null): TreeNode[] {\r\n      const children = folderMap.get(parentId) || []\r\n      return children.map((node) => ({\r\n        ...node,\r\n        children: buildChildren(node.folder.id),\r\n      }))\r\n    }\r\n\r\n    return buildChildren(null)\r\n  }, [])\r\n\r\n  const folderTree = useMemo(() => {\r\n    return buildFolderTree(folders)\r\n  }, [folders, buildFolderTree])\r\n\r\n  // Filter tree based on sidebar search\r\n  const filterTreeBySearch = useCallback((tree: TreeNode[], query: string): TreeNode[] => {\r\n    return tree\r\n      .map((node) => {\r\n        const nameMatches = node.folder.name.toLowerCase().includes(query)\r\n        const pathMatches = node.folder.path.toLowerCase().includes(query)\r\n        const filteredChildren = filterTreeBySearch(node.children, query)\r\n\r\n        if (nameMatches || pathMatches || filteredChildren.length > 0) {\r\n          return {\r\n            ...node,\r\n            children: filteredChildren,\r\n          }\r\n        }\r\n        return null\r\n      })\r\n      .filter((node): node is TreeNode => node !== null)\r\n  }, [])\r\n\r\n  const filteredTree = useMemo(() => {\r\n    if (!treeSearchQuery.trim()) return folderTree\r\n    return filterTreeBySearch(folderTree, treeSearchQuery.toLowerCase())\r\n  }, [folderTree, treeSearchQuery, filterTreeBySearch])\r\n\r\n  // Toggle folder expansion in sidebar\r\n  const toggleSidebarFolder = (folderId: string) => {\r\n    setExpandedFolders((prev) => {\r\n      const next = new Set(prev)\r\n      if (next.has(folderId)) {\r\n        next.delete(folderId)\r\n      } else {\r\n        next.add(folderId)\r\n      }\r\n      return next\r\n    })\r\n  }\r\n\r\n  // Auto-expand current folder's ancestors\r\n  useEffect(() => {\r\n    if (currentFolderId && folders.length > 0) {\r\n      const getAncestorIds = (folder: DocumentFolder): string[] => {\r\n        const ancestors: string[] = []\r\n        let currentFolder: DocumentFolder | undefined = folder\r\n\r\n        while (currentFolder?.parent_folder_id) {\r\n          ancestors.push(currentFolder.parent_folder_id)\r\n          currentFolder = folders.find((f) => f.id === currentFolder!.parent_folder_id)\r\n        }\r\n        return ancestors\r\n      }\r\n\r\n      const currentFolder = folders.find((f) => f.id === currentFolderId)\r\n      if (currentFolder) {\r\n        const ancestorIds = getAncestorIds(currentFolder)\r\n        setExpandedFolders((prev) => new Set([...prev, ...ancestorIds]))\r\n      }\r\n    }\r\n  }, [currentFolderId, folders])\r\n\r\n  const loadFolders = useCallback(async () => {\r\n    try {\r\n      const response = await fetch('/api/staff/documents/folders?tree=true')\r\n\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        const foldersList = data.folders || []\r\n\r\n        // Flatten tree structure to flat array\r\n        interface FolderTreeNode extends DocumentFolder {\r\n          children?: FolderTreeNode[]\r\n        }\r\n\r\n        const flattenFolders = (nodes: FolderTreeNode[]): DocumentFolder[] => {\r\n          const result: DocumentFolder[] = []\r\n          nodes.forEach((node: FolderTreeNode) => {\r\n            result.push({\r\n              id: node.id,\r\n              name: node.name,\r\n              path: node.path,\r\n              parent_folder_id: node.parent_folder_id,\r\n              folder_type: node.folder_type,\r\n              vehicle_id: node.vehicle_id,\r\n              created_by: node.created_by,\r\n              created_at: node.created_at,\r\n              updated_at: node.updated_at,\r\n              subfolder_count: node.children?.length || 0,\r\n              document_count: node.document_count || 0,\r\n            })\r\n            if (node.children && node.children.length > 0) {\r\n              result.push(...flattenFolders(node.children))\r\n            }\r\n          })\r\n          return result\r\n        }\r\n\r\n        setFolders(flattenFolders(foldersList))\r\n      } else {\r\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }))\r\n        const errorMsg = errorData.details || errorData.error || 'Unknown error'\r\n        toast.error(`Failed to load folders: ${errorMsg}`)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading folders:', error)\r\n      toast.error('Failed to load folders')\r\n    }\r\n  }, [])\r\n\r\n  const getDescendantFolderIds = useCallback((folderId: string): string[] => {\r\n    const result = [folderId]\r\n\r\n    const findChildren = (parentId: string) => {\r\n      const children = folders.filter(f => f.parent_folder_id === parentId)\r\n      children.forEach(child => {\r\n        result.push(child.id)\r\n        findChildren(child.id)\r\n      })\r\n    }\r\n\r\n    findChildren(folderId)\r\n    return result\r\n  }, [folders])\r\n\r\n  const loadDocuments = useCallback(async () => {\r\n    try {\r\n      setLoading(true)\r\n      const params = new URLSearchParams()\r\n\r\n      // When searching, search globally across ALL folders\r\n      // When NOT searching, limit to current folder and descendants\r\n      if (!searchQuery && currentFolderId) {\r\n        // Get all descendant folder IDs for recursive display\r\n        const folderIds = getDescendantFolderIds(currentFolderId)\r\n        folderIds.forEach(id => params.append('folder_ids', id))\r\n        params.append('include_subfolders', 'true')\r\n      }\r\n      if (searchQuery) {\r\n        params.append('search', searchQuery)\r\n      }\r\n      if (statusFilter !== 'all') {\r\n        params.append('status', statusFilter)\r\n      }\r\n\r\n      const response = await fetch(`/api/staff/documents?${params.toString()}`)\r\n\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setDocuments(data.documents || [])\r\n      } else {\r\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }))\r\n        const errorMsg = errorData.details || errorData.error || 'Unknown error'\r\n        toast.error(`Failed to load documents: ${errorMsg}`)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading documents:', error)\r\n      toast.error('Failed to load documents')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [currentFolderId, searchQuery, statusFilter, getDescendantFolderIds])\r\n\r\n  // Load data on mount and when filters change\r\n  useEffect(() => {\r\n    loadFolders()\r\n  }, [loadFolders])\r\n\r\n  useEffect(() => {\r\n    loadDocuments()\r\n  }, [loadDocuments])\r\n\r\n  const oldGetDescendantFolderIds = (folderId: string): string[] => {\r\n    const result = [folderId]\r\n\r\n    const findChildren = (parentId: string) => {\r\n      const children = folders.filter(f => f.parent_folder_id === parentId)\r\n      children.forEach(child => {\r\n        result.push(child.id)\r\n        findChildren(child.id)\r\n      })\r\n    }\r\n\r\n    findChildren(folderId)\r\n    return result\r\n  }\r\n\r\n  const handleCreateFolder = (parentId: string | null = null) => {\r\n    setCreateFolderParentId(parentId || currentFolderId)\r\n    setCreateFolderDialogOpen(true)\r\n  }\r\n\r\n  const handleInitVehicleFolders = async (vehicleId: string) => {\r\n    try {\r\n      const vehicle = initialVehicles.find(v => v.id === vehicleId)\r\n      const response = await fetch('/api/staff/documents/init-vehicle-folders', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ vehicle_id: vehicleId })\r\n      })\r\n\r\n      if (response.ok) {\r\n        toast.success(`Default folders created for ${vehicle?.name || 'vehicle'}`)\r\n        loadFolders()\r\n      } else {\r\n        toast.error('Failed to create vehicle folders')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error initializing folders:', error)\r\n      toast.error('Failed to create vehicle folders')\r\n    }\r\n  }\r\n\r\n  const handleMoveDocument = (documentId: string, documentName: string, currentFolderId: string | null) => {\r\n    setMoveDialogDocId(documentId)\r\n    setMoveDialogDocName(documentName)\r\n    setMoveDialogCurrentFolder(currentFolderId)\r\n    setMoveDialogOpen(true)\r\n  }\r\n\r\n  const handleDeleteDocument = async (documentId: string) => {\r\n    if (!confirm('Are you sure you want to delete this document?')) return\r\n\r\n    try {\r\n      const response = await fetch(`/api/staff/documents/${documentId}`, {\r\n        method: 'DELETE'\r\n      })\r\n\r\n      if (response.ok) {\r\n        toast.success('Document deleted successfully')\r\n        loadDocuments()\r\n      } else {\r\n        toast.error('Failed to delete document')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting document:', error)\r\n      toast.error('Failed to delete document')\r\n    }\r\n  }\r\n\r\n  const handlePublishDocument = async (documentId: string) => {\r\n    try {\r\n      const response = await fetch(`/api/staff/documents/${documentId}/publish`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ immediate: true })\r\n      })\r\n\r\n      if (response.ok) {\r\n        toast.success('Document published successfully')\r\n        loadDocuments()\r\n      } else {\r\n        toast.error('Failed to publish document')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error publishing document:', error)\r\n      toast.error('Failed to publish document')\r\n    }\r\n  }\r\n\r\n  const handlePreview = async (doc: StaffDocument) => {\r\n    const fileName = doc.name || ''\r\n    const fileExt = fileName.split('.').pop()?.toLowerCase() || ''\r\n    const officeExtensions = ['docx', 'doc', 'xlsx', 'xls', 'pptx', 'ppt', 'odt', 'ods', 'odp']\r\n\r\n    if (officeExtensions.includes(fileExt)) {\r\n      toast.info('Office documents cannot be previewed. Use Download to view.')\r\n      handleDownload(doc.id)\r\n      return\r\n    }\r\n\r\n    await openPreview({\r\n      id: doc.id,\r\n      file_name: doc.name,\r\n      name: doc.name,\r\n      file_size_bytes: doc.file_size_bytes,\r\n      type: doc.type,\r\n      mime_type: doc.mime_type,\r\n    })\r\n  }\r\n\r\n  const handleDownload = async (documentId: string) => {\r\n    try {\r\n      const response = await fetch(`/api/documents/${documentId}/download`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        const downloadUrl = data.url || data.download_url\r\n        if (downloadUrl) {\r\n          window.open(downloadUrl, '_blank')\r\n          toast.success('Download started')\r\n        } else {\r\n          toast.error('No download URL in response')\r\n        }\r\n      } else {\r\n        toast.error('Failed to generate download link')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error downloading document:', error)\r\n      toast.error('Failed to download document')\r\n    }\r\n  }\r\n\r\n  const handleRenameFolder = (folderId: string) => {\r\n    const folder = folders.find(f => f.id === folderId)\r\n    if (!folder) return\r\n\r\n    setRenameFolderId(folderId)\r\n    setRenameFolderName(folder.name)\r\n    setRenameFolderDialogOpen(true)\r\n  }\r\n\r\n  const handleRenameDocument = (documentId: string) => {\r\n    const doc = documents.find(d => d.id === documentId)\r\n    if (!doc) return\r\n\r\n    setRenameDocumentId(documentId)\r\n    setRenameDocumentName(doc.name)\r\n    setRenameDocumentDialogOpen(true)\r\n  }\r\n\r\n  const handleDeleteFolder = async (folderId: string) => {\r\n    const folder = folders.find(f => f.id === folderId)\r\n    if (!folder) return\r\n\r\n    if (!confirm(`Are you sure you want to delete \"${folder.name}\"? This will also delete all documents and subfolders within it.`)) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/staff/documents/folders/${folderId}`, {\r\n        method: 'DELETE'\r\n      })\r\n\r\n      if (response.ok) {\r\n        toast.success('Folder deleted successfully')\r\n        loadFolders()\r\n        loadDocuments()\r\n      } else {\r\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }))\r\n        const errorMsg = errorData.details || errorData.error || 'Unknown error'\r\n        toast.error(`Failed to delete folder: ${errorMsg}`)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting folder:', error)\r\n      toast.error('Failed to delete folder')\r\n    }\r\n  }\r\n\r\n  // Check for vehicles without folders\r\n  const vehiclesWithoutFolders = initialVehicles.filter(vehicle => {\r\n    return !folders.some(folder =>\r\n      folder.vehicle_id === vehicle.id &&\r\n      folder.folder_type === 'vehicle_root'\r\n    )\r\n  })\r\n\r\n  // Recursive tree node renderer for sidebar\r\n  const renderSidebarTreeNode = (node: TreeNode, level: number = 0) => {\r\n    const isExpanded = expandedFolders.has(node.folder.id)\r\n    const hasChildren = node.children.length > 0\r\n    const isCurrent = currentFolderId === node.folder.id\r\n\r\n    return (\r\n      <div key={node.folder.id}>\r\n        <div\r\n          className={cn(\r\n            'flex items-center gap-1 rounded-md transition-colors',\r\n            isCurrent ? 'bg-primary/20 border border-primary' : 'hover:bg-muted border border-transparent'\r\n          )}\r\n          style={{ paddingLeft: `${level * 16 + 8}px` }}\r\n        >\r\n          {hasChildren ? (\r\n            <button\r\n              onClick={() => toggleSidebarFolder(node.folder.id)}\r\n              className=\"p-1 hover:bg-accent rounded transition-colors\"\r\n              aria-label={isExpanded ? 'Collapse folder' : 'Expand folder'}\r\n            >\r\n              {isExpanded ? (\r\n                <ChevronDown className=\"w-3.5 h-3.5 text-muted-foreground\" />\r\n              ) : (\r\n                <ChevronRight className=\"w-3.5 h-3.5 text-muted-foreground\" />\r\n              )}\r\n            </button>\r\n          ) : (\r\n            <div className=\"w-5\" />\r\n          )}\r\n          <button\r\n            onClick={() => navigateToFolder(node.folder.id)}\r\n            className=\"flex items-center gap-2 flex-1 py-2 pr-3 text-left text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 rounded\"\r\n          >\r\n            {isExpanded ? (\r\n              <FolderOpen\r\n                className={cn(\r\n                  'w-4 h-4 flex-shrink-0',\r\n                  node.folder.folder_type === 'vehicle_root' ? 'text-blue-500' :\r\n                  node.folder.folder_type === 'category' ? 'text-green-500' :\r\n                  'text-muted-foreground'\r\n                )}\r\n              />\r\n            ) : (\r\n              <Folder\r\n                className={cn(\r\n                  'w-4 h-4 flex-shrink-0',\r\n                  node.folder.folder_type === 'vehicle_root' ? 'text-blue-500' :\r\n                  node.folder.folder_type === 'category' ? 'text-green-500' :\r\n                  'text-muted-foreground'\r\n                )}\r\n              />\r\n            )}\r\n            <span\r\n              className={cn(\r\n                'truncate font-medium',\r\n                isCurrent ? 'text-foreground' : 'text-muted-foreground'\r\n              )}\r\n            >\r\n              {node.folder.name}\r\n            </span>\r\n            {node.folder.document_count !== undefined && node.folder.document_count > 0 && (\r\n              <span className=\"text-xs text-muted-foreground ml-auto\">({node.folder.document_count})</span>\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {isExpanded && hasChildren && (\r\n          <div className=\"mt-0.5\">\r\n            {node.children.map((child) => renderSidebarTreeNode(child, level + 1))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-background\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between px-6 py-4 bg-muted/50 border-b border-border\">\r\n        <div className=\"flex items-center gap-3\">\r\n          {/* Mobile hamburger toggle */}\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"icon\"\r\n            className=\"lg:hidden\"\r\n            onClick={() => setShowTreeDrawer(true)}\r\n          >\r\n            <Menu className=\"h-5 w-5\" />\r\n            <span className=\"sr-only\">Open folder tree</span>\r\n          </Button>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-foreground\">Document Management</h1>\r\n            <p className=\"text-muted-foreground mt-1 hidden sm:block\">\r\n              Manage documents with hierarchical folder structure\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => loadDocuments()}\r\n          >\r\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n            <span className=\"hidden sm:inline\">Refresh</span>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Grid Layout - Sidebar + Content */}\r\n      <div className=\"flex-1 grid grid-cols-1 lg:grid-cols-[280px_1fr] overflow-hidden\">\r\n        {/* Desktop Sidebar - Always Visible */}\r\n        <aside className=\"hidden lg:flex flex-col border-r border-border bg-muted/30\">\r\n          {/* Sidebar Header */}\r\n          <div className=\"px-4 py-3 border-b border-border\">\r\n            <h2 className=\"text-sm font-semibold text-foreground\">Folders</h2>\r\n          </div>\r\n\r\n          {/* Sidebar Search */}\r\n          <div className=\"px-3 py-3 border-b border-border\">\r\n            <div className=\"relative\">\r\n              <Search\r\n                className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\"\r\n              />\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"Search folders...\"\r\n                value={treeSearchQuery}\r\n                onChange={(e) => setTreeSearchQuery(e.target.value)}\r\n                className=\"pl-10 pr-10 h-9 text-sm\"\r\n              />\r\n              {treeSearchQuery && (\r\n                <button\r\n                  onClick={() => setTreeSearchQuery('')}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\r\n                >\r\n                  <X className=\"w-4 h-4\" />\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sidebar Tree */}\r\n          <ScrollArea className=\"flex-1\">\r\n            <div className=\"px-2 py-2\">\r\n              {/* Root Option */}\r\n              <button\r\n                onClick={() => navigateToFolder(null)}\r\n                className={cn(\r\n                  'flex items-center gap-2 w-full px-3 py-2 rounded-md text-sm font-medium transition-colors',\r\n                  currentFolderId === null\r\n                    ? 'bg-primary/20 text-primary border border-primary'\r\n                    : 'text-muted-foreground hover:bg-muted border border-transparent'\r\n                )}\r\n              >\r\n                <Home className=\"w-4 h-4 flex-shrink-0\" />\r\n                <span>All Documents</span>\r\n              </button>\r\n\r\n              {/* Tree Nodes */}\r\n              <div className=\"mt-2 space-y-0.5\">\r\n                {filteredTree.map((node) => renderSidebarTreeNode(node, 0))}\r\n              </div>\r\n\r\n              {/* Empty State */}\r\n              {filteredTree.length === 0 && (\r\n                <div className=\"text-center py-8 text-sm text-muted-foreground\">\r\n                  {treeSearchQuery ? 'No folders match your search' : 'No folders found'}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </ScrollArea>\r\n\r\n          {/* Initialize Vehicle Folders (if needed) */}\r\n          {vehiclesWithoutFolders.length > 0 && (\r\n            <div className=\"p-3 border-t border-border\">\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button variant=\"outline\" size=\"sm\" className=\"w-full border-amber-500/50 bg-amber-500/10 text-amber-600 dark:text-amber-400 hover:bg-amber-500/20\">\r\n                    <FolderPlus className=\"h-4 w-4 mr-2\" />\r\n                    Init Folders ({vehiclesWithoutFolders.length})\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent>\r\n                  {vehiclesWithoutFolders.map(vehicle => (\r\n                    <DropdownMenuItem\r\n                      key={vehicle.id}\r\n                      onClick={() => handleInitVehicleFolders(vehicle.id)}\r\n                    >\r\n                      {vehicle.name} ({vehicle.type})\r\n                    </DropdownMenuItem>\r\n                  ))}\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            </div>\r\n          )}\r\n        </aside>\r\n\r\n        {/* Main Content Area */}\r\n        <main className=\"flex flex-col overflow-hidden\">\r\n          {/* Breadcrumbs */}\r\n          {currentFolder && (\r\n            <FolderBreadcrumbs\r\n              currentFolder={currentFolder}\r\n              onNavigate={navigateToFolder}\r\n            />\r\n          )}\r\n\r\n          {/* Upload Destination Banner */}\r\n          {currentFolder && (\r\n            <UploadDestinationBanner currentFolder={currentFolder} />\r\n          )}\r\n\r\n          {/* Actions Bar */}\r\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-border bg-muted/50\">\r\n            <div className=\"flex items-center gap-3\">\r\n              {navigationHistory.length > 0 && (\r\n                <Button variant=\"ghost\" onClick={navigateBack}>\r\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n                  Back\r\n                </Button>\r\n              )}\r\n              {/* Mobile-only: Initialize Vehicle Folders */}\r\n              {vehiclesWithoutFolders.length > 0 && (\r\n                <div className=\"lg:hidden\">\r\n                  <DropdownMenu>\r\n                    <DropdownMenuTrigger asChild>\r\n                      <Button variant=\"outline\" size=\"sm\" className=\"border-amber-500/50 bg-amber-500/10 text-amber-600 dark:text-amber-400 hover:bg-amber-500/20\">\r\n                        <FolderPlus className=\"h-4 w-4 mr-2\" />\r\n                        Init ({vehiclesWithoutFolders.length})\r\n                      </Button>\r\n                    </DropdownMenuTrigger>\r\n                    <DropdownMenuContent>\r\n                      {vehiclesWithoutFolders.map(vehicle => (\r\n                        <DropdownMenuItem\r\n                          key={vehicle.id}\r\n                          onClick={() => handleInitVehicleFolders(vehicle.id)}\r\n                        >\r\n                          {vehicle.name} ({vehicle.type})\r\n                        </DropdownMenuItem>\r\n                      ))}\r\n                    </DropdownMenuContent>\r\n                  </DropdownMenu>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button onClick={() => setUploadDialogOpen(true)}>\r\n                <Upload className=\"w-4 h-4 mr-2\" />\r\n                <span className=\"hidden sm:inline\">Upload</span>\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={() => handleCreateFolder()}>\r\n                <FolderPlus className=\"w-4 h-4 mr-2\" />\r\n                <span className=\"hidden sm:inline\">New Folder</span>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Navigator (Folders + Documents) */}\r\n          <div className=\"flex-1 overflow-hidden\">\r\n            <FolderNavigator\r\n              currentFolderId={currentFolderId}\r\n              currentFolder={currentFolder}\r\n              subfolders={getSubfolders}\r\n              documents={filteredDocuments as any}\r\n              isLoading={loading}\r\n              viewMode={viewMode}\r\n              sortBy={sortBy}\r\n              searchQuery={searchQuery}\r\n              onNavigateToFolder={navigateToFolder}\r\n              onDocumentClick={(docId) => {\r\n                const doc = documents.find(d => d.id === docId)\r\n                if (doc) handlePreview(doc)\r\n              }}\r\n              onUploadClick={() => setUploadDialogOpen(true)}\r\n              onCreateFolderClick={() => handleCreateFolder()}\r\n              onRenameFolder={handleRenameFolder}\r\n              onDeleteFolder={handleDeleteFolder}\r\n              onCreateSubfolder={handleCreateFolder}\r\n              onRenameDocument={handleRenameDocument}\r\n              onDeleteDocument={handleDeleteDocument}\r\n              onViewModeChange={setViewMode}\r\n              onSortChange={setSortBy}\r\n              onSearchChange={setSearchQuery}\r\n            />\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Mobile Tree Drawer */}\r\n      <FolderTreeDrawer\r\n        open={showTreeDrawer}\r\n        onOpenChange={setShowTreeDrawer}\r\n        folders={folders}\r\n        currentFolderId={currentFolderId}\r\n        onNavigate={navigateToFolder}\r\n      />\r\n\r\n      {/* Upload Dialog */}\r\n      <DocumentUploadDialog\r\n        open={uploadDialogOpen}\r\n        onOpenChange={setUploadDialogOpen}\r\n        folderId={currentFolderId}\r\n        currentFolder={currentFolder}\r\n        vehicleId={currentFolder?.vehicle_id || undefined}\r\n        onSuccess={() => loadDocuments()}\r\n      />\r\n\r\n      {/* Move Document Dialog */}\r\n      <MoveDocumentDialog\r\n        open={moveDialogOpen}\r\n        onOpenChange={setMoveDialogOpen}\r\n        documentId={moveDialogDocId}\r\n        documentName={moveDialogDocName}\r\n        currentFolderId={moveDialogCurrentFolder}\r\n        onSuccess={() => loadDocuments()}\r\n      />\r\n\r\n      {/* Create Folder Dialog */}\r\n      <CreateFolderDialog\r\n        open={createFolderDialogOpen}\r\n        onOpenChange={setCreateFolderDialogOpen}\r\n        parentFolderId={createFolderParentId}\r\n        onSuccess={() => loadFolders()}\r\n      />\r\n\r\n      {/* Rename Folder Dialog */}\r\n      <RenameFolderDialog\r\n        open={renameFolderDialogOpen}\r\n        onOpenChange={setRenameFolderDialogOpen}\r\n        folderId={renameFolderId}\r\n        currentName={renameFolderName}\r\n        onSuccess={() => loadFolders()}\r\n      />\r\n\r\n      {/* Rename Document Dialog */}\r\n      <RenameDocumentDialog\r\n        open={renameDocumentDialogOpen}\r\n        onOpenChange={setRenameDocumentDialogOpen}\r\n        documentId={renameDocumentId}\r\n        currentName={renameDocumentName}\r\n        onSuccess={() => loadDocuments()}\r\n      />\r\n\r\n      {/* Document Preview Modal */}\r\n      <DocumentViewerFullscreen\r\n        isOpen={previewOpen}\r\n        document={previewDocument}\r\n        previewUrl={previewUrl}\r\n        isLoading={isLoadingPreview}\r\n        error={previewError}\r\n        onClose={closePreview}\r\n        onDownload={downloadFromPreview}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport React from 'react'\r\nimport {\r\n  FolderOpen,\r\n  FileText,\r\n  Upload,\r\n  FolderPlus,\r\n  Search,\r\n  Grid3x3,\r\n  List,\r\n  ArrowUpDown,\r\n} from 'lucide-react'\r\nimport { DocumentFolder, Document } from '@/types/documents'\r\nimport { FolderCard, FolderCardSkeleton } from './FolderCard'\r\nimport { DocumentCard } from '../document-card'\r\nimport { cn } from '@/lib/utils'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\n\r\ninterface FolderNavigatorProps {\r\n  currentFolderId: string | null\r\n  currentFolder: DocumentFolder | null\r\n  subfolders: DocumentFolder[]\r\n  documents: Document[]\r\n  isLoading?: boolean\r\n  viewMode?: 'grid' | 'list'\r\n  sortBy?: 'name' | 'date' | 'type'\r\n  onNavigateToFolder: (folderId: string) => void\r\n  onDocumentClick: (documentId: string) => void\r\n  onUploadClick: () => void\r\n  onCreateFolderClick: () => void\r\n  onRenameFolder?: (folderId: string) => void\r\n  onDeleteFolder?: (folderId: string) => void\r\n  onCreateSubfolder?: (parentId: string) => void\r\n  onRenameDocument?: (documentId: string) => void\r\n  onDeleteDocument?: (documentId: string) => void\r\n  onViewModeChange?: (mode: 'grid' | 'list') => void\r\n  onSortChange?: (sort: 'name' | 'date' | 'type') => void\r\n  onSearchChange?: (query: string) => void\r\n  searchQuery?: string\r\n  className?: string\r\n}\r\n\r\n/**\r\n * FolderNavigator - Main Folder/Document Grid Component\r\n *\r\n * Professional file explorer with:\r\n * - Grid/list view toggle\r\n * - Sorting and search\r\n * - Empty states\r\n * - Loading skeletons\r\n * - Keyboard navigation\r\n *\r\n * Design: Financial Terminal Elegance\r\n */\r\nexport function FolderNavigator({\r\n  currentFolderId,\r\n  currentFolder,\r\n  subfolders,\r\n  documents,\r\n  isLoading = false,\r\n  viewMode = 'grid',\r\n  sortBy = 'name',\r\n  onNavigateToFolder,\r\n  onDocumentClick,\r\n  onUploadClick,\r\n  onCreateFolderClick,\r\n  onRenameFolder,\r\n  onDeleteFolder,\r\n  onCreateSubfolder,\r\n  onRenameDocument,\r\n  onDeleteDocument,\r\n  onViewModeChange,\r\n  onSortChange,\r\n  onSearchChange,\r\n  searchQuery = '',\r\n  className,\r\n}: FolderNavigatorProps) {\r\n  const isEmpty = !isLoading && subfolders.length === 0 && documents.length === 0\r\n  const hasContent = subfolders.length > 0 || documents.length > 0\r\n\r\n  return (\r\n    <div className={cn('flex flex-col h-full bg-[#0a0a0a]', className)}>\r\n      {/* Toolbar - Always visible for search access */}\r\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 px-6 py-4 bg-black/40 border-b border-white/10\">\r\n        {/* Left: Search */}\r\n        <div className=\"relative w-full sm:w-auto sm:min-w-[300px]\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" strokeWidth={2} />\r\n          <Input\r\n            type=\"text\"\r\n            placeholder=\"Search folders and documents...\"\r\n            value={searchQuery}\r\n            onChange={(e) => onSearchChange?.(e.target.value)}\r\n            className=\"pl-10 h-9 text-sm bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-blue-500 focus:ring-blue-500\"\r\n          />\r\n        </div>\r\n\r\n        {/* Right: Controls */}\r\n        <div className=\"flex items-center gap-2 w-full sm:w-auto\">\r\n          {/* Sort */}\r\n          <Select value={sortBy} onValueChange={(value) => onSortChange?.(value as any)}>\r\n            <SelectTrigger className=\"w-[140px] h-9 text-sm bg-white/5 border-white/10 text-white\">\r\n              <ArrowUpDown className=\"w-3.5 h-3.5 mr-2 text-gray-400\" strokeWidth={2} />\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent className=\"bg-zinc-900 border-white/10 text-white\">\r\n              <SelectItem value=\"name\" className=\"text-white focus:bg-white/10 focus:text-white\">Name</SelectItem>\r\n              <SelectItem value=\"date\" className=\"text-white focus:bg-white/10 focus:text-white\">Date Modified</SelectItem>\r\n              <SelectItem value=\"type\" className=\"text-white focus:bg-white/10 focus:text-white\">Type</SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          {/* View Mode Toggle */}\r\n          {onViewModeChange && (\r\n            <div className=\"flex items-center border border-white/10 rounded-md overflow-hidden\">\r\n              <button\r\n                onClick={() => onViewModeChange('grid')}\r\n                className={cn(\r\n                  'p-1.5 transition-colors',\r\n                  viewMode === 'grid'\r\n                    ? 'bg-blue-500/20 text-blue-400'\r\n                    : 'text-gray-400 hover:bg-white/10'\r\n                )}\r\n                aria-label=\"Grid view\"\r\n              >\r\n                <Grid3x3 className=\"w-4 h-4\" strokeWidth={2} />\r\n              </button>\r\n              <div className=\"w-px h-6 bg-white/10\" />\r\n              <button\r\n                onClick={() => onViewModeChange('list')}\r\n                className={cn(\r\n                  'p-1.5 transition-colors',\r\n                  viewMode === 'list'\r\n                    ? 'bg-blue-500/20 text-blue-400'\r\n                    : 'text-gray-400 hover:bg-white/10'\r\n                )}\r\n                aria-label=\"List view\"\r\n              >\r\n                <List className=\"w-4 h-4\" strokeWidth={2} />\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content Area */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        {/* Loading State */}\r\n        {isLoading && (\r\n          <div className=\"p-6\">\r\n            <div\r\n              className={cn(\r\n                'grid gap-4',\r\n                viewMode === 'grid'\r\n                  ? 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4'\r\n                  : 'grid-cols-1'\r\n              )}\r\n            >\r\n              {Array.from({ length: 8 }).map((_, i) => (\r\n                <FolderCardSkeleton key={i} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Empty State */}\r\n        {isEmpty && !isLoading && <EmptyState onUploadClick={onUploadClick} onCreateFolderClick={onCreateFolderClick} />}\r\n\r\n        {/* Content Grid */}\r\n        {!isEmpty && !isLoading && (\r\n          <div className=\"p-6 space-y-8\">\r\n            {/* Folders Section */}\r\n            {subfolders.length > 0 && (\r\n              <div>\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                  <h2 className=\"text-sm font-semibold text-gray-400 uppercase tracking-wider\">\r\n                    Folders\r\n                  </h2>\r\n                  <div className=\"flex-1 h-px bg-white/10\" />\r\n                  <span className=\"text-xs text-gray-500\">{subfolders.length}</span>\r\n                </div>\r\n                <div\r\n                  className={cn(\r\n                    'grid gap-4',\r\n                    viewMode === 'grid'\r\n                      ? 'grid-cols-1 md:grid-cols-2 xl:grid-cols-4'\r\n                      : 'grid-cols-1 max-w-4xl'\r\n                  )}\r\n                >\r\n                  {subfolders.map((folder) => (\r\n                    <FolderCard\r\n                      key={folder.id}\r\n                      folder={folder}\r\n                      onNavigate={onNavigateToFolder}\r\n                      onRename={onRenameFolder}\r\n                      onDelete={onDeleteFolder}\r\n                      onCreateSubfolder={onCreateSubfolder}\r\n                      variant={viewMode === 'list' ? 'compact' : 'default'}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Documents Section */}\r\n            {documents.length > 0 && (\r\n              <div>\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                  <h2 className=\"text-sm font-semibold text-gray-400 uppercase tracking-wider\">\r\n                    Documents\r\n                  </h2>\r\n                  <div className=\"flex-1 h-px bg-white/10\" />\r\n                  <span className=\"text-xs text-gray-500\">{documents.length}</span>\r\n                </div>\r\n                <div\r\n                  className={cn(\r\n                    'grid gap-4',\r\n                    viewMode === 'grid'\r\n                      ? 'grid-cols-1 md:grid-cols-2 xl:grid-cols-4'\r\n                      : 'grid-cols-1 max-w-4xl'\r\n                  )}\r\n                >\r\n                  {documents.map((document) => (\r\n                    <DocumentCard\r\n                      key={document.id}\r\n                      document={document}\r\n                      onPreview={() => onDocumentClick(document.id)}\r\n                      onRename={onRenameDocument}\r\n                      onDelete={onDeleteDocument}\r\n                      variant={viewMode === 'list' ? 'compact' : 'default'}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Empty State Component (Professional, Actionable)\r\n */\r\nfunction EmptyState({\r\n  onUploadClick,\r\n  onCreateFolderClick,\r\n}: {\r\n  onUploadClick: () => void\r\n  onCreateFolderClick: () => void\r\n}) {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n      {/* Icon */}\r\n      <div className=\"w-20 h-20 rounded-full bg-white/5 flex items-center justify-center mb-6 border border-white/10\">\r\n        <FolderOpen className=\"w-10 h-10 text-gray-400\" strokeWidth={1.5} />\r\n      </div>\r\n\r\n      {/* Heading */}\r\n      <h3 className=\"text-lg font-semibold text-white mb-2\">\r\n        This folder is empty\r\n      </h3>\r\n\r\n      {/* Description */}\r\n      <p className=\"text-sm text-gray-400 mb-8 text-center max-w-md leading-relaxed\">\r\n        Get started by uploading documents or creating subfolders to organize your files.\r\n      </p>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex flex-col sm:flex-row gap-3\">\r\n        <Button onClick={onUploadClick} size=\"default\" className=\"min-w-[160px] bg-blue-600 hover:bg-blue-700 text-white\">\r\n          <Upload className=\"w-4 h-4 mr-2\" strokeWidth={2} />\r\n          Upload Documents\r\n        </Button>\r\n        <Button onClick={onCreateFolderClick} variant=\"outline\" size=\"default\" className=\"min-w-[160px] border-white/20 text-white hover:bg-white/10\">\r\n          <FolderPlus className=\"w-4 h-4 mr-2\" strokeWidth={2} />\r\n          New Folder\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n","'use client'\r\n\r\nimport React, { useState, useMemo } from 'react'\r\nimport {\r\n  Folder,\r\n  FolderOpen,\r\n  ChevronRight,\r\n  ChevronDown,\r\n  Search,\r\n  X,\r\n} from 'lucide-react'\r\nimport { DocumentFolder } from '@/types/documents'\r\nimport { FOLDER_ICON_COLORS } from '@/lib/design-tokens'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetHeader,\r\n  SheetTitle,\r\n  SheetDescription,\r\n} from '@/components/ui/sheet'\r\nimport { Input } from '@/components/ui/input'\r\nimport { ScrollArea } from '@/components/ui/scroll-area'\r\n\r\ninterface FolderTreeDrawerProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  folders: DocumentFolder[]\r\n  currentFolderId: string | null\r\n  onNavigate: (folderId: string | null) => void\r\n}\r\n\r\n/**\r\n * FolderTreeDrawer - Collapsible Sidebar with Full Tree\r\n *\r\n * Professional drawer component for power users who want\r\n * quick access to any folder in the hierarchy.\r\n *\r\n * Features:\r\n * - Searchable folder tree\r\n * - Expand/collapse folders\r\n * - Highlights current folder\r\n * - Keyboard shortcut support\r\n *\r\n * Design: Financial Terminal Elegance\r\n */\r\nexport function FolderTreeDrawer({\r\n  open,\r\n  onOpenChange,\r\n  folders,\r\n  currentFolderId,\r\n  onNavigate,\r\n}: FolderTreeDrawerProps) {\r\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(new Set())\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n\r\n  // Build tree structure from flat folder list\r\n  const folderTree = useMemo(() => {\r\n    return buildFolderTree(folders)\r\n  }, [folders])\r\n\r\n  // Filter tree based on search\r\n  const filteredTree = useMemo(() => {\r\n    if (!searchQuery.trim()) return folderTree\r\n    return filterTreeBySearch(folderTree, searchQuery.toLowerCase())\r\n  }, [folderTree, searchQuery])\r\n\r\n  // Toggle folder expansion\r\n  const toggleFolder = (folderId: string) => {\r\n    const newExpanded = new Set(expandedFolders)\r\n    if (newExpanded.has(folderId)) {\r\n      newExpanded.delete(folderId)\r\n    } else {\r\n      newExpanded.add(folderId)\r\n    }\r\n    setExpandedFolders(newExpanded)\r\n  }\r\n\r\n  // Handle folder navigation\r\n  const handleNavigate = (folderId: string | null) => {\r\n    onNavigate(folderId)\r\n    onOpenChange(false) // Close drawer after navigation\r\n  }\r\n\r\n  // Auto-expand current folder's ancestors\r\n  React.useEffect(() => {\r\n    if (currentFolderId && folders.length > 0) {\r\n      const currentFolder = folders.find(f => f.id === currentFolderId)\r\n      if (currentFolder) {\r\n        const ancestorIds = getAncestorIds(currentFolder, folders)\r\n        setExpandedFolders(prev => new Set([...prev, ...ancestorIds]))\r\n      }\r\n    }\r\n  }, [currentFolderId, folders])\r\n\r\n  return (\r\n    <Sheet open={open} onOpenChange={onOpenChange}>\r\n      <SheetContent side=\"left\" className=\"w-[400px] sm:w-[500px] p-0 bg-background border-border\">\r\n        {/* Header */}\r\n        <SheetHeader className=\"px-6 py-4 border-b border-border\">\r\n          <SheetTitle className=\"text-foreground\">Browse All Folders</SheetTitle>\r\n          <SheetDescription className=\"text-muted-foreground\">\r\n            Quick access to any folder in the hierarchy\r\n          </SheetDescription>\r\n        </SheetHeader>\r\n\r\n        {/* Search */}\r\n        <div className=\"px-6 py-4 border-b border-border bg-muted/50\">\r\n          <div className=\"relative\">\r\n            <Search\r\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\"\r\n              strokeWidth={2}\r\n            />\r\n            <Input\r\n              type=\"text\"\r\n              placeholder=\"Search folders...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"pl-10 pr-10 h-9 text-sm\"\r\n            />\r\n            {searchQuery && (\r\n              <button\r\n                onClick={() => setSearchQuery('')}\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\r\n              >\r\n                <X className=\"w-4 h-4\" strokeWidth={2} />\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Folder Tree */}\r\n        <ScrollArea className=\"flex-1 h-[calc(100vh-180px)]\">\r\n          <div className=\"px-4 py-4\">\r\n            {/* Root Option */}\r\n            <button\r\n              onClick={() => handleNavigate(null)}\r\n              className={cn(\r\n                'flex items-center gap-2 w-full px-3 py-2 rounded-md text-sm font-medium transition-colors',\r\n                currentFolderId === null\r\n                  ? 'bg-primary/20 text-primary border border-primary'\r\n                  : 'text-muted-foreground hover:bg-muted border border-transparent'\r\n              )}\r\n            >\r\n              <Folder className=\"w-4 h-4 flex-shrink-0\" strokeWidth={2} />\r\n              <span>All Documents (Root)</span>\r\n            </button>\r\n\r\n            {/* Tree Nodes */}\r\n            <div className=\"mt-2 space-y-0.5\">\r\n              {filteredTree.map((node) => (\r\n                <FolderTreeNode\r\n                  key={node.folder.id}\r\n                  node={node}\r\n                  level={0}\r\n                  currentFolderId={currentFolderId}\r\n                  expandedFolders={expandedFolders}\r\n                  onToggle={toggleFolder}\r\n                  onNavigate={handleNavigate}\r\n                />\r\n              ))}\r\n            </div>\r\n\r\n            {/* Empty State */}\r\n            {filteredTree.length === 0 && (\r\n              <div className=\"text-center py-8 text-sm text-muted-foreground\">\r\n                {searchQuery ? 'No folders match your search' : 'No folders found'}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </ScrollArea>\r\n\r\n        {/* Footer */}\r\n        <div className=\"px-6 py-3 border-t border-border bg-muted/50\">\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            <kbd className=\"px-1.5 py-0.5 bg-muted border border-border rounded text-xs font-mono text-foreground\">\r\n              Cmd+K\r\n            </kbd>{' '}\r\n            to open this drawer\r\n          </p>\r\n        </div>\r\n      </SheetContent>\r\n    </Sheet>\r\n  )\r\n}\r\n\r\n/**\r\n * Tree Node Component (Recursive)\r\n */\r\ninterface TreeNode {\r\n  folder: DocumentFolder\r\n  children: TreeNode[]\r\n}\r\n\r\ninterface FolderTreeNodeProps {\r\n  node: TreeNode\r\n  level: number\r\n  currentFolderId: string | null\r\n  expandedFolders: Set<string>\r\n  onToggle: (folderId: string) => void\r\n  onNavigate: (folderId: string) => void\r\n}\r\n\r\nfunction FolderTreeNode({\r\n  node,\r\n  level,\r\n  currentFolderId,\r\n  expandedFolders,\r\n  onToggle,\r\n  onNavigate,\r\n}: FolderTreeNodeProps) {\r\n  const isExpanded = expandedFolders.has(node.folder.id)\r\n  const hasChildren = node.children.length > 0\r\n  const isCurrent = currentFolderId === node.folder.id\r\n\r\n  // Get folder color scheme\r\n  const colorScheme =\r\n    FOLDER_ICON_COLORS[node.folder.folder_type] || FOLDER_ICON_COLORS.custom\r\n\r\n  return (\r\n    <div>\r\n      {/* Folder Row */}\r\n      <div\r\n        className={cn(\r\n          'flex items-center gap-1 rounded-md transition-colors',\r\n          isCurrent ? 'bg-primary/20 border border-primary' : 'hover:bg-muted border border-transparent'\r\n        )}\r\n        style={{ paddingLeft: `${level * 16 + 8}px` }}\r\n      >\r\n        {/* Expand/Collapse Icon */}\r\n        {hasChildren ? (\r\n          <button\r\n            onClick={() => onToggle(node.folder.id)}\r\n            className=\"p-1 hover:bg-accent rounded transition-colors\"\r\n            aria-label={isExpanded ? 'Collapse folder' : 'Expand folder'}\r\n          >\r\n            {isExpanded ? (\r\n              <ChevronDown className=\"w-3.5 h-3.5 text-muted-foreground\" strokeWidth={2} />\r\n            ) : (\r\n              <ChevronRight className=\"w-3.5 h-3.5 text-muted-foreground\" strokeWidth={2} />\r\n            )}\r\n          </button>\r\n        ) : (\r\n          <div className=\"w-5\" /> // Spacer for alignment\r\n        )}\r\n\r\n        {/* Folder Button */}\r\n        <button\r\n          onClick={() => onNavigate(node.folder.id)}\r\n          className=\"flex items-center gap-2 flex-1 py-2 pr-3 text-left text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 rounded\"\r\n        >\r\n          {isExpanded ? (\r\n            <FolderOpen\r\n              className={cn(\r\n                'w-4 h-4 flex-shrink-0',\r\n                colorScheme === FOLDER_ICON_COLORS.vehicle_root ? 'text-blue-500' :\r\n                colorScheme === FOLDER_ICON_COLORS.category ? 'text-green-500' :\r\n                'text-muted-foreground'\r\n              )}\r\n              strokeWidth={2}\r\n            />\r\n          ) : (\r\n            <Folder\r\n              className={cn(\r\n                'w-4 h-4 flex-shrink-0',\r\n                colorScheme === FOLDER_ICON_COLORS.vehicle_root ? 'text-blue-500' :\r\n                colorScheme === FOLDER_ICON_COLORS.category ? 'text-green-500' :\r\n                'text-muted-foreground'\r\n              )}\r\n              strokeWidth={2}\r\n            />\r\n          )}\r\n          <span\r\n            className={cn(\r\n              'truncate font-medium',\r\n              isCurrent ? 'text-foreground' : 'text-muted-foreground'\r\n            )}\r\n          >\r\n            {node.folder.name}\r\n          </span>\r\n          {node.folder.subfolder_count !== undefined && node.folder.subfolder_count > 0 && (\r\n            <span className=\"text-xs text-muted-foreground\">({node.folder.subfolder_count})</span>\r\n          )}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Children (Recursive) */}\r\n      {isExpanded && hasChildren && (\r\n        <div className=\"mt-0.5\">\r\n          {node.children.map((child) => (\r\n            <FolderTreeNode\r\n              key={child.folder.id}\r\n              node={child}\r\n              level={level + 1}\r\n              currentFolderId={currentFolderId}\r\n              expandedFolders={expandedFolders}\r\n              onToggle={onToggle}\r\n              onNavigate={onNavigate}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Helper Functions\r\n */\r\n\r\nfunction buildFolderTree(folders: DocumentFolder[]): TreeNode[] {\r\n  const folderMap = new Map<string | null, TreeNode[]>()\r\n\r\n  // Initialize map\r\n  folders.forEach((folder) => {\r\n    if (!folderMap.has(folder.parent_folder_id)) {\r\n      folderMap.set(folder.parent_folder_id, [])\r\n    }\r\n    folderMap.get(folder.parent_folder_id)!.push({\r\n      folder,\r\n      children: [],\r\n    })\r\n  })\r\n\r\n  // Build tree recursively\r\n  function buildChildren(parentId: string | null): TreeNode[] {\r\n    const children = folderMap.get(parentId) || []\r\n    return children.map((node) => ({\r\n      ...node,\r\n      children: buildChildren(node.folder.id),\r\n    }))\r\n  }\r\n\r\n  return buildChildren(null)\r\n}\r\n\r\nfunction filterTreeBySearch(tree: TreeNode[], query: string): TreeNode[] {\r\n  return tree\r\n    .map((node) => {\r\n      const nameMatches = node.folder.name.toLowerCase().includes(query)\r\n      const pathMatches = node.folder.path.toLowerCase().includes(query)\r\n      const filteredChildren = filterTreeBySearch(node.children, query)\r\n\r\n      if (nameMatches || pathMatches || filteredChildren.length > 0) {\r\n        return {\r\n          ...node,\r\n          children: filteredChildren,\r\n        }\r\n      }\r\n      return null\r\n    })\r\n    .filter((node): node is TreeNode => node !== null)\r\n}\r\n\r\nfunction getAncestorIds(folder: DocumentFolder, allFolders: DocumentFolder[]): string[] {\r\n  const ancestors: string[] = []\r\n  let currentFolder: DocumentFolder | undefined = folder\r\n\r\n  while (currentFolder?.parent_folder_id) {\r\n    ancestors.push(currentFolder.parent_folder_id)\r\n    currentFolder = allFolders.find((f) => f.id === currentFolder!.parent_folder_id)\r\n  }\r\n\r\n  return ancestors\r\n}\r\n","'use client'\r\n\r\nimport React from 'react'\r\nimport { Upload, Folder, ChevronRight } from 'lucide-react'\r\nimport { DocumentFolder } from '@/types/documents'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface UploadDestinationBannerProps {\r\n  currentFolder: DocumentFolder | null\r\n  className?: string\r\n}\r\n\r\n/**\r\n * UploadDestinationBanner - Clear Upload Context Component\r\n *\r\n * Displays the current upload destination in a professional banner.\r\n * Solves the \"where are my files going?\" problem.\r\n *\r\n * Design: Financial Terminal Elegance\r\n */\r\nexport function UploadDestinationBanner({\r\n  currentFolder,\r\n  className,\r\n}: UploadDestinationBannerProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'px-6 py-2.5 border-b',\r\n        'bg-navy-50 border-navy-100',\r\n        'transition-colors duration-200',\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"flex items-center gap-2 text-sm\">\r\n        {/* Upload Icon */}\r\n        <Upload className=\"w-4 h-4 text-navy-600 flex-shrink-0\" strokeWidth={2} />\r\n\r\n        {/* Label */}\r\n        <span className=\"text-slate-700 font-medium\">Upload destination:</span>\r\n\r\n        {/* Current Folder Path */}\r\n        {currentFolder ? (\r\n          <div className=\"flex items-center gap-1.5\">\r\n            {/* Parse path into breadcrumb-style display */}\r\n            {currentFolder.path.split('/').filter(Boolean).map((segment, index, arr) => (\r\n              <React.Fragment key={index}>\r\n                {index > 0 && (\r\n                  <ChevronRight\r\n                    className=\"w-3.5 h-3.5 text-navy-400 flex-shrink-0\"\r\n                    strokeWidth={2}\r\n                  />\r\n                )}\r\n                <span\r\n                  className={cn(\r\n                    'font-medium',\r\n                    index === arr.length - 1\r\n                      ? 'text-navy-900' // Last segment (current folder)\r\n                      : 'text-navy-700' // Parent segments\r\n                  )}\r\n                >\r\n                  {segment}\r\n                </span>\r\n              </React.Fragment>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <span className=\"font-medium text-navy-900\">Root / All Documents</span>\r\n        )}\r\n\r\n        {/* Folder Icon */}\r\n        <Folder\r\n          className=\"w-4 h-4 text-navy-600 ml-1 flex-shrink-0\"\r\n          strokeWidth={2}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Compact variant for dialogs/modals\r\n */\r\nexport function UploadDestinationBadge({\r\n  currentFolder,\r\n  className,\r\n}: UploadDestinationBannerProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'inline-flex items-center gap-2 px-3 py-1.5 rounded-md',\r\n        'bg-navy-50 border border-navy-200',\r\n        'text-sm',\r\n        className\r\n      )}\r\n    >\r\n      <Folder className=\"w-3.5 h-3.5 text-navy-600 flex-shrink-0\" strokeWidth={2} />\r\n      <span className=\"text-slate-700\">Uploading to:</span>\r\n      <span className=\"font-medium text-navy-900\">\r\n        {currentFolder?.name || 'Root'}\r\n      </span>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState, useCallback, useEffect } from 'react'\r\nimport { useDropzone } from 'react-dropzone'\r\nimport { Upload, X, FileText, AlertCircle, Loader2, CheckCircle2, Folder } from 'lucide-react'\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { toast } from 'sonner'\r\nimport { cn } from '@/lib/utils'\r\nimport { DocumentFolder } from '@/types/documents'\r\n\r\ninterface DocumentUploadDialogProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  folderId?: string | null\r\n  vehicleId?: string | null\r\n  currentFolder?: DocumentFolder | null\r\n  onSuccess?: () => void\r\n}\r\n\r\ninterface FileWithMetadata extends File {\r\n  id: string\r\n  progress: number\r\n  status: 'pending' | 'uploading' | 'success' | 'error'\r\n  error?: string\r\n}\r\n\r\nexport function DocumentUploadDialog({\r\n  open,\r\n  onOpenChange,\r\n  folderId,\r\n  vehicleId,\r\n  currentFolder,\r\n  onSuccess\r\n}: DocumentUploadDialogProps) {\r\n  const [files, setFiles] = useState<FileWithMetadata[]>([])\r\n  const [documentType, setDocumentType] = useState('Other')\r\n  const [tags, setTags] = useState('')\r\n  const [description, setDescription] = useState('')\r\n  const [uploading, setUploading] = useState(false)\r\n  const [selectedFolderId, setSelectedFolderId] = useState<string | null>(folderId || null)\r\n  const [folders, setFolders] = useState<DocumentFolder[]>([])\r\n  const [loadingFolders, setLoadingFolders] = useState(false)\r\n\r\n  // Fetch available folders\r\n  useEffect(() => {\r\n    if (!open) return\r\n\r\n    const fetchFolders = async () => {\r\n      setLoadingFolders(true)\r\n      try {\r\n        const response = await fetch('/api/staff/documents/folders')\r\n        if (response.ok) {\r\n          const data = await response.json()\r\n          setFolders(data.folders || [])\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching folders:', error)\r\n      } finally {\r\n        setLoadingFolders(false)\r\n      }\r\n    }\r\n\r\n    fetchFolders()\r\n  }, [open])\r\n\r\n  // Reset selected folder when folderId prop changes\r\n  useEffect(() => {\r\n    setSelectedFolderId(folderId || null)\r\n  }, [folderId])\r\n\r\n  const onDrop = useCallback((acceptedFiles: File[]) => {\r\n    const newFiles: FileWithMetadata[] = acceptedFiles.map((file, index) => ({\r\n      ...file,\r\n      id: `${Date.now()}-${index}`,\r\n      progress: 0,\r\n      status: 'pending' as const\r\n    }))\r\n    setFiles(prev => [...prev, ...newFiles])\r\n  }, [])\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'application/pdf': ['.pdf'],\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\r\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'],\r\n      'text/plain': ['.txt'],\r\n      'image/jpeg': ['.jpg', '.jpeg'],\r\n      'image/png': ['.png']\r\n    },\r\n    maxSize: 50 * 1024 * 1024, // 50MB\r\n    disabled: uploading\r\n  })\r\n\r\n  const removeFile = (fileId: string) => {\r\n    setFiles(files.filter(f => f.id !== fileId))\r\n  }\r\n\r\n  const uploadFiles = async () => {\r\n    if (files.length === 0) {\r\n      toast.error('Please select at least one file')\r\n      return\r\n    }\r\n\r\n    setUploading(true)\r\n\r\n    // Track results during the loop (not relying on React state)\r\n    let successCount = 0\r\n    let failedCount = 0\r\n    const totalFiles = files.length\r\n\r\n    try {\r\n      // Upload files one by one for better progress tracking\r\n      for (const file of files) {\r\n        const formData = new FormData()\r\n        formData.append('file', file)\r\n        formData.append('type', documentType)\r\n        formData.append('tags', tags)\r\n        formData.append('description', description)\r\n        if (selectedFolderId) formData.append('folder_id', selectedFolderId)\r\n        if (vehicleId) formData.append('vehicle_id', vehicleId)\r\n\r\n        // Update file status\r\n        setFiles(prev => prev.map(f =>\r\n          f.id === file.id ? { ...f, status: 'uploading' as const } : f\r\n        ))\r\n\r\n        try {\r\n          const response = await fetch('/api/documents/upload', {\r\n            method: 'POST',\r\n            body: formData\r\n          })\r\n\r\n          if (!response.ok) {\r\n            throw new Error('Upload failed')\r\n          }\r\n\r\n          // Mark as success\r\n          setFiles(prev => prev.map(f =>\r\n            f.id === file.id ? { ...f, status: 'success' as const, progress: 100 } : f\r\n          ))\r\n          successCount++\r\n\r\n        } catch (error) {\r\n          // Mark as error\r\n          setFiles(prev => prev.map(f =>\r\n            f.id === file.id\r\n              ? { ...f, status: 'error' as const, error: 'Upload failed' }\r\n              : f\r\n          ))\r\n          failedCount++\r\n          console.error(`Error uploading ${file.name}:`, error)\r\n        }\r\n      }\r\n\r\n      // Check results using tracked counts (not stale React state)\r\n      if (failedCount === 0) {\r\n        toast.success(`Successfully uploaded ${totalFiles} file(s)`)\r\n        onSuccess?.()\r\n        handleClose()\r\n      } else {\r\n        toast.error(`${failedCount} file(s) failed to upload`)\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Upload error:', error)\r\n      toast.error('Failed to upload files')\r\n    } finally {\r\n      setUploading(false)\r\n    }\r\n  }\r\n\r\n  const handleClose = () => {\r\n    if (!uploading) {\r\n      setFiles([])\r\n      setDocumentType('Other')\r\n      setTags('')\r\n      setDescription('')\r\n      onOpenChange(false)\r\n    }\r\n  }\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes'\r\n    const k = 1024\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i]\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleClose}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle>Upload Documents</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* Drag and Drop Area */}\r\n          <div\r\n            {...getRootProps()}\r\n            className={cn(\r\n              'border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors',\r\n              isDragActive\r\n                ? 'border-blue-500 bg-blue-50'\r\n                : 'border-gray-300 hover:border-gray-400',\r\n              uploading && 'opacity-50 cursor-not-allowed'\r\n            )}\r\n          >\r\n            <input {...getInputProps()} />\r\n            <Upload className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\r\n            {isDragActive ? (\r\n              <p className=\"text-sm text-gray-600\">Drop files here...</p>\r\n            ) : (\r\n              <>\r\n                <p className=\"text-sm text-gray-600 mb-1\">\r\n                  Drag & drop files here, or click to select\r\n                </p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  Supported: PDF, DOCX, XLSX, TXT, JPG, PNG (max 50MB each)\r\n                </p>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* File List */}\r\n          {files.length > 0 && (\r\n            <div className=\"space-y-2\">\r\n              <Label>Selected Files ({files.length})</Label>\r\n              <div className=\"border rounded-lg divide-y max-h-48 overflow-y-auto\">\r\n                {files.map((file) => (\r\n                  <div key={file.id} className=\"flex items-center gap-3 p-3\">\r\n                    <FileText className=\"h-5 w-5 text-gray-400 flex-shrink-0\" />\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className=\"text-sm font-medium truncate\">{file.name}</p>\r\n                      <p className=\"text-xs text-gray-500\">\r\n                        {formatFileSize(file.size)}\r\n                      </p>\r\n                    </div>\r\n                    {file.status === 'uploading' && (\r\n                      <Loader2 className=\"h-4 w-4 animate-spin text-blue-500\" />\r\n                    )}\r\n                    {file.status === 'success' && (\r\n                      <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\r\n                    )}\r\n                    {file.status === 'error' && (\r\n                      <AlertCircle className=\"h-4 w-4 text-red-500\" />\r\n                    )}\r\n                    {file.status === 'pending' && !uploading && (\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => removeFile(file.id)}\r\n                        className=\"h-6 w-6 p-0\"\r\n                      >\r\n                        <X className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Metadata Fields */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <Label htmlFor=\"document-type\">Document Type</Label>\r\n              <Select value={documentType} onValueChange={setDocumentType} disabled={uploading}>\r\n                <SelectTrigger id=\"document-type\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"Agreement\">Agreement</SelectItem>\r\n                  <SelectItem value=\"Subscription\">Subscription</SelectItem>\r\n                  <SelectItem value=\"KYC\">KYC</SelectItem>\r\n                  <SelectItem value=\"Statement\">Statement</SelectItem>\r\n                  <SelectItem value=\"NDA\">NDA</SelectItem>\r\n                  <SelectItem value=\"Report\">Report</SelectItem>\r\n                  <SelectItem value=\"Tax\">Tax</SelectItem>\r\n                  <SelectItem value=\"Legal\">Legal</SelectItem>\r\n                  <SelectItem value=\"Other\">Other</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div>\r\n              <Label htmlFor=\"folder\">Destination Folder</Label>\r\n              <Select\r\n                value={selectedFolderId || 'root'}\r\n                onValueChange={(value) => setSelectedFolderId(value === 'root' ? null : value)}\r\n                disabled={uploading || loadingFolders}\r\n              >\r\n                <SelectTrigger id=\"folder\">\r\n                  <SelectValue>\r\n                    {loadingFolders ? (\r\n                      <span className=\"flex items-center gap-2\">\r\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                        Loading folders...\r\n                      </span>\r\n                    ) : selectedFolderId ? (\r\n                      <span className=\"flex items-center gap-2\">\r\n                        <Folder className=\"h-4 w-4\" />\r\n                        {folders.find(f => f.id === selectedFolderId)?.path || 'Unknown folder'}\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"flex items-center gap-2\">\r\n                        <Folder className=\"h-4 w-4\" />\r\n                        Root / No Folder\r\n                      </span>\r\n                    )}\r\n                  </SelectValue>\r\n                </SelectTrigger>\r\n                <SelectContent className=\"max-h-[300px]\">\r\n                  <SelectItem value=\"root\">\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <Folder className=\"h-4 w-4\" />\r\n                      Root / No Folder\r\n                    </span>\r\n                  </SelectItem>\r\n                  {folders.map((folder) => {\r\n                    const depth = (folder.path.match(/\\//g) || []).length - 1\r\n                    return (\r\n                      <SelectItem key={folder.id} value={folder.id}>\r\n                        <span className=\"flex items-center gap-2\" style={{ paddingLeft: `${depth * 16}px` }}>\r\n                          <Folder className=\"h-4 w-4 flex-shrink-0\" />\r\n                          <span className=\"truncate\">{folder.path}</span>\r\n                        </span>\r\n                      </SelectItem>\r\n                    )\r\n                  })}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div>\r\n              <Label htmlFor=\"tags\">Tags (comma-separated)</Label>\r\n              <Input\r\n                id=\"tags\"\r\n                placeholder=\"quarterly, 2024, financial\"\r\n                value={tags}\r\n                onChange={(e) => setTags(e.target.value)}\r\n                disabled={uploading}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Label htmlFor=\"description\">Description (optional)</Label>\r\n              <Textarea\r\n                id=\"description\"\r\n                placeholder=\"Add a description for these documents...\"\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n                disabled={uploading}\r\n                rows={3}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={handleClose} disabled={uploading}>\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={uploadFiles} disabled={files.length === 0 || uploading}>\r\n            {uploading ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                Uploading...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Upload className=\"h-4 w-4 mr-2\" />\r\n                Upload {files.length} File{files.length !== 1 ? 's' : ''}\r\n              </>\r\n            )}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\n\r\n","'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { FolderTree, Loader2 } from 'lucide-react'\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue\r\n} from '@/components/ui/select'\r\nimport { toast } from 'sonner'\r\n\r\ninterface MoveDocumentDialogProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  documentId: string | null\r\n  documentName?: string\r\n  currentFolderId?: string | null\r\n  onSuccess?: () => void\r\n}\r\n\r\ninterface Folder {\r\n  id: string\r\n  name: string\r\n  path: string\r\n  folder_type: string\r\n}\r\n\r\nexport function MoveDocumentDialog({\r\n  open,\r\n  onOpenChange,\r\n  documentId,\r\n  documentName,\r\n  currentFolderId,\r\n  onSuccess\r\n}: MoveDocumentDialogProps) {\r\n  const [folders, setFolders] = useState<Folder[]>([])\r\n  const [selectedFolderId, setSelectedFolderId] = useState<string>('')\r\n  const [loading, setLoading] = useState(false)\r\n  const [moving, setMoving] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      loadFolders()\r\n    }\r\n  }, [open])\r\n\r\n  const loadFolders = async () => {\r\n    try {\r\n      setLoading(true)\r\n      const response = await fetch('/api/staff/documents/folders')\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setFolders(data.folders || [])\r\n      } else {\r\n        toast.error('Failed to load folders')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading folders:', error)\r\n      toast.error('Failed to load folders')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleMove = async () => {\r\n    if (!documentId) return\r\n\r\n    try {\r\n      setMoving(true)\r\n      // Convert \"__root__\" placeholder to null for the API\r\n      const folderId = selectedFolderId === '__root__' ? null : selectedFolderId || null\r\n      const response = await fetch(`/api/staff/documents/${documentId}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          folder_id: folderId\r\n        })\r\n      })\r\n\r\n      if (response.ok) {\r\n        toast.success('Document moved successfully')\r\n        onSuccess?.()\r\n        onOpenChange(false)\r\n      } else {\r\n        const error = await response.json()\r\n        toast.error(error.error || 'Failed to move document')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error moving document:', error)\r\n      toast.error('Failed to move document')\r\n    } finally {\r\n      setMoving(false)\r\n    }\r\n  }\r\n\r\n  // Filter out current folder\r\n  const availableFolders = folders.filter(f => f.id !== currentFolderId)\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent>\r\n        <DialogHeader>\r\n          <DialogTitle>Move Document - {documentName}</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4\">\r\n          <div className=\"space-y-2\">\r\n            <Label>Select Destination Folder</Label>\r\n            {loading ? (\r\n              <div className=\"text-center py-4\">\r\n                <Loader2 className=\"h-6 w-6 animate-spin mx-auto text-blue-500\" />\r\n              </div>\r\n            ) : (\r\n              <Select value={selectedFolderId} onValueChange={setSelectedFolderId}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select a folder...\" />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"max-h-80\">\r\n                  <SelectItem value=\"__root__\">\r\n                    Root (No Folder)\r\n                  </SelectItem>\r\n                  {availableFolders.map(folder => (\r\n                    <SelectItem key={folder.id} value={folder.id}>\r\n                      {folder.path}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            )}\r\n          </div>\r\n\r\n          {currentFolderId && (\r\n            <p className=\"text-sm text-gray-500\">\r\n              Current: {folders.find(f => f.id === currentFolderId)?.path || 'Root'}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleMove} disabled={!selectedFolderId || moving}>\r\n            {moving ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                Moving...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <FolderTree className=\"h-4 w-4 mr-2\" />\r\n                Move\r\n              </>\r\n            )}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\n","'use client'\n\nimport { useState } from 'react'\nimport { FolderPlus, Loader2 } from 'lucide-react'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { toast } from 'sonner'\n\ninterface CreateFolderDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  parentFolderId?: string | null\n  onSuccess?: () => void\n}\n\nexport function CreateFolderDialog({\n  open,\n  onOpenChange,\n  parentFolderId,\n  onSuccess\n}: CreateFolderDialogProps) {\n  const [folderName, setFolderName] = useState('')\n  const [creating, setCreating] = useState(false)\n\n  const handleCreate = async () => {\n    if (!folderName.trim()) {\n      toast.error('Please enter a folder name')\n      return\n    }\n\n    try {\n      setCreating(true)\n      const payload = {\n        name: folderName.trim(),\n        folder_type: 'custom' as const,\n        ...(parentFolderId && { parent_folder_id: parentFolderId })\n      }\n\n      const response = await fetch('/api/staff/documents/folders', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      })\n\n      const responseText = await response.text()\n      \n      if (response.ok) {\n        toast.success('Folder created successfully')\n        setFolderName('')\n        onSuccess?.()\n        onOpenChange(false)\n      } else {\n        interface ErrorResponse {\n          error?: string\n          details?: unknown\n        }\n\n        let error: ErrorResponse = {}\n        try {\n          error = JSON.parse(responseText)\n        } catch (e) {\n          error = { error: responseText || 'Unknown error' }\n        }\n        console.error('[CreateFolder] Error response:', error)\n        const errorMsg = error.details\n          ? `${error.error}: ${JSON.stringify(error.details)}`\n          : error.error || 'Failed to create folder'\n        toast.error(errorMsg)\n      }\n    } catch (error) {\n      console.error('Error creating folder:', error)\n      toast.error('Failed to create folder')\n    } finally {\n      setCreating(false)\n    }\n  }\n\n  const handleClose = () => {\n    if (!creating) {\n      setFolderName('')\n      onOpenChange(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>\n            {parentFolderId ? 'Create Subfolder' : 'Create Folder'}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"folder-name\">Folder Name</Label>\n            <Input\n              id=\"folder-name\"\n              placeholder=\"Enter folder name...\"\n              value={folderName}\n              onChange={(e) => setFolderName(e.target.value)}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' && !creating) {\n                  handleCreate()\n                }\n              }}\n              disabled={creating}\n              autoFocus\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={handleClose} disabled={creating}>\n            Cancel\n          </Button>\n          <Button onClick={handleCreate} disabled={!folderName.trim() || creating}>\n            {creating ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Creating...\n              </>\n            ) : (\n              <>\n                <FolderPlus className=\"h-4 w-4 mr-2\" />\n                Create Folder\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\n","'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { toast } from 'sonner'\r\n\r\ninterface RenameFolderDialogProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  folderId: string | null\r\n  currentName: string\r\n  onSuccess: () => void\r\n}\r\n\r\nexport function RenameFolderDialog({\r\n  open,\r\n  onOpenChange,\r\n  folderId,\r\n  currentName,\r\n  onSuccess,\r\n}: RenameFolderDialogProps) {\r\n  const [newName, setNewName] = useState(currentName)\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!folderId || !newName.trim()) {\r\n      toast.error('Folder name is required')\r\n      return\r\n    }\r\n\r\n    if (newName.trim() === currentName) {\r\n      toast.info('Name unchanged')\r\n      onOpenChange(false)\r\n      return\r\n    }\r\n\r\n    setIsSubmitting(true)\r\n\r\n    try {\r\n      const response = await fetch(`/api/staff/documents/folders/${folderId}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name: newName.trim() }),\r\n      })\r\n\r\n      if (response.ok) {\r\n        toast.success('Folder renamed successfully')\r\n        onSuccess()\r\n        onOpenChange(false)\r\n        setNewName('')\r\n      } else {\r\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }))\r\n        const errorMsg = errorData.details || errorData.error || 'Unknown error'\r\n        toast.error(`Failed to rename folder: ${errorMsg}`)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error renaming folder:', error)\r\n      toast.error('Failed to rename folder')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  // Reset name when dialog opens\r\n  const handleOpenChange = (open: boolean) => {\r\n    if (open) {\r\n      setNewName(currentName)\r\n    }\r\n    onOpenChange(open)\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleOpenChange}>\r\n      <DialogContent className=\"bg-zinc-900 border-white/10 text-white\">\r\n        <form onSubmit={handleSubmit}>\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-white\">Rename Folder</DialogTitle>\r\n            <DialogDescription className=\"text-gray-400\">\r\n              Enter a new name for this folder\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"py-4\">\r\n            <Label htmlFor=\"folder-name\" className=\"text-white\">\r\n              Folder Name\r\n            </Label>\r\n            <Input\r\n              id=\"folder-name\"\r\n              value={newName}\r\n              onChange={(e) => setNewName(e.target.value)}\r\n              placeholder=\"Enter folder name\"\r\n              className=\"mt-2 bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\r\n              disabled={isSubmitting}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => onOpenChange(false)}\r\n              disabled={isSubmitting}\r\n              className=\"border-white/20 text-white hover:bg-white/10\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isSubmitting || !newName.trim()}\r\n              className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n            >\r\n              {isSubmitting ? 'Renaming...' : 'Rename'}\r\n            </Button>\r\n          </DialogFooter>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', key: 'afitv7' }],\n  ['path', { d: 'M3 9h18', key: '1pudct' }],\n  ['path', { d: 'M3 15h18', key: '5xshup' }],\n  ['path', { d: 'M9 3v18', key: 'fh3hqa' }],\n  ['path', { d: 'M15 3v18', key: '14nvp0' }],\n];\n\n/**\n * @component @name Grid3x3\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik0zIDloMTgiIC8+CiAgPHBhdGggZD0iTTMgMTVoMTgiIC8+CiAgPHBhdGggZD0iTTkgM3YxOCIgLz4KICA8cGF0aCBkPSJNMTUgM3YxOCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/grid-3x3\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Grid3x3 = createLucideIcon('grid-3x3', __iconNode);\n\nexport default Grid3x3;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z',\n      key: 'hod4my',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z',\n      key: 'w4yl2u',\n    },\n  ],\n  ['path', { d: 'M3 5a2 2 0 0 0 2 2h3', key: 'f2jnh7' }],\n  ['path', { d: 'M3 3v13a2 2 0 0 0 2 2h3', key: 'k8epm1' }],\n];\n\n/**\n * @component @name FolderTree\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTBhMSAxIDAgMCAwIDEtMVY2YTEgMSAwIDAgMC0xLTFoLTIuNWExIDEgMCAwIDEtLjgtLjRsLS45LTEuMkExIDEgMCAwIDAgMTUgM2gtMmExIDEgMCAwIDAtMSAxdjVhMSAxIDAgMCAwIDEgMVoiIC8+CiAgPHBhdGggZD0iTTIwIDIxYTEgMSAwIDAgMCAxLTF2LTNhMSAxIDAgMCAwLTEtMWgtMi45YTEgMSAwIDAgMS0uODgtLjU1bC0uNDItLjg1YTEgMSAwIDAgMC0uOTItLjZIMTNhMSAxIDAgMCAwLTEgMXY1YTEgMSAwIDAgMCAxIDFaIiAvPgogIDxwYXRoIGQ9Ik0zIDVhMiAyIDAgMCAwIDIgMmgzIiAvPgogIDxwYXRoIGQ9Ik0zIDN2MTNhMiAyIDAgMCAwIDIgMmgzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/folder-tree\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FolderTree = createLucideIcon('folder-tree', __iconNode);\n\nexport default FolderTree;\n","/**\r\n * Design Tokens - Institutional Finance UI\r\n *\r\n * Professional color palette and design system for\r\n * private equity/investment banking document management.\r\n *\r\n * Philosophy: Refined precision, authoritative presence,\r\n * sophisticated monochrome with strategic accents.\r\n */\r\n\r\nexport const DESIGN_TOKENS = {\r\n  // Color Palette - Institutional Slate & Navy\r\n  colors: {\r\n    // Neutrals - Foundation (Slate)\r\n    slate: {\r\n      950: '#020617', // Deep background (dark mode)\r\n      900: '#0f172a', // Surface dark\r\n      800: '#1e293b', // Elevated surface\r\n      700: '#334155', // Strong borders\r\n      600: '#475569', // Muted borders\r\n      500: '#64748b', // Muted text\r\n      400: '#94a3b8', // Subtle text\r\n      300: '#cbd5e1', // Disabled\r\n      200: '#e2e8f0', // Light borders\r\n      100: '#f1f5f9', // Light surface\r\n      50: '#f8fafc',  // Background (light mode)\r\n    },\r\n\r\n    // Primary - Authority & Trust (Navy Blue)\r\n    navy: {\r\n      950: '#172554', // Deep institutional blue\r\n      900: '#1e3a8a', // Primary dark\r\n      800: '#1e40af', // Primary\r\n      700: '#1d4ed8', // Primary hover\r\n      600: '#2563eb', // Active state\r\n      500: '#3b82f6', // Bright accent\r\n      100: '#dbeafe', // Subtle highlight\r\n      50: '#eff6ff',  // Pale highlight\r\n    },\r\n\r\n    // Semantic Colors (Muted, Professional)\r\n    semantic: {\r\n      success: '#047857',    // Emerald 700 - Approval, complete\r\n      warning: '#b45309',    // Amber 700 - Pending, caution\r\n      error: '#b91c1c',      // Red 700 - Critical, delete\r\n      info: '#0369a1',       // Sky 700 - Information\r\n    },\r\n  },\r\n\r\n  // Spacing Scale (4px base)\r\n  spacing: {\r\n    xs: '0.25rem',   // 4px - Tight spacing\r\n    sm: '0.5rem',    // 8px - Compact elements\r\n    md: '0.75rem',   // 12px - Standard gap\r\n    lg: '1rem',      // 16px - Section spacing\r\n    xl: '1.5rem',    // 24px - Large gaps\r\n    '2xl': '2rem',   // 32px - Major sections\r\n    '3xl': '3rem',   // 48px - Page sections\r\n  },\r\n\r\n  // Border Radius (Subtle, Professional)\r\n  radius: {\r\n    sm: '0.375rem',  // 6px - Buttons, inputs\r\n    md: '0.5rem',    // 8px - Cards\r\n    lg: '0.75rem',   // 12px - Modals\r\n    xl: '1rem',      // 16px - Large surfaces\r\n    full: '9999px',  // Pills, badges\r\n  },\r\n\r\n  // Shadows (Soft, Refined)\r\n  shadow: {\r\n    sm: '0 1px 2px 0 rgb(0 0 0 / 0.03), 0 1px 3px 0 rgb(0 0 0 / 0.02)',\r\n    md: '0 2px 4px -1px rgb(0 0 0 / 0.04), 0 4px 6px -1px rgb(0 0 0 / 0.06)',\r\n    lg: '0 4px 6px -2px rgb(0 0 0 / 0.05), 0 10px 15px -3px rgb(0 0 0 / 0.08)',\r\n    xl: '0 10px 25px -5px rgb(0 0 0 / 0.08), 0 20px 25px -5px rgb(0 0 0 / 0.06)',\r\n  },\r\n\r\n  // Typography Scale\r\n  fontSize: {\r\n    xs: '0.75rem',    // 12px - Captions, metadata\r\n    sm: '0.875rem',   // 14px - Body small, labels\r\n    base: '0.9375rem', // 15px - Body text\r\n    lg: '1rem',       // 16px - Emphasized body\r\n    xl: '1.125rem',   // 18px - Subheadings\r\n    '2xl': '1.5rem',  // 24px - Headings\r\n    '3xl': '2rem',    // 32px - Page titles\r\n  },\r\n\r\n  // Font Weights\r\n  fontWeight: {\r\n    normal: 400,\r\n    medium: 500,\r\n    semibold: 600,\r\n    bold: 700,\r\n  },\r\n\r\n  // Transitions (Precise, Responsive)\r\n  transition: {\r\n    fast: '120ms cubic-bezier(0.4, 0, 0.2, 1)',      // Quick feedback\r\n    base: '180ms cubic-bezier(0.4, 0, 0.2, 1)',      // Standard\r\n    smooth: '250ms cubic-bezier(0.4, 0, 0.2, 1)',    // Smooth animations\r\n    slow: '350ms cubic-bezier(0.4, 0, 0.2, 1)',      // Deliberate\r\n  },\r\n\r\n  // Z-index Layers\r\n  zIndex: {\r\n    base: 0,\r\n    dropdown: 1000,\r\n    sticky: 1100,\r\n    drawer: 1200,\r\n    modal: 1300,\r\n    popover: 1400,\r\n    tooltip: 1500,\r\n  },\r\n} as const\r\n\r\n/**\r\n * Folder Icon Colors (Subtle, Professional Variants)\r\n */\r\nexport const FOLDER_ICON_COLORS = {\r\n  vehicle_root: {\r\n    bg: 'bg-navy-50',\r\n    border: 'border-navy-200',\r\n    icon: 'text-navy-700',\r\n    hoverBg: 'group-hover:bg-navy-100',\r\n    hoverBorder: 'group-hover:border-navy-300',\r\n  },\r\n  category: {\r\n    bg: 'bg-slate-50',\r\n    border: 'border-slate-200',\r\n    icon: 'text-slate-600',\r\n    hoverBg: 'group-hover:bg-slate-100',\r\n    hoverBorder: 'group-hover:border-slate-300',\r\n  },\r\n  custom: {\r\n    bg: 'bg-slate-50',\r\n    border: 'border-slate-200',\r\n    icon: 'text-slate-500',\r\n    hoverBg: 'group-hover:bg-slate-100',\r\n    hoverBorder: 'group-hover:border-slate-300',\r\n  },\r\n} as const\r\n\r\n/**\r\n * Document Type Colors (Professional Semantic Coding)\r\n */\r\nexport const DOCUMENT_TYPE_COLORS = {\r\n  Agreement: {\r\n    badge: 'bg-navy-100 text-navy-800 border-navy-200',\r\n    icon: 'text-navy-600',\r\n  },\r\n  Subscription: {\r\n    badge: 'bg-emerald-50 text-emerald-800 border-emerald-200',\r\n    icon: 'text-emerald-600',\r\n  },\r\n  KYC: {\r\n    badge: 'bg-amber-50 text-amber-800 border-amber-200',\r\n    icon: 'text-amber-600',\r\n  },\r\n  Statement: {\r\n    badge: 'bg-slate-100 text-slate-800 border-slate-200',\r\n    icon: 'text-slate-600',\r\n  },\r\n  NDA: {\r\n    badge: 'bg-purple-50 text-purple-800 border-purple-200',\r\n    icon: 'text-purple-600',\r\n  },\r\n  Report: {\r\n    badge: 'bg-blue-50 text-blue-800 border-blue-200',\r\n    icon: 'text-blue-600',\r\n  },\r\n  Tax: {\r\n    badge: 'bg-orange-50 text-orange-800 border-orange-200',\r\n    icon: 'text-orange-600',\r\n  },\r\n  Legal: {\r\n    badge: 'bg-red-50 text-red-800 border-red-200',\r\n    icon: 'text-red-600',\r\n  },\r\n  Other: {\r\n    badge: 'bg-slate-100 text-slate-700 border-slate-200',\r\n    icon: 'text-slate-500',\r\n  },\r\n} as const\r\n\r\n/**\r\n * Grid Layout Constants\r\n */\r\nexport const GRID_CONSTANTS = {\r\n  // Responsive column counts\r\n  columns: {\r\n    mobile: 1,\r\n    tablet: 2,\r\n    desktop: 3,\r\n    wide: 4,\r\n  },\r\n\r\n  // Item sizing\r\n  minCardWidth: '240px',\r\n  maxCardWidth: '320px',\r\n  cardHeight: 'auto',\r\n\r\n  // Spacing\r\n  gap: DESIGN_TOKENS.spacing.lg,\r\n  padding: DESIGN_TOKENS.spacing.xl,\r\n} as const\r\n\r\n/**\r\n * Animation Presets (Subtle, Professional)\r\n */\r\nexport const ANIMATIONS = {\r\n  // Fade in with slight upward movement\r\n  fadeInUp: {\r\n    initial: { opacity: 0, y: 8 },\r\n    animate: { opacity: 1, y: 0 },\r\n    transition: { duration: 0.2, ease: [0.4, 0, 0.2, 1] },\r\n  },\r\n\r\n  // Scale in (for modals, drawers)\r\n  scaleIn: {\r\n    initial: { opacity: 0, scale: 0.96 },\r\n    animate: { opacity: 1, scale: 1 },\r\n    exit: { opacity: 0, scale: 0.96 },\r\n    transition: { duration: 0.18, ease: [0.4, 0, 0.2, 1] },\r\n  },\r\n\r\n  // Slide in from right (for drawers)\r\n  slideInRight: {\r\n    initial: { x: '100%' },\r\n    animate: { x: 0 },\r\n    exit: { x: '100%' },\r\n    transition: { duration: 0.25, ease: [0.4, 0, 0.2, 1] },\r\n  },\r\n} as const\r\n\r\n/**\r\n * Utility function to generate consistent hover states\r\n */\r\nexport const hoverStates = {\r\n  card: 'hover:shadow-md hover:border-slate-300 transition-all duration-180',\r\n  button: 'hover:bg-opacity-90 active:scale-[0.98] transition-all duration-120',\r\n  link: 'hover:text-navy-700 transition-colors duration-150',\r\n} as const\r\n"],"names":[],"mappings":"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","ignoreList":[11,12]}