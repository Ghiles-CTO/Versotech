module.exports=[264890,a=>{"use strict";let b=(0,a.i(95799).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],264890)},155508,a=>{"use strict";let b=(0,a.i(95799).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],155508)},618287,a=>{"use strict";let b=(0,a.i(95799).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],618287)},201986,a=>{"use strict";a.s(["formatBps",0,a=>null==a?"—":`${a} bps`,"formatCurrency",0,(a,b="USD")=>a?new Intl.NumberFormat("en-US",{style:"currency",currency:b,maximumFractionDigits:0}).format(a):"$0","formatDate",0,a=>{if(!a)return"—";let b="string"==typeof a?new Date(a):a;return Number.isNaN(b?.getTime?.())?"—":b.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}])},873785,a=>{"use strict";let b=(0,a.i(95799).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],873785)},600900,a=>{"use strict";let b=(0,a.i(95799).default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);a.s(["Wallet",()=>b],600900)},13289,a=>{"use strict";let b=(0,a.i(95799).default)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);a.s(["Handshake",()=>b],13289)},947208,a=>{"use strict";let b=(0,a.i(95799).default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);a.s(["Receipt",()=>b],947208)},324117,a=>{"use strict";let b=(0,a.i(95799).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);a.s(["ArrowUpRight",()=>b],324117)},924089,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(470305),e=a.i(421908),f=a.i(3321),g=a.i(439467),h=a.i(816854),i=a.i(201986);let j={partner:"Partner",introducer:"Introducer","commercial-partner":"Commercial Partner"};function k({open:a,onOpenChange:k,commission:l,commissionType:m,onSuccess:n}){let[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),s=async()=>{if(l){p(!0),r(null);try{let a=`/api/arrangers/me/${m}-commissions/${l.id}/request-invoice`,b=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to request invoice")}n(),k(!1)}catch(a){console.error("[RequestInvoiceDialog] Error:",a),r(a instanceof Error?a.message:"Failed to request invoice")}finally{p(!1)}}};if(!l)return null;let t=j[m],u=(0,i.formatCurrency)(l.accrual_amount,l.currency||"USD");return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:k,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(d.DialogHeader,{children:[(0,b.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.FileText,{className:"h-5 w-5"}),"Request Invoice"]}),(0,b.jsxs)(d.DialogDescription,{children:["Send an invoice request notification to the ",t.toLowerCase(),"."]})]}),(0,b.jsxs)("div",{className:"py-4 space-y-4",children:[q&&(0,b.jsx)("div",{className:"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded",children:q}),(0,b.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:[t,":"]}),(0,b.jsx)("span",{className:"font-medium",children:l.entity_name||"Unknown"})]}),l.deal&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Deal:"}),(0,b.jsx)("span",{className:"font-medium",children:l.deal.name})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,b.jsx)("span",{className:"font-medium text-primary",children:u})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(g.Mail,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("p",{children:["The ",t.toLowerCase(),' will receive a notification asking them to submit their invoice for this commission. The commission status will be updated to "Invoice Requested".']})]})]}),(0,b.jsxs)(d.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>k(!1),disabled:o,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:s,disabled:o,children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Mail,{className:"h-4 w-4 mr-2"}),"Request Invoice"]})})]})]})})}a.s(["RequestInvoiceDialog",()=>k])},449448,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(470305),e=a.i(421908),f=a.i(3321),g=a.i(425622),h=a.i(816854),i=a.i(618287),j=a.i(877918),k=a.i(201986);let l={partner:"Partner",introducer:"Introducer","commercial-partner":"Commercial Partner"};function m({open:a,onOpenChange:m,commission:n,commissionType:o}){let[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{if(!a||!n?.invoice_id){u(null),w(null);return}q(!0),s(null);try{let a=`/api/commissions/${o}/${n.id}/invoice`,b=await fetch(a);if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to fetch invoice")}let c=await b.json();u(c.data.url),w(c.data.path)}catch(a){console.error("[ViewInvoiceDialog] Error:",a),s(a instanceof Error?a.message:"Failed to load invoice")}finally{q(!1)}})()},[a,n?.id,n?.invoice_id,o]),(0,c.useEffect)(()=>{a||(u(null),w(null),s(null))},[a]);let x=()=>{t&&window.open(t,"_blank")};if(!n)return null;let y=l[o],z=(0,k.formatCurrency)(n.accrual_amount,n.currency||"USD"),A=v?.toLowerCase().endsWith(".pdf"),B=v?.match(/\.(png|jpg|jpeg)$/i);return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:m,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[(0,b.jsxs)(d.DialogHeader,{children:[(0,b.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.FileText,{className:"h-5 w-5"}),"Invoice from ",n.entity_name]}),(0,b.jsxs)(d.DialogDescription,{children:[y," commission invoice for ",z,n.deal&&` - ${n.deal.name}`]})]}),(0,b.jsxs)("div",{className:"flex-1 min-h-[400px] relative",children:[p&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)(f.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading invoice..."})]})}),r&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center p-6",children:[(0,b.jsx)(j.AlertCircle,{className:"h-12 w-12 text-destructive"}),(0,b.jsx)("p",{className:"text-destructive font-medium",children:"Failed to load invoice"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:r})]})}),!p&&!r&&t&&(0,b.jsxs)(b.Fragment,{children:[A&&(0,b.jsx)("iframe",{src:t,className:"w-full h-full min-h-[500px] rounded-lg border",title:"Invoice PDF"}),B&&(0,b.jsx)("div",{className:"w-full h-full min-h-[400px] flex items-center justify-center bg-muted/30 rounded-lg border overflow-auto p-4",children:(0,b.jsx)("img",{src:t,alt:"Invoice",className:"max-w-full max-h-full object-contain"})}),!A&&!B&&(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsxs)("div",{className:"text-center p-6",children:[(0,b.jsx)(h.FileText,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Preview not available for this file type."}),(0,b.jsxs)(e.Button,{className:"mt-4",onClick:x,children:[(0,b.jsx)(g.Download,{className:"h-4 w-4 mr-2"}),"Download Invoice"]})]})})]}),!p&&!r&&!t&&!n.invoice_id&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center p-6",children:[(0,b.jsx)(h.FileText,{className:"h-12 w-12 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No invoice has been uploaded yet."})]})})]}),(0,b.jsxs)(d.DialogFooter,{className:"flex-shrink-0 gap-2 sm:gap-0",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>m(!1),children:"Close"}),t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>{t&&window.open(t,"_blank")},children:[(0,b.jsx)(i.ExternalLink,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),(0,b.jsxs)(e.Button,{onClick:x,children:[(0,b.jsx)(g.Download,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]})})}a.s(["ViewInvoiceDialog",()=>m])}];

//# sourceMappingURL=versotech-portal_56057ddf._.js.map