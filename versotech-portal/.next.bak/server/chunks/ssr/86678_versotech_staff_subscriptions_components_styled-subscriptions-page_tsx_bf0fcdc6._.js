module.exports=[68537,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(284169),f=a.i(421908),g=a.i(15788),h=a.i(663475),i=a.i(425622),j=a.i(405708),k=a.i(166457),l=a.i(908513),m=a.i(487068),n=a.i(966494),o=a.i(784021),p=a.i(391686),q=a.i(771088),r=a.i(951870),s=a.i(577955),t=a.i(672606),u=a.i(195587),v=a.i(598626),w=a.i(85514);function x({columns:a,data:d,selectedIds:e,onSelectionChange:g,pageSize:h=50}){let{theme:i}=(0,w.useTheme)(),j="staff-dark"===i,[k,l]=c.useState([]),[m,n]=c.useState([]),[x,y]=c.useState({}),[z,A]=c.useState({}),[B,C]=c.useState({pageIndex:0,pageSize:h});console.log("[PAGINATED TABLE] Rendering with",d.length,"total rows, showing",B.pageSize,"per page");let D=(0,o.useReactTable)({data:d,columns:a,pageCount:Math.ceil(d.length/B.pageSize),onSortingChange:l,onColumnFiltersChange:n,getCoreRowModel:(0,p.getCoreRowModel)(),getSortedRowModel:(0,p.getSortedRowModel)(),getFilteredRowModel:(0,p.getFilteredRowModel)(),getPaginationRowModel:(0,p.getPaginationRowModel)(),onColumnVisibilityChange:y,onRowSelectionChange:A,onPaginationChange:C,state:{sorting:k,columnFilters:m,columnVisibility:x,rowSelection:z,pagination:B}});c.useEffect(()=>{g&&g(D.getFilteredSelectedRowModel().rows.map(a=>a.original.id))},[z]);let E=D.getRowModel().rows,F=D.getFilteredRowModel().rows.length,G=D.getPageCount(),H=B.pageIndex+1;return console.log("[PAGINATED TABLE] Current page:",H,"of",G,", showing",E.length,"rows"),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:`flex items-center justify-between px-4 py-3 border-b ${j?"bg-gray-900/30 border-gray-800":"bg-gray-50 border-gray-200"}`,children:[(0,b.jsxs)("div",{className:`text-sm ${j?"text-gray-400":"text-gray-600"}`,children:["Showing ",(0,b.jsx)("span",{className:`font-medium ${j?"text-gray-200":"text-gray-900"}`,children:B.pageIndex*B.pageSize+1})," to"," ",(0,b.jsx)("span",{className:`font-medium ${j?"text-gray-200":"text-gray-900"}`,children:Math.min((B.pageIndex+1)*B.pageSize,F)})," of"," ",(0,b.jsx)("span",{className:`font-medium ${j?"text-gray-200":"text-gray-900"}`,children:F})," results"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(r.Select,{value:`${B.pageSize}`,onValueChange:a=>{C(b=>({...b,pageSize:Number(a),pageIndex:0}))},children:[(0,b.jsx)(r.SelectTrigger,{className:`h-8 w-[100px] ${j?"bg-gray-800/50 border-gray-700 text-gray-200":"bg-white border-gray-300 text-gray-900"}`,children:(0,b.jsx)(r.SelectValue,{placeholder:`${B.pageSize}`})}),(0,b.jsxs)(r.SelectContent,{className:j?"bg-gray-900 border-gray-700":"bg-white border-gray-200",children:[(0,b.jsx)(r.SelectItem,{value:"10",className:j?"text-gray-200":"text-gray-900",children:"10 rows"}),(0,b.jsx)(r.SelectItem,{value:"25",className:j?"text-gray-200":"text-gray-900",children:"25 rows"}),(0,b.jsx)(r.SelectItem,{value:"50",className:j?"text-gray-200":"text-gray-900",children:"50 rows"}),(0,b.jsx)(r.SelectItem,{value:"100",className:j?"text-gray-200":"text-gray-900",children:"100 rows"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:`h-8 w-8 disabled:opacity-30 transition-all ${j?"hover:bg-gray-800":"hover:bg-gray-100"}`,onClick:()=>D.setPageIndex(0),disabled:!D.getCanPreviousPage(),children:(0,b.jsx)(u.ChevronsLeft,{className:`h-4 w-4 ${j?"text-gray-400":"text-gray-500"}`})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:`h-8 w-8 disabled:opacity-30 transition-all ${j?"hover:bg-gray-800":"hover:bg-gray-100"}`,onClick:()=>D.previousPage(),disabled:!D.getCanPreviousPage(),children:(0,b.jsx)(s.ChevronLeft,{className:`h-4 w-4 ${j?"text-gray-400":"text-gray-500"}`})}),(0,b.jsx)("div",{className:"flex items-center gap-1 px-3",children:(0,b.jsxs)("span",{className:`text-sm ${j?"text-gray-400":"text-gray-600"}`,children:["Page ",(0,b.jsx)("span",{className:`font-medium ${j?"text-gray-200":"text-gray-900"}`,children:H})," of ",(0,b.jsx)("span",{className:`font-medium ${j?"text-gray-200":"text-gray-900"}`,children:G})]})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:`h-8 w-8 disabled:opacity-30 transition-all ${j?"hover:bg-gray-800":"hover:bg-gray-100"}`,onClick:()=>D.nextPage(),disabled:!D.getCanNextPage(),children:(0,b.jsx)(t.ChevronRight,{className:`h-4 w-4 ${j?"text-gray-400":"text-gray-500"}`})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:`h-8 w-8 disabled:opacity-30 transition-all ${j?"hover:bg-gray-800":"hover:bg-gray-100"}`,onClick:()=>D.setPageIndex(G-1),disabled:!D.getCanNextPage(),children:(0,b.jsx)(v.ChevronsRight,{className:`h-4 w-4 ${j?"text-gray-400":"text-gray-500"}`})})]})]})]}),(0,b.jsx)("div",{className:`rounded-lg overflow-x-auto overflow-y-hidden border ${j?"border-gray-800":"border-gray-200"}`,children:(0,b.jsxs)(q.Table,{children:[(0,b.jsx)(q.TableHeader,{children:D.getHeaderGroups().map(a=>(0,b.jsx)(q.TableRow,{className:`${j?"border-gray-800":"border-gray-200"} hover:bg-transparent`,children:a.headers.map(a=>(0,b.jsx)(q.TableHead,{className:`font-medium text-xs uppercase tracking-wider ${j?"text-gray-300 bg-gray-900/80":"text-gray-700 bg-gray-50"}`,children:a.isPlaceholder?null:(0,o.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(q.TableBody,{children:E?.length?E.map((a,c)=>(0,b.jsx)(q.TableRow,{"data-state":a.getIsSelected()&&"selected",className:`
                    ${j?"border-gray-800":"border-gray-200"} transition-all duration-150
                    ${j?"hover:bg-gray-800/30":"hover:bg-gray-50"} hover:shadow-sm
                    ${a.getIsSelected()?j?"bg-blue-900/10":"bg-blue-50":""}
                    ${c%2==0?j?"bg-gray-900/20":"bg-gray-50/50":"bg-transparent"}
                  `,children:a.getVisibleCells().map(a=>(0,b.jsx)(q.TableCell,{className:`py-3 ${j?"text-gray-100":"text-gray-900"}`,children:(0,o.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(q.TableRow,{children:(0,b.jsx)(q.TableCell,{colSpan:a.length,className:"h-32 text-center text-gray-500",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,b.jsx)("svg",{className:`w-12 h-12 ${j?"text-gray-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,b.jsx)("p",{className:"text-sm",children:"No subscriptions found"})]})})})})]})}),(0,b.jsxs)("div",{className:`flex items-center justify-between px-4 py-3 border-t ${j?"bg-gray-900/30 border-gray-800":"bg-gray-50 border-gray-200"}`,children:[(0,b.jsx)("div",{className:`text-sm ${j?"text-gray-400":"text-gray-600"}`,children:D.getFilteredSelectedRowModel().rows.length>0&&(0,b.jsxs)("span",{className:"text-blue-500 font-medium",children:[D.getFilteredSelectedRowModel().rows.length," selected"]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>D.previousPage(),disabled:!D.getCanPreviousPage(),className:`disabled:opacity-30 transition-all ${j?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-100 text-gray-700"}`,children:"Previous"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[Array.from({length:Math.min(5,G)},(a,c)=>{let d=c+1,e=d===H;return(0,b.jsx)("button",{onClick:()=>D.setPageIndex(c),className:`
                    w-8 h-8 rounded text-sm font-medium transition-all
                    ${e?"bg-blue-600 text-white":j?"text-gray-400 hover:bg-gray-800 hover:text-gray-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                  `,children:d},c)}),G>5&&(0,b.jsx)("span",{className:`px-2 ${j?"text-gray-500":"text-gray-400"}`,children:"..."})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>D.nextPage(),disabled:!D.getCanNextPage(),className:`disabled:opacity-30 transition-all ${j?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-100 text-gray-700"}`,children:"Next"})]})]})]})}var y=a.i(266828),z=a.i(294565),A=a.i(264890),B=a.i(399580),C=a.i(42329),D=a.i(3321),E=a.i(625473),F=a.i(470664),G=a.i(497412);function H(a,b){return new Intl.NumberFormat("en-US",{style:"currency",currency:b||"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}function I(a,b){return new Intl.NumberFormat("en-US",{style:"currency",currency:b||"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}function J(a){return a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}let K=[{id:"select",header:({table:a})=>(0,b.jsx)(y.Checkbox,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:b=>a.toggleAllPageRowsSelected(!!b),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:a})=>(0,b.jsx)(y.Checkbox,{checked:a.getIsSelected(),onCheckedChange:b=>a.toggleSelected(!!b),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"subscription_number",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Sub #",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("subscription_number");return(0,b.jsxs)("div",{className:"font-mono font-semibold",children:["#",c]})}},{accessorKey:"investor.legal_name",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Investor",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.original.investor;return c?(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(G.default,{href:`/versotech_main/investors/${c.id}`,className:"font-semibold hover:underline",children:c.legal_name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs capitalize",children:c.type}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:c.country})]})]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}},{accessorKey:"vehicle.name",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Vehicle",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.original.vehicle;return c?(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-semibold",children:c.name}),c.type&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground capitalize",children:c.type})]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}},{accessorKey:"commitment",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Commitment",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=parseFloat(a.getValue("commitment")),d=a.original.currency;return(0,b.jsx)("div",{className:"text-right font-semibold",children:H(c,d)})}},{accessorKey:"status",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Status",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("status"),d={active:B.CheckCircle2,committed:D.Loader2,pending:C.Clock,closed:F.Archive,cancelled:E.XCircle}[c]||C.Clock;return(0,b.jsxs)(g.Badge,{className:`${{active:"bg-green-900/30 text-green-300 border-green-700",committed:"bg-blue-900/30 text-blue-300 border-blue-700",pending:"bg-yellow-900/30 text-yellow-300 border-yellow-700",closed:"bg-gray-800/50 text-gray-300 border-gray-700",cancelled:"bg-red-900/30 text-red-300 border-red-700"}[c]||"bg-gray-800/50 text-gray-300 border-gray-700"} flex items-center gap-1.5 w-fit`,variant:"outline",children:[(0,b.jsx)(d,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{className:"capitalize",children:c})]})},filterFn:(a,b,c)=>c.includes(a.getValue(b))},{accessorKey:"committed_at",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Committed Date",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("committed_at");return(0,b.jsx)("div",{className:"text-sm",children:J(c)})}},{accessorKey:"created_at",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Created Date",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.getValue("created_at");return(0,b.jsx)("div",{className:"text-sm",children:J(c)})}},{accessorKey:"num_shares",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Num Shares",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.num_shares;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:c.toLocaleString()})}},{accessorKey:"price_per_share",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Price/Share",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.price_per_share,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:I(c,d)})}},{accessorKey:"cost_per_share",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Cost/Share",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.cost_per_share,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:I(c,d)})}},{accessorKey:"spread_per_share",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Spread/Share",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.spread_per_share,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm text-green-400",children:I(c,d)})}},{accessorKey:"spread_fee_amount",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Spread Fee",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.spread_fee_amount,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:H(c,d)})}},{accessorKey:"subscription_fee_percent",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Sub Fee %",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.subscription_fee_percent;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsxs)("div",{className:"text-right font-semibold text-sm",children:[c.toFixed(2),"%"]})}},{accessorKey:"subscription_fee_amount",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Sub Fee $",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.subscription_fee_amount,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:H(c,d)})}},{accessorKey:"bd_fee_percent",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["BD Fee %",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.bd_fee_percent;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsxs)("div",{className:"text-right font-semibold text-sm",children:[c.toFixed(2),"%"]})}},{accessorKey:"bd_fee_amount",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["BD Fee $",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.bd_fee_amount,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:H(c,d)})}},{accessorKey:"finra_fee_amount",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["FINRA Fee",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.finra_fee_amount,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:H(c,d)})}},{accessorKey:"funded_amount",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Funded Amount",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=parseFloat(a.getValue("funded_amount")),d=a.original.currency;return(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:H(c,d)})}},{accessorKey:"outstanding_amount",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Outstanding",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.outstanding_amount,d=a.original.currency;return null==c||0===c?(0,b.jsx)("div",{className:"text-right text-muted-foreground text-sm",children:"Fully funded"}):(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)("div",{className:"font-semibold text-sm text-yellow-600",children:H(c,d)})})}},{accessorKey:"current_nav",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Current NAV",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.current_nav,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:H(c,d)})}},{accessorKey:"opportunity_name",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Opportunity",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.original.vehicle?.investment_name;return c?(0,b.jsx)("div",{className:"max-w-[200px]",children:(0,b.jsx)("div",{className:"text-sm font-medium truncate",title:c,children:c})}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{accessorKey:"contract_date",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Contract Date",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.original.contract_date;return(0,b.jsx)("div",{className:"text-sm",children:J(c)})}},{accessorKey:"sourcing_contract_ref",header:({column:a})=>(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4",children:["Sourcing Ref",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.original.sourcing_contract_ref;return c?(0,b.jsx)("div",{className:"text-sm font-mono max-w-[150px] truncate",title:c,children:c}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{id:"introducer",header:()=>(0,b.jsx)("div",{children:"Introducer"}),cell:({row:a})=>{let c=a.original.introducer;return c?(0,b.jsx)("div",{className:"text-sm font-medium max-w-[150px] truncate",title:c.legal_name,children:c.legal_name}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{id:"introduction",header:()=>(0,b.jsx)("div",{children:"Introduction"}),cell:({row:a})=>{let c=a.original.introduction_id;return c?(0,b.jsxs)("div",{className:"text-xs font-mono text-muted-foreground max-w-[100px] truncate",title:c,children:[c.substring(0,8),"..."]}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{id:"notes",header:()=>(0,b.jsx)("div",{children:"Notes"}),cell:({row:a})=>{let c=a.original.acknowledgement_notes;return c?(0,b.jsx)("div",{className:"text-sm max-w-[200px] truncate",title:c,children:c}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})}},{accessorKey:"performance_fee_tier1_percent",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Perf Tier 1 %",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.performance_fee_tier1_percent;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsxs)("div",{className:"text-right font-semibold text-sm text-purple-400",children:[c,"%"]})}},{accessorKey:"performance_fee_tier1_threshold",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Perf Tier 1 Threshold",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.performance_fee_tier1_threshold,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:H(c,d)})}},{accessorKey:"performance_fee_tier2_percent",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Perf Tier 2 %",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.performance_fee_tier2_percent;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsxs)("div",{className:"text-right font-semibold text-sm text-purple-300",children:[c,"%"]})}},{accessorKey:"performance_fee_tier2_threshold",header:({column:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-mr-4",children:["Perf Tier 2 Threshold",(0,b.jsx)(z.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{let c=a.original.performance_fee_tier2_threshold,d=a.original.currency;return null==c?(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"}):(0,b.jsx)("div",{className:"text-right font-semibold text-sm",children:H(c,d)})}},{id:"actions",header:()=>(0,b.jsx)("div",{className:"text-center",children:"Actions"}),cell:({row:a})=>{let c=a.original;return(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(G.default,{href:`/versotech_main/subscriptions/${c.id}`,children:(0,b.jsx)(f.Button,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-full bg-white text-black border-white hover:bg-gray-200",title:"View Details",children:(0,b.jsx)(A.Eye,{className:"h-4 w-4"})})})})}}];var L=a.i(470305),M=a.i(249464),N=a.i(155508),O=a.i(888987);let P=[{value:"pending",label:"Pending",darkColor:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",lightColor:"bg-yellow-100 text-yellow-700 border-yellow-300"},{value:"committed",label:"Committed",darkColor:"bg-blue-500/20 text-blue-300 border-blue-500/50",lightColor:"bg-blue-100 text-blue-700 border-blue-300"},{value:"active",label:"Active",darkColor:"bg-green-500/20 text-green-300 border-green-500/50",lightColor:"bg-green-100 text-green-700 border-green-300"},{value:"closed",label:"Closed",darkColor:"bg-gray-500/20 text-gray-300 border-gray-500/50",lightColor:"bg-gray-100 text-gray-700 border-gray-300"},{value:"cancelled",label:"Cancelled",darkColor:"bg-red-500/20 text-red-300 border-red-500/50",lightColor:"bg-red-100 text-red-700 border-red-300"}];function Q({open:a,onOpenChange:d,filters:e,onApply:i}){let{theme:j}=(0,w.useTheme)(),k="staff-dark"===j,[l,n]=(0,c.useState)(e),o=[l.search,l.statuses?.length,l.commitmentMin,l.commitmentMax].filter(Boolean).length;return(0,b.jsx)(L.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(L.DialogContent,{className:(0,O.cn)("sm:max-w-[500px]",k?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900"),children:[(0,b.jsx)(L.DialogHeader,{children:(0,b.jsxs)(L.DialogTitle,{className:(0,O.cn)("flex items-center justify-between text-xl",k?"text-white":"text-gray-900"),children:[(0,b.jsx)("span",{children:"Filter Subscriptions"}),o>0&&(0,b.jsxs)(g.Badge,{variant:"secondary",className:"ml-2",children:[o," active"]})]})}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{className:(0,O.cn)("text-sm font-medium",k?"text-gray-200":"text-gray-700"),children:"Search"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(m.Search,{className:(0,O.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",k?"text-gray-400":"text-gray-500")}),(0,b.jsx)(h.Input,{placeholder:"Search by number, investor, or vehicle...",value:l.search||"",onChange:a=>n(b=>({...b,search:a.target.value})),className:(0,O.cn)("pl-10",k?"bg-gray-800 border-gray-600 text-white placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{className:(0,O.cn)("text-sm font-medium",k?"text-gray-200":"text-gray-700"),children:"Status"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:P.map(a=>(0,b.jsxs)(g.Badge,{variant:"outline",className:(0,O.cn)("cursor-pointer transition-all",l.statuses?.includes(a.value)?k?a.darkColor:a.lightColor:k?"bg-gray-800 text-gray-400 border-gray-600 hover:border-gray-500":"bg-gray-50 text-gray-600 border-gray-300 hover:border-gray-400"),onClick:()=>{var b;let c,d;return b=a.value,d=(c=l.statuses||[]).includes(b)?c.filter(a=>a!==b):[...c,b],void n(a=>({...a,statuses:d.length>0?d:void 0}))},children:[l.statuses?.includes(a.value)&&(0,b.jsx)("span",{className:"mr-1",children:"âœ“"}),a.label]},a.value))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{className:(0,O.cn)("text-sm font-medium",k?"text-gray-200":"text-gray-700"),children:"Commitment Amount"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(N.DollarSign,{className:(0,O.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",k?"text-gray-400":"text-gray-500")}),(0,b.jsx)(h.Input,{type:"number",placeholder:"Min",value:l.commitmentMin||"",onChange:a=>n(b=>({...b,commitmentMin:a.target.value?Number(a.target.value):void 0})),className:(0,O.cn)("pl-10",k?"bg-gray-800 border-gray-600 text-white placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]}),(0,b.jsx)("span",{className:k?"text-gray-400":"text-gray-500",children:"to"}),(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(N.DollarSign,{className:(0,O.cn)("absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4",k?"text-gray-400":"text-gray-500")}),(0,b.jsx)(h.Input,{type:"number",placeholder:"Max",value:l.commitmentMax||"",onChange:a=>n(b=>({...b,commitmentMax:a.target.value?Number(a.target.value):void 0})),className:(0,O.cn)("pl-10",k?"bg-gray-800 border-gray-600 text-white placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400")})]})]})]})]}),(0,b.jsxs)(L.DialogFooter,{className:"flex items-center justify-between",children:[(0,b.jsx)(f.Button,{variant:"ghost",onClick:()=>{n({}),i({}),d(!1)},className:k?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900",children:"Clear All"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>d(!1),className:k?"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-800":"bg-transparent border-gray-300 text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:()=>{i(l),d(!1)},className:"bg-blue-600 text-white hover:bg-blue-700",children:"Apply Filters"})]})]})]})})}var R=a.i(191675),S=a.i(899750);function T({open:a,onOpenChange:d,onSuccess:e,vehicles:g,investors:i}){let[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)({investor_id:"",vehicle_id:"",commitment:"",currency:"USD",status:"pending",effective_date:"",funding_due_at:"",units:"",acknowledgement_notes:""}),o=async a=>{if(a.preventDefault(),!m.investor_id||!m.vehicle_id||!m.commitment)return void S.toast.error("Please fill in all required fields");l(!0);try{let a=await fetch("/api/subscriptions/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,commitment:parseFloat(m.commitment),units:m.units?parseFloat(m.units):null})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to create subscription")}S.toast.success("Subscription created successfully"),d(!1),e(),n({investor_id:"",vehicle_id:"",commitment:"",currency:"USD",status:"pending",effective_date:"",funding_due_at:"",units:"",acknowledgement_notes:""})}catch(a){console.error("Create subscription error:",a),S.toast.error(a instanceof Error?a.message:"Failed to create subscription")}finally{l(!1)}};return(0,b.jsx)(L.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(L.DialogContent,{className:"bg-background border-border text-foreground max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(L.DialogHeader,{className:"border-b border-border pb-4",children:[(0,b.jsxs)(L.DialogTitle,{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[(0,b.jsx)(j.Plus,{className:"h-6 w-6 text-blue-400"}),"New Subscription"]}),(0,b.jsx)(L.DialogDescription,{className:"text-muted-foreground",children:"Create a new subscription for an investor in a vehicle"})]}),(0,b.jsxs)("form",{onSubmit:o,className:"space-y-6 pt-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(M.Label,{htmlFor:"investor_id",className:"text-foreground text-sm font-medium",children:["Investor ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)(r.Select,{value:m.investor_id,onValueChange:a=>n({...m,investor_id:a}),required:!0,children:[(0,b.jsx)(r.SelectTrigger,{id:"investor_id",className:"bg-muted border-border text-foreground",children:(0,b.jsx)(r.SelectValue,{placeholder:"Select an investor"})}),(0,b.jsx)(r.SelectContent,{className:"bg-muted border-border max-h-[200px]",children:i.map(a=>(0,b.jsx)(r.SelectItem,{value:a.id,className:"text-foreground",children:a.legal_name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(M.Label,{htmlFor:"vehicle_id",className:"text-foreground text-sm font-medium",children:["Vehicle ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsxs)(r.Select,{value:m.vehicle_id,onValueChange:a=>n({...m,vehicle_id:a}),required:!0,children:[(0,b.jsx)(r.SelectTrigger,{id:"vehicle_id",className:"bg-muted border-border text-foreground",children:(0,b.jsx)(r.SelectValue,{placeholder:"Select a vehicle"})}),(0,b.jsx)(r.SelectContent,{className:"bg-muted border-border max-h-[200px]",children:g.map(a=>(0,b.jsx)(r.SelectItem,{value:a.id,className:"text-foreground",children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(M.Label,{htmlFor:"commitment",className:"text-foreground text-sm font-medium",children:["Commitment Amount ",(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)(h.Input,{id:"commitment",type:"number",step:"0.01",placeholder:"0.00",value:m.commitment,onChange:a=>n({...m,commitment:a.target.value}),className:"bg-muted border-border text-foreground",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{htmlFor:"currency",className:"text-foreground text-sm font-medium",children:"Currency"}),(0,b.jsxs)(r.Select,{value:m.currency,onValueChange:a=>n({...m,currency:a}),children:[(0,b.jsx)(r.SelectTrigger,{id:"currency",className:"bg-muted border-border text-foreground",children:(0,b.jsx)(r.SelectValue,{})}),(0,b.jsxs)(r.SelectContent,{className:"bg-muted border-border",children:[(0,b.jsx)(r.SelectItem,{value:"USD",className:"text-foreground",children:"USD"}),(0,b.jsx)(r.SelectItem,{value:"EUR",className:"text-foreground",children:"EUR"}),(0,b.jsx)(r.SelectItem,{value:"GBP",className:"text-foreground",children:"GBP"}),(0,b.jsx)(r.SelectItem,{value:"CHF",className:"text-foreground",children:"CHF"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{htmlFor:"status",className:"text-foreground text-sm font-medium",children:"Status"}),(0,b.jsxs)(r.Select,{value:m.status,onValueChange:a=>n({...m,status:a}),children:[(0,b.jsx)(r.SelectTrigger,{id:"status",className:"bg-muted border-border text-foreground",children:(0,b.jsx)(r.SelectValue,{})}),(0,b.jsxs)(r.SelectContent,{className:"bg-muted border-border",children:[(0,b.jsx)(r.SelectItem,{value:"pending",className:"text-foreground",children:"Pending"}),(0,b.jsx)(r.SelectItem,{value:"committed",className:"text-foreground",children:"Committed"}),(0,b.jsx)(r.SelectItem,{value:"active",className:"text-foreground",children:"Active"}),(0,b.jsx)(r.SelectItem,{value:"closed",className:"text-foreground",children:"Closed"}),(0,b.jsx)(r.SelectItem,{value:"cancelled",className:"text-foreground",children:"Cancelled"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{htmlFor:"effective_date",className:"text-foreground text-sm font-medium",children:"Effective Date"}),(0,b.jsx)(h.Input,{id:"effective_date",type:"date",value:m.effective_date,onChange:a=>n({...m,effective_date:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{htmlFor:"funding_due_at",className:"text-foreground text-sm font-medium",children:"Funding Due Date"}),(0,b.jsx)(h.Input,{id:"funding_due_at",type:"date",value:m.funding_due_at,onChange:a=>n({...m,funding_due_at:a.target.value}),className:"bg-muted border-border text-foreground"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{htmlFor:"units",className:"text-foreground text-sm font-medium",children:"Number of Units"}),(0,b.jsx)(h.Input,{id:"units",type:"number",step:"0.01",placeholder:"Optional",value:m.units,onChange:a=>n({...m,units:a.target.value}),className:"bg-muted border-border text-foreground"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(M.Label,{htmlFor:"acknowledgement_notes",className:"text-foreground text-sm font-medium",children:"Notes"}),(0,b.jsx)(R.Textarea,{id:"acknowledgement_notes",placeholder:"Add any additional notes...",value:m.acknowledgement_notes,onChange:a=>n({...m,acknowledgement_notes:a.target.value}),className:"bg-muted border-border text-foreground min-h-[100px]"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-border",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>d(!1),className:"bg-muted text-foreground border-border hover:bg-muted/80",disabled:k,children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",className:"bg-primary text-primary-foreground hover:bg-primary/90",disabled:k,children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Plus,{className:"mr-2 h-4 w-4"}),"Create Subscription"]})})]})]})]})})}function U({basePath:a="/versotech/staff"}){let o=(0,d.useRouter)(),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(0),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)({}),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)([]),[L,M]=(0,c.useState)(!1);(0,c.useEffect)(()=>{N()},[]);let N=async()=>{try{s(!0);let[a,b,c,d]=await Promise.all([fetch("/api/subscriptions"),fetch("/api/vehicles"),fetch("/api/investors"),fetch("/api/subscription-submissions/summary")]);if(!a.ok)throw Error("Failed to load subscriptions");let e=await a.json();if(q(e.subscriptions||[]),b.ok){let a=await b.json();H(a.vehicles||[])}if(c.ok){let a=await c.json();J(a.investors||[])}if(d.ok){let a=await d.json();w(a.totalAmount||0)}}catch(a){console.error("Load error:",a),S.toast.error("Failed to load subscriptions")}finally{s(!1)}},O=async()=>{u(!0);try{let a=await fetch("/api/subscriptions");if(!a.ok)throw Error("Failed to refresh");let b=await a.json();q(b.subscriptions||[]),F([]),S.toast.success("Data refreshed")}catch(a){S.toast.error("Failed to refresh data")}finally{u(!1)}},P=(0,c.useMemo)(()=>{if(!p||0===p.length)return[];let a=p;if(y){let b=y.toLowerCase();a=a.filter(a=>[a.subscription_number?.toString(),a.investor?.legal_name,a.vehicle?.name].filter(Boolean).join(" ").toLowerCase().includes(b))}if(A.search){let b=A.search.toLowerCase();a=a.filter(a=>[a.subscription_number?.toString(),a.investor?.legal_name,a.vehicle?.name,a.opportunity_name].filter(Boolean).join(" ").toLowerCase().includes(b))}return A.statuses?.length&&(a=a.filter(a=>A.statuses.includes(a.status))),A.commitmentMin&&(a=a.filter(a=>a.commitment>=A.commitmentMin)),A.commitmentMax&&(a=a.filter(a=>a.commitment<=A.commitmentMax)),a},[p,y,A]),R=(0,c.useMemo)(()=>{let a=P.length,b=P.reduce((a,b)=>a+(b.commitment||0),0);return{total:a,totalCommitment:b,totalFunded:P.reduce((a,b)=>a+(b.funded_amount||0),0),activeCount:P.filter(a=>"active"===a.status).length}},[P]),U=async()=>{try{let a=E.length>0?E:P.map(a=>a.id);S.toast.info(`Exporting ${a.length} subscriptions...`)}catch(a){S.toast.error("Failed to export")}},V=[A.search,A.statuses?.length,A.commitmentMin,A.commitmentMax].filter(Boolean).length;return r?(0,b.jsx)("div",{className:"p-6 space-y-6",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-zinc-700 rounded w-64"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-zinc-700 rounded"},c))}),(0,b.jsx)("div",{className:"h-96 bg-gray-200 dark:bg-zinc-700 rounded"})]})}):(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Subscription Management"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage and track all investment subscriptions"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:O,disabled:t,children:[(0,b.jsx)(l.RefreshCw,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>o.push(`${a}/subscriptions/vehicle-summary`),children:[(0,b.jsx)(n.TrendingUp,{className:"h-4 w-4 mr-2"}),"Summary"]}),(0,b.jsxs)(f.Button,{onClick:()=>M(!0),size:"sm",children:[(0,b.jsx)(j.Plus,{className:"h-4 w-4 mr-2"}),"New Subscription"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Subscriptions"})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-foreground",children:R.total.toLocaleString()}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"All subscriptions"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Confirmed Interest"})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",(v/1e6).toFixed(1),"M"]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Interests confirmed"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Commitment"})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["$",(R.totalCommitment/1e6).toFixed(1),"M"]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Committed capital"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Funded"})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",(R.totalFunded/1e6).toFixed(1),"M"]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:"Capital deployed"})]})]})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{placeholder:"Search by number, investor, or vehicle...",value:y,onChange:a=>z(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>D(!0),children:[(0,b.jsx)(k.Filter,{className:"h-4 w-4 mr-2"}),"Filters",V>0&&(0,b.jsx)(g.Badge,{variant:"secondary",className:"ml-2",children:V})]}),E.length>0&&(0,b.jsxs)(f.Button,{variant:"outline",onClick:U,children:[(0,b.jsx)(i.Download,{className:"h-4 w-4 mr-2"}),"Export (",E.length,")"]})]})]})})}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)(e.CardTitle,{children:["All Subscriptions (",P.length,")"]}),(0,b.jsxs)(e.CardDescription,{children:["Comprehensive subscription list with sortable columns and bulk actions",E.length>0&&(0,b.jsxs)("span",{className:"text-muted-foreground text-sm ml-2",children:["(",E.length," selected)"]})]})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(x,{data:P,columns:K,selectedIds:E,onSelectionChange:F,pageSize:50})})]}),(0,b.jsx)(Q,{open:C,onOpenChange:D,filters:A,onApply:B,vehicles:G}),(0,b.jsx)(T,{open:L,onOpenChange:M,investors:I,vehicles:G,onSuccess:O})]})}a.s(["StyledSubscriptionsPage",()=>U],68537)}];

//# sourceMappingURL=86678_versotech_staff_subscriptions_components_styled-subscriptions-page_tsx_bf0fcdc6._.js.map