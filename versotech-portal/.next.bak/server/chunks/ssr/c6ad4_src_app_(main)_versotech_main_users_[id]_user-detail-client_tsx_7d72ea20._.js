module.exports=[416608,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(497412),e=a.i(289633),f=a.i(899750),g=a.i(284169),h=a.i(421908),i=a.i(15788),j=a.i(105874),k=a.i(479612),l=a.i(975965),m=a.i(439467),n=a.i(231276),o=a.i(806640),p=a.i(724070),q=a.i(42329),r=a.i(991861),s=a.i(496392),t=a.i(752907),u=a.i(278541),v=a.i(618287),w=a.i(3321),x=a.i(441278),y=a.i(625473),z=a.i(838086),A=a.i(92881),B=a.i(586105),C=a.i(493469);let D={staff_admin:{label:"Staff Admin",className:"bg-blue-500/20 text-blue-400 border-blue-500/30"},staff_ops:{label:"Staff Ops",className:"bg-blue-500/20 text-blue-400 border-blue-500/30"},staff_rm:{label:"Staff RM",className:"bg-blue-500/20 text-blue-400 border-blue-500/30"},ceo:{label:"CEO",className:"bg-purple-500/20 text-purple-400 border-purple-500/30"},investor:{label:"Investor",className:"bg-green-500/20 text-green-400 border-green-500/30"},partner:{label:"Partner",className:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},lawyer:{label:"Lawyer",className:"bg-violet-500/20 text-violet-400 border-violet-500/30"},introducer:{label:"Introducer",className:"bg-orange-500/20 text-orange-400 border-orange-500/30"},arranger:{label:"Arranger",className:"bg-amber-500/20 text-amber-400 border-amber-500/30"},commercial_partner:{label:"Commercial Partner",className:"bg-teal-500/20 text-teal-400 border-teal-500/30"},multi_persona:{label:"Multi-Role",className:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"}},E={investor:{label:"Investor",className:"bg-green-500/20 text-green-400 border-green-500/30"},partner:{label:"Partner",className:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},lawyer:{label:"Lawyer",className:"bg-violet-500/20 text-violet-400 border-violet-500/30"},commercial_partner:{label:"Commercial Partner",className:"bg-teal-500/20 text-teal-400 border-teal-500/30"},introducer:{label:"Introducer",className:"bg-orange-500/20 text-orange-400 border-orange-500/30"},arranger:{label:"Arranger",className:"bg-amber-500/20 text-amber-400 border-amber-500/30"}},F={approved:{label:"Approved",className:"text-green-400",icon:"check"},pending:{label:"Pending",className:"text-yellow-400",icon:"clock"},submitted:{label:"Submitted",className:"text-blue-400",icon:"upload"},rejected:{label:"Rejected",className:"text-red-400",icon:"x"},expired:{label:"Expired",className:"text-orange-400",icon:"alert"}},G={investor:"/versotech_main/investors",partner:"/versotech_main/partners",lawyer:"/versotech_main/lawyers",commercial_partner:"/versotech_main/commercial-partners",introducer:"/versotech_main/introducers",arranger:"/versotech_main/arrangers"},H={check:x.CheckCircle,clock:q.Clock,upload:q.Clock,x:y.XCircle,alert:z.AlertTriangle},I={approved:"bg-green-500/20 text-green-400 border-green-500/30",submitted:"bg-blue-500/20 text-blue-400 border-blue-500/30",pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",rejected:"bg-red-500/20 text-red-400 border-red-500/30",expired:"bg-orange-500/20 text-orange-400 border-orange-500/30"};function J({status:a}){let c=F[a];if(!c)return null;let d=H[c.icon]||x.CheckCircle,e=I[a]||"bg-gray-500/20 text-gray-400 border-gray-500/30";return(0,b.jsxs)(i.Badge,{variant:"outline",className:e,children:[(0,b.jsx)(d,{className:"h-3 w-3 mr-1"}),"KYC ",c.label]})}function K({user:a,fullKycData:x}){let y=(0,e.useRouter)(),[z,H]=(0,c.useState)(!1),[I,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),P=D[a.systemRole]||{label:a.systemRole,className:"bg-gray-500/20 text-gray-400"},Q=async()=>{O(!0);try{let b=await fetch(`/api/admin/users/${a.id}/reset-password`,{method:"POST"}),c=await b.json().catch(()=>({}));b.ok&&c?.success?(f.toast.success("Password reset email sent successfully"),H(!1)):f.toast.error(c?.error||"Failed to send password reset email")}catch(a){console.error("Reset password error:",a),f.toast.error("An error occurred while sending password reset email")}finally{O(!1)}},R=async()=>{O(!0);try{let b=await fetch(`/api/admin/users/${a.id}/deactivate`,{method:"PATCH"}),c=await b.json().catch(()=>({}));b.ok&&c?.success?(f.toast.success("User deactivated successfully"),K(!1),y.push("/versotech_main/users")):f.toast.error(c?.error||"Failed to deactivate user")}catch(a){console.error("Deactivate error:",a),f.toast.error("An error occurred while deactivating user")}finally{O(!1)}},S=async()=>{O(!0);try{let b=await fetch(`/api/admin/users/${a.id}/reactivate`,{method:"PATCH"}),c=await b.json().catch(()=>({}));b.ok&&c?.success?(f.toast.success("User reactivated successfully"),M(!1),y.refresh()):f.toast.error(c?.error||"Failed to reactivate user")}catch(a){console.error("Reactivate error:",a),f.toast.error("An error occurred while reactivating user")}finally{O(!1)}};return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsx)(d.default,{href:"/versotech_main/users",children:(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"bg-gray-800 text-white hover:bg-gray-700",children:[(0,b.jsx)(l.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Users"]})})})}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(j.Avatar,{className:"h-20 w-20",children:[a.avatarUrl&&(0,b.jsx)(j.AvatarImage,{src:a.avatarUrl,alt:a.displayName}),(0,b.jsx)(j.AvatarFallback,{className:"text-xl",children:a.displayName.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2)})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(g.CardTitle,{className:"text-2xl flex items-center gap-2",children:[a.displayName,a.isSuperAdmin&&(0,b.jsxs)(i.Badge,{variant:"outline",className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:[(0,b.jsx)(s.Shield,{className:"h-3 w-3 mr-1"}),"Super Admin"]})]}),(0,b.jsx)(g.CardDescription,{className:"text-base mt-1",children:a.title||"No title"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(i.Badge,{variant:"outline",className:P.className,children:P.label}),a.kyc?.status&&F[a.kyc.status]&&(0,b.jsx)(J,{status:a.kyc.status}),a.isDeleted&&(0,b.jsx)(i.Badge,{variant:"destructive",children:"Deactivated"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>window.location.href=`mailto:${a.email}`,children:[(0,b.jsx)(m.Mail,{className:"h-4 w-4 mr-2"}),"Send Email"]}),(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>H(!0),disabled:a.isDeleted,children:[(0,b.jsx)(r.Key,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),a.isDeleted?(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>M(!0),className:"border-green-500 text-green-500 hover:bg-green-500/10",children:[(0,b.jsx)(A.UserCheck,{className:"h-4 w-4 mr-2"}),"Reactivate"]}):(0,b.jsxs)(h.Button,{variant:"destructive",size:"sm",onClick:()=>K(!0),children:[(0,b.jsx)(B.UserX,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(m.Mail,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:a.email})]}),a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(n.Phone,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:a.phone})]}),a.officeLocation&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(o.MapPin,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:a.officeLocation})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(p.Calendar,{className:"h-4 w-4"}),(0,b.jsxs)("span",{className:"text-sm",children:["Joined: ",new Date(a.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(q.Clock,{className:"h-4 w-4"}),(0,b.jsxs)("span",{className:"text-sm",children:["Last Active: ",function(a){if(!a)return"Never";let b=new Date(a),c=new Date().getTime()-b.getTime(),d=Math.floor(c/36e5),e=Math.floor(c/864e5);return d<1?"Just now":1===d?"1 hour ago":d<24?`${d} hours ago`:1===e?"Yesterday":e<7?`${e} days ago`:e<30?`${Math.floor(e/7)} weeks ago`:e<365?`${Math.floor(e/30)} months ago`:`${Math.floor(e/365)} years ago`}(a.lastLoginAt)]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Key,{className:`h-4 w-4 ${a.passwordSet?"text-green-400":"text-muted-foreground/30"}`}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Password: ",a.passwordSet?"Set":"Not Set"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.PenTool,{className:`h-4 w-4 ${a.hasSignature?"text-green-400":"text-muted-foreground/30"}`}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Signature: ",a.hasSignature?"Uploaded":"None"]})]})]}),(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[a.entityCount," ",1===a.entityCount?"Entity":"Entities"]})]})})]})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Building2,{className:"h-5 w-5"}),"Entity Associations"]}),(0,b.jsx)(g.CardDescription,{children:"Organizations this user is associated with"})]}),(0,b.jsx)(g.CardContent,{children:0===a.entities.length?(0,b.jsx)("p",{className:"text-muted-foreground text-sm py-4 text-center",children:"No entity associations"}):(0,b.jsx)("div",{className:"space-y-3",children:a.entities.map(a=>{let c=E[a.type],e=G[a.type];return(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-muted/30 hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),(0,b.jsx)(i.Badge,{variant:"outline",className:`text-xs ${c?.className||""}`,children:c?.label||a.type})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground capitalize",children:a.role}),a.isPrimary&&(0,b.jsx)(i.Badge,{variant:"outline",className:"text-xs py-0 bg-blue-500/10 text-blue-400 border-blue-500/30",children:"Primary"}),a.canSign&&(0,b.jsx)(i.Badge,{variant:"outline",className:"text-xs py-0 bg-green-500/10 text-green-400 border-green-500/30",children:"Can Sign"}),a.approvalStatus&&(0,b.jsx)(i.Badge,{variant:"outline",className:`text-xs py-0 ${"approved"===a.approvalStatus?"bg-green-500/10 text-green-400 border-green-500/30":"pending"===a.approvalStatus?"bg-yellow-500/10 text-yellow-400 border-yellow-500/30":"bg-red-500/10 text-red-400 border-red-500/30"}`,children:a.approvalStatus})]})]})}),e&&(0,b.jsx)(d.default,{href:`${e}/${a.id}`,children:(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(v.ExternalLink,{className:"h-4 w-4"})})})]},`${a.type}-${a.id}`)})})})]}),x?(0,b.jsx)(C.IndividualKycDisplay,{data:x,title:"KYC Personal Information",showEditButton:!1}):(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Shield,{className:"h-5 w-5"}),"KYC Personal Information"]}),(0,b.jsx)(g.CardDescription,{children:"Know Your Customer verification status"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("p",{className:"text-muted-foreground text-sm py-4 text-center",children:"No KYC data available for this user"})})]}),(0,b.jsx)(k.AlertDialog,{open:z,onOpenChange:H,children:(0,b.jsxs)(k.AlertDialogContent,{children:[(0,b.jsxs)(k.AlertDialogHeader,{children:[(0,b.jsx)(k.AlertDialogTitle,{children:"Reset Password"}),(0,b.jsxs)(k.AlertDialogDescription,{children:["This will send a password reset email to ",(0,b.jsx)("strong",{children:a.email}),". The user will need to click the link in the email to set a new password."]})]}),(0,b.jsxs)(k.AlertDialogFooter,{children:[(0,b.jsx)(k.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(k.AlertDialogAction,{onClick:Q,disabled:N,children:N?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):"Send Reset Email"})]})]})}),(0,b.jsx)(k.AlertDialog,{open:I,onOpenChange:K,children:(0,b.jsxs)(k.AlertDialogContent,{children:[(0,b.jsxs)(k.AlertDialogHeader,{children:[(0,b.jsx)(k.AlertDialogTitle,{children:"Deactivate User"}),(0,b.jsxs)(k.AlertDialogDescription,{children:["Are you sure you want to deactivate ",(0,b.jsx)("strong",{children:a.displayName}),"? This user will no longer be able to access the platform. This action can be reversed by reactivating the user."]})]}),(0,b.jsxs)(k.AlertDialogFooter,{children:[(0,b.jsx)(k.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(k.AlertDialogAction,{onClick:R,disabled:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:N?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Deactivating..."]}):"Deactivate"})]})]})}),(0,b.jsx)(k.AlertDialog,{open:L,onOpenChange:M,children:(0,b.jsxs)(k.AlertDialogContent,{children:[(0,b.jsxs)(k.AlertDialogHeader,{children:[(0,b.jsx)(k.AlertDialogTitle,{children:"Reactivate User"}),(0,b.jsxs)(k.AlertDialogDescription,{children:["Are you sure you want to reactivate ",(0,b.jsx)("strong",{children:a.displayName}),"? This will restore their access to the platform."]})]}),(0,b.jsxs)(k.AlertDialogFooter,{children:[(0,b.jsx)(k.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(k.AlertDialogAction,{onClick:S,disabled:N,className:"bg-green-600 text-white hover:bg-green-700",children:N?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Reactivating..."]}):"Reactivate"})]})]})})]})}a.s(["UserDetailClient",()=>K],416608)}];

//# sourceMappingURL=c6ad4_src_app_%28main%29_versotech_main_users_%5Bid%5D_user-detail-client_tsx_7d72ea20._.js.map