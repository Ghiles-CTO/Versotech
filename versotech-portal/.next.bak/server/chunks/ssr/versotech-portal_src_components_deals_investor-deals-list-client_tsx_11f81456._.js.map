{"version":3,"sources":["../../../../../versotech-portal/src/components/deals/share-deal-dialog.tsx","../../../../../versotech-portal/src/components/deals/investor-deals-list-client.tsx","../../../../../versotech-portal/node_modules/lucide-react/src/icons/mail-check.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Badge } from '@/components/ui/badge'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { Loader2, Share2, Users, UserPlus, Percent, AlertCircle, CheckCircle2 } from 'lucide-react'\nimport { createClient } from '@/lib/supabase/client'\nimport { toast } from 'sonner'\n\n/**\n * ShareDealDialog - PRD Rows 95-96\n *\n * Row 95: Partner shares deal to INVESTOR only\n * Row 96: Partner shares deal to INVESTOR + INTRODUCER (co-referral)\n *\n * This creates a deal_membership with:\n * - referred_by_entity_id = partner.id\n * - referred_by_entity_type = 'partner'\n * - dispatched_at = now()\n *\n * And automatically applies the partner's fee model from partner_fee_models\n */\n\ninterface Investor {\n  id: string\n  display_name: string | null\n  legal_name: string | null\n  email: string | null\n  type: 'individual' | 'entity'\n}\n\ninterface Introducer {\n  id: string\n  name: string\n  email: string | null\n}\n\ninterface FeeModel {\n  id: string\n  fee_type: string\n  percentage_rate: number | null\n  flat_amount: number | null\n  currency: string | null\n}\n\ninterface ShareDealDialogProps {\n  dealId: string\n  dealName: string\n  partnerId: string\n  children: React.ReactNode\n}\n\nexport function ShareDealDialog({\n  dealId,\n  dealName,\n  partnerId,\n  children\n}: ShareDealDialogProps) {\n  const [open, setOpen] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [submitting, setSubmitting] = useState(false)\n  const [success, setSuccess] = useState(false)\n\n  // Data\n  const [investors, setInvestors] = useState<Investor[]>([])\n  const [introducers, setIntroducers] = useState<Introducer[]>([])\n  const [feeModel, setFeeModel] = useState<FeeModel | null>(null)\n  const [alreadySharedWith, setAlreadySharedWith] = useState<Set<string>>(new Set())\n\n  // Form state\n  const [selectedInvestorId, setSelectedInvestorId] = useState<string>('')\n  const [selectedIntroducerId, setSelectedIntroducerId] = useState<string>('')\n  const [includeIntroducer, setIncludeIntroducer] = useState(false)\n  const [searchInvestor, setSearchInvestor] = useState('')\n\n  useEffect(() => {\n    if (open) {\n      fetchData()\n    }\n  }, [open, partnerId, dealId])\n\n  async function fetchData() {\n    setLoading(true)\n    try {\n      const supabase = createClient()\n\n      // Fetch investors (all investors, partner will pick one to share with)\n      const { data: investorsData, error: investorsError } = await supabase\n        .from('investors')\n        .select('id, display_name, legal_name, email, type')\n        .order('display_name')\n        .limit(100)\n\n      if (investorsError) throw investorsError\n      setInvestors(investorsData || [])\n\n      // Fetch introducers associated with this partner\n      const { data: introducersData, error: introducersError } = await supabase\n        .from('introducers')\n        .select('id, name, email')\n        .order('name')\n        .limit(50)\n\n      if (introducersError) {\n        console.warn('Could not fetch introducers:', introducersError)\n      }\n      setIntroducers(introducersData || [])\n\n      // Fetch partner's fee model for this deal\n      const { data: feeModelData, error: feeModelError } = await supabase\n        .from('partner_fee_models')\n        .select('id, fee_type, percentage_rate, flat_amount, currency')\n        .eq('partner_id', partnerId)\n        .eq('deal_id', dealId)\n        .maybeSingle()\n\n      if (feeModelError) {\n        console.warn('Could not fetch fee model:', feeModelError)\n      }\n      setFeeModel(feeModelData)\n\n      // Check which investors already have deal membership for this deal\n      // (to prevent duplicate shares)\n      const { data: existingMemberships, error: membershipsError } = await supabase\n        .from('deal_memberships')\n        .select('investor_id')\n        .eq('deal_id', dealId)\n        .not('investor_id', 'is', null)\n\n      if (membershipsError) {\n        console.warn('Could not fetch existing memberships:', membershipsError)\n      }\n\n      const sharedSet = new Set<string>()\n      existingMemberships?.forEach(m => {\n        if (m.investor_id) sharedSet.add(m.investor_id)\n      })\n      setAlreadySharedWith(sharedSet)\n\n    } catch (err) {\n      console.error('[ShareDealDialog] Error fetching data:', err)\n      toast.error('Failed to load data')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  async function handleShare() {\n    if (!selectedInvestorId) {\n      toast.error('Please select an investor')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      const response = await fetch('/api/partners/me/share', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          deal_id: dealId,\n          investor_id: selectedInvestorId,\n          introducer_id: includeIntroducer ? selectedIntroducerId : null\n        })\n      })\n\n      const result = await response.json()\n\n      if (!response.ok) {\n        throw new Error(result.error || 'Failed to share deal')\n      }\n\n      setSuccess(true)\n      toast.success('Deal shared successfully!')\n\n      // Update the already shared list\n      setAlreadySharedWith(prev => new Set([...prev, selectedInvestorId]))\n\n      // Reset form after 2 seconds\n      setTimeout(() => {\n        setOpen(false)\n        setSuccess(false)\n        setSelectedInvestorId('')\n        setSelectedIntroducerId('')\n        setIncludeIntroducer(false)\n      }, 2000)\n\n    } catch (err) {\n      console.error('[ShareDealDialog] Error sharing deal:', err)\n      toast.error(err instanceof Error ? err.message : 'Failed to share deal')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  // Filter investors by search\n  const filteredInvestors = investors.filter(inv => {\n    if (!searchInvestor) return true\n    const name = inv.display_name || inv.legal_name || ''\n    const email = inv.email || ''\n    const search = searchInvestor.toLowerCase()\n    return name.toLowerCase().includes(search) || email.toLowerCase().includes(search)\n  })\n\n  // Available investors (not already shared with)\n  const availableInvestors = filteredInvestors.filter(inv => !alreadySharedWith.has(inv.id))\n\n  const selectedInvestor = investors.find(inv => inv.id === selectedInvestorId)\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        {children}\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Share2 className=\"h-5 w-5 text-blue-600\" />\n            Share Deal with Investor\n          </DialogTitle>\n          <DialogDescription>\n            Share <strong>{dealName}</strong> with an investor in your network.\n            {feeModel && (\n              <span className=\"block mt-1 text-emerald-600\">\n                Your commission: {feeModel.percentage_rate ? `${feeModel.percentage_rate}%` : `${feeModel.currency} ${feeModel.flat_amount}`}\n              </span>\n            )}\n          </DialogDescription>\n        </DialogHeader>\n\n        {success ? (\n          <div className=\"py-8 text-center\">\n            <CheckCircle2 className=\"h-16 w-16 text-emerald-500 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-foreground\">Deal Shared Successfully!</h3>\n            <p className=\"text-muted-foreground mt-1\">\n              The investor will receive an invitation to view this opportunity.\n            </p>\n          </div>\n        ) : loading ? (\n          <div className=\"py-8 flex items-center justify-center\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n          </div>\n        ) : (\n          <div className=\"space-y-4 py-4\">\n            {/* Investor Selection */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"investor\" className=\"flex items-center gap-2\">\n                <Users className=\"h-4 w-4\" />\n                Select Investor *\n              </Label>\n              <Input\n                placeholder=\"Search investors by name or email...\"\n                value={searchInvestor}\n                onChange={(e) => setSearchInvestor(e.target.value)}\n                className=\"mb-2\"\n              />\n              <Select value={selectedInvestorId} onValueChange={setSelectedInvestorId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Choose an investor\" />\n                </SelectTrigger>\n                <SelectContent className=\"max-h-60\">\n                  {availableInvestors.length === 0 ? (\n                    <div className=\"py-4 text-center text-sm text-muted-foreground\">\n                      {alreadySharedWith.size > 0\n                        ? 'All matching investors already have access'\n                        : 'No investors found'}\n                    </div>\n                  ) : (\n                    availableInvestors.map((investor) => (\n                      <SelectItem key={investor.id} value={investor.id}>\n                        <div className=\"flex items-center gap-2\">\n                          <span>{investor.display_name || investor.legal_name || 'Unknown'}</span>\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {investor.type}\n                          </Badge>\n                        </div>\n                      </SelectItem>\n                    ))\n                  )}\n                </SelectContent>\n              </Select>\n              {selectedInvestor?.email && (\n                <p className=\"text-xs text-muted-foreground pl-1\">{selectedInvestor.email}</p>\n              )}\n            </div>\n\n            {/* Co-referral with Introducer (PRD Row 96) */}\n            {introducers.length > 0 && (\n              <div className=\"border border-border rounded-lg p-4 bg-muted space-y-3\">\n                <div className=\"flex items-center gap-2\">\n                  <Checkbox\n                    id=\"include-introducer\"\n                    checked={includeIntroducer}\n                    onCheckedChange={(checked) => setIncludeIntroducer(checked === true)}\n                  />\n                  <Label htmlFor=\"include-introducer\" className=\"flex items-center gap-2 cursor-pointer\">\n                    <UserPlus className=\"h-4 w-4 text-purple-600\" />\n                    Co-refer with Introducer\n                  </Label>\n                </div>\n\n                {includeIntroducer && (\n                  <Select value={selectedIntroducerId} onValueChange={setSelectedIntroducerId}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select an introducer\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {introducers.map((introducer) => (\n                        <SelectItem key={introducer.id} value={introducer.id}>\n                          {introducer.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                )}\n              </div>\n            )}\n\n            {/* Fee Model Display (PRD Row 77) */}\n            {feeModel && (\n              <div className=\"flex items-center gap-2 p-3 bg-emerald-50 border border-emerald-200 rounded-lg\">\n                <Percent className=\"h-5 w-5 text-emerald-600\" />\n                <div>\n                  <p className=\"text-sm font-medium text-emerald-800\">\n                    Your Commission Rate\n                  </p>\n                  <p className=\"text-xs text-emerald-600\">\n                    {feeModel.fee_type}: {feeModel.percentage_rate\n                      ? `${feeModel.percentage_rate}% of investment`\n                      : `${feeModel.currency} ${feeModel.flat_amount} flat fee`}\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {/* Warning if no fee model */}\n            {!feeModel && (\n              <div className=\"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\n                <AlertCircle className=\"h-5 w-5 text-amber-600\" />\n                <div>\n                  <p className=\"text-sm font-medium text-amber-800\">\n                    No Fee Model Assigned\n                  </p>\n                  <p className=\"text-xs text-amber-600\">\n                    Contact your arranger to set up a commission structure for this deal.\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {!success && !loading && (\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setOpen(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleShare}\n              disabled={submitting || !selectedInvestorId}\n              className=\"gap-2 bg-blue-600 hover:bg-blue-700\"\n            >\n              {submitting ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  Sharing...\n                </>\n              ) : (\n                <>\n                  <Share2 className=\"h-4 w-4\" />\n                  Share Deal\n                </>\n              )}\n            </Button>\n          </DialogFooter>\n        )}\n      </DialogContent>\n    </Dialog>\n  )\n}\n","'use client'\r\n\r\nimport { useState, useMemo, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\nimport Image from 'next/image'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  Activity,\r\n  AlertCircle,\r\n  ArrowUpRight,\r\n  Building2,\r\n  CalendarClock,\r\n  ExternalLink,\r\n  ShieldCheck,\r\n  LineChart,\r\n  MailCheck,\r\n  Users,\r\n  Search,\r\n  Filter,\r\n  X,\r\n  SlidersHorizontal,\r\n  FileSignature,\r\n  Clock,\r\n  CheckCircle2,\r\n  DollarSign,\r\n  Package,\r\n  Share2,\r\n  // Partner-specific icons\r\n  UserPlus,\r\n  TrendingUp,\r\n  Wallet,\r\n  BadgeCheck\r\n} from 'lucide-react'\r\nimport { InterestModal } from '@/components/deals/interest-modal'\r\nimport { SubscribeNowDialog } from '@/components/deals/subscribe-now-dialog'\r\nimport { ShareDealDialog } from '@/components/deals/share-deal-dialog'\r\n\r\ntype Nullable<T> = T | null\r\n\r\n// ============================================================================\r\n// Persona Mode Detection\r\n// ============================================================================\r\n\r\ntype PersonaMode = 'INVESTOR_ONLY' | 'PARTNER_ONLY' | 'DUAL_PERSONA' | 'GENERIC'\r\n\r\n// ============================================================================\r\n// Partner Referral Types (US-5.6.1-01 through 07)\r\n// ============================================================================\r\n\r\ninterface PartnerReferral {\r\n  deal_id: string\r\n  investor_id: string\r\n  investor_name: string\r\n  dispatched_at: string | null\r\n  interest_confirmed_at: string | null\r\n}\r\n\r\ninterface ReferralSubscription {\r\n  investor_id: string\r\n  deal_id: string\r\n  status: string\r\n  commitment: number | null\r\n  currency: string | null\r\n  funded_at: string | null\r\n  signed_at: string | null\r\n}\r\n\r\ninterface PartnerCommission {\r\n  deal_id: string\r\n  investor_id: string\r\n  rate_bps: number | null\r\n  accrual_amount: number | null\r\n  currency: string | null\r\n  status: string\r\n}\r\n\r\ninterface PartnerSummary {\r\n  totalReferrals: number\r\n  converted: number\r\n  pipelineValue: number\r\n  pendingCommissions: number\r\n  currency: string\r\n}\r\n\r\n// Investor journey stage for referral tracking\r\ntype ReferralStage = 'dispatched' | 'interested' | 'passed' | 'approved' | 'signed' | 'funded'\r\n\r\nconst referralStageMeta: Record<ReferralStage, {\r\n  label: string\r\n  bgColor: string\r\n  textColor: string\r\n  borderColor: string\r\n}> = {\r\n  dispatched: {\r\n    label: 'Dispatched',\r\n    bgColor: 'bg-muted',\r\n    textColor: 'text-muted-foreground',\r\n    borderColor: 'border-border'\r\n  },\r\n  interested: {\r\n    label: 'Interested',\r\n    bgColor: 'bg-amber-50 dark:bg-amber-900/30',\r\n    textColor: 'text-amber-700 dark:text-amber-300',\r\n    borderColor: 'border-amber-200 dark:border-amber-700'\r\n  },\r\n  passed: {\r\n    label: 'Passed',\r\n    bgColor: 'bg-rose-50 dark:bg-rose-900/30',\r\n    textColor: 'text-rose-600 dark:text-rose-300',\r\n    borderColor: 'border-rose-200 dark:border-rose-700'\r\n  },\r\n  approved: {\r\n    label: 'Approved',\r\n    bgColor: 'bg-indigo-50 dark:bg-indigo-900/30',\r\n    textColor: 'text-indigo-700 dark:text-indigo-300',\r\n    borderColor: 'border-indigo-200 dark:border-indigo-700'\r\n  },\r\n  signed: {\r\n    label: 'Signed',\r\n    bgColor: 'bg-purple-50 dark:bg-purple-900/30',\r\n    textColor: 'text-purple-700 dark:text-purple-300',\r\n    borderColor: 'border-purple-200 dark:border-purple-700'\r\n  },\r\n  funded: {\r\n    label: 'Funded',\r\n    bgColor: 'bg-emerald-50 dark:bg-emerald-900/30',\r\n    textColor: 'text-emerald-700 dark:text-emerald-300',\r\n    borderColor: 'border-emerald-200 dark:border-emerald-700'\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// Deal Types\r\n// ============================================================================\r\n\r\ninterface InvestorDeal {\r\n  id: string\r\n  name: string\r\n  deal_type: string\r\n  status: string\r\n  currency: string\r\n  offer_unit_price: number | null\r\n  open_at: string | null\r\n  close_at: string | null\r\n  created_at: string\r\n  description?: string | null\r\n  investment_thesis?: string | null\r\n  minimum_investment?: number | null\r\n  maximum_investment?: number | null\r\n  target_amount?: number | null\r\n  company_name?: string | null\r\n  company_logo_url?: string | null\r\n  company_website?: string | null\r\n  sector?: string | null\r\n  stage?: string | null\r\n  location?: string | null\r\n  vehicles?: {\r\n    id: string\r\n    name: string\r\n    type: string\r\n  }\r\n  deal_memberships: Array<{\r\n    role: string\r\n    accepted_at: string | null\r\n    dispatched_at: string | null\r\n  }>\r\n  fee_plans: Array<{\r\n    id: string\r\n    name: string\r\n    description: string | null\r\n    is_default: boolean\r\n    fee_components: Array<{\r\n      id: string\r\n      kind: string\r\n      calc_method: string\r\n      rate_bps: number | null\r\n      flat_amount: number | null\r\n      frequency: string | null\r\n      notes: string | null\r\n    }>\r\n  }>\r\n}\r\n\r\ninterface FeeStructure {\r\n  id: string\r\n  deal_id: string\r\n  created_at?: string\r\n  effective_at?: string | null\r\n  published_at?: string | null\r\n  allocation_up_to: number | null\r\n  price_per_share_text: string | null\r\n  minimum_ticket: number | null\r\n  term_sheet_date: string | null\r\n  transaction_type: string | null\r\n  opportunity_summary: string | null\r\n  issuer: string | null\r\n  vehicle: string | null\r\n  exclusive_arranger: string | null\r\n  purchaser: string | null\r\n  seller: string | null\r\n  structure: string | null\r\n  subscription_fee_percent: number | null\r\n  management_fee_percent: number | null\r\n  carried_interest_percent: number | null\r\n  legal_counsel: string | null\r\n  interest_confirmation_deadline: string | null\r\n  completion_date: string | null\r\n  completion_date_text: string | null\r\n  validity_date: string | null\r\n  term_sheet_attachment_key: string | null\r\n}\r\n\r\ninterface DealInterest {\r\n  id: string\r\n  deal_id: string\r\n  investor_id: string\r\n  status: 'pending_review' | 'approved' | 'rejected' | 'withdrawn'\r\n  submitted_at: string\r\n  approved_at: string | null\r\n  indicative_amount: number | null\r\n  indicative_currency: string | null\r\n  is_post_close: boolean\r\n}\r\n\r\ninterface DataRoomAccess {\r\n  id: string\r\n  deal_id: string\r\n  investor_id: string\r\n  granted_at: string\r\n  expires_at: string | null\r\n  auto_granted: boolean\r\n  revoked_at: string | null\r\n}\r\n\r\ninterface SubscriptionSubmission {\r\n  id: string\r\n  deal_id: string\r\n  investor_id: string\r\n  status: string\r\n  submitted_at: string\r\n}\r\n\r\ninterface InvestorDealsListClientProps {\r\n  dealsData: InvestorDeal[]\r\n  feeStructureMap: Map<string, FeeStructure>\r\n  interestByDeal: Map<string, DealInterest>\r\n  accessByDeal: Map<string, DataRoomAccess>\r\n  subscriptionByDeal: Map<string, SubscriptionSubmission>\r\n  primaryInvestorId: string | null\r\n  /** Partner ID - if present, user can share deals with investors (PRD Rows 95-96) */\r\n  partnerId?: string | null\r\n  /** Investor-centric summary metrics */\r\n  summary: {\r\n    totalDeals: number\r\n    openDeals: number\r\n    pendingInterests: number\r\n    activeNdas: number\r\n    submittedSubscriptions: number\r\n  }\r\n  /** Base URL for deal detail pages. Defaults to /versoholdings/deal */\r\n  detailUrlBase?: string\r\n\r\n  // ============================================================================\r\n  // Partner-Specific Props (US-5.6.1-01 through 07)\r\n  // ============================================================================\r\n\r\n  /** Partner's referrals grouped by deal_id */\r\n  referralsByDeal?: Record<string, PartnerReferral[]>\r\n  /** Subscription statuses for referred investors, grouped by deal_id */\r\n  referralSubscriptionsByDeal?: Record<string, ReferralSubscription[]>\r\n  /** Partner's commissions grouped by deal_id */\r\n  partnerCommissionsByDeal?: Record<string, PartnerCommission[]>\r\n  /** Aggregated Partner metrics */\r\n  partnerSummary?: PartnerSummary\r\n}\r\n\r\nconst dealTypeLabels: Record<string, string> = {\r\n  equity_secondary: 'Secondary Equity',\r\n  equity_primary: 'Primary Equity',\r\n  credit_trade_finance: 'Credit & Trade Finance',\r\n  other: 'Other'\r\n}\r\n\r\nconst statusBadges: Record<string, string> = {\r\n  draft: 'bg-muted text-muted-foreground',\r\n  open: 'bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300',\r\n  allocation_pending: 'bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300',\r\n  closed: 'bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300',\r\n  cancelled: 'bg-rose-100 dark:bg-rose-900/50 text-rose-700 dark:text-rose-300'\r\n}\r\n\r\nconst INVESTOR_ELIGIBLE_ROLES = new Set([\r\n  'investor',\r\n  'partner_investor',\r\n  'introducer_investor',\r\n  'commercial_partner_investor',\r\n  'co_investor'\r\n])\r\n\r\nfunction isInvestorEligibleRole(role: string | null | undefined) {\r\n  if (!role) return false\r\n  return INVESTOR_ELIGIBLE_ROLES.has(role)\r\n}\r\n\r\nconst interestStatusMeta: Record<\r\n  DealInterest['status'],\r\n  { label: string; tone: string }\r\n> = {\r\n  pending_review: { label: 'Pending review', tone: 'bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300' },\r\n  approved: { label: 'NDA active', tone: 'bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300' },\r\n  rejected: { label: 'Declined', tone: 'bg-rose-100 dark:bg-rose-900/50 text-rose-700 dark:text-rose-300' },\r\n  withdrawn: { label: 'Withdrawn', tone: 'bg-muted text-muted-foreground' }\r\n}\r\n\r\n// Subscription stages 6-9 metadata (before Active/Stage 10)\r\n// Maps actual database status values to journey stages\r\nconst subscriptionStageMeta: Record<string, {\r\n  label: string\r\n  stage: number\r\n  icon: typeof Package\r\n  bgColor: string\r\n  textColor: string\r\n  borderColor: string\r\n}> = {\r\n  // Actual database statuses from deal_subscription_submissions table\r\n  pending_review: {\r\n    label: 'Pending Review',\r\n    stage: 6,\r\n    icon: Clock,\r\n    bgColor: 'bg-amber-50 dark:bg-amber-900/30',\r\n    textColor: 'text-amber-700 dark:text-amber-300',\r\n    borderColor: 'border-amber-200 dark:border-amber-700'\r\n  },\r\n  // Keep 'pending' as alias for backwards compatibility\r\n  pending: {\r\n    label: 'Pending Review',\r\n    stage: 6,\r\n    icon: Clock,\r\n    bgColor: 'bg-amber-50 dark:bg-amber-900/30',\r\n    textColor: 'text-amber-700 dark:text-amber-300',\r\n    borderColor: 'border-amber-200 dark:border-amber-700'\r\n  },\r\n  approved: {\r\n    label: 'Approved',\r\n    stage: 7,\r\n    icon: MailCheck,\r\n    bgColor: 'bg-indigo-50 dark:bg-indigo-900/30',\r\n    textColor: 'text-indigo-700 dark:text-indigo-300',\r\n    borderColor: 'border-indigo-200 dark:border-indigo-700'\r\n  },\r\n  committed: {\r\n    label: 'Committed',\r\n    stage: 8,\r\n    icon: FileSignature,\r\n    bgColor: 'bg-purple-50 dark:bg-purple-900/30',\r\n    textColor: 'text-purple-700 dark:text-purple-300',\r\n    borderColor: 'border-purple-200 dark:border-purple-700'\r\n  },\r\n  partially_funded: {\r\n    label: 'Partially Funded',\r\n    stage: 9,\r\n    icon: DollarSign,\r\n    bgColor: 'bg-teal-50 dark:bg-teal-900/30',\r\n    textColor: 'text-teal-700 dark:text-teal-300',\r\n    borderColor: 'border-teal-200 dark:border-teal-700'\r\n  },\r\n  funded: {\r\n    label: 'Funded',\r\n    stage: 9,\r\n    icon: DollarSign,\r\n    bgColor: 'bg-emerald-50 dark:bg-emerald-900/30',\r\n    textColor: 'text-emerald-700 dark:text-emerald-300',\r\n    borderColor: 'border-emerald-200 dark:border-emerald-700'\r\n  },\r\n  // Legacy/alternative status names (for compatibility)\r\n  pack_generated: {\r\n    label: 'Pack Generated',\r\n    stage: 6,\r\n    icon: Package,\r\n    bgColor: 'bg-blue-50 dark:bg-blue-900/30',\r\n    textColor: 'text-blue-700 dark:text-blue-300',\r\n    borderColor: 'border-blue-200 dark:border-blue-700'\r\n  },\r\n  pack_sent: {\r\n    label: 'Pack Sent',\r\n    stage: 7,\r\n    icon: MailCheck,\r\n    bgColor: 'bg-indigo-50 dark:bg-indigo-900/30',\r\n    textColor: 'text-indigo-700 dark:text-indigo-300',\r\n    borderColor: 'border-indigo-200 dark:border-indigo-700'\r\n  },\r\n  signed: {\r\n    label: 'Signed',\r\n    stage: 8,\r\n    icon: FileSignature,\r\n    bgColor: 'bg-purple-50 dark:bg-purple-900/30',\r\n    textColor: 'text-purple-700 dark:text-purple-300',\r\n    borderColor: 'border-purple-200 dark:border-purple-700'\r\n  },\r\n  submitted: {\r\n    label: 'Submitted',\r\n    stage: 6,\r\n    icon: Clock,\r\n    bgColor: 'bg-amber-50 dark:bg-amber-900/30',\r\n    textColor: 'text-amber-700 dark:text-amber-300',\r\n    borderColor: 'border-amber-200 dark:border-amber-700'\r\n  },\r\n  in_review: {\r\n    label: 'In Review',\r\n    stage: 6,\r\n    icon: Clock,\r\n    bgColor: 'bg-amber-50 dark:bg-amber-900/30',\r\n    textColor: 'text-amber-700 dark:text-amber-300',\r\n    borderColor: 'border-amber-200 dark:border-amber-700'\r\n  },\r\n  // DB enum statuses: rejected, cancelled\r\n  rejected: {\r\n    label: 'Rejected',\r\n    stage: 0,\r\n    icon: AlertCircle,\r\n    bgColor: 'bg-rose-50 dark:bg-rose-900/30',\r\n    textColor: 'text-rose-700 dark:text-rose-300',\r\n    borderColor: 'border-rose-200 dark:border-rose-700'\r\n  },\r\n  cancelled: {\r\n    label: 'Cancelled',\r\n    stage: 0,\r\n    icon: AlertCircle,\r\n    bgColor: 'bg-muted',\r\n    textColor: 'text-muted-foreground',\r\n    borderColor: 'border-border'\r\n  }\r\n}\r\n\r\nfunction normalizeCurrency(code: Nullable<string>) {\r\n  if (!code) return 'USD'\r\n  return code.length === 3 ? code.toUpperCase() : code.toUpperCase().slice(0, 3)\r\n}\r\n\r\nfunction formatCurrency(amount: Nullable<number>, currency: Nullable<string>) {\r\n  if (amount === null || amount === undefined) {\r\n    return '—'\r\n  }\r\n  try {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: normalizeCurrency(currency),\r\n      maximumFractionDigits: amount >= 1000 ? 0 : 2\r\n    }).format(amount)\r\n  } catch {\r\n    return `${currency ?? ''} ${amount.toLocaleString()}`\r\n  }\r\n}\r\n\r\nfunction getEffectiveStatus(deal: InvestorDeal): string {\r\n  if (deal.status === 'closed' || deal.status === 'cancelled') {\r\n    return deal.status\r\n  }\r\n\r\n  // Auto-close deals that are past their close date\r\n  if (deal.close_at && new Date(deal.close_at) < new Date()) {\r\n    return 'closed'\r\n  }\r\n\r\n  return deal.status\r\n}\r\n\r\nfunction formatDeadlineCopy(\r\n  closeAt: Nullable<string>,\r\n  effectiveStatus: string\r\n) {\r\n  if (!closeAt) {\r\n    return effectiveStatus === 'closed' ? 'Closed' : 'Timing to be announced'\r\n  }\r\n\r\n  const closeDate = new Date(closeAt)\r\n  const now = new Date()\r\n\r\n  if (effectiveStatus === 'closed' || closeDate < now) {\r\n    return `Closed ${closeDate.toLocaleDateString()}`\r\n  }\r\n\r\n  const diffMs = closeDate.getTime() - now.getTime()\r\n  const diffDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24))\r\n\r\n  if (diffDays <= 0) {\r\n    return 'Closing soon'\r\n  }\r\n\r\n  if (diffDays === 1) {\r\n    return 'Closes tomorrow'\r\n  }\r\n\r\n  if (diffDays <= 14) {\r\n    return `Closes in ${diffDays} days`\r\n  }\r\n\r\n  return `Closes ${closeDate.toLocaleDateString()}`\r\n}\r\n\r\nexport function InvestorDealsListClient({\r\n  dealsData,\r\n  feeStructureMap,\r\n  interestByDeal,\r\n  accessByDeal,\r\n  subscriptionByDeal,\r\n  primaryInvestorId,\r\n  partnerId,\r\n  summary,\r\n  detailUrlBase = '/versotech_main/opportunities',\r\n  // Partner-specific props\r\n  referralsByDeal = {},\r\n  referralSubscriptionsByDeal = {},\r\n  partnerCommissionsByDeal = {},\r\n  partnerSummary\r\n}: InvestorDealsListClientProps) {\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  // ============================================================================\r\n  // Persona Mode Detection\r\n  // Determines which view(s) to show based on user's personas\r\n  // ============================================================================\r\n\r\n  const personaMode: PersonaMode = useMemo(() => {\r\n    if (partnerId && primaryInvestorId) return 'DUAL_PERSONA'\r\n    if (partnerId) return 'PARTNER_ONLY'\r\n    if (primaryInvestorId) return 'INVESTOR_ONLY'\r\n    return 'GENERIC'\r\n  }, [partnerId, primaryInvestorId])\r\n\r\n  const isPartnerView = personaMode === 'PARTNER_ONLY' || personaMode === 'DUAL_PERSONA'\r\n  const isInvestorView = personaMode === 'INVESTOR_ONLY' || personaMode === 'DUAL_PERSONA'\r\n\r\n  // Helper function to determine referral stage for an investor\r\n  const getReferralStage = (\r\n    referral: PartnerReferral,\r\n    subscriptions: ReferralSubscription[]\r\n  ): ReferralStage => {\r\n    const sub = subscriptions.find(s => s.investor_id === referral.investor_id)\r\n\r\n    if (sub) {\r\n      const status = sub.status?.toLowerCase()\r\n      // Check for funded/active\r\n      if (['funded', 'active', 'activated', 'committed'].includes(status)) {\r\n        return 'funded'\r\n      }\r\n      // Check for signed\r\n      if (status === 'signed' || sub.signed_at) {\r\n        return 'signed'\r\n      }\r\n      // Check for approved\r\n      if (status === 'approved') {\r\n        return 'approved'\r\n      }\r\n      // Check for passed/rejected/cancelled\r\n      if (['rejected', 'cancelled', 'passed', 'declined'].includes(status)) {\r\n        return 'passed'\r\n      }\r\n    }\r\n\r\n    // Check for interest confirmed\r\n    if (referral.interest_confirmed_at) {\r\n      return 'interested'\r\n    }\r\n\r\n    // Default: dispatched only\r\n    return 'dispatched'\r\n  }\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [statusFilter, setStatusFilter] = useState('all')\r\n  const [dealTypeFilter, setDealTypeFilter] = useState('all')\r\n  const [interestStatusFilter, setInterestStatusFilter] = useState('all')\r\n  const [pipelineStageFilter, setPipelineStageFilter] = useState('all')\r\n  const [sectorFilter, setSectorFilter] = useState('all')\r\n  const [stageFilter, setStageFilter] = useState('all')\r\n  const [locationFilter, setLocationFilter] = useState('all')\r\n  const [sortBy, setSortBy] = useState('closing_date')\r\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false)\r\n\r\n  // Wait for client-side hydration to complete before rendering Radix UI components\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // Extract unique values for filter dropdowns\r\n  // NOTE: All useMemo hooks MUST be called before any early returns to comply with Rules of Hooks\r\n  const uniqueSectors = useMemo(() => {\r\n    const sectors = new Set<string>()\r\n    dealsData.forEach(deal => {\r\n      if (deal.sector) sectors.add(deal.sector)\r\n    })\r\n    return Array.from(sectors).sort()\r\n  }, [dealsData])\r\n\r\n  const uniqueStages = useMemo(() => {\r\n    const stages = new Set<string>()\r\n    dealsData.forEach(deal => {\r\n      if (deal.stage) stages.add(deal.stage)\r\n    })\r\n    return Array.from(stages).sort()\r\n  }, [dealsData])\r\n\r\n  const uniqueLocations = useMemo(() => {\r\n    const locations = new Set<string>()\r\n    dealsData.forEach(deal => {\r\n      if (deal.location) locations.add(deal.location)\r\n    })\r\n    return Array.from(locations).sort()\r\n  }, [dealsData])\r\n\r\n  // Compute subscriptions in progress (Stages 6-9)\r\n  // These are subscriptions that are not yet activated (Stage 10)\r\n  const subscriptionsInProgress = useMemo(() => {\r\n    const inProgress: Array<{\r\n      deal: InvestorDeal\r\n      subscription: SubscriptionSubmission\r\n      stageMeta: typeof subscriptionStageMeta[string]\r\n    }> = []\r\n\r\n    // Stage 10 (activated) subscriptions go to Portfolio, not here\r\n    const activeStatuses = ['activated', 'active', 'completed']\r\n\r\n    dealsData.forEach(deal => {\r\n      const subscription = subscriptionByDeal.get(deal.id)\r\n      if (subscription && !activeStatuses.includes(subscription.status.toLowerCase())) {\r\n        const stageMeta = subscriptionStageMeta[subscription.status.toLowerCase()] ||\r\n          subscriptionStageMeta.pending\r\n        inProgress.push({ deal, subscription, stageMeta })\r\n      }\r\n    })\r\n\r\n    // Sort by submission date (most recent first)\r\n    inProgress.sort((a, b) => {\r\n      return new Date(b.subscription.submitted_at).getTime() -\r\n        new Date(a.subscription.submitted_at).getTime()\r\n    })\r\n\r\n    return inProgress\r\n  }, [dealsData, subscriptionByDeal])\r\n\r\n  // Filter and sort deals\r\n  const filteredDeals = useMemo(() => {\r\n    let filtered = [...dealsData]\r\n\r\n    // Search filter\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase()\r\n      filtered = filtered.filter(\r\n        (deal) =>\r\n          deal.name?.toLowerCase().includes(query) ||\r\n          deal.company_name?.toLowerCase().includes(query) ||\r\n          deal.sector?.toLowerCase().includes(query) ||\r\n          deal.location?.toLowerCase().includes(query) ||\r\n          deal.description?.toLowerCase().includes(query)\r\n      )\r\n    }\r\n\r\n    // Deal status filter\r\n    if (statusFilter !== 'all') {\r\n      filtered = filtered.filter((deal) => {\r\n        const effectiveStatus = getEffectiveStatus(deal)\r\n        return effectiveStatus === statusFilter\r\n      })\r\n    }\r\n\r\n    // Deal type filter\r\n    if (dealTypeFilter !== 'all') {\r\n      filtered = filtered.filter((deal) => deal.deal_type === dealTypeFilter)\r\n    }\r\n\r\n    // Interest status filter\r\n    if (interestStatusFilter !== 'all') {\r\n      filtered = filtered.filter((deal) => {\r\n        const interest = interestByDeal.get(deal.id)\r\n        if (interestStatusFilter === 'no_interest') {\r\n          return !interest\r\n        }\r\n        return interest?.status === interestStatusFilter\r\n      })\r\n    }\r\n\r\n    // Pipeline stage filter\r\n    if (pipelineStageFilter !== 'all') {\r\n      filtered = filtered.filter((deal) => {\r\n        const interest = interestByDeal.get(deal.id)\r\n        const ndaAccess = accessByDeal.get(deal.id)\r\n        const subscription = subscriptionByDeal.get(deal.id)\r\n\r\n        switch (pipelineStageFilter) {\r\n          case 'interested':\r\n            return Boolean(interest)\r\n          case 'nda_access':\r\n            return Boolean(ndaAccess)\r\n          case 'subscription_submitted':\r\n            return Boolean(subscription)\r\n          default:\r\n            return true\r\n        }\r\n      })\r\n    }\r\n\r\n    // Sector filter\r\n    if (sectorFilter !== 'all') {\r\n      filtered = filtered.filter((deal) => deal.sector === sectorFilter)\r\n    }\r\n\r\n    // Stage filter\r\n    if (stageFilter !== 'all') {\r\n      filtered = filtered.filter((deal) => deal.stage === stageFilter)\r\n    }\r\n\r\n    // Location filter\r\n    if (locationFilter !== 'all') {\r\n      filtered = filtered.filter((deal) => deal.location === locationFilter)\r\n    }\r\n\r\n    // Sort\r\n    filtered.sort((a, b) => {\r\n      switch (sortBy) {\r\n        case 'closing_date':\r\n          if (!a.close_at) return 1\r\n          if (!b.close_at) return -1\r\n          return new Date(a.close_at).getTime() - new Date(b.close_at).getTime()\r\n        case 'name':\r\n          return a.name.localeCompare(b.name)\r\n        case 'opening_date':\r\n          if (!a.open_at) return 1\r\n          if (!b.open_at) return -1\r\n          return new Date(b.open_at).getTime() - new Date(a.open_at).getTime()\r\n        case 'target_amount':\r\n          return (b.target_amount || 0) - (a.target_amount || 0)\r\n        default:\r\n          return 0\r\n      }\r\n    })\r\n\r\n    return filtered\r\n  }, [\r\n    dealsData,\r\n    searchQuery,\r\n    statusFilter,\r\n    dealTypeFilter,\r\n    interestStatusFilter,\r\n    pipelineStageFilter,\r\n    sectorFilter,\r\n    stageFilter,\r\n    locationFilter,\r\n    sortBy,\r\n    interestByDeal,\r\n    accessByDeal,\r\n    subscriptionByDeal\r\n  ])\r\n\r\n  // Count active filters\r\n  const activeFiltersCount = [\r\n    searchQuery,\r\n    statusFilter !== 'all',\r\n    dealTypeFilter !== 'all',\r\n    interestStatusFilter !== 'all',\r\n    pipelineStageFilter !== 'all',\r\n    sectorFilter !== 'all',\r\n    stageFilter !== 'all',\r\n    locationFilter !== 'all'\r\n  ].filter(Boolean).length\r\n\r\n  // Reset all filters\r\n  const resetFilters = () => {\r\n    setSearchQuery('')\r\n    setStatusFilter('all')\r\n    setDealTypeFilter('all')\r\n    setInterestStatusFilter('all')\r\n    setPipelineStageFilter('all')\r\n    setSectorFilter('all')\r\n    setStageFilter('all')\r\n    setLocationFilter('all')\r\n  }\r\n\r\n  // Render loading state until hydration is complete to prevent Radix UI ID mismatches\r\n  // This must come AFTER all hooks (useState, useEffect, useMemo) to comply with Rules of Hooks\r\n  if (!mounted) {\r\n    return (\r\n      <div className=\"p-6 space-y-8\">\r\n        <div className=\"h-24 bg-muted animate-pulse rounded-lg\" />\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          {[...Array(4)].map((_, i) => (\r\n            <div key={i} className=\"h-32 bg-muted animate-pulse rounded-lg\" />\r\n          ))}\r\n        </div>\r\n        <div className=\"h-48 bg-muted animate-pulse rounded-lg\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-8\">\r\n      <header className=\"flex flex-col gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-semibold text-foreground\">Investment Opportunities</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            Track active allocations, NDAs, and subscriptions throughout the deal pipeline.\r\n          </p>\r\n        </div>\r\n\r\n        {/* ================================================================ */}\r\n        {/* PARTNER Summary Cards (US-5.6.1-07: Display Partner metrics) */}\r\n        {/* ================================================================ */}\r\n        {isPartnerView && partnerSummary && (\r\n          <>\r\n            {personaMode === 'DUAL_PERSONA' && (\r\n              <div className=\"flex items-center gap-2\">\r\n                <Badge variant=\"outline\" className=\"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700\">\r\n                  <Share2 className=\"h-3 w-3 mr-1\" />\r\n                  Partner View\r\n                </Badge>\r\n              </div>\r\n            )}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n              <Card className=\"border-blue-100 dark:border-blue-900/50 bg-gradient-to-br from-blue-50/50 to-white dark:from-blue-950/30 dark:to-card\">\r\n                <CardHeader className=\"pb-2\">\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">Total Referrals</CardTitle>\r\n                  <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                    <UserPlus className=\"h-4 w-4 text-blue-500\" />\r\n                    Investors you&apos;ve shared with\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                  {partnerSummary.totalReferrals}\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"border-emerald-100 dark:border-emerald-900/50 bg-gradient-to-br from-emerald-50/50 to-white dark:from-emerald-950/30 dark:to-card\">\r\n                <CardHeader className=\"pb-2\">\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">Converted</CardTitle>\r\n                  <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                    <BadgeCheck className=\"h-4 w-4 text-emerald-500\" />\r\n                    Funded investments\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                  {partnerSummary.converted}\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"border-amber-100 dark:border-amber-900/50 bg-gradient-to-br from-amber-50/50 to-white dark:from-amber-950/30 dark:to-card\">\r\n                <CardHeader className=\"pb-2\">\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">Pipeline Value</CardTitle>\r\n                  <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                    <TrendingUp className=\"h-4 w-4 text-amber-500\" />\r\n                    In-progress commitments\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                  {partnerSummary.pipelineValue > 0\r\n                    ? formatCurrency(partnerSummary.pipelineValue, partnerSummary.currency)\r\n                    : '—'}\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"border-purple-100 dark:border-purple-900/50 bg-gradient-to-br from-purple-50/50 to-white dark:from-purple-950/30 dark:to-card\">\r\n                <CardHeader className=\"pb-2\">\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">Pending Commissions</CardTitle>\r\n                  <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                    <Wallet className=\"h-4 w-4 text-purple-500\" />\r\n                    Accrued, awaiting invoice\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                  {partnerSummary.pendingCommissions > 0\r\n                    ? formatCurrency(partnerSummary.pendingCommissions, partnerSummary.currency)\r\n                    : '—'}\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* ================================================================ */}\r\n        {/* INVESTOR Summary Cards (original investor-centric metrics) */}\r\n        {/* ================================================================ */}\r\n        {isInvestorView && (\r\n          <>\r\n            {personaMode === 'DUAL_PERSONA' && (\r\n              <div className=\"flex items-center gap-2 mt-4\">\r\n                <Badge variant=\"outline\" className=\"bg-emerald-50 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700\">\r\n                  <Activity className=\"h-3 w-3 mr-1\" />\r\n                  Investor View\r\n                </Badge>\r\n              </div>\r\n            )}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n              <Card>\r\n                <CardHeader className=\"pb-2\">\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">Open deals</CardTitle>\r\n                  <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                    <Activity className=\"h-4 w-4 text-emerald-500\" />\r\n                    Ready for exploration\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                  {summary.openDeals} / {summary.totalDeals}\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardHeader className=\"pb-2\">\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">Pending interests</CardTitle>\r\n                  <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                    <LineChart className=\"h-4 w-4 text-amber-500\" />\r\n                    Awaiting team review\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                  {summary.pendingInterests}\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardHeader className=\"pb-2\">\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">Active NDAs</CardTitle>\r\n                  <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                    <ShieldCheck className=\"h-4 w-4 text-sky-500\" />\r\n                    Data room unlocked\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                  {summary.activeNdas}\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardHeader className=\"pb-2\">\r\n                  <CardTitle className=\"text-sm text-muted-foreground\">Subscriptions in review</CardTitle>\r\n                  <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                    <MailCheck className=\"h-4 w-4 text-indigo-500\" />\r\n                    Awaiting confirmation\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                  {summary.submittedSubscriptions}\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* ================================================================ */}\r\n        {/* GENERIC View (no investor/partner - just deal counts) */}\r\n        {/* ================================================================ */}\r\n        {personaMode === 'GENERIC' && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm text-muted-foreground\">Open deals</CardTitle>\r\n                <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                  <Activity className=\"h-4 w-4 text-emerald-500\" />\r\n                  Ready for exploration\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"text-2xl font-semibold text-foreground\">\r\n                {summary.openDeals} / {summary.totalDeals}\r\n              </CardContent>\r\n            </Card>\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm text-muted-foreground\">Your Role</CardTitle>\r\n                <CardDescription className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                  <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                  Tracking access\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"text-lg font-medium text-muted-foreground\">\r\n                View-only access\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      {/* Search and Filters */}\r\n      <Card>\r\n        <CardContent className=\"pt-6 space-y-4\">\r\n          {/* Search Bar */}\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n              <Input\r\n                placeholder=\"Search deals by name, company, sector, location...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\r\n              className=\"gap-2\"\r\n            >\r\n              <SlidersHorizontal className=\"h-4 w-4\" />\r\n              Filters\r\n              {activeFiltersCount > 0 && (\r\n                <Badge variant=\"secondary\" className=\"ml-1\">\r\n                  {activeFiltersCount}\r\n                </Badge>\r\n              )}\r\n            </Button>\r\n            {activeFiltersCount > 0 && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                onClick={resetFilters}\r\n                className=\"gap-2\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n                Clear\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Primary Filters Row */}\r\n          <div className=\"flex flex-col md:flex-row gap-3\">\r\n            {/* Deal Status */}\r\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n              <SelectTrigger className=\"w-full md:w-[180px]\">\r\n                <Filter className=\"h-4 w-4 mr-2\" />\r\n                <SelectValue placeholder=\"Status\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">All Status</SelectItem>\r\n                <SelectItem value=\"open\">Open</SelectItem>\r\n                <SelectItem value=\"allocation_pending\">Allocation Pending</SelectItem>\r\n                <SelectItem value=\"closed\">Closed</SelectItem>\r\n                <SelectItem value=\"draft\">Draft</SelectItem>\r\n                <SelectItem value=\"cancelled\">Cancelled</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            {/* Deal Type */}\r\n            <Select value={dealTypeFilter} onValueChange={setDealTypeFilter}>\r\n              <SelectTrigger className=\"w-full md:w-[180px]\">\r\n                <SelectValue placeholder=\"Deal Type\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">All Types</SelectItem>\r\n                <SelectItem value=\"equity_secondary\">Secondary Equity</SelectItem>\r\n                <SelectItem value=\"equity_primary\">Primary Equity</SelectItem>\r\n                <SelectItem value=\"credit_trade_finance\">Credit & Trade Finance</SelectItem>\r\n                <SelectItem value=\"other\">Other</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            {/* Pipeline Stage */}\r\n            <Select value={pipelineStageFilter} onValueChange={setPipelineStageFilter}>\r\n              <SelectTrigger className=\"w-full md:w-[180px]\">\r\n                <SelectValue placeholder=\"My Pipeline\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">All Stages</SelectItem>\r\n                <SelectItem value=\"interested\">Interested</SelectItem>\r\n                <SelectItem value=\"nda_access\">NDA Access</SelectItem>\r\n                <SelectItem value=\"subscription_submitted\">Subscription Submitted</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n\r\n            {/* Sort */}\r\n            <Select value={sortBy} onValueChange={setSortBy}>\r\n              <SelectTrigger className=\"w-full md:w-[180px]\">\r\n                <SelectValue placeholder=\"Sort by\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"closing_date\">Closing Date</SelectItem>\r\n                <SelectItem value=\"name\">Name (A-Z)</SelectItem>\r\n                <SelectItem value=\"opening_date\">Newest First</SelectItem>\r\n                <SelectItem value=\"target_amount\">Target Amount</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Advanced Filters */}\r\n          {showAdvancedFilters && (\r\n            <div className=\"pt-4 border-t border-border space-y-3\">\r\n              <h3 className=\"text-sm font-medium text-foreground\">Advanced Filters</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3\">\r\n                {/* Interest Status */}\r\n                <Select value={interestStatusFilter} onValueChange={setInterestStatusFilter}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Interest Status\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Interest Status</SelectItem>\r\n                    <SelectItem value=\"no_interest\">No Interest Yet</SelectItem>\r\n                    <SelectItem value=\"pending_review\">Pending Review</SelectItem>\r\n                    <SelectItem value=\"approved\">Approved (NDA)</SelectItem>\r\n                    <SelectItem value=\"rejected\">Declined</SelectItem>\r\n                    <SelectItem value=\"withdrawn\">Withdrawn</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n\r\n                {/* Sector */}\r\n                <Select value={sectorFilter} onValueChange={setSectorFilter}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Sector\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Sectors</SelectItem>\r\n                    {uniqueSectors.map((sector) => (\r\n                      <SelectItem key={sector} value={sector}>\r\n                        {sector}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n\r\n                {/* Stage */}\r\n                <Select value={stageFilter} onValueChange={setStageFilter}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Stage\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Stages</SelectItem>\r\n                    {uniqueStages.map((stage) => (\r\n                      <SelectItem key={stage} value={stage}>\r\n                        {stage}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n\r\n                {/* Location */}\r\n                <Select value={locationFilter} onValueChange={setLocationFilter}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Location\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Locations</SelectItem>\r\n                    {uniqueLocations.map((location) => (\r\n                      <SelectItem key={location} value={location}>\r\n                        {location}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Results Count */}\r\n          <div className=\"flex items-center justify-between pt-2 text-sm text-muted-foreground\">\r\n            <span>\r\n              Showing {filteredDeals.length} of {dealsData.length} deals\r\n            </span>\r\n            {activeFiltersCount > 0 && (\r\n              <span className=\"text-blue-600 dark:text-blue-400\">\r\n                {activeFiltersCount} filter{activeFiltersCount !== 1 ? 's' : ''} active\r\n              </span>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* My Subscriptions Section - Stages 6-9 (In Progress) */}\r\n      {subscriptionsInProgress.length > 0 && (\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground flex items-center gap-2\">\r\n                <Clock className=\"h-5 w-5 text-amber-500\" />\r\n                My Subscriptions\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Track your in-progress subscriptions (Stages 6-9)\r\n              </p>\r\n            </div>\r\n            <Badge variant=\"outline\" className=\"text-amber-600 border-amber-300\">\r\n              {subscriptionsInProgress.length} in progress\r\n            </Badge>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n            {subscriptionsInProgress.map(({ deal, subscription, stageMeta }) => {\r\n              const StageIcon = stageMeta.icon\r\n\r\n              return (\r\n                <Card\r\n                  key={subscription.id}\r\n                  className={cn(\r\n                    'overflow-hidden border-2 transition-all hover:shadow-md',\r\n                    stageMeta.borderColor,\r\n                    stageMeta.bgColor\r\n                  )}\r\n                >\r\n                  <CardHeader className=\"pb-2\">\r\n                    <div className=\"flex items-start justify-between gap-3\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        {deal.company_logo_url ? (\r\n                          <Image\r\n                            src={deal.company_logo_url}\r\n                            alt={`${deal.company_name ?? deal.name} logo`}\r\n                            width={40}\r\n                            height={40}\r\n                            className=\"rounded-lg object-contain bg-background border border-border p-1\"\r\n                          />\r\n                        ) : (\r\n                          <div className=\"h-10 w-10 rounded-lg bg-background flex items-center justify-center text-muted-foreground text-lg font-semibold border border-border\">\r\n                            {deal.name.charAt(0)}\r\n                          </div>\r\n                        )}\r\n                        <div>\r\n                          <CardTitle className=\"text-base text-foreground\">\r\n                            {deal.name}\r\n                          </CardTitle>\r\n                          <CardDescription className=\"text-xs text-muted-foreground\">\r\n                            {deal.company_name ?? 'Issuer TBA'}\r\n                          </CardDescription>\r\n                        </div>\r\n                      </div>\r\n                      <Badge className={cn('text-xs font-medium', stageMeta.bgColor, stageMeta.textColor, stageMeta.borderColor, 'border')}>\r\n                        <StageIcon className=\"h-3 w-3 mr-1\" />\r\n                        {stageMeta.label}\r\n                      </Badge>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent className=\"pt-0 space-y-3\">\r\n                    {/* Progress indicator */}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"flex-1 h-1.5 bg-muted rounded-full overflow-hidden\">\r\n                        <div\r\n                          className={cn(\r\n                            'h-full rounded-full transition-all',\r\n                            stageMeta.stage === 6 ? 'w-1/4 bg-blue-500' :\r\n                            stageMeta.stage === 7 ? 'w-2/4 bg-indigo-500' :\r\n                            stageMeta.stage === 8 ? 'w-3/4 bg-purple-500' :\r\n                            'w-full bg-emerald-500'\r\n                          )}\r\n                        />\r\n                      </div>\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        Stage {stageMeta.stage}/10\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* Submission date */}\r\n                    <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\r\n                      <span>Submitted</span>\r\n                      <span>{new Date(subscription.submitted_at).toLocaleDateString()}</span>\r\n                    </div>\r\n\r\n                    {/* View Details button */}\r\n                    <Link\r\n                      href={`${detailUrlBase}/${deal.id}`}\r\n                      prefetch={false}\r\n                      onClick={() => console.log(`[DealsList] CLICKED: \"${deal.name}\" → navigating to ${detailUrlBase}/${deal.id}`)}\r\n                      data-deal-id={deal.id}\r\n                      data-deal-name={deal.name}\r\n                    >\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"w-full gap-2 mt-2\"\r\n                      >\r\n                        View Details\r\n                        <ArrowUpRight className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </Link>\r\n                  </CardContent>\r\n                </Card>\r\n              )\r\n            })}\r\n          </div>\r\n\r\n          {/* Divider */}\r\n          <div className=\"flex items-center gap-4 pt-4\">\r\n            <div className=\"flex-1 h-px bg-border\" />\r\n            <span className=\"text-sm text-muted-foreground\">Open Opportunities</span>\r\n            <div className=\"flex-1 h-px bg-border\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Deals Grid */}\r\n      {filteredDeals.length === 0 ? (\r\n        <div className=\"text-center py-16\">\r\n          {dealsData.length === 0 ? (\r\n            <>\r\n              <Users className=\"h-14 w-14 text-muted-foreground/50 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold text-foreground mb-2\">No deals available yet</h2>\r\n              <p className=\"text-muted-foreground\">\r\n                The team hasn&apos;t invited you to any opportunities. We&apos;ll notify you as soon as a deal opens up.\r\n              </p>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <AlertCircle className=\"h-14 w-14 text-muted-foreground/50 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold text-foreground mb-2\">No deals match your filters</h2>\r\n              <p className=\"text-muted-foreground mb-4\">\r\n                Try adjusting your search or filter criteria\r\n              </p>\r\n              <Button onClick={resetFilters} variant=\"outline\">\r\n                Clear all filters\r\n              </Button>\r\n            </>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\r\n          {filteredDeals.map((deal, index) => {\r\n            // DEBUG: Log each deal being rendered\r\n            console.log(`[DealsList] Rendering card #${index}: \"${deal.name}\" (ID: ${deal.id})`)\r\n\r\n            const feeStructure = feeStructureMap.get(deal.id) ?? null\r\n            const interest = interestByDeal.get(deal.id) ?? null\r\n            const ndaAccess = accessByDeal.get(deal.id) ?? null\r\n            const subscription = subscriptionByDeal.get(deal.id) ?? null\r\n            const membershipRole = deal.deal_memberships?.[0]?.role ?? null\r\n            const canInvest = isInvestorEligibleRole(membershipRole)\r\n            const isTrackingOnly = !!membershipRole && !canInvest\r\n\r\n            const effectiveStatus = getEffectiveStatus(deal)\r\n            const statusLabel =\r\n              dealTypeLabels[deal.deal_type] ?? deal.deal_type.replace(/_/g, ' ')\r\n\r\n            const deadlineCopy = formatDeadlineCopy(deal.close_at, effectiveStatus)\r\n\r\n            const indicativeAmount = interest?.indicative_amount ?? null\r\n            const indicativeCurrency =\r\n              interest?.indicative_currency ?? deal.currency ?? null\r\n\r\n            const hasDataRoomAccess = Boolean(ndaAccess)\r\n            const isClosed = effectiveStatus === 'closed'\r\n\r\n            // Check if deal was dispatched within last 7 days\r\n            const dispatchedAt = deal.deal_memberships?.[0]?.dispatched_at\r\n            const isNewlyDispatched = dispatchedAt &&\r\n              (Date.now() - new Date(dispatchedAt).getTime()) < 7 * 24 * 60 * 60 * 1000\r\n\r\n            return (\r\n              <Card key={deal.id} className=\"overflow-hidden border border-border shadow-sm\">\r\n                <CardHeader className=\"space-y-3\">\r\n                  <div className=\"flex items-start justify-between gap-4\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                      {deal.company_logo_url ? (\r\n                        <Image\r\n                          src={deal.company_logo_url}\r\n                          alt={`${deal.company_name ?? deal.name} logo`}\r\n                          width={56}\r\n                          height={56}\r\n                          className=\"rounded-lg object-contain bg-background border border-border p-2\"\r\n                        />\r\n                      ) : (\r\n                        <div className=\"h-14 w-14 rounded-lg bg-muted flex items-center justify-center text-muted-foreground text-xl font-semibold\">\r\n                          {deal.name.charAt(0)}\r\n                        </div>\r\n                      )}\r\n                      <div>\r\n                        <CardTitle className=\"text-xl text-foreground flex items-center gap-2\">\r\n                          {deal.name}\r\n                          <Badge className={cn('text-xs', statusBadges[effectiveStatus] ?? statusBadges.draft)}>\r\n                            {effectiveStatus.replace(/_/g, ' ').toUpperCase()}\r\n                          </Badge>\r\n                          {isNewlyDispatched && (\r\n                            <Badge className=\"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs\">\r\n                              NEW\r\n                            </Badge>\r\n                          )}\r\n                        </CardTitle>\r\n                        <CardDescription className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                          <Building2 className=\"h-4 w-4 text-muted-foreground\" />\r\n                          {deal.company_name ?? 'Issuer TBA'} • {statusLabel}\r\n                        </CardDescription>\r\n                        <div className=\"flex flex-wrap items-center gap-2 mt-2 text-xs text-muted-foreground\">\r\n                          {deal.stage && <span>Stage: {deal.stage}</span>}\r\n                          {deal.sector && <span>Sector: {deal.sector}</span>}\r\n                          {deal.location && <span>Location: {deal.location}</span>}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right space-y-1\">\r\n                      <p className=\"text-xs uppercase tracking-wide text-muted-foreground\">Timeline</p>\r\n                      <p className=\"text-sm font-medium text-foreground\">{deadlineCopy}</p>\r\n                      {ndaAccess?.expires_at && (\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          NDA access until {new Date(ndaAccess.expires_at).toLocaleDateString()}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {deal.company_website && (\r\n                    <div className=\"flex items-center gap-2 text-sm\">\r\n                      <ExternalLink className=\"h-4 w-4 text-blue-500\" />\r\n                      <Link\r\n                        href={deal.company_website}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n                      >\r\n                        Visit company site\r\n                      </Link>\r\n                    </div>\r\n                  )}\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-6\">\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n                    <div>\r\n                      <p className=\"text-xs uppercase tracking-wide text-muted-foreground\">Allocation</p>\r\n                      <p className=\"text-lg font-semibold text-foreground\">\r\n                        {feeStructure?.allocation_up_to\r\n                          ? formatCurrency(feeStructure.allocation_up_to, deal.currency)\r\n                          : deal.target_amount\r\n                            ? formatCurrency(deal.target_amount, deal.currency)\r\n                            : '(Pending)'}\r\n                      </p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-xs uppercase tracking-wide text-muted-foreground\">Minimum ticket</p>\r\n                      <p className=\"text-lg font-semibold text-foreground\">\r\n                        {feeStructure?.minimum_ticket\r\n                          ? formatCurrency(feeStructure.minimum_ticket, deal.currency)\r\n                          : deal.minimum_investment\r\n                            ? formatCurrency(deal.minimum_investment, deal.currency)\r\n                            : '(Pending)'}\r\n                      </p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-xs uppercase tracking-wide text-muted-foreground\">Unit price</p>\r\n                      <p className=\"text-lg font-semibold text-foreground\">\r\n                        {feeStructure?.price_per_share_text\r\n                          ? feeStructure.price_per_share_text\r\n                          : deal.offer_unit_price\r\n                            ? `${formatCurrency(deal.offer_unit_price, deal.currency)} per unit`\r\n                            : '(Pending)'}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* ============================================================ */}\r\n                  {/* PARTNER VIEW: Your Referrals (US-5.6.1-01 through 06) */}\r\n                  {/* ============================================================ */}\r\n                  {isPartnerView && (() => {\r\n                    const dealReferrals = referralsByDeal[deal.id] || []\r\n                    const dealSubscriptions = referralSubscriptionsByDeal[deal.id] || []\r\n                    const dealCommissions = partnerCommissionsByDeal[deal.id] || []\r\n\r\n                    // Get the commission rate (they should all be the same for this deal)\r\n                    const commissionRate = dealCommissions[0]?.rate_bps\r\n                      ? `${(dealCommissions[0].rate_bps / 100).toFixed(2)}%`\r\n                      : null\r\n\r\n                    // Calculate estimated commission from funded subscriptions\r\n                    const fundedSubs = dealSubscriptions.filter(s =>\r\n                      ['funded', 'active', 'activated', 'committed'].includes(s.status?.toLowerCase())\r\n                    )\r\n                    const totalFundedAmount = fundedSubs.reduce((sum, s) => sum + Number(s.commitment || 0), 0)\r\n                    const rateBps = dealCommissions[0]?.rate_bps ?? 0\r\n                    const estCommission = commissionRate && totalFundedAmount > 0 && rateBps > 0\r\n                      ? totalFundedAmount * (rateBps / 10000)\r\n                      : 0\r\n\r\n                    if (dealReferrals.length === 0) {\r\n                      return (\r\n                        <div className=\"rounded-lg border border-blue-100 dark:border-blue-900/50 bg-blue-50/50 dark:bg-blue-950/30 px-4 py-3\">\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <UserPlus className=\"h-4 w-4 text-blue-500 dark:text-blue-400\" />\r\n                              <span className=\"text-sm text-blue-700 dark:text-blue-300\">No referrals yet</span>\r\n                            </div>\r\n                            {commissionRate && (\r\n                              <span className=\"text-xs text-blue-600 dark:text-blue-400\">\r\n                                Fee: {commissionRate} of invested\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    }\r\n\r\n                    return (\r\n                      <div className=\"rounded-lg border border-blue-100 dark:border-blue-900/50 bg-blue-50/50 dark:bg-blue-950/30 px-4 py-3 space-y-3\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <UserPlus className=\"h-4 w-4 text-blue-500 dark:text-blue-400\" />\r\n                            <span className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\r\n                              Your Referrals ({dealReferrals.length})\r\n                            </span>\r\n                          </div>\r\n                          {commissionRate && (\r\n                            <span className=\"text-xs text-blue-600 dark:text-blue-400\">\r\n                              Fee: {commissionRate} of invested\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* List of referred investors with stage badges */}\r\n                        <div className=\"space-y-2\">\r\n                          {dealReferrals.slice(0, 5).map((referral) => {\r\n                            const stage = getReferralStage(referral, dealSubscriptions)\r\n                            const stageMeta = referralStageMeta[stage]\r\n\r\n                            return (\r\n                              <div\r\n                                key={referral.investor_id}\r\n                                className=\"flex items-center justify-between text-sm\"\r\n                              >\r\n                                <span className=\"text-foreground truncate max-w-[200px]\">\r\n                                  {referral.investor_name}\r\n                                </span>\r\n                                <Badge\r\n                                  variant=\"outline\"\r\n                                  className={cn(\r\n                                    'text-xs',\r\n                                    stageMeta.bgColor,\r\n                                    stageMeta.textColor,\r\n                                    stageMeta.borderColor,\r\n                                    'border'\r\n                                  )}\r\n                                >\r\n                                  {stageMeta.label}\r\n                                </Badge>\r\n                              </div>\r\n                            )\r\n                          })}\r\n                          {dealReferrals.length > 5 && (\r\n                            <p className=\"text-xs text-blue-600 dark:text-blue-400\">\r\n                              +{dealReferrals.length - 5} more referrals\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Estimated commission summary */}\r\n                        {estCommission > 0 && (\r\n                          <div className=\"pt-2 border-t border-blue-200 dark:border-blue-800 flex items-center justify-between\">\r\n                            <span className=\"text-xs text-blue-600 dark:text-blue-400\">Est. Commission:</span>\r\n                            <span className=\"text-sm font-semibold text-blue-900 dark:text-blue-100\">\r\n                              {formatCurrency(estCommission, dealCommissions[0]?.currency || deal.currency)}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )\r\n                  })()}\r\n\r\n                  {/* ============================================================ */}\r\n                  {/* INVESTOR VIEW: Your Pipeline (original investor tracking) */}\r\n                  {/* ============================================================ */}\r\n                  {isInvestorView && (\r\n                    <div className=\"grid grid-cols-1 gap-4\">\r\n                      <div>\r\n                        <p className=\"text-xs uppercase tracking-wide text-muted-foreground\">Your pipeline</p>\r\n                        <div className=\"flex flex-wrap items-center gap-2\">\r\n                          {interest ? (\r\n                            interest.is_post_close ? (\r\n                              <Badge className=\"w-fit bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300\">\r\n                                Future interest signal\r\n                              </Badge>\r\n                            ) : (\r\n                              <Badge className={cn('w-fit', interestStatusMeta[interest.status].tone)}>\r\n                                {interestStatusMeta[interest.status].label}\r\n                              </Badge>\r\n                            )\r\n                          ) : (\r\n                            <span className=\"text-sm text-muted-foreground\">No signal yet</span>\r\n                          )}\r\n                          {subscription && (\r\n                            <Badge variant=\"outline\" className=\"text-indigo-600 dark:text-indigo-400 border-indigo-300 dark:border-indigo-700\">\r\n                              Subscription {subscription.status.replace(/_/g, ' ')}\r\n                            </Badge>\r\n                          )}\r\n                          {isTrackingOnly && (\r\n                            <Badge variant=\"outline\" className=\"border-amber-200 dark:border-amber-700 text-amber-700 dark:text-amber-300\">\r\n                              Tracking only\r\n                            </Badge>\r\n                          )}\r\n                          {hasDataRoomAccess && (\r\n                            <Badge variant=\"outline\" className=\"text-sky-600 dark:text-sky-400 border-sky-300 dark:border-sky-700\">\r\n                              Data room unlocked\r\n                            </Badge>\r\n                          )}\r\n                          {feeStructure?.interest_confirmation_deadline && (\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              Interest deadline: {new Date(feeStructure.interest_confirmation_deadline).toLocaleDateString()}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* ============================================================ */}\r\n                  {/* GENERIC VIEW: Basic tracking info */}\r\n                  {/* ============================================================ */}\r\n                  {personaMode === 'GENERIC' && (\r\n                    <div className=\"rounded-lg border border-border bg-muted px-4 py-3\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                        <span className=\"text-sm text-muted-foreground\">View-only access</span>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {isInvestorView && interest && indicativeAmount ? (\r\n                    <div className=\"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/30 px-4 py-3 text-sm text-amber-700 dark:text-amber-300\">\r\n                      You indicated interest for approximately{' '}\r\n                      <span className=\"font-semibold\">\r\n                        {formatCurrency(indicativeAmount, indicativeCurrency)}\r\n                      </span>\r\n                      .\r\n                    </div>\r\n                  ) : null}\r\n\r\n                  <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-3\">\r\n                    <div className=\"flex items-center gap-3 text-sm text-muted-foreground\">\r\n                      <CalendarClock className=\"h-4 w-4 text-muted-foreground\" />\r\n                      {deal.open_at\r\n                        ? `Opened ${new Date(deal.open_at).toLocaleDateString()}`\r\n                        : 'Opening window announced soon'}\r\n                    </div>\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        className=\"gap-2\"\r\n                        data-deal-id={deal.id}\r\n                        data-deal-name={deal.name}\r\n                        onClick={() => {\r\n                          const url = `${detailUrlBase}/${deal.id}`\r\n                          console.log(`[DealsList] CLICKED: \"${deal.name}\" (ID: ${deal.id}) → HARD navigating to ${url}`)\r\n                          // NUCLEAR OPTION: Force full page reload to bypass ALL Next.js caching\r\n                          window.location.href = url\r\n                        }}\r\n                      >\r\n                        View details\r\n                        <ArrowUpRight className=\"h-4 w-4\" />\r\n                      </Button>\r\n\r\n                      {/* Subscribe to Investment - primary CTA for investors with valid investor ID */}\r\n                      {!isClosed && primaryInvestorId && canInvest && (\r\n                        <SubscribeNowDialog\r\n                          dealId={deal.id}\r\n                          dealName={deal.name}\r\n                          currency={deal.currency}\r\n                          existingSubmission={subscription}\r\n                        >\r\n                          <Button className=\"gap-2 bg-emerald-600 hover:bg-emerald-700\">\r\n                            Subscribe to Investment Opportunity\r\n                            <ArrowUpRight className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </SubscribeNowDialog>\r\n                      )}\r\n\r\n                      {/* Submit Interest for Data Room - secondary CTA for investors with a valid investor ID */}\r\n                      {primaryInvestorId && canInvest && (\r\n                        <InterestModal\r\n                          dealId={deal.id}\r\n                          dealName={deal.name}\r\n                          currency={deal.currency}\r\n                          investorId={primaryInvestorId}\r\n                          defaultAmount={indicativeAmount}\r\n                          isClosed={isClosed}\r\n                        >\r\n                          <Button className=\"gap-2\" variant={isClosed ? 'secondary' : 'outline'}>\r\n                            {isClosed ? \"Notify Me About Similar\" : \"Submit Interest for Data Room\"}\r\n                            <ArrowUpRight className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </InterestModal>\r\n                      )}\r\n\r\n                      {/* Partner Share Deal - PRD Rows 95-96 */}\r\n                      {partnerId && !isClosed && (\r\n                        <ShareDealDialog\r\n                          dealId={deal.id}\r\n                          dealName={deal.name}\r\n                          partnerId={partnerId}\r\n                        >\r\n                          <Button className=\"gap-2 bg-blue-600 hover:bg-blue-700\">\r\n                            <Share2 className=\"h-4 w-4\" />\r\n                            Share with Investor\r\n                          </Button>\r\n                        </ShareDealDialog>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8', key: '12jkf8' }],\n  ['path', { d: 'm22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7', key: '1ocrg3' }],\n  ['path', { d: 'm16 19 2 2 4-4', key: '1b14m6' }],\n];\n\n/**\n * @component @name MailCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTNWNmEyIDIgMCAwIDAtMi0ySDRhMiAyIDAgMCAwLTIgMnYxMmMwIDEuMS45IDIgMiAyaDgiIC8+CiAgPHBhdGggZD0ibTIyIDctOC45NyA1LjdhMS45NCAxLjk0IDAgMCAxLTIuMDYgMEwyIDciIC8+CiAgPHBhdGggZD0ibTE2IDE5IDIgMiA0LTQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/mail-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MailCheck = createLucideIcon('mail-check', __iconNode);\n\nexport default MailCheck;\n"],"names":[],"mappings":"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","ignoreList":[2]}