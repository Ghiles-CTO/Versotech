{"version":3,"sources":["../../../../../versotech-portal/src/app/%28main%29/versotech_main/my-mandates/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { Progress } from '@/components/ui/progress'\nimport {\n  FileText,\n  TrendingUp,\n  DollarSign,\n  Clock,\n  Search,\n  Loader2,\n  AlertCircle,\n  ExternalLink,\n  Briefcase,\n  Users,\n  Building2,\n  PenTool,\n  Calendar,\n  Filter,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\n\ntype Mandate = {\n  id: string\n  name: string\n  company_name: string | null\n  company_logo_url: string | null\n  deal_type: string\n  status: string\n  currency: string\n  target_amount: number\n  raised_amount: number\n  minimum_investment: number\n  sector: string | null\n  stage: string | null\n  location: string | null\n  open_at: string | null\n  close_at: string | null\n  created_at: string\n  investor_count: number\n  pending_signatures: number\n}\n\ntype PendingSignature = {\n  id: string\n  deal_id: string\n  deal_name: string\n  investor_name: string\n  subscription_id: string\n  document_type: string\n  created_at: string\n  token_expires_at: string\n  signing_url: string\n}\n\nconst DATE_FILTERS = [\n  { label: 'All Time', value: 'all' },\n  { label: 'Last 7 Days', value: '7d' },\n  { label: 'Last 30 Days', value: '30d' },\n  { label: 'Last 90 Days', value: '90d' },\n  { label: 'This Year', value: 'year' },\n]\n\ntype ArrangerInfo = {\n  id: string\n  legal_name: string\n  license_type: string | null\n  status: string | null\n}\n\ntype Summary = {\n  totalMandates: number\n  activeMandates: number\n  closedMandates: number\n  totalRaised: number\n  totalTarget: number\n  currency: string\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  open: 'bg-green-100 text-green-800 border-green-200',\n  draft: 'bg-gray-100 text-gray-800 border-gray-200',\n  closed: 'bg-blue-100 text-blue-800 border-blue-200',\n  cancelled: 'bg-red-100 text-red-800 border-red-200',\n  allocation_pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  fully_subscribed: 'bg-purple-100 text-purple-800 border-purple-200',\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Status', value: 'all' },\n  { label: 'Open', value: 'open' },\n  { label: 'Draft', value: 'draft' },\n  { label: 'Closed', value: 'closed' },\n  { label: 'Fully Subscribed', value: 'fully_subscribed' },\n]\n\nexport default function MyMandatesPage() {\n  const [arrangerInfo, setArrangerInfo] = useState<ArrangerInfo | null>(null)\n  const [mandates, setMandates] = useState<Mandate[]>([])\n  const [summary, setSummary] = useState<Summary>({\n    totalMandates: 0,\n    activeMandates: 0,\n    closedMandates: 0,\n    totalRaised: 0,\n    totalTarget: 0,\n    currency: 'USD',\n  })\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [dateFilter, setDateFilter] = useState('all')\n  const [totalPendingSignatures, setTotalPendingSignatures] = useState(0)\n  const [pendingSignaturesList, setPendingSignaturesList] = useState<PendingSignature[]>([])\n  const [showPendingList, setShowPendingList] = useState(false)\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        setLoading(true)\n        const supabase = createClient()\n\n        // Get current user\n        const { data: { user } } = await supabase.auth.getUser()\n        if (!user) {\n          setError('Not authenticated')\n          return\n        }\n\n        // Check if user is an arranger\n        const { data: arrangerUser, error: arrangerUserError } = await supabase\n          .from('arranger_users')\n          .select('arranger_id')\n          .eq('user_id', user.id)\n          .single()\n\n        if (arrangerUserError || !arrangerUser) {\n          // Maybe they're staff - show all arranger mandates\n          await fetchAllMandates(supabase)\n          return\n        }\n\n        // Fetch arranger info\n        const { data: arranger, error: arrangerError } = await supabase\n          .from('arranger_entities')\n          .select('id, legal_name, license_type, status')\n          .eq('id', arrangerUser.arranger_id)\n          .single()\n\n        if (arrangerError) throw arrangerError\n        setArrangerInfo(arranger)\n\n        // VEHICLE-LEVEL ARCHITECTURE: Fetch vehicles assigned to this arranger first\n        const { data: arrangerVehicles, error: vehiclesError } = await supabase\n          .from('vehicles')\n          .select('id, name')\n          .eq('arranger_entity_id', arrangerUser.arranger_id)\n\n        if (vehiclesError) throw vehiclesError\n\n        const vehicleIds = (arrangerVehicles || []).map((v: any) => v.id)\n\n        // Then fetch all deals under those vehicles (mandates)\n        let deals: any[] = []\n        if (vehicleIds.length > 0) {\n          const { data: vehicleDeals, error: dealsError } = await supabase\n            .from('deals')\n            .select(`\n              id,\n              name,\n              company_name,\n              company_logo_url,\n              deal_type,\n              status,\n              currency,\n              target_amount,\n              raised_amount,\n              minimum_investment,\n              sector,\n              stage,\n              location,\n              open_at,\n              close_at,\n              created_at,\n              vehicle_id\n            `)\n            .in('vehicle_id', vehicleIds)\n            .order('created_at', { ascending: false })\n\n          if (dealsError) throw dealsError\n          deals = vehicleDeals || []\n        }\n\n        // Get investor counts for each deal\n        const dealIds = (deals || []).map(d => d.id)\n        let investorCounts: Record<string, number> = {}\n        let pendingSignatures: Record<string, number> = {}\n\n        if (dealIds.length > 0) {\n          const { data: memberships } = await supabase\n            .from('deal_memberships')\n            .select('deal_id')\n            .in('deal_id', dealIds)\n            .eq('role', 'investor')\n\n          for (const m of memberships || []) {\n            if (m.deal_id) {\n              investorCounts[m.deal_id] = (investorCounts[m.deal_id] || 0) + 1\n            }\n          }\n\n          // Get pending signature counts for each deal\n          const { data: subscriptions } = await supabase\n            .from('subscriptions')\n            .select(`\n              id,\n              deal_id,\n              investor:investor_id (\n                id,\n                legal_name,\n                display_name\n              )\n            `)\n            .in('deal_id', dealIds)\n\n          if (subscriptions && subscriptions.length > 0) {\n            const subIds = subscriptions.map(s => s.id)\n            const { data: sigRequests } = await supabase\n              .from('signature_requests')\n              .select('id, subscription_id, status, signer_role, document_type, created_at, token_expires_at, signing_token')\n              .in('subscription_id', subIds)\n              .eq('status', 'pending')\n              .eq('signer_role', 'arranger')\n              .order('created_at', { ascending: false })\n\n            const pendingSigList: PendingSignature[] = []\n\n            for (const sig of sigRequests || []) {\n              const sub = subscriptions.find(s => s.id === sig.subscription_id) as any\n              if (sub?.deal_id) {\n                pendingSignatures[sub.deal_id] = (pendingSignatures[sub.deal_id] || 0) + 1\n\n                const deal = (deals || []).find((d: any) => d.id === sub.deal_id)\n                pendingSigList.push({\n                  id: sig.id,\n                  deal_id: sub.deal_id,\n                  deal_name: deal?.name || 'Unknown Deal',\n                  investor_name: sub.investor?.legal_name || sub.investor?.display_name || 'Unknown Investor',\n                  subscription_id: sig.subscription_id,\n                  document_type: sig.document_type,\n                  created_at: sig.created_at,\n                  token_expires_at: sig.token_expires_at,\n                  signing_url: `/versotech_main/versosign/sign/${sig.signing_token}`\n                })\n              }\n            }\n\n            setPendingSignaturesList(pendingSigList)\n          }\n        }\n\n        const totalPending = Object.values(pendingSignatures).reduce((sum, count) => sum + count, 0)\n        setTotalPendingSignatures(totalPending)\n\n        const processedMandates: Mandate[] = (deals || []).map(deal => ({\n          id: deal.id,\n          name: deal.name || 'Untitled Deal',\n          company_name: deal.company_name,\n          company_logo_url: deal.company_logo_url,\n          deal_type: deal.deal_type || 'unknown',\n          status: deal.status || 'draft',\n          currency: deal.currency || 'USD',\n          target_amount: Number(deal.target_amount) || 0,\n          raised_amount: Number(deal.raised_amount) || 0,\n          minimum_investment: Number(deal.minimum_investment) || 0,\n          sector: deal.sector,\n          stage: deal.stage,\n          location: deal.location,\n          open_at: deal.open_at,\n          close_at: deal.close_at,\n          created_at: deal.created_at,\n          investor_count: investorCounts[deal.id] || 0,\n          pending_signatures: pendingSignatures[deal.id] || 0,\n        }))\n\n        setMandates(processedMandates)\n\n        // Calculate summary\n        const active = processedMandates.filter(m => m.status === 'open' || m.status === 'allocation_pending').length\n        const closed = processedMandates.filter(m => m.status === 'closed' || m.status === 'fully_subscribed').length\n\n        let totalRaised = 0\n        let totalTarget = 0\n        for (const m of processedMandates) {\n          totalRaised += m.raised_amount\n          totalTarget += m.target_amount\n        }\n\n        setSummary({\n          totalMandates: processedMandates.length,\n          activeMandates: active,\n          closedMandates: closed,\n          totalRaised,\n          totalTarget,\n          currency: 'USD',\n        })\n\n        setError(null)\n      } catch (err) {\n        console.error('[MyMandatesPage] Error:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load mandates')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    async function fetchAllMandates(supabase: any) {\n      // VEHICLE-LEVEL ARCHITECTURE: Staff view - show deals under vehicles that have arrangers\n      // First get all vehicles with arranger_entity_id assigned\n      const { data: vehiclesWithArrangers, error: vehiclesError } = await supabase\n        .from('vehicles')\n        .select('id')\n        .not('arranger_entity_id', 'is', null)\n\n      if (vehiclesError) throw vehiclesError\n\n      const vehicleIds = (vehiclesWithArrangers || []).map((v: any) => v.id)\n\n      // Then get deals under those vehicles\n      let deals: any[] = []\n      if (vehicleIds.length > 0) {\n        const { data: vehicleDeals, error: dealsError } = await supabase\n          .from('deals')\n          .select(`\n            id,\n            name,\n            company_name,\n            company_logo_url,\n            deal_type,\n            status,\n            currency,\n            target_amount,\n            raised_amount,\n            minimum_investment,\n            sector,\n            stage,\n            location,\n            open_at,\n            close_at,\n            created_at,\n            vehicle_id\n          `)\n          .in('vehicle_id', vehicleIds)\n          .order('created_at', { ascending: false })\n          .limit(100)\n\n        if (dealsError) throw dealsError\n        deals = vehicleDeals || []\n      }\n\n      const processedMandates: Mandate[] = (deals || []).map((deal: any) => ({\n        id: deal.id,\n        name: deal.name || 'Untitled Deal',\n        company_name: deal.company_name,\n        company_logo_url: deal.company_logo_url,\n        deal_type: deal.deal_type || 'unknown',\n        status: deal.status || 'draft',\n        currency: deal.currency || 'USD',\n        target_amount: Number(deal.target_amount) || 0,\n        raised_amount: Number(deal.raised_amount) || 0,\n        minimum_investment: Number(deal.minimum_investment) || 0,\n        sector: deal.sector,\n        stage: deal.stage,\n        location: deal.location,\n        open_at: deal.open_at,\n        close_at: deal.close_at,\n        created_at: deal.created_at,\n        investor_count: 0,\n        pending_signatures: 0,\n      }))\n\n      setMandates(processedMandates)\n\n      const active = processedMandates.filter(m => m.status === 'open' || m.status === 'allocation_pending').length\n      const closed = processedMandates.filter(m => m.status === 'closed' || m.status === 'fully_subscribed').length\n\n      let totalRaised = 0\n      let totalTarget = 0\n      for (const m of processedMandates) {\n        totalRaised += m.raised_amount\n        totalTarget += m.target_amount\n      }\n\n      setSummary({\n        totalMandates: processedMandates.length,\n        activeMandates: active,\n        closedMandates: closed,\n        totalRaised,\n        totalTarget,\n        currency: 'USD',\n      })\n    }\n\n    fetchData()\n  }, [])\n\n  // Date filter helper\n  const getDateFilterCutoff = (filter: string): Date | null => {\n    const now = new Date()\n    switch (filter) {\n      case '7d':\n        return new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000)\n      case '30d':\n        return new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000)\n      case '90d':\n        return new Date(now.getTime() - 90 * 24 * 60 * 60 * 1000)\n      case 'year':\n        return new Date(now.getFullYear(), 0, 1)\n      default:\n        return null\n    }\n  }\n\n  // Filter mandates\n  const filteredMandates = mandates.filter(mandate => {\n    const matchesStatus = statusFilter === 'all' || mandate.status === statusFilter\n    const matchesSearch = !search ||\n      mandate.name?.toLowerCase().includes(search.toLowerCase()) ||\n      mandate.company_name?.toLowerCase().includes(search.toLowerCase()) ||\n      mandate.sector?.toLowerCase().includes(search.toLowerCase())\n\n    // Date filter\n    const cutoffDate = getDateFilterCutoff(dateFilter)\n    const matchesDate = !cutoffDate || new Date(mandate.created_at) >= cutoffDate\n\n    return matchesStatus && matchesSearch && matchesDate\n  })\n\n  const getProgressPercent = (raised: number, target: number) => {\n    if (target === 0) return 0\n    return Math.min(100, Math.round((raised / target) * 100))\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        <span className=\"ml-3 text-muted-foreground\">Loading mandates...</span>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-16\">\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Mandates</h3>\n        <p className=\"text-muted-foreground\">{error}</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">My Mandates</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {arrangerInfo\n              ? `Manage deals and placement activities as ${arrangerInfo.legal_name}`\n              : 'View all arranger mandates across the platform'}\n          </p>\n        </div>\n        {arrangerInfo && arrangerInfo.license_type && (\n          <Badge variant=\"outline\" className=\"capitalize\">\n            {arrangerInfo.license_type}\n          </Badge>\n        )}\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Briefcase className=\"h-4 w-4\" />\n              Total Mandates\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{summary.totalMandates}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {summary.activeMandates} active, {summary.closedMandates} closed\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <TrendingUp className=\"h-4 w-4\" />\n              Active Deals\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{summary.activeMandates}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Currently raising\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <DollarSign className=\"h-4 w-4\" />\n              Total Raised\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{formatCurrency(summary.totalRaised, summary.currency)}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              of {formatCurrency(summary.totalTarget, summary.currency)} target\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              Avg. Progress\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {summary.totalTarget > 0 ? getProgressPercent(summary.totalRaised, summary.totalTarget) : 0}%\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Overall fundraising\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Pending Signatures Alert */}\n      {totalPendingSignatures > 0 && (\n        <Card className=\"border-amber-500/30 bg-amber-50/50\">\n          <CardContent className=\"py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 rounded-full bg-amber-500/20\">\n                  <PenTool className=\"h-5 w-5 text-amber-600\" />\n                </div>\n                <div>\n                  <p className=\"font-medium text-foreground\">\n                    {totalPendingSignatures} Pending Signature{totalPendingSignatures !== 1 ? 's' : ''}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    You have subscription packs awaiting your countersignature\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setShowPendingList(!showPendingList)}\n                >\n                  {showPendingList ? 'Hide List' : 'Show List'}\n                </Button>\n                <Button variant=\"outline\" asChild>\n                  <Link href=\"/versotech_main/versosign\">\n                    <PenTool className=\"h-4 w-4 mr-2\" />\n                    Go to VERSOSign\n                  </Link>\n                </Button>\n              </div>\n            </div>\n\n            {/* Expanded Pending Signatures List */}\n            {showPendingList && pendingSignaturesList.length > 0 && (\n              <div className=\"mt-4 pt-4 border-t border-amber-300/30\">\n                <div className=\"space-y-2\">\n                  {pendingSignaturesList.map((sig) => {\n                    const expiresAt = new Date(sig.token_expires_at)\n                    const isExpiring = expiresAt.getTime() - Date.now() < 48 * 60 * 60 * 1000 // 48 hours\n\n                    return (\n                      <div\n                        key={sig.id}\n                        className=\"flex items-center justify-between p-3 bg-white/50 rounded-lg border border-amber-200/50\"\n                      >\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-medium text-foreground truncate\">\n                            {sig.deal_name}\n                          </p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {sig.investor_name} • {sig.document_type.replace('_', ' ')}\n                          </p>\n                          <p className={cn(\n                            \"text-xs mt-1\",\n                            isExpiring ? \"text-red-600 font-medium\" : \"text-muted-foreground\"\n                          )}>\n                            {isExpiring ? '⚠️ ' : ''}Expires: {formatDate(sig.token_expires_at)}\n                          </p>\n                        </div>\n                        <Button size=\"sm\" className=\"ml-4 bg-amber-600 hover:bg-amber-700\" asChild>\n                          <Link href={sig.signing_url}>\n                            <PenTool className=\"h-4 w-4 mr-1\" />\n                            Sign Now\n                          </Link>\n                        </Button>\n                      </div>\n                    )\n                  })}\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search by deal name, company, or sector...\"\n                  value={search}\n                  onChange={(e) => setSearch(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-full md:w-40\">\n                <SelectValue placeholder=\"Filter by status\" />\n              </SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((option) => (\n                  <SelectItem key={option.value} value={option.value}>\n                    {option.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <Select value={dateFilter} onValueChange={setDateFilter}>\n              <SelectTrigger className=\"w-full md:w-40\">\n                <Calendar className=\"h-4 w-4 mr-2\" />\n                <SelectValue placeholder=\"Filter by date\" />\n              </SelectTrigger>\n              <SelectContent>\n                {DATE_FILTERS.map((option) => (\n                  <SelectItem key={option.value} value={option.value}>\n                    {option.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Mandates Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Mandates</CardTitle>\n          <CardDescription>\n            {filteredMandates.length} mandate{filteredMandates.length !== 1 ? 's' : ''} found\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredMandates.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <FileText className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">\n                {search || statusFilter !== 'all'\n                  ? 'No mandates match your filters'\n                  : 'No mandates yet'}\n              </p>\n              {!arrangerInfo && mandates.length === 0 && (\n                <p className=\"text-xs text-muted-foreground\">\n                  Arranger mandates will appear here when deals are assigned to arranger entities\n                </p>\n              )}\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Deal</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Progress</TableHead>\n                    <TableHead>Investors</TableHead>\n                    <TableHead>Pending</TableHead>\n                    <TableHead>Timeline</TableHead>\n                    <TableHead className=\"text-right\">Actions</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredMandates.map((mandate) => (\n                    <TableRow key={mandate.id}>\n                      <TableCell>\n                        <div className=\"flex items-center gap-3\">\n                          {mandate.company_logo_url ? (\n                            <img\n                              src={mandate.company_logo_url}\n                              alt={mandate.company_name || ''}\n                              className=\"h-10 w-10 rounded-lg object-cover\"\n                            />\n                          ) : (\n                            <div className=\"h-10 w-10 rounded-lg bg-muted flex items-center justify-center\">\n                              <Building2 className=\"h-5 w-5 text-muted-foreground\" />\n                            </div>\n                          )}\n                          <div>\n                            <div className=\"font-medium\">{mandate.name}</div>\n                            {mandate.company_name && (\n                              <div className=\"text-xs text-muted-foreground\">\n                                {mandate.company_name}\n                                {mandate.sector && ` • ${mandate.sector}`}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <Badge\n                          variant=\"outline\"\n                          className={cn('capitalize', STATUS_STYLES[mandate.status] || STATUS_STYLES.draft)}\n                        >\n                          {mandate.status.replace('_', ' ')}\n                        </Badge>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"w-32 space-y-1\">\n                          <div className=\"flex justify-between text-xs\">\n                            <span>{formatCurrency(mandate.raised_amount, mandate.currency)}</span>\n                            <span className=\"text-muted-foreground\">\n                              {getProgressPercent(mandate.raised_amount, mandate.target_amount)}%\n                            </span>\n                          </div>\n                          <Progress\n                            value={getProgressPercent(mandate.raised_amount, mandate.target_amount)}\n                            className=\"h-2\"\n                          />\n                          <div className=\"text-xs text-muted-foreground\">\n                            of {formatCurrency(mandate.target_amount, mandate.currency)}\n                          </div>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-1\">\n                          <Users className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"font-medium\">{mandate.investor_count}</span>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        {mandate.pending_signatures > 0 ? (\n                          <Badge variant=\"outline\" className=\"bg-amber-50 text-amber-700 border-amber-200\">\n                            <PenTool className=\"h-3 w-3 mr-1\" />\n                            {mandate.pending_signatures}\n                          </Badge>\n                        ) : (\n                          <span className=\"text-muted-foreground text-xs\">—</span>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"text-sm\">\n                          {mandate.open_at && (\n                            <div className=\"text-xs\">\n                              Open: {formatDate(mandate.open_at)}\n                            </div>\n                          )}\n                          {mandate.close_at && (\n                            <div className=\"text-xs text-muted-foreground\">\n                              Close: {formatDate(mandate.close_at)}\n                            </div>\n                          )}\n                          {!mandate.open_at && !mandate.close_at && (\n                            <span className=\"text-muted-foreground text-xs\">No dates set</span>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <Button variant=\"ghost\" size=\"sm\" asChild>\n                          <Link href={`/versotech_main/my-mandates/${mandate.id}`}>\n                            <ExternalLink className=\"h-4 w-4\" />\n                          </Link>\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}