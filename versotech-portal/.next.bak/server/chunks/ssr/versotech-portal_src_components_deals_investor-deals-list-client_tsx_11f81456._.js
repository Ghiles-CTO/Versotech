module.exports=[546073,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(497412),e=a.i(714814),f=a.i(284169),g=a.i(15788),h=a.i(421908),i=a.i(663475),j=a.i(951870),k=a.i(888987),l=a.i(787957),m=a.i(877918),n=a.i(324117),o=a.i(278541),p=a.i(176531),q=a.i(618287),r=a.i(47748),s=a.i(503059);let t=(0,a.i(95799).default)("mail-check",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);var u=a.i(478870),v=a.i(487068),w=a.i(166457),x=a.i(823879),y=a.i(657668),z=a.i(203297),A=a.i(42329),B=a.i(155508),C=a.i(796300),D=a.i(860058),E=a.i(799373),F=a.i(966494),G=a.i(600900),H=a.i(680039),I=a.i(172793),J=a.i(509616),K=a.i(470305),L=a.i(249464),M=a.i(266828),N=a.i(3321),O=a.i(438436),P=a.i(399580),Q=a.i(58834),R=a.i(899750);function S({dealId:a,dealName:d,partnerId:e,children:f}){let[k,l]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(new Set),[C,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(!1),[S,T]=(0,c.useState)("");async function U(){o(!0);try{let b=(0,Q.createClient)(),{data:c,error:d}=await b.from("investors").select("id, display_name, legal_name, email, type").order("display_name").limit(100);if(d)throw d;v(c||[]);let{data:f,error:g}=await b.from("introducers").select("id, name, email").order("name").limit(50);g&&console.warn("Could not fetch introducers:",g),x(f||[]);let{data:h,error:i}=await b.from("partner_fee_models").select("id, fee_type, percentage_rate, flat_amount, currency").eq("partner_id",e).eq("deal_id",a).maybeSingle();i&&console.warn("Could not fetch fee model:",i),z(h);let{data:j,error:k}=await b.from("deal_memberships").select("investor_id").eq("deal_id",a).not("investor_id","is",null);k&&console.warn("Could not fetch existing memberships:",k);let l=new Set;j?.forEach(a=>{a.investor_id&&l.add(a.investor_id)}),B(l)}catch(a){console.error("[ShareDealDialog] Error fetching data:",a),R.toast.error("Failed to load data")}finally{o(!1)}}async function V(){if(!C)return void R.toast.error("Please select an investor");q(!0);try{let b=await fetch("/api/partners/me/share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deal_id:a,investor_id:C,introducer_id:I?G:null})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to share deal");s(!0),R.toast.success("Deal shared successfully!"),B(a=>new Set([...a,C])),setTimeout(()=>{l(!1),s(!1),F(""),H(""),J(!1)},2e3)}catch(a){console.error("[ShareDealDialog] Error sharing deal:",a),R.toast.error(a instanceof Error?a.message:"Failed to share deal")}finally{q(!1)}}(0,c.useEffect)(()=>{k&&U()},[k,e,a]);let W=t.filter(a=>{if(!S)return!0;let b=a.display_name||a.legal_name||"",c=a.email||"",d=S.toLowerCase();return b.toLowerCase().includes(d)||c.toLowerCase().includes(d)}).filter(a=>!A.has(a.id)),X=t.find(a=>a.id===C);return(0,b.jsxs)(K.Dialog,{open:k,onOpenChange:l,children:[(0,b.jsx)(K.DialogTrigger,{asChild:!0,children:f}),(0,b.jsxs)(K.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(K.DialogHeader,{children:[(0,b.jsxs)(K.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(D.Share2,{className:"h-5 w-5 text-blue-600"}),"Share Deal with Investor"]}),(0,b.jsxs)(K.DialogDescription,{children:["Share ",(0,b.jsx)("strong",{children:d})," with an investor in your network.",y&&(0,b.jsxs)("span",{className:"block mt-1 text-emerald-600",children:["Your commission: ",y.percentage_rate?`${y.percentage_rate}%`:`${y.currency} ${y.flat_amount}`]})]})]}),r?(0,b.jsxs)("div",{className:"py-8 text-center",children:[(0,b.jsx)(P.CheckCircle2,{className:"h-16 w-16 text-emerald-500 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Deal Shared Successfully!"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"The investor will receive an invitation to view this opportunity."})]}):n?(0,b.jsx)("div",{className:"py-8 flex items-center justify-center",children:(0,b.jsx)(N.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(L.Label,{htmlFor:"investor",className:"flex items-center gap-2",children:[(0,b.jsx)(u.Users,{className:"h-4 w-4"}),"Select Investor *"]}),(0,b.jsx)(i.Input,{placeholder:"Search investors by name or email...",value:S,onChange:a=>T(a.target.value),className:"mb-2"}),(0,b.jsxs)(j.Select,{value:C,onValueChange:F,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Choose an investor"})}),(0,b.jsx)(j.SelectContent,{className:"max-h-60",children:0===W.length?(0,b.jsx)("div",{className:"py-4 text-center text-sm text-muted-foreground",children:A.size>0?"All matching investors already have access":"No investors found"}):W.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:a.display_name||a.legal_name||"Unknown"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:a.type})]})},a.id))})]}),X?.email&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground pl-1",children:X.email})]}),w.length>0&&(0,b.jsxs)("div",{className:"border border-border rounded-lg p-4 bg-muted space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(M.Checkbox,{id:"include-introducer",checked:I,onCheckedChange:a=>J(!0===a)}),(0,b.jsxs)(L.Label,{htmlFor:"include-introducer",className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)(E.UserPlus,{className:"h-4 w-4 text-purple-600"}),"Co-refer with Introducer"]})]}),I&&(0,b.jsxs)(j.Select,{value:G,onValueChange:H,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select an introducer"})}),(0,b.jsx)(j.SelectContent,{children:w.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),y&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:[(0,b.jsx)(O.Percent,{className:"h-5 w-5 text-emerald-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-emerald-800",children:"Your Commission Rate"}),(0,b.jsxs)("p",{className:"text-xs text-emerald-600",children:[y.fee_type,": ",y.percentage_rate?`${y.percentage_rate}% of investment`:`${y.currency} ${y.flat_amount} flat fee`]})]})]}),!y&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,b.jsx)(m.AlertCircle,{className:"h-5 w-5 text-amber-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-800",children:"No Fee Model Assigned"}),(0,b.jsx)("p",{className:"text-xs text-amber-600",children:"Contact your arranger to set up a commission structure for this deal."})]})]})]}),!r&&!n&&(0,b.jsxs)(K.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:V,disabled:p||!C,className:"gap-2 bg-blue-600 hover:bg-blue-700",children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N.Loader2,{className:"h-4 w-4 animate-spin"}),"Sharing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.Share2,{className:"h-4 w-4"}),"Share Deal"]})})]})]})]})}let T={dispatched:{label:"Dispatched",bgColor:"bg-muted",textColor:"text-muted-foreground",borderColor:"border-border"},interested:{label:"Interested",bgColor:"bg-amber-50 dark:bg-amber-900/30",textColor:"text-amber-700 dark:text-amber-300",borderColor:"border-amber-200 dark:border-amber-700"},passed:{label:"Passed",bgColor:"bg-rose-50 dark:bg-rose-900/30",textColor:"text-rose-600 dark:text-rose-300",borderColor:"border-rose-200 dark:border-rose-700"},approved:{label:"Approved",bgColor:"bg-indigo-50 dark:bg-indigo-900/30",textColor:"text-indigo-700 dark:text-indigo-300",borderColor:"border-indigo-200 dark:border-indigo-700"},signed:{label:"Signed",bgColor:"bg-purple-50 dark:bg-purple-900/30",textColor:"text-purple-700 dark:text-purple-300",borderColor:"border-purple-200 dark:border-purple-700"},funded:{label:"Funded",bgColor:"bg-emerald-50 dark:bg-emerald-900/30",textColor:"text-emerald-700 dark:text-emerald-300",borderColor:"border-emerald-200 dark:border-emerald-700"}},U={equity_secondary:"Secondary Equity",equity_primary:"Primary Equity",credit_trade_finance:"Credit & Trade Finance",other:"Other"},V={draft:"bg-muted text-muted-foreground",open:"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300",allocation_pending:"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300",closed:"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300",cancelled:"bg-rose-100 dark:bg-rose-900/50 text-rose-700 dark:text-rose-300"},W=new Set(["investor","partner_investor","introducer_investor","commercial_partner_investor","co_investor"]),X={pending_review:{label:"Pending review",tone:"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300"},approved:{label:"NDA active",tone:"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300"},rejected:{label:"Declined",tone:"bg-rose-100 dark:bg-rose-900/50 text-rose-700 dark:text-rose-300"},withdrawn:{label:"Withdrawn",tone:"bg-muted text-muted-foreground"}},Y={pending_review:{label:"Pending Review",stage:6,icon:A.Clock,bgColor:"bg-amber-50 dark:bg-amber-900/30",textColor:"text-amber-700 dark:text-amber-300",borderColor:"border-amber-200 dark:border-amber-700"},pending:{label:"Pending Review",stage:6,icon:A.Clock,bgColor:"bg-amber-50 dark:bg-amber-900/30",textColor:"text-amber-700 dark:text-amber-300",borderColor:"border-amber-200 dark:border-amber-700"},approved:{label:"Approved",stage:7,icon:t,bgColor:"bg-indigo-50 dark:bg-indigo-900/30",textColor:"text-indigo-700 dark:text-indigo-300",borderColor:"border-indigo-200 dark:border-indigo-700"},committed:{label:"Committed",stage:8,icon:z.FileSignature,bgColor:"bg-purple-50 dark:bg-purple-900/30",textColor:"text-purple-700 dark:text-purple-300",borderColor:"border-purple-200 dark:border-purple-700"},partially_funded:{label:"Partially Funded",stage:9,icon:B.DollarSign,bgColor:"bg-teal-50 dark:bg-teal-900/30",textColor:"text-teal-700 dark:text-teal-300",borderColor:"border-teal-200 dark:border-teal-700"},funded:{label:"Funded",stage:9,icon:B.DollarSign,bgColor:"bg-emerald-50 dark:bg-emerald-900/30",textColor:"text-emerald-700 dark:text-emerald-300",borderColor:"border-emerald-200 dark:border-emerald-700"},pack_generated:{label:"Pack Generated",stage:6,icon:C.Package,bgColor:"bg-blue-50 dark:bg-blue-900/30",textColor:"text-blue-700 dark:text-blue-300",borderColor:"border-blue-200 dark:border-blue-700"},pack_sent:{label:"Pack Sent",stage:7,icon:t,bgColor:"bg-indigo-50 dark:bg-indigo-900/30",textColor:"text-indigo-700 dark:text-indigo-300",borderColor:"border-indigo-200 dark:border-indigo-700"},signed:{label:"Signed",stage:8,icon:z.FileSignature,bgColor:"bg-purple-50 dark:bg-purple-900/30",textColor:"text-purple-700 dark:text-purple-300",borderColor:"border-purple-200 dark:border-purple-700"},submitted:{label:"Submitted",stage:6,icon:A.Clock,bgColor:"bg-amber-50 dark:bg-amber-900/30",textColor:"text-amber-700 dark:text-amber-300",borderColor:"border-amber-200 dark:border-amber-700"},in_review:{label:"In Review",stage:6,icon:A.Clock,bgColor:"bg-amber-50 dark:bg-amber-900/30",textColor:"text-amber-700 dark:text-amber-300",borderColor:"border-amber-200 dark:border-amber-700"},rejected:{label:"Rejected",stage:0,icon:m.AlertCircle,bgColor:"bg-rose-50 dark:bg-rose-900/30",textColor:"text-rose-700 dark:text-rose-300",borderColor:"border-rose-200 dark:border-rose-700"},cancelled:{label:"Cancelled",stage:0,icon:m.AlertCircle,bgColor:"bg-muted",textColor:"text-muted-foreground",borderColor:"border-border"}};function Z(a,b){if(null==a)return"—";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:b?3===b.length?b.toUpperCase():b.toUpperCase().slice(0,3):"USD",maximumFractionDigits:a>=1e3?0:2}).format(a)}catch{return`${b??""} ${a.toLocaleString()}`}}function $(a){return"closed"===a.status||"cancelled"===a.status?a.status:a.close_at&&new Date(a.close_at)<new Date?"closed":a.status}function _({dealsData:a,feeStructureMap:z,interestByDeal:B,accessByDeal:C,subscriptionByDeal:K,primaryInvestorId:L,partnerId:M,summary:N,detailUrlBase:O="/versotech_main/opportunities",referralsByDeal:P={},referralSubscriptionsByDeal:Q={},partnerCommissionsByDeal:R={},partnerSummary:_}){let[aa,ab]=(0,c.useState)(!1),ac=(0,c.useMemo)(()=>M&&L?"DUAL_PERSONA":M?"PARTNER_ONLY":L?"INVESTOR_ONLY":"GENERIC",[M,L]),ad="PARTNER_ONLY"===ac||"DUAL_PERSONA"===ac,ae="INVESTOR_ONLY"===ac||"DUAL_PERSONA"===ac,[af,ag]=(0,c.useState)(""),[ah,ai]=(0,c.useState)("all"),[aj,ak]=(0,c.useState)("all"),[al,am]=(0,c.useState)("all"),[an,ao]=(0,c.useState)("all"),[ap,aq]=(0,c.useState)("all"),[ar,as]=(0,c.useState)("all"),[at,au]=(0,c.useState)("all"),[av,aw]=(0,c.useState)("closing_date"),[ax,ay]=(0,c.useState)(!1);(0,c.useEffect)(()=>{ab(!0)},[]);let az=(0,c.useMemo)(()=>{let b=new Set;return a.forEach(a=>{a.sector&&b.add(a.sector)}),Array.from(b).sort()},[a]),aA=(0,c.useMemo)(()=>{let b=new Set;return a.forEach(a=>{a.stage&&b.add(a.stage)}),Array.from(b).sort()},[a]),aB=(0,c.useMemo)(()=>{let b=new Set;return a.forEach(a=>{a.location&&b.add(a.location)}),Array.from(b).sort()},[a]),aC=(0,c.useMemo)(()=>{let b=[],c=["activated","active","completed"];return a.forEach(a=>{let d=K.get(a.id);if(d&&!c.includes(d.status.toLowerCase())){let c=Y[d.status.toLowerCase()]||Y.pending;b.push({deal:a,subscription:d,stageMeta:c})}}),b.sort((a,b)=>new Date(b.subscription.submitted_at).getTime()-new Date(a.subscription.submitted_at).getTime()),b},[a,K]),aD=(0,c.useMemo)(()=>{let b=[...a];if(af){let a=af.toLowerCase();b=b.filter(b=>b.name?.toLowerCase().includes(a)||b.company_name?.toLowerCase().includes(a)||b.sector?.toLowerCase().includes(a)||b.location?.toLowerCase().includes(a)||b.description?.toLowerCase().includes(a))}return"all"!==ah&&(b=b.filter(a=>$(a)===ah)),"all"!==aj&&(b=b.filter(a=>a.deal_type===aj)),"all"!==al&&(b=b.filter(a=>{let b=B.get(a.id);return"no_interest"===al?!b:b?.status===al})),"all"!==an&&(b=b.filter(a=>{let b=B.get(a.id),c=C.get(a.id),d=K.get(a.id);switch(an){case"interested":return!!b;case"nda_access":return!!c;case"subscription_submitted":return!!d;default:return!0}})),"all"!==ap&&(b=b.filter(a=>a.sector===ap)),"all"!==ar&&(b=b.filter(a=>a.stage===ar)),"all"!==at&&(b=b.filter(a=>a.location===at)),b.sort((a,b)=>{switch(av){case"closing_date":if(!a.close_at)return 1;if(!b.close_at)return -1;return new Date(a.close_at).getTime()-new Date(b.close_at).getTime();case"name":return a.name.localeCompare(b.name);case"opening_date":if(!a.open_at)return 1;if(!b.open_at)return -1;return new Date(b.open_at).getTime()-new Date(a.open_at).getTime();case"target_amount":return(b.target_amount||0)-(a.target_amount||0);default:return 0}}),b},[a,af,ah,aj,al,an,ap,ar,at,av,B,C,K]),aE=[af,"all"!==ah,"all"!==aj,"all"!==al,"all"!==an,"all"!==ap,"all"!==ar,"all"!==at].filter(Boolean).length,aF=()=>{ag(""),ai("all"),ak("all"),am("all"),ao("all"),aq("all"),as("all"),au("all")};return aa?(0,b.jsxs)("div",{className:"p-6 space-y-8",children:[(0,b.jsxs)("header",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold text-foreground",children:"Investment Opportunities"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track active allocations, NDAs, and subscriptions throughout the deal pipeline."})]}),ad&&_&&(0,b.jsxs)(b.Fragment,{children:["DUAL_PERSONA"===ac&&(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(g.Badge,{variant:"outline",className:"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700",children:[(0,b.jsx)(D.Share2,{className:"h-3 w-3 mr-1"}),"Partner View"]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)(f.Card,{className:"border-blue-100 dark:border-blue-900/50 bg-gradient-to-br from-blue-50/50 to-white dark:from-blue-950/30 dark:to-card",children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Total Referrals"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(E.UserPlus,{className:"h-4 w-4 text-blue-500"}),"Investors you've shared with"]})]}),(0,b.jsx)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:_.totalReferrals})]}),(0,b.jsxs)(f.Card,{className:"border-emerald-100 dark:border-emerald-900/50 bg-gradient-to-br from-emerald-50/50 to-white dark:from-emerald-950/30 dark:to-card",children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Converted"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(H.BadgeCheck,{className:"h-4 w-4 text-emerald-500"}),"Funded investments"]})]}),(0,b.jsx)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:_.converted})]}),(0,b.jsxs)(f.Card,{className:"border-amber-100 dark:border-amber-900/50 bg-gradient-to-br from-amber-50/50 to-white dark:from-amber-950/30 dark:to-card",children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Pipeline Value"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(F.TrendingUp,{className:"h-4 w-4 text-amber-500"}),"In-progress commitments"]})]}),(0,b.jsx)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:_.pipelineValue>0?Z(_.pipelineValue,_.currency):"—"})]}),(0,b.jsxs)(f.Card,{className:"border-purple-100 dark:border-purple-900/50 bg-gradient-to-br from-purple-50/50 to-white dark:from-purple-950/30 dark:to-card",children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Pending Commissions"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(G.Wallet,{className:"h-4 w-4 text-purple-500"}),"Accrued, awaiting invoice"]})]}),(0,b.jsx)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:_.pendingCommissions>0?Z(_.pendingCommissions,_.currency):"—"})]})]})]}),ae&&(0,b.jsxs)(b.Fragment,{children:["DUAL_PERSONA"===ac&&(0,b.jsx)("div",{className:"flex items-center gap-2 mt-4",children:(0,b.jsxs)(g.Badge,{variant:"outline",className:"bg-emerald-50 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700",children:[(0,b.jsx)(l.Activity,{className:"h-3 w-3 mr-1"}),"Investor View"]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Open deals"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(l.Activity,{className:"h-4 w-4 text-emerald-500"}),"Ready for exploration"]})]}),(0,b.jsxs)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:[N.openDeals," / ",N.totalDeals]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Pending interests"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(s.LineChart,{className:"h-4 w-4 text-amber-500"}),"Awaiting team review"]})]}),(0,b.jsx)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:N.pendingInterests})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Active NDAs"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(r.ShieldCheck,{className:"h-4 w-4 text-sky-500"}),"Data room unlocked"]})]}),(0,b.jsx)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:N.activeNdas})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Subscriptions in review"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(t,{className:"h-4 w-4 text-indigo-500"}),"Awaiting confirmation"]})]}),(0,b.jsx)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:N.submittedSubscriptions})]})]})]}),"GENERIC"===ac&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Open deals"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(l.Activity,{className:"h-4 w-4 text-emerald-500"}),"Ready for exploration"]})]}),(0,b.jsxs)(f.CardContent,{className:"text-2xl font-semibold text-foreground",children:[N.openDeals," / ",N.totalDeals]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{className:"pb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm text-muted-foreground",children:"Your Role"}),(0,b.jsxs)(f.CardDescription,{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(u.Users,{className:"h-4 w-4 text-muted-foreground"}),"Tracking access"]})]}),(0,b.jsx)(f.CardContent,{className:"text-lg font-medium text-muted-foreground",children:"View-only access"})]})]})]}),(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(v.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(i.Input,{placeholder:"Search deals by name, company, sector, location...",value:af,onChange:a=>ag(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(h.Button,{variant:"outline",onClick:()=>ay(!ax),className:"gap-2",children:[(0,b.jsx)(y.SlidersHorizontal,{className:"h-4 w-4"}),"Filters",aE>0&&(0,b.jsx)(g.Badge,{variant:"secondary",className:"ml-1",children:aE})]}),aE>0&&(0,b.jsxs)(h.Button,{variant:"ghost",onClick:aF,className:"gap-2",children:[(0,b.jsx)(x.X,{className:"h-4 w-4"}),"Clear"]})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,b.jsxs)(j.Select,{value:ah,onValueChange:ai,children:[(0,b.jsxs)(j.SelectTrigger,{className:"w-full md:w-[180px]",children:[(0,b.jsx)(w.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(j.SelectValue,{placeholder:"Status"})]}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(j.SelectItem,{value:"open",children:"Open"}),(0,b.jsx)(j.SelectItem,{value:"allocation_pending",children:"Allocation Pending"}),(0,b.jsx)(j.SelectItem,{value:"closed",children:"Closed"}),(0,b.jsx)(j.SelectItem,{value:"draft",children:"Draft"}),(0,b.jsx)(j.SelectItem,{value:"cancelled",children:"Cancelled"})]})]}),(0,b.jsxs)(j.Select,{value:aj,onValueChange:ak,children:[(0,b.jsx)(j.SelectTrigger,{className:"w-full md:w-[180px]",children:(0,b.jsx)(j.SelectValue,{placeholder:"Deal Type"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(j.SelectItem,{value:"equity_secondary",children:"Secondary Equity"}),(0,b.jsx)(j.SelectItem,{value:"equity_primary",children:"Primary Equity"}),(0,b.jsx)(j.SelectItem,{value:"credit_trade_finance",children:"Credit & Trade Finance"}),(0,b.jsx)(j.SelectItem,{value:"other",children:"Other"})]})]}),(0,b.jsxs)(j.Select,{value:an,onValueChange:ao,children:[(0,b.jsx)(j.SelectTrigger,{className:"w-full md:w-[180px]",children:(0,b.jsx)(j.SelectValue,{placeholder:"My Pipeline"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Stages"}),(0,b.jsx)(j.SelectItem,{value:"interested",children:"Interested"}),(0,b.jsx)(j.SelectItem,{value:"nda_access",children:"NDA Access"}),(0,b.jsx)(j.SelectItem,{value:"subscription_submitted",children:"Subscription Submitted"})]})]}),(0,b.jsxs)(j.Select,{value:av,onValueChange:aw,children:[(0,b.jsx)(j.SelectTrigger,{className:"w-full md:w-[180px]",children:(0,b.jsx)(j.SelectValue,{placeholder:"Sort by"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"closing_date",children:"Closing Date"}),(0,b.jsx)(j.SelectItem,{value:"name",children:"Name (A-Z)"}),(0,b.jsx)(j.SelectItem,{value:"opening_date",children:"Newest First"}),(0,b.jsx)(j.SelectItem,{value:"target_amount",children:"Target Amount"})]})]})]}),ax&&(0,b.jsxs)("div",{className:"pt-4 border-t border-border space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"Advanced Filters"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,b.jsxs)(j.Select,{value:al,onValueChange:am,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Interest Status"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Interest Status"}),(0,b.jsx)(j.SelectItem,{value:"no_interest",children:"No Interest Yet"}),(0,b.jsx)(j.SelectItem,{value:"pending_review",children:"Pending Review"}),(0,b.jsx)(j.SelectItem,{value:"approved",children:"Approved (NDA)"}),(0,b.jsx)(j.SelectItem,{value:"rejected",children:"Declined"}),(0,b.jsx)(j.SelectItem,{value:"withdrawn",children:"Withdrawn"})]})]}),(0,b.jsxs)(j.Select,{value:ap,onValueChange:aq,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Sector"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Sectors"}),az.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(j.Select,{value:ar,onValueChange:as,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Stage"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Stages"}),aA.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(j.Select,{value:at,onValueChange:au,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Location"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Locations"}),aB.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Showing ",aD.length," of ",a.length," deals"]}),aE>0&&(0,b.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[aE," filter",1!==aE?"s":""," active"]})]})]})}),aC.length>0&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(A.Clock,{className:"h-5 w-5 text-amber-500"}),"My Subscriptions"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Track your in-progress subscriptions (Stages 6-9)"})]}),(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-amber-600 border-amber-300",children:[aC.length," in progress"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:aC.map(({deal:a,subscription:c,stageMeta:i})=>{let j=i.icon;return(0,b.jsxs)(f.Card,{className:(0,k.cn)("overflow-hidden border-2 transition-all hover:shadow-md",i.borderColor,i.bgColor),children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.company_logo_url?(0,b.jsx)(e.default,{src:a.company_logo_url,alt:`${a.company_name??a.name} logo`,width:40,height:40,className:"rounded-lg object-contain bg-background border border-border p-1"}):(0,b.jsx)("div",{className:"h-10 w-10 rounded-lg bg-background flex items-center justify-center text-muted-foreground text-lg font-semibold border border-border",children:a.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{className:"text-base text-foreground",children:a.name}),(0,b.jsx)(f.CardDescription,{className:"text-xs text-muted-foreground",children:a.company_name??"Issuer TBA"})]})]}),(0,b.jsxs)(g.Badge,{className:(0,k.cn)("text-xs font-medium",i.bgColor,i.textColor,i.borderColor,"border"),children:[(0,b.jsx)(j,{className:"h-3 w-3 mr-1"}),i.label]})]})}),(0,b.jsxs)(f.CardContent,{className:"pt-0 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex-1 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:(0,k.cn)("h-full rounded-full transition-all",6===i.stage?"w-1/4 bg-blue-500":7===i.stage?"w-2/4 bg-indigo-500":8===i.stage?"w-3/4 bg-purple-500":"w-full bg-emerald-500")})}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Stage ",i.stage,"/10"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"Submitted"}),(0,b.jsx)("span",{children:new Date(c.submitted_at).toLocaleDateString()})]}),(0,b.jsx)(d.default,{href:`${O}/${a.id}`,prefetch:!1,onClick:()=>console.log(`[DealsList] CLICKED: "${a.name}" → navigating to ${O}/${a.id}`),"data-deal-id":a.id,"data-deal-name":a.name,children:(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",className:"w-full gap-2 mt-2",children:["View Details",(0,b.jsx)(n.ArrowUpRight,{className:"h-3 w-3"})]})})]})]},c.id)})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 pt-4",children:[(0,b.jsx)("div",{className:"flex-1 h-px bg-border"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Open Opportunities"}),(0,b.jsx)("div",{className:"flex-1 h-px bg-border"})]})]}),0===aD.length?(0,b.jsx)("div",{className:"text-center py-16",children:0===a.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Users,{className:"h-14 w-14 text-muted-foreground/50 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"No deals available yet"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"The team hasn't invited you to any opportunities. We'll notify you as soon as a deal opens up."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.AlertCircle,{className:"h-14 w-14 text-muted-foreground/50 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"No deals match your filters"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search or filter criteria"}),(0,b.jsx)(h.Button,{onClick:aF,variant:"outline",children:"Clear all filters"})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:aD.map((a,c)=>{let i,j,l,m,r,s,t;console.log(`[DealsList] Rendering card #${c}: "${a.name}" (ID: ${a.id})`);let v=z.get(a.id)??null,w=B.get(a.id)??null,x=C.get(a.id)??null,y=K.get(a.id)??null,A=a.deal_memberships?.[0]?.role??null,F=!!A&&W.has(A),G=!!A&&!F,H=$(a),N=U[a.deal_type]??a.deal_type.replace(/_/g," "),Y=function(a,b){if(!a)return"closed"===b?"Closed":"Timing to be announced";let c=new Date(a),d=new Date;if("closed"===b||c<d)return`Closed ${c.toLocaleDateString()}`;let e=Math.ceil((c.getTime()-d.getTime())/864e5);return e<=0?"Closing soon":1===e?"Closes tomorrow":e<=14?`Closes in ${e} days`:`Closes ${c.toLocaleDateString()}`}(a.close_at,H),_=w?.indicative_amount??null,aa=w?.indicative_currency??a.currency??null,ab=!!x,af="closed"===H,ag=a.deal_memberships?.[0]?.dispatched_at,ah=ag&&Date.now()-new Date(ag).getTime()<6048e5;return(0,b.jsxs)(f.Card,{className:"overflow-hidden border border-border shadow-sm",children:[(0,b.jsxs)(f.CardHeader,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[a.company_logo_url?(0,b.jsx)(e.default,{src:a.company_logo_url,alt:`${a.company_name??a.name} logo`,width:56,height:56,className:"rounded-lg object-contain bg-background border border-border p-2"}):(0,b.jsx)("div",{className:"h-14 w-14 rounded-lg bg-muted flex items-center justify-center text-muted-foreground text-xl font-semibold",children:a.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(f.CardTitle,{className:"text-xl text-foreground flex items-center gap-2",children:[a.name,(0,b.jsx)(g.Badge,{className:(0,k.cn)("text-xs",V[H]??V.draft),children:H.replace(/_/g," ").toUpperCase()}),ah&&(0,b.jsx)(g.Badge,{className:"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs",children:"NEW"})]}),(0,b.jsxs)(f.CardDescription,{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(o.Building2,{className:"h-4 w-4 text-muted-foreground"}),a.company_name??"Issuer TBA"," • ",N]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-xs text-muted-foreground",children:[a.stage&&(0,b.jsxs)("span",{children:["Stage: ",a.stage]}),a.sector&&(0,b.jsxs)("span",{children:["Sector: ",a.sector]}),a.location&&(0,b.jsxs)("span",{children:["Location: ",a.location]})]})]})]}),(0,b.jsxs)("div",{className:"text-right space-y-1",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Timeline"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:Y}),x?.expires_at&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["NDA access until ",new Date(x.expires_at).toLocaleDateString()]})]})]}),a.company_website&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(q.ExternalLink,{className:"h-4 w-4 text-blue-500"}),(0,b.jsx)(d.default,{href:a.company_website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Visit company site"})]})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Allocation"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:v?.allocation_up_to?Z(v.allocation_up_to,a.currency):a.target_amount?Z(a.target_amount,a.currency):"(Pending)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Minimum ticket"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:v?.minimum_ticket?Z(v.minimum_ticket,a.currency):a.minimum_investment?Z(a.minimum_investment,a.currency):"(Pending)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Unit price"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:v?.price_per_share_text?v.price_per_share_text:a.offer_unit_price?`${Z(a.offer_unit_price,a.currency)} per unit`:"(Pending)"})]})]}),ad&&(i=P[a.id]||[],j=Q[a.id]||[],l=R[a.id]||[],m=l[0]?.rate_bps?`${(l[0].rate_bps/100).toFixed(2)}%`:null,r=j.filter(a=>["funded","active","activated","committed"].includes(a.status?.toLowerCase())).reduce((a,b)=>a+Number(b.commitment||0),0),s=l[0]?.rate_bps??0,t=m&&r>0&&s>0?s/1e4*r:0,0===i.length?(0,b.jsx)("div",{className:"rounded-lg border border-blue-100 dark:border-blue-900/50 bg-blue-50/50 dark:bg-blue-950/30 px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.UserPlus,{className:"h-4 w-4 text-blue-500 dark:text-blue-400"}),(0,b.jsx)("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"No referrals yet"})]}),m&&(0,b.jsxs)("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:["Fee: ",m," of invested"]})]})}):(0,b.jsxs)("div",{className:"rounded-lg border border-blue-100 dark:border-blue-900/50 bg-blue-50/50 dark:bg-blue-950/30 px-4 py-3 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.UserPlus,{className:"h-4 w-4 text-blue-500 dark:text-blue-400"}),(0,b.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:["Your Referrals (",i.length,")"]})]}),m&&(0,b.jsxs)("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:["Fee: ",m," of invested"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[i.slice(0,5).map(a=>{let c=T[((a,b)=>{let c=b.find(b=>b.investor_id===a.investor_id);if(c){let a=c.status?.toLowerCase();if(["funded","active","activated","committed"].includes(a))return"funded";if("signed"===a||c.signed_at)return"signed";if("approved"===a)return"approved";if(["rejected","cancelled","passed","declined"].includes(a))return"passed"}return a.interest_confirmed_at?"interested":"dispatched"})(a,j)];return(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-foreground truncate max-w-[200px]",children:a.investor_name}),(0,b.jsx)(g.Badge,{variant:"outline",className:(0,k.cn)("text-xs",c.bgColor,c.textColor,c.borderColor,"border"),children:c.label})]},a.investor_id)}),i.length>5&&(0,b.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["+",i.length-5," more referrals"]})]}),t>0&&(0,b.jsxs)("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-800 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Est. Commission:"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:Z(t,l[0]?.currency||a.currency)})]})]})),ae&&(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Your pipeline"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[w?w.is_post_close?(0,b.jsx)(g.Badge,{className:"w-fit bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300",children:"Future interest signal"}):(0,b.jsx)(g.Badge,{className:(0,k.cn)("w-fit",X[w.status].tone),children:X[w.status].label}):(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"No signal yet"}),y&&(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-indigo-600 dark:text-indigo-400 border-indigo-300 dark:border-indigo-700",children:["Subscription ",y.status.replace(/_/g," ")]}),G&&(0,b.jsx)(g.Badge,{variant:"outline",className:"border-amber-200 dark:border-amber-700 text-amber-700 dark:text-amber-300",children:"Tracking only"}),ab&&(0,b.jsx)(g.Badge,{variant:"outline",className:"text-sky-600 dark:text-sky-400 border-sky-300 dark:border-sky-700",children:"Data room unlocked"}),v?.interest_confirmation_deadline&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Interest deadline: ",new Date(v.interest_confirmation_deadline).toLocaleDateString()]})]})]})}),"GENERIC"===ac&&(0,b.jsx)("div",{className:"rounded-lg border border-border bg-muted px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"View-only access"})]})}),ae&&w&&_?(0,b.jsxs)("div",{className:"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/30 px-4 py-3 text-sm text-amber-700 dark:text-amber-300",children:["You indicated interest for approximately"," ",(0,b.jsx)("span",{className:"font-semibold",children:Z(_,aa)}),"."]}):null,(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[(0,b.jsx)(p.CalendarClock,{className:"h-4 w-4 text-muted-foreground"}),a.open_at?`Opened ${new Date(a.open_at).toLocaleDateString()}`:"Opening window announced soon"]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)(h.Button,{variant:"outline",className:"gap-2","data-deal-id":a.id,"data-deal-name":a.name,onClick:()=>{let b=`${O}/${a.id}`;console.log(`[DealsList] CLICKED: "${a.name}" (ID: ${a.id}) → HARD navigating to ${b}`),window.location.href=b},children:["View details",(0,b.jsx)(n.ArrowUpRight,{className:"h-4 w-4"})]}),!af&&L&&F&&(0,b.jsx)(J.SubscribeNowDialog,{dealId:a.id,dealName:a.name,currency:a.currency,existingSubmission:y,children:(0,b.jsxs)(h.Button,{className:"gap-2 bg-emerald-600 hover:bg-emerald-700",children:["Subscribe to Investment Opportunity",(0,b.jsx)(n.ArrowUpRight,{className:"h-4 w-4"})]})}),L&&F&&(0,b.jsx)(I.InterestModal,{dealId:a.id,dealName:a.name,currency:a.currency,investorId:L,defaultAmount:_,isClosed:af,children:(0,b.jsxs)(h.Button,{className:"gap-2",variant:af?"secondary":"outline",children:[af?"Notify Me About Similar":"Submit Interest for Data Room",(0,b.jsx)(n.ArrowUpRight,{className:"h-4 w-4"})]})}),M&&!af&&(0,b.jsx)(S,{dealId:a.id,dealName:a.name,partnerId:M,children:(0,b.jsxs)(h.Button,{className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,b.jsx)(D.Share2,{className:"h-4 w-4"}),"Share with Investor"]})})]})]})]})]},a.id)})})]}):(0,b.jsxs)("div",{className:"p-6 space-y-8",children:[(0,b.jsx)("div",{className:"h-24 bg-muted animate-pulse rounded-lg"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-32 bg-muted animate-pulse rounded-lg"},c))}),(0,b.jsx)("div",{className:"h-48 bg-muted animate-pulse rounded-lg"})]})}a.s(["InvestorDealsListClient",()=>_],546073)}];

//# sourceMappingURL=versotech-portal_src_components_deals_investor-deals-list-client_tsx_11f81456._.js.map