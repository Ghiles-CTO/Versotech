{"version":3,"sources":["../../../../../versotech-portal/src/components/layout/unified-app-layout.tsx","../../../../../versotech-portal/src/components/layout/persona-sidebar.tsx","../../../../../versotech-portal/src/components/tour/tour-spotlight.tsx","../../../../../versotech-portal/node_modules/lucide-react/src/icons/keyboard.ts","../../../../../versotech-portal/src/components/tour/tour-tooltip.tsx","../../../../../versotech-portal/src/components/tour/tour-welcome-modal.tsx","../../../../../versotech-portal/src/config/platform-tour.ts","../../../../../versotech-portal/src/components/tour/platform-tour.tsx","../../../../../versotech-portal/node_modules/canvas-confetti/dist/confetti.module.mjs"],"sourcesContent":["'use client'\n\nimport { ReactNode, useState, useEffect } from 'react'\nimport { ThemeProvider, useTheme } from '@/components/theme-provider'\nimport { GlobalKeyboardShortcuts } from './global-keyboard-shortcuts'\nimport { PersonaSidebar, MobileSidebarContent } from './persona-sidebar'\nimport { NotificationCenter } from './notification-center'\nimport { IdentityMenu } from './identity-menu'\nimport { usePersona } from '@/contexts/persona-context'\nimport { AuthUser } from '@/lib/auth'\nimport { Sun, Moon, Monitor, Menu } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Sheet, SheetContent, SheetTitle } from '@/components/ui/sheet'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\n\ninterface UnifiedAppLayoutProps {\n  children: ReactNode\n  profile: AuthUser\n}\n\n// Theme toggle component\n// FIX: To prevent hydration mismatch from Radix UI's random ID generation,\n// render a static placeholder during SSR and swap to DropdownMenu after mount.\nfunction ThemeToggle() {\n  const [mounted, setMounted] = useState(false)\n  const { theme, preference, setPreference } = useTheme()\n\n  // Wait for client-side hydration to complete\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  // Compute styling based on theme\n  const isDark = theme === 'staff-dark'\n\n  // During SSR/initial render, show a static button placeholder (no Radix IDs)\n  // This prevents hydration mismatch from Radix generating different IDs\n  if (!mounted) {\n    return (\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"text-gray-500 hover:text-gray-900 hover:bg-gray-100\"\n        aria-label=\"Toggle theme\"\n      >\n        <Sun className=\"h-5 w-5\" />\n        <span className=\"sr-only\">Toggle theme</span>\n      </Button>\n    )\n  }\n\n  // After mount, render the full interactive DropdownMenu\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className={isDark ? 'text-zinc-400 hover:text-white hover:bg-white/10' : 'text-gray-500 hover:text-gray-900 hover:bg-gray-100'}\n        >\n          {theme === 'light' ? (\n            <Sun className=\"h-5 w-5\" />\n          ) : (\n            <Moon className=\"h-5 w-5\" />\n          )}\n          <span className=\"sr-only\">Toggle theme</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className={isDark ? 'bg-zinc-900 border-white/10' : ''}>\n        <DropdownMenuItem\n          onClick={() => setPreference('light')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'light' ? 'font-medium' : ''}`}\n        >\n          <Sun className=\"mr-2 h-4 w-4\" />\n          Light\n          {preference === 'light' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setPreference('dark')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'dark' ? 'font-medium' : ''}`}\n        >\n          <Moon className=\"mr-2 h-4 w-4\" />\n          Dark\n          {preference === 'dark' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setPreference('auto')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'auto' ? 'font-medium' : ''}`}\n        >\n          <Monitor className=\"mr-2 h-4 w-4\" />\n          Auto (by persona)\n          {preference === 'auto' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n\n// Inner layout component that uses theme context\n// IMPORTANT: Main layout elements use CSS classes (app-*) that respond to .staff-dark\n// on the html element. This prevents flash during SSR/hydration because the server-rendered\n// HTML has static class names, and the actual colors come from CSS cascade.\nfunction UnifiedAppLayoutInner({ children, profile }: UnifiedAppLayoutProps) {\n  const { isLoading } = usePersona()\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false)\n  const { theme } = useTheme()\n\n  // Determine if dark mode for Sheet styling\n  const isDark = theme === 'staff-dark'\n\n  if (isLoading) {\n    // Use CSS classes that respond to .staff-dark - prevents SSR flash\n    return (\n      <div className=\"flex h-screen items-center justify-center app-loading-bg\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 app-loading-spinner\"></div>\n      </div>\n    )\n  }\n\n  return (\n    // Use app-main-bg CSS class - responds to .staff-dark on html, preventing SSR flash\n    <div className=\"flex h-screen min-h-screen overflow-hidden app-main-bg\">\n      {/* Global Keyboard Shortcuts */}\n      <GlobalKeyboardShortcuts brand=\"versotech\" role={profile.role} />\n\n      {/* Persona-aware Sidebar */}\n      <PersonaSidebar />\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header - uses app-header CSS class for SSR-safe theming */}\n        {/* Responsive padding: tighter on mobile (px-4), normal on desktop (px-6) */}\n        <header className=\"app-header px-4 md:px-6 py-4 flex items-center justify-between\">\n          {/* Mobile hamburger - visible only on mobile */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"md:hidden h-10 w-10\"\n            onClick={() => setMobileMenuOpen(true)}\n            aria-label=\"Open menu\"\n          >\n            <Menu className=\"h-5 w-5\" />\n          </Button>\n\n          {/* Left spacer for centering - hidden on mobile */}\n          <div className=\"hidden md:block w-32\" />\n\n          {/* Center - Brand name */}\n          <h1\n            style={{ fontFamily: 'var(--font-spartan), sans-serif' }}\n            className=\"text-xl font-extrabold tracking-wide uppercase app-header-text\"\n          >\n            VERSOTECH\n          </h1>\n\n          {/* Right side - Utilities */}\n          <div className=\"flex items-center space-x-2\">\n            <ThemeToggle />\n            <NotificationCenter />\n            <IdentityMenu profile={profile} />\n          </div>\n        </header>\n\n        {/* Mobile Navigation Sheet */}\n        <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n          <SheetContent\n            side=\"left\"\n            className={`w-[calc(100%-1rem)] max-w-[280px] p-0 ${isDark ? 'bg-zinc-950 border-white/10' : 'bg-white border-gray-200'}`}\n          >\n            {/* Visually hidden title for accessibility - required by Radix Dialog */}\n            <SheetTitle className=\"sr-only\">Navigation Menu</SheetTitle>\n            <MobileSidebarContent onClose={() => setMobileMenuOpen(false)} />\n          </SheetContent>\n        </Sheet>\n\n        {/* Content Area - uses app-content CSS class for SSR-safe theming */}\n        <main className=\"flex-1 overflow-y-auto scrollbar-hide app-content\">\n          <div className=\"min-h-full app-content-inner\">\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  )\n}\n\nexport function UnifiedAppLayout({ children, profile }: UnifiedAppLayoutProps) {\n  // Per PHASE2_BASE_PLAN.md Section 11.6:\n  // \"Default to light theme (investor style) for ALL users\"\n  // Theme is USER CHOICE, not persona-based. Light is always default.\n  // Users can toggle to dark mode if they prefer.\n  const defaultTheme = 'light' as const\n\n  return (\n    <ThemeProvider defaultTheme={defaultTheme}>\n      <UnifiedAppLayoutInner profile={profile}>\n        {children}\n      </UnifiedAppLayoutInner>\n    </ThemeProvider>\n  )\n}\n","'use client'\r\n\r\nimport { useState, useMemo, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport { usePathname, useRouter } from 'next/navigation'\r\nimport Image from 'next/image'\r\nimport { Button } from '@/components/ui/button'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { cn } from '@/lib/utils'\r\nimport { usePersona, Persona } from '@/contexts/persona-context'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport {\r\n  LayoutDashboard,\r\n  Building2,\r\n  FileText,\r\n  FileSignature,\r\n  MessageSquare,\r\n  CheckSquare,\r\n  TrendingUp,\r\n  Users,\r\n  Workflow,\r\n  ClipboardList,\r\n  Shield,\r\n  Database,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  LogOut,\r\n  HandHeart,\r\n  Calculator,\r\n  Activity,\r\n  Briefcase,\r\n  UserCheck,\r\n  Search,\r\n  Bell,\r\n  Calendar,\r\n  Lock,\r\n  Share2,\r\n  ArrowRightLeft,\r\n  UserPlus,\r\n  Scale,\r\n  PenTool\r\n} from 'lucide-react'\r\n\r\ninterface NavItem {\r\n  name: string\r\n  href: string\r\n  icon: React.ComponentType<{ className?: string }>\r\n  badge?: string | number\r\n  description?: string\r\n}\r\n\r\n// Navigation items for each persona type\r\nconst PERSONA_NAV_ITEMS: Record<string, NavItem[]> = {\r\n  // CEO persona - Verso Capital management (full access)\r\n  // Note: CEO Profile is accessed via user menu (Profile Settings), not sidebar\r\n  // Grouped by: Core → Deal Flow → People → Docs & Legal → Finance → Compliance → Operations → Admin\r\n  ceo: [\r\n    // Core (daily use)\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Messages', href: '/versotech_main/messages', icon: MessageSquare, description: 'Inbox' },\r\n    { name: 'Approvals', href: '/versotech_main/approvals', icon: UserCheck, description: 'Pending approvals' },\r\n    // Deal Flow\r\n    { name: 'Deals', href: '/versotech_main/deals', icon: Activity, description: 'Deal management' },\r\n    { name: 'Vehicles', href: '/versotech_main/entities', icon: Building2, description: 'Investment vehicles' },\r\n    { name: 'Subscriptions', href: '/versotech_main/subscriptions', icon: FileText, description: 'Subscription tracking' },\r\n    // People\r\n    { name: 'Users', href: '/versotech_main/users', icon: Users, description: 'Platform users' },\r\n    { name: 'Accounts', href: '/versotech_main/accounts', icon: Building2, description: 'Business entities' },\r\n    { name: 'Investors', href: '/versotech_main/investors', icon: Users, description: 'Investor relations' },\r\n    { name: 'Introducers', href: '/versotech_main/introducers', icon: HandHeart, description: 'Partners' },\r\n    { name: 'Arrangers', href: '/versotech_main/arrangers', icon: Briefcase, description: 'Regulated entities' },\r\n    // Docs & Legal\r\n    { name: 'Documents', href: '/versotech_main/documents', icon: FileText, description: 'Document center' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Introducer Agreements', href: '/versotech_main/introducer-agreements', icon: FileText, description: 'Fee agreements' },\r\n    // Finance\r\n    { name: 'Fees', href: '/versotech_main/fees', icon: Calculator, description: 'Billing' },\r\n    { name: 'Reconciliation', href: '/versotech_main/reconciliation', icon: Calculator, description: 'Payments' },\r\n    // Compliance\r\n    { name: 'KYC Review', href: '/versotech_main/kyc-review', icon: UserCheck, description: 'KYC compliance' },\r\n    { name: 'Audit', href: '/versotech_main/audit', icon: Shield, description: 'Compliance logs' },\r\n    // Operations\r\n    { name: 'Requests', href: '/versotech_main/requests', icon: ClipboardList, description: 'Service requests' },\r\n    { name: 'Calendar', href: '/versotech_main/calendar', icon: Calendar, description: 'Schedule' },\r\n    { name: 'Processes', href: '/versotech_main/processes', icon: Workflow, description: 'Workflows' },\r\n    // Admin (always last)\r\n    { name: 'Admin', href: '/versotech_main/admin', icon: Database, description: 'System settings' },\r\n  ],\r\n\r\n  // Staff persona - common items for non-CEO staff roles (staff_ops, staff_rm)\r\n  staff: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Messages', href: '/versotech_main/messages', icon: MessageSquare, description: 'Inbox' },\r\n    { name: 'Approvals', href: '/versotech_main/approvals', icon: UserCheck, description: 'Pending approvals' },\r\n    { name: 'Deals', href: '/versotech_main/deals', icon: Activity, description: 'Deal management' },\r\n    { name: 'Vehicles', href: '/versotech_main/entities', icon: Building2, description: 'Investment vehicles' },\r\n    { name: 'Investors', href: '/versotech_main/investors', icon: Users, description: 'Investor relations' },\r\n    { name: 'Subscriptions', href: '/versotech_main/subscriptions', icon: FileText, description: 'Subscription tracking' },\r\n    { name: 'Requests', href: '/versotech_main/requests', icon: ClipboardList, description: 'Service requests' },\r\n    { name: 'Documents', href: '/versotech_main/documents', icon: FileText, description: 'Document center' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Introducers', href: '/versotech_main/introducers', icon: HandHeart, description: 'Partners' },\r\n    { name: 'Introducer Agreements', href: '/versotech_main/introducer-agreements', icon: FileText, description: 'Fee agreements' },\r\n    { name: 'Arrangers', href: '/versotech_main/arrangers', icon: Briefcase, description: 'Regulated entities' },\r\n    { name: 'Users', href: '/versotech_main/users', icon: Users, description: 'Platform users' },\r\n    { name: 'Accounts', href: '/versotech_main/accounts', icon: Building2, description: 'Business entities' },\r\n    { name: 'Calendar', href: '/versotech_main/calendar', icon: Calendar, description: 'Schedule' },\r\n  ],\r\n\r\n  // Investor persona\r\n  investor: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Portfolio overview' },\r\n    { name: 'Investment Opportunities', href: '/versotech_main/opportunities', icon: TrendingUp, description: 'Active deals & pipeline' },\r\n    { name: 'Portfolio', href: '/versotech_main/portfolio', icon: Briefcase, description: 'My investments' },\r\n    { name: 'Documents', href: '/versotech_main/documents', icon: FileText, description: 'My documents' },\r\n    { name: 'Inbox', href: '/versotech_main/inbox', icon: MessageSquare, description: 'Tasks, messages & notifications' },\r\n    { name: 'Profile', href: '/versotech_main/profile', icon: UserCheck, description: 'Entity & members' },\r\n  ],\r\n\r\n  // Arranger persona\r\n  arranger: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'My Mandates', href: '/versotech_main/my-mandates', icon: FileSignature, description: 'Deals I manage' },\r\n    { name: 'Subscription Packs', href: '/versotech_main/subscription-packs', icon: FileText, description: 'Pack review' },\r\n    { name: 'Escrow', href: '/versotech_main/escrow', icon: Lock, description: 'Escrow status' },\r\n    { name: 'Reconciliation', href: '/versotech_main/arranger-reconciliation', icon: Calculator, description: 'Financials' },\r\n    { name: 'Fee Plans', href: '/versotech_main/fee-plans', icon: Calculator, description: 'Fee structures' },\r\n    { name: 'Payment Requests', href: '/versotech_main/payment-requests', icon: ClipboardList, description: 'Fee collection' },\r\n    { name: 'My Partners', href: '/versotech_main/my-partners', icon: Users, description: 'Partner network' },\r\n    { name: 'My Introducers', href: '/versotech_main/my-introducers', icon: UserPlus, description: 'Introducer network' },\r\n    { name: 'My Commercial Partners', href: '/versotech_main/my-commercial-partners', icon: Building2, description: 'CP network' },\r\n    { name: 'My Lawyers', href: '/versotech_main/my-lawyers', icon: Scale, description: 'Legal counsel' },\r\n    { name: 'VERSOSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Profile', href: '/versotech_main/arranger-profile', icon: UserCheck, description: 'Entity & KYC status' },\r\n  ],\r\n\r\n  // Introducer persona\r\n  // NOTE: Messages removed per PRD - introducers have no messaging user stories (passive notification recipients only)\r\n  introducer: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Introductions', href: '/versotech_main/introductions', icon: UserPlus, description: 'My introductions' },\r\n    { name: 'Agreements', href: '/versotech_main/introducer-agreements', icon: FileText, description: 'Fee agreements' },\r\n    { name: 'My Commissions', href: '/versotech_main/my-commissions', icon: Calculator, description: 'Commission tracking & invoices' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Profile', href: '/versotech_main/introducer-profile', icon: UserCheck, description: 'My profile' },\r\n  ],\r\n\r\n  // Partner persona\r\n  // PRD Section 5.6: My Transactions as Partner - tracking referrals, commissions, invoicing\r\n  partner: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Opportunities', href: '/versotech_main/opportunities', icon: TrendingUp, description: 'Investment opportunities' },\r\n    { name: 'Transactions', href: '/versotech_main/partner-transactions', icon: ArrowRightLeft, description: 'My referred investors' },\r\n    { name: 'My Commissions', href: '/versotech_main/my-commissions', icon: Calculator, description: 'Revenue & invoicing' },\r\n    { name: 'Shared Deals', href: '/versotech_main/shared-transactions', icon: Share2, description: 'Co-referred deals' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Profile', href: '/versotech_main/partner-profile', icon: UserCheck, description: 'Entity & members' },\r\n  ],\r\n\r\n  // Commercial Partner persona\r\n  commercial_partner: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Opportunities', href: '/versotech_main/opportunities', icon: TrendingUp, description: 'Investment opportunities' },\r\n    { name: 'Client Transactions', href: '/versotech_main/client-transactions', icon: Users, description: 'Client investors' },\r\n    { name: 'My Commissions', href: '/versotech_main/my-commissions', icon: Calculator, description: 'Commission tracking & invoices' },\r\n    { name: 'Portfolio', href: '/versotech_main/portfolio', icon: Briefcase, description: 'My investments' },\r\n    { name: 'Agreements', href: '/versotech_main/placement-agreements', icon: FileText, description: 'Placement agreements' },\r\n    { name: 'Profile', href: '/versotech_main/commercial-partner-profile', icon: FileSignature, description: 'Signature & settings' },\r\n    { name: 'Notifications', href: '/versotech_main/notifications', icon: Bell, description: 'Alerts & updates' },\r\n    { name: 'Messages', href: '/versotech_main/messages', icon: MessageSquare, description: 'Communications' },\r\n  ],\r\n\r\n  // Lawyer persona\r\n  // NOTE: Messages removed - lawyers are passive notification recipients only (same as introducers)\r\n  // NOTE: Notifications removed from sidebar - header bell icon provides access (avoids redundancy)\r\n  lawyer: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Assigned Deals', href: '/versotech_main/assigned-deals', icon: Briefcase, description: 'My deals' },\r\n    { name: 'Escrow', href: '/versotech_main/escrow', icon: Lock, description: 'Escrow management' },\r\n    { name: 'Subscription Packs', href: '/versotech_main/subscription-packs', icon: FileText, description: 'Pack review' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: PenTool, description: 'E-signatures' },\r\n    { name: 'Reconciliation', href: '/versotech_main/lawyer-reconciliation', icon: Calculator, description: 'Financials' },\r\n    { name: 'Profile', href: '/versotech_main/lawyer-profile', icon: FileSignature, description: 'Signature & settings' },\r\n  ],\r\n}\r\n\r\n/**\r\n * Get navigation items for a specific persona\r\n */\r\nfunction getNavForPersona(persona: Persona): NavItem[] {\r\n  // CEO persona now has its own nav items (no longer uses staff + extras)\r\n  return PERSONA_NAV_ITEMS[persona.persona_type] || []\r\n}\r\n\r\n/**\r\n * Merge navigation items from multiple personas (deduping by href)\r\n */\r\nfunction mergeNavItems(personas: Persona[]): NavItem[] {\r\n  const seen = new Set<string>()\r\n  const merged: NavItem[] = []\r\n\r\n  for (const persona of personas) {\r\n    const items = getNavForPersona(persona)\r\n    for (const item of items) {\r\n      if (!seen.has(item.href)) {\r\n        seen.add(item.href)\r\n        merged.push(item)\r\n      }\r\n    }\r\n  }\r\n\r\n  return merged\r\n}\r\n\r\nexport function PersonaSidebar() {\r\n  // Default expanded on desktop - mobile uses separate Sheet drawer via MobileSidebarContent\r\n  const [collapsed, setCollapsed] = useState(false)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [mounted, setMounted] = useState(false)\r\n  const pathname = usePathname()\r\n  const router = useRouter()\r\n\r\n  const { personas, activePersona } = usePersona()\r\n  const { theme } = useTheme()\r\n\r\n  // Hydration fix: Only apply theme after component mounts to avoid SSR mismatch\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // REMOVED: resize useEffect that caused desktop flash\r\n  // Mobile now uses Sheet drawer via MobileSidebarContent, desktop always shows sidebar\r\n\r\n  // Determine if dark mode based on ACTIVE persona only\r\n  // Use mounted check to prevent hydration mismatch (server renders light, client may have dark)\r\n  const isDark = mounted && theme === 'staff-dark'\r\n\r\n  // Build navigation based on active persona or all personas\r\n  const navItems = useMemo(() => {\r\n    // If user has active persona, show items for that persona only\r\n    if (activePersona) {\r\n      return getNavForPersona(activePersona)\r\n    }\r\n    // Otherwise merge all persona nav items\r\n    return mergeNavItems(personas)\r\n  }, [activePersona, personas])\r\n\r\n  // Filter nav items by search\r\n  const filteredNavItems = navItems.filter(item =>\r\n    item.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  )\r\n\r\n  // Handle sign out\r\n  const handleSignOut = async (e: React.MouseEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    try {\r\n      const supabase = createClient()\r\n      await supabase.auth.signOut()\r\n      router.push('/versotech_main/login')\r\n    } catch (error) {\r\n      console.error('Sign out error:', error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\r\n      // Hidden on mobile, flex on desktop - CSS-first responsive (no JS flash)\r\n      \"hidden md:flex flex-col h-screen border-r relative z-50\",\r\n      collapsed ? \"w-[80px]\" : \"w-[280px]\",\r\n      // Only animate width AFTER mount to prevent flash on initial render\r\n      mounted && \"transition-[width] duration-300\",\r\n      isDark\r\n        ? \"bg-zinc-950 border-white/5 text-zinc-400\"\r\n        : \"bg-white border-gray-100 text-gray-600\"\r\n    )}>\r\n      {/* Header */}\r\n      <div className=\"p-6 flex items-center justify-between h-20\">\r\n        {!collapsed && (\r\n          <div className=\"flex items-center gap-3 animate-in fade-in duration-300\">\r\n            <div className=\"relative h-10 w-32 overflow-hidden\">\r\n              <Image\r\n                src=\"/versotech-logo.jpg\"\r\n                alt=\"Logo\"\r\n                fill\r\n                className={cn(\r\n                  \"object-contain object-left\",\r\n                  isDark && \"invert\"\r\n                )}\r\n                priority\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {collapsed && (\r\n          <div className=\"mx-auto\">\r\n            <div className={cn(\r\n              \"relative h-8 w-8 rounded-lg overflow-hidden\",\r\n              isDark ? \"bg-white/5 ring-1 ring-white/10\" : \"bg-gray-50 ring-1 ring-gray-100\"\r\n            )}>\r\n              <Image\r\n                src=\"/versotech-logo.jpg\"\r\n                alt=\"Logo\"\r\n                fill\r\n                className=\"object-cover\"\r\n                priority\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={() => setCollapsed(!collapsed)}\r\n          aria-label={collapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\r\n          aria-expanded={!collapsed}\r\n          className={cn(\r\n            // Touch target: 40px on mobile (near 44px guideline), 24px on desktop\r\n            // Position adjusted for larger mobile button\r\n            \"absolute -right-4 md:-right-3 top-8 h-10 w-10 md:h-6 md:w-6 rounded-full border shadow-sm z-50 flex items-center justify-center transition-colors\",\r\n            isDark\r\n              ? \"bg-zinc-900 border-white/10 text-zinc-400 hover:text-white hover:bg-white/5\"\r\n              : \"bg-white border-gray-200 text-gray-500 hover:text-gray-900 hover:bg-gray-50\"\r\n          )}\r\n        >\r\n          {collapsed ? <ChevronRight className=\"h-4 w-4 md:h-3 md:w-3\" /> : <ChevronLeft className=\"h-4 w-4 md:h-3 md:w-3\" />}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      {!collapsed && (\r\n        <div className=\"px-4 mb-4 animate-in fade-in slide-in-from-top-2 duration-300\">\r\n          <div className=\"relative group\">\r\n            <Search className={cn(\r\n              \"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 transition-colors\",\r\n              isDark\r\n                ? \"text-gray-500 group-focus-within:text-white\"\r\n                : \"text-gray-400 group-focus-within:text-gray-900\"\r\n            )} />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className={cn(\r\n                \"w-full pl-9 pr-4 py-2 rounded-lg text-sm transition-all outline-none\",\r\n                isDark\r\n                  ? \"bg-white/5 border border-white/5 text-white placeholder:text-gray-600 focus:bg-white/10 focus:border-white/10\"\r\n                  : \"bg-gray-50 border border-gray-100 text-gray-900 placeholder:text-gray-400 focus:bg-white focus:border-gray-200 focus:ring-2 focus:ring-blue-500/10\"\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex-1 overflow-y-auto scrollbar-hide px-3 py-2 space-y-1\">\r\n        {filteredNavItems.map((item) => {\r\n          const isDashboard = item.name === 'Dashboard'\r\n          const isActive = isDashboard\r\n            ? pathname === item.href\r\n            : pathname === item.href || pathname.startsWith(`${item.href}/`)\r\n          const Icon = item.icon\r\n\r\n          // Generate data-tour attribute from item name (lowercase, hyphenated)\r\n          const tourId = `nav-${item.name.toLowerCase().replace(/\\s+/g, '-')}`\r\n\r\n          return (\r\n            <Link key={item.href} href={item.href} className=\"block group relative\" data-tour={tourId}>\r\n              <div className={cn(\r\n                \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\",\r\n                isActive\r\n                  ? isDark\r\n                    ? \"bg-gradient-to-r from-blue-600/20 to-blue-600/5 text-blue-400\"\r\n                    : \"bg-blue-50 text-blue-700\"\r\n                  : isDark\r\n                    ? \"text-gray-400 hover:text-white hover:bg-white/5\"\r\n                    : \"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"\r\n              )}>\r\n                <Icon className={cn(\r\n                  \"h-5 w-5 transition-colors\",\r\n                  isActive\r\n                    ? isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                    : isDark ? \"text-gray-500 group-hover:text-white\" : \"text-gray-400 group-hover:text-gray-600\"\r\n                )} />\r\n\r\n                {!collapsed && (\r\n                  <span className=\"flex-1 text-sm font-medium\">{item.name}</span>\r\n                )}\r\n\r\n                {/* Active Indicator Bar */}\r\n                {isActive && (\r\n                  <div className={cn(\r\n                    \"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r-full\",\r\n                    isDark ? \"bg-blue-500\" : \"bg-blue-600\"\r\n                  )} />\r\n                )}\r\n              </div>\r\n\r\n              {/* Tooltip for collapsed state */}\r\n              {collapsed && (\r\n                <div className={cn(\r\n                  \"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-md text-xs font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 shadow-xl border\",\r\n                  isDark\r\n                    ? \"bg-zinc-800 border-white/10 text-white\"\r\n                    : \"bg-white border-gray-100 text-gray-900\"\r\n                )}>\r\n                  {item.name}\r\n                </div>\r\n              )}\r\n            </Link>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {/* Sign Out */}\r\n      <div className={cn(\r\n        \"p-4 border-t mt-auto\",\r\n        isDark ? \"border-white/5\" : \"border-gray-100\"\r\n      )}>\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={handleSignOut}\r\n          className={cn(\r\n            \"w-full justify-start gap-3\",\r\n            isDark\r\n              ? \"text-gray-400 hover:text-red-400 hover:bg-white/5\"\r\n              : \"text-gray-600 hover:text-red-600 hover:bg-red-50\"\r\n          )}\r\n        >\r\n          <LogOut className=\"h-5 w-5\" />\r\n          {!collapsed && <span>Sign Out</span>}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Mobile sidebar content for Sheet drawer - separate from desktop PersonaSidebar\r\n * This is displayed in a Sheet component when the mobile hamburger menu is tapped\r\n */\r\nexport function MobileSidebarContent({ onClose }: { onClose: () => void }) {\r\n  const pathname = usePathname()\r\n  const router = useRouter()\r\n  const { personas, activePersona } = usePersona()\r\n  const { theme } = useTheme()\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => { setMounted(true) }, [])\r\n\r\n  const isDark = mounted && theme === 'staff-dark'\r\n\r\n  const navItems = useMemo(() => {\r\n    if (activePersona) return getNavForPersona(activePersona)\r\n    return mergeNavItems(personas)\r\n  }, [activePersona, personas])\r\n\r\n  const handleSignOut = async () => {\r\n    const supabase = createClient()\r\n    await supabase.auth.signOut()\r\n    router.push('/versotech_main/login')\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\r\n      \"flex flex-col h-full\",\r\n      isDark ? \"bg-zinc-950 text-zinc-400\" : \"bg-white text-gray-600\"\r\n    )}>\r\n      {/* Logo */}\r\n      <div className=\"p-6 h-20\">\r\n        <div className=\"relative h-10 w-32\">\r\n          <Image\r\n            src=\"/versotech-logo.jpg\"\r\n            alt=\"Logo\"\r\n            fill\r\n            className={cn(\"object-contain object-left\", isDark && \"invert\")}\r\n            priority\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex-1 overflow-y-auto scrollbar-hide px-3 py-2 space-y-1\">\r\n        {navItems.map((item) => {\r\n          const isActive = item.name === 'Dashboard'\r\n            ? pathname === item.href\r\n            : pathname === item.href || pathname.startsWith(`${item.href}/`)\r\n          const Icon = item.icon\r\n          // Generate data-tour attribute from item name (lowercase, hyphenated)\r\n          const tourId = `nav-${item.name.toLowerCase().replace(/\\s+/g, '-')}`\r\n\r\n          return (\r\n            <Link\r\n              key={item.href}\r\n              href={item.href}\r\n              onClick={onClose}\r\n              className=\"block group relative\"\r\n              data-tour={tourId}\r\n            >\r\n              <div className={cn(\r\n                \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\",\r\n                isActive\r\n                  ? isDark\r\n                    ? \"bg-gradient-to-r from-blue-600/20 to-blue-600/5 text-blue-400\"\r\n                    : \"bg-blue-50 text-blue-700\"\r\n                  : isDark\r\n                    ? \"text-gray-400 hover:text-white hover:bg-white/5\"\r\n                    : \"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"\r\n              )}>\r\n                <Icon className={cn(\r\n                  \"h-5 w-5\",\r\n                  isActive ? (isDark ? \"text-blue-400\" : \"text-blue-600\") : \"\"\r\n                )} />\r\n                <span className=\"flex-1 text-sm font-medium\">{item.name}</span>\r\n              </div>\r\n            </Link>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {/* Sign Out */}\r\n      <div className={cn(\"p-4 border-t mt-auto\", isDark ? \"border-white/5\" : \"border-gray-100\")}>\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={handleSignOut}\r\n          className={cn(\r\n            \"w-full justify-start gap-3\",\r\n            isDark\r\n              ? \"text-gray-400 hover:text-red-400 hover:bg-white/5\"\r\n              : \"text-gray-600 hover:text-red-600 hover:bg-red-50\"\r\n          )}\r\n        >\r\n          <LogOut className=\"h-5 w-5\" />\r\n          <span>Sign Out</span>\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\n\r\ninterface TourSpotlightProps {\r\n  targetSelector: string\r\n  isVisible: boolean\r\n  padding?: number\r\n}\r\n\r\n/**\r\n * Tour Spotlight Component - Premium Glass Morphism Edition\r\n *\r\n * Uses a 4-div overlay approach for crisp rectangular cutouts with\r\n * glass morphism effects and enhanced animations:\r\n *\r\n * ┌────────────────────────────────────────┐\r\n * │              TOP OVERLAY               │\r\n * │         (blur + 55% opacity)           │\r\n * ├────────┬──────────────────┬────────────┤\r\n * │  LEFT  │   TARGET AREA    │   RIGHT    │\r\n * │OVERLAY │ ┌──────────────┐ │  OVERLAY   │\r\n * │        │ │  Inner Glow  │ │            │\r\n * │        │ └──────────────┘ │            │\r\n * ├────────┴──────────────────┴────────────┤\r\n * │            BOTTOM OVERLAY              │\r\n * └────────────────────────────────────────┘\r\n *\r\n * Features:\r\n * - Glass morphism backdrop blur on overlays\r\n * - Animated glow ring with pulsing effect\r\n * - Inner highlight ring for depth\r\n * - Staggered entry animations\r\n */\r\nexport function TourSpotlight({ targetSelector, isVisible, padding = 8 }: TourSpotlightProps) {\r\n  const [targetRect, setTargetRect] = useState<DOMRect | null>(null)\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!isVisible || !mounted) {\r\n      setTargetRect(null)\r\n      return\r\n    }\r\n\r\n    const updateRect = () => {\r\n      const element = document.querySelector(targetSelector)\r\n      if (element) {\r\n        element.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' })\r\n        setTimeout(() => {\r\n          setTargetRect(element.getBoundingClientRect())\r\n        }, 100)\r\n      }\r\n    }\r\n\r\n    const timeoutId = setTimeout(updateRect, 50)\r\n    window.addEventListener('resize', updateRect)\r\n    window.addEventListener('scroll', updateRect, { passive: true })\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId)\r\n      window.removeEventListener('resize', updateRect)\r\n      window.removeEventListener('scroll', updateRect)\r\n    }\r\n  }, [targetSelector, isVisible, mounted])\r\n\r\n  if (!mounted || !isVisible || !targetRect) return null\r\n\r\n  // Calculate cutout dimensions with padding\r\n  const cutout = {\r\n    top: targetRect.top - padding,\r\n    left: targetRect.left - padding,\r\n    width: targetRect.width + padding * 2,\r\n    height: targetRect.height + padding * 2,\r\n    right: targetRect.right + padding,\r\n    bottom: targetRect.bottom + padding,\r\n  }\r\n\r\n  // Lighter overlay for better context visibility\r\n  const overlayColor = 'rgba(0, 0, 0, 0.55)'\r\n  const borderRadius = 12\r\n\r\n  // Staggered animation delays for premium feel\r\n  const staggerDelays = {\r\n    top: 0,\r\n    bottom: 0.05,\r\n    left: 0.1,\r\n    right: 0.15,\r\n    ring: 0.2,\r\n    innerRing: 0.25,\r\n  }\r\n\r\n  return createPortal(\r\n    <AnimatePresence>\r\n      {isVisible && (\r\n        <>\r\n          {/* TOP OVERLAY - Glass morphism with blur */}\r\n          <motion.div\r\n            key=\"spotlight-top\"\r\n            initial={{ opacity: 0, y: -10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.top, ease: 'easeOut' }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: 0,\r\n              left: 0,\r\n              right: 0,\r\n              height: Math.max(0, cutout.top),\r\n              background: overlayColor,\r\n              backdropFilter: 'blur(4px)',\r\n              WebkitBackdropFilter: 'blur(4px)',\r\n              zIndex: 9997,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n\r\n          {/* BOTTOM OVERLAY - Glass morphism with blur */}\r\n          <motion.div\r\n            key=\"spotlight-bottom\"\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 10 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.bottom, ease: 'easeOut' }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.bottom,\r\n              left: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              background: overlayColor,\r\n              backdropFilter: 'blur(4px)',\r\n              WebkitBackdropFilter: 'blur(4px)',\r\n              zIndex: 9997,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n\r\n          {/* LEFT OVERLAY - Glass morphism with blur */}\r\n          <motion.div\r\n            key=\"spotlight-left\"\r\n            initial={{ opacity: 0, x: -10 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: -10 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.left, ease: 'easeOut' }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.top,\r\n              left: 0,\r\n              width: Math.max(0, cutout.left),\r\n              height: cutout.height,\r\n              background: overlayColor,\r\n              backdropFilter: 'blur(4px)',\r\n              WebkitBackdropFilter: 'blur(4px)',\r\n              zIndex: 9997,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n\r\n          {/* RIGHT OVERLAY - Glass morphism with blur */}\r\n          <motion.div\r\n            key=\"spotlight-right\"\r\n            initial={{ opacity: 0, x: 10 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: 10 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.right, ease: 'easeOut' }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.top,\r\n              left: cutout.right,\r\n              right: 0,\r\n              height: cutout.height,\r\n              background: overlayColor,\r\n              backdropFilter: 'blur(4px)',\r\n              WebkitBackdropFilter: 'blur(4px)',\r\n              zIndex: 9997,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n\r\n          {/* Outer pulsing highlight ring with enhanced glow animation */}\r\n          <motion.div\r\n            key=\"spotlight-ring\"\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{\r\n              opacity: 1,\r\n              scale: [1, 1.04, 1],\r\n              boxShadow: [\r\n                '0 0 0 4px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.3)',\r\n                '0 0 0 8px rgba(59, 130, 246, 0.2), 0 0 40px rgba(59, 130, 246, 0.5)',\r\n                '0 0 0 4px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.3)',\r\n              ]\r\n            }}\r\n            exit={{ opacity: 0, scale: 0.9 }}\r\n            transition={{\r\n              opacity: { duration: 0.4, delay: staggerDelays.ring },\r\n              scale: { repeat: Infinity, duration: 2, ease: 'easeInOut' },\r\n              boxShadow: { repeat: Infinity, duration: 2, ease: 'easeInOut' }\r\n            }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.top,\r\n              left: cutout.left,\r\n              width: cutout.width,\r\n              height: cutout.height,\r\n              borderRadius: borderRadius,\r\n              border: '2px solid rgb(59, 130, 246)',\r\n              zIndex: 9998,\r\n              pointerEvents: 'auto',\r\n            }}\r\n          />\r\n\r\n          {/* Inner glow ring for premium depth effect */}\r\n          <motion.div\r\n            key=\"spotlight-inner-ring\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.innerRing }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.top + 2,\r\n              left: cutout.left + 2,\r\n              width: cutout.width - 4,\r\n              height: cutout.height - 4,\r\n              borderRadius: borderRadius - 2,\r\n              border: '1px solid rgba(255, 255, 255, 0.3)',\r\n              boxShadow: 'inset 0 0 20px rgba(59, 130, 246, 0.15)',\r\n              zIndex: 9998,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n        </>\r\n      )}\r\n    </AnimatePresence>,\r\n    document.body\r\n  )\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 8h.01', key: '1r9ogq' }],\n  ['path', { d: 'M12 12h.01', key: '1mp3jc' }],\n  ['path', { d: 'M14 8h.01', key: '1primd' }],\n  ['path', { d: 'M16 12h.01', key: '1l6xoz' }],\n  ['path', { d: 'M18 8h.01', key: 'emo2bl' }],\n  ['path', { d: 'M6 8h.01', key: 'x9i8wu' }],\n  ['path', { d: 'M7 16h10', key: 'wp8him' }],\n  ['path', { d: 'M8 12h.01', key: 'czm47f' }],\n  ['rect', { width: '20', height: '16', x: '2', y: '4', rx: '2', key: '18n3k1' }],\n];\n\n/**\n * @component @name Keyboard\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgOGguMDEiIC8+CiAgPHBhdGggZD0iTTEyIDEyaC4wMSIgLz4KICA8cGF0aCBkPSJNMTQgOGguMDEiIC8+CiAgPHBhdGggZD0iTTE2IDEyaC4wMSIgLz4KICA8cGF0aCBkPSJNMTggOGguMDEiIC8+CiAgPHBhdGggZD0iTTYgOGguMDEiIC8+CiAgPHBhdGggZD0iTTcgMTZoMTAiIC8+CiAgPHBhdGggZD0iTTggMTJoLjAxIiAvPgogIDxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIxNiIgeD0iMiIgeT0iNCIgcng9IjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/keyboard\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Keyboard = createLucideIcon('keyboard', __iconNode);\n\nexport default Keyboard;\n","'use client'\r\n\r\nimport { useEffect, useState, useRef } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { Button } from '@/components/ui/button'\r\nimport { X, ArrowRight, ArrowLeft, ChevronRight, Check, ChevronDown, ChevronUp, Keyboard } from 'lucide-react'\r\nimport { useTour } from '@/contexts/tour-context'\r\nimport type { TourStep } from '@/config/platform-tour'\r\n\r\ninterface TourTooltipProps {\r\n  step: TourStep\r\n  stepNumber: number\r\n  persona?: string\r\n}\r\n\r\ntype ArrowSide = 'left' | 'right' | 'top' | 'bottom'\r\n\r\ninterface Position {\r\n  top: number\r\n  left: number\r\n  arrowSide: ArrowSide\r\n}\r\n\r\n// Persona-specific color theming for header\r\nconst personaColors: Record<string, { bg: string; border: string; text: string; gradient: string }> = {\r\n  ceo: {\r\n    bg: 'bg-purple-50 dark:bg-purple-500/10',\r\n    border: 'border-purple-100 dark:border-purple-500/20',\r\n    text: 'text-purple-600 dark:text-purple-400',\r\n    gradient: 'from-purple-500 to-purple-600'\r\n  },\r\n  staff: {\r\n    bg: 'bg-rose-50 dark:bg-rose-500/10',\r\n    border: 'border-rose-100 dark:border-rose-500/20',\r\n    text: 'text-rose-600 dark:text-rose-400',\r\n    gradient: 'from-rose-500 to-rose-600'\r\n  },\r\n  arranger: {\r\n    bg: 'bg-blue-50 dark:bg-blue-500/10',\r\n    border: 'border-blue-100 dark:border-blue-500/20',\r\n    text: 'text-blue-600 dark:text-blue-400',\r\n    gradient: 'from-blue-500 to-blue-600'\r\n  },\r\n  investor: {\r\n    bg: 'bg-emerald-50 dark:bg-emerald-500/10',\r\n    border: 'border-emerald-100 dark:border-emerald-500/20',\r\n    text: 'text-emerald-600 dark:text-emerald-400',\r\n    gradient: 'from-emerald-500 to-emerald-600'\r\n  },\r\n  investor_entity: {\r\n    bg: 'bg-emerald-50 dark:bg-emerald-500/10',\r\n    border: 'border-emerald-100 dark:border-emerald-500/20',\r\n    text: 'text-emerald-600 dark:text-emerald-400',\r\n    gradient: 'from-emerald-500 to-emerald-600'\r\n  },\r\n  investor_individual: {\r\n    bg: 'bg-teal-50 dark:bg-teal-500/10',\r\n    border: 'border-teal-100 dark:border-teal-500/20',\r\n    text: 'text-teal-600 dark:text-teal-400',\r\n    gradient: 'from-teal-500 to-teal-600'\r\n  },\r\n  introducer: {\r\n    bg: 'bg-amber-50 dark:bg-amber-500/10',\r\n    border: 'border-amber-100 dark:border-amber-500/20',\r\n    text: 'text-amber-600 dark:text-amber-400',\r\n    gradient: 'from-amber-500 to-amber-600'\r\n  },\r\n  partner: {\r\n    bg: 'bg-cyan-50 dark:bg-cyan-500/10',\r\n    border: 'border-cyan-100 dark:border-cyan-500/20',\r\n    text: 'text-cyan-600 dark:text-cyan-400',\r\n    gradient: 'from-cyan-500 to-cyan-600'\r\n  },\r\n  commercial_partner: {\r\n    bg: 'bg-indigo-50 dark:bg-indigo-500/10',\r\n    border: 'border-indigo-100 dark:border-indigo-500/20',\r\n    text: 'text-indigo-600 dark:text-indigo-400',\r\n    gradient: 'from-indigo-500 to-indigo-600'\r\n  },\r\n  lawyer: {\r\n    bg: 'bg-slate-50 dark:bg-slate-500/10',\r\n    border: 'border-slate-100 dark:border-slate-500/20',\r\n    text: 'text-slate-600 dark:text-slate-400',\r\n    gradient: 'from-slate-500 to-slate-600'\r\n  },\r\n}\r\n\r\n// SVG Arrow component - cleaner than rotated CSS divs\r\nfunction TooltipArrow({ side, className = '' }: { side: ArrowSide; className?: string }) {\r\n  // Arrow dimensions\r\n  const width = 22\r\n  const height = 12\r\n\r\n  // Arrow styles based on side\r\n  const positionStyles: Record<ArrowSide, string> = {\r\n    left: 'absolute -left-[11px] top-1/2 -translate-y-1/2 rotate-90',\r\n    right: 'absolute -right-[11px] top-1/2 -translate-y-1/2 -rotate-90',\r\n    top: 'absolute left-1/2 -translate-x-1/2 -top-[11px] rotate-180',\r\n    bottom: 'absolute left-1/2 -translate-x-1/2 -bottom-[11px]',\r\n  }\r\n\r\n  return (\r\n    <svg\r\n      width={width}\r\n      height={height}\r\n      viewBox={`0 0 ${width} ${height}`}\r\n      className={`${positionStyles[side]} ${className}`}\r\n      style={{ filter: 'drop-shadow(0 1px 2px rgba(0,0,0,0.1))' }}\r\n    >\r\n      <path\r\n        d=\"M1 12L11 2L21 12\"\r\n        className=\"fill-white dark:fill-zinc-900 stroke-border\"\r\n        strokeWidth=\"1\"\r\n      />\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport function TourTooltip({ step, stepNumber, persona = 'investor' }: TourTooltipProps) {\r\n  const { isActive, totalSteps, nextStep, prevStep, skipTour } = useTour()\r\n  const [position, setPosition] = useState<Position | null>(null)\r\n  const [mounted, setMounted] = useState(false)\r\n  const [showDetails, setShowDetails] = useState(false)\r\n  const [isMobile, setIsMobile] = useState(false)\r\n  const tooltipRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Get persona colors or default to blue\r\n  const colors = personaColors[persona] || personaColors.arranger\r\n\r\n  // Handle client-side mounting for createPortal\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    // Check for mobile\r\n    setIsMobile(window.innerWidth < 640)\r\n    const handleResize = () => setIsMobile(window.innerWidth < 640)\r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [])\r\n\r\n  // Reset showDetails when step changes\r\n  useEffect(() => {\r\n    setShowDetails(false)\r\n  }, [stepNumber])\r\n\r\n  useEffect(() => {\r\n    if (!isActive || !mounted) {\r\n      setPosition(null)\r\n      return\r\n    }\r\n\r\n    const updatePosition = () => {\r\n      // On mobile, always position at bottom\r\n      if (isMobile) {\r\n        setPosition({\r\n          top: 0,\r\n          left: 0,\r\n          arrowSide: 'top' // Not used on mobile but required by type\r\n        })\r\n        return\r\n      }\r\n\r\n      const target = document.querySelector(step.target)\r\n      if (!target) {\r\n        // Target not found - position in center of screen\r\n        setPosition({\r\n          top: window.innerHeight / 2 - 100,\r\n          left: window.innerWidth / 2 - 200,\r\n          arrowSide: 'left'\r\n        })\r\n        return\r\n      }\r\n\r\n      const targetRect = target.getBoundingClientRect()\r\n      const tooltipWidth = 400 // Wider tooltip\r\n      const tooltipHeight = tooltipRef.current?.offsetHeight || 300\r\n      const gap = 20 // Space between tooltip and target\r\n      const viewportPadding = 20\r\n\r\n      let top = 0\r\n      let left = 0\r\n      let arrowSide: ArrowSide = 'left'\r\n\r\n      const viewportWidth = window.innerWidth\r\n      const viewportHeight = window.innerHeight\r\n\r\n      // Calculate position based on preferred placement with collision detection\r\n      switch (step.placement) {\r\n        case 'right':\r\n          left = targetRect.right + gap\r\n          top = targetRect.top + targetRect.height / 2 - tooltipHeight / 2\r\n          arrowSide = 'left'\r\n\r\n          if (left + tooltipWidth > viewportWidth - viewportPadding) {\r\n            left = targetRect.left - tooltipWidth - gap\r\n            arrowSide = 'right'\r\n          }\r\n          break\r\n\r\n        case 'left':\r\n          left = targetRect.left - tooltipWidth - gap\r\n          top = targetRect.top + targetRect.height / 2 - tooltipHeight / 2\r\n          arrowSide = 'right'\r\n\r\n          if (left < viewportPadding) {\r\n            left = targetRect.right + gap\r\n            arrowSide = 'left'\r\n          }\r\n          break\r\n\r\n        case 'bottom':\r\n          top = targetRect.bottom + gap\r\n          left = targetRect.left + targetRect.width / 2 - tooltipWidth / 2\r\n          arrowSide = 'top'\r\n\r\n          if (top + tooltipHeight > viewportHeight - viewportPadding) {\r\n            top = targetRect.top - tooltipHeight - gap\r\n            arrowSide = 'bottom'\r\n          }\r\n          break\r\n\r\n        case 'top':\r\n        default:\r\n          top = targetRect.top - tooltipHeight - gap\r\n          left = targetRect.left + targetRect.width / 2 - tooltipWidth / 2\r\n          arrowSide = 'bottom'\r\n\r\n          if (top < viewportPadding) {\r\n            top = targetRect.bottom + gap\r\n            arrowSide = 'top'\r\n          }\r\n      }\r\n\r\n      // Keep within horizontal bounds\r\n      left = Math.max(viewportPadding, Math.min(left, viewportWidth - tooltipWidth - viewportPadding))\r\n      // Keep within vertical bounds\r\n      top = Math.max(viewportPadding, Math.min(top, viewportHeight - tooltipHeight - viewportPadding))\r\n\r\n      setPosition({ top, left, arrowSide })\r\n    }\r\n\r\n    // Small delay to let spotlight position first and DOM settle\r\n    const timer = setTimeout(updatePosition, 200)\r\n\r\n    window.addEventListener('resize', updatePosition)\r\n    window.addEventListener('scroll', updatePosition, { passive: true })\r\n\r\n    return () => {\r\n      clearTimeout(timer)\r\n      window.removeEventListener('resize', updatePosition)\r\n      window.removeEventListener('scroll', updatePosition)\r\n    }\r\n  }, [step, isActive, mounted, showDetails, isMobile])\r\n\r\n  // Don't render on server or if not visible\r\n  if (!mounted || !isActive || !position) return null\r\n\r\n  const progress = ((stepNumber + 1) / totalSteps) * 100\r\n  const hasExtendedContent = step.features && step.features.length > 0\r\n\r\n  // Mobile bottom sheet variant\r\n  if (isMobile) {\r\n    return createPortal(\r\n      <AnimatePresence>\r\n        {isActive && (\r\n          <motion.div\r\n            ref={tooltipRef}\r\n            initial={{ opacity: 0, y: 100 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 100 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className=\"fixed bottom-0 left-0 right-0 z-[9999]\"\r\n            style={{ paddingBottom: 'env(safe-area-inset-bottom)' }}\r\n          >\r\n            {/* Drag indicator */}\r\n            <div className=\"flex justify-center pt-3 pb-2 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-xl rounded-t-2xl border-t border-x border-border\">\r\n              <div className=\"w-10 h-1 bg-muted-foreground/30 rounded-full\" />\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"bg-white/95 dark:bg-zinc-900/95 backdrop-blur-xl border-x border-border px-4 pb-4\">\r\n              {/* Header */}\r\n              <div className={`${colors.bg} ${colors.border} border-b -mx-4 px-4 py-3 mb-4`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className={`text-xs font-semibold ${colors.text} uppercase tracking-wider`}>\r\n                    Step {stepNumber + 1} of {totalSteps}\r\n                  </span>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className={`h-8 w-8 ${colors.text} hover:bg-black/5 dark:hover:bg-white/5`}\r\n                    onClick={skipTour}\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n                {/* Gradient progress bar */}\r\n                <div className=\"h-1.5 mt-3 bg-black/5 dark:bg-white/5 rounded-full overflow-hidden\">\r\n                  <motion.div\r\n                    initial={{ width: 0 }}\r\n                    animate={{ width: `${progress}%` }}\r\n                    transition={{ duration: 0.5, ease: 'easeOut' }}\r\n                    className={`h-full bg-gradient-to-r ${colors.gradient} rounded-full`}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Title and Content */}\r\n              <h3 className=\"font-semibold text-foreground text-xl mb-2 flex items-center gap-2\">\r\n                <ChevronRight className={`h-5 w-5 ${colors.text} flex-shrink-0`} />\r\n                {step.title}\r\n              </h3>\r\n              <p className=\"text-base text-muted-foreground leading-relaxed pl-7\">\r\n                {step.content}\r\n              </p>\r\n\r\n              {/* Features (if any) */}\r\n              {hasExtendedContent && (\r\n                <div className=\"mt-3 pl-7\">\r\n                  <button\r\n                    onClick={() => setShowDetails(!showDetails)}\r\n                    className={`text-sm ${colors.text} hover:opacity-80 flex items-center gap-1 font-medium transition-colors`}\r\n                  >\r\n                    {showDetails ? (\r\n                      <>\r\n                        <ChevronUp className=\"h-4 w-4\" />\r\n                        Hide details\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <ChevronDown className=\"h-4 w-4\" />\r\n                        Show key features\r\n                      </>\r\n                    )}\r\n                  </button>\r\n\r\n                  <AnimatePresence>\r\n                    {showDetails && (\r\n                      <motion.div\r\n                        initial={{ height: 0, opacity: 0 }}\r\n                        animate={{ height: 'auto', opacity: 1 }}\r\n                        exit={{ height: 0, opacity: 0 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"overflow-hidden\"\r\n                      >\r\n                        {step.features && step.features.length > 0 && (\r\n                          <ul className=\"mt-3 space-y-2\">\r\n                            {step.features.map((feature, idx) => (\r\n                              <li key={idx} className=\"flex items-start gap-2 text-sm text-muted-foreground\">\r\n                                <Check className=\"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5\" />\r\n                                <span>{feature}</span>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        )}\r\n                      </motion.div>\r\n                    )}\r\n                  </AnimatePresence>\r\n                </div>\r\n              )}\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex items-center justify-between gap-3 mt-6\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"lg\"\r\n                  onClick={skipTour}\r\n                  className=\"text-muted-foreground hover:text-foreground h-12\"\r\n                >\r\n                  Skip\r\n                </Button>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  {stepNumber > 0 && (\r\n                    <Button variant=\"outline\" size=\"lg\" onClick={prevStep} className=\"h-12\">\r\n                      <ArrowLeft className=\"h-5 w-5 mr-1\" />\r\n                      Back\r\n                    </Button>\r\n                  )}\r\n                  <Button\r\n                    size=\"lg\"\r\n                    onClick={nextStep}\r\n                    className={`bg-gradient-to-r ${colors.gradient} hover:opacity-90 text-white h-12 px-6`}\r\n                  >\r\n                    {stepNumber === totalSteps - 1 ? 'Done' : 'Next'}\r\n                    {stepNumber < totalSteps - 1 && <ArrowRight className=\"h-5 w-5 ml-1\" />}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>,\r\n      document.body\r\n    )\r\n  }\r\n\r\n  // Desktop floating tooltip\r\n  const tooltip = (\r\n    <AnimatePresence>\r\n      {isActive && (\r\n        <motion.div\r\n          ref={tooltipRef}\r\n          initial={{ opacity: 0, scale: 0.9, y: 10 }}\r\n          animate={{ opacity: 1, scale: 1, y: 0 }}\r\n          exit={{ opacity: 0, scale: 0.9, y: 10 }}\r\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n          className=\"fixed z-[9999] w-[400px]\"\r\n          style={{\r\n            top: position.top,\r\n            left: position.left,\r\n            pointerEvents: 'auto'\r\n          }}\r\n        >\r\n          {/* SVG Arrow pointing to target */}\r\n          <TooltipArrow side={position.arrowSide} />\r\n\r\n          {/* Glass Morphism Tooltip Card */}\r\n          <div className=\"bg-white/95 dark:bg-zinc-900/95 backdrop-blur-xl border border-border rounded-2xl shadow-2xl ring-1 ring-black/5 dark:ring-white/5 overflow-hidden\">\r\n            {/* Header with persona-specific coloring */}\r\n            <div className={`${colors.bg} ${colors.border} border-b px-5 py-4`}>\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className={`text-xs font-semibold ${colors.text} uppercase tracking-wider`}>\r\n                  Step {stepNumber + 1} of {totalSteps}\r\n                </span>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className={`h-7 w-7 ${colors.text} hover:bg-black/5 dark:hover:bg-white/5 -mr-1`}\r\n                  onClick={skipTour}\r\n                >\r\n                  <X className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n              {/* Gradient animated progress bar */}\r\n              <div className=\"h-1.5 mt-3 bg-black/5 dark:bg-white/5 rounded-full overflow-hidden\">\r\n                <motion.div\r\n                  initial={{ width: 0 }}\r\n                  animate={{ width: `${progress}%` }}\r\n                  transition={{ duration: 0.5, ease: 'easeOut' }}\r\n                  className={`h-full bg-gradient-to-r ${colors.gradient} rounded-full`}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"p-5\">\r\n              <h3 className=\"font-semibold text-foreground text-xl mb-2 flex items-center gap-2\">\r\n                <ChevronRight className={`h-5 w-5 ${colors.text} flex-shrink-0`} />\r\n                {step.title}\r\n              </h3>\r\n              <p className=\"text-base text-muted-foreground leading-relaxed pl-7\">\r\n                {step.content}\r\n              </p>\r\n\r\n              {/* Expandable detailed content and features */}\r\n              {hasExtendedContent && (\r\n                <div className=\"mt-3 pl-7\">\r\n                  <button\r\n                    onClick={() => setShowDetails(!showDetails)}\r\n                    className={`text-sm ${colors.text} hover:opacity-80 flex items-center gap-1 font-medium transition-colors`}\r\n                  >\r\n                    {showDetails ? (\r\n                      <>\r\n                        <ChevronUp className=\"h-4 w-4\" />\r\n                        Hide details\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <ChevronDown className=\"h-4 w-4\" />\r\n                        Show key features\r\n                      </>\r\n                    )}\r\n                  </button>\r\n\r\n                  <AnimatePresence>\r\n                    {showDetails && (\r\n                      <motion.div\r\n                        initial={{ height: 0, opacity: 0 }}\r\n                        animate={{ height: 'auto', opacity: 1 }}\r\n                        exit={{ height: 0, opacity: 0 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"overflow-hidden\"\r\n                      >\r\n                        {/* Features list */}\r\n                        {step.features && step.features.length > 0 && (\r\n                          <ul className=\"mt-3 space-y-2\">\r\n                            {step.features.map((feature, idx) => (\r\n                              <li key={idx} className=\"flex items-start gap-2 text-sm text-muted-foreground\">\r\n                                <Check className=\"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5\" />\r\n                                <span>{feature}</span>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        )}\r\n\r\n                        {/* Empty state hint if applicable */}\r\n                        {step.emptyStateContent && (\r\n                          <div className=\"mt-3 p-3 bg-amber-50 dark:bg-amber-500/10 rounded-lg border border-amber-200 dark:border-amber-500/20\">\r\n                            <p className=\"text-sm text-amber-700 dark:text-amber-400 leading-relaxed\">\r\n                              <strong>Tip:</strong> {step.emptyStateContent}\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                      </motion.div>\r\n                    )}\r\n                  </AnimatePresence>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Actions & Keyboard hints */}\r\n            <div className=\"px-5 pb-4\">\r\n              {/* Keyboard hints */}\r\n              <div className=\"flex items-center gap-3 mb-4 text-xs text-muted-foreground/70\">\r\n                <Keyboard className=\"h-3.5 w-3.5\" />\r\n                <span className=\"font-mono\">[Esc]</span> skip\r\n                <span className=\"font-mono\">[{'\\u2190'}] [{'\\u2192'}]</span> navigate\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between gap-3\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={skipTour}\r\n                  className=\"text-muted-foreground hover:text-foreground\"\r\n                >\r\n                  Skip tour\r\n                </Button>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  {stepNumber > 0 && (\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={prevStep}>\r\n                      <ArrowLeft className=\"h-4 w-4 mr-1\" />\r\n                      Back\r\n                    </Button>\r\n                  )}\r\n                  <Button\r\n                    size=\"sm\"\r\n                    onClick={nextStep}\r\n                    className={`bg-gradient-to-r ${colors.gradient} hover:opacity-90 text-white`}\r\n                  >\r\n                    {stepNumber === totalSteps - 1 ? 'Finish tour' : 'Continue'}\r\n                    {stepNumber < totalSteps - 1 && <ArrowRight className=\"h-4 w-4 ml-1\" />}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n\r\n  return createPortal(tooltip, document.body)\r\n}\r\n","'use client'\r\n\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { motion } from 'framer-motion'\r\nimport {\r\n  Sparkles,\r\n  ArrowRight,\r\n  Building2,\r\n  Briefcase,\r\n  Users,\r\n  Scale,\r\n  UserCircle,\r\n  Shield,\r\n  Clock,\r\n  Keyboard,\r\n  ListChecks,\r\n  Check,\r\n  RotateCcw\r\n} from 'lucide-react'\r\nimport { useTour } from '@/contexts/tour-context'\r\nimport { getWelcomeMessage, getTourSteps } from '@/config/platform-tour'\r\nimport { useMemo } from 'react'\r\n\r\ninterface TourWelcomeModalProps {\r\n  open: boolean\r\n  onClose: () => void\r\n  onSkip: () => Promise<void>\r\n  persona?: string\r\n}\r\n\r\n// Get the appropriate icon component for each persona type\r\nfunction getPersonaIcon(persona: string) {\r\n  switch (persona) {\r\n    case 'ceo':\r\n      return Shield\r\n    case 'staff':\r\n      return Users\r\n    case 'arranger':\r\n      return Briefcase\r\n    case 'investor':\r\n    case 'investor_entity':\r\n      return Building2\r\n    case 'investor_individual':\r\n      return UserCircle\r\n    case 'introducer':\r\n    case 'partner':\r\n    case 'commercial_partner':\r\n      return Users\r\n    case 'lawyer':\r\n      return Scale\r\n    default:\r\n      return Sparkles\r\n  }\r\n}\r\n\r\n// Persona-specific gradient colors for the icon\r\nconst personaGradients: Record<string, { from: string; to: string }> = {\r\n  ceo: { from: 'from-purple-500', to: 'to-purple-600' },\r\n  staff: { from: 'from-rose-500', to: 'to-rose-600' },\r\n  arranger: { from: 'from-blue-500', to: 'to-indigo-600' },\r\n  investor: { from: 'from-emerald-500', to: 'to-emerald-600' },\r\n  investor_entity: { from: 'from-emerald-500', to: 'to-emerald-600' },\r\n  investor_individual: { from: 'from-teal-500', to: 'to-teal-600' },\r\n  introducer: { from: 'from-amber-500', to: 'to-amber-600' },\r\n  partner: { from: 'from-cyan-500', to: 'to-cyan-600' },\r\n  commercial_partner: { from: 'from-indigo-500', to: 'to-indigo-600' },\r\n  lawyer: { from: 'from-slate-500', to: 'to-slate-600' },\r\n}\r\n\r\nexport function TourWelcomeModal({ open, onClose, onSkip, persona = 'investor' }: TourWelcomeModalProps) {\r\n  const { startTour } = useTour()\r\n\r\n  // Get persona-specific welcome message\r\n  const welcomeMessage = useMemo(() => getWelcomeMessage(persona), [persona])\r\n  const steps = useMemo(() => getTourSteps(persona), [persona])\r\n  const PersonaIcon = useMemo(() => getPersonaIcon(persona), [persona])\r\n  const gradient = personaGradients[persona] || personaGradients.arranger\r\n\r\n  // Calculate estimated time (roughly 30 seconds per step)\r\n  const estimatedMinutes = Math.max(1, Math.ceil(steps.length * 0.5))\r\n\r\n  const handleStartTour = () => {\r\n    onClose()\r\n    // Small delay to let modal close animation complete\r\n    setTimeout(() => startTour(), 300)\r\n  }\r\n\r\n  const handleSkip = async () => {\r\n    onClose()\r\n    await onSkip()\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"sm:max-w-[540px] p-0 overflow-hidden\" showCloseButton={false}>\r\n        {/* Gradient header background with decorative pattern */}\r\n        <div className=\"relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-blue-950/50 dark:via-indigo-950/50 dark:to-purple-950/50 px-6 pt-8 pb-6\">\r\n          {/* Decorative pattern overlay */}\r\n          <div\r\n            className=\"absolute inset-0 opacity-[0.03]\"\r\n            style={{\r\n              backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\r\n            }}\r\n          />\r\n\r\n          <DialogHeader className=\"text-center relative\">\r\n            {/* Animated large icon */}\r\n            <motion.div\r\n              initial={{ scale: 0, rotate: -180 }}\r\n              animate={{ scale: 1, rotate: 0 }}\r\n              transition={{\r\n                type: 'spring',\r\n                damping: 15,\r\n                stiffness: 200,\r\n                delay: 0.1\r\n              }}\r\n              className=\"mx-auto mb-5\"\r\n            >\r\n              <div className={`h-20 w-20 rounded-2xl bg-gradient-to-br ${gradient.from} ${gradient.to} shadow-lg flex items-center justify-center`}>\r\n                <motion.div\r\n                  animate={{\r\n                    rotateY: [0, 10, 0, -10, 0],\r\n                  }}\r\n                  transition={{\r\n                    duration: 3,\r\n                    repeat: Infinity,\r\n                    ease: 'easeInOut'\r\n                  }}\r\n                >\r\n                  <PersonaIcon className=\"h-10 w-10 text-white\" />\r\n                </motion.div>\r\n              </div>\r\n            </motion.div>\r\n\r\n            <DialogTitle className=\"text-2xl font-bold text-foreground\">\r\n              {welcomeMessage.title}\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-base text-muted-foreground mt-2 max-w-sm mx-auto\">\r\n              {welcomeMessage.description}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n        </div>\r\n\r\n        {/* Content section */}\r\n        <div className=\"px-6 py-5\">\r\n          {/* Tour overview stats */}\r\n          <div className=\"flex items-center justify-center gap-6 mb-6\">\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <div className=\"h-8 w-8 rounded-lg bg-blue-50 dark:bg-blue-500/10 flex items-center justify-center\">\r\n                <ListChecks className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\r\n              </div>\r\n              <span className=\"font-medium\">{steps.length} Steps</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <div className=\"h-8 w-8 rounded-lg bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center\">\r\n                <Clock className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\r\n              </div>\r\n              <span className=\"font-medium\">~{estimatedMinutes} min</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <div className=\"h-8 w-8 rounded-lg bg-purple-50 dark:bg-purple-500/10 flex items-center justify-center\">\r\n                <Keyboard className=\"h-4 w-4 text-purple-600 dark:text-purple-400\" />\r\n              </div>\r\n              <span className=\"font-medium\">Keyboard</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Feature highlights */}\r\n          <div className=\"space-y-2.5 mb-6\">\r\n            <div className=\"flex items-start gap-3 text-sm\">\r\n              <div className=\"h-5 w-5 rounded-full bg-green-100 dark:bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <Check className=\"h-3 w-3 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              <span className=\"text-muted-foreground\">Interactive walkthrough of key features</span>\r\n            </div>\r\n            <div className=\"flex items-start gap-3 text-sm\">\r\n              <div className=\"h-5 w-5 rounded-full bg-green-100 dark:bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <Check className=\"h-3 w-3 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              <span className=\"text-muted-foreground\">Skip anytime or resume later</span>\r\n            </div>\r\n            <div className=\"flex items-start gap-3 text-sm\">\r\n              <div className=\"h-5 w-5 rounded-full bg-green-100 dark:bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <Check className=\"h-3 w-3 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              <span className=\"text-muted-foreground\">Restart from settings anytime</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter className=\"flex-col gap-3 sm:flex-col px-6 pb-6 pt-0\">\r\n          {/* Gradient CTA button */}\r\n          <Button\r\n            onClick={handleStartTour}\r\n            className={`w-full h-12 bg-gradient-to-r ${gradient.from} ${gradient.to} hover:opacity-90 text-white font-medium text-base shadow-lg shadow-blue-500/20`}\r\n          >\r\n            <Sparkles className=\"h-5 w-5 mr-2\" />\r\n            Start Tour\r\n            <ArrowRight className=\"h-5 w-5 ml-2\" />\r\n          </Button>\r\n\r\n          {/* Skip button */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            onClick={handleSkip}\r\n            className=\"w-full text-muted-foreground hover:text-foreground\"\r\n          >\r\n            Skip for now\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\n/**\r\n * Tour Restart Button Component\r\n * For use in settings/profile pages to let users restart the tour\r\n */\r\nexport function TourRestartButton({ className = '' }: { className?: string }) {\r\n  const handleRestartTour = async () => {\r\n    try {\r\n      await fetch('/api/profiles/tour-reset', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      })\r\n      // Reload to show welcome modal\r\n      window.location.reload()\r\n    } catch (error) {\r\n      console.error('Failed to reset tour:', error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      variant=\"outline\"\r\n      onClick={handleRestartTour}\r\n      className={className}\r\n    >\r\n      <RotateCcw className=\"h-4 w-4 mr-2\" />\r\n      Restart Platform Tour\r\n    </Button>\r\n  )\r\n}\r\n","/**\r\n * Platform Tour Configuration\r\n *\r\n * Defines comprehensive tour steps for each persona type. Steps reference elements\r\n * via data-tour attributes and support page navigation for multi-page tours.\r\n *\r\n * IMPORTANT: Selectors are generated from nav item names as:\r\n * `nav-${name.toLowerCase().replace(/\\s+/g, '-')}`\r\n *\r\n * Example: \"My Mandates\" → nav-my-mandates\r\n */\r\n\r\nexport interface TourStep {\r\n  id: string\r\n  target: string // CSS selector with data-tour attribute\r\n  title: string\r\n  content: string\r\n  detailedContent?: string // Extended description for complex features\r\n  features?: string[] // Key capabilities as bullet points\r\n  emptyStateContent?: string // Shown when page has no data yet\r\n  navigateTo?: string // Route to navigate to before highlighting\r\n  placement?: 'top' | 'bottom' | 'left' | 'right'\r\n  highlightPadding?: number // Custom padding around highlighted element\r\n}\r\n\r\n// ============================================================================\r\n// INVESTOR (Entity) TOUR - 6 steps\r\n// For companies/entities investing through the platform\r\n// ============================================================================\r\nconst investorEntityTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Your Investment Dashboard',\r\n    content: 'Your central hub for monitoring all investments and entity activity.',\r\n    detailedContent: `The dashboard provides a comprehensive overview of your investment portfolio.\r\n      Here you'll see your total committed capital, active investments, pending actions, and recent\r\n      distributions. The portal snapshot shows key dates and deadlines. For entity accounts, you can\r\n      also see activity across all authorized members.`,\r\n    features: [\r\n      'Portfolio value and performance metrics',\r\n      'Open opportunities matching your investment mandate',\r\n      'Outstanding tasks requiring your attention',\r\n      'Active holdings across all investment vehicles',\r\n      'Recent activity timeline for your entity',\r\n      'Quick access to key documents and deadlines'\r\n    ],\r\n    emptyStateContent: 'Once you start investing, this dashboard will display your portfolio metrics, active investments, and pending actions requiring attention.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'opportunities',\r\n    target: '[data-tour=\"nav-investment-opportunities\"]',\r\n    title: 'Investment Opportunities',\r\n    content: 'Browse available deals and express interest in new investment opportunities.',\r\n    detailedContent: `This is where you discover new investment opportunities curated by VERSO. Each deal\r\n      card shows the target company, investment vehicle, minimum ticket size, and key terms. You can\r\n      express interest, view detailed documentation, and initiate the subscription process directly\r\n      from this page.`,\r\n    features: [\r\n      'Browse curated investment opportunities',\r\n      'Filter by sector, geography, and deal size',\r\n      'View detailed deal terms and documentation',\r\n      'Express interest with one click',\r\n      'Track your pipeline of potential investments',\r\n      'Access investor presentations and data rooms'\r\n    ],\r\n    emptyStateContent: 'Available investment opportunities will appear here. Check back regularly as new deals are added to the platform.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'portfolio',\r\n    target: '[data-tour=\"nav-portfolio\"]',\r\n    title: 'Your Portfolio',\r\n    content: 'Track your holdings, distributions, and performance across all investments.',\r\n    detailedContent: `Your portfolio page shows every investment your entity has made. Track NAV movements,\r\n      distributions received, and overall performance. Each holding shows your committed capital, funded\r\n      amount, current valuation, and any distributions you've received.`,\r\n    features: [\r\n      'View all active holdings and their current values',\r\n      'Track NAV changes and performance over time',\r\n      'Monitor distributions and capital returns',\r\n      'Download portfolio statements',\r\n      'See investment timeline and milestones',\r\n      'Export data for your records'\r\n    ],\r\n    emptyStateContent: 'After you make your first investment, your holdings will appear here with live NAV tracking and performance metrics.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'documents',\r\n    target: '[data-tour=\"nav-documents\"]',\r\n    title: 'Your Documents',\r\n    content: 'Access all your investment documents, statements, and legal agreements.',\r\n    detailedContent: `All your investment-related documents are stored here for easy access. Find subscription\r\n      agreements, quarterly statements, tax documents (K-1s), fund reports, and any signed legal agreements.\r\n      Documents are organized by investment and can be downloaded individually or in bulk.`,\r\n    features: [\r\n      'Subscription agreements and side letters',\r\n      'Quarterly and annual statements',\r\n      'Tax documents including K-1 forms',\r\n      'Fund reports and investor updates',\r\n      'Entity compliance documents',\r\n      'Signed agreements and amendments'\r\n    ],\r\n    emptyStateContent: 'Your investment documents will be stored here. After subscribing to deals, you\\'ll find all related paperwork in this section.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'inbox',\r\n    target: '[data-tour=\"nav-inbox\"]',\r\n    title: 'Your Inbox',\r\n    content: 'View tasks, messages, and notifications all in one place.',\r\n    detailedContent: `Your inbox consolidates all platform communications and action items. See pending\r\n      tasks that require your attention, messages from arrangers and VERSO staff, and important\r\n      notifications about your investments. Tasks are prioritized so you always know what needs\r\n      immediate attention.`,\r\n    features: [\r\n      'Pending tasks requiring your action',\r\n      'Messages from deal arrangers',\r\n      'Platform notifications and alerts',\r\n      'Document signing requests',\r\n      'KYC update reminders',\r\n      'Distribution announcements'\r\n    ],\r\n    emptyStateContent: 'Messages, tasks, and notifications will appear here as you engage with the platform.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Entity Profile & Settings',\r\n    content: 'Manage your entity details, authorized members, KYC status, and account settings.',\r\n    detailedContent: `As an entity investor, this is where you manage your investment entity's information.\r\n      Update company details, add or remove authorized signatories, track KYC/AML verification status,\r\n      and configure notification preferences. You can also manage which team members have access to\r\n      view and transact on behalf of your entity.`,\r\n    features: [\r\n      'Entity legal name and registration details',\r\n      'Authorized signatories and their permissions',\r\n      'Member access management for your team',\r\n      'KYC/AML verification status tracking',\r\n      'Bank account details for distributions',\r\n      'Notification and communication preferences'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// INVESTOR (Individual) TOUR - 6 steps\r\n// For individual investors (simpler, personal focus)\r\n// ============================================================================\r\nconst investorIndividualTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Your Investment Dashboard',\r\n    content: 'Your personal hub for tracking investments and portfolio activity.',\r\n    detailedContent: `The dashboard gives you a complete picture of your investment portfolio. See your\r\n      total invested capital, current valuations, pending opportunities, and recent activity. Key dates\r\n      and upcoming actions are highlighted so you never miss an important deadline.`,\r\n    features: [\r\n      'Portfolio value at a glance',\r\n      'Open opportunities that match your profile',\r\n      'Tasks requiring your attention',\r\n      'Your active investments',\r\n      'Recent activity timeline',\r\n      'Quick access to documents'\r\n    ],\r\n    emptyStateContent: 'Once you start investing, this dashboard will show your portfolio overview, active investments, and pending actions.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'opportunities',\r\n    target: '[data-tour=\"nav-investment-opportunities\"]',\r\n    title: 'Investment Opportunities',\r\n    content: 'Discover and evaluate new investment opportunities curated by VERSO.',\r\n    detailedContent: `Browse available investment opportunities here. Each deal shows essential information\r\n      like minimum investment size, expected returns, and key terms. You can express interest, access\r\n      detailed documentation, and start the subscription process when you're ready.`,\r\n    features: [\r\n      'Browse curated investment deals',\r\n      'View key terms and minimum tickets',\r\n      'Access investor presentations',\r\n      'Express interest with one click',\r\n      'Track deals you\\'re considering',\r\n      'Start the subscription process'\r\n    ],\r\n    emptyStateContent: 'Investment opportunities will appear here as they become available. Check back regularly for new deals.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'portfolio',\r\n    target: '[data-tour=\"nav-portfolio\"]',\r\n    title: 'Your Portfolio',\r\n    content: 'Monitor your investments, track performance, and view distributions.',\r\n    detailedContent: `Your portfolio page displays all your investments with live NAV tracking. See how\r\n      much you've invested, current valuations, and any distributions you've received. Track your\r\n      investment journey from subscription to returns.`,\r\n    features: [\r\n      'All your active holdings',\r\n      'Live NAV and performance tracking',\r\n      'Distribution history',\r\n      'Investment timeline',\r\n      'Downloadable statements',\r\n      'Performance analytics'\r\n    ],\r\n    emptyStateContent: 'After making your first investment, you\\'ll see your holdings here with real-time performance tracking.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'documents',\r\n    target: '[data-tour=\"nav-documents\"]',\r\n    title: 'Your Documents',\r\n    content: 'Access subscription agreements, statements, tax forms, and reports.',\r\n    detailedContent: `Find all your investment documents in one place. Subscription agreements, quarterly\r\n      statements, tax documents (K-1s), and fund reports are organized by investment for easy access.`,\r\n    features: [\r\n      'Subscription documents',\r\n      'Quarterly statements',\r\n      'Tax documents (K-1s)',\r\n      'Fund reports',\r\n      'Signed agreements',\r\n      'Investor updates'\r\n    ],\r\n    emptyStateContent: 'Your investment documents will be stored here after you subscribe to deals.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'inbox',\r\n    target: '[data-tour=\"nav-inbox\"]',\r\n    title: 'Your Inbox',\r\n    content: 'Stay updated with messages, tasks, and important notifications.',\r\n    detailedContent: `Your inbox keeps you informed of everything happening with your investments. See\r\n      pending tasks, messages from the VERSO team, and important notifications about your portfolio.`,\r\n    features: [\r\n      'Pending action items',\r\n      'Messages from VERSO',\r\n      'Investment notifications',\r\n      'Document signing requests',\r\n      'Distribution alerts',\r\n      'KYC reminders'\r\n    ],\r\n    emptyStateContent: 'Messages and notifications will appear here as you use the platform.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Your Profile',\r\n    content: 'Manage your personal details, verification status, and preferences.',\r\n    detailedContent: `Update your personal information, track your KYC verification status, and manage\r\n      your account settings. Make sure your contact details and bank information are up to date to\r\n      ensure smooth transactions and distributions.`,\r\n    features: [\r\n      'Personal information',\r\n      'KYC verification status',\r\n      'Bank account for distributions',\r\n      'Contact preferences',\r\n      'Notification settings',\r\n      'Security options'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// CEO TOUR - 6 steps\r\n// Executive overview of the entire platform\r\n// ============================================================================\r\nconst ceoTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Executive Dashboard',\r\n    content: 'Platform-wide metrics, AUM tracking, and real-time activity overview.',\r\n    detailedContent: `Your executive dashboard provides a bird's-eye view of the entire VERSO platform.\r\n      Monitor total AUM, active deals across all arrangers, investor activity, and team performance.\r\n      Key metrics are updated in real-time so you always have the current state of the business.`,\r\n    features: [\r\n      'Total AUM and growth trends',\r\n      'Active deal pipeline across all arrangers',\r\n      'New investor onboarding metrics',\r\n      'Subscription activity and conversion rates',\r\n      'Team activity and workload distribution',\r\n      'Platform health and system status'\r\n    ],\r\n    emptyStateContent: 'Platform metrics will populate as deals are created and investors subscribe.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'approvals',\r\n    target: '[data-tour=\"nav-approvals\"]',\r\n    title: 'Executive Approvals',\r\n    content: 'Review and approve items requiring executive sign-off.',\r\n    detailedContent: `All items requiring CEO approval flow through this page. Review KYC approvals,\r\n      high-value subscriptions, fee plan changes, and other decisions that need executive authorization.\r\n      You can approve, reject, or delegate items with full audit trail tracking.`,\r\n    features: [\r\n      'Pending approval requests',\r\n      'KYC and compliance sign-offs',\r\n      'High-value subscription approvals',\r\n      'Fee plan authorizations',\r\n      'Delegation capabilities',\r\n      'Complete audit trail'\r\n    ],\r\n    emptyStateContent: 'Items requiring your approval will appear here. The queue is currently empty.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'deals',\r\n    target: '[data-tour=\"nav-deals\"]',\r\n    title: 'Deal Pipeline',\r\n    content: 'Monitor all deals across the platform from draft to close.',\r\n    detailedContent: `View and manage every deal on the platform. Track deal status from draft through\r\n      active to closed, monitor subscription progress, and oversee arranger performance. Access\r\n      detailed deal analytics and close management tools.`,\r\n    features: [\r\n      'All platform deals in one view',\r\n      'Status tracking (draft → active → closed)',\r\n      'Subscription progress per deal',\r\n      'Arranger performance metrics',\r\n      'Deal close management',\r\n      'Historical deal data and analytics'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'reconciliation',\r\n    target: '[data-tour=\"nav-reconciliation\"]',\r\n    title: 'Financial Reconciliation',\r\n    content: 'Track fee collection, payments, and financial reporting.',\r\n    detailedContent: `The reconciliation center is your financial control hub. Track fee invoicing,\r\n      payment collection status, partner commissions, and generate financial reports. Ensure all\r\n      fees are collected and payments are properly allocated.`,\r\n    features: [\r\n      'Fee billing status across all deals',\r\n      'Payment tracking and collection',\r\n      'Partner commission management',\r\n      'Invoice generation and tracking',\r\n      'Financial reports and exports',\r\n      'Aging analysis and follow-ups'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'audit',\r\n    target: '[data-tour=\"nav-audit\"]',\r\n    title: 'Audit & Compliance',\r\n    content: 'Review platform activity logs and compliance tracking.',\r\n    detailedContent: `Complete visibility into all platform activity. Every action is logged with\r\n      user, timestamp, and details. Filter by user, date range, or action type to investigate\r\n      specific events. Essential for compliance, security, and operational oversight.`,\r\n    features: [\r\n      'Comprehensive activity logs',\r\n      'User action tracking',\r\n      'Security event monitoring',\r\n      'Compliance audit trails',\r\n      'Filter by user/date/action',\r\n      'Export for reporting'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'admin',\r\n    target: '[data-tour=\"nav-admin\"]',\r\n    title: 'Administration',\r\n    content: 'System settings, user management, and platform configuration.',\r\n    detailedContent: `Access administrative controls for the entire platform. Manage user accounts,\r\n      configure system settings, set up new arrangers and partners, and maintain platform security.\r\n      Only accessible to CEO and admin roles.`,\r\n    features: [\r\n      'User account management',\r\n      'Role and permission settings',\r\n      'Platform configuration',\r\n      'Arranger and partner setup',\r\n      'System preferences',\r\n      'Security settings'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// ARRANGER TOUR - 6 steps\r\n// Deal arrangers managing mandates and partners\r\n// ============================================================================\r\nconst arrangerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Arranger Dashboard',\r\n    content: 'Your deal pipeline, AUM metrics, and partner activity at a glance.',\r\n    detailedContent: `The arranger dashboard gives you complete visibility into your mandates. Track\r\n      your AUM, monitor subscription progress across deals, and see referral activity from your\r\n      introducer and partner network. Key metrics help you prioritize where to focus.`,\r\n    features: [\r\n      'Your total AUM under management',\r\n      'Deal pipeline by status',\r\n      'Subscription progress tracking',\r\n      'Partner referral activity',\r\n      'Upcoming close dates',\r\n      'Performance vs targets'\r\n    ],\r\n    emptyStateContent: 'Once you have active mandates, metrics and activity will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'mandates',\r\n    target: '[data-tour=\"nav-my-mandates\"]',\r\n    title: 'My Mandates',\r\n    content: 'Manage your deals, track subscriptions, and oversee close timelines.',\r\n    detailedContent: `This is your command center for deals you're arranging. Create new deals, manage\r\n      active mandates, track subscription progress, and coordinate deal closes. Each mandate shows\r\n      investor commitments, documentation status, and timeline to closing.`,\r\n    features: [\r\n      'Create and configure new deals',\r\n      'Track subscription commitments',\r\n      'Monitor documentation completion',\r\n      'Manage close timelines',\r\n      'Investor communication tools',\r\n      'Deal performance analytics'\r\n    ],\r\n    emptyStateContent: 'Your mandates will appear here. Start by creating a new deal or wait for deals to be assigned to you.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'subscription-packs',\r\n    target: '[data-tour=\"nav-subscription-packs\"]',\r\n    title: 'Subscription Packs',\r\n    content: 'Review and approve investor subscription documentation.',\r\n    detailedContent: `Review subscription packs submitted by investors. Check document completeness,\r\n      verify KYC status, and approve or request corrections. Each pack shows the investor, deal,\r\n      commitment amount, and documentation checklist status.`,\r\n    features: [\r\n      'Pending subscription reviews',\r\n      'Document completeness checking',\r\n      'KYC verification status',\r\n      'Approval workflow',\r\n      'Request corrections or clarifications',\r\n      'Historical submission tracking'\r\n    ],\r\n    emptyStateContent: 'Subscription packs will appear here as investors submit documentation for your deals.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'fee-plans',\r\n    target: '[data-tour=\"nav-fee-plans\"]',\r\n    title: 'Fee Plans',\r\n    content: 'Configure fee structures and partner commission agreements.',\r\n    detailedContent: `Set up fee plans for each deal, defining investor fees and partner commissions.\r\n      Fee plans specify the fee tiers, calculation basis, and payment terms. Each deal requires its\r\n      own fee plan, and partner-specific agreements can override default terms.`,\r\n    features: [\r\n      'Deal-specific fee configuration',\r\n      'Investor fee tier setup',\r\n      'Partner commission rates',\r\n      'Fee calculation rules',\r\n      'Agreement templates',\r\n      'Commission tracking'\r\n    ],\r\n    emptyStateContent: 'Create fee plans for your deals to define how fees and commissions are calculated.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'introducers',\r\n    target: '[data-tour=\"nav-my-introducers\"]',\r\n    title: 'My Introducers',\r\n    content: 'Manage your introducer network and track referrals.',\r\n    detailedContent: `View all introducers working with you, their referral activity, and commission\r\n      status. Add new introducers, set up fee agreements, and track which investors they've brought\r\n      to your deals. Monitor conversion rates and reward your best referral partners.`,\r\n    features: [\r\n      'Active introducer relationships',\r\n      'Referral tracking per introducer',\r\n      'Commission agreements and rates',\r\n      'Conversion analytics',\r\n      'Add new introducers',\r\n      'Communication tools'\r\n    ],\r\n    emptyStateContent: 'Your introducer network will be displayed here. Add introducers to start tracking referrals.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Arranger Profile',\r\n    content: 'Manage your arranger entity details, team, and KYC status.',\r\n    detailedContent: `Maintain your arranger entity's profile including company details, authorized\r\n      team members, and verification status. Keep your information current to ensure smooth deal\r\n      processing and compliance with platform requirements.`,\r\n    features: [\r\n      'Entity details and registration',\r\n      'Team member management',\r\n      'Signatory authorizations',\r\n      'KYC/AML status',\r\n      'Contact information',\r\n      'Notification preferences'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// INTRODUCER TOUR - 6 steps\r\n// Referral partners tracking introductions and commissions\r\n// ============================================================================\r\nconst introducerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Introducer Dashboard',\r\n    content: 'Track your referral metrics, conversion rates, and commission overview.',\r\n    detailedContent: `Your dashboard shows the health of your introduction business. See total\r\n      referrals made, conversion rates to funded investments, and commissions earned. Track trends\r\n      over time and identify which deals and arrangers generate the best results.`,\r\n    features: [\r\n      'Total introductions made',\r\n      'Conversion rate to funded deals',\r\n      'Commissions earned and pending',\r\n      'Top performing deals',\r\n      'Arranger relationship metrics',\r\n      'Recent activity feed'\r\n    ],\r\n    emptyStateContent: 'Your referral metrics will appear here once you start making introductions.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'introductions',\r\n    target: '[data-tour=\"nav-introductions\"]',\r\n    title: 'My Introductions',\r\n    content: 'View and track all your investor referrals and their progress.',\r\n    detailedContent: `See every investor you've introduced to the platform. Track their journey from\r\n      initial referral through KYC, subscription, and funding. Each introduction shows the current\r\n      status, associated deal, and expected commission.`,\r\n    features: [\r\n      'All referrals in one view',\r\n      'Status tracking per introduction',\r\n      'Deal association',\r\n      'Expected commission amounts',\r\n      'Investor contact details',\r\n      'History and timeline'\r\n    ],\r\n    emptyStateContent: 'Your introductions will appear here. Start referring investors to see them tracked.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'agreements',\r\n    target: '[data-tour=\"nav-agreements\"]',\r\n    title: 'Fee Agreements',\r\n    content: 'Access your fee agreements with arrangers and view commission terms.',\r\n    detailedContent: `View all your fee agreements with different arrangers. Each agreement specifies\r\n      your commission rates, payment terms, and any special conditions. Agreements are deal-specific,\r\n      so you may have different terms for different investments.`,\r\n    features: [\r\n      'Active fee agreements',\r\n      'Commission rate details',\r\n      'Payment terms',\r\n      'Arranger contact info',\r\n      'Agreement documents',\r\n      'Amendment history'\r\n    ],\r\n    emptyStateContent: 'Fee agreements with arrangers will appear here once they\\'re established.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'commissions',\r\n    target: '[data-tour=\"nav-my-commissions\"]',\r\n    title: 'My Commissions',\r\n    content: 'Track earned commissions, submit invoices, and view payment history.',\r\n    detailedContent: `Manage all your commission earnings in one place. See commissions that are\r\n      accrued (earned but not yet payable), ready to invoice, submitted, and paid. Submit invoices\r\n      directly through the platform and track payment status.`,\r\n    features: [\r\n      'Accrued commissions',\r\n      'Invoice submission',\r\n      'Payment tracking',\r\n      'Commission breakdown by deal',\r\n      'Historical payments',\r\n      'Export for accounting'\r\n    ],\r\n    emptyStateContent: 'Your earned commissions will appear here as your introductions convert to funded investments.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'versosign',\r\n    target: '[data-tour=\"nav-versosign\"]',\r\n    title: 'VersoSign',\r\n    content: 'Sign documents and execute agreements electronically.',\r\n    detailedContent: `VersoSign is VERSO's electronic signature platform. Sign fee agreements,\r\n      amendments, and other documents that require your signature. Track pending signature requests\r\n      and view signed document history.`,\r\n    features: [\r\n      'Pending signature requests',\r\n      'Electronic signature execution',\r\n      'Document preview',\r\n      'Signed document archive',\r\n      'Multi-party signatures',\r\n      'Audit trail'\r\n    ],\r\n    emptyStateContent: 'Documents requiring your signature will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Introducer Profile',\r\n    content: 'Manage your profile, bank details, and notification settings.',\r\n    detailedContent: `Keep your introducer profile up to date. Update contact information, bank\r\n      details for commission payments, and configure how you want to receive notifications. Accurate\r\n      bank details ensure commissions are paid to the right account.`,\r\n    features: [\r\n      'Contact information',\r\n      'Bank account details',\r\n      'Notification preferences',\r\n      'Profile verification status',\r\n      'Signature settings',\r\n      'Account security'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// PARTNER TOUR - 5 steps\r\n// Distribution partners sharing deals with their clients\r\n// ============================================================================\r\nconst partnerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Partner Dashboard',\r\n    content: 'Monitor your partnership metrics, referred investors, and revenue.',\r\n    detailedContent: `Your partner dashboard shows the overall health of your VERSO partnership.\r\n      Track investors you've referred, their subscription activity, and your revenue from\r\n      commissions. See which deals are performing best for your client base.`,\r\n    features: [\r\n      'Referred investor count',\r\n      'Subscription activity',\r\n      'Revenue and commissions',\r\n      'Top performing deals',\r\n      'Client engagement metrics',\r\n      'Recent activity'\r\n    ],\r\n    emptyStateContent: 'Partnership metrics will appear here as you refer investors and they make investments.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'opportunities',\r\n    target: '[data-tour=\"nav-opportunities\"]',\r\n    title: 'Available Opportunities',\r\n    content: 'Browse deals available to share with your clients.',\r\n    detailedContent: `View all investment opportunities you can share with your clients. Each deal\r\n      shows key terms, minimum investment, and target profile. Access marketing materials and\r\n      investor presentations to help present opportunities to your network.`,\r\n    features: [\r\n      'Current available deals',\r\n      'Deal terms and minimums',\r\n      'Marketing materials',\r\n      'Investor presentations',\r\n      'Share links for clients',\r\n      'Deal status updates'\r\n    ],\r\n    emptyStateContent: 'Available deals for your clients will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'transactions',\r\n    target: '[data-tour=\"nav-transactions\"]',\r\n    title: 'Transactions',\r\n    content: 'Track your referred investor subscriptions and activity.',\r\n    detailedContent: `Monitor all investment activity from clients you've referred. See their\r\n      subscription status, commitment amounts, and funding progress. Track the complete journey\r\n      from introduction to funded investment.`,\r\n    features: [\r\n      'Referred client investments',\r\n      'Subscription status tracking',\r\n      'Commitment amounts',\r\n      'Funding progress',\r\n      'Client activity timeline',\r\n      'Deal-by-deal breakdown'\r\n    ],\r\n    emptyStateContent: 'Transactions from your referred clients will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'commissions',\r\n    target: '[data-tour=\"nav-my-commissions\"]',\r\n    title: 'My Commissions',\r\n    content: 'Track your revenue, submit invoices, and view payment history.',\r\n    detailedContent: `Manage your commission earnings from client referrals. See what's accrued,\r\n      ready to invoice, and paid. Submit invoices through the platform and track payment status.`,\r\n    features: [\r\n      'Earned commissions',\r\n      'Invoice submission',\r\n      'Payment tracking',\r\n      'Revenue by deal',\r\n      'Historical payments',\r\n      'Accounting exports'\r\n    ],\r\n    emptyStateContent: 'Commissions from your referrals will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Partner Profile',\r\n    content: 'Manage your entity details, team members, and settings.',\r\n    detailedContent: `Maintain your partner entity profile. Update company information, manage\r\n      team members who can access the portal, and configure account settings.`,\r\n    features: [\r\n      'Entity details',\r\n      'Team member access',\r\n      'Bank account info',\r\n      'Contact preferences',\r\n      'Notification settings',\r\n      'Account security'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// COMMERCIAL PARTNER TOUR - 5 steps\r\n// Commercial partners who can execute investments on behalf of clients\r\n// ============================================================================\r\nconst commercialPartnerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Commercial Partner Dashboard',\r\n    content: 'Monitor client activity, placement metrics, and revenue.',\r\n    detailedContent: `Your dashboard provides a complete view of your commercial partnership. Track\r\n      clients you manage, their investment activity, and your placement revenue. See which deals\r\n      are popular with your clients and identify new opportunities.`,\r\n    features: [\r\n      'Client portfolio overview',\r\n      'Placement activity metrics',\r\n      'Revenue and commissions',\r\n      'Client engagement stats',\r\n      'Deal performance',\r\n      'Recent activity feed'\r\n    ],\r\n    emptyStateContent: 'Client activity and metrics will appear here as you place investments.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'opportunities',\r\n    target: '[data-tour=\"nav-opportunities\"]',\r\n    title: 'Investment Opportunities',\r\n    content: 'View deals available for client placement.',\r\n    detailedContent: `Browse investment opportunities you can place for your clients. Access deal\r\n      terms, presentations, and documentation. As a commercial partner, you can execute\r\n      subscriptions on behalf of your clients.`,\r\n    features: [\r\n      'Available deals for placement',\r\n      'Deal terms and documentation',\r\n      'Client suitability matching',\r\n      'Placement tools',\r\n      'Marketing materials',\r\n      'Deal updates'\r\n    ],\r\n    emptyStateContent: 'Deals available for client placement will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'client-transactions',\r\n    target: '[data-tour=\"nav-client-transactions\"]',\r\n    title: 'Client Transactions',\r\n    content: 'Manage client subscriptions and execute investments on their behalf.',\r\n    detailedContent: `View and manage all client investment activity. As a commercial partner,\r\n      you can execute subscription transactions for your clients, track their portfolio, and\r\n      manage the investment process from start to funding.`,\r\n    features: [\r\n      'Client subscription management',\r\n      'Execute-for-client capability',\r\n      'Status tracking',\r\n      'Document management',\r\n      'Client communication',\r\n      'Portfolio oversight'\r\n    ],\r\n    emptyStateContent: 'Client transactions will appear here as you make placements.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'commissions',\r\n    target: '[data-tour=\"nav-my-commissions\"]',\r\n    title: 'My Commissions',\r\n    content: 'Track placement fees, submit invoices, and view payments.',\r\n    detailedContent: `Manage your commercial partner revenue. Track commissions from client\r\n      placements, submit invoices, and monitor payment status.`,\r\n    features: [\r\n      'Placement commissions',\r\n      'Invoice management',\r\n      'Payment tracking',\r\n      'Revenue breakdown',\r\n      'Historical payments',\r\n      'Financial exports'\r\n    ],\r\n    emptyStateContent: 'Commissions from client placements will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Commercial Partner Profile',\r\n    content: 'Manage your profile, signature settings, and team access.',\r\n    detailedContent: `Maintain your commercial partner profile and settings. Configure signature\r\n      authorities, manage team access, and keep account details current.`,\r\n    features: [\r\n      'Entity information',\r\n      'Signature settings',\r\n      'Team management',\r\n      'Bank details',\r\n      'Notification preferences',\r\n      'Security settings'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// LAWYER TOUR - 5 steps\r\n// Legal counsel assigned to deals\r\n// ============================================================================\r\nconst lawyerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Legal Dashboard',\r\n    content: 'Access assigned matters, pending reviews, and upcoming deadlines.',\r\n    detailedContent: `Your legal dashboard shows all matters requiring your attention. Track deals\r\n      you're assigned to, pending document reviews, and upcoming deadlines. Prioritize your\r\n      workload and ensure nothing falls through the cracks.`,\r\n    features: [\r\n      'Assigned matters overview',\r\n      'Pending document reviews',\r\n      'Upcoming deadlines',\r\n      'Matter status tracking',\r\n      'Recent activity',\r\n      'Workload summary'\r\n    ],\r\n    emptyStateContent: 'Your assigned matters and pending reviews will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'assigned-deals',\r\n    target: '[data-tour=\"nav-assigned-deals\"]',\r\n    title: 'Assigned Deals',\r\n    content: 'View deals you\\'re providing legal counsel on.',\r\n    detailedContent: `Access all deals where you've been assigned as legal counsel. Review deal\r\n      documentation, subscription packs, and investor compliance. Your role ensures legal\r\n      requirements are met throughout the deal lifecycle.`,\r\n    features: [\r\n      'Deals requiring your counsel',\r\n      'Deal documentation access',\r\n      'Subscription pack review',\r\n      'Compliance tracking',\r\n      'Document management',\r\n      'Communication with arrangers'\r\n    ],\r\n    emptyStateContent: 'Deals assigned to you will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'escrow',\r\n    target: '[data-tour=\"nav-escrow\"]',\r\n    title: 'Escrow Management',\r\n    content: 'Monitor and approve escrow account activities.',\r\n    detailedContent: `Manage escrow accounts for deals you're assigned to. Review escrow status,\r\n      approve release requests, and ensure funds are properly held and disbursed according to\r\n      deal terms.`,\r\n    features: [\r\n      'Escrow account status',\r\n      'Release request review',\r\n      'Approval workflow',\r\n      'Fund tracking',\r\n      'Compliance verification',\r\n      'Audit trail'\r\n    ],\r\n    emptyStateContent: 'Escrow accounts you manage will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'versosign',\r\n    target: '[data-tour=\"nav-versosign\"]',\r\n    title: 'VersoSign',\r\n    content: 'Review and execute legal documents electronically.',\r\n    detailedContent: `VersoSign is your electronic signature workspace. Review legal documents,\r\n      execute agreements, and track signature workflows. All signatures are legally binding\r\n      and include complete audit trails.`,\r\n    features: [\r\n      'Pending signatures',\r\n      'Document review',\r\n      'Electronic execution',\r\n      'Multi-party workflows',\r\n      'Signed document archive',\r\n      'Compliance audit trail'\r\n    ],\r\n    emptyStateContent: 'Documents requiring your signature will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Legal Profile',\r\n    content: 'Manage your signature settings and professional details.',\r\n    detailedContent: `Maintain your legal professional profile. Configure signature settings,\r\n      update contact information, and manage notification preferences.`,\r\n    features: [\r\n      'Professional details',\r\n      'Signature configuration',\r\n      'Contact information',\r\n      'Notification settings',\r\n      'Firm affiliation',\r\n      'Account security'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// STAFF TOUR - 6 steps\r\n// Internal VERSO staff (operations, relationship managers)\r\n// ============================================================================\r\nconst staffTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Staff Dashboard',\r\n    content: 'Platform activity overview and your pending workload.',\r\n    detailedContent: `Your staff dashboard shows what needs your attention today. Track platform\r\n      activity, see pending items in your queue, and monitor overall system health. Prioritize\r\n      tasks that need immediate attention.`,\r\n    features: [\r\n      'Pending items queue',\r\n      'Platform activity feed',\r\n      'Workload summary',\r\n      'Priority items',\r\n      'Team activity',\r\n      'System notifications'\r\n    ],\r\n    emptyStateContent: 'Your dashboard will show pending items and activity once the platform is active.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'approvals',\r\n    target: '[data-tour=\"nav-approvals\"]',\r\n    title: 'Approvals',\r\n    content: 'Process approval requests and KYC reviews.',\r\n    detailedContent: `Handle approval requests that come through the platform. Review KYC\r\n      submissions, subscription approvals, and other items that need staff authorization.`,\r\n    features: [\r\n      'Approval queue',\r\n      'KYC review workflow',\r\n      'Subscription processing',\r\n      'Document verification',\r\n      'Approval/rejection actions',\r\n      'Audit logging'\r\n    ],\r\n    emptyStateContent: 'Approval requests will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'deals',\r\n    target: '[data-tour=\"nav-deals\"]',\r\n    title: 'Deal Management',\r\n    content: 'View and support deals across the platform.',\r\n    detailedContent: `Access all deals to provide operational support. Help arrangers with deal\r\n      setup, monitor subscription progress, and assist with deal closes.`,\r\n    features: [\r\n      'All platform deals',\r\n      'Deal support tools',\r\n      'Subscription monitoring',\r\n      'Close assistance',\r\n      'Issue resolution',\r\n      'Arranger communication'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'investors',\r\n    target: '[data-tour=\"nav-investors\"]',\r\n    title: 'Investor Management',\r\n    content: 'Support investor accounts and resolve issues.',\r\n    detailedContent: `Manage investor accounts across the platform. Help with onboarding, KYC\r\n      issues, account updates, and general investor support.`,\r\n    features: [\r\n      'Investor directory',\r\n      'Account support tools',\r\n      'KYC assistance',\r\n      'Issue resolution',\r\n      'Communication tools',\r\n      'Account history'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'subscriptions',\r\n    target: '[data-tour=\"nav-subscriptions\"]',\r\n    title: 'Subscriptions',\r\n    content: 'Track and process subscriptions across all deals.',\r\n    detailedContent: `View subscription activity platform-wide. Monitor status, process updates,\r\n      and help resolve subscription issues.`,\r\n    features: [\r\n      'All subscriptions view',\r\n      'Status tracking',\r\n      'Processing tools',\r\n      'Issue flagging',\r\n      'Status updates',\r\n      'Reporting'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'messages',\r\n    target: '[data-tour=\"nav-messages\"]',\r\n    title: 'Messages',\r\n    content: 'Handle platform communications and support requests.',\r\n    detailedContent: `Manage support communications with investors, arrangers, and partners.\r\n      Respond to inquiries and coordinate with team members.`,\r\n    features: [\r\n      'Support inbox',\r\n      'Message threading',\r\n      'Team assignments',\r\n      'Response templates',\r\n      'Priority tagging',\r\n      'Resolution tracking'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// TOUR STEPS REGISTRY\r\n// Maps persona types to their tour configurations\r\n// ============================================================================\r\nexport const TOUR_STEPS: Record<string, TourStep[]> = {\r\n  // Investor variants\r\n  investor: investorEntityTour, // Default to entity (more comprehensive)\r\n  investor_entity: investorEntityTour,\r\n  investor_individual: investorIndividualTour,\r\n\r\n  // Business personas\r\n  ceo: ceoTour,\r\n  staff: staffTour,\r\n  arranger: arrangerTour,\r\n  introducer: introducerTour,\r\n  partner: partnerTour,\r\n  commercial_partner: commercialPartnerTour,\r\n  lawyer: lawyerTour,\r\n}\r\n\r\n/**\r\n * Get tour steps for a specific persona\r\n * Falls back to investor_entity tour if persona not found\r\n */\r\nexport function getTourSteps(persona: string): TourStep[] {\r\n  return TOUR_STEPS[persona] || TOUR_STEPS.investor_entity\r\n}\r\n\r\n/**\r\n * Get persona-specific welcome message for the tour modal\r\n */\r\nexport function getWelcomeMessage(persona: string): { title: string; description: string } {\r\n  const messages: Record<string, { title: string; description: string }> = {\r\n    investor: {\r\n      title: 'Welcome to VERSO Investor Portal!',\r\n      description: 'Let us show you around. This quick tour will help you discover investment opportunities and manage your portfolio.'\r\n    },\r\n    investor_entity: {\r\n      title: 'Welcome to VERSO Investor Portal!',\r\n      description: 'Let us show you around. This tour will help you manage your entity\\'s investments and coordinate with your team.'\r\n    },\r\n    investor_individual: {\r\n      title: 'Welcome to VERSO!',\r\n      description: 'Let us show you around. This quick tour will help you discover investment opportunities and track your portfolio.'\r\n    },\r\n    ceo: {\r\n      title: 'Welcome to VERSO Executive Portal!',\r\n      description: 'This tour will give you an overview of the platform\\'s management capabilities and executive controls.'\r\n    },\r\n    staff: {\r\n      title: 'Welcome to VERSO Staff Portal!',\r\n      description: 'This tour will help you get familiar with the tools you\\'ll use to support the platform.'\r\n    },\r\n    arranger: {\r\n      title: 'Welcome to VERSO Arranger Portal!',\r\n      description: 'Let us show you how to manage your mandates, track subscriptions, and work with your partner network.'\r\n    },\r\n    introducer: {\r\n      title: 'Welcome to VERSO Introducer Portal!',\r\n      description: 'This tour will show you how to track introductions, manage agreements, and monitor your commissions.'\r\n    },\r\n    partner: {\r\n      title: 'Welcome to VERSO Partner Portal!',\r\n      description: 'Let us show you how to access deals for your clients and track your partnership activity.'\r\n    },\r\n    commercial_partner: {\r\n      title: 'Welcome to VERSO Commercial Partner Portal!',\r\n      description: 'This tour will show you how to manage client investments and execute transactions on their behalf.'\r\n    },\r\n    lawyer: {\r\n      title: 'Welcome to VERSO Legal Portal!',\r\n      description: 'This tour will help you navigate your assigned matters, document reviews, and escrow management.'\r\n    }\r\n  }\r\n\r\n  return messages[persona] || messages.investor\r\n}\r\n","'use client'\r\n\r\nimport { useState, useCallback, useRef } from 'react'\r\nimport { TourProvider, useTour } from '@/contexts/tour-context'\r\nimport { TourSpotlight } from './tour-spotlight'\r\nimport { TourTooltip } from './tour-tooltip'\r\nimport { TourWelcomeModal } from './tour-welcome-modal'\r\nimport { getTourSteps, type TourStep } from '@/config/platform-tour'\r\nimport confetti from 'canvas-confetti'\r\n\r\ninterface TourContentProps {\r\n  steps: TourStep[]\r\n  persona: string\r\n}\r\n\r\nfunction TourContent({ steps, persona }: TourContentProps) {\r\n  const { isActive, currentStep } = useTour()\r\n\r\n  if (!isActive || !steps[currentStep]) return null\r\n\r\n  const step = steps[currentStep]\r\n\r\n  return (\r\n    <>\r\n      <TourSpotlight\r\n        targetSelector={step.target}\r\n        isVisible={step.target !== 'body'}\r\n        padding={step.highlightPadding}\r\n      />\r\n      <TourTooltip step={step} stepNumber={currentStep} persona={persona} />\r\n    </>\r\n  )\r\n}\r\n\r\n// Confetti celebration effect\r\nfunction triggerConfetti() {\r\n  const duration = 3 * 1000\r\n  const end = Date.now() + duration\r\n\r\n  // Multiple bursts from different angles\r\n  const colors = ['#3b82f6', '#8b5cf6', '#10b981', '#f59e0b', '#ec4899']\r\n\r\n  const frame = () => {\r\n    confetti({\r\n      particleCount: 3,\r\n      angle: 60,\r\n      spread: 55,\r\n      origin: { x: 0 },\r\n      colors: colors\r\n    })\r\n    confetti({\r\n      particleCount: 3,\r\n      angle: 120,\r\n      spread: 55,\r\n      origin: { x: 1 },\r\n      colors: colors\r\n    })\r\n\r\n    if (Date.now() < end) {\r\n      requestAnimationFrame(frame)\r\n    }\r\n  }\r\n\r\n  // Initial big burst\r\n  confetti({\r\n    particleCount: 100,\r\n    spread: 70,\r\n    origin: { y: 0.6 },\r\n    colors: colors\r\n  })\r\n\r\n  // Continuous celebration\r\n  frame()\r\n}\r\n\r\n// Haptic feedback for mobile\r\nfunction triggerHaptic() {\r\n  if (typeof navigator !== 'undefined' && 'vibrate' in navigator) {\r\n    navigator.vibrate(10)\r\n  }\r\n}\r\n\r\ninterface PlatformTourProps {\r\n  children: React.ReactNode\r\n  activePersona: string\r\n  hasCompletedTour: boolean\r\n}\r\n\r\nexport function PlatformTour({\r\n  children,\r\n  activePersona,\r\n  hasCompletedTour\r\n}: PlatformTourProps) {\r\n  const [showWelcome, setShowWelcome] = useState(!hasCompletedTour)\r\n  const [isCompleted, setIsCompleted] = useState(hasCompletedTour)\r\n  const completionTriggeredRef = useRef(false)\r\n\r\n  const steps = getTourSteps(activePersona)\r\n\r\n  // Extract step IDs for analytics\r\n  const stepIds = steps.map(step => step.id || step.target)\r\n\r\n  const handleComplete = useCallback(async () => {\r\n    if (isCompleted) return // Already completed, no need to call API again\r\n\r\n    // Prevent double-triggering\r\n    if (completionTriggeredRef.current) return\r\n    completionTriggeredRef.current = true\r\n\r\n    try {\r\n      // Trigger celebration effects\r\n      triggerConfetti()\r\n      triggerHaptic()\r\n\r\n      await fetch('/api/profiles/tour-completed', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      })\r\n      setIsCompleted(true)\r\n    } catch (error) {\r\n      console.error('Failed to save tour completion:', error)\r\n      completionTriggeredRef.current = false // Allow retry on error\r\n    }\r\n  }, [isCompleted])\r\n\r\n  const handleSkipFromWelcome = useCallback(async () => {\r\n    setShowWelcome(false)\r\n    // Don't trigger confetti on skip\r\n    try {\r\n      await fetch('/api/profiles/tour-completed', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      })\r\n      setIsCompleted(true)\r\n    } catch (error) {\r\n      console.error('Failed to save tour skip:', error)\r\n    }\r\n  }, [])\r\n\r\n  // Analytics callbacks (can be connected to your analytics service)\r\n  const analytics = {\r\n    onStepView: (step: number, stepId: string) => {\r\n      // console.log(`[Tour Analytics] Viewing step ${step}: ${stepId}`)\r\n    },\r\n    onStepComplete: (step: number, stepId: string, durationMs: number) => {\r\n      // console.log(`[Tour Analytics] Completed step ${step}: ${stepId} in ${durationMs}ms`)\r\n    },\r\n    onTourComplete: (totalDurationMs: number) => {\r\n      // console.log(`[Tour Analytics] Tour completed in ${totalDurationMs}ms`)\r\n    },\r\n    onTourSkip: (atStep: number) => {\r\n      // console.log(`[Tour Analytics] Tour skipped at step ${atStep}`)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TourProvider\r\n      totalSteps={steps.length}\r\n      onComplete={handleComplete}\r\n      analytics={analytics}\r\n      stepIds={stepIds}\r\n      enableKeyboardNav={true}\r\n      enablePersistence={true}\r\n    >\r\n      {children}\r\n\r\n      {/* Welcome modal for first-time users - now with persona-specific messaging */}\r\n      {!isCompleted && (\r\n        <TourWelcomeModal\r\n          open={showWelcome}\r\n          onClose={() => setShowWelcome(false)}\r\n          onSkip={handleSkipFromWelcome}\r\n          persona={activePersona}\r\n        />\r\n      )}\r\n\r\n      {/* Tour overlay - only render when potentially active */}\r\n      <TourContent steps={steps} persona={activePersona} />\r\n    </TourProvider>\r\n  )\r\n}\r\n","// canvas-confetti v1.9.4 built on 2025-10-25T05:14:56.640Z\nvar module = {};\n\n// source content\n/* globals Map */\n\n(function main(global, module, isWorker, workerSize) {\n  var canUseWorker = !!(\n    global.Worker &&\n    global.Blob &&\n    global.Promise &&\n    global.OffscreenCanvas &&\n    global.OffscreenCanvasRenderingContext2D &&\n    global.HTMLCanvasElement &&\n    global.HTMLCanvasElement.prototype.transferControlToOffscreen &&\n    global.URL &&\n    global.URL.createObjectURL);\n\n  var canUsePaths = typeof Path2D === 'function' && typeof DOMMatrix === 'function';\n  var canDrawBitmap = (function () {\n    // this mostly supports ssr\n    if (!global.OffscreenCanvas) {\n      return false;\n    }\n\n    try {\n      var canvas = new OffscreenCanvas(1, 1);\n      var ctx = canvas.getContext('2d');\n      ctx.fillRect(0, 0, 1, 1);\n      var bitmap = canvas.transferToImageBitmap();\n      ctx.createPattern(bitmap, 'no-repeat');\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  })();\n\n  function noop() {}\n\n  // create a promise if it exists, otherwise, just\n  // call the function directly\n  function promise(func) {\n    var ModulePromise = module.exports.Promise;\n    var Prom = ModulePromise !== void 0 ? ModulePromise : global.Promise;\n\n    if (typeof Prom === 'function') {\n      return new Prom(func);\n    }\n\n    func(noop, noop);\n\n    return null;\n  }\n\n  var bitmapMapper = (function (skipTransform, map) {\n    // see https://github.com/catdad/canvas-confetti/issues/209\n    // creating canvases is actually pretty expensive, so we should create a\n    // 1:1 map for bitmap:canvas, so that we can animate the confetti in\n    // a performant manner, but also not store them forever so that we don't\n    // have a memory leak\n    return {\n      transform: function(bitmap) {\n        if (skipTransform) {\n          return bitmap;\n        }\n\n        if (map.has(bitmap)) {\n          return map.get(bitmap);\n        }\n\n        var canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(bitmap, 0, 0);\n\n        map.set(bitmap, canvas);\n\n        return canvas;\n      },\n      clear: function () {\n        map.clear();\n      }\n    };\n  })(canDrawBitmap, new Map());\n\n  var raf = (function () {\n    var TIME = Math.floor(1000 / 60);\n    var frame, cancel;\n    var frames = {};\n    var lastFrameTime = 0;\n\n    if (typeof requestAnimationFrame === 'function' && typeof cancelAnimationFrame === 'function') {\n      frame = function (cb) {\n        var id = Math.random();\n\n        frames[id] = requestAnimationFrame(function onFrame(time) {\n          if (lastFrameTime === time || lastFrameTime + TIME - 1 < time) {\n            lastFrameTime = time;\n            delete frames[id];\n\n            cb();\n          } else {\n            frames[id] = requestAnimationFrame(onFrame);\n          }\n        });\n\n        return id;\n      };\n      cancel = function (id) {\n        if (frames[id]) {\n          cancelAnimationFrame(frames[id]);\n        }\n      };\n    } else {\n      frame = function (cb) {\n        return setTimeout(cb, TIME);\n      };\n      cancel = function (timer) {\n        return clearTimeout(timer);\n      };\n    }\n\n    return { frame: frame, cancel: cancel };\n  }());\n\n  var getWorker = (function () {\n    var worker;\n    var prom;\n    var resolves = {};\n\n    function decorate(worker) {\n      function execute(options, callback) {\n        worker.postMessage({ options: options || {}, callback: callback });\n      }\n      worker.init = function initWorker(canvas) {\n        var offscreen = canvas.transferControlToOffscreen();\n        worker.postMessage({ canvas: offscreen }, [offscreen]);\n      };\n\n      worker.fire = function fireWorker(options, size, done) {\n        if (prom) {\n          execute(options, null);\n          return prom;\n        }\n\n        var id = Math.random().toString(36).slice(2);\n\n        prom = promise(function (resolve) {\n          function workerDone(msg) {\n            if (msg.data.callback !== id) {\n              return;\n            }\n\n            delete resolves[id];\n            worker.removeEventListener('message', workerDone);\n\n            prom = null;\n\n            bitmapMapper.clear();\n\n            done();\n            resolve();\n          }\n\n          worker.addEventListener('message', workerDone);\n          execute(options, id);\n\n          resolves[id] = workerDone.bind(null, { data: { callback: id }});\n        });\n\n        return prom;\n      };\n\n      worker.reset = function resetWorker() {\n        worker.postMessage({ reset: true });\n\n        for (var id in resolves) {\n          resolves[id]();\n          delete resolves[id];\n        }\n      };\n    }\n\n    return function () {\n      if (worker) {\n        return worker;\n      }\n\n      if (!isWorker && canUseWorker) {\n        var code = [\n          'var CONFETTI, SIZE = {}, module = {};',\n          '(' + main.toString() + ')(this, module, true, SIZE);',\n          'onmessage = function(msg) {',\n          '  if (msg.data.options) {',\n          '    CONFETTI(msg.data.options).then(function () {',\n          '      if (msg.data.callback) {',\n          '        postMessage({ callback: msg.data.callback });',\n          '      }',\n          '    });',\n          '  } else if (msg.data.reset) {',\n          '    CONFETTI && CONFETTI.reset();',\n          '  } else if (msg.data.resize) {',\n          '    SIZE.width = msg.data.resize.width;',\n          '    SIZE.height = msg.data.resize.height;',\n          '  } else if (msg.data.canvas) {',\n          '    SIZE.width = msg.data.canvas.width;',\n          '    SIZE.height = msg.data.canvas.height;',\n          '    CONFETTI = module.exports.create(msg.data.canvas);',\n          '  }',\n          '}',\n        ].join('\\n');\n        try {\n          worker = new Worker(URL.createObjectURL(new Blob([code])));\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          typeof console !== 'undefined' && typeof console.warn === 'function' ? console.warn('🎊 Could not load worker', e) : null;\n\n          return null;\n        }\n\n        decorate(worker);\n      }\n\n      return worker;\n    };\n  })();\n\n  var defaults = {\n    particleCount: 50,\n    angle: 90,\n    spread: 45,\n    startVelocity: 45,\n    decay: 0.9,\n    gravity: 1,\n    drift: 0,\n    ticks: 200,\n    x: 0.5,\n    y: 0.5,\n    shapes: ['square', 'circle'],\n    zIndex: 100,\n    colors: [\n      '#26ccff',\n      '#a25afd',\n      '#ff5e7e',\n      '#88ff5a',\n      '#fcff42',\n      '#ffa62d',\n      '#ff36ff'\n    ],\n    // probably should be true, but back-compat\n    disableForReducedMotion: false,\n    scalar: 1\n  };\n\n  function convert(val, transform) {\n    return transform ? transform(val) : val;\n  }\n\n  function isOk(val) {\n    return !(val === null || val === undefined);\n  }\n\n  function prop(options, name, transform) {\n    return convert(\n      options && isOk(options[name]) ? options[name] : defaults[name],\n      transform\n    );\n  }\n\n  function onlyPositiveInt(number){\n    return number < 0 ? 0 : Math.floor(number);\n  }\n\n  function randomInt(min, max) {\n    // [min, max)\n    return Math.floor(Math.random() * (max - min)) + min;\n  }\n\n  function toDecimal(str) {\n    return parseInt(str, 16);\n  }\n\n  function colorsToRgb(colors) {\n    return colors.map(hexToRgb);\n  }\n\n  function hexToRgb(str) {\n    var val = String(str).replace(/[^0-9a-f]/gi, '');\n\n    if (val.length < 6) {\n        val = val[0]+val[0]+val[1]+val[1]+val[2]+val[2];\n    }\n\n    return {\n      r: toDecimal(val.substring(0,2)),\n      g: toDecimal(val.substring(2,4)),\n      b: toDecimal(val.substring(4,6))\n    };\n  }\n\n  function getOrigin(options) {\n    var origin = prop(options, 'origin', Object);\n    origin.x = prop(origin, 'x', Number);\n    origin.y = prop(origin, 'y', Number);\n\n    return origin;\n  }\n\n  function setCanvasWindowSize(canvas) {\n    canvas.width = document.documentElement.clientWidth;\n    canvas.height = document.documentElement.clientHeight;\n  }\n\n  function setCanvasRectSize(canvas) {\n    var rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n  }\n\n  function getCanvas(zIndex) {\n    var canvas = document.createElement('canvas');\n\n    canvas.style.position = 'fixed';\n    canvas.style.top = '0px';\n    canvas.style.left = '0px';\n    canvas.style.pointerEvents = 'none';\n    canvas.style.zIndex = zIndex;\n\n    return canvas;\n  }\n\n  function ellipse(context, x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n    context.save();\n    context.translate(x, y);\n    context.rotate(rotation);\n    context.scale(radiusX, radiusY);\n    context.arc(0, 0, 1, startAngle, endAngle, antiClockwise);\n    context.restore();\n  }\n\n  function randomPhysics(opts) {\n    var radAngle = opts.angle * (Math.PI / 180);\n    var radSpread = opts.spread * (Math.PI / 180);\n\n    return {\n      x: opts.x,\n      y: opts.y,\n      wobble: Math.random() * 10,\n      wobbleSpeed: Math.min(0.11, Math.random() * 0.1 + 0.05),\n      velocity: (opts.startVelocity * 0.5) + (Math.random() * opts.startVelocity),\n      angle2D: -radAngle + ((0.5 * radSpread) - (Math.random() * radSpread)),\n      tiltAngle: (Math.random() * (0.75 - 0.25) + 0.25) * Math.PI,\n      color: opts.color,\n      shape: opts.shape,\n      tick: 0,\n      totalTicks: opts.ticks,\n      decay: opts.decay,\n      drift: opts.drift,\n      random: Math.random() + 2,\n      tiltSin: 0,\n      tiltCos: 0,\n      wobbleX: 0,\n      wobbleY: 0,\n      gravity: opts.gravity * 3,\n      ovalScalar: 0.6,\n      scalar: opts.scalar,\n      flat: opts.flat\n    };\n  }\n\n  function updateFetti(context, fetti) {\n    fetti.x += Math.cos(fetti.angle2D) * fetti.velocity + fetti.drift;\n    fetti.y += Math.sin(fetti.angle2D) * fetti.velocity + fetti.gravity;\n    fetti.velocity *= fetti.decay;\n\n    if (fetti.flat) {\n      fetti.wobble = 0;\n      fetti.wobbleX = fetti.x + (10 * fetti.scalar);\n      fetti.wobbleY = fetti.y + (10 * fetti.scalar);\n\n      fetti.tiltSin = 0;\n      fetti.tiltCos = 0;\n      fetti.random = 1;\n    } else {\n      fetti.wobble += fetti.wobbleSpeed;\n      fetti.wobbleX = fetti.x + ((10 * fetti.scalar) * Math.cos(fetti.wobble));\n      fetti.wobbleY = fetti.y + ((10 * fetti.scalar) * Math.sin(fetti.wobble));\n\n      fetti.tiltAngle += 0.1;\n      fetti.tiltSin = Math.sin(fetti.tiltAngle);\n      fetti.tiltCos = Math.cos(fetti.tiltAngle);\n      fetti.random = Math.random() + 2;\n    }\n\n    var progress = (fetti.tick++) / fetti.totalTicks;\n\n    var x1 = fetti.x + (fetti.random * fetti.tiltCos);\n    var y1 = fetti.y + (fetti.random * fetti.tiltSin);\n    var x2 = fetti.wobbleX + (fetti.random * fetti.tiltCos);\n    var y2 = fetti.wobbleY + (fetti.random * fetti.tiltSin);\n\n    context.fillStyle = 'rgba(' + fetti.color.r + ', ' + fetti.color.g + ', ' + fetti.color.b + ', ' + (1 - progress) + ')';\n\n    context.beginPath();\n\n    if (canUsePaths && fetti.shape.type === 'path' && typeof fetti.shape.path === 'string' && Array.isArray(fetti.shape.matrix)) {\n      context.fill(transformPath2D(\n        fetti.shape.path,\n        fetti.shape.matrix,\n        fetti.x,\n        fetti.y,\n        Math.abs(x2 - x1) * 0.1,\n        Math.abs(y2 - y1) * 0.1,\n        Math.PI / 10 * fetti.wobble\n      ));\n    } else if (fetti.shape.type === 'bitmap') {\n      var rotation = Math.PI / 10 * fetti.wobble;\n      var scaleX = Math.abs(x2 - x1) * 0.1;\n      var scaleY = Math.abs(y2 - y1) * 0.1;\n      var width = fetti.shape.bitmap.width * fetti.scalar;\n      var height = fetti.shape.bitmap.height * fetti.scalar;\n\n      var matrix = new DOMMatrix([\n        Math.cos(rotation) * scaleX,\n        Math.sin(rotation) * scaleX,\n        -Math.sin(rotation) * scaleY,\n        Math.cos(rotation) * scaleY,\n        fetti.x,\n        fetti.y\n      ]);\n\n      // apply the transform matrix from the confetti shape\n      matrix.multiplySelf(new DOMMatrix(fetti.shape.matrix));\n\n      var pattern = context.createPattern(bitmapMapper.transform(fetti.shape.bitmap), 'no-repeat');\n      pattern.setTransform(matrix);\n\n      context.globalAlpha = (1 - progress);\n      context.fillStyle = pattern;\n      context.fillRect(\n        fetti.x - (width / 2),\n        fetti.y - (height / 2),\n        width,\n        height\n      );\n      context.globalAlpha = 1;\n    } else if (fetti.shape === 'circle') {\n      context.ellipse ?\n        context.ellipse(fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI) :\n        ellipse(context, fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI);\n    } else if (fetti.shape === 'star') {\n      var rot = Math.PI / 2 * 3;\n      var innerRadius = 4 * fetti.scalar;\n      var outerRadius = 8 * fetti.scalar;\n      var x = fetti.x;\n      var y = fetti.y;\n      var spikes = 5;\n      var step = Math.PI / spikes;\n\n      while (spikes--) {\n        x = fetti.x + Math.cos(rot) * outerRadius;\n        y = fetti.y + Math.sin(rot) * outerRadius;\n        context.lineTo(x, y);\n        rot += step;\n\n        x = fetti.x + Math.cos(rot) * innerRadius;\n        y = fetti.y + Math.sin(rot) * innerRadius;\n        context.lineTo(x, y);\n        rot += step;\n      }\n    } else {\n      context.moveTo(Math.floor(fetti.x), Math.floor(fetti.y));\n      context.lineTo(Math.floor(fetti.wobbleX), Math.floor(y1));\n      context.lineTo(Math.floor(x2), Math.floor(y2));\n      context.lineTo(Math.floor(x1), Math.floor(fetti.wobbleY));\n    }\n\n    context.closePath();\n    context.fill();\n\n    return fetti.tick < fetti.totalTicks;\n  }\n\n  function animate(canvas, fettis, resizer, size, done) {\n    var animatingFettis = fettis.slice();\n    var context = canvas.getContext('2d');\n    var animationFrame;\n    var destroy;\n\n    var prom = promise(function (resolve) {\n      function onDone() {\n        animationFrame = destroy = null;\n\n        context.clearRect(0, 0, size.width, size.height);\n        bitmapMapper.clear();\n\n        done();\n        resolve();\n      }\n\n      function update() {\n        if (isWorker && !(size.width === workerSize.width && size.height === workerSize.height)) {\n          size.width = canvas.width = workerSize.width;\n          size.height = canvas.height = workerSize.height;\n        }\n\n        if (!size.width && !size.height) {\n          resizer(canvas);\n          size.width = canvas.width;\n          size.height = canvas.height;\n        }\n\n        context.clearRect(0, 0, size.width, size.height);\n\n        animatingFettis = animatingFettis.filter(function (fetti) {\n          return updateFetti(context, fetti);\n        });\n\n        if (animatingFettis.length) {\n          animationFrame = raf.frame(update);\n        } else {\n          onDone();\n        }\n      }\n\n      animationFrame = raf.frame(update);\n      destroy = onDone;\n    });\n\n    return {\n      addFettis: function (fettis) {\n        animatingFettis = animatingFettis.concat(fettis);\n\n        return prom;\n      },\n      canvas: canvas,\n      promise: prom,\n      reset: function () {\n        if (animationFrame) {\n          raf.cancel(animationFrame);\n        }\n\n        if (destroy) {\n          destroy();\n        }\n      }\n    };\n  }\n\n  function confettiCannon(canvas, globalOpts) {\n    var isLibCanvas = !canvas;\n    var allowResize = !!prop(globalOpts || {}, 'resize');\n    var hasResizeEventRegistered = false;\n    var globalDisableForReducedMotion = prop(globalOpts, 'disableForReducedMotion', Boolean);\n    var shouldUseWorker = canUseWorker && !!prop(globalOpts || {}, 'useWorker');\n    var worker = shouldUseWorker ? getWorker() : null;\n    var resizer = isLibCanvas ? setCanvasWindowSize : setCanvasRectSize;\n    var initialized = (canvas && worker) ? !!canvas.__confetti_initialized : false;\n    var preferLessMotion = typeof matchMedia === 'function' && matchMedia('(prefers-reduced-motion)').matches;\n    var animationObj;\n\n    function fireLocal(options, size, done) {\n      var particleCount = prop(options, 'particleCount', onlyPositiveInt);\n      var angle = prop(options, 'angle', Number);\n      var spread = prop(options, 'spread', Number);\n      var startVelocity = prop(options, 'startVelocity', Number);\n      var decay = prop(options, 'decay', Number);\n      var gravity = prop(options, 'gravity', Number);\n      var drift = prop(options, 'drift', Number);\n      var colors = prop(options, 'colors', colorsToRgb);\n      var ticks = prop(options, 'ticks', Number);\n      var shapes = prop(options, 'shapes');\n      var scalar = prop(options, 'scalar');\n      var flat = !!prop(options, 'flat');\n      var origin = getOrigin(options);\n\n      var temp = particleCount;\n      var fettis = [];\n\n      var startX = canvas.width * origin.x;\n      var startY = canvas.height * origin.y;\n\n      while (temp--) {\n        fettis.push(\n          randomPhysics({\n            x: startX,\n            y: startY,\n            angle: angle,\n            spread: spread,\n            startVelocity: startVelocity,\n            color: colors[temp % colors.length],\n            shape: shapes[randomInt(0, shapes.length)],\n            ticks: ticks,\n            decay: decay,\n            gravity: gravity,\n            drift: drift,\n            scalar: scalar,\n            flat: flat\n          })\n        );\n      }\n\n      // if we have a previous canvas already animating,\n      // add to it\n      if (animationObj) {\n        return animationObj.addFettis(fettis);\n      }\n\n      animationObj = animate(canvas, fettis, resizer, size , done);\n\n      return animationObj.promise;\n    }\n\n    function fire(options) {\n      var disableForReducedMotion = globalDisableForReducedMotion || prop(options, 'disableForReducedMotion', Boolean);\n      var zIndex = prop(options, 'zIndex', Number);\n\n      if (disableForReducedMotion && preferLessMotion) {\n        return promise(function (resolve) {\n          resolve();\n        });\n      }\n\n      if (isLibCanvas && animationObj) {\n        // use existing canvas from in-progress animation\n        canvas = animationObj.canvas;\n      } else if (isLibCanvas && !canvas) {\n        // create and initialize a new canvas\n        canvas = getCanvas(zIndex);\n        document.body.appendChild(canvas);\n      }\n\n      if (allowResize && !initialized) {\n        // initialize the size of a user-supplied canvas\n        resizer(canvas);\n      }\n\n      var size = {\n        width: canvas.width,\n        height: canvas.height\n      };\n\n      if (worker && !initialized) {\n        worker.init(canvas);\n      }\n\n      initialized = true;\n\n      if (worker) {\n        canvas.__confetti_initialized = true;\n      }\n\n      function onResize() {\n        if (worker) {\n          // TODO this really shouldn't be immediate, because it is expensive\n          var obj = {\n            getBoundingClientRect: function () {\n              if (!isLibCanvas) {\n                return canvas.getBoundingClientRect();\n              }\n            }\n          };\n\n          resizer(obj);\n\n          worker.postMessage({\n            resize: {\n              width: obj.width,\n              height: obj.height\n            }\n          });\n          return;\n        }\n\n        // don't actually query the size here, since this\n        // can execute frequently and rapidly\n        size.width = size.height = null;\n      }\n\n      function done() {\n        animationObj = null;\n\n        if (allowResize) {\n          hasResizeEventRegistered = false;\n          global.removeEventListener('resize', onResize);\n        }\n\n        if (isLibCanvas && canvas) {\n          if (document.body.contains(canvas)) {\n            document.body.removeChild(canvas);\n          }\n          canvas = null;\n          initialized = false;\n        }\n      }\n\n      if (allowResize && !hasResizeEventRegistered) {\n        hasResizeEventRegistered = true;\n        global.addEventListener('resize', onResize, false);\n      }\n\n      if (worker) {\n        return worker.fire(options, size, done);\n      }\n\n      return fireLocal(options, size, done);\n    }\n\n    fire.reset = function () {\n      if (worker) {\n        worker.reset();\n      }\n\n      if (animationObj) {\n        animationObj.reset();\n      }\n    };\n\n    return fire;\n  }\n\n  // Make default export lazy to defer worker creation until called.\n  var defaultFire;\n  function getDefaultFire() {\n    if (!defaultFire) {\n      defaultFire = confettiCannon(null, { useWorker: true, resize: true });\n    }\n    return defaultFire;\n  }\n\n  function transformPath2D(pathString, pathMatrix, x, y, scaleX, scaleY, rotation) {\n    var path2d = new Path2D(pathString);\n\n    var t1 = new Path2D();\n    t1.addPath(path2d, new DOMMatrix(pathMatrix));\n\n    var t2 = new Path2D();\n    // see https://developer.mozilla.org/en-US/docs/Web/API/DOMMatrix/DOMMatrix\n    t2.addPath(t1, new DOMMatrix([\n      Math.cos(rotation) * scaleX,\n      Math.sin(rotation) * scaleX,\n      -Math.sin(rotation) * scaleY,\n      Math.cos(rotation) * scaleY,\n      x,\n      y\n    ]));\n\n    return t2;\n  }\n\n  function shapeFromPath(pathData) {\n    if (!canUsePaths) {\n      throw new Error('path confetti are not supported in this browser');\n    }\n\n    var path, matrix;\n\n    if (typeof pathData === 'string') {\n      path = pathData;\n    } else {\n      path = pathData.path;\n      matrix = pathData.matrix;\n    }\n\n    var path2d = new Path2D(path);\n    var tempCanvas = document.createElement('canvas');\n    var tempCtx = tempCanvas.getContext('2d');\n\n    if (!matrix) {\n      // attempt to figure out the width of the path, up to 1000x1000\n      var maxSize = 1000;\n      var minX = maxSize;\n      var minY = maxSize;\n      var maxX = 0;\n      var maxY = 0;\n      var width, height;\n\n      // do some line skipping... this is faster than checking\n      // every pixel and will be mostly still correct\n      for (var x = 0; x < maxSize; x += 2) {\n        for (var y = 0; y < maxSize; y += 2) {\n          if (tempCtx.isPointInPath(path2d, x, y, 'nonzero')) {\n            minX = Math.min(minX, x);\n            minY = Math.min(minY, y);\n            maxX = Math.max(maxX, x);\n            maxY = Math.max(maxY, y);\n          }\n        }\n      }\n\n      width = maxX - minX;\n      height = maxY - minY;\n\n      var maxDesiredSize = 10;\n      var scale = Math.min(maxDesiredSize/width, maxDesiredSize/height);\n\n      matrix = [\n        scale, 0, 0, scale,\n        -Math.round((width/2) + minX) * scale,\n        -Math.round((height/2) + minY) * scale\n      ];\n    }\n\n    return {\n      type: 'path',\n      path: path,\n      matrix: matrix\n    };\n  }\n\n  function shapeFromText(textData) {\n    var text,\n        scalar = 1,\n        color = '#000000',\n        // see https://nolanlawson.com/2022/04/08/the-struggle-of-using-native-emoji-on-the-web/\n        fontFamily = '\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';\n\n    if (typeof textData === 'string') {\n      text = textData;\n    } else {\n      text = textData.text;\n      scalar = 'scalar' in textData ? textData.scalar : scalar;\n      fontFamily = 'fontFamily' in textData ? textData.fontFamily : fontFamily;\n      color = 'color' in textData ? textData.color : color;\n    }\n\n    // all other confetti are 10 pixels,\n    // so this pixel size is the de-facto 100% scale confetti\n    var fontSize = 10 * scalar;\n    var font = '' + fontSize + 'px ' + fontFamily;\n\n    var canvas = new OffscreenCanvas(fontSize, fontSize);\n    var ctx = canvas.getContext('2d');\n\n    ctx.font = font;\n    var size = ctx.measureText(text);\n    var width = Math.ceil(size.actualBoundingBoxRight + size.actualBoundingBoxLeft);\n    var height = Math.ceil(size.actualBoundingBoxAscent + size.actualBoundingBoxDescent);\n\n    var padding = 2;\n    var x = size.actualBoundingBoxLeft + padding;\n    var y = size.actualBoundingBoxAscent + padding;\n    width += padding + padding;\n    height += padding + padding;\n\n    canvas = new OffscreenCanvas(width, height);\n    ctx = canvas.getContext('2d');\n    ctx.font = font;\n    ctx.fillStyle = color;\n\n    ctx.fillText(text, x, y);\n\n    var scale = 1 / scalar;\n\n    return {\n      type: 'bitmap',\n      // TODO these probably need to be transfered for workers\n      bitmap: canvas.transferToImageBitmap(),\n      matrix: [scale, 0, 0, scale, -width * scale / 2, -height * scale / 2]\n    };\n  }\n\n  module.exports = function() {\n    return getDefaultFire().apply(this, arguments);\n  };\n  module.exports.reset = function() {\n    getDefaultFire().reset();\n  };\n  module.exports.create = confettiCannon;\n  module.exports.shapeFromPath = shapeFromPath;\n  module.exports.shapeFromText = shapeFromText;\n}((function () {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  return this || {};\n})(), module, false));\n\n// end source content\n\nexport default module.exports;\nexport var create = module.exports.create;\n"],"names":[],"mappings":"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CACrE,SAAU,CACR,qBACA,qBACA,0BACA,mBACA,mBACA,yBACD,CACD,UAAW,OACb,EACA,CACE,GAAI,YACJ,OAAQ,8BACR,MAAO,sBACP,QAAS,gDACT,gBAAiB,CAAC;4DACsC,CAAC,CACzD,SAAU,CACR,qBACA,wBACA,iBACA,mBACA,sBACA,kBACD,CACD,UAAW,OACb,EACA,CACE,GAAI,gBACJ,OAAQ,kCACR,MAAO,gBACP,QAAS,oDACT,gBAAiB,CAAC;2CACqB,CAAC,CACxC,SAAU,CACR,yBACA,kBACA,mBACA,iBACA,iBACA,YACD,CACD,UAAW,OACb,EACA,CACE,GAAI,WACJ,OAAQ,6BACR,MAAO,WACP,QAAS,uDACT,gBAAiB,CAAC;4DACsC,CAAC,CACzD,SAAU,CACR,gBACA,oBACA,mBACA,qBACA,mBACA,sBACD,CACD,UAAW,OACb,EACD,CAeC,SAnpB+B,CAC/B,AAkpBU,CAjpBR,GAAI,YACJ,OAAQ,8BACR,MAAO,qBACP,QAAS,qEACT,gBAAiB,CAAC;;qFAE+D,CAAC,CAClF,SAAU,CACR,kCACA,0BACA,iCACA,4BACA,uBACA,yBACD,CACD,kBAAmB,wEACnB,UAAW,OACb,EACA,CACE,GAAI,WACJ,OAAQ,gCACR,MAAO,cACP,QAAS,uEACT,gBAAiB,CAAC;;0EAEoD,CAAC,CACvE,SAAU,CACR,iCACA,iCACA,mCACA,yBACA,+BACA,6BACD,CACD,kBAAmB,wGACnB,UAAW,OACb,EACA,CACE,GAAI,qBACJ,OAAQ,uCACR,MAAO,qBACP,QAAS,0DACT,gBAAiB,CAAC;;4DAEsC,CAAC,CACzD,SAAU,CACR,+BACA,iCACA,0BACA,oBACA,wCACA,iCACD,CACD,kBAAmB,wFACnB,UAAW,OACb,EACA,CACE,GAAI,YACJ,OAAQ,8BACR,MAAO,YACP,QAAS,8DACT,gBAAiB,CAAC;;+EAEyD,CAAC,CAC5E,SAAU,CACR,kCACA,0BACA,2BACA,wBACA,sBACA,sBACD,CACD,kBAAmB,qFACnB,UAAW,OACb,EACA,CACE,GAAI,cACJ,OAAQ,mCACR,MAAO,iBACP,QAAS,sDACT,gBAAiB,CAAC;;qFAE+D,CAAC,CAClF,SAAU,CACR,kCACA,mCACA,kCACA,uBACA,sBACA,sBACD,CACD,kBAAmB,+FACnB,UAAW,OACb,EACA,CACE,GAAI,UACJ,OAAQ,4BACR,MAAO,mBACP,QAAS,6DACT,gBAAiB,CAAC;;2DAEqC,CAAC,CACxD,SAAU,CACR,kCACA,yBACA,2BACA,iBACA,sBACA,2BACD,CACD,UAAW,OACb,EACD,CAkiBC,WA5hBiC,CA4hBrB,AA3hBZ,CACE,GAAI,YACJ,OAAQ,8BACR,MAAO,uBACP,QAAS,0EACT,gBAAiB,CAAC;;iFAE2D,CAAC,CAC9E,SAAU,CACR,2BACA,kCACA,iCACA,uBACA,gCACA,uBACD,CACD,kBAAmB,8EACnB,UAAW,OACb,EACA,CACE,GAAI,gBACJ,OAAQ,kCACR,MAAO,mBACP,QAAS,iEACT,gBAAiB,CAAC;;uDAEiC,CAAC,CACpD,SAAU,CACR,4BACA,mCACA,mBACA,8BACA,2BACA,uBACD,CACD,kBAAmB,sFACnB,UAAW,OACb,EACA,CACE,GAAI,aACJ,OAAQ,+BACR,MAAO,iBACP,QAAS,uEACT,gBAAiB,CAAC;;gEAE0C,CAAC,CAC7D,SAAU,CACR,wBACA,0BACA,gBACA,wBACA,sBACA,oBACD,CACD,kBAAmB,2EACnB,UAAW,OACb,EACA,CACE,GAAI,cACJ,OAAQ,mCACR,MAAO,iBACP,QAAS,uEACT,gBAAiB,CAAC;;6DAEuC,CAAC,CAC1D,SAAU,CACR,sBACA,qBACA,mBACA,+BACA,sBACA,wBACD,CACD,kBAAmB,gGACnB,UAAW,OACb,EACA,CACE,GAAI,YACJ,OAAQ,8BACR,MAAO,YACP,QAAS,wDACT,gBAAiB,CAAC;;uCAEiB,CAAC,CACpC,SAAU,CACR,6BACA,iCACA,mBACA,0BACA,yBACA,cACD,CACD,kBAAmB,uDACnB,UAAW,OACb,EACA,CACE,GAAI,UACJ,OAAQ,4BACR,MAAO,qBACP,QAAS,gEACT,gBAAiB,CAAC;;oEAE8C,CAAC,CACjE,SAAU,CACR,sBACA,uBACA,2BACA,8BACA,qBACA,mBACD,CACD,UAAW,OACb,EACD,CA2aC,QAra8B,CAqarB,AApaT,CACE,GAAI,YACJ,OAAQ,8BACR,MAAO,oBACP,QAAS,qEACT,gBAAiB,CAAC;;4EAEsD,CAAC,CACzE,SAAU,CACR,0BACA,wBACA,0BACA,uBACA,4BACA,kBACD,CACD,kBAAmB,yFACnB,UAAW,OACb,EACA,CACE,GAAI,gBACJ,OAAQ,kCACR,MAAO,0BACP,QAAS,qDACT,gBAAiB,CAAC;;2EAEqD,CAAC,CACxE,SAAU,CACR,0BACA,0BACA,sBACA,yBACA,0BACA,sBACD,CACD,kBAAmB,qDACnB,UAAW,OACb,EACA,CACE,GAAI,eACJ,OAAQ,iCACR,MAAO,eACP,QAAS,2DACT,gBAAiB,CAAC;;6CAEuB,CAAC,CAC1C,SAAU,CACR,8BACA,+BACA,qBACA,mBACA,2BACA,yBACD,CACD,kBAAmB,4DACnB,UAAW,OACb,EACA,CACE,GAAI,cACJ,OAAQ,mCACR,MAAO,iBACP,QAAS,iEACT,gBAAiB,CAAC;gGAC0E,CAAC,CAC7F,SAAU,CACR,qBACA,qBACA,mBACA,kBACA,sBACA,qBACD,CACD,kBAAmB,oDACnB,UAAW,OACb,EACA,CACE,GAAI,UACJ,OAAQ,4BACR,MAAO,kBACP,QAAS,0DACT,gBAAiB,CAAC;6EACuD,CAAC,CAC1E,SAAU,CACR,iBACA,qBACA,oBACA,sBACA,wBACA,mBACD,CACD,UAAW,OACb,EACD,CAyUC,mBAnUwC,CACxC,AAkUoB,CAjUlB,GAAI,YACJ,OAAQ,8BACR,MAAO,+BACP,QAAS,2DACT,gBAAiB,CAAC;;mEAE6C,CAAC,CAChE,SAAU,CACR,4BACA,6BACA,0BACA,0BACA,mBACA,uBACD,CACD,kBAAmB,yEACnB,UAAW,OACb,EACA,CACE,GAAI,gBACJ,OAAQ,kCACR,MAAO,2BACP,QAAS,6CACT,gBAAiB,CAAC;;8CAEwB,CAAC,CAC3C,SAAU,CACR,gCACA,+BACA,8BACA,kBACA,sBACA,eACD,CACD,kBAAmB,yDACnB,UAAW,OACb,EACA,CACE,GAAI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","ignoreList":[3,8]}