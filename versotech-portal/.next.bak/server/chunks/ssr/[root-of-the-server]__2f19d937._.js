module.exports=[274929,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.HooksClientContext},530136,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.ServerInsertedHtml},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},571370,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.AppRouterContext},257264,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored["react-ssr"].ReactServerDOMTurbopackClient},439467,a=>{"use strict";let b=(0,a.i(95799).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>b],439467)},441278,a=>{"use strict";let b=(0,a.i(95799).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],441278)},491433,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},441664,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},990472,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(611038);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},964064,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},264890,a=>{"use strict";let b=(0,a.i(95799).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],264890)},975965,a=>{"use strict";let b=(0,a.i(95799).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],975965)},496392,a=>{"use strict";let b=(0,a.i(95799).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],496392)},835858,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(345711),g=a.r(105931),h=a.r(149883),i=f._(a.r(996444));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},714814,(a,b,c)=>{b.exports=a.r(835858)},976839,a=>{"use strict";var b=a.i(58834);let c=["supabase","sb-","auth","supabase.auth.token"];class d{static instance;isInitialized=!1;static getInstance(){return d.instance||(d.instance=new d),d.instance}init(){this.isInitialized}clearAuthCookies(){if("undefined"==typeof document)return;let a=document.cookie.split(";"),b=[];a.forEach(a=>{let d=a.split("=")[0].trim();c.some(a=>d.includes(a))&&b.push(d)}),b.forEach(a=>{let b=[window.location.hostname,`.${window.location.hostname}`,""];["/","/versoholdings","/versotech","/versotech_main"].forEach(c=>{b.forEach(b=>{let d=b?`domain=${b};`:"";document.cookie=`${a}=; ${d}path=${c}; expires=Thu, 01 Jan 1970 00:00:00 GMT; max-age=0`})})}),console.info("[auth-session] Cleared auth cookies:",b)}clearAllAuthData(){}forceSignOut(){}handleStorageChange=a=>{a.key&&c.some(b=>a.key?.includes(b))&&null===a.newValue&&(console.info("[auth-session] Auth state cleared in another tab, redirecting to login"),window.location.href="/versotech_main/login?error=signed_out")};markAuthenticated(){}getDebugInfo(){return{error:"Not in browser"}}}let e=d.getInstance(),f=async a=>{if(console.log("[auth] syncBrowserSession called, session provided:",!!a),!a)return console.log("[auth] No session to sync, returning true"),!0;let c=(0,b.createClient)();console.log("[auth] Calling supabase.auth.setSession...");let{data:d,error:e}=await c.auth.setSession({access_token:a.access_token,refresh_token:a.refresh_token});return e?(console.error("[auth] Client session sync failed:",e),!1):(console.log("[auth] Session synced successfully, user:",d?.user?.email),!0)};class g extends Error{code;constructor(a,b){super(a),this.code=b,this.name="AuthError"}}let h=async(a,c,d="investor")=>{try{console.log("[auth-client] Clearing all auth data before sign-in..."),e.clearAllAuthData(),(0,b.resetClient)(),await new Promise(a=>setTimeout(a,100));let h=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:c,portal:d})}),i=await h.json().catch(()=>({}));if(!h.ok||!i.success){let a="string"==typeof i.error&&i.error.trim()?i.error:"Authentication failed. Please check your credentials.";throw new g(a)}if(!await f(i.session?{access_token:i.session.access_token,refresh_token:i.session.refresh_token}:void 0))throw new g("Unable to establish session. Please try again.");return e.markAuthenticated(),i}catch(a){if(a instanceof g)throw a;throw console.error("Sign in failed:",a),new g("Sign in failed. Please check your credentials.")}},i=async()=>{let a=(0,b.createClient)(),c=null;try{let{error:b}=await a.auth.signOut();b&&(console.error("[auth] Supabase signOut error:",b),c=b)}catch(a){console.error("[auth] Sign out error:",a),c=a}finally{}if(c)throw new g("Sign out failed. Please try again.")},j=async a=>{try{let b=await fetch("/api/auth/request-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),c=await b.json();if(!b.ok){let a=c.detail?`${c.error} (${c.detail})`:c.error||"Password reset failed. Please try again.";throw new g(a)}return{success:!0,message:c.message}}catch(a){if(a instanceof g)throw a;throw new g("Password reset failed. Please try again.")}},k=async a=>{let c=(0,b.createClient)();try{let{error:b}=await c.auth.updateUser({password:a});if(b)throw new g(b.message,b.message)}catch(a){if(a instanceof g)throw a;throw new g("Password update failed. Please try again.")}};a.s(["AuthError",()=>g,"resetPassword",0,j,"signIn",0,h,"signOut",0,i,"updatePassword",0,k],976839)},686331,a=>{"use strict";let b=(0,a.i(95799).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],686331)},575661,a=>{"use strict";let b=(0,a.i(95799).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["EyeOff",()=>b],575661)},19571,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(284169),f=a.i(421908),g=a.i(663475),h=a.i(249464),i=a.i(976839),j=a.i(58834),k=a.i(3321),l=a.i(264890),m=a.i(575661),n=a.i(496392),o=a.i(439467),p=a.i(686331),q=a.i(975965),r=a.i(441278),s=a.i(497412),t=a.i(714814);function u(){let a=(0,d.useRouter)(),u=(0,d.useSearchParams)(),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{let a=(0,j.createClient)(),b=u.get("code");if(b){try{let{error:c}=await a.auth.exchangeCodeForSession(b);c?G({type:"error",text:"Recovery link expired or invalid. Please request a new one."}):(console.log("[reset-password] Recovery session set from code"),K(!0))}catch{G({type:"error",text:"Failed to process recovery link."})}M(!1);return}if("recovery"===u.get("from")){let{data:{user:b}}=await a.auth.getUser();if(b){console.log("[reset-password] Recovery redirect from auth callback, user:",b.email),K(!0),M(!1);return}console.log("[reset-password] Recovery flag present but no session"),G({type:"error",text:"Your session has expired. Please request a new password reset link."})}console.log("[reset-password] No recovery indicators, showing request form"),M(!1)})()},[u]);let N=async a=>{a.preventDefault(),E(!0),G(null);try{await (0,i.resetPassword)(v),I(!0),G({type:"success",text:"Password reset email sent! Check your inbox and click the link to reset your password."})}catch(a){a instanceof i.AuthError?G({type:"error",text:a.message}):G({type:"error",text:"Failed to send reset email. Please try again."})}finally{E(!1)}},O=async b=>{if(b.preventDefault(),E(!0),G(null),x!==z){G({type:"error",text:"Passwords do not match."}),E(!1);return}if(x.length<8){G({type:"error",text:"Password must be at least 8 characters long."}),E(!1);return}try{await (0,i.updatePassword)(x),G({type:"success",text:"Password updated successfully! Redirecting to login..."});let b=(0,j.createClient)();await b.auth.signOut(),setTimeout(()=>{a.push("/versotech_main/login?message=password_reset")},2e3)}catch(a){a instanceof i.AuthError?G({type:"error",text:a.message}):G({type:"error",text:"Failed to update password. Please try again."})}finally{E(!1)}};return L?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#050505]",children:(0,b.jsx)(k.Loader2,{className:"h-8 w-8 animate-spin text-white"})}):(0,b.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#050505] p-4 font-sans text-zinc-100",children:[(0,b.jsxs)(s.default,{href:"/versotech_main/login",className:"absolute top-8 left-8 text-sm text-zinc-500 hover:text-white transition-colors flex items-center gap-2 group",children:[(0,b.jsx)(q.ArrowLeft,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})," Back to Login"]}),(0,b.jsxs)("div",{className:"w-full max-w-md space-y-8 animate-in fade-in zoom-in-95 duration-700",children:[(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)("div",{className:"relative w-48 h-16",children:(0,b.jsx)(t.default,{src:"/versotech-logo.jpg",alt:"VERSO",fill:!0,className:"object-contain invert",priority:!0})})}),(0,b.jsx)("h1",{className:"text-3xl font-light tracking-tight text-white sr-only",children:"VERSO"}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm tracking-wide uppercase",children:J?"Set New Password":"Reset Your Password"})]}),(0,b.jsx)(e.Card,{className:"bg-zinc-900/50 border-white/5 backdrop-blur-sm shadow-2xl shadow-black",children:(0,b.jsxs)(e.CardContent,{className:"p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-emerald-500/80 bg-emerald-500/5 py-2 rounded-md border border-emerald-500/10",children:[(0,b.jsx)(n.Shield,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider",children:"Secure Connection"})]}),F&&(0,b.jsx)("div",{className:`p-3 rounded-md text-sm font-medium border ${"error"===F.type?"bg-red-900/20 border-red-900/50 text-red-400":"success"===F.type?"bg-emerald-900/20 border-emerald-900/50 text-emerald-400":"bg-blue-900/20 border-blue-900/50 text-blue-400"}`,children:F.text}),J?(0,b.jsxs)("form",{onSubmit:O,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(h.Label,{className:"text-xs font-semibold text-zinc-500 uppercase",children:"New Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.Input,{type:B?"text":"password",placeholder:"••••••••",className:"h-11 bg-black/50 border-white/10 text-white placeholder:text-zinc-700 focus:border-white/30 focus:ring-0 transition-all pr-10",value:x,onChange:a=>y(a.target.value),required:!0,minLength:8}),(0,b.jsx)("button",{type:"button",onClick:()=>C(!B),className:"absolute right-3 top-3 text-zinc-600 hover:text-white transition-colors",children:B?(0,b.jsx)(m.EyeOff,{className:"h-5 w-5"}):(0,b.jsx)(l.Eye,{className:"h-5 w-5"})})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(h.Label,{className:"text-xs font-semibold text-zinc-500 uppercase",children:"Confirm Password"}),(0,b.jsx)(g.Input,{type:B?"text":"password",placeholder:"••••••••",className:"h-11 bg-black/50 border-white/10 text-white placeholder:text-zinc-700 focus:border-white/30 focus:ring-0 transition-all",value:z,onChange:a=>A(a.target.value),required:!0,minLength:8})]}),(0,b.jsx)("p",{className:"text-xs text-zinc-600",children:"Password must be at least 8 characters long."}),(0,b.jsx)(f.Button,{type:"submit",disabled:D,className:"w-full h-12 bg-white hover:bg-zinc-200 text-black font-medium tracking-wide transition-all mt-4",children:D?(0,b.jsx)(k.Loader2,{className:"h-5 w-5 animate-spin"}):(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Lock,{className:"w-4 h-4"})," UPDATE PASSWORD"]})})]}):H?(0,b.jsxs)("div",{className:"text-center py-6 space-y-4",children:[(0,b.jsx)(r.CheckCircle,{className:"w-16 h-16 mx-auto text-emerald-500"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-white",children:"Check Your Email"}),(0,b.jsxs)("p",{className:"text-sm text-zinc-400",children:["We've sent a password reset link to ",(0,b.jsx)("span",{className:"text-white font-medium",children:v})]}),(0,b.jsxs)("p",{className:"text-xs text-zinc-600 pt-2",children:["Didn't receive the email? Check your spam folder or"," ",(0,b.jsx)("button",{onClick:()=>{I(!1),G(null)},className:"text-white hover:underline",children:"try again"})]})]})]}):(0,b.jsxs)("form",{onSubmit:N,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(h.Label,{className:"text-xs font-semibold text-zinc-500 uppercase",children:"Email Address"}),(0,b.jsx)(g.Input,{type:"email",placeholder:"name@example.com",className:"h-11 bg-black/50 border-white/10 text-white placeholder:text-zinc-700 focus:border-white/30 focus:ring-0 transition-all",value:v,onChange:a=>w(a.target.value),required:!0})]}),(0,b.jsx)("p",{className:"text-xs text-zinc-600",children:"Enter your email address and we'll send you a link to reset your password."}),(0,b.jsx)(f.Button,{type:"submit",disabled:D,className:"w-full h-12 bg-white hover:bg-zinc-200 text-black font-medium tracking-wide transition-all mt-4",children:D?(0,b.jsx)(k.Loader2,{className:"h-5 w-5 animate-spin"}):(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Mail,{className:"w-4 h-4"})," SEND RESET LINK"]})})]})]})}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-zinc-600",children:[(0,b.jsx)(n.Shield,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"Bank-Level 256-bit Encryption"})]}),(0,b.jsx)("p",{className:"text-[10px] text-zinc-700 font-mono",children:"VERSO PLATFORM // PASSWORD RECOVERY"})]})]})]})}function v(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center",children:(0,b.jsx)(k.Loader2,{className:"h-8 w-8 animate-spin text-white"})}),children:(0,b.jsx)(u,{})})}a.s(["default",()=>v])},142368,a=>{a.v(a=>Promise.resolve().then(()=>a(648232)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2f19d937._.js.map