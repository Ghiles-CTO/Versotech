{"version":3,"sources":["../../../../../versotech-portal/src/components/profile/entity-members-tab.tsx","../../../../../versotech-portal/src/components/kyc/KYCQuestionnaire.tsx","../../../../../versotech-portal/src/components/profile/profile-form.tsx","../../../../../versotech-portal/src/components/profile/kyc-upload-dialog.tsx","../../../../../versotech-portal/src/components/profile/kyc-documents-tab.tsx","../../../../../versotech-portal/src/components/profile/entity-kyc-documents.tsx","../../../../../versotech-portal/src/components/profile/profile-page-client.tsx","../../../../../versotech-portal/src/components/profile/profile-image-upload.tsx","../../../../../versotech-portal/src/components/profile/counterparty-entities-tab.tsx","../../../../../versotech-portal/node_modules/date-fns/isPast.js","../../../../../versotech-portal/src/components/profile/compliance-tab.tsx","../../../../../versotech-portal/src/components/kyc/wizard/WizardContext.tsx","../../../../../versotech-portal/src/components/kyc/wizard/WizardProgress.tsx","../../../../../versotech-portal/src/components/kyc/wizard/WizardNavigation.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step1AboutYou.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step2InvestmentType.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step3WellInformed.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step4Compliance.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step5USPerson.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step6OfferDetails.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step7USCompliance.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step8Suitability.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step9WaiverRisk.tsx","../../../../../versotech-portal/src/components/kyc/wizard/steps/Step10ReviewSign.tsx","../../../../../versotech-portal/src/components/kyc/wizard/KYCQuestionnaireWizard.tsx","../../../../../versotech-portal/src/components/profile/entity-detail-dialog.tsx","../../../../../versotech-portal/node_modules/lucide-react/src/icons/book-open.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Users, Plus, Edit, Trash2, UserPlus, ShieldCheck, Clock } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport { toast } from 'sonner'\r\n\r\ninterface EntityMember {\r\n  id: string\r\n  counterparty_entity_id: string\r\n  full_name: string\r\n  role: string\r\n  role_title?: string\r\n  email?: string\r\n  phone?: string\r\n  nationality?: string\r\n  id_type?: string\r\n  id_number?: string\r\n  id_expiry_date?: string\r\n  ownership_percentage?: number\r\n  is_beneficial_owner: boolean\r\n  kyc_status: string\r\n  is_active: boolean\r\n  created_at: string\r\n}\r\n\r\ninterface EntityMembersTabProps {\r\n  entityId: string\r\n  entityName: string\r\n}\r\n\r\nconst ROLE_OPTIONS = [\r\n  { value: 'director', label: 'Director' },\r\n  { value: 'shareholder', label: 'Shareholder' },\r\n  { value: 'beneficial_owner', label: 'Beneficial Owner' },\r\n  { value: 'trustee', label: 'Trustee' },\r\n  { value: 'beneficiary', label: 'Beneficiary' },\r\n  { value: 'managing_member', label: 'Managing Member' },\r\n  { value: 'general_partner', label: 'General Partner' },\r\n  { value: 'limited_partner', label: 'Limited Partner' },\r\n  { value: 'authorized_signatory', label: 'Authorized Signatory' },\r\n  { value: 'other', label: 'Other' },\r\n]\r\n\r\nconst ID_TYPE_OPTIONS = [\r\n  { value: 'passport', label: 'Passport' },\r\n  { value: 'national_id', label: 'National ID' },\r\n  { value: 'drivers_license', label: \"Driver's License\" },\r\n  { value: 'other', label: 'Other' },\r\n]\r\n\r\nexport function EntityMembersTab({ entityId, entityName }: EntityMembersTabProps) {\r\n  const [members, setMembers] = useState<EntityMember[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [dialogOpen, setDialogOpen] = useState(false)\r\n  const [editingMember, setEditingMember] = useState<EntityMember | null>(null)\r\n  const [saving, setSaving] = useState(false)\r\n  const [deleting, setDeleting] = useState<string | null>(null)\r\n\r\n  const [formData, setFormData] = useState({\r\n    full_name: '',\r\n    role: '',\r\n    role_title: '',\r\n    email: '',\r\n    phone: '',\r\n    nationality: '',\r\n    id_type: '',\r\n    id_number: '',\r\n    id_expiry_date: '',\r\n    ownership_percentage: '',\r\n    is_beneficial_owner: false,\r\n  })\r\n\r\n  useEffect(() => {\r\n    loadMembers()\r\n  }, [entityId])\r\n\r\n  const loadMembers = async () => {\r\n    try {\r\n      const response = await fetch(`/api/investors/me/counterparty-entities/${entityId}/members`)\r\n      if (!response.ok) throw new Error('Failed to load members')\r\n\r\n      const data = await response.json()\r\n      setMembers(data.members || [])\r\n    } catch (error) {\r\n      console.error('Error loading members:', error)\r\n      toast.error('Failed to load members')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      full_name: '',\r\n      role: '',\r\n      role_title: '',\r\n      email: '',\r\n      phone: '',\r\n      nationality: '',\r\n      id_type: '',\r\n      id_number: '',\r\n      id_expiry_date: '',\r\n      ownership_percentage: '',\r\n      is_beneficial_owner: false,\r\n    })\r\n    setEditingMember(null)\r\n  }\r\n\r\n  const handleOpenDialog = (member?: EntityMember) => {\r\n    if (member) {\r\n      setEditingMember(member)\r\n      setFormData({\r\n        full_name: member.full_name || '',\r\n        role: member.role || '',\r\n        role_title: member.role_title || '',\r\n        email: member.email || '',\r\n        phone: member.phone || '',\r\n        nationality: member.nationality || '',\r\n        id_type: member.id_type || '',\r\n        id_number: member.id_number || '',\r\n        id_expiry_date: member.id_expiry_date || '',\r\n        ownership_percentage: member.ownership_percentage?.toString() || '',\r\n        is_beneficial_owner: member.is_beneficial_owner || false,\r\n      })\r\n    } else {\r\n      resetForm()\r\n    }\r\n    setDialogOpen(true)\r\n  }\r\n\r\n  const handleSave = async () => {\r\n    if (!formData.full_name || !formData.role) {\r\n      toast.error('Please fill in all required fields')\r\n      return\r\n    }\r\n\r\n    setSaving(true)\r\n\r\n    try {\r\n      const payload = {\r\n        full_name: formData.full_name,\r\n        role: formData.role,\r\n        role_title: formData.role_title || null,\r\n        email: formData.email || null,\r\n        phone: formData.phone || null,\r\n        nationality: formData.nationality || null,\r\n        id_type: formData.id_type || null,\r\n        id_number: formData.id_number || null,\r\n        id_expiry_date: formData.id_expiry_date || null,\r\n        ownership_percentage: formData.ownership_percentage ? parseFloat(formData.ownership_percentage) : null,\r\n        is_beneficial_owner: formData.is_beneficial_owner,\r\n      }\r\n\r\n      const url = editingMember\r\n        ? `/api/investors/me/counterparty-entities/${entityId}/members/${editingMember.id}`\r\n        : `/api/investors/me/counterparty-entities/${entityId}/members`\r\n\r\n      const response = await fetch(url, {\r\n        method: editingMember ? 'PATCH' : 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Failed to save member')\r\n      }\r\n\r\n      toast.success(editingMember ? 'Member updated' : 'Member added')\r\n      setDialogOpen(false)\r\n      resetForm()\r\n      await loadMembers()\r\n    } catch (error: any) {\r\n      console.error('Save error:', error)\r\n      toast.error(error.message || 'Failed to save member')\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (memberId: string) => {\r\n    if (!confirm('Are you sure you want to remove this member?')) return\r\n\r\n    setDeleting(memberId)\r\n\r\n    try {\r\n      const response = await fetch(`/api/investors/me/counterparty-entities/${entityId}/members/${memberId}`, {\r\n        method: 'DELETE',\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Failed to remove member')\r\n      }\r\n\r\n      toast.success('Member removed')\r\n      await loadMembers()\r\n    } catch (error: any) {\r\n      console.error('Delete error:', error)\r\n      toast.error(error.message || 'Failed to remove member')\r\n    } finally {\r\n      setDeleting(null)\r\n    }\r\n  }\r\n\r\n  const getRoleBadge = (role: string) => {\r\n    const roleInfo = ROLE_OPTIONS.find(r => r.value === role)\r\n    return <Badge variant=\"outline\">{roleInfo?.label || role}</Badge>\r\n  }\r\n\r\n  const getKYCStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return <Badge className=\"bg-green-500\"><ShieldCheck className=\"w-3 h-3 mr-1\" />Approved</Badge>\r\n      case 'pending':\r\n        return <Badge className=\"bg-yellow-500\"><Clock className=\"w-3 h-3 mr-1\" />Pending</Badge>\r\n      default:\r\n        return <Badge variant=\"outline\">Not Submitted</Badge>\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-8\">\r\n        <div className=\"text-muted-foreground\">Loading members...</div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"text-lg font-medium flex items-center gap-2\">\r\n            <Users className=\"h-5 w-5\" />\r\n            Entity Members\r\n          </h3>\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Directors, trustees, partners, and beneficial owners\r\n          </p>\r\n        </div>\r\n        <Button onClick={() => handleOpenDialog()} size=\"sm\">\r\n          <UserPlus className=\"w-4 h-4 mr-2\" />\r\n          Add Member\r\n        </Button>\r\n      </div>\r\n\r\n      {members.length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"py-8 text-center\">\r\n            <Users className=\"w-10 h-10 mx-auto text-muted-foreground mb-3\" />\r\n            <p className=\"text-muted-foreground text-sm mb-3\">\r\n              No members added yet\r\n            </p>\r\n            <Button onClick={() => handleOpenDialog()} variant=\"outline\" size=\"sm\">\r\n              <UserPlus className=\"w-4 h-4 mr-2\" />\r\n              Add First Member\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>Name</TableHead>\r\n              <TableHead>Role</TableHead>\r\n              <TableHead>Ownership</TableHead>\r\n              <TableHead>KYC</TableHead>\r\n              <TableHead className=\"text-right\">Actions</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {members.map((member) => (\r\n              <TableRow key={member.id}>\r\n                <TableCell className=\"font-medium\">\r\n                  {member.full_name}\r\n                  {member.is_beneficial_owner && (\r\n                    <Badge variant=\"secondary\" className=\"ml-2 text-xs\">UBO</Badge>\r\n                  )}\r\n                </TableCell>\r\n                <TableCell>{getRoleBadge(member.role)}</TableCell>\r\n                <TableCell>\r\n                  {member.ownership_percentage ? `${member.ownership_percentage}%` : 'â€”'}\r\n                </TableCell>\r\n                <TableCell>{getKYCStatusBadge(member.kyc_status)}</TableCell>\r\n                <TableCell className=\"text-right\">\r\n                  <div className=\"flex items-center justify-end gap-1\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleOpenDialog(member)}\r\n                    >\r\n                      <Edit className=\"w-4 h-4\" />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleDelete(member.id)}\r\n                      disabled={deleting === member.id}\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      )}\r\n\r\n      {/* Add/Edit Member Dialog */}\r\n      <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\r\n        <DialogContent className=\"max-w-lg\">\r\n          <DialogHeader>\r\n            <DialogTitle>{editingMember ? 'Edit Member' : 'Add Member'}</DialogTitle>\r\n            <DialogDescription>\r\n              {editingMember ? 'Update member details' : `Add a member to ${entityName}`}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"full_name\">\r\n                  Full Name <span className=\"text-red-500\">*</span>\r\n                </Label>\r\n                <Input\r\n                  id=\"full_name\"\r\n                  value={formData.full_name}\r\n                  onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"role\">\r\n                  Role <span className=\"text-red-500\">*</span>\r\n                </Label>\r\n                <Select\r\n                  value={formData.role}\r\n                  onValueChange={(value) => setFormData({ ...formData, role: value })}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select role\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {ROLE_OPTIONS.map((option) => (\r\n                      <SelectItem key={option.value} value={option.value}>\r\n                        {option.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"email\">Email</Label>\r\n                <Input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  value={formData.email}\r\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"phone\">Phone</Label>\r\n                <Input\r\n                  id=\"phone\"\r\n                  value={formData.phone}\r\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"ownership_percentage\">Ownership %</Label>\r\n                <Input\r\n                  id=\"ownership_percentage\"\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  max=\"100\"\r\n                  value={formData.ownership_percentage}\r\n                  onChange={(e) => setFormData({ ...formData, ownership_percentage: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2 flex items-end\">\r\n                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={formData.is_beneficial_owner}\r\n                    onChange={(e) => setFormData({ ...formData, is_beneficial_owner: e.target.checked })}\r\n                    className=\"rounded\"\r\n                  />\r\n                  <span className=\"text-sm\">Beneficial Owner (UBO)</span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"id_type\">ID Type</Label>\r\n                <Select\r\n                  value={formData.id_type}\r\n                  onValueChange={(value) => setFormData({ ...formData, id_type: value })}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Select\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {ID_TYPE_OPTIONS.map((option) => (\r\n                      <SelectItem key={option.value} value={option.value}>\r\n                        {option.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"id_number\">ID Number</Label>\r\n                <Input\r\n                  id=\"id_number\"\r\n                  value={formData.id_number}\r\n                  onChange={(e) => setFormData({ ...formData, id_number: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"id_expiry_date\">ID Expiry</Label>\r\n                <Input\r\n                  id=\"id_expiry_date\"\r\n                  type=\"date\"\r\n                  value={formData.id_expiry_date}\r\n                  onChange={(e) => setFormData({ ...formData, id_expiry_date: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setDialogOpen(false)} disabled={saving}>\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleSave} disabled={saving}>\r\n              {saving ? 'Saving...' : editingMember ? 'Update' : 'Add Member'}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Loader2 } from 'lucide-react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { KYCQuestionnaireWizard } from './wizard/KYCQuestionnaireWizard'\r\nimport type { KYCQuestionnaireData } from './schemas/kyc-questionnaire-schema'\r\n\r\ninterface KYCQuestionnaireProps {\r\n  onComplete?: () => void\r\n}\r\n\r\nexport function KYCQuestionnaire({ onComplete }: KYCQuestionnaireProps) {\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [existingData, setExistingData] = useState<Partial<KYCQuestionnaireData> | null>(null)\r\n  const [submissionId, setSubmissionId] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    const loadExistingData = async () => {\r\n      setIsLoading(true)\r\n      try {\r\n        const profileResponse = await fetch('/api/investors/me/kyc-submissions')\r\n        if (profileResponse.ok) {\r\n          const profileData = await profileResponse.json()\r\n\r\n          // Find the latest questionnaire submission\r\n          const questionnaire = profileData.submissions?.find(\r\n            (s: any) => s.document_type === 'questionnaire' && s.metadata?.wizardVersion === '2.0'\r\n          )\r\n\r\n          if (questionnaire && questionnaire.metadata) {\r\n            setExistingData(questionnaire.metadata as Partial<KYCQuestionnaireData>)\r\n            setSubmissionId(questionnaire.id)\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load KYC data', error)\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n\r\n    loadExistingData()\r\n  }, [])\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"flex justify-center items-center min-h-[400px]\">\r\n          <div className=\"text-center space-y-4\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-muted-foreground\" />\r\n            <p className=\"text-muted-foreground\">Loading questionnaire...</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card className=\"border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-sm\">\r\n      <CardHeader className=\"border-b border-gray-100 dark:border-zinc-700 bg-gray-50/50 dark:bg-zinc-800/50\">\r\n        <CardTitle className=\"text-gray-900 dark:text-white\">Compliance Questionnaire</CardTitle>\r\n        <CardDescription className=\"text-gray-600 dark:text-gray-400\">\r\n          Complete the following compliance questionnaire to proceed with your KYC verification.\r\n          Your progress is saved automatically.\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"pt-6\">\r\n        <KYCQuestionnaireWizard\r\n          initialData={existingData || undefined}\r\n          submissionId={submissionId || undefined}\r\n          onComplete={onComplete}\r\n        />\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n","'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Loader2, Save } from 'lucide-react'\nimport { toast } from 'sonner'\n\ninterface ProfileFormProps {\n  userId: string\n  initialData: {\n    display_name: string | null\n    email: string | null\n    title: string | null\n    phone: string | null\n    office_location: string | null\n    bio: string | null\n    role: string\n  }\n  onUpdate: (updatedData: any) => void\n  showStaffFields?: boolean\n}\n\nexport function ProfileForm({\n  userId,\n  initialData,\n  onUpdate,\n  showStaffFields = false\n}: ProfileFormProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [formData, setFormData] = useState({\n    display_name: initialData.display_name || '',\n    title: initialData.title || '',\n    phone: initialData.phone || '',\n    office_location: initialData.office_location || '',\n    bio: initialData.bio || ''\n  })\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const { name, value } = e.target\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }))\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsSubmitting(true)\n\n    try {\n      const response = await fetch(`/api/profiles/${userId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to update profile')\n      }\n\n      toast.success('Profile updated successfully')\n      onUpdate(data.profile)\n    } catch (error: any) {\n      console.error('Error updating profile:', error)\n      toast.error('Failed to update profile', {\n        description: error.message\n      })\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const hasChanges = JSON.stringify(formData) !== JSON.stringify({\n    display_name: initialData.display_name || '',\n    title: initialData.title || '',\n    phone: initialData.phone || '',\n    office_location: initialData.office_location || '',\n    bio: initialData.bio || ''\n  })\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Profile Information</CardTitle>\n        <CardDescription>\n          Update your personal information and profile details\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"display_name\">\n              Display Name <span className=\"text-destructive\">*</span>\n            </Label>\n            <Input\n              id=\"display_name\"\n              name=\"display_name\"\n              value={formData.display_name}\n              onChange={handleChange}\n              required\n              placeholder=\"Enter your display name\"\n            />\n            <p className=\"text-xs text-gray-600\">\n              This is how your name will appear throughout the portal\n            </p>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Email Address</Label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              value={initialData.email || ''}\n              disabled\n            />\n            <p className=\"text-xs text-gray-600\">\n              Email cannot be changed here. Contact support to update your email.\n            </p>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Job Title / Position</Label>\n            <Input\n              id=\"title\"\n              name=\"title\"\n              value={formData.title}\n              onChange={handleChange}\n              placeholder=\"e.g., Portfolio Manager, Investment Director\"\n            />\n          </div>\n\n          {showStaffFields && (\n            <>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"phone\">Phone Number</Label>\n                <Input\n                  id=\"phone\"\n                  name=\"phone\"\n                  type=\"tel\"\n                  value={formData.phone}\n                  onChange={handleChange}\n                  placeholder=\"+1 (555) 123-4567\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"office_location\">Office Location</Label>\n                <Input\n                  id=\"office_location\"\n                  name=\"office_location\"\n                  value={formData.office_location}\n                  onChange={handleChange}\n                  placeholder=\"e.g., London Office, New York HQ\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"bio\">Bio / About</Label>\n                <Textarea\n                  id=\"bio\"\n                  name=\"bio\"\n                  value={formData.bio}\n                  onChange={handleChange}\n                  placeholder=\"Brief description about yourself, your expertise, and role...\"\n                  rows={4}\n                  className=\"resize-none\"\n                />\n                <p className=\"text-xs text-gray-600\">\n                  {formData.bio.length}/500 characters\n                </p>\n              </div>\n            </>\n          )}\n\n          <div className=\"pt-4 border-t\">\n            <Button\n              type=\"submit\"\n              disabled={isSubmitting || !hasChanges}\n              className=\"w-full sm:w-auto\"\n            >\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Saving Changes...\n                </>\n              ) : (\n                <>\n                  <Save className=\"mr-2 h-4 w-4\" />\n                  Save Changes\n                </>\n              )}\n            </Button>\n\n            {hasChanges && !isSubmitting && (\n              <p className=\"text-xs text-gray-600 mt-2\">\n                You have unsaved changes\n              </p>\n            )}\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n","'use client'\r\n\r\nimport { useState, useMemo, useEffect } from 'react'\r\nimport { toast } from 'sonner'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Upload, Loader2, Info, Building2, User, AlertCircle } from 'lucide-react'\r\nimport { getEntityDocumentTypes, getMemberDocumentTypes, getIndividualDocumentTypes } from '@/constants/kyc-document-types'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\n\r\ninterface Member {\r\n  id: string\r\n  full_name: string\r\n  role: string\r\n}\r\n\r\ninterface KYCUploadDialogProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  onUploadSuccess: () => void\r\n  entityId?: string | null\r\n  category?: 'individual' | 'entity' | 'both'\r\n  members?: Member[]\r\n  memberType?: 'investor' | 'counterparty'\r\n}\r\n\r\nexport function KYCUploadDialog({\r\n  open,\r\n  onOpenChange,\r\n  onUploadSuccess,\r\n  entityId = null,\r\n  category = 'both',\r\n  members = [],\r\n  memberType\r\n}: KYCUploadDialogProps) {\r\n  const [file, setFile] = useState<File | null>(null)\r\n  const [documentType, setDocumentType] = useState<string>('')\r\n  const [customLabel, setCustomLabel] = useState<string>('')\r\n  const [expiryDate, setExpiryDate] = useState<string>('')\r\n  const [notes, setNotes] = useState<string>('')\r\n  const [uploadTarget, setUploadTarget] = useState<string>('')\r\n  const [isUploading, setIsUploading] = useState(false)\r\n\r\n  const isEntityInvestor = category === 'entity'\r\n  const isForMember = uploadTarget && uploadTarget !== 'entity-level'\r\n  const hasMembers = members.length > 0\r\n\r\n  // Get document types based on selection\r\n  const availableDocumentTypes = useMemo(() => {\r\n    if (!isEntityInvestor) {\r\n      // Individual investor - simple personal docs\r\n      return getIndividualDocumentTypes()\r\n    }\r\n\r\n    if (isForMember) {\r\n      // Uploading for a specific member - personal ID docs\r\n      return getMemberDocumentTypes()\r\n    }\r\n\r\n    // Entity-level docs\r\n    return getEntityDocumentTypes()\r\n  }, [isEntityInvestor, isForMember])\r\n\r\n  // Reset document type when target changes\r\n  useEffect(() => {\r\n    setDocumentType('')\r\n  }, [uploadTarget])\r\n\r\n  // Reset form when dialog opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      setFile(null)\r\n      setDocumentType('')\r\n      setCustomLabel('')\r\n      setExpiryDate('')\r\n      setNotes('')\r\n      setUploadTarget('')\r\n    }\r\n  }, [open])\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selectedFile = e.target.files?.[0]\r\n    if (selectedFile) {\r\n      if (selectedFile.size > 10 * 1024 * 1024) {\r\n        toast.error('File too large', { description: 'Maximum file size is 10MB' })\r\n        return\r\n      }\r\n\r\n      const allowedTypes = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png', 'image/heic', 'image/webp']\r\n      if (!allowedTypes.includes(selectedFile.type)) {\r\n        toast.error('Invalid file type', { description: 'Only PDF and image files are allowed' })\r\n        return\r\n      }\r\n\r\n      setFile(selectedFile)\r\n    }\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!file) {\r\n      toast.error('Please select a file')\r\n      return\r\n    }\r\n\r\n    if (isEntityInvestor && !uploadTarget) {\r\n      toast.error('Please select who this document is for')\r\n      return\r\n    }\r\n\r\n    if (!documentType) {\r\n      toast.error('Please select a document type')\r\n      return\r\n    }\r\n\r\n    setIsUploading(true)\r\n\r\n    try {\r\n      const formData = new FormData()\r\n      formData.append('file', file)\r\n      formData.append('documentType', documentType === 'custom' ? customLabel.toLowerCase().replace(/\\s+/g, '_') : documentType)\r\n\r\n      if (documentType === 'custom' && customLabel) {\r\n        formData.append('customLabel', customLabel)\r\n      }\r\n\r\n      if (expiryDate) {\r\n        formData.append('expiryDate', expiryDate)\r\n      }\r\n\r\n      if (notes) {\r\n        formData.append('notes', notes)\r\n      }\r\n\r\n      if (entityId) {\r\n        formData.append('entityId', entityId)\r\n      }\r\n\r\n      // Add member ID if uploading for a specific member\r\n      if (isForMember && memberType) {\r\n        if (memberType === 'investor') {\r\n          formData.append('investorMemberId', uploadTarget)\r\n        } else if (memberType === 'counterparty') {\r\n          formData.append('counterpartyMemberId', uploadTarget)\r\n        }\r\n      }\r\n\r\n      const response = await fetch('/api/investors/me/documents/upload', {\r\n        method: 'POST',\r\n        body: formData\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to upload document')\r\n      }\r\n\r\n      toast.success('Document uploaded successfully')\r\n      onOpenChange(false)\r\n      onUploadSuccess()\r\n\r\n    } catch (error: any) {\r\n      console.error('Upload error:', error)\r\n      toast.error('Upload failed', { description: error.message })\r\n    } finally {\r\n      setIsUploading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[500px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>Upload KYC Document</DialogTitle>\r\n          <DialogDescription>\r\n            {isEntityInvestor\r\n              ? 'Upload entity documents or member ID documents'\r\n              : 'Upload your ID and proof of address'}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          {/* STEP 1: For entity investors - WHO is this document for? */}\r\n          {isEntityInvestor && (\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-base font-semibold\">\r\n                Step 1: Who is this document for?\r\n              </Label>\r\n              <Select value={uploadTarget} onValueChange={setUploadTarget}>\r\n                <SelectTrigger className={!uploadTarget ? 'border-amber-400 bg-amber-50' : ''}>\r\n                  <SelectValue placeholder=\"Select...\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {/* Entity option - always available */}\r\n                  <SelectItem value=\"entity-level\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Building2 className=\"h-4 w-4 text-blue-600\" />\r\n                      <span className=\"font-medium\">Entity (Company Documents)</span>\r\n                    </div>\r\n                  </SelectItem>\r\n\r\n                  {/* Member options - if members exist */}\r\n                  {hasMembers && members.map((member) => (\r\n                    <SelectItem key={member.id} value={member.id}>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <User className=\"h-4 w-4 text-green-600\" />\r\n                        <span>{member.full_name}</span>\r\n                        <span className=\"text-muted-foreground text-xs\">({member.role})</span>\r\n                      </div>\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n\r\n              {/* Helpful description */}\r\n              {uploadTarget === 'entity-level' && (\r\n                <p className=\"text-sm text-blue-600\">\r\n                  Entity docs: Incorporation Certificate, Memo & Articles, Registers, Bank Confirmation\r\n                </p>\r\n              )}\r\n              {isForMember && (\r\n                <p className=\"text-sm text-green-600\">\r\n                  Member docs: Passport/ID, Proof of Address\r\n                </p>\r\n              )}\r\n\r\n              {/* Alert if no members */}\r\n              {!hasMembers && (\r\n                <Alert className=\"border-amber-300 bg-amber-50\">\r\n                  <AlertCircle className=\"h-4 w-4 text-amber-600\" />\r\n                  <AlertDescription className=\"text-amber-800\">\r\n                    <strong>No members added yet.</strong> To upload ID documents for Directors/UBOs,\r\n                    first add them in the <span className=\"font-semibold\">Directors/UBOs tab</span>.\r\n                  </AlertDescription>\r\n                </Alert>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* STEP 2: Document Type */}\r\n          <div className=\"space-y-2\">\r\n            <Label className={isEntityInvestor ? \"text-base font-semibold\" : \"\"}>\r\n              {isEntityInvestor ? 'Step 2: Document Type' : 'Document Type'}\r\n            </Label>\r\n            <Select\r\n              value={documentType}\r\n              onValueChange={setDocumentType}\r\n              disabled={isEntityInvestor && !uploadTarget}\r\n            >\r\n              <SelectTrigger className={isEntityInvestor && !uploadTarget ? 'opacity-50' : ''}>\r\n                <SelectValue placeholder={isEntityInvestor && !uploadTarget ? 'First select who...' : 'Select document type...'} />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {availableDocumentTypes.map((type) => (\r\n                  <SelectItem key={type.value} value={type.value}>\r\n                    {type.label}\r\n                  </SelectItem>\r\n                ))}\r\n                <SelectItem value=\"custom\">Other (Custom)</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n            {documentType && documentType !== 'custom' && (\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {availableDocumentTypes.find(t => t.value === documentType)?.description}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Custom label if \"Other\" selected */}\r\n          {documentType === 'custom' && (\r\n            <div className=\"space-y-2\">\r\n              <Label>Custom Document Name</Label>\r\n              <Input\r\n                value={customLabel}\r\n                onChange={(e) => setCustomLabel(e.target.value)}\r\n                placeholder=\"e.g., Trust Agreement\"\r\n                required\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* File Upload */}\r\n          <div className=\"space-y-2\">\r\n            <Label>File</Label>\r\n            <Input\r\n              type=\"file\"\r\n              accept=\".pdf,.jpg,.jpeg,.png,.heic,.webp\"\r\n              onChange={handleFileChange}\r\n              required\r\n            />\r\n            {file && (\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Selected: {file.name} ({(file.size / 1024 / 1024).toFixed(2)} MB)\r\n              </p>\r\n            )}\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Max 10MB. PDF, JPEG, PNG, HEIC, WEBP accepted.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Expiry Date */}\r\n          <div className=\"space-y-2\">\r\n            <Label>Expiry Date (Optional)</Label>\r\n            <Input\r\n              type=\"date\"\r\n              value={expiryDate}\r\n              onChange={(e) => setExpiryDate(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Notes */}\r\n          <div className=\"space-y-2\">\r\n            <Label>Notes (Optional)</Label>\r\n            <Textarea\r\n              value={notes}\r\n              onChange={(e) => setNotes(e.target.value)}\r\n              placeholder=\"Any additional info...\"\r\n              rows={2}\r\n            />\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isUploading}>\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isUploading || !file || !documentType || (isEntityInvestor && !uploadTarget) || (documentType === 'custom' && !customLabel.trim())}\r\n            >\r\n              {isUploading ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  Uploading...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Upload className=\"mr-2 h-4 w-4\" />\r\n                  Upload\r\n                </>\r\n              )}\r\n            </Button>\r\n          </DialogFooter>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Upload, CheckCircle, XCircle, Clock, Download, AlertCircle, Info, Loader2, FileText, User } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table'\r\nimport { toast } from 'sonner'\r\nimport { KYCUploadDialog } from './kyc-upload-dialog'\r\nimport { getDocumentTypeLabel } from '@/constants/kyc-document-types'\r\n\r\ninterface KYCSubmission {\r\n  id: string\r\n  document_type: string\r\n  custom_label?: string | null\r\n  status: string\r\n  submitted_at: string\r\n  created_at: string\r\n  expiry_date?: string | null\r\n  version: number\r\n  metadata?: any\r\n  rejection_reason?: string | null\r\n  document?: {\r\n    id: string\r\n    name: string\r\n    file_key: string\r\n    file_size_bytes: number\r\n    mime_type: string\r\n    created_at: string\r\n  }\r\n  reviewer?: {\r\n    display_name?: string\r\n    email?: string\r\n  } | null\r\n  investor_member?: {\r\n    id: string\r\n    full_name: string\r\n    role: string\r\n  } | null\r\n}\r\n\r\ninterface InvestorMember {\r\n  id: string\r\n  full_name: string\r\n  role: string\r\n}\r\n\r\nexport function KYCDocumentsTab() {\r\n  const [submissions, setSubmissions] = useState<KYCSubmission[]>([])\r\n  const [investorMembers, setInvestorMembers] = useState<InvestorMember[]>([])\r\n  const [isEntityInvestor, setIsEntityInvestor] = useState(false)\r\n  const [loading, setLoading] = useState(true)\r\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false)\r\n  const [downloadingId, setDownloadingId] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    loadSubmissions()\r\n  }, [])\r\n\r\n  const loadSubmissions = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const response = await fetch('/api/investors/me/kyc-submissions')\r\n      if (!response.ok) throw new Error('Failed to load KYC submissions')\r\n\r\n      const data = await response.json()\r\n      setSubmissions(data.submissions || [])\r\n      setInvestorMembers(data.investor_members || [])\r\n      setIsEntityInvestor(data.is_entity_investor || false)\r\n    } catch (error: any) {\r\n      console.error('Error loading KYC submissions:', error)\r\n      toast.error('Failed to load KYC documents', {\r\n        description: error.message\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleDownload = async (documentId: string, fileName: string) => {\r\n    setDownloadingId(documentId)\r\n    try {\r\n      const response = await fetch(`/api/documents/${documentId}/download`)\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to download document')\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = fileName\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast.success('Download started')\r\n    } catch (error: any) {\r\n      console.error('Download error:', error)\r\n      toast.error('Download failed', {\r\n        description: error.message\r\n      })\r\n    } finally {\r\n      setDownloadingId(null)\r\n    }\r\n  }\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return (\r\n          <Badge variant=\"default\" className=\"bg-emerald-500/20 text-emerald-700 border-emerald-500/30\">\r\n            <CheckCircle className=\"mr-1 h-3 w-3\" />\r\n            Approved\r\n          </Badge>\r\n        )\r\n      case 'pending':\r\n        return (\r\n          <Badge variant=\"secondary\" className=\"bg-amber-500/20 text-amber-700 border-amber-500/30\">\r\n            <Clock className=\"mr-1 h-3 w-3\" />\r\n            Pending Review\r\n          </Badge>\r\n        )\r\n      case 'draft':\r\n        return (\r\n          <Badge variant=\"outline\" className=\"bg-slate-500/10 text-slate-600 border-slate-500/30\">\r\n            <Clock className=\"mr-1 h-3 w-3\" />\r\n            Draft (Not Submitted)\r\n          </Badge>\r\n        )\r\n      case 'rejected':\r\n        return (\r\n          <Badge variant=\"destructive\" className=\"bg-rose-500/20 text-rose-700 border-rose-500/30\">\r\n            <XCircle className=\"mr-1 h-3 w-3\" />\r\n            Rejected\r\n          </Badge>\r\n        )\r\n      case 'expired':\r\n        return (\r\n          <Badge variant=\"outline\" className=\"bg-gray-500/20 text-gray-700 border-gray-500/30\">\r\n            <AlertCircle className=\"mr-1 h-3 w-3\" />\r\n            Expired\r\n          </Badge>\r\n        )\r\n      case 'under_review':\r\n        return (\r\n          <Badge variant=\"secondary\" className=\"bg-blue-500/20 text-blue-700 border-blue-500/30\">\r\n            <Clock className=\"mr-1 h-3 w-3\" />\r\n            Under Review\r\n          </Badge>\r\n        )\r\n      default:\r\n        return <Badge variant=\"outline\">{status}</Badge>\r\n    }\r\n  }\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric'\r\n    })\r\n  }\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes < 1024) return bytes + ' B'\r\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB'\r\n    return (bytes / (1024 * 1024)).toFixed(1) + ' MB'\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-gray-400\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <CardTitle>KYC Documents</CardTitle>\r\n              <CardDescription>\r\n                Upload your required KYC verification documents\r\n              </CardDescription>\r\n            </div>\r\n            <Button onClick={() => setUploadDialogOpen(true)}>\r\n              <Upload className=\"mr-2 h-4 w-4\" />\r\n              Upload Document\r\n            </Button>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Required Documents Breakdown */}\r\n          {isEntityInvestor ? (\r\n            <div className=\"grid gap-4 md:grid-cols-2\">\r\n              <div className=\"p-4 border rounded-lg bg-blue-50/50\">\r\n                <h4 className=\"font-medium text-sm text-blue-900 mb-2\">Entity Documents</h4>\r\n                <ul className=\"text-sm text-blue-800 space-y-1\">\r\n                  <li>â€¢ Incorporation Certificate</li>\r\n                  <li>â€¢ Memo & Articles</li>\r\n                  <li>â€¢ Register of Directors</li>\r\n                  <li>â€¢ Register of Members/Shareholders</li>\r\n                  <li>â€¢ Register of UBOs</li>\r\n                  <li>â€¢ Bank Confirmation Letter</li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"p-4 border rounded-lg bg-green-50/50\">\r\n                <h4 className=\"font-medium text-sm text-green-900 mb-2\">For Each Director/UBO</h4>\r\n                <ul className=\"text-sm text-green-800 space-y-1\">\r\n                  <li>â€¢ Passport / ID</li>\r\n                  <li>â€¢ Proof of Address (less than 3 months)</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-4 border rounded-lg bg-slate-50\">\r\n              <h4 className=\"font-medium text-sm text-slate-900 mb-2\">Required Documents</h4>\r\n              <ul className=\"text-sm text-slate-700 space-y-1\">\r\n                <li>â€¢ Passport / ID</li>\r\n                <li>â€¢ Proof of Address (utility bill or bank statement, less than 3 months)</li>\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          {submissions.length === 0 ? (\r\n            <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\">\r\n              <FileText className=\"h-10 w-10 mx-auto text-gray-400 mb-3\" />\r\n              <p className=\"text-gray-600 mb-2\">No documents uploaded yet</p>\r\n              <Button onClick={() => setUploadDialogOpen(true)} variant=\"outline\" size=\"sm\">\r\n                <Upload className=\"mr-2 h-4 w-4\" />\r\n                Upload Document\r\n              </Button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"border rounded-lg overflow-hidden\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Document Type</TableHead>\r\n                    {isEntityInvestor && <TableHead>Member</TableHead>}\r\n                    <TableHead>Status</TableHead>\r\n                    <TableHead>Uploaded</TableHead>\r\n                    <TableHead>Expiry</TableHead>\r\n                    <TableHead>File</TableHead>\r\n                    <TableHead>Actions</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {submissions.map((submission) => (\r\n                    <TableRow key={submission.id}>\r\n                      <TableCell>\r\n                        <div className=\"flex flex-col\">\r\n                          <span className=\"font-medium text-gray-900\">\r\n                            {getDocumentTypeLabel(submission.document_type, submission.custom_label)}\r\n                          </span>\r\n                          {submission.version > 1 && (\r\n                            <span className=\"text-xs text-gray-500\">\r\n                              Version {submission.version}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </TableCell>\r\n                      {isEntityInvestor && (\r\n                        <TableCell>\r\n                          {submission.investor_member ? (\r\n                            <div className=\"flex items-center gap-1.5\">\r\n                              <User className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                              <span className=\"text-sm\">{submission.investor_member.full_name}</span>\r\n                            </div>\r\n                          ) : (\r\n                            <span className=\"text-sm text-muted-foreground\">â€”</span>\r\n                          )}\r\n                        </TableCell>\r\n                      )}\r\n                      <TableCell>\r\n                        <div className=\"flex flex-col gap-2\">\r\n                          {getStatusBadge(submission.status)}\r\n                          {submission.status === 'rejected' && submission.rejection_reason && (\r\n                            <p className=\"text-xs text-rose-600 max-w-xs\">\r\n                              {submission.rejection_reason}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      </TableCell>\r\n                      <TableCell className=\"text-gray-600\">\r\n                        {formatDate(submission.created_at)}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-gray-600\">\r\n                        {submission.expiry_date ? formatDate(submission.expiry_date) : 'â€”'}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {submission.document && (\r\n                          <div className=\"flex flex-col\">\r\n                            <span className=\"text-sm text-gray-900 truncate max-w-[200px]\">\r\n                              {submission.document.name}\r\n                            </span>\r\n                            <span className=\"text-xs text-gray-500\">\r\n                              {formatFileSize(submission.document.file_size_bytes)}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {submission.document && (\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleDownload(submission.document!.id, submission.document!.name)}\r\n                            disabled={downloadingId === submission.document.id}\r\n                          >\r\n                            {downloadingId === submission.document.id ? (\r\n                              <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                            ) : (\r\n                              <Download className=\"h-4 w-4\" />\r\n                            )}\r\n                          </Button>\r\n                        )}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <KYCUploadDialog\r\n        open={uploadDialogOpen}\r\n        onOpenChange={setUploadDialogOpen}\r\n        onUploadSuccess={loadSubmissions}\r\n        category={isEntityInvestor ? 'entity' : 'individual'}\r\n        members={isEntityInvestor ? investorMembers : []}\r\n        memberType={isEntityInvestor ? 'investor' : undefined}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport { toast } from 'sonner'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\nimport { Upload, FileText, Download, Loader2, AlertCircle, CheckCircle2, Clock, Info, User } from 'lucide-react'\r\nimport { KYCUploadDialog } from './kyc-upload-dialog'\r\nimport { getDocumentTypeLabel } from '@/constants/kyc-document-types'\r\n\r\ninterface EntityKYCDocumentsProps {\r\n  entityId: string\r\n  entityName: string\r\n}\r\n\r\ninterface KYCSubmission {\r\n  id: string\r\n  document_type: string\r\n  custom_label?: string | null\r\n  status: string\r\n  created_at: string\r\n  expiry_date?: string | null\r\n  version: number\r\n  metadata?: any\r\n  document?: {\r\n    id: string\r\n    name: string\r\n    file_key: string\r\n    file_size_bytes: number\r\n    mime_type: string\r\n    created_at: string\r\n  }\r\n  reviewer?: {\r\n    display_name?: string\r\n    email?: string\r\n  } | null\r\n  counterparty_member?: {\r\n    id: string\r\n    full_name: string\r\n    role: string\r\n  } | null\r\n}\r\n\r\ninterface EntityMember {\r\n  id: string\r\n  full_name: string\r\n  role: string\r\n}\r\n\r\nexport function EntityKYCDocuments({ entityId, entityName }: EntityKYCDocumentsProps) {\r\n  const [submissions, setSubmissions] = useState<KYCSubmission[]>([])\r\n  const [entityMembers, setEntityMembers] = useState<EntityMember[]>([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [isUploadDialogOpen, setIsUploadDialogOpen] = useState(false)\r\n  const [downloadingId, setDownloadingId] = useState<string | null>(null)\r\n\r\n  const fetchSubmissions = useCallback(async () => {\r\n    setIsLoading(true)\r\n    try {\r\n      const response = await fetch(`/api/investors/me/counterparty-entities/${entityId}/kyc-submissions`)\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch KYC submissions')\r\n      }\r\n\r\n      const data = await response.json()\r\n      setSubmissions(data.submissions || [])\r\n      setEntityMembers(data.members || [])\r\n    } catch (error: any) {\r\n      console.error('Error fetching entity KYC submissions:', error)\r\n      toast.error('Failed to load KYC documents', {\r\n        description: error.message\r\n      })\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }, [entityId])\r\n\r\n  useEffect(() => {\r\n    fetchSubmissions()\r\n  }, [entityId, fetchSubmissions])\r\n\r\n  const handleDownload = async (documentId: string, fileName: string) => {\r\n    setDownloadingId(documentId)\r\n    try {\r\n      const response = await fetch(`/api/documents/${documentId}/download`)\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to download document')\r\n      }\r\n\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = fileName\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast.success('Download started')\r\n    } catch (error: any) {\r\n      console.error('Download error:', error)\r\n      toast.error('Download failed', {\r\n        description: error.message\r\n      })\r\n    } finally {\r\n      setDownloadingId(null)\r\n    }\r\n  }\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return (\r\n          <Badge variant=\"default\" className=\"bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 border-emerald-500/30\">\r\n            <CheckCircle2 className=\"mr-1 h-3 w-3\" />\r\n            Approved\r\n          </Badge>\r\n        )\r\n      case 'pending':\r\n        return (\r\n          <Badge variant=\"secondary\" className=\"bg-amber-500/20 text-amber-700 dark:text-amber-300 border-amber-500/30\">\r\n            <Clock className=\"mr-1 h-3 w-3\" />\r\n            Pending Review\r\n          </Badge>\r\n        )\r\n      case 'rejected':\r\n        return (\r\n          <Badge variant=\"destructive\" className=\"bg-rose-500/20 text-rose-700 dark:text-rose-300 border-rose-500/30\">\r\n            <AlertCircle className=\"mr-1 h-3 w-3\" />\r\n            Rejected\r\n          </Badge>\r\n        )\r\n      case 'expired':\r\n        return (\r\n          <Badge variant=\"outline\" className=\"bg-gray-500/20 text-gray-600 dark:text-gray-300 border-gray-500/30\">\r\n            <AlertCircle className=\"mr-1 h-3 w-3\" />\r\n            Expired\r\n          </Badge>\r\n        )\r\n      default:\r\n        return <Badge variant=\"outline\">{status}</Badge>\r\n    }\r\n  }\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric'\r\n    })\r\n  }\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes < 1024) return bytes + ' B'\r\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB'\r\n    return (bytes / (1024 * 1024)).toFixed(1) + ' MB'\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-foreground\">{entityName} - KYC Documents</h3>\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Upload and manage KYC documents for this entity\r\n          </p>\r\n        </div>\r\n        <Button onClick={() => setIsUploadDialogOpen(true)}>\r\n          <Upload className=\"mr-2 h-4 w-4\" />\r\n          Upload Document\r\n        </Button>\r\n      </div>\r\n\r\n      <Alert>\r\n        <Info className=\"h-4 w-4\" />\r\n        <AlertDescription className=\"text-sm\">\r\n          Required: NDA/NDNC, Incorporation Certificate, Memo &amp; Articles, Register of Members, Register of Directors, Bank Confirmation.\r\n          For each member/director: ID/Passport and Utility Bill (less than 3 months old).\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      {isLoading ? (\r\n        <div className=\"flex items-center justify-center p-12\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n        </div>\r\n      ) : submissions.length === 0 ? (\r\n        <Card className=\"border-dashed border-border\">\r\n          <CardContent className=\"flex flex-col items-center justify-center p-12\">\r\n            <FileText className=\"h-12 w-12 text-muted-foreground mb-4\" />\r\n            <p className=\"text-muted-foreground mb-2\">No KYC documents uploaded yet</p>\r\n            <p className=\"text-sm text-muted-foreground mb-4\">\r\n              Upload entity documents and ID/Utility Bill for each member/director\r\n            </p>\r\n            <Button onClick={() => setIsUploadDialogOpen(true)}>\r\n              <Upload className=\"mr-2 h-4 w-4\" />\r\n              Upload First Document\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <Card>\r\n          <CardContent className=\"p-0\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>Document Type</TableHead>\r\n                  {entityMembers.length > 0 && <TableHead>Member</TableHead>}\r\n                  <TableHead>Status</TableHead>\r\n                  <TableHead>Uploaded</TableHead>\r\n                  <TableHead>Expiry</TableHead>\r\n                  <TableHead>File</TableHead>\r\n                  <TableHead>Actions</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {submissions.map((submission) => (\r\n                  <TableRow key={submission.id}>\r\n                    <TableCell>\r\n                      <div className=\"flex flex-col\">\r\n                        <span className=\"font-medium text-foreground\">\r\n                          {getDocumentTypeLabel(submission.document_type, submission.custom_label)}\r\n                        </span>\r\n                        {submission.version > 1 && (\r\n                          <span className=\"text-xs text-muted-foreground\">\r\n                            Version {submission.version}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </TableCell>\r\n                    {entityMembers.length > 0 && (\r\n                      <TableCell>\r\n                        {submission.counterparty_member ? (\r\n                          <div className=\"flex items-center gap-1.5\">\r\n                            <User className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                            <span className=\"text-sm text-muted-foreground\">{submission.counterparty_member.full_name}</span>\r\n                          </div>\r\n                        ) : (\r\n                          <span className=\"text-sm text-muted-foreground\">â€”</span>\r\n                        )}\r\n                      </TableCell>\r\n                    )}\r\n                    <TableCell>{getStatusBadge(submission.status)}</TableCell>\r\n                    <TableCell className=\"text-muted-foreground\">\r\n                      {formatDate(submission.created_at)}\r\n                    </TableCell>\r\n                    <TableCell className=\"text-muted-foreground\">\r\n                      {submission.expiry_date ? formatDate(submission.expiry_date) : 'â€”'}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {submission.document && (\r\n                        <div className=\"flex flex-col\">\r\n                          <span className=\"text-sm text-muted-foreground truncate max-w-[200px]\">\r\n                            {submission.document.name}\r\n                          </span>\r\n                          <span className=\"text-xs text-muted-foreground\">\r\n                            {formatFileSize(submission.document.file_size_bytes)}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {submission.document && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => handleDownload(submission.document!.id, submission.document!.name)}\r\n                          disabled={downloadingId === submission.document.id}\r\n                        >\r\n                          {downloadingId === submission.document.id ? (\r\n                            <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                          ) : (\r\n                            <Download className=\"h-4 w-4\" />\r\n                          )}\r\n                        </Button>\r\n                      )}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      <KYCUploadDialog\r\n        open={isUploadDialogOpen}\r\n        onOpenChange={setIsUploadDialogOpen}\r\n        onUploadSuccess={fetchSubmissions}\r\n        entityId={entityId}\r\n        category=\"entity\"\r\n        members={entityMembers}\r\n        memberType=\"counterparty\"\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { ProfileImageUpload } from '@/components/profile/profile-image-upload'\r\nimport { ProfileForm } from '@/components/profile/profile-form'\r\nimport { PasswordChangeForm } from '@/components/profile/password-change-form'\r\nimport { PreferencesEditor } from '@/components/profile/preferences-editor'\r\nimport { KYCDocumentsTab } from '@/components/profile/kyc-documents-tab'\r\nimport { CounterpartyEntitiesTab } from '@/components/profile/counterparty-entities-tab'\r\nimport { ComplianceTab } from '@/components/profile/compliance-tab'\r\nimport { KYCQuestionnaire } from '@/components/kyc/KYCQuestionnaire'\r\nimport { GenericEntityMembersTab } from '@/components/profile/generic-entity-members-tab'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  User,\r\n  Lock,\r\n  Settings,\r\n  Briefcase,\r\n  Building2,\r\n  Bell,\r\n  ShieldCheck,\r\n  ShieldAlert,\r\n  Users,\r\n  FileSignature,\r\n  AlertCircle,\r\n  CheckCircle2,\r\n  Clock,\r\n  Mail,\r\n  Phone,\r\n  MapPin,\r\n  Edit,\r\n  Shield,\r\n  Globe,\r\n} from 'lucide-react'\r\nimport { MembersManagementTab } from '@/components/members/members-management-tab'\r\nimport { SignatureSpecimenTab } from '@/components/profile/signature-specimen-tab'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { IndividualKycDisplay, EntityKYCEditDialog, EntityAddressEditDialog, EntityInfoEditDialog } from '@/components/shared'\r\n\r\n// Types for investor entity data passed from server\r\ntype InvestorInfo = {\r\n  id: string\r\n  legal_name: string\r\n  display_name: string | null\r\n  type: string | null\r\n  status: string | null\r\n  kyc_status: string | null\r\n  onboarding_status: string | null\r\n  country: string | null\r\n  country_of_incorporation: string | null\r\n  tax_residency: string | null\r\n  email: string | null\r\n  phone: string | null\r\n  website: string | null\r\n  registered_address: string | null\r\n  city: string | null\r\n  representative_name: string | null\r\n  representative_title: string | null\r\n  is_professional_investor: boolean | null\r\n  is_qualified_purchaser: boolean | null\r\n  aml_risk_rating: string | null\r\n  logo_url: string | null\r\n  // Individual KYC fields\r\n  first_name: string | null\r\n  middle_name: string | null\r\n  last_name: string | null\r\n  name_suffix: string | null\r\n  date_of_birth: string | null\r\n  country_of_birth: string | null\r\n  nationality: string | null\r\n  // Phone numbers\r\n  phone_mobile: string | null\r\n  phone_office: string | null\r\n  // Residential address (for individuals)\r\n  residential_street: string | null\r\n  residential_line_2: string | null\r\n  residential_city: string | null\r\n  residential_state: string | null\r\n  residential_postal_code: string | null\r\n  residential_country: string | null\r\n  // Registered address (for entities)\r\n  registered_address_line_1: string | null\r\n  registered_address_line_2: string | null\r\n  registered_city: string | null\r\n  registered_state: string | null\r\n  registered_postal_code: string | null\r\n  registered_country: string | null\r\n  // US Tax compliance\r\n  is_us_citizen: boolean | null\r\n  is_us_taxpayer: boolean | null\r\n  us_taxpayer_id: string | null\r\n  country_of_tax_residency: string | null\r\n  // ID Document\r\n  id_type: string | null\r\n  id_number: string | null\r\n  id_issue_date: string | null\r\n  id_expiry_date: string | null\r\n  id_issuing_country: string | null\r\n  // Additional KYC fields\r\n  middle_initial?: string | null\r\n  proof_of_address_date?: string | null\r\n  proof_of_address_expiry?: string | null\r\n  tax_id_number?: string | null\r\n}\r\n\r\ntype InvestorUserInfo = {\r\n  role: string\r\n  is_primary: boolean\r\n  can_sign: boolean\r\n}\r\n\r\ninterface ProfilePageClientProps {\r\n  userEmail?: string\r\n  profile: {\r\n    id: string\r\n    email: string | null\r\n    display_name: string | null\r\n    full_name?: string | null\r\n    title: string | null\r\n    avatar_url: string | null\r\n    phone: string | null\r\n    office_location: string | null\r\n    bio: string | null\r\n    role: string\r\n    created_at: string\r\n  }\r\n  variant?: 'investor' | 'staff'\r\n  defaultTab?: string\r\n  investorInfo?: InvestorInfo | null\r\n  investorUserInfo?: InvestorUserInfo | null\r\n}\r\n\r\n// Status badge configurations\r\nconst STATUS_BADGES: Record<string, { label: string; className: string; icon: typeof CheckCircle2 }> = {\r\n  active: { label: 'Active', className: 'bg-emerald-100 text-emerald-800 border-emerald-200', icon: CheckCircle2 },\r\n  pending: { label: 'Pending', className: 'bg-amber-100 text-amber-800 border-amber-200', icon: Clock },\r\n  inactive: { label: 'Inactive', className: 'bg-gray-100 text-gray-800 border-gray-200', icon: AlertCircle },\r\n  suspended: { label: 'Suspended', className: 'bg-red-100 text-red-800 border-red-200', icon: AlertCircle },\r\n}\r\n\r\nconst KYC_BADGES: Record<string, { label: string; className: string }> = {\r\n  approved: { label: 'KYC Approved', className: 'bg-emerald-100 text-emerald-800 border-emerald-200' },\r\n  pending: { label: 'KYC Pending', className: 'bg-amber-100 text-amber-800 border-amber-200' },\r\n  rejected: { label: 'KYC Rejected', className: 'bg-red-100 text-red-800 border-red-200' },\r\n  not_started: { label: 'KYC Not Started', className: 'bg-gray-100 text-gray-800 border-gray-200' },\r\n}\r\n\r\nexport function ProfilePageClient({\r\n  userEmail,\r\n  profile: initialProfile,\r\n  variant = 'investor',\r\n  defaultTab = 'overview',\r\n  investorInfo,\r\n  investorUserInfo\r\n}: ProfilePageClientProps) {\r\n  const [profile, setProfile] = useState(initialProfile)\r\n  const [showKycDialog, setShowKycDialog] = useState(false)\r\n  const [showAddressDialog, setShowAddressDialog] = useState(false)\r\n  const [showEntityInfoDialog, setShowEntityInfoDialog] = useState(false)\r\n  const isStaff = variant === 'staff'\r\n\r\n  // Use server-passed investorInfo instead of client-side fetching\r\n  const hasInvestorEntity = !!investorInfo\r\n  const isIndividual = investorInfo?.type === 'individual'\r\n  const isEntity = hasInvestorEntity && investorInfo?.type !== 'individual'\r\n\r\n  // Debug logging on client\r\n  console.log('[ProfilePageClient] Props received:', {\r\n    variant,\r\n    isStaff,\r\n    hasInvestorEntity,\r\n    isIndividual,\r\n    isEntity,\r\n    investorInfo: investorInfo ? { id: investorInfo.id, legal_name: investorInfo.legal_name, type: investorInfo.type } : null,\r\n  })\r\n\r\n  const handleAvatarUpdate = (newAvatarUrl: string) => {\r\n    setProfile(prev => ({\r\n      ...prev,\r\n      avatar_url: newAvatarUrl\r\n    }))\r\n  }\r\n\r\n  const handleProfileUpdate = (updatedProfile: any) => {\r\n    setProfile(prev => ({\r\n      ...prev,\r\n      ...updatedProfile\r\n    }))\r\n  }\r\n\r\n  // Get status badges for investor\r\n  const statusBadge = STATUS_BADGES[investorInfo?.status || 'pending'] || STATUS_BADGES.pending\r\n  const StatusIcon = statusBadge.icon\r\n  const kycBadge = KYC_BADGES[investorInfo?.kyc_status || 'not_started'] || KYC_BADGES.not_started\r\n\r\n  // Staff layout - keep the original grid layout\r\n  if (isStaff) {\r\n    return (\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        {/* Left Column - Avatar */}\r\n        <div className=\"lg:col-span-1\">\r\n          <div className=\"sticky top-6\">\r\n            <ProfileImageUpload\r\n              currentAvatarUrl={profile.avatar_url}\r\n              userName={profile.display_name || profile.email || 'Staff User'}\r\n              onAvatarUpdate={handleAvatarUpdate}\r\n            />\r\n\r\n            {/* Quick Info Card - Staff Only */}\r\n            <div className=\"mt-6 p-4 border border-border rounded-lg bg-muted/50 space-y-3\">\r\n              <div>\r\n                <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\r\n                  Contact\r\n                </p>\r\n                <p className=\"text-sm mt-1 text-foreground\">{profile.email}</p>\r\n                {profile.phone && (\r\n                  <p className=\"text-sm text-muted-foreground\">{profile.phone}</p>\r\n                )}\r\n              </div>\r\n\r\n              {profile.office_location && (\r\n                <div>\r\n                  <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\r\n                    Office\r\n                  </p>\r\n                  <p className=\"text-sm mt-1 text-foreground\">{profile.office_location}</p>\r\n                </div>\r\n              )}\r\n\r\n              {profile.title && (\r\n                <div>\r\n                  <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\r\n                    Title\r\n                  </p>\r\n                  <p className=\"text-sm mt-1 text-foreground\">{profile.title}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Column - Tabs */}\r\n        <div className=\"lg:col-span-2\">\r\n          <Tabs defaultValue=\"profile\" className=\"w-full\">\r\n            <TabsList className=\"grid w-full grid-cols-3\">\r\n              <TabsTrigger value=\"profile\">\r\n                <Briefcase className=\"h-4 w-4 mr-2\" />\r\n                Profile\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"security\">\r\n                <Lock className=\"h-4 w-4 mr-2\" />\r\n                Security\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"preferences\">\r\n                <Bell className=\"h-4 w-4 mr-2\" />\r\n                Notifications\r\n              </TabsTrigger>\r\n            </TabsList>\r\n\r\n            <TabsContent value=\"profile\" className=\"mt-6\">\r\n              <ProfileForm\r\n                userId={profile.id}\r\n                initialData={profile}\r\n                onUpdate={handleProfileUpdate}\r\n                showStaffFields={true}\r\n              />\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"security\" className=\"mt-6\">\r\n              <PasswordChangeForm />\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"preferences\" className=\"mt-6\">\r\n              <PreferencesEditor variant=\"staff\" />\r\n            </TabsContent>\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Investor layout - full-width like Partner profile\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header with Avatar and Status */}\r\n      <div className=\"flex items-start justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          {/* Avatar */}\r\n          <ProfileImageUpload\r\n            currentAvatarUrl={profile.avatar_url}\r\n            userName={profile.display_name || profile.email || 'User'}\r\n            onAvatarUpdate={handleAvatarUpdate}\r\n            compact\r\n          />\r\n\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-foreground\">\r\n              {hasInvestorEntity\r\n                ? (investorInfo!.display_name || investorInfo!.legal_name)\r\n                : 'My Profile'\r\n              }\r\n            </h1>\r\n            <p className=\"text-muted-foreground mt-1\">\r\n              {hasInvestorEntity\r\n                ? 'Manage your investor profile, documents, and team'\r\n                : 'Manage your personal profile settings'\r\n              }\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Badges */}\r\n        {hasInvestorEntity && (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Badge className={statusBadge.className}>\r\n              <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n              {statusBadge.label}\r\n            </Badge>\r\n            <Badge className={kycBadge.className}>\r\n              {kycBadge.label}\r\n            </Badge>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <Tabs defaultValue={defaultTab} className=\"space-y-6\">\r\n        <TabsList>\r\n          <TabsTrigger value=\"overview\" className=\"flex items-center gap-2\">\r\n            <Building2 className=\"h-4 w-4\" />\r\n            Overview\r\n          </TabsTrigger>\r\n          {hasInvestorEntity && (\r\n            <>\r\n              <TabsTrigger value=\"kyc\" className=\"flex items-center gap-2\">\r\n                <ShieldCheck className=\"h-4 w-4\" />\r\n                KYC\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"compliance\" className=\"flex items-center gap-2\">\r\n                <ShieldAlert className=\"h-4 w-4\" />\r\n                Compliance\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"members\" className=\"flex items-center gap-2\">\r\n                <Users className=\"h-4 w-4\" />\r\n                Team\r\n              </TabsTrigger>\r\n              {isEntity && (\r\n                <TabsTrigger value=\"entity-members\" className=\"flex items-center gap-2\">\r\n                  <Users className=\"h-4 w-4\" />\r\n                  Directors/UBOs\r\n                </TabsTrigger>\r\n              )}\r\n              <TabsTrigger value=\"entities\" className=\"flex items-center gap-2\">\r\n                <Building2 className=\"h-4 w-4\" />\r\n                Entities\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"signature\" className=\"flex items-center gap-2\">\r\n                <FileSignature className=\"h-4 w-4\" />\r\n                Signature\r\n              </TabsTrigger>\r\n            </>\r\n          )}\r\n          <TabsTrigger value=\"security\" className=\"flex items-center gap-2\">\r\n            <Lock className=\"h-4 w-4\" />\r\n            Security\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"preferences\" className=\"flex items-center gap-2\">\r\n            <Settings className=\"h-4 w-4\" />\r\n            Preferences\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* Overview Tab */}\r\n        <TabsContent value=\"overview\" className=\"space-y-6\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {/* Your Info Card */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <User className=\"h-5 w-5\" />\r\n                  Your Information\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Your account details within this investor entity\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"text-muted-foreground\">Full Name</Label>\r\n                  <div className=\"font-medium\">\r\n                    {profile.display_name || 'Not set'}\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"text-muted-foreground\">Email</Label>\r\n                  <div className=\"font-medium flex items-center gap-2\">\r\n                    <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n                    {profile.email || userEmail}\r\n                  </div>\r\n                </div>\r\n                {hasInvestorEntity && (\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"text-muted-foreground\">Role</Label>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Badge variant=\"outline\" className=\"capitalize\">\r\n                        {investorUserInfo?.role || 'member'}\r\n                      </Badge>\r\n                      {investorUserInfo?.is_primary && (\r\n                        <Badge variant=\"secondary\">Primary Contact</Badge>\r\n                      )}\r\n                      {investorUserInfo?.can_sign && (\r\n                        <Badge className=\"bg-blue-100 text-blue-800 border-blue-200\">\r\n                          Signatory\r\n                        </Badge>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Investor Entity Info - Only for ENTITY type, not individual */}\r\n            {isEntity && investorInfo && (\r\n              <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between\">\r\n                  <div>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Building2 className=\"h-5 w-5\" />\r\n                      Entity Information\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                      Organization details\r\n                    </CardDescription>\r\n                  </div>\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => setShowEntityInfoDialog(true)}>\r\n                    <Edit className=\"h-4 w-4 mr-2\" />\r\n                    Edit\r\n                  </Button>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"text-muted-foreground\">Display Name</Label>\r\n                    <div className=\"font-medium\">\r\n                      {investorInfo.display_name || '-'}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"text-muted-foreground\">Legal Name</Label>\r\n                    <div className=\"font-medium\">{investorInfo.legal_name || '-'}</div>\r\n                  </div>\r\n                  {investorInfo.country_of_incorporation && (\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-muted-foreground\">Country of Incorporation</Label>\r\n                      <div className=\"font-medium\">{investorInfo.country_of_incorporation}</div>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"text-muted-foreground\">Type</Label>\r\n                    <Badge variant=\"outline\" className=\"capitalize\">\r\n                      {(investorInfo.type || 'entity').replace(/_/g, ' ')}\r\n                    </Badge>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n\r\n          {/* Contact & Address for ENTITY investors only (individual investors show this in IndividualKycDisplay) */}\r\n          {isEntity && (\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n              {/* Contact Info */}\r\n              <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between\">\r\n                  <div>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Phone className=\"h-5 w-5\" />\r\n                      Contact Information\r\n                    </CardTitle>\r\n                  </div>\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => setShowAddressDialog(true)}>\r\n                    <Edit className=\"h-4 w-4 mr-2\" />\r\n                    Edit\r\n                  </Button>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  {investorInfo!.email && (\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-muted-foreground\">Email</Label>\r\n                      <div className=\"font-medium flex items-center gap-2\">\r\n                        <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n                        {investorInfo!.email}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {investorInfo!.phone && (\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-muted-foreground\">Phone</Label>\r\n                      <div className=\"font-medium flex items-center gap-2\">\r\n                        <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                        {investorInfo!.phone}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {investorInfo!.phone_mobile && (\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-muted-foreground\">Mobile</Label>\r\n                      <div className=\"font-medium flex items-center gap-2\">\r\n                        <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                        {investorInfo!.phone_mobile}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {investorInfo!.website && (\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-muted-foreground\">Website</Label>\r\n                      <div className=\"font-medium flex items-center gap-2\">\r\n                        <Globe className=\"h-4 w-4 text-muted-foreground\" />\r\n                        <a href={investorInfo!.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline\">\r\n                          {investorInfo!.website}\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {!investorInfo!.email && !investorInfo!.phone && !investorInfo!.phone_mobile && !investorInfo!.website && (\r\n                    <p className=\"text-muted-foreground text-sm\">No contact information available</p>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n\r\n              {/* Address */}\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <MapPin className=\"h-5 w-5\" />\r\n                    {isEntity ? 'Registered Address' : 'Address'}\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  {isEntity ? (\r\n                    // Entity address display - use registered_* columns\r\n                    investorInfo!.registered_address_line_1 ? (\r\n                      <>\r\n                        <div className=\"font-medium\">\r\n                          {investorInfo!.registered_address_line_1}\r\n                        </div>\r\n                        {investorInfo!.registered_address_line_2 && (\r\n                          <div className=\"text-muted-foreground\">{investorInfo!.registered_address_line_2}</div>\r\n                        )}\r\n                        {(investorInfo!.registered_city || investorInfo!.registered_state || investorInfo!.registered_postal_code || investorInfo!.registered_country) && (\r\n                          <div className=\"text-muted-foreground\">\r\n                            {[\r\n                              investorInfo!.registered_city,\r\n                              investorInfo!.registered_state,\r\n                              investorInfo!.registered_postal_code,\r\n                              investorInfo!.registered_country\r\n                            ].filter(Boolean).join(', ')}\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    ) : (\r\n                      <p className=\"text-muted-foreground text-sm\">No address information available</p>\r\n                    )\r\n                  ) : (\r\n                    // Individual address display - use residential_* columns\r\n                    investorInfo!.residential_street ? (\r\n                      <>\r\n                        <div className=\"font-medium\">\r\n                          {investorInfo!.residential_street}\r\n                        </div>\r\n                        {investorInfo!.residential_line_2 && (\r\n                          <div className=\"text-muted-foreground\">{investorInfo!.residential_line_2}</div>\r\n                        )}\r\n                        {(investorInfo!.residential_city || investorInfo!.residential_state || investorInfo!.residential_postal_code || investorInfo!.residential_country) && (\r\n                          <div className=\"text-muted-foreground\">\r\n                            {[\r\n                              investorInfo!.residential_city,\r\n                              investorInfo!.residential_state,\r\n                              investorInfo!.residential_postal_code,\r\n                              investorInfo!.residential_country\r\n                            ].filter(Boolean).join(', ')}\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    ) : (\r\n                      <p className=\"text-muted-foreground text-sm\">No address information available</p>\r\n                    )\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          )}\r\n\r\n          {/* Individual KYC Info Display */}\r\n          {isIndividual && investorInfo && (\r\n            <IndividualKycDisplay\r\n              data={{\r\n                first_name: investorInfo.first_name,\r\n                middle_name: investorInfo.middle_name,\r\n                last_name: investorInfo.last_name,\r\n                name_suffix: investorInfo.name_suffix,\r\n                date_of_birth: investorInfo.date_of_birth,\r\n                country_of_birth: investorInfo.country_of_birth,\r\n                nationality: investorInfo.nationality,\r\n                email: investorInfo.email,\r\n                phone_mobile: investorInfo.phone_mobile,\r\n                phone_office: investorInfo.phone_office,\r\n                residential_street: investorInfo.residential_street,\r\n                residential_city: investorInfo.residential_city,\r\n                residential_state: investorInfo.residential_state,\r\n                residential_postal_code: investorInfo.residential_postal_code,\r\n                residential_country: investorInfo.residential_country,\r\n                is_us_citizen: investorInfo.is_us_citizen,\r\n                is_us_taxpayer: investorInfo.is_us_taxpayer,\r\n                us_taxpayer_id: investorInfo.us_taxpayer_id,\r\n                country_of_tax_residency: investorInfo.country_of_tax_residency,\r\n                id_type: investorInfo.id_type,\r\n                id_number: investorInfo.id_number,\r\n                id_issue_date: investorInfo.id_issue_date,\r\n                id_expiry_date: investorInfo.id_expiry_date,\r\n                id_issuing_country: investorInfo.id_issuing_country,\r\n              }}\r\n              onEdit={() => setShowKycDialog(true)}\r\n              title=\"Personal KYC Information\"\r\n            />\r\n          )}\r\n\r\n          {/* If no investor entity, show basic profile edit */}\r\n          {!hasInvestorEntity && (\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Settings className=\"h-5 w-5\" />\r\n                  Edit Profile\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Update your profile information\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ProfileForm\r\n                  userId={profile.id}\r\n                  initialData={profile}\r\n                  onUpdate={handleProfileUpdate}\r\n                  showStaffFields={false}\r\n                />\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </TabsContent>\r\n\r\n        {/* KYC Tab */}\r\n        {hasInvestorEntity && (\r\n          <TabsContent value=\"kyc\" className=\"space-y-6\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold tracking-tight\">KYC Documents</h2>\r\n              <p className=\"text-muted-foreground\">\r\n                Upload required identity and verification documents.\r\n              </p>\r\n            </div>\r\n\r\n            {/* KYC Documents */}\r\n            <KYCDocumentsTab />\r\n          </TabsContent>\r\n        )}\r\n\r\n        {/* Compliance Tab */}\r\n        {hasInvestorEntity && (\r\n          <TabsContent value=\"compliance\" className=\"space-y-6\">\r\n            <ComplianceTab />\r\n\r\n            {/* Compliance Questionnaire */}\r\n            <div className=\"pt-6 border-t\">\r\n              <KYCQuestionnaire />\r\n            </div>\r\n          </TabsContent>\r\n        )}\r\n\r\n        {/* Members Tab - Portal Team Members (ALL investors) */}\r\n        {hasInvestorEntity && investorInfo && (\r\n          <TabsContent value=\"members\" className=\"space-y-4\">\r\n            <MembersManagementTab\r\n              entityType=\"investor\"\r\n              entityId={investorInfo.id}\r\n              entityName={investorInfo.display_name || investorInfo.legal_name}\r\n              showSignatoryOption={isEntity}\r\n              canManageMembers={investorUserInfo?.role === 'admin' || investorUserInfo?.is_primary}\r\n            />\r\n          </TabsContent>\r\n        )}\r\n\r\n        {/* Directors/UBOs Tab - Entity Members for KYC (only for entity type investors) */}\r\n        {isEntity && investorInfo && (\r\n          <TabsContent value=\"entity-members\" className=\"space-y-4\">\r\n            <GenericEntityMembersTab\r\n              entityType=\"investor\"\r\n              entityId={investorInfo.id}\r\n              entityName={investorInfo.display_name || investorInfo.legal_name}\r\n              apiEndpoint=\"/api/investors/me/members\"\r\n              canManage={investorUserInfo?.role === 'admin' || investorUserInfo?.is_primary}\r\n              title=\"Directors, UBOs & Signatories\"\r\n              description=\"Manage directors, beneficial owners (>25% ownership), and authorized signatories with full KYC information\"\r\n            />\r\n          </TabsContent>\r\n        )}\r\n\r\n        {/* Entities Tab */}\r\n        {hasInvestorEntity && (\r\n          <TabsContent value=\"entities\" className=\"space-y-4\">\r\n            <CounterpartyEntitiesTab />\r\n          </TabsContent>\r\n        )}\r\n\r\n        {/* Signature Tab */}\r\n        {hasInvestorEntity && (\r\n          <TabsContent value=\"signature\" className=\"space-y-6\">\r\n            {!investorUserInfo?.can_sign ? (\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <FileSignature className=\"h-5 w-5\" />\r\n                    Signature Specimen\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    You do not have signing permissions for this investor entity\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"border border-dashed border-muted rounded-lg py-8 px-4 text-center\">\r\n                    <AlertCircle className=\"h-10 w-10 text-muted-foreground mx-auto mb-3\" />\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      Signing permissions are required to upload a signature specimen.\r\n                      Contact your entity administrator for access.\r\n                    </p>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            ) : (\r\n              <SignatureSpecimenTab\r\n                entityType=\"investor\"\r\n                entityId={investorInfo?.id}\r\n              />\r\n            )}\r\n          </TabsContent>\r\n        )}\r\n\r\n        {/* Security Tab */}\r\n        <TabsContent value=\"security\" className=\"space-y-4\">\r\n          <PasswordChangeForm />\r\n        </TabsContent>\r\n\r\n        {/* Preferences Tab */}\r\n        <TabsContent value=\"preferences\" className=\"space-y-4\">\r\n          <PreferencesEditor variant=\"investor\" />\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      {/* KYC Edit Dialog for Individual Investors */}\r\n      {isIndividual && investorInfo && (\r\n        <EntityKYCEditDialog\r\n          open={showKycDialog}\r\n          onOpenChange={setShowKycDialog}\r\n          entityType=\"investor\"\r\n          entityId={investorInfo.id}\r\n          entityName={investorInfo.display_name || investorInfo.legal_name}\r\n          initialData={{\r\n            first_name: investorInfo.first_name ?? undefined,\r\n            middle_name: investorInfo.middle_name ?? undefined,\r\n            last_name: investorInfo.last_name ?? undefined,\r\n            name_suffix: investorInfo.name_suffix ?? undefined,\r\n            date_of_birth: investorInfo.date_of_birth ?? undefined,\r\n            nationality: investorInfo.nationality ?? undefined,\r\n            country_of_birth: investorInfo.country_of_birth ?? undefined,\r\n            phone_mobile: investorInfo.phone_mobile ?? undefined,\r\n            phone_office: investorInfo.phone_office ?? undefined,\r\n            is_us_citizen: investorInfo.is_us_citizen === true,\r\n            is_us_taxpayer: investorInfo.is_us_taxpayer === true,\r\n            us_taxpayer_id: investorInfo.us_taxpayer_id ?? undefined,\r\n            country_of_tax_residency: investorInfo.country_of_tax_residency ?? undefined,\r\n            id_type: investorInfo.id_type ?? undefined,\r\n            id_number: investorInfo.id_number ?? undefined,\r\n            id_issue_date: investorInfo.id_issue_date ?? undefined,\r\n            id_expiry_date: investorInfo.id_expiry_date ?? undefined,\r\n            id_issuing_country: investorInfo.id_issuing_country ?? undefined,\r\n            residential_street: investorInfo.residential_street ?? undefined,\r\n            residential_city: investorInfo.residential_city ?? undefined,\r\n            residential_state: investorInfo.residential_state ?? undefined,\r\n            residential_postal_code: investorInfo.residential_postal_code ?? undefined,\r\n            residential_country: investorInfo.residential_country ?? undefined,\r\n          }}\r\n          apiEndpoint=\"/api/investors/me\"\r\n          onSuccess={() => window.location.reload()}\r\n        />\r\n      )}\r\n\r\n      {/* Address/Contact Edit Dialog */}\r\n      {hasInvestorEntity && investorInfo && (\r\n        <EntityAddressEditDialog\r\n          open={showAddressDialog}\r\n          onOpenChange={setShowAddressDialog}\r\n          entityType=\"investor\"\r\n          entityName={investorInfo.display_name || investorInfo.legal_name}\r\n          initialData={isEntity ? {\r\n            // Entity address mapping - use registered_* columns\r\n            email: investorInfo.email ?? undefined,\r\n            phone: investorInfo.phone ?? undefined,\r\n            phone_mobile: investorInfo.phone_mobile ?? undefined,\r\n            phone_office: investorInfo.phone_office ?? undefined,\r\n            website: investorInfo.website ?? undefined,\r\n            address_line_1: investorInfo.registered_address_line_1 ?? undefined,\r\n            address_line_2: investorInfo.registered_address_line_2 ?? undefined,\r\n            city: investorInfo.registered_city ?? undefined,\r\n            state_province: investorInfo.registered_state ?? undefined,\r\n            postal_code: investorInfo.registered_postal_code ?? undefined,\r\n            country: investorInfo.registered_country ?? undefined,\r\n          } : {\r\n            // Individual address mapping - use residential_* columns\r\n            email: investorInfo.email ?? undefined,\r\n            phone: investorInfo.phone ?? undefined,\r\n            phone_mobile: investorInfo.phone_mobile ?? undefined,\r\n            phone_office: investorInfo.phone_office ?? undefined,\r\n            website: investorInfo.website ?? undefined,\r\n            address_line_1: investorInfo.residential_street ?? undefined,\r\n            address_line_2: investorInfo.residential_line_2 ?? undefined,\r\n            city: investorInfo.residential_city ?? undefined,\r\n            state_province: investorInfo.residential_state ?? undefined,\r\n            postal_code: investorInfo.residential_postal_code ?? undefined,\r\n            country: investorInfo.residential_country ?? undefined,\r\n          }}\r\n          apiEndpoint=\"/api/investors/me\"\r\n          onSuccess={() => window.location.reload()}\r\n        />\r\n      )}\r\n\r\n      {/* Entity Info Edit Dialog (display name, legal name) */}\r\n      {isEntity && investorInfo && (\r\n        <EntityInfoEditDialog\r\n          open={showEntityInfoDialog}\r\n          onOpenChange={setShowEntityInfoDialog}\r\n          initialData={{\r\n            display_name: investorInfo.display_name,\r\n            legal_name: investorInfo.legal_name,\r\n            country_of_incorporation: investorInfo.country_of_incorporation,\r\n          }}\r\n          onSuccess={() => window.location.reload()}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","'use client'\n\nimport { useState, useRef } from 'react'\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\nimport { Button } from '@/components/ui/button'\nimport { Camera, Trash2, Upload, Loader2 } from 'lucide-react'\nimport { toast } from 'sonner'\n\ninterface ProfileImageUploadProps {\n  currentAvatarUrl?: string | null\n  userName: string\n  onAvatarUpdate: (newAvatarUrl: string) => void\n  /** Compact mode shows a smaller avatar (64x64) with minimal UI for inline header usage */\n  compact?: boolean\n}\n\nexport function ProfileImageUpload({\n  currentAvatarUrl,\n  userName,\n  onAvatarUpdate,\n  compact = false\n}: ProfileImageUploadProps) {\n  const [isUploading, setIsUploading] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null)\n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  const getInitials = (name: string | null | undefined) => {\n    if (!name) return 'U'\n    return name\n      .split(' ')\n      .map(part => part[0])\n      .filter(Boolean)\n      .join('')\n      .toUpperCase()\n      .slice(0, 2) || 'U'\n  }\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    // Validate file type\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp']\n    if (!allowedTypes.includes(file.type)) {\n      toast.error('Invalid file type', {\n        description: 'Please select a JPEG, PNG, GIF, or WEBP image'\n      })\n      return\n    }\n\n    // Validate file size (2MB max)\n    const maxSize = 2 * 1024 * 1024 // 2MB\n    if (file.size > maxSize) {\n      toast.error('File too large', {\n        description: 'Maximum file size is 2MB'\n      })\n      return\n    }\n\n    // Create preview\n    const reader = new FileReader()\n    reader.onloadend = () => {\n      setPreviewUrl(reader.result as string)\n    }\n    reader.readAsDataURL(file)\n\n    // Upload file\n    handleUpload(file)\n  }\n\n  const handleUpload = async (file: File) => {\n    setIsUploading(true)\n\n    try {\n      const formData = new FormData()\n      formData.append('avatar', file)\n\n      const response = await fetch('/api/profiles/avatar', {\n        method: 'POST',\n        body: formData\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to upload avatar')\n      }\n\n      toast.success('Avatar updated successfully')\n      onAvatarUpdate(data.avatar_url)\n      setPreviewUrl(null)\n    } catch (error: any) {\n      console.error('Error uploading avatar:', error)\n      toast.error('Failed to upload avatar', {\n        description: error.message\n      })\n      setPreviewUrl(null)\n    } finally {\n      setIsUploading(false)\n      if (fileInputRef.current) {\n        fileInputRef.current.value = ''\n      }\n    }\n  }\n\n  const handleDelete = async () => {\n    if (!currentAvatarUrl) return\n\n    setIsDeleting(true)\n\n    try {\n      const response = await fetch('/api/profiles/avatar', {\n        method: 'DELETE'\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to delete avatar')\n      }\n\n      toast.success('Avatar removed successfully')\n      onAvatarUpdate('')\n      setPreviewUrl(null)\n    } catch (error: any) {\n      console.error('Error deleting avatar:', error)\n      toast.error('Failed to delete avatar', {\n        description: error.message\n      })\n    } finally {\n      setIsDeleting(false)\n    }\n  }\n\n  const displayUrl = previewUrl || currentAvatarUrl\n\n  // Compact mode: smaller avatar for inline header usage\n  if (compact) {\n    return (\n      <div className=\"relative\">\n        <Avatar className=\"h-16 w-16 border-2 border-background shadow-md\">\n          <AvatarImage src={displayUrl || undefined} alt={userName} />\n          <AvatarFallback className=\"text-lg\">\n            {getInitials(userName)}\n          </AvatarFallback>\n        </Avatar>\n\n        {isUploading && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full\">\n            <Loader2 className=\"h-5 w-5 animate-spin text-primary\" />\n          </div>\n        )}\n\n        <button\n          type=\"button\"\n          onClick={() => fileInputRef.current?.click()}\n          disabled={isUploading || isDeleting}\n          className=\"absolute -bottom-1 -right-1 p-1.5 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-blue-700\"\n        >\n          <Camera className=\"h-3 w-3\" />\n        </button>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\"image/jpeg,image/png,image/gif,image/webp\"\n          className=\"hidden\"\n          onChange={handleFileSelect}\n          disabled={isUploading || isDeleting}\n        />\n      </div>\n    )\n  }\n\n  // Full mode: large avatar with buttons and instructions\n  return (\n    <div className=\"flex flex-col items-center gap-4\">\n      <div className=\"relative\">\n        <Avatar className=\"h-32 w-32 border-4 border-background shadow-lg\">\n          <AvatarImage src={displayUrl || undefined} alt={userName} />\n          <AvatarFallback className=\"text-2xl\">\n            {getInitials(userName)}\n          </AvatarFallback>\n        </Avatar>\n\n        {isUploading && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-background/80 rounded-full\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n          </div>\n        )}\n\n        <button\n          type=\"button\"\n          onClick={() => fileInputRef.current?.click()}\n          disabled={isUploading || isDeleting}\n          className=\"absolute bottom-0 right-0 p-2 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-blue-700\"\n        >\n          <Camera className=\"h-4 w-4\" />\n        </button>\n      </div>\n\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/jpeg,image/png,image/gif,image/webp\"\n        className=\"hidden\"\n        onChange={handleFileSelect}\n        disabled={isUploading || isDeleting}\n      />\n\n      <div className=\"flex gap-2\">\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => fileInputRef.current?.click()}\n          disabled={isUploading || isDeleting}\n        >\n          {isUploading ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Uploading...\n            </>\n          ) : (\n            <>\n              <Upload className=\"mr-2 h-4 w-4\" />\n              Change Photo\n            </>\n          )}\n        </Button>\n\n        {currentAvatarUrl && (\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleDelete}\n            disabled={isUploading || isDeleting}\n            className=\"hover:bg-red-50 hover:text-red-600 hover:border-red-200\"\n          >\n            {isDeleting ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Removing...\n              </>\n            ) : (\n              <>\n                <Trash2 className=\"mr-2 h-4 w-4\" />\n                Remove\n              </>\n            )}\n          </Button>\n        )}\n      </div>\n\n      <p className=\"text-xs text-gray-600 text-center max-w-xs\">\n        Recommended: Square image, at least 200Ã—200px\n        <br />\n        Max size: 2MB â€¢ Formats: JPEG, PNG, GIF, WEBP\n      </p>\n    </div>\n  )\n}\n","'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Building2, Plus, Edit, Trash2, CheckCircle, XCircle, Clock, Users, Loader2, MapPin, Calendar, Hash, FileText, User } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { toast } from 'sonner'\r\nimport { EntityFormDialog } from './entity-form-dialog'\r\nimport { EntityDetailDialog } from './entity-detail-dialog'\r\n\r\ninterface CounterpartyEntity {\r\n  id: string\r\n  entity_type: string\r\n  legal_name: string\r\n  registration_number?: string\r\n  jurisdiction?: string\r\n  tax_id?: string\r\n  formation_date?: string\r\n  registered_address?: {\r\n    street?: string\r\n    city?: string\r\n    state?: string\r\n    postal_code?: string\r\n    country?: string\r\n  }\r\n  representative_name?: string\r\n  representative_title?: string\r\n  representative_email?: string\r\n  representative_phone?: string\r\n  kyc_status?: string\r\n  kyc_completed_at?: string\r\n  kyc_expiry_date?: string\r\n  notes?: string\r\n  is_active: boolean\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\nexport function CounterpartyEntitiesTab() {\r\n  const [entities, setEntities] = useState<CounterpartyEntity[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [formDialogOpen, setFormDialogOpen] = useState(false)\r\n  const [detailDialogOpen, setDetailDialogOpen] = useState(false)\r\n  const [selectedEntity, setSelectedEntity] = useState<CounterpartyEntity | null>(null)\r\n  const [deleting, setDeleting] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    loadEntities()\r\n  }, [])\r\n\r\n  const loadEntities = async () => {\r\n    try {\r\n      const response = await fetch('/api/investors/me/counterparty-entities')\r\n      if (!response.ok) throw new Error('Failed to load entities')\r\n\r\n      const data = await response.json()\r\n      setEntities(data.entities || [])\r\n    } catch (error) {\r\n      console.error('Error loading entities:', error)\r\n      toast.error('Failed to load entities')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleCreate = () => {\r\n    setSelectedEntity(null)\r\n    setFormDialogOpen(true)\r\n  }\r\n\r\n  const handleEdit = (entity: CounterpartyEntity) => {\r\n    setSelectedEntity(entity)\r\n    setFormDialogOpen(true)\r\n  }\r\n\r\n  const handleViewDetails = (entity: CounterpartyEntity) => {\r\n    setSelectedEntity(entity)\r\n    setDetailDialogOpen(true)\r\n  }\r\n\r\n  const handleDelete = async (entityId: string) => {\r\n    if (!confirm('Are you sure you want to delete this entity? This action cannot be undone.')) {\r\n      return\r\n    }\r\n\r\n    setDeleting(entityId)\r\n\r\n    try {\r\n      const response = await fetch(`/api/investors/me/counterparty-entities/${entityId}`, {\r\n        method: 'DELETE'\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Delete failed')\r\n      }\r\n\r\n      toast.success('Entity deleted successfully')\r\n      await loadEntities()\r\n    } catch (error: any) {\r\n      console.error('Delete error:', error)\r\n      toast.error(error.message || 'Failed to delete entity')\r\n    } finally {\r\n      setDeleting(null)\r\n    }\r\n  }\r\n\r\n  const handleFormSuccess = async () => {\r\n    setFormDialogOpen(false)\r\n    setSelectedEntity(null)\r\n    await loadEntities()\r\n  }\r\n\r\n  const getEntityTypeLabel = (type: string) => {\r\n    const typeLabels: Record<string, string> = {\r\n      trust: 'Trust',\r\n      llc: 'LLC',\r\n      partnership: 'Partnership',\r\n      family_office: 'Family Office',\r\n      law_firm: 'Law Firm',\r\n      investment_bank: 'Investment Bank',\r\n      fund: 'Fund',\r\n      corporation: 'Corporation',\r\n      other: 'Other'\r\n    }\r\n    return typeLabels[type] || type\r\n  }\r\n\r\n  const getKYCStatusBadge = (status?: string) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return (\r\n          <Badge className=\"bg-emerald-500/15 text-emerald-700 border-emerald-500/30 px-3 py-1\">\r\n            <CheckCircle className=\"w-3.5 h-3.5 mr-1.5\" />\r\n            Verified\r\n          </Badge>\r\n        )\r\n      case 'pending':\r\n        return (\r\n          <Badge className=\"bg-amber-500/15 text-amber-700 border-amber-500/30 px-3 py-1\">\r\n            <Clock className=\"w-3.5 h-3.5 mr-1.5\" />\r\n            Pending Review\r\n          </Badge>\r\n        )\r\n      case 'rejected':\r\n        return (\r\n          <Badge className=\"bg-rose-500/15 text-rose-700 border-rose-500/30 px-3 py-1\">\r\n            <XCircle className=\"w-3.5 h-3.5 mr-1.5\" />\r\n            Rejected\r\n          </Badge>\r\n        )\r\n      case 'expired':\r\n        return (\r\n          <Badge variant=\"outline\" className=\"text-orange-600 border-orange-400 px-3 py-1\">\r\n            Expired\r\n          </Badge>\r\n        )\r\n      default:\r\n        return (\r\n          <Badge variant=\"outline\" className=\"text-slate-500 border-slate-300 px-3 py-1\">\r\n            Not Submitted\r\n          </Badge>\r\n        )\r\n    }\r\n  }\r\n\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return 'â€”'\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric'\r\n    })\r\n  }\r\n\r\n  const formatAddress = (address?: CounterpartyEntity['registered_address']) => {\r\n    if (!address) return null\r\n    const parts = [\r\n      address.street,\r\n      address.city,\r\n      address.state,\r\n      address.postal_code,\r\n      address.country\r\n    ].filter(Boolean)\r\n    return parts.length > 0 ? parts.join(', ') : null\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-16\">\r\n        <Loader2 className=\"w-6 h-6 animate-spin text-slate-400\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header Section */}\r\n      <Card>\r\n        <CardHeader className=\"pb-4\">\r\n          <div className=\"flex items-start justify-between gap-4\">\r\n            <div className=\"space-y-1\">\r\n              <CardTitle className=\"text-xl\">Counterparty Entities</CardTitle>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Manage legal entities you invest through (trusts, LLCs, partnerships, etc.)\r\n              </p>\r\n            </div>\r\n            <Button onClick={handleCreate} className=\"bg-emerald-600 hover:bg-emerald-700\">\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Add Entity\r\n            </Button>\r\n          </div>\r\n        </CardHeader>\r\n      </Card>\r\n\r\n      {/* Entities List */}\r\n      {entities.length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"py-16\">\r\n            <div className=\"text-center\">\r\n              <Building2 className=\"w-12 h-12 mx-auto text-slate-400 mb-4\" />\r\n              <p className=\"text-slate-600 font-medium text-lg mb-2\">No entities added yet</p>\r\n              <p className=\"text-sm text-slate-500 mb-6 max-w-md mx-auto\">\r\n                Add a legal entity to invest through trusts, LLCs, or partnerships.\r\n              </p>\r\n              <Button onClick={handleCreate} variant=\"outline\" size=\"lg\">\r\n                <Plus className=\"w-4 h-4 mr-2\" />\r\n                Add Your First Entity\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {entities.map((entity) => (\r\n            <Card key={entity.id} className=\"overflow-hidden\">\r\n              {/* Card Header with Name, Type, and Actions */}\r\n              <CardHeader className=\"bg-slate-50/80 border-b pb-4\">\r\n                <div className=\"flex items-start justify-between gap-4\">\r\n                  <div className=\"flex items-start gap-4\">\r\n                    <div className=\"w-12 h-12 rounded-lg bg-slate-900 flex items-center justify-center flex-shrink-0\">\r\n                      <Building2 className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <div className=\"space-y-1\">\r\n                      <h3 className=\"text-xl font-semibold text-slate-900\">\r\n                        {entity.legal_name}\r\n                      </h3>\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <Badge variant=\"outline\" className=\"font-medium px-3 py-1\">\r\n                          {getEntityTypeLabel(entity.entity_type)}\r\n                        </Badge>\r\n                        {getKYCStatusBadge(entity.kyc_status)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Button\r\n                      variant=\"default\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleViewDetails(entity)}\r\n                      className=\"h-9 bg-slate-900 hover:bg-slate-800\"\r\n                    >\r\n                      <Users className=\"w-4 h-4 mr-2\" />\r\n                      Members & KYC\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleEdit(entity)}\r\n                      className=\"h-9\"\r\n                    >\r\n                      <Edit className=\"w-4 h-4 mr-2\" />\r\n                      Edit\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleDelete(entity.id)}\r\n                      disabled={deleting === entity.id}\r\n                      className=\"h-9 hover:bg-rose-50 hover:text-rose-600 hover:border-rose-300\"\r\n                    >\r\n                      {deleting === entity.id ? (\r\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                      ) : (\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      )}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n\r\n              {/* Card Content with All Data */}\r\n              <CardContent className=\"pt-6 pb-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-6\">\r\n                  {/* Jurisdiction */}\r\n                  <div className=\"space-y-1.5\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-slate-500\">\r\n                      <MapPin className=\"w-4 h-4\" />\r\n                      Jurisdiction\r\n                    </div>\r\n                    <p className=\"text-base text-slate-900 pl-6\">\r\n                      {entity.jurisdiction || <span className=\"text-slate-400\">Not specified</span>}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Registration Number */}\r\n                  <div className=\"space-y-1.5\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-slate-500\">\r\n                      <Hash className=\"w-4 h-4\" />\r\n                      Registration Number\r\n                    </div>\r\n                    <p className=\"text-base text-slate-900 font-mono pl-6\">\r\n                      {entity.registration_number || <span className=\"text-slate-400 font-sans\">Not specified</span>}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Tax ID */}\r\n                  <div className=\"space-y-1.5\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-slate-500\">\r\n                      <FileText className=\"w-4 h-4\" />\r\n                      Tax ID\r\n                    </div>\r\n                    <p className=\"text-base text-slate-900 font-mono pl-6\">\r\n                      {entity.tax_id || <span className=\"text-slate-400 font-sans\">Not specified</span>}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Formation Date */}\r\n                  <div className=\"space-y-1.5\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-slate-500\">\r\n                      <Calendar className=\"w-4 h-4\" />\r\n                      Formation Date\r\n                    </div>\r\n                    <p className=\"text-base text-slate-900 pl-6\">\r\n                      {formatDate(entity.formation_date) !== 'â€”' ? formatDate(entity.formation_date) : <span className=\"text-slate-400\">Not specified</span>}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Representative */}\r\n                  <div className=\"space-y-1.5\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-slate-500\">\r\n                      <User className=\"w-4 h-4\" />\r\n                      Authorized Representative\r\n                    </div>\r\n                    <div className=\"pl-6\">\r\n                      {entity.representative_name ? (\r\n                        <div>\r\n                          <p className=\"text-base text-slate-900 font-medium\">\r\n                            {entity.representative_name}\r\n                          </p>\r\n                          {entity.representative_title && (\r\n                            <p className=\"text-sm text-slate-500\">\r\n                              {entity.representative_title}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      ) : (\r\n                        <p className=\"text-slate-400\">Not specified</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Address */}\r\n                  <div className=\"space-y-1.5\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-slate-500\">\r\n                      <MapPin className=\"w-4 h-4\" />\r\n                      Registered Address\r\n                    </div>\r\n                    <p className=\"text-base text-slate-900 pl-6\">\r\n                      {formatAddress(entity.registered_address) || <span className=\"text-slate-400\">Not specified</span>}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Notes Section - if present */}\r\n                {entity.notes && (\r\n                  <div className=\"mt-6 pt-6 border-t\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-slate-500 mb-2\">\r\n                      <FileText className=\"w-4 h-4\" />\r\n                      Notes\r\n                    </div>\r\n                    <p className=\"text-base text-slate-700 pl-6 whitespace-pre-wrap\">\r\n                      {entity.notes}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <EntityFormDialog\r\n        open={formDialogOpen}\r\n        onClose={() => {\r\n          setFormDialogOpen(false)\r\n          setSelectedEntity(null)\r\n        }}\r\n        onSuccess={handleFormSuccess}\r\n        entity={selectedEntity}\r\n      />\r\n\r\n      <EntityDetailDialog\r\n        open={detailDialogOpen}\r\n        onClose={() => {\r\n          setDetailDialogOpen(false)\r\n          setSelectedEntity(null)\r\n        }}\r\n        entity={selectedEntity}\r\n        onUpdate={loadEntities}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import { toDate } from \"./toDate.js\";\n\n/**\n * @name isPast\n * @category Common Helpers\n * @summary Is the given date in the past?\n * @pure false\n *\n * @description\n * Is the given date in the past?\n *\n * @param date - The date to check\n *\n * @returns The date is in the past\n *\n * @example\n * // If today is 6 October 2014, is 2 July 2014 in the past?\n * const result = isPast(new Date(2014, 6, 2))\n * //=> true\n */\nexport function isPast(date) {\n  return +toDate(date) < Date.now();\n}\n\n// Fallback for modularized imports:\nexport default isPast;\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport {\n  ShieldCheck,\n  ShieldAlert,\n  AlertTriangle,\n  CheckCircle2,\n  XCircle,\n  Clock,\n  RefreshCw,\n  FileText,\n  Calendar\n} from 'lucide-react'\nimport { format, differenceInDays, isPast, addDays } from 'date-fns'\nimport { cn } from '@/lib/utils'\n\ninterface ComplianceData {\n  aml_risk_rating: string | null\n  aml_last_reviewed_at: string | null\n  is_pep: boolean\n  is_sanctioned: boolean\n  is_professional_investor: boolean\n  is_qualified_purchaser: boolean\n  accreditation_expiry: string | null\n  kyc_status: string | null\n  kyc_expiry_date: string | null\n  kyc_completed_at: string | null\n}\n\nfunction getRiskRatingColor(rating: string | null): string {\n  switch (rating?.toLowerCase()) {\n    case 'low':\n      return 'bg-green-500/10 text-green-500 border-green-500/20'\n    case 'medium':\n      return 'bg-amber-500/10 text-amber-500 border-amber-500/20'\n    case 'high':\n      return 'bg-red-500/10 text-red-500 border-red-500/20'\n    default:\n      return 'bg-muted text-muted-foreground'\n  }\n}\n\nfunction getExpiryStatus(expiryDate: string | null): { status: 'expired' | 'expiring_soon' | 'valid' | 'not_set', daysLeft: number | null } {\n  if (!expiryDate) return { status: 'not_set', daysLeft: null }\n\n  const expiry = new Date(expiryDate)\n  const today = new Date()\n  const daysLeft = differenceInDays(expiry, today)\n\n  if (isPast(expiry)) {\n    return { status: 'expired', daysLeft }\n  } else if (daysLeft <= 30) {\n    return { status: 'expiring_soon', daysLeft }\n  }\n  return { status: 'valid', daysLeft }\n}\n\nfunction ExpiryBadge({ date, label }: { date: string | null, label: string }) {\n  const { status, daysLeft } = getExpiryStatus(date)\n\n  if (status === 'not_set') {\n    return (\n      <div className=\"flex items-center gap-2 text-muted-foreground\">\n        <Clock className=\"h-4 w-4\" />\n        <span className=\"text-sm\">Not set</span>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-1\">\n      <div className=\"flex items-center gap-2\">\n        {status === 'expired' && (\n          <Badge variant=\"destructive\" className=\"gap-1\">\n            <XCircle className=\"h-3 w-3\" />\n            Expired\n          </Badge>\n        )}\n        {status === 'expiring_soon' && (\n          <Badge variant=\"outline\" className=\"gap-1 border-amber-500/50 text-amber-500 bg-amber-500/10\">\n            <AlertTriangle className=\"h-3 w-3\" />\n            Expires in {daysLeft} days\n          </Badge>\n        )}\n        {status === 'valid' && (\n          <Badge variant=\"outline\" className=\"gap-1 border-green-500/50 text-green-500 bg-green-500/10\">\n            <CheckCircle2 className=\"h-3 w-3\" />\n            Valid\n          </Badge>\n        )}\n      </div>\n      <p className=\"text-sm text-muted-foreground flex items-center gap-1\">\n        <Calendar className=\"h-3 w-3\" />\n        {format(new Date(date!), 'MMM dd, yyyy')}\n      </p>\n    </div>\n  )\n}\n\nexport function ComplianceTab() {\n  const [compliance, setCompliance] = useState<ComplianceData | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    fetchComplianceData()\n  }, [])\n\n  const fetchComplianceData = async () => {\n    try {\n      setLoading(true)\n      const response = await fetch('/api/investors/me/compliance')\n      if (!response.ok) {\n        throw new Error('Failed to fetch compliance data')\n      }\n      const data = await response.json()\n      setCompliance(data)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Unknown error')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <Skeleton className=\"h-8 w-48\" />\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          <Skeleton className=\"h-48\" />\n          <Skeleton className=\"h-48\" />\n          <Skeleton className=\"h-48\" />\n          <Skeleton className=\"h-48\" />\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <Card className=\"border-destructive/50 bg-destructive/5\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex items-center gap-3\">\n            <XCircle className=\"h-5 w-5 text-destructive\" />\n            <p className=\"text-sm text-destructive\">{error}</p>\n            <Button variant=\"ghost\" size=\"sm\" onClick={fetchComplianceData}>\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              Retry\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (!compliance) {\n    return null\n  }\n\n  const kycExpiry = getExpiryStatus(compliance.kyc_expiry_date)\n  const accreditationExpiry = getExpiryStatus(compliance.accreditation_expiry)\n  const hasComplianceIssues =\n    compliance.is_sanctioned ||\n    kycExpiry.status === 'expired' ||\n    accreditationExpiry.status === 'expired'\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-2xl font-bold tracking-tight\">Compliance Status</h2>\n        <p className=\"text-muted-foreground\">\n          Your AML, PEP screening, and accreditation status.\n        </p>\n      </div>\n\n      {/* Compliance Alert Banner */}\n      {hasComplianceIssues && (\n        <Card className=\"border-destructive/50 bg-destructive/5\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-start gap-3\">\n              <ShieldAlert className=\"h-5 w-5 text-destructive mt-0.5\" />\n              <div>\n                <p className=\"font-medium text-destructive\">Compliance Action Required</p>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  One or more compliance items need attention. Please contact your relationship manager.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        {/* AML Status Card */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <ShieldCheck className=\"h-5 w-5 text-primary\" />\n              AML Status\n            </CardTitle>\n            <CardDescription>Anti-Money Laundering risk assessment</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Risk Rating</span>\n              <Badge\n                variant=\"outline\"\n                className={cn(\"capitalize\", getRiskRatingColor(compliance.aml_risk_rating))}\n              >\n                {compliance.aml_risk_rating || 'Not Assessed'}\n              </Badge>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Last Reviewed</span>\n              <span className=\"text-sm text-muted-foreground\">\n                {compliance.aml_last_reviewed_at\n                  ? format(new Date(compliance.aml_last_reviewed_at), 'MMM dd, yyyy')\n                  : 'Never'\n                }\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* PEP & Sanctions Card */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\n              PEP & Sanctions\n            </CardTitle>\n            <CardDescription>Politically Exposed Person and sanctions screening</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">PEP Status</span>\n              {compliance.is_pep ? (\n                <Badge variant=\"outline\" className=\"border-amber-500/50 text-amber-500 bg-amber-500/10\">\n                  <AlertTriangle className=\"h-3 w-3 mr-1\" />\n                  PEP Identified\n                </Badge>\n              ) : (\n                <Badge variant=\"outline\" className=\"border-green-500/50 text-green-500 bg-green-500/10\">\n                  <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                  Clear\n                </Badge>\n              )}\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Sanctions Status</span>\n              {compliance.is_sanctioned ? (\n                <Badge variant=\"destructive\">\n                  <XCircle className=\"h-3 w-3 mr-1\" />\n                  Sanctions Match\n                </Badge>\n              ) : (\n                <Badge variant=\"outline\" className=\"border-green-500/50 text-green-500 bg-green-500/10\">\n                  <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                  Clear\n                </Badge>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* KYC Expiry Card */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <FileText className=\"h-5 w-5 text-primary\" />\n              KYC Verification\n            </CardTitle>\n            <CardDescription>Know Your Customer verification status</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Status</span>\n              <Badge\n                variant=\"outline\"\n                className={cn(\n                  compliance.kyc_status === 'approved' || compliance.kyc_status === 'verified'\n                    ? 'border-green-500/50 text-green-500 bg-green-500/10'\n                    : compliance.kyc_status === 'pending' || compliance.kyc_status === 'submitted'\n                    ? 'border-amber-500/50 text-amber-500 bg-amber-500/10'\n                    : 'border-muted text-muted-foreground'\n                )}\n              >\n                {compliance.kyc_status?.replace('_', ' ') || 'Not Started'}\n              </Badge>\n            </div>\n            <div>\n              <span className=\"text-sm font-medium block mb-2\">Expiry</span>\n              <ExpiryBadge date={compliance.kyc_expiry_date} label=\"KYC\" />\n            </div>\n            {compliance.kyc_completed_at && (\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Completed</span>\n                <span className=\"text-muted-foreground\">\n                  {format(new Date(compliance.kyc_completed_at), 'MMM dd, yyyy')}\n                </span>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Accreditation Card */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <CheckCircle2 className=\"h-5 w-5 text-primary\" />\n              Accreditation\n            </CardTitle>\n            <CardDescription>Investor accreditation and qualification status</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Professional Investor</span>\n              {compliance.is_professional_investor ? (\n                <Badge variant=\"outline\" className=\"border-green-500/50 text-green-500 bg-green-500/10\">\n                  <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                  Yes\n                </Badge>\n              ) : (\n                <Badge variant=\"outline\" className=\"text-muted-foreground\">\n                  No\n                </Badge>\n              )}\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Qualified Purchaser</span>\n              {compliance.is_qualified_purchaser ? (\n                <Badge variant=\"outline\" className=\"border-green-500/50 text-green-500 bg-green-500/10\">\n                  <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                  Yes\n                </Badge>\n              ) : (\n                <Badge variant=\"outline\" className=\"text-muted-foreground\">\n                  No\n                </Badge>\n              )}\n            </div>\n            <div>\n              <span className=\"text-sm font-medium block mb-2\">Accreditation Expiry</span>\n              <ExpiryBadge date={compliance.accreditation_expiry} label=\"Accreditation\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Info Notice */}\n      <Card className=\"bg-muted/50\">\n        <CardContent className=\"pt-6\">\n          <p className=\"text-sm text-muted-foreground\">\n            Compliance status is managed by VERSO Holdings. If you believe any information is incorrect\n            or needs updating, please contact your relationship manager or email{' '}\n            <a href=\"mailto:compliance@versoholdings.com\" className=\"text-primary hover:underline\">\n              compliance@versoholdings.com\n            </a>\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","'use client'\r\n\r\nimport React, { createContext, useContext, useState, useCallback, useEffect, useRef } from 'react'\r\nimport { toast } from 'sonner'\r\nimport {\r\n  KYCQuestionnaireData,\r\n  getVisibleSteps,\r\n  getStepDefaults,\r\n  getStepSchema,\r\n  STEP_CONFIG,\r\n} from '../schemas/kyc-questionnaire-schema'\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\ninterface WizardState {\r\n  currentStep: number\r\n  formData: Partial<KYCQuestionnaireData>\r\n  completedSteps: Set<number>\r\n  isLoading: boolean\r\n  isSaving: boolean\r\n  lastSavedAt: Date | null\r\n  submissionId: string | null\r\n  errors: Record<number, string[]>\r\n}\r\n\r\ninterface WizardContextValue {\r\n  // Convenience accessors (same as state but easier to use)\r\n  currentStep: number\r\n  formData: Partial<KYCQuestionnaireData>\r\n  isLoading: boolean\r\n  isSaving: boolean\r\n  lastSavedAt: Date | null\r\n\r\n  // Computed values\r\n  state: WizardState\r\n  visibleSteps: number[]\r\n  totalVisibleSteps: number\r\n  currentStepIndex: number\r\n  progress: number\r\n  currentStepConfig: typeof STEP_CONFIG[number]\r\n  isFirstStep: boolean\r\n  isLastStep: boolean\r\n  canGoNext: boolean\r\n  canGoBack: boolean\r\n\r\n  // Actions\r\n  goToStep: (step: number) => void\r\n  nextStep: () => Promise<boolean>\r\n  previousStep: () => void\r\n  updateStepData: <K extends keyof KYCQuestionnaireData>(stepKey: K, data: KYCQuestionnaireData[K]) => void\r\n  validateCurrentStep: () => Promise<{ valid: boolean; errors: string[] }>\r\n  saveProgress: () => Promise<void>\r\n  submitQuestionnaire: () => Promise<boolean>\r\n  getStepData: <K extends keyof KYCQuestionnaireData>(stepKey: K) => KYCQuestionnaireData[K] | undefined\r\n}\r\n\r\nconst WizardContext = createContext<WizardContextValue | null>(null)\r\n\r\n// ============================================================================\r\n// Provider\r\n// ============================================================================\r\ninterface WizardProviderProps {\r\n  children: React.ReactNode\r\n  onComplete?: () => void\r\n  initialData?: Partial<KYCQuestionnaireData>\r\n  submissionId?: string | null\r\n}\r\n\r\nexport function WizardProvider({\r\n  children,\r\n  onComplete,\r\n  initialData,\r\n  submissionId: initialSubmissionId,\r\n}: WizardProviderProps) {\r\n  const [state, setState] = useState<WizardState>(() => ({\r\n    currentStep: initialData?.lastCompletedStep ? Math.min(initialData.lastCompletedStep + 1, 10) : 1,\r\n    formData: initialData || {},\r\n    completedSteps: new Set(\r\n      initialData?.lastCompletedStep\r\n        ? Array.from({ length: initialData.lastCompletedStep }, (_, i) => i + 1)\r\n        : []\r\n    ),\r\n    isLoading: false,\r\n    isSaving: false,\r\n    lastSavedAt: null,\r\n    submissionId: initialSubmissionId || null,\r\n    errors: {},\r\n  }))\r\n\r\n  const autoSaveTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const isDirtyRef = useRef(false)\r\n  const isSavingRef = useRef(false) // Ref for immediate saving state check\r\n  const isSubmittedRef = useRef(false) // Ref to prevent auto-save after final submission\r\n  const saveProgressRef = useRef<(() => Promise<void>) | undefined>(undefined) // Ref to latest saveProgress\r\n\r\n  // Calculate visible steps based on US Person status\r\n  const visibleSteps = getVisibleSteps(state.formData)\r\n  const totalVisibleSteps = visibleSteps.length\r\n  const rawCurrentStepIndex = visibleSteps.indexOf(state.currentStep)\r\n\r\n  // BUG FIX 2.3: Handle currentStepIndex = -1 (step became hidden)\r\n  const currentStepIndex = rawCurrentStepIndex === -1 ? 0 : rawCurrentStepIndex\r\n  const safeCurrentStep = rawCurrentStepIndex === -1 ? visibleSteps[0] : state.currentStep\r\n\r\n  // Auto-navigate when current step becomes hidden (e.g., US Person changes from 'yes' to 'no')\r\n  useEffect(() => {\r\n    if (rawCurrentStepIndex === -1 && visibleSteps.length > 0) {\r\n      // Find nearest valid step (prefer staying on same or earlier step)\r\n      const nearestStep = visibleSteps.find(s => s >= state.currentStep) || visibleSteps[visibleSteps.length - 1]\r\n      setState(prev => ({ ...prev, currentStep: nearestStep }))\r\n    }\r\n  }, [rawCurrentStepIndex, visibleSteps, state.currentStep])\r\n\r\n  const progress = Math.max(0, Math.round(((currentStepIndex + 1) / totalVisibleSteps) * 100))\r\n  const currentStepConfig = STEP_CONFIG[safeCurrentStep - 1]\r\n  const isFirstStep = currentStepIndex === 0\r\n  const isLastStep = currentStepIndex === totalVisibleSteps - 1\r\n  const canGoNext = !isLastStep\r\n  const canGoBack = !isFirstStep\r\n\r\n  // BUG FIX 2.1: Auto-save with proper closure handling using ref\r\n  useEffect(() => {\r\n    if (isDirtyRef.current && saveProgressRef.current) {\r\n      autoSaveTimeoutRef.current = setTimeout(() => {\r\n        saveProgressRef.current?.()\r\n      }, 30000)\r\n    }\r\n\r\n    return () => {\r\n      if (autoSaveTimeoutRef.current) {\r\n        clearTimeout(autoSaveTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [state.formData])\r\n\r\n  // Get step data helper\r\n  const getStepData = useCallback(<K extends keyof KYCQuestionnaireData>(stepKey: K) => {\r\n    return state.formData[stepKey]\r\n  }, [state.formData])\r\n\r\n  // Update step data\r\n  const updateStepData = useCallback(<K extends keyof KYCQuestionnaireData>(\r\n    stepKey: K,\r\n    data: KYCQuestionnaireData[K]\r\n  ) => {\r\n    isDirtyRef.current = true\r\n    setState(prev => ({\r\n      ...prev,\r\n      formData: {\r\n        ...prev.formData,\r\n        [stepKey]: data,\r\n      },\r\n      errors: {\r\n        ...prev.errors,\r\n        [parseInt(stepKey.replace('step', ''))]: [],\r\n      },\r\n    }))\r\n  }, [])\r\n\r\n  // Validate current step - returns { valid, errors } for better error messaging\r\n  const validateCurrentStep = useCallback(async (): Promise<{ valid: boolean; errors: string[] }> => {\r\n    const stepKey = `step${state.currentStep}` as keyof KYCQuestionnaireData\r\n    const stepData = state.formData[stepKey]\r\n    const schema = getStepSchema(state.currentStep)\r\n\r\n    if (!schema) return { valid: true, errors: [] }\r\n\r\n    try {\r\n      await schema.parseAsync(stepData || getStepDefaults(state.currentStep))\r\n      setState(prev => ({\r\n        ...prev,\r\n        errors: { ...prev.errors, [state.currentStep]: [] },\r\n      }))\r\n      return { valid: true, errors: [] }\r\n    } catch (error: any) {\r\n      // Zod uses 'issues' not 'errors' for validation errors\r\n      const messages = error.issues?.map((e: any) => e.message) || ['Validation failed']\r\n      setState(prev => ({\r\n        ...prev,\r\n        errors: { ...prev.errors, [state.currentStep]: messages },\r\n      }))\r\n      return { valid: false, errors: messages }\r\n    }\r\n  }, [state.currentStep, state.formData])\r\n\r\n  // Save progress - BUG FIX 3.1: Use ref for immediate isSaving check\r\n  const saveProgress = useCallback(async () => {\r\n    // Use ref for immediate check to prevent race conditions\r\n    if (isSavingRef.current) return\r\n\r\n    // BUG FIX: Prevent auto-save from running after final submission\r\n    // This prevents overwriting 'pending' status back to 'draft'\r\n    if (isSubmittedRef.current) return\r\n\r\n    isSavingRef.current = true\r\n    setState(prev => ({ ...prev, isSaving: true }))\r\n\r\n    try {\r\n      const payload = {\r\n        document_type: 'questionnaire',\r\n        custom_label: 'KYC Compliance Questionnaire',\r\n        metadata: {\r\n          ...state.formData,\r\n          lastCompletedStep: Math.max(...Array.from(state.completedSteps), 0),\r\n          wizardVersion: '2.0',\r\n        },\r\n        status: 'draft',\r\n      }\r\n\r\n      let response: Response\r\n\r\n      if (state.submissionId) {\r\n        // Update existing draft\r\n        response = await fetch(`/api/investors/me/kyc-submissions/${state.submissionId}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      } else {\r\n        // Create new draft\r\n        response = await fetch('/api/investors/me/kyc-submissions', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to save progress')\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      setState(prev => ({\r\n        ...prev,\r\n        isSaving: false,\r\n        lastSavedAt: new Date(),\r\n        submissionId: data.submission?.id || prev.submissionId,\r\n      }))\r\n\r\n      isDirtyRef.current = false\r\n    } catch (error) {\r\n      console.error('Failed to save progress:', error)\r\n      setState(prev => ({ ...prev, isSaving: false }))\r\n      toast.error('Failed to save progress. Your changes may not be saved.')\r\n    } finally {\r\n      isSavingRef.current = false\r\n    }\r\n  }, [state.formData, state.completedSteps, state.submissionId])\r\n\r\n  // Keep saveProgressRef updated with latest saveProgress\r\n  useEffect(() => {\r\n    saveProgressRef.current = saveProgress\r\n  }, [saveProgress])\r\n\r\n  // Go to specific step - BUG FIX 4.1: Add feedback when step blocked\r\n  const goToStep = useCallback((step: number) => {\r\n    if (visibleSteps.includes(step)) {\r\n      setState(prev => ({ ...prev, currentStep: step }))\r\n    } else {\r\n      toast.error('This step is not available')\r\n    }\r\n  }, [visibleSteps])\r\n\r\n  // Next step - BUG FIX 2.2: Use functional setState to avoid race conditions\r\n  const nextStep = useCallback(async (): Promise<boolean> => {\r\n    // Validate current step\r\n    const { valid, errors } = await validateCurrentStep()\r\n    if (!valid) {\r\n      // Show specific error messages instead of generic message\r\n      const errorSummary = errors.slice(0, 3).join(', ') + (errors.length > 3 ? ` (+${errors.length - 3} more)` : '')\r\n      toast.error('Please complete all required fields', {\r\n        description: errorSummary\r\n      })\r\n      return false\r\n    }\r\n\r\n    // Mark current step as completed and move to next in single state update\r\n    // to avoid race condition between separate setState calls\r\n    const currentVisibleSteps = getVisibleSteps(state.formData)\r\n    const currentIdx = currentVisibleSteps.indexOf(state.currentStep)\r\n\r\n    setState(prev => {\r\n      const newCompleted = new Set(prev.completedSteps)\r\n      newCompleted.add(prev.currentStep)\r\n\r\n      // Calculate next step from current state\r\n      const latestVisibleSteps = getVisibleSteps(prev.formData)\r\n      const latestIdx = latestVisibleSteps.indexOf(prev.currentStep)\r\n      const nextIdx = latestIdx + 1\r\n      const nextStep = nextIdx < latestVisibleSteps.length\r\n        ? latestVisibleSteps[nextIdx]\r\n        : prev.currentStep\r\n\r\n      return {\r\n        ...prev,\r\n        completedSteps: newCompleted,\r\n        currentStep: nextStep,\r\n      }\r\n    })\r\n\r\n    // Save progress after state update\r\n    await saveProgress()\r\n\r\n    return true\r\n  }, [validateCurrentStep, saveProgress, state.formData, state.currentStep])\r\n\r\n  // Previous step\r\n  const previousStep = useCallback(() => {\r\n    if (currentStepIndex > 0) {\r\n      setState(prev => ({\r\n        ...prev,\r\n        currentStep: visibleSteps[currentStepIndex - 1],\r\n      }))\r\n    }\r\n  }, [currentStepIndex, visibleSteps])\r\n\r\n  // Submit questionnaire - BUG FIX 1.3: Filter hidden steps data\r\n  const submitQuestionnaire = useCallback(async (): Promise<boolean> => {\r\n    // BUG FIX: Clear auto-save timer and mark as submitted to prevent race condition\r\n    // that could overwrite 'pending' status back to 'draft'\r\n    if (autoSaveTimeoutRef.current) {\r\n      clearTimeout(autoSaveTimeoutRef.current)\r\n      autoSaveTimeoutRef.current = null\r\n    }\r\n\r\n    // Get current visible steps\r\n    const currentVisibleSteps = getVisibleSteps(state.formData)\r\n\r\n    // Validate all visible steps\r\n    for (let i = 0; i < currentVisibleSteps.length; i++) {\r\n      const step = currentVisibleSteps[i]\r\n      const userFacingStepNumber = i + 1 // What the user sees (1-7 for non-US, 1-10 for US)\r\n      const stepKey = `step${step}` as keyof KYCQuestionnaireData\r\n      const stepData = state.formData[stepKey]\r\n      const schema = getStepSchema(step)\r\n\r\n      if (schema) {\r\n        try {\r\n          await schema.parseAsync(stepData || getStepDefaults(step))\r\n        } catch (error: any) {\r\n          // Extract specific validation errors from Zod\r\n          const errorMessages = error.issues?.map((e: any) => e.message) || []\r\n          const errorSummary = errorMessages.slice(0, 3).join(', ') + (errorMessages.length > 3 ? ` (+${errorMessages.length - 3} more)` : '')\r\n\r\n          toast.error(`Please complete Step ${userFacingStepNumber}: ${STEP_CONFIG[step - 1].title}`, {\r\n            description: errorSummary || 'Please fill in all required fields'\r\n          })\r\n          goToStep(step)\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    setState(prev => ({ ...prev, isSaving: true }))\r\n\r\n    try {\r\n      // BUG FIX 1.3: Only include data for visible steps (security fix)\r\n      // This prevents leaking US Person step data when user later changes answer to 'no'\r\n      const filteredFormData: Record<string, unknown> = {}\r\n      for (const step of currentVisibleSteps) {\r\n        const stepKey = `step${step}` as keyof KYCQuestionnaireData\r\n        if (state.formData[stepKey]) {\r\n          filteredFormData[stepKey] = state.formData[stepKey]\r\n        }\r\n      }\r\n\r\n      const payload = {\r\n        document_type: 'questionnaire',\r\n        custom_label: 'KYC Compliance Questionnaire',\r\n        metadata: {\r\n          ...filteredFormData,\r\n          lastCompletedStep: 10,\r\n          wizardVersion: '2.0',\r\n          submittedAt: new Date().toISOString(),\r\n        },\r\n        status: 'pending',\r\n      }\r\n\r\n      let response: Response\r\n\r\n      if (state.submissionId) {\r\n        response = await fetch(`/api/investors/me/kyc-submissions/${state.submissionId}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      } else {\r\n        response = await fetch('/api/investors/me/kyc-submissions', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to submit questionnaire')\r\n      }\r\n\r\n      // Mark as submitted to prevent any future auto-saves\r\n      isSubmittedRef.current = true\r\n\r\n      setState(prev => ({\r\n        ...prev,\r\n        isSaving: false,\r\n        lastSavedAt: new Date(),\r\n      }))\r\n\r\n      toast.success('Questionnaire submitted successfully!')\r\n      onComplete?.()\r\n      return true\r\n    } catch (error) {\r\n      console.error('Failed to submit:', error)\r\n      setState(prev => ({ ...prev, isSaving: false }))\r\n      toast.error('Failed to submit questionnaire')\r\n      return false\r\n    }\r\n  }, [state.formData, state.submissionId, goToStep, onComplete])\r\n\r\n  const value: WizardContextValue = {\r\n    // Convenience accessors\r\n    currentStep: state.currentStep,\r\n    formData: state.formData,\r\n    isLoading: state.isLoading,\r\n    isSaving: state.isSaving,\r\n    lastSavedAt: state.lastSavedAt,\r\n    // State and computed values\r\n    state,\r\n    visibleSteps,\r\n    totalVisibleSteps,\r\n    currentStepIndex,\r\n    progress,\r\n    currentStepConfig,\r\n    isFirstStep,\r\n    isLastStep,\r\n    canGoNext,\r\n    canGoBack,\r\n    // Actions\r\n    goToStep,\r\n    nextStep,\r\n    previousStep,\r\n    updateStepData,\r\n    validateCurrentStep,\r\n    saveProgress,\r\n    submitQuestionnaire,\r\n    getStepData,\r\n  }\r\n\r\n  return (\r\n    <WizardContext.Provider value={value}>\r\n      {children}\r\n    </WizardContext.Provider>\r\n  )\r\n}\r\n\r\n// ============================================================================\r\n// Hook\r\n// ============================================================================\r\nexport function useWizard() {\r\n  const context = useContext(WizardContext)\r\n  if (!context) {\r\n    throw new Error('useWizard must be used within a WizardProvider')\r\n  }\r\n  return context\r\n}\r\n","'use client'\r\n\r\nimport { CheckCircle2, Circle, Loader2 } from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from './WizardContext'\r\nimport { STEP_CONFIG } from '../schemas/kyc-questionnaire-schema'\r\n\r\nexport function WizardProgress() {\r\n  const {\r\n    state,\r\n    visibleSteps,\r\n    currentStepIndex,\r\n    progress,\r\n    goToStep,\r\n  } = useWizard()\r\n\r\n  return (\r\n    <div className=\"w-full space-y-4\">\r\n      {/* Progress Bar */}\r\n      <div className=\"relative\">\r\n        <div className=\"flex justify-between text-sm text-muted-foreground mb-2\">\r\n          <span className=\"font-medium\">\r\n            Step {currentStepIndex + 1} of {visibleSteps.length}\r\n          </span>\r\n          <span className=\"flex items-center gap-2\">\r\n            {state.isSaving && (\r\n              <>\r\n                <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n                <span>Saving...</span>\r\n              </>\r\n            )}\r\n            {!state.isSaving && state.lastSavedAt && (\r\n              <span className=\"text-emerald-500 flex items-center gap-1\">\r\n                <CheckCircle2 className=\"h-3 w-3\" />\r\n                Saved\r\n              </span>\r\n            )}\r\n            <span>{progress}% complete</span>\r\n          </span>\r\n        </div>\r\n\r\n        {/* Animated Progress Bar */}\r\n        <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full transition-all duration-500 ease-out\"\r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Step Indicators */}\r\n      <div className=\"flex justify-between gap-1 pt-2\">\r\n        {visibleSteps.map((stepNum, index) => {\r\n          const config = STEP_CONFIG[stepNum - 1]\r\n          const isCompleted = state.completedSteps.has(stepNum)\r\n          const isCurrent = stepNum === state.currentStep\r\n          const isAccessible = isCompleted || index <= currentStepIndex + 1\r\n\r\n          return (\r\n            <button\r\n              key={stepNum}\r\n              onClick={() => isAccessible && goToStep(stepNum)}\r\n              disabled={!isAccessible}\r\n              className={cn(\r\n                'group flex flex-col items-center flex-1 transition-all duration-200',\r\n                isAccessible ? 'cursor-pointer' : 'cursor-not-allowed opacity-50'\r\n              )}\r\n              title={config.title}\r\n            >\r\n              {/* Step Circle */}\r\n              <div\r\n                className={cn(\r\n                  'w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300',\r\n                  isCompleted && 'bg-emerald-500 text-white',\r\n                  isCurrent && !isCompleted && 'bg-emerald-100 border-2 border-emerald-500 text-emerald-600',\r\n                  !isCompleted && !isCurrent && 'bg-gray-100 text-gray-500 border border-gray-200',\r\n                  isAccessible && !isCurrent && 'group-hover:scale-110'\r\n                )}\r\n              >\r\n                {isCompleted ? (\r\n                  <CheckCircle2 className=\"h-4 w-4\" />\r\n                ) : (\r\n                  <span className=\"text-xs font-medium\">{index + 1}</span>\r\n                )}\r\n              </div>\r\n\r\n              {/* Step Label - Hidden on mobile */}\r\n              <span\r\n                className={cn(\r\n                  'hidden md:block text-[10px] mt-1 text-center max-w-[60px] truncate transition-colors',\r\n                  isCurrent ? 'text-emerald-600 font-medium' : 'text-gray-500'\r\n                )}\r\n              >\r\n                {config.title}\r\n              </span>\r\n            </button>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { ChevronLeft, ChevronRight, Save, Loader2, Send } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { useWizard } from './WizardContext'\r\n\r\ninterface WizardNavigationProps {\r\n  onSubmit?: () => Promise<void>\r\n  isSubmitting?: boolean\r\n}\r\n\r\nexport function WizardNavigation({ onSubmit, isSubmitting }: WizardNavigationProps = {}) {\r\n  const {\r\n    isSaving,\r\n    isFirstStep,\r\n    isLastStep,\r\n    canGoBack,\r\n    nextStep,\r\n    previousStep,\r\n    saveProgress,\r\n    submitQuestionnaire,\r\n  } = useWizard()\r\n\r\n  const loading = isSubmitting ?? isSaving\r\n\r\n  const handleNext = async () => {\r\n    await nextStep()\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    if (onSubmit) {\r\n      await onSubmit()\r\n    } else {\r\n      await submitQuestionnaire()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-zinc-700\">\r\n      {/* Left Side - Back & Save */}\r\n      <div className=\"flex items-center gap-3\">\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={previousStep}\r\n          disabled={!canGoBack || loading}\r\n          className=\"gap-2 border-gray-300 dark:border-zinc-600 hover:bg-gray-50 dark:hover:bg-zinc-800\"\r\n        >\r\n          <ChevronLeft className=\"h-4 w-4\" />\r\n          Back\r\n        </Button>\r\n\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          onClick={() => saveProgress()}\r\n          disabled={loading}\r\n          className=\"gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800\"\r\n        >\r\n          {isSaving ? (\r\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          ) : (\r\n            <Save className=\"h-4 w-4\" />\r\n          )}\r\n          Save Progress\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Right Side - Next / Submit */}\r\n      <div>\r\n        {isLastStep ? (\r\n          <Button\r\n            type=\"button\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n            className=\"gap-2 bg-emerald-600 hover:bg-emerald-700\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                Submitting...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Send className=\"h-4 w-4\" />\r\n                Submit Questionnaire\r\n              </>\r\n            )}\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            type=\"button\"\r\n            onClick={handleNext}\r\n            disabled={loading}\r\n            className=\"gap-2 bg-emerald-600 hover:bg-emerald-700\"\r\n          >\r\n            {loading ? (\r\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n            ) : (\r\n              <>\r\n                Continue\r\n                <ChevronRight className=\"h-4 w-4\" />\r\n              </>\r\n            )}\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step1Schema, Step1Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\n\r\nexport function Step1AboutYou() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step1')\r\n\r\n  const form = useForm<Step1Data>({\r\n    resolver: zodResolver(step1Schema),\r\n    defaultValues: existingData || (getStepDefaults(1) as Step1Data),\r\n  })\r\n\r\n  // Sync form changes to wizard context\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step1', values as Step1Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Tell us about yourself</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          We need some basic information to get started\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          {/* Name & DOB */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"fullName\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Full Legal Name</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"John Smith\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"dateOfBirth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Date of Birth</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"date\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Nationality & Residence */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"nationality\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Nationality</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. British\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"countryOfResidence\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Country of Residence</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. United Kingdom\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Address */}\r\n          <FormField\r\n            control={form.control}\r\n            name=\"residentialAddress\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Residential Address</FormLabel>\r\n                <FormControl>\r\n                  <Input placeholder=\"Street address\" {...field} />\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"city\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>City</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"London\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"postalCode\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Postal Code</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"SW1A 1AA\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Contact */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"email\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Email Address</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"email\" placeholder=\"john@example.com\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"phone\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Phone Number</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"tel\" placeholder=\"+44 20 1234 5678\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Tax Info */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"taxResidencyCountry\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tax Residency Country</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. United Kingdom\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"taxIdNumber\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tax ID Number (Optional)</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"National Insurance / SSN / TIN\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step2Schema,\r\n  Step2Data,\r\n  investmentTypeOptions,\r\n  getStepDefaults,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { User, Users, Building2, Briefcase, HelpCircle, Landmark } from 'lucide-react'\r\n\r\nconst icons: Record<string, React.ReactNode> = {\r\n  individual: <User className=\"h-5 w-5\" />,\r\n  joint: <Users className=\"h-5 w-5\" />,\r\n  trust: <Landmark className=\"h-5 w-5\" />,\r\n  corporation: <Building2 className=\"h-5 w-5\" />,\r\n  partnership: <Briefcase className=\"h-5 w-5\" />,\r\n  other: <HelpCircle className=\"h-5 w-5\" />,\r\n}\r\n\r\nexport function Step2InvestmentType() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step2')\r\n\r\n  const form = useForm<Step2Data>({\r\n    resolver: zodResolver(step2Schema),\r\n    defaultValues: existingData || (getStepDefaults(2) as Step2Data),\r\n  })\r\n\r\n  const selectedType = form.watch('investmentType')\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step2', values as Step2Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">How will you be investing?</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Select the type of investment account\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"investmentType\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormControl>\r\n                  <RadioGroup\r\n                    onValueChange={field.onChange}\r\n                    value={field.value}\r\n                    className=\"grid gap-3 md:grid-cols-2 lg:grid-cols-3\"\r\n                  >\r\n                    {investmentTypeOptions.map((option) => (\r\n                      <label\r\n                        key={option.value}\r\n                        className={cn(\r\n                          'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                          field.value === option.value\r\n                            ? 'border-emerald-500 bg-emerald-50 dark:bg-emerald-950'\r\n                            : 'border-border hover:border-muted-foreground/50 bg-card'\r\n                        )}\r\n                      >\r\n                        <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                        <div\r\n                          className={cn(\r\n                            'p-2 rounded-lg',\r\n                            field.value === option.value\r\n                              ? 'bg-emerald-500 text-white'\r\n                              : 'bg-muted text-muted-foreground'\r\n                          )}\r\n                        >\r\n                          {icons[option.value]}\r\n                        </div>\r\n                        <span className=\"font-medium\">{option.label}</span>\r\n                      </label>\r\n                    ))}\r\n                  </RadioGroup>\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {selectedType === 'other' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentTypeOther\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Please specify</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"Describe your investment type\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step3Schema,\r\n  Step3Data,\r\n  wellInformedBasisOptions,\r\n  getStepDefaults,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { CheckCircle2, HelpCircle, XCircle } from 'lucide-react'\r\n\r\nexport function Step3WellInformed() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step3')\r\n\r\n  const form = useForm<Step3Data>({\r\n    resolver: zodResolver(step3Schema),\r\n    defaultValues: existingData || (getStepDefaults(3) as Step3Data),\r\n  })\r\n\r\n  const selectedStatus = form.watch('isWellInformed')\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step3', values as Step3Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Investor Status</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Are you a well-informed or professional investor?\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"isWellInformed\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Do you qualify as a well-informed investor?</FormLabel>\r\n                <FormDescription>\r\n                  A well-informed investor typically has significant investment experience,\r\n                  a net worth exceeding â‚¬1,250,000, or is advised by a regulated professional.\r\n                </FormDescription>\r\n                <FormControl>\r\n                  <RadioGroup\r\n                    onValueChange={field.onChange}\r\n                    value={field.value}\r\n                    className=\"grid gap-3 md:grid-cols-3 mt-4\"\r\n                  >\r\n                    {[\r\n                      { value: 'yes', label: 'Yes', icon: CheckCircle2, color: 'emerald' },\r\n                      { value: 'no', label: 'No', icon: XCircle, color: 'red' },\r\n                      { value: 'unsure', label: \"I'm not sure\", icon: HelpCircle, color: 'amber' },\r\n                    ].map((option) => {\r\n                      const Icon = option.icon\r\n                      const isSelected = field.value === option.value\r\n                      return (\r\n                        <label\r\n                          key={option.value}\r\n                          className={cn(\r\n                            'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                            isSelected\r\n                              ? `border-${option.color}-500 bg-${option.color}-500/10`\r\n                              : 'border-border hover:border-muted-foreground/50',\r\n                            isSelected && option.value === 'yes' && 'border-emerald-500 bg-emerald-500/10',\r\n                            isSelected && option.value === 'no' && 'border-red-500 bg-red-500/10',\r\n                            isSelected && option.value === 'unsure' && 'border-amber-500 bg-amber-500/10'\r\n                          )}\r\n                        >\r\n                          <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                          <Icon\r\n                            className={cn(\r\n                              'h-5 w-5',\r\n                              isSelected && option.value === 'yes' && 'text-emerald-500',\r\n                              isSelected && option.value === 'no' && 'text-red-500',\r\n                              isSelected && option.value === 'unsure' && 'text-amber-500',\r\n                              !isSelected && 'text-slate-500'\r\n                            )}\r\n                          />\r\n                          <span className=\"font-medium\">{option.label}</span>\r\n                        </label>\r\n                      )\r\n                    })}\r\n                  </RadioGroup>\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {(selectedStatus === 'yes' || selectedStatus === 'unsure') && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"wellInformedBasis\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>On what basis? (Select all that apply)</FormLabel>\r\n                  <div className=\"grid gap-3 mt-3\">\r\n                    {wellInformedBasisOptions.map((option) => (\r\n                      <label\r\n                        key={option.value}\r\n                        className={cn(\r\n                          'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n                          field.value?.includes(option.value)\r\n                            ? 'border-emerald-500 bg-emerald-500/10'\r\n                            : 'border-border hover:border-muted-foreground/50'\r\n                        )}\r\n                      >\r\n                        <Checkbox\r\n                          checked={field.value?.includes(option.value)}\r\n                          onCheckedChange={(checked) => {\r\n                            const current = field.value || []\r\n                            if (checked) {\r\n                              field.onChange([...current, option.value])\r\n                            } else {\r\n                              field.onChange(current.filter((v: string) => v !== option.value))\r\n                            }\r\n                          }}\r\n                        />\r\n                        <span>{option.label}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n\r\n          {selectedStatus === 'yes' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"wellInformedEvidence\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Additional details (Optional)</FormLabel>\r\n                  <FormDescription>\r\n                    Provide any additional information supporting your investor status\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Years of experience, relevant certifications, regulated advisor details...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step4Schema, Step4Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { AlertTriangle, Flag } from 'lucide-react'\r\n\r\nfunction YesNoField({\r\n  control,\r\n  name,\r\n  label,\r\n  description,\r\n  detailsName,\r\n  detailsLabel,\r\n  showDetails,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n  description?: string\r\n  detailsName?: string\r\n  detailsLabel?: string\r\n  showDetails?: boolean\r\n}) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <FormField\r\n        control={control}\r\n        name={name}\r\n        render={({ field }) => (\r\n          <FormItem>\r\n            <div className=\"flex items-start justify-between gap-4\">\r\n              <div className=\"flex-1\">\r\n                <FormLabel className=\"text-base\">{label}</FormLabel>\r\n                {description && (\r\n                  <FormDescription className=\"mt-1\">{description}</FormDescription>\r\n                )}\r\n              </div>\r\n              <FormControl>\r\n                <RadioGroup\r\n                  onValueChange={field.onChange}\r\n                  value={field.value}\r\n                  className=\"flex gap-4\"\r\n                >\r\n                  {['yes', 'no'].map((value) => (\r\n                    <label\r\n                      key={value}\r\n                      className={cn(\r\n                        'px-4 py-2 rounded-lg border cursor-pointer transition-all capitalize',\r\n                        field.value === value\r\n                          ? value === 'yes'\r\n                            ? 'border-amber-500 bg-amber-50 dark:bg-amber-950 text-amber-600 dark:text-amber-400'\r\n                            : 'border-emerald-500 bg-emerald-50 dark:bg-emerald-950 text-emerald-600 dark:text-emerald-400'\r\n                          : 'border-border hover:border-muted-foreground/50 bg-card'\r\n                      )}\r\n                    >\r\n                      <RadioGroupItem value={value} className=\"sr-only\" />\r\n                      {value}\r\n                    </label>\r\n                  ))}\r\n                </RadioGroup>\r\n              </FormControl>\r\n            </div>\r\n            <FormMessage />\r\n          </FormItem>\r\n        )}\r\n      />\r\n\r\n      {showDetails && detailsName && (\r\n        <FormField\r\n          control={control}\r\n          name={detailsName}\r\n          render={({ field }) => (\r\n            <FormItem className=\"pl-4 border-l-2 border-border\">\r\n              <FormLabel>{detailsLabel || 'Please provide details'}</FormLabel>\r\n              <FormControl>\r\n                <Textarea\r\n                  placeholder=\"Provide relevant details...\"\r\n                  className=\"min-h-[80px]\"\r\n                  {...field}\r\n                />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Step4Compliance() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step4')\r\n\r\n  const form = useForm<Step4Data>({\r\n    resolver: zodResolver(step4Schema),\r\n    defaultValues: existingData || (getStepDefaults(4) as Step4Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step4', values as Step4Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Compliance Declarations</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Required regulatory questions\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-8\">\r\n          {/* PEP Section */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\r\n              Political Exposure\r\n            </h3>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isPEP\"\r\n              label=\"Are you a Politically Exposed Person (PEP)?\"\r\n              description=\"A PEP is someone entrusted with a prominent public function\"\r\n              detailsName=\"pepDetails\"\r\n              detailsLabel=\"Please provide details about your role\"\r\n              showDetails={watchedValues.isPEP === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isRelatedToPEP\"\r\n              label=\"Are you related to or closely associated with a PEP?\"\r\n              detailsName=\"relatedPEPDetails\"\r\n              detailsLabel=\"Please describe the relationship\"\r\n              showDetails={watchedValues.isRelatedToPEP === 'yes'}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Sanctions & Legal */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg\">Legal & Regulatory Status</h3>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isSanctioned\"\r\n              label=\"Are you subject to any sanctions or restrictions?\"\r\n              detailsName=\"sanctionedDetails\"\r\n              showDetails={watchedValues.isSanctioned === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"hasCriminalRecord\"\r\n              label=\"Do you have any criminal convictions related to financial matters?\"\r\n              detailsName=\"criminalDetails\"\r\n              showDetails={watchedValues.hasCriminalRecord === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isUnderInvestigation\"\r\n              label=\"Are you currently under any regulatory investigation?\"\r\n              detailsName=\"investigationDetails\"\r\n              showDetails={watchedValues.isUnderInvestigation === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"hasBankruptcy\"\r\n              label=\"Have you been declared bankrupt or insolvent?\"\r\n              detailsName=\"bankruptcyDetails\"\r\n              showDetails={watchedValues.hasBankruptcy === 'yes'}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* US Person */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Flag className=\"h-5 w-5\" />\r\n              US Person Status\r\n            </h3>\r\n\r\n            <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n              <AlertDescription>\r\n                Your answer here determines if additional US-specific compliance steps are required.\r\n              </AlertDescription>\r\n            </Alert>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isUSPerson\"\r\n              label=\"Are you a US Person for tax purposes?\"\r\n              description=\"Includes US citizens, green card holders, and those with substantial US presence\"\r\n            />\r\n\r\n            {watchedValues.isUSPerson === 'yes' && (\r\n              <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n                <AlertDescription>\r\n                  Additional US compliance steps will be shown next.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Source of Funds & Wealth */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg\">Source of Funds</h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"sourceOfFunds\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>What is the source of funds for this investment?</FormLabel>\r\n                  <FormDescription>\r\n                    Describe the origin of funds (e.g., salary, business income, inheritance)\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Savings from employment income over the past 10 years...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"sourceOfWealth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>What is your overall source of wealth?</FormLabel>\r\n                  <FormDescription>\r\n                    Describe how you accumulated your wealth\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Built and sold a technology company, professional career...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step5Schema, Step5Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { Flag, Info } from 'lucide-react'\r\n\r\nfunction YesNoQuestion({\r\n  control,\r\n  name,\r\n  label,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n}) {\r\n  return (\r\n    <FormField\r\n      control={control}\r\n      name={name}\r\n      render={({ field }) => (\r\n        <FormItem className=\"flex items-center justify-between gap-4 p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors\">\r\n          <FormLabel className=\"flex-1 cursor-pointer font-normal\">\r\n            {label}\r\n          </FormLabel>\r\n          <FormControl>\r\n            <RadioGroup\r\n              onValueChange={field.onChange}\r\n              value={field.value}\r\n              className=\"flex gap-2\"\r\n            >\r\n              {['yes', 'no'].map((value) => (\r\n                <label\r\n                  key={value}\r\n                  className={cn(\r\n                    'px-3 py-1.5 rounded text-sm font-medium cursor-pointer transition-all capitalize',\r\n                    field.value === value\r\n                      ? value === 'yes'\r\n                        ? 'bg-amber-500 text-white'\r\n                        : 'bg-emerald-500 text-white'\r\n                      : 'bg-muted text-muted-foreground hover:bg-muted/80'\r\n                  )}\r\n                >\r\n                  <RadioGroupItem value={value} className=\"sr-only\" />\r\n                  {value}\r\n                </label>\r\n              ))}\r\n            </RadioGroup>\r\n          </FormControl>\r\n          <FormMessage />\r\n        </FormItem>\r\n      )}\r\n    />\r\n  )\r\n}\r\n\r\nexport function Step5USPerson() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step5')\r\n\r\n  const form = useForm<Step5Data>({\r\n    resolver: zodResolver(step5Schema),\r\n    defaultValues: existingData || (getStepDefaults(5) as Step5Data),\r\n  })\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step5', values as Step5Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <Flag className=\"h-6 w-6\" />\r\n          US Person Definition\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Detailed US tax residency questions\r\n        </p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n        <Info className=\"h-4 w-4\" />\r\n        <AlertTitle>Why we ask these questions</AlertTitle>\r\n        <AlertDescription>\r\n          Under Regulation S and FATCA, we need to determine your US Person status for tax and regulatory compliance purposes.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-3\">\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isUSCitizen\"\r\n            label=\"Are you a US citizen?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isUSResident\"\r\n            label=\"Are you a US resident alien (permanent resident)?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSGreenCard\"\r\n            label=\"Do you hold a US Green Card?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasSubstantialUSPresence\"\r\n            label=\"Have you spent 183+ days in the US in the past 3 years?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSMailingAddress\"\r\n            label=\"Do you have a US mailing address?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSPhoneNumber\"\r\n            label=\"Do you have a US phone number?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSBankAccount\"\r\n            label=\"Do you have a US bank account?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSPowerOfAttorney\"\r\n            label=\"Have you granted power of attorney to someone in the US?\"\r\n          />\r\n\r\n          <FormField\r\n            control={form.control}\r\n            name=\"usConnectionDetails\"\r\n            render={({ field }) => (\r\n              <FormItem className=\"pt-4\">\r\n                <FormLabel>Additional US Connection Details (Optional)</FormLabel>\r\n                <FormDescription>\r\n                  Provide any additional context about your US connections\r\n                </FormDescription>\r\n                <FormControl>\r\n                  <Textarea\r\n                    placeholder=\"Any other relevant information about your US connections...\"\r\n                    className=\"min-h-[80px]\"\r\n                    {...field}\r\n                  />\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step6Schema, Step6Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { FileText, CheckCircle2, DollarSign, Briefcase, Building2, HelpCircle } from 'lucide-react'\r\n\r\nconst accreditationOptions = [\r\n  { value: 'income', label: 'Annual income over $200K (or $300K joint)', icon: DollarSign },\r\n  { value: 'net_worth', label: 'Net worth over $1M (excluding primary residence)', icon: Building2 },\r\n  { value: 'professional', label: 'Licensed professional (Series 7, 65, or 82)', icon: Briefcase },\r\n  { value: 'entity', label: 'Entity with $5M+ in assets', icon: Building2 },\r\n  { value: 'other', label: 'Other qualifying criteria', icon: HelpCircle },\r\n] as const\r\n\r\nfunction YesNoQuestion({\r\n  control,\r\n  name,\r\n  label,\r\n  description,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n  description?: string\r\n}) {\r\n  return (\r\n    <FormField\r\n      control={control}\r\n      name={name}\r\n      render={({ field }) => (\r\n        <FormItem className=\"p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors\">\r\n          <div className=\"flex items-start justify-between gap-4\">\r\n            <div className=\"flex-1\">\r\n              <FormLabel className=\"text-base font-medium\">{label}</FormLabel>\r\n              {description && (\r\n                <FormDescription className=\"mt-1\">{description}</FormDescription>\r\n              )}\r\n            </div>\r\n            <FormControl>\r\n              <RadioGroup\r\n                onValueChange={field.onChange}\r\n                value={field.value}\r\n                className=\"flex gap-2\"\r\n              >\r\n                {['yes', 'no'].map((value) => (\r\n                  <label\r\n                    key={value}\r\n                    className={cn(\r\n                      'px-4 py-2 rounded-lg text-sm font-medium cursor-pointer transition-all capitalize',\r\n                      field.value === value\r\n                        ? value === 'yes'\r\n                          ? 'bg-emerald-500 text-white'\r\n                          : 'bg-red-500 text-white'\r\n                        : 'bg-muted text-muted-foreground hover:bg-muted/80'\r\n                    )}\r\n                  >\r\n                    <RadioGroupItem value={value} className=\"sr-only\" />\r\n                    {value}\r\n                  </label>\r\n                ))}\r\n              </RadioGroup>\r\n            </FormControl>\r\n          </div>\r\n          <FormMessage />\r\n        </FormItem>\r\n      )}\r\n    />\r\n  )\r\n}\r\n\r\nexport function Step6OfferDetails() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step6')\r\n\r\n  const form = useForm<Step6Data>({\r\n    resolver: zodResolver(step6Schema),\r\n    defaultValues: existingData || (getStepDefaults(6) as Step6Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step6', values as Step6Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <FileText className=\"h-6 w-6\" />\r\n          Offer Details\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Accreditation and offering acknowledgments\r\n        </p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n        <FileText className=\"h-4 w-4\" />\r\n        <AlertTitle>US Investor Requirements</AlertTitle>\r\n        <AlertDescription>\r\n          Under Regulation D, we need to verify your accredited investor status before you can participate in this offering.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isAccreditedInvestor\"\r\n            label=\"Are you an accredited investor?\"\r\n            description=\"Under SEC Regulation D, accredited investors meet specific income or net worth thresholds\"\r\n          />\r\n\r\n          {watchedValues.isAccreditedInvestor === 'yes' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"accreditationBasis\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>On what basis do you qualify?</FormLabel>\r\n                  <FormDescription>\r\n                    Select the criteria that best describes your accredited investor status\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"grid gap-3 mt-3\"\r\n                    >\r\n                      {accreditationOptions.map((option) => {\r\n                        const Icon = option.icon\r\n                        return (\r\n                          <label\r\n                            key={option.value}\r\n                            className={cn(\r\n                              'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                              field.value === option.value\r\n                                ? 'border-emerald-500 bg-emerald-500/10'\r\n                                : 'border-border hover:border-muted-foreground/50'\r\n                            )}\r\n                          >\r\n                            <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                            <div\r\n                              className={cn(\r\n                                'p-2 rounded-lg',\r\n                                field.value === option.value\r\n                                  ? 'bg-emerald-500 text-white'\r\n                                  : 'bg-muted text-muted-foreground'\r\n                              )}\r\n                            >\r\n                              <Icon className=\"h-4 w-4\" />\r\n                            </div>\r\n                            <span className=\"font-medium\">{option.label}</span>\r\n                            {field.value === option.value && (\r\n                              <CheckCircle2 className=\"h-5 w-5 text-emerald-500 ml-auto\" />\r\n                            )}\r\n                          </label>\r\n                        )\r\n                      })}\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasReceivedOfferingMaterials\"\r\n            label=\"Have you received and reviewed the offering materials?\"\r\n            description=\"Including the Private Placement Memorandum (PPM) and related documents\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"understandsRestrictions\"\r\n            label=\"Do you understand the restrictions on transfer and resale?\"\r\n            description=\"Securities offered under Regulation D cannot be freely resold and are subject to holding periods\"\r\n          />\r\n\r\n          {watchedValues.hasReceivedOfferingMaterials === 'yes' &&\r\n            watchedValues.understandsRestrictions === 'yes' && (\r\n              <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n                <AlertDescription>\r\n                  Great! You've confirmed receipt of materials and understanding of restrictions.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step7Schema, Step7Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { FileCheck, AlertTriangle, CheckCircle2 } from 'lucide-react'\r\n\r\nconst complianceItems = [\r\n  {\r\n    name: 'acknowledgesFATCA',\r\n    title: 'FATCA Acknowledgment',\r\n    description:\r\n      'I acknowledge that as a US Person, I am subject to the Foreign Account Tax Compliance Act (FATCA) and may be required to provide additional documentation.',\r\n    icon: 'ðŸ›ï¸',\r\n  },\r\n  {\r\n    name: 'willProvideW9',\r\n    title: 'Form W-9 Requirement',\r\n    description:\r\n      'I agree to provide a completed Form W-9 (Request for Taxpayer Identification Number and Certification) if required.',\r\n    icon: 'ðŸ“‹',\r\n  },\r\n  {\r\n    name: 'understandsWithholding',\r\n    title: 'Withholding Requirements',\r\n    description:\r\n      'I understand that backup withholding may apply at a rate of 24% if I fail to provide a valid TIN or fail to certify my status.',\r\n    icon: 'ðŸ’°',\r\n  },\r\n  {\r\n    name: 'certifiesTaxCompliance',\r\n    title: 'Tax Compliance Certification',\r\n    description:\r\n      'I certify that I am in compliance with my US federal and state tax obligations, or I am working with a tax advisor to resolve any outstanding issues.',\r\n    icon: 'âœ…',\r\n  },\r\n  {\r\n    name: 'acknowledgesReportingObligations',\r\n    title: 'Reporting Obligations',\r\n    description:\r\n      'I acknowledge that the fund may be required to report my investment information to the IRS and/or relevant tax authorities under FATCA and other applicable laws.',\r\n    icon: 'ðŸ“Š',\r\n  },\r\n] as const\r\n\r\nexport function Step7USCompliance() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step7')\r\n\r\n  const form = useForm<Step7Data>({\r\n    resolver: zodResolver(step7Schema),\r\n    defaultValues: existingData || (getStepDefaults(7) as Step7Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n  const allChecked = complianceItems.every(\r\n    (item) => watchedValues[item.name as keyof Step7Data] === true\r\n  )\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step7', values as Step7Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <FileCheck className=\"h-6 w-6\" />\r\n          US Tax Compliance\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">FATCA and reporting requirements</p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n        <AlertTriangle className=\"h-4 w-4\" />\r\n        <AlertTitle>Important Tax Information</AlertTitle>\r\n        <AlertDescription>\r\n          As a US Person, you are subject to specific tax reporting requirements. Please review and\r\n          acknowledge each item below.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-4\">\r\n          {complianceItems.map((item) => (\r\n            <FormField\r\n              key={item.name}\r\n              control={form.control}\r\n              name={item.name as keyof Step7Data}\r\n              render={({ field }) => (\r\n                <FormItem\r\n                  className={cn(\r\n                    'p-4 rounded-lg border-2 transition-all',\r\n                    field.value\r\n                      ? 'border-emerald-500/50 bg-emerald-500/5'\r\n                      : 'border-border hover:border-muted-foreground/50'\r\n                  )}\r\n                >\r\n                  <div className=\"flex items-start gap-4\">\r\n                    <FormControl>\r\n                      <Checkbox\r\n                        checked={field.value as boolean}\r\n                        onCheckedChange={field.onChange}\r\n                        className=\"mt-1\"\r\n                      />\r\n                    </FormControl>\r\n                    <div className=\"flex-1\">\r\n                      <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                        <span>{item.icon}</span>\r\n                        {item.title}\r\n                        {field.value && (\r\n                          <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto\" />\r\n                        )}\r\n                      </FormLabel>\r\n                      <p className=\"text-sm text-muted-foreground mt-1\">{item.description}</p>\r\n                    </div>\r\n                  </div>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          ))}\r\n        </div>\r\n      </Form>\r\n\r\n      {allChecked && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertDescription>\r\n            All US tax compliance acknowledgments completed. You may proceed to the next step.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step8Schema,\r\n  Step8Data,\r\n  getStepDefaults,\r\n  educationLevelOptions,\r\n  employmentStatusOptions,\r\n  incomeRangeOptions,\r\n  netWorthRangeOptions,\r\n  investmentObjectiveOptions,\r\n  riskToleranceOptions,\r\n  timeHorizonOptions,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { TrendingUp, GraduationCap, Briefcase, DollarSign, Target, Clock } from 'lucide-react'\r\n\r\nconst alternativeInvestmentOptions = [\r\n  { value: 'private_equity', label: 'Private Equity' },\r\n  { value: 'venture_capital', label: 'Venture Capital' },\r\n  { value: 'hedge_funds', label: 'Hedge Funds' },\r\n  { value: 'real_estate', label: 'Real Estate (non-REIT)' },\r\n  { value: 'commodities', label: 'Commodities' },\r\n  { value: 'structured_products', label: 'Structured Products' },\r\n  { value: 'cryptocurrency', label: 'Cryptocurrency' },\r\n]\r\n\r\nfunction RadioOptionGroup({\r\n  field,\r\n  options,\r\n  columns = 2,\r\n}: {\r\n  field: any\r\n  options: readonly { value: string; label: string }[]\r\n  columns?: number\r\n}) {\r\n  return (\r\n    <RadioGroup\r\n      onValueChange={field.onChange}\r\n      value={field.value}\r\n      className={cn('grid gap-3 mt-2', columns === 3 ? 'md:grid-cols-3' : 'md:grid-cols-2')}\r\n    >\r\n      {options.map((option) => (\r\n        <label\r\n          key={option.value}\r\n          className={cn(\r\n            'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n            field.value === option.value\r\n              ? 'border-emerald-500 bg-emerald-500/10'\r\n              : 'border-border hover:border-muted-foreground/50'\r\n          )}\r\n        >\r\n          <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n          <div\r\n            className={cn(\r\n              'w-4 h-4 rounded-full border-2 flex items-center justify-center',\r\n              field.value === option.value ? 'border-emerald-500' : 'border-slate-500'\r\n            )}\r\n          >\r\n            {field.value === option.value && (\r\n              <div className=\"w-2 h-2 rounded-full bg-emerald-500\" />\r\n            )}\r\n          </div>\r\n          <span className=\"text-sm\">{option.label}</span>\r\n        </label>\r\n      ))}\r\n    </RadioGroup>\r\n  )\r\n}\r\n\r\nexport function Step8Suitability() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step8')\r\n\r\n  const form = useForm<Step8Data>({\r\n    resolver: zodResolver(step8Schema),\r\n    defaultValues: existingData || (getStepDefaults(8) as Step8Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step8', values as Step8Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <TrendingUp className=\"h-6 w-6\" />\r\n          Investment Suitability\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">Help us understand your financial profile</p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-8\">\r\n          {/* Education & Employment */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <GraduationCap className=\"h-5 w-5 text-blue-500\" />\r\n              Education & Employment\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"educationLevel\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Highest level of education</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={educationLevelOptions} columns={3} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"employmentStatus\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Employment status</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={employmentStatusOptions} columns={3} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {(watchedValues.employmentStatus === 'employed' ||\r\n              watchedValues.employmentStatus === 'self_employed') && (\r\n              <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"occupation\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Occupation</FormLabel>\r\n                      <FormControl>\r\n                        <Input placeholder=\"e.g., Software Engineer\" {...field} />\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"employer\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>\r\n                        {watchedValues.employmentStatus === 'self_employed'\r\n                          ? 'Business Name'\r\n                          : 'Employer'}\r\n                      </FormLabel>\r\n                      <FormControl>\r\n                        <Input placeholder=\"Company name\" {...field} />\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"yearsInvestingExperience\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Years of investment experience</FormLabel>\r\n                  <FormControl>\r\n                    <Input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"60\"\r\n                      placeholder=\"e.g., 10\"\r\n                      {...field}\r\n                      className=\"max-w-[150px]\"\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Financial Profile */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <DollarSign className=\"h-5 w-5 text-emerald-500\" />\r\n              Financial Profile\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"annualIncome\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Annual income</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={incomeRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"netWorth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Total net worth (excluding primary residence)</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={netWorthRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"liquidNetWorth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Liquid net worth (cash and readily convertible assets)</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={netWorthRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Investment Preferences */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Target className=\"h-5 w-5 text-purple-500\" />\r\n              Investment Preferences\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentObjective\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Primary investment objective</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={investmentObjectiveOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"riskTolerance\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Risk tolerance</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={riskToleranceOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentHorizon\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel className=\"flex items-center gap-2\">\r\n                    <Clock className=\"h-4 w-4\" />\r\n                    Investment time horizon\r\n                  </FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={timeHorizonOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Alternative Investment Experience */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Briefcase className=\"h-5 w-5 text-amber-500\" />\r\n              Alternative Investment Experience\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"percentageOfNetWorthToInvest\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Percentage of net worth you plan to invest in this offering</FormLabel>\r\n                  <FormDescription>\r\n                    Enter a percentage between 1 and 100\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <div className=\"flex items-center gap-2 max-w-[150px]\">\r\n                      <Input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        max=\"100\"\r\n                        placeholder=\"e.g., 5\"\r\n                        {...field}\r\n                      />\r\n                      <span className=\"text-muted-foreground\">%</span>\r\n                    </div>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"hasAlternativeInvestmentExperience\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>\r\n                    Do you have prior experience with alternative investments?\r\n                  </FormLabel>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"flex gap-4 mt-2\"\r\n                    >\r\n                      {['yes', 'no'].map((value) => (\r\n                        <label\r\n                          key={value}\r\n                          className={cn(\r\n                            'px-6 py-2 rounded-lg border cursor-pointer transition-all capitalize',\r\n                            field.value === value\r\n                              ? 'border-emerald-500 bg-emerald-500/10'\r\n                              : 'border-border hover:border-muted-foreground/50'\r\n                          )}\r\n                        >\r\n                          <RadioGroupItem value={value} className=\"sr-only\" />\r\n                          {value}\r\n                        </label>\r\n                      ))}\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {watchedValues.hasAlternativeInvestmentExperience === 'yes' && (\r\n              <FormField\r\n                control={form.control}\r\n                name=\"alternativeInvestmentTypes\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Which types of alternative investments? (Select all that apply)</FormLabel>\r\n                    <div className=\"grid gap-2 mt-2 md:grid-cols-2\">\r\n                      {alternativeInvestmentOptions.map((option) => (\r\n                        <label\r\n                          key={option.value}\r\n                          className={cn(\r\n                            'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n                            field.value?.includes(option.value)\r\n                              ? 'border-emerald-500 bg-emerald-500/10'\r\n                              : 'border-border hover:border-muted-foreground/50'\r\n                          )}\r\n                        >\r\n                          <Checkbox\r\n                            checked={field.value?.includes(option.value)}\r\n                            onCheckedChange={(checked) => {\r\n                              const current = field.value || []\r\n                              if (checked) {\r\n                                field.onChange([...current, option.value])\r\n                              } else {\r\n                                field.onChange(current.filter((v: string) => v !== option.value))\r\n                              }\r\n                            }}\r\n                          />\r\n                          <span className=\"text-sm\">{option.label}</span>\r\n                        </label>\r\n                      ))}\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step9Schema, Step9Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { AlertTriangle, CheckCircle2, Shield, Lock, FileText, DollarSign, Scale, Receipt, BookOpen, Users } from 'lucide-react'\r\n\r\nconst riskItems = [\r\n  {\r\n    name: 'acknowledgesIlliquidity',\r\n    title: 'Illiquidity Risk',\r\n    description:\r\n      'I understand that interests in the Fund are illiquid and there is no public market for these securities. I may not be able to sell my investment or access my capital for an extended period.',\r\n    icon: Lock,\r\n  },\r\n  {\r\n    name: 'acknowledgesLossRisk',\r\n    title: 'Capital Loss Risk',\r\n    description:\r\n      'I understand that investing in alternative investments involves significant risks, including the potential loss of my entire investment.',\r\n    icon: DollarSign,\r\n  },\r\n  {\r\n    name: 'acknowledgesNoGuarantees',\r\n    title: 'No Guarantees',\r\n    description:\r\n      'I understand that there are no guarantees of returns or distributions, and past performance is not indicative of future results.',\r\n    icon: AlertTriangle,\r\n  },\r\n  {\r\n    name: 'acknowledgesLimitedInfo',\r\n    title: 'Limited Information',\r\n    description:\r\n      'I understand that I may receive limited information about the underlying investments and that the Fund is not subject to the same disclosure requirements as public companies.',\r\n    icon: FileText,\r\n  },\r\n  {\r\n    name: 'acknowledgesNoRegulation',\r\n    title: 'Limited Regulatory Protection',\r\n    description:\r\n      'I understand that alternative investment funds are generally not registered with the SEC and do not receive the same regulatory protections as registered investment companies.',\r\n    icon: Shield,\r\n  },\r\n  {\r\n    name: 'acknowledgesConflicts',\r\n    title: 'Conflicts of Interest',\r\n    description:\r\n      'I understand that the Fund Manager and its affiliates may have conflicts of interest in managing the Fund, and I have reviewed the disclosure of potential conflicts.',\r\n    icon: Users,\r\n  },\r\n  {\r\n    name: 'acknowledgesTaxImplications',\r\n    title: 'Tax Implications',\r\n    description:\r\n      'I understand that this investment may have complex tax implications and I should consult with my own tax advisor regarding my specific situation.',\r\n    icon: Receipt,\r\n  },\r\n  {\r\n    name: 'acknowledgesFees',\r\n    title: 'Fees and Expenses',\r\n    description:\r\n      'I understand and accept the fee structure including management fees, performance fees, and other expenses that will reduce my returns.',\r\n    icon: Scale,\r\n  },\r\n  {\r\n    name: 'hasReadOfferingDocs',\r\n    title: 'Offering Documents Review',\r\n    description:\r\n      'I confirm that I have received, read, and understand the Private Placement Memorandum (PPM), Limited Partnership Agreement, and other offering documents.',\r\n    icon: BookOpen,\r\n  },\r\n  {\r\n    name: 'hasSoughtIndependentAdvice',\r\n    title: 'Independent Advice',\r\n    description:\r\n      'I confirm that I have had the opportunity to seek independent legal, tax, and financial advice regarding this investment.',\r\n    icon: Scale,\r\n  },\r\n] as const\r\n\r\nexport function Step9WaiverRisk() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step9')\r\n\r\n  const form = useForm<Step9Data>({\r\n    resolver: zodResolver(step9Schema),\r\n    defaultValues: existingData || (getStepDefaults(9) as Step9Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  // Calculate progress\r\n  const totalItems = riskItems.length\r\n  const checkedItems = riskItems.filter(\r\n    (item) => watchedValues[item.name as keyof Step9Data] === true\r\n  ).length\r\n  const progress = (checkedItems / totalItems) * 100\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step9', values as Step9Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <AlertTriangle className=\"h-6 w-6 text-amber-500\" />\r\n          Risk Acknowledgments\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Please review and acknowledge each risk factor\r\n        </p>\r\n      </div>\r\n\r\n      {/* Progress indicator */}\r\n      <div className=\"bg-muted p-4 rounded-lg space-y-2 border border-border\">\r\n        <div className=\"flex justify-between text-sm\">\r\n          <span className=\"text-muted-foreground\">Acknowledgment Progress</span>\r\n          <span className=\"font-medium\">\r\n            {checkedItems} of {totalItems} completed\r\n          </span>\r\n        </div>\r\n        <Progress value={progress} className=\"h-2\" />\r\n      </div>\r\n\r\n      <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n        <AlertTriangle className=\"h-4 w-4\" />\r\n        <AlertTitle>Important</AlertTitle>\r\n        <AlertDescription>\r\n          Please carefully read and acknowledge each item below. These acknowledgments confirm your\r\n          understanding of the risks associated with this investment.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-3\">\r\n          {riskItems.map((item, index) => {\r\n            const Icon = item.icon\r\n            return (\r\n              <FormField\r\n                key={item.name}\r\n                control={form.control}\r\n                name={item.name as keyof Step9Data}\r\n                render={({ field }) => (\r\n                  <FormItem\r\n                    className={cn(\r\n                      'p-4 rounded-lg border-2 transition-all bg-card',\r\n                      field.value\r\n                        ? 'border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950'\r\n                        : 'border-border hover:border-muted-foreground/50'\r\n                    )}\r\n                  >\r\n                    <div className=\"flex items-start gap-4\">\r\n                      <FormControl>\r\n                        <Checkbox\r\n                          checked={field.value as boolean}\r\n                          onCheckedChange={field.onChange}\r\n                          className=\"mt-1\"\r\n                        />\r\n                      </FormControl>\r\n                      <div className=\"flex-1\">\r\n                        <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                          <Icon\r\n                            className={cn(\r\n                              'h-4 w-4',\r\n                              field.value ? 'text-emerald-500' : 'text-muted-foreground'\r\n                            )}\r\n                          />\r\n                          <span className=\"text-xs text-muted-foreground mr-2\">\r\n                            {index + 1}.\r\n                          </span>\r\n                          {item.title}\r\n                          {field.value && (\r\n                            <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto flex-shrink-0\" />\r\n                          )}\r\n                        </FormLabel>\r\n                        <p className=\"text-sm text-muted-foreground mt-2 leading-relaxed\">\r\n                          {item.description}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            )\r\n          })}\r\n        </div>\r\n      </Form>\r\n\r\n      {checkedItems === totalItems && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertDescription>\r\n            All risk acknowledgments completed. You may proceed to the final step to review and sign.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step10Schema, Step10Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { PenTool, CheckCircle2, User, Briefcase, Shield, FileText, TrendingUp, AlertTriangle, Calendar } from 'lucide-react'\r\n\r\nconst certificationItems = [\r\n  {\r\n    name: 'certifiesAccuracy',\r\n    title: 'Accuracy Certification',\r\n    description:\r\n      'I certify that all information provided in this questionnaire is true, complete, and accurate to the best of my knowledge.',\r\n  },\r\n  {\r\n    name: 'certifiesNoOmissions',\r\n    title: 'No Material Omissions',\r\n    description:\r\n      'I certify that I have not omitted any material information that could affect the evaluation of my suitability for this investment.',\r\n  },\r\n  {\r\n    name: 'agreesToUpdates',\r\n    title: 'Update Obligation',\r\n    description:\r\n      'I agree to promptly notify VERSO Holdings of any material changes to the information provided herein.',\r\n  },\r\n  {\r\n    name: 'consentToProcessing',\r\n    title: 'Data Processing Consent',\r\n    description:\r\n      'I consent to the collection, processing, and storage of my personal information for compliance and regulatory purposes.',\r\n  },\r\n] as const\r\n\r\nfunction SummarySection({\r\n  icon: Icon,\r\n  title,\r\n  items,\r\n}: {\r\n  icon: React.ComponentType<{ className?: string }>\r\n  title: string\r\n  items: { label: string; value: string | undefined }[]\r\n}) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <h4 className=\"font-medium flex items-center gap-2 text-sm text-muted-foreground\">\r\n        <Icon className=\"h-4 w-4\" />\r\n        {title}\r\n      </h4>\r\n      <div className=\"grid gap-1 pl-6\">\r\n        {items\r\n          .filter((item) => item.value)\r\n          .map((item, idx) => (\r\n            <div key={idx} className=\"text-sm\">\r\n              <span className=\"text-muted-foreground\">{item.label}:</span>{' '}\r\n              <span className=\"font-medium\">{item.value}</span>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Step10ReviewSign() {\r\n  const { getStepData, updateStepData, formData } = useWizard()\r\n  const existingData = getStepData('step10')\r\n\r\n  const form = useForm<Step10Data>({\r\n    resolver: zodResolver(step10Schema),\r\n    defaultValues: existingData || (getStepDefaults(10) as Step10Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n  const allCertified = certificationItems.every(\r\n    (item) => watchedValues[item.name as keyof Step10Data] === true\r\n  )\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step10', values as Step10Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  // Extract summary data\r\n  const step1 = formData.step1\r\n  const step2 = formData.step2\r\n  const step4 = formData.step4\r\n  const step8 = formData.step8\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <PenTool className=\"h-6 w-6 text-emerald-500\" />\r\n          Review & Sign\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Final review and certification\r\n        </p>\r\n      </div>\r\n\r\n      {/* Summary Section */}\r\n      <div className=\"bg-muted p-6 rounded-lg space-y-6 border border-border\">\r\n        <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n          <FileText className=\"h-5 w-5\" />\r\n          Application Summary\r\n        </h3>\r\n\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <SummarySection\r\n            icon={User}\r\n            title=\"Personal Information\"\r\n            items={[\r\n              { label: 'Name', value: step1?.fullName },\r\n              { label: 'Email', value: step1?.email },\r\n              { label: 'Nationality', value: step1?.nationality },\r\n              { label: 'Country', value: step1?.countryOfResidence },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={Briefcase}\r\n            title=\"Investment Details\"\r\n            items={[\r\n              {\r\n                label: 'Type',\r\n                value:\r\n                  step2?.investmentType === 'other'\r\n                    ? step2?.investmentTypeOther\r\n                    : step2?.investmentType,\r\n              },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={Shield}\r\n            title=\"Compliance Status\"\r\n            items={[\r\n              { label: 'PEP Status', value: step4?.isPEP === 'yes' ? 'Yes' : 'No' },\r\n              { label: 'US Person', value: step4?.isUSPerson === 'yes' ? 'Yes' : 'No' },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={TrendingUp}\r\n            title=\"Investment Profile\"\r\n            items={[\r\n              { label: 'Risk Tolerance', value: step8?.riskTolerance },\r\n              { label: 'Time Horizon', value: step8?.investmentHorizon },\r\n              { label: 'Objective', value: step8?.investmentObjective },\r\n            ]}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <Separator />\r\n\r\n      {/* Certifications */}\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <h3 className=\"font-semibold text-lg mb-4\">Certifications</h3>\r\n            <div className=\"space-y-3\">\r\n              {certificationItems.map((item) => (\r\n                <FormField\r\n                  key={item.name}\r\n                  control={form.control}\r\n                  name={item.name as keyof Step10Data}\r\n                  render={({ field }) => (\r\n                    <FormItem\r\n                      className={cn(\r\n                        'p-4 rounded-lg border-2 transition-all bg-card',\r\n                        field.value\r\n                          ? 'border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950'\r\n                          : 'border-border hover:border-muted-foreground/50'\r\n                      )}\r\n                    >\r\n                      <div className=\"flex items-start gap-4\">\r\n                        <FormControl>\r\n                          <Checkbox\r\n                            checked={field.value as boolean}\r\n                            onCheckedChange={field.onChange}\r\n                            className=\"mt-1\"\r\n                          />\r\n                        </FormControl>\r\n                        <div className=\"flex-1\">\r\n                          <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                            {item.title}\r\n                            {field.value && (\r\n                              <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto\" />\r\n                            )}\r\n                          </FormLabel>\r\n                          <p className=\"text-sm text-muted-foreground mt-1\">\r\n                            {item.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Signature Section */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <PenTool className=\"h-5 w-5 text-emerald-500\" />\r\n              Electronic Signature\r\n            </h3>\r\n\r\n            <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n              <FileText className=\"h-4 w-4\" />\r\n              <AlertTitle>Electronic Signature Notice</AlertTitle>\r\n              <AlertDescription>\r\n                By typing your name below, you are providing an electronic signature that is legally\r\n                equivalent to a handwritten signature under applicable law.\r\n              </AlertDescription>\r\n            </Alert>\r\n\r\n            <div className=\"grid gap-4 md:grid-cols-2\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"signatureName\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Type your full legal name</FormLabel>\r\n                    <FormDescription>\r\n                      This serves as your electronic signature\r\n                    </FormDescription>\r\n                    <FormControl>\r\n                      <Input\r\n                        placeholder=\"John Smith\"\r\n                        className=\"font-serif text-lg\"\r\n                        {...field}\r\n                      />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"signatureDate\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"flex items-center gap-2\">\r\n                      <Calendar className=\"h-4 w-4\" />\r\n                      Signature Date\r\n                    </FormLabel>\r\n                    <FormDescription>Today&apos;s date</FormDescription>\r\n                    <FormControl>\r\n                      <Input type=\"date\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            </div>\r\n\r\n            {/* Signature Preview */}\r\n            {watchedValues.signatureName && (\r\n              <div className=\"p-4 bg-muted rounded-lg border border-border\">\r\n                <p className=\"text-xs text-muted-foreground mb-2\">Signature Preview</p>\r\n                <p className=\"font-serif text-2xl italic text-emerald-600 dark:text-emerald-400\">\r\n                  {watchedValues.signatureName}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Form>\r\n\r\n      {allCertified && watchedValues.signatureName && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertTitle>Ready to Submit</AlertTitle>\r\n          <AlertDescription>\r\n            All certifications completed and signature provided. Click &quot;Submit&quot; below to\r\n            finalize your application.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Loader2, CheckCircle2, AlertTriangle, Sparkles } from 'lucide-react'\r\nimport { WizardProvider, useWizard } from './WizardContext'\r\nimport { WizardProgress } from './WizardProgress'\r\nimport { WizardNavigation } from './WizardNavigation'\r\nimport { Step1AboutYou } from './steps/Step1AboutYou'\r\nimport { Step2InvestmentType } from './steps/Step2InvestmentType'\r\nimport { Step3WellInformed } from './steps/Step3WellInformed'\r\nimport { Step4Compliance } from './steps/Step4Compliance'\r\nimport { Step5USPerson } from './steps/Step5USPerson'\r\nimport { Step6OfferDetails } from './steps/Step6OfferDetails'\r\nimport { Step7USCompliance } from './steps/Step7USCompliance'\r\nimport { Step8Suitability } from './steps/Step8Suitability'\r\nimport { Step9WaiverRisk } from './steps/Step9WaiverRisk'\r\nimport { Step10ReviewSign } from './steps/Step10ReviewSign'\r\nimport { STEP_CONFIG } from '../schemas/kyc-questionnaire-schema'\r\nimport type { KYCQuestionnaireData } from '../schemas/kyc-questionnaire-schema'\r\n\r\ninterface KYCQuestionnaireWizardProps {\r\n  initialData?: Partial<KYCQuestionnaireData>\r\n  submissionId?: string\r\n  onComplete?: () => void\r\n}\r\n\r\nfunction WizardContent({ onComplete }: { onComplete?: () => void }) {\r\n  const { currentStep, visibleSteps, formData, isLoading, submitQuestionnaire } = useWizard()\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [submitSuccess, setSubmitSuccess] = useState(false)\r\n  const [submitError, setSubmitError] = useState<string | null>(null)\r\n\r\n  // Map step number to component\r\n  const stepComponents: Record<number, React.ReactNode> = {\r\n    1: <Step1AboutYou />,\r\n    2: <Step2InvestmentType />,\r\n    3: <Step3WellInformed />,\r\n    4: <Step4Compliance />,\r\n    5: <Step5USPerson />,\r\n    6: <Step6OfferDetails />,\r\n    7: <Step7USCompliance />,\r\n    8: <Step8Suitability />,\r\n    9: <Step9WaiverRisk />,\r\n    10: <Step10ReviewSign />,\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    setIsSubmitting(true)\r\n    setSubmitError(null)\r\n\r\n    try {\r\n      const success = await submitQuestionnaire()\r\n      if (!success) {\r\n        // submitQuestionnaire already shows toast with specific error\r\n        // Just don't show success screen - keep user on the form\r\n        return\r\n      }\r\n      setSubmitSuccess(true)\r\n      onComplete?.()\r\n    } catch (error) {\r\n      setSubmitError(error instanceof Error ? error.message : 'Failed to submit questionnaire')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center space-y-4\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-emerald-500\" />\r\n          <p className=\"text-muted-foreground\">Loading your questionnaire...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (submitSuccess) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center space-y-6 max-w-md mx-auto\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"h-24 w-24 rounded-full bg-emerald-500/20 animate-pulse\" />\r\n            </div>\r\n            <CheckCircle2 className=\"h-16 w-16 mx-auto text-emerald-500 relative z-10\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n              <Sparkles className=\"h-5 w-5 text-amber-500\" />\r\n              Questionnaire Submitted!\r\n            </h2>\r\n            <p className=\"text-muted-foreground\">\r\n              Thank you for completing your KYC questionnaire. Our compliance team will review your\r\n              submission and contact you if any additional information is needed.\r\n            </p>\r\n          </div>\r\n          <Alert className=\"bg-blue-500/10 border-blue-500/30 text-left\">\r\n            <AlertTitle>What happens next?</AlertTitle>\r\n            <AlertDescription>\r\n              <ul className=\"list-disc list-inside space-y-1 mt-2\">\r\n                <li>Our team will review your submission within 2-3 business days</li>\r\n                <li>You may be asked to provide supporting documentation</li>\r\n                <li>You&apos;ll receive an email notification when your status is updated</li>\r\n              </ul>\r\n            </AlertDescription>\r\n          </Alert>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const currentStepConfig = STEP_CONFIG[currentStep - 1]\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Progress */}\r\n      <WizardProgress />\r\n\r\n      {/* Current Step Header */}\r\n      <div className=\"text-center py-2\">\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Step {visibleSteps.indexOf(currentStep) + 1} of {visibleSteps.length}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Error Alert */}\r\n      {submitError && (\r\n        <Alert className=\"bg-red-500/10 border-red-500/30\">\r\n          <AlertTriangle className=\"h-4 w-4\" />\r\n          <AlertTitle>Submission Error</AlertTitle>\r\n          <AlertDescription>{submitError}</AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Step Content */}\r\n      <Card className=\"border-border bg-card shadow-sm\">\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"min-h-[400px]\">{stepComponents[currentStep]}</div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Navigation */}\r\n      <WizardNavigation onSubmit={handleSubmit} isSubmitting={isSubmitting} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function KYCQuestionnaireWizard({\r\n  initialData,\r\n  submissionId,\r\n  onComplete,\r\n}: KYCQuestionnaireWizardProps) {\r\n  return (\r\n    <WizardProvider\r\n      initialData={initialData}\r\n      submissionId={submissionId}\r\n      onComplete={onComplete}\r\n    >\r\n      <WizardContent onComplete={onComplete} />\r\n    </WizardProvider>\r\n  )\r\n}\r\n\r\n// Compact version for embedding in profile page\r\nexport function KYCQuestionnaireCompact(props: KYCQuestionnaireWizardProps) {\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <KYCQuestionnaireWizard {...props} />\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState } from 'react'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { EntityKYCDocuments } from './entity-kyc-documents'\r\nimport { EntityMembersTab } from './entity-members-tab'\r\nimport { EntityFormDialog } from './entity-form-dialog'\r\nimport {\r\n  Building2,\r\n  MapPin,\r\n  FileText,\r\n  User,\r\n  Users,\r\n  Calendar,\r\n  Hash,\r\n  Shield,\r\n  Mail,\r\n  Phone\r\n} from 'lucide-react'\r\n\r\ninterface CounterpartyEntity {\r\n  id: string\r\n  entity_type: string\r\n  legal_name: string\r\n  registration_number?: string\r\n  jurisdiction?: string\r\n  tax_id?: string\r\n  formation_date?: string\r\n  registered_address?: {\r\n    street?: string\r\n    city?: string\r\n    state?: string\r\n    postal_code?: string\r\n    country?: string\r\n  }\r\n  representative_name?: string\r\n  representative_title?: string\r\n  representative_email?: string\r\n  representative_phone?: string\r\n  notes?: string\r\n  kyc_status?: string\r\n  created_at?: string\r\n}\r\n\r\ninterface EntityDetailDialogProps {\r\n  open: boolean\r\n  onClose: () => void\r\n  entity: CounterpartyEntity | null\r\n  onUpdate: () => void\r\n}\r\n\r\nexport function EntityDetailDialog({ open, onClose, entity, onUpdate }: EntityDetailDialogProps) {\r\n  const [activeTab, setActiveTab] = useState('details')\r\n  const [editDialogOpen, setEditDialogOpen] = useState(false)\r\n\r\n  if (!entity) return null\r\n\r\n  const getEntityTypeLabel = (type: string) => {\r\n    const labels: Record<string, string> = {\r\n      trust: 'Trust',\r\n      llc: 'LLC',\r\n      partnership: 'Partnership',\r\n      family_office: 'Family Office',\r\n      law_firm: 'Law Firm',\r\n      investment_bank: 'Investment Bank',\r\n      fund: 'Fund',\r\n      corporation: 'Corporation',\r\n      other: 'Other'\r\n    }\r\n    return labels[type] || type\r\n  }\r\n\r\n  const getKYCStatusBadge = (status?: string) => {\r\n    if (!status) {\r\n      return (\r\n        <Badge variant=\"outline\" className=\"bg-gray-500/20 text-gray-300 border-gray-500/30\">\r\n          No KYC\r\n        </Badge>\r\n      )\r\n    }\r\n\r\n    switch (status) {\r\n      case 'approved':\r\n        return (\r\n          <Badge variant=\"default\" className=\"bg-emerald-500/20 text-emerald-300 border-emerald-500/30\">\r\n            Approved\r\n          </Badge>\r\n        )\r\n      case 'pending':\r\n        return (\r\n          <Badge variant=\"secondary\" className=\"bg-amber-500/20 text-amber-300 border-amber-500/30\">\r\n            Pending Review\r\n          </Badge>\r\n        )\r\n      case 'rejected':\r\n        return (\r\n          <Badge variant=\"destructive\" className=\"bg-rose-500/20 text-rose-300 border-rose-500/30\">\r\n            Rejected\r\n          </Badge>\r\n        )\r\n      default:\r\n        return <Badge variant=\"outline\">{status}</Badge>\r\n    }\r\n  }\r\n\r\n  const formatAddress = (address?: CounterpartyEntity['registered_address']) => {\r\n    if (!address) return 'â€”'\r\n\r\n    const parts = [\r\n      address.street,\r\n      address.city,\r\n      address.state,\r\n      address.postal_code,\r\n      address.country\r\n    ].filter(Boolean)\r\n\r\n    return parts.length > 0 ? parts.join(', ') : 'â€”'\r\n  }\r\n\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return 'â€”'\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    })\r\n  }\r\n\r\n  const handleEditSuccess = () => {\r\n    setEditDialogOpen(false)\r\n    onUpdate()\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onOpenChange={onClose}>\r\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n          <DialogHeader>\r\n            <div className=\"flex items-start justify-between\">\r\n              <div className=\"flex-1\">\r\n                <DialogTitle className=\"text-2xl\">{entity.legal_name}</DialogTitle>\r\n                <DialogDescription className=\"flex items-center gap-2 mt-1\">\r\n                  <Badge variant=\"outline\">{getEntityTypeLabel(entity.entity_type)}</Badge>\r\n                  {getKYCStatusBadge(entity.kyc_status)}\r\n                </DialogDescription>\r\n              </div>\r\n            </div>\r\n          </DialogHeader>\r\n\r\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"flex-1 flex flex-col overflow-hidden\">\r\n            <TabsList className=\"grid w-full grid-cols-3\">\r\n              <TabsTrigger value=\"details\">Entity Details</TabsTrigger>\r\n              <TabsTrigger value=\"members\">Members</TabsTrigger>\r\n              <TabsTrigger value=\"kyc\">KYC Documents</TabsTrigger>\r\n            </TabsList>\r\n\r\n            <div className=\"flex-1 overflow-y-auto mt-4\">\r\n              <TabsContent value=\"details\" className=\"space-y-4 m-0\">\r\n                {/* Basic Information */}\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                      <Building2 className=\"h-5 w-5\" />\r\n                      Basic Information\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1\">Legal Name</p>\r\n                      <p className=\"font-medium\">{entity.legal_name}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1\">Entity Type</p>\r\n                      <p className=\"font-medium\">{getEntityTypeLabel(entity.entity_type)}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-1\">\r\n                        <Hash className=\"h-3 w-3\" />\r\n                        Registration Number\r\n                      </p>\r\n                      <p className=\"font-medium\">{entity.registration_number || 'â€”'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-1\">\r\n                        <Shield className=\"h-3 w-3\" />\r\n                        Tax ID / EIN\r\n                      </p>\r\n                      <p className=\"font-medium\">{entity.tax_id || 'â€”'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-1\">\r\n                        <MapPin className=\"h-3 w-3\" />\r\n                        Jurisdiction\r\n                      </p>\r\n                      <p className=\"font-medium\">{entity.jurisdiction || 'â€”'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-1\">\r\n                        <Calendar className=\"h-3 w-3\" />\r\n                        Formation Date\r\n                      </p>\r\n                      <p className=\"font-medium\">{formatDate(entity.formation_date)}</p>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Registered Address */}\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                      <MapPin className=\"h-5 w-5\" />\r\n                      Registered Address\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <p className=\"font-medium\">{formatAddress(entity.registered_address)}</p>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Authorized Representative */}\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                      <User className=\"h-5 w-5\" />\r\n                      Authorized Representative\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1\">Name</p>\r\n                      <p className=\"font-medium\">{entity.representative_name || 'â€”'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1\">Title</p>\r\n                      <p className=\"font-medium\">{entity.representative_title || 'â€”'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-1\">\r\n                        <Mail className=\"h-3 w-3\" />\r\n                        Email\r\n                      </p>\r\n                      <p className=\"font-medium\">{entity.representative_email || 'â€”'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-1\">\r\n                        <Phone className=\"h-3 w-3\" />\r\n                        Phone\r\n                      </p>\r\n                      <p className=\"font-medium\">{entity.representative_phone || 'â€”'}</p>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Notes */}\r\n                {entity.notes && (\r\n                  <Card>\r\n                    <CardHeader>\r\n                      <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                        <FileText className=\"h-5 w-5\" />\r\n                        Notes\r\n                      </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <p className=\"text-sm whitespace-pre-wrap\">{entity.notes}</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                )}\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"members\" className=\"m-0\">\r\n                <EntityMembersTab entityId={entity.id} entityName={entity.legal_name} />\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"kyc\" className=\"m-0\">\r\n                <EntityKYCDocuments entityId={entity.id} entityName={entity.legal_name} />\r\n              </TabsContent>\r\n            </div>\r\n          </Tabs>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Edit Dialog */}\r\n      <EntityFormDialog\r\n        open={editDialogOpen}\r\n        onClose={() => setEditDialogOpen(false)}\r\n        onSuccess={handleEditSuccess}\r\n        entity={entity}\r\n      />\r\n    </>\r\n  )\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 7v14', key: '1akyts' }],\n  [\n    'path',\n    {\n      d: 'M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z',\n      key: 'ruj8y',\n    },\n  ],\n];\n\n/**\n * @component @name BookOpen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgN3YxNCIgLz4KICA8cGF0aCBkPSJNMyAxOGExIDEgMCAwIDEtMS0xVjRhMSAxIDAgMCAxIDEtMWg1YTQgNCAwIDAgMSA0IDQgNCA0IDAgMCAxIDQtNGg1YTEgMSAwIDAgMSAxIDF2MTNhMSAxIDAgMCAxLTEgMWgtNmEzIDMgMCAwIDAtMyAzIDMgMyAwIDAgMC0zLTN6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/book-open\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookOpen = createLucideIcon('book-open', __iconNode);\n\nexport default BookOpen;\n"],"names":[],"mappings":"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","ignoreList":[9,26]}