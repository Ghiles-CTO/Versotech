module.exports=[961711,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(284169),e=a.i(15788),f=a.i(421908),g=a.i(663475),h=a.i(951870),i=a.i(771088),j=a.i(181608),k=a.i(155508),l=a.i(816854),m=a.i(487068),n=a.i(399580),o=a.i(966494),p=a.i(278541),q=a.i(877918),r=a.i(13542),s=a.i(478870),t=a.i(441278),u=a.i(92881),v=a.i(13289),w=a.i(871057),x=a.i(618287),y=a.i(540316),z=a.i(470305),A=a.i(249464),B=a.i(191675),C=a.i(3321),D=a.i(838086),E=a.i(264890),F=a.i(899750),G=a.i(201986),H=a.i(761854);function I({open:a,onOpenChange:d,commission:e,onSuccess:h}){let[i,j]=(0,c.useState)(!1),[k,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),u=async()=>{if(e){j(!0);try{let a=await fetch(`/api/lawyers/me/introducer-commissions/${e.id}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_reference:k||void 0,payment_date:n||void 0,notes:p||void 0})}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to confirm payment");F.toast.success(b.message||"Payment confirmed successfully"),d(!1),h?.(),m(""),o(""),q("")}catch(a){console.error("[ConfirmIntroducerPaymentModal] Error:",a),F.toast.error(a instanceof Error?a.message:"Failed to confirm payment")}finally{j(!1)}}},v=a=>{a||(m(""),o(""),q("")),d(a)};if(!e)return null;let w=(0,G.formatCurrency)(e.accrual_amount,e.currency);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Dialog,{open:a,onOpenChange:v,children:(0,b.jsxs)(z.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(z.DialogHeader,{children:[(0,b.jsxs)(z.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(t.CheckCircle,{className:"h-5 w-5 text-green-600"}),"Confirm Introducer Payment"]}),(0,b.jsx)(z.DialogDescription,{children:"Confirm that payment has been made to the introducer. This will update the commission status and notify all parties."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Introducer:"}),(0,b.jsx)("span",{className:"font-medium",children:e.introducer_name})]}),e.deal_name&&(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Deal:"}),(0,b.jsx)("span",{className:"font-medium",children:e.deal_name})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Amount:"}),(0,b.jsx)("span",{className:"text-lg font-bold text-green-600",children:w})]})]}),e.invoice_id&&(0,b.jsxs)(f.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>s(!0),children:[(0,b.jsx)(E.Eye,{className:"h-4 w-4 mr-2"}),"View Submitted Invoice"]}),!e.invoice_id&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg text-yellow-800 dark:text-yellow-200 text-sm",children:[(0,b.jsx)(D.AlertTriangle,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{children:"No invoice document attached to this commission."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"bankReference",children:"Bank Reference (Optional)"}),(0,b.jsx)(g.Input,{id:"bankReference",placeholder:"e.g., WIRE-2024-12345",value:k,onChange:a=>m(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Wire transfer reference or payment identifier"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"paymentDate",children:"Payment Date (Optional)"}),(0,b.jsx)(g.Input,{id:"paymentDate",type:"date",value:n,onChange:a=>o(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Defaults to today if not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"notes",children:"Notes (Optional)"}),(0,b.jsx)(B.Textarea,{id:"notes",placeholder:"Any additional notes about this payment...",value:p,onChange:a=>q(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg text-blue-800 dark:text-blue-200 text-sm",children:[(0,b.jsx)(l.FileText,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Notifications will be sent to:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside mt-1 text-xs",children:[(0,b.jsx)("li",{children:"Arranger (payment confirmed)"}),(0,b.jsx)("li",{children:"Introducer (payment received)"}),(0,b.jsx)("li",{children:"Staff administrators"})]})]})]})]}),(0,b.jsxs)(z.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>v(!1),disabled:i,children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:u,disabled:i,className:"bg-green-600 hover:bg-green-700",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirming..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.CheckCircle,{className:"mr-2 h-4 w-4"}),"Confirm Payment"]})})]})]})}),e.invoice_id&&(0,b.jsx)(H.DocumentViewer,{documentId:e.invoice_id,documentName:`Invoice - ${e.introducer_name}`,mimeType:"application/pdf",open:r,onClose:()=>s(!1)})]})}function J({open:a,onOpenChange:d,commission:e,onSuccess:h}){let[i,j]=(0,c.useState)(!1),[k,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),u=async()=>{if(e){j(!0);try{let a=await fetch(`/api/lawyers/me/partner-commissions/${e.id}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_reference:k||void 0,payment_date:n||void 0,notes:p||void 0})}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to confirm payment");F.toast.success(b.message||"Payment confirmed successfully"),d(!1),h?.(),m(""),o(""),q("")}catch(a){console.error("[ConfirmPartnerPaymentModal] Error:",a),F.toast.error(a instanceof Error?a.message:"Failed to confirm payment")}finally{j(!1)}}},v=a=>{a||(m(""),o(""),q("")),d(a)};if(!e)return null;let w=(0,G.formatCurrency)(e.accrual_amount,e.currency);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Dialog,{open:a,onOpenChange:v,children:(0,b.jsxs)(z.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(z.DialogHeader,{children:[(0,b.jsxs)(z.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(t.CheckCircle,{className:"h-5 w-5 text-green-600"}),"Confirm Partner Payment"]}),(0,b.jsx)(z.DialogDescription,{children:"Confirm that payment has been made to the partner. This will update the commission status and notify all parties."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Partner:"}),(0,b.jsx)("span",{className:"font-medium",children:e.partner_name})]}),e.deal_name&&(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Deal:"}),(0,b.jsx)("span",{className:"font-medium",children:e.deal_name})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Amount:"}),(0,b.jsx)("span",{className:"text-lg font-bold text-green-600",children:w})]})]}),e.invoice_id?(0,b.jsxs)(f.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>s(!0),children:[(0,b.jsx)(E.Eye,{className:"h-4 w-4 mr-2"}),"View Submitted Invoice"]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800 text-sm",children:[(0,b.jsx)(D.AlertTriangle,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{children:"No invoice document attached to this commission."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"partnerBankReference",children:"Bank Reference (Optional)"}),(0,b.jsx)(g.Input,{id:"partnerBankReference",placeholder:"e.g., WIRE-2024-12345",value:k,onChange:a=>m(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Wire transfer reference or payment identifier"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"partnerPaymentDate",children:"Payment Date (Optional)"}),(0,b.jsx)(g.Input,{id:"partnerPaymentDate",type:"date",value:n,onChange:a=>o(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Defaults to today if not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"partnerNotes",children:"Notes (Optional)"}),(0,b.jsx)(B.Textarea,{id:"partnerNotes",placeholder:"Any additional notes about this payment...",value:p,onChange:a=>q(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-sm",children:[(0,b.jsx)(l.FileText,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Notifications will be sent to:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside mt-1 text-xs",children:[(0,b.jsx)("li",{children:"Arranger (payment confirmed)"}),(0,b.jsx)("li",{children:"Partner (payment received)"}),(0,b.jsx)("li",{children:"Staff administrators"})]})]})]})]}),(0,b.jsxs)(z.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>v(!1),disabled:i,children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:u,disabled:i,className:"bg-green-600 hover:bg-green-700",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirming..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.CheckCircle,{className:"mr-2 h-4 w-4"}),"Confirm Payment"]})})]})]})}),e.invoice_id&&(0,b.jsx)(H.DocumentViewer,{documentId:e.invoice_id,documentName:`Invoice - ${e.partner_name}`,mimeType:"application/pdf",open:r,onClose:()=>s(!1)})]})}function K({open:a,onOpenChange:d,commission:e,onSuccess:h}){let[i,j]=(0,c.useState)(!1),[k,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),u=async()=>{if(e){j(!0);try{let a=await fetch(`/api/lawyers/me/commercial-partner-commissions/${e.id}/confirm-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_reference:k||void 0,payment_date:n||void 0,notes:p||void 0})}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to confirm payment");F.toast.success(b.message||"Payment confirmed successfully"),d(!1),h?.(),m(""),o(""),q("")}catch(a){console.error("[ConfirmCommercialPartnerPaymentModal] Error:",a),F.toast.error(a instanceof Error?a.message:"Failed to confirm payment")}finally{j(!1)}}},v=a=>{a||(m(""),o(""),q("")),d(a)};if(!e)return null;let w=(0,G.formatCurrency)(e.accrual_amount,e.currency);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Dialog,{open:a,onOpenChange:v,children:(0,b.jsxs)(z.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(z.DialogHeader,{children:[(0,b.jsxs)(z.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(t.CheckCircle,{className:"h-5 w-5 text-green-600"}),"Confirm Commercial Partner Payment"]}),(0,b.jsx)(z.DialogDescription,{children:"Confirm that payment has been made to the commercial partner. This will update the commission status and notify all parties."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Commercial Partner:"}),(0,b.jsx)("span",{className:"font-medium",children:e.commercial_partner_name})]}),e.deal_name&&(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Deal:"}),(0,b.jsx)("span",{className:"font-medium",children:e.deal_name})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center border-t pt-3",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Amount:"}),(0,b.jsx)("span",{className:"text-lg font-bold text-green-600",children:w})]})]}),e.invoice_id?(0,b.jsxs)(f.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>s(!0),children:[(0,b.jsx)(E.Eye,{className:"h-4 w-4 mr-2"}),"View Submitted Invoice"]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800 text-sm",children:[(0,b.jsx)(D.AlertTriangle,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)("span",{children:"No invoice document attached to this commission."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"commercialPartnerBankReference",children:"Bank Reference (Optional)"}),(0,b.jsx)(g.Input,{id:"commercialPartnerBankReference",placeholder:"e.g., WIRE-2024-12345",value:k,onChange:a=>m(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Wire transfer reference or payment identifier"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"commercialPartnerPaymentDate",children:"Payment Date (Optional)"}),(0,b.jsx)(g.Input,{id:"commercialPartnerPaymentDate",type:"date",value:n,onChange:a=>o(a.target.value)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Defaults to today if not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"commercialPartnerNotes",children:"Notes (Optional)"}),(0,b.jsx)(B.Textarea,{id:"commercialPartnerNotes",placeholder:"Any additional notes about this payment...",value:p,onChange:a=>q(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-sm",children:[(0,b.jsx)(l.FileText,{className:"h-4 w-4 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Notifications will be sent to:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside mt-1 text-xs",children:[(0,b.jsx)("li",{children:"Arranger (payment confirmed)"}),(0,b.jsx)("li",{children:"Commercial partner (payment received)"}),(0,b.jsx)("li",{children:"Staff administrators"})]})]})]})]}),(0,b.jsxs)(z.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>v(!1),disabled:i,children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:u,disabled:i,className:"bg-green-600 hover:bg-green-700",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirming..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.CheckCircle,{className:"mr-2 h-4 w-4"}),"Confirm Payment"]})})]})]})}),e.invoice_id&&(0,b.jsx)(H.DocumentViewer,{documentId:e.invoice_id,documentName:`Invoice - ${e.commercial_partner_name}`,mimeType:"application/pdf",open:r,onClose:()=>s(!1)})]})}var L=a.i(888987);function M(a,b="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:b,minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}let N={committed:"bg-blue-100 text-blue-800 border-blue-200",partially_funded:"bg-amber-100 text-amber-800 border-amber-200",funded:"bg-emerald-100 text-emerald-800 border-emerald-200",active:"bg-green-100 text-green-800 border-green-200"},O={committed:"Awaiting Funding",partially_funded:"Partial",funded:"Fully Funded",active:"Active"},P={accrued:"bg-blue-100 text-blue-800 border-blue-200",invoiced:"bg-amber-100 text-amber-800 border-amber-200",paid:"bg-emerald-100 text-emerald-800 border-emerald-200",waived:"bg-gray-100 text-gray-800 border-gray-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200",disputed:"bg-red-100 text-red-800 border-red-200",voided:"bg-gray-100 text-gray-800 border-gray-200"},Q={mgmt:"Management Fee",perf:"Performance Fee",carry:"Carried Interest",upfront:"Upfront Fee",placement:"Placement Fee",transaction:"Transaction Fee",admin:"Admin Fee"},R={accrued:"bg-blue-100 text-blue-800 border-blue-200",invoice_requested:"bg-amber-100 text-amber-800 border-amber-200",invoice_submitted:"bg-indigo-100 text-indigo-800 border-indigo-200",invoiced:"bg-purple-100 text-purple-800 border-purple-200",paid:"bg-emerald-100 text-emerald-800 border-emerald-200",rejected:"bg-rose-100 text-rose-800 border-rose-200"},S={accrued:"Accrued",invoice_requested:"Invoice Requested",invoice_submitted:"Invoice Submitted",invoiced:"Invoiced",paid:"Paid",rejected:"Rejected"},T={introducer:{label:"Introducer",icon:u.UserCheck,color:"text-blue-600"},partner:{label:"Partner",icon:v.Handshake,color:"text-green-600"},commercial_partner:{label:"Commercial Partner",icon:w.Briefcase,color:"text-purple-600"}};function U({lawyerInfo:a,deals:u,subscriptions:z,feeEvents:A,introducerCommissions:B,partnerCommissions:C,commercialPartnerCommissions:D,allCommissions:E}){let[F,H]=(0,c.useState)(""),[U,V]=(0,c.useState)("all"),[W,X]=(0,c.useState)("subscriptions"),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(null),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(null),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)(null),[ai,aj]=(0,c.useState)("all"),ak=(0,c.useMemo)(()=>{let a=new Map,b=new Map;z.forEach(c=>{let d=c.currency||"USD";a.set(d,(a.get(d)||0)+c.commitment),b.set(d,(b.get(d)||0)+c.funded_amount)});let c=z.filter(a=>"committed"===a.status).length,d=z.filter(a=>"partially_funded"===a.status).length,e=z.filter(a=>"funded"===a.status||"active"===a.status).length,f=new Map,g=new Map;A.forEach(a=>{let b=a.currency||"USD",c=a.computed_amount||0;"paid"===a.status?f.set(b,(f.get(b)||0)+c):("accrued"===a.status||"invoiced"===a.status)&&g.set(b,(g.get(b)||0)+c)});let h=(a,b)=>"USD"===a[0]?-1:"USD"===b[0]?1:a[0].localeCompare(b[0]),i=Array.from(a.entries()).filter(([a,b])=>b>0).sort(h).map(([a,b])=>({currency:a,amount:b})),j=Array.from(b.entries()).filter(([a,b])=>b>0).sort(h).map(([a,b])=>({currency:a,amount:b})),k=Array.from(f.entries()).filter(([a,b])=>b>0).sort(h).map(([a,b])=>({currency:a,amount:b})),l=Array.from(g.entries()).filter(([a,b])=>b>0).sort(h).map(([a,b])=>({currency:a,amount:b}));return{totalDeals:u.length,totalSubscriptions:z.length,commitmentTotals:i,fundedTotals:j,awaitingFunding:c,partiallyFunded:d,fullyFunded:e,totalFeeEvents:A.length,feesPaidTotals:k,feesPendingTotals:l,feesPaidCount:A.filter(a=>"paid"===a.status).length,feesPendingCount:A.filter(a=>"accrued"===a.status||"invoiced"===a.status).length}},[u,z,A]),al=(0,c.useMemo)(()=>z.filter(a=>{let b="all"===U||a.deal_id===U,c=!F||a.investor_name.toLowerCase().includes(F.toLowerCase())||a.deal_name.toLowerCase().includes(F.toLowerCase());return b&&c}),[z,U,F]),am=(0,c.useMemo)(()=>A.filter(a=>{let b="all"===U||a.deal_id===U,c=!F||a.deal_name.toLowerCase().includes(F.toLowerCase())||a.investor_name.toLowerCase().includes(F.toLowerCase())||a.fee_type&&a.fee_type.toLowerCase().includes(F.toLowerCase());return b&&c}),[A,U,F]),an=(0,c.useMemo)(()=>B.filter(a=>{let b="all"===U||a.deal_id===U,c=!F||a.introducer_name.toLowerCase().includes(F.toLowerCase())||a.deal_name&&a.deal_name.toLowerCase().includes(F.toLowerCase());return b&&c}),[B,U,F]),ao=(0,c.useMemo)(()=>C.filter(a=>{let b="all"===U||a.deal_id===U,c=!F||a.partner_name.toLowerCase().includes(F.toLowerCase())||a.deal_name&&a.deal_name.toLowerCase().includes(F.toLowerCase());return b&&c}),[C,U,F]),ap=(0,c.useMemo)(()=>D.filter(a=>{let b="all"===U||a.deal_id===U,c=!F||a.commercial_partner_name.toLowerCase().includes(F.toLowerCase())||a.deal_name&&a.deal_name.toLowerCase().includes(F.toLowerCase());return b&&c}),[D,U,F]),aq=(0,c.useMemo)(()=>E.filter(a=>{let b="all"===U||a.deal_id===U,c="all"===ai||a.status===ai,d=!F||a.entity_name.toLowerCase().includes(F.toLowerCase())||a.deal_name&&a.deal_name.toLowerCase().includes(F.toLowerCase())||a.investor_name&&a.investor_name.toLowerCase().includes(F.toLowerCase());return b&&c&&d}),[E,U,ai,F]),ar=(0,c.useMemo)(()=>u.map(a=>{let b=z.filter(b=>b.deal_id===a.id),c=A.filter(b=>b.deal_id===a.id),d=b.reduce((a,b)=>a+b.commitment,0),e=b.reduce((a,b)=>a+b.funded_amount,0),f=b.reduce((a,b)=>a+b.outstanding_amount,0),g=c.reduce((a,b)=>a+(b.computed_amount||0),0),h=c.filter(a=>"paid"===a.status).reduce((a,b)=>a+(b.computed_amount||0),0);return{...a,subscriptions_count:b.length,committed:d,funded:e,outstanding:f,fees_total:g,fees_paid:h,fees_pending:g-h}}),[u,z,A]);return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Reconciliation"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:a?`Financial reconciliation for ${a.display_name}'s assigned deals`:"Financial reconciliation for assigned deals"})]}),a?.specializations?.length?(0,b.jsx)("div",{className:"flex gap-1",children:a.specializations.slice(0,2).map((a,c)=>(0,b.jsx)(e.Badge,{variant:"outline",className:"capitalize",children:a},c))}):null]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(p.Building2,{className:"h-4 w-4"}),"Assigned Deals"]})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:ak.totalDeals}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[ak.totalSubscriptions," subscriptions"]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(o.TrendingUp,{className:"h-4 w-4"}),"Total Commitment"]})}),(0,b.jsxs)(d.CardContent,{children:[ak.commitmentTotals.length>0?(0,b.jsx)("div",{className:"space-y-0.5",children:ak.commitmentTotals.map((a,c)=>(0,b.jsx)("div",{className:`${0===c?"text-2xl font-bold":"text-sm font-medium"} text-blue-600`,children:M(a.amount,a.currency)},a.currency))}):(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:M(0)}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[ak.awaitingFunding," awaiting funding"]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(n.CheckCircle2,{className:"h-4 w-4"}),"Total Funded"]})}),(0,b.jsxs)(d.CardContent,{children:[ak.fundedTotals.length>0?(0,b.jsx)("div",{className:"space-y-0.5",children:ak.fundedTotals.map((a,c)=>(0,b.jsx)("div",{className:`${0===c?"text-2xl font-bold":"text-sm font-medium"} text-emerald-600`,children:M(a.amount,a.currency)},a.currency))}):(0,b.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:M(0)}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[ak.partiallyFunded," partially funded • ",ak.fullyFunded," fully funded"]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(r.CreditCard,{className:"h-4 w-4"}),"Fee Payments"]})}),(0,b.jsxs)(d.CardContent,{children:[ak.feesPaidTotals.length>0?(0,b.jsx)("div",{className:"space-y-0.5",children:ak.feesPaidTotals.map((a,c)=>(0,b.jsx)("div",{className:`${0===c?"text-2xl font-bold":"text-sm font-medium"} text-purple-600`,children:M(a.amount,a.currency)},a.currency))}):(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:M(0)}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[ak.feesPendingCount," pending (",ak.feesPendingTotals.length>0?ak.feesPendingTotals.map(a=>M(a.amount,a.currency)).join(" / "):M(0),")"]})]})]})]}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search investors or deals...",value:F,onChange:a=>H(a.target.value),className:"pl-10"})]})}),(0,b.jsxs)(h.Select,{value:U,onValueChange:V,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-full md:w-64",children:(0,b.jsx)(h.SelectValue,{placeholder:"Filter by deal"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Deals"}),u.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))]})]})]})})}),0===u.length?(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"py-16",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(q.AlertCircle,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Deals Assigned"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"You don't have any deals assigned yet. Contact the VERSO team to be assigned to deals."})]})})}):(0,b.jsxs)(j.Tabs,{value:W,onValueChange:X,className:"space-y-4",children:[(0,b.jsxs)(j.TabsList,{children:[(0,b.jsxs)(j.TabsTrigger,{value:"subscriptions",className:"flex items-center gap-2",children:[(0,b.jsx)(l.FileText,{className:"h-4 w-4"}),"Subscriptions (",al.length,")"]}),(0,b.jsxs)(j.TabsTrigger,{value:"fees",className:"flex items-center gap-2",children:[(0,b.jsx)(k.DollarSign,{className:"h-4 w-4"}),"Fee Payments (",am.length,")"]}),(0,b.jsxs)(j.TabsTrigger,{value:"commission-status",className:"flex items-center gap-2",children:[(0,b.jsx)(y.ClipboardList,{className:"h-4 w-4"}),"Commission Status (",aq.length,")"]}),(0,b.jsxs)(j.TabsTrigger,{value:"introducer-fees",className:"flex items-center gap-2",children:[(0,b.jsx)(s.Users,{className:"h-4 w-4"}),"Introducer Fees (",an.length,")"]}),(0,b.jsxs)(j.TabsTrigger,{value:"partner-fees",className:"flex items-center gap-2",children:[(0,b.jsx)(v.Handshake,{className:"h-4 w-4"}),"Partner Fees (",ao.length,")"]}),(0,b.jsxs)(j.TabsTrigger,{value:"commercial-partner-fees",className:"flex items-center gap-2",children:[(0,b.jsx)(w.Briefcase,{className:"h-4 w-4"}),"Commercial Partner Fees (",ap.length,")"]}),(0,b.jsxs)(j.TabsTrigger,{value:"deals",className:"flex items-center gap-2",children:[(0,b.jsx)(p.Building2,{className:"h-4 w-4"}),"Deal Summary (",u.length,")"]})]}),(0,b.jsx)(j.TabsContent,{value:"subscriptions",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Subscription Reconciliation"}),(0,b.jsx)(d.CardDescription,{children:"Funding status for all signed subscriptions in your assigned deals"})]}),(0,b.jsx)(d.CardContent,{children:0===al.length?(0,b.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,b.jsx)(l.FileText,{className:"h-10 w-10 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No subscriptions match your filters"})]}):(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Investor"}),(0,b.jsx)(i.TableHead,{children:"Deal"}),(0,b.jsx)(i.TableHead,{children:"Commitment"}),(0,b.jsx)(i.TableHead,{children:"Funded"}),(0,b.jsx)(i.TableHead,{children:"Outstanding"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Funded Date"})]})}),(0,b.jsx)(i.TableBody,{children:al.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:a.investor_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:a.deal_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:M(a.commitment,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium text-emerald-600",children:M(a.funded_amount,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:(0,L.cn)("font-medium",a.outstanding_amount>0?"text-amber-600":"text-muted-foreground"),children:M(a.outstanding_amount,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",className:(0,L.cn)("capitalize",N[a.status]),children:O[a.status]||a.status})}),(0,b.jsx)(i.TableCell,{children:a.funded_at?(0,b.jsx)("div",{className:"text-sm",children:(0,G.formatDate)(a.funded_at)}):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"Pending"})})]},a.id))})]})})})]})}),(0,b.jsx)(j.TabsContent,{value:"fees",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Fee Payment Reconciliation"}),(0,b.jsx)(d.CardDescription,{children:"Fee accruals and payments for your assigned deals"})]}),(0,b.jsx)(d.CardContent,{children:0===am.length?(0,b.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,b.jsx)(k.DollarSign,{className:"h-10 w-10 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No fee events match your filters"})]}):(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Deal"}),(0,b.jsx)(i.TableHead,{children:"Investor"}),(0,b.jsx)(i.TableHead,{children:"Fee Type"}),(0,b.jsx)(i.TableHead,{children:"Amount"}),(0,b.jsx)(i.TableHead,{children:"Invoice"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Event Date"}),(0,b.jsx)(i.TableHead,{children:"Processed"})]})}),(0,b.jsx)(i.TableBody,{children:am.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:a.deal_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:a.investor_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",children:Q[a.fee_type||""]||a.fee_type||"Unknown"})}),(0,b.jsxs)(i.TableCell,{children:[(0,b.jsx)("div",{className:"font-medium",children:M(a.computed_amount||0,a.currency)}),a.base_amount&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["of ",M(a.base_amount,a.currency)]})]}),(0,b.jsx)(i.TableCell,{children:a.invoice_number?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:a.invoice_number}),a.invoice_status&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground capitalize",children:a.invoice_status.replace("_"," ")})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"Not issued"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",className:(0,L.cn)("capitalize",P[a.status]),children:a.status})}),(0,b.jsx)(i.TableCell,{children:a.event_date?(0,b.jsx)("div",{className:"text-sm",children:(0,G.formatDate)(a.event_date)}):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"-"})}),(0,b.jsx)(i.TableCell,{children:a.processed_at?(0,b.jsx)("div",{className:"text-sm",children:(0,G.formatDate)(a.processed_at)}):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"Pending"})})]},a.id))})]})})})]})}),(0,b.jsx)(j.TabsContent,{value:"commission-status",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{children:"Commission Status"}),(0,b.jsx)(d.CardDescription,{children:"All commission statuses across introducers, partners, and commercial partners"})]}),(0,b.jsxs)(h.Select,{value:ai,onValueChange:aj,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-48",children:(0,b.jsx)(h.SelectValue,{placeholder:"Filter by status"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Statuses"}),(0,b.jsx)(h.SelectItem,{value:"accrued",children:"Accrued"}),(0,b.jsx)(h.SelectItem,{value:"invoice_requested",children:"Invoice Requested"}),(0,b.jsx)(h.SelectItem,{value:"invoice_submitted",children:"Invoice Submitted"}),(0,b.jsx)(h.SelectItem,{value:"invoiced",children:"Invoiced"}),(0,b.jsx)(h.SelectItem,{value:"paid",children:"Paid"}),(0,b.jsx)(h.SelectItem,{value:"rejected",children:"Rejected"})]})]})]}),(0,b.jsx)(d.CardContent,{children:0===aq.length?(0,b.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,b.jsx)(y.ClipboardList,{className:"h-10 w-10 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No commissions match your filters"})]}):(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Entity Type"}),(0,b.jsx)(i.TableHead,{children:"Entity Name"}),(0,b.jsx)(i.TableHead,{children:"Deal"}),(0,b.jsx)(i.TableHead,{children:"Investor"}),(0,b.jsx)(i.TableHead,{children:"Amount"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Invoice"})]})}),(0,b.jsx)(i.TableBody,{children:aq.map(a=>{let c=T[a.entity_type],d=c?.icon||s.Users;return(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d,{className:(0,L.cn)("h-4 w-4",c?.color)}),(0,b.jsx)("span",{className:"text-sm",children:c?.label||a.entity_type})]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:a.entity_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:a.deal_name||"—"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:a.investor_name||"—"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium text-green-600",children:M(a.accrual_amount,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",className:(0,L.cn)("capitalize",R[a.status]),children:S[a.status]||a.status})}),(0,b.jsx)(i.TableCell,{children:a.invoice_id?(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-blue-600",children:[(0,b.jsx)(x.ExternalLink,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"View"})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"—"})})]},`${a.entity_type}-${a.id}`)})})]})})})]})}),(0,b.jsx)(j.TabsContent,{value:"introducer-fees",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Introducer Fee Payments"}),(0,b.jsx)(d.CardDescription,{children:"Introducer commissions awaiting payment confirmation"})]}),(0,b.jsx)(d.CardContent,{children:0===an.length?(0,b.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,b.jsx)(s.Users,{className:"h-10 w-10 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No introducer commissions awaiting payment"})]}):(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Introducer"}),(0,b.jsx)(i.TableHead,{children:"Deal"}),(0,b.jsx)(i.TableHead,{children:"Amount"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Date"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(i.TableBody,{children:an.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:a.introducer_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:a.deal_name||"—"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium text-green-600",children:M(a.accrual_amount,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-200",children:"Awaiting Payment"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:(0,G.formatDate)(a.created_at)})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)(f.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{_(a),Z(!0)},children:[(0,b.jsx)(t.CheckCircle,{className:"h-4 w-4 mr-1"}),"Confirm Payment"]})})]},a.id))})]})})})]})}),(0,b.jsx)(j.TabsContent,{value:"partner-fees",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Partner Fee Payments"}),(0,b.jsx)(d.CardDescription,{children:"Partner commissions awaiting payment confirmation"})]}),(0,b.jsx)(d.CardContent,{children:0===ao.length?(0,b.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,b.jsx)(v.Handshake,{className:"h-10 w-10 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No partner commissions awaiting payment"})]}):(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Partner"}),(0,b.jsx)(i.TableHead,{children:"Deal"}),(0,b.jsx)(i.TableHead,{children:"Amount"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Date"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(i.TableBody,{children:ao.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:a.partner_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:a.deal_name||"—"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium text-green-600",children:M(a.accrual_amount,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-200",children:"Awaiting Payment"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:(0,G.formatDate)(a.created_at)})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)(f.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{ad(a),ab(!0)},children:[(0,b.jsx)(t.CheckCircle,{className:"h-4 w-4 mr-1"}),"Confirm Payment"]})})]},a.id))})]})})})]})}),(0,b.jsx)(j.TabsContent,{value:"commercial-partner-fees",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Commercial Partner Fee Payments"}),(0,b.jsx)(d.CardDescription,{children:"Commercial partner commissions awaiting payment confirmation"})]}),(0,b.jsx)(d.CardContent,{children:0===ap.length?(0,b.jsxs)("div",{className:"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2",children:[(0,b.jsx)(w.Briefcase,{className:"h-10 w-10 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No commercial partner commissions awaiting payment"})]}):(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Commercial Partner"}),(0,b.jsx)(i.TableHead,{children:"Deal"}),(0,b.jsx)(i.TableHead,{children:"Amount"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Date"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(i.TableBody,{children:ap.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:a.commercial_partner_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:a.deal_name||"—"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium text-green-600",children:M(a.accrual_amount,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-200",children:"Awaiting Payment"})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:(0,G.formatDate)(a.created_at)})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)(f.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{ah(a),af(!0)},children:[(0,b.jsx)(t.CheckCircle,{className:"h-4 w-4 mr-1"}),"Confirm Payment"]})})]},a.id))})]})})})]})}),(0,b.jsx)(j.TabsContent,{value:"deals",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Deal-Level Summary"}),(0,b.jsx)(d.CardDescription,{children:"Aggregated financial data by deal"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Deal"}),(0,b.jsx)(i.TableHead,{children:"Subscriptions"}),(0,b.jsx)(i.TableHead,{children:"Committed"}),(0,b.jsx)(i.TableHead,{children:"Funded"}),(0,b.jsx)(i.TableHead,{children:"Outstanding"}),(0,b.jsx)(i.TableHead,{children:"Fees Paid"}),(0,b.jsx)(i.TableHead,{children:"Fees Pending"})]})}),(0,b.jsx)(i.TableBody,{children:ar.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsxs)(i.TableCell,{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),a.company_name&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.company_name})]}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"secondary",children:a.subscriptions_count})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium",children:M(a.committed,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium text-emerald-600",children:M(a.funded,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:(0,L.cn)("font-medium",a.outstanding>0?"text-amber-600":"text-muted-foreground"),children:M(a.outstanding,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:"font-medium text-emerald-600",children:M(a.fees_paid,a.currency)})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("div",{className:(0,L.cn)("font-medium",a.fees_pending>0?"text-amber-600":"text-muted-foreground"),children:M(a.fees_pending,a.currency)})})]},a.id))})]})})})]})})]}),(0,b.jsx)(I,{open:Y,onOpenChange:Z,commission:$,onSuccess:()=>window.location.reload()}),(0,b.jsx)(J,{open:aa,onOpenChange:ab,commission:ac,onSuccess:()=>window.location.reload()}),(0,b.jsx)(K,{open:ae,onOpenChange:af,commission:ag,onSuccess:()=>window.location.reload()})]})}a.s(["LawyerReconciliationClient",()=>U],961711)}];

//# sourceMappingURL=versotech-portal_src_components_lawyer_lawyer-reconciliation-client_tsx_75d5aa3a._.js.map