module.exports=[659291,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(951870),f=a.i(211374);function g(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((a,c)=>(0,b.jsxs)("div",{className:"h-32 rounded-lg border border-border bg-card p-4 space-y-3",children:[(0,b.jsx)(f.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(f.Skeleton,{className:"h-8 w-32"}),(0,b.jsx)(f.Skeleton,{className:"h-4 w-16"})]},c))}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:4}).map((a,c)=>(0,b.jsxs)("div",{className:"h-80 rounded-lg border border-border bg-card p-4 space-y-4",children:[(0,b.jsx)(f.Skeleton,{className:"h-6 w-40"}),(0,b.jsx)(f.Skeleton,{className:"h-64 w-full"})]},c))})]})}var h=a.i(284169),i=a.i(888987);function j({title:a,value:c,subtitle:d,description:e,icon:f,trend:g,trendValue:j,className:k,interactive:l=!1,onDrillDown:m,hasDetails:n=!1,additionalInfo:o}){let p=l&&(m||n),q="number"==typeof c?c.toString():c;return(0,b.jsxs)(h.Card,{className:(0,i.cn)("group hover:shadow-lg transition-all duration-300 ease-in-out hover:-translate-y-1 border-0 shadow-md",p&&"cursor-pointer hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]",k),onClick:p?m:void 0,onKeyDown:p?a=>{p&&m&&("Enter"===a.key||" "===a.key)&&(a.preventDefault(),m())}:void 0,role:p?"button":void 0,tabIndex:p?0:void 0,"aria-label":p?`${a}: ${q}`:void 0,children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(h.CardTitle,{className:"text-sm font-medium text-muted-foreground group-hover:text-gray-700 dark:group-hover:text-gray-200 transition-colors",children:a}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[f&&(0,b.jsx)(f,{className:"h-4 w-4 text-muted-foreground group-hover:text-blue-600 transition-all duration-300 group-hover:scale-110"}),n&&(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"})]})]}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent group-hover:from-blue-900 group-hover:to-blue-700 dark:group-hover:from-blue-400 dark:group-hover:to-blue-300 transition-all duration-300",children:q}),(d||e)&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:d||e}),(g||j)&&(0,b.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:["object"==typeof g&&g.value&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("span",{className:(0,i.cn)("font-medium",g.isPositive?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[g.isPositive?"+":"",g.value,"%"]}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"from last quarter"})]}),"string"==typeof g&&j&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:(0,i.cn)("font-medium","up"===g?"text-green-600 dark:text-green-400":"down"===g?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:j}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"from last quarter"})]})]}),o&&p&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[o.change&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[(0,b.jsxs)("span",{className:"font-medium",children:[o.change.period,":"]})," ",o.change.value]}),o.benchmark&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[(0,b.jsxs)("span",{className:"font-medium",children:[o.benchmark.label,":"]})," ",o.benchmark.value]}),o.breakdown&&o.breakdown.length>0&&(0,b.jsx)("div",{className:"space-y-1",children:o.breakdown.slice(0,2).map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:a.label}),(0,b.jsx)("span",{className:"font-medium",children:a.value})]},c))}),n&&(0,b.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-2 opacity-0 group-hover:opacity-100 transition-opacity delay-150",children:"Click for details →"})]})]})]})}var k=a.i(478870),l=a.i(966494),m=a.i(155508),n=a.i(675167);function o(a,b=!1){return b?a>=1e9?`$${(a/1e9).toFixed(1)}B`:a>=1e6?`$${(a/1e6).toFixed(1)}M`:a>=1e3?`$${(a/1e3).toFixed(1)}K`:`$${a.toLocaleString()}`:a.toLocaleString()}function p(){return(0,b.jsxs)("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)(f.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(f.Skeleton,{className:"h-4 w-4 rounded"})]}),(0,b.jsx)(f.Skeleton,{className:"h-8 w-20 mb-2"}),(0,b.jsx)(f.Skeleton,{className:"h-3 w-32"})]})}function q({days:a}){let[d,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(null);if((0,c.useEffect)(()=>{!async function(){g(!0),i(null);try{let b=await fetch(`/api/admin/metrics/dashboard?days=${a}`);if(!b.ok)throw Error("Failed to fetch metrics");let c=await b.json();if(c.success&&c.data)e(c.data);else throw Error(c.error||"Unknown error")}catch(a){i(a instanceof Error?a.message:"Failed to load metrics")}finally{g(!1)}}()},[a]),f)return(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(p,{}),(0,b.jsx)(p,{}),(0,b.jsx)(p,{}),(0,b.jsx)(p,{})]});if(h)return(0,b.jsxs)("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-destructive",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Failed to load KPI metrics"}),(0,b.jsx)("p",{className:"text-xs mt-1",children:h})]});if(!d)return null;let{kpis:q}=d,r=q.investors.new_mtd>0?{value:q.investors.new_mtd,isPositive:!0}:null;return(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(j,{title:"Total Users",value:o(q.investors.active),icon:k.Users,subtitle:`${o(q.investors.new_mtd)} new this month`,trend:r?{value:r.value,isPositive:r.isPositive}:void 0}),(0,b.jsx)(j,{title:"Active Investors",value:o(q.investors.active),icon:l.TrendingUp,subtitle:`${q.deals.open} open deals`,trend:"up"===q.investors.trend?{value:0,isPositive:!0}:void 0}),(0,b.jsx)(j,{title:"Total AUM",value:o(q.aum.value,!0),icon:m.DollarSign,subtitle:`${q.aum.funding_rate}% funding rate`,trend:null!==q.aum.change_mtd?{value:q.aum.change_mtd,isPositive:q.aum.change_mtd>=0}:void 0,additionalInfo:{breakdown:[{label:"Committed",value:o(q.aum.commitment,!0)},{label:"Funded",value:o(q.aum.funded,!0)}]},interactive:!0,hasDetails:!0}),(0,b.jsx)(j,{title:"Pending Approvals",value:o(q.pending.approvals+q.pending.tasks+q.pending.kyc),icon:n.FileCheck,subtitle:`${q.pending.kyc} KYC reviews pending`,additionalInfo:{breakdown:[{label:"Approvals",value:q.pending.approvals},{label:"Tasks",value:q.pending.tasks}]},interactive:!0,hasDetails:!0})]})}var r=a.i(787957),s=a.i(268208),t=a.i(353667),u=a.i(849928),v=a.i(66579),w=a.i(921819),x=a.i(799524),y=a.i(89413);function z(){return(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Skeleton,{className:"h-4 w-4"}),(0,b.jsx)(f.Skeleton,{className:"h-5 w-32"})]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)(f.Skeleton,{className:"h-[250px] w-full"})})]})}function A({active:a,payload:c}){if(a&&c&&c.length>0){let a=c[0].payload,d=new Date(a.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return(0,b.jsxs)("div",{className:"bg-popover border border-border rounded-lg p-3 shadow-lg",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:d}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[(0,b.jsx)("span",{className:"font-medium text-primary",children:a.activeUsers.toLocaleString()})," active users"]})]})}return null}function B({days:a}){let[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null);if((0,c.useEffect)(()=>{!async function(){g(!0),j(null);try{let b=await fetch(`/api/admin/metrics/dashboard?days=${a}`);if(!b.ok)throw Error("Failed to fetch activity data");let c=await b.json();if(c.success&&c.data?.adminMetrics?.userActivityTrend)e(c.data.adminMetrics.userActivityTrend);else throw Error(c.error||"No activity data available")}catch(a){j(a instanceof Error?a.message:"Failed to load activity data")}finally{g(!1)}}()},[a]),f)return(0,b.jsx)(z,{});if(i)return(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Activity,{className:"h-4 w-4 text-primary"}),(0,b.jsx)(h.CardTitle,{className:"text-sm font-medium",children:"User Activity"})]})}),(0,b.jsx)(h.CardContent,{className:"flex items-center justify-center h-[250px]",children:(0,b.jsx)("p",{className:"text-sm text-destructive",children:i})})]});if(!d||0===d.length)return(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Activity,{className:"h-4 w-4 text-primary"}),(0,b.jsx)(h.CardTitle,{className:"text-sm font-medium",children:"User Activity"})]})}),(0,b.jsx)(h.CardContent,{className:"flex items-center justify-center h-[250px]",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No activity data available"})})]});let k=Math.ceil(1.1*Math.max(...d.map(a=>a.activeUsers),1)),l="7"===a?0:"30"===a?4:10;return(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{className:"pb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Activity,{className:"h-4 w-4 text-primary"}),(0,b.jsx)(h.CardTitle,{className:"text-sm font-medium",children:"Daily Active Users"})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Unique users with activity over the last ",a," days"]})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)(x.ResponsiveContainer,{width:"100%",height:250,children:(0,b.jsxs)(s.LineChart,{data:d,margin:{top:5,right:10,left:10,bottom:5},children:[(0,b.jsx)(y.CartesianGrid,{strokeDasharray:"3 3",className:"stroke-border/50",vertical:!1}),(0,b.jsx)(u.XAxis,{dataKey:"label",stroke:"currentColor",className:"text-muted-foreground",fontSize:11,tickLine:!1,axisLine:!1,interval:l,dy:8}),(0,b.jsx)(v.YAxis,{stroke:"currentColor",className:"text-muted-foreground",fontSize:11,tickLine:!1,axisLine:!1,domain:[0,k],tickFormatter:a=>a.toLocaleString(),width:40}),(0,b.jsx)(w.Tooltip,{content:(0,b.jsx)(A,{})}),(0,b.jsx)(t.Line,{type:"monotone",dataKey:"activeUsers",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1,activeDot:{r:5,fill:"hsl(var(--primary))",stroke:"hsl(var(--background))",strokeWidth:2}})]})})})]})}var C=a.i(497412),D=a.i(15788);let E=(0,a.i(95799).default)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);var F=a.i(816854),G=a.i(92881),H=a.i(672606),I=a.i(877918);function J(){return(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.Skeleton,{className:"h-5 w-32"})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.Skeleton,{className:"h-8 w-8 rounded"}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(f.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(f.Skeleton,{className:"h-3 w-32"})]})]}),(0,b.jsx)(f.Skeleton,{className:"h-5 w-8 rounded-full"})]},a))})]})}function K({days:a}){let[d,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null);if((0,c.useEffect)(()=>{!async function(){g(!0),k(null);try{let b=await fetch(`/api/admin/metrics/dashboard?days=${a}`);if(!b.ok)throw Error("Failed to fetch approval queue data");let c=await b.json();if(c.success&&c.data?.kpis?.pending)e(c.data.kpis.pending);else throw Error(c.error||"Unknown error")}catch(a){k(a instanceof Error?a.message:"Failed to load data")}finally{g(!1)}}()},[a]),f)return(0,b.jsx)(J,{});if(j)return(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(h.CardTitle,{className:"text-base font-semibold flex items-center gap-2",children:[(0,b.jsx)(E,{className:"h-4 w-4"}),"Approval Queue"]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(I.AlertCircle,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:j})]})})]});if(!d)return null;let l=[{id:"kyc-review",label:"KYC Review",count:d.kyc,href:"/versotech_admin/users?filter=kyc_pending",icon:G.UserCheck,description:"Investor verification pending"},{id:"subscriptions",label:"Subscriptions",count:d.approvals,href:"/versotech_admin/approvals",icon:F.FileText,description:"Subscription approvals waiting"},{id:"documents",label:"Documents",count:d.tasks,href:"/versotech_admin/tasks",icon:E,description:"Document tasks to review"}],m=l.reduce((a,b)=>a+b.count,0);return(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"text-base font-semibold flex items-center gap-2",children:[(0,b.jsx)(E,{className:"h-4 w-4 text-primary"}),"Approval Queue"]}),m>0&&(0,b.jsxs)(D.Badge,{variant:"secondary",className:"font-medium",children:[m," total"]})]})}),(0,b.jsxs)(h.CardContent,{className:"space-y-2",children:[l.map(a=>{let c=a.icon,d=a.count>0;return(0,b.jsxs)(C.default,{href:a.href,className:(0,i.cn)("flex items-center justify-between p-3 rounded-lg border transition-colors","hover:bg-accent/50 hover:border-accent",d&&"border-primary/20 bg-primary/5"),children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,i.cn)("flex items-center justify-center h-8 w-8 rounded-md",d?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"),children:(0,b.jsx)(c,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:(0,i.cn)("text-sm font-medium",d?"text-foreground":"text-muted-foreground"),children:a.label}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(D.Badge,{variant:d?"default":"secondary",className:(0,i.cn)("min-w-[28px] justify-center",d&&"bg-primary hover:bg-primary/90"),children:a.count}),(0,b.jsx)(H.ChevronRight,{className:(0,i.cn)("h-4 w-4",d?"text-primary":"text-muted-foreground")})]})]},a.id)}),0===m&&(0,b.jsx)("div",{className:"text-center py-4 text-sm text-muted-foreground",children:"No pending items — you're all caught up!"})]})]})}var L=a.i(421908),M=a.i(325866),N=a.i(380640);function O(){return(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.Skeleton,{className:"h-5 w-28"})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:[1,2,3,4,5].map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-3 pb-3 border-b last:border-0",children:[(0,b.jsx)(f.Skeleton,{className:"h-8 w-8 rounded-full shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 space-y-1.5",children:[(0,b.jsx)(f.Skeleton,{className:"h-4 w-3/4"}),(0,b.jsx)(f.Skeleton,{className:"h-3 w-20"})]})]},a))})]})}function P({days:a}){let[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null);return((0,c.useEffect)(()=>{!async function(){g(!0),k(null);try{let a=await fetch("/api/admin/activity-feed");if(!a.ok)throw Error("Failed to fetch activity feed");let b=await a.json();if(b.success&&b.data)e(b.data.slice(0,10));else throw Error(b.error||"Unknown error")}catch(a){k(a instanceof Error?a.message:"Failed to load activity")}finally{g(!1)}}()},[a]),f)?(0,b.jsx)(O,{}):j?(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(h.CardTitle,{className:"text-base font-semibold flex items-center gap-2",children:[(0,b.jsx)(r.Activity,{className:"h-4 w-4"}),"Recent Activity"]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(I.AlertCircle,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:j})]})})]}):(0,b.jsxs)(h.Card,{className:"h-full flex flex-col",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(h.CardTitle,{className:"text-base font-semibold flex items-center gap-2",children:[(0,b.jsx)(r.Activity,{className:"h-4 w-4 text-primary"}),"Recent Activity"]})}),(0,b.jsxs)(h.CardContent,{className:"flex-1 flex flex-col",children:[(0,b.jsx)("div",{className:"flex-1 max-h-[280px] overflow-y-auto pr-1 -mr-1 space-y-1",children:0===d.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(r.Activity,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No recent activity"})]}):d.map(a=>(0,b.jsxs)("div",{className:(0,i.cn)("flex items-start gap-3 p-2 rounded-md transition-colors","hover:bg-accent/50"),children:[(0,b.jsx)("div",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-muted shrink-0",children:(0,b.jsx)(M.User,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("p",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:a.actor_name||"Unknown user"})," ",(0,b.jsx)("span",{className:"text-muted-foreground",children:function(a,b){let c={LOGIN:"Signed in",LOGOUT:"Signed out",CREATE:"Created",UPDATE:"Updated",DELETE:"Deleted",VIEW:"Viewed",DOWNLOAD:"Downloaded",KYC_SUBMIT:"Submitted KYC",KYC_APPROVE:"Approved KYC",KYC_REJECT:"Rejected KYC",SUBSCRIPTION_CREATE:"Created subscription",SUBSCRIPTION_APPROVE:"Approved subscription",SUBSCRIPTION_REJECT:"Rejected subscription",DEAL_CREATE:"Created deal",DEAL_UPDATE:"Updated deal",DEAL_PUBLISH:"Published deal",DOCUMENT_UPLOAD:"Uploaded document",DOCUMENT_SIGN:"Signed document",INVESTMENT_COMMIT:"Committed investment",ALLOCATION_CREATE:"Created allocation"};if(c[a])return c[a];let d=a.toLowerCase().split("_")[0],e={create:"Created",update:"Updated",delete:"Deleted",view:"Viewed",download:"Downloaded",upload:"Uploaded",approve:"Approved",reject:"Rejected",sign:"Signed",submit:"Submitted",publish:"Published",archive:"Archived",restore:"Restored",lock:"Locked",unlock:"Unlocked"}[d]||d.charAt(0).toUpperCase()+d.slice(1),f=b.toLowerCase().replace(/_/g," ");return`${e} ${f}`}(a.action,a.entity_type)})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:(0,N.formatDistanceToNow)(new Date(a.timestamp),{addSuffix:!0})})]})]},a.id))}),d.length>0&&(0,b.jsx)("div",{className:"pt-3 mt-3 border-t",children:(0,b.jsx)(C.default,{href:"/versotech_admin/activity",className:"w-full",children:(0,b.jsxs)(L.Button,{variant:"ghost",size:"sm",className:"w-full justify-between text-muted-foreground hover:text-foreground",children:["View All Activity",(0,b.jsx)(H.ChevronRight,{className:"h-4 w-4"})]})})})]})]})}var Q=a.i(926076),R=a.i(292209),S=a.i(838086),T=a.i(399580),U=a.i(168118),V=a.i(724070);function W(){return(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.Skeleton,{className:"h-5 w-40"})}),(0,b.jsx)(h.CardContent,{className:"space-y-3",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"p-3 rounded-lg border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Skeleton,{className:"h-5 w-5 rounded"}),(0,b.jsx)(f.Skeleton,{className:"h-4 w-24"})]}),(0,b.jsx)(f.Skeleton,{className:"h-5 w-8 rounded-full"})]})},a))})]})}function X({alert:a}){return(0,b.jsxs)("div",{className:"flex items-start gap-3 py-2 px-3 rounded-md bg-muted/50 text-sm",children:[(0,b.jsx)(M.User,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-foreground truncate",children:a.investor_name}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:a.details}),a.due_date&&(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground",children:[(0,b.jsx)(V.Calendar,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["Due: ",new Date(a.due_date).toLocaleDateString()]})]})]})]})}function Y({group:a,defaultOpen:d}){let[e,f]=(0,c.useState)(d||!1);if(0===a.alerts.length&&"clear"!==a.severity)return null;let g="critical"===a.severity?I.AlertCircle:"warning"===a.severity?S.AlertTriangle:T.CheckCircle2;return(0,b.jsxs)(Q.Collapsible,{open:e,onOpenChange:f,children:[(0,b.jsx)(Q.CollapsibleTrigger,{asChild:!0,children:(0,b.jsxs)("button",{className:(0,i.cn)("w-full flex items-center justify-between p-3 rounded-lg border transition-colors","hover:bg-accent/50",a.borderClass,a.bgClass),children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,i.cn)("p-1.5 rounded-md",a.bgClass),children:(0,b.jsx)(g,{className:(0,i.cn)("h-4 w-4",a.colorClass)})}),(0,b.jsx)("span",{className:(0,i.cn)("font-medium text-sm",a.colorClass),children:a.label})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(D.Badge,{variant:a.badgeVariant,className:(0,i.cn)("min-w-[28px] justify-center","warning"===a.severity&&"bg-yellow-500/90 text-white hover:bg-yellow-500/80","clear"===a.severity&&"bg-green-500/90 text-white hover:bg-green-500/80"),children:a.alerts.length}),a.alerts.length>0&&(e?(0,b.jsx)(U.ChevronDown,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(H.ChevronRight,{className:"h-4 w-4 text-muted-foreground"}))]})]})}),a.alerts.length>0&&(0,b.jsx)(Q.CollapsibleContent,{className:"pt-2 space-y-1.5 pl-2",children:a.alerts.map(a=>(0,b.jsx)(X,{alert:a},a.id))})]})}function Z({days:a}){let[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null);if((0,c.useEffect)(()=>{!async function(){g(!0),j(null);try{let b=await fetch(`/api/admin/compliance/alerts?days=${a}`);if(!b.ok)throw Error("Failed to fetch compliance alerts");let c=await b.json();if(c.success&&c.data?.alerts)e(c.data.alerts);else throw Error(c.error||"Unknown error")}catch(a){j(a instanceof Error?a.message:"Failed to load data")}finally{g(!1)}}()},[a]),f)return(0,b.jsx)(W,{});if(i)return(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)(h.CardTitle,{className:"text-base font-semibold flex items-center gap-2",children:[(0,b.jsx)(R.ShieldAlert,{className:"h-4 w-4"}),"Compliance Alerts"]})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(I.AlertCircle,{className:"h-8 w-8 text-muted-foreground mb-2"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:i})]})})]});let k=d.filter(a=>"critical"===a.severity),l=[{id:"critical",label:"Critical",severity:"critical",alerts:k,colorClass:"text-red-600 dark:text-red-400",bgClass:"bg-red-500/10",borderClass:"border-red-500/30",badgeVariant:"destructive"},{id:"warning",label:"Warning",severity:"warning",alerts:d.filter(a=>"high"===a.severity),colorClass:"text-yellow-600 dark:text-yellow-400",bgClass:"bg-yellow-500/10",borderClass:"border-yellow-500/30",badgeVariant:"secondary"},{id:"low",label:"Low Priority",severity:"clear",alerts:d.filter(a=>"medium"===a.severity||"low"===a.severity),colorClass:"text-green-600 dark:text-green-400",bgClass:"bg-green-500/10",borderClass:"border-green-500/30",badgeVariant:"default"}],m=d.length,n=0===m;return(0,b.jsxs)(h.Card,{className:"h-full",children:[(0,b.jsx)(h.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(h.CardTitle,{className:"text-base font-semibold flex items-center gap-2",children:[(0,b.jsx)(R.ShieldAlert,{className:"h-4 w-4 text-primary"}),"Compliance Alerts"]}),m>0&&(0,b.jsxs)(D.Badge,{variant:k.length>0?"destructive":"secondary",className:"font-medium",children:[m," total"]})]})}),(0,b.jsx)(h.CardContent,{className:"space-y-2",children:n?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-green-500/10 mb-3",children:(0,b.jsx)(T.CheckCircle2,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),(0,b.jsx)("p",{className:"font-medium text-green-600 dark:text-green-400",children:"All Clear"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"No compliance issues requiring attention"})]}):l.map(a=>(0,b.jsx)(Y,{group:a,defaultOpen:"critical"===a.severity&&a.alerts.length>0},a.id))})]})}let $=[{value:"7",label:"Last 7 days"},{value:"30",label:"Last 30 days"},{value:"90",label:"Last 90 days"}];function _(){let[a,f]=(0,c.useState)(!1),g=(0,d.useSearchParams)(),h=(0,d.useRouter)(),i=(0,d.usePathname)(),j=g.get("days")||"30";return((0,c.useEffect)(()=>{f(!0)},[]),a)?(0,b.jsxs)(e.Select,{value:j,onValueChange:a=>{let b=new URLSearchParams(g.toString());b.set("days",a),h.push(`${i}?${b.toString()}`)},children:[(0,b.jsx)(e.SelectTrigger,{className:"w-[160px]",children:(0,b.jsx)(e.SelectValue,{placeholder:"Select range"})}),(0,b.jsx)(e.SelectContent,{children:$.map(a=>(0,b.jsx)(e.SelectItem,{value:a.value,children:a.label},a.value))})]}):(0,b.jsxs)("div",{className:"h-10 w-[160px] rounded-md border border-input bg-background px-3 py-2 text-sm flex items-center justify-between",children:[(0,b.jsx)("span",{children:$.find(a=>a.value===j)?.label||"Select range"}),(0,b.jsx)("svg",{className:"h-4 w-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}function aa(){let a=(0,d.useSearchParams)().get("days")||"30";return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(q,{days:a}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)(B,{days:a}),(0,b.jsx)(K,{days:a}),(0,b.jsx)(P,{days:a}),(0,b.jsx)(Z,{days:a})]})]})}function ab(){return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Platform Overview"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Monitor platform health and key metrics"})]}),(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"h-10 w-[160px] rounded-md bg-muted animate-pulse"}),children:(0,b.jsx)(_,{})})]}),(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(g,{}),children:(0,b.jsx)(aa,{})})]})}a.s(["default",()=>ab],659291)}];

//# sourceMappingURL=versotech-portal_src_app_%28admin%29_versotech_admin_dashboard_page_tsx_7bdc2b61._.js.map