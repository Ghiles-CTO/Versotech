module.exports=[166457,a=>{"use strict";let b=(0,a.i(95799).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);a.s(["Filter",()=>b],166457)},873785,a=>{"use strict";let b=(0,a.i(95799).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],873785)},618287,a=>{"use strict";let b=(0,a.i(95799).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],618287)},284169,a=>{"use strict";var b=a.i(352584),c=a.i(888987);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},399580,a=>{"use strict";let b=(0,a.i(95799).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],399580)},181608,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(983639),e=a.i(948624),f=a.i(51540),g=a.i(994358),h=a.i(579119),i=a.i(559387),j=a.i(256832),k=a.i(385487),l="Tabs",[m,n]=(0,e.createContextScope)(l,[f.createRovingFocusGroupScope]),o=(0,f.createRovingFocusGroupScope)(),[p,q]=m(l),r=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:m="horizontal",dir:n,activationMode:o="automatic",...q}=a,r=(0,i.useDirection)(n),[s,t]=(0,j.useControllableState)({prop:e,onChange:f,defaultProp:g??"",caller:l});return(0,b.jsx)(p,{scope:d,baseId:(0,k.useId)(),value:s,onValueChange:t,orientation:m,dir:r,activationMode:o,children:(0,b.jsx)(h.Primitive.div,{dir:r,"data-orientation":m,...q,ref:c})})});r.displayName=l;var s="TabsList",t=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...g}=a,i=q(s,d),j=o(d);return(0,b.jsx)(f.Root,{asChild:!0,...j,orientation:i.orientation,dir:i.dir,loop:e,children:(0,b.jsx)(h.Primitive.div,{role:"tablist","aria-orientation":i.orientation,...g,ref:c})})});t.displayName=s;var u="TabsTrigger",v=c.forwardRef((a,c)=>{let{__scopeTabs:e,value:g,disabled:i=!1,...j}=a,k=q(u,e),l=o(e),m=y(k.baseId,g),n=z(k.baseId,g),p=g===k.value;return(0,b.jsx)(f.Item,{asChild:!0,...l,focusable:!i,active:p,children:(0,b.jsx)(h.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":n,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...j,ref:c,onMouseDown:(0,d.composeEventHandlers)(a.onMouseDown,a=>{i||0!==a.button||!1!==a.ctrlKey?a.preventDefault():k.onValueChange(g)}),onKeyDown:(0,d.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&k.onValueChange(g)}),onFocus:(0,d.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==k.activationMode;p||i||!a||k.onValueChange(g)})})})});v.displayName=u;var w="TabsContent",x=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:i,children:j,...k}=a,l=q(w,e),m=y(l.baseId,f),n=z(l.baseId,f),o=f===l.value,p=c.useRef(o);return c.useEffect(()=>{let a=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(g.Presence,{present:i||o,children:({present:c})=>(0,b.jsx)(h.Primitive.div,{"data-state":o?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":m,hidden:!c,id:n,tabIndex:0,...k,ref:d,style:{...a.style,animationDuration:p.current?"0s":void 0},children:c&&j})})});function y(a,b){return`${a}-trigger-${b}`}function z(a,b){return`${a}-content-${b}`}x.displayName=w;var A=a.i(888987);let B=c.forwardRef(({id:a,...d},e)=>{let f=c.useId();return(0,b.jsx)(r,{ref:e,id:a??f,...d})});B.displayName="Tabs";let C=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(t,{ref:d,className:(0,A.cn)("inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...c}));C.displayName=t.displayName;let D=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(v,{ref:d,className:(0,A.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...c}));D.displayName=v.displayName;let E=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(x,{ref:d,className:(0,A.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...c}));E.displayName=x.displayName,a.s(["Tabs",()=>B,"TabsContent",()=>E,"TabsList",()=>C,"TabsTrigger",()=>D],181608)},82439,a=>{"use strict";let b=(0,a.i(95799).default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);a.s(["Inbox",()=>b],82439)},548657,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(497412),e=a.i(284169),f=a.i(421908),g=a.i(15788),h=a.i(663475),i=a.i(181608),j=a.i(951870),k=a.i(3321),l=a.i(696661),m=a.i(71459);let n=(0,a.i(95799).default)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);var o=a.i(487068),p=a.i(166457),q=a.i(873785),r=a.i(82439),s=a.i(816854),t=a.i(871057),u=a.i(478870),v=a.i(399580),w=a.i(42329),x=a.i(618287),y=a.i(899750),z=a.i(888987);let A={deal:{label:"Deal",icon:t.Briefcase,color:"bg-blue-100 text-blue-800"},subscription:{label:"Subscription",icon:s.FileText,color:"bg-green-100 text-green-800"},signature:{label:"Signature",icon:s.FileText,color:"bg-purple-100 text-purple-800"},dataroom:{label:"Dataroom",icon:s.FileText,color:"bg-indigo-100 text-indigo-800"},kyc:{label:"KYC",icon:u.Users,color:"bg-orange-100 text-orange-800"},nda:{label:"NDA",icon:s.FileText,color:"bg-teal-100 text-teal-800"},agreement:{label:"Agreement",icon:s.FileText,color:"bg-pink-100 text-pink-800"},proxy_subscription:{label:"Proxy Subscription",icon:u.Users,color:"bg-cyan-100 text-cyan-800"},task:{label:"Task",icon:v.CheckCircle2,color:"bg-yellow-100 text-yellow-800"},reminder:{label:"Reminder",icon:w.Clock,color:"bg-amber-100 text-amber-800"},general:{label:"General",icon:m.Bell,color:"bg-gray-100 text-gray-800"}};function B(){let[a,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[w,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)("all"),[I,J]=(0,c.useState)("inbox"),K=async()=>{B(!0);try{let a=new URLSearchParams;"all"!==G&&a.set("type",G),"sent"===I&&a.set("created_by_me","true");let b=await fetch(`/api/notifications?${a.toString()}`);if(!b.ok)throw Error("Failed to load notifications");let c=await b.json();s(c.notifications??[]),c.types&&u(c.types)}catch(a){console.error(a),y.toast.error("Failed to load notifications")}finally{B(!1)}};(0,c.useEffect)(()=>{K()},[G,I]);let L=a.filter(a=>{if(!E)return!0;let b=E.toLowerCase();return a.title?.toLowerCase().includes(b)||a.message?.toLowerCase().includes(b)}),M=L.filter(a=>!a.read_at),N=L.filter(a=>a.read_at),O=M.map(a=>a.id),P=async()=>{if(0!==O.length&&!C){D(!0);try{if(!(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:O})})).ok)throw Error("Failed to mark notifications read");y.toast.success("Marked all as read"),K()}catch(a){console.error(a),y.toast.error("Failed to mark notifications as read")}finally{D(!1)}}},Q=async a=>{try{if(!(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:[a]})})).ok)throw Error("Failed to mark notification read");K()}catch(a){console.error(a)}},R=a=>{let c,h,i,j,k,m=A[a.type||"general"]||A.general,n=m.icon;return(0,b.jsxs)(e.Card,{className:(0,z.cn)("border transition-colors hover:border-primary/50",a.read_at?"bg-white":"bg-blue-50/50 border-blue-200"),children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,b.jsx)("div",{className:(0,z.cn)("p-2 rounded-lg shrink-0",m.color),children:(0,b.jsx)(n,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)(e.CardTitle,{className:"text-base text-gray-900 truncate",children:a.title}),!a.read_at&&(0,b.jsx)(g.Badge,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"New"}),a.type&&(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs capitalize",children:m.label})]}),(0,b.jsx)(e.CardDescription,{className:"mt-1",children:(c=new Date(a.created_at),i=Math.floor((h=new Date().getTime()-c.getTime())/6e4),j=Math.floor(h/36e5),k=Math.floor(h/864e5),i<1?"Just now":i<60?`${i}m ago`:j<24?`${j}h ago`:k<7?`${k}d ago`:c.toLocaleDateString())})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[!a.read_at&&(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>Q(a.id),title:"Mark as read",children:(0,b.jsx)(l.Check,{className:"h-4 w-4"})}),a.link&&(0,b.jsx)(f.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsxs)(d.default,{href:a.link,children:["Open",(0,b.jsx)(x.ExternalLink,{className:"h-3 w-3 ml-1"})]})})]})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:a.message})})]},a.id)};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Notifications"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Stay up to date with deal activity, agreements, and subscription progress."})]}),(0,b.jsxs)(f.Button,{variant:"outline",disabled:0===O.length||C||"sent"===I,onClick:P,className:"gap-2",children:[C?(0,b.jsx)(k.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(l.Check,{className:"h-4 w-4"}),"Mark all read (",O.length,")"]})]}),(0,b.jsxs)(i.Tabs,{value:I,onValueChange:a=>J(a),children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[(0,b.jsxs)(i.TabsList,{children:[(0,b.jsxs)(i.TabsTrigger,{value:"inbox",className:"gap-2",children:[(0,b.jsx)(r.Inbox,{className:"h-4 w-4"}),"Inbox"]}),(0,b.jsxs)(i.TabsTrigger,{value:"sent",className:"gap-2",children:[(0,b.jsx)(q.Send,{className:"h-4 w-4"}),"Sent by Me"]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{placeholder:"Search notifications...",value:E,onChange:a=>F(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(j.Select,{value:G,onValueChange:H,children:[(0,b.jsxs)(j.SelectTrigger,{className:"w-[180px]",children:[(0,b.jsx)(p.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(j.SelectValue,{placeholder:"Filter by type"})]}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Types"}),t.map(a=>{let c=A[a]||A.general;return(0,b.jsx)(j.SelectItem,{value:a,className:"capitalize",children:c.label},a)})]})]})]})]}),(0,b.jsx)(i.TabsContent,{value:"inbox",className:"mt-6 space-y-6",children:w?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12 text-gray-500 gap-2",children:[(0,b.jsx)(k.Loader2,{className:"h-5 w-5 animate-spin"}),"Loading notifications..."]}):0===L.length?(0,b.jsx)(e.Card,{className:"border border-gray-200 bg-white",children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(n,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:E||"all"!==G?"No notifications match your filters":"You're all caught up! New updates will show here."})]})}):(0,b.jsxs)(b.Fragment,{children:[M.length>0&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(m.Bell,{className:"h-4 w-4"}),"Unread (",M.length,")"]}),(0,b.jsx)("div",{className:"space-y-3",children:M.map(R)})]}),N.length>0&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(v.CheckCircle2,{className:"h-4 w-4"}),"Earlier (",N.length,")"]}),(0,b.jsx)("div",{className:"space-y-3",children:N.map(R)})]})]})}),(0,b.jsx)(i.TabsContent,{value:"sent",className:"mt-6",children:w?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12 text-gray-500 gap-2",children:[(0,b.jsx)(k.Loader2,{className:"h-5 w-5 animate-spin"}),"Loading sent notifications..."]}):0===L.length?(0,b.jsx)(e.Card,{className:"border border-gray-200 bg-white",children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(q.Send,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:E||"all"!==G?"No sent notifications match your filters":"No notifications sent yet. Notifications you create will appear here."})]})}):(0,b.jsx)("div",{className:"space-y-3",children:L.map(R)})})]})]})}a.s(["default",()=>B],548657)}];

//# sourceMappingURL=versotech-portal_12e3e8ae._.js.map