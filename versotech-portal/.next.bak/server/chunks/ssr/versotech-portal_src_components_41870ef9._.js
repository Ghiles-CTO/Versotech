module.exports=[47808,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(497412),e=a.i(289633),f=a.i(714814),g=a.i(421908),h=a.i(58834);let i={tasks:0,messages:0,deals:0,requests:0,approvals:0,notifications:0,signatures:0,reconciliation:0,fees:0,totalUnread:0};var j=a.i(888987),k=a.i(390354),l=a.i(278541),m=a.i(816854),n=a.i(203297),o=a.i(142015),p=a.i(375968),q=a.i(966494),r=a.i(478870),s=a.i(188530),t=a.i(540316),u=a.i(496392),v=a.i(64730),w=a.i(577955),x=a.i(672606),y=a.i(123614),z=a.i(167156),A=a.i(13542),B=a.i(290913),C=a.i(787957),D=a.i(871057),E=a.i(92881),F=a.i(487068),G=a.i(71459),H=a.i(724070);let I=[{name:"Dashboard",href:"/versotech_main/dashboard",icon:k.LayoutDashboard,description:"Portfolio overview"},{name:"Active Deals",href:"/versotech_main/opportunities",icon:C.Activity,notificationKey:"deals",description:"Investment opportunities"},{name:"Portfolio",href:"/versotech_main/portfolio",icon:D.Briefcase,description:"My investments"},{name:"Calendar",href:"/versotech_main/calendar",icon:H.Calendar,description:"Schedule"},{name:"Reports",href:"/versotech_main/documents",icon:q.TrendingUp,description:"Performance reports"},{name:"Tasks",href:"/versotech_main/tasks",icon:p.CheckSquare,notificationKey:"tasks",description:"Action items"},{name:"Messages",href:"/versotech_main/messages",icon:o.MessageSquare,notificationKey:"messages",description:"Communications"},{name:"Notifications",href:"/versotech_main/notifications",icon:G.Bell,notificationKey:"notifications",description:"Alerts"}],J=[{name:"Dashboard",href:"/versotech_main",icon:k.LayoutDashboard,description:"Overview"},{name:"Messages",href:"/versotech_main/messages",icon:o.MessageSquare,notificationKey:"messages",description:"Inbox"},{name:"Approvals",href:"/versotech_main/approvals",icon:E.UserCheck,notificationKey:"approvals",description:"Pending approvals"},{name:"Deals",href:"/versotech_main/deals",icon:C.Activity,description:"Deal management"},{name:"Vehicles",href:"/versotech_main/entities",icon:l.Building2,description:"Investment vehicles"},{name:"Investors",href:"/versotech_main/investors",icon:r.Users,description:"Investor relations"},{name:"KYC Review",href:"/versotech_main/kyc-review",icon:E.UserCheck,description:"KYC compliance review"},{name:"Subscriptions",href:"/versotech_main/subscriptions",icon:m.FileText,description:"Subscription tracking"},{name:"Processes",href:"/versotech_main/processes",icon:s.Workflow,description:"Workflows"},{name:"Requests",href:"/versotech_main/requests",icon:t.ClipboardList,notificationKey:"requests",description:"Service requests"},{name:"Documents",href:"/versotech_main/documents",icon:m.FileText,description:"Document center"},{name:"VersoSign",href:"/versotech_main/versosign",icon:n.FileSignature,notificationKey:"signatures",description:"E-signatures"},{name:"Introducers",href:"/versotech_main/introducers",icon:z.HandHeart,description:"Partners"},{name:"Arrangers",href:"/versotech_main/arrangers",icon:D.Briefcase,description:"Regulated entities"},{name:"Fees",href:"/versotech_main/fees",icon:B.Calculator,notificationKey:"fees",description:"Billing"},{name:"Reconciliation",href:"/versotech_main/reconciliation",icon:A.CreditCard,notificationKey:"reconciliation",description:"Payments"},{name:"Calendar",href:"/versotech_main/calendar",icon:H.Calendar,description:"Schedule"},{name:"Audit",href:"/versotech_main/audit",icon:u.Shield,description:"Compliance logs"},{name:"Admin",href:"/versotech_main/admin",icon:v.Database,description:"System settings",requiredPermission:"super_admin"}];function K({brand:a,userProfile:k}){let[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),p=(0,e.usePathname)(),q=(0,e.useRouter)(),{counts:r,loading:s}=function(a,b){let[d,e]=(0,c.useState)(i),[f,g]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{if(!b)return;let c=!0,d=null,f=async(a=!1)=>{a||g(!0);try{let b=await fetch("/api/notifications/counts",{cache:"no-store",signal:AbortSignal.timeout(1e4)});if(401===b.status){c&&(e(i),a||g(!1));return}if(!b.ok){a||console.warn(`Failed to load notification counts (${b.status})`);return}let d=await b.json();c&&d?.counts&&e(d.counts)}catch(b){!a&&b instanceof Error&&"TimeoutError"!==b.name&&"AbortError"!==b.name&&console.warn("Failed to fetch notification counts:",b.message)}finally{c&&!a&&g(!1)}};f();try{d=(0,h.createClient)()}catch(a){return console.error("Failed to initialize Supabase client for notifications:",a),g(!1),()=>{c=!1}}let j=[];j.push(d.channel(`notifications_tasks_${b}`).on("postgres_changes",{event:"*",schema:"public",table:"tasks",filter:`owner_user_id=eq.${b}`},()=>{f(!0)}).subscribe()),j.push(d.channel(`notifications_investor_${b}`).on("postgres_changes",{event:"*",schema:"public",table:"investor_notifications",filter:`user_id=eq.${b}`},()=>{f(!0)}).subscribe()),(a.startsWith("staff_")||"ceo"===a)&&(j.push(d.channel("notifications_requests").on("postgres_changes",{event:"*",schema:"public",table:"request_tickets",filter:"status=in.(open,assigned,in_progress,awaiting_info)"},()=>{f(!0)}).subscribe()),j.push(d.channel("notifications_approvals").on("postgres_changes",{event:"*",schema:"public",table:"approvals",filter:"status=in.(pending)"},()=>{f(!0)}).subscribe()));let k=window.setInterval(()=>{f(!0)},6e4);return()=>{c=!1,j.forEach(a=>{d?.removeChannel(a)}),window.clearInterval(k)}},[b,a]),{counts:d,loading:f}}(k.role,k.id),t=("versoholdings"===a?I:J).filter(a=>!a.requiredPermission||k.permissions?.includes(a.requiredPermission)),u=async a=>{a.preventDefault(),a.stopPropagation();try{let a=(0,h.createClient)();await a.auth.signOut(),q.push("/login")}catch(a){console.error("Sign out error:",a)}},v=t.filter(a=>a.name.toLowerCase().includes(n.toLowerCase()));return(0,b.jsxs)("div",{className:(0,j.cn)("flex flex-col h-screen transition-all duration-300 border-r relative z-50",l?"w-[80px]":"w-[280px]","bg-white dark:bg-zinc-950 border-gray-100 dark:border-white/5 text-gray-600 dark:text-zinc-400"),children:[(0,b.jsxs)("div",{className:"p-6 flex items-center justify-between h-20",children:[!l&&(0,b.jsx)("div",{className:"flex items-center gap-3 animate-in fade-in duration-300",children:(0,b.jsx)("div",{className:(0,j.cn)("relative h-10 w-32 overflow-hidden"),children:(0,b.jsx)(f.default,{src:"versotech"===a?"/versotech-logo.jpg":"/versoholdings-logo.jpg",alt:"Logo",fill:!0,className:"object-contain object-left dark:invert",priority:!0})})}),l&&(0,b.jsx)("div",{className:"mx-auto",children:(0,b.jsx)("div",{className:"relative h-8 w-8 rounded-lg overflow-hidden bg-gray-50 dark:bg-white/5 ring-1 ring-gray-100 dark:ring-white/10",children:(0,b.jsx)(f.default,{src:"versotech"===a?"/versotech-logo.jpg":"/versoholdings-logo.jpg",alt:"Logo",fill:!0,className:"object-cover",priority:!0})})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>m(!l),className:"absolute -right-3 top-8 h-6 w-6 rounded-full border shadow-sm z-50 hidden md:flex items-center justify-center transition-colors bg-white dark:bg-zinc-900 border-gray-200 dark:border-white/10 text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5",children:l?(0,b.jsx)(x.ChevronRight,{className:"h-3 w-3"}):(0,b.jsx)(w.ChevronLeft,{className:"h-3 w-3"})})]}),!l&&(0,b.jsx)("div",{className:"px-4 mb-4 animate-in fade-in slide-in-from-top-2 duration-300",children:(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(F.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 transition-colors text-gray-400 dark:text-gray-500 group-focus-within:text-gray-900 dark:group-focus-within:text-white"}),(0,b.jsx)("input",{type:"text",placeholder:"Search...",value:n,onChange:a=>o(a.target.value),className:"w-full pl-9 pr-4 py-2 rounded-lg text-sm transition-all outline-none bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-600 focus:bg-white dark:focus:bg-white/10 focus:border-gray-200 dark:focus:border-white/10 focus:ring-2 focus:ring-blue-500/10 dark:focus:ring-0"})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-hide px-3 py-2 space-y-1",children:v.map(a=>{let c="Dashboard"===a.name?p===a.href:p===a.href||p.startsWith(`${a.href}/`),e=a.icon,f=a.notificationKey&&!s?r[a.notificationKey]:a.badge,g=`nav-${a.name.toLowerCase().replace(/\s+/g,"-")}`;return(0,b.jsxs)(d.default,{href:a.href,className:"block group relative","data-tour":g,children:[(0,b.jsxs)("div",{className:(0,j.cn)("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",c?"bg-blue-50 dark:bg-gradient-to-r dark:from-blue-600/20 dark:to-blue-600/5 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5"),children:[(0,b.jsx)(e,{className:(0,j.cn)("h-5 w-5 transition-colors",c?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-white")}),!l&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"flex-1 text-sm font-medium",children:a.name}),f&&Number(f)>0&&(0,b.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400",children:Number(f)>99?"99+":f})]}),c&&(0,b.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r-full bg-blue-600 dark:bg-blue-500"})]}),l&&(0,b.jsxs)("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-md text-xs font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 shadow-xl border bg-white dark:bg-zinc-800 border-gray-100 dark:border-white/10 text-gray-900 dark:text-white",children:[a.name,f&&Number(f)>0&&(0,b.jsxs)("span",{className:"ml-2 opacity-75",children:["(",f,")"]})]})]},a.name)})}),(0,b.jsx)("div",{className:"p-4 border-t mt-auto border-gray-100 dark:border-white/5",children:(0,b.jsx)(d.default,{href:`/${a}${"versotech"===a?"/staff":""}/profile`,"data-tour":"nav-profile",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-xl transition-all cursor-pointer group hover:bg-gray-50 dark:hover:bg-white/5",children:[(0,b.jsx)("div",{className:"h-9 w-9 rounded-full flex items-center justify-center text-sm font-bold shadow-sm ring-2 bg-white dark:bg-gradient-to-br dark:from-blue-500 dark:to-blue-600 text-blue-600 dark:text-white ring-white dark:ring-black border border-gray-100 dark:border-transparent",children:k.displayName?.[0]?.toUpperCase()||"U"}),!l&&(0,b.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,b.jsx)("p",{className:"text-sm font-semibold truncate text-gray-900 dark:text-white",children:k.displayName||"User"}),(0,b.jsx)("p",{className:"text-xs truncate flex items-center gap-1 text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-400",children:"View Profile"})]}),!l&&(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-white/5",children:(0,b.jsx)(y.LogOut,{className:"h-4 w-4"})})]})})})]})}a.s(["Sidebar",()=>K],47808)},762111,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(421908),f=a.i(216316),g=a.i(105874),h=a.i(325866),i=a.i(123614),j=a.i(496392),k=a.i(278541),l=a.i(976839),m=a.i(85514);function n({profile:a,brand:n="versotech",useThemeColors:o=!1}){var p;let[q,r]=(0,c.useState)(!1),{theme:s}=(0,m.useTheme)(),t=o?"staff-dark"===s:"versotech"===n,u=(0,d.useRouter)(),[v,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{r(!0)},[]);let x=async()=>{w(!0);let a="/versotech_main/login";try{await (0,l.signOut)(),u.push(a),window.location.href=a}catch(b){console.error("Logout failed:",b),window.location.href=a}},y=a=>{switch(a){case"investor":return"Investor";case"staff_admin":case"ceo":return"CEO";case"staff_ops":return"Operations";case"staff_rm":return"Relationship Manager";default:return a}},z=a=>a&&a.split(" ").map(a=>a[0]).filter(Boolean).join("").toUpperCase().slice(0,2)||"U";return("investor"===(p=a.role)?k.Building2:p.startsWith("staff_")||"ceo"===p?j.Shield:h.User,q)?(0,b.jsxs)(f.DropdownMenu,{children:[(0,b.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"ghost",className:`flex items-center gap-2 h-auto px-3 py-2 ${t?"hover:bg-white/10":"hover:bg-black/5"}`,children:[(0,b.jsxs)(g.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(g.AvatarImage,{src:a.avatar||void 0,alt:a.displayName}),(0,b.jsx)(g.AvatarFallback,{className:`${t?"bg-white/20 text-white":"bg-black/10 text-black"} text-xs`,children:z(a.displayName)})]}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:`font-medium text-sm ${t?"text-white":"text-black"}`,children:a.displayName}),(0,b.jsx)("div",{className:`text-xs ${t?"text-white/70":"text-black/70"}`,children:y(a.role)})]})]})}),(0,b.jsxs)(f.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,b.jsx)(f.DropdownMenuLabel,{children:"My Account"}),(0,b.jsxs)("div",{className:"px-2 py-1.5",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:a.displayName}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.email}),a.title&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.title})]}),(0,b.jsx)(f.DropdownMenuSeparator,{}),(0,b.jsxs)(f.DropdownMenuItem,{onClick:()=>{u.push((a.role,"/versotech_main/profile"))},children:[(0,b.jsx)(h.User,{className:"mr-2 h-4 w-4"}),"Profile Settings"]}),(0,b.jsx)(f.DropdownMenuSeparator,{}),(0,b.jsxs)(f.DropdownMenuItem,{onClick:x,disabled:v,className:"text-red-600 focus:text-red-600",children:[(0,b.jsx)(i.LogOut,{className:"mr-2 h-4 w-4"}),v?"Signing out...":"Sign out"]})]})]}):(0,b.jsxs)(e.Button,{variant:"ghost",className:`flex items-center gap-2 h-auto px-3 py-2 ${t?"hover:bg-white/10":"hover:bg-black/5"}`,children:[(0,b.jsx)(g.Avatar,{className:"h-8 w-8",children:(0,b.jsx)(g.AvatarFallback,{className:`${t?"bg-white/20 text-white":"bg-black/10 text-black"} text-xs`,children:z(a.displayName)})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:`font-medium text-sm ${t?"text-white":"text-black"}`,children:a.displayName}),(0,b.jsx)("div",{className:`text-xs ${t?"text-white/70":"text-black/70"}`,children:y(a.role)})]})]})}a.s(["UserMenu",()=>n])},974252,a=>{"use strict";var b=a.i(352584),c=a.i(497412),d=a.i(838086),e=a.i(50828),f=a.i(42329),g=a.i(403205),h=a.i(421908);function i({status:a}){return"approved"===a?null:"pending"===a?(0,b.jsxs)(g.Alert,{className:"border-amber-500/50 bg-amber-500/20 mb-6",children:[(0,b.jsx)(f.Clock,{className:"h-4 w-4 text-amber-500"}),(0,b.jsx)(g.AlertTitle,{className:"text-amber-500 font-semibold",children:"KYC Verification Pending"}),(0,b.jsx)(g.AlertDescription,{className:"text-white/90",children:"Your KYC application is currently under review by our compliance team. We will notify you once the review is complete."})]}):"rejected"===a?(0,b.jsxs)(g.Alert,{variant:"destructive",className:"mb-6",children:[(0,b.jsx)(d.AlertTriangle,{className:"h-4 w-4"}),(0,b.jsx)(g.AlertTitle,{children:"KYC Verification Failed"}),(0,b.jsxs)(g.AlertDescription,{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsx)("span",{children:"Your KYC application was rejected. Please review the feedback and update your information."}),(0,b.jsx)(h.Button,{variant:"outline",size:"sm",className:"w-full sm:w-auto bg-background text-foreground hover:bg-accent",asChild:!0,children:(0,b.jsxs)(c.default,{href:"/versotech_main/profile?tab=kyc",children:["Update Information",(0,b.jsx)(e.ArrowRight,{className:"ml-2 h-4 w-4"})]})})]})]}):(0,b.jsxs)(g.Alert,{className:"border-blue-500/30 bg-blue-500/10 text-blue-200 mb-6",children:[(0,b.jsx)(d.AlertTriangle,{className:"h-4 w-4 text-blue-400"}),(0,b.jsx)(g.AlertTitle,{className:"text-blue-400",children:"Action Required: Complete KYC"}),(0,b.jsxs)(g.AlertDescription,{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsx)("span",{children:"To access all investment features, please complete your Know Your Customer (KYC) verification."}),(0,b.jsx)(h.Button,{size:"sm",className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white border-0",asChild:!0,children:(0,b.jsxs)(c.default,{href:"/versotech_main/profile?tab=kyc",children:["Complete Now",(0,b.jsx)(e.ArrowRight,{className:"ml-2 h-4 w-4"})]})})]})]})}a.s(["KYCAlert",()=>i])}];

//# sourceMappingURL=versotech-portal_src_components_41870ef9._.js.map