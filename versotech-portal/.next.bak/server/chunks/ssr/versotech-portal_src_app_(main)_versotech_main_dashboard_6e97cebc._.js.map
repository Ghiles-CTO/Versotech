{"version":3,"sources":["../../../../../versotech-portal/src/app/%28main%29/versotech_main/dashboard/ceo-dashboard.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/dashboard/investor-dashboard.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/dashboard/introducer-dashboard.tsx","../../../../../versotech-portal/src/components/partner/FeeModelView.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/dashboard/partner-dashboard.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/dashboard/lawyer-dashboard.tsx","../../../../../versotech-portal/src/components/arranger/arranger-onboarding-checklist.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/dashboard/arranger-dashboard.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/dashboard/commercial-partner-dashboard.tsx","../../../../../versotech-portal/src/app/%28main%29/versotech_main/dashboard/persona-dashboard.tsx","../../../../../versotech-portal/node_modules/lucide-react/src/icons/arrow-left-right.ts"],"sourcesContent":["'use client'\n\nimport { EnhancedStaffDashboard } from '@/components/dashboard/enhanced-staff-dashboard'\nimport { RealtimeStaffDashboard } from '@/components/dashboard/realtime-staff-dashboard'\n\ninterface CEODashboardProps {\n  dashboardData: any\n  realtimeMetrics: {\n    activeLps: number\n    pendingKyc: number\n    workflowRuns: number\n    complianceRate: number\n    kycPipeline: number\n    ndaInProgress: number\n    subscriptionReview: number\n    activeDeals: number\n    activeRequests: number\n    lastUpdated: string\n  }\n}\n\n/**\n * CEO Dashboard - Full executive dashboard with real-time metrics\n * Wraps the enhanced staff dashboard components for use in the unified portal\n */\nexport function CEODashboard({ dashboardData, realtimeMetrics }: CEODashboardProps) {\n  return (\n    <div className=\"space-y-6\">\n      {/* Real-time connection and live metrics */}\n      <RealtimeStaffDashboard initialData={realtimeMetrics} />\n\n      {/* Main comprehensive dashboard */}\n      <EnhancedStaffDashboard initialData={dashboardData} />\n    </div>\n  )\n}\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport Image from 'next/image'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { usePersona, Persona } from '@/contexts/persona-context'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport { InvestorActionCenter, DashboardTask, DashboardActivity } from '@/components/dashboard/investor-action-center'\r\nimport { FeaturedDealsSection, FeaturedDeal } from '@/components/dashboard/featured-deals-section'\r\nimport { VideoIntroModal } from '@/components/video/video-intro-modal'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { Skeleton } from '@/components/ui/skeleton'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  ArrowUpRight,\r\n  Building2,\r\n  CalendarClock,\r\n  FileText,\r\n  Layers,\r\n  MapPin,\r\n  MessageSquare,\r\n  Target,\r\n  User as UserIcon,\r\n  Loader2\r\n} from 'lucide-react'\r\n\r\ninterface PortfolioVehicle {\r\n  id: string\r\n  name: string\r\n  type: string\r\n  domicile?: string | null\r\n  currency?: string | null\r\n}\r\n\r\ninterface InvestorDashboardData {\r\n  profile: {\r\n    displayName: string | null\r\n    avatarUrl: string | null\r\n    hasSeenIntroVideo: boolean\r\n  } | null\r\n  vehicles: PortfolioVehicle[]\r\n  featuredDeals: FeaturedDeal[]\r\n  tasks: DashboardTask[]\r\n  tasksTotal: number\r\n  recentActivity: DashboardActivity[]\r\n  hasPortfolioData: boolean\r\n}\r\n\r\ninterface InvestorDashboardProps {\r\n  investorId: string\r\n  userId: string\r\n  persona: Persona\r\n}\r\n\r\nfunction formatVehicleMeta(vehicle: PortfolioVehicle) {\r\n  const typeLabel = vehicle.type ? vehicle.type.replace(/_/g, ' ') : 'Vehicle'\r\n  const location = vehicle.domicile || vehicle.currency || 'Global'\r\n  return `${typeLabel} • ${location}`\r\n}\r\n\r\nfunction DashboardSkeleton() {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-pulse\">\r\n      <div className={cn(\r\n        \"rounded-3xl border p-8\",\r\n        isDark ? \"border-white/10 bg-white/5\" : \"border-slate-200/80 bg-white\"\r\n      )}>\r\n        {/* Responsive: single column on mobile, two columns on tablet+ */}\r\n        <div className=\"grid gap-6 md:gap-8 md:grid-cols-[1.9fr,1fr]\">\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <Skeleton className=\"h-16 w-16 rounded-full\" />\r\n              <div className=\"space-y-2\">\r\n                <Skeleton className=\"h-4 w-24\" />\r\n                <Skeleton className=\"h-8 w-48\" />\r\n                <Skeleton className=\"h-4 w-64\" />\r\n              </div>\r\n            </div>\r\n            {/* Responsive: stack on phone, 2 cols on small, 3 on medium+ */}\r\n            <div className=\"grid gap-3 md:gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3\">\r\n              {[1, 2, 3].map(i => (\r\n                <Skeleton key={i} className=\"h-24 rounded-2xl\" />\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <Skeleton className=\"h-48 rounded-2xl\" />\r\n        </div>\r\n      </div>\r\n      <div className=\"grid gap-6 md:grid-cols-3\">\r\n        {[1, 2, 3].map(i => (\r\n          <Skeleton key={i} className=\"h-64 rounded-2xl\" />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction HoldingsSnapshot({ vehicles }: { vehicles: PortfolioVehicle[] }) {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n  const displayed = vehicles.slice(0, 4)\r\n\r\n  return (\r\n    <Card className={cn(\r\n      \"h-full overflow-hidden rounded-2xl border shadow-sm\",\r\n      isDark ? \"border-white/10 bg-card\" : \"border-slate-200/80\"\r\n    )}>\r\n      <CardHeader className=\"space-y-1.5 border-b p-6\">\r\n        <CardTitle className={cn(\r\n          \"text-base font-semibold\",\r\n          isDark ? \"text-white\" : \"text-slate-900\"\r\n        )}>Portfolio snapshot</CardTitle>\r\n        <CardDescription className={cn(\r\n          \"text-sm\",\r\n          isDark ? \"text-gray-400\" : \"text-slate-600\"\r\n        )}>\r\n          At-a-glance view of the vehicles you&apos;re currently allocated to.\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4 p-6\">\r\n        {displayed.length === 0 ? (\r\n          <div className={cn(\r\n            \"rounded-xl border border-dashed p-6 text-center text-sm\",\r\n            isDark\r\n              ? \"border-white/10 bg-white/5 text-gray-400\"\r\n              : \"border-slate-200/80 bg-slate-50/80 text-slate-500\"\r\n          )}>\r\n            No active holdings yet. Allocations will appear here once your onboarding is complete.\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {displayed.map((vehicle) => (\r\n              <Link\r\n                key={vehicle.id}\r\n                href={`/versotech_main/opportunities?vehicle=${vehicle.id}`}\r\n                className={cn(\r\n                  \"flex items-center justify-between gap-4 rounded-xl border p-4 transition-all hover:border-primary/40 hover:bg-primary/5\",\r\n                  isDark\r\n                    ? \"border-white/10 bg-white/5\"\r\n                    : \"border-slate-200/80 bg-white/90\"\r\n                )}\r\n              >\r\n                <div className=\"space-y-1\">\r\n                  <p className={cn(\r\n                    \"text-sm font-semibold\",\r\n                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                  )}>{vehicle.name}</p>\r\n                  <p className={cn(\r\n                    \"text-xs\",\r\n                    isDark ? \"text-gray-400\" : \"text-slate-500\"\r\n                  )}>{formatVehicleMeta(vehicle)}</p>\r\n                </div>\r\n                <ArrowUpRight className=\"h-4 w-4 text-primary\" />\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n      <CardFooter className=\"flex flex-wrap items-center justify-between gap-3 border-t p-6\">\r\n        <Badge variant=\"outline\" className={cn(\r\n          \"rounded-full\",\r\n          isDark\r\n            ? \"border-white/10 bg-white/5 text-gray-300\"\r\n            : \"border-slate-200/80 bg-slate-50 text-slate-600\"\r\n        )}>\r\n          {vehicles.length} vehicle{vehicles.length === 1 ? '' : 's'} tracked\r\n        </Badge>\r\n        <Link href=\"/versotech_main/opportunities\">\r\n          <Button variant=\"outline\" size=\"sm\">\r\n            Open holdings workspace\r\n            <ArrowUpRight className=\"ml-2 h-4 w-4\" />\r\n          </Button>\r\n        </Link>\r\n      </CardFooter>\r\n    </Card>\r\n  )\r\n}\r\n\r\nfunction VersoServicesCard() {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n\r\n  return (\r\n    <Card className={cn(\r\n      \"h-full overflow-hidden rounded-2xl border shadow-sm\",\r\n      isDark ? \"border-white/10 bg-card\" : \"border-slate-200/80\"\r\n    )}>\r\n      <CardHeader className=\"space-y-1.5 border-b p-6\">\r\n        <CardTitle className={cn(\r\n          \"text-base font-semibold\",\r\n          isDark ? \"text-white\" : \"text-slate-900\"\r\n        )}>VERSO concierge</CardTitle>\r\n        <CardDescription className={cn(\r\n          \"text-sm\",\r\n          isDark ? \"text-gray-400\" : \"text-slate-600\"\r\n        )}>\r\n          Direct access to deal rooms, bespoke reporting, and support.\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-3 p-6\">\r\n        <Link href=\"/versotech_main/opportunities\">\r\n          <Button className={cn(\r\n            \"w-full justify-start rounded-xl border hover:border-primary/40 hover:bg-primary/5\",\r\n            isDark\r\n              ? \"border-white/10 bg-white/5 text-gray-200\"\r\n              : \"border-slate-200/80 bg-white/80 text-slate-700\"\r\n          )} variant=\"outline\">\r\n            <Layers className=\"mr-2 h-4 w-4\" />\r\n            Concluder™ Deal Room\r\n          </Button>\r\n        </Link>\r\n        <Link href=\"/versotech_main/opportunities\">\r\n          <Button className={cn(\r\n            \"w-full justify-start rounded-xl border hover:border-primary/40 hover:bg-primary/5\",\r\n            isDark\r\n              ? \"border-white/10 bg-white/5 text-gray-200\"\r\n              : \"border-slate-200/80 bg-white/80 text-slate-700\"\r\n          )} variant=\"outline\">\r\n            <Target className=\"mr-2 h-4 w-4\" />\r\n            Off-market opportunities\r\n          </Button>\r\n        </Link>\r\n        <Link href=\"/versotech_main/documents\">\r\n          <Button className={cn(\r\n            \"w-full justify-start rounded-xl border hover:border-primary/40 hover:bg-primary/5\",\r\n            isDark\r\n              ? \"border-white/10 bg-white/5 text-gray-200\"\r\n              : \"border-slate-200/80 bg-white/80 text-slate-700\"\r\n          )} variant=\"outline\">\r\n            <FileText className=\"mr-2 h-4 w-4\" />\r\n            Request position statement\r\n          </Button>\r\n        </Link>\r\n        <Link href=\"/versotech_main/inbox\">\r\n          <Button className={cn(\r\n            \"w-full justify-start rounded-xl border hover:border-primary/40 hover:bg-primary/5\",\r\n            isDark\r\n              ? \"border-white/10 bg-white/5 text-gray-200\"\r\n              : \"border-slate-200/80 bg-white/80 text-slate-700\"\r\n          )} variant=\"outline\">\r\n            <MessageSquare className=\"mr-2 h-4 w-4\" />\r\n            Custom analytics request\r\n          </Button>\r\n        </Link>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\nfunction WelcomePanel() {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n\r\n  const highlights = [\r\n    {\r\n      id: 'fund',\r\n      title: 'VERSO FUND',\r\n      description: 'BVI professional mutual fund access',\r\n      icon: <Building2 className=\"h-6 w-6\" />\r\n    },\r\n    {\r\n      id: 'real-estate',\r\n      title: 'REAL Empire',\r\n      description: 'Institutional real estate securitisation',\r\n      icon: <Target className=\"h-6 w-6\" />\r\n    },\r\n    {\r\n      id: 'lux',\r\n      title: 'Luxembourg Platforms',\r\n      description: 'European investment infrastructure',\r\n      icon: <MapPin className=\"h-6 w-6\" />\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <section className={cn(\r\n      \"rounded-3xl border px-8 py-10 shadow-sm\",\r\n      isDark ? \"border-white/10 bg-card\" : \"border-slate-200/80 bg-white\"\r\n    )}>\r\n      <div className=\"mx-auto flex max-w-4xl flex-col gap-8\">\r\n        <div className=\"flex flex-col items-center gap-6 text-center sm:flex-row sm:items-start sm:text-left\">\r\n          <div className={cn(\r\n            \"flex h-16 w-16 items-center justify-center rounded-2xl shadow-sm\",\r\n            isDark ? \"bg-white/10 text-white\" : \"bg-slate-900 text-white\"\r\n          )}>\r\n            <Building2 className=\"h-7 w-7\" />\r\n          </div>\r\n          <div className=\"space-y-3\">\r\n            <p className={cn(\r\n              \"text-[11px] font-semibold uppercase tracking-wider\",\r\n              isDark ? \"text-gray-400\" : \"text-slate-500\"\r\n            )}>\r\n              Investor onboarding\r\n            </p>\r\n            <h2 className={cn(\r\n              \"text-3xl font-semibold\",\r\n              isDark ? \"text-white\" : \"text-slate-900\"\r\n            )}>\r\n              Welcome to VERSO Holdings\r\n            </h2>\r\n            <p className={cn(\r\n              \"text-sm\",\r\n              isDark ? \"text-gray-400\" : \"text-slate-600\"\r\n            )}>\r\n              Complete your onboarding steps to unlock performance analytics, live deal access, and bespoke reporting matched to your mandate.\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid gap-4 sm:grid-cols-3\">\r\n          {highlights.map((highlight) => (\r\n            <Card\r\n              key={highlight.id}\r\n              className={cn(\r\n                \"rounded-2xl border p-6 text-left shadow-sm\",\r\n                isDark\r\n                  ? \"border-white/10 bg-white/5\"\r\n                  : \"border-slate-200/80 bg-slate-50/60\"\r\n              )}\r\n            >\r\n              <div className={cn(\r\n                \"flex h-12 w-12 items-center justify-center rounded-xl shadow-sm\",\r\n                isDark\r\n                  ? \"bg-white/10 text-white\"\r\n                  : \"bg-white text-slate-900\"\r\n              )}>\r\n                {highlight.icon}\r\n              </div>\r\n              <h3 className={cn(\r\n                \"mt-4 text-sm font-semibold\",\r\n                isDark ? \"text-white\" : \"text-slate-900\"\r\n              )}>{highlight.title}</h3>\r\n              <p className={cn(\r\n                \"mt-1 text-xs\",\r\n                isDark ? \"text-gray-400\" : \"text-slate-600\"\r\n              )}>{highlight.description}</p>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"flex flex-col items-center gap-3 sm:flex-row sm:justify-end\">\r\n          <Link href=\"/versotech_main/tasks\" className=\"w-full sm:w-auto\">\r\n            <Button size=\"lg\" className=\"w-full sm:w-auto\">\r\n              Complete onboarding\r\n            </Button>\r\n          </Link>\r\n          <Link href=\"/versotech_main/inbox\" className=\"w-full sm:w-auto\">\r\n            <Button variant=\"outline\" size=\"lg\" className=\"w-full sm:w-auto\">\r\n              Contact VERSO team\r\n            </Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport function InvestorDashboard({ investorId, userId, persona }: InvestorDashboardProps) {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n  const [data, setData] = useState<InvestorDashboardData | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [showVideoModal, setShowVideoModal] = useState(false)\r\n\r\n  // Video intro URL from Supabase storage\r\n  // TODO: Migrate video to new Supabase project and update URL\r\n  // For now, using the old project URL where the video exists\r\n  const videoUrl = 'https://ipguxdssecfexudnvtia.supabase.co/storage/v1/object/public/public-assets/videos/intro-video.mp4'\r\n\r\n  // Show video modal if user hasn't seen it\r\n  useEffect(() => {\r\n    if (data?.profile && !data.profile.hasSeenIntroVideo) {\r\n      setShowVideoModal(true)\r\n    }\r\n  }, [data?.profile])\r\n\r\n  // Handle video completion\r\n  const handleVideoComplete = async () => {\r\n    try {\r\n      const response = await fetch('/api/profiles/intro-video-seen', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      })\r\n      if (!response.ok) {\r\n        throw new Error('Failed to mark video as seen')\r\n      }\r\n      // Update local state to reflect video has been seen\r\n      if (data?.profile) {\r\n        setData({\r\n          ...data,\r\n          profile: { ...data.profile, hasSeenIntroVideo: true }\r\n        })\r\n      }\r\n    } finally {\r\n      setShowVideoModal(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function fetchDashboardData() {\r\n      setLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        const supabase = createClient()\r\n        const investorIds = [investorId]\r\n\r\n        // Fetch all data in parallel\r\n        const [\r\n          profileRes,\r\n          vehiclesRes,\r\n          dealsRes,\r\n          tasksRes,\r\n          activityRes,\r\n          positionsRes\r\n        ] = await Promise.all([\r\n          // Profile (includes intro video status)\r\n          supabase\r\n            .from('profiles')\r\n            .select('display_name, avatar_url, has_seen_intro_video')\r\n            .eq('id', userId)\r\n            .single(),\r\n\r\n          // Vehicles with active subscriptions\r\n          supabase\r\n            .from('vehicles')\r\n            .select(`\r\n              id,\r\n              name,\r\n              type,\r\n              domicile,\r\n              currency,\r\n              subscriptions!inner(investor_id, status)\r\n            `)\r\n            .in('subscriptions.investor_id', investorIds)\r\n            .eq('subscriptions.status', 'active'),\r\n\r\n          // Featured deals user has access to (with published fee structures for unit price)\r\n          supabase\r\n            .from('deals')\r\n            .select(`\r\n              id,\r\n              name,\r\n              status,\r\n              deal_type,\r\n              currency,\r\n              offer_unit_price,\r\n              open_at,\r\n              close_at,\r\n              company_name,\r\n              company_logo_url,\r\n              sector,\r\n              location,\r\n              vehicles ( id, name, type ),\r\n              deal_memberships!inner ( user_id ),\r\n              deal_fee_structures ( id, price_per_share_text, allocation_up_to, minimum_ticket, status, effective_at )\r\n            `)\r\n            .eq('deal_memberships.user_id', userId)\r\n            .eq('status', 'open')\r\n            .order('close_at', { ascending: true, nullsFirst: false })\r\n            .limit(3),\r\n\r\n          // Tasks\r\n          supabase\r\n            .from('tasks')\r\n            .select('id, title, status, priority, due_at, category', { count: 'exact' })\r\n            .not('status', 'eq', 'completed')\r\n            .not('status', 'eq', 'waived')\r\n            .or(`owner_user_id.eq.${userId},owner_investor_id.in.(${investorIds.join(',')})`)\r\n            .order('due_at', { ascending: true, nullsFirst: false })\r\n            .limit(12),\r\n\r\n          // Activity\r\n          supabase\r\n            .from('deal_activity_events')\r\n            .select(`\r\n              id,\r\n              event_type,\r\n              payload,\r\n              occurred_at,\r\n              deal_id,\r\n              deals:deal_id(name)\r\n            `)\r\n            .in('investor_id', investorIds)\r\n            .order('occurred_at', { ascending: false })\r\n            .limit(10),\r\n\r\n          // Positions (to check if user has portfolio data)\r\n          supabase\r\n            .from('positions')\r\n            .select('id')\r\n            .in('investor_id', investorIds)\r\n            .limit(1)\r\n        ])\r\n\r\n        // Map activity events to dashboard activity format\r\n        const eventTypeMap: Record<string, { title: string; activity_type: string }> = {\r\n          im_interested: { title: 'Expressed Interest', activity_type: 'deal' },\r\n          nda_completed: { title: 'NDA Signed', activity_type: 'document' },\r\n          data_room_submit: { title: 'Allocation Submitted', activity_type: 'allocation' },\r\n          subscription_completed: { title: 'Subscription Completed', activity_type: 'deal' },\r\n          data_room_granted: { title: 'Data Room Access', activity_type: 'document' },\r\n          closed_deal_interest: { title: 'Interest Registered', activity_type: 'deal' },\r\n        }\r\n\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const recentActivity: DashboardActivity[] = (activityRes.data ?? []).map((event: any) => {\r\n          const mapping = eventTypeMap[event.event_type] || { title: event.event_type, activity_type: 'deal' }\r\n          const dealName = event.deals?.name || 'Deal'\r\n          const amount = (event.payload?.commitment || event.payload?.indicative_amount) as number | undefined\r\n\r\n          return {\r\n            id: event.id,\r\n            title: mapping.title,\r\n            description: amount ? `${dealName} - $${amount.toLocaleString()}` : dealName,\r\n            activity_type: mapping.activity_type,\r\n            created_at: event.occurred_at,\r\n            importance: 'normal',\r\n            read_status: null\r\n          }\r\n        })\r\n\r\n        // Sort tasks by priority then due date\r\n        const priorityOrder: Record<string, number> = { high: 0, medium: 1, low: 2 }\r\n        const sortedTasks = (tasksRes.data ?? []).sort((a, b) => {\r\n          const pA = priorityOrder[a.priority] ?? 99\r\n          const pB = priorityOrder[b.priority] ?? 99\r\n          if (pA !== pB) return pA - pB\r\n          if (!a.due_at && !b.due_at) return 0\r\n          if (!a.due_at) return 1\r\n          if (!b.due_at) return -1\r\n          return new Date(a.due_at).getTime() - new Date(b.due_at).getTime()\r\n        })\r\n\r\n        // Process deals to pick the latest published fee structure for each deal\r\n        const processedDeals = (dealsRes.data ?? []).map((deal: any) => {\r\n          const feeStructures = deal.deal_fee_structures ?? []\r\n          // Find the latest published fee structure (ordered by effective_at desc)\r\n          const publishedStructures = feeStructures\r\n            .filter((fs: any) => fs.status === 'published')\r\n            .sort((a: any, b: any) => {\r\n              const dateA = a.effective_at ? new Date(a.effective_at).getTime() : 0\r\n              const dateB = b.effective_at ? new Date(b.effective_at).getTime() : 0\r\n              return dateB - dateA // descending\r\n            })\r\n          const latestFeeStructure = publishedStructures[0] ?? null\r\n\r\n          return {\r\n            ...deal,\r\n            fee_structure: latestFeeStructure ? {\r\n              id: latestFeeStructure.id,\r\n              price_per_share_text: latestFeeStructure.price_per_share_text,\r\n              allocation_up_to: latestFeeStructure.allocation_up_to,\r\n              minimum_ticket: latestFeeStructure.minimum_ticket,\r\n            } : null,\r\n            deal_fee_structures: undefined // Remove raw array from final object\r\n          }\r\n        })\r\n\r\n        setData({\r\n          profile: profileRes.data ? {\r\n            displayName: profileRes.data.display_name,\r\n            avatarUrl: profileRes.data.avatar_url,\r\n            hasSeenIntroVideo: profileRes.data.has_seen_intro_video ?? true\r\n          } : null,\r\n          vehicles: (vehiclesRes.data ?? []) as PortfolioVehicle[],\r\n          featuredDeals: processedDeals as FeaturedDeal[],\r\n          tasks: sortedTasks as DashboardTask[],\r\n          tasksTotal: tasksRes.count ?? sortedTasks.length,\r\n          recentActivity,\r\n          hasPortfolioData: (positionsRes.data?.length ?? 0) > 0 || (vehiclesRes.data?.length ?? 0) > 0\r\n        })\r\n      } catch (err) {\r\n        console.error('[InvestorDashboard] Error fetching data:', err)\r\n        setError('Failed to load dashboard data')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    if (investorId && userId) {\r\n      fetchDashboardData()\r\n    }\r\n  }, [investorId, userId])\r\n\r\n  if (loading) {\r\n    return <DashboardSkeleton />\r\n  }\r\n\r\n  if (error || !data) {\r\n    return (\r\n      <div className=\"p-8 text-center\">\r\n        <p className=\"text-red-500\">{error || 'Unable to load dashboard'}</p>\r\n        <Button variant=\"outline\" className=\"mt-4\" onClick={() => window.location.reload()}>\r\n          Retry\r\n        </Button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const displayName = persona?.entity_name || data.profile?.displayName || 'Investor'\r\n  const firstName = (displayName || 'Investor').split(' ')[0] || 'Investor'\r\n\r\n  const summaryTiles = [\r\n    {\r\n      label: 'Open opportunities',\r\n      value: data.featuredDeals.length,\r\n      helper: 'Available deals'\r\n    },\r\n    {\r\n      label: 'Outstanding tasks',\r\n      value: data.tasksTotal,\r\n      helper: data.tasksTotal ? 'Pending actions' : 'All caught up'\r\n    },\r\n    {\r\n      label: 'Active holdings',\r\n      value: data.vehicles.length,\r\n      helper: 'Investment vehicles'\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <div className=\"space-y-12 px-0 pb-16 pt-2\">\r\n      {/* Video Intro Modal - shown for first-time users */}\r\n      <VideoIntroModal\r\n        open={showVideoModal}\r\n        videoUrl={videoUrl}\r\n        onComplete={handleVideoComplete}\r\n      />\r\n\r\n      {/* Welcome Header Section */}\r\n      <section className={cn(\r\n        \"rounded-3xl border p-4 sm:p-6 md:p-8 shadow-sm\",\r\n        isDark ? \"border-white/10 bg-card\" : \"border-slate-200/80 bg-white\"\r\n      )}>\r\n        {/* Responsive: single column on mobile, two columns on tablet+ */}\r\n        <div className=\"grid gap-6 md:gap-8 md:grid-cols-[1.9fr,1fr]\">\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className={cn(\r\n                  \"flex h-16 w-16 items-center justify-center rounded-full border shadow-sm overflow-hidden\",\r\n                  isDark\r\n                    ? \"bg-gradient-to-br from-white/10 to-white/5 border-white/10\"\r\n                    : \"bg-gradient-to-br from-slate-100 to-slate-200 border-slate-200\"\r\n                )}>\r\n                  {data.profile?.avatarUrl ? (\r\n                    <Image\r\n                      src={data.profile.avatarUrl}\r\n                      alt={displayName}\r\n                      width={64}\r\n                      height={64}\r\n                      className=\"object-cover w-full h-full\"\r\n                      priority\r\n                    />\r\n                  ) : persona.entity_logo_url ? (\r\n                    <Image\r\n                      src={persona.entity_logo_url}\r\n                      alt={displayName}\r\n                      width={64}\r\n                      height={64}\r\n                      className=\"object-cover w-full h-full\"\r\n                      priority\r\n                    />\r\n                  ) : (\r\n                    <UserIcon className={cn(\r\n                      \"h-8 w-8\",\r\n                      isDark ? \"text-gray-400\" : \"text-slate-400\"\r\n                    )} />\r\n                  )}\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className={cn(\r\n                    \"text-[11px] font-semibold uppercase tracking-wide\",\r\n                    isDark ? \"text-gray-400\" : \"text-slate-500\"\r\n                  )}>\r\n                    Investor portal\r\n                  </p>\r\n                  <h1 className={cn(\r\n                    \"text-3xl font-semibold\",\r\n                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                  )}>\r\n                    Welcome, {firstName}\r\n                  </h1>\r\n                  <p className={cn(\r\n                    \"text-sm\",\r\n                    isDark ? \"text-gray-400\" : \"text-slate-600\"\r\n                  )}>\r\n                    VERSO Holdings • Merchant Banking Group • Since 1958\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Responsive: stack on phone, 2 cols on small, 3 on medium+ */}\r\n            <div className=\"grid gap-3 md:gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3\">\r\n              {summaryTiles.map((tile) => (\r\n                <div\r\n                  key={tile.label}\r\n                  className={cn(\r\n                    \"rounded-2xl border p-4 shadow-sm\",\r\n                    isDark\r\n                      ? \"border-white/10 bg-white/5\"\r\n                      : \"border-slate-200/80 bg-slate-50/70\"\r\n                  )}\r\n                >\r\n                  <p className={cn(\r\n                    \"text-[11px] font-semibold uppercase tracking-wide\",\r\n                    isDark ? \"text-gray-400\" : \"text-slate-500\"\r\n                  )}>\r\n                    {tile.label}\r\n                  </p>\r\n                  <p className={cn(\r\n                    \"mt-2 text-2xl font-semibold\",\r\n                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                  )}>{tile.value}</p>\r\n                  <p className={cn(\r\n                    \"mt-1 text-xs\",\r\n                    isDark ? \"text-gray-400\" : \"text-slate-600\"\r\n                  )}>{tile.helper}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className={cn(\r\n              \"flex flex-wrap items-center gap-2 text-xs font-medium\",\r\n              isDark ? \"text-gray-400\" : \"text-slate-600\"\r\n            )}>\r\n              <Badge variant=\"outline\" className={cn(\r\n                \"rounded-full\",\r\n                isDark\r\n                  ? \"border-white/10 bg-white/5 text-gray-300\"\r\n                  : \"border-slate-200/80 bg-slate-50 text-slate-600\"\r\n              )}>\r\n                <MapPin className=\"mr-1 h-3 w-3\" /> Luxembourg HQ\r\n              </Badge>\r\n              <Badge variant=\"outline\" className={cn(\r\n                \"rounded-full\",\r\n                isDark\r\n                  ? \"border-white/10 bg-white/5 text-gray-300\"\r\n                  : \"border-slate-200/80 bg-slate-50 text-slate-600\"\r\n              )}>\r\n                <Building2 className=\"mr-1 h-3 w-3\" /> BVI Professional Fund\r\n              </Badge>\r\n              <Badge variant=\"outline\" className={cn(\r\n                \"rounded-full\",\r\n                isDark\r\n                  ? \"border-white/10 bg-white/5 text-gray-300\"\r\n                  : \"border-slate-200/80 bg-slate-50 text-slate-600\"\r\n              )}>\r\n                <Target className=\"mr-1 h-3 w-3\" /> PE • VC • Real Estate\r\n              </Badge>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-3 pt-2 sm:flex-row\">\r\n              <Link href=\"/versotech_main/opportunities\" className=\"w-full sm:w-auto\">\r\n                <Button size=\"sm\" className=\"w-full sm:w-auto\">\r\n                  View holdings\r\n                  <ArrowUpRight className=\"ml-2 h-4 w-4\" />\r\n                </Button>\r\n              </Link>\r\n              <Link href=\"/versotech_main/tasks\" className=\"w-full sm:w-auto\">\r\n                <Button size=\"sm\" variant=\"outline\" className=\"w-full sm:w-auto\">\r\n                  Calendar & deadlines\r\n                  <CalendarClock className=\"ml-2 h-4 w-4\" />\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n\r\n          <div className={cn(\r\n            \"rounded-2xl border p-6 shadow-sm\",\r\n            isDark\r\n              ? \"border-white/10 bg-white/5\"\r\n              : \"border-slate-200/80 bg-slate-50/70\"\r\n          )}>\r\n            <p className={cn(\r\n              \"text-[11px] font-semibold uppercase tracking-wide\",\r\n              isDark ? \"text-gray-400\" : \"text-slate-500\"\r\n            )}>\r\n              Portal snapshot\r\n            </p>\r\n            <p className={cn(\r\n              \"mt-3 text-2xl font-semibold\",\r\n              isDark ? \"text-white\" : \"text-slate-900\"\r\n            )}>\r\n              {new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\r\n            </p>\r\n            <Separator className=\"my-4\" />\r\n            <p className={cn(\r\n              \"text-sm\",\r\n              isDark ? \"text-gray-400\" : \"text-slate-600\"\r\n            )}>\r\n              Your investment dashboard with key metrics and upcoming deadlines.\r\n            </p>\r\n            <Link\r\n              href=\"/versotech_main/tasks\"\r\n              className=\"mt-4 inline-flex items-center gap-2 text-xs font-semibold text-primary hover:underline\"\r\n            >\r\n              Review action centre\r\n              <ArrowUpRight className=\"h-3 w-3\" />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Featured Deals */}\r\n      <FeaturedDealsSection deals={data.featuredDeals} />\r\n\r\n      {/* Action Center */}\r\n      <InvestorActionCenter\r\n        tasks={data.tasks}\r\n        tasksTotal={data.tasksTotal}\r\n        recentActivity={data.recentActivity}\r\n      />\r\n\r\n      {/* Holdings or Welcome Panel */}\r\n      {data.hasPortfolioData ? (\r\n        <div className=\"grid gap-4 lg:grid-cols-2\">\r\n          <HoldingsSnapshot vehicles={data.vehicles} />\r\n          <VersoServicesCard />\r\n        </div>\r\n      ) : (\r\n        <WelcomePanel />\r\n      )}\r\n\r\n      {data.hasPortfolioData && <VersoServicesCard />}\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { DateRangePicker } from '@/components/ui/date-range-picker'\r\nimport {\r\n  UserPlus,\r\n  Users,\r\n  DollarSign,\r\n  FileSignature,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Clock,\r\n  CheckCircle2,\r\n  AlertTriangle,\r\n  ArrowRight,\r\n  Loader2,\r\n  PenLine,\r\n  BarChart3,\r\n  Target,\r\n  Wallet,\r\n  X,\r\n} from 'lucide-react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { formatCurrency, formatDate } from '@/lib/format'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport type { DateRange } from 'react-day-picker'\r\nimport { format } from 'date-fns'\r\n\r\ntype Persona = {\r\n  persona_type: string\r\n  entity_id: string\r\n  entity_name: string\r\n  role_in_entity?: string | null\r\n  can_sign?: boolean\r\n  logo_url?: string | null\r\n}\r\n\r\ntype JourneyStage = 'interested' | 'approved' | 'signed' | 'funded' | 'passed'\r\n\r\nfunction getStageFromIntroduction(status: string | null): JourneyStage {\r\n  switch (status) {\r\n    case 'allocated':\r\n      return 'signed'\r\n    case 'joined':\r\n      return 'approved'\r\n    case 'lost':\r\n    case 'inactive':\r\n      return 'passed'\r\n    case 'invited':\r\n    default:\r\n      return 'interested'\r\n  }\r\n}\r\n\r\nfunction resolveJourneyStage(status: string | null, hasCommission: boolean): JourneyStage {\r\n  const base = getStageFromIntroduction(status)\r\n  if (status === 'allocated' && hasCommission) {\r\n    return 'funded'\r\n  }\r\n  return base\r\n}\r\n\r\ninterface IntroducerDashboardProps {\r\n  introducerId: string\r\n  userId: string\r\n  persona: Persona\r\n}\r\n\r\ntype IntroducerMetrics = {\r\n  totalIntroductions: number\r\n  interestedIntroductions: number\r\n  approvedIntroductions: number\r\n  signedIntroductions: number\r\n  fundedIntroductions: number\r\n  passedIntroductions: number\r\n  totalCommissionEarned: number\r\n  pendingCommission: number\r\n  conversionRate: number\r\n}\r\n\r\ntype PerformanceMetrics = {\r\n  thisMonthIntroductions: number\r\n  lastMonthIntroductions: number\r\n  introductionGrowth: number\r\n  avgCommissionPerIntro: number\r\n}\r\n\r\ntype Agreement = {\r\n  id: string\r\n  status: string\r\n  default_commission_bps: number | null\r\n  effective_date: string | null\r\n  expiry_date: string | null\r\n  signed_date: string | null\r\n}\r\n\r\ntype RecentIntroduction = {\r\n  id: string\r\n  prospect_email: string\r\n  status: string\r\n  introduced_at: string\r\n  deal: {\r\n    id: string\r\n    name: string\r\n  } | null\r\n}\r\n\r\nexport function IntroducerDashboard({ introducerId, userId, persona }: IntroducerDashboardProps) {\r\n  const { theme } = useTheme()\r\n  // Theme system uses 'staff-dark' for dark mode across all personas\r\n  const isDark = theme === 'staff-dark'\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [metrics, setMetrics] = useState<IntroducerMetrics | null>(null)\r\n  const [performance, setPerformance] = useState<PerformanceMetrics | null>(null)\r\n  const [activeAgreement, setActiveAgreement] = useState<Agreement | null>(null)\r\n  const [pendingAgreement, setPendingAgreement] = useState<Agreement | null>(null)\r\n  const [recentIntroductions, setRecentIntroductions] = useState<RecentIntroduction[]>([])\r\n  const [dateRange, setDateRange] = useState<DateRange | undefined>(undefined)\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const supabase = createClient()\r\n\r\n        // Fetch introductions for metrics\r\n        const { data: introductions } = await supabase\r\n          .from('introductions')\r\n          .select('id, status, prospect_email, introduced_at, deal:deal_id(id, name)')\r\n          .eq('introducer_id', introducerId)\r\n          .order('introduced_at', { ascending: false })\r\n\r\n        const allIntros = introductions || []\r\n\r\n        // Apply date range filter\r\n        const intros = allIntros.filter(i => {\r\n          if (!dateRange?.from) return true\r\n          if (!i.introduced_at) return false\r\n\r\n          const introDate = new Date(i.introduced_at)\r\n          const fromDate = new Date(dateRange.from)\r\n          fromDate.setHours(0, 0, 0, 0)\r\n\r\n          if (introDate < fromDate) return false\r\n\r\n          if (dateRange.to) {\r\n            const toDate = new Date(dateRange.to)\r\n            toDate.setHours(23, 59, 59, 999)\r\n            if (introDate > toDate) return false\r\n          }\r\n\r\n          return true\r\n        })\r\n\r\n        // Fetch commissions (using created_at as the date column)\r\n        const { data: commissions } = await supabase\r\n          .from('introducer_commissions')\r\n          .select('id, accrual_amount, status, created_at, introduction_id')\r\n          .eq('introducer_id', introducerId)\r\n\r\n        const allComms = commissions || []\r\n\r\n        // Apply date range filter to commissions\r\n        const comms = allComms.filter(c => {\r\n          if (!dateRange?.from) return true\r\n          if (!c.created_at) return false\r\n\r\n          const commDate = new Date(c.created_at)\r\n          const fromDate = new Date(dateRange.from)\r\n          fromDate.setHours(0, 0, 0, 0)\r\n\r\n          if (commDate < fromDate) return false\r\n\r\n          if (dateRange.to) {\r\n            const toDate = new Date(dateRange.to)\r\n            toDate.setHours(23, 59, 59, 999)\r\n            if (commDate > toDate) return false\r\n          }\r\n\r\n          return true\r\n        })\r\n\r\n        const fundedIntroIds = new Set(\r\n          comms\r\n            .filter(c => c.introduction_id)\r\n            .map(c => c.introduction_id)\r\n        )\r\n\r\n        const stagedIntros = intros.map(i => ({\r\n          ...i,\r\n          journey_stage: resolveJourneyStage(i.status, fundedIntroIds.has(i.id))\r\n        }))\r\n\r\n        const interested = stagedIntros.filter(i => i.journey_stage === 'interested').length\r\n        const approved = stagedIntros.filter(i => i.journey_stage === 'approved').length\r\n        const signed = stagedIntros.filter(i => i.journey_stage === 'signed').length\r\n        const funded = stagedIntros.filter(i => i.journey_stage === 'funded').length\r\n        const passed = stagedIntros.filter(i => i.journey_stage === 'passed').length\r\n\r\n        const totalEarned = comms\r\n          .filter(c => c.status === 'paid')\r\n          .reduce((sum, c) => sum + (c.accrual_amount || 0), 0)\r\n        const pendingComm = comms\n          .filter(c => ['accrued', 'invoice_requested', 'invoice_submitted', 'invoiced'].includes(c.status))\n          .reduce((sum, c) => sum + (c.accrual_amount || 0), 0)\r\n\r\n        setMetrics({\r\n          totalIntroductions: intros.length,\r\n          interestedIntroductions: interested,\r\n          approvedIntroductions: approved,\r\n          signedIntroductions: signed,\r\n          fundedIntroductions: funded,\r\n          passedIntroductions: passed,\r\n          totalCommissionEarned: totalEarned,\r\n          pendingCommission: pendingComm,\r\n          conversionRate: intros.length > 0 ? (funded / intros.length) * 100 : 0,\r\n        })\r\n\r\n        // Calculate performance metrics based on date range or default to monthly comparison\r\n        const now = new Date()\r\n        const startOfThisMonth = new Date(now.getFullYear(), now.getMonth(), 1)\r\n        const startOfLastMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1)\r\n\r\n        const thisMonthIntroductions = intros.filter(i =>\r\n          i.introduced_at && new Date(i.introduced_at) >= startOfThisMonth\r\n        ).length\r\n\r\n        const lastMonthIntroductions = allIntros.filter(i =>\r\n          i.introduced_at &&\r\n          new Date(i.introduced_at) >= startOfLastMonth &&\r\n          new Date(i.introduced_at) < startOfThisMonth\r\n        ).length\r\n\r\n        const introductionGrowth = lastMonthIntroductions > 0\r\n          ? Math.round(((thisMonthIntroductions - lastMonthIntroductions) / lastMonthIntroductions) * 100)\r\n          : thisMonthIntroductions > 0 ? 100 : 0\r\n\r\n        const avgCommissionPerIntro = funded > 0\r\n          ? Math.round(totalEarned / funded)\r\n          : 0\r\n\r\n        setPerformance({\r\n          thisMonthIntroductions,\r\n          lastMonthIntroductions,\r\n          introductionGrowth,\r\n          avgCommissionPerIntro\r\n        })\r\n\r\n        // Map introductions to match expected type (deal is single object, not array)\r\n        const mappedIntros: RecentIntroduction[] = stagedIntros.slice(0, 5).map((intro: any) => ({\r\n          id: intro.id,\r\n          prospect_email: intro.prospect_email,\r\n          status: intro.journey_stage,\r\n          introduced_at: intro.introduced_at,\r\n          deal: Array.isArray(intro.deal) ? intro.deal[0] || null : intro.deal,\r\n        }))\r\n        setRecentIntroductions(mappedIntros)\r\n\r\n        // Fetch agreements (not affected by date filter)\r\n        const { data: agreements } = await supabase\r\n          .from('introducer_agreements')\r\n          .select('id, status, default_commission_bps, effective_date, expiry_date, signed_date')\r\n          .eq('introducer_id', introducerId)\r\n          .order('created_at', { ascending: false })\r\n\r\n        if (agreements) {\r\n          const active = agreements.find(a => a.status === 'active')\r\n          const pending = agreements.find(a =>\r\n            ['pending_approval', 'pending_ceo_signature', 'pending_introducer_signature'].includes(a.status)\r\n          )\r\n          setActiveAgreement(active || null)\r\n          setPendingAgreement(pending || null)\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching introducer data:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [introducerId, dateRange])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-8 text-center flex flex-col items-center gap-3\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-gray-400\" />\r\n        <p className=\"text-gray-500\">Loading dashboard...</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const statusStyles: Record<string, string> = {\n    interested: 'bg-blue-500/20 text-blue-400',\n    approved: 'bg-purple-500/20 text-purple-400',\n    signed: 'bg-amber-500/20 text-amber-400',\n    funded: 'bg-green-500/20 text-green-400',\n    passed: 'bg-gray-500/20 text-gray-400',\n  }\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n            Introducer Dashboard\r\n          </h1>\r\n          <p className={`mt-1 ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n            {persona.entity_name}\r\n          </p>\r\n        </div>\r\n        {persona.logo_url && (\r\n          <img\r\n            src={persona.logo_url}\r\n            alt={persona.entity_name}\r\n            className=\"h-12 w-auto object-contain\"\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Alert for Pending Agreement */}\r\n      {pendingAgreement && (\r\n        <Card className={`border-amber-500/30 ${isDark ? 'bg-amber-500/10' : 'bg-amber-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 rounded-full bg-amber-500/20\">\r\n                  <PenLine className=\"h-5 w-5 text-amber-500\" />\r\n                </div>\r\n                <div>\r\n                  <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                    {pendingAgreement.status === 'pending_approval'\r\n                      ? 'Agreement Awaiting Your Approval'\r\n                      : pendingAgreement.status === 'pending_ceo_signature' || pendingAgreement.status === 'approved'\r\n                      ? 'Agreement Awaiting CEO Signature'\r\n                      : 'Agreement Awaiting Your Signature'}\r\n                  </p>\r\n                  <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                    {pendingAgreement.status === 'pending_approval'\r\n                      ? 'Please review and approve your fee agreement'\r\n                      : pendingAgreement.status === 'pending_ceo_signature' || pendingAgreement.status === 'approved'\r\n                      ? 'You have approved. Awaiting CEO signature.'\r\n                      : 'CEO has signed. Please countersign to activate.'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button asChild>\r\n                <Link href={`/versotech_main/introducer-agreements/${pendingAgreement.id}`}>\r\n                  {pendingAgreement.status === 'pending_approval' ? 'Review'\r\n                    : pendingAgreement.status === 'pending_ceo_signature' || pendingAgreement.status === 'approved' ? 'View'\r\n                    : 'Sign Now'}\r\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Alert for No Active Agreement */}\r\n      {!activeAgreement && !pendingAgreement && (\r\n        <Card className={`border-red-500/30 ${isDark ? 'bg-red-500/10' : 'bg-red-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-full bg-red-500/20\">\r\n                <AlertTriangle className=\"h-5 w-5 text-red-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  No Active Agreement\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                  You need an active fee agreement to make introductions. Contact your relationship manager.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Date Range Filter */}\r\n      <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n        <CardContent className=\"py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <p className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-700'}`}>\r\n                Filter by Date Range:\r\n              </p>\r\n              <DateRangePicker\r\n                value={dateRange}\r\n                onChange={setDateRange}\r\n                variant={isDark ? 'dark' : 'default'}\r\n              />\r\n            </div>\r\n            {dateRange?.from && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setDateRange(undefined)}\r\n                className={isDark ? 'text-gray-400 hover:text-white' : ''}\r\n              >\r\n                <X className=\"h-4 w-4 mr-1\" />\r\n                Clear Filter\r\n              </Button>\r\n            )}\r\n          </div>\r\n          {dateRange?.from && (\r\n            <p className={`text-xs mt-2 ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              {dateRange.to\r\n                ? `Showing data from ${format(dateRange.from, 'MMM dd, yyyy')} to ${format(dateRange.to, 'MMM dd, yyyy')}`\r\n                : `Showing data from ${format(dateRange.from, 'MMM dd, yyyy')} onwards`\r\n              }\r\n            </p>\r\n          )}\r\n          {!dateRange?.from && (\r\n            <p className={`text-xs mt-2 ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Showing all-time data\r\n            </p>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Metrics Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Total Introductions\r\n            </CardTitle>\r\n            <Users className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {metrics?.totalIntroductions || 0}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              {metrics?.interestedIntroductions || 0} interested\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Conversion Rate\r\n            </CardTitle>\r\n            <TrendingUp className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {metrics?.conversionRate.toFixed(1) || 0}%\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              {metrics?.fundedIntroductions || 0} funded\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Commission Earned\r\n            </CardTitle>\r\n            <DollarSign className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold text-green-500`}>\r\n              {formatCurrency(metrics?.totalCommissionEarned || 0)}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Total paid to date\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Pending Commission\r\n            </CardTitle>\r\n            <Clock className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold text-amber-500`}>\r\n              {formatCurrency(metrics?.pendingCommission || 0)}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\n              Accrued or awaiting approval\n            </p>\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Performance Analytics */}\r\n      {performance && (\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader>\r\n            <CardTitle className={`flex items-center gap-2 ${isDark ? 'text-white' : ''}`}>\r\n              <BarChart3 className=\"h-5 w-5\" />\r\n              Performance Analytics\r\n            </CardTitle>\r\n            <CardDescription>Your introduction performance trends</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div className={`p-4 rounded-lg border ${isDark ? 'bg-white/5 border-white/10' : 'bg-muted/30'}`}>\r\n                <div className={`flex items-center gap-2 text-sm mb-1 ${isDark ? 'text-gray-400' : 'text-muted-foreground'}`}>\r\n                  {performance.introductionGrowth >= 0 ? (\r\n                    <TrendingUp className=\"h-4 w-4 text-green-500\" />\r\n                  ) : (\r\n                    <TrendingDown className=\"h-4 w-4 text-red-500\" />\r\n                  )}\r\n                  This Month\r\n                </div>\r\n                <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  {performance.thisMonthIntroductions}\r\n                </div>\r\n                <p className={`text-xs mt-1 ${isDark ? 'text-gray-500' : 'text-muted-foreground'}`}>\r\n                  <span className={performance.introductionGrowth >= 0 ? 'text-green-500' : 'text-red-500'}>\r\n                    {performance.introductionGrowth >= 0 ? '+' : ''}{performance.introductionGrowth}%\r\n                  </span>\r\n                  {' '}vs last month ({performance.lastMonthIntroductions})\r\n                </p>\r\n              </div>\r\n\r\n              <div className={`p-4 rounded-lg border ${isDark ? 'bg-white/5 border-white/10' : 'bg-muted/30'}`}>\r\n                <div className={`flex items-center gap-2 text-sm mb-1 ${isDark ? 'text-gray-400' : 'text-muted-foreground'}`}>\r\n                  <Target className=\"h-4 w-4\" />\r\n                  Conversion Rate\r\n                </div>\r\n                <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  {metrics?.conversionRate.toFixed(1) || 0}%\r\n                </div>\r\n                <p className={`text-xs mt-1 ${isDark ? 'text-gray-500' : 'text-muted-foreground'}`}>\r\n                  {metrics?.fundedIntroductions || 0} of {metrics?.totalIntroductions || 0} funded\r\n                </p>\r\n              </div>\r\n\r\n              <div className={`p-4 rounded-lg border ${isDark ? 'bg-white/5 border-white/10' : 'bg-muted/30'}`}>\r\n                <div className={`flex items-center gap-2 text-sm mb-1 ${isDark ? 'text-gray-400' : 'text-muted-foreground'}`}>\r\n                  <Wallet className=\"h-4 w-4\" />\r\n                  Avg Commission\r\n                </div>\r\n                <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  {formatCurrency(performance.avgCommissionPerIntro)}\r\n                </div>\r\n                <p className={`text-xs mt-1 ${isDark ? 'text-gray-500' : 'text-muted-foreground'}`}>\r\n                  Per successful introduction\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Two Column Layout */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Recent Introductions */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between\">\r\n            <div>\r\n              <CardTitle className={isDark ? 'text-white' : ''}>Recent Introductions</CardTitle>\r\n              <CardDescription>Your latest referrals</CardDescription>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"sm\" asChild>\r\n              <Link href=\"/versotech_main/introductions\">\r\n                View All\r\n                <ArrowRight className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {recentIntroductions.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <UserPlus className={`h-10 w-10 mx-auto mb-3 ${isDark ? 'text-gray-600' : 'text-gray-400'}`} />\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  No introductions yet\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {recentIntroductions.map((intro) => (\r\n                  <div\r\n                    key={intro.id}\r\n                    className={`flex items-center justify-between p-3 rounded-lg ${\r\n                      isDark ? 'bg-white/5' : 'bg-gray-50'\r\n                    }`}\r\n                  >\r\n                    <div>\r\n                      <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                        {intro.prospect_email}\r\n                      </p>\r\n                      <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                        {intro.deal?.name || 'Unknown Deal'}\r\n                      </p>\r\n                    </div>\r\n                    <Badge className={statusStyles[intro.status] || 'bg-gray-500/20 text-gray-400'}>\r\n                      {intro.status}\r\n                    </Badge>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Active Agreement */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader>\r\n            <CardTitle className={isDark ? 'text-white' : ''}>Fee Agreement</CardTitle>\r\n            <CardDescription>Your current commission terms</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {activeAgreement ? (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\r\n                  <span className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                    Active Agreement\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Commission Rate</p>\r\n                    <p className={`text-lg font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                      {activeAgreement.default_commission_bps\r\n                        ? `${(activeAgreement.default_commission_bps / 100).toFixed(2)}%`\r\n                        : 'N/A'}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Effective Since</p>\r\n                    <p className={`text-lg font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                      {activeAgreement.effective_date\r\n                        ? formatDate(activeAgreement.effective_date)\r\n                        : 'N/A'}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Expires</p>\r\n                    <p className={`text-lg font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                      {activeAgreement.expiry_date\r\n                        ? formatDate(activeAgreement.expiry_date)\r\n                        : 'No Expiry'}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Signed</p>\r\n                    <p className={`text-lg font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                      {activeAgreement.signed_date\r\n                        ? formatDate(activeAgreement.signed_date)\r\n                        : 'N/A'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <Button variant=\"outline\" size=\"sm\" asChild className=\"w-full\">\r\n                  <Link href={`/versotech_main/introducer-agreements/${activeAgreement.id}`}>\r\n                    <FileSignature className=\"h-4 w-4 mr-2\" />\r\n                    View Agreement\r\n                  </Link>\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center py-8\">\r\n                <FileSignature className={`h-10 w-10 mx-auto mb-3 ${isDark ? 'text-gray-600' : 'text-gray-400'}`} />\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  No active agreement\r\n                </p>\r\n                <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-400'} mt-1`}>\r\n                  Contact your relationship manager to set up an agreement\r\n                </p>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Loader2, FileSignature, CheckCircle2, XCircle } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\nimport { toast } from 'sonner'\n\r\ntype FeeComponent = {\r\n  id: string\r\n  kind: string\r\n  rate_bps: number | string | null\r\n  flat_amount: number | string | null\r\n  calc_method: string | null\r\n  frequency: string | null\r\n}\r\n\r\ntype FeePlan = {\n  id: string\n  name: string\n  description: string | null\n  status: string | null\n  is_active: boolean\n  is_default: boolean\n  effective_from: string | null\n  effective_until: string | null\n  deal: {\n    id: string\r\n    name: string\r\n  } | null\r\n  fee_components: FeeComponent[]\r\n}\r\n\r\nconst FEE_KIND_LABELS: Record<string, string> = {\r\n  subscription: 'Subscription Fee',\r\n  management: 'Management Fee',\r\n  performance: 'Performance Fee',\r\n  flat: 'Flat Fee'\r\n}\r\n\r\nconst SUMMARY_KINDS = ['subscription', 'management', 'performance'] as const\n\nconst STATUS_LABELS: Record<string, string> = {\n  draft: 'Draft',\n  sent: 'Pending Approval',\n  pending_signature: 'Pending Signature',\n  accepted: 'Accepted',\n  rejected: 'Rejected'\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  accepted: 'bg-green-500/20 text-green-400 border-green-500/30',\n  rejected: 'bg-red-500/20 text-red-400 border-red-500/30',\n  sent: 'bg-amber-500/20 text-amber-400 border-amber-500/30',\n  pending_signature: 'bg-amber-500/20 text-amber-400 border-amber-500/30',\n  draft: 'bg-slate-500/20 text-slate-300 border-slate-500/30'\n}\n\nfunction formatComponentValue(component?: FeeComponent): string {\n  if (!component) return '—'\n  if (component.rate_bps !== null && component.rate_bps !== undefined) {\r\n    const rateBps = Number(component.rate_bps)\r\n    if (!Number.isNaN(rateBps)) {\r\n      return `${rateBps / 100}%`\r\n    }\r\n  }\r\n  if (component.flat_amount !== null && component.flat_amount !== undefined) {\r\n    const flatAmount = Number(component.flat_amount)\r\n    if (!Number.isNaN(flatAmount)) {\r\n      return formatCurrency(flatAmount)\r\n    }\r\n  }\r\n  return '—'\r\n}\r\n\r\nexport function FeeModelView() {\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [feePlans, setFeePlans] = useState<FeePlan[]>([])\n  const [actionLoadingId, setActionLoadingId] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchFeeModels() {\n      try {\r\n        setLoading(true)\r\n        setError(null)\r\n        const response = await fetch('/api/partners/me/fee-models')\r\n        const data = await response.json()\r\n\r\n        if (!response.ok) {\r\n          throw new Error(data.error || 'Failed to load fee models')\r\n        }\r\n\r\n        setFeePlans(data.fee_models || [])\r\n      } catch (err) {\r\n        console.error('Error fetching fee models:', err)\r\n        setError(err instanceof Error ? err.message : 'Failed to load fee models')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchFeeModels()\n  }, [])\n\n  const updatePlanStatus = (planId: string, status: string) => {\n    setFeePlans(prev =>\n      prev.map(plan => (plan.id === planId ? { ...plan, status } : plan))\n    )\n  }\n\n  const handleDecision = async (planId: string, action: 'accept' | 'reject') => {\n    const reason = action === 'reject'\n      ? prompt('Please provide a rejection reason:')\n      : null\n\n    if (action === 'reject' && !reason) return\n\n    setActionLoadingId(planId)\n    try {\n      const response = await fetch(`/api/fee-plans/${planId}/${action}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: action === 'reject' ? JSON.stringify({ reason }) : undefined\n      })\n\n      const data = await response.json()\n      if (!response.ok) {\n        throw new Error(data.error || `Failed to ${action} fee model`)\n      }\n\n      updatePlanStatus(planId, action === 'accept' ? 'accepted' : 'rejected')\n      toast.success(action === 'accept' ? 'Fee model approved' : 'Fee model rejected')\n    } catch (err) {\n      console.error(`Error during ${action}:`, err)\n      toast.error(err instanceof Error ? err.message : `Failed to ${action} fee model`)\n    } finally {\n      setActionLoadingId(null)\n    }\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <FileSignature className=\"h-5 w-5\" />\r\n          Fee Models\r\n        </CardTitle>\r\n        <CardDescription>Read-only fee structures that apply to you</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center py-8 text-muted-foreground\">\r\n            <Loader2 className=\"h-5 w-5 animate-spin mr-2\" />\r\n            Loading fee models...\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"text-sm text-red-500\">{error}</div>\r\n        ) : feePlans.length === 0 ? (\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            <p>No fee models assigned</p>\r\n            <p className=\"text-sm mt-1\">\r\n              Contact your relationship manager for fee structure details\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\n            {feePlans.map((plan) => {\n              const extraComponents = (plan.fee_components || []).filter(\n                component => !SUMMARY_KINDS.includes(component.kind as typeof SUMMARY_KINDS[number])\n              )\n              const planStatus = plan.status || 'draft'\n              const statusLabel = STATUS_LABELS[planStatus] || planStatus\n              const statusStyle = STATUS_STYLES[planStatus] || STATUS_STYLES.draft\n              const canRespond = planStatus === 'sent'\n\n              return (\n                <div key={plan.id} className=\"rounded-lg border p-4\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div>\n                      <p className=\"font-medium\">{plan.name}</p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {plan.deal?.name ? `Deal: ${plan.deal.name}` : plan.description || 'General fee model'}\n                      </p>\n                    </div>\n                    <div className=\"flex flex-col items-end gap-2\">\n                      <Badge variant={plan.is_active ? 'default' : 'secondary'}>\n                        {plan.is_active ? 'Active' : 'Inactive'}\n                      </Badge>\n                      <Badge variant=\"outline\" className={statusStyle}>\n                        {statusLabel}\n                      </Badge>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid gap-3 sm:grid-cols-3\">\n                    {SUMMARY_KINDS.map((kind) => (\r\n                      <div key={kind} className=\"rounded-md border px-3 py-2\">\r\n                        <p className=\"text-xs text-muted-foreground\">{FEE_KIND_LABELS[kind]}</p>\r\n                        <p className=\"text-sm font-medium\">\r\n                          {formatComponentValue(plan.fee_components.find(component => component.kind === kind))}\r\n                        </p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {extraComponents.length > 0 && (\n                    <div className=\"mt-3 flex flex-wrap gap-2 text-xs text-muted-foreground\">\n                      {extraComponents.map(component => (\n                        <Badge key={component.id} variant=\"outline\">\n                          {FEE_KIND_LABELS[component.kind] || component.kind}:{' '}\n                          {formatComponentValue(component)}\n                        </Badge>\n                      ))}\n                    </div>\n                  )}\n\n                  {canRespond && (\n                    <div className=\"mt-4 flex flex-wrap gap-2\">\n                      <Button\n                        size=\"sm\"\n                        onClick={() => handleDecision(plan.id, 'accept')}\n                        disabled={actionLoadingId === plan.id}\n                        className=\"bg-emerald-600 hover:bg-emerald-700\"\n                      >\n                        {actionLoadingId === plan.id ? (\n                          <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        ) : (\n                          <>\n                            <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n                            Approve\n                          </>\n                        )}\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => handleDecision(plan.id, 'reject')}\n                        disabled={actionLoadingId === plan.id}\n                      >\n                        {actionLoadingId === plan.id ? (\n                          <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        ) : (\n                          <>\n                            <XCircle className=\"h-4 w-4 mr-2\" />\n                            Reject\n                          </>\n                        )}\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              )\n            })}\n          </div>\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n","'use client'\n\nimport { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport {\n  Users,\n  DollarSign,\n  TrendingUp,\n  TrendingDown,\n  Clock,\n  CheckCircle2,\n  ArrowRight,\n  Loader2,\n  Briefcase,\n  Eye,\n  HandCoins,\n  Activity,\n  BarChart3,\n  Target,\n  Wallet\n} from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\nimport { FeeModelView } from '@/components/partner/FeeModelView'\n\ntype Persona = {\n  persona_type: string\n  entity_id: string\n  entity_name: string\n  role_in_entity?: string | null\n  can_sign?: boolean\n  logo_url?: string | null\n}\n\ninterface PartnerDashboardProps {\n  partnerId: string\n  userId: string\n  persona: Persona\n}\n\ntype PartnerMetrics = {\n  totalReferredInvestors: number\n  subscribedInvestors: number\n  pipelineInvestors: number\n  totalCommitment: number\n  commitmentCurrency: string\n  pendingCommissions: number\n  pendingCommissionCurrency: string\n  trackedDeals: number\n  investableDeals: number\n}\n\ntype PerformanceMetrics = {\n  conversionRate: number\n  thisMonthReferrals: number\n  lastMonthReferrals: number\n  referralGrowth: number\n  paidCommissions: number\n  avgCommitmentPerInvestor: number\n  avgCommitmentCurrency: string\n}\n\ntype RecentReferral = {\n  deal_id: string | null\n  deal_name: string | null\n  deal_status: string | null\n  investor_id: string | null\n  investor_name: string | null\n  dispatched_at: string | null\n  interest_confirmed_at: string | null\n  subscription: {\n    commitment: number | null\n    status: string | null\n    signed_at: string | null\n  } | null\n}\n\nexport function PartnerDashboard({ partnerId, userId, persona }: PartnerDashboardProps) {\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [metrics, setMetrics] = useState<PartnerMetrics | null>(null)\n  const [performance, setPerformance] = useState<PerformanceMetrics | null>(null)\n  const [recentReferrals, setRecentReferrals] = useState<RecentReferral[]>([])\n\n  useEffect(() => {\n    async function fetchDashboard() {\n      try {\n        setLoading(true)\n        setError(null)\n\n        const response = await fetch('/api/partners/me/dashboard')\n        const data = await response.json()\n\n        if (!response.ok) {\n          throw new Error(data.error || 'Failed to load partner dashboard')\n        }\n\n        setMetrics(data.metrics)\n        setPerformance(data.performance || null)\n        setRecentReferrals(data.recent_referrals || [])\n      } catch (err) {\n        console.error('Error fetching partner dashboard data:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load partner dashboard')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (partnerId && userId) {\n      fetchDashboard()\n    }\n  }, [partnerId, userId])\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Partner Dashboard</CardTitle>\n            <CardDescription>{error}</CardDescription>\n          </CardHeader>\n        </Card>\n      </div>\n    )\n  }\n\n  const commitmentCurrency = metrics?.commitmentCurrency || 'USD'\n  const pendingCurrency = metrics?.pendingCommissionCurrency || 'USD'\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Welcome Section */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold\">Welcome back, {persona.entity_name}</h1>\n          <p className=\"text-muted-foreground\">\n            Partner Dashboard - Track your referrals and investment opportunities\n          </p>\n        </div>\n        <Link href=\"/versotech_main/opportunities\">\n          <Button>\n            <TrendingUp className=\"mr-2 h-4 w-4\" />\n            View Opportunities\n          </Button>\n        </Link>\n      </div>\n\n      {/* Key Metrics */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        <Link href=\"/versotech_main/opportunities\" className=\"block\">\n          <Card className=\"h-full hover:border-foreground/20 transition-colors\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Deals Available</CardTitle>\n              <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{metrics?.investableDeals || 0}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                {metrics?.trackedDeals || 0} tracking\n              </p>\n            </CardContent>\n          </Card>\n        </Link>\n\n        <Link href=\"/versotech_main/partner-transactions\" className=\"block\">\n          <Card className=\"h-full hover:border-foreground/20 transition-colors\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Referred Investors</CardTitle>\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{metrics?.totalReferredInvestors || 0}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                {metrics?.subscribedInvestors || 0} subscribed, {metrics?.pipelineInvestors || 0} in pipeline\n              </p>\n            </CardContent>\n          </Card>\n        </Link>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Referred Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {formatCurrency(metrics?.totalCommitment || 0, commitmentCurrency)}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Committed by referred investors\n            </p>\n          </CardContent>\n        </Card>\n\n        <Link href=\"/versotech_main/partner-transactions\" className=\"block\">\n          <Card className=\"h-full hover:border-foreground/20 transition-colors\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Pending Commissions</CardTitle>\n              <Activity className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">\n                {formatCurrency(metrics?.pendingCommissions || 0, pendingCurrency)}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Accrued and invoiced fees\n              </p>\n            </CardContent>\n          </Card>\n        </Link>\n      </div>\n\n      {/* Performance Metrics */}\n      {performance && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <BarChart3 className=\"h-5 w-5\" />\n              Performance Analytics\n            </CardTitle>\n            <CardDescription>Your referral performance metrics</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n              <div className=\"p-4 rounded-lg border bg-muted/30\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\n                  <Target className=\"h-4 w-4\" />\n                  Conversion Rate\n                </div>\n                <div className=\"text-2xl font-bold\">{performance.conversionRate}%</div>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Referrals that subscribed\n                </p>\n              </div>\n\n              <div className=\"p-4 rounded-lg border bg-muted/30\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\n                  {performance.referralGrowth >= 0 ? (\n                    <TrendingUp className=\"h-4 w-4 text-green-500\" />\n                  ) : (\n                    <TrendingDown className=\"h-4 w-4 text-red-500\" />\n                  )}\n                  This Month\n                </div>\n                <div className=\"text-2xl font-bold\">{performance.thisMonthReferrals}</div>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  <span className={performance.referralGrowth >= 0 ? 'text-green-500' : 'text-red-500'}>\n                    {performance.referralGrowth >= 0 ? '+' : ''}{performance.referralGrowth}%\n                  </span>\n                  {' '}vs last month ({performance.lastMonthReferrals})\n                </p>\n              </div>\n\n              <div className=\"p-4 rounded-lg border bg-muted/30\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\n                  <DollarSign className=\"h-4 w-4\" />\n                  Avg Commitment\n                </div>\n                <div className=\"text-2xl font-bold\">\n                  {formatCurrency(performance.avgCommitmentPerInvestor, performance.avgCommitmentCurrency)}\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Per subscribed investor\n                </p>\n              </div>\n\n              <div className=\"p-4 rounded-lg border bg-muted/30\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\n                  <Wallet className=\"h-4 w-4\" />\n                  Paid Commissions\n                </div>\n                <div className=\"text-2xl font-bold text-green-500\">\n                  {formatCurrency(performance.paidCommissions, pendingCurrency)}\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Total received\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Main Content */}\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        {/* Recent Referrals */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <HandCoins className=\"h-5 w-5\" />\n              Recent Referrals\n            </CardTitle>\n            <CardDescription>Investors you have referred to deals</CardDescription>\n          </CardHeader>\n          <CardContent>\n            {recentReferrals.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Users className=\"h-12 w-12 mx-auto mb-4 opacity-20\" />\n                <p>No referrals yet</p>\n                <p className=\"text-sm mt-1\">\n                  Share deals with investors to start tracking\n                </p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {recentReferrals.map((referral, idx) => {\n                  const status = referral.subscription?.status\n                  const hasCommitment = status === 'committed' || status === 'active'\n                  const isPending = status === 'pending'\n                  const isInterested = !status && referral.interest_confirmed_at\n                  const badgeLabel = hasCommitment\n                    ? 'Committed'\n                    : isPending\n                      ? 'Pending'\n                      : isInterested\n                        ? 'Interested'\n                        : 'Dispatched'\n                  const badgeVariant = hasCommitment ? 'default' : isPending || isInterested ? 'secondary' : 'outline'\n\n                  return (\n                    <div\n                      key={`${referral.deal_id}-${referral.investor_id || idx}`}\n                      className=\"flex items-center justify-between p-3 rounded-lg border\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className={`p-2 rounded-full ${\n                          hasCommitment\n                            ? 'bg-green-100 text-green-600'\n                            : isPending\n                              ? 'bg-yellow-100 text-yellow-600'\n                              : isInterested\n                                ? 'bg-blue-100 text-blue-600'\n                                : 'bg-gray-100 text-gray-600'\n                        }`}>\n                          {hasCommitment ? (\n                            <CheckCircle2 className=\"h-4 w-4\" />\n                          ) : isPending ? (\n                            <Clock className=\"h-4 w-4\" />\n                          ) : isInterested ? (\n                            <Eye className=\"h-4 w-4\" />\n                          ) : (\n                            <Eye className=\"h-4 w-4\" />\n                          )}\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">{referral.investor_name || 'Unknown Investor'}</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {referral.deal_name || 'Unknown Deal'}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        {referral.subscription?.commitment ? (\n                          <p className=\"font-medium\">\n                            {formatCurrency(referral.subscription.commitment, commitmentCurrency)}\n                          </p>\n                        ) : null}\n                        <Badge variant={badgeVariant}>{badgeLabel}</Badge>\n                      </div>\n                    </div>\n                  )\n                })}\n                <Link href=\"/versotech_main/partner-transactions\">\n                  <Button variant=\"outline\" className=\"w-full\">\n                    View All Transactions\n                    <ArrowRight className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </Link>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <FeeModelView />\n      </div>\n\n      {/* Quick Actions */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Quick Actions</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n            <Link href=\"/versotech_main/opportunities\">\n              <Button variant=\"outline\" className=\"w-full justify-start\">\n                <TrendingUp className=\"mr-2 h-4 w-4\" />\n                Browse Opportunities\n              </Button>\n            </Link>\n            <Link href=\"/versotech_main/partner-transactions\">\n              <Button variant=\"outline\" className=\"w-full justify-start\">\n                <Users className=\"mr-2 h-4 w-4\" />\n                View Transactions\n              </Button>\n            </Link>\n            <Link href=\"/versotech_main/shared-transactions\">\n              <Button variant=\"outline\" className=\"w-full justify-start\">\n                <HandCoins className=\"mr-2 h-4 w-4\" />\n                Shared Deals\n              </Button>\n            </Link>\n            <Link href=\"/versotech_main/messages\">\n              <Button variant=\"outline\" className=\"w-full justify-start\">\n                <Activity className=\"mr-2 h-4 w-4\" />\n                Messages\n              </Button>\n            </Link>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  Scale,\r\n  Briefcase,\r\n  DollarSign,\r\n  FileText,\r\n  CheckCircle2,\r\n  ArrowRight,\r\n  Loader2,\r\n  AlertCircle,\r\n  Users,\r\n} from 'lucide-react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { formatCurrency, formatDate } from '@/lib/format'\r\nimport { useTheme } from '@/components/theme-provider'\r\n\r\ntype Persona = {\r\n  persona_type: string\r\n  entity_id: string\r\n  entity_name: string\r\n  role_in_entity?: string | null\r\n  can_sign?: boolean\r\n  logo_url?: string | null\r\n}\r\n\r\ninterface LawyerDashboardProps {\r\n  lawyerId: string\r\n  userId: string\r\n  persona: Persona\r\n}\r\n\r\ntype CurrencyTotal = {\r\n  currency: string\r\n  amount: number\r\n}\r\n\r\ntype LawyerMetrics = {\r\n  assignedDeals: number\r\n  pendingEscrowConfirmations: number\r\n  pendingPaymentConfirmations: number\r\n  signedSubscriptions: number\r\n  fullyFundedSubscriptions: number\r\n  commitmentsByCurrency: CurrencyTotal[]\r\n  fundedByCurrency: CurrencyTotal[]\r\n}\r\n\r\ntype RecentSubscription = {\r\n  id: string\r\n  deal_name: string\r\n  investor_name: string\r\n  commitment: number\r\n  funded_amount: number\r\n  currency: string\r\n  status: string\r\n  committed_at: string | null\r\n}\r\n\r\ntype AssignedDeal = {\r\n  id: string\r\n  name: string\r\n  status: string\r\n  target_amount: number | null\r\n  currency: string\r\n}\r\n\r\nexport function LawyerDashboard({ lawyerId, userId, persona }: LawyerDashboardProps) {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [metrics, setMetrics] = useState<LawyerMetrics | null>(null)\r\n  const [lawyerInfo, setLawyerInfo] = useState<{\r\n    firm_name: string\r\n    display_name: string\r\n    specializations: string[] | null\r\n    is_active: boolean\r\n  } | null>(null)\r\n  const [recentSubscriptions, setRecentSubscriptions] = useState<RecentSubscription[]>([])\r\n  const [assignedDeals, setAssignedDeals] = useState<AssignedDeal[]>([])\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const supabase = createClient()\r\n\r\n        // Fetch lawyer info\r\n        const { data: lawyer } = await supabase\r\n          .from('lawyers')\r\n          .select('id, firm_name, display_name, specializations, is_active, assigned_deals')\r\n          .eq('id', lawyerId)\r\n          .maybeSingle()\r\n\r\n        if (lawyer) {\r\n          setLawyerInfo({\r\n            firm_name: lawyer.firm_name || '',\r\n            display_name: lawyer.display_name || '',\r\n            specializations: lawyer.specializations,\r\n            is_active: lawyer.is_active ?? true,\r\n          })\r\n        }\r\n\r\n        // VEHICLE-LEVEL ARCHITECTURE: Get vehicles assigned to this lawyer first\r\n        const { data: lawyerVehicles } = await supabase\r\n          .from('vehicles')\r\n          .select('id, name')\r\n          .eq('lawyer_id', lawyerId)\r\n\r\n        const vehicleIds = (lawyerVehicles || []).map((v: any) => v.id)\r\n\r\n        // Then get all deals under those vehicles\r\n        let dealsFromVehicles: AssignedDeal[] = []\r\n        let dealIds: string[] = []\r\n\r\n        if (vehicleIds.length > 0) {\r\n          const { data: vehicleDeals } = await supabase\r\n            .from('deals')\r\n            .select('id, name, status, target_amount, currency, vehicle_id')\r\n            .in('vehicle_id', vehicleIds)\r\n            .order('created_at', { ascending: false })\r\n            .limit(10)\r\n\r\n          dealsFromVehicles = (vehicleDeals || []).map((d: any) => ({\r\n            id: d.id,\r\n            name: d.name,\r\n            status: d.status,\r\n            target_amount: d.target_amount,\r\n            currency: d.currency || 'USD',\r\n          }))\r\n\r\n          dealIds = (vehicleDeals || []).map((d: any) => d.id)\r\n        }\r\n\r\n        // Fallback to lawyers.assigned_deals if no vehicle assignments (legacy support)\r\n        if (!dealIds.length && lawyer?.assigned_deals?.length) {\r\n          dealIds = lawyer.assigned_deals\r\n        }\r\n\r\n        // Set assigned deals from vehicle query result\r\n        setAssignedDeals(dealsFromVehicles)\r\n\r\n        if (dealIds.length > 0) {\r\n          // Fetch subscriptions for these deals (signed/committed statuses)\r\n          const { data: subscriptions } = await supabase\r\n            .from('subscriptions')\r\n            .select(`\r\n              id,\r\n              deal_id,\r\n              investor_id,\r\n              status,\r\n              commitment,\r\n              funded_amount,\r\n              currency,\r\n              committed_at,\r\n              deals (id, name),\r\n              investors (id, display_name, legal_name)\r\n            `)\r\n            .in('deal_id', dealIds)\r\n            .in('status', ['committed', 'partially_funded', 'funded', 'active'])\n            .order('committed_at', { ascending: false })\r\n\r\n          const subs = subscriptions || []\r\n\r\n          // Query fee events for pending payment confirmations\r\n          const { data: feeEvents } = await supabase\r\n            .from('fee_events')\r\n            .select('id, status')\r\n            .in('deal_id', dealIds)\r\n            .in('status', ['accrued', 'invoiced'])\r\n\r\n          const pendingFeePayments = (feeEvents || []).length\r\n\r\n          // Calculate metrics\r\n          const committed = subs.filter((s: any) => s.status === 'committed')\r\n          const partiallyFunded = subs.filter((s: any) => s.status === 'partially_funded')\r\n          const fullyFunded = subs.filter((s: any) => s.status === 'funded' || s.status === 'active')\n\r\n          // Group totals by currency to avoid mixing USD/EUR/GBP\r\n          const commitmentMap = new Map<string, number>()\r\n          const fundedMap = new Map<string, number>()\r\n\r\n          subs.forEach((s: any) => {\r\n            const currency = s.currency || 'USD'\r\n            commitmentMap.set(currency, (commitmentMap.get(currency) || 0) + (s.commitment || 0))\r\n            fundedMap.set(currency, (fundedMap.get(currency) || 0) + (s.funded_amount || 0))\r\n          })\r\n\r\n          // Convert to sorted arrays (USD first, then alphabetically)\r\n          const sortCurrencies = (a: CurrencyTotal, b: CurrencyTotal) => {\r\n            if (a.currency === 'USD') return -1\r\n            if (b.currency === 'USD') return 1\r\n            return a.currency.localeCompare(b.currency)\r\n          }\r\n\r\n          const commitmentsByCurrency = Array.from(commitmentMap.entries())\r\n            .map(([currency, amount]) => ({ currency, amount }))\r\n            .filter(c => c.amount > 0)\r\n            .sort(sortCurrencies)\r\n\r\n          const fundedByCurrency = Array.from(fundedMap.entries())\r\n            .map(([currency, amount]) => ({ currency, amount }))\r\n            .filter(c => c.amount > 0)\r\n            .sort(sortCurrencies)\r\n\r\n          setMetrics({\r\n            assignedDeals: dealIds.length,\r\n            pendingEscrowConfirmations: committed.length + partiallyFunded.length,\r\n            pendingPaymentConfirmations: pendingFeePayments,\r\n            signedSubscriptions: subs.length,\r\n            fullyFundedSubscriptions: fullyFunded.length,\r\n            commitmentsByCurrency,\r\n            fundedByCurrency,\r\n          })\r\n\r\n          // Map recent subscriptions\r\n          const recentSubs: RecentSubscription[] = subs.slice(0, 5).map((sub: any) => {\r\n            const deal = Array.isArray(sub.deals) ? sub.deals[0] : sub.deals\r\n            const investor = Array.isArray(sub.investors) ? sub.investors[0] : sub.investors\r\n\r\n            return {\r\n              id: sub.id,\r\n              deal_name: deal?.name || 'Unknown Deal',\r\n              investor_name: investor?.display_name || investor?.legal_name || 'Unknown Investor',\r\n              commitment: sub.commitment || 0,\r\n              funded_amount: sub.funded_amount || 0,\r\n              currency: sub.currency || 'USD',\r\n              status: sub.status,\r\n              committed_at: sub.committed_at,\r\n            }\r\n          })\r\n\r\n          setRecentSubscriptions(recentSubs)\r\n        } else {\r\n          // No deals assigned\r\n          setMetrics({\r\n            assignedDeals: 0,\r\n            pendingEscrowConfirmations: 0,\r\n            pendingPaymentConfirmations: 0,\r\n            signedSubscriptions: 0,\r\n            fullyFundedSubscriptions: 0,\r\n            commitmentsByCurrency: [],\r\n            fundedByCurrency: [],\r\n          })\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching lawyer data:', err)\r\n        setError(err instanceof Error ? err.message : 'Failed to load dashboard data')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [lawyerId, userId])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-8 text-center flex flex-col items-center gap-3\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-gray-400\" />\r\n        <p className=\"text-gray-500\">Loading dashboard...</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-8 text-center flex flex-col items-center gap-3\">\r\n        <AlertCircle className=\"h-12 w-12 text-destructive\" />\r\n        <h3 className=\"text-lg font-medium\">Error Loading Dashboard</h3>\r\n        <p className=\"text-muted-foreground\">{error}</p>\r\n        <Button variant=\"outline\" onClick={() => window.location.reload()}>\r\n          Try Again\r\n        </Button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const statusStyles: Record<string, string> = {\n    committed: 'bg-blue-500/20 text-blue-400',\n    partially_funded: 'bg-amber-500/20 text-amber-400',\n    funded: 'bg-emerald-500/20 text-emerald-400',\n    active: 'bg-green-500/20 text-green-400',\n  }\n\n  const statusLabels: Record<string, string> = {\n    committed: 'Awaiting Funding',\n    partially_funded: 'Partial',\n    funded: 'Fully Funded',\n    active: 'Active',\n  }\n\r\n  const dealStatusStyles: Record<string, string> = {\r\n    open: 'bg-green-500/20 text-green-400',\r\n    draft: 'bg-gray-500/20 text-gray-400',\r\n    allocation_pending: 'bg-yellow-500/20 text-yellow-400',\r\n    fully_subscribed: 'bg-blue-500/20 text-blue-400',\r\n    closed: 'bg-purple-500/20 text-purple-400',\r\n    cancelled: 'bg-red-500/20 text-red-400',\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n            Lawyer Dashboard\r\n          </h1>\r\n          <p className={`mt-1 ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n            {lawyerInfo?.display_name || persona.entity_name}\r\n            {lawyerInfo?.firm_name && ` - ${lawyerInfo.firm_name}`}\r\n          </p>\r\n        </div>\r\n        {lawyerInfo?.specializations?.length ? (\r\n          <div className=\"flex gap-2\">\r\n            {lawyerInfo.specializations.slice(0, 3).map((spec, idx) => (\r\n              <Badge key={idx} variant=\"outline\" className=\"capitalize\">\r\n                {spec}\r\n              </Badge>\r\n            ))}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n\r\n      {/* Alert for inactive lawyer */}\r\n      {lawyerInfo && !lawyerInfo.is_active && (\r\n        <Card className={`border-amber-500/30 ${isDark ? 'bg-amber-500/10' : 'bg-amber-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-full bg-amber-500/20\">\r\n                <AlertCircle className=\"h-5 w-5 text-amber-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  Account Inactive\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                  Your lawyer account is currently inactive. Contact the VERSO team for assistance.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Pending Escrow Alert */}\r\n      {metrics && metrics.pendingEscrowConfirmations > 0 && (\r\n        <Card className={`border-blue-500/30 ${isDark ? 'bg-blue-500/10' : 'bg-blue-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 rounded-full bg-blue-500/20\">\r\n                  <DollarSign className=\"h-5 w-5 text-blue-500\" />\r\n                </div>\r\n                <div>\r\n                  <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                    {metrics.pendingEscrowConfirmations} Pending Escrow Confirmation{metrics.pendingEscrowConfirmations !== 1 ? 's' : ''}\r\n                  </p>\r\n                  <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                    Signed subscriptions awaiting funding confirmation\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button asChild>\r\n                <Link href=\"/versotech_main/escrow\">\r\n                  Confirm Funding\r\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Pending Payment Confirmations Alert */}\r\n      {metrics && metrics.pendingPaymentConfirmations > 0 && (\r\n        <Card className={`border-purple-500/30 ${isDark ? 'bg-purple-500/10' : 'bg-purple-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 rounded-full bg-purple-500/20\">\r\n                  <DollarSign className=\"h-5 w-5 text-purple-500\" />\r\n                </div>\r\n                <div>\r\n                  <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                    {metrics.pendingPaymentConfirmations} Pending Fee Payment{metrics.pendingPaymentConfirmations !== 1 ? 's' : ''}\r\n                  </p>\r\n                  <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                    Fee payments awaiting confirmation\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button asChild variant=\"outline\">\r\n                <Link href=\"/versotech_main/lawyer-reconciliation\">\r\n                  View Fees\r\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Metrics Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Assigned Deals\r\n            </CardTitle>\r\n            <Briefcase className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {metrics?.assignedDeals || 0}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Deals under your counsel\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Signed Subscriptions\r\n            </CardTitle>\r\n            <FileText className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {metrics?.signedSubscriptions || 0}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              {metrics?.fullyFundedSubscriptions || 0} fully funded\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Total Committed\r\n            </CardTitle>\r\n            <DollarSign className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            {metrics?.commitmentsByCurrency && metrics.commitmentsByCurrency.length > 0 ? (\r\n              <div className=\"space-y-1\">\r\n                {metrics.commitmentsByCurrency.map((c, i) => (\r\n                  <div key={c.currency} className={`${i === 0 ? 'text-2xl font-bold' : 'text-sm font-medium'} text-blue-500`}>\r\n                    {formatCurrency(c.amount, c.currency)}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className={`text-2xl font-bold text-blue-500`}>\r\n                {formatCurrency(0)}\r\n              </div>\r\n            )}\r\n            <p className={`text-xs mt-1 ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Across all subscriptions\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Total Funded\r\n            </CardTitle>\r\n            <CheckCircle2 className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            {metrics?.fundedByCurrency && metrics.fundedByCurrency.length > 0 ? (\r\n              <div className=\"space-y-1\">\r\n                {metrics.fundedByCurrency.map((c, i) => (\r\n                  <div key={c.currency} className={`${i === 0 ? 'text-2xl font-bold' : 'text-sm font-medium'} text-green-500`}>\r\n                    {formatCurrency(c.amount, c.currency)}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className={`text-2xl font-bold text-green-500`}>\r\n                {formatCurrency(0)}\r\n              </div>\r\n            )}\r\n            <p className={`text-xs mt-1 ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Escrow confirmed\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Two Column Layout */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Recent Signed Subscriptions */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between\">\r\n            <div>\r\n              <CardTitle className={isDark ? 'text-white' : ''}>Recent Subscriptions</CardTitle>\r\n              <CardDescription>Recently signed subscription packs</CardDescription>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"sm\" asChild>\r\n              <Link href=\"/versotech_main/subscription-packs\">\r\n                View All\r\n                <ArrowRight className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {recentSubscriptions.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <FileText className={`h-10 w-10 mx-auto mb-3 ${isDark ? 'text-gray-600' : 'text-gray-400'}`} />\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  No signed subscriptions yet\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {recentSubscriptions.map((sub) => (\r\n                  <div\r\n                    key={sub.id}\r\n                    className={`flex items-center justify-between p-3 rounded-lg ${\r\n                      isDark ? 'bg-white/5' : 'bg-gray-50'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className={`font-medium truncate ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                        {sub.investor_name}\r\n                      </p>\r\n                      <p className={`text-sm truncate ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                        {sub.deal_name}\r\n                      </p>\r\n                      <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-400'}`}>\r\n                        {formatCurrency(sub.commitment, sub.currency)} committed\r\n                      </p>\r\n                    </div>\r\n                    <Badge className={statusStyles[sub.status] || 'bg-gray-500/20 text-gray-400'}>\r\n                      {statusLabels[sub.status] || sub.status}\r\n                    </Badge>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Assigned Deals */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between\">\r\n            <div>\r\n              <CardTitle className={isDark ? 'text-white' : ''}>Assigned Deals</CardTitle>\r\n              <CardDescription>Deals under your legal counsel</CardDescription>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"sm\" asChild>\r\n              <Link href=\"/versotech_main/assigned-deals\">\r\n                View All\r\n                <ArrowRight className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {assignedDeals.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <Briefcase className={`h-10 w-10 mx-auto mb-3 ${isDark ? 'text-gray-600' : 'text-gray-400'}`} />\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  No deals assigned yet\r\n                </p>\r\n                <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-400'} mt-1`}>\r\n                  Contact the VERSO team to be assigned to deals\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {assignedDeals.map((deal) => (\r\n                  <Link\r\n                    key={deal.id}\r\n                    href={`/versotech_main/opportunities/${deal.id}`}\r\n                    className={`flex items-center justify-between p-3 rounded-lg transition-colors ${\r\n                      isDark ? 'bg-white/5 hover:bg-white/10' : 'bg-gray-50 hover:bg-gray-100'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className={`font-medium truncate ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                        {deal.name}\r\n                      </p>\r\n                      <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                        {deal.target_amount\r\n                          ? `${formatCurrency(deal.target_amount, deal.currency)} target`\r\n                          : 'No target set'}\r\n                      </p>\r\n                    </div>\r\n                    <Badge className={dealStatusStyles[deal.status] || 'bg-gray-500/20 text-gray-400'}>\r\n                      {deal.status}\r\n                    </Badge>\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n        <CardHeader>\r\n          <CardTitle className={isDark ? 'text-white' : ''}>Quick Actions</CardTitle>\r\n          <CardDescription>Common tasks and workflows</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/subscription-packs\">\r\n                <FileText className=\"h-5 w-5\" />\r\n                <span>View Signed Packs</span>\r\n              </Link>\r\n            </Button>\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/escrow\">\r\n                <DollarSign className=\"h-5 w-5\" />\r\n                <span>Confirm Escrow</span>\r\n              </Link>\r\n            </Button>\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/assigned-deals\">\r\n                <Briefcase className=\"h-5 w-5\" />\r\n                <span>View Deals</span>\r\n              </Link>\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\n\nimport { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Progress } from '@/components/ui/progress'\nimport {\n  CheckCircle2,\n  Circle,\n  User,\n  FileText,\n  PenTool,\n  Send,\n  ShieldCheck,\n  ArrowRight,\n  Loader2,\n  Clock,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { useTheme } from '@/components/theme-provider'\n\ninterface OnboardingStatus {\n  arranger_id: string\n  status: string\n  kyc_status: string | null\n  onboarding: {\n    progress_percent: number\n    completed_steps: number\n    total_steps: number\n    is_complete: boolean\n    next_action: {\n      step: string\n      label: string\n      href: string\n    } | null\n    steps: {\n      profile: { complete: boolean; progress: string }\n      documents: { complete: boolean; progress: string }\n      signature: { complete: boolean }\n      submitted: { complete: boolean; submitted_at?: string }\n      approved: { complete: boolean; approved_at?: string }\n    }\n  }\n}\n\ninterface ArrangerOnboardingChecklistProps {\n  arrangerId: string\n  compact?: boolean\n}\n\nexport function ArrangerOnboardingChecklist({\n  arrangerId,\n  compact = false,\n}: ArrangerOnboardingChecklistProps) {\n  const { theme } = useTheme()\n  const isDark = theme === 'staff-dark'\n\n  const [status, setStatus] = useState<OnboardingStatus | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchStatus() {\n      try {\n        const response = await fetch('/api/arrangers/me/onboarding-status')\n        if (!response.ok) {\n          throw new Error('Failed to fetch onboarding status')\n        }\n        const data = await response.json()\n        setStatus(data)\n      } catch (err) {\n        console.error('Error fetching onboarding status:', err)\n        setError('Failed to load onboarding status')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchStatus()\n  }, [arrangerId])\n\n  if (loading) {\n    return (\n      <Card className={cn(isDark ? 'bg-white/5 border-white/10' : '')}>\n        <CardContent className=\"py-6 flex items-center justify-center\">\n          <Loader2 className=\"h-5 w-5 animate-spin text-gray-400\" />\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (error || !status) {\n    return null\n  }\n\n  // Don't show if already approved\n  if (status.onboarding.is_complete && compact) {\n    return null\n  }\n\n  const { onboarding } = status\n  const steps = [\n    {\n      id: 'profile',\n      label: 'Complete Profile',\n      description: 'Fill in your company details',\n      icon: User,\n      complete: onboarding.steps.profile.complete,\n      href: '/versotech_main/arranger-profile?tab=entity',\n      progress: onboarding.steps.profile.progress,\n    },\n    {\n      id: 'documents',\n      label: 'Upload Documents',\n      description: 'Required KYC documents',\n      icon: FileText,\n      complete: onboarding.steps.documents.complete,\n      href: '/versotech_main/arranger-profile?tab=documents',\n      progress: onboarding.steps.documents.progress,\n    },\n    {\n      id: 'signature',\n      label: 'Signature Specimen',\n      description: 'Add your signature',\n      icon: PenTool,\n      complete: onboarding.steps.signature.complete,\n      href: '/versotech_main/arranger-profile?tab=signature',\n    },\n    {\n      id: 'submitted',\n      label: 'Submit for Review',\n      description: 'Send for VERSO approval',\n      icon: Send,\n      complete: onboarding.steps.submitted.complete,\n      href: '/versotech_main/arranger-profile?tab=documents',\n    },\n    {\n      id: 'approved',\n      label: 'KYC Approved',\n      description: 'Ready to operate',\n      icon: ShieldCheck,\n      complete: onboarding.steps.approved.complete,\n    },\n  ]\n\n  if (compact) {\n    return (\n      <Card className={cn(\n        'border-indigo-500/30',\n        isDark ? 'bg-indigo-500/10' : 'bg-indigo-50'\n      )}>\n        <CardContent className=\"py-4\">\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-4 flex-1\">\n              <div className=\"p-2 rounded-full bg-indigo-500/20\">\n                <ShieldCheck className=\"h-5 w-5 text-indigo-500\" />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className={cn('font-medium', isDark ? 'text-white' : 'text-gray-900')}>\n                  Complete Your Onboarding\n                </p>\n                <div className=\"flex items-center gap-3 mt-1\">\n                  <Progress\n                    value={onboarding.progress_percent}\n                    className=\"h-2 flex-1 max-w-[200px]\"\n                  />\n                  <span className={cn('text-sm', isDark ? 'text-gray-400' : 'text-gray-600')}>\n                    {onboarding.progress_percent}%\n                  </span>\n                </div>\n              </div>\n            </div>\n            {onboarding.next_action && (\n              <Button asChild size=\"sm\">\n                <Link href={onboarding.next_action.href}>\n                  {onboarding.next_action.label}\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\n                </Link>\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <Card className={cn(isDark ? 'bg-white/5 border-white/10' : '')}>\n      <CardHeader>\n        <CardTitle className={cn(isDark ? 'text-white' : 'text-gray-900')}>\n          Onboarding Checklist\n        </CardTitle>\n        <CardDescription className={cn(isDark ? 'text-gray-400' : 'text-gray-500')}>\n          Complete these steps to activate your arranger account\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Progress Bar */}\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className={cn(isDark ? 'text-gray-400' : 'text-gray-600')}>\n              Progress\n            </span>\n            <span className={cn('font-medium', isDark ? 'text-white' : 'text-gray-900')}>\n              {onboarding.completed_steps} of {onboarding.total_steps} steps\n            </span>\n          </div>\n          <Progress value={onboarding.progress_percent} className=\"h-2\" />\n        </div>\n\n        {/* Steps */}\n        <div className=\"space-y-3 pt-2\">\n          {steps.map((step, index) => {\n            const Icon = step.icon\n            const isNext = onboarding.next_action?.step === step.id ||\n              (onboarding.next_action?.step === 'submit' && step.id === 'submitted') ||\n              (onboarding.next_action?.step === 'pending' && step.id === 'submitted')\n\n            return (\n              <div\n                key={step.id}\n                className={cn(\n                  'flex items-center gap-3 p-3 rounded-lg transition-colors',\n                  step.complete\n                    ? isDark ? 'bg-green-500/10' : 'bg-green-50'\n                    : isNext\n                    ? isDark ? 'bg-indigo-500/10 border border-indigo-500/30' : 'bg-indigo-50 border border-indigo-200'\n                    : isDark ? 'bg-white/5' : 'bg-gray-50'\n                )}\n              >\n                {/* Status Icon */}\n                <div className={cn(\n                  'flex-shrink-0 p-2 rounded-full',\n                  step.complete\n                    ? 'bg-green-500/20 text-green-500'\n                    : isNext\n                    ? 'bg-indigo-500/20 text-indigo-500'\n                    : isDark ? 'bg-gray-700 text-gray-500' : 'bg-gray-200 text-gray-400'\n                )}>\n                  {step.complete ? (\n                    <CheckCircle2 className=\"h-4 w-4\" />\n                  ) : onboarding.next_action?.step === 'pending' && step.id === 'submitted' ? (\n                    <Clock className=\"h-4 w-4\" />\n                  ) : (\n                    <Icon className=\"h-4 w-4\" />\n                  )}\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 min-w-0\">\n                  <p className={cn(\n                    'font-medium text-sm',\n                    step.complete\n                      ? isDark ? 'text-green-400' : 'text-green-700'\n                      : isDark ? 'text-white' : 'text-gray-900'\n                  )}>\n                    {step.label}\n                    {step.progress && !step.complete && (\n                      <span className={cn(\n                        'ml-2 text-xs font-normal',\n                        isDark ? 'text-gray-400' : 'text-gray-500'\n                      )}>\n                        ({step.progress})\n                      </span>\n                    )}\n                  </p>\n                  <p className={cn(\n                    'text-xs',\n                    isDark ? 'text-gray-500' : 'text-gray-500'\n                  )}>\n                    {onboarding.next_action?.step === 'pending' && step.id === 'submitted'\n                      ? 'Awaiting VERSO team review'\n                      : step.description}\n                  </p>\n                </div>\n\n                {/* Action */}\n                {!step.complete && step.href && step.id !== 'approved' && (\n                  <Button\n                    asChild\n                    variant={isNext ? 'default' : 'ghost'}\n                    size=\"sm\"\n                    className=\"flex-shrink-0\"\n                  >\n                    <Link href={step.href}>\n                      {isNext ? 'Start' : 'View'}\n                    </Link>\n                  </Button>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  Briefcase,\r\n  Users,\r\n  UserPlus,\r\n  Building2,\r\n  Scale,\r\n  DollarSign,\r\n  FileText,\r\n  Clock,\r\n  CheckCircle2,\r\n  ArrowRight,\r\n  Loader2,\r\n  AlertCircle,\r\n  TrendingUp,\r\n  FileSignature,\r\n  Wallet,\r\n  Receipt,\r\n} from 'lucide-react'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { formatCurrency, formatDate } from '@/lib/format'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport { ArrangerOnboardingChecklist } from '@/components/arranger/arranger-onboarding-checklist'\r\n\r\ntype Persona = {\r\n  persona_type: string\r\n  entity_id: string\r\n  entity_name: string\r\n  role_in_entity?: string | null\r\n  can_sign?: boolean\r\n  logo_url?: string | null\r\n}\r\n\r\ninterface ArrangerDashboardProps {\r\n  arrangerId: string\r\n  userId: string\r\n  persona: Persona\r\n}\r\n\r\ntype ArrangerMetrics = {\r\n  totalMandates: number\r\n  activeMandates: number\r\n  pendingMandates: number\r\n  totalPartners: number\r\n  totalIntroducers: number\r\n  totalCommercialPartners: number\r\n  totalLawyers: number\r\n  pendingAgreements: number\r\n  totalCommitmentValue: number\r\n}\r\n\r\ntype RecentMandate = {\r\n  id: string\r\n  name: string\r\n  status: string\r\n  target_amount: number | null\r\n  currency: string\r\n  created_at: string\r\n}\r\n\r\ntype PendingAgreement = {\r\n  id: string\r\n  entity_name: string\r\n  entity_type: 'introducer' | 'commercial_partner'\r\n  status: string\r\n  created_at: string\r\n}\r\n\r\n// New metrics types for User Story compliance (2.5.2, 2.6.1, 2.2.4/2.3.4/2.4.4)\r\ntype EscrowMetrics = {\r\n  totalExpected: number      // SUM(commitment) for committed subscriptions\r\n  totalFunded: number        // SUM(funded_amount)\r\n  totalOutstanding: number   // SUM(outstanding_amount)\r\n  fundingRate: number        // percentage\r\n  pendingInvestors: number   // COUNT where funded_amount < commitment\r\n}\r\n\r\ntype SubscriptionPackMetrics = {\r\n  awaitingInvestorSignature: number\r\n  awaitingArrangerSignature: number\r\n  awaitingCEOSignature: number\r\n  signedThisMonth: number\r\n  totalPending: number\r\n}\r\n\r\ntype FeeMetrics = {\r\n  totalAccrued: number       // status = 'accrued'\r\n  totalInvoiced: number      // status = 'invoiced'\r\n  totalPaid: number          // status = 'paid'\r\n  feePipeline: number        // accrued + invoiced (not yet paid)\r\n}\r\n\r\nexport function ArrangerDashboard({ arrangerId, userId, persona }: ArrangerDashboardProps) {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [metrics, setMetrics] = useState<ArrangerMetrics | null>(null)\r\n  const [arrangerInfo, setArrangerInfo] = useState<{\r\n    legal_name: string\r\n    status: string\r\n    kyc_status: string | null\r\n  } | null>(null)\r\n  const [recentMandates, setRecentMandates] = useState<RecentMandate[]>([])\r\n  const [pendingAgreements, setPendingAgreements] = useState<PendingAgreement[]>([])\r\n  // New state for User Story compliance metrics\r\n  const [escrowMetrics, setEscrowMetrics] = useState<EscrowMetrics | null>(null)\r\n  const [subPackMetrics, setSubPackMetrics] = useState<SubscriptionPackMetrics | null>(null)\r\n  const [feeMetrics, setFeeMetrics] = useState<FeeMetrics | null>(null)\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const supabase = createClient()\r\n\r\n        // Fetch arranger entity info\r\n        const { data: arranger } = await supabase\r\n          .from('arranger_entities')\r\n          .select('id, legal_name, status, kyc_status')\r\n          .eq('id', arrangerId)\r\n          .maybeSingle()\r\n\r\n        if (arranger) {\r\n          setArrangerInfo({\r\n            legal_name: arranger.legal_name,\r\n            status: arranger.status,\r\n            kyc_status: arranger.kyc_status,\r\n          })\r\n        }\r\n\r\n        // VEHICLE-LEVEL ARCHITECTURE: Fetch vehicles assigned to this arranger first\r\n        const { data: arrangerVehicles } = await supabase\r\n          .from('vehicles')\r\n          .select('id, name, lawyer_id')\r\n          .eq('arranger_entity_id', arrangerId)\r\n\r\n        const vehicleIds = (arrangerVehicles || []).map((v: any) => v.id)\r\n\r\n        // Then fetch all deals under those vehicles (mandates)\r\n        let deals: any[] = []\r\n        if (vehicleIds.length > 0) {\r\n          const { data: vehicleDeals } = await supabase\r\n            .from('deals')\r\n            .select('id, name, status, target_amount, currency, created_at, vehicle_id')\r\n            .in('vehicle_id', vehicleIds)\r\n            .order('created_at', { ascending: false })\r\n          deals = vehicleDeals || []\r\n        }\r\n\r\n        const mandates = deals || []\r\n        // Deal statuses: draft, open, allocation_pending, closed, cancelled\r\n        const activeMandates = mandates.filter((d: any) => d.status === 'open' || d.status === 'allocation_pending')\r\n        const pendingMandates = mandates.filter((d: any) => d.status === 'draft')\r\n\r\n        setRecentMandates(mandates.slice(0, 5).map((d: any) => ({\r\n          id: d.id,\r\n          name: d.name,\r\n          status: d.status,\r\n          target_amount: d.target_amount,\r\n          currency: d.currency || 'USD',\r\n          created_at: d.created_at,\r\n        })))\r\n\r\n        // Get total commitment value from subscriptions on arranger's deals\r\n        const dealIds = mandates.map((d: any) => d.id)\r\n        let totalCommitment = 0\r\n\r\n        if (dealIds.length > 0) {\r\n          const { data: subscriptions } = await supabase\r\n            .from('subscriptions')\r\n            .select('commitment')\r\n            .in('deal_id', dealIds)\r\n            .in('status', ['committed', 'active', 'signed', 'funded'])\r\n\r\n          totalCommitment = (subscriptions || []).reduce(\r\n            (sum: number, s: any) => sum + (s.commitment || 0),\r\n            0\r\n          )\r\n        }\r\n\r\n        // Count related entities - SCOPED TO ARRANGER'S DEALS\r\n        let partnersCount = 0\r\n        let introducersCount = 0\r\n        let cpCount = 0\r\n\r\n        // VEHICLE-LEVEL: Lawyers are assigned to vehicles, count them regardless of deals\r\n        const uniqueLawyers = new Set(\r\n          (arrangerVehicles || [])\r\n            .filter((v: any) => v.lawyer_id)\r\n            .map((v: any) => v.lawyer_id)\r\n        )\r\n        const lawyersCount = uniqueLawyers.size\r\n\r\n        if (dealIds.length > 0) {\r\n          // Get subscriptions on arranger's deals for relationship tracking\r\n          const { data: dealSubscriptions } = await supabase\r\n            .from('subscriptions')\r\n            .select('id, investor_id, introducer_id, proxy_commercial_partner_id')\r\n            .in('deal_id', dealIds)\r\n\r\n          // Count unique introducers who have introduced to arranger's deals\r\n          const introducerIds = new Set(\r\n            (dealSubscriptions || [])\r\n              .filter((s: any) => s.introducer_id)\r\n              .map((s: any) => s.introducer_id)\r\n          )\r\n          introducersCount = introducerIds.size\r\n\r\n          // Count unique partners who have referred investors to arranger's deals\r\n          // Partners are tracked via deal_memberships.referred_by_entity_id (not subscriptions)\r\n          const { data: partnerReferrals } = await supabase\r\n            .from('deal_memberships')\r\n            .select('referred_by_entity_id')\r\n            .in('deal_id', dealIds)\r\n            .eq('referred_by_entity_type', 'partner')\r\n            .not('referred_by_entity_id', 'is', null)\r\n\r\n          const uniquePartnerIds = new Set(\r\n            (partnerReferrals || []).map((r: any) => r.referred_by_entity_id)\r\n          )\r\n          partnersCount = uniquePartnerIds.size\r\n\r\n          // Count unique commercial partners on arranger's deals (via subscriptions)\r\n          const cpIds = new Set(\r\n            (dealSubscriptions || [])\r\n              .filter((s: any) => s.proxy_commercial_partner_id)\r\n              .map((s: any) => s.proxy_commercial_partner_id)\r\n          )\r\n          cpCount = cpIds.size\r\n        }\r\n\r\n        // Fetch pending agreements (introducer and placement) - SCOPED TO THIS ARRANGER\r\n        const { data: introducerAgreements } = await supabase\r\n          .from('introducer_agreements')\r\n          .select(`\r\n            id,\r\n            status,\r\n            created_at,\r\n            introducers (id, display_name, legal_name)\r\n          `)\r\n          .eq('arranger_id', arrangerId)\r\n          .in('status', ['sent', 'pending_approval', 'approved', 'pending_ceo_signature', 'pending_introducer_signature'])\r\n          .order('created_at', { ascending: false })\r\n          .limit(5)\r\n\r\n        const { data: placementAgreements } = await supabase\r\n          .from('placement_agreements')\r\n          .select(`\r\n            id,\r\n            status,\r\n            created_at,\r\n            commercial_partners (id, display_name, legal_name)\r\n          `)\r\n          .eq('arranger_id', arrangerId)\r\n          .in('status', ['sent', 'pending_approval', 'approved', 'pending_ceo_signature', 'pending_cp_signature'])\r\n          .order('created_at', { ascending: false })\r\n          .limit(5)\r\n\r\n        const allPendingAgreements: PendingAgreement[] = []\r\n\r\n        ;(introducerAgreements || []).forEach((a: any) => {\r\n          const intro = Array.isArray(a.introducers) ? a.introducers[0] : a.introducers\r\n          allPendingAgreements.push({\r\n            id: a.id,\r\n            entity_name: intro?.display_name || intro?.legal_name || 'Unknown',\r\n            entity_type: 'introducer',\r\n            status: a.status,\r\n            created_at: a.created_at,\r\n          })\r\n        })\r\n\r\n        ;(placementAgreements || []).forEach((a: any) => {\r\n          const cp = Array.isArray(a.commercial_partners) ? a.commercial_partners[0] : a.commercial_partners\r\n          allPendingAgreements.push({\r\n            id: a.id,\r\n            entity_name: cp?.display_name || cp?.legal_name || 'Unknown',\r\n            entity_type: 'commercial_partner',\r\n            status: a.status,\r\n            created_at: a.created_at,\r\n          })\r\n        })\r\n\r\n        // Sort by created_at and take top 5\r\n        allPendingAgreements.sort((a, b) =>\r\n          new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n        )\r\n        setPendingAgreements(allPendingAgreements.slice(0, 5))\r\n\r\n        // ========== NEW METRICS: User Story Compliance ==========\r\n\r\n        // 1. ESCROW/FUNDING METRICS (User Story 2.5.2)\r\n        if (dealIds.length > 0) {\r\n          const { data: fundingData } = await supabase\r\n            .from('subscriptions')\r\n            .select('commitment, funded_amount, outstanding_amount, status, investor_id')\r\n            .in('deal_id', dealIds)\r\n            .in('status', ['committed', 'partially_funded', 'funded', 'active', 'signed'])\n\r\n          const totalExpected = (fundingData || []).reduce((sum: number, s: any) => sum + (s.commitment || 0), 0)\r\n          const totalFunded = (fundingData || []).reduce((sum: number, s: any) => sum + (s.funded_amount || 0), 0)\r\n          const totalOutstanding = (fundingData || []).reduce((sum: number, s: any) => sum + (s.outstanding_amount || 0), 0)\r\n          const pendingInvestors = (fundingData || []).filter((s: any) => (s.funded_amount || 0) < (s.commitment || 0)).length\r\n\r\n          setEscrowMetrics({\r\n            totalExpected,\r\n            totalFunded,\r\n            totalOutstanding,\r\n            fundingRate: totalExpected > 0 ? (totalFunded / totalExpected) * 100 : 0,\r\n            pendingInvestors,\r\n          })\r\n\r\n          // 2. SUBSCRIPTION PACK PIPELINE METRICS (User Story 2.6.1)\r\n          // Query documents with subscription pack type and their signature requests\r\n          const { data: subDocs } = await supabase\r\n            .from('documents')\r\n            .select(`\r\n              id,\r\n              subscription_id,\r\n              status,\r\n              ready_for_signature,\r\n              signature_requests(id, signer_role, status)\r\n            `)\r\n            .not('subscription_id', 'is', null)\r\n            .in('status', ['published', 'pending_signature'])\r\n\r\n          // Filter to only documents for this arranger's deals\r\n          // We need to check which subscriptions belong to this arranger's deals\r\n          const { data: arrangerSubscriptions } = await supabase\r\n            .from('subscriptions')\r\n            .select('id')\r\n            .in('deal_id', dealIds)\r\n\r\n          const arrangerSubIds = new Set((arrangerSubscriptions || []).map((s: any) => s.id))\r\n\r\n          // Filter documents to only those for arranger's subscriptions\r\n          const arrangerDocs = (subDocs || []).filter((doc: any) => arrangerSubIds.has(doc.subscription_id))\r\n\r\n          let awaitingInvestor = 0\r\n          let awaitingArranger = 0\r\n          let awaitingCEO = 0\r\n\r\n          arrangerDocs.forEach((doc: any) => {\r\n            if (doc.status !== 'pending_signature') return\r\n            const requests = doc.signature_requests || []\r\n            const hasPendingInvestor = requests.some((r: any) => r.signer_role === 'investor' && r.status === 'pending')\r\n            const hasPendingArranger = requests.some((r: any) => r.signer_role === 'arranger' && r.status === 'pending')\r\n            const hasPendingCEO = requests.some((r: any) => r.signer_role === 'admin' && r.status === 'pending')\r\n\r\n            if (hasPendingInvestor) awaitingInvestor++\r\n            if (hasPendingArranger) awaitingArranger++\r\n            if (hasPendingCEO) awaitingCEO++\r\n          })\r\n\r\n          // Get signed this month count\r\n          const startOfMonth = new Date()\r\n          startOfMonth.setDate(1)\r\n          startOfMonth.setHours(0, 0, 0, 0)\r\n\r\n          const { count: signedThisMonth } = await supabase\r\n            .from('subscriptions')\r\n            .select('id', { count: 'exact', head: true })\r\n            .in('deal_id', dealIds)\r\n            .not('signed_at', 'is', null)\r\n            .gte('signed_at', startOfMonth.toISOString())\r\n\r\n          setSubPackMetrics({\r\n            awaitingInvestorSignature: awaitingInvestor,\r\n            awaitingArrangerSignature: awaitingArranger,\r\n            awaitingCEOSignature: awaitingCEO,\r\n            signedThisMonth: signedThisMonth || 0,\r\n            totalPending: awaitingInvestor + awaitingArranger + awaitingCEO,\r\n          })\r\n        } else {\r\n          // No deals - set empty metrics\r\n          setEscrowMetrics({\r\n            totalExpected: 0,\r\n            totalFunded: 0,\r\n            totalOutstanding: 0,\r\n            fundingRate: 0,\r\n            pendingInvestors: 0,\r\n          })\r\n          setSubPackMetrics({\r\n            awaitingInvestorSignature: 0,\r\n            awaitingArrangerSignature: 0,\r\n            awaitingCEOSignature: 0,\r\n            signedThisMonth: 0,\r\n            totalPending: 0,\r\n          })\r\n        }\r\n\r\n        // 3. FEE METRICS (User Story 2.2.4, 2.3.4, 2.4.4)\r\n        const { data: feeData } = await supabase\r\n          .from('fee_events')\r\n          .select('computed_amount, status')\r\n          .eq('payee_arranger_id', arrangerId)\r\n\r\n        const validFees = (feeData || []).filter((f: any) => f.status !== 'voided' && f.status !== 'cancelled')\r\n        const totalAccrued = validFees.filter((f: any) => f.status === 'accrued').reduce((s: number, f: any) => s + (f.computed_amount || 0), 0)\r\n        const totalInvoiced = validFees.filter((f: any) => f.status === 'invoiced').reduce((s: number, f: any) => s + (f.computed_amount || 0), 0)\r\n        const totalPaid = validFees.filter((f: any) => f.status === 'paid').reduce((s: number, f: any) => s + (f.computed_amount || 0), 0)\r\n\r\n        setFeeMetrics({\r\n          totalAccrued,\r\n          totalInvoiced,\r\n          totalPaid,\r\n          feePipeline: totalAccrued + totalInvoiced,\r\n        })\r\n\r\n        // ========== END NEW METRICS ==========\r\n\r\n        setMetrics({\r\n          totalMandates: mandates.length,\r\n          activeMandates: activeMandates.length,\r\n          pendingMandates: pendingMandates.length,\r\n          totalPartners: partnersCount || 0,\r\n          totalIntroducers: introducersCount || 0,\r\n          totalCommercialPartners: cpCount || 0,\r\n          totalLawyers: lawyersCount,\r\n          pendingAgreements: allPendingAgreements.length,\r\n          totalCommitmentValue: totalCommitment,\r\n        })\r\n      } catch (error) {\r\n        console.error('Error fetching arranger data:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [arrangerId])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-8 text-center flex flex-col items-center gap-3\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-gray-400\" />\r\n        <p className=\"text-gray-500\">Loading dashboard...</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Deal status enum: draft, open, allocation_pending, closed, cancelled\r\n  const dealStatusStyles: Record<string, string> = {\r\n    draft: 'bg-gray-500/20 text-gray-400',\r\n    open: 'bg-green-500/20 text-green-400',\r\n    allocation_pending: 'bg-amber-500/20 text-amber-400',\r\n    closed: 'bg-purple-500/20 text-purple-400',\r\n    cancelled: 'bg-red-500/20 text-red-400',\r\n  }\r\n\r\n  const agreementStatusStyles: Record<string, string> = {\r\n    sent: 'bg-blue-500/20 text-blue-400',\r\n    pending_approval: 'bg-amber-500/20 text-amber-400',\r\n    approved: 'bg-green-500/20 text-green-400',\r\n    pending_ceo_signature: 'bg-purple-500/20 text-purple-400',\r\n    pending_introducer_signature: 'bg-indigo-500/20 text-indigo-400',\r\n    pending_cp_signature: 'bg-indigo-500/20 text-indigo-400',\r\n  }\r\n\r\n  const agreementStatusLabels: Record<string, string> = {\r\n    sent: 'Sent',\r\n    pending_approval: 'Pending Approval',\r\n    approved: 'Approved',\r\n    pending_ceo_signature: 'Awaiting CEO Signature',\r\n    pending_introducer_signature: 'Awaiting Signature',\r\n    pending_cp_signature: 'Awaiting Signature',\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n            Arranger Dashboard\r\n          </h1>\r\n          <p className={`mt-1 ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n            {arrangerInfo?.legal_name || persona.entity_name}\r\n          </p>\r\n        </div>\r\n        {arrangerInfo?.kyc_status && (\r\n          <Badge\r\n            variant=\"outline\"\r\n            className={\r\n              arrangerInfo.kyc_status === 'approved'\r\n                ? 'border-green-500/50 text-green-500'\r\n                : arrangerInfo.kyc_status === 'pending'\r\n                ? 'border-amber-500/50 text-amber-500'\r\n                : 'border-gray-500/50 text-gray-500'\r\n            }\r\n          >\r\n            KYC: {arrangerInfo.kyc_status}\r\n          </Badge>\r\n        )}\r\n      </div>\r\n\r\n      {/* Alert for inactive/pending arranger */}\r\n      {arrangerInfo && arrangerInfo.status !== 'active' && (\r\n        <Card className={`border-amber-500/30 ${isDark ? 'bg-amber-500/10' : 'bg-amber-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-full bg-amber-500/20\">\r\n                <AlertCircle className=\"h-5 w-5 text-amber-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  Account {arrangerInfo.status === 'pending' ? 'Pending Approval' : 'Inactive'}\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                  {arrangerInfo.status === 'pending'\r\n                    ? 'Your arranger account is pending approval. Contact the VERSO team for status updates.'\r\n                    : 'Your arranger account is currently inactive. Contact the VERSO team for assistance.'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Pending Agreements Alert */}\r\n      {metrics && metrics.pendingAgreements > 0 && (\r\n        <Card className={`border-blue-500/30 ${isDark ? 'bg-blue-500/10' : 'bg-blue-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 rounded-full bg-blue-500/20\">\r\n                  <FileSignature className=\"h-5 w-5 text-blue-500\" />\r\n                </div>\r\n                <div>\r\n                  <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                    {metrics.pendingAgreements} Pending Agreement{metrics.pendingAgreements !== 1 ? 's' : ''}\r\n                  </p>\r\n                  <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                    Agreements awaiting approval or signature\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button asChild>\r\n                <Link href=\"/versotech_main/versosign\">\r\n                  View in VERSOSign\r\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Onboarding Checklist - Show when KYC not approved */}\r\n      {arrangerInfo?.kyc_status !== 'approved' && (\r\n        <ArrangerOnboardingChecklist arrangerId={arrangerId} compact />\r\n      )}\r\n\r\n      {/* Metrics Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Total Mandates\r\n            </CardTitle>\r\n            <Briefcase className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {metrics?.totalMandates || 0}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              {metrics?.activeMandates || 0} active, {metrics?.pendingMandates || 0} pending\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Active Network\r\n            </CardTitle>\r\n            <Users className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {(metrics?.totalPartners || 0) + (metrics?.totalIntroducers || 0) + (metrics?.totalCommercialPartners || 0)}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              On your mandates\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Total Commitment\r\n            </CardTitle>\r\n            <DollarSign className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold text-green-500`}>\r\n              {formatCurrency(metrics?.totalCommitmentValue || 0)}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Across all mandates\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Assigned Lawyers\r\n            </CardTitle>\r\n            <Scale className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {metrics?.totalLawyers || 0}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              On your mandates\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* NEW: Escrow & Fee Metrics Row (User Story 2.5.2, 2.2.4/2.3.4/2.4.4) */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        {/* Escrow Funding Status Card */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Escrow Funding Status\r\n            </CardTitle>\r\n            <Wallet className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${(escrowMetrics?.fundingRate || 0) >= 75 ? 'text-green-500' : 'text-amber-500'}`}>\r\n              {(escrowMetrics?.fundingRate || 0).toFixed(0)}% Funded\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              {formatCurrency(escrowMetrics?.totalFunded || 0)} of {formatCurrency(escrowMetrics?.totalExpected || 0)}\r\n            </p>\r\n            {/* Progress bar */}\r\n            <div className={`mt-2 h-2 ${isDark ? 'bg-gray-700' : 'bg-gray-200'} rounded-full overflow-hidden`}>\r\n              <div\r\n                className=\"h-full bg-green-500 transition-all duration-300\"\r\n                style={{ width: `${Math.min(escrowMetrics?.fundingRate || 0, 100)}%` }}\r\n              />\r\n            </div>\r\n            {(escrowMetrics?.pendingInvestors || 0) > 0 && (\r\n              <p className=\"text-xs text-amber-400 mt-2\">\r\n                {escrowMetrics?.pendingInvestors} investor(s) pending funding\r\n              </p>\r\n            )}\r\n            <div className=\"mt-3 pt-3 border-t border-gray-700/50 flex justify-between text-xs\">\r\n              <span className={isDark ? 'text-gray-400' : 'text-gray-500'}>Outstanding:</span>\r\n              <span className=\"text-amber-400 font-medium\">{formatCurrency(escrowMetrics?.totalOutstanding || 0)}</span>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Fee Pipeline Card */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Fee Pipeline\r\n            </CardTitle>\r\n            <Receipt className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-green-500\">\r\n              {formatCurrency(feeMetrics?.feePipeline || 0)}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Pending collection\r\n            </p>\r\n            <div className=\"mt-3 space-y-2 text-xs\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className={isDark ? 'text-gray-400' : 'text-gray-500'}>Accrued:</span>\r\n                <span className=\"text-amber-400 font-medium\">{formatCurrency(feeMetrics?.totalAccrued || 0)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className={isDark ? 'text-gray-400' : 'text-gray-500'}>Invoiced:</span>\r\n                <span className=\"text-blue-400 font-medium\">{formatCurrency(feeMetrics?.totalInvoiced || 0)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between items-center pt-2 border-t border-gray-700/50\">\r\n                <span className={isDark ? 'text-gray-400' : 'text-gray-500'}>Total Paid:</span>\r\n                <span className=\"text-green-400 font-medium\">{formatCurrency(feeMetrics?.totalPaid || 0)}</span>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* NEW: Subscription Pack Pipeline (User Story 2.6.1) */}\r\n      <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n        <CardHeader>\r\n          <CardTitle className={isDark ? 'text-white' : ''}>Subscription Pack Pipeline</CardTitle>\r\n          <CardDescription>Document signing status across your mandates</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div className={`text-center p-4 rounded-lg ${isDark ? 'bg-amber-500/10' : 'bg-amber-50'}`}>\r\n              <p className=\"text-2xl font-bold text-amber-500\">{subPackMetrics?.awaitingInvestorSignature || 0}</p>\r\n              <p className={`text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Awaiting Investor</p>\r\n            </div>\r\n            <div className={`text-center p-4 rounded-lg ${isDark ? 'bg-purple-500/10' : 'bg-purple-50'}`}>\r\n              <p className=\"text-2xl font-bold text-purple-500\">{subPackMetrics?.awaitingArrangerSignature || 0}</p>\r\n              <p className={`text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Awaiting Your Signature</p>\r\n            </div>\r\n            <div className={`text-center p-4 rounded-lg ${isDark ? 'bg-blue-500/10' : 'bg-blue-50'}`}>\r\n              <p className=\"text-2xl font-bold text-blue-500\">{subPackMetrics?.awaitingCEOSignature || 0}</p>\r\n              <p className={`text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Awaiting CEO</p>\r\n            </div>\r\n            <div className={`text-center p-4 rounded-lg ${isDark ? 'bg-green-500/10' : 'bg-green-50'}`}>\r\n              <p className=\"text-2xl font-bold text-green-500\">{subPackMetrics?.signedThisMonth || 0}</p>\r\n              <p className={`text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Signed This Month</p>\r\n            </div>\r\n          </div>\r\n          {/* Action alert if arranger has docs to sign */}\r\n          {(subPackMetrics?.awaitingArrangerSignature || 0) > 0 && (\r\n            <Alert className={`mt-4 border-purple-500/30 ${isDark ? 'bg-purple-500/10' : 'bg-purple-50'}`}>\r\n              <FileSignature className=\"h-4 w-4 text-purple-500\" />\r\n              <AlertDescription className={`flex items-center justify-between ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                <span>You have {subPackMetrics?.awaitingArrangerSignature} document(s) awaiting your signature.</span>\r\n                <Button variant=\"link\" asChild className=\"p-0 h-auto text-purple-500\">\r\n                  <Link href=\"/versotech_main/versosign\">Sign Now →</Link>\r\n                </Button>\r\n              </AlertDescription>\r\n            </Alert>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Entity Breakdown */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"p-3 rounded-full bg-pink-500/20\">\r\n                <Users className=\"h-6 w-6 text-pink-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  {metrics?.totalPartners || 0}\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Partners</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"p-3 rounded-full bg-orange-500/20\">\r\n                <UserPlus className=\"h-6 w-6 text-orange-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  {metrics?.totalIntroducers || 0}\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Introducers</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"p-3 rounded-full bg-cyan-500/20\">\r\n                <Building2 className=\"h-6 w-6 text-cyan-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  {metrics?.totalCommercialPartners || 0}\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>Commercial Partners</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Two Column Layout */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Recent Mandates */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between\">\r\n            <div>\r\n              <CardTitle className={isDark ? 'text-white' : ''}>Recent Mandates</CardTitle>\r\n              <CardDescription>Your managed deals</CardDescription>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"sm\" asChild>\r\n              <Link href=\"/versotech_main/my-mandates\">\r\n                View All\r\n                <ArrowRight className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {recentMandates.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <Briefcase className={`h-10 w-10 mx-auto mb-3 ${isDark ? 'text-gray-600' : 'text-gray-400'}`} />\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  No mandates assigned yet\r\n                </p>\r\n                <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-400'} mt-1`}>\r\n                  Contact the VERSO team to be assigned mandates\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {recentMandates.map((mandate) => (\r\n                  <Link\r\n                    key={mandate.id}\r\n                    href={`/versotech_main/my-mandates`}\r\n                    className={`flex items-center justify-between p-3 rounded-lg transition-colors ${\r\n                      isDark ? 'bg-white/5 hover:bg-white/10' : 'bg-gray-50 hover:bg-gray-100'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className={`font-medium truncate ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                        {mandate.name}\r\n                      </p>\r\n                      <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                        {mandate.target_amount\r\n                          ? `${formatCurrency(mandate.target_amount, mandate.currency)} target`\r\n                          : 'No target set'}\r\n                      </p>\r\n                    </div>\r\n                    <Badge className={dealStatusStyles[mandate.status] || 'bg-gray-500/20 text-gray-400'}>\r\n                      {mandate.status}\r\n                    </Badge>\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Pending Agreements */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between\">\r\n            <div>\r\n              <CardTitle className={isDark ? 'text-white' : ''}>Pending Agreements</CardTitle>\r\n              <CardDescription>Agreements awaiting action</CardDescription>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"sm\" asChild>\r\n              <Link href=\"/versotech_main/versosign\">\r\n                View All\r\n                <ArrowRight className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {pendingAgreements.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <FileSignature className={`h-10 w-10 mx-auto mb-3 ${isDark ? 'text-gray-600' : 'text-gray-400'}`} />\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  No pending agreements\r\n                </p>\r\n                <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-400'} mt-1`}>\r\n                  All agreements are up to date\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {pendingAgreements.map((agreement) => (\r\n                  <div\r\n                    key={agreement.id}\r\n                    className={`flex items-center justify-between p-3 rounded-lg ${\r\n                      isDark ? 'bg-white/5' : 'bg-gray-50'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className={`font-medium truncate ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                        {agreement.entity_name}\r\n                      </p>\r\n                      <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                        {agreement.entity_type === 'introducer' ? 'Introducer Agreement' : 'Placement Agreement'}\r\n                      </p>\r\n                    </div>\r\n                    <Badge className={agreementStatusStyles[agreement.status] || 'bg-gray-500/20 text-gray-400'}>\r\n                      {agreementStatusLabels[agreement.status] || agreement.status}\r\n                    </Badge>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n        <CardHeader>\r\n          <CardTitle className={isDark ? 'text-white' : ''}>Quick Actions</CardTitle>\r\n          <CardDescription>Common tasks and workflows</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/my-mandates\">\r\n                <Briefcase className=\"h-5 w-5\" />\r\n                <span>View Mandates</span>\r\n              </Link>\r\n            </Button>\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/my-partners\">\r\n                <Users className=\"h-5 w-5\" />\r\n                <span>My Partners</span>\r\n              </Link>\r\n            </Button>\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/my-introducers\">\r\n                <UserPlus className=\"h-5 w-5\" />\r\n                <span>My Introducers</span>\r\n              </Link>\r\n            </Button>\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/versosign\">\r\n                <FileSignature className=\"h-5 w-5\" />\r\n                <span>VERSOSign</span>\r\n              </Link>\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  Building2,\r\n  Users,\r\n  FileText,\r\n  DollarSign,\r\n  Clock,\r\n  CheckCircle2,\r\n  ArrowRight,\r\n  Loader2,\r\n  AlertCircle,\r\n  TrendingUp,\r\n  FileSignature,\r\n  Briefcase,\r\n  UserCheck,\r\n  Eye,\r\n  PenTool,\r\n} from 'lucide-react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { formatCurrency, formatDate } from '@/lib/format'\r\nimport { useTheme } from '@/components/theme-provider'\r\n\r\ntype Persona = {\r\n  persona_type: string\r\n  entity_id: string\r\n  entity_name: string\r\n  role_in_entity?: string | null\r\n  can_sign?: boolean\r\n  can_execute_for_clients?: boolean\r\n  logo_url?: string | null\r\n}\r\n\r\ninterface CommercialPartnerDashboardProps {\r\n  commercialPartnerId: string\r\n  userId: string\r\n  persona: Persona\r\n}\r\n\r\ntype CPMetrics = {\r\n  totalClients: number\r\n  activeClients: number\r\n  dispatchedDeals: number\r\n  activeOpportunities: number\r\n  totalSubscriptions: number\r\n  pendingSubscriptions: number\r\n  ownInvestmentValue: number\r\n  clientInvestmentValue: number\r\n  pendingAgreements: number\r\n  activeAgreements: number\r\n  // Commission aggregations from commercial_partner_commissions\r\n  commissionPaid: number\r\n  commissionAccrued: number\r\n  commissionPending: number\r\n}\r\n\r\ntype RecentSubscription = {\r\n  id: string\r\n  deal_name: string\r\n  investor_name: string\r\n  commitment: number\r\n  status: string\r\n  created_at: string\r\n  is_proxy: boolean\r\n}\r\n\r\ntype PlacementAgreement = {\r\n  id: string\r\n  agreement_type: string\r\n  status: string\r\n  default_commission_bps: number\r\n  created_at: string\r\n}\r\n\r\nexport function CommercialPartnerDashboard({ commercialPartnerId, userId, persona }: CommercialPartnerDashboardProps) {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [metrics, setMetrics] = useState<CPMetrics | null>(null)\r\n  const [cpInfo, setCpInfo] = useState<{\r\n    name: string\r\n    legal_name: string\r\n    status: string\r\n    kyc_status: string | null\r\n    cp_type: string\r\n  } | null>(null)\r\n  const [recentSubscriptions, setRecentSubscriptions] = useState<RecentSubscription[]>([])\r\n  const [placementAgreements, setPlacementAgreements] = useState<PlacementAgreement[]>([])\r\n  const [canExecuteForClients, setCanExecuteForClients] = useState(false)\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const supabase = createClient()\r\n\r\n        // Fetch commercial partner entity info\r\n        const { data: cp } = await supabase\r\n          .from('commercial_partners')\r\n          .select('id, name, legal_name, status, kyc_status, cp_type')\r\n          .eq('id', commercialPartnerId)\r\n          .maybeSingle()\r\n\r\n        if (cp) {\r\n          setCpInfo({\r\n            name: cp.name,\r\n            legal_name: cp.legal_name,\r\n            status: cp.status,\r\n            kyc_status: cp.kyc_status,\r\n            cp_type: cp.cp_type,\r\n          })\r\n        }\r\n\r\n        // Check if user can execute for clients\r\n        const { data: cpUser } = await supabase\r\n          .from('commercial_partner_users')\r\n          .select('can_execute_for_clients')\r\n          .eq('commercial_partner_id', commercialPartnerId)\r\n          .eq('user_id', userId)\r\n          .maybeSingle()\r\n\r\n        setCanExecuteForClients(cpUser?.can_execute_for_clients || false)\r\n\r\n        // Fetch clients from commercial_partner_clients table\r\n        const { data: clients, count: clientCount } = await supabase\r\n          .from('commercial_partner_clients')\r\n          .select('id, is_active, client_investor_id', { count: 'exact' })\r\n          .eq('commercial_partner_id', commercialPartnerId)\r\n\r\n        const totalClients = clientCount || 0\r\n        const activeClients = (clients || []).filter((c: any) => c.is_active).length\r\n\r\n        // Get client investor IDs for subscription queries\r\n        const clientInvestorIds = (clients || [])\r\n          .filter((c: any) => c.client_investor_id)\r\n          .map((c: any) => c.client_investor_id)\r\n\r\n        // Get user's investor link (for MODE 1 - direct investment)\r\n        const { data: investorLinks } = await supabase\r\n          .from('investor_users')\r\n          .select('investor_id')\r\n          .eq('user_id', userId)\r\n\r\n        const ownInvestorIds = (investorLinks || []).map((l: any) => l.investor_id)\r\n\r\n        // Fetch dispatched deals - deals where CP is dispatched\r\n        const { data: dealMemberships } = await supabase\r\n          .from('deal_memberships')\r\n          .select('deal_id, role')\r\n          .eq('user_id', userId)\r\n          .in('role', ['commercial_partner_investor', 'commercial_partner_proxy'])\r\n\r\n        const dispatchedDeals = (dealMemberships || []).length\r\n        const dispatchedDealIds = (dealMemberships || []).map((dm: any) => dm.deal_id)\r\n\r\n        // Count active opportunities (deals with status open/allocation_pending that CP is dispatched to)\r\n        let activeOpportunities = 0\r\n        if (dispatchedDealIds.length > 0) {\r\n          const { count: activeDealsCount } = await supabase\r\n            .from('deals')\r\n            .select('id', { count: 'exact', head: true })\r\n            .in('id', dispatchedDealIds)\r\n            .in('status', ['open', 'allocation_pending', 'active'])\r\n\r\n          activeOpportunities = activeDealsCount || 0\r\n        }\r\n\r\n        // Fetch subscriptions - both own investments (MODE 1) and client subscriptions (MODE 2)\r\n        let ownInvestmentValue = 0\r\n        let clientInvestmentValue = 0\r\n        let totalSubscriptions = 0\r\n        let pendingSubscriptions = 0\r\n        const allSubscriptions: RecentSubscription[] = []\r\n\r\n        // MODE 1 - Own investments\r\n        if (ownInvestorIds.length > 0) {\r\n          const { data: ownSubs } = await supabase\r\n            .from('subscriptions')\r\n            .select(`\r\n              id, commitment, status, created_at,\r\n              deals (id, name),\r\n              investors (id, legal_name)\r\n            `)\r\n            .in('investor_id', ownInvestorIds)\r\n            .order('created_at', { ascending: false })\r\n            .limit(10)\r\n\r\n          ;(ownSubs || []).forEach((sub: any) => {\r\n            if (['committed', 'active', 'signed', 'funded'].includes(sub.status)) {\r\n              ownInvestmentValue += sub.commitment || 0\r\n            }\r\n            totalSubscriptions++\r\n            if (sub.status === 'pending') pendingSubscriptions++\r\n\r\n            allSubscriptions.push({\r\n              id: sub.id,\r\n              deal_name: sub.deals?.name || 'Unknown Deal',\r\n              investor_name: 'My Investment',\r\n              commitment: sub.commitment || 0,\r\n              status: sub.status,\r\n              created_at: sub.created_at,\r\n              is_proxy: false,\r\n            })\r\n          })\r\n        }\r\n\r\n        // MODE 2 - Client subscriptions\r\n        if (clientInvestorIds.length > 0) {\r\n          const { data: clientSubs } = await supabase\r\n            .from('subscriptions')\r\n            .select(`\r\n              id, commitment, status, created_at,\r\n              deals (id, name),\r\n              investors (id, legal_name)\r\n            `)\r\n            .in('investor_id', clientInvestorIds)\r\n            .order('created_at', { ascending: false })\r\n            .limit(10)\r\n\r\n          ;(clientSubs || []).forEach((sub: any) => {\r\n            if (['committed', 'active', 'signed', 'funded'].includes(sub.status)) {\r\n              clientInvestmentValue += sub.commitment || 0\r\n            }\r\n            totalSubscriptions++\r\n            if (sub.status === 'pending') pendingSubscriptions++\r\n\r\n            allSubscriptions.push({\r\n              id: sub.id,\r\n              deal_name: sub.deals?.name || 'Unknown Deal',\r\n              investor_name: sub.investors?.legal_name || 'Client',\r\n              commitment: sub.commitment || 0,\r\n              status: sub.status,\r\n              created_at: sub.created_at,\r\n              is_proxy: true,\r\n            })\r\n          })\r\n        }\r\n\r\n        // Sort all subscriptions by date and take top 5\r\n        allSubscriptions.sort((a, b) =>\r\n          new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n        )\r\n        setRecentSubscriptions(allSubscriptions.slice(0, 5))\r\n\r\n        // Fetch placement agreements\r\n        const { data: agreements } = await supabase\r\n          .from('placement_agreements')\r\n          .select('id, agreement_type, status, default_commission_bps, created_at')\r\n          .eq('commercial_partner_id', commercialPartnerId)\r\n          .order('created_at', { ascending: false })\r\n\r\n        setPlacementAgreements(agreements || [])\r\n\r\n        const pendingAgreements = (agreements || []).filter((a: any) =>\r\n          ['sent', 'pending_approval', 'approved', 'pending_ceo_signature', 'pending_cp_signature'].includes(a.status)\r\n        ).length\r\n        const activeAgreements = (agreements || []).filter((a: any) => a.status === 'active').length\r\n\r\n        // Fetch commission aggregations from commercial_partner_commissions\r\n        let commissionPaid = 0\r\n        let commissionAccrued = 0\r\n        let commissionPending = 0\r\n\r\n        const { data: commissions } = await supabase\r\n          .from('commercial_partner_commissions')\r\n          .select('status, accrual_amount')\r\n          .eq('commercial_partner_id', commercialPartnerId)\r\n\r\n        if (commissions && commissions.length > 0) {\r\n          commissions.forEach((c: any) => {\r\n            const amount = parseFloat(c.accrual_amount) || 0\r\n            switch (c.status) {\r\n              case 'paid':\r\n                commissionPaid += amount\r\n                break\r\n              case 'accrued':\r\n                commissionAccrued += amount\r\n                break\r\n              case 'invoice_requested':\r\n              case 'invoiced':\r\n                commissionPending += amount\r\n                break\r\n            }\r\n          })\r\n        }\r\n\r\n        setMetrics({\r\n          totalClients,\r\n          activeClients,\r\n          dispatchedDeals,\r\n          activeOpportunities,\r\n          totalSubscriptions,\r\n          pendingSubscriptions,\r\n          ownInvestmentValue,\r\n          clientInvestmentValue,\r\n          pendingAgreements,\r\n          activeAgreements,\r\n          commissionPaid,\r\n          commissionAccrued,\r\n          commissionPending,\r\n        })\r\n      } catch (error) {\r\n        console.error('Error fetching commercial partner data:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [commercialPartnerId, userId])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-8 text-center flex flex-col items-center gap-3\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-gray-400\" />\r\n        <p className=\"text-gray-500\">Loading dashboard...</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const subscriptionStatusStyles: Record<string, string> = {\r\n    pending: 'bg-amber-500/20 text-amber-400',\r\n    committed: 'bg-blue-500/20 text-blue-400',\r\n    active: 'bg-green-500/20 text-green-400',\r\n    signed: 'bg-purple-500/20 text-purple-400',\r\n    funded: 'bg-emerald-500/20 text-emerald-400',\r\n    cancelled: 'bg-red-500/20 text-red-400',\r\n    rejected: 'bg-red-500/20 text-red-400',\r\n  }\r\n\r\n  const agreementStatusStyles: Record<string, string> = {\r\n    draft: 'bg-gray-500/20 text-gray-400',\r\n    sent: 'bg-blue-500/20 text-blue-400',\r\n    pending_approval: 'bg-amber-500/20 text-amber-400',\r\n    approved: 'bg-green-500/20 text-green-400',\r\n    pending_ceo_signature: 'bg-purple-500/20 text-purple-400',\r\n    pending_cp_signature: 'bg-indigo-500/20 text-indigo-400',\r\n    active: 'bg-emerald-500/20 text-emerald-400',\r\n    expired: 'bg-red-500/20 text-red-400',\r\n    terminated: 'bg-red-500/20 text-red-400',\r\n  }\r\n\r\n  const agreementStatusLabels: Record<string, string> = {\r\n    draft: 'Draft',\r\n    sent: 'Sent',\r\n    pending_approval: 'Pending Approval',\r\n    approved: 'Approved',\r\n    pending_ceo_signature: 'Awaiting CEO Signature',\r\n    pending_cp_signature: 'Your Signature Required',\r\n    active: 'Active',\r\n    expired: 'Expired',\r\n    terminated: 'Terminated',\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n            Commercial Partner Dashboard\r\n          </h1>\r\n          <p className={`mt-1 ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n            {cpInfo?.legal_name || cpInfo?.name || persona.entity_name}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          {cpInfo?.cp_type && (\r\n            <Badge variant=\"outline\" className={isDark ? 'border-gray-600' : ''}>\r\n              {cpInfo.cp_type.replace(/_/g, ' ').toUpperCase()}\r\n            </Badge>\r\n          )}\r\n          {cpInfo?.kyc_status && (\r\n            <Badge\r\n              variant=\"outline\"\r\n              className={\r\n                cpInfo.kyc_status === 'approved'\r\n                  ? 'border-green-500/50 text-green-500'\r\n                  : cpInfo.kyc_status === 'pending'\r\n                  ? 'border-amber-500/50 text-amber-500'\r\n                  : 'border-gray-500/50 text-gray-500'\r\n              }\r\n            >\r\n              KYC: {cpInfo.kyc_status}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Alert for inactive/pending CP */}\r\n      {cpInfo && cpInfo.status !== 'active' && (\r\n        <Card className={`border-amber-500/30 ${isDark ? 'bg-amber-500/10' : 'bg-amber-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 rounded-full bg-amber-500/20\">\r\n                <AlertCircle className=\"h-5 w-5 text-amber-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  Account {cpInfo.status === 'pending' ? 'Pending Approval' : 'Inactive'}\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                  {cpInfo.status === 'pending'\r\n                    ? 'Your commercial partner account is pending approval. Contact the VERSO team for status updates.'\r\n                    : 'Your commercial partner account is currently inactive. Contact the VERSO team for assistance.'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Pending Signature Alert */}\r\n      {metrics && metrics.pendingAgreements > 0 && (\r\n        <Card className={`border-orange-500/30 ${isDark ? 'bg-orange-500/10' : 'bg-orange-50'}`}>\r\n          <CardContent className=\"py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"p-2 rounded-full bg-orange-500/20\">\r\n                  <FileSignature className=\"h-5 w-5 text-orange-500\" />\r\n                </div>\r\n                <div>\r\n                  <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                    {metrics.pendingAgreements} Pending Agreement{metrics.pendingAgreements !== 1 ? 's' : ''}\r\n                  </p>\r\n                  <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                    Agreements awaiting approval or signature\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button asChild>\r\n                <Link href=\"/versotech_main/placement-agreements\">\r\n                  View Agreements\r\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Metrics Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Clients Managed\r\n            </CardTitle>\r\n            <Users className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {metrics?.totalClients || 0}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              {metrics?.activeClients || 0} active clients\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Active Opportunities\r\n            </CardTitle>\r\n            <TrendingUp className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {metrics?.activeOpportunities || 0}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              {metrics?.dispatchedDeals || 0} total dispatched\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Client Investments\r\n            </CardTitle>\r\n            <DollarSign className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold text-green-500`}>\r\n              {formatCurrency(metrics?.clientInvestmentValue || 0)}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Via proxy subscriptions\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n              Own Investments\r\n            </CardTitle>\r\n            <Briefcase className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n              {formatCurrency(metrics?.ownInvestmentValue || 0)}\r\n            </div>\r\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\r\n              Direct investments\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Commission Earnings Summary */}\r\n      {(metrics?.commissionPaid || 0) + (metrics?.commissionAccrued || 0) + (metrics?.commissionPending || 0) > 0 && (\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <CardTitle className={isDark ? 'text-white' : ''}>Commission Earnings</CardTitle>\r\n                <CardDescription>Your commission totals across all deals</CardDescription>\r\n              </div>\r\n              <div className=\"p-2 rounded-full bg-purple-500/20\">\r\n                <DollarSign className=\"h-5 w-5 text-purple-500\" />\r\n              </div>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div className={`p-4 rounded-lg ${isDark ? 'bg-white/5' : 'bg-green-50'}`}>\r\n                <p className={`text-xs font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'} mb-1`}>Paid</p>\r\n                <p className=\"text-xl font-bold text-green-500\">\r\n                  {formatCurrency(metrics?.commissionPaid || 0)}\r\n                </p>\r\n              </div>\r\n              <div className={`p-4 rounded-lg ${isDark ? 'bg-white/5' : 'bg-blue-50'}`}>\r\n                <p className={`text-xs font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'} mb-1`}>Accrued</p>\r\n                <p className=\"text-xl font-bold text-blue-500\">\r\n                  {formatCurrency(metrics?.commissionAccrued || 0)}\r\n                </p>\r\n              </div>\r\n              <div className={`p-4 rounded-lg ${isDark ? 'bg-white/5' : 'bg-amber-50'}`}>\r\n                <p className={`text-xs font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'} mb-1`}>Pending</p>\r\n                <p className=\"text-xl font-bold text-amber-500\">\r\n                  {formatCurrency(metrics?.commissionPending || 0)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Subscriptions & Agreements Summary */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"p-3 rounded-full bg-blue-500/20\">\r\n                <FileText className=\"h-6 w-6 text-blue-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  {metrics?.totalSubscriptions || 0}\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  Total Subscriptions ({metrics?.pendingSubscriptions || 0} pending)\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"p-3 rounded-full bg-emerald-500/20\">\r\n                <CheckCircle2 className=\"h-6 w-6 text-emerald-500\" />\r\n              </div>\r\n              <div>\r\n                <p className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                  {metrics?.activeAgreements || 0}\r\n                </p>\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  Active Placement Agreements\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Two Column Layout */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Recent Subscriptions */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between\">\r\n            <div>\r\n              <CardTitle className={isDark ? 'text-white' : ''}>Recent Transactions</CardTitle>\r\n              <CardDescription>Latest subscription activity</CardDescription>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"sm\" asChild>\r\n              <Link href=\"/versotech_main/client-transactions\">\r\n                View All\r\n                <ArrowRight className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {recentSubscriptions.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <FileText className={`h-10 w-10 mx-auto mb-3 ${isDark ? 'text-gray-600' : 'text-gray-400'}`} />\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  No subscriptions yet\r\n                </p>\r\n                <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-400'} mt-1`}>\r\n                  Browse opportunities to start investing\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {recentSubscriptions.map((sub) => (\r\n                  <div\r\n                    key={sub.id}\r\n                    className={`flex items-center justify-between p-3 rounded-lg ${\r\n                      isDark ? 'bg-white/5' : 'bg-gray-50'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <p className={`font-medium truncate ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                          {sub.deal_name}\r\n                        </p>\r\n                        {sub.is_proxy && (\r\n                          <Badge variant=\"outline\" className=\"text-xs\">\r\n                            Proxy\r\n                          </Badge>\r\n                        )}\r\n                      </div>\r\n                      <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                        {sub.investor_name} • {formatCurrency(sub.commitment)}\r\n                      </p>\r\n                    </div>\r\n                    <Badge className={subscriptionStatusStyles[sub.status] || 'bg-gray-500/20 text-gray-400'}>\r\n                      {sub.status}\r\n                    </Badge>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Placement Agreements */}\r\n        <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n          <CardHeader className=\"flex flex-row items-center justify-between\">\r\n            <div>\r\n              <CardTitle className={isDark ? 'text-white' : ''}>Placement Agreements</CardTitle>\r\n              <CardDescription>Your commission agreements</CardDescription>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"sm\" asChild>\r\n              <Link href=\"/versotech_main/placement-agreements\">\r\n                View All\r\n                <ArrowRight className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {placementAgreements.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <FileSignature className={`h-10 w-10 mx-auto mb-3 ${isDark ? 'text-gray-600' : 'text-gray-400'}`} />\r\n                <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                  No placement agreements\r\n                </p>\r\n                <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-400'} mt-1`}>\r\n                  Agreements will appear here once created\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {placementAgreements.slice(0, 5).map((agreement) => (\r\n                  <Link\r\n                    key={agreement.id}\r\n                    href={`/versotech_main/placement-agreements/${agreement.id}`}\r\n                    className={`flex items-center justify-between p-3 rounded-lg transition-colors ${\r\n                      isDark ? 'bg-white/5 hover:bg-white/10' : 'bg-gray-50 hover:bg-gray-100'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                        {agreement.agreement_type.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())} Agreement\r\n                      </p>\r\n                      <p className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                        Commission: {(agreement.default_commission_bps / 100).toFixed(2)}%\r\n                      </p>\r\n                    </div>\r\n                    <Badge className={agreementStatusStyles[agreement.status] || 'bg-gray-500/20 text-gray-400'}>\r\n                      {agreementStatusLabels[agreement.status] || agreement.status}\r\n                    </Badge>\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <Card className={isDark ? 'bg-white/5 border-white/10' : ''}>\r\n        <CardHeader>\r\n          <CardTitle className={isDark ? 'text-white' : ''}>Quick Actions</CardTitle>\r\n          <CardDescription>Common tasks and workflows</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/opportunities\">\r\n                <TrendingUp className=\"h-5 w-5\" />\r\n                <span>View Opportunities</span>\r\n              </Link>\r\n            </Button>\r\n            {canExecuteForClients && (\r\n              <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n                <Link href=\"/versotech_main/client-transactions\">\r\n                  <Users className=\"h-5 w-5\" />\r\n                  <span>Client Transactions</span>\r\n                </Link>\r\n              </Button>\r\n            )}\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/portfolio\">\r\n                <Briefcase className=\"h-5 w-5\" />\r\n                <span>My Portfolio</span>\r\n              </Link>\r\n            </Button>\r\n            <Button variant=\"outline\" asChild className=\"h-auto py-4 flex-col gap-2\">\r\n              <Link href=\"/versotech_main/placement-agreements\">\r\n                <FileSignature className=\"h-5 w-5\" />\r\n                <span>Agreements</span>\r\n              </Link>\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Mode Capabilities Notice */}\r\n      <Card className={`${isDark ? 'bg-cyan-500/10 border-cyan-500/20' : 'bg-cyan-50 border-cyan-200'}`}>\r\n        <CardContent className=\"py-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"h-10 w-10 rounded-full bg-cyan-500 flex items-center justify-center\">\r\n              <Building2 className=\"h-5 w-5 text-white\" />\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <div className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n                Commercial Partner Capabilities\r\n              </div>\r\n              <div className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                {canExecuteForClients ? (\r\n                  <>You can invest directly <strong>(MODE 1)</strong> and execute on behalf of clients <strong>(MODE 2)</strong>.</>\r\n                ) : (\r\n                  <>You can invest directly <strong>(MODE 1)</strong>. Contact admin to enable client execution.</>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n","'use client'\n\nimport { useEffect, useState } from 'react'\nimport { usePersona } from '@/contexts/persona-context'\nimport { useTheme } from '@/components/theme-provider'\nimport { createClient } from '@/lib/supabase/client'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { InvestorDashboard } from './investor-dashboard'\nimport { IntroducerDashboard } from './introducer-dashboard'\nimport { PartnerDashboard } from './partner-dashboard'\nimport { LawyerDashboard } from './lawyer-dashboard'\nimport { ArrangerDashboard } from './arranger-dashboard'\nimport { CommercialPartnerDashboard } from './commercial-partner-dashboard'\nimport {\n  Building2,\n  Users,\n  UserPlus,\n  Briefcase,\n  Scale,\n  User,\n  TrendingUp,\n  FileText,\n  CheckSquare,\n  Loader2,\n  Wallet,\n  ArrowLeftRight\n} from 'lucide-react'\n\nconst PERSONA_ICONS: Record<string, React.ComponentType<{ className?: string }>> = {\n  staff: Building2,\n  investor: User,\n  arranger: Briefcase,\n  introducer: UserPlus,\n  partner: Users,\n  commercial_partner: Building2,\n  lawyer: Scale,\n}\n\nconst PERSONA_COLORS: Record<string, string> = {\n  staff: 'bg-blue-500',\n  investor: 'bg-green-500',\n  arranger: 'bg-purple-500',\n  introducer: 'bg-orange-500',\n  partner: 'bg-pink-500',\n  commercial_partner: 'bg-cyan-500',\n  lawyer: 'bg-indigo-500',\n}\n\n/**\n * Persona-aware dashboard for non-CEO users\n * Routes to persona-specific dashboards based on active persona type\n */\n// Check if a partner/introducer also has investments\nasync function checkUserHasInvestments(userId: string): Promise<{\n  hasInvestments: boolean\n  investorId: string | null\n  investmentCount: number\n}> {\n  try {\n    const supabase = createClient()\n\n    // Check if user is linked to an investor entity\n    const { data: investorLinks } = await supabase\n      .from('investor_users')\n      .select('investor_id')\n      .eq('user_id', userId)\n      .limit(1)\n\n    if (!investorLinks || investorLinks.length === 0) {\n      // No investor entity - check if they have subscriptions via deal_memberships\n      const { data: subscriptions } = await supabase\n        .from('subscriptions')\n        .select('id')\n        .or(`investor_id.in.(select investor_id from investor_users where user_id=${userId})`)\n        .limit(1)\n\n      return { hasInvestments: false, investorId: null, investmentCount: 0 }\n    }\n\n    const investorId = investorLinks[0].investor_id\n\n    // Count active subscriptions for this investor\n    const { data: subscriptions, count } = await supabase\n      .from('subscriptions')\n      .select('id', { count: 'exact', head: true })\n      .eq('investor_id', investorId)\n      .in('status', ['active', 'signed', 'funded', 'pending'])\n\n    return {\n      hasInvestments: (count || 0) > 0,\n      investorId,\n      investmentCount: count || 0\n    }\n  } catch (error) {\n    console.error('Error checking investments:', error)\n    return { hasInvestments: false, investorId: null, investmentCount: 0 }\n  }\n}\n\nexport function PersonaDashboard() {\n  const { activePersona, personas, isCEO } = usePersona()\n  const { theme } = useTheme()\n  const [userId, setUserId] = useState<string | null>(null)\n  const [loadingUser, setLoadingUser] = useState(true)\n  const [investmentInfo, setInvestmentInfo] = useState<{\n    hasInvestments: boolean\n    investorId: string | null\n    investmentCount: number\n  } | null>(null)\n  const [activeView, setActiveView] = useState<'partner' | 'investor'>('partner')\n\n  // Fetch the current user ID on mount\n  useEffect(() => {\n    async function fetchUser() {\n      const supabase = createClient()\n      const { data: { user } } = await supabase.auth.getUser()\n      setUserId(user?.id ?? null)\n      setLoadingUser(false)\n    }\n    fetchUser()\n  }, [])\n\n  // Check if partner/introducer has investments\n  useEffect(() => {\n    async function checkInvestments() {\n      if (!userId || !activePersona) return\n\n      // Only check for partners and introducers\n      if (activePersona.persona_type === 'partner' || activePersona.persona_type === 'introducer') {\n        const info = await checkUserHasInvestments(userId)\n        setInvestmentInfo(info)\n      }\n    }\n    checkInvestments()\n  }, [userId, activePersona])\n\n  // Use actual theme system (user-controlled via toggle in header)\n  const isDark = theme === 'staff-dark'\n\n  // Show loading state while fetching user\n  if (loadingUser || !activePersona) {\n    return (\n      <div className=\"p-8 text-center flex flex-col items-center gap-3\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-gray-400\" />\n        <p className=\"text-gray-500\">Loading dashboard...</p>\n      </div>\n    )\n  }\n\n  // Route investor personas to the investor-specific dashboard\n  if (activePersona.persona_type === 'investor' && userId) {\n    return (\n      <InvestorDashboard\n        investorId={activePersona.entity_id}\n        userId={userId}\n        persona={activePersona}\n      />\n    )\n  }\n\n  // Route introducer personas to the introducer-specific dashboard\n  // If introducer also has investments, show a tabbed view\n  if (activePersona.persona_type === 'introducer' && userId) {\n    // Introducer also has investments - show dual view\n    if (investmentInfo?.hasInvestments && investmentInfo.investorId) {\n      return (\n        <div className=\"space-y-5\">\n          {/* Refined Context Switcher */}\n          <div className={`\n            relative overflow-hidden rounded-xl\n            ${isDark\n              ? 'bg-zinc-900/80 border border-zinc-800'\n              : 'bg-gradient-to-br from-slate-50 via-white to-stone-50 border border-slate-200/80 shadow-sm'\n            }\n          `}>\n            {/* Subtle pattern overlay */}\n            <div className={`absolute inset-0 opacity-[0.015] pointer-events-none`}\n              style={{\n                backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23${isDark ? 'ffffff' : '000000'}' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\n              }}\n            />\n\n            <div className=\"relative px-5 py-4\">\n              <div className=\"flex items-center justify-between flex-wrap gap-4\">\n                {/* Left side - Context info */}\n                <div className=\"flex items-center gap-4\">\n                  <div className={`\n                    h-11 w-11 rounded-xl flex items-center justify-center\n                    ${isDark\n                      ? 'bg-zinc-800 ring-1 ring-zinc-700'\n                      : 'bg-white ring-1 ring-slate-200 shadow-sm'\n                    }\n                  `}>\n                    <ArrowLeftRight className={`h-5 w-5 ${isDark ? 'text-zinc-400' : 'text-slate-500'}`} />\n                  </div>\n                  <div>\n                    <p className={`text-sm font-semibold tracking-tight ${isDark ? 'text-zinc-100' : 'text-slate-800'}`}>\n                      Dual Role Access\n                    </p>\n                    <p className={`text-[13px] ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}>\n                      Introducer · {investmentInfo.investmentCount} investment{investmentInfo.investmentCount !== 1 ? 's' : ''}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Right side - Segment control */}\n                <div className={`\n                  inline-flex p-1 rounded-lg\n                  ${isDark\n                    ? 'bg-zinc-800/80 ring-1 ring-zinc-700/50'\n                    : 'bg-slate-100/80 ring-1 ring-slate-200/50'\n                  }\n                `}>\n                  <button\n                    onClick={() => setActiveView('partner')}\n                    className={`\n                      relative px-4 py-2 rounded-md text-sm font-medium transition-all duration-200\n                      flex items-center gap-2\n                      ${activeView === 'partner'\n                        ? isDark\n                          ? 'bg-zinc-700 text-white shadow-sm ring-1 ring-zinc-600'\n                          : 'bg-white text-slate-900 shadow-sm ring-1 ring-slate-200'\n                        : isDark\n                          ? 'text-zinc-400 hover:text-zinc-200'\n                          : 'text-slate-500 hover:text-slate-700'\n                      }\n                    `}\n                  >\n                    <UserPlus className=\"h-4 w-4\" />\n                    <span>Referrals</span>\n                  </button>\n                  <button\n                    onClick={() => setActiveView('investor')}\n                    className={`\n                      relative px-4 py-2 rounded-md text-sm font-medium transition-all duration-200\n                      flex items-center gap-2\n                      ${activeView === 'investor'\n                        ? isDark\n                          ? 'bg-zinc-700 text-white shadow-sm ring-1 ring-zinc-600'\n                          : 'bg-white text-slate-900 shadow-sm ring-1 ring-slate-200'\n                        : isDark\n                          ? 'text-zinc-400 hover:text-zinc-200'\n                          : 'text-slate-500 hover:text-slate-700'\n                      }\n                    `}\n                  >\n                    <Wallet className=\"h-4 w-4\" />\n                    <span>Portfolio</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Active Dashboard */}\n          {activeView === 'partner' ? (\n            <IntroducerDashboard\n              introducerId={activePersona.entity_id}\n              userId={userId}\n              persona={activePersona}\n            />\n          ) : (\n            <InvestorDashboard\n              investorId={investmentInfo.investorId}\n              userId={userId}\n              persona={{\n                ...activePersona,\n                persona_type: 'investor',\n                entity_id: investmentInfo.investorId,\n                entity_name: 'My Investments'\n              }}\n            />\n          )}\n        </div>\n      )\n    }\n\n    // Regular introducer view (no investments)\n    return (\n      <IntroducerDashboard\n        introducerId={activePersona.entity_id}\n        userId={userId}\n        persona={activePersona}\n      />\n    )\n  }\n\n  // Route partner personas to the partner-specific dashboard\n  // If partner also has investments, show a tabbed view\n  if (activePersona.persona_type === 'partner' && userId) {\n    // Partner also has investments - show dual view\n    if (investmentInfo?.hasInvestments && investmentInfo.investorId) {\n      return (\n        <div className=\"space-y-5\">\n          {/* Refined Context Switcher */}\n          <div className={`\n            relative overflow-hidden rounded-xl\n            ${isDark\n              ? 'bg-zinc-900/80 border border-zinc-800'\n              : 'bg-gradient-to-br from-slate-50 via-white to-stone-50 border border-slate-200/80 shadow-sm'\n            }\n          `}>\n            {/* Subtle pattern overlay */}\n            <div className={`absolute inset-0 opacity-[0.015] pointer-events-none`}\n              style={{\n                backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23${isDark ? 'ffffff' : '000000'}' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\n              }}\n            />\n\n            <div className=\"relative px-5 py-4\">\n              <div className=\"flex items-center justify-between flex-wrap gap-4\">\n                {/* Left side - Context info */}\n                <div className=\"flex items-center gap-4\">\n                  <div className={`\n                    h-11 w-11 rounded-xl flex items-center justify-center\n                    ${isDark\n                      ? 'bg-zinc-800 ring-1 ring-zinc-700'\n                      : 'bg-white ring-1 ring-slate-200 shadow-sm'\n                    }\n                  `}>\n                    <ArrowLeftRight className={`h-5 w-5 ${isDark ? 'text-zinc-400' : 'text-slate-500'}`} />\n                  </div>\n                  <div>\n                    <p className={`text-sm font-semibold tracking-tight ${isDark ? 'text-zinc-100' : 'text-slate-800'}`}>\n                      Dual Role Access\n                    </p>\n                    <p className={`text-[13px] ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}>\n                      Partner · {investmentInfo.investmentCount} investment{investmentInfo.investmentCount !== 1 ? 's' : ''}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Right side - Segment control */}\n                <div className={`\n                  inline-flex p-1 rounded-lg\n                  ${isDark\n                    ? 'bg-zinc-800/80 ring-1 ring-zinc-700/50'\n                    : 'bg-slate-100/80 ring-1 ring-slate-200/50'\n                  }\n                `}>\n                  <button\n                    onClick={() => setActiveView('partner')}\n                    className={`\n                      relative px-4 py-2 rounded-md text-sm font-medium transition-all duration-200\n                      flex items-center gap-2\n                      ${activeView === 'partner'\n                        ? isDark\n                          ? 'bg-zinc-700 text-white shadow-sm ring-1 ring-zinc-600'\n                          : 'bg-white text-slate-900 shadow-sm ring-1 ring-slate-200'\n                        : isDark\n                          ? 'text-zinc-400 hover:text-zinc-200'\n                          : 'text-slate-500 hover:text-slate-700'\n                      }\n                    `}\n                  >\n                    <Users className=\"h-4 w-4\" />\n                    <span>Referrals</span>\n                  </button>\n                  <button\n                    onClick={() => setActiveView('investor')}\n                    className={`\n                      relative px-4 py-2 rounded-md text-sm font-medium transition-all duration-200\n                      flex items-center gap-2\n                      ${activeView === 'investor'\n                        ? isDark\n                          ? 'bg-zinc-700 text-white shadow-sm ring-1 ring-zinc-600'\n                          : 'bg-white text-slate-900 shadow-sm ring-1 ring-slate-200'\n                        : isDark\n                          ? 'text-zinc-400 hover:text-zinc-200'\n                          : 'text-slate-500 hover:text-slate-700'\n                      }\n                    `}\n                  >\n                    <Wallet className=\"h-4 w-4\" />\n                    <span>Portfolio</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Active Dashboard */}\n          {activeView === 'partner' ? (\n            <PartnerDashboard\n              partnerId={activePersona.entity_id}\n              userId={userId}\n              persona={activePersona}\n            />\n          ) : (\n            <InvestorDashboard\n              investorId={investmentInfo.investorId}\n              userId={userId}\n              persona={{\n                ...activePersona,\n                persona_type: 'investor',\n                entity_id: investmentInfo.investorId,\n                entity_name: 'My Investments'\n              }}\n            />\n          )}\n        </div>\n      )\n    }\n\n    // Regular partner view (no investments)\n    return (\n      <PartnerDashboard\n        partnerId={activePersona.entity_id}\n        userId={userId}\n        persona={activePersona}\n      />\n    )\n  }\n\n  // Route lawyer personas to the lawyer-specific dashboard\n  if (activePersona.persona_type === 'lawyer' && userId) {\n    return (\n      <LawyerDashboard\n        lawyerId={activePersona.entity_id}\n        userId={userId}\n        persona={activePersona}\n      />\n    )\n  }\n\n  // Route arranger personas to the arranger-specific dashboard\n  if (activePersona.persona_type === 'arranger' && userId) {\n    return (\n      <ArrangerDashboard\n        arrangerId={activePersona.entity_id}\n        userId={userId}\n        persona={activePersona}\n      />\n    )\n  }\n\n  // Route commercial partner personas to the commercial partner-specific dashboard\n  if (activePersona.persona_type === 'commercial_partner' && userId) {\n    return (\n      <CommercialPartnerDashboard\n        commercialPartnerId={activePersona.entity_id}\n        userId={userId}\n        persona={activePersona}\n      />\n    )\n  }\n\n  const ActiveIcon = PERSONA_ICONS[activePersona.persona_type] || User\n\n  // Generic dashboard for other persona types (arranger, commercial_partner, lawyer, etc.)\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Welcome Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>\n            Welcome to VERSO\n          </h1>\n          <p className={`mt-1 ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\n            Unified Platform Dashboard\n          </p>\n        </div>\n\n        {/* Active Persona Badge */}\n        <div className={`flex items-center gap-3 px-4 py-2 rounded-lg ${isDark ? 'bg-white/5 border border-white/10' : 'bg-gray-50 border border-gray-100'}`}>\n          <div className={`h-10 w-10 rounded-full ${PERSONA_COLORS[activePersona.persona_type]} flex items-center justify-center`}>\n            <ActiveIcon className=\"h-5 w-5 text-white\" />\n          </div>\n          <div>\n            <div className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\n              {activePersona.entity_name}\n            </div>\n            <div className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\n              {activePersona.persona_type === 'staff'\n                ? (activePersona.role_in_entity === 'staff_admin' || activePersona.role_in_entity === 'ceo' ? 'CEO' : activePersona.role_in_entity?.toUpperCase())\n                : activePersona.persona_type.replace('_', ' ').toUpperCase()}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Persona Overview Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {personas.map((persona) => {\n          const Icon = PERSONA_ICONS[persona.persona_type] || User\n          const isActive = activePersona?.entity_id === persona.entity_id\n\n          return (\n            <Card\n              key={persona.entity_id}\n              className={`${isDark ? 'bg-white/5 border-white/10' : 'bg-white border-gray-200'} ${isActive ? 'ring-2 ring-blue-500' : ''}`}\n            >\n              <CardHeader className=\"flex flex-row items-center gap-4 pb-2\">\n                <div className={`h-12 w-12 rounded-full ${PERSONA_COLORS[persona.persona_type]} flex items-center justify-center`}>\n                  <Icon className=\"h-6 w-6 text-white\" />\n                </div>\n                <div className=\"flex-1\">\n                  <CardTitle className={`text-lg ${isDark ? 'text-white' : 'text-gray-900'}`}>\n                    {persona.entity_name}\n                  </CardTitle>\n                  <CardDescription className={isDark ? 'text-gray-400' : 'text-gray-500'}>\n                    {persona.persona_type === 'staff'\n                      ? (persona.role_in_entity === 'staff_admin' || persona.role_in_entity === 'ceo' ? 'CEO' : persona.role_in_entity)\n                      : persona.persona_type.replace('_', ' ')}\n                  </CardDescription>\n                </div>\n                {isActive && (\n                  <Badge variant=\"secondary\" className=\"bg-blue-500/20 text-blue-400\">\n                    Active\n                  </Badge>\n                )}\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex gap-2 flex-wrap\">\n                  {persona.can_sign && (\n                    <Badge variant=\"outline\" className={isDark ? 'border-white/20 text-gray-300' : ''}>\n                      Can Sign\n                    </Badge>\n                  )}\n                  {persona.can_execute_for_clients && (\n                    <Badge variant=\"outline\" className={isDark ? 'border-white/20 text-gray-300' : ''}>\n                      Can Execute\n                    </Badge>\n                  )}\n                  {persona.is_primary && (\n                    <Badge variant=\"outline\" className={isDark ? 'border-white/20 text-gray-300' : ''}>\n                      Primary\n                    </Badge>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          )\n        })}\n      </div>\n\n      {/* Quick Stats (placeholder for non-CEO users) */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card className={isDark ? 'bg-white/5 border-white/10' : 'bg-white border-gray-200'}>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\n              Pending Tasks\n            </CardTitle>\n            <CheckSquare className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>0</div>\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\n              No pending tasks\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className={isDark ? 'bg-white/5 border-white/10' : 'bg-white border-gray-200'}>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\n              Active Deals\n            </CardTitle>\n            <TrendingUp className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>-</div>\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\n              Data loading...\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className={isDark ? 'bg-white/5 border-white/10' : 'bg-white border-gray-200'}>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className={`text-sm font-medium ${isDark ? 'text-gray-400' : 'text-gray-500'}`}>\n              Documents\n            </CardTitle>\n            <FileText className={`h-4 w-4 ${isDark ? 'text-gray-500' : 'text-gray-400'}`} />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-900'}`}>-</div>\n            <p className={`text-xs ${isDark ? 'text-gray-500' : 'text-gray-500'}`}>\n              Data loading...\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* CEO Notice - shown for staff who might have CEO access but viewing persona dashboard */}\n      {isCEO && (\n        <Card className={`${isDark ? 'bg-blue-500/10 border-blue-500/20' : 'bg-blue-50 border-blue-200'}`}>\n          <CardContent className=\"py-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center\">\n                <Building2 className=\"h-5 w-5 text-white\" />\n              </div>\n              <div>\n                <div className={`font-medium ${isDark ? 'text-white' : 'text-gray-900'}`}>\n                  CEO Access Enabled\n                </div>\n                <div className={`text-sm ${isDark ? 'text-gray-400' : 'text-gray-600'}`}>\n                  You have access to KYC Review, Fees, Audit, and Admin sections.\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M8 3 4 7l4 4', key: '9rb6wj' }],\n  ['path', { d: 'M4 7h16', key: '6tx8e3' }],\n  ['path', { d: 'm16 21 4-4-4-4', key: 'siv7j2' }],\n  ['path', { d: 'M20 17H4', key: 'h6l3hr' }],\n];\n\n/**\n * @component @name ArrowLeftRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOCAzIDQgN2w0IDQiIC8+CiAgPHBhdGggZD0iTTQgN2gxNiIgLz4KICA8cGF0aCBkPSJtMTYgMjEgNC00LTQtNCIgLz4KICA8cGF0aCBkPSJNMjAgMTdINCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeftRight = createLucideIcon('arrow-left-right', __iconNode);\n\nexport default ArrowLeftRight;\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAsBO,SAAS,EAAa,eAAE,CAAa,iBAAE,CAAe,CAAqB,EAChF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,sBAAsB,CAAA,CAAC,YAAa,IAGrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,sBAAsB,CAAA,CAAC,YAAa,MAG3C,uESjCA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,ORJA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAIA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OAGA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QA+CA,SAAS,IACP,GAAM,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,IAGlB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAChB,yBACA,AANmB,eAAV,EAMA,6BAA+B,yCAGxC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,2BACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,aACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,aACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,mBAIxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yEACZ,CAAC,EAAG,EAAG,EAAE,CAAC,GAAG,CAAC,GACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAS,UAAU,oBAAb,SAIrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,0BAGxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,CAAC,EAAG,EAAG,EAAE,CAAC,GAAG,CAAC,GACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAS,UAAU,oBAAb,QAKzB,CAEA,SAAS,EAAiB,UAAE,CAAQ,CAAoC,EACtE,GAAM,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAmB,eAAV,EACT,EAAY,EAAS,KAAK,CAAC,EAAG,GAEpC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACjB,sDACA,EAAS,0BAA4B,iCAErC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,qCACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACtB,0BACA,EAAS,aAAe,2BACvB,uBACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EAC1B,UACA,EAAS,gBAAkB,2BAC1B,uEAIL,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,yBACpB,AAAqB,MAAX,MAAM,CACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAChB,0DACA,EACI,2CACA,8DACH,2FAIH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAU,GAAG,CAAC,AAAC,kBACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,CAAC,sCAAsC,EAAE,EAAQ,EAAE,CAAA,CAAE,CAC3D,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,0HACA,EACI,6BACA,6CAGN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACZ,wBACA,EAAS,aAAe,2BACtB,EAAQ,IAAI,GAChB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,UACA,EAAS,gBAAkB,4BAjGvC,AAkGc,EAlGF,EAAQ,IAAI,CAAG,EAAQ,IAAI,CAAC,OAAO,CAAC,KAAM,KAAO,UAC7D,EAiGgC,AAjGrB,EAAQ,QAAQ,EAAI,EAAQ,QAAQ,EAAI,SAClD,CAAA,EAAG,EAAU,GAAG,EAAE,EAAA,CAAU,OAkGrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,2BAnBnB,EAAQ,EAAE,QAyBzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,2EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACpC,eACA,EACI,2CACA,4DAEH,EAAS,MAAM,CAAC,WAA6B,IAApB,EAAS,MAAM,CAAS,GAAK,IAAI,cAE7D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,yCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,KAAK,eAAK,0BAElC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,2BAMpC,CAEA,SAAS,IACP,GAAM,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAmB,eAAV,EAEf,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACjB,sDACA,EAAS,0BAA4B,iCAErC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,qCACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACtB,0BACA,EAAS,aAAe,2BACvB,oBACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAC5B,UACA,EAAS,gBAAkB,2BAC1B,oEAIL,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,0BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,yCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACnB,oFACA,EACI,2CACA,kDACH,QAAQ,oBACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,iBAAiB,4BAIvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,yCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACnB,oFACA,EACI,2CACA,kDACH,QAAQ,oBACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,iBAAiB,gCAIvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,qCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACnB,oFACA,EACI,2CACA,kDACH,QAAQ,oBACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,iBAAiB,kCAIzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,iCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACnB,oFACA,EACI,2CACA,kDACH,QAAQ,oBACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,iBAAiB,qCAOtD,CAEA,SAAS,IACP,GAAM,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAS,AAAU,iBAEnB,EAAa,CACjB,CACE,GAAI,OACJ,MAAO,aACP,YAAa,sCACb,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,WAC7B,EACA,CACE,GAAI,cACJ,MAAO,cACP,YAAa,2CACb,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,WAC1B,EACA,CACE,GAAI,MACJ,MAAO,uBACP,YAAa,qCACb,KAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,WAC1B,EACD,CAED,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACpB,0CACA,EAAS,0BAA4B,yCAErC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAChB,mEACA,EAAS,yBAA2B,oCAEpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,cAEvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACZ,qDACA,EAAS,gBAAkB,2BAC1B,wBAGH,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACf,yBACA,EAAS,aAAe,2BACvB,8BAGH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,UACA,EAAS,gBAAkB,2BAC1B,2IAMP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAEH,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,6CACA,EACI,6BACA,gDAGN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAChB,kEACA,EACI,yBACA,oCAEH,EAAU,IAAI,GAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACb,6BACA,EAAS,aAAe,2BACtB,EAAU,KAAK,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACZ,eACA,EAAS,gBAAkB,2BACzB,EAAU,WAAW,KAvBpB,EAAU,EAAE,KA4BvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,wBAAwB,UAAU,4BAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,UAAU,4BAAmB,0BAIjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,wBAAwB,UAAU,4BAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,KAAK,KAAK,UAAU,4BAAmB,gCAQ7E,CAEO,SAAS,EAAkB,YAAE,CAAU,QAAE,CAAM,SAAE,CAAO,CAA0B,EACvF,GAAM,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAmB,eAAV,EACT,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA+B,MACzD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAQrD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GAAM,SAAW,CAAC,EAAK,OAAO,CAAC,iBAAiB,EAAE,AACpD,GAAkB,EAEtB,EAAG,CAAC,GAAM,QAAQ,EAGlB,IAAM,EAAsB,UAC1B,GAAI,CAKF,GAAI,CAAC,CAJY,MAAM,MAAM,iCAAkC,CAC7D,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,CAChD,EAAA,EACc,EAAE,CACd,CADgB,KACN,AAAJ,MAAU,gCAGd,GAAM,SAAS,AACjB,EAAQ,CACN,GAAG,CAAI,CACP,QAAS,CAAE,GAAG,EAAK,OAAO,CAAE,mBAAmB,CAAK,CACtD,EAEJ,QAAU,CACR,GAAkB,EACpB,CACF,EA6LA,GA3LA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,eAAe,IACb,GAAW,GACX,EAAS,MAET,GAAI,CACF,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IACvB,EAAc,CAAC,EAAW,CAG1B,CACJ,EACA,EACA,EACA,EACA,EACA,EACD,CAAG,MAAM,QAAQ,GAAG,CAAC,CAEpB,EACG,IAAI,CAAC,YACL,MAAM,CAAC,kDACP,EAAE,CAAC,KAAM,GACT,MAAM,GAGT,EACG,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;;;YAOT,CAAC,EACA,EAAE,CAAC,4BAA6B,GAChC,EAAE,CAAC,uBAAwB,UAG9B,EACG,IAAI,CAAC,SACL,MAAM,CAAC,CAAC;;;;;;;;;;;;;;;;YAgBT,CAAC,EACA,EAAE,CAAC,2BAA4B,GAC/B,EAAE,CAAC,SAAU,QACb,KAAK,CAAC,WAAY,CAAE,WAAW,EAAM,YAAY,CAAM,GACvD,KAAK,CAAC,GAGT,EACG,IAAI,CAAC,SACL,MAAM,CAAC,gDAAiD,CAAE,MAAO,OAAQ,GACzE,GAAG,CAAC,SAAU,KAAM,aACpB,GAAG,CAAC,SAAU,KAAM,UACpB,EAAE,CAAC,CAAC,iBAAiB,EAAE,EAAO,uBAAuB,EAAE,EAAY,IAAI,CAAC,KAAK,CAAC,CAAC,EAC/E,KAAK,CAAC,SAAU,CAAE,WAAW,EAAM,YAAY,CAAM,GACrD,KAAK,CAAC,IAGT,EACG,IAAI,CAAC,wBACL,MAAM,CAAC,CAAC;;;;;;;YAOT,CAAC,EACA,EAAE,CAAC,cAAe,GAClB,KAAK,CAAC,cAAe,CAAE,WAAW,CAAM,GACxC,KAAK,CAAC,IAGT,EACG,IAAI,CAAC,aACL,MAAM,CAAC,MACP,EAAE,CAAC,cAAe,GAClB,KAAK,CAAC,GACV,EAGK,EAAyE,CAC7E,cAAe,CAAE,MAAO,qBAAsB,cAAe,MAAO,EACpE,cAAe,CAAE,MAAO,aAAc,cAAe,UAAW,EAChE,iBAAkB,CAAE,MAAO,uBAAwB,cAAe,YAAa,EAC/E,uBAAwB,CAAE,MAAO,yBAA0B,cAAe,MAAO,EACjF,kBAAmB,CAAE,MAAO,mBAAoB,cAAe,UAAW,EAC1E,qBAAsB,CAAE,MAAO,sBAAuB,cAAe,MAAO,CAC9E,EAGM,EAAsC,CAAC,EAAY,IAAI,EAAI,EAAA,AAAE,EAAE,GAAG,CAAE,AAAD,IACvE,IAAM,EAAU,CAAY,CAAC,EAAM,UAAU,CAAC,EAAI,CAAE,MAAO,EAAM,UAAU,CAAE,cAAe,MAAO,EAC7F,EAAW,EAAM,KAAK,EAAE,MAAQ,OAChC,EAAU,EAAM,OAAO,EAAE,YAAc,EAAM,OAAO,EAAE,kBAE5D,MAAO,CACL,GAAI,EAAM,EAAE,CACZ,MAAO,EAAQ,KAAK,CACpB,YAAa,EAAS,CAAA,EAAG,EAAS,IAAI,EAAE,EAAO,cAAc,GAAA,CAAI,CAAG,EACpE,cAAe,EAAQ,aAAa,CACpC,WAAY,EAAM,WAAW,CAC7B,WAAY,SACZ,YAAa,IACf,CACF,GAGM,EAAwC,CAAE,KAAM,EAAG,OAAQ,EAAG,IAAK,CAAE,EACrE,EAAc,AAAC,GAAS,IAAI,EAAI,EAAA,AAAE,EAAE,IAAI,CAAC,CAAC,EAAG,KACjD,IAAM,EAAK,CAAa,CAAC,EAAE,QAAQ,CAAC,EAAI,GAClC,EAAK,CAAa,CAAC,EAAE,QAAQ,CAAC,EAAI,UACxC,AAAI,IAAO,EAAW,EAAP,AAAY,EACvB,AAAC,EAAE,MAAM,EAAK,EAAD,AAAG,MAAM,CACrB,CADuB,CACrB,MAAM,CACR,CADU,CACR,MAAM,CACN,CADQ,GACJ,KAAK,EAAE,MAAM,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,MAAM,EAAE,OAAO,GAD1C,CAAC,EADD,EADa,CAIrC,GAGM,EAAiB,CAAC,EAAS,IAAI,EAAI,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,IAUhD,IAAM,EAPsB,AAOD,CATL,EAAK,mBAAmB,EAAI,EAAA,AAAE,EAGjD,MAAM,CAAC,AAAC,GAA0B,cAAd,EAAG,MAAM,EAC7B,IAAI,CAAC,CAAC,EAAQ,KACb,IAAM,EAAQ,EAAE,YAAY,CAAG,IAAI,KAAK,EAAE,YAAY,EAAE,OAAO,GAAK,EAEpE,MAAO,CADO,EAAE,YAAY,CAAG,IAAI,KAAK,EAAE,YAAY,EAAE,OAAO,IAAK,EACrD,CACjB,EAC4C,CAAC,EAAE,AAFxB,EAE4B,KAErD,MAAO,AAJ+B,CAKpC,GAAG,CAAI,CACP,cAAe,EAAqB,CAClC,GAAI,EAAmB,EAAE,CACzB,qBAAsB,EAAmB,oBAAoB,CAC7D,iBAAkB,EAAmB,gBAAgB,CACrD,eAAgB,EAAmB,cACrC,AADmD,EAC/C,KACJ,yBAAqB,CACvB,CACF,GAEA,EAAQ,CACN,EALiC,MAKxB,EAAW,IAAI,CAAG,CACzB,YAAa,EAAW,IAAI,CAAC,IANuC,QAM3B,CACzC,UAAW,EAAW,IAAI,CAAC,UAAU,CACrC,kBAAmB,EAAW,IAAI,CAAC,oBAAoB,GAAI,CAC7D,EAAI,KACJ,SAAW,EAAY,IAAI,EAAI,EAAE,CACjC,cAAe,EACf,MAAO,EACP,WAAY,EAAS,KAAK,EAAI,EAAY,MAAM,gBAChD,EACA,iBAAkB,CAAC,EAAa,IAAI,EAAE,SAAU,CAAC,CAAI,GAAK,CAAC,EAAY,IAAI,EAAE,SAAU,CAAC,CAAI,CAC9F,EACF,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,2CAA4C,GAC1D,EAAS,gCACX,QAAU,CACR,EAAW,GACb,CACF,CAEI,GAAc,GAChB,GAEJ,EAH4B,AAGzB,CAAC,EAAY,EAAO,EAEnB,EACF,MAAO,CAAA,AADI,EACJ,EAAA,GAAA,EAAC,EAAA,CAAA,GAGV,GAAI,GAAS,CAAC,EACZ,IADkB,EAEhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAgB,GAAS,6BACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,UAAU,OAAO,QAAS,IAAM,OAAO,QAAQ,CAAC,MAAM,YAAI,aAO1F,IAAM,EAAc,GAAS,aAAe,EAAK,OAAO,EAAE,aAAe,WACnE,EAAY,CAAC,GAAe,UAAA,CAAU,CAAE,KAAK,CAAC,IAAI,CAAC,EAAE,EAAI,WAEzD,EAAe,CACnB,CACE,MAAO,qBACP,MAAO,EAAK,aAAa,CAAC,MAAM,CAChC,OAAQ,iBACV,EACA,CACE,MAAO,oBACP,MAAO,EAAK,UAAU,CACtB,OAAQ,EAAK,UAAU,CAAG,kBAAoB,eAChD,EACA,CACE,MAAO,kBACP,MAAO,EAAK,QAAQ,CAAC,MAAM,CAC3B,OAAQ,qBACV,EACD,CAED,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CACd,KAAM,EACN,SAnQW,CAmQD,wGACV,WAAY,IAId,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACpB,iDACA,EAAS,0BAA4B,yCAGrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAChB,2FACA,EACI,6DACA,2EAEH,EAAK,OAAO,EAAE,UACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CACJ,IAAK,EAAK,OAAO,CAAC,SAAS,CAC3B,IAAK,EACL,MAAO,GACP,OAAQ,GACR,UAAU,6BACV,QAAQ,CAAA,CAAA,IAER,EAAQ,eAAe,CACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CACJ,IAAK,EAAQ,eAAe,CAC5B,IAAK,EACL,MAAO,GACP,OAAQ,GACR,UAAU,6BACV,QAAQ,CAAA,CAAA,IAGV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAQ,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACrB,UACA,EAAS,gBAAkB,sBAIjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,oDACA,EAAS,gBAAkB,2BAC1B,oBAGH,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACb,yBACA,EAAS,aAAe,4BACvB,YACS,KAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,UACA,EAAS,gBAAkB,2BAC1B,iEAQT,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yEACZ,EAAa,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,mCACA,EACI,6BACA,gDAGN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,oDACA,EAAS,gBAAkB,2BAE1B,EAAK,KAAK,GAEb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,8BACA,EAAS,aAAe,2BACtB,EAAK,KAAK,GACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,eACA,EAAS,gBAAkB,2BACzB,EAAK,MAAM,KArBV,EAAK,KAAK,KA0BrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAChB,wDACA,EAAS,gBAAkB,4BAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACpC,eACA,EACI,2CACA,4DAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,iBAAiB,oBAErC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACpC,eACA,EACI,2CACA,4DAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iBAAiB,4BAExC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACpC,eACA,EACI,2CACA,4DAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,iBAAiB,+BAIvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,gCAAgC,UAAU,4BACnD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,UAAU,6BAAmB,gBAE7C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,sBAG5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,wBAAwB,UAAU,4BAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,QAAQ,UAAU,UAAU,6BAAmB,uBAE/D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,4BAMjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAChB,mCACA,EACI,6BACA,gDAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,oDACA,EAAS,gBAAkB,2BAC1B,oBAGH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,8BACA,EAAS,aAAe,2BAEvB,IAAI,OAAO,kBAAkB,CAAC,QAAS,CAAE,MAAO,QAAS,IAAK,UAAW,KAAM,SAAU,KAE5F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,SACrB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACZ,UACA,EAAS,gBAAkB,2BAC1B,uEAGH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,wBACL,UAAU,mGACX,uBAEC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,uBAOhC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,oBAAoB,CAAA,CAAC,MAAO,EAAK,aAAa,GAG/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,oBAAoB,CAAA,CACnB,MAAO,EAAK,KAAK,CACjB,WAAY,EAAK,UAAU,CAC3B,eAAgB,EAAK,cAAc,GAIpC,EAAK,gBAAgB,CACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAiB,SAAU,EAAK,QAAQ,GACzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,MAGH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,GAGF,EAAK,gBAAgB,EAAI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,KAGjC,CC9zBA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAmBA,EAAA,EAAA,CAAA,CAAA,QAGA,EAAA,EAAA,CAAA,CAAA,QAiFO,SAAS,EAAoB,cAAE,CAAY,QAAE,CAAM,SAAE,CAAO,CAA4B,EAC7F,GAAM,CAAE,OAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEpB,EAAmB,eAAV,EAET,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA2B,MAC3D,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAoC,MACpE,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,MACnE,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,MACrE,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,EAAE,EACjF,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,OAAwB,GAqKlE,GAnKA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACR,AA+JA,eA/Je,EACb,GAAI,CACF,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAGvB,CAAE,KAAM,CAAa,CAAE,CAAG,MAAM,EACnC,IAAI,CAAC,iBACL,MAAM,CAAC,qEACP,EAAE,CAAC,gBAAiB,GACpB,KAAK,CAAC,gBAAiB,CAAE,WAAW,CAAM,GAEvC,EAAY,GAAiB,EAAE,CAG/B,EAAS,EAAU,MAAM,CAAC,IAC9B,GAAI,CAAC,GAAW,KAAM,OAAO,EAC7B,GAAI,CAAC,EAAE,aAAa,CAAE,OAAO,EAE7B,IAAM,EAAY,IAAI,KAAK,EAAE,aAAa,EACpC,EAAW,IAAI,KAAK,EAAU,IAAI,EAGxC,GAFA,EAAS,QAAQ,CAAC,EAAG,EAAG,EAAG,GAEvB,EAAY,EAAU,MAAO,GAEjC,GAAI,EAAU,EAAE,CAAE,CAChB,IAAM,EAAS,IAAI,KAAK,EAAU,EAAE,EAEpC,GADA,EAAO,QAAQ,CAAC,GAAI,GAAI,GAAI,KACxB,EAAY,EAAQ,OAAO,CACjC,CAEA,OAAO,CACT,GAGM,CAAE,KAAM,CAAW,CAAE,CAAG,MAAM,EACjC,IAAI,CAAC,0BACL,MAAM,CAAC,2DACP,EAAE,CAAC,gBAAiB,GAKjB,EAAQ,CAHG,GAAe,EAAA,AAAE,EAGX,MAAM,CAAC,IAC5B,GAAI,CAAC,GAAW,KAAM,OAAO,EAC7B,GAAI,CAAC,EAAE,UAAU,CAAE,OAAO,EAE1B,IAAM,EAAW,IAAI,KAAK,EAAE,UAAU,EAChC,EAAW,IAAI,KAAK,EAAU,IAAI,EAGxC,GAFA,EAAS,QAAQ,CAAC,EAAG,EAAG,EAAG,GAEvB,EAAW,EAAU,OAAO,EAEhC,GAAI,EAAU,EAAE,CAAE,CAChB,IAAM,EAAS,IAAI,KAAK,EAAU,EAAE,EAEpC,GADA,EAAO,QAAQ,CAAC,GAAI,GAAI,GAAI,KACxB,EAAW,EAAQ,OAAO,CAChC,CAEA,OAAO,CACT,GAEM,EAAiB,IAAI,IACzB,EACG,MAAM,CAAC,GAAK,EAAE,eAAe,EAC7B,GAAG,CAAC,GAAK,EAAE,eAAe,GAGzB,EAAe,EAAO,GAAG,CAAC,IAAK,oBAAC,CACpC,GAAG,CAAC,CACJ,aAAA,EAxImB,AAwIJ,EAAoB,EAAE,EAxIG,IAwIG,CAxID,EAwIG,EAAe,GAAG,CAAC,EAAE,EAAE,CAxIJ,CAClE,EAAO,AAhBf,SAAS,AAAyB,CAAqB,EACrD,OAAQ,GACN,IAAK,YACH,MAAO,QACT,KAAK,SACH,MAAO,UACT,KAAK,OACL,IAAK,WACH,MAAO,QACT,KAAK,IAEH,MAAO,YACX,CACF,EAGwC,GACtC,AAAe,cAAX,GAA0B,EACrB,SAEF,EAoID,CAAC,CAvIsC,EAyIjC,EAAa,EAAa,MAAM,CAAC,GAAyB,eAApB,EAAE,aAAa,EAAmB,MAAM,CAC9E,EAAW,EAAa,MAAM,CAAC,GAAK,AAAoB,eAAlB,aAAa,EAAiB,MAAM,CAC1E,EAAS,EAAa,MAAM,CAAC,GAAyB,WAApB,EAAE,aAAa,EAAe,MAAM,CACtE,EAAS,EAAa,MAAM,CAAC,GAAyB,WAApB,EAAE,aAAa,EAAe,MAAM,CACtE,EAAS,EAAa,MAAM,CAAC,GAAyB,WAApB,EAAE,aAAa,EAAe,MAAM,CAEtE,EAAc,EACjB,MAAM,CAAC,GAAkB,SAAb,EAAE,MAAM,EACpB,MAAM,CAAC,CAAC,EAAK,IAAM,GAAO,EAAE,CAAH,aAAiB,GAAI,CAAC,CAAG,GAC/C,EAAc,EACjB,MAAM,CAAC,GAAK,CAAC,UAAW,oBAAqB,oBAAqB,WAAW,CAAC,QAAQ,CAAC,EAAE,MAAM,GAC/F,MAAM,CAAC,CAAC,EAAK,IAAM,GAAO,EAAE,CAAH,aAAiB,GAAI,CAAC,CAAG,GAErD,EAAW,CACT,mBAAoB,EAAO,MAAM,CACjC,wBAAyB,EACzB,sBAAuB,EACvB,oBAAqB,EACrB,oBAAqB,EACrB,oBAAqB,EACrB,sBAAuB,EACvB,kBAAmB,EACnB,eAAgB,EAAO,MAAM,CAAG,EAAK,EAAS,EAAO,MAAM,CAAI,IAAM,CACvE,GAGA,IAAM,EAAM,IAAI,KACV,EAAmB,IAAI,KAAK,EAAI,WAAW,GAAI,EAAI,QAAQ,GAAI,GAC/D,EAAmB,IAAI,KAAK,EAAI,WAAW,GAAI,EAAI,QAAQ,GAAK,EAAG,GAEnE,EAAyB,EAAO,MAAM,CAAC,GAC3C,EAAE,aAAa,EAAI,IAAI,KAAK,EAAE,aAAa,GAAK,GAChD,MAAM,CAEF,EAAyB,EAAU,MAAM,CAAC,GAC9C,EAAE,aAAa,EACf,IAAI,KAAK,EAAE,aAAa,GAAK,GAC7B,IAAI,KAAK,EAAE,aAAa,EAAI,GAC5B,MAAM,CAEF,EAAqB,EAAyB,EAChD,KAAK,KAAK,CAAE,CAAC,EAAyB,CAAA,CAAsB,CAAI,EAA0B,KAC7D,KAA7B,CAAmC,EAAV,EAEvB,EAAwB,EAAS,EACnC,KAAK,KAAK,CAAC,EAAc,GACzB,EAEJ,EAAe,wBACb,yBACA,qBACA,wBACA,CACF,GAGA,IAAM,EAAqC,EAAa,KAAK,CAAC,EAAG,GAAG,GAAG,CAAE,AAAD,IAAiB,CACvF,GADsF,AAClF,EAAM,EAAE,CACZ,eAAgB,EAAM,cAAc,CACpC,OAAQ,EAAM,aAAa,CAC3B,cAAe,EAAM,aAAa,CAClC,KAAM,MAAM,OAAO,CAAC,EAAM,IAAI,EAAI,EAAM,IAAI,CAAC,EAAE,EAAI,KAAO,EAAM,IAAI,CACtE,CAAC,EACD,EAAuB,GAGvB,GAAM,CAAE,KAAM,CAAU,CAAE,CAAG,MAAM,EAChC,IAAI,CAAC,yBACL,MAAM,CAAC,gFACP,EAAE,CAAC,gBAAiB,GACpB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE1C,GAAI,EAAY,CACd,IAAM,EAAS,EAAW,IAAI,CAAC,GAAkB,WAAb,EAAE,MAAM,EACtC,EAAU,EAAW,IAAI,CAAC,GAC9B,CAAC,mBAAoB,wBAAyB,+BAA+B,CAAC,QAAQ,CAAC,EAAE,MAAM,GAEjG,EAAmB,GAAU,MAC7B,EAAoB,GAAW,KACjC,CACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,kCAAmC,EACnD,QAAU,CACR,GAAW,EACb,CACF,GAGF,EAAG,CAAC,EAAc,EAAU,EAExB,EACF,MACE,CAAA,AAFS,EAET,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,uCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,4BAKnC,IAAM,EAAuC,CAC3C,WAAY,+BACZ,SAAU,mCACV,OAAQ,iCACR,OAAQ,iCACR,OAAQ,8BACV,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,yBAGhF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,KAAK,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAC/D,EAAQ,WAAW,MAGvB,EAAQ,QAAQ,EACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAQ,QAAQ,CACrB,IAAK,EAAQ,WAAW,CACxB,UAAU,kCAMf,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,kBAAoB,cAAA,CAAe,UAClF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,6BAErB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,UACvC,qBAA5B,EAAiB,MAAM,CACpB,mCAC4B,0BAA5B,EAAiB,MAAM,EAA4D,aAA5B,EAAiB,MAAM,CAC9E,mCACA,sCAEN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UACtC,qBAA5B,EAAiB,MAAM,CACpB,+CAC4B,0BAA5B,EAAiB,MAAM,EAA4D,aAA5B,EAAiB,MAAM,CAC9E,6CACA,0DAIV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,WACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,sCAAsC,EAAE,EAAiB,EAAE,CAAA,CAAE,WAC3C,qBAA5B,EAAiB,MAAM,CAA0B,SAClB,AAA5B,4BAAiB,MAAM,EAA4D,aAA5B,EAAiB,MAAM,CAAkB,OAChG,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,6BASjC,CAAC,GAAmB,CAAC,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,kBAAkB,EAAE,EAAS,gBAAkB,YAAA,CAAa,UAC5E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,2BAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,wBAGxE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,yGAUjF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,YACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,0BAGnF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CACd,MAAO,EACP,SAAU,EACV,QAAS,EAAS,OAAS,eAG9B,GAAW,MACV,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,QACR,KAAK,KACL,QAAS,IAAM,OAAa,GAC5B,UAAW,EAAS,iCAAmC,aAEvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,iBAAiB,qBAKnC,GAAW,MACV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,aAAa,EAAE,SAAS,aACpC,EAAU,EAAE,CACT,AAFmD,CAElD,gBAFmE,EAEjD,EAAE,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAU,IAAI,CAAE,gBAAgB,IAAI,EAAE,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAU,EAAE,CAAE,gBAAA,CAAiB,CACxG,CAAC,kBAAkB,EAAE,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAU,IAAI,CAAE,gBAAgB,QAAQ,CAAC,GAI5E,CAAC,GAAW,MACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,aAAa,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,SAQhF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,wBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE3E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,GAAS,oBAAsB,IAElC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,cAC/B,GAAS,CADwC,iBAAiB,OAC9B,EAAE,uBAK7C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,WAC5E,GAAS,eAAe,QAAQ,IAAM,EAAE,OAE3C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,cAC/B,GAAS,CADwC,iBAAiB,GAClC,EAAE,mBAKzC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,sBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,iCAAiC,CAAC,UAChD,CAAA,EAAA,EAAA,cAAc,AAAd,EAAe,GAAS,uBAAyB,KAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,OAMzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,uBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE3E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,iCAAiC,CAAC,UAChD,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAS,mBAAqB,KAEhD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,oBAQ1E,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,wBAAwB,EAAE,EAAS,aAAe,GAAA,CAAI,WAC3E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,YAAY,2BAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,4CAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,sBAAsB,EAAE,EAAS,6BAA+B,cAAA,CAAe,WAC9F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,qCAAqC,EAAE,EAAS,gBAAkB,wBAAA,CAAyB,WACzG,EAAY,kBAAkB,EAAI,EACjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,2BAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,yBACxB,gBAGJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,EAAY,sBAAsB,GAErC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,aAAa,EAAE,EAAS,gBAAkB,wBAAA,CAAyB,WAChF,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,EAAY,kBAAkB,EAAI,EAAI,iBAAmB,yBACvE,EAAY,kBAAkB,EAAI,EAAI,IAAM,GAAI,EAAY,kBAAkB,CAAC,OAEjF,IAAI,kBAAgB,EAAY,sBAAsB,CAAC,UAI5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,sBAAsB,EAAE,EAAS,6BAA+B,cAAA,CAAe,WAC9F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,qCAAqC,EAAE,EAAS,gBAAkB,wBAAA,CAAyB,WAC1G,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,qBAGhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,WAC5E,GAAS,eAAe,QAAQ,IAAM,EAAE,OAE3C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,aAAa,EAAE,EAAS,gBAAkB,wBAAA,CAAyB,WAC/E,GAAS,qBAAuB,EAAE,OAAK,GAAS,oBAAsB,EAAE,gBAI7E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,sBAAsB,EAAE,EAAS,6BAA+B,cAAA,CAAe,WAC9F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,qCAAqC,EAAE,EAAS,gBAAkB,wBAAA,CAAyB,WAC1G,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,oBAGhC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAY,qBAAqB,IAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,aAAa,EAAE,EAAS,gBAAkB,wBAAA,CAAyB,UAAE,2CAU9F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,uDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,yBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,6BAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAA,CAAA,WACvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,0CAAgC,WAEzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,yBAI5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACsB,IAA/B,EAAoB,MAAM,CACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAW,CAAC,uBAAuB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,GAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,4BAKzE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAoB,GAAG,CAAC,AAAC,GACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAC,iDAAiD,EAC3D,EAAS,aAAe,aAAA,CACxB,WAEF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,UACnE,EAAM,cAAc,GAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAClE,EAAM,IAAI,EAAE,MAAQ,oBAGzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAY,CAAC,EAAM,MAAM,CAAC,EAAI,wCAC7C,EAAM,MAAM,KAdV,EAAM,EAAE,UAwBzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,kBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,qCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACT,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,2BACxB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,wBAK7E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oBACvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,sBAAsB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC7E,EAAgB,sBAAsB,CACnC,CAAA,EAAG,CAAC,EAAgB,sBAAsB,CAAG,GAAA,CAAG,CAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CAC/D,WAGR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oBACvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,sBAAsB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC7E,EAAgB,cAAc,CAC3B,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAgB,cAAc,EACzC,WAGR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,YACvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,sBAAsB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC7E,EAAgB,WAAW,CACxB,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAgB,WAAW,EACtC,iBAGR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,WACvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,sBAAsB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC7E,EAAgB,WAAW,CACxB,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAgB,WAAW,EACtC,cAKV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,KAAK,KAAK,OAAO,CAAA,CAAA,EAAC,UAAU,kBACpD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,sCAAsC,EAAE,EAAgB,EAAE,CAAA,CAAE,WACvE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,iBAAiB,yBAMhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAW,CAAC,uBAAuB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,GAChG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,wBAGvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,0EAU5F,CEtqBA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QDDA,GAAA,EAAA,CAAA,CAAA,QAEA,GAAA,EAAA,CAAA,CAAA,QA2BA,IAAM,GAA0C,CAC9C,aAAc,mBACd,WAAY,iBACZ,YAAa,kBACb,KAAM,UACR,EAEM,GAAgB,CAAC,eAAgB,aAAc,cAAc,CAE7D,GAAwC,CAC5C,MAAO,QACP,KAAM,mBACN,kBAAmB,oBACnB,SAAU,WACV,SAAU,UACZ,EAEM,GAAwC,CAC5C,SAAU,qDACV,SAAU,+CACV,KAAM,qDACN,kBAAmB,qDACnB,MAAO,oDACT,EAEA,SAAS,GAAqB,CAAwB,EACpD,GAAI,CAAC,EAAW,MAAO,IACvB,GAA2B,OAAvB,EAAU,QAAQ,OAAoC,IAAvB,EAAU,QAAQ,CAAgB,CACnE,IAAM,EAAU,OAAO,EAAU,QAAQ,EACzC,GAAI,CAAC,OAAO,KAAK,CAAC,GAChB,MAAO,CADmB,AACnB,EAAG,EAAU,IAAI,CAAC,CAAC,AAE9B,CACA,GAA8B,OAA1B,EAAU,WAAW,EAAuC,SAA1B,EAAU,WAAW,CAAgB,CACzE,IAAM,EAAa,OAAO,EAAU,WAAW,EAC/C,GAAI,CAAC,OAAO,KAAK,CAAC,GAChB,MAAO,CAAA,EAAA,CADsB,CACtB,cAAA,AAAc,EAAC,EAE1B,CACA,MAAO,GACT,CAEO,SAAS,KACd,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,EAAE,EAChD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAEtE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACR,AAoBA,eApBe,EACb,GAAI,CACF,EAAW,IACX,EAAS,MACT,IAAM,EAAW,MAAM,MAAM,+BACvB,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAK,KAAK,EAAI,6BAGhC,EAAY,EAAK,UAAU,EAAI,EAAE,CACnC,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,6BAA8B,GAC5C,EAAS,aAAe,MAAQ,EAAI,OAAO,CAAG,4BAChD,QAAU,CACR,GAAW,EACb,CACF,GAGF,EAAG,EAAE,EAQL,IAAM,EAAiB,MAAO,EAAgB,KAC5C,IAAM,EAAoB,WAAX,EACX,OAAO,sCACP,KAEJ,GAAe,WAAX,CAAuB,EAAC,GAE5B,EAAmB,GAFiB,AAGpC,GAAI,OACF,IAAM,EAAW,MAAM,MAAM,CAAC,eAAe,EAAE,EAAO,CAAC,EAAE,EAAA,CAAQ,CAAE,CACjE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAiB,WAAX,EAAsB,KAAK,SAAS,CAAC,QAAE,CAAO,QAAK,CAC3D,GAEM,EAAO,MAAM,EAAS,IAAI,GAChC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAK,KAAK,EAAI,CAAC,UAAU,EAAE,EAAO,UAAU,CAAC,EAvBzB,EA0BF,WAAX,EAAsB,WAAa,WAzB9D,EAAY,GACV,EAAK,GAAG,CAAC,GAAS,EAAK,EAAE,GAwBR,EAxBa,AAAS,CAAE,GAAG,CAAI,QAAE,CAAO,EAAI,IAyB7D,GAAA,KAAK,CAAC,OAAO,CAAY,WAAX,EAAsB,qBAAuB,qBAC7D,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,CAAC,aAAa,EAAE,EAAO,CAAC,CAAC,CAAE,GACzC,GAAA,KAAK,CAAC,KAAK,CAAC,aAAe,MAAQ,EAAI,OAAO,CAAG,CAAC,UAAU,EAAE,EAAO,UAAU,CAAC,CAClF,QAAU,CACR,EAAmB,KACrB,EACF,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,YAAY,gBAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,kDAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACT,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,8BAA8B,2BAGjD,EACF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCAAwB,IACrC,AAAoB,MAAX,MAAM,CACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,2BACH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAe,mEAK9B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAS,GAAG,CAAC,AAAC,IACb,IAAM,EAAkB,CAAC,EAAK,cAAc,EAAI,EAAA,AAAE,EAAE,MAAM,CACxD,GAAa,CAAC,GAAc,QAAQ,CAAC,EAAU,IAAI,GAE/C,EAAa,EAAK,MAAM,EAAI,QAC5B,EAAc,EAAa,CAAC,EAAW,EAAI,EAC3C,EAAc,EAAa,CAAC,EAAW,EAAI,GAAc,KAAK,CAGpE,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAkB,UAAU,kCAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAK,IAAI,GACrC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,EAAK,IAAI,EAAE,KAAO,CAAC,MAAM,EAAE,EAAK,IAAI,CAAC,IAAI,CAAA,CAAE,CAAG,EAAK,WAAW,EAAI,yBAGvE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAS,EAAK,SAAS,CAAG,UAAY,qBAC1C,EAAK,SAAS,CAAG,SAAW,aAE/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,WACjC,UAKP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CACZ,GAAc,GAAG,CAAC,AAAC,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAe,UAAU,wCACxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAiC,EAAe,CAAC,EAAK,GACnE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BACV,GAAqB,EAAK,cAAc,CAAC,IAAI,CAAC,GAAa,EAAU,IAAI,GAAK,QAHzE,MASb,EAAgB,MAAM,CAAG,GACxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEACZ,EAAgB,GAAG,CAAC,GACnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAoB,QAAQ,oBAC/B,EAAe,CAAC,EAAU,IAAI,CAAC,EAAI,EAAU,IAAI,CAAC,IAAE,IACpD,GAAqB,KAFZ,EAAU,EAAE,KAQ7B,AA3C6B,SAAf,GA4Cb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,KACL,QAAS,IAAM,EAAe,EAAK,EAAE,CAAE,UACvC,SAAU,IAAoB,EAAK,EAAE,CACrC,UAAU,+CAET,IAAoB,EAAK,EAAE,CAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,yBAEnB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,iBAAiB,eAK/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,KACL,QAAQ,cACR,QAAS,IAAM,EAAe,EAAK,EAAE,CAAE,UACvC,SAAU,IAAoB,EAAK,EAAE,UAEpC,IAAoB,EAAK,EAAE,CAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,yBAEnB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,OAAO,CAAA,CAAC,UAAU,iBAAiB,mBAnEtC,EAAK,EAAE,CA4ErB,SAMZ,CCtLO,SAAS,GAAiB,WAAE,CAAS,QAAE,CAAM,SAAE,CAAO,CAAyB,EACpF,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAwB,MACxD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA4B,MACpE,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAA2B,EAAE,EA+B3E,GA7BA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,eAAe,IACb,GAAI,CACF,GAAW,GACX,EAAS,MAET,IAAM,EAAW,MAAM,MAAM,8BACvB,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAK,KAAK,EAAI,oCAGhC,EAAW,EAAK,OAAO,EACvB,EAAe,EAAK,WAAW,EAAI,MACnC,EAAmB,EAAK,gBAAgB,EAAI,EAAE,CAChD,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,yCAA0C,GACxD,EAAS,aAAe,MAAQ,EAAI,OAAO,CAAG,mCAChD,QAAU,CACR,EAAW,GACb,CACF,CAEI,GAAa,GACf,GAEJ,EAH2B,AAGxB,CAAC,EAAW,EAAO,EAElB,EACF,MACE,CAFS,AAET,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,wCAKzB,GAAI,EACF,KADS,CAEP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAE,WAO5B,IAAM,EAAqB,GAAS,oBAAsB,MACpD,EAAkB,GAAS,2BAA6B,MAE9D,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,+BAAqB,iBAAe,EAAQ,WAAW,IACrE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,6EAIvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,yCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,WACL,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,iBAAiB,6BAO7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,gCAAgC,UAAU,iBACnD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,gEACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,sEACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAsB,oBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qCAEvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAsB,GAAS,iBAAmB,IACjE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CACV,GAAS,cAAgB,EAAE,uBAMpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,uCAAuC,UAAU,iBAC1D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,gEACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,sEACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAsB,uBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,qCAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAsB,GAAS,wBAA0B,IACxE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CACV,GAAS,qBAAuB,EAAE,gBAAc,GAAS,mBAAqB,EAAE,0BAMzF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,sEACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAsB,0BAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,qCAExB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACZ,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAS,iBAAmB,EAAG,KAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,0CAMjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,uCAAuC,UAAU,iBAC1D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,gEACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,sEACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAsB,wBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,qCAEtB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACZ,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAS,oBAAsB,EAAG,KAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,yCASpD,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,YAAY,2BAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,yCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,qBAGhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BAAsB,EAAY,cAAc,CAAC,OAChE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,iCAKpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACZ,EAAY,cAAc,EAAI,EAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,2BAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,yBACxB,gBAGJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAsB,EAAY,kBAAkB,GACnE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,+CACX,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,EAAY,cAAc,EAAI,EAAI,iBAAmB,yBACnE,EAAY,cAAc,EAAI,EAAI,IAAM,GAAI,EAAY,cAAc,CAAC,OAEzE,IAAI,kBAAgB,EAAY,kBAAkB,CAAC,UAIxD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,YAAY,oBAGpC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACZ,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAY,wBAAwB,CAAE,EAAY,qBAAqB,IAEzF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,+BAKpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,sBAGhC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACZ,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAY,eAAe,CAAE,KAE/C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,8BAU5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,YAAY,sBAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,4CAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACkB,IAA3B,EAAgB,MAAM,CACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,sCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,qBACH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAe,oDAK9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,EAAgB,GAAG,CAAC,CAAC,EAAU,KAC9B,IAAM,EAAS,EAAS,YAAY,EAAE,OAChC,EAAgB,AAAW,iBAA0B,WAAX,EAC1C,EAAuB,YAAX,EACZ,EAAe,CAAC,GAAU,EAAS,qBAAqB,CAU9D,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,oEAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,iBAAiB,EAChC,EACI,8BACA,EACE,gCACA,EACE,4BACA,4BAAA,CACR,UACC,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,YACtB,EACF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YAEjB,CAAA,CADE,CACF,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,cAKnB,CAAA,EAAA,EAAA,IAAA,EAAC,GAHG,GAGH,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,cAJV,SAIyB,EAAS,aAAa,EAAI,oBAJhD,CAKN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,EAAS,SAAS,EAAI,uBAI7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACZ,EAAS,YAAY,EAAE,WACtB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBACV,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAS,YAAY,CAAC,UAAU,CAAE,KAElD,KACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAxCQ,CAwCC,CAxCe,UAAY,GAAa,EAAe,YAAc,mBAPxE,CA+CkB,CA9CjC,YACA,EACE,UACA,EACE,aACA,oBAKC,CAAA,EAAG,EAAS,OAAO,CAAC,CAAC,EAAE,EAAS,WAAW,EAAI,EAAA,CAAK,CAwC/D,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,gDACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,UAAU,mBAAS,wBAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,8BAQlC,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CAAA,MAIH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,oBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,yCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,UAAU,iCAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,iBAAiB,4BAI3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,gDACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,UAAU,iCAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,iBAAiB,yBAItC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,+CACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,UAAU,iCAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iBAAiB,oBAI1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,oCACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,UAAU,iCAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,iBAAiB,0BASrD,CC/ZA,IAAA,GAAA,EAAA,CAAA,CAAA,QAgEO,SAAS,GAAgB,CAAE,UAAQ,QAAE,CAAM,SAAE,CAAO,CAAwB,EACjF,GAAM,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAmB,AAAV,iBAET,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,MACvD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAKlC,MACJ,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,EAAE,EACjF,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,EAAE,EAgLrE,GA9KA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,MACR,AA0KA,eA1Ke,EACb,GAAI,CACF,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAGvB,CAAE,KAAM,CAAM,CAAE,CAAG,MAAM,EAC5B,IAAI,CAAC,WACL,MAAM,CAAC,2EACP,EAAE,CAAC,KAAM,GACT,WAAW,GAEV,GACF,EAAc,CACZ,EAFQ,QAEG,EAAO,SAAS,EAAI,GAC/B,aAAc,EAAO,YAAY,EAAI,GACrC,gBAAiB,EAAO,eAAe,CACvC,UAAW,EAAO,SAAS,GAAI,CACjC,GAIF,GAAM,CAAE,KAAM,CAAc,CAAE,CAAG,MAAM,EACpC,IAAI,CAAC,YACL,MAAM,CAAC,YACP,EAAE,CAAC,YAAa,GAEb,EAAa,CAAC,GAAkB,EAAE,AAAF,EAAI,GAAG,CAAC,AAAC,GAAW,EAAE,EAAE,EAG1D,EAAoC,EAAE,CACtC,EAAoB,EAAE,CAE1B,GAAI,EAAW,MAAM,CAAG,EAAG,CACzB,GAAM,CAAE,KAAM,CAAY,CAAE,CAAG,MAAM,EAClC,IAAI,CAAC,SACL,MAAM,CAAC,yDACP,EAAE,CAAC,aAAc,GACjB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GACvC,KAAK,CAAC,IAET,EAAoB,CAAC,GAAgB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,IAAW,AAAC,CACxD,GAAI,EAAE,EAAE,CACR,KAAM,EAAE,IAAI,CACZ,OAAQ,EAAE,MAAM,CAChB,cAAe,EAAE,aAAa,CAC9B,SAAU,EAAE,QAAQ,EAAI,MAC1B,CAAC,EAED,EAAU,CAAC,GAAgB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,GAAW,EAAE,EAAE,CACrD,CAUA,GAPI,CAAC,EAAQ,MAAM,EAAI,GAAQ,gBAAgB,QAAQ,CACrD,EAAU,EAAO,cAAA,AAAc,EAIjC,EAAiB,GAEb,EAAQ,MAAM,CAAG,EAAG,CAEtB,GAAM,CAAE,KAAM,CAAa,CAAE,CAAG,MAAM,EACnC,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;;;;;;;;;;YAWT,CAAC,EACA,EAAE,CAAC,UAAW,GACd,EAAE,CAAC,SAAU,CAAC,YAAa,mBAAoB,SAAU,SAAS,EAClE,KAAK,CAAC,eAAgB,CAAE,WAAW,CAAM,GAEtC,EAAO,GAAiB,EAAE,CAG1B,CAAE,KAAM,CAAS,CAAE,CAAG,MAAM,EAC/B,IAAI,CAAC,cACL,MAAM,CAAC,cACP,EAAE,CAAC,UAAW,GACd,EAAE,CAAC,SAAU,CAAC,UAAW,WAAW,EAEjC,EAAqB,CAAC,GAAa,EAAA,AAAE,EAAE,MAAM,CAG7C,EAAY,EAAK,MAAM,CAAC,AAAC,GAAwB,cAAb,EAAE,MAAM,EAC5C,EAAkB,EAAK,MAAM,CAAC,AAAC,GAAwB,qBAAb,EAAE,MAAM,EAClD,EAAc,EAAK,MAAM,CAAC,AAAC,GAAwB,WAAb,EAAE,MAAM,EAA8B,WAAb,EAAE,MAAM,EAGvE,EAAgB,IAAI,IACpB,EAAY,IAAI,IAEtB,EAAK,OAAO,CAAC,AAAC,IACZ,IAAM,EAAW,EAAE,QAAQ,EAAI,MAC/B,EAAc,GAAG,CAAC,EAAU,AAAC,GAAc,GAAG,CAAC,KAAa,CAAC,EAAK,EAAD,AAAG,UAAU,GAAI,CAAC,EACnF,EAAU,GAAG,CAAC,EAAU,CAAC,EAAU,GAAG,CAAC,KAAa,CAAC,EAAK,EAAD,AAAG,aAAa,GAAI,CAAC,CAChF,GAGA,IAAM,EAAiB,CAAC,EAAkB,IACrB,AAAnB,OAA0B,CAAtB,EAAE,QAAQ,CAAmB,CAAC,EACf,OAAO,CAAtB,EAAE,QAAQ,CAAmB,EAC1B,EAAE,QAAQ,CAAC,aAAa,CAAC,EAAE,QAAQ,EAGtC,EAAwB,MAAM,IAAI,CAAC,EAAc,OAAO,IAC3D,GAAG,CAAC,CAAC,CAAC,EAAU,EAAO,GAAK,CAAC,UAAE,SAAU,EAAO,CAAC,EACjD,MAAM,CAAC,GAAK,EAAE,MAAM,CAAG,GACvB,IAAI,CAAC,GAEF,EAAmB,MAAM,IAAI,CAAC,EAAU,OAAO,IAClD,GAAG,CAAC,CAAC,CAAC,EAAU,EAAO,GAAK,CAAC,UAAE,SAAU,EAAO,CAAC,EACjD,MAAM,CAAC,GAAK,EAAE,MAAM,CAAG,GACvB,IAAI,CAAC,GAER,EAAW,CACT,cAAe,EAAQ,MAAM,CAC7B,2BAA4B,EAAU,MAAM,CAAG,EAAgB,MAAM,CACrE,4BAA6B,EAC7B,oBAAqB,EAAK,MAAM,CAChC,yBAA0B,EAAY,MAAM,uBAC5C,mBACA,CACF,GAGA,IAAM,EAAmC,EAAK,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,IAC7D,IAAM,EAAO,MAAM,OAAO,CAAC,EAAI,KAAK,EAAI,EAAI,KAAK,CAAC,EAAE,CAAG,EAAI,KAAK,CAC1D,EAAW,MAAM,OAAO,CAAC,EAAI,SAAS,EAAI,EAAI,SAAS,CAAC,EAAE,CAAG,EAAI,SAAS,CAEhF,MAAO,CACL,GAAI,EAAI,EAAE,CACV,UAAW,GAAM,MAAQ,eACzB,cAAe,GAAU,cAAgB,GAAU,YAAc,mBACjE,WAAY,EAAI,UAAU,EAAI,EAC9B,cAAe,EAAI,aAAa,EAAI,EACpC,SAAU,EAAI,QAAQ,EAAI,MAC1B,OAAQ,EAAI,MAAM,CAClB,aAAc,EAAI,YAAY,AAChC,CACF,GAEA,EAAuB,EACzB,MAEE,CAFK,CAEM,CACT,cAAe,EACf,2BAA4B,EAC5B,4BAA6B,EAC7B,oBAAqB,EACrB,yBAA0B,EAC1B,sBAAuB,EAAE,CACzB,iBAAkB,EAAE,AACtB,EAEJ,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,8BAA+B,GAC7C,EAAS,aAAe,MAAQ,EAAI,OAAO,CAAG,gCAChD,QAAU,CACR,GAAW,EACb,CACF,GAGF,EAAG,CAAC,EAAU,EAAO,EAEjB,EACF,MACE,CAAA,AAFS,EAET,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,uCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,4BAKnC,GAAI,EACF,KADS,CAEP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,WAAW,CAAA,CAAC,UAAU,+BACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,4BACpC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAyB,IACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,IAAM,OAAO,QAAQ,CAAC,MAAM,YAAI,iBAOzE,IAAM,EAAuC,CAC3C,UAAW,+BACX,iBAAkB,iCAClB,OAAQ,qCACR,OAAQ,gCACV,EAEM,EAAuC,CAC3C,UAAW,mBACX,iBAAkB,UAClB,OAAQ,eACR,OAAQ,QACV,EAEM,EAA2C,CAC/C,KAAM,iCACN,MAAO,+BACP,mBAAoB,mCACpB,iBAAkB,+BAClB,OAAQ,mCACR,UAAW,4BACb,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,qBAGhF,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,KAAK,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,WAC/D,GAAY,cAAgB,EAAQ,WAAW,CAC/C,GAAY,WAAa,CAAC,GAAG,EAAE,EAAW,SAAS,CAAA,CAAE,OAGzD,GAAY,iBAAiB,OAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,EAAW,eAAe,CAAC,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,CAAC,EAAM,IACjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAW,QAAQ,UAAU,UAAU,sBAC1C,GADS,MAKd,QAIL,GAAc,CAAC,EAAW,SAAS,EAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,kBAAoB,cAAA,CAAe,UAClF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,WAAW,CAAA,CAAC,UAAU,6BAEzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,qBAGxE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,gGAUhF,GAAW,EAAQ,0BAA0B,CAAG,GAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,mBAAmB,EAAE,EAAS,iBAAmB,aAAA,CAAc,UAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4BAExB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,WACnE,EAAQ,0BAA0B,CAAC,+BAAoE,IAAvC,EAAQ,0BAA0B,CAAS,IAAM,MAEpH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,6DAK3E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,WACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,mCAAyB,kBAElC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,6BASjC,GAAW,EAAQ,2BAA2B,CAAG,GAChD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,qBAAqB,EAAE,EAAS,mBAAqB,eAAA,CAAgB,UACrF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,8BAExB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,WACnE,EAAQ,2BAA2B,CAAC,uBAA6D,IAAxC,EAAQ,2BAA2B,CAAS,IAAM,MAE9G,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,6CAK3E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,EAAC,QAAQ,mBACtB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,kDAAwC,YAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,6BASlC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,mBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE/E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,GAAS,eAAiB,IAE7B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,aAMzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,yBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE9E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,GAAS,qBAAuB,IAEnC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,cAC/B,GAAS,CADwC,iBAAiB,QAC7B,EAAE,yBAK9C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACT,GAAS,uBAAyB,EAAQ,qBAAqB,CAAC,MAAM,CAAG,EACxE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAQ,qBAAqB,CAAC,GAAG,CAAC,CAAC,EAAG,IACrC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAqB,UAAW,CAAA,EAAS,IAAN,EAAU,qBAAuB,sBAAsB,cAAc,CAAC,UACvG,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAE,MAAM,CAAE,EAAE,QAAQ,GAD5B,EAAE,QAAQ,KAMxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,gCAAgC,CAAC,UAC/C,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,KAGpB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,aAAa,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,aAM9E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,iBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAElF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACT,GAAS,kBAAoB,EAAQ,gBAAgB,CAAC,MAAM,CAAG,EAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAQ,gBAAgB,CAAC,GAAG,CAAC,CAAC,EAAG,IAChC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAqB,UAAW,CAAA,EAAS,IAAN,EAAU,qBAAuB,sBAAsB,eAAe,CAAC,UACxG,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAE,MAAM,CAAE,EAAE,QAAQ,GAD5B,EAAE,QAAQ,KAMxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,iCAAiC,CAAC,UAChD,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,KAGpB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,aAAa,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,QAQhF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,uDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,yBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,0CAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAA,CAAA,WACvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,+CAAqC,WAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,yBAI5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACsB,IAA/B,EAAoB,MAAM,CACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAW,CAAC,uBAAuB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,GAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,mCAKzE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAoB,GAAG,CAAC,AAAC,GACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAC,iDAAiD,EAC3D,EAAS,aAAe,aAAA,CACxB,WAEF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,qBAAqB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,EAAI,aAAa,GAEpB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,iBAAiB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAC3E,EAAI,SAAS,GAEhB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,WAClE,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAI,UAAU,CAAE,EAAI,QAAQ,EAAE,mBAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAY,CAAC,EAAI,MAAM,CAAC,EAAI,wCAC3C,CAAY,CAAC,EAAI,MAAM,CAAC,EAAI,EAAI,MAAM,KAjBpC,EAAI,EAAE,UA2BvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,uDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,mBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,sCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAA,CAAA,WACvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,2CAAiC,WAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,yBAI5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACT,AAAyB,MAAX,MAAM,CACnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,uBAAuB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,GAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,0BAGvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,sDAK9E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAc,GAAG,CAAC,AAAC,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,CAAC,8BAA8B,EAAE,EAAK,EAAE,CAAA,CAAE,CAChD,UAAW,CAAC,mEAAmE,EAC7E,EAAS,+BAAiC,+BAAA,CAC1C,WAEF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,qBAAqB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,EAAK,IAAI,GAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAClE,EAAK,aAAa,CACf,CAAA,EAAG,CAAA,EAAA,EAAA,cAAc,AAAd,EAAe,EAAK,aAAa,CAAE,EAAK,QAAQ,EAAE,OAAO,CAAC,CAC7D,qBAGR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAgB,CAAC,EAAK,MAAM,CAAC,EAAI,wCAChD,EAAK,MAAM,KAjBT,EAAK,EAAE,aA4B1B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,kBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,kCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,+CACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,2BAGV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,mCACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,YACtB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,wBAGV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,2CACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,YACrB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,8BAQtB,CE1nBA,IAAA,GAAA,EAAA,CAAA,CAAA,QAAA,GAAA,EAAA,CAAA,CAAA,QAkBA,GAAA,EAAA,CAAA,CAAA,QDbA,GAAA,EAAA,CAAA,CAAA,QACA,GAAA,EAAA,CAAA,CAAA,QAAA,GAAA,EAAA,CAAA,CAAA,QAAA,GAAA,EAAA,CAAA,CAAA,OA4CO,SAAS,GAA4B,CAC1C,YAAU,SACV,EAAU,EAAK,CACkB,EACjC,GAAM,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAmB,eAAV,EAET,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA0B,MACxD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAsBlD,GApBA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACR,AAgBA,eAhBe,EACb,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,uCAC7B,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACN,AAAJ,MAAU,qCAElB,IAAM,EAAO,MAAM,EAAS,IAAI,GAChC,EAAU,EACZ,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,oCAAqC,GACnD,EAAS,mCACX,QAAU,CACR,GAAW,EACb,CACF,GAGF,EAAG,CAAC,EAAW,EAEX,EACF,MACE,CAFS,AAET,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EAAG,EAAS,6BAA+B,aAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iDACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,2CAM3B,GAAI,GAAS,CAAC,GAKV,EAAO,GALW,OAKD,CAAC,WAAW,EAAI,EAJnC,OAAO,AAIqC,KAI9C,GAAM,YAAE,CAAU,CAAE,CAAG,EACjB,EAAQ,CACZ,CACE,GAAI,UACJ,MAAO,mBACP,YAAa,+BACb,KAAM,EAAA,IAAI,CACV,SAAU,EAAW,KAAK,CAAC,OAAO,CAAC,QAAQ,CAC3C,KAAM,8CACN,SAAU,EAAW,KAAK,CAAC,OAAO,CAAC,QAAQ,AAC7C,EACA,CACE,GAAI,YACJ,MAAO,mBACP,YAAa,yBACb,KAAM,EAAA,QAAQ,CACd,SAAU,EAAW,KAAK,CAAC,SAAS,CAAC,QAAQ,CAC7C,KAAM,iDACN,SAAU,EAAW,KAAK,CAAC,SAAS,CAAC,QAAQ,AAC/C,EACA,CACE,GAAI,YACJ,MAAO,qBACP,YAAa,qBACb,KAAM,GAAA,OAAO,CACb,SAAU,EAAW,KAAK,CAAC,SAAS,CAAC,QAAQ,CAC7C,KAAM,gDACR,EACA,CACE,GAAI,YACJ,MAAO,oBACP,YAAa,0BACb,KAAM,GAAA,IAAI,CACV,SAAU,EAAW,KAAK,CAAC,SAAS,CAAC,QAAQ,CAC7C,KAAM,gDACR,EACA,CACE,GAAI,WACJ,MAAO,eACP,YAAa,mBACb,KAAM,GAAA,WAAW,CACjB,SAAU,EAAW,KAAK,CAAC,QAAQ,CAAC,QAAQ,AAC9C,EACD,QAED,AAAI,EAEA,CAAA,EAAA,EAAA,EAFS,CAET,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACf,uBACA,EAAS,mBAAqB,yBAE9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,WAAW,CAAA,CAAC,UAAU,8BAEzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,cAAe,EAAS,aAAe,0BAAkB,6BAG1E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,QAAQ,CAAA,CACP,MAAO,EAAW,gBAAgB,CAClC,UAAU,6BAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EAAG,UAAW,EAAS,gBAAkB,2BACvD,EAAW,gBAAgB,CAAC,gBAKpC,EAAW,WAAW,EACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,EAAC,KAAK,cACnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,EAAW,WAAW,CAAC,IAAI,WACpC,EAAW,WAAW,CAAC,KAAK,CAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,6BAWpC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAS,6BAA+B,cAC1D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAS,aAAe,0BAAkB,yBAGnE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,EAAS,gBAAkB,0BAAkB,8DAI9E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBAErB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EAAG,EAAS,gBAAkB,0BAAkB,aAGjE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,cAAe,EAAS,aAAe,2BACxD,EAAW,eAAe,CAAC,OAAK,EAAW,WAAW,CAAC,eAG5D,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,QAAQ,CAAA,CAAC,MAAO,EAAW,gBAAgB,CAAE,UAAU,WAI1D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACZ,EAAM,GAAG,CAAC,CAAC,EAAM,KAChB,IAAM,EAAO,EAAK,IAAI,CAChB,EAAS,EAAW,WAAW,EAAE,OAAS,EAAK,EAAE,EACpD,EAAW,WAAW,EAAE,OAAS,UAAwB,cAAZ,EAAK,EAAE,EACpD,EAAW,WAAW,EAAE,OAAS,WAAyB,cAAZ,EAAK,EAAE,CAExD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,2DACA,EAAK,QAAQ,CACT,EAAS,kBAAoB,cAC7B,EACA,EAAS,+CAAiD,wCAC1D,EAAS,aAAe,wBAI9B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACd,iCACA,EAAK,QAAQ,CACT,iCACA,EACA,mCACA,EAAS,4BAA8B,sCAE1C,EAAK,QAAQ,CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,YACtB,EAAW,WAAW,EAAE,OAAS,WAAyB,cAAZ,EAAK,EAAE,CACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAU,cAKpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,sBACA,EAAK,QAAQ,CACT,EAAS,iBAAmB,iBAC5B,EAAS,aAAe,2BAE3B,EAAK,KAAK,CACV,EAAK,QAAQ,EAAI,CAAC,EAAK,QAAQ,EAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACf,2BACA,EAAS,gBAAkB,2BAC1B,IACC,EAAK,QAAQ,CAAC,UAItB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACZ,UACS,CAAT,iBAA2B,QAE1B,EAAW,WAAW,EAAE,OAAS,WAAyB,cAAZ,EAAK,EAAE,CAClD,6BACA,EAAK,WAAW,MAKvB,CAAC,EAAK,QAAQ,EAAI,EAAK,IAAI,EAAgB,aAAZ,EAAK,EAAE,EACrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,OAAO,CAAA,CAAA,EACP,QAAS,EAAS,UAAY,QAC9B,KAAK,KACL,UAAU,yBAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,EAAK,IAAI,UAClB,EAAS,QAAU,aAjErB,EAAK,EAAE,CAuElB,UAKV,CC5MO,SAAS,GAAkB,YAAE,CAAU,QAAE,CAAM,SAAE,CAAO,CAA0B,EACvF,GAAM,CAAE,OAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAmB,eAAV,EAET,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyB,MACzD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAItC,MACJ,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,EAAE,EAClE,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,EAAE,EAE3E,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,MACnE,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiC,MAC/E,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAoB,MAmUhE,GAjUA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACR,AA6TA,eA7Te,EACb,GAAI,CACF,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAGvB,CAAE,KAAM,CAAQ,CAAE,CAAG,MAAM,EAC9B,IAAI,CAAC,qBACL,MAAM,CAAC,sCACP,EAAE,CAAC,KAAM,GACT,WAAW,GAEV,GACF,EAAgB,CACd,IAFU,OAEE,EAAS,UAAU,CAC/B,OAAQ,EAAS,MAAM,CACvB,WAAY,EAAS,UAAU,AACjC,GAIF,GAAM,CAAE,KAAM,CAAgB,CAAE,CAAG,MAAM,EACtC,IAAI,CAAC,YACL,MAAM,CAAC,uBACP,EAAE,CAAC,qBAAsB,GAEtB,EAAa,CAAC,GAAoB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,GAAW,EAAE,EAAE,EAG5D,EAAe,EAAE,CACrB,GAAI,EAAW,MAAM,CAAG,EAAG,CACzB,GAAM,CAAE,KAAM,CAAY,CAAE,CAAG,MAAM,EAClC,IAAI,CAAC,SACL,MAAM,CAAC,qEACP,EAAE,CAAC,aAAc,GACjB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAC1C,EAAQ,GAAgB,EAC1B,AAD4B,CAG5B,IAAM,EAAW,GAAS,EAAE,CAEtB,EAAiB,EAAS,MAAM,CAAC,AAAC,GAAwB,SAAb,EAAE,MAAM,EAA4B,uBAAb,EAAE,MAAM,EAC5E,EAAkB,EAAS,MAAM,CAAC,AAAC,GAAwB,UAAb,EAAE,MAAM,EAE5D,EAAkB,EAAS,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,IAAW,AAAC,CACtD,GAAI,EAAE,EAAE,CACR,KAAM,EAAE,IAAI,CACZ,OAAQ,EAAE,MAAM,CAChB,cAAe,EAAE,aAAa,CAC9B,SAAU,EAAE,QAAQ,EAAI,MACxB,WAAY,EAAE,UAAU,CAC1B,CAAC,GAGD,IAAM,EAAU,EAAS,GAAG,CAAC,AAAC,GAAW,EAAE,EAAE,EACzC,EAAkB,EAEtB,GAAI,EAAQ,MAAM,CAAG,EAAG,CACtB,GAAM,CAAE,KAAM,CAAa,CAAE,CAAG,MAAM,EACnC,IAAI,CAAC,iBACL,MAAM,CAAC,cACP,EAAE,CAAC,UAAW,GACd,EAAE,CAAC,SAAU,CAAC,YAAa,SAAU,SAAU,SAAS,EAE3D,EAAkB,CAAC,GAAiB,EAAA,AAAE,EAAE,MAAM,CAC5C,CAAC,EAAa,IAAW,EAAO,GAAE,CAAH,SAAa,GAAI,CAAC,CACjD,EAEJ,CAGA,IAAI,EAAgB,EAChB,EAAmB,EACnB,EAAU,EAQR,EALgB,AAKD,IALK,IACxB,CAAC,GAAoB,EAAA,AAAE,EACpB,MAAM,CAAE,AAAD,GAAY,EAAE,SAAS,EAC9B,GAAG,CAAC,AAAC,GAAW,EAAE,SAAS,GAEG,IAAI,CAEvC,GAAI,EAAQ,MAAM,CAAG,EAAG,CAEtB,GAAM,CAAE,KAAM,CAAiB,CAAE,CAAG,MAAM,EACvC,IAAI,CAAC,iBACL,MAAM,CAAC,+DACP,EAAE,CAAC,UAAW,GAQjB,EALsB,AAKH,IALO,IACxB,CAAC,GAAqB,EAAA,AAAE,EACrB,MAAM,CAAC,AAAC,GAAW,EAAE,aAAa,EAClC,GAAG,CAAC,AAAC,GAAW,EAAE,aAAa,GAEH,IAAI,CAIrC,GAAM,CAAE,KAAM,CAAgB,CAAE,CAAG,MAAM,EACtC,IAAI,CAAC,oBACL,MAAM,CAAC,yBACP,EAAE,CAAC,UAAW,GACd,EAAE,CAAC,0BAA2B,WAC9B,GAAG,CAAC,wBAAyB,KAAM,MAKtC,EAAgB,AAHS,IAAI,IAC3B,CAAC,GAAoB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,GAAW,EAAE,qBAAqB,GAEjC,IAAI,CAQrC,EAAU,AALI,IAAI,IAChB,CAAC,GAAqB,EAAA,AAAE,EACrB,MAAM,CAAC,AAAC,GAAW,EAAE,2BAA2B,EAChD,GAAG,CAAC,AAAC,GAAW,EAAE,2BAA2B,GAElC,IAAI,AACtB,CAGA,GAAM,CAAE,KAAM,CAAoB,CAAE,CAAG,MAAM,EAC1C,IAAI,CAAC,yBACL,MAAM,CAAC,CAAC;;;;;UAKT,CAAC,EACA,EAAE,CAAC,cAAe,GAClB,EAAE,CAAC,SAAU,CAAC,OAAQ,mBAAoB,WAAY,wBAAyB,+BAA+B,EAC9G,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GACvC,KAAK,CAAC,GAEH,CAAE,KAAM,CAAmB,CAAE,CAAG,MAAM,EACzC,IAAI,CAAC,wBACL,MAAM,CAAC,CAAC;;;;;UAKT,CAAC,EACA,EAAE,CAAC,cAAe,GAClB,EAAE,CAAC,SAAU,CAAC,OAAQ,mBAAoB,WAAY,wBAAyB,uBAAuB,EACtG,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GACvC,KAAK,CAAC,GAEH,EAA2C,EAAE,CAiCnD,GA/BC,CAAC,GAAwB,EAAA,AAAE,EAAE,OAAO,CAAC,AAAC,IACrC,IAAM,EAAQ,MAAM,OAAO,CAAC,EAAE,WAAW,EAAI,EAAE,WAAW,CAAC,EAAE,CAAG,EAAE,WAAW,CAC7E,EAAqB,IAAI,CAAC,CACxB,GAAI,EAAE,EAAE,CACR,YAAa,GAAO,cAAgB,GAAO,YAAc,UACzD,YAAa,aACb,OAAQ,EAAE,MAAM,CAChB,WAAY,EAAE,UAAU,AAC1B,EACF,GAEC,CAAC,GAAuB,EAAA,AAAE,EAAE,OAAO,CAAC,AAAC,IACpC,IAAM,EAAK,MAAM,OAAO,CAAC,EAAE,mBAAmB,EAAI,EAAE,mBAAmB,CAAC,EAAE,CAAG,EAAE,mBAAmB,CAClG,EAAqB,IAAI,CAAC,CACxB,GAAI,EAAE,EAAE,CACR,YAAa,GAAI,cAAgB,GAAI,YAAc,UACnD,YAAa,qBACb,OAAQ,EAAE,MAAM,CAChB,WAAY,EAAE,UAChB,AAD0B,EAE5B,GAGA,EAAqB,IAAI,CAAC,CAAC,EAAG,IAC5B,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,IAEnE,EAAqB,EAAqB,KAAK,CAAC,EAAG,IAK/C,EAAQ,MAAM,CAAG,EAAG,CACtB,GAAM,CAAE,KAAM,CAAW,CAAE,CAAG,MAAM,EACjC,IAAI,CAAC,iBACL,MAAM,CAAC,sEACP,EAAE,CAAC,UAAW,GACd,EAAE,CAAC,SAAU,CAAC,YAAa,mBAAoB,SAAU,SAAU,SAAS,EAEzE,EAAgB,CAAC,GAAe,EAAA,AAAE,EAAE,MAAM,CAAC,CAAC,EAAa,IAAW,EAAO,GAAE,CAAH,SAAa,GAAI,CAAC,CAAG,GAC/F,EAAc,CAAC,GAAe,EAAE,AAAF,EAAI,MAAM,CAAC,CAAC,EAAa,IAAW,GAAO,EAAE,CAAH,YAAgB,EAAI,CAAC,EAAG,GAChG,EAAmB,CAAC,GAAe,EAAA,AAAE,EAAE,MAAM,CAAC,CAAC,EAAa,IAAW,GAAO,EAAE,CAAH,iBAAqB,GAAI,CAAC,CAAG,GAC1G,EAAmB,CAAC,GAAe,EAAA,AAAE,EAAE,MAAM,CAAC,AAAC,GAAW,AAAC,GAAE,aAAa,GAAI,CAAC,EAAK,EAAD,AAAG,UAAU,GAAI,CAAC,EAAG,MAAM,CAEpH,EAAiB,eACf,cACA,EACA,mBACA,YAAa,EAAgB,EAAI,EAAe,EAAiB,IAAM,mBACvE,CACF,GAIA,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC7B,IAAI,CAAC,aACL,MAAM,CAAC,CAAC;;;;;;YAMT,CAAC,EACA,GAAG,CAAC,kBAAmB,KAAM,MAC7B,EAAE,CAAC,SAAU,CAAC,YAAa,oBAAoB,EAI5C,CAAE,KAAM,CAAqB,CAAE,CAAG,MAAM,EAC3C,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,EAAE,CAAC,UAAW,GAEX,EAAiB,IAAI,IAAI,AAAC,IAAyB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,GAAW,EAAE,EAAE,GAG3E,EAAe,CAAC,GAAW,EAAA,AAAE,EAAE,MAAM,CAAC,AAAC,GAAa,EAAe,GAAG,CAAC,EAAI,eAAe,GAE5F,EAAmB,EACnB,EAAmB,EACnB,EAAc,EAElB,EAAa,OAAO,CAAE,AAAD,IACnB,GAAmB,sBAAf,EAAI,MAAM,CAA0B,OACxC,IAAM,EAAW,EAAI,kBAAkB,EAAI,EAAE,CACvC,EAAqB,EAAS,IAAI,CAAC,AAAC,GAA6B,aAAlB,EAAE,WAAW,EAAgC,YAAb,EAAE,MAAM,EACvF,EAAqB,EAAS,IAAI,CAAC,AAAC,GAA6B,AAAlB,eAAE,WAAW,EAAgC,YAAb,EAAE,MAAM,EACvF,EAAgB,EAAS,IAAI,CAAC,AAAC,GAA6B,UAAlB,EAAE,WAAW,EAA6B,YAAb,EAAE,MAAM,EAEjF,GAAoB,IACpB,GAAoB,IACpB,GAAe,GACrB,GAGA,IAAM,EAAe,IAAI,KACzB,EAAa,OAAO,CAAC,GACrB,EAAa,QAAQ,CAAC,EAAG,EAAG,EAAG,GAE/B,GAAM,CAAE,MAAO,CAAe,CAAE,CAAG,MAAM,EACtC,IAAI,CAAC,iBACL,MAAM,CAAC,KAAM,CAAE,MAAO,QAAS,MAAM,CAAK,GAC1C,EAAE,CAAC,UAAW,GACd,GAAG,CAAC,YAAa,KAAM,MACvB,GAAG,CAAC,YAAa,EAAa,WAAW,IAE5C,EAAkB,CAChB,0BAA2B,EAC3B,0BAA2B,EAC3B,qBAAsB,EACtB,gBAAiB,GAAmB,EACpC,aAAc,EAAmB,EAAmB,CACtD,EACF,MAEE,CAFK,CAEY,CACf,cAAe,EACf,YAAa,EACb,iBAAkB,EAClB,YAAa,EACb,iBAAkB,CACpB,GACA,EAAkB,CAChB,0BAA2B,EAC3B,0BAA2B,EAC3B,qBAAsB,EACtB,gBAAiB,EACjB,aAAc,CAChB,GAIF,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC7B,IAAI,CAAC,cACL,MAAM,CAAC,2BACP,EAAE,CAAC,oBAAqB,GAErB,EAAY,CAAC,GAAW,EAAA,AAAE,EAAE,MAAM,CAAE,AAAD,GAAY,AAAa,aAAX,MAAM,EAA8B,cAAb,EAAE,MAAM,EAChF,EAAe,EAAU,MAAM,CAAE,AAAD,GAAyB,YAAb,EAAE,MAAM,EAAgB,MAAM,CAAC,CAAC,EAAW,IAAW,GAAK,CAAD,CAAG,eAAe,GAAI,CAAC,CAAG,GAChI,EAAgB,EAAU,MAAM,CAAE,AAAD,GAAyB,aAAb,EAAE,MAAM,EAAiB,MAAM,CAAC,CAAC,EAAW,IAAW,GAAK,CAAD,CAAG,eAAe,GAAI,CAAC,CAAG,GAClI,EAAY,EAAU,MAAM,CAAC,AAAC,GAAwB,SAAb,EAAE,MAAM,EAAa,MAAM,CAAC,CAAC,EAAW,IAAW,GAAK,CAAD,CAAG,eAAe,GAAI,CAAC,CAAG,GAEhI,EAAc,cACZ,gBACA,YACA,EACA,YAAa,EAAe,CAC9B,GAIA,EAAW,CACT,cAAe,EAAS,MAAM,CAC9B,eAAgB,EAAe,MAAM,CACrC,gBAAiB,EAAgB,MAAM,CACvC,cAAe,GAAiB,EAChC,iBAAkB,GAAoB,EACtC,wBAAyB,GAAW,EACpC,aAAc,EACd,kBAAmB,EAAqB,MAAM,CAC9C,qBAAsB,CACxB,EACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,gCAAiC,EACjD,QAAU,CACR,GAAW,EACb,CACF,GAGF,EAAG,CAAC,EAAW,EAEX,EACF,MACE,CAAA,AAFS,EAET,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,uCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,4BAMnC,IAAM,EAA2C,CAC/C,MAAO,+BACP,KAAM,iCACN,mBAAoB,iCACpB,OAAQ,mCACR,UAAW,4BACb,EAEM,EAAgD,CACpD,KAAM,+BACN,iBAAkB,iCAClB,SAAU,iCACV,sBAAuB,mCACvB,6BAA8B,mCAC9B,qBAAsB,kCACxB,EAEM,EAAgD,CACpD,KAAM,OACN,iBAAkB,mBAClB,SAAU,WACV,sBAAuB,yBACvB,6BAA8B,qBAC9B,qBAAsB,oBACxB,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,uBAGhF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,KAAK,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAC/D,GAAc,YAAc,EAAQ,WAAW,MAGnD,GAAc,YACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CACJ,QAAQ,UACR,UAC8B,aAA5B,EAAa,UAAU,CACnB,qCAC4B,AAA5B,cAAa,UAAU,CACvB,qCACA,6CAEP,QACO,EAAa,UAAU,OAMlC,GAAwC,WAAxB,EAAa,MAAM,EAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,kBAAoB,cAAA,CAAe,UAClF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,WAAW,CAAA,CAAC,UAAU,6BAEzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,WAAE,WACrC,YAAxB,EAAa,MAAM,CAAiB,mBAAqB,cAEpE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAC1C,YAAxB,EAAa,MAAM,CAChB,wFACA,kGASf,GAAW,EAAQ,iBAAiB,CAAG,GACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,mBAAmB,EAAE,EAAS,iBAAmB,aAAA,CAAc,UAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,4BAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,WACnE,EAAQ,iBAAiB,CAAC,qBAAiD,IAA9B,EAAQ,iBAAiB,CAAS,IAAM,MAExF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oDAK3E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,WACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,sCAA4B,oBAErC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,6BASjC,GAAc,aAAe,YAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CAA4B,WAAY,EAAY,OAAO,CAAA,CAAA,IAI9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,mBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE/E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,GAAS,eAAiB,IAE7B,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,cAC/B,GAAS,CADwC,eACtB,EADuC,AACrC,YAAU,GAAS,iBAAmB,EAAE,oBAK5E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,mBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE3E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,CAAC,GAAS,gBAAiB,CAAC,EAAK,EAAD,CAAU,mBAAoB,CAAC,EAAK,EAAD,CAAU,yBAA2B,CAAC,IAE5G,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,KAMzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,qBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,iCAAiC,CAAC,UAChD,CAAA,EAAA,EAAA,cAAc,AAAd,EAAe,GAAS,sBAAwB,KAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,QAMzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,qBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,KAAK,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE3E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,GAAS,cAAgB,IAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,QAQ3E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,0BAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE5E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,CAAC,GAAe,cAAe,CAAC,EAAK,GAAK,iBAAmB,iBAAA,CAAkB,WACjH,AAAD,IAAgB,aAAe,CAAC,EAAE,OAAO,CAAC,GAAG,cAEhD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,cAC/B,CAAA,EAAA,CADiD,CACjD,cAAA,AAAc,EADoD,AACnD,GAAe,aAAe,GAAG,OAAK,CAAA,EAAA,EAAA,cAAc,AAAd,EAAe,GAAe,eAAiB,MAGvG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,SAAS,EAAE,EAAS,cAAgB,cAAc,6BAA6B,CAAC,UAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,kDACV,MAAO,CAAE,MAAO,CAAA,EAAG,KAAK,GAAG,CAAC,GAAe,aAAe,EAAG,KAAK,CAAC,CAAC,AAAC,MAGxE,CAAC,GAAe,kBAAoB,CAAC,EAAI,GACxC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,wCACV,GAAe,iBAAiB,kCAGrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAS,gBAAkB,yBAAiB,iBAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA8B,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAe,kBAAoB,cAMtG,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,iBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,OAAO,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE7E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACZ,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAY,aAAe,KAE7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,CAGrE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAS,gBAAkB,yBAAiB,aAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA8B,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAY,cAAgB,QAE3F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAS,gBAAkB,yBAAiB,cAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA6B,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAY,eAAiB,QAE3F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAS,gBAAkB,yBAAiB,gBAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA8B,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAY,WAAa,oBAQhG,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,+BAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,oDAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,2BAA2B,EAAE,EAAS,kBAAoB,cAAA,CAAe,WACxF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAAqC,GAAgB,2BAA6B,IAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,yBAEzE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,2BAA2B,EAAE,EAAS,mBAAqB,eAAA,CAAgB,WAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAsC,GAAgB,2BAA6B,IAChG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,+BAEzE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,2BAA2B,EAAE,EAAS,iBAAmB,aAAA,CAAc,WACtF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CAAoC,GAAgB,sBAAwB,IACzF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oBAEzE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,2BAA2B,EAAE,EAAS,kBAAoB,cAAA,CAAe,WACxF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAAqC,GAAgB,iBAAmB,IACrF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,4BAI1E,AAAC,IAAgB,4BAA6B,CAAC,CAAI,GAClD,CAAA,EAAA,EAAA,IAAA,EAAC,GAAA,KAAK,CAAA,CAAC,UAAW,CAAC,0BAA0B,EAAE,EAAS,mBAAqB,eAAA,CAAgB,WAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,4BACzB,CAAA,EAAA,EAAA,IAAA,EAAC,GAAA,gBAAgB,CAAA,CAAC,UAAW,CAAC,kCAAkC,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,WAC5G,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,YAAU,GAAgB,0BAA0B,2CAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,OAAO,OAAO,CAAA,CAAA,EAAC,UAAU,sCACvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,qCAA4B,6BASnD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,YACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,4BAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC1E,GAAS,eAAiB,IAE7B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,uBAM/E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,YACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,8BAEtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC1E,GAAS,kBAAoB,IAEhC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,0BAM/E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,YACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,4BAEvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC1E,GAAS,yBAA2B,IAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,qCAQjF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,uDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,oBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,0BAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAA,CAAA,WACvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,wCAA8B,WAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,yBAI5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACiB,IAA1B,EAAe,MAAM,CACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,uBAAuB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,GAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,6BAGvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,sDAK9E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,CAAC,2BAA2B,CAAC,CACnC,UAAW,CAAC,mEAAmE,EAC7E,EAAS,+BAAiC,+BAAA,CAC1C,WAEF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,qBAAqB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,EAAQ,IAAI,GAEf,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAClE,EAAQ,aAAa,CAClB,CAAA,EAAG,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAQ,aAAa,CAAE,EAAQ,QAAQ,EAAE,OAAO,CAAC,CACnE,qBAGR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAgB,CAAC,EAAQ,MAAM,CAAC,EAAI,wCACnD,EAAQ,MAAM,KAjBZ,EAAQ,EAAE,UA2B3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,uDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,uBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,kCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAA,CAAA,WACvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,sCAA4B,WAErC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,yBAI5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACoB,IAA7B,EAAkB,MAAM,CACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAW,CAAC,uBAAuB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,GAChG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,0BAGvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,qCAK9E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAkB,GAAG,CAAC,AAAC,GACtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAC,iDAAiD,EAC3D,EAAS,aAAe,aAAA,CACxB,WAEF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,qBAAqB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,EAAU,WAAW,GAExB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAClE,AAA0B,iBAAhB,WAAW,CAAoB,uBAAyB,2BAGvE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAqB,CAAC,EAAU,MAAM,CAAC,EAAI,wCAC1D,CAAqB,CAAC,EAAU,MAAM,CAAC,EAAI,EAAU,MAAM,KAdzD,EAAU,EAAE,aAyB/B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,kBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,kCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,wCACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,YACrB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,uBAGV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,wCACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,qBAGV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,2CACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,wBAGV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,sCACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,YACzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,6BAQtB,CC11BO,SAAS,GAA2B,CAAE,qBAAmB,QAAE,CAAM,SAAE,CAAO,CAAmC,EAClH,GAAM,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,EAAS,AAAU,iBAEnB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,MACnD,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAM1B,MACJ,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,EAAE,EACjF,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,EAAE,EACjF,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GA8NjE,GA5NA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACR,AAwNA,eAxNe,EACb,GAAI,CACF,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAGvB,CAAE,KAAM,CAAE,CAAE,CAAG,MAAM,EACxB,IAAI,CAAC,uBACL,MAAM,CAAC,qDACP,EAAE,CAAC,KAAM,GACT,WAAW,GAEV,GACF,CADM,CACI,CACR,KAAM,EAAG,IAAI,CACb,WAAY,EAAG,UAAU,CACzB,OAAQ,EAAG,MAAM,CACjB,WAAY,EAAG,UAAU,CACzB,QAAS,EAAG,OAAO,AACrB,GAIF,GAAM,CAAE,KAAM,CAAM,CAAE,CAAG,MAAM,EAC5B,IAAI,CAAC,4BACL,MAAM,CAAC,2BACP,EAAE,CAAC,wBAAyB,GAC5B,EAAE,CAAC,UAAW,GACd,WAAW,GAEd,EAAwB,GAAQ,0BAA2B,GAG3D,GAAM,CAAE,KAAM,CAAO,CAAE,MAAO,CAAW,CAAE,CAAG,MAAM,EACjD,IAAI,CAAC,8BACL,MAAM,CAAC,oCAAqC,CAAE,MAAO,OAAQ,GAC7D,EAAE,CAAC,wBAAyB,GAGzB,EAAgB,CAAC,GAAW,EAAA,AAAE,EAAE,MAAM,CAAC,AAAC,GAAW,EAAE,SAAS,EAAE,MAAM,CAGtE,EAAoB,CAAC,GAAW,EAAA,AAAE,EACrC,MAAM,CAAE,AAAD,GAAY,EAAE,kBAAkB,EACvC,GAAG,CAAE,AAAD,GAAY,EAAE,kBAAkB,EAGjC,CAAE,KAAM,CAAa,CAAE,CAAG,MAAM,EACnC,IAAI,CAAC,kBACL,MAAM,CAAC,eACP,EAAE,CAAC,UAAW,GAEX,EAAiB,CAAC,GAAiB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,GAAW,EAAE,WAAW,EAGpE,CAAE,KAAM,CAAe,CAAE,CAAG,MAAM,EACrC,IAAI,CAAC,oBACL,MAAM,CAAC,iBACP,EAAE,CAAC,UAAW,GACd,EAAE,CAAC,OAAQ,CAAC,8BAA+B,2BAA2B,EAEnE,EAAkB,CAAC,GAAmB,EAAA,AAAE,EAAE,MAAM,CAChD,EAAoB,CAAC,GAAmB,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,GAAY,EAAG,OAAO,EAGzE,EAAsB,EAC1B,GAAI,EAAkB,MAAM,CAAG,EAAG,CAChC,GAAM,CAAE,MAAO,CAAgB,CAAE,CAAG,MAAM,EACvC,IAAI,CAAC,SACL,MAAM,CAAC,KAAM,CAAE,MAAO,QAAS,MAAM,CAAK,GAC1C,EAAE,CAAC,KAAM,GACT,EAAE,CAAC,SAAU,CAAC,OAAQ,qBAAsB,SAAS,EAExD,EAAsB,GAAoB,CAC5C,CAGA,IAAI,EAAqB,EACrB,EAAwB,EACxB,EAAqB,EACrB,EAAuB,EACrB,EAAyC,EAAE,CAGjD,GAAI,EAAe,MAAM,CAAG,EAAG,CAC7B,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC7B,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;;;YAIT,CAAC,EACA,EAAE,CAAC,cAAe,GAClB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GACvC,KAAK,CAAC,IAER,CAAC,GAAW,EAAA,AAAE,EAAE,OAAO,CAAC,AAAC,IACpB,CAAC,YAAa,SAAU,SAAU,SAAS,CAAC,QAAQ,CAAC,EAAI,MAAM,GAAG,AACpE,IAAsB,EAAI,UAAU,GAAI,EAE1C,IACI,AAAe,cAAX,MAAM,EAAgB,IAE9B,EAAiB,IAAI,CAAC,CACpB,GAAI,EAAI,EAAE,CACV,UAAW,EAAI,KAAK,EAAE,MAAQ,eAC9B,cAAe,gBACf,WAAY,EAAI,UAAU,EAAI,EAC9B,OAAQ,EAAI,MAAM,CAClB,WAAY,EAAI,UAAU,CAC1B,UAAU,CACZ,EACF,EACF,CAGA,GAAI,EAAkB,MAAM,CAAG,EAAG,CAChC,GAAM,CAAE,KAAM,CAAU,CAAE,CAAG,MAAM,EAChC,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;;;YAIT,CAAC,EACA,EAAE,CAAC,cAAe,GAClB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GACvC,KAAK,CAAC,IAER,CAAC,GAAc,EAAA,AAAE,EAAE,OAAO,CAAC,AAAC,IACvB,CAAC,YAAa,SAAU,SAAU,SAAS,CAAC,QAAQ,CAAC,EAAI,MAAM,GAAG,AACpE,IAAyB,EAAI,UAAU,GAAI,EAE7C,IACmB,YAAf,EAAI,MAAM,EAAgB,IAE9B,EAAiB,IAAI,CAAC,CACpB,GAAI,EAAI,EAAE,CACV,UAAW,EAAI,KAAK,EAAE,MAAQ,eAC9B,cAAe,EAAI,SAAS,EAAE,YAAc,SAC5C,WAAY,EAAI,UAAU,EAAI,EAC9B,OAAQ,EAAI,MAAM,CAClB,WAAY,EAAI,UAAU,CAC1B,UAAU,CACZ,EACF,EACF,CAGA,EAAiB,IAAI,CAAC,CAAC,EAAG,IACxB,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,IAEnE,EAAuB,EAAiB,KAAK,CAAC,EAAG,IAGjD,GAAM,CAAE,KAAM,CAAU,CAAE,CAAG,MAAM,EAChC,IAAI,CAAC,wBACL,MAAM,CAAC,kEACP,EAAE,CAAC,wBAAyB,GAC5B,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE1C,EAAuB,GAAc,EAAE,EAEvC,IAAM,EAAoB,CAAC,GAAc,EAAE,AAAF,EAAI,MAAM,CAAC,AAAC,GACnD,CAAC,OAAQ,mBAAoB,WAAY,wBAAyB,uBAAuB,CAAC,QAAQ,CAAC,EAAE,MAAM,GAC3G,MAAM,CACF,EAAmB,CAAC,GAAc,EAAE,AAAF,EAAI,MAAM,CAAC,AAAC,GAAwB,WAAb,EAAE,MAAM,EAAe,MAAM,CAGxF,EAAiB,EACjB,EAAoB,EACpB,EAAoB,EAElB,CAAE,KAAM,CAAW,CAAE,CAAG,MAAM,EACjC,IAAI,CAAC,kCACL,MAAM,CAAC,0BACP,EAAE,CAAC,wBAAyB,GAE3B,GAAe,EAAY,MAAM,CAAG,GACtC,AADyC,EAC7B,OAAO,CAAC,AAAC,IACnB,IAAM,EAAS,WAAW,EAAE,cAAc,GAAK,EAC/C,OAAQ,EAAE,MAAM,EACd,IAAK,OACH,GAAkB,EAClB,KACF,KAAK,UACH,GAAqB,EACrB,KACF,KAAK,oBACL,IAAK,WACH,GAAqB,CAEzB,CACF,GAGF,EAAW,CACT,aA9JmB,GAAe,gBA+JlC,kBACA,sBACA,qBACA,uBACA,EACA,qBACA,0CACA,mBACA,EACA,iBACA,sCACA,CACF,EACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,0CAA2C,EAC3D,QAAU,CACR,GAAW,EACb,CACF,GAGF,EAAG,CAAC,EAAqB,EAAO,EAE5B,EACF,MACE,CAFS,AAET,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,uCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,4BAKnC,IAAM,EAAmD,CACvD,QAAS,iCACT,UAAW,+BACX,OAAQ,iCACR,OAAQ,mCACR,OAAQ,qCACR,UAAW,6BACX,SAAU,4BACZ,EAEM,EAAgD,CACpD,MAAO,+BACP,KAAM,+BACN,iBAAkB,iCAClB,SAAU,iCACV,sBAAuB,mCACvB,qBAAsB,mCACtB,OAAQ,qCACR,QAAS,6BACT,WAAY,4BACd,EAEM,EAAgD,CACpD,MAAO,QACP,KAAM,OACN,iBAAkB,mBAClB,SAAU,WACV,sBAAuB,yBACvB,qBAAsB,0BACtB,OAAQ,SACR,QAAS,UACT,WAAY,YACd,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,iCAGhF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,KAAK,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAC/D,GAAQ,YAAc,GAAQ,MAAQ,EAAQ,WAAW,MAG9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACZ,GAAQ,SACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,EAAS,kBAAoB,YAC9D,EAAO,OAAO,CAAC,OAAO,CAAC,KAAM,KAAK,WAAW,KAGjD,GAAQ,YACP,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CACJ,QAAQ,UACR,UACwB,aAAtB,EAAO,UAAU,CACb,qCACsB,YAAtB,EAAO,UAAU,CACjB,qCACA,6CAEP,QACO,EAAO,UAAU,UAO9B,GAA4B,WAAlB,EAAO,MAAM,EACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,kBAAoB,cAAA,CAAe,UAClF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,WAAW,CAAA,CAAC,UAAU,6BAEzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,WAAE,WAC3C,YAAlB,EAAO,MAAM,CAAiB,mBAAqB,cAE9D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAChD,YAAlB,EAAO,MAAM,CACV,kGACA,4GASf,GAAW,EAAQ,iBAAiB,CAAG,GACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAC,qBAAqB,EAAE,EAAS,mBAAqB,eAAA,CAAgB,UACrF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,8BAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,WACnE,EAAQ,iBAAiB,CAAC,qBAAiD,IAA9B,EAAQ,iBAAiB,CAAS,IAAM,MAExF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oDAK3E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,OAAO,CAAA,CAAA,WACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,iDAAuC,kBAEhD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,6BASlC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE3E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,GAAS,cAAgB,IAE5B,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,cAC/B,GAAS,CADwC,cACvB,EAAE,CADsC,0BAMzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,yBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,GAAS,qBAAuB,IAEnC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,cAC/B,GAAS,CADwC,gBACrB,CADsC,CACpC,6BAKrC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,uBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,iCAAiC,CAAC,UAChD,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAS,uBAAyB,KAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,YAMzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,oBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE/E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAS,oBAAsB,KAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,UAQ1E,CAAC,GAAS,iBAAkB,CAAC,EAAK,EAAD,CAAU,oBAAqB,CAAC,EAAK,EAAD,CAAU,oBAAqB,CAAC,CAAI,GACxG,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,wBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,+CAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,mCAI5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,eAAe,EAAE,EAAS,aAAe,cAAA,CAAe,WACvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,SACxF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CACV,CAAA,EAAA,EAAA,cAAc,AAAd,EAAe,GAAS,gBAAkB,QAG/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,eAAe,EAAE,EAAS,aAAe,aAAA,CAAc,WACtE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,YACxF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2CACV,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAS,mBAAqB,QAGlD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,eAAe,EAAE,EAAS,aAAe,cAAA,CAAe,WACvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,YACxF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CACV,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,GAAS,mBAAqB,gBAS1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,YACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4BAEtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC1E,GAAS,oBAAsB,IAElC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,WAAE,wBAC/C,GAAS,sBAAwB,EAAE,yBAOnE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,YACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,+BAE1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC1E,GAAS,kBAAoB,IAEhC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,6CAUjF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,uDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,wBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,oCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAA,CAAA,WACvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,gDAAsC,WAE/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,yBAI5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACsB,IAA/B,EAAoB,MAAM,CACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAW,CAAC,uBAAuB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,GAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,yBAGvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,+CAK9E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAoB,GAAG,CAAC,AAAC,GACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAC,iDAAiD,EAC3D,EAAS,aAAe,aAAA,CACxB,WAEF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,qBAAqB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAC5E,EAAI,SAAS,GAEf,EAAI,QAAQ,EACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,mBAAU,aAKjD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,WAClE,EAAI,aAAa,CAAC,MAAI,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAI,UAAU,QAGxD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAwB,CAAC,EAAI,MAAM,CAAC,EAAI,wCACvD,EAAI,MAAM,KArBR,EAAI,EAAE,UA+BvB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,uDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,yBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,kCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAA,CAAA,WACvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,iDAAuC,WAEhD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,yBAI5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACsB,IAA/B,EAAoB,MAAM,CACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAW,CAAC,uBAAuB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,GAChG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,4BAGvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAgB,KAAK,CAAC,UAAE,gDAK9E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAoB,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GACpC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,CAAC,qCAAqC,EAAE,EAAU,EAAE,CAAA,CAAE,CAC5D,UAAW,CAAC,mEAAmE,EAC7E,EAAS,+BAAiC,+BAAA,CAC1C,WAEF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,WACnE,EAAU,cAAc,CAAC,OAAO,CAAC,KAAM,KAAK,OAAO,CAAC,QAAS,GAAK,EAAE,WAAW,IAAI,gBAEtF,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,WAAE,eACxD,CAAC,EAAU,sBAAsB,CAAG,GAAA,CAAG,CAAE,OAAO,CAAC,GAAG,UAGrE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAW,CAAqB,CAAC,EAAU,MAAM,CAAC,EAAI,wCAC1D,CAAqB,CAAC,EAAU,MAAM,CAAC,EAAI,EAAU,MAAM,KAfzD,EAAU,EAAE,aA0B/B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,aACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,EAAS,aAAe,YAAI,kBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,kCAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,0CACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,YACtB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,4BAGT,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,gDACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,6BAIZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,sCACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,YACrB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,sBAGV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,OAAO,CAAA,CAAA,EAAC,UAAU,sCAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,iDACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,YACzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,4BAQhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAG,EAAS,oCAAsC,6BAAA,CAA8B,UAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,yBAEvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,oCAG1E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UACpE,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WAAE,2BAAwB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,aAAiB,qCAAkC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,aAAiB,OAE9G,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WAAE,2BAAwB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,aAAiB,+DASrE,CCpvBA,IAAA,GAAA,EAAA,CAAA,CAAA,QCKA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAN,EAAM,CAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAjB,AAAiB,CAAA,AAAjB,CAAiB,AAAjB,CAAiB,CAAA,CAAA,CAAA,CAAA,GAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAlBJ,CAClC,AAiB0D,CAjBzD,AAiByD,CAjBzD,AAiByD,CAjBzD,AAiByD,CAjBzD,AAiByD,CAjBzD,AAiByD,CAjBzD,AAiByD,CAjBzD,AAiByD,CAjBzD,AAAQ,AAiBiD,CAjBjD,AAAE,AAiB+C,CAAU,CAAA,AAjBtD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAgB,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAC7C,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAW,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CACxC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAkB,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAC/C,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,AAAR,CAAU,AAAF,EAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAY,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAC3C,EDuBM,GAA6E,CACjF,MAAO,EAAA,SAAS,CAChB,SAAU,EAAA,IAAI,CACd,SAAU,EAAA,SAAS,CACnB,WAAY,EAAA,QAAQ,CACpB,QAAS,EAAA,KAAK,CACd,mBAAoB,EAAA,SAAS,CAC7B,OAAQ,GAAA,KACV,AADe,EAGT,GAAyC,CAC7C,MAAO,cACP,SAAU,eACV,SAAU,gBACV,WAAY,gBACZ,QAAS,cACT,mBAAoB,cACpB,OAAQ,eACV,EAOA,eAAe,GAAwB,CAAc,EAKnD,GAAI,CACF,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAGvB,CAAE,KAAM,CAAa,CAAE,CAAG,MAAM,EACnC,IAAI,CAAC,kBACL,MAAM,CAAC,eACP,EAAE,CAAC,UAAW,GACd,KAAK,CAAC,GAET,GAAI,CAAC,GAA0C,IAAzB,EAAc,MAAM,CAAQ,CAEhD,GAAM,CAAE,KAAM,CAAa,CAAE,CAAG,MAAM,EACnC,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,EAAE,CAAC,CAAC,qEAAqE,EAAE,EAAO,CAAC,CAAC,EACpF,KAAK,CAAC,GAET,MAAO,CAAE,gBAAgB,EAAO,WAAY,KAAM,gBAAiB,CAAE,CACvE,CAEA,IAAM,EAAa,CAAa,CAAC,EAAE,CAAC,WAAW,CAGzC,CAAE,KAAM,CAAa,OAAE,CAAK,CAAE,CAAG,MAAM,EAC1C,IAAI,CAAC,iBACL,MAAM,CAAC,KAAM,CAAE,MAAO,QAAS,MAAM,CAAK,GAC1C,EAAE,CAAC,cAAe,GAClB,EAAE,CAAC,SAAU,CAAC,SAAU,SAAU,SAAU,UAAU,EAEzD,MAAO,CACL,eAAgB,CAAC,IAAS,CAAC,CAAI,aAC/B,EACA,gBAAiB,GAAS,CAC5B,CACF,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,8BAA+B,GACtC,CAAE,gBAAgB,EAAO,WAAY,KAAM,gBAAiB,CAAE,CACvE,CACF,CAEO,SAAS,KACd,GAAM,eAAE,CAAa,CAAE,UAAQ,CAAE,OAAK,CAAE,CAAG,CAAA,EAAA,EAAA,UAAA,AAAU,IAC/C,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IACpB,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC9C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAI1C,MACJ,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAiC,WAGrE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACR,AAMA,eANe,EACb,IAAM,EAAW,CAAA,EAAA,EAAA,YAAY,AAAZ,IACX,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GACtD,EAAU,GAAM,IAAM,MACtB,GAAe,EACjB,GAEF,EAAG,EAAE,EAGL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MAUR,AATA,eAAe,EACR,GAAW,IAGmB,GAHpB,QAAgB,CAG3B,EAAc,YAAY,EAAiD,eAA/B,EAAc,YAAY,AAAK,GAAc,AAE3F,EADa,MAAM,GAAwB,GAG/C,GAEF,CAJwB,CAIrB,CAAC,EAAQ,EAAc,EAG1B,IAAM,EAAmB,eAAV,EAGf,GAAI,GAAe,CAAC,EAClB,MACE,CAAA,EAAA,EAAA,EAF+B,EAE/B,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,uCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,4BAMnC,GAAmC,aAA/B,EAAc,YAAY,EAAmB,EAC/C,MACE,AAFqD,AAErD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,WAAY,EAAc,SAAS,CACnC,OAAQ,EACR,QAAS,IAOf,GAAmC,eAA/B,EAAc,YAAY,EAAqB,QAAQ,CAEzD,AAAI,GAAgB,gBAAkB,EAAe,UAAU,CAE3D,CAF6D,AAE7D,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC;;YAEf,EAAE,EACE,wCACA,6FACH;UACH,CAAC,WAEC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,oDAAoD,CAAC,CACpE,MAAO,CACL,gBAAiB,CAAC,oKAAoK,EAAE,EAAS,SAAW,SAAS,qMAAqM,CAAC,AAC7Z,IAGF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC;;oBAEf,EAAE,EACE,mCACA,2CACH;kBACH,CAAC,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CAAe,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,iBAAA,CAAkB,KAErF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,qCAAqC,EAAE,EAAS,gBAAkB,iBAAA,CAAkB,UAAE,qBAGrG,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,gBAAkB,iBAAA,CAAkB,WAAE,gBAC5D,EAAe,eAAe,CAAC,cAA+C,IAAnC,EAAe,eAAe,CAAS,IAAM,YAM5G,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC;;kBAEf,EAAE,EACE,yCACA,2CACH;gBACH,CAAC,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAc,WAC7B,UAAW,CAAC;;;sBAGV,EAAiB,YAAf,EACE,EACE,wDACA,0DACF,EACE,oCACA,sCACL;oBACH,CAAC,WAED,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,iBAER,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAc,YAC7B,UAAW,CAAC;;;sBAGV,EAAiB,aAAf,EACE,EACE,wDACA,0DACF,EACE,oCACA,sCACL;oBACH,CAAC,WAED,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAClB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,4BAQf,AAAe,cACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,aAAc,EAAc,SAAS,CACrC,OAAQ,EACR,QAAS,IAGX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,WAAY,EAAe,UAAU,CACrC,OAAQ,EACR,QAAS,CACP,GAAG,CAAa,CAChB,aAAc,WACd,UAAW,EAAe,UAAU,CACpC,YAAa,gBACf,OASR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,aAAc,EAAc,SAAS,CACrC,OAAQ,EACR,QAAS,IAOf,GAAmC,YAA/B,EAAc,YAAY,EAAkB,QAAQ,CAElD,AAAJ,GAAoB,gBAAkB,EAAe,UAAU,CAE3D,CAF6D,AAE7D,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC;;YAEf,EAAE,EACE,wCACA,6FACH;UACH,CAAC,WAEC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,oDAAoD,CAAC,CACpE,MAAO,CACL,gBAAiB,CAAC,oKAAoK,EAAE,EAAS,SAAW,SAAS,qMAAqM,CAAC,AAC7Z,IAGF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC;;oBAEf,EAAE,EACE,mCACA,2CACH;kBACH,CAAC,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CAAe,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,iBAAA,CAAkB,KAErF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,qCAAqC,EAAE,EAAS,gBAAkB,iBAAA,CAAkB,UAAE,qBAGrG,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAW,CAAC,YAAY,EAAE,EAAS,gBAAkB,iBAAA,CAAkB,WAAE,aAC/D,EAAe,eAAe,CAAC,cAA+C,IAAnC,EAAe,eAAe,CAAS,IAAM,YAMzG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC;;kBAEf,EAAE,EACE,yCACA,2CACH;gBACH,CAAC,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAc,WAC7B,UAAW,CAAC;;;sBAGV,EAAiB,YAAf,EACE,EACE,wDACA,0DACF,EACE,oCACA,sCACL;oBACH,CAAC,WAED,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,iBAER,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAc,YAC7B,UAAW,CAAC;;;sBAGV,EAAE,AAAe,eACb,EACE,wDACA,0DACF,EACE,oCACA,sCACL;oBACH,CAAC,WAED,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAClB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,4BAQA,YAAf,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CACC,UAAW,EAAc,SAAS,CAClC,OAAQ,EACR,QAAS,IAGX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,WAAY,EAAe,UAAU,CACrC,OAAQ,EACR,QAAS,CACP,GAAG,CAAa,CAChB,aAAc,WACd,UAAW,EAAe,UAAU,CACpC,YAAa,gBACf,OASR,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CACC,UAAW,EAAc,SAAS,CAClC,OAAQ,EACR,QAAS,IAMf,GAAmC,WAA/B,EAAc,YAAY,EAAiB,EAC7C,MADqD,AAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CACC,SAAU,EAAc,SAAS,CACjC,OAAQ,EACR,QAAS,IAMf,GAAmC,aAA/B,EAAc,YAAY,EAAmB,EAC/C,MACE,AAFqD,AAErD,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CACC,WAAY,EAAc,SAAS,CACnC,OAAQ,EACR,QAAS,IAMf,GAAmC,uBAA/B,EAAc,YAAY,EAA6B,EACzD,MADiE,AAE/D,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,CACC,oBAAqB,EAAc,SAAS,CAC5C,OAAQ,EACR,QAAS,IAKf,IAAM,EAAa,EAAa,CAAC,EAAc,YAAY,CAAC,EAAI,EAAA,IAAI,CAGpE,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,qBAGhF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,KAAK,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,kCAMtE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,6CAA6C,EAAE,EAAS,oCAAsC,oCAAA,CAAqC,WAClJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,uBAAuB,EAAE,EAAc,CAAC,EAAc,YAAY,CAAC,CAAC,iCAAiC,CAAC,UACrH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAW,UAAU,yBAExB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,UACrE,EAAc,WAAW,GAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UACrC,UAA/B,EAAc,YAAY,CACW,gBAAjC,EAAc,cAAc,EAAuD,AAAjC,UAAc,cAAc,CAAa,MAAQ,EAAc,cAAc,EAAE,cAClI,EAAc,YAAY,CAAC,OAAO,CAAC,IAAK,KAAK,WAAW,cAOpE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEACZ,EAAS,GAAG,CAAC,AAAC,IACb,IAAM,EAAO,EAAa,CAAC,EAAQ,YAAY,CAAC,EAAI,EAAA,IAAI,CAClD,EAAW,GAAe,YAAc,EAAQ,SAAS,CAE/D,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAEH,UAAW,CAAA,EAAG,EAAS,6BAA+B,2BAA2B,CAAC,EAAE,EAAW,uBAAyB,GAAA,CAAI,WAE5H,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,kDACpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,uBAAuB,EAAE,EAAc,CAAC,EAAQ,YAAY,CAAC,CAAC,iCAAiC,CAAC,UAC/G,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAU,yBAElB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,aAAe,gBAAA,CAAiB,UACvE,EAAQ,WAAW,GAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAW,EAAS,gBAAkB,yBAC3B,UAAzB,EAAQ,YAAY,CACW,gBAA3B,EAAQ,cAAc,EAAiD,QAA3B,EAAQ,cAAc,CAAa,MAAQ,EAAQ,cAAc,CAC9G,EAAQ,YAAY,CAAC,OAAO,CAAC,IAAK,UAGzC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,YAAY,UAAU,wCAA+B,cAKxE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAQ,QAAQ,EACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,EAAS,gCAAkC,YAAI,aAIpF,EAAQ,uBAAuB,EAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,EAAS,gCAAkC,YAAI,gBAIpF,EAAQ,UAAU,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAW,EAAS,gCAAkC,YAAI,mBApCpF,EAAQ,SAAS,CA4C5B,KAIF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,qCACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,kBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,GAAA,WAAW,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAEjF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,MACjF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,KAMzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,qCACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,iBAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,MACjF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,IAMzE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,EAAS,6BAA+B,qCACvD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAW,CAAC,oBAAoB,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,cAG3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,MAE9E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,mBAAmB,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,MACjF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,QAAQ,EAAE,SAAS,aAAqC,KAAnB,iBAAiB,OAQ1E,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAG,EAAS,oCAAsC,6BAAA,CAA8B,UAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,yBAEvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,YAAY,EAAE,EAAS,aAAe,gBAAA,CAAiB,UAAE,uBAG1E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,QAAQ,EAAE,EAAS,gBAAkB,gBAAA,CAAiB,UAAE,gFAUzF","ignoreList":[10]}