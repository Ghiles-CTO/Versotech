module.exports=[772998,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(983639),e=a.i(429770),f=a.i(948624),g=a.i(256832),h=a.i(895834),i=a.i(311449),j=a.i(579119),k="Switch",[l,m]=(0,f.createContextScope)(k),[n,o]=l(k),p=c.forwardRef((a,f)=>{let{__scopeSwitch:h,name:i,checked:l,defaultChecked:m,required:o,disabled:p,value:q="on",onCheckedChange:r,form:u,...v}=a,[w,x]=c.useState(null),y=(0,e.useComposedRefs)(f,a=>x(a)),z=c.useRef(!1),A=!w||u||!!w.closest("form"),[B,C]=(0,g.useControllableState)({prop:l,defaultProp:m??!1,onChange:r,caller:k});return(0,b.jsxs)(n,{scope:h,checked:B,disabled:p,children:[(0,b.jsx)(j.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":o,"data-state":t(B),"data-disabled":p?"":void 0,disabled:p,value:q,...v,ref:y,onClick:(0,d.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,b.jsx)(s,{control:w,bubbles:!z.current,name:i,value:q,checked:B,required:o,disabled:p,form:u,style:{transform:"translateX(-100%)"}})]})});p.displayName=k;var q="SwitchThumb",r=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=o(q,d);return(0,b.jsx)(j.Primitive.span,{"data-state":t(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});r.displayName=q;var s=c.forwardRef(({__scopeSwitch:a,control:d,checked:f,bubbles:g=!0,...j},k)=>{let l=c.useRef(null),m=(0,e.useComposedRefs)(l,k),n=(0,h.usePrevious)(f),o=(0,i.useSize)(d);return c.useEffect(()=>{let a=l.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==f&&b){let c=new Event("click",{bubbles:g});b.call(a,f),a.dispatchEvent(c)}},[n,f,g]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:f,...j,tabIndex:-1,ref:m,style:{...j.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function t(a){return a?"checked":"unchecked"}s.displayName="SwitchBubbleInput";var u=a.i(888987);let v=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(p,{className:(0,u.cn)("peer inline-flex h-7 md:h-6 w-12 md:w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...c,ref:d,children:(0,b.jsx)(r,{className:(0,u.cn)("pointer-events-none block h-6 w-6 md:h-5 md:w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));v.displayName=p.displayName,a.s(["Switch",()=>v],772998)},468095,a=>{"use strict";let b=(0,a.i(95799).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],468095)},134303,a=>{"use strict";let b=(0,a.i(95799).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],134303)},405398,a=>{"use strict";let b=(0,a.i(95799).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],405398)},191675,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(888987);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},425622,a=>{"use strict";let b=(0,a.i(95799).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],425622)},625473,a=>{"use strict";let b=(0,a.i(95799).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],625473)},439467,a=>{"use strict";let b=(0,a.i(95799).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>b],439467)},799373,a=>{"use strict";let b=(0,a.i(95799).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],799373)},698004,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(169091),e=a.i(601527),f=a.i(165936),g=a.i(470305),h=a.i(421908),i=a.i(663475),j=a.i(249464),k=a.i(951870),l=a.i(772998),m=a.i(3321),n=a.i(439467),o=a.i(325866),p=a.i(871057),q=a.i(899750);let r=f.z.object({email:f.z.string().email("Please enter a valid email address"),display_name:f.z.string().min(2,"Display name must be at least 2 characters"),title:f.z.string().optional(),role:f.z.string(),is_primary:f.z.boolean(),is_signatory:f.z.boolean(),can_sign:f.z.boolean()}),s={investor:"Investor",arranger:"Arranger",lawyer:"Law Firm",introducer:"Introducer",partner:"Partner",commercial_partner:"Commercial Partner"},t={investor:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],arranger:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],lawyer:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],partner:[{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],introducer:[{value:"admin",label:"Admin"},{value:"contact",label:"Contact"},{value:"payment_contact",label:"Payment Contact"},{value:"legal_contact",label:"Legal Contact"}],commercial_partner:[{value:"admin",label:"Admin"},{value:"contact",label:"Contact"},{value:"billing_contact",label:"Billing Contact"},{value:"technical_contact",label:"Technical Contact"}]},u={investor:"member",arranger:"member",lawyer:"member",partner:"member",introducer:"contact",commercial_partner:"contact"};function v({entityType:a,entityId:f,entityName:v,open:w,onOpenChange:x,onSuccess:y}){let[z,A]=(0,c.useState)(!1),B=t[a],C=u[a],{register:D,handleSubmit:E,reset:F,watch:G,setValue:H,formState:{errors:I}}=(0,d.useForm)({resolver:(0,e.zodResolver)(r),defaultValues:{email:"",display_name:"",title:"",role:C,is_primary:!1,is_signatory:!1,can_sign:!1}}),J=G("is_primary");G("is_signatory");let K=G("can_sign"),L=G("role"),M=async b=>{A(!0);try{let c=await fetch("/api/admin/entity-invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_type:a,entity_id:f,...b})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to invite user");q.toast.success(d.message||`User invited to ${v}`),F(),x(!1),y?.()}catch(a){console.error("Invite error:",a),q.toast.error(a instanceof Error?a.message:"Failed to invite user")}finally{A(!1)}},N=()=>{F(),x(!1)};return(0,b.jsx)(g.Dialog,{open:w,onOpenChange:N,children:(0,b.jsxs)(g.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(g.DialogHeader,{children:[(0,b.jsxs)(g.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Mail,{className:"h-5 w-5"}),"Invite User to ",s[a]]}),(0,b.jsxs)(g.DialogDescription,{children:["Send an invitation email to join ",(0,b.jsx)("span",{className:"font-medium",children:v}),". They will receive instructions to set up their account."]})]}),(0,b.jsxs)("form",{onSubmit:E(M),className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"email",children:"Email Address *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Mail,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{id:"email",type:"email",placeholder:"user@example.com",className:"pl-10",...D("email")})]}),I.email&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:I.email.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"display_name",children:"Display Name *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(o.User,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{id:"display_name",placeholder:"John Smith",className:"pl-10",...D("display_name")})]}),I.display_name&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:I.display_name.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"title",children:"Title (Optional)"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(p.Briefcase,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{id:"title",placeholder:"Managing Director",className:"pl-10",...D("title")})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"role",children:"Role"}),(0,b.jsxs)(k.Select,{value:L,onValueChange:a=>H("role",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select role"})}),(0,b.jsx)(k.SelectContent,{children:B.map(a=>(0,b.jsx)(k.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(j.Label,{htmlFor:"is_primary",className:"text-sm font-medium",children:"Primary Contact"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set as the main point of contact for this entity"})]}),(0,b.jsx)(l.Switch,{id:"is_primary",checked:J,onCheckedChange:a=>H("is_primary",a)})]}),"lawyer"===a&&(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(j.Label,{htmlFor:"can_sign",className:"text-sm font-medium",children:"Can Sign Documents"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Has authority to sign on behalf of the law firm"})]}),(0,b.jsx)(l.Switch,{id:"can_sign",checked:K,onCheckedChange:a=>H("can_sign",a)})]}),(0,b.jsxs)(g.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:N,children:"Cancel"}),(0,b.jsx)(h.Button,{type:"submit",disabled:z,children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Invite..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Mail,{className:"mr-2 h-4 w-4"}),"Send Invitation"]})})]})]})]})})}a.s(["InviteUserDialog",()=>v])}];

//# sourceMappingURL=versotech-portal_9c866225._.js.map