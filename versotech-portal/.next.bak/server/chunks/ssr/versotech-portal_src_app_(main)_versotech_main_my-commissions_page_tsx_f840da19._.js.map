{"version":3,"sources":["../../../../../versotech-portal/src/app/%28main%29/versotech_main/my-commissions/page.tsx","../../../../../versotech-portal/src/components/commissions/submit-invoice-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  TrendingUp,\n  Loader2,\n  AlertCircle,\n  FileText,\n  Clock,\n  CheckCircle,\n  XCircle,\n  CreditCard,\n  Wallet,\n  Upload,\n  Eye,\n  Building2,\n  Handshake,\n  Briefcase,\n  MessageCircle,\n  RefreshCw,\n  X,\n} from 'lucide-react'\nimport type { DateRange } from 'react-day-picker'\nimport { DateRangePicker } from '@/components/ui/date-range-picker'\nimport { cn } from '@/lib/utils'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport { SubmitInvoiceDialog, type CommissionType } from '@/components/commissions/submit-invoice-dialog'\nimport { ViewInvoiceDialog } from '@/components/commissions/view-invoice-dialog'\n\n// ============================================================================\n// Types\n// ============================================================================\n\ntype EntityType = 'partner' | 'introducer' | 'commercial_partner'\n\ntype Commission = {\n  id: string\n  status: string\n  basis_type: string\n  rate_bps: number\n  base_amount: number | null\n  accrual_amount: number\n  currency: string\n  payment_due_date: string | null\n  paid_at: string | null\n  notes: string | null\n  created_at: string\n  invoice_id: string | null\n  rejection_reason: string | null\n  rejected_by: string | null\n  rejected_at: string | null\n  deal?: {\n    id: string\n    name: string\n    company_name: string | null\n  }\n  arranger?: {\n    id: string\n    legal_name: string\n  }\n}\n\ntype Summary = {\n  total_owed: number\n  total_paid: number\n  pending_invoice: number\n  invoiced: number\n  currency: string\n}\n\n// ============================================================================\n// Constants\n// ============================================================================\n\nconst STATUS_STYLES: Record<string, string> = {\n  accrued: 'bg-blue-100 text-blue-800',\n  invoice_requested: 'bg-yellow-100 text-yellow-800',\n  invoice_submitted: 'bg-indigo-100 text-indigo-800',\n  invoiced: 'bg-orange-100 text-orange-800',\n  paid: 'bg-green-100 text-green-800',\n  cancelled: 'bg-red-100 text-red-800',\n  rejected: 'bg-red-100 text-red-800 border border-red-300',\n}\n\nconst STATUS_ICONS: Record<string, React.ComponentType<{ className?: string }>> = {\n  accrued: Clock,\n  invoice_requested: FileText,\n  invoice_submitted: FileText,\n  invoiced: FileText,\n  paid: CheckCircle,\n  cancelled: XCircle,\n  rejected: XCircle,\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Status', value: 'all' },\n  { label: 'Invoice Requested', value: 'invoice_requested' },\n  { label: 'Invoice Submitted', value: 'invoice_submitted' },\n  { label: 'Invoiced', value: 'invoiced' },\n  { label: 'Paid', value: 'paid' },\n  { label: 'Accrued', value: 'accrued' },\n  { label: 'Rejected', value: 'rejected' },\n  { label: 'Cancelled', value: 'cancelled' },\n]\n\nconst ENTITY_CONFIG: Record<EntityType, {\n  table: string\n  userTable: string\n  entityIdField: string\n  label: string\n  icon: React.ComponentType<{ className?: string }>\n  commissionType: CommissionType\n}> = {\n  partner: {\n    table: 'partner_commissions',\n    userTable: 'partner_users',\n    entityIdField: 'partner_id',\n    label: 'Partner',\n    icon: Briefcase,\n    commissionType: 'partner',\n  },\n  introducer: {\n    table: 'introducer_commissions',\n    userTable: 'introducer_users',\n    entityIdField: 'introducer_id',\n    label: 'Introducer',\n    icon: Handshake,\n    commissionType: 'introducer',\n  },\n  commercial_partner: {\n    table: 'commercial_partner_commissions',\n    userTable: 'commercial_partner_users',\n    entityIdField: 'commercial_partner_id',\n    label: 'Commercial Partner',\n    icon: Building2,\n    commissionType: 'commercial-partner',\n  },\n}\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nexport default function MyCommissionsPage() {\n  const [commissions, setCommissions] = useState<Commission[]>([])\n  const [summary, setSummary] = useState<Summary>({\n    total_owed: 0,\n    total_paid: 0,\n    pending_invoice: 0,\n    invoiced: 0,\n    currency: 'USD',\n  })\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [dateRange, setDateRange] = useState<DateRange | undefined>(undefined)\n\n  // Entity type detection\n  const [entityType, setEntityType] = useState<EntityType | null>(null)\n  const [entityId, setEntityId] = useState<string | null>(null)\n\n  // Dialog state\n  const [submitInvoiceOpen, setSubmitInvoiceOpen] = useState(false)\n  const [viewInvoiceOpen, setViewInvoiceOpen] = useState(false)\n  const [selectedCommission, setSelectedCommission] = useState<Commission | null>(null)\n\n  // ============================================================================\n  // Data Fetching\n  // ============================================================================\n\n  const fetchCommissions = async () => {\n    try {\n      setLoading(true)\n      const supabase = createClient()\n\n      const { data: { user } } = await supabase.auth.getUser()\n      if (!user) {\n        setError('Not authenticated')\n        return\n      }\n\n      // Detect entity type by checking all user tables in parallel\n      const [partnerResult, introducerResult, cpResult] = await Promise.all([\n        supabase.from('partner_users').select('partner_id').eq('user_id', user.id).maybeSingle(),\n        supabase.from('introducer_users').select('introducer_id').eq('user_id', user.id).maybeSingle(),\n        supabase.from('commercial_partner_users').select('commercial_partner_id').eq('user_id', user.id).maybeSingle(),\n      ])\n\n      // Determine entity type and ID\n      let detectedType: EntityType | null = null\n      let detectedId: string | null = null\n\n      if (partnerResult.data?.partner_id) {\n        detectedType = 'partner'\n        detectedId = partnerResult.data.partner_id\n      } else if (introducerResult.data?.introducer_id) {\n        detectedType = 'introducer'\n        detectedId = introducerResult.data.introducer_id\n      } else if (cpResult.data?.commercial_partner_id) {\n        detectedType = 'commercial_partner'\n        detectedId = cpResult.data.commercial_partner_id\n      }\n\n      if (!detectedType || !detectedId) {\n        setError('You are not registered as a partner, introducer, or commercial partner')\n        return\n      }\n\n      setEntityType(detectedType)\n      setEntityId(detectedId)\n\n      const config = ENTITY_CONFIG[detectedType]\n\n      // Fetch commissions for this entity\n      const { data: commissionsData, error: commissionsError } = await supabase\n        .from(config.table)\n        .select(`\n          id,\n          status,\n          basis_type,\n          rate_bps,\n          base_amount,\n          accrual_amount,\n          currency,\n          payment_due_date,\n          paid_at,\n          notes,\n          created_at,\n          invoice_id,\n          rejection_reason,\n          rejected_by,\n          rejected_at,\n          deal:deals(id, name, company_name),\n          arranger:arranger_entities(id, legal_name)\n        `)\n        .eq(config.entityIdField, detectedId)\n        .order('created_at', { ascending: false })\n\n      if (commissionsError) {\n        console.error('[MyCommissionsPage] Error:', commissionsError)\n        throw commissionsError\n      }\n\n      // Transform data (handle joined relations)\n      const transformed = (commissionsData || []).map((c: any) => ({\n        ...c,\n        deal: Array.isArray(c.deal) ? c.deal[0] : c.deal,\n        arranger: Array.isArray(c.arranger) ? c.arranger[0] : c.arranger,\n      }))\n\n      setCommissions(transformed)\n\n      // Calculate summary\n      const summaryData: Summary = {\n        total_owed: 0,\n        total_paid: 0,\n        pending_invoice: 0,\n        invoiced: 0,\n        currency: 'USD',\n      }\n\n      transformed.forEach((c: Commission) => {\n        const amount = Number(c.accrual_amount) || 0\n        if (c.currency) summaryData.currency = c.currency\n\n        if (c.status === 'paid') {\n          summaryData.total_paid += amount\n        } else if (!['cancelled', 'rejected'].includes(c.status)) {\n          summaryData.total_owed += amount\n        }\n\n        if (c.status === 'invoice_requested') {\n          summaryData.pending_invoice += amount\n        }\n        if (c.status === 'invoice_submitted' || c.status === 'invoiced') {\n          summaryData.invoiced += amount\n        }\n      })\n\n      setSummary(summaryData)\n      setError(null)\n    } catch (err) {\n      console.error('[MyCommissionsPage] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load commissions')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchCommissions()\n  }, [])\n\n  // ============================================================================\n  // Event Handlers\n  // ============================================================================\n\n  const handleSubmitInvoice = (commission: Commission) => {\n    setSelectedCommission(commission)\n    setSubmitInvoiceOpen(true)\n  }\n\n  const handleViewInvoice = (commission: Commission) => {\n    setSelectedCommission(commission)\n    setViewInvoiceOpen(true)\n  }\n\n  const handleInvoiceSuccess = () => {\n    fetchCommissions()\n  }\n\n  // ============================================================================\n  // Filtered Data\n  // ============================================================================\n\n  const filteredCommissions = commissions.filter(c => {\n    // Status filter\n    if (statusFilter !== 'all' && c.status !== statusFilter) return false\n\n    // Date range filter (PRD Row 88)\n    if (dateRange?.from || dateRange?.to) {\n      const commissionDate = new Date(c.created_at)\n      if (dateRange.from && commissionDate < dateRange.from) return false\n      if (dateRange.to) {\n        // Include the entire end date (set to end of day)\n        const endOfDay = new Date(dateRange.to)\n        endOfDay.setHours(23, 59, 59, 999)\n        if (commissionDate > endOfDay) return false\n      }\n    }\n\n    return true\n  })\n\n  // ============================================================================\n  // Loading & Error States\n  // ============================================================================\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        <span className=\"ml-3 text-muted-foreground\">Loading commissions...</span>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-16\">\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Commissions</h3>\n        <p className=\"text-muted-foreground\">{error}</p>\n      </div>\n    )\n  }\n\n  const config = entityType ? ENTITY_CONFIG[entityType] : null\n  const EntityIcon = config?.icon || Briefcase\n\n  // ============================================================================\n  // Render\n  // ============================================================================\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">My Commissions</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            View and manage your commission payments\n          </p>\n        </div>\n        {config && (\n          <Badge variant=\"secondary\" className=\"flex items-center gap-1\">\n            <EntityIcon className=\"h-3 w-3\" />\n            {config.label}\n          </Badge>\n        )}\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Wallet className=\"h-4 w-4\" />Total Owed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-600\">\n              {formatCurrency(summary.total_owed, summary.currency)}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Pending payment</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CreditCard className=\"h-4 w-4\" />Total Paid\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">\n              {formatCurrency(summary.total_paid, summary.currency)}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Completed</p>\n          </CardContent>\n        </Card>\n        <Card className=\"border-yellow-200 bg-yellow-50/50 dark:bg-yellow-950/20\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200 flex items-center gap-2\">\n              <FileText className=\"h-4 w-4\" />Invoice Requested\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-yellow-700 dark:text-yellow-300\">\n              {formatCurrency(summary.pending_invoice, summary.currency)}\n            </div>\n            <p className=\"text-xs text-yellow-600 dark:text-yellow-400 mt-1\">Submit your invoice</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <TrendingUp className=\"h-4 w-4\" />Invoiced\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">\n              {formatCurrency(summary.invoiced, summary.currency)}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Awaiting payment</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Alert for pending invoices */}\n      {summary.pending_invoice > 0 && (\n        <Card className=\"border-yellow-400/50 bg-yellow-50 dark:bg-yellow-950/30\">\n          <CardContent className=\"py-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 rounded-lg bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center\">\n                <Upload className=\"h-5 w-5 text-yellow-600 dark:text-yellow-400\" />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-medium text-yellow-800 dark:text-yellow-200\">Action Required</h3>\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  You have {formatCurrency(summary.pending_invoice, summary.currency)} in commissions awaiting your invoice.\n                  Submit your invoices to receive payment.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Alert for rejected invoices */}\n      {commissions.some(c => c.status === 'rejected') && (\n        <Card className=\"border-red-400/50 bg-red-50 dark:bg-red-950/30\">\n          <CardContent className=\"py-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 rounded-lg bg-red-100 dark:bg-red-900 flex items-center justify-center\">\n                <MessageCircle className=\"h-5 w-5 text-red-600 dark:text-red-400\" />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-medium text-red-800 dark:text-red-200\">Invoice Rejected - Action Required</h3>\n                <p className=\"text-sm text-red-700 dark:text-red-300\">\n                  One or more of your invoices has been rejected. Please review the feedback below and resubmit.\n                </p>\n                <div className=\"mt-2 space-y-2\">\n                  {commissions.filter(c => c.status === 'rejected').map(c => (\n                    <div key={c.id} className=\"text-sm bg-red-100 dark:bg-red-900/50 p-2 rounded flex items-start gap-2\">\n                      <XCircle className=\"h-4 w-4 mt-0.5 flex-shrink-0 text-red-600 dark:text-red-400\" />\n                      <div>\n                        <span className=\"font-medium\">{c.deal?.name || 'Commission'}</span>\n                        {c.rejection_reason && (\n                          <p className=\"text-red-600 dark:text-red-400 mt-1\">&ldquo;{c.rejection_reason}&rdquo;</p>\n                        )}\n                        {c.rejected_at && (\n                          <p className=\"text-xs text-red-500 dark:text-red-500 mt-1\">Rejected on {formatDate(c.rejected_at)}</p>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Filters - PRD Row 88: Date range filter */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-wrap gap-4 items-center\">\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-48\">\n                <SelectValue placeholder=\"Filter by status\" />\n              </SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((f) => (\n                  <SelectItem key={f.value} value={f.value}>\n                    {f.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n\n            {/* Date Range Filter - PRD Row 88 */}\n            <div className=\"flex items-center gap-2\">\n              <DateRangePicker\n                value={dateRange}\n                onChange={setDateRange}\n                className=\"w-auto\"\n              />\n              {dateRange && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={() => setDateRange(undefined)}\n                  title=\"Clear date filter\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </Button>\n              )}\n            </div>\n\n            {/* Active filter indicator */}\n            {(statusFilter !== 'all' || dateRange) && (\n              <Button\n                variant=\"link\"\n                size=\"sm\"\n                onClick={() => {\n                  setStatusFilter('all')\n                  setDateRange(undefined)\n                }}\n                className=\"text-muted-foreground\"\n              >\n                Clear all filters\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Commissions Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Commissions</CardTitle>\n          <CardDescription>\n            {filteredCommissions.length} commission{filteredCommissions.length !== 1 ? 's' : ''} found\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredCommissions.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <TrendingUp className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">\n                {statusFilter !== 'all' ? 'No commissions match your filter' : 'No commissions yet'}\n              </p>\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Deal</TableHead>\n                    <TableHead>Arranger</TableHead>\n                    <TableHead>Basis</TableHead>\n                    <TableHead className=\"text-right\">Amount</TableHead>\n                    <TableHead>Due Date</TableHead>\n                    <TableHead>Created</TableHead>\n                    <TableHead className=\"text-right\">Actions</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredCommissions.map((commission) => {\n                    const StatusIcon = STATUS_ICONS[commission.status] || Clock\n                    return (\n                      <TableRow key={commission.id}>\n                        <TableCell>\n                          <Badge\n                            variant=\"secondary\"\n                            className={cn('capitalize', STATUS_STYLES[commission.status])}\n                          >\n                            <StatusIcon className=\"h-3 w-3 mr-1\" />\n                            {commission.status.replace('_', ' ')}\n                          </Badge>\n                        </TableCell>\n                        <TableCell>\n                          {commission.deal ? (\n                            <div>\n                              <div className=\"font-medium text-sm\">{commission.deal.name}</div>\n                              {commission.deal.company_name && (\n                                <div className=\"text-xs text-muted-foreground\">\n                                  {commission.deal.company_name}\n                                </div>\n                              )}\n                            </div>\n                          ) : (\n                            <span className=\"text-muted-foreground text-sm\">—</span>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          <span className=\"text-sm\">\n                            {commission.arranger?.legal_name || '—'}\n                          </span>\n                        </TableCell>\n                        <TableCell className=\"capitalize text-sm\">\n                          {commission.basis_type ? commission.basis_type.replace('_', ' ') : '—'}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          <div className=\"font-medium\">\n                            {formatCurrency(commission.accrual_amount, commission.currency)}\n                          </div>\n                          <div className=\"text-xs text-muted-foreground\">\n                            {commission.rate_bps != null ? `${(commission.rate_bps / 100).toFixed(2)}%` : '—'}\n                          </div>\n                        </TableCell>\n                        <TableCell className=\"text-sm\">\n                          {commission.payment_due_date\n                            ? formatDate(commission.payment_due_date)\n                            : '—'}\n                        </TableCell>\n                        <TableCell className=\"text-sm text-muted-foreground\">\n                          {formatDate(commission.created_at)}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          <div className=\"flex flex-col items-end gap-1\">\n                            <div className=\"flex items-center gap-2\">\n                              {commission.status === 'invoice_requested' && (\n                                <Button\n                                  size=\"sm\"\n                                  onClick={() => handleSubmitInvoice(commission)}\n                                >\n                                  <Upload className=\"h-4 w-4 mr-1\" />\n                                  Submit Invoice\n                                </Button>\n                              )}\n                              {commission.status === 'rejected' && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"destructive\"\n                                  onClick={() => handleSubmitInvoice(commission)}\n                                >\n                                  <RefreshCw className=\"h-4 w-4 mr-1\" />\n                                  Resubmit\n                                </Button>\n                              )}\n                              {(commission.status === 'invoice_submitted' || commission.status === 'invoiced' || commission.status === 'paid') &&\n                                commission.invoice_id && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => handleViewInvoice(commission)}\n                                  className=\"text-blue-600\"\n                                >\n                                  <Eye className=\"h-4 w-4 mr-1\" />\n                                  View Invoice\n                                </Button>\n                              )}\n                              {commission.status === 'paid' && commission.paid_at && (\n                                <span className=\"text-xs text-green-600\">\n                                  Paid {formatDate(commission.paid_at)}\n                                </span>\n                              )}\n                            </div>\n                            {commission.status === 'rejected' && commission.rejection_reason && (\n                              <div className=\"text-xs text-red-600 max-w-48 text-right mt-1\" title={commission.rejection_reason}>\n                                <span className=\"font-medium\">Reason:</span> {commission.rejection_reason.length > 50\n                                  ? `${commission.rejection_reason.slice(0, 50)}...`\n                                  : commission.rejection_reason}\n                              </div>\n                            )}\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    )\n                  })}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Submit Invoice Dialog */}\n      {entityType && config && (\n        <SubmitInvoiceDialog\n          open={submitInvoiceOpen}\n          onOpenChange={setSubmitInvoiceOpen}\n          commission={selectedCommission}\n          commissionType={config.commissionType}\n          onSuccess={handleInvoiceSuccess}\n        />\n      )}\n\n      {/* View Invoice Dialog */}\n      {entityType && config && (\n        <ViewInvoiceDialog\n          open={viewInvoiceOpen}\n          onOpenChange={setViewInvoiceOpen}\n          commission={selectedCommission ? {\n            id: selectedCommission.id,\n            accrual_amount: selectedCommission.accrual_amount,\n            currency: selectedCommission.currency,\n            entity_name: config.label,\n            invoice_id: selectedCommission.invoice_id,\n            deal: selectedCommission.deal ? { name: selectedCommission.deal.name } : undefined,\n          } : null}\n          commissionType={config.commissionType}\n        />\n      )}\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useRef } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Loader2, Upload, FileText, CheckCircle, AlertCircle } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\n\nexport type CommissionType = 'partner' | 'introducer' | 'commercial-partner'\n\ninterface Commission {\n  id: string\n  accrual_amount: number\n  currency: string\n  deal?: {\n    name: string\n  }\n  arranger?: {\n    legal_name: string\n  }\n}\n\ninterface SubmitInvoiceDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  commission: Commission | null\n  commissionType: CommissionType\n  onSuccess: () => void\n}\n\nconst ENTITY_LABELS: Record<CommissionType, string> = {\n  'partner': 'Partner',\n  'introducer': 'Introducer',\n  'commercial-partner': 'Commercial Partner',\n}\n\n/**\n * Generic Submit Invoice Dialog\n * Works for all commission types: partner, introducer, commercial-partner\n * Uploads invoice to storage and updates commission status via unified API\n */\nexport function SubmitInvoiceDialog({\n  open,\n  onOpenChange,\n  commission,\n  commissionType,\n  onSuccess,\n}: SubmitInvoiceDialogProps) {\n  const [submitting, setSubmitting] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    // Validate file type\n    const allowedTypes = ['application/pdf', 'image/jpeg', 'image/png']\n    if (!allowedTypes.includes(file.type)) {\n      setError('Please upload a PDF, JPEG, or PNG file')\n      return\n    }\n\n    // Validate file size (max 10MB)\n    if (file.size > 10 * 1024 * 1024) {\n      setError('File size must be less than 10MB')\n      return\n    }\n\n    setSelectedFile(file)\n    setError(null)\n  }\n\n  const handleSubmit = async () => {\n    if (!commission || !selectedFile) return\n\n    setSubmitting(true)\n    setError(null)\n\n    try {\n      // Build API URL using unified invoice endpoint\n      const apiUrl = `/api/commissions/${commissionType}/${commission.id}/invoice`\n\n      // Create FormData for file upload\n      const formData = new FormData()\n      formData.append('file', selectedFile)\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        body: formData,\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to upload invoice')\n      }\n\n      onSuccess()\n      onOpenChange(false)\n    } catch (err) {\n      console.error('[SubmitInvoiceDialog] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to submit invoice')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handleDialogClose = (open: boolean) => {\n    if (!open) {\n      // Reset form state\n      setSelectedFile(null)\n      setError(null)\n      if (fileInputRef.current) {\n        fileInputRef.current.value = ''\n      }\n    }\n    onOpenChange(open)\n  }\n\n  if (!commission) return null\n\n  const entityLabel = ENTITY_LABELS[commissionType]\n  const formattedAmount = formatCurrency(\n    commission.accrual_amount,\n    commission.currency || 'USD'\n  )\n\n  return (\n    <Dialog open={open} onOpenChange={handleDialogClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <FileText className=\"h-5 w-5\" />\n            Submit Invoice\n          </DialogTitle>\n          <DialogDescription>\n            Upload your invoice for this commission payment.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"py-4 space-y-4\">\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded flex items-start gap-2\">\n              <AlertCircle className=\"h-4 w-4 mt-0.5 flex-shrink-0\" />\n              <span>{error}</span>\n            </div>\n          )}\n\n          {/* Commission Summary */}\n          <div className=\"bg-muted/50 p-4 rounded-lg space-y-2\">\n            {commission.arranger && (\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Arranger:</span>\n                <span className=\"font-medium\">{commission.arranger.legal_name}</span>\n              </div>\n            )}\n            {commission.deal && (\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Deal:</span>\n                <span className=\"font-medium\">{commission.deal.name}</span>\n              </div>\n            )}\n            <div className=\"flex justify-between\">\n              <span className=\"text-muted-foreground\">Amount:</span>\n              <span className=\"font-medium text-primary\">{formattedAmount}</span>\n            </div>\n          </div>\n\n          {/* File Upload */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">Invoice Document *</label>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\".pdf,.jpg,.jpeg,.png\"\n              onChange={handleFileSelect}\n              className=\"hidden\"\n            />\n\n            {selectedFile ? (\n              <div className=\"flex items-center gap-2 p-3 border rounded-lg bg-green-50 border-green-200\">\n                <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                <span className=\"text-sm font-medium text-green-800 flex-1 truncate\">\n                  {selectedFile.name}\n                </span>\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setSelectedFile(null)\n                    if (fileInputRef.current) {\n                      fileInputRef.current.value = ''\n                    }\n                  }}\n                >\n                  Change\n                </Button>\n              </div>\n            ) : (\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={() => fileInputRef.current?.click()}\n                disabled={submitting}\n              >\n                <Upload className=\"h-4 w-4 mr-2\" />\n                Select Invoice (PDF, JPEG, PNG)\n              </Button>\n            )}\n            <p className=\"text-xs text-muted-foreground\">\n              Maximum file size: 10MB\n            </p>\n          </div>\n\n          {/* Info Box */}\n          <div className=\"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 rounded-lg text-sm\">\n            <p className=\"text-blue-800 dark:text-blue-200\">\n              Once submitted, your invoice will be sent to the arranger and the commission\n              status will be updated to \"Invoiced\".\n            </p>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => handleDialogClose(false)} disabled={submitting}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={submitting || !selectedFile}>\n            {submitting ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Uploading...\n              </>\n            ) : (\n              <>\n                <Upload className=\"h-4 w-4 mr-2\" />\n                Submit Invoice\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}