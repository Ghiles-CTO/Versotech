module.exports=[274929,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.HooksClientContext},530136,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.ServerInsertedHtml},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},571370,(a,b,c)=>{"use strict";b.exports=a.r(275099).vendored.contexts.AppRouterContext},491433,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},441664,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},964064,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},990472,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(611038);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},264890,a=>{"use strict";let b=(0,a.i(95799).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],264890)},496392,a=>{"use strict";let b=(0,a.i(95799).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],496392)},835858,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(345711),g=a.r(105931),h=a.r(149883),i=f._(a.r(996444));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},714814,(a,b,c)=>{b.exports=a.r(835858)},686331,a=>{"use strict";let b=(0,a.i(95799).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],686331)},575661,a=>{"use strict";let b=(0,a.i(95799).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["EyeOff",()=>b],575661)},635136,a=>{"use strict";let b=(0,a.i(95799).default)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);a.s(["KeyRound",()=>b],635136)},416616,a=>{"use strict";var b=a.i(352584),c=a.i(611038),d=a.i(289633),e=a.i(284169),f=a.i(421908),g=a.i(663475),h=a.i(249464),i=a.i(58834),j=a.i(3321),k=a.i(264890),l=a.i(575661),m=a.i(496392),n=a.i(635136),o=a.i(686331),p=a.i(714814);function q(){let a=(0,d.useRouter)(),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{let b=(0,i.createClient)(),{data:{user:c}}=await b.auth.getUser();if(!c)return a.replace("/versotech/login");let{data:d}=await b.from("profiles").select("password_set").eq("id",c.id).single();d?.password_set?a.replace("/versotech/staff"):(D(c.email??null),B(!1))})()},[a]);let G=async b=>{if(b.preventDefault(),z(!0),F(null),q.length<8){F({type:"error",text:"Password must be at least 8 characters"}),z(!1);return}if(q!==s){F({type:"error",text:"Passwords do not match"}),z(!1);return}try{let b=(0,i.createClient)(),{error:c}=await b.auth.updateUser({password:q});if(c){console.error("[set-password] Error updating password:",c),F({type:"error",text:c.message}),z(!1);return}let{data:{user:d}}=await b.auth.getUser();d&&await b.from("profiles").update({password_set:!0}).eq("id",d.id),F({type:"success",text:"Password set successfully! Redirecting to login..."}),await b.auth.signOut(),setTimeout(()=>{a.replace("/versotech/login?message=password_set")},2e3)}catch(a){console.error("[set-password] Unexpected error:",a),F({type:"error",text:"An unexpected error occurred. Please try again."}),z(!1)}};return A?(0,b.jsx)("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center",children:(0,b.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-white"})}):(0,b.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#050505] p-4 font-sans text-zinc-100",children:(0,b.jsxs)("div",{className:"w-full max-w-md space-y-8 animate-in fade-in zoom-in-95 duration-700",children:[(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)("div",{className:"relative w-48 h-16",children:(0,b.jsx)(p.default,{src:"/versotech-logo.jpg",alt:"VERSO Tech",fill:!0,className:"object-contain invert",priority:!0})})}),(0,b.jsx)("h1",{className:"text-3xl font-light tracking-tight text-white",children:"Set Your Passkey"}),(0,b.jsx)("p",{className:"text-zinc-500 text-sm tracking-wide uppercase",children:"Complete Account Setup"}),C&&(0,b.jsx)("p",{className:"text-sm text-zinc-600 mt-2 font-mono",children:C})]}),(0,b.jsx)(e.Card,{className:"bg-zinc-900/50 border-white/5 backdrop-blur-sm shadow-2xl shadow-black",children:(0,b.jsxs)(e.CardContent,{className:"p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-emerald-500/80 bg-emerald-500/5 py-2 rounded-md border border-emerald-500/10",children:[(0,b.jsx)(m.Shield,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-xs font-mono uppercase tracking-wider",children:"Secure Connection Established"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-blue-900/20 rounded-lg border border-blue-900/30",children:[(0,b.jsx)(n.KeyRound,{className:"h-5 w-5 text-blue-400"}),(0,b.jsx)("p",{className:"text-sm text-blue-300",children:"Create a secure passkey to access the staff terminal"})]}),E&&(0,b.jsx)("div",{className:`p-3 rounded-md text-sm font-medium border ${"error"===E.type?"bg-red-900/20 border-red-900/50 text-red-400":"bg-emerald-900/20 border-emerald-900/50 text-emerald-400"}`,children:E.text}),(0,b.jsxs)("form",{onSubmit:G,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(h.Label,{className:"text-xs font-semibold text-zinc-500 uppercase",children:"New Passkey"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.Input,{type:u?"text":"password",placeholder:"••••••••",className:"h-11 bg-black/50 border-white/10 text-white placeholder:text-zinc-700 focus:border-white/30 focus:ring-0 transition-all font-mono pr-10",value:q,onChange:a=>r(a.target.value),required:!0,minLength:8}),(0,b.jsx)("button",{type:"button",onClick:()=>v(!u),className:"absolute right-3 top-3 text-zinc-600 hover:text-white transition-colors",children:u?(0,b.jsx)(l.EyeOff,{className:"h-5 w-5"}):(0,b.jsx)(k.Eye,{className:"h-5 w-5"})})]}),(0,b.jsx)("p",{className:"text-xs text-zinc-600 font-mono",children:"Minimum 8 characters"})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)(h.Label,{className:"text-xs font-semibold text-zinc-500 uppercase",children:"Confirm Passkey"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.Input,{type:w?"text":"password",placeholder:"••••••••",className:"h-11 bg-black/50 border-white/10 text-white placeholder:text-zinc-700 focus:border-white/30 focus:ring-0 transition-all font-mono pr-10",value:s,onChange:a=>t(a.target.value),required:!0}),(0,b.jsx)("button",{type:"button",onClick:()=>x(!w),className:"absolute right-3 top-3 text-zinc-600 hover:text-white transition-colors",children:w?(0,b.jsx)(l.EyeOff,{className:"h-5 w-5"}):(0,b.jsx)(k.Eye,{className:"h-5 w-5"})})]})]}),(0,b.jsx)(f.Button,{type:"submit",disabled:y,className:"w-full h-12 bg-white hover:bg-zinc-200 text-black font-medium tracking-wide transition-all mt-4",children:y?(0,b.jsx)(j.Loader2,{className:"h-5 w-5 animate-spin"}):(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Lock,{className:"w-4 h-4"})," SET PASSKEY & CONTINUE"]})})]})]})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-[10px] text-zinc-700 font-mono",children:"SYSTEM VERSION 2.4.0 // AUTHORIZED USE ONLY"})})]})})}function r(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center",children:(0,b.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-white"})}),children:(0,b.jsx)(q,{})})}a.s(["default",()=>r])},142368,a=>{a.v(a=>Promise.resolve().then(()=>a(648232)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__dfb114de._.js.map