module.exports=[474342,a=>{"use strict";let b;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a.i(352584),w=a.i(611038),x=a.i(289633),y=a.i(497412),z=a.i(284169),A=a.i(421908),B=a.i(663475),C=a.i(15788),D=a.i(951870),E=a.i(181608),F=a.i(266828),G=a.i(249464),H=a.i(877918),I=a.i(816854);let J=(0,a.i(95799).default)("flag-triangle-right",[["path",{d:"M6 22V2.8a.8.8 0 0 1 1.17-.71l11.38 5.69a.8.8 0 0 1 0 1.44L6 15.5",key:"kfjsu0"}]]);var K=a.i(3191),L=a.i(292944),M=a.i(405708),N=a.i(487068),O=a.i(257451),P=a.i(105874),Q=a.i(278541),R=a.i(264890),S=a.i(306226),T=a.i(776777);function U(a){let b=Object.prototype.toString.call(a);return"[object Window]"===b||"[object global]"===b}function V(a){return"nodeType"in a}function W(a){var b,c;return a?U(a)?a:V(a)&&null!=(b=null==(c=a.ownerDocument)?void 0:c.defaultView)?b:window:window}function X(a){let{Document:b}=W(a);return a instanceof b}function Y(a){return!U(a)&&a instanceof W(a).HTMLElement}function Z(a){return a instanceof W(a).SVGElement}function $(a){return a?U(a)?a.document:V(a)?X(a)?a:Y(a)||Z(a)?a.ownerDocument:document:document:document}let _=w.useEffect;function aa(a){let b=(0,w.useRef)(a);return _(()=>{b.current=a}),(0,w.useCallback)(function(){for(var a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];return null==b.current?void 0:b.current(...c)},[])}function ab(a,b){void 0===b&&(b=[a]);let c=(0,w.useRef)(a);return _(()=>{c.current!==a&&(c.current=a)},b),c}function ac(a,b){let c=(0,w.useRef)();return(0,w.useMemo)(()=>{let b=a(c.current);return c.current=b,b},[...b])}function ad(a){let b=aa(a),c=(0,w.useRef)(null),d=(0,w.useCallback)(a=>{a!==c.current&&(null==b||b(a,c.current)),c.current=a},[]);return[c,d]}function ae(a){let b=(0,w.useRef)();return(0,w.useEffect)(()=>{b.current=a},[a]),b.current}let af={};function ag(a,b){return(0,w.useMemo)(()=>{if(b)return b;let c=null==af[a]?0:af[a]+1;return af[a]=c,a+"-"+c},[a,b])}function ah(a){return function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return d.reduce((b,c)=>{for(let[d,e]of Object.entries(c)){let c=b[d];null!=c&&(b[d]=c+a*e)}return b},{...b})}}let ai=ah(1),aj=ah(-1);function ak(a){if(!a)return!1;let{KeyboardEvent:b}=W(a.target);return b&&a instanceof b}function al(a){if(function(a){if(!a)return!1;let{TouchEvent:b}=W(a.target);return b&&a instanceof b}(a)){if(a.touches&&a.touches.length){let{clientX:b,clientY:c}=a.touches[0];return{x:b,y:c}}else if(a.changedTouches&&a.changedTouches.length){let{clientX:b,clientY:c}=a.changedTouches[0];return{x:b,y:c}}}return"clientX"in a&&"clientY"in a?{x:a.clientX,y:a.clientY}:null}let am=Object.freeze({Translate:{toString(a){if(!a)return;let{x:b,y:c}=a;return"translate3d("+(b?Math.round(b):0)+"px, "+(c?Math.round(c):0)+"px, 0)"}},Scale:{toString(a){if(!a)return;let{scaleX:b,scaleY:c}=a;return"scaleX("+b+") scaleY("+c+")"}},Transform:{toString(a){if(a)return[am.Translate.toString(a),am.Scale.toString(a)].join(" ")}},Transition:{toString(a){let{property:b,duration:c,easing:d}=a;return b+" "+c+"ms "+d}}}),an="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",ao={display:"none"};function ap(a){let{id:b,value:c}=a;return w.default.createElement("div",{id:b,style:ao},c)}function aq(a){let{id:b,announcement:c,ariaLiveType:d="assertive"}=a;return w.default.createElement("div",{id:b,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":d,"aria-atomic":!0},c)}let ar=(0,w.createContext)(null),as={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},at={onDragStart(a){let{active:b}=a;return"Picked up draggable item "+b.id+"."},onDragOver(a){let{active:b,over:c}=a;return c?"Draggable item "+b.id+" was moved over droppable area "+c.id+".":"Draggable item "+b.id+" is no longer over a droppable area."},onDragEnd(a){let{active:b,over:c}=a;return c?"Draggable item "+b.id+" was dropped over droppable area "+c.id:"Draggable item "+b.id+" was dropped."},onDragCancel(a){let{active:b}=a;return"Dragging was cancelled. Draggable item "+b.id+" was dropped."}};function au(a){var b;let c,{announcements:d=at,container:e,hiddenTextDescribedById:f,screenReaderInstructions:g=as}=a,{announce:h,announcement:i}=function(){let[a,b]=(0,w.useState)("");return{announce:(0,w.useCallback)(a=>{null!=a&&b(a)},[]),announcement:a}}(),j=ag("DndLiveRegion"),[k,l]=(0,w.useState)(!1);if((0,w.useEffect)(()=>{l(!0)},[]),b=(0,w.useMemo)(()=>({onDragStart(a){let{active:b}=a;h(d.onDragStart({active:b}))},onDragMove(a){let{active:b,over:c}=a;d.onDragMove&&h(d.onDragMove({active:b,over:c}))},onDragOver(a){let{active:b,over:c}=a;h(d.onDragOver({active:b,over:c}))},onDragEnd(a){let{active:b,over:c}=a;h(d.onDragEnd({active:b,over:c}))},onDragCancel(a){let{active:b,over:c}=a;h(d.onDragCancel({active:b,over:c}))}}),[h,d]),c=(0,w.useContext)(ar),(0,w.useEffect)(()=>{if(!c)throw Error("useDndMonitor must be used within a children of <DndContext>");return c(b)},[b,c]),!k)return null;let m=w.default.createElement(w.default.Fragment,null,w.default.createElement(ap,{id:f,value:g.draggable}),w.default.createElement(aq,{id:j,announcement:i}));return e?(0,T.createPortal)(m,e):m}function av(){}function aw(a,b){return(0,w.useMemo)(()=>({sensor:a,options:null!=b?b:{}}),[a,b])}function ax(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(0,w.useMemo)(()=>[...b].filter(a=>null!=a),[...b])}(c=l||(l={})).DragStart="dragStart",c.DragMove="dragMove",c.DragEnd="dragEnd",c.DragCancel="dragCancel",c.DragOver="dragOver",c.RegisterDroppable="registerDroppable",c.SetDroppableDisabled="setDroppableDisabled",c.UnregisterDroppable="unregisterDroppable";let ay=Object.freeze({x:0,y:0});function az(a,b){let{data:{value:c}}=a,{data:{value:d}}=b;return d-c}let aA=a=>{let{collisionRect:b,droppableRects:c,droppableContainers:d}=a,e=[];for(let a of d){let{id:d}=a,f=c.get(d);if(f){let c=function(a,b){let c=Math.max(b.top,a.top),d=Math.max(b.left,a.left),e=Math.min(b.left+b.width,a.left+a.width),f=Math.min(b.top+b.height,a.top+a.height);if(d<e&&c<f){let g=b.width*b.height,h=a.width*a.height,i=(e-d)*(f-c);return Number((i/(g+h-i)).toFixed(4))}return 0}(f,b);c>0&&e.push({id:d,data:{droppableContainer:a,value:c}})}}return e.sort(az)};function aB(a,b){return a&&b?{x:a.left-b.left,y:a.top-b.top}:ay}let aC=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.reduce((a,b)=>({...a,top:a.top+ +b.y,bottom:a.bottom+ +b.y,left:a.left+ +b.x,right:a.right+ +b.x}),{...a})};function aD(a){if(a.startsWith("matrix3d(")){let b=a.slice(9,-1).split(/, /);return{x:+b[12],y:+b[13],scaleX:+b[0],scaleY:+b[5]}}if(a.startsWith("matrix(")){let b=a.slice(7,-1).split(/, /);return{x:+b[4],y:+b[5],scaleX:+b[0],scaleY:+b[3]}}return null}let aE={ignoreTransform:!1};function aF(a,b){void 0===b&&(b=aE);let c=a.getBoundingClientRect();if(b.ignoreTransform){let{transform:b,transformOrigin:d}=W(a).getComputedStyle(a);b&&(c=function(a,b,c){let d=aD(b);if(!d)return a;let{scaleX:e,scaleY:f,x:g,y:h}=d,i=a.left-g-(1-e)*parseFloat(c),j=a.top-h-(1-f)*parseFloat(c.slice(c.indexOf(" ")+1)),k=e?a.width/e:a.width,l=f?a.height/f:a.height;return{width:k,height:l,top:j,right:i+k,bottom:j+l,left:i}}(c,b,d))}let{top:d,left:e,width:f,height:g,bottom:h,right:i}=c;return{top:d,left:e,width:f,height:g,bottom:h,right:i}}function aG(a){return aF(a,{ignoreTransform:!0})}function aH(a,b){let c=[];return a?function d(e){var f,g;let h;if(null!=b&&c.length>=b||!e)return c;if(X(e)&&null!=e.scrollingElement&&!c.includes(e.scrollingElement))return c.push(e.scrollingElement),c;if(!Y(e)||Z(e)||c.includes(e))return c;let i=W(a).getComputedStyle(e);return(e!==a&&(void 0===(f=i)&&(f=W(e).getComputedStyle(e)),h=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(a=>{let b=f[a];return"string"==typeof b&&h.test(b)}))&&c.push(e),void 0===(g=i)&&(g=W(e).getComputedStyle(e)),"fixed"===g.position)?c:d(e.parentNode)}(a):c}function aI(a){let[b]=aH(a,1);return null!=b?b:null}function aJ(a){return U(a)?a.scrollX:a.scrollLeft}function aK(a){return U(a)?a.scrollY:a.scrollTop}function aL(a){return{x:aJ(a),y:aK(a)}}function aM(a){let b={x:0,y:0},c={height:a.clientHeight,width:a.clientWidth},d={x:a.scrollWidth-c.width,y:a.scrollHeight-c.height},e=a.scrollTop<=b.y,f=a.scrollLeft<=b.x;return{isTop:e,isLeft:f,isBottom:a.scrollTop>=d.y,isRight:a.scrollLeft>=d.x,maxScroll:d,minScroll:b}}(d=m||(m={}))[d.Forward=1]="Forward",d[d.Backward=-1]="Backward";let aN={x:.2,y:.2};function aO(a){return a.reduce((a,b)=>ai(a,aL(b)),ay)}function aP(a,b){if(void 0===b&&(b=aF),!a)return;let{top:c,left:d,bottom:e,right:f}=b(a);aI(a)&&(e<=0||f<=0||c>=window.innerHeight||d>=window.innerWidth)&&a.scrollIntoView({block:"center",inline:"center"})}let aQ=[["x",["left","right"],function(a){return a.reduce((a,b)=>a+aJ(b),0)}],["y",["top","bottom"],function(a){return a.reduce((a,b)=>a+aK(b),0)}]];class aR{constructor(a,b){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const c=aH(b),d=aO(c);for(const[b,e,f]of(this.rect={...a},this.width=a.width,this.height=a.height,aQ))for(const a of e)Object.defineProperty(this,a,{get:()=>{let e=f(c),g=d[b]-e;return this.rect[a]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class aS{constructor(a){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var b;return null==(b=this.target)?void 0:b.removeEventListener(...a)})},this.target=a}add(a,b,c){var d;null==(d=this.target)||d.addEventListener(a,b,c),this.listeners.push([a,b,c])}}function aT(a,b){let c=Math.abs(a.x),d=Math.abs(a.y);return"number"==typeof b?Math.sqrt(c**2+d**2)>b:"x"in b&&"y"in b?c>b.x&&d>b.y:"x"in b?c>b.x:"y"in b&&d>b.y}function aU(a){a.preventDefault()}function aV(a){a.stopPropagation()}(e=n||(n={})).Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange",(f=o||(o={})).Space="Space",f.Down="ArrowDown",f.Right="ArrowRight",f.Left="ArrowLeft",f.Up="ArrowUp",f.Esc="Escape",f.Enter="Enter",f.Tab="Tab";let aW={start:[o.Space,o.Enter],cancel:[o.Esc],end:[o.Space,o.Enter,o.Tab]},aX=(a,b)=>{let{currentCoordinates:c}=b;switch(a.code){case o.Right:return{...c,x:c.x+25};case o.Left:return{...c,x:c.x-25};case o.Down:return{...c,y:c.y+25};case o.Up:return{...c,y:c.y-25}}};class aY{constructor(a){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=a;const{event:{target:b}}=a;this.props=a,this.listeners=new aS($(b)),this.windowListeners=new aS(W(b)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(n.Resize,this.handleCancel),this.windowListeners.add(n.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(n.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:a,onStart:b}=this.props,c=a.node.current;c&&aP(c),b(ay)}handleKeyDown(a){if(ak(a)){let{active:b,context:c,options:d}=this.props,{keyboardCodes:e=aW,coordinateGetter:f=aX,scrollBehavior:g="smooth"}=d,{code:h}=a;if(e.end.includes(h))return void this.handleEnd(a);if(e.cancel.includes(h))return void this.handleCancel(a);let{collisionRect:i}=c.current,j=i?{x:i.left,y:i.top}:ay;this.referenceCoordinates||(this.referenceCoordinates=j);let k=f(a,{active:b,context:c.current,currentCoordinates:j});if(k){let b=aj(k,j),d={x:0,y:0},{scrollableAncestors:e}=c.current;for(let c of e){let e=a.code,{isTop:f,isRight:h,isLeft:i,isBottom:j,maxScroll:l,minScroll:m}=aM(c),n=function(a){if(a===document.scrollingElement){let{innerWidth:a,innerHeight:b}=window;return{top:0,left:0,right:a,bottom:b,width:a,height:b}}let{top:b,left:c,right:d,bottom:e}=a.getBoundingClientRect();return{top:b,left:c,right:d,bottom:e,width:a.clientWidth,height:a.clientHeight}}(c),p={x:Math.min(e===o.Right?n.right-n.width/2:n.right,Math.max(e===o.Right?n.left:n.left+n.width/2,k.x)),y:Math.min(e===o.Down?n.bottom-n.height/2:n.bottom,Math.max(e===o.Down?n.top:n.top+n.height/2,k.y))},q=e===o.Right&&!h||e===o.Left&&!i,r=e===o.Down&&!j||e===o.Up&&!f;if(q&&p.x!==k.x){let a=c.scrollLeft+b.x,f=e===o.Right&&a<=l.x||e===o.Left&&a>=m.x;if(f&&!b.y)return void c.scrollTo({left:a,behavior:g});f?d.x=c.scrollLeft-a:d.x=e===o.Right?c.scrollLeft-l.x:c.scrollLeft-m.x,d.x&&c.scrollBy({left:-d.x,behavior:g});break}if(r&&p.y!==k.y){let a=c.scrollTop+b.y,f=e===o.Down&&a<=l.y||e===o.Up&&a>=m.y;if(f&&!b.x)return void c.scrollTo({top:a,behavior:g});f?d.y=c.scrollTop-a:d.y=e===o.Down?c.scrollTop-l.y:c.scrollTop-m.y,d.y&&c.scrollBy({top:-d.y,behavior:g});break}}this.handleMove(a,ai(aj(k,this.referenceCoordinates),d))}}}handleMove(a,b){let{onMove:c}=this.props;a.preventDefault(),c(b)}handleEnd(a){let{onEnd:b}=this.props;a.preventDefault(),this.detach(),b()}handleCancel(a){let{onCancel:b}=this.props;a.preventDefault(),this.detach(),b()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function aZ(a){return!!(a&&"distance"in a)}function a$(a){return!!(a&&"delay"in a)}aY.activators=[{eventName:"onKeyDown",handler:(a,b,c)=>{let{keyboardCodes:d=aW,onActivation:e}=b,{active:f}=c,{code:g}=a.nativeEvent;if(d.start.includes(g)){let b=f.activatorNode.current;return(!b||a.target===b)&&(a.preventDefault(),null==e||e({event:a.nativeEvent}),!0)}return!1}}];class a_{constructor(a,b,c){var d;void 0===c&&(c=function(a){let{EventTarget:b}=W(a);return a instanceof b?a:$(a)}(a.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=a,this.events=b;const{event:e}=a,{target:f}=e;this.props=a,this.events=b,this.document=$(f),this.documentListeners=new aS(this.document),this.listeners=new aS(c),this.windowListeners=new aS(W(f)),this.initialCoordinates=null!=(d=al(e))?d:ay,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:a,props:{options:{activationConstraint:b,bypassActivationConstraint:c}}}=this;if(this.listeners.add(a.move.name,this.handleMove,{passive:!1}),this.listeners.add(a.end.name,this.handleEnd),a.cancel&&this.listeners.add(a.cancel.name,this.handleCancel),this.windowListeners.add(n.Resize,this.handleCancel),this.windowListeners.add(n.DragStart,aU),this.windowListeners.add(n.VisibilityChange,this.handleCancel),this.windowListeners.add(n.ContextMenu,aU),this.documentListeners.add(n.Keydown,this.handleKeydown),b){if(null!=c&&c({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(a$(b)){this.timeoutId=setTimeout(this.handleStart,b.delay),this.handlePending(b);return}if(aZ(b))return void this.handlePending(b)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(a,b){let{active:c,onPending:d}=this.props;d(c,a,this.initialCoordinates,b)}handleStart(){let{initialCoordinates:a}=this,{onStart:b}=this.props;a&&(this.activated=!0,this.documentListeners.add(n.Click,aV,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(n.SelectionChange,this.removeTextSelection),b(a))}handleMove(a){var b;let{activated:c,initialCoordinates:d,props:e}=this,{onMove:f,options:{activationConstraint:g}}=e;if(!d)return;let h=null!=(b=al(a))?b:ay,i=aj(d,h);if(!c&&g){if(aZ(g)){if(null!=g.tolerance&&aT(i,g.tolerance))return this.handleCancel();if(aT(i,g.distance))return this.handleStart()}return a$(g)&&aT(i,g.tolerance)?this.handleCancel():void this.handlePending(g,i)}a.cancelable&&a.preventDefault(),f(h)}handleEnd(){let{onAbort:a,onEnd:b}=this.props;this.detach(),this.activated||a(this.props.active),b()}handleCancel(){let{onAbort:a,onCancel:b}=this.props;this.detach(),this.activated||a(this.props.active),b()}handleKeydown(a){a.code===o.Esc&&this.handleCancel()}removeTextSelection(){var a;null==(a=this.document.getSelection())||a.removeAllRanges()}}let a0={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class a1 extends a_{constructor(a){const{event:b}=a;super(a,a0,$(b.target))}}a1.activators=[{eventName:"onPointerDown",handler:(a,b)=>{let{nativeEvent:c}=a,{onActivation:d}=b;return!!c.isPrimary&&0===c.button&&(null==d||d({event:c}),!0)}}];(g=p||(p={}))[g.RightClick=2]="RightClick";(h=q||(q={}))[h.Pointer=0]="Pointer",h[h.DraggableRect=1]="DraggableRect",(i=r||(r={}))[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder";let a2={x:{[m.Backward]:!1,[m.Forward]:!1},y:{[m.Backward]:!1,[m.Forward]:!1}};(j=s||(s={}))[j.Always=0]="Always",j[j.BeforeDragging=1]="BeforeDragging",j[j.WhileDragging=2]="WhileDragging",(t||(t={})).Optimized="optimized";let a3=new Map;function a4(a,b){return ac(c=>a?c||("function"==typeof b?b(a):a):null,[b,a])}function a5(a){let{callback:b,disabled:c}=a;aa(b);let d=(0,w.useMemo)(()=>{},[c]);return(0,w.useEffect)(()=>()=>null==d?void 0:d.disconnect(),[d]),d}function a6(a){return new aR(aF(a),a)}function a7(a,b,c){void 0===b&&(b=a6);let[d,e]=(0,w.useState)(null);function f(){e(d=>{if(!a)return null;if(!1===a.isConnected){var e;return null!=(e=null!=d?d:c)?e:null}let f=b(a);return JSON.stringify(d)===JSON.stringify(f)?d:f})}let g=function(a){let{callback:b,disabled:c}=a,d=aa(b),e=(0,w.useMemo)(()=>{},[d,c]);return(0,w.useEffect)(()=>()=>null==e?void 0:e.disconnect(),[e]),e}({callback(b){if(a)for(let c of b){let{type:b,target:d}=c;if("childList"===b&&d instanceof HTMLElement&&d.contains(a)){f();break}}}}),h=a5({callback:f});return _(()=>{f(),a?(null==h||h.observe(a),null==g||g.observe(document.body,{childList:!0,subtree:!0})):(null==h||h.disconnect(),null==g||g.disconnect())},[a]),d}let a8=[];function a9(a,b){void 0===b&&(b=[]);let c=(0,w.useRef)(null);return(0,w.useEffect)(()=>{c.current=null},b),(0,w.useEffect)(()=>{let b=a!==ay;b&&!c.current&&(c.current=a),!b&&c.current&&(c.current=null)},[a]),c.current?aj(a,c.current):ay}function ba(a){return(0,w.useMemo)(()=>{let b,c;return a?(b=a.innerWidth,{top:0,left:0,right:b,bottom:c=a.innerHeight,width:b,height:c}):null},[a])}let bb=[];function bc(a){if(!a)return null;if(a.children.length>1)return a;let b=a.children[0];return Y(b)?b:a}let bd=[{sensor:a1,options:{}},{sensor:aY,options:{}}],be={current:{}},bf={draggable:{measure:aG},droppable:{measure:aG,strategy:s.WhileDragging,frequency:t.Optimized},dragOverlay:{measure:aF}};class bg extends Map{get(a){var b;return null!=a&&null!=(b=super.get(a))?b:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(a=>{let{disabled:b}=a;return!b})}getNodeFor(a){var b,c;return null!=(b=null==(c=this.get(a))?void 0:c.node.current)?b:void 0}}let bh={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new bg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:av},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bf,measureDroppableContainers:av,windowRect:null,measuringScheduled:!1},bi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:av,draggableNodes:new Map,over:null,measureDroppableContainers:av},bj=(0,w.createContext)(bi),bk=(0,w.createContext)(bh);function bl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new bg}}}function bm(a,b){switch(b.type){case l.DragStart:return{...a,draggable:{...a.draggable,initialCoordinates:b.initialCoordinates,active:b.active}};case l.DragMove:if(null==a.draggable.active)return a;return{...a,draggable:{...a.draggable,translate:{x:b.coordinates.x-a.draggable.initialCoordinates.x,y:b.coordinates.y-a.draggable.initialCoordinates.y}}};case l.DragEnd:case l.DragCancel:return{...a,draggable:{...a.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case l.RegisterDroppable:{let{element:c}=b,{id:d}=c,e=new bg(a.droppable.containers);return e.set(d,c),{...a,droppable:{...a.droppable,containers:e}}}case l.SetDroppableDisabled:{let{id:c,key:d,disabled:e}=b,f=a.droppable.containers.get(c);if(!f||d!==f.key)return a;let g=new bg(a.droppable.containers);return g.set(c,{...f,disabled:e}),{...a,droppable:{...a.droppable,containers:g}}}case l.UnregisterDroppable:{let{id:c,key:d}=b,e=a.droppable.containers.get(c);if(!e||d!==e.key)return a;let f=new bg(a.droppable.containers);return f.delete(c),{...a,droppable:{...a.droppable,containers:f}}}default:return a}}function bn(a){let{disabled:b}=a,{active:c,activatorEvent:d,draggableNodes:e}=(0,w.useContext)(bj),f=ae(d),g=ae(null==c?void 0:c.id);return(0,w.useEffect)(()=>{if(!b&&!d&&f&&null!=g){if(!ak(f)||document.activeElement===f.target)return;let a=e.get(g);if(!a)return;let{activatorNode:b,node:c}=a;(b.current||c.current)&&requestAnimationFrame(()=>{for(let a of[b.current,c.current]){if(!a)continue;let b=a.matches(an)?a:a.querySelector(an);if(b){b.focus();break}}})}},[d,b,e,g,f]),null}function bo(a,b){let{transform:c,...d}=b;return null!=a&&a.length?a.reduce((a,b)=>b({transform:a,...d}),c):c}let bp=(0,w.createContext)({...ay,scaleX:1,scaleY:1});(k=u||(u={}))[k.Uninitialized=0]="Uninitialized",k[k.Initializing=1]="Initializing",k[k.Initialized=2]="Initialized";let bq=(0,w.memo)(function(a){var b,c,d,e,f,g,h,i;let j,k,n,o,p,t,v,x,{id:y,accessibility:z,autoScroll:A=!0,children:B,sensors:C=bd,collisionDetection:D=aA,measuring:E,modifiers:F,...G}=a,[H,I]=(0,w.useReducer)(bm,void 0,bl),[J,K]=function(){let[a]=(0,w.useState)(()=>new Set),b=(0,w.useCallback)(b=>(a.add(b),()=>a.delete(b)),[a]);return[(0,w.useCallback)(b=>{let{type:c,event:d}=b;a.forEach(a=>{var b;return null==(b=a[c])?void 0:b.call(a,d)})},[a]),b]}(),[L,M]=(0,w.useState)(u.Uninitialized),N=L===u.Initialized,{draggable:{active:O,nodes:P,translate:Q},droppable:{containers:R}}=H,S=null!=O?P.get(O):null,U=(0,w.useRef)({initial:null,translated:null}),V=(0,w.useMemo)(()=>{var a;return null!=O?{id:O,data:null!=(a=null==S?void 0:S.data)?a:be,rect:U}:null},[O,S]),X=(0,w.useRef)(null),[Z,$]=(0,w.useState)(null),[aa,af]=(0,w.useState)(null),ah=ab(G,Object.values(G)),aj=ag("DndDescribedBy",y),ak=(0,w.useMemo)(()=>R.getEnabled(),[R]),am=(0,w.useMemo)(()=>({draggable:{...bf.draggable,...null==E?void 0:E.draggable},droppable:{...bf.droppable,...null==E?void 0:E.droppable},dragOverlay:{...bf.dragOverlay,...null==E?void 0:E.dragOverlay}}),[null==E?void 0:E.draggable,null==E?void 0:E.droppable,null==E?void 0:E.dragOverlay]),{droppableRects:an,measureDroppableContainers:ao,measuringScheduled:ap}=function(a,b){let{dragging:c,dependencies:d,config:e}=b,[f,g]=(0,w.useState)(null),{frequency:h,measure:i,strategy:j}=e,k=(0,w.useRef)(a),l=function(){switch(j){case s.Always:return!1;case s.BeforeDragging:return c;default:return!c}}(),m=ab(l),n=(0,w.useCallback)(function(a){void 0===a&&(a=[]),m.current||g(b=>null===b?a:b.concat(a.filter(a=>!b.includes(a))))},[m]),o=(0,w.useRef)(null),p=ac(b=>{if(l&&!c)return a3;if(!b||b===a3||k.current!==a||null!=f){let b=new Map;for(let c of a){if(!c)continue;if(f&&f.length>0&&!f.includes(c.id)&&c.rect.current){b.set(c.id,c.rect.current);continue}let a=c.node.current,d=a?new aR(i(a),a):null;c.rect.current=d,d&&b.set(c.id,d)}return b}return b},[a,f,c,l,i]);return(0,w.useEffect)(()=>{k.current=a},[a]),(0,w.useEffect)(()=>{l||n()},[c,l]),(0,w.useEffect)(()=>{f&&f.length>0&&g(null)},[JSON.stringify(f)]),(0,w.useEffect)(()=>{l||"number"!=typeof h||null!==o.current||(o.current=setTimeout(()=>{n(),o.current=null},h))},[h,l,n,...d]),{droppableRects:p,measureDroppableContainers:n,measuringScheduled:null!=f}}(ak,{dragging:N,dependencies:[Q.x,Q.y],config:am.droppable}),aq=ac(a=>{var b;return null==O?null:null!=(b=null!=p?p:a)?b:null},[p=(o=null!=O?P.get(O):void 0)?o.node.current:null,O]),as=(0,w.useMemo)(()=>aa?al(aa):null,[aa]),at=(j=(null==Z?void 0:Z.autoScrollEnabled)===!1,k="object"==typeof A?!1===A.enabled:!1===A,n=N&&!j&&!k,"object"==typeof A?{...A,enabled:n}:{enabled:n}),av=a4(aq,am.draggable.measure);!function(a){let{activeNode:b,measure:c,initialRect:d,config:e=!0}=a,f=(0,w.useRef)(!1),{x:g,y:h}="boolean"==typeof e?{x:e,y:e}:e;_(()=>{if(!g&&!h||!b){f.current=!1;return}if(f.current||!d)return;let a=null==b?void 0:b.node.current;if(!a||!1===a.isConnected)return;let e=aB(c(a),d);if(g||(e.x=0),h||(e.y=0),f.current=!0,Math.abs(e.x)>0||Math.abs(e.y)>0){let b=aI(a);b&&b.scrollBy({top:e.y,left:e.x})}},[b,g,h,d,c])}({activeNode:null!=O?P.get(O):null,config:at.layoutShiftCompensation,initialRect:av,measure:am.draggable.measure});let aw=a7(aq,am.draggable.measure,av),ax=a7(aq?aq.parentElement:null),az=(0,w.useRef)({activatorEvent:null,active:null,activeNode:aq,collisionRect:null,collisions:null,droppableRects:an,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),aD=R.getNodeFor(null==(b=az.current.over)?void 0:b.id),aE=function(a){let{measure:b}=a,[c,d]=(0,w.useState)(null),e=a5({callback:(0,w.useCallback)(a=>{for(let{target:c}of a)if(Y(c)){d(a=>{let d=b(c);return a?{...a,width:d.width,height:d.height}:d});break}},[b])}),[f,g]=ad((0,w.useCallback)(a=>{let c=bc(a);null==e||e.disconnect(),c&&(null==e||e.observe(c)),d(c?b(c):null)},[b,e]));return(0,w.useMemo)(()=>({nodeRef:f,rect:c,setRef:g}),[c,f,g])}({measure:am.dragOverlay.measure}),aG=null!=(c=aE.nodeRef.current)?c:aq,aJ=N?null!=(d=aE.rect)?d:aw:null,aK=!!(aE.nodeRef.current&&aE.rect),aP=(t=a4(f=aK?null:aw),aB(f,t)),aQ=ba(aG?W(aG):null),aS=(g=N?null!=aD?aD:aq:null,v=(0,w.useRef)(g),x=ac(a=>g?a&&a!==a8&&g&&v.current&&g.parentNode===v.current.parentNode?a:aH(g):a8,[g]),(0,w.useEffect)(()=>{v.current=g},[g]),x),aT=function(a,b){void 0===b&&(b=aF);let[c]=a,d=ba(c?W(c):null),[e,f]=(0,w.useState)(bb);function g(){f(()=>a.length?a.map(a=>new aR(b(a),a)):bb)}let h=a5({callback:g});return _(()=>{null==h||h.disconnect(),g(),a.forEach(a=>null==h?void 0:h.observe(a))},[a]),e}(aS),aU=bo(F,{transform:{x:Q.x-aP.x,y:Q.y-aP.y,scaleX:1,scaleY:1},activatorEvent:aa,active:V,activeNodeRect:aw,containerNodeRect:ax,draggingNodeRect:aJ,over:az.current.over,overlayNodeRect:aE.rect,scrollableAncestors:aS,scrollableAncestorRects:aT,windowRect:aQ}),aV=as?ai(as,Q):null,aW=function(a){let[b,c]=(0,w.useState)(null),d=(0,w.useRef)(a),e=(0,w.useCallback)(a=>{var b;let d=(b=a.target,null);d&&c(a=>a?(a.set(d,aL(d)),new Map(a)):null)},[]);return(0,w.useEffect)(()=>{let b=d.current;if(a!==b){f(b);let g=a.map(a=>{var b;let c=(b=0,null);return c?(c.addEventListener("scroll",e,{passive:!0}),[c,aL(c)]):null}).filter(a=>null!=a);c(g.length?new Map(g):null),d.current=a}return()=>{f(a),f(b)};function f(a){a.forEach(a=>{let b=null;null==b||b.removeEventListener("scroll",e)})}},[e,a]),(0,w.useMemo)(()=>a.length?b?Array.from(b.values()).reduce((a,b)=>ai(a,b),ay):aO(a):ay,[a,b])}(aS),aX=a9(aW),aY=a9(aW,[aw]),aZ=ai(aU,aX),a$=aJ?aC(aJ,aU):null,a_=V&&a$?D({active:V,collisionRect:a$,droppableRects:an,droppableContainers:ak,pointerCoordinates:aV}):null,a0=function(a,b){if(!a||0===a.length)return null;let[c]=a;return c.id}(a_,0),[a1,a6]=(0,w.useState)(null),bg=(h=aK?aU:ai(aU,aY),i=null!=(e=null==a1?void 0:a1.rect)?e:null,{...h,scaleX:i&&aw?i.width/aw.width:1,scaleY:i&&aw?i.height/aw.height:1}),bh=(0,w.useRef)(null),bi=(0,w.useCallback)((a,b)=>{let{sensor:c,options:d}=b;if(null==X.current)return;let e=P.get(X.current);if(!e)return;let f=a.nativeEvent,g=new c({active:X.current,activeNode:e,event:f,options:d,context:az,onAbort(a){if(!P.get(a))return;let{onDragAbort:b}=ah.current,c={id:a};null==b||b(c),J({type:"onDragAbort",event:c})},onPending(a,b,c,d){if(!P.get(a))return;let{onDragPending:e}=ah.current,f={id:a,constraint:b,initialCoordinates:c,offset:d};null==e||e(f),J({type:"onDragPending",event:f})},onStart(a){let b=X.current;if(null==b)return;let c=P.get(b);if(!c)return;let{onDragStart:d}=ah.current,e={activatorEvent:f,active:{id:b,data:c.data,rect:U}};(0,T.unstable_batchedUpdates)(()=>{null==d||d(e),M(u.Initializing),I({type:l.DragStart,initialCoordinates:a,active:b}),J({type:"onDragStart",event:e}),$(bh.current),af(f)})},onMove(a){I({type:l.DragMove,coordinates:a})},onEnd:h(l.DragEnd),onCancel:h(l.DragCancel)});function h(a){return async function(){let{active:b,collisions:c,over:d,scrollAdjustedTranslate:e}=az.current,g=null;if(b&&e){let{cancelDrop:h}=ah.current;g={activatorEvent:f,active:b,collisions:c,delta:e,over:d},a===l.DragEnd&&"function"==typeof h&&await Promise.resolve(h(g))&&(a=l.DragCancel)}X.current=null,(0,T.unstable_batchedUpdates)(()=>{I({type:a}),M(u.Uninitialized),a6(null),$(null),af(null),bh.current=null;let b=a===l.DragEnd?"onDragEnd":"onDragCancel";if(g){let a=ah.current[b];null==a||a(g),J({type:b,event:g})}})}}bh.current=g},[P]),bq=(0,w.useCallback)((a,b)=>(c,d)=>{let e=c.nativeEvent,f=P.get(d);null!==X.current||!f||e.dndKit||e.defaultPrevented||!0===a(c,b.options,{active:f})&&(e.dndKit={capturedBy:b.sensor},X.current=d,bi(c,b))},[P,bi]),br=(0,w.useMemo)(()=>C.reduce((a,b)=>{let{sensor:c}=b;return[...a,...c.activators.map(a=>({eventName:a.eventName,handler:bq(a.handler,b)}))]},[]),[C,bq]);(0,w.useEffect)(()=>{},C.map(a=>{let{sensor:b}=a;return b})),_(()=>{aw&&L===u.Initializing&&M(u.Initialized)},[aw,L]),(0,w.useEffect)(()=>{let{onDragMove:a}=ah.current,{active:b,activatorEvent:c,collisions:d,over:e}=az.current;if(!b||!c)return;let f={active:b,activatorEvent:c,collisions:d,delta:{x:aZ.x,y:aZ.y},over:e};(0,T.unstable_batchedUpdates)(()=>{null==a||a(f),J({type:"onDragMove",event:f})})},[aZ.x,aZ.y]),(0,w.useEffect)(()=>{let{active:a,activatorEvent:b,collisions:c,droppableContainers:d,scrollAdjustedTranslate:e}=az.current;if(!a||null==X.current||!b||!e)return;let{onDragOver:f}=ah.current,g=d.get(a0),h=g&&g.rect.current?{id:g.id,rect:g.rect.current,data:g.data,disabled:g.disabled}:null,i={active:a,activatorEvent:b,collisions:c,delta:{x:e.x,y:e.y},over:h};(0,T.unstable_batchedUpdates)(()=>{a6(h),null==f||f(i),J({type:"onDragOver",event:i})})},[a0]),_(()=>{az.current={activatorEvent:aa,active:V,activeNode:aq,collisionRect:a$,collisions:a_,droppableRects:an,draggableNodes:P,draggingNode:aG,draggingNodeRect:aJ,droppableContainers:R,over:a1,scrollableAncestors:aS,scrollAdjustedTranslate:aZ},U.current={initial:aJ,translated:a$}},[V,aq,a_,a$,P,aG,aJ,an,R,a1,aS,aZ]),function(a){let b,{acceleration:c,activator:d=q.Pointer,canScroll:e,draggingRect:f,enabled:g,interval:h=5,order:i=r.TreeOrder,pointerCoordinates:j,scrollableAncestors:k,scrollableAncestorRects:l,delta:n,threshold:o}=a,p=function(a){let{delta:b,disabled:c}=a,d=ae(b);return ac(a=>{if(c||!d||!a)return a2;let e={x:Math.sign(b.x-d.x),y:Math.sign(b.y-d.y)};return{x:{[m.Backward]:a.x[m.Backward]||-1===e.x,[m.Forward]:a.x[m.Forward]||1===e.x},y:{[m.Backward]:a.y[m.Backward]||-1===e.y,[m.Forward]:a.y[m.Forward]||1===e.y}}},[c,b,d])}({delta:n,disabled:!g}),[s,t]=(b=(0,w.useRef)(null),[(0,w.useCallback)((a,c)=>{b.current=setInterval(a,c)},[]),(0,w.useCallback)(()=>{null!==b.current&&(clearInterval(b.current),b.current=null)},[])]),u=(0,w.useRef)({x:0,y:0}),v=(0,w.useRef)({x:0,y:0}),x=(0,w.useMemo)(()=>{switch(d){case q.Pointer:return j?{top:j.y,bottom:j.y,left:j.x,right:j.x}:null;case q.DraggableRect:return f}},[d,f,j]),y=(0,w.useRef)(null),z=(0,w.useCallback)(()=>{let a=y.current;if(!a)return;let b=u.current.x*v.current.x,c=u.current.y*v.current.y;a.scrollBy(b,c)},[]),A=(0,w.useMemo)(()=>i===r.TreeOrder?[...k].reverse():k,[i,k]);(0,w.useEffect)(()=>{if(!g||!k.length||!x)return void t();for(let a of A){if((null==e?void 0:e(a))===!1)continue;let b=l[k.indexOf(a)];if(!b)continue;let{direction:d,speed:f}=function(a,b,c,d,e){let{top:f,left:g,right:h,bottom:i}=c;void 0===d&&(d=10),void 0===e&&(e=aN);let{isTop:j,isBottom:k,isLeft:l,isRight:n}=aM(a),o={x:0,y:0},p={x:0,y:0},q={height:b.height*e.y,width:b.width*e.x};return!j&&f<=b.top+q.height?(o.y=m.Backward,p.y=d*Math.abs((b.top+q.height-f)/q.height)):!k&&i>=b.bottom-q.height&&(o.y=m.Forward,p.y=d*Math.abs((b.bottom-q.height-i)/q.height)),!n&&h>=b.right-q.width?(o.x=m.Forward,p.x=d*Math.abs((b.right-q.width-h)/q.width)):!l&&g<=b.left+q.width&&(o.x=m.Backward,p.x=d*Math.abs((b.left+q.width-g)/q.width)),{direction:o,speed:p}}(a,b,x,c,o);for(let a of["x","y"])p[a][d[a]]||(f[a]=0,d[a]=0);if(f.x>0||f.y>0){t(),y.current=a,s(z,h),u.current=f,v.current=d;return}}u.current={x:0,y:0},v.current={x:0,y:0},t()},[c,z,e,t,g,h,JSON.stringify(x),JSON.stringify(p),s,k,A,l,JSON.stringify(o)])}({...at,delta:Q,draggingRect:a$,pointerCoordinates:aV,scrollableAncestors:aS,scrollableAncestorRects:aT});let bs=(0,w.useMemo)(()=>({active:V,activeNode:aq,activeNodeRect:aw,activatorEvent:aa,collisions:a_,containerNodeRect:ax,dragOverlay:aE,draggableNodes:P,droppableContainers:R,droppableRects:an,over:a1,measureDroppableContainers:ao,scrollableAncestors:aS,scrollableAncestorRects:aT,measuringConfiguration:am,measuringScheduled:ap,windowRect:aQ}),[V,aq,aw,aa,a_,ax,aE,P,R,an,a1,ao,aS,aT,am,ap,aQ]),bt=(0,w.useMemo)(()=>({activatorEvent:aa,activators:br,active:V,activeNodeRect:aw,ariaDescribedById:{draggable:aj},dispatch:I,draggableNodes:P,over:a1,measureDroppableContainers:ao}),[aa,br,V,aw,I,aj,P,a1,ao]);return w.default.createElement(ar.Provider,{value:K},w.default.createElement(bj.Provider,{value:bt},w.default.createElement(bk.Provider,{value:bs},w.default.createElement(bp.Provider,{value:bg},B)),w.default.createElement(bn,{disabled:(null==z?void 0:z.restoreFocus)===!1})),w.default.createElement(au,{...z,hiddenTextDescribedById:aj}))}),br=(0,w.createContext)(null),bs="button";function bt(){return(0,w.useContext)(bk)}let bu={timeout:25};function bv(a){let{animation:b,children:c}=a,[d,e]=(0,w.useState)(null),[f,g]=(0,w.useState)(null),h=ae(c);return c||d||!h||e(h),_(()=>{if(!f)return;let a=null==d?void 0:d.key,c=null==d?void 0:d.props.id;null==a||null==c?e(null):Promise.resolve(b(c,f)).then(()=>{e(null)})},[b,d,f]),w.default.createElement(w.default.Fragment,null,c,d?(0,w.cloneElement)(d,{ref:g}):null)}let bw={x:0,y:0,scaleX:1,scaleY:1};function bx(a){let{children:b}=a;return w.default.createElement(bj.Provider,{value:bi},w.default.createElement(bp.Provider,{value:bw},b))}let by={position:"fixed",touchAction:"none"},bz=a=>ak(a)?"transform 250ms ease":void 0,bA=(0,w.forwardRef)((a,b)=>{let{as:c,activatorEvent:d,adjustScale:e,children:f,className:g,rect:h,style:i,transform:j,transition:k=bz}=a;if(!h)return null;let l=e?j:{...j,scaleX:1,scaleY:1},m={...by,width:h.width,height:h.height,top:h.top,left:h.left,transform:am.Transform.toString(l),transformOrigin:e&&d?function(a,b){let c=al(a);if(!c)return"0 0";let d={x:(c.x-b.left)/b.width*100,y:(c.y-b.top)/b.height*100};return d.x+"% "+d.y+"%"}(d,h):void 0,transition:"function"==typeof k?k(d):k,...i};return w.default.createElement(c,{className:g,style:m,ref:b},f)}),bB={duration:250,easing:"ease",keyframes:a=>{let{transform:{initial:b,final:c}}=a;return[{transform:am.Transform.toString(b)},{transform:am.Transform.toString(c)}]},sideEffects:(b={styles:{active:{opacity:"0"}}},a=>{let{active:c,dragOverlay:d}=a,e={},{styles:f,className:g}=b;if(null!=f&&f.active)for(let[a,b]of Object.entries(f.active))void 0!==b&&(e[a]=c.node.style.getPropertyValue(a),c.node.style.setProperty(a,b));if(null!=f&&f.dragOverlay)for(let[a,b]of Object.entries(f.dragOverlay))void 0!==b&&d.node.style.setProperty(a,b);return null!=g&&g.active&&c.node.classList.add(g.active),null!=g&&g.dragOverlay&&d.node.classList.add(g.dragOverlay),function(){for(let[a,b]of Object.entries(e))c.node.style.setProperty(a,b);null!=g&&g.active&&c.node.classList.remove(g.active)}})},bC=0,bD=w.default.memo(a=>{var b;let{adjustScale:c=!1,children:d,dropAnimation:e,style:f,transition:g,modifiers:h,wrapperElement:i="div",className:j,zIndex:k=999}=a,{activatorEvent:l,active:m,activeNodeRect:n,containerNodeRect:o,draggableNodes:p,droppableContainers:q,dragOverlay:r,over:s,measuringConfiguration:t,scrollableAncestors:u,scrollableAncestorRects:v,windowRect:x}=bt(),y=(0,w.useContext)(bp),z=(b=null==m?void 0:m.id,(0,w.useMemo)(()=>{if(null!=b)return++bC},[b])),A=bo(h,{activatorEvent:l,active:m,activeNodeRect:n,containerNodeRect:o,draggingNodeRect:r.rect,over:s,overlayNodeRect:r.rect,scrollableAncestors:u,scrollableAncestorRects:v,transform:y,windowRect:x}),B=a4(n),C=function(a){let{config:b,draggableNodes:c,droppableContainers:d,measuringConfiguration:e}=a;return aa((a,f)=>{if(null===b)return;let g=c.get(a);if(!g)return;let h=g.node.current;if(!h)return;let i=bc(f);if(!i)return;let{transform:j}=W(f).getComputedStyle(f),k=aD(j);if(!k)return;let l="function"==typeof b?b:function(a){let{duration:b,easing:c,sideEffects:d,keyframes:e}={...bB,...a};return a=>{let{active:f,dragOverlay:g,transform:h,...i}=a;if(!b)return;let j={x:g.rect.left-f.rect.left,y:g.rect.top-f.rect.top},k={scaleX:1!==h.scaleX?f.rect.width*h.scaleX/g.rect.width:1,scaleY:1!==h.scaleY?f.rect.height*h.scaleY/g.rect.height:1},l={x:h.x-j.x,y:h.y-j.y,...k},m=e({...i,active:f,dragOverlay:g,transform:{initial:h,final:l}}),[n]=m,o=m[m.length-1];if(JSON.stringify(n)===JSON.stringify(o))return;let p=null==d?void 0:d({active:f,dragOverlay:g,...i}),q=g.node.animate(m,{duration:b,easing:c,fill:"forwards"});return new Promise(a=>{q.onfinish=()=>{null==p||p(),a()}})}}(b);return aP(h,e.draggable.measure),l({active:{id:a,data:g.data,node:h,rect:e.draggable.measure(h)},draggableNodes:c,dragOverlay:{node:f,rect:e.dragOverlay.measure(i)},droppableContainers:d,measuringConfiguration:e,transform:k})})}({config:e,draggableNodes:p,droppableContainers:q,measuringConfiguration:t}),D=B?r.setRef:void 0;return w.default.createElement(bx,null,w.default.createElement(bv,{animation:C},m&&z?w.default.createElement(bA,{key:z,id:m.id,ref:D,as:i,activatorEvent:l,adjustScale:c,className:j,transition:g,rect:B,style:{zIndex:k,...f},transform:A},d):null))});function bE(a,b,c){let d=a.slice();return d.splice(c<0?d.length+c:c,0,d.splice(b,1)[0]),d}function bF(a){return null!==a&&a>=0}let bG=a=>{let{rects:b,activeIndex:c,overIndex:d,index:e}=a,f=bE(b,d,c),g=b[e],h=f[e];return h&&g?{x:h.left-g.left,y:h.top-g.top,scaleX:h.width/g.width,scaleY:h.height/g.height}:null},bH="Sortable",bI=w.default.createContext({activeIndex:-1,containerId:bH,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:bG,disabled:{draggable:!1,droppable:!1}});function bJ(a){let{children:b,id:c,items:d,strategy:e=bG,disabled:f=!1}=a,{active:g,dragOverlay:h,droppableRects:i,over:j,measureDroppableContainers:k}=bt(),l=ag(bH,c),m=null!==h.rect,n=(0,w.useMemo)(()=>d.map(a=>"object"==typeof a&&"id"in a?a.id:a),[d]),o=null!=g,p=g?n.indexOf(g.id):-1,q=j?n.indexOf(j.id):-1,r=(0,w.useRef)(n),s=!function(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}(n,r.current),t=-1!==q&&-1===p||s,u="boolean"==typeof f?{draggable:f,droppable:f}:f;_(()=>{s&&o&&k(n)},[s,n,o,k]),(0,w.useEffect)(()=>{r.current=n},[n]);let v=(0,w.useMemo)(()=>({activeIndex:p,containerId:l,disabled:u,disableTransforms:t,items:n,overIndex:q,useDragOverlay:m,sortedRects:n.reduce((a,b,c)=>{let d=i.get(b);return d&&(a[c]=d),a},Array(n.length)),strategy:e}),[p,l,u.draggable,u.droppable,t,n,q,i,m,e]);return w.default.createElement(bI.Provider,{value:v},b)}let bK=a=>{let{id:b,items:c,activeIndex:d,overIndex:e}=a;return bE(c,d,e).indexOf(b)},bL=a=>{let{containerId:b,isSorting:c,wasDragging:d,index:e,items:f,newIndex:g,previousItems:h,previousContainerId:i,transition:j}=a;return!!j&&!!d&&(h===f||e!==g)&&(!!c||g!==e&&b===i)},bM={duration:200,easing:"ease"},bN="transform",bO=am.Transition.toString({property:bN,duration:0,easing:"linear"}),bP={roleDescription:"sortable"};function bQ(a){var b,c,d,e;let{animateLayoutChanges:f=bL,attributes:g,disabled:h,data:i,getNewIndex:j=bK,id:k,strategy:m,resizeObserverConfig:n,transition:o=bM}=a,{items:p,containerId:q,activeIndex:r,disabled:s,disableTransforms:t,sortedRects:u,overIndex:v,useDragOverlay:x,strategy:y}=(0,w.useContext)(bI),z=(b=h,c=s,"boolean"==typeof b?{draggable:b,droppable:!1}:{draggable:null!=(d=null==b?void 0:b.draggable)?d:c.draggable,droppable:null!=(e=null==b?void 0:b.droppable)?e:c.droppable}),A=p.indexOf(k),B=(0,w.useMemo)(()=>({sortable:{containerId:q,index:A,items:p},...i}),[q,i,A,p]),C=(0,w.useMemo)(()=>p.slice(p.indexOf(k)),[p,k]),{rect:D,node:E,isOver:F,setNodeRef:G}=function(a){let{data:b,disabled:c=!1,id:d,resizeObserverConfig:e}=a,f=ag("Droppable"),{active:g,dispatch:h,over:i,measureDroppableContainers:j}=(0,w.useContext)(bj),k=(0,w.useRef)({disabled:c}),m=(0,w.useRef)(!1),n=(0,w.useRef)(null),o=(0,w.useRef)(null),{disabled:p,updateMeasurementsFor:q,timeout:r}={...bu,...e},s=ab(null!=q?q:d),t=a5({callback:(0,w.useCallback)(()=>{if(!m.current){m.current=!0;return}null!=o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{j(Array.isArray(s.current)?s.current:[s.current]),o.current=null},r)},[r]),disabled:p||!g}),[u,v]=ad((0,w.useCallback)((a,b)=>{t&&(b&&(t.unobserve(b),m.current=!1),a&&t.observe(a))},[t])),x=ab(b);return(0,w.useEffect)(()=>{t&&u.current&&(t.disconnect(),m.current=!1,t.observe(u.current))},[u,t]),(0,w.useEffect)(()=>(h({type:l.RegisterDroppable,element:{id:d,key:f,disabled:c,node:u,rect:n,data:x}}),()=>h({type:l.UnregisterDroppable,key:f,id:d})),[d]),(0,w.useEffect)(()=>{c!==k.current.disabled&&(h({type:l.SetDroppableDisabled,id:d,key:f,disabled:c}),k.current.disabled=c)},[d,f,c,h]),{active:g,rect:n,isOver:(null==i?void 0:i.id)===d,node:u,over:i,setNodeRef:v}}({id:k,data:B,disabled:z.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...n}}),{active:H,activatorEvent:I,activeNodeRect:J,attributes:K,setNodeRef:L,listeners:M,isDragging:N,over:O,setActivatorNodeRef:P,transform:Q}=function(a){let{id:b,data:c,disabled:d=!1,attributes:e}=a,f=ag("Draggable"),{activators:g,activatorEvent:h,active:i,activeNodeRect:j,ariaDescribedById:k,draggableNodes:l,over:m}=(0,w.useContext)(bj),{role:n=bs,roleDescription:o="draggable",tabIndex:p=0}=null!=e?e:{},q=(null==i?void 0:i.id)===b,r=(0,w.useContext)(q?bp:br),[s,t]=ad(),[u,v]=ad(),x=(0,w.useMemo)(()=>g.reduce((a,c)=>{let{eventName:d,handler:e}=c;return a[d]=a=>{e(a,b)},a},{}),[g,b]),y=ab(c);return _(()=>(l.set(b,{id:b,key:f,node:s,activatorNode:u,data:y}),()=>{let a=l.get(b);a&&a.key===f&&l.delete(b)}),[l,b]),{active:i,activatorEvent:h,activeNodeRect:j,attributes:(0,w.useMemo)(()=>({role:n,tabIndex:p,"aria-disabled":d,"aria-pressed":!!q&&n===bs||void 0,"aria-roledescription":o,"aria-describedby":k.draggable}),[d,n,p,q,o,k.draggable]),isDragging:q,listeners:d?void 0:x,node:s,over:m,setNodeRef:t,setActivatorNodeRef:v,transform:r}}({id:k,data:B,attributes:{...bP,...g},disabled:z.draggable}),R=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(0,w.useMemo)(()=>a=>{b.forEach(b=>b(a))},b)}(G,L),S=!!H,T=S&&!t&&bF(r)&&bF(v),U=!x&&N,V=U&&T?Q:null,W=T?null!=V?V:(null!=m?m:y)({rects:u,activeNodeRect:J,activeIndex:r,overIndex:v,index:A}):null,X=bF(r)&&bF(v)?j({id:k,items:p,activeIndex:r,overIndex:v}):A,Y=null==H?void 0:H.id,Z=(0,w.useRef)({activeId:Y,items:p,newIndex:X,containerId:q}),$=p!==Z.current.items,aa=f({active:H,containerId:q,isDragging:N,isSorting:S,id:k,index:A,items:p,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:o,wasDragging:null!=Z.current.activeId}),ac=function(a){let{disabled:b,index:c,node:d,rect:e}=a,[f,g]=(0,w.useState)(null),h=(0,w.useRef)(c);return _(()=>{if(!b&&c!==h.current&&d.current){let a=e.current;if(a){let b=aF(d.current,{ignoreTransform:!0}),c={x:a.left-b.left,y:a.top-b.top,scaleX:a.width/b.width,scaleY:a.height/b.height};(c.x||c.y)&&g(c)}}c!==h.current&&(h.current=c)},[b,c,d,e]),(0,w.useEffect)(()=>{f&&g(null)},[f]),f}({disabled:!aa,index:A,node:E,rect:D});return(0,w.useEffect)(()=>{S&&Z.current.newIndex!==X&&(Z.current.newIndex=X),q!==Z.current.containerId&&(Z.current.containerId=q),p!==Z.current.items&&(Z.current.items=p)},[S,X,q,p]),(0,w.useEffect)(()=>{if(Y===Z.current.activeId)return;if(null!=Y&&null==Z.current.activeId){Z.current.activeId=Y;return}let a=setTimeout(()=>{Z.current.activeId=Y},50);return()=>clearTimeout(a)},[Y]),{active:H,activeIndex:r,attributes:K,data:B,rect:D,index:A,newIndex:X,items:p,isOver:F,isSorting:S,isDragging:N,listeners:M,node:E,overIndex:v,over:O,setNodeRef:R,setActivatorNodeRef:P,setDroppableNodeRef:G,setDraggableNodeRef:L,transform:null!=ac?ac:W,transition:ac||$&&Z.current.newIndex===A?bO:(!U||ak(I))&&o&&(S||aa)?am.Transition.toString({...o,property:bN}):void 0}}o.Down,o.Right,o.Up,o.Left;let bR=(0,w.createContext)(void 0);function bS({columns:a,data:b,onDataChange:c,children:d}){let[e,f]=(0,w.useState)(null),g=ax(aw(a1,{activationConstraint:{distance:8}}));return(0,v.jsx)(bR.Provider,{value:{columns:a,data:b,activeId:e,setActiveId:f,onDataChange:c},children:(0,v.jsxs)(bq,{sensors:g,onDragStart:a=>{f(a.active.id)},onDragEnd:d=>{let{active:e,over:g}=d;if(!g)return void f(null);let h=b.find(a=>a.id===e.id),i=a.find(a=>a.id===g.id);h&&i&&h.status!==i.id&&c(b.map(a=>a.id===e.id?{...a,status:i.id}:a)),f(null)},children:[(0,v.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4",children:a.map(a=>d(a))}),(0,v.jsx)(bD,{children:e?(0,v.jsx)("div",{className:"rounded-lg border border-white/20 bg-card p-3 shadow-lg opacity-80",children:"Dragging..."}):null})]})})}function bT({id:a,children:b}){let{setNodeRef:c}=bQ({id:a});return(0,v.jsx)("div",{ref:c,className:"flex min-w-[300px] flex-1 flex-col rounded-lg border border-white/10 bg-white/5",children:b})}function bU({children:a}){return(0,v.jsx)("div",{className:"border-b border-white/10 p-4 font-semibold text-foreground",children:a})}function bV({id:a,children:b}){let{data:c}=function(){let a=(0,w.useContext)(bR);if(!a)throw Error("useKanban must be used within KanbanProvider");return a}(),d=(0,w.useMemo)(()=>c.filter(b=>b.status===a),[c,a]),e=(0,w.useMemo)(()=>d.map(a=>a.id),[d]);return(0,v.jsx)(bJ,{items:e,children:(0,v.jsx)("div",{className:"flex flex-col gap-2 p-4 min-h-[200px]",children:d.map(a=>b(a))})})}function bW({id:a,column:b,children:c,onClick:d}){let{attributes:e,listeners:f,setNodeRef:g,transform:h,transition:i,isDragging:j}=bQ({id:a,data:{column:b}}),k={transform:am.Transform.toString(h),transition:i,opacity:j?.5:1};return(0,v.jsx)("div",{ref:g,style:k,...e,...f,onClick:d,className:"cursor-pointer rounded-lg border border-white/10 bg-white/5 p-3 hover:bg-white/10 transition-colors",children:c})}let bX=(0,w.createContext)(void 0);function bY({children:a,onDragEnd:b}){let[c,d]=(0,w.useState)(null),e=ax(aw(a1,{activationConstraint:{distance:8}}));return(0,v.jsx)(bX.Provider,{value:{activeId:c,setActiveId:d},children:(0,v.jsxs)(bq,{sensors:e,onDragStart:a=>{d(a.active.id)},onDragEnd:a=>{d(null),b?.(a)},children:[(0,v.jsx)("div",{className:"space-y-4",children:a}),(0,v.jsx)(bD,{children:c?(0,v.jsx)("div",{className:"rounded-lg border border-white/20 bg-card p-3 shadow-lg opacity-80",children:"Dragging..."}):null})]})})}function bZ({id:a,children:b}){let{setNodeRef:c}=bQ({id:a});return(0,v.jsx)("div",{ref:c,className:"rounded-lg border border-white/10 bg-white/5",children:b})}function b$({name:a,color:b}){return(0,v.jsxs)("div",{className:"flex items-center gap-2 border-b border-white/10 p-4 font-semibold text-foreground",children:[b&&(0,v.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:b}}),(0,v.jsx)("span",{children:a})]})}function b_({children:a}){return(0,v.jsx)("div",{className:"space-y-2 p-4",children:a})}function b0({id:a,parent:b,children:c}){let{attributes:d,listeners:e,setNodeRef:f,transform:g,transition:h,isDragging:i}=bQ({id:a,data:{parent:b}}),j={transform:am.Transform.toString(g),transition:h,opacity:i?.5:1};return(0,v.jsx)("div",{ref:f,style:j,...d,...e,className:"flex cursor-pointer items-center gap-2 rounded-lg border border-white/10 bg-white/5 p-3 hover:bg-white/10 transition-colors",children:c})}var b1=a.i(784021),b2=a.i(391686),b3=a.i(946256),b4=a.i(396008),b5=a.i(294565);let b6=(0,w.createContext)(void 0);function b7(){let a=(0,w.useContext)(b6);if(!a)throw Error("useTableContext must be used within TableProvider");return a}function b8({columns:a,data:b,children:c}){let[d,e]=(0,w.useState)([]),f=(0,b1.useReactTable)({data:b,columns:a,getCoreRowModel:(0,b2.getCoreRowModel)(),getSortedRowModel:(0,b2.getSortedRowModel)(),onSortingChange:e,state:{sorting:d}});return(0,v.jsx)(b6.Provider,{value:{table:f},children:(0,v.jsx)("div",{className:"w-full overflow-auto",children:(0,v.jsx)("table",{className:"w-full",children:c})})})}function b9({children:a}){let{table:b}=b7();return(0,v.jsx)("thead",{className:"border-b border-white/10 bg-white/5",children:b.getHeaderGroups().map(b=>a({headerGroup:b}))})}function ca({headerGroup:a,children:b}){return(0,v.jsx)("tr",{children:a.headers.map(a=>b({header:a}))})}function cb({header:a}){return(0,v.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:a.isPlaceholder?null:(0,b1.flexRender)(a.column.columnDef.header,a.getContext())},a.id)}function cc({column:a,title:b}){return a.getCanSort()?(0,v.jsxs)(A.Button,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:[(0,v.jsx)("span",{children:b}),"desc"===a.getIsSorted()?(0,v.jsx)(b3.ArrowDown,{className:"ml-2 h-4 w-4"}):"asc"===a.getIsSorted()?(0,v.jsx)(b4.ArrowUp,{className:"ml-2 h-4 w-4"}):(0,v.jsx)(b5.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}):(0,v.jsx)("span",{children:b})}function cd({children:a}){let{table:b}=b7();return(0,v.jsx)("tbody",{children:b.getRowModel().rows.length?b.getRowModel().rows.map(b=>a({row:b})):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:b.getAllColumns().length,className:"h-24 text-center text-muted-foreground",children:"No results."})})})}function ce({row:a,children:b,className:c,onClick:d}){return(0,v.jsx)("tr",{"data-state":a.getIsSelected()&&"selected",className:c,onClick:d,children:a.getVisibleCells().map(a=>b({cell:a}))})}function cf({cell:a}){return(0,v.jsx)("td",{className:"px-4 py-3 text-sm text-foreground",children:(0,b1.flexRender)(a.column.columnDef.cell,a.getContext())})}let cg={fund:"Fund",spv:"SPV",securitization:"Securitization",note:"Note",venture_capital:"Venture Capital",private_equity:"Private Equity",real_estate:"Real Estate",other:"Other"},ch=[{id:"LIVE",name:"LIVE",color:"#10B981"},{id:"CLOSED",name:"CLOSED",color:"#EF4444"},{id:"PENDING",name:"PENDING",color:"#F59E0B"}],ci=a=>{if(!a)return"No activity";try{return new Date(a).toLocaleDateString()}catch{return"No activity"}};function cj({entities:a,onEntityClick:b,onEntityEdit:c}){let d=(0,w.useMemo)(()=>[{accessorKey:"entity_code",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Code"}),cell:({row:a})=>(0,v.jsx)("div",{className:"font-mono text-xs",children:a.original.entity_code?(0,v.jsx)(C.Badge,{variant:"outline",className:"border-emerald-400/40 text-emerald-100",children:a.original.entity_code}):(0,v.jsx)("span",{className:"text-muted-foreground",children:"--"})})},{accessorKey:"name",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Name"}),cell:({row:a})=>(0,v.jsxs)("div",{className:"flex items-center gap-2 min-w-[200px]",children:[(0,v.jsx)(Q.Building2,{className:"h-4 w-4 text-muted-foreground shrink-0"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"font-medium text-foreground",children:a.original.name}),a.original.former_entity&&(0,v.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Formerly: ",a.original.former_entity]})]})]})},{accessorKey:"investment_name",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Investment"}),cell:({row:a})=>(0,v.jsx)("span",{className:"font-medium text-foreground",children:a.original.investment_name||"--"})},{accessorKey:"platform",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Platform"}),cell:({row:a})=>a.original.platform?(0,v.jsx)(C.Badge,{className:"bg-white/10 border-white/10 text-foreground",children:a.original.platform}):"--"},{accessorKey:"type",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Type"}),cell:({row:a})=>(0,v.jsx)(C.Badge,{className:"bg-white/10 border-white/10 text-foreground",children:cg[a.original.type]||a.original.type})},{accessorKey:"status",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Status"}),cell:({row:a})=>{var b;return a.original.status?(0,v.jsx)(C.Badge,{className:"LIVE"===(b=a.original.status)?"bg-emerald-500/20 border-emerald-400/40 text-emerald-100":"CLOSED"===b?"bg-red-500/20 border-red-400/40 text-red-100":"PENDING"===b?"bg-amber-500/20 border-amber-400/40 text-amber-100":"bg-white/10 border-white/10 text-foreground",children:a.original.status}):"--"}},{accessorKey:"investor_count",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Investors"}),cell:({row:a})=>(0,v.jsx)(C.Badge,{className:"bg-white/10 border-white/10 text-foreground",children:a.original.investor_count??0})},{accessorKey:"open_flag_count",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Open Flags"}),cell:({row:a})=>{let b=a.original.open_flag_count??0;return(0,v.jsx)(C.Badge,{className:b>0?"bg-red-500/20 border-red-400/40 text-red-100":"bg-white/10 border-white/10 text-foreground",children:b})}},{accessorKey:"last_event_at",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Last Activity"}),cell:({row:a})=>(0,v.jsx)("span",{className:"text-xs text-muted-foreground",children:ci(a.original.last_event_at)})},{accessorKey:"currency",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Currency"}),cell:({row:a})=>(0,v.jsx)("span",{className:"text-foreground",children:a.original.currency})},{accessorKey:"reporting_type",header:({column:a})=>(0,v.jsx)(cc,{column:a,title:"Reporting"}),cell:({row:a})=>(0,v.jsx)("span",{className:"text-xs text-muted-foreground",children:a.original.reporting_type||"--"})},{id:"actions",header:()=>(0,v.jsx)("div",{className:"text-right",children:"Actions"}),cell:({row:a})=>(0,v.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,v.jsxs)(A.Button,{variant:"outline",size:"sm",className:"gap-2",onClick:c=>{c.stopPropagation(),b(a.original.id)},children:[(0,v.jsx)(R.Eye,{className:"h-4 w-4"}),"View"]}),(0,v.jsxs)(A.Button,{variant:"ghost",size:"sm",className:"gap-2",onClick:b=>{b.stopPropagation(),c(a.original)},children:[(0,v.jsx)(S.Pencil,{className:"h-4 w-4"}),"Edit"]})]})}],[b,c]);return(0,v.jsx)("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:(0,v.jsxs)(b8,{columns:d,data:a,children:[(0,v.jsx)(b9,{children:({headerGroup:a})=>(0,v.jsx)(ca,{headerGroup:a,children:({header:a})=>(0,v.jsx)(cb,{header:a},a.id)},a.id)}),(0,v.jsx)(cd,{children:({row:a})=>(0,v.jsx)(ce,{row:a,onClick:()=>b(a.original.id),className:"cursor-pointer hover:bg-white/5 transition-colors",children:({cell:a})=>(0,v.jsx)(cf,{cell:a},a.id)},a.id)})]})})}function ck({entities:a,onEntityClick:b,onStatusChange:c}){return(0,v.jsx)(bY,{onDragEnd:a=>{let{active:b,over:d}=a;if(!d||!c)return;let e=d.id;ch.find(a=>a.name===e)&&c(b.id,e)},children:ch.map(c=>(0,v.jsxs)(bZ,{id:c.name,children:[(0,v.jsx)(b$,{color:c.color,name:c.name}),(0,v.jsx)(b_,{children:a.filter(a=>a.status===c.name).map(a=>(0,v.jsxs)(b0,{...{id:a.id,onClick:()=>b(a.id),className:"hover:bg-white/5 transition-colors"},children:[(0,v.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-full",style:{backgroundColor:c.color}}),(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[a.entity_code&&(0,v.jsx)(C.Badge,{variant:"outline",className:"font-mono text-xs border-emerald-400/40 text-emerald-100 mb-1",children:a.entity_code}),(0,v.jsx)("p",{className:"m-0 font-medium text-sm truncate",children:a.name}),(0,v.jsx)("p",{className:"m-0 text-xs text-muted-foreground truncate",children:a.investment_name||a.platform||"-"}),(0,v.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[(0,v.jsxs)(C.Badge,{className:"bg-white/10 border-white/10 text-foreground",children:[a.investor_count??0," investors"]}),(0,v.jsxs)(C.Badge,{className:(a.open_flag_count??0)>0?"bg-red-500/20 border-red-400/40 text-red-100":"bg-white/10 border-white/10 text-foreground",children:[a.open_flag_count??0," flags"]}),(0,v.jsx)("span",{className:"ml-auto text-xs text-muted-foreground",children:ci(a.last_event_at)})]})]}),(0,v.jsx)(P.Avatar,{className:"h-6 w-6 shrink-0",children:(0,v.jsx)(P.AvatarFallback,{className:"text-xs bg-white/10",children:a.platform?.slice(0,2)||a.entity_code?.slice(0,2)||"--"})})]},a.id))})]},c.name))})}function cl({entities:a,onEntityClick:b,onStatusChange:c}){let[d,e]=(0,w.useState)(a);return(0,w.useEffect)(()=>{e(a)},[a]),(0,v.jsx)(bS,{columns:ch,data:d,onDataChange:b=>{if(e(b),!c)return;let d=b.find(b=>{let c=a.find(a=>a.id===b.id);return c&&c.status!==b.status});d&&d.status&&c(d.id,d.status)},children:a=>(0,v.jsxs)(bT,{id:a.id,children:[(0,v.jsx)(bU,{children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:a.color}}),(0,v.jsx)("span",{children:a.name}),(0,v.jsx)(C.Badge,{variant:"outline",className:"ml-auto",children:d.filter(b=>b.status===a.name).length})]})}),(0,v.jsx)(bV,{id:a.id,children:c=>(0,v.jsx)(bW,{column:a.id,id:c.id,name:c.name,onClick:()=>b(c.id),children:(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[c.entity_code&&(0,v.jsx)(C.Badge,{variant:"outline",className:"font-mono text-xs border-emerald-400/40 text-emerald-100 mb-1",children:c.entity_code}),(0,v.jsx)("p",{className:"m-0 font-medium text-sm",children:c.name})]}),(0,v.jsx)(P.Avatar,{className:"h-5 w-5 shrink-0",children:(0,v.jsx)(P.AvatarFallback,{className:"text-xs bg-white/10",children:c.platform?.slice(0,2)||c.entity_code?.slice(0,2)||"--"})})]}),c.investment_name&&(0,v.jsx)("p",{className:"m-0 text-xs text-muted-foreground font-medium",children:c.investment_name}),(0,v.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[c.platform&&(0,v.jsx)(C.Badge,{className:"bg-white/10 border-white/10 text-foreground text-xs",children:c.platform}),(0,v.jsxs)(C.Badge,{className:"bg-white/10 border-white/10 text-foreground text-xs",children:[c.investor_count??0," investors"]}),(0,v.jsxs)(C.Badge,{className:(c.open_flag_count??0)>0?"bg-red-500/20 border-red-400/40 text-red-100":"bg-white/10 border-white/10 text-foreground",children:[c.open_flag_count??0," flags"]}),(0,v.jsx)("span",{className:"ml-auto text-[11px] text-muted-foreground",children:ci(c.last_event_at)})]})]})},c.id)})]},a.id)})}var cm=a.i(714814),cn=a.i(470305),co=a.i(479612),cp=a.i(191675),cq=a.i(772998),cr=a.i(468095),cs=a.i(134303),ct=a.i(3321),cu=a.i(504839);let cv=[{value:"LIVE",label:"Live"},{value:"TBD",label:"TBD"},{value:"CLOSED",label:"Closed"}],cw=[{value:"fund",label:"Fund"},{value:"spv",label:"SPV"},{value:"securitization",label:"Securitization"},{value:"note",label:"Note"},{value:"venture_capital",label:"Venture Capital"},{value:"private_equity",label:"Private Equity"},{value:"real_estate",label:"Real Estate"},{value:"other",label:"Other"}],cx=[{value:"Not Required",label:"Not Required"},{value:"Company Only",label:"Company Only"},{value:"Online only",label:"Online Only"},{value:"Company + Online",label:"Company + Online"}],cy=["USD","EUR","GBP","CHF"];function cz({entity:a,open:b,onClose:c,onSuccess:d}){let[e,f]=(0,w.useState)({name:"",entity_code:"",platform:"",investment_name:"",former_entity:"",status:"LIVE",type:"fund",domicile:"",currency:"USD",formation_date:"",legal_jurisdiction:"",registration_number:"",reporting_type:"Not Required",requires_reporting:!1,notes:"",website_url:"",address:"",arranger_entity_id:"",lawyer_id:""}),[g,h]=(0,w.useState)(""),[i,j]=(0,w.useState)(!1),[k,l]=(0,w.useState)(null),[m,n]=(0,w.useState)(!1),[o,p]=(0,w.useState)(null),[q,r]=(0,w.useState)(!1),[s,t]=(0,w.useState)({arrangers:[],lawyers:[]}),[u,x]=(0,w.useState)(!1),y=(0,w.useCallback)(async()=>{x(!0);try{let a=await fetch("/api/vehicles/dropdown-options");if(a.ok){let b=await a.json();t(b)}}catch(a){console.error("Failed to fetch dropdown options:",a)}finally{x(!1)}},[]);(0,w.useEffect)(()=>{b&&y()},[b,y]),(0,w.useEffect)(()=>{b&&(f({name:a.name||"",entity_code:a.entity_code||"",platform:a.platform||"",investment_name:a.investment_name||"",former_entity:a.former_entity||"",status:a.status||"LIVE",type:a.type||"fund",domicile:a.domicile||"",currency:a.currency||"USD",formation_date:a.formation_date?a.formation_date.slice(0,10):"",legal_jurisdiction:a.legal_jurisdiction||"",registration_number:a.registration_number||"",reporting_type:a.reporting_type||"Not Required",requires_reporting:a.requires_reporting??!1,notes:a.notes||"",website_url:a.website_url||"",address:a.address||"",arranger_entity_id:a.arranger_entity_id||"",lawyer_id:a.lawyer_id||""}),h(a.logo_url||""),l(null),p(null),n(!1),j(!1),r(!1))},[a,b]);let z=(0,w.useMemo)(()=>e.requires_reporting?"Not Required"===e.reporting_type?"Select where updates are delivered so stakeholders know the channel.":"This vehicle will appear in reporting queues and reminders.":"Enable to track follow-up obligations for this vehicle.",[e.requires_reporting,e.reporting_type]),C=a=>b=>f(c=>({...c,[a]:b})),E=async b=>{l(null),j(!0);try{let c=new FormData;c.append("file",b),c.append("vehicle_id",a.id);let d=await fetch("/api/entities/logo-upload",{method:"POST",body:c}),e=await d.json().catch(()=>({}));if(!d.ok||!e?.url)throw Error(e?.error||"Failed to upload logo");h(e.url)}catch(a){l(a instanceof Error?a.message:"Failed to upload logo")}finally{j(!1)}},F=()=>e.name.trim()?e.domicile.trim()?e.requires_reporting&&"Not Required"===e.reporting_type?(p("Select a reporting channel when reporting is enabled"),!1):(p(null),!0):(p("Domicile is required"),!1):(p("Vehicle name is required"),!1),H=async()=>{if(F()){n(!0),r(!1),p(null);try{let b={name:e.name.trim(),entity_code:e.entity_code.trim()||null,platform:e.platform.trim()||null,investment_name:e.investment_name.trim()||null,former_entity:e.former_entity.trim()||null,status:e.status,type:e.type,domicile:e.domicile.trim(),currency:e.currency.trim().toUpperCase()||"USD",formation_date:e.formation_date||null,legal_jurisdiction:e.legal_jurisdiction.trim()||null,registration_number:e.registration_number.trim()||null,reporting_type:e.reporting_type,requires_reporting:e.requires_reporting,notes:e.notes.trim()||null,logo_url:g||null,website_url:e.website_url.trim()||null,address:e.address.trim()||null,arranger_entity_id:e.arranger_entity_id||null,lawyer_id:e.lawyer_id||null},f=await fetch(`/api/entities/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),h=await f.json().catch(()=>({}));if(!f.ok)throw Error(h.details||h.error||"Failed to update vehicle");d(h.entity),c()}catch(a){p(a instanceof Error?a.message:"Failed to update vehicle")}finally{n(!1)}}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(cn.Dialog,{open:b,onOpenChange:c,children:(0,v.jsx)(cn.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto no-scrollbar rounded-2xl border border-border bg-background shadow-xl",children:(0,v.jsxs)("form",{onSubmit:a=>{a.preventDefault(),F()&&r(!0)},className:"space-y-6",children:[(0,v.jsxs)(cn.DialogHeader,{className:"space-y-2",children:[(0,v.jsx)(cn.DialogTitle,{className:"text-2xl text-foreground",children:"Edit Vehicle"}),(0,v.jsx)(cn.DialogDescription,{className:"text-sm text-muted-foreground",children:"Update the vehicle profile. Changes are applied immediately across deals and reporting."})]}),(0,v.jsxs)("div",{className:"grid gap-5",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"name",className:"text-foreground",children:"Vehicle Name *"}),(0,v.jsx)(B.Input,{id:"name",value:e.name,onChange:a=>C("name")(a.target.value),placeholder:"Legal vehicle name",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"entity_code",className:"text-foreground",children:"Vehicle Code"}),(0,v.jsx)(B.Input,{id:"entity_code",value:e.entity_code,onChange:a=>C("entity_code")(a.target.value),placeholder:"e.g., VC101",className:"bg-background border-input text-foreground font-mono uppercase"})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Status"}),(0,v.jsxs)(D.Select,{value:e.status,onValueChange:C("status"),children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,v.jsx)(D.SelectValue,{placeholder:"Status"})}),(0,v.jsx)(D.SelectContent,{children:cv.map(a=>(0,v.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Type"}),(0,v.jsxs)(D.Select,{value:e.type,onValueChange:C("type"),children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,v.jsx)(D.SelectValue,{placeholder:"Type"})}),(0,v.jsx)(D.SelectContent,{children:cw.map(a=>(0,v.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Currency"}),(0,v.jsxs)(D.Select,{value:e.currency,onValueChange:C("currency"),children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,v.jsx)(D.SelectValue,{placeholder:"Currency"})}),(0,v.jsx)(D.SelectContent,{children:cy.map(a=>(0,v.jsx)(D.SelectItem,{value:a,children:a},a))})]})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"platform",className:"text-foreground",children:"Platform"}),(0,v.jsx)(B.Input,{id:"platform",value:e.platform,onChange:a=>C("platform")(a.target.value),placeholder:"e.g., VC1SCSP",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"investment_name",className:"text-foreground",children:"Investment Name"}),(0,v.jsx)(B.Input,{id:"investment_name",value:e.investment_name,onChange:a=>C("investment_name")(a.target.value),placeholder:"e.g., Revolut Secondary",className:"bg-background border-input text-foreground"})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"domicile",className:"text-foreground",children:"Domicile / Jurisdiction *"}),(0,v.jsx)(B.Input,{id:"domicile",value:e.domicile,onChange:a=>C("domicile")(a.target.value),placeholder:"e.g., Luxembourg, BVI, Delaware",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"formation_date",className:"text-foreground",children:"Formation Date"}),(0,v.jsx)(B.Input,{id:"formation_date",type:"date",value:e.formation_date,onChange:a=>C("formation_date")(a.target.value),className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"registration_number",className:"text-foreground",children:"Registration Number"}),(0,v.jsx)(B.Input,{id:"registration_number",value:e.registration_number,onChange:a=>C("registration_number")(a.target.value),placeholder:"Optional registration reference",className:"bg-background border-input text-foreground"})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"former_entity",className:"text-foreground",children:"Former Vehicle Name"}),(0,v.jsx)(B.Input,{id:"former_entity",value:e.former_entity,onChange:a=>C("former_entity")(a.target.value),placeholder:"Previous name if renamed",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"website_url",className:"text-foreground",children:"Website"}),(0,v.jsx)(B.Input,{id:"website_url",type:"url",value:e.website_url,onChange:a=>C("website_url")(a.target.value),placeholder:"https://example.com",className:"bg-background border-input text-foreground"})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"address",className:"text-foreground",children:"Address"}),(0,v.jsx)(cp.Textarea,{id:"address",rows:2,value:e.address,onChange:a=>C("address")(a.target.value),placeholder:"Registered address of the vehicle",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-4 rounded-xl border border-border bg-muted/30 p-5",children:[(0,v.jsxs)("div",{className:"space-y-1",children:[(0,v.jsx)(G.Label,{className:"text-foreground font-semibold text-base",children:"Service Providers"}),(0,v.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assign the arranger and legal counsel for this vehicle."})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,v.jsxs)("div",{className:"space-y-2.5 p-4 rounded-lg bg-background/50 border border-border/50 transition-colors hover:border-border",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10",children:(0,v.jsx)(Q.Building2,{className:"h-4 w-4 text-primary"})}),(0,v.jsx)(G.Label,{className:"text-foreground font-medium",children:"Arranger"})]}),(0,v.jsxs)(D.Select,{value:e.arranger_entity_id,onValueChange:a=>f(b=>({...b,arranger_entity_id:"none"===a?"":a})),disabled:u,children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground h-11",children:(0,v.jsx)(D.SelectValue,{placeholder:u?"Loading...":"Select arranger"})}),(0,v.jsxs)(D.SelectContent,{children:[(0,v.jsx)(D.SelectItem,{value:"none",children:"None"}),s.arrangers.map(a=>(0,v.jsx)(D.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,v.jsx)("p",{className:"text-xs text-muted-foreground",children:"Entity responsible for deal structuring"})]}),(0,v.jsxs)("div",{className:"space-y-2.5 p-4 rounded-lg bg-background/50 border border-border/50 transition-colors hover:border-border",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-amber-500/10",children:(0,v.jsx)(cu.Scale,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"})}),(0,v.jsx)(G.Label,{className:"text-foreground font-medium",children:"Legal Counsel"})]}),(0,v.jsxs)(D.Select,{value:e.lawyer_id,onValueChange:a=>f(b=>({...b,lawyer_id:"none"===a?"":a})),disabled:u,children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground h-11",children:(0,v.jsx)(D.SelectValue,{placeholder:u?"Loading...":"Select legal counsel"})}),(0,v.jsxs)(D.SelectContent,{children:[(0,v.jsx)(D.SelectItem,{value:"none",children:"None"}),s.lawyers.map(a=>(0,v.jsxs)(D.SelectItem,{value:a.id,children:[a.name," ",a.firm_name&&a.name!==a.firm_name?`(${a.firm_name})`:""]},a.id))]})]}),(0,v.jsx)("p",{className:"text-xs text-muted-foreground",children:"Law firm handling legal documentation"})]})]})]}),(0,v.jsxs)("div",{className:"space-y-3",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Vehicle Logo"}),(0,v.jsx)("div",{className:"flex flex-col gap-3 rounded-xl border border-border bg-muted/30 p-4",children:(0,v.jsxs)("div",{className:"flex items-center gap-4",children:[(0,v.jsx)("div",{className:"h-16 w-16 rounded-lg border border-border bg-muted flex items-center justify-center",children:g?(0,v.jsx)(cm.default,{src:g,alt:"Vehicle logo preview",width:64,height:64,className:"h-full w-full rounded object-contain p-1"}):(0,v.jsx)("span",{className:"text-xs text-muted-foreground",children:"Upload logo"})}),(0,v.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,v.jsxs)("label",{className:"inline-flex items-center gap-2 rounded-md border border-dashed border-border px-3 py-2 text-sm text-foreground cursor-pointer transition-colors hover:border-primary hover:bg-muted",children:[(0,v.jsx)(cr.Upload,{className:"h-4 w-4"}),(0,v.jsx)("span",{children:g?"Replace Logo":"Upload Logo"}),(0,v.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:a=>{let b=a.target.files?.[0];b&&(E(b),a.target.value="")}})]}),(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,v.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[(0,v.jsx)(ct.Loader2,{className:"h-3 w-3 animate-spin"}),"Uploading"]}),g&&!i&&(0,v.jsxs)(A.Button,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-destructive hover:text-destructive/80",onClick:()=>{h(""),l(null)},children:[(0,v.jsx)(cs.Trash2,{className:"mr-1 h-3 w-3"}),"Remove logo"]})]}),(0,v.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG or JPG, recommended minimum 240240."}),k&&(0,v.jsx)("p",{className:"text-xs text-destructive",children:k})]})]})})]}),(0,v.jsxs)("div",{className:"space-y-4 rounded-xl border border-border bg-muted/30 p-5",children:[(0,v.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,v.jsxs)("div",{className:"space-y-1",children:[(0,v.jsx)(G.Label,{className:"text-foreground font-semibold",children:"Reporting Requirements"}),(0,v.jsx)("p",{className:"text-sm text-muted-foreground",children:z})]}),(0,v.jsx)(cq.Switch,{checked:e.requires_reporting,onCheckedChange:a=>f(b=>({...b,requires_reporting:a,reporting_type:a&&"Not Required"===b.reporting_type?"Company Only":a?b.reporting_type:"Not Required"}))})]}),(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Reporting Channel"}),(0,v.jsxs)(D.Select,{value:e.reporting_type,onValueChange:C("reporting_type"),disabled:!e.requires_reporting,children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,v.jsx)(D.SelectValue,{placeholder:"Reporting channel"})}),(0,v.jsx)(D.SelectContent,{children:cx.map(a=>(0,v.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value))})]})]})})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"notes",className:"text-foreground",children:"Notes"}),(0,v.jsx)(cp.Textarea,{id:"notes",rows:3,value:e.notes,onChange:a=>C("notes")(a.target.value),placeholder:"Add any additional context for this vehicle.",className:"bg-background border-input text-foreground"})]}),o&&(0,v.jsx)("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:o})]}),(0,v.jsxs)(cn.DialogFooter,{className:"flex items-center justify-end gap-2 border-t border-border pt-4",children:[(0,v.jsx)(A.Button,{type:"button",variant:"outline",onClick:c,disabled:m,children:"Cancel"}),(0,v.jsx)(A.Button,{type:"submit",disabled:m,className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:m?(0,v.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,v.jsx)(ct.Loader2,{className:"h-4 w-4 animate-spin"}),"Saving"]}):"Save Changes"})]})]})})}),(0,v.jsx)(co.AlertDialog,{open:q,onOpenChange:r,children:(0,v.jsxs)(co.AlertDialogContent,{children:[(0,v.jsxs)(co.AlertDialogHeader,{children:[(0,v.jsx)(co.AlertDialogTitle,{children:"Save changes?"}),(0,v.jsxs)(co.AlertDialogDescription,{children:["Updates to ",(0,v.jsx)("strong",{children:a.name})," will be reflected across all linked deals and reporting workflows."]})]}),(0,v.jsxs)(co.AlertDialogFooter,{children:[(0,v.jsx)(co.AlertDialogCancel,{children:"Cancel"}),(0,v.jsx)(co.AlertDialogAction,{onClick:H,children:"Yes, Save"})]})]})})]})}let cA=[{value:"LIVE",label:"Live"},{value:"TBD",label:"TBD"},{value:"CLOSED",label:"Closed"}],cB=[{value:"fund",label:"Fund"},{value:"spv",label:"SPV"},{value:"securitization",label:"Securitization"},{value:"note",label:"Note"},{value:"venture_capital",label:"Venture Capital"},{value:"private_equity",label:"Private Equity"},{value:"real_estate",label:"Real Estate"},{value:"other",label:"Other"}],cC=[{value:"Not Required",label:"Not Required"},{value:"Company Only",label:"Company Only"},{value:"Online only",label:"Online Only"},{value:"Company + Online",label:"Company + Online"}],cD=["USD","EUR","GBP","CHF"],cE={name:"",entity_code:"",platform:"",investment_name:"",former_entity:"",type:"fund",status:"LIVE",domicile:"",currency:"USD",formation_date:"",legal_jurisdiction:"",registration_number:"",reporting_type:"Not Required",requires_reporting:!1,notes:"",website_url:"",address:"",arranger_entity_id:"",lawyer_id:""};function cF({open:a,onOpenChange:b,onSuccess:c}){let[d,e]=(0,w.useState)(cE),[f,g]=(0,w.useState)(""),[h,i]=(0,w.useState)(!1),[j,k]=(0,w.useState)(null),[l,m]=(0,w.useState)(null),[n,o]=(0,w.useState)(!1),[p,q]=(0,w.useState)({arrangers:[],lawyers:[]}),[r,s]=(0,w.useState)(!1),t=(0,w.useCallback)(async()=>{s(!0);try{let a=await fetch("/api/vehicles/dropdown-options");if(a.ok){let b=await a.json();q(b)}}catch(a){console.error("Failed to fetch dropdown options:",a)}finally{s(!1)}},[]);(0,w.useEffect)(()=>{a&&t()},[a,t]),(0,w.useEffect)(()=>{a||(e(cE),g(""),k(null),m(null),o(!1),i(!1))},[a]);let u=(0,w.useMemo)(()=>d.requires_reporting?"Not Required"===d.reporting_type?"Select a reporting channel so stakeholders know where updates are delivered.":"This vehicle will appear in reporting queues and reminders.":"Enable to track follow-up obligations for this vehicle.",[d.requires_reporting,d.reporting_type]),x=a=>b=>{let c=b.target.value;e(b=>({...b,[a]:c}))},y=async a=>{k(null),i(!0);try{let b=new FormData;b.append("file",a),b.append("vehicle_id","new");let c=await fetch("/api/entities/logo-upload",{method:"POST",body:b}),d=await c.json().catch(()=>({}));if(!c.ok||!d?.url)throw Error(d?.error||"Failed to upload logo");g(d.url)}catch(a){k(a instanceof Error?a.message:"Failed to upload logo")}finally{i(!1)}},z=async a=>{if(a.preventDefault(),m(null),!d.name.trim())return void m("Vehicle name is required");if(!d.domicile.trim())return void m("Domicile is required");if(d.requires_reporting&&"Not Required"===d.reporting_type)return void m("Select a reporting channel when reporting is enabled");o(!0);try{let a={name:d.name.trim(),entity_code:d.entity_code.trim()||null,platform:d.platform.trim()||null,investment_name:d.investment_name.trim()||null,former_entity:d.former_entity.trim()||null,type:d.type,status:d.status,domicile:d.domicile.trim(),currency:d.currency.trim().toUpperCase()||"USD",formation_date:d.formation_date||null,legal_jurisdiction:d.legal_jurisdiction.trim()||null,registration_number:d.registration_number.trim()||null,reporting_type:d.reporting_type,requires_reporting:d.requires_reporting,notes:d.notes.trim()||null,logo_url:f||null,website_url:d.website_url.trim()||null,address:d.address.trim()||null,arranger_entity_id:d.arranger_entity_id||null,lawyer_id:d.lawyer_id||null},e=await fetch("/api/vehicles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),g=await e.json().catch(()=>({}));if(!e.ok)throw Error(g.details||g.error||"Failed to create vehicle");c(g.vehicle),b(!1)}catch(a){m(a instanceof Error?a.message:"Something went wrong while creating the vehicle")}finally{o(!1)}};return(0,v.jsx)(cn.Dialog,{open:a,onOpenChange:b,children:(0,v.jsx)(cn.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto no-scrollbar rounded-2xl border border-border bg-background shadow-xl",children:(0,v.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,v.jsxs)(cn.DialogHeader,{className:"space-y-2",children:[(0,v.jsx)(cn.DialogTitle,{className:"text-2xl text-foreground",children:"Create Vehicle"}),(0,v.jsx)(cn.DialogDescription,{className:"text-sm text-muted-foreground",children:"Complete the vehicle profile used when linking deals and investor reporting."})]}),(0,v.jsxs)("div",{className:"grid gap-5",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"vehicle-name",className:"text-foreground",children:"Vehicle Name *"}),(0,v.jsx)(B.Input,{id:"vehicle-name",value:d.name,onChange:x("name"),placeholder:"e.g., Verso Fund II",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"vehicle-code",className:"text-foreground",children:"Vehicle Code"}),(0,v.jsx)(B.Input,{id:"vehicle-code",value:d.entity_code,onChange:x("entity_code"),placeholder:"e.g., VC101",className:"bg-background border-input text-foreground font-mono uppercase"})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Status"}),(0,v.jsxs)(D.Select,{value:d.status,onValueChange:a=>e(b=>({...b,status:a})),children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,v.jsx)(D.SelectValue,{placeholder:"Select status"})}),(0,v.jsx)(D.SelectContent,{children:cA.map(a=>(0,v.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Type"}),(0,v.jsxs)(D.Select,{value:d.type,onValueChange:a=>e(b=>({...b,type:a})),children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,v.jsx)(D.SelectValue,{placeholder:"Select type"})}),(0,v.jsx)(D.SelectContent,{children:cB.map(a=>(0,v.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Currency"}),(0,v.jsxs)(D.Select,{value:d.currency,onValueChange:a=>e(b=>({...b,currency:a})),children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,v.jsx)(D.SelectValue,{placeholder:"Currency"})}),(0,v.jsx)(D.SelectContent,{children:cD.map(a=>(0,v.jsx)(D.SelectItem,{value:a,children:a},a))})]})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"platform",className:"text-foreground",children:"Platform"}),(0,v.jsx)(B.Input,{id:"platform",value:d.platform,onChange:x("platform"),placeholder:"e.g., VC1SCSP",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"investment_name",className:"text-foreground",children:"Investment Name"}),(0,v.jsx)(B.Input,{id:"investment_name",value:d.investment_name,onChange:x("investment_name"),placeholder:"e.g., Revolut Secondary",className:"bg-background border-input text-foreground"})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"domicile",className:"text-foreground",children:"Domicile / Jurisdiction *"}),(0,v.jsx)(B.Input,{id:"domicile",value:d.domicile,onChange:x("domicile"),placeholder:"e.g., Luxembourg, BVI, Delaware",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"formation_date",className:"text-foreground",children:"Formation Date"}),(0,v.jsx)(B.Input,{id:"formation_date",type:"date",value:d.formation_date,onChange:x("formation_date"),className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"registration_number",className:"text-foreground",children:"Registration Number"}),(0,v.jsx)(B.Input,{id:"registration_number",value:d.registration_number,onChange:x("registration_number"),placeholder:"Optional registration reference",className:"bg-background border-input text-foreground"})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"former_entity",className:"text-foreground",children:"Former Vehicle Name"}),(0,v.jsx)(B.Input,{id:"former_entity",value:d.former_entity,onChange:x("former_entity"),placeholder:"Previous name if renamed",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"website_url",className:"text-foreground",children:"Website"}),(0,v.jsx)(B.Input,{id:"website_url",type:"url",value:d.website_url,onChange:x("website_url"),placeholder:"https://example.com",className:"bg-background border-input text-foreground"})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"address",className:"text-foreground",children:"Address"}),(0,v.jsx)(cp.Textarea,{id:"address",rows:2,value:d.address,onChange:a=>e(b=>({...b,address:a.target.value})),placeholder:"Registered address of the vehicle",className:"bg-background border-input text-foreground"})]}),(0,v.jsxs)("div",{className:"space-y-4 rounded-xl border border-border bg-muted/30 p-5",children:[(0,v.jsxs)("div",{className:"space-y-1",children:[(0,v.jsx)(G.Label,{className:"text-foreground font-semibold text-base",children:"Service Providers"}),(0,v.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assign the arranger and legal counsel for this vehicle."})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,v.jsxs)("div",{className:"space-y-2.5 p-4 rounded-lg bg-background/50 border border-border/50 transition-colors hover:border-border",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10",children:(0,v.jsx)(Q.Building2,{className:"h-4 w-4 text-primary"})}),(0,v.jsx)(G.Label,{className:"text-foreground font-medium",children:"Arranger"})]}),(0,v.jsxs)(D.Select,{value:d.arranger_entity_id,onValueChange:a=>e(b=>({...b,arranger_entity_id:"none"===a?"":a})),disabled:r,children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground h-11",children:(0,v.jsx)(D.SelectValue,{placeholder:r?"Loading...":"Select arranger"})}),(0,v.jsxs)(D.SelectContent,{children:[(0,v.jsx)(D.SelectItem,{value:"none",children:"None"}),p.arrangers.map(a=>(0,v.jsx)(D.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,v.jsx)("p",{className:"text-xs text-muted-foreground",children:"Entity responsible for deal structuring"})]}),(0,v.jsxs)("div",{className:"space-y-2.5 p-4 rounded-lg bg-background/50 border border-border/50 transition-colors hover:border-border",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-amber-500/10",children:(0,v.jsx)(cu.Scale,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"})}),(0,v.jsx)(G.Label,{className:"text-foreground font-medium",children:"Legal Counsel"})]}),(0,v.jsxs)(D.Select,{value:d.lawyer_id,onValueChange:a=>e(b=>({...b,lawyer_id:"none"===a?"":a})),disabled:r,children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground h-11",children:(0,v.jsx)(D.SelectValue,{placeholder:r?"Loading...":"Select legal counsel"})}),(0,v.jsxs)(D.SelectContent,{children:[(0,v.jsx)(D.SelectItem,{value:"none",children:"None"}),p.lawyers.map(a=>(0,v.jsxs)(D.SelectItem,{value:a.id,children:[a.name," ",a.firm_name&&a.name!==a.firm_name?`(${a.firm_name})`:""]},a.id))]})]}),(0,v.jsx)("p",{className:"text-xs text-muted-foreground",children:"Law firm handling legal documentation"})]})]})]}),(0,v.jsxs)("div",{className:"space-y-3",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Vehicle Logo"}),(0,v.jsx)("div",{className:"flex flex-col gap-3 rounded-xl border border-border bg-muted/30 p-4",children:(0,v.jsxs)("div",{className:"flex items-center gap-4",children:[(0,v.jsx)("div",{className:"h-16 w-16 rounded-lg border border-border bg-muted flex items-center justify-center",children:f?(0,v.jsx)(cm.default,{src:f,alt:"Entity logo preview",width:64,height:64,className:"h-full w-full rounded object-contain p-1"}):(0,v.jsx)("span",{className:"text-xs text-muted-foreground",children:"Upload logo"})}),(0,v.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,v.jsxs)("label",{className:"inline-flex items-center gap-2 rounded-md border border-dashed border-border px-3 py-2 text-sm text-foreground cursor-pointer transition-colors hover:border-primary hover:bg-muted",children:[(0,v.jsx)(cr.Upload,{className:"h-4 w-4"}),(0,v.jsx)("span",{children:f?"Replace Logo":"Upload Logo"}),(0,v.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:a=>{let b=a.target.files?.[0];b&&(y(b),a.target.value="")}})]}),(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[h&&(0,v.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[(0,v.jsx)(ct.Loader2,{className:"h-3 w-3 animate-spin"}),"Uploading"]}),f&&!h&&(0,v.jsxs)(A.Button,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-destructive hover:text-destructive/80",onClick:()=>{g(""),k(null)},children:[(0,v.jsx)(cs.Trash2,{className:"mr-1 h-3 w-3"}),"Remove logo"]})]}),(0,v.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG or JPG, recommended minimum 240240."}),j&&(0,v.jsx)("p",{className:"text-xs text-destructive",children:j})]})]})})]}),(0,v.jsxs)("div",{className:"space-y-4 rounded-xl border border-border bg-muted/30 p-5",children:[(0,v.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,v.jsxs)("div",{className:"space-y-1",children:[(0,v.jsx)(G.Label,{className:"text-foreground font-semibold",children:"Reporting Requirements"}),(0,v.jsx)("p",{className:"text-sm text-muted-foreground",children:u})]}),(0,v.jsx)(cq.Switch,{checked:d.requires_reporting,onCheckedChange:a=>e(b=>({...b,requires_reporting:a,reporting_type:a&&"Not Required"===b.reporting_type?"Company Only":a?b.reporting_type:"Not Required"}))})]}),(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{className:"text-foreground",children:"Reporting Channel"}),(0,v.jsxs)(D.Select,{value:d.reporting_type,onValueChange:a=>e(b=>({...b,reporting_type:a})),disabled:!d.requires_reporting,children:[(0,v.jsx)(D.SelectTrigger,{className:"bg-background border-input text-foreground",children:(0,v.jsx)(D.SelectValue,{placeholder:"Reporting channel"})}),(0,v.jsx)(D.SelectContent,{children:cC.map(a=>(0,v.jsx)(D.SelectItem,{value:a.value,children:a.label},a.value))})]})]})})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)(G.Label,{htmlFor:"notes",className:"text-foreground",children:"Notes"}),(0,v.jsx)(cp.Textarea,{id:"notes",rows:3,value:d.notes,onChange:a=>e(b=>({...b,notes:a.target.value})),placeholder:"Add any additional context for this entity.",className:"bg-background border-input text-foreground"})]}),l&&(0,v.jsx)("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:l})]}),(0,v.jsxs)(cn.DialogFooter,{className:"flex items-center justify-end gap-2 border-t border-border pt-4",children:[(0,v.jsx)(A.Button,{type:"button",variant:"outline",onClick:()=>b(!1),disabled:n,children:"Cancel"}),(0,v.jsx)(A.Button,{type:"submit",disabled:n,className:"bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:n?(0,v.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,v.jsx)(ct.Loader2,{className:"h-4 w-4 animate-spin"}),"Creating"]}):"Create Vehicle"})]})]})})})}function cG({entities:a}){let b=(0,x.useRouter)(),[c,d]=(0,w.useState)(a),[e,f]=(0,w.useState)("table"),[g,h]=(0,w.useState)(""),[i,j]=(0,w.useState)("all"),[k,l]=(0,w.useState)("all"),[m,n]=(0,w.useState)("all"),[o,p]=(0,w.useState)(null),[q,r]=(0,w.useState)(!1),[s,t]=(0,w.useState)(null),[u,P]=(0,w.useState)("success"),[Q,R]=(0,w.useState)(!1),S=(0,w.useMemo)(()=>{let a=new Set;return c.forEach(b=>{b.platform&&a.add(b.platform)}),Array.from(a).sort()},[c]),T=(0,w.useMemo)(()=>{let a=[...c];if(g){let b=g.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(b)||a.entity_code?.toLowerCase().includes(b)||a.investment_name?.toLowerCase().includes(b)||a.platform?.toLowerCase().includes(b)||a.former_entity?.toLowerCase().includes(b))}return"all"!==i&&(a=a.filter(a=>a.status===i)),"all"!==k&&(a=a.filter(a=>a.platform===k)),"all"!==m&&(a=a.filter(a=>a.type===m)),Q&&(a=a.filter(a=>(a.open_flag_count??0)>0)),a},[c,g,i,k,m,Q]),U=(0,w.useMemo)(()=>({total:c.length,live:c.filter(a=>"LIVE"===a.status).length,closed:c.filter(a=>"CLOSED"===a.status).length,pending:c.filter(a=>"PENDING"===a.status).length,platforms:new Set(c.map(a=>a.platform).filter(Boolean)).size}),[c]),V=(0,w.useMemo)(()=>c.filter(a=>(a.open_flag_count??0)>0).sort((a,b)=>(b.open_flag_count??0)-(a.open_flag_count??0)),[c]),W=a=>{b.push(`/versotech_main/entities/${a}`)},X=a=>{p(a)},Y=async(a,b)=>{try{if(!(await fetch(`/api/entities/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})})).ok)throw Error("Failed to update status");d(c=>c.map(c=>c.id===a?{...c,status:b}:c)),P("success"),t(`Entity status updated to ${b}`),setTimeout(()=>t(null),3e3)}catch(a){console.error("Failed to update status:",a),P("error"),t("Failed to update entity status"),setTimeout(()=>t(null),3e3)}};return(0,v.jsxs)("div",{className:"p-6 space-y-6 text-foreground",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-3xl font-bold",children:"Vehicles"}),(0,v.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage investment vehicles with comprehensive tracking and multiple view modes."})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(A.Button,{variant:"outline",className:"gap-2",asChild:!0,children:(0,v.jsxs)(y.default,{href:"/versotech_main/documents",children:[(0,v.jsx)(I.FileText,{className:"h-4 w-4"}),"Documents Workspace"]})}),(0,v.jsxs)(A.Button,{className:"gap-2",onClick:()=>r(!0),children:[(0,v.jsx)(M.Plus,{className:"h-4 w-4"}),"Create Vehicle"]})]})]}),s&&(0,v.jsx)("div",{className:`rounded-lg border p-4 text-sm ${"success"===u?"border-emerald-400/40 bg-emerald-500/10 text-emerald-100":"border-red-400/40 bg-red-500/10 text-red-100"}`,children:s}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,v.jsx)(z.Card,{className:"border border-white/10 bg-white/5",children:(0,v.jsxs)(z.CardHeader,{className:"pb-2",children:[(0,v.jsx)(z.CardTitle,{className:"text-sm text-muted-foreground",children:"Platforms"}),(0,v.jsx)(z.CardDescription,{className:"text-3xl text-foreground font-semibold",children:U.platforms})]})}),(0,v.jsx)(z.Card,{className:"border border-white/10 bg-white/5",children:(0,v.jsxs)(z.CardHeader,{className:"pb-2",children:[(0,v.jsx)(z.CardTitle,{className:"text-sm text-muted-foreground",children:"Total Vehicles"}),(0,v.jsx)(z.CardDescription,{className:"text-3xl text-foreground font-semibold",children:U.total})]})}),(0,v.jsx)(z.Card,{className:"border border-white/10 bg-white/5",children:(0,v.jsxs)(z.CardHeader,{className:"pb-2",children:[(0,v.jsx)(z.CardTitle,{className:"text-sm text-muted-foreground",children:"Live"}),(0,v.jsx)(z.CardDescription,{className:"text-3xl text-emerald-400 font-semibold",children:U.live})]})}),(0,v.jsx)(z.Card,{className:"border border-white/10 bg-white/5",children:(0,v.jsxs)(z.CardHeader,{className:"pb-2",children:[(0,v.jsx)(z.CardTitle,{className:"text-sm text-muted-foreground",children:"Closed"}),(0,v.jsx)(z.CardDescription,{className:"text-3xl text-red-400 font-semibold",children:U.closed})]})}),(0,v.jsx)(z.Card,{className:"border border-white/10 bg-white/5",children:(0,v.jsxs)(z.CardHeader,{className:"pb-2",children:[(0,v.jsx)(z.CardTitle,{className:"text-sm text-muted-foreground",children:"Pending"}),(0,v.jsx)(z.CardDescription,{className:"text-3xl text-amber-400 font-semibold",children:U.pending})]})})]}),V.length>0&&(0,v.jsxs)(z.Card,{className:"border border-red-400/30 bg-red-500/10",children:[(0,v.jsxs)(z.CardHeader,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)(z.CardTitle,{className:"text-base text-red-100 flex items-center gap-2",children:[(0,v.jsx)(J,{className:"h-4 w-4"}),"Action Center"]}),(0,v.jsx)(z.CardDescription,{className:"text-red-100/80",children:"Vehicles with outstanding health flags. Resolve issues to keep governance on track."})]}),(0,v.jsx)(C.Badge,{className:"bg-red-500/20 border-red-400/40 text-red-100",children:V.length})]}),(0,v.jsxs)(z.CardContent,{className:"space-y-3",children:[V.slice(0,4).map(a=>(0,v.jsx)("button",{onClick:()=>W(a.id),className:"w-full text-left rounded-lg border border-red-400/30 bg-black/20 px-4 py-3 hover:bg-red-500/10 transition-colors",children:(0,v.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-sm font-semibold text-foreground",children:a.name}),(0,v.jsxs)("p",{className:"text-xs text-red-100/80",children:[a.open_flag_count," unresolved flag",1===a.open_flag_count?"":"s","  Last update"," ",a.last_event_at?new Date(a.last_event_at).toLocaleDateString():"n/a"]})]}),(0,v.jsx)(C.Badge,{className:"bg-red-500/20 border-red-400/40 text-red-100",children:"Review"})]})},a.id)),V.length>4&&(0,v.jsx)("p",{className:"text-xs text-red-100/60",children:"Showing top priorities. Use the filter below to focus on all flagged vehicles."})]})]}),(0,v.jsx)(z.Card,{className:"border border-white/10 bg-white/5",children:(0,v.jsxs)(z.CardContent,{className:"pt-6 space-y-4",children:[(0,v.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[(0,v.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 flex-1 w-full",children:[(0,v.jsxs)("div",{className:"relative flex-1",children:[(0,v.jsx)(N.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,v.jsx)(B.Input,{placeholder:"Search by code, name, investment, or platform",value:g,onChange:a=>h(a.target.value),className:"pl-10"})]}),(0,v.jsxs)(D.Select,{value:i,onValueChange:j,children:[(0,v.jsx)(D.SelectTrigger,{className:"w-full md:w-[160px]",children:(0,v.jsx)(D.SelectValue,{placeholder:"Status"})}),(0,v.jsxs)(D.SelectContent,{children:[(0,v.jsx)(D.SelectItem,{value:"all",children:"All Status"}),(0,v.jsx)(D.SelectItem,{value:"LIVE",children:"Live"}),(0,v.jsx)(D.SelectItem,{value:"CLOSED",children:"Closed"}),(0,v.jsx)(D.SelectItem,{value:"PENDING",children:"Pending"})]})]}),(0,v.jsxs)(D.Select,{value:k,onValueChange:l,children:[(0,v.jsx)(D.SelectTrigger,{className:"w-full md:w-[160px]",children:(0,v.jsx)(D.SelectValue,{placeholder:"Platform"})}),(0,v.jsxs)(D.SelectContent,{children:[(0,v.jsx)(D.SelectItem,{value:"all",children:"All Platforms"}),S.map(a=>(0,v.jsx)(D.SelectItem,{value:a,children:a},a))]})]}),(0,v.jsxs)(D.Select,{value:m,onValueChange:n,children:[(0,v.jsx)(D.SelectTrigger,{className:"w-full md:w-[180px]",children:(0,v.jsx)(D.SelectValue,{placeholder:"Type"})}),(0,v.jsxs)(D.SelectContent,{children:[(0,v.jsx)(D.SelectItem,{value:"all",children:"All Types"}),(0,v.jsx)(D.SelectItem,{value:"venture_capital",children:"Venture Capital"}),(0,v.jsx)(D.SelectItem,{value:"private_equity",children:"Private Equity"}),(0,v.jsx)(D.SelectItem,{value:"real_estate",children:"Real Estate"}),(0,v.jsx)(D.SelectItem,{value:"fund",children:"Fund"}),(0,v.jsx)(D.SelectItem,{value:"spv",children:"SPV"}),(0,v.jsx)(D.SelectItem,{value:"other",children:"Other"})]})]})]}),(0,v.jsx)(E.Tabs,{value:e,onValueChange:a=>f(a),children:(0,v.jsxs)(E.TabsList,{children:[(0,v.jsxs)(E.TabsTrigger,{value:"table",className:"gap-2",children:[(0,v.jsx)(O.Table,{className:"h-4 w-4"}),"Table"]}),(0,v.jsxs)(E.TabsTrigger,{value:"list",className:"gap-2",children:[(0,v.jsx)(L.List,{className:"h-4 w-4"}),"List"]}),(0,v.jsxs)(E.TabsTrigger,{value:"kanban",className:"gap-2",children:[(0,v.jsx)(K.LayoutGrid,{className:"h-4 w-4"}),"Kanban"]})]})})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,v.jsx)(F.Checkbox,{id:"filter-flagged",checked:Q,onCheckedChange:a=>R(!0===a)}),(0,v.jsx)(G.Label,{htmlFor:"filter-flagged",className:"cursor-pointer",children:"Show only vehicles with unresolved flags"})]}),0===T.length?(0,v.jsx)("div",{className:"py-12 text-center text-muted-foreground",children:(0,v.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,v.jsx)(H.AlertCircle,{className:"h-6 w-6"}),(0,v.jsx)("p",{children:"No vehicles found. Try adjusting your filters."})]})}):(0,v.jsxs)(v.Fragment,{children:["table"===e&&(0,v.jsx)(cj,{entities:T,onEntityClick:W,onEntityEdit:X}),"list"===e&&(0,v.jsx)(ck,{entities:T,onEntityClick:W,onEntityEdit:X,onStatusChange:Y}),"kanban"===e&&(0,v.jsx)(cl,{entities:T,onEntityClick:W,onEntityEdit:X,onStatusChange:Y})]})]})}),o&&(0,v.jsx)(cz,{entity:o,open:!0,onClose:()=>p(null),onSuccess:a=>{d(b=>b.map(b=>b.id===a.id?a:b)),p(null)}}),(0,v.jsx)(cF,{open:q,onOpenChange:r,onSuccess:a=>{d(b=>[a,...b]),P("success"),t(`Entity "${a.name}" created successfully.`),setTimeout(()=>t(null),4e3),b.refresh()}})]})}a.s(["EntitiesPageEnhanced",()=>cG],474342)}];

//# sourceMappingURL=versotech-portal_src_components_entities_entities-page-enhanced_tsx_31ea80ae._.js.map