module.exports=[704130,e=>{"use strict";var t=e.i(779444),r=e.i(698261),i=e.i(821776),a=e.i(796417),n=e.i(856890),o=e.i(26996),l=e.i(436944),s=e.i(88281),c=e.i(765944),d=e.i(984788),p=e.i(237011),u=e.i(712007),h=e.i(777657),m=e.i(13180),f=e.i(273827),g=e.i(193695);e.i(947956);var y=e.i(36217),v=e.i(414131),_=e.i(433669),b=e.i(38896),x=e.i(107854);let T=x.z.object({label:x.z.string().optional(),type:x.z.enum(["text","email","number","date","datetime","select","checkbox","investor_select","vehicle_select","conversation_select"]),placeholder:x.z.string().optional(),required:x.z.boolean().optional(),options:x.z.array(x.z.union([x.z.string(),x.z.number()])).optional(),helperText:x.z.string().optional(),defaultValue:x.z.union([x.z.string(),x.z.boolean(),x.z.number()]).optional(),dependsOn:x.z.string().optional(),showWhen:x.z.union([x.z.string(),x.z.number(),x.z.boolean()]).optional()});x.z.record(x.z.string(),T);let w=[{key:"generate-position-statement",title:"Position Statement",description:"Generate investor position statements with current NAV, distributions, and performance metrics",detailedDescription:"Automatically generate comprehensive position statements for investors showing their current NAV, capital contributions, distributions received, and performance metrics across all vehicles or a specific fund. The statement will be generated as a PDF, watermarked, and ready for distribution.",icon:"BarChart3",category:"documents",triggerType:"manual",requiredRole:"staff_ops",inputSchema:{investor_id:{label:"Investor",type:"investor_select",placeholder:"Select investor",required:!0,helperText:"Choose the investor to generate the position statement for"},vehicle_id:{label:"Vehicle (Optional)",type:"vehicle_select",placeholder:"All vehicles or select specific vehicle",helperText:"Leave empty for all vehicles or select a specific fund"},as_of_date:{label:"As of Date",type:"date",required:!0,helperText:"The date for which to generate the position statement"}}},{key:"process-nda",title:"NDA Agent",description:"Automated NDA generation, DocuSign processing, and professional investor qualification",detailedDescription:"Streamline the NDA process with automated generation, DocuSign integration for e-signatures, and professional investor qualification checks. The workflow handles document creation, sending, tracking, and storage of signed NDAs.",icon:"FileText",category:"compliance",triggerType:"manual",requiredRole:"staff_rm",inputSchema:{series_number:{label:"Series Number",type:"text",placeholder:"VC206",required:!0,helperText:"Series identifier (e.g., VC206)"},project_description:{label:"Project Description",type:"text",placeholder:"VERSO Capital 2 SCSP Series 206",required:!0,helperText:"Full project/series description"},investment_description:{label:"Investment Description",type:"text",placeholder:"OPEN AI Primary Issuance July 2025",required:!0,helperText:"Description of the investment opportunity"},party_a_name:{label:"Party A Name",type:"text",placeholder:"Investor/Company Name",required:!0,helperText:"Name of the investor or company"},party_a_registered_address:{label:"Party A Address",type:"text",placeholder:"Full registered address",required:!0,helperText:"Registered address of Party A"},party_a_city_country:{label:"Party A City/Country",type:"text",placeholder:"City, Country Code",required:!0,helperText:"City and country (e.g., London, GB)"},party_a_representative_name:{label:"Party A Representative",type:"text",placeholder:"Representative Name",required:!0,helperText:"Name of authorized representative"},party_a_representative_title:{label:"Party A Rep. Title",type:"text",placeholder:"CEO, Director, etc.",required:!0,helperText:"Title of the representative"},party_b_name:{label:"Party B Name",type:"text",placeholder:"VERSO Capital 2 SCSP Series 206",defaultValue:'VERSO Capital 2 SCSP Series 206 ("VC206")',helperText:"VERSO entity name (pre-filled)"},party_b_registered_address:{label:"Party B Address",type:"text",placeholder:"2, Avenue Charles de Gaulle – L-1653",defaultValue:"2, Avenue Charles de Gaulle – L-1653",helperText:"VERSO registered address"},party_b_city_country:{label:"Party B City/Country",type:"text",placeholder:"Luxembourg, LU",defaultValue:"Luxembourg, LU",helperText:"VERSO city and country"},party_b_representative_name:{label:"Party B Representative",type:"text",placeholder:"Julien Machot",defaultValue:"Julien Machot",helperText:"VERSO representative name"},party_b_representative_title:{label:"Party B Rep. Title",type:"text",placeholder:"Managing Partner",defaultValue:"Managing Partner",helperText:"VERSO representative title"},dataroom_email:{label:"Data Room Email",type:"email",placeholder:"investor@example.com",required:!0,helperText:"Email for data room access"},execution_date:{label:"Execution Date",type:"date",required:!0,helperText:"Date of NDA execution"},zoho_sign_document_id:{label:"Zoho Sign Document ID",type:"text",placeholder:"Optional - auto-generated if empty",helperText:"Zoho Sign tracking ID (optional)"}}},{key:"shared-drive-notification",title:"Shared-Drive Notification",description:"Automatically notify investors when documents in shared drives are updated",detailedDescription:"Monitor shared drive folders for document changes and automatically notify relevant investors when new documents are uploaded or existing ones are updated. This ensures investors stay informed about important updates without manual intervention.",icon:"Database",category:"communications",triggerType:"scheduled",requiredRole:"staff_ops",inputSchema:{document_category:{label:"Document Category",type:"select",options:["legal","financial","marketing","compliance","reports"],required:!0,helperText:"Type of documents to monitor"},notification_group:{label:"Notification Group",type:"select",options:["investors","staff","compliance","all"],required:!0,helperText:"Who should be notified of changes"}}},{key:"inbox-manager",title:"Inbox Manager",description:"Intelligently process and route investor communications to appropriate teams",detailedDescription:"Automate inbox management by processing incoming emails or VERSOTECH messages, categorizing them based on content, and routing to the appropriate team members. Supports both email filtering and internal messaging workflows.",icon:"MessageSquare",category:"communications",triggerType:"both",requiredRole:"staff_ops",inputSchema:{inbox_type:{label:"Inbox Type",type:"select",options:["email","versotech_messaging"],required:!0,helperText:"Choose the type of inbox to process"},command:{label:"Command/Action",type:"text",placeholder:'e.g., "route to compliance", "create task"',required:!0,helperText:"Specify the action to perform on matched messages"},email_subject:{label:"Email Subject Filter",type:"text",placeholder:"Subject keywords to match",dependsOn:"inbox_type",showWhen:"email",helperText:"Filter emails by subject line"},conversation_id:{label:"Conversation",type:"conversation_select",placeholder:"Select conversation",dependsOn:"inbox_type",showWhen:"versotech_messaging",helperText:"Choose the conversation to apply the command to"}}},{key:"linkedin-leads-scraper",title:"LinkedIn Leads Scraper",description:"Identify and qualify potential high-net-worth investors and institutional clients",detailedDescription:"Scrape LinkedIn profiles based on search criteria to identify potential investors. The workflow extracts contact information, professional background, and qualifies leads based on specified parameters for targeted outreach campaigns.",icon:"Target",category:"data_processing",triggerType:"manual",requiredRole:"staff_rm",inputSchema:{search_url:{label:"LinkedIn Search URL",type:"text",placeholder:"https://www.linkedin.com/search/results/people/?...",required:!0,helperText:"Paste the full LinkedIn search URL with filters applied"},purpose:{label:"Campaign Purpose",type:"select",options:["linkedin_outreach","cold_email_campaign"],required:!0,helperText:"Select the intended use for the scraped leads"}}},{key:"reporting-agent",title:"Reporting Agent",description:"Generate comprehensive investor reports, compliance filings, and performance analytics",detailedDescription:"Automate the generation of investor reports including quarterly statements, annual reports, and compliance filings. Reports can be generated on-demand or scheduled for regular distribution, with support for both public and corporate reporting formats.",icon:"TrendingUp",category:"documents",triggerType:"both",requiredRole:"staff_rm",inputSchema:{report_category:{label:"Report Category",type:"select",options:["public","corporate","both"],required:!0,helperText:"Type of report to generate"},investor_id:{label:"Investor",type:"investor_select",placeholder:"Select investor",required:!0,helperText:"Choose the investor to generate the report for"},vehicle_id:{label:"Vehicle",type:"vehicle_select",placeholder:"Select vehicle",required:!0,helperText:"Choose the fund or vehicle for the report"},frequency:{label:"Report Frequency",type:"select",options:["one-time","monthly","quarterly","annual"],required:!0,helperText:"How often the report should be generated"},include_charts:{label:"Include Charts",type:"checkbox",defaultValue:!0,helperText:"Add visual charts and graphs to the report"}}},{key:"kyc-aml-processing",title:"KYC/AML Processing",description:"Enhanced due diligence for professional investor qualification and BVI FSC compliance",detailedDescription:"Perform comprehensive KYC (Know Your Customer) and AML (Anti-Money Laundering) checks with automated sanctions screening, beneficial ownership analysis, and professional investor verification. Ensures full BVI FSC regulatory compliance.",icon:"Shield",category:"compliance",triggerType:"manual",requiredRole:"staff_admin",inputSchema:{investor_id:{label:"Investor",type:"investor_select",placeholder:"Select investor",required:!0,helperText:"Choose the investor to perform KYC/AML checks on"},investor_type:{label:"Investor Type",type:"select",options:["individual","institution","corporate"],required:!0,helperText:"Classification of the investor"},jurisdiction:{label:"Jurisdiction",type:"text",placeholder:"e.g., United Kingdom, Cayman Islands",required:!0,helperText:"Legal jurisdiction of the investor"},enhanced_dd:{label:"Enhanced Due Diligence",type:"checkbox",helperText:"Perform additional enhanced due diligence checks"}}},{key:"capital-call-processing",title:"Capital Call Processing",description:"Generate capital call notices, wire instructions, and investor notifications",detailedDescription:"Automate the capital call process by generating notices, calculating wire instructions per investor, and sending notifications. The workflow handles document generation, email distribution, and tracking of investor responses.",icon:"Calendar",category:"communications",triggerType:"manual",requiredRole:"staff_admin",requiredTitles:["bizops"],inputSchema:{vehicle_id:{label:"Vehicle",type:"vehicle_select",placeholder:"Select vehicle",required:!0,helperText:"Choose the fund or vehicle for the capital call"},call_percentage:{label:"Call Percentage",type:"number",placeholder:"30.00",required:!0,helperText:"Percentage of committed capital to call (e.g., 30 for 30%)"},due_date:{label:"Due Date",type:"date",required:!0,helperText:"Date by which capital must be received"},wire_deadline:{label:"Wire Deadline",type:"datetime",required:!0,helperText:"Specific date and time for wire transfer deadline"}}},{key:"investor-onboarding",title:"Investor Onboarding",description:"Complete investor onboarding flow: KYC → NDA → Subscription → First Funding",detailedDescription:"Execute the full investor onboarding sequence from initial KYC verification through NDA execution, subscription agreement signing, and first capital commitment. This multi-step workflow coordinates all required documentation and compliance checks.",icon:"Users",category:"multi_step",triggerType:"manual",requiredRole:"staff_ops",inputSchema:{investor_email:{label:"Investor Email",type:"email",placeholder:"investor@example.com",required:!0,helperText:"Primary email address for the new investor"},investment_amount:{label:"Initial Investment",type:"number",placeholder:"1000000",required:!0,helperText:"Target investment amount in USD"},target_vehicle:{label:"Target Vehicle",type:"vehicle_select",placeholder:"Select vehicle",required:!0,helperText:"Fund or vehicle the investor will participate in"},investor_type:{label:"Investor Type",type:"select",options:["individual","institution","corporate"],required:!0,helperText:"Classification for KYC processing"}}},{key:"generate-subscription-pack",title:"Subscription Pack",description:"Generate subscription agreements, PPM, and onboarding documents for new investors",detailedDescription:"Automatically generate a complete subscription package including subscription agreements, Private Placement Memorandum (PPM), and all required onboarding documents. The package is tailored to the specific vehicle and investor type, ready for e-signature.",icon:"FileCheck",category:"documents",triggerType:"manual",requiredRole:"staff_ops",inputSchema:{investor_id:{label:"Investor",type:"investor_select",placeholder:"Select investor",required:!0,helperText:"Choose the investor for subscription pack generation"},vehicle_id:{label:"Vehicle",type:"vehicle_select",placeholder:"Select vehicle",required:!0,helperText:"Fund or vehicle for the subscription"},commitment_amount:{label:"Commitment Amount",type:"number",placeholder:"1000000",required:!0,helperText:"Total commitment amount in USD"},include_ppm:{label:"Include PPM",type:"checkbox",defaultValue:!0,helperText:"Include Private Placement Memorandum"}}},{key:"generate-investment-certificate",title:"Investment Certificate",description:"Generate official investment certificates for fully funded subscriptions",detailedDescription:"Generate a professional investment certificate for investors who have fully funded their subscription. The certificate includes investment details, shares/units held, and is watermarked for security. Automatically triggered when subscriptions reach fully funded status.",icon:"Award",category:"documents",triggerType:"both",requiredRole:"staff_ops",inputSchema:{subscription_id:{label:"Subscription",type:"text",placeholder:"Subscription ID",required:!0,helperText:"The subscription to generate a certificate for"},investor_id:{label:"Investor",type:"investor_select",placeholder:"Select investor",required:!0,helperText:"The investor receiving the certificate"},vehicle_id:{label:"Vehicle",type:"vehicle_select",placeholder:"Select vehicle",required:!0,helperText:"The fund or vehicle for the certificate"},certificate_date:{label:"Certificate Date",type:"date",required:!0,helperText:"The date to display on the certificate"},include_watermark:{label:"Include Watermark",type:"checkbox",defaultValue:!0,helperText:"Add security watermark to the certificate"}}}];async function C(){try{let e=await (0,b.getCurrentUser)();if(!e)return v.NextResponse.json({error:"Unauthorized"},{status:401});let t=(0,_.createServiceClient)(),{data:r}=await t.from("staff_permissions").select("permission").eq("user_id",e.id).eq("permission","super_admin").single();if(!r)return v.NextResponse.json({error:"Forbidden"},{status:403});let{data:i}=await t.from("workflows").select("key, is_active"),a=new Map(i?.map(e=>[e.key,e.is_active])||[]),{data:n}=await t.from("workflow_runs").select("workflow_key, status, duration_ms, created_at").gte("created_at",new Date(Date.now()-2592e6).toISOString()),o={};n?.forEach(e=>{o[e.workflow_key]||(o[e.workflow_key]={total_runs:0,successful_runs:0,failed_runs:0,total_duration:0,last_run_at:null});let t=o[e.workflow_key];t.total_runs++,"completed"===e.status&&t.successful_runs++,"failed"===e.status&&t.failed_runs++,e.duration_ms&&(t.total_duration+=e.duration_ms),(!t.last_run_at||e.created_at>t.last_run_at)&&(t.last_run_at=e.created_at)});let l=w.map(e=>{let t=o[e.key]||{total_runs:0,successful_runs:0,failed_runs:0,total_duration:0,last_run_at:null};return{id:e.key,key:e.key,title:e.title,category:e.category,enabled:a.get(e.key)??!0,success_rate:t.total_runs>0?Math.round(t.successful_runs/t.total_runs*100):100,total_runs:t.total_runs,successful_runs:t.successful_runs,failed_runs:t.failed_runs,last_run_at:t.last_run_at,avg_duration_ms:t.total_runs>0?Math.round(t.total_duration/t.total_runs):0}});return v.NextResponse.json({success:!0,data:{workflows:l}})}catch(e){return console.error("Workflows API error:",e),v.NextResponse.json({error:"Internal server error"},{status:500})}}w.map(e=>[e.key,e]),e.s(["GET",()=>C],579514);var R=e.i(579514);let S=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/admin/workflows/route",pathname:"/api/admin/workflows",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/versotech-portal/src/app/api/admin/workflows/route.ts",nextConfigOutput:"",userland:R}),{workAsyncStorage:k,workUnitAsyncStorage:q,serverHooks:A}=S;function P(){return(0,i.patchFetch)({workAsyncStorage:k,workUnitAsyncStorage:q})}async function E(e,t,i){S.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/admin/workflows/route";v=v.replace(/\/index$/,"")||"/";let _=await S.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!_)return t.statusCode=400,t.end("Bad Request"),null==i.waitUntil||i.waitUntil.call(i,Promise.resolve()),null;let{buildId:b,params:x,nextConfig:T,parsedUrl:w,isDraftMode:C,prerenderManifest:R,routerServerContext:k,isOnDemandRevalidate:q,revalidateOnlyGenerated:A,resolvedPathname:P,clientReferenceManifest:E,serverActionsManifest:D}=_,I=(0,l.normalizeAppPath)(v),N=!!(R.dynamicRoutes[I]||R.routes[P]),O=async()=>((null==k?void 0:k.render404)?await k.render404(e,t,w,!1):t.end("This page could not be found"),null);if(N&&!C){let e=!!R.routes[P],t=R.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(T.experimental.adapterPath)return await O();throw new g.NoFallbackError}}let V=null;!N||S.isDev||C||(V="/index"===(V=P)?"/":V);let M=!0===S.isDev||!N,z=N&&!M;D&&E&&(0,o.setManifestsSingleton)({page:v,clientReferenceManifest:E,serverActionsManifest:D});let U=e.method||"GET",L=(0,n.getTracer)(),F=L.getActiveScopeSpan(),j={params:x,prerenderManifest:R,renderOpts:{experimental:{authInterrupts:!!T.experimental.authInterrupts},cacheComponents:!!T.cacheComponents,supportsDynamicResponse:M,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:T.cacheLife,waitUntil:i.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,i,a)=>S.onRequestError(e,t,i,a,k)},sharedContext:{buildId:b}},H=new s.NodeNextRequest(e),K=new s.NodeNextResponse(t),B=c.NextRequestAdapter.fromNodeNextRequest(H,(0,c.signalFromNodeResponse)(t));try{let o=async e=>S.handle(B,j).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=L.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=r.get("next.route");if(i){let t=`${U} ${i}`;e.setAttributes({"next.route":i,"http.route":i,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${v}`)}),l=!!(0,a.getRequestMeta)(e,"minimalMode"),s=async a=>{var n,s;let c=async({previousCacheEntry:r})=>{try{if(!l&&q&&A&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(a);e.fetchMetrics=j.renderOpts.fetchMetrics;let s=j.renderOpts.pendingWaitUntil;s&&i.waitUntil&&(i.waitUntil(s),s=void 0);let c=j.renderOpts.collectedTags;if(!N)return await (0,u.sendResponse)(H,K,n,j.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(n.headers);c&&(t[f.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==j.renderOpts.collectedRevalidate&&!(j.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&j.renderOpts.collectedRevalidate,i=void 0===j.renderOpts.collectedExpire||j.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:j.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:i}}}}catch(t){throw(null==r?void 0:r.isStale)&&await S.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:z,isOnDemandRevalidate:q})},!1,k),t}},d=await S.handleResponse({req:e,nextConfig:T,cacheKey:V,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:R,isRoutePPREnabled:!1,isOnDemandRevalidate:q,revalidateOnlyGenerated:A,responseGenerator:c,waitUntil:i.waitUntil,isMinimalMode:l});if(!N)return null;if((null==d||null==(n=d.value)?void 0:n.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(s=d.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",q?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),C&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,h.fromNodeOutgoingHttpHeaders)(d.value.headers);return l&&N||g.delete(f.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,m.getCacheControlHeader)(d.cacheControl)),await (0,u.sendResponse)(H,K,new Response(d.value.body,{headers:g,status:d.value.status||200})),null};F?await s(F):await L.withPropagatedContext(e.headers,()=>L.trace(d.BaseServerSpan.handleRequest,{spanName:`${U} ${v}`,kind:n.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},s))}catch(t){if(t instanceof g.NoFallbackError||await S.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:z,isOnDemandRevalidate:q})},!1,k),N)throw t;return await (0,u.sendResponse)(H,K,new Response(null,{status:500})),null}}e.s(["handler",()=>E,"patchFetch",()=>P,"routeModule",()=>S,"serverHooks",()=>A,"workAsyncStorage",()=>k,"workUnitAsyncStorage",()=>q],704130)}];

//# sourceMappingURL=6d6b6_next_dist_esm_build_templates_app-route_c4ac2d31.js.map