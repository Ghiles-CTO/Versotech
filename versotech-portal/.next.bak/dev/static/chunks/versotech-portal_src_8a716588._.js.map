{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/supabase/client.ts"],"sourcesContent":["'use client'\r\n\r\nimport { createBrowserClient } from '@supabase/ssr'\r\nimport type { SupabaseClient } from '@supabase/supabase-js'\r\n\r\n// Singleton instance to prevent multiple clients from competing for token refresh\r\nlet client: SupabaseClient | null = null\r\n\r\n/**\r\n * Create a Supabase client for browser-side use (singleton pattern)\r\n *\r\n * This uses the default Supabase storage implementation which:\r\n * - Stores session in localStorage for persistence across browser sessions\r\n * - Automatically refreshes tokens before expiration\r\n * - Handles session detection from URL (for OAuth callbacks and magic links)\r\n *\r\n * Uses singleton pattern to prevent \"Invalid Refresh Token: Already Used\" errors\r\n * that occur when multiple client instances try to refresh the same token\r\n */\r\nexport const createClient = () => {\r\n  // Return existing client if already created\r\n  if (client) {\r\n    return client\r\n  }\r\n\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n\r\n  if (!supabaseUrl || !supabaseAnonKey) {\r\n    const message = 'Missing Supabase browser credentials. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.'\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.warn(message)\r\n    }\r\n    throw new Error(message)\r\n  }\r\n\r\n  // Create new client instance\r\n  client = createBrowserClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      persistSession: true,\r\n      detectSessionInUrl: true,\r\n      // CRITICAL: Disabled to prevent dual-refresh conflict with middleware\r\n      // Middleware handles all token refresh to avoid \"Refresh Token Already Used\" errors\r\n      autoRefreshToken: false,\r\n      // Use default storage key to match middleware cookie expectations\r\n      // Previously used 'supabase.auth.token' which caused mismatch with middleware\r\n      flowType: 'pkce',\r\n    },\r\n  })\r\n\r\n  return client\r\n}\r\n\r\n/**\r\n * Reset the Supabase client singleton\r\n *\r\n * This should be called when authentication definitively fails and the client\r\n * needs to be recreated with fresh state. Common scenarios:\r\n * - Refresh token has expired and cannot be renewed\r\n * - Session conflicts detected\r\n * - Before re-authentication after failed login attempts\r\n *\r\n * After calling this, the next call to createClient() will create a new instance.\r\n */\r\nexport const resetClient = () => {\r\n  if (client) {\r\n    console.info('[supabase-client] Resetting client singleton due to auth failure')\r\n    client = null\r\n  }\r\n}\r\n\r\n/**\r\n * Check if the current client has a valid session\r\n * Returns true if there's an active session, false otherwise\r\n */\r\nexport const hasActiveSession = async (): Promise<boolean> => {\r\n  if (!client) {\r\n    return false\r\n  }\r\n\r\n  try {\r\n    const { data: { session } } = await client.auth.getSession()\r\n    return session !== null\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAyBsB;AAvBtB;AAAA;AAFA;;AAKA,kFAAkF;AAClF,IAAI,SAAgC;AAa7B,MAAM,eAAe;IAC1B,4CAA4C;IAC5C,IAAI,QAAQ;QACV,OAAO;IACT;IAEA,MAAM;IACN,MAAM;IAEN;;IAQA,6BAA6B;IAC7B,SAAS,IAAA,2NAAmB,EAAC,aAAa,iBAAiB;QACzD,MAAM;YACJ,gBAAgB;YAChB,oBAAoB;YACpB,sEAAsE;YACtE,oFAAoF;YACpF,kBAAkB;YAClB,kEAAkE;YAClE,8EAA8E;YAC9E,UAAU;QACZ;IACF;IAEA,OAAO;AACT;AAaO,MAAM,cAAc;IACzB,IAAI,QAAQ;QACV,QAAQ,IAAI,CAAC;QACb,SAAS;IACX;AACF;AAMO,MAAM,mBAAmB;IAC9B,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,OAAO,IAAI,CAAC,UAAU;QAC1D,OAAO,YAAY;IACrB,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/contexts/persona-context.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\n\r\n/**\r\n * Persona type matching get_user_personas() function return\r\n */\r\nexport interface Persona {\r\n  persona_type: 'ceo' | 'staff' | 'investor' | 'arranger' | 'introducer' | 'partner' | 'commercial_partner' | 'lawyer'\r\n  entity_id: string\r\n  entity_name: string\r\n  entity_logo_url: string | null\r\n  role_in_entity: string\r\n  is_primary: boolean\r\n  can_sign: boolean\r\n  can_execute_for_clients: boolean\r\n}\r\n\r\n/**\r\n * Persona context state\r\n */\r\ninterface PersonaContextState {\r\n  personas: Persona[]\r\n  activePersona: Persona | null\r\n  isLoading: boolean\r\n  error: string | null\r\n  switchPersona: (persona: Persona) => void\r\n  refreshPersonas: () => Promise<void>\r\n  // Helper checks\r\n  isCEO: boolean\r\n  isStaff: boolean\r\n  isInvestor: boolean\r\n  isPartner: boolean\r\n  isLawyer: boolean\r\n  isCommercialPartner: boolean\r\n  isIntroducer: boolean\r\n  isArranger: boolean\r\n  hasAnyPersona: boolean\r\n  hasMultiplePersonas: boolean\r\n}\r\n\r\nconst PersonaContext = createContext<PersonaContextState | undefined>(undefined)\r\n\r\nconst ACTIVE_PERSONA_KEY = 'verso_active_persona'\r\nconst ACTIVE_PERSONA_TYPE_COOKIE = 'verso_active_persona_type'\r\n\r\n/**\r\n * Set a cookie that the server can read to determine active persona type\r\n */\r\nfunction setPersonaCookie(personaType: string) {\r\n  // Set cookie with 1 year expiry, accessible to server\r\n  document.cookie = `${ACTIVE_PERSONA_TYPE_COOKIE}=${personaType}; path=/; max-age=31536000; SameSite=Lax`\r\n}\r\n\r\ninterface PersonaProviderProps {\r\n  children: ReactNode\r\n  initialPersonas?: Persona[]\r\n}\r\n\r\nexport function PersonaProvider({ children, initialPersonas = [] }: PersonaProviderProps) {\r\n  const router = useRouter()\r\n  const [personas, setPersonas] = useState<Persona[]>(initialPersonas)\r\n  const [activePersona, setActivePersona] = useState<Persona | null>(null)\r\n  const [isLoading, setIsLoading] = useState(!initialPersonas.length)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // Load personas from database\r\n  const refreshPersonas = useCallback(async () => {\r\n    setIsLoading(true)\r\n    setError(null)\r\n\r\n    try {\r\n      const supabase = createClient()\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n\r\n      if (!user) {\r\n        setPersonas([])\r\n        setActivePersona(null)\r\n        return\r\n      }\r\n\r\n      const { data, error: rpcError } = await supabase.rpc('get_user_personas', {\r\n        p_user_id: user.id\r\n      })\r\n\r\n      if (rpcError) {\r\n        console.error('[persona-context] Error fetching personas:', rpcError)\r\n        setError(rpcError.message)\r\n        return\r\n      }\r\n\r\n      const fetchedPersonas = (data || []) as Persona[]\r\n      setPersonas(fetchedPersonas)\r\n\r\n      // Restore active persona from localStorage or pick primary/first\r\n      const savedPersonaId = localStorage.getItem(ACTIVE_PERSONA_KEY)\r\n      let selectedPersona: Persona | null = null\r\n\r\n      if (savedPersonaId) {\r\n        selectedPersona = fetchedPersonas.find(p => p.entity_id === savedPersonaId) || null\r\n      }\r\n\r\n      if (!selectedPersona) {\r\n        // Priority order for default persona selection:\r\n        // 1. CEO (highest - Verso Capital management)\r\n        // 2. Staff (ops, rm)\r\n        // 3. Business personas (arranger, introducer, partner, commercial_partner)\r\n        // 4. Investor (lowest priority since they're often dual-persona with business roles)\r\n        const personaPriority: Record<string, number> = {\r\n          'ceo': 1,      // CEO is highest priority\r\n          'staff': 2,\r\n          'arranger': 3,\r\n          'introducer': 4,\r\n          'partner': 5,\r\n          'commercial_partner': 6,\r\n          'lawyer': 7,\r\n          'investor': 8, // Investor is lowest priority for dual-persona users\r\n        }\r\n\r\n        // ALWAYS apply priority order to select highest-priority persona\r\n        // This ensures CEO users always default to CEO view\r\n        if (fetchedPersonas.length > 0) {\r\n          selectedPersona = fetchedPersonas.reduce((best, current) => {\r\n            const bestPriority = personaPriority[best.persona_type] ?? 99\r\n            const currentPriority = personaPriority[current.persona_type] ?? 99\r\n            return currentPriority < bestPriority ? current : best\r\n          })\r\n        }\r\n      }\r\n\r\n      setActivePersona(selectedPersona)\r\n      // Set cookie for server-side persona detection on initial load\r\n      if (selectedPersona) {\r\n        // Check if the current cookie is stale (from a different user/session)\r\n        const currentCookie = document.cookie\r\n          .split('; ')\r\n          .find(row => row.startsWith(ACTIVE_PERSONA_TYPE_COOKIE))\r\n          ?.split('=')[1]\r\n\r\n        const cookieWasStale = currentCookie && currentCookie !== selectedPersona.persona_type\r\n\r\n        setPersonaCookie(selectedPersona.persona_type)\r\n\r\n        // If cookie was stale, the server rendered the wrong dashboard\r\n        // Force a refresh to get the correct server-side render\r\n        if (cookieWasStale && window.location.pathname.includes('/dashboard')) {\r\n          window.location.reload()\r\n          return\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('[persona-context] Unexpected error:', err)\r\n      setError(err instanceof Error ? err.message : 'Failed to load personas')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  // Switch active persona\r\n  const switchPersona = useCallback((persona: Persona) => {\r\n    // Update React state immediately for instant UI feedback\r\n    setActivePersona(persona)\r\n    // Persist to localStorage for future sessions\r\n    localStorage.setItem(ACTIVE_PERSONA_KEY, persona.entity_id)\r\n    // Set cookie for server-side persona detection\r\n    setPersonaCookie(persona.persona_type)\r\n    // Use client-side navigation - MUCH faster than window.location.href\r\n    // router.push preserves React context and only re-renders necessary components\r\n    router.push('/versotech_main/dashboard')\r\n  }, [router])\r\n\r\n  // Load personas on mount if not provided\r\n  useEffect(() => {\r\n    if (!initialPersonas.length) {\r\n      refreshPersonas()\r\n    } else {\r\n      // Set active from initial personas\r\n      const savedPersonaId = localStorage.getItem(ACTIVE_PERSONA_KEY)\r\n      let selectedPersona = savedPersonaId\r\n        ? initialPersonas.find(p => p.entity_id === savedPersonaId)\r\n        : null\r\n\r\n      if (!selectedPersona) {\r\n        // Same priority order as refreshPersonas\r\n        const personaPriority: Record<string, number> = {\r\n          'ceo': 1,\r\n          'staff': 2,\r\n          'arranger': 3,\r\n          'introducer': 4,\r\n          'partner': 5,\r\n          'commercial_partner': 6,\r\n          'lawyer': 7,\r\n          'investor': 8,\r\n        }\r\n\r\n        // ALWAYS apply priority order to select highest-priority persona\r\n        // This ensures CEO users always default to CEO view\r\n        if (initialPersonas.length > 0) {\r\n          selectedPersona = initialPersonas.reduce((best, current) => {\r\n            const bestPriority = personaPriority[best.persona_type] ?? 99\r\n            const currentPriority = personaPriority[current.persona_type] ?? 99\r\n            return currentPriority < bestPriority ? current : best\r\n          })\r\n        }\r\n      }\r\n\r\n      setActivePersona(selectedPersona ?? null)\r\n      setIsLoading(false)\r\n    }\r\n  }, [initialPersonas, refreshPersonas])\r\n\r\n  // Derived state helpers\r\n  // CEO check: user has a 'ceo' persona (from ceo_users table)\r\n  const isCEO = personas.some(p => p.persona_type === 'ceo')\r\n\r\n  // Staff check: any staff persona\r\n  const isStaff = personas.some(p => p.persona_type === 'staff')\r\n\r\n  // Investor check: any investor persona\r\n  const isInvestor = personas.some(p => p.persona_type === 'investor')\r\n\r\n  // Partner check: any partner, introducer, commercial_partner, or arranger persona\r\n  const isPartner = personas.some(p =>\r\n    ['partner', 'introducer', 'commercial_partner', 'arranger'].includes(p.persona_type)\r\n  )\r\n\r\n  // Lawyer check: any lawyer persona\r\n  const isLawyer = personas.some(p => p.persona_type === 'lawyer')\r\n\r\n  // Commercial Partner check: any commercial_partner persona\r\n  const isCommercialPartner = personas.some(p => p.persona_type === 'commercial_partner')\r\n\r\n  // Introducer check: any introducer persona\r\n  const isIntroducer = personas.some(p => p.persona_type === 'introducer')\r\n\r\n  // Arranger check: any arranger persona\r\n  const isArranger = personas.some(p => p.persona_type === 'arranger')\r\n\r\n  // Has any persona (used for deal access - anyone with a persona can potentially view deals)\r\n  const hasAnyPersona = personas.length > 0\r\n\r\n  // Multiple personas check\r\n  const hasMultiplePersonas = personas.length > 1\r\n\r\n  const value: PersonaContextState = {\r\n    personas,\r\n    activePersona,\r\n    isLoading,\r\n    error,\r\n    switchPersona,\r\n    refreshPersonas,\r\n    isCEO,\r\n    isStaff,\r\n    isInvestor,\r\n    isPartner,\r\n    isLawyer,\r\n    isCommercialPartner,\r\n    isIntroducer,\r\n    isArranger,\r\n    hasAnyPersona,\r\n    hasMultiplePersonas,\r\n  }\r\n\r\n  return (\r\n    <PersonaContext.Provider value={value}>\r\n      {children}\r\n    </PersonaContext.Provider>\r\n  )\r\n}\r\n\r\n/**\r\n * Hook to access persona context\r\n */\r\nexport function usePersona() {\r\n  const context = useContext(PersonaContext)\r\n\r\n  if (context === undefined) {\r\n    throw new Error('usePersona must be used within a PersonaProvider')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\n/**\r\n * Get navigation items for a persona\r\n */\r\nexport function getNavItemsForPersona(persona: Persona): { href: string; label: string; icon?: string }[] {\r\n  const baseItems: Record<string, { href: string; label: string; icon?: string }[]> = {\r\n    // CEO persona - full access to Verso Capital management\r\n    // Note: CEO Profile is accessed via user menu (Profile Settings), not sidebar\r\n    ceo: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/deals', label: 'Deals' },\r\n      { href: '/versotech_main/subscriptions', label: 'Subscriptions' },\r\n      { href: '/versotech_main/investors', label: 'Investors' },\r\n      { href: '/versotech_main/documents', label: 'Documents' },\r\n      { href: '/versotech_main/messages', label: 'Messages' },\r\n      { href: '/versotech_main/users', label: 'Users' },\r\n      { href: '/versotech_main/kyc-review', label: 'KYC Review' },\r\n      { href: '/versotech_main/fees', label: 'Fees' },\r\n      { href: '/versotech_main/audit', label: 'Audit' },\r\n    ],\r\n    staff: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/deals', label: 'Deals' },\r\n      { href: '/versotech_main/subscriptions', label: 'Subscriptions' },\r\n      { href: '/versotech_main/investors', label: 'Investors' },\r\n      { href: '/versotech_main/documents', label: 'Documents' },\r\n      { href: '/versotech_main/messages', label: 'Messages' },\r\n    ],\r\n    investor: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/opportunities', label: 'Opportunities' },\r\n      { href: '/versotech_main/portfolio', label: 'Portfolio' },\r\n      { href: '/versotech_main/documents', label: 'Documents' },\r\n      { href: '/versotech_main/messages', label: 'Messages' },\r\n    ],\r\n    arranger: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/my-mandates', label: 'My Mandates' },\r\n      { href: '/versotech_main/my-partners', label: 'My Partners' },\r\n      { href: '/versotech_main/my-introducers', label: 'My Introducers' },\r\n      { href: '/versotech_main/my-commercial-partners', label: 'My Commercial Partners' },\r\n      { href: '/versotech_main/my-lawyers', label: 'My Lawyers' },\r\n    ],\r\n    introducer: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/introductions', label: 'Introductions' },\r\n      { href: '/versotech_main/introducer-agreements', label: 'Agreements' },\r\n    ],\r\n    partner: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/partner-transactions', label: 'Transactions' },\r\n      { href: '/versotech_main/shared-transactions', label: 'Shared Deals' },\r\n    ],\r\n    commercial_partner: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/client-transactions', label: 'Client Transactions' },\r\n      { href: '/versotech_main/placement-agreements', label: 'Agreements' },\r\n    ],\r\n    lawyer: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/assigned-deals', label: 'Assigned Deals' },\r\n      { href: '/versotech_main/escrow', label: 'Escrow' },\r\n      { href: '/versotech_main/subscription-packs', label: 'Subscription Packs' },\r\n    ],\r\n  }\r\n\r\n  return [...(baseItems[persona.persona_type] || [])]\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n/**\n * Format file size in bytes to human-readable format\n * @param bytes - File size in bytes\n * @returns Formatted file size string (e.g., \"1.5 MB\")\n */\nexport function formatFileSize(bytes?: number): string {\n  if (!bytes || bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return `${(bytes / Math.pow(k, i)).toFixed(2)} ${sizes[i]}`\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,gMAAO,EAAC,IAAA,uKAAI,EAAC;AACtB;AAOO,SAAS,eAAe,KAAc;IAC3C,IAAI,CAAC,SAAS,UAAU,GAAG,OAAO;IAElC,MAAM,IAAI;IACV,MAAM,QAAQ;QAAC;QAAS;QAAM;QAAM;QAAM;KAAK;IAC/C,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,SAAS,KAAK,GAAG,CAAC;IAEhD,OAAO,GAAG,CAAC,QAAQ,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE;AAC7D"}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,iMAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,kMAAI,GAAG;IAE9B,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS"}},
    {"offset": {"line": 590, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 hover:shadow-lg hover:scale-[1.02] transition-all duration-200 shadow-md\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border border-input bg-background text-foreground shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"text-foreground hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // Mobile-first touch targets (â‰¥44px on mobile per Apple/Google guidelines)\n        default: \"h-11 md:h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-10 md:h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-12 md:h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-11 md:size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,iMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,2EAA2E;YAC3E,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,kMAAI,GAAG;IAE9B,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 654, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/collapsible.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n"],"names":[],"mappings":";;;;;;;;AAGA;AAHA;;AAKA,MAAM,cAAc,yMAAyB;AAE7C,MAAM,qBAAqB,uNAAuC;AAElE,MAAM,qBAAqB,uNAAuC"}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/components/admin-sidebar.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport Image from 'next/image'\nimport { cn } from '@/lib/utils'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible'\nimport {\n  LayoutDashboard,\n  Users,\n  TrendingUp,\n  Bot,\n  Settings,\n  ChevronDown,\n  ChevronLeft,\n  ChevronRight,\n  Menu,\n  X,\n} from 'lucide-react'\n\ninterface NavItem {\n  name: string\n  href: string\n  icon: React.ComponentType<{ className?: string }>\n  badge?: string\n  children?: NavItem[]\n}\n\n// Admin navigation structure\nconst adminNavItems: NavItem[] = [\n  {\n    name: 'Dashboard',\n    href: '/versotech_admin/dashboard',\n    icon: LayoutDashboard,\n  },\n  {\n    name: 'Users',\n    href: '/versotech_admin/users',\n    icon: Users,\n    children: [\n      { name: 'All Users', href: '/versotech_admin/users', icon: Users },\n      { name: 'Investors', href: '/versotech_admin/users/investors', icon: Users },\n      { name: 'Staff', href: '/versotech_admin/users/staff', icon: Users },\n    ],\n  },\n  {\n    name: 'Growth',\n    href: '/versotech_admin/growth',\n    icon: TrendingUp,\n    children: [\n      { name: 'Overview', href: '/versotech_admin/growth', icon: TrendingUp },\n      { name: 'Engagement', href: '/versotech_admin/growth/engagement', icon: TrendingUp },\n      { name: 'Retention', href: '/versotech_admin/growth/retention', icon: TrendingUp },\n      { name: 'Funnels', href: '/versotech_admin/growth/funnel', icon: TrendingUp },\n      { name: 'Cohorts', href: '/versotech_admin/growth/cohorts', icon: TrendingUp },\n    ],\n  },\n  {\n    name: 'Agents',\n    href: '/versotech_admin/agents',\n    icon: Bot,\n    badge: 'Soon',\n  },\n  {\n    name: 'Settings',\n    href: '/versotech_admin/settings',\n    icon: Settings,\n  },\n]\n\ninterface AdminSidebarProps {\n  className?: string\n}\n\nexport function AdminSidebar({ className }: AdminSidebarProps) {\n  const [mounted, setMounted] = useState(false)\n  const [collapsed, setCollapsed] = useState(false)\n  const [mobileOpen, setMobileOpen] = useState(false)\n  const [expandedSections, setExpandedSections] = useState<string[]>(['Users', 'Growth'])\n  const pathname = usePathname()\n\n  // Wait for client-side hydration before rendering interactive Radix components\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  // Check if a route is active (exact match or nested)\n  const isRouteActive = (href: string, hasChildren: boolean = false) => {\n    if (hasChildren) {\n      // For parent items, check if any child is active\n      return pathname.startsWith(href)\n    }\n    // Exact match for items without children\n    return pathname === href\n  }\n\n  // Check if section should be expanded based on current route\n  const isSectionExpanded = (item: NavItem) => {\n    if (!item.children) return false\n    return expandedSections.includes(item.name) || item.children.some(child => pathname.startsWith(child.href))\n  }\n\n  const toggleSection = (sectionName: string) => {\n    setExpandedSections(prev =>\n      prev.includes(sectionName)\n        ? prev.filter(s => s !== sectionName)\n        : [...prev, sectionName]\n    )\n  }\n\n  const SidebarContent = () => (\n    <div className=\"flex flex-col h-full\">\n      {/* Header */}\n      <div className=\"p-4 flex items-center justify-between h-16 border-b border-gray-100 dark:border-white/5\">\n        {!collapsed && (\n          <div className=\"flex items-center gap-2 animate-in fade-in duration-200\">\n            <div className=\"relative h-8 w-28 overflow-hidden\">\n              <Image\n                src=\"/versotech-logo.jpg\"\n                alt=\"Versotech Admin\"\n                fill\n                className=\"object-contain object-left dark:invert\"\n                priority\n              />\n            </div>\n            <Badge variant=\"secondary\" className=\"text-[10px] px-1.5 py-0\">\n              Admin\n            </Badge>\n          </div>\n        )}\n\n        {collapsed && (\n          <div className=\"mx-auto\">\n            <div className=\"h-8 w-8 rounded-lg bg-blue-600 flex items-center justify-center\">\n              <span className=\"text-white font-bold text-sm\">V</span>\n            </div>\n          </div>\n        )}\n\n        {/* Desktop collapse button */}\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={() => setCollapsed(!collapsed)}\n          className=\"hidden md:flex h-8 w-8 text-gray-500 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white\"\n        >\n          {collapsed ? <ChevronRight className=\"h-4 w-4\" /> : <ChevronLeft className=\"h-4 w-4\" />}\n        </Button>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 overflow-y-auto p-3 space-y-1\">\n        {adminNavItems.map((item) => {\n          const Icon = item.icon\n          const hasChildren = Boolean(item.children && item.children.length > 0)\n          const isActive = isRouteActive(item.href, hasChildren)\n          const isExpanded = isSectionExpanded(item)\n\n          if (hasChildren && !collapsed) {\n            // Before hydration, render static content to avoid Radix ID mismatches\n            if (!mounted) {\n              return (\n                <div key={item.name}>\n                  <button\n                    className={cn(\n                      \"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 text-left\",\n                      isActive\n                        ? \"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400\"\n                        : \"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5\"\n                    )}\n                  >\n                    <Icon className={cn(\n                      \"h-5 w-5 flex-shrink-0\",\n                      isActive ? \"text-blue-600 dark:text-blue-400\" : \"text-gray-400 dark:text-zinc-500\"\n                    )} />\n                    <span className=\"flex-1 text-sm font-medium\">{item.name}</span>\n                    <ChevronDown className={cn(\n                      \"h-4 w-4 transition-transform duration-200\",\n                      isExpanded && \"rotate-180\"\n                    )} />\n                  </button>\n                  {isExpanded && (\n                    <div className=\"ml-4 pl-4 border-l border-gray-100 dark:border-white/10 mt-1 space-y-1\">\n                      {item.children?.map((child) => {\n                        const childActive = pathname === child.href\n                        return (\n                          <Link\n                            key={child.href}\n                            href={child.href}\n                            className={cn(\n                              \"block px-3 py-2 rounded-lg text-sm transition-colors\",\n                              childActive\n                                ? \"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400 font-medium\"\n                                : \"text-gray-500 dark:text-zinc-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5\"\n                            )}\n                          >\n                            {child.name}\n                          </Link>\n                        )\n                      })}\n                    </div>\n                  )}\n                </div>\n              )\n            }\n\n            // After hydration, render interactive Collapsible component\n            return (\n              <Collapsible\n                key={item.name}\n                open={isExpanded}\n                onOpenChange={() => toggleSection(item.name)}\n              >\n                <CollapsibleTrigger asChild>\n                  <button\n                    className={cn(\n                      \"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 text-left\",\n                      isActive\n                        ? \"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400\"\n                        : \"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5\"\n                    )}\n                  >\n                    <Icon className={cn(\n                      \"h-5 w-5 flex-shrink-0\",\n                      isActive ? \"text-blue-600 dark:text-blue-400\" : \"text-gray-400 dark:text-zinc-500\"\n                    )} />\n                    <span className=\"flex-1 text-sm font-medium\">{item.name}</span>\n                    <ChevronDown className={cn(\n                      \"h-4 w-4 transition-transform duration-200\",\n                      isExpanded && \"rotate-180\"\n                    )} />\n                  </button>\n                </CollapsibleTrigger>\n                <CollapsibleContent className=\"animate-in slide-in-from-top-2 duration-200\">\n                  <div className=\"ml-4 pl-4 border-l border-gray-100 dark:border-white/10 mt-1 space-y-1\">\n                    {item.children?.map((child) => {\n                      const childActive = pathname === child.href\n                      return (\n                        <Link\n                          key={child.href}\n                          href={child.href}\n                          className={cn(\n                            \"block px-3 py-2 rounded-lg text-sm transition-colors\",\n                            childActive\n                              ? \"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400 font-medium\"\n                              : \"text-gray-500 dark:text-zinc-500 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5\"\n                          )}\n                        >\n                          {child.name}\n                        </Link>\n                      )\n                    })}\n                  </div>\n                </CollapsibleContent>\n              </Collapsible>\n            )\n          }\n\n          // Non-collapsible item\n          return (\n            <Link\n              key={item.name}\n              href={item.href}\n              className={cn(\n                \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group relative\",\n                isActive\n                  ? \"bg-blue-50 dark:bg-blue-600/10 text-blue-700 dark:text-blue-400\"\n                  : \"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-white/5\"\n              )}\n            >\n              <Icon className={cn(\n                \"h-5 w-5 flex-shrink-0\",\n                isActive ? \"text-blue-600 dark:text-blue-400\" : \"text-gray-400 dark:text-zinc-500 group-hover:text-gray-600 dark:group-hover:text-white\"\n              )} />\n              {!collapsed && (\n                <>\n                  <span className=\"flex-1 text-sm font-medium\">{item.name}</span>\n                  {item.badge && (\n                    <Badge variant=\"secondary\" className=\"text-[10px] px-1.5 py-0 bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-400\">\n                      {item.badge}\n                    </Badge>\n                  )}\n                </>\n              )}\n\n              {/* Active indicator */}\n              {isActive && (\n                <div className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r-full bg-blue-600 dark:bg-blue-500\" />\n              )}\n\n              {/* Tooltip for collapsed state */}\n              {collapsed && (\n                <div className=\"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-md text-xs font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 shadow-xl border bg-white dark:bg-zinc-800 border-gray-100 dark:border-white/10 text-gray-900 dark:text-white\">\n                  {item.name}\n                  {item.badge && <span className=\"ml-2 text-amber-600\">({item.badge})</span>}\n                </div>\n              )}\n            </Link>\n          )\n        })}\n      </nav>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t border-gray-100 dark:border-white/5\">\n        {!collapsed && (\n          <p className=\"text-xs text-gray-400 dark:text-zinc-600\">\n            Admin Portal v1.0\n          </p>\n        )}\n      </div>\n    </div>\n  )\n\n  return (\n    <>\n      {/* Mobile menu button */}\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"fixed top-4 left-4 z-50 md:hidden h-10 w-10 bg-white dark:bg-zinc-900 shadow-md\"\n        onClick={() => setMobileOpen(!mobileOpen)}\n      >\n        {mobileOpen ? <X className=\"h-5 w-5\" /> : <Menu className=\"h-5 w-5\" />}\n      </Button>\n\n      {/* Mobile overlay */}\n      {mobileOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-40 md:hidden\"\n          onClick={() => setMobileOpen(false)}\n        />\n      )}\n\n      {/* Mobile sidebar */}\n      <aside\n        className={cn(\n          \"fixed inset-y-0 left-0 z-50 w-[280px] bg-white dark:bg-zinc-950 transform transition-transform duration-300 md:hidden\",\n          mobileOpen ? \"translate-x-0\" : \"-translate-x-full\"\n        )}\n      >\n        <SidebarContent />\n      </aside>\n\n      {/* Desktop sidebar */}\n      <aside\n        className={cn(\n          \"hidden md:flex flex-col h-screen border-r border-gray-100 dark:border-white/5 bg-white dark:bg-zinc-950 transition-all duration-300\",\n          collapsed ? \"w-[72px]\" : \"w-[260px]\",\n          className\n        )}\n      >\n        <SidebarContent />\n      </aside>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1228, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80 backdrop-blur-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background border-border data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] max-h-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 overflow-hidden rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg backdrop-blur-xl\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"text-foreground hover:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-blue-400/20 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold text-foreground\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,oNAAC,oMAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,oNAAC,uMAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,oNAAC,sMAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,oNAAC,qMAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,oNAAC,uMAAuB;QACtB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,2KACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,oNAAC;QAAa,aAAU;;0BACtB,oNAAC;;;;;0BACD,oNAAC,uMAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,mJAAE,EACX,sbACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,oNAAC,qMAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,oNAAC,mOAAK;;;;;0CACN,oNAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,oNAAC,qMAAqB;QACpB,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,sDAAsD;QACnE,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,oNAAC,2MAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 1434, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/command.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { SearchIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\"\n\nfunction Command({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive>) {\n  return (\n    <CommandPrimitive\n      data-slot=\"command\"\n      className={cn(\n        \"bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandDialog({\n  title = \"Command Palette\",\n  description = \"Search for a command to run...\",\n  children,\n  className,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof Dialog> & {\n  title?: string\n  description?: string\n  className?: string\n  showCloseButton?: boolean\n}) {\n  return (\n    <Dialog {...props}>\n      <DialogHeader className=\"sr-only\">\n        <DialogTitle>{title}</DialogTitle>\n        <DialogDescription>{description}</DialogDescription>\n      </DialogHeader>\n      <DialogContent\n        className={cn(\"overflow-hidden p-0\", className)}\n        showCloseButton={showCloseButton}\n      >\n        <Command className=\"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nfunction CommandInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Input>) {\n  return (\n    <div\n      data-slot=\"command-input-wrapper\"\n      className=\"flex h-11 md:h-9 items-center gap-2 border-b px-3\"\n    >\n      <SearchIcon className=\"size-4 shrink-0 opacity-50\" />\n      <CommandPrimitive.Input\n        data-slot=\"command-input\"\n        className={cn(\n          \"placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction CommandList({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.List>) {\n  return (\n    <CommandPrimitive.List\n      data-slot=\"command-list\"\n      className={cn(\n        \"max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandEmpty({\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Empty>) {\n  return (\n    <CommandPrimitive.Empty\n      data-slot=\"command-empty\"\n      className=\"py-6 text-center text-sm\"\n      {...props}\n    />\n  )\n}\n\nfunction CommandGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Group>) {\n  return (\n    <CommandPrimitive.Group\n      data-slot=\"command-group\"\n      className={cn(\n        \"text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Separator>) {\n  return (\n    <CommandPrimitive.Separator\n      data-slot=\"command-separator\"\n      className={cn(\"bg-border -mx-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CommandItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Item>) {\n  return (\n    <CommandPrimitive.Item\n      data-slot=\"command-item\"\n      className={cn(\n        \"data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-2.5 md:py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"command-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AACA;AAPA;;;;;;AAeA,SAAS,QAAQ,EACf,SAAS,EACT,GAAG,OAC2C;IAC9C,qBACE,oNAAC,2KAAgB;QACf,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS;AAgBT,SAAS,cAAc,EACrB,QAAQ,iBAAiB,EACzB,cAAc,gCAAgC,EAC9C,QAAQ,EACR,SAAS,EACT,kBAAkB,IAAI,EACtB,GAAG,OAMJ;IACC,qBACE,oNAAC,sKAAM;QAAE,GAAG,KAAK;;0BACf,oNAAC,4KAAY;gBAAC,WAAU;;kCACtB,oNAAC,2KAAW;kCAAE;;;;;;kCACd,oNAAC,iLAAiB;kCAAE;;;;;;;;;;;;0BAEtB,oNAAC,6KAAa;gBACZ,WAAW,IAAA,mJAAE,EAAC,uBAAuB;gBACrC,iBAAiB;0BAEjB,cAAA,oNAAC;oBAAQ,WAAU;8BAChB;;;;;;;;;;;;;;;;;AAKX;MA7BS;AA+BT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,oNAAC;QACC,aAAU;QACV,WAAU;;0BAEV,oNAAC,kPAAU;gBAAC,WAAU;;;;;;0BACtB,oNAAC,2KAAgB,CAAC,KAAK;gBACrB,aAAU;gBACV,WAAW,IAAA,mJAAE,EACX,4JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;MApBS;AAsBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,oNAAC,2KAAgB,CAAC,IAAI;QACpB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBACE,oNAAC,2KAAgB,CAAC,KAAK;QACrB,aAAU;QACV,WAAU;QACT,GAAG,KAAK;;;;;;AAGf;MAVS;AAYT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,oNAAC,2KAAgB,CAAC,KAAK;QACrB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,oNAAC,2KAAgB,CAAC,SAAS;QACzB,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,wBAAwB;QACrC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,oNAAC,2KAAgB,CAAC,IAAI;QACpB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,iZACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OAC0B;IAC7B,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 1647, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/command-palette/command-palette.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter, usePathname } from 'next/navigation'\r\nimport {\r\n  CommandDialog,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n  CommandSeparator,\r\n  CommandShortcut\r\n} from '@/components/ui/command'\r\nimport {\r\n  LayoutDashboard,\r\n  Users,\r\n  FileText,\r\n  Building2,\r\n  Activity,\r\n  Calendar,\r\n  MessageSquare,\r\n  UserCheck,\r\n  Settings,\r\n  Plus,\r\n  Search,\r\n  TrendingUp,\r\n  Workflow,\r\n  ClipboardList,\r\n  HandHeart,\r\n  Calculator,\r\n  CreditCard,\r\n  Package,\r\n  Shield,\r\n  Database\r\n} from 'lucide-react'\r\n\r\ninterface CommandPaletteProps {\r\n  onQuickAddSubscription?: () => void\r\n  brand?: 'versoholdings' | 'versotech'\r\n}\r\n\r\ninterface CommandAction {\r\n  id: string\r\n  label: string\r\n  description?: string\r\n  icon?: React.ComponentType<{ className?: string }>\r\n  shortcut?: string\r\n  keywords?: string[]\r\n  action: () => void\r\n  group: 'navigation' | 'actions' | 'recent'\r\n}\r\n\r\nexport function CommandPalette({ onQuickAddSubscription, brand = 'versotech' }: CommandPaletteProps) {\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n  const [open, setOpen] = useState(false)\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  // Wait for client-side hydration to complete before rendering Radix UI components\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // Detect platform for keyboard shortcuts - only after mount to avoid hydration mismatch\r\n  const isMac = mounted && typeof navigator !== 'undefined' && navigator.platform.toUpperCase().indexOf('MAC') >= 0\r\n  const modKey = isMac ? 'âŒ˜' : 'Ctrl'\r\n\r\n  // Define commands based on brand\r\n  const staffCommands: CommandAction[] = [\r\n    // Navigation - Staff Portal\r\n    {\r\n      id: 'nav-dashboard',\r\n      label: 'Dashboard',\r\n      description: 'Operations overview',\r\n      icon: LayoutDashboard,\r\n      keywords: ['home', 'overview', 'metrics'],\r\n      action: () => router.push('/versotech_main'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-investors',\r\n      label: 'Investors',\r\n      description: 'Manage investor accounts',\r\n      icon: Users,\r\n      keywords: ['clients', 'kyc', 'accounts'],\r\n      action: () => router.push('/versotech_main/investors'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-subscriptions',\r\n      label: 'Subscriptions',\r\n      description: 'Manage subscriptions',\r\n      icon: FileText,\r\n      keywords: ['commitments', 'deals'],\r\n      action: () => router.push('/versotech_main/subscriptions'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-entities',\r\n      label: 'Vehicles',\r\n      description: 'Manage investment vehicles',\r\n      icon: Building2,\r\n      keywords: ['vehicles', 'funds', 'spvs', 'entities'],\r\n      action: () => router.push('/versotech_main/entities'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-deals',\r\n      label: 'Deals',\r\n      description: 'Manage deal inventory',\r\n      icon: Activity,\r\n      keywords: ['opportunities', 'investments'],\r\n      action: () => router.push('/versotech_main/deals'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-approvals',\r\n      label: 'Approvals',\r\n      description: 'Review and approve',\r\n      icon: UserCheck,\r\n      keywords: ['review', 'approve', 'pending'],\r\n      action: () => router.push('/versotech_main/approvals'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-messages',\r\n      label: 'Messages',\r\n      description: 'Investor communication',\r\n      icon: MessageSquare,\r\n      keywords: ['chat', 'inbox', 'communication'],\r\n      action: () => router.push('/versotech_main/messages'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-calendar',\r\n      label: 'Calendar',\r\n      description: 'Deadlines and schedule',\r\n      icon: Calendar,\r\n      keywords: ['schedule', 'deadlines', 'events'],\r\n      action: () => router.push('/versotech_main/calendar'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-processes',\r\n      label: 'Processes',\r\n      description: 'Workflow automation',\r\n      icon: Workflow,\r\n      keywords: ['automation', 'workflows'],\r\n      action: () => router.push('/versotech_main/processes'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-requests',\r\n      label: 'Requests',\r\n      description: 'Investor requests',\r\n      icon: ClipboardList,\r\n      keywords: ['tickets', 'support'],\r\n      action: () => router.push('/versotech_main/requests'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-introducers',\r\n      label: 'Introducers',\r\n      description: 'Manage introducers',\r\n      icon: HandHeart,\r\n      keywords: ['referrals', 'partners'],\r\n      action: () => router.push('/versotech_main/introducers'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-fees',\r\n      label: 'Fees',\r\n      description: 'Fee management',\r\n      icon: Calculator,\r\n      keywords: ['billing', 'charges'],\r\n      action: () => router.push('/versotech_main/fees'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-reconciliation',\r\n      label: 'Reconciliation',\r\n      description: 'Bank reconciliation',\r\n      icon: CreditCard,\r\n      keywords: ['payments', 'banking'],\r\n      action: () => router.push('/versotech_main/reconciliation'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-audit',\r\n      label: 'Audit',\r\n      description: 'Audit logs',\r\n      icon: Shield,\r\n      keywords: ['compliance', 'logs', 'security'],\r\n      action: () => router.push('/versotech_main/audit'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-admin',\r\n      label: 'Admin',\r\n      description: 'System administration',\r\n      icon: Database,\r\n      keywords: ['settings', 'config'],\r\n      action: () => router.push('/versotech_main/admin'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-settings',\r\n      label: 'Settings',\r\n      description: 'Account settings',\r\n      icon: Settings,\r\n      keywords: ['preferences', 'profile'],\r\n      action: () => router.push('/versotech_main/admin'),\r\n      group: 'navigation'\r\n    },\r\n\r\n    // Quick Actions\r\n    {\r\n      id: 'action-add-subscription',\r\n      label: 'Add Subscription',\r\n      description: 'Quick add a new subscription',\r\n      icon: Plus,\r\n      shortcut: `${modKey}â‡§S`,\r\n      keywords: ['create', 'new', 'subscription'],\r\n      action: () => {\r\n        setOpen(false)\r\n        onQuickAddSubscription?.()\r\n      },\r\n      group: 'actions'\r\n    },\r\n    {\r\n      id: 'action-search-investors',\r\n      label: 'Search Investors',\r\n      description: 'Find an investor',\r\n      icon: Search,\r\n      keywords: ['find', 'investor', 'search'],\r\n      action: () => router.push('/versotech_main/investors'),\r\n      group: 'actions'\r\n    }\r\n  ]\r\n\r\n  const investorCommands: CommandAction[] = [\r\n    // Navigation - Investor Portal\r\n    {\r\n      id: 'nav-dashboard',\r\n      label: 'Dashboard',\r\n      description: 'Portfolio overview',\r\n      icon: LayoutDashboard,\r\n      keywords: ['home', 'overview'],\r\n      action: () => router.push('/versotech_main/dashboard'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-deals',\r\n      label: 'Active Deals',\r\n      description: 'Investment opportunities',\r\n      icon: Activity,\r\n      keywords: ['investments', 'opportunities'],\r\n      action: () => router.push('/versotech_main/opportunities'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-holdings',\r\n      label: 'Portfolio',\r\n      description: 'My investments',\r\n      icon: TrendingUp,\r\n      keywords: ['investments', 'positions'],\r\n      action: () => router.push('/versotech_main/portfolio'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-calendar',\r\n      label: 'Calendar',\r\n      description: 'Deadlines and events',\r\n      icon: Calendar,\r\n      keywords: ['schedule', 'deadlines'],\r\n      action: () => router.push('/versotech_main/calendar'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-messages',\r\n      label: 'Messages',\r\n      description: 'Communication',\r\n      icon: MessageSquare,\r\n      keywords: ['chat', 'inbox'],\r\n      action: () => router.push('/versotech_main/messages'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-settings',\r\n      label: 'Settings',\r\n      description: 'Account settings',\r\n      icon: Settings,\r\n      keywords: ['preferences', 'profile'],\r\n      action: () => router.push('/versotech_main/profile'),\r\n      group: 'navigation'\r\n    }\r\n  ]\r\n\r\n  const commands = brand === 'versotech' ? staffCommands : investorCommands\r\n\r\n  // Toggle command palette with Cmd/Ctrl+K\r\n  useEffect(() => {\r\n    const down = (e: KeyboardEvent) => {\r\n      if (e.key === 'k' && (e.metaKey || e.ctrlKey)) {\r\n        e.preventDefault()\r\n        setOpen((open) => !open)\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', down)\r\n    return () => document.removeEventListener('keydown', down)\r\n  }, [])\r\n\r\n  // Group commands\r\n  const navigationCommands = commands.filter(c => c.group === 'navigation')\r\n  const actionCommands = commands.filter(c => c.group === 'actions')\r\n\r\n  // Don't render until mounted to prevent hydration mismatch with Radix UI IDs\r\n  if (!mounted) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <CommandDialog open={open} onOpenChange={setOpen}>\r\n      <CommandInput placeholder=\"Type a command or search...\" />\r\n      <CommandList>\r\n        <CommandEmpty>No results found.</CommandEmpty>\r\n\r\n        {actionCommands.length > 0 && (\r\n          <>\r\n            <CommandGroup heading=\"Quick Actions\">\r\n              {actionCommands.map((command) => {\r\n                const Icon = command.icon\r\n                return (\r\n                  <CommandItem\r\n                    key={command.id}\r\n                    value={`${command.label} ${command.description} ${command.keywords?.join(' ')}`}\r\n                    onSelect={() => {\r\n                      command.action()\r\n                      setOpen(false)\r\n                    }}\r\n                  >\r\n                    {Icon && <Icon className=\"mr-2 h-4 w-4\" />}\r\n                    <div className=\"flex-1\">\r\n                      <div>{command.label}</div>\r\n                      {command.description && (\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          {command.description}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    {command.shortcut && (\r\n                      <CommandShortcut>{command.shortcut}</CommandShortcut>\r\n                    )}\r\n                  </CommandItem>\r\n                )\r\n              })}\r\n            </CommandGroup>\r\n            <CommandSeparator />\r\n          </>\r\n        )}\r\n\r\n        <CommandGroup heading=\"Navigation\">\r\n          {navigationCommands.map((command) => {\r\n            const Icon = command.icon\r\n            const isActive = pathname === command.action.toString().match(/push\\('(.+?)'\\)/)?.[1]\r\n            return (\r\n              <CommandItem\r\n                key={command.id}\r\n                value={`${command.label} ${command.description} ${command.keywords?.join(' ')}`}\r\n                onSelect={() => {\r\n                  command.action()\r\n                  setOpen(false)\r\n                }}\r\n              >\r\n                {Icon && <Icon className=\"mr-2 h-4 w-4\" />}\r\n                <div className=\"flex-1\">\r\n                  <div className={isActive ? 'font-semibold' : ''}>\r\n                    {command.label}\r\n                  </div>\r\n                  {command.description && (\r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      {command.description}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                {command.shortcut && (\r\n                  <CommandShortcut>{command.shortcut}</CommandShortcut>\r\n                )}\r\n              </CommandItem>\r\n            )\r\n          })}\r\n        </CommandGroup>\r\n      </CommandList>\r\n    </CommandDialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2215, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground bg-background border-input h-11 md:h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base text-foreground shadow-sm transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-blue-500 focus-visible:ring-blue-500/20 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,ocACA,yFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 2246, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,oNAAC,mMAAmB;QAClB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,uOACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 2279, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      // Mobile-first touch targets (â‰¥44px on mobile)\n      \"flex h-11 md:h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50 text-foreground\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-[100] max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      // Mobile-first touch targets (larger padding on mobile)\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-3 md:py-1.5 pl-8 pr-2 text-sm text-popover-foreground outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4 text-foreground\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,oMAAoB;AAEnC,MAAM,cAAc,qMAAqB;AAEzC,MAAM,cAAc,qMAAqB;AAEzC,MAAM,8BAAgB,kMAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,oNAAC,uMAAuB;QACtB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,+CAA+C;QAC/C,kTACA;QAED,GAAG,KAAK;;YAER;0BACD,oNAAC,oMAAoB;gBAAC,OAAO;0BAC3B,cAAA,oNAAC,6PAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,uMAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,kMAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,8MAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,oNAAC,uPAAS;YAAC,WAAU;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,8MAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,kMAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,gNAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,oNAAC,6PAAW;YAAC,WAAU;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,gNAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,kMAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,oNAAC,sMAAsB;kBACrB,cAAA,oNAAC,uMAAuB;YACtB,KAAK;YACL,WAAW,IAAA,mJAAE,EACX,wdACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,oNAAC;;;;;8BACD,oNAAC,wMAAwB;oBACvB,WAAW,IAAA,mJAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,oNAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,uMAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,kMAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,oNAAC,oMAAoB;QACnB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,wDAAwD;QACxD,6PACA;QAED,GAAG,KAAK;;0BAET,oNAAC;gBAAK,WAAU;0BACd,cAAA,oNAAC,6MAA6B;8BAC5B,cAAA,oNAAC,uOAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,oNAAC,wMAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,oMAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,kMAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,yMAAyB;QACxB,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,yMAAyB,CAAC,WAAW"}},
    {"offset": {"line": 2504, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/subscriptions/quick-add-subscription-modal.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { Loader2, Plus, AlertCircle } from 'lucide-react'\nimport { toast } from 'sonner'\nimport { createClient } from '@/lib/supabase/client'\n\ninterface QuickAddSubscriptionModalProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  defaultInvestorId?: string\n  defaultVehicleId?: string\n}\n\ninterface Investor {\n  id: string\n  legal_name: string\n  email?: string\n}\n\ninterface Vehicle {\n  id: string\n  name: string\n  type: string\n}\n\nexport function QuickAddSubscriptionModal({\n  open,\n  onOpenChange,\n  defaultInvestorId,\n  defaultVehicleId\n}: QuickAddSubscriptionModalProps) {\n  const router = useRouter()\n  const supabase = createClient()\n\n  // Form state\n  const [investorId, setInvestorId] = useState(defaultInvestorId || '')\n  const [vehicleId, setVehicleId] = useState(defaultVehicleId || '')\n  const [commitment, setCommitment] = useState('')\n  const [currency, setCurrency] = useState('USD')\n  const [status, setStatus] = useState('draft')\n\n  // Data loading state\n  const [investors, setInvestors] = useState<Investor[]>([])\n  const [vehicles, setVehicles] = useState<Vehicle[]>([])\n  const [loadingData, setLoadingData] = useState(true)\n  const [submitting, setSubmitting] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Search state\n  const [investorSearch, setInvestorSearch] = useState('')\n  const [vehicleSearch, setVehicleSearch] = useState('')\n\n  // Load investors and vehicles on mount\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoadingData(true)\n\n        // Load investors\n        const { data: investorsData, error: investorsError } = await supabase\n          .from('investors')\n          .select('id, legal_name, email')\n          .eq('status', 'active')\n          .order('legal_name')\n          .limit(1000)\n\n        if (investorsError) throw investorsError\n        setInvestors(investorsData || [])\n\n        // Load vehicles\n        const { data: vehiclesData, error: vehiclesError } = await supabase\n          .from('vehicles')\n          .select('id, name, type')\n          .eq('status', 'active')\n          .order('name')\n\n        if (vehiclesError) throw vehiclesError\n        setVehicles(vehiclesData || [])\n      } catch (err) {\n        console.error('Failed to load data:', err)\n        setError('Failed to load investors and vehicles')\n      } finally {\n        setLoadingData(false)\n      }\n    }\n\n    if (open) {\n      loadData()\n    }\n  }, [open, supabase])\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (open) {\n      setInvestorId(defaultInvestorId || '')\n      setVehicleId(defaultVehicleId || '')\n      setCommitment('')\n      setCurrency('USD')\n      setStatus('draft')\n      setError(null)\n      setInvestorSearch('')\n      setVehicleSearch('')\n    }\n  }, [open, defaultInvestorId, defaultVehicleId])\n\n  // Filter investors based on search\n  const filteredInvestors = investors.filter(investor =>\n    investor.legal_name.toLowerCase().includes(investorSearch.toLowerCase()) ||\n    investor.email?.toLowerCase().includes(investorSearch.toLowerCase())\n  )\n\n  // Filter vehicles based on search\n  const filteredVehicles = vehicles.filter(vehicle =>\n    vehicle.name.toLowerCase().includes(vehicleSearch.toLowerCase())\n  )\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(null)\n\n    // Validation\n    if (!investorId) {\n      setError('Please select an investor')\n      return\n    }\n    if (!vehicleId) {\n      setError('Please select a vehicle')\n      return\n    }\n    if (!commitment || parseFloat(commitment) <= 0) {\n      setError('Please enter a valid commitment amount')\n      return\n    }\n\n    try {\n      setSubmitting(true)\n\n      // Create subscription\n      const { data, error: insertError } = await supabase\n        .from('subscriptions')\n        .insert({\n          investor_id: investorId,\n          vehicle_id: vehicleId,\n          commitment: parseFloat(commitment),\n          currency,\n          status,\n          subscription_date: new Date().toISOString(),\n          created_at: new Date().toISOString()\n        })\n        .select()\n        .single()\n\n      if (insertError) throw insertError\n\n      toast.success('Subscription created successfully', {\n        description: `Created subscription for ${investors.find(i => i.id === investorId)?.legal_name}`,\n        action: {\n          label: 'View',\n          onClick: () => router.push(`/versotech_main/subscriptions`)\n        }\n      })\n\n      // Close modal and refresh\n      onOpenChange(false)\n      router.refresh()\n    } catch (err) {\n      console.error('Failed to create subscription:', err)\n      setError(err instanceof Error ? err.message : 'Failed to create subscription')\n      toast.error('Failed to create subscription')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[600px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Plus className=\"h-5 w-5\" />\n            Quick Add Subscription\n          </DialogTitle>\n          <DialogDescription>\n            Create a new subscription quickly. Press Cmd/Ctrl+Shift+S to open this dialog.\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {error && (\n            <div className=\"flex items-center gap-2 p-3 text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded-lg\">\n              <AlertCircle className=\"h-4 w-4\" />\n              {error}\n            </div>\n          )}\n\n          {loadingData ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n            </div>\n          ) : (\n            <>\n              {/* Investor Selection */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"investor\">Investor *</Label>\n                <Select value={investorId} onValueChange={setInvestorId}>\n                  <SelectTrigger id=\"investor\">\n                    <SelectValue placeholder=\"Select investor...\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <div className=\"p-2\">\n                      <Input\n                        placeholder=\"Search investors...\"\n                        value={investorSearch}\n                        onChange={(e) => setInvestorSearch(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                    {filteredInvestors.length === 0 ? (\n                      <div className=\"py-6 text-center text-sm text-muted-foreground\">\n                        No investors found\n                      </div>\n                    ) : (\n                      filteredInvestors.map((investor) => (\n                        <SelectItem key={investor.id} value={investor.id}>\n                          {investor.legal_name}\n                          {investor.email && (\n                            <span className=\"text-xs text-muted-foreground ml-2\">\n                              {investor.email}\n                            </span>\n                          )}\n                        </SelectItem>\n                      ))\n                    )}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Vehicle Selection */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"vehicle\">Vehicle *</Label>\n                <Select value={vehicleId} onValueChange={setVehicleId}>\n                  <SelectTrigger id=\"vehicle\">\n                    <SelectValue placeholder=\"Select vehicle...\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <div className=\"p-2\">\n                      <Input\n                        placeholder=\"Search vehicles...\"\n                        value={vehicleSearch}\n                        onChange={(e) => setVehicleSearch(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                    {filteredVehicles.length === 0 ? (\n                      <div className=\"py-6 text-center text-sm text-muted-foreground\">\n                        No vehicles found\n                      </div>\n                    ) : (\n                      filteredVehicles.map((vehicle) => (\n                        <SelectItem key={vehicle.id} value={vehicle.id}>\n                          {vehicle.name}\n                          <span className=\"text-xs text-muted-foreground ml-2\">\n                            {vehicle.type}\n                          </span>\n                        </SelectItem>\n                      ))\n                    )}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Commitment Amount */}\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"col-span-2 space-y-2\">\n                  <Label htmlFor=\"commitment\">Commitment Amount *</Label>\n                  <Input\n                    id=\"commitment\"\n                    type=\"number\"\n                    placeholder=\"1000000\"\n                    value={commitment}\n                    onChange={(e) => setCommitment(e.target.value)}\n                    min=\"0\"\n                    step=\"0.01\"\n                    required\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"currency\">Currency</Label>\n                  <Select value={currency} onValueChange={setCurrency}>\n                    <SelectTrigger id=\"currency\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"USD\">USD</SelectItem>\n                      <SelectItem value=\"EUR\">EUR</SelectItem>\n                      <SelectItem value=\"GBP\">GBP</SelectItem>\n                      <SelectItem value=\"CHF\">CHF</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              {/* Status */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"status\">Initial Status</Label>\n                <Select value={status} onValueChange={setStatus}>\n                  <SelectTrigger id=\"status\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"draft\">Draft</SelectItem>\n                    <SelectItem value=\"pending\">Pending Review</SelectItem>\n                    <SelectItem value=\"active\">Active</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </>\n          )}\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={submitting}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={submitting || loadingData}>\n              {submitting ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Creating...\n                </>\n              ) : (\n                <>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Create Subscription\n                </>\n              )}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3185, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/hooks/use-keyboard-shortcuts.ts"],"sourcesContent":["'use client'\n\nimport { useEffect, useCallback } from 'react'\n\nexport interface KeyboardShortcut {\n  key: string\n  ctrlKey?: boolean\n  metaKey?: boolean\n  shiftKey?: boolean\n  altKey?: boolean\n  callback: (e: KeyboardEvent) => void\n  description?: string\n}\n\nexport function useKeyboardShortcut(\n  key: string,\n  callback: (e: KeyboardEvent) => void,\n  options: {\n    ctrl?: boolean\n    meta?: boolean\n    shift?: boolean\n    alt?: boolean\n    enabled?: boolean\n  } = {}\n) {\n  const { ctrl = false, meta = false, shift = false, alt = false, enabled = true } = options\n\n  useEffect(() => {\n    if (!enabled) return\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!e.key || !key) return\n      const isCorrectKey = e.key.toLowerCase() === key.toLowerCase()\n      const isCorrectCtrl = ctrl ? e.ctrlKey : !e.ctrlKey\n      const isCorrectMeta = meta ? e.metaKey : !e.metaKey\n      const isCorrectShift = shift ? e.shiftKey : !e.shiftKey\n      const isCorrectAlt = alt ? e.altKey : !e.altKey\n\n      // Allow either Ctrl or Meta (Cmd on Mac) if ctrl or meta is specified\n      const modifierMatch =\n        (ctrl || meta)\n          ? (e.ctrlKey || e.metaKey) && isCorrectShift && isCorrectAlt\n          : isCorrectCtrl && isCorrectMeta && isCorrectShift && isCorrectAlt\n\n      if (isCorrectKey && modifierMatch) {\n        e.preventDefault()\n        callback(e)\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [key, ctrl, meta, shift, alt, enabled, callback])\n}\n\nexport function useKeyboardShortcuts(shortcuts: KeyboardShortcut[], enabled = true) {\n  useEffect(() => {\n    if (!enabled) return\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!e.key) return\n      for (const shortcut of shortcuts) {\n        if (!shortcut.key) continue\n        const isCorrectKey = e.key.toLowerCase() === shortcut.key.toLowerCase()\n        const isCorrectCtrl = shortcut.ctrlKey ? e.ctrlKey : !shortcut.ctrlKey\n        const isCorrectMeta = shortcut.metaKey ? e.metaKey : !shortcut.metaKey\n        const isCorrectShift = shortcut.shiftKey ? e.shiftKey : !shortcut.shiftKey\n        const isCorrectAlt = shortcut.altKey ? e.altKey : !shortcut.altKey\n\n        // Allow either Ctrl or Meta (Cmd on Mac) if either is specified\n        const modifierMatch =\n          (shortcut.ctrlKey || shortcut.metaKey)\n            ? (e.ctrlKey || e.metaKey) && isCorrectShift && isCorrectAlt\n            : isCorrectCtrl && isCorrectMeta && isCorrectShift && isCorrectAlt\n\n        if (isCorrectKey && modifierMatch) {\n          e.preventDefault()\n          shortcut.callback(e)\n          break // Only execute first matching shortcut\n        }\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [shortcuts, enabled])\n}\n"],"names":[],"mappings":";;;;;;AAEA;;AAFA;;AAcO,SAAS,oBACd,GAAW,EACX,QAAoC,EACpC,UAMI,CAAC,CAAC;;IAEN,MAAM,EAAE,OAAO,KAAK,EAAE,OAAO,KAAK,EAAE,QAAQ,KAAK,EAAE,MAAM,KAAK,EAAE,UAAU,IAAI,EAAE,GAAG;IAEnF,IAAA,iMAAS;yCAAC;YACR,IAAI,CAAC,SAAS;YAEd,MAAM;+DAAgB,CAAC;oBACrB,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK;oBACpB,MAAM,eAAe,EAAE,GAAG,CAAC,WAAW,OAAO,IAAI,WAAW;oBAC5D,MAAM,gBAAgB,OAAO,EAAE,OAAO,GAAG,CAAC,EAAE,OAAO;oBACnD,MAAM,gBAAgB,OAAO,EAAE,OAAO,GAAG,CAAC,EAAE,OAAO;oBACnD,MAAM,iBAAiB,QAAQ,EAAE,QAAQ,GAAG,CAAC,EAAE,QAAQ;oBACvD,MAAM,eAAe,MAAM,EAAE,MAAM,GAAG,CAAC,EAAE,MAAM;oBAE/C,sEAAsE;oBACtE,MAAM,gBACJ,AAAC,QAAQ,OACL,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,kBAAkB,eAC9C,iBAAiB,iBAAiB,kBAAkB;oBAE1D,IAAI,gBAAgB,eAAe;wBACjC,EAAE,cAAc;wBAChB,SAAS;oBACX;gBACF;;YAEA,SAAS,gBAAgB,CAAC,WAAW;YACrC;iDAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;wCAAG;QAAC;QAAK;QAAM;QAAM;QAAO;QAAK;QAAS;KAAS;AACrD;GAvCgB;AAyCT,SAAS,qBAAqB,SAA6B,EAAE,UAAU,IAAI;;IAChF,IAAA,iMAAS;0CAAC;YACR,IAAI,CAAC,SAAS;YAEd,MAAM;gEAAgB,CAAC;oBACrB,IAAI,CAAC,EAAE,GAAG,EAAE;oBACZ,KAAK,MAAM,YAAY,UAAW;wBAChC,IAAI,CAAC,SAAS,GAAG,EAAE;wBACnB,MAAM,eAAe,EAAE,GAAG,CAAC,WAAW,OAAO,SAAS,GAAG,CAAC,WAAW;wBACrE,MAAM,gBAAgB,SAAS,OAAO,GAAG,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO;wBACtE,MAAM,gBAAgB,SAAS,OAAO,GAAG,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO;wBACtE,MAAM,iBAAiB,SAAS,QAAQ,GAAG,EAAE,QAAQ,GAAG,CAAC,SAAS,QAAQ;wBAC1E,MAAM,eAAe,SAAS,MAAM,GAAG,EAAE,MAAM,GAAG,CAAC,SAAS,MAAM;wBAElE,gEAAgE;wBAChE,MAAM,gBACJ,AAAC,SAAS,OAAO,IAAI,SAAS,OAAO,GACjC,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,kBAAkB,eAC9C,iBAAiB,iBAAiB,kBAAkB;wBAE1D,IAAI,gBAAgB,eAAe;4BACjC,EAAE,cAAc;4BAChB,SAAS,QAAQ,CAAC;4BAClB,OAAM,uCAAuC;wBAC/C;oBACF;gBACF;;YAEA,SAAS,gBAAgB,CAAC,WAAW;YACrC;kDAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;yCAAG;QAAC;QAAW;KAAQ;AACzB;IA/BgB"}},
    {"offset": {"line": 3276, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/layout/global-keyboard-shortcuts.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { CommandPalette } from '@/components/command-palette/command-palette'\nimport { QuickAddSubscriptionModal } from '@/components/subscriptions/quick-add-subscription-modal'\nimport { useKeyboardShortcut } from '@/hooks/use-keyboard-shortcuts'\n\ninterface GlobalKeyboardShortcutsProps {\n  brand: 'versoholdings' | 'versotech'\n  role: string\n}\n\nexport function GlobalKeyboardShortcuts({ brand, role }: GlobalKeyboardShortcutsProps) {\n  const [quickAddOpen, setQuickAddOpen] = useState(false)\n\n  // Only show keyboard shortcuts for staff users\n  const isStaff = ['staff_admin', 'staff_ops', 'staff_rm', 'ceo'].includes(role)\n\n  // Cmd/Ctrl+Shift+S to open Quick Add Subscription\n  useKeyboardShortcut(\n    's',\n    () => setQuickAddOpen(true),\n    {\n      meta: true, // Allows both Cmd and Ctrl\n      shift: true,\n      enabled: isStaff && brand === 'versotech'\n    }\n  )\n\n  // Only render staff features for staff users\n  if (!isStaff || brand !== 'versotech') {\n    return (\n      <CommandPalette\n        brand={brand}\n      />\n    )\n  }\n\n  return (\n    <>\n      {/* Command Palette (Cmd+K) */}\n      <CommandPalette\n        brand={brand}\n        onQuickAddSubscription={() => setQuickAddOpen(true)}\n      />\n\n      {/* Quick Add Subscription Modal (Cmd+Shift+S) */}\n      <QuickAddSubscriptionModal\n        open={quickAddOpen}\n        onOpenChange={setQuickAddOpen}\n      />\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAYO,SAAS,wBAAwB,EAAE,KAAK,EAAE,IAAI,EAAgC;;IACnF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gMAAQ,EAAC;IAEjD,+CAA+C;IAC/C,MAAM,UAAU;QAAC;QAAe;QAAa;QAAY;KAAM,CAAC,QAAQ,CAAC;IAEzE,kDAAkD;IAClD,IAAA,6LAAmB,EACjB;uDACA,IAAM,gBAAgB;sDACtB;QACE,MAAM;QACN,OAAO;QACP,SAAS,WAAW,UAAU;IAChC;IAGF,6CAA6C;IAC7C,IAAI,CAAC,WAAW,UAAU,aAAa;QACrC,qBACE,oNAAC,0MAAc;YACb,OAAO;;;;;;IAGb;IAEA,qBACE;;0BAEE,oNAAC,0MAAc;gBACb,OAAO;gBACP,wBAAwB,IAAM,gBAAgB;;;;;;0BAIhD,oNAAC,mOAAyB;gBACxB,MAAM;gBACN,cAAc;;;;;;;;AAItB;GAzCgB;;QAOd,6LAAmB;;;KAPL"}},
    {"offset": {"line": 3356, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-2.5 md:py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-2.5 md:py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-2.5 md:py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-2.5 md:py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-2.5 md:py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3597, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/layout/notification-center.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { cn } from '@/lib/utils'\r\nimport { usePersona } from '@/contexts/persona-context'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport {\r\n  Bell,\r\n  CheckSquare,\r\n  MessageSquare,\r\n  AlertCircle\r\n} from 'lucide-react'\r\nimport Link from 'next/link'\r\n\r\ninterface NotificationItem {\r\n  id: string\r\n  type: 'task' | 'message' | 'notification'\r\n  title: string\r\n  description?: string\r\n  href: string\r\n  read: boolean\r\n  created_at: string\r\n  deal_name?: string\r\n}\r\n\r\ninterface NotificationCenterProps {\r\n  className?: string\r\n}\r\n\r\nexport function NotificationCenter({ className }: NotificationCenterProps) {\r\n  const [mounted, setMounted] = useState(false)\r\n  const [open, setOpen] = useState(false)\r\n  const [notifications, setNotifications] = useState<NotificationItem[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const { activePersona } = usePersona()\r\n  const { theme } = useTheme()\r\n\r\n  // Hydration fix: Only apply theme after component mounts to avoid SSR mismatch\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // Use mounted check to prevent hydration mismatch (server renders light, client may have dark)\r\n  const isDark = mounted && theme === 'staff-dark'\r\n\r\n  // Fetch notifications from multiple sources\r\n  useEffect(() => {\r\n    async function fetchNotifications() {\r\n      if (!activePersona || !mounted) return\r\n\r\n      setLoading(true)\r\n      const supabase = createClient()\r\n      const items: NotificationItem[] = []\r\n\r\n      try {\r\n        const { data: { user }, error: userError } = await supabase.auth.getUser()\r\n\r\n        if (userError || !user) {\r\n          console.warn('[NotificationCenter] No authenticated user found')\r\n          setNotifications([])\r\n          return\r\n        }\r\n\r\n        const userId = user.id\r\n        const personaType = activePersona.persona_type\r\n\r\n        // Passive personas (lawyer, introducer) only receive notifications - no tasks or messages\r\n        const isPassiveRecipient = personaType === 'lawyer' || personaType === 'introducer'\r\n\r\n        // Fetch tasks (skip for passive personas - they don't have tasks page access)\r\n        if (!isPassiveRecipient) {\r\n          let taskQuery = supabase\r\n            .from('tasks')\r\n            .select('id, title, description, created_at, owner_user_id, owner_investor_id')\r\n            .in('status', ['pending', 'in_progress'])\r\n            .order('created_at', { ascending: false })\r\n            .limit(5)\r\n\r\n          if (personaType === 'investor') {\r\n            taskQuery = taskQuery.or(`owner_user_id.eq.${userId},owner_investor_id.eq.${activePersona.entity_id}`)\r\n          } else {\r\n            taskQuery = taskQuery.eq('owner_user_id', userId)\r\n          }\r\n\r\n          const { data: tasks } = await taskQuery\r\n\r\n          if (tasks) {\r\n            tasks.forEach((task: any) => {\r\n              items.push({\r\n                id: `task-${task.id}`,\r\n                type: 'task',\r\n                title: task.title,\r\n                description: task.description,\r\n                href: '/versotech_main/tasks',\r\n                read: false,\r\n                created_at: task.created_at\r\n              })\r\n            })\r\n          }\r\n        }\r\n\r\n        // Fetch unread messages (skip for passive personas - they don't have inbox access)\r\n        if (!isPassiveRecipient) {\r\n          const { data: participants } = await supabase\r\n            .from('conversation_participants')\r\n            .select('conversation_id, last_read_at')\r\n            .eq('user_id', userId)\r\n            .limit(50)\r\n\r\n          const conversationIds = (participants || [])\r\n            .map((row: any) => row.conversation_id)\r\n            .filter(Boolean)\r\n\r\n          if (conversationIds.length > 0) {\r\n            let conversationQuery = supabase\r\n              .from('conversations')\r\n              .select('id, subject, preview, last_message_at, created_at, visibility')\r\n              .in('id', conversationIds)\r\n              .order('last_message_at', { ascending: false, nullsFirst: false })\r\n              .limit(10)\r\n\r\n            if (personaType !== 'staff') {\r\n              conversationQuery = conversationQuery.in('visibility', ['investor', 'deal'])\r\n            }\r\n\r\n            const { data: conversations } = await conversationQuery\r\n\r\n            const lastReadByConversation = new Map<string, string | null>()\r\n            ;(participants || []).forEach((row: any) => {\r\n              if (row.conversation_id) {\r\n                lastReadByConversation.set(row.conversation_id, row.last_read_at ?? null)\r\n              }\r\n            })\r\n\r\n            const unreadConversations = (conversations || []).filter((conv: any) => {\r\n              const lastMessageAt = conv.last_message_at ?? conv.created_at\r\n              if (!lastMessageAt) return false\r\n              const lastReadAt = lastReadByConversation.get(conv.id)\r\n              if (!lastReadAt) return true\r\n              return new Date(lastMessageAt).getTime() > new Date(lastReadAt).getTime()\r\n            })\r\n\r\n            unreadConversations.slice(0, 5).forEach((conv: any) => {\r\n              const lastMessageAt = conv.last_message_at ?? conv.created_at\r\n              items.push({\r\n                id: `msg-${conv.id}`,\r\n                type: 'message',\r\n                title: conv.subject || 'New message',\r\n                description: conv.preview || 'You have a new message',\r\n                href: '/versotech_main/inbox?tab=messages',\r\n                read: false,\r\n                created_at: lastMessageAt\r\n              })\r\n            })\r\n          }\r\n        }\r\n\r\n        // Fetch notifications for all personas (investor, lawyer, staff, etc.)\n        // Notifications use read_at timestamp (null = unread)\n        const { data: notifs } = await supabase\n          .from('investor_notifications')\n          .select('id, title, message, created_at, read_at, link')\n          .eq('user_id', userId)\n          .is('read_at', null)\n          .order('created_at', { ascending: false })\n          .limit(5)\n\n        if (notifs) {\n          notifs.forEach((notif: any) => {\n            items.push({\n              id: `notif-${notif.id}`,\n              type: 'notification',\n              title: notif.title,\n              description: notif.message,\n              href: notif.link || '/versotech_main/notifications',\n              read: notif.read_at !== null,\n              created_at: notif.created_at\n            })\n          })\n        }\n\n        if (personaType === 'lawyer') {\n          const { data: lawyerNotifs } = await supabase\n            .from('notifications')\n            .select('id, title, message, created_at, read, link')\n            .eq('user_id', userId)\n            .eq('read', false)\n            .order('created_at', { ascending: false })\n            .limit(5)\n\n          if (lawyerNotifs) {\n            lawyerNotifs.forEach((notif: any) => {\n              items.push({\n                id: `lawyer-notif-${notif.id}`,\n                type: 'notification',\n                title: notif.title,\n                description: notif.message,\n                href: notif.link || '/versotech_main/notifications',\n                read: !!notif.read,\n                created_at: notif.created_at\n              })\n            })\n          }\n        }\n\r\n        // Sort by date and take top 10\r\n        items.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())\r\n        setNotifications(items.slice(0, 10))\r\n      } catch (error) {\r\n        console.error('[NotificationCenter] Error fetching notifications:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchNotifications()\r\n  }, [activePersona, mounted])\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length\r\n\r\n  const getIcon = (type: NotificationItem['type']) => {\r\n    switch (type) {\r\n      case 'task': return CheckSquare\r\n      case 'message': return MessageSquare\r\n      case 'notification': return AlertCircle\r\n      default: return Bell\r\n    }\r\n  }\r\n\r\n  const formatTime = (dateStr: string) => {\r\n    const date = new Date(dateStr)\r\n    const now = new Date()\r\n    const diffMs = now.getTime() - date.getTime()\r\n    const diffMins = Math.floor(diffMs / 60000)\r\n    const diffHours = Math.floor(diffMins / 60)\r\n    const diffDays = Math.floor(diffHours / 24)\r\n\r\n    if (diffMins < 1) return 'Just now'\r\n    if (diffMins < 60) return `${diffMins}m ago`\r\n    if (diffHours < 24) return `${diffHours}h ago`\r\n    if (diffDays < 7) return `${diffDays}d ago`\r\n    return date.toLocaleDateString()\r\n  }\r\n\r\n  // Render placeholder button until mounted to prevent Radix UI hydration mismatch\r\n  if (!mounted) {\r\n    return (\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className={cn(\r\n          \"relative\",\r\n          isDark\r\n            ? \"text-gray-400 hover:text-white hover:bg-white/10\"\r\n            : \"text-gray-600 hover:text-gray-900 hover:bg-gray-100\",\r\n          className\r\n        )}\r\n      >\r\n        <Bell className=\"h-5 w-5\" />\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <DropdownMenu open={open} onOpenChange={setOpen}>\r\n      <DropdownMenuTrigger asChild>\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          className={cn(\r\n            \"relative\",\r\n            isDark\r\n              ? \"text-gray-400 hover:text-white hover:bg-white/10\"\r\n              : \"text-gray-600 hover:text-gray-900 hover:bg-gray-100\",\r\n            className\r\n          )}\r\n        >\r\n          <Bell className=\"h-5 w-5\" />\r\n          {unreadCount > 0 && (\r\n            <Badge\r\n              className={cn(\r\n                \"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-[10px]\",\r\n                \"bg-red-500 text-white border-0\"\r\n              )}\r\n            >\r\n              {unreadCount > 9 ? '9+' : unreadCount}\r\n            </Badge>\r\n          )}\r\n        </Button>\r\n      </DropdownMenuTrigger>\r\n\r\n      <DropdownMenuContent\r\n        align=\"end\"\r\n        className={cn(\r\n          \"w-80\",\r\n          isDark\r\n            ? \"bg-zinc-800 border-white/10 text-white\"\r\n            : \"bg-white border-gray-200\"\r\n        )}\r\n      >\r\n        <DropdownMenuLabel className=\"flex items-center justify-between\">\r\n          <span className={isDark ? \"text-white\" : \"text-gray-900\"}>\r\n            Notifications\r\n          </span>\r\n          {unreadCount > 0 && (\r\n            <Badge variant=\"secondary\" className=\"text-xs\">\r\n              {unreadCount} new\r\n            </Badge>\r\n          )}\r\n        </DropdownMenuLabel>\r\n\r\n        <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n\r\n        {loading ? (\r\n          <div className=\"p-4 text-center\">\r\n            <div className={cn(\r\n              \"animate-spin h-5 w-5 mx-auto border-2 rounded-full\",\r\n              isDark ? \"border-white/20 border-t-white\" : \"border-gray-200 border-t-gray-600\"\r\n            )} />\r\n          </div>\r\n        ) : notifications.length === 0 ? (\r\n          <div className={cn(\r\n            \"p-4 text-center text-sm\",\r\n            isDark ? \"text-gray-500\" : \"text-gray-500\"\r\n          )}>\r\n            No notifications\r\n          </div>\r\n        ) : (\r\n          <div className=\"max-h-80 overflow-y-auto\">\r\n            {notifications.map((item) => {\r\n              const Icon = getIcon(item.type)\r\n\r\n              return (\r\n                <DropdownMenuItem\r\n                  key={item.id}\r\n                  asChild\r\n                  className={cn(\r\n                    \"flex items-start gap-3 p-3 cursor-pointer\",\r\n                    isDark\r\n                      ? \"focus:bg-white/10\"\r\n                      : \"focus:bg-gray-50\",\r\n                    !item.read && (isDark ? \"bg-white/5\" : \"bg-blue-50/50\")\r\n                  )}\r\n                >\r\n                  <Link href={item.href} className=\"flex items-start gap-3 w-full\">\r\n                    <div className={cn(\r\n                      \"h-8 w-8 rounded-full flex items-center justify-center flex-shrink-0\",\r\n                      isDark ? \"bg-white/10\" : \"bg-gray-100\"\r\n                    )}>\r\n                      <Icon className={cn(\r\n                        \"h-4 w-4\",\r\n                        item.type === 'task' && \"text-blue-500\",\r\n                        item.type === 'message' && \"text-green-500\",\r\n                        item.type === 'notification' && \"text-orange-500\"\r\n                      )} />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className={cn(\r\n                        \"text-sm font-medium truncate\",\r\n                        isDark ? \"text-white\" : \"text-gray-900\"\r\n                      )}>\r\n                        {item.title}\r\n                      </div>\r\n                      {item.description && (\r\n                        <div className={cn(\r\n                          \"text-xs truncate\",\r\n                          isDark ? \"text-gray-400\" : \"text-gray-500\"\r\n                        )}>\r\n                          {item.description}\r\n                        </div>\r\n                      )}\r\n                      <div className={cn(\r\n                        \"text-xs mt-1\",\r\n                        isDark ? \"text-gray-500\" : \"text-gray-400\"\r\n                      )}>\r\n                        {formatTime(item.created_at)}\r\n                        {item.deal_name && ` â€¢ ${item.deal_name}`}\r\n                      </div>\r\n                    </div>\r\n                    {!item.read && (\r\n                      <div className=\"h-2 w-2 rounded-full bg-blue-500 flex-shrink-0 mt-2\" />\r\n                    )}\r\n                  </Link>\r\n                </DropdownMenuItem>\r\n              )\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n\r\n        <DropdownMenuItem asChild>\r\n          <Link\r\n            href=\"/versotech_main/notifications\"\r\n            className={cn(\r\n              \"flex items-center justify-center text-sm py-2\",\r\n              isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n            )}\r\n          >\r\n            View all notifications\r\n          </Link>\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAMA;;;AAvBA;;;;;;;;;;;AAwCO,SAAS,mBAAmB,EAAE,SAAS,EAA2B;;IACvE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gMAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gMAAQ,EAAC;IACjC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,gMAAQ,EAAqB,EAAE;IACzE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gMAAQ,EAAC;IACvC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,8KAAU;IACpC,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,6KAAQ;IAE1B,+EAA+E;IAC/E,IAAA,iMAAS;wCAAC;YACR,WAAW;QACb;uCAAG,EAAE;IAEL,+FAA+F;IAC/F,MAAM,SAAS,WAAW,UAAU;IAEpC,4CAA4C;IAC5C,IAAA,iMAAS;wCAAC;YACR,eAAe;gBACb,IAAI,CAAC,iBAAiB,CAAC,SAAS;gBAEhC,WAAW;gBACX,MAAM,WAAW,IAAA,0KAAY;gBAC7B,MAAM,QAA4B,EAAE;gBAEpC,IAAI;oBACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;oBAExE,IAAI,aAAa,CAAC,MAAM;wBACtB,QAAQ,IAAI,CAAC;wBACb,iBAAiB,EAAE;wBACnB;oBACF;oBAEA,MAAM,SAAS,KAAK,EAAE;oBACtB,MAAM,cAAc,cAAc,YAAY;oBAE9C,0FAA0F;oBAC1F,MAAM,qBAAqB,gBAAgB,YAAY,gBAAgB;oBAEvE,8EAA8E;oBAC9E,IAAI,CAAC,oBAAoB;wBACvB,IAAI,YAAY,SACb,IAAI,CAAC,SACL,MAAM,CAAC,wEACP,EAAE,CAAC,UAAU;4BAAC;4BAAW;yBAAc,EACvC,KAAK,CAAC,cAAc;4BAAE,WAAW;wBAAM,GACvC,KAAK,CAAC;wBAET,IAAI,gBAAgB,YAAY;4BAC9B,YAAY,UAAU,EAAE,CAAC,CAAC,iBAAiB,EAAE,OAAO,sBAAsB,EAAE,cAAc,SAAS,EAAE;wBACvG,OAAO;4BACL,YAAY,UAAU,EAAE,CAAC,iBAAiB;wBAC5C;wBAEA,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,MAAM;wBAE9B,IAAI,OAAO;4BACT,MAAM,OAAO;mFAAC,CAAC;oCACb,MAAM,IAAI,CAAC;wCACT,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE;wCACrB,MAAM;wCACN,OAAO,KAAK,KAAK;wCACjB,aAAa,KAAK,WAAW;wCAC7B,MAAM;wCACN,MAAM;wCACN,YAAY,KAAK,UAAU;oCAC7B;gCACF;;wBACF;oBACF;oBAEA,mFAAmF;oBACnF,IAAI,CAAC,oBAAoB;wBACvB,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,6BACL,MAAM,CAAC,iCACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC;wBAET,MAAM,kBAAkB,CAAC,gBAAgB,EAAE,EACxC,GAAG;+FAAC,CAAC,MAAa,IAAI,eAAe;8FACrC,MAAM,CAAC;wBAEV,IAAI,gBAAgB,MAAM,GAAG,GAAG;4BAC9B,IAAI,oBAAoB,SACrB,IAAI,CAAC,iBACL,MAAM,CAAC,iEACP,EAAE,CAAC,MAAM,iBACT,KAAK,CAAC,mBAAmB;gCAAE,WAAW;gCAAO,YAAY;4BAAM,GAC/D,KAAK,CAAC;4BAET,IAAI,gBAAgB,SAAS;gCAC3B,oBAAoB,kBAAkB,EAAE,CAAC,cAAc;oCAAC;oCAAY;iCAAO;4BAC7E;4BAEA,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM;4BAEtC,MAAM,yBAAyB,IAAI;4BAClC,CAAC,gBAAgB,EAAE,EAAE,OAAO;mFAAC,CAAC;oCAC7B,IAAI,IAAI,eAAe,EAAE;wCACvB,uBAAuB,GAAG,CAAC,IAAI,eAAe,EAAE,IAAI,YAAY,IAAI;oCACtE;gCACF;;4BAEA,MAAM,sBAAsB,CAAC,iBAAiB,EAAE,EAAE,MAAM;uGAAC,CAAC;oCACxD,MAAM,gBAAgB,KAAK,eAAe,IAAI,KAAK,UAAU;oCAC7D,IAAI,CAAC,eAAe,OAAO;oCAC3B,MAAM,aAAa,uBAAuB,GAAG,CAAC,KAAK,EAAE;oCACrD,IAAI,CAAC,YAAY,OAAO;oCACxB,OAAO,IAAI,KAAK,eAAe,OAAO,KAAK,IAAI,KAAK,YAAY,OAAO;gCACzE;;4BAEA,oBAAoB,KAAK,CAAC,GAAG,GAAG,OAAO;mFAAC,CAAC;oCACvC,MAAM,gBAAgB,KAAK,eAAe,IAAI,KAAK,UAAU;oCAC7D,MAAM,IAAI,CAAC;wCACT,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;wCACpB,MAAM;wCACN,OAAO,KAAK,OAAO,IAAI;wCACvB,aAAa,KAAK,OAAO,IAAI;wCAC7B,MAAM;wCACN,MAAM;wCACN,YAAY;oCACd;gCACF;;wBACF;oBACF;oBAEA,uEAAuE;oBACvE,sDAAsD;oBACtD,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,SAC5B,IAAI,CAAC,0BACL,MAAM,CAAC,iDACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,WAAW,MACd,KAAK,CAAC,cAAc;wBAAE,WAAW;oBAAM,GACvC,KAAK,CAAC;oBAET,IAAI,QAAQ;wBACV,OAAO,OAAO;+EAAC,CAAC;gCACd,MAAM,IAAI,CAAC;oCACT,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;oCACvB,MAAM;oCACN,OAAO,MAAM,KAAK;oCAClB,aAAa,MAAM,OAAO;oCAC1B,MAAM,MAAM,IAAI,IAAI;oCACpB,MAAM,MAAM,OAAO,KAAK;oCACxB,YAAY,MAAM,UAAU;gCAC9B;4BACF;;oBACF;oBAEA,IAAI,gBAAgB,UAAU;wBAC5B,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,iBACL,MAAM,CAAC,8CACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,QAAQ,OACX,KAAK,CAAC,cAAc;4BAAE,WAAW;wBAAM,GACvC,KAAK,CAAC;wBAET,IAAI,cAAc;4BAChB,aAAa,OAAO;mFAAC,CAAC;oCACpB,MAAM,IAAI,CAAC;wCACT,IAAI,CAAC,aAAa,EAAE,MAAM,EAAE,EAAE;wCAC9B,MAAM;wCACN,OAAO,MAAM,KAAK;wCAClB,aAAa,MAAM,OAAO;wCAC1B,MAAM,MAAM,IAAI,IAAI;wCACpB,MAAM,CAAC,CAAC,MAAM,IAAI;wCAClB,YAAY,MAAM,UAAU;oCAC9B;gCACF;;wBACF;oBACF;oBAEA,+BAA+B;oBAC/B,MAAM,IAAI;2EAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO;;oBACtF,iBAAiB,MAAM,KAAK,CAAC,GAAG;gBAClC,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,sDAAsD;gBACtE,SAAU;oBACR,WAAW;gBACb;YACF;YAEA;QACF;uCAAG;QAAC;QAAe;KAAQ;IAE3B,MAAM,cAAc,cAAc,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,IAAI,EAAE,MAAM;IAE7D,MAAM,UAAU,CAAC;QACf,OAAQ;YACN,KAAK;gBAAQ,OAAO,oQAAW;YAC/B,KAAK;gBAAW,OAAO,mQAAa;YACpC,KAAK;gBAAgB,OAAO,6PAAW;YACvC;gBAAS,OAAO,oOAAI;QACtB;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,MAAM,MAAM,IAAI;QAChB,MAAM,SAAS,IAAI,OAAO,KAAK,KAAK,OAAO;QAC3C,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;QACrC,MAAM,YAAY,KAAK,KAAK,CAAC,WAAW;QACxC,MAAM,WAAW,KAAK,KAAK,CAAC,YAAY;QAExC,IAAI,WAAW,GAAG,OAAO;QACzB,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,KAAK,CAAC;QAC5C,IAAI,YAAY,IAAI,OAAO,GAAG,UAAU,KAAK,CAAC;QAC9C,IAAI,WAAW,GAAG,OAAO,GAAG,SAAS,KAAK,CAAC;QAC3C,OAAO,KAAK,kBAAkB;IAChC;IAEA,iFAAiF;IACjF,IAAI,CAAC,SAAS;QACZ,qBACE,oNAAC,sKAAM;YACL,SAAQ;YACR,MAAK;YACL,WAAW,IAAA,mJAAE,EACX,YACA,SACI,qDACA,uDACJ;sBAGF,cAAA,oNAAC,oOAAI;gBAAC,WAAU;;;;;;;;;;;IAGtB;IAEA,qBACE,oNAAC,sLAAY;QAAC,MAAM;QAAM,cAAc;;0BACtC,oNAAC,6LAAmB;gBAAC,OAAO;0BAC1B,cAAA,oNAAC,sKAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAW,IAAA,mJAAE,EACX,YACA,SACI,qDACA,uDACJ;;sCAGF,oNAAC,oOAAI;4BAAC,WAAU;;;;;;wBACf,cAAc,mBACb,oNAAC,oKAAK;4BACJ,WAAW,IAAA,mJAAE,EACX,qFACA;sCAGD,cAAc,IAAI,OAAO;;;;;;;;;;;;;;;;;0BAMlC,oNAAC,6LAAmB;gBAClB,OAAM;gBACN,WAAW,IAAA,mJAAE,EACX,QACA,SACI,2CACA;;kCAGN,oNAAC,2LAAiB;wBAAC,WAAU;;0CAC3B,oNAAC;gCAAK,WAAW,SAAS,eAAe;0CAAiB;;;;;;4BAGzD,cAAc,mBACb,oNAAC,oKAAK;gCAAC,SAAQ;gCAAY,WAAU;;oCAClC;oCAAY;;;;;;;;;;;;;kCAKnB,oNAAC,+LAAqB;wBAAC,WAAW,SAAS,gBAAgB;;;;;;oBAE1D,wBACC,oNAAC;wBAAI,WAAU;kCACb,cAAA,oNAAC;4BAAI,WAAW,IAAA,mJAAE,EAChB,sDACA,SAAS,mCAAmC;;;;;;;;;;+BAG9C,cAAc,MAAM,KAAK,kBAC3B,oNAAC;wBAAI,WAAW,IAAA,mJAAE,EAChB,2BACA,SAAS,kBAAkB;kCAC1B;;;;;6CAIH,oNAAC;wBAAI,WAAU;kCACZ,cAAc,GAAG,CAAC,CAAC;4BAClB,MAAM,OAAO,QAAQ,KAAK,IAAI;4BAE9B,qBACE,oNAAC,0LAAgB;gCAEf,OAAO;gCACP,WAAW,IAAA,mJAAE,EACX,6CACA,SACI,sBACA,oBACJ,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,eAAe,eAAe;0CAGxD,cAAA,oNAAC,iMAAI;oCAAC,MAAM,KAAK,IAAI;oCAAE,WAAU;;sDAC/B,oNAAC;4CAAI,WAAW,IAAA,mJAAE,EAChB,uEACA,SAAS,gBAAgB;sDAEzB,cAAA,oNAAC;gDAAK,WAAW,IAAA,mJAAE,EACjB,WACA,KAAK,IAAI,KAAK,UAAU,iBACxB,KAAK,IAAI,KAAK,aAAa,kBAC3B,KAAK,IAAI,KAAK,kBAAkB;;;;;;;;;;;sDAGpC,oNAAC;4CAAI,WAAU;;8DACb,oNAAC;oDAAI,WAAW,IAAA,mJAAE,EAChB,gCACA,SAAS,eAAe;8DAEvB,KAAK,KAAK;;;;;;gDAEZ,KAAK,WAAW,kBACf,oNAAC;oDAAI,WAAW,IAAA,mJAAE,EAChB,oBACA,SAAS,kBAAkB;8DAE1B,KAAK,WAAW;;;;;;8DAGrB,oNAAC;oDAAI,WAAW,IAAA,mJAAE,EAChB,gBACA,SAAS,kBAAkB;;wDAE1B,WAAW,KAAK,UAAU;wDAC1B,KAAK,SAAS,IAAI,CAAC,GAAG,EAAE,KAAK,SAAS,EAAE;;;;;;;;;;;;;wCAG5C,CAAC,KAAK,IAAI,kBACT,oNAAC;4CAAI,WAAU;;;;;;;;;;;;+BA9Cd,KAAK,EAAE;;;;;wBAmDlB;;;;;;kCAIJ,oNAAC,+LAAqB;wBAAC,WAAW,SAAS,gBAAgB;;;;;;kCAE3D,oNAAC,0LAAgB;wBAAC,OAAO;kCACvB,cAAA,oNAAC,iMAAI;4BACH,MAAK;4BACL,WAAW,IAAA,mJAAE,EACX,iDACA,SAAS,kBAAkB;sCAE9B;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAxXgB;;QAKY,8KAAU;QAClB,6KAAQ;;;KANZ"}},
    {"offset": {"line": 4080, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,kMAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,oMAAoB;QACnB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;;AAGb,OAAO,WAAW,GAAG,oMAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,+BAA+B;QAC5C,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,kMAAgB,OAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,wMAAwB;QACvB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,wMAAwB,CAAC,WAAW"}},
    {"offset": {"line": 4145, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/session-manager.ts"],"sourcesContent":["'use client'\r\n\r\n/**\r\n * Simplified Session Manager\r\n * \r\n * Provides basic session management utilities without forcing re-authentication.\r\n * Supabase handles session persistence and expiration automatically.\r\n */\r\n\r\nconst AUTH_KEY_HINTS = ['supabase', 'sb-', 'auth', 'supabase.auth.token']\r\n\r\nconst removeAuthKeys = (storage: Storage) => {\r\n  const keysToRemove = new Set<string>()\r\n\r\n  AUTH_KEY_HINTS.forEach((hint) => {\r\n    Object.keys(storage)\r\n      .filter((key) => key.includes(hint))\r\n      .forEach((key) => keysToRemove.add(key))\r\n  })\r\n\r\n  keysToRemove.forEach((key) => storage.removeItem(key))\r\n}\r\n\r\nclass SessionManager {\r\n  private static instance: SessionManager\r\n  private isInitialized = false\r\n\r\n  private constructor() {}\r\n\r\n  static getInstance(): SessionManager {\r\n    if (!SessionManager.instance) {\r\n      SessionManager.instance = new SessionManager()\r\n    }\r\n\r\n    return SessionManager.instance\r\n  }\r\n\r\n  /**\r\n   * Initialize session manager\r\n   * Sets up storage event listeners to handle cross-tab logout\r\n   */\r\n  init(): void {\r\n    if (this.isInitialized || typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    try {\r\n      this.isInitialized = true\r\n\r\n      // Listen for storage changes in other tabs (cross-tab logout)\r\n      window.addEventListener('storage', this.handleStorageChange)\r\n\r\n      console.info('[auth-session] Session manager initialized')\r\n    } catch (error) {\r\n      console.error('[auth-session] Failed to initialize session manager:', error)\r\n      this.isInitialized = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all auth-related cookies\r\n   * Cookies need to be cleared with exact path and domain to work properly\r\n   */\r\n  private clearAuthCookies(): void {\r\n    if (typeof document === 'undefined') {\r\n      return\r\n    }\r\n\r\n    // Get all cookies\r\n    const cookies = document.cookie.split(';')\r\n    const authCookieNames: string[] = []\r\n\r\n    // Find all auth-related cookies\r\n    cookies.forEach(cookie => {\r\n      const cookieName = cookie.split('=')[0].trim()\r\n      if (AUTH_KEY_HINTS.some(hint => cookieName.includes(hint))) {\r\n        authCookieNames.push(cookieName)\r\n      }\r\n    })\r\n\r\n    // Clear each auth cookie with multiple path/domain combinations\r\n    authCookieNames.forEach(name => {\r\n      // Try various path combinations\r\n      const paths = ['/', '/versoholdings', '/versotech', '/versotech_main']\n      const domains = [window.location.hostname, `.${window.location.hostname}`, '']\r\n\r\n      paths.forEach(path => {\r\n        domains.forEach(domain => {\r\n          const domainStr = domain ? `domain=${domain};` : ''\r\n          document.cookie = `${name}=; ${domainStr}path=${path}; expires=Thu, 01 Jan 1970 00:00:00 GMT; max-age=0`\r\n        })\r\n      })\r\n    })\r\n\r\n    console.info('[auth-session] Cleared auth cookies:', authCookieNames)\r\n  }\r\n\r\n  /**\r\n   * Clear all auth data - localStorage, sessionStorage, and cookies\r\n   * This is the most comprehensive cleanup and should be used before re-authentication\r\n   */\r\n  clearAllAuthData(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Clearing ALL auth data (storage + cookies)')\r\n\r\n    // Clear storage\r\n    removeAuthKeys(window.localStorage)\r\n    removeAuthKeys(window.sessionStorage)\r\n\r\n    // Clear cookies\r\n    this.clearAuthCookies()\r\n  }\r\n\r\n  /**\r\n   * Force sign out by clearing all auth-related storage\r\n   * Used during logout to ensure clean state\r\n   */\r\n  forceSignOut(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Force sign out - clearing all auth state')\r\n\r\n    // Clear all local auth data\r\n    this.clearAllAuthData()\r\n\r\n    // Call logout API to clear server-side session\r\n    void fetch('/api/auth/logout', {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n    }).catch((error) => {\r\n      console.error('[auth-session] Failed to revoke server session', error)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Handle storage changes from other tabs\r\n   * If auth keys are removed in another tab, redirect to login\r\n   */\r\n  private handleStorageChange = (event: StorageEvent): void => {\r\n    if (event.key && AUTH_KEY_HINTS.some((hint) => event.key?.includes(hint)) && event.newValue === null) {\r\n      console.info('[auth-session] Auth state cleared in another tab, redirecting to login')\r\n      window.location.href = '/versotech_main/login?error=signed_out'\n    }\r\n  }\r\n\r\n  /**\r\n   * Mark session as authenticated\r\n   * This is called after successful login to update session state\r\n   */\r\n  markAuthenticated(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Session marked as authenticated')\r\n  }\r\n\r\n  /**\r\n   * Get debug information about current session state\r\n   * Useful for troubleshooting auth issues\r\n   */\r\n  getDebugInfo(): Record<string, unknown> {\r\n    if (typeof window === 'undefined') {\r\n      return { error: 'Not in browser' }\r\n    }\r\n\r\n    return {\r\n      localStorageKeys: Object.keys(localStorage).filter((key) =>\r\n        AUTH_KEY_HINTS.some((hint) => key.includes(hint))\r\n      ),\r\n      sessionStorageKeys: Object.keys(sessionStorage).filter((key) =>\r\n        AUTH_KEY_HINTS.some((hint) => key.includes(hint))\r\n      ),\r\n    }\r\n  }\r\n}\r\n\r\nexport const sessionManager = SessionManager.getInstance()\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4302, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/auth-client.ts"],"sourcesContent":["'use client'\r\n\r\nimport { createClient, resetClient } from '@/lib/supabase/client'\r\nimport { sessionManager } from '@/lib/session-manager'\r\nimport type { User, Session } from '@supabase/supabase-js'\r\n\r\nexport interface AuthUser {\r\n  id: string\r\n  email: string\r\n  displayName: string\r\n  avatar?: string\r\n  role:\r\n    | 'investor'\r\n    | 'staff_admin'\r\n    | 'staff_ops'\r\n    | 'staff_rm'\r\n    | 'arranger'\r\n    | 'introducer'\r\n    | 'partner'\r\n    | 'commercial_partner'\r\n    | 'lawyer'\r\n    | 'ceo'\r\n  title?: string\r\n  created_at: string\r\n}\r\n\r\nexport interface AuthSession {\r\n  user: AuthUser\r\n  session: Session\r\n}\r\n\r\nexport interface SignInApiResponse {\r\n  success?: boolean\r\n  redirect?: string\r\n  session?: {\r\n    access_token: string\r\n    refresh_token: string\r\n    expires_at?: number | null\r\n  }\r\n  user?: {\r\n    id: string\r\n    email: string\r\n    role: string\r\n    displayName?: string\r\n  }\r\n  error?: string\r\n}\r\n\r\nconst syncBrowserSession = async (session?: { access_token: string; refresh_token: string }) => {\r\n  console.log('[auth] syncBrowserSession called, session provided:', !!session)\r\n\r\n  if (!session) {\r\n    console.log('[auth] No session to sync, returning true')\r\n    return true\r\n  }\r\n\r\n  const supabase = createClient()\r\n\r\n  console.log('[auth] Calling supabase.auth.setSession...')\r\n  const { data, error } = await supabase.auth.setSession({\r\n    access_token: session.access_token,\r\n    refresh_token: session.refresh_token\r\n  })\r\n\r\n  if (error) {\r\n    console.error('[auth] Client session sync failed:', error)\r\n    return false\r\n  }\r\n\r\n  console.log('[auth] Session synced successfully, user:', data?.user?.email)\r\n  return true\r\n}\r\n\r\nexport class AuthError extends Error {\r\n  constructor(message: string, public code?: string) {\r\n    super(message)\r\n    this.name = 'AuthError'\r\n  }\r\n}\r\n\r\n/**\r\n * SIGNUP - DISABLED\r\n *\r\n * This platform is invite-only. Self-registration is not allowed.\r\n * This function is kept for backwards compatibility but will always fail.\r\n *\r\n * @deprecated Use admin invitation flow instead\r\n */\r\nexport const signUp = async (email: string, password: string, displayName: string, portal: 'investor' | 'staff' = 'investor') => {\r\n  console.warn('[auth-client] signUp() called but self-registration is disabled')\r\n  throw new AuthError('Self-registration is disabled. This platform is invite-only. Please contact your administrator or relationship manager to request access.')\r\n}\r\n\r\n// Sign in with email and password\r\nexport const signIn = async (email: string, password: string, portal: 'investor' | 'staff' = 'investor') => {\r\n  try {\r\n    // CRITICAL FIX: Clear all auth data before attempting sign-in\r\n    // This prevents \"Invalid Refresh Token\" and session conflict errors\r\n    console.log('[auth-client] Clearing all auth data before sign-in...')\r\n    sessionManager.clearAllAuthData()\r\n\r\n    // Reset the Supabase client singleton to get fresh instance\r\n    resetClient()\r\n\r\n    // Small delay to ensure storage clearing completes\r\n    await new Promise(resolve => setTimeout(resolve, 100))\r\n\r\n    const response = await fetch('/api/auth/signin', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password, portal })\r\n    })\r\n\r\n    const payload: SignInApiResponse = await response.json().catch(() => ({}))\r\n\r\n    if (!response.ok || !payload.success) {\r\n      const message = typeof payload.error === 'string' && payload.error.trim()\r\n        ? payload.error\r\n        : 'Authentication failed. Please check your credentials.'\r\n      throw new AuthError(message)\r\n    }\r\n\r\n    const synced = await syncBrowserSession(payload.session ? {\r\n      access_token: payload.session.access_token,\r\n      refresh_token: payload.session.refresh_token\r\n    } : undefined)\r\n\r\n    if (!synced) {\r\n      throw new AuthError('Unable to establish session. Please try again.')\r\n    }\r\n\r\n    sessionManager.markAuthenticated()\r\n\r\n    return payload\r\n  } catch (error) {\r\n    if (error instanceof AuthError) {\r\n      throw error\r\n    }\r\n\r\n    console.error('Sign in failed:', error)\r\n    throw new AuthError('Sign in failed. Please check your credentials.')\r\n  }\r\n}\r\n\r\n/**\r\n * GOOGLE OAUTH - DISABLED\r\n *\r\n * Google OAuth has been disabled for security reasons.\r\n * This platform is invite-only with email/password authentication.\r\n *\r\n * @deprecated OAuth providers have been disabled\r\n */\r\nexport const signInWithGoogle = async (portalType: 'staff' | 'investor' = 'investor') => {\r\n  console.warn('[auth-client] signInWithGoogle() called but OAuth is disabled')\r\n  throw new AuthError('Google sign-in is disabled. Please use your email and password to sign in.')\r\n}\r\n\r\n// Sign out with comprehensive session clearing\r\nexport const signOut = async () => {\r\n  const supabase = createClient()\r\n\r\n  let signOutError: unknown = null\r\n\r\n  try {\r\n    const { error } = await supabase.auth.signOut()\r\n\r\n    if (error) {\r\n      console.error('[auth] Supabase signOut error:', error)\r\n      signOutError = error\r\n    }\r\n  } catch (error) {\r\n    console.error('[auth] Sign out error:', error)\r\n    signOutError = error\r\n  } finally {\r\n    if (typeof window !== 'undefined') {\r\n      sessionManager.forceSignOut()\r\n      // Reset the Supabase client singleton after sign-out\r\n      resetClient()\r\n    }\r\n  }\r\n\r\n  if (signOutError) {\r\n    throw new AuthError('Sign out failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Get current user with profile data\r\nexport const getCurrentUser = async (): Promise<AuthUser | null> => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    // Get current auth user\r\n    const { data: { user }, error: userError } = await supabase.auth.getUser()\r\n\r\n    if (userError || !user) {\r\n      return null\r\n    }\r\n\r\n    // Get profile data from database\r\n    const { data: profile, error: profileError } = await supabase\r\n      .from('profiles')\r\n      .select('*')\r\n      .eq('id', user.id)\r\n      .single()\r\n\r\n    if (profileError || !profile) {\r\n      console.error('Error getting profile:', profileError)\r\n      return null\r\n    }\r\n\r\n    return {\r\n      id: profile.id,\r\n      email: profile.email,\r\n      displayName: profile.display_name || profile.email?.split('@')[0] || 'User',\r\n      avatar: profile.avatar,\r\n      role: profile.role as AuthUser['role'],\r\n      title: profile.title,\r\n      created_at: profile.created_at\r\n    }\r\n  } catch (error) {\r\n    console.error('Error getting current user:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Get current session\r\nexport const getCurrentSession = async (): Promise<Session | null> => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const { data: { session }, error } = await supabase.auth.getSession()\r\n\r\n    if (error) {\r\n      console.error('Error getting session:', error)\r\n      return null\r\n    }\r\n\r\n    return session\r\n  } catch (error) {\r\n    console.error('Error getting session:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Auth state listener\r\nexport const onAuthStateChange = (callback: (event: string, session: Session | null) => void) => {\r\n  const supabase = createClient()\r\n\r\n  return supabase.auth.onAuthStateChange(callback)\r\n}\r\n\r\n// Password reset - uses custom API with Resend email\r\nexport const resetPassword = async (email: string) => {\r\n  try {\r\n    const response = await fetch('/api/auth/request-reset', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email })\r\n    })\r\n\r\n    const data = await response.json()\r\n\r\n    if (!response.ok) {\r\n      // Include detail error for debugging\r\n      const errorMsg = data.detail\r\n        ? `${data.error} (${data.detail})`\r\n        : data.error || 'Password reset failed. Please try again.'\r\n      throw new AuthError(errorMsg)\r\n    }\r\n\r\n    // Success - email sent (or would have been if account exists)\r\n    return { success: true, message: data.message }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Password reset failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Update password\r\nexport const updatePassword = async (newPassword: string) => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const { error } = await supabase.auth.updateUser({\r\n      password: newPassword\r\n    })\r\n\r\n    if (error) {\r\n      throw new AuthError(error.message, error.message)\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Password update failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Update user profile\r\nexport const updateProfile = async (updates: Partial<Pick<AuthUser, 'displayName' | 'title'>>) => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const user = await getCurrentUser()\r\n    if (!user) {\r\n      throw new AuthError('No authenticated user found')\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from('profiles')\r\n      .update({\r\n        display_name: updates.displayName,\r\n        title: updates.title\r\n      })\r\n      .eq('id', user.id)\r\n\r\n    if (error) {\r\n      throw new AuthError(error.message, error.message)\r\n    }\r\n\r\n    // Also update auth user metadata\r\n    if (updates.displayName) {\r\n      const { error: authError } = await supabase.auth.updateUser({\r\n        data: { display_name: updates.displayName }\r\n      })\r\n\r\n      if (authError) {\r\n        console.error('Error updating auth metadata:', authError)\r\n      }\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Profile update failed. Please try again.')\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4555, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/layout/identity-menu.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { usePersona } from '@/contexts/persona-context'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  ChevronDown,\r\n  Check,\r\n  Building2,\r\n  Users,\r\n  UserPlus,\r\n  Briefcase,\r\n  Scale,\r\n  User,\r\n  Settings,\r\n  LogOut,\r\n} from 'lucide-react'\r\nimport Image from 'next/image'\r\nimport { Profile } from '@/lib/auth'\r\nimport { signOut } from '@/lib/auth-client'\r\n\r\nconst PERSONA_ICONS: Record<string, React.ComponentType<{ className?: string }>> = {\r\n  ceo: Building2,\r\n  staff: Building2,\r\n  investor: User,\r\n  arranger: Briefcase,\r\n  introducer: UserPlus,\r\n  partner: Users,\r\n  commercial_partner: Building2,\r\n  lawyer: Scale,\r\n}\r\n\r\nconst PERSONA_LABELS: Record<string, string> = {\r\n  ceo: 'CEO',\r\n  staff: 'Staff',\r\n  investor: 'Investor',\r\n  arranger: 'Arranger',\r\n  introducer: 'Introducer',\r\n  partner: 'Partner',\r\n  commercial_partner: 'Commercial Partner',\r\n  lawyer: 'Lawyer',\r\n}\r\n\r\ninterface IdentityMenuProps {\r\n  profile: Profile\r\n  className?: string\r\n}\r\n\r\nexport function IdentityMenu({ profile, className }: IdentityMenuProps) {\r\n  const [mounted, setMounted] = useState(false)\r\n  const [open, setOpen] = useState(false)\r\n  const [isLoggingOut, setIsLoggingOut] = useState(false)\r\n  const { personas, activePersona, switchPersona, hasMultiplePersonas } = usePersona()\r\n  const { theme } = useTheme()\r\n  const router = useRouter()\r\n\r\n  // Hydration fix: Only apply theme after component mounts to avoid SSR mismatch\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // Use mounted check to prevent hydration mismatch (server renders light, client may have dark)\r\n  const isDark = mounted && theme === 'staff-dark'\r\n\r\n  const handleLogout = async () => {\r\n    setIsLoggingOut(true)\r\n    const loginPath = '/versotech_main/login'\r\n\r\n    try {\r\n      await signOut()\r\n      router.push(loginPath)\r\n      window.location.href = loginPath\r\n    } catch (error) {\r\n      console.error('Logout failed:', error)\r\n      window.location.href = loginPath\r\n    }\r\n  }\r\n\r\n  const handleProfileClick = () => {\r\n    setOpen(false)\r\n    // Route to persona-specific profile page\r\n    // Each persona type has its own entity profile page with member management\r\n    const profileRoutes: Record<string, string> = {\r\n      ceo: '/versotech_main/ceo-profile',\r\n      staff: '/versotech_main/profile',\r\n      investor: '/versotech_main/profile',\r\n      arranger: '/versotech_main/arranger-profile',\r\n      lawyer: '/versotech_main/lawyer-profile',\r\n      introducer: '/versotech_main/introducer-profile',\r\n      partner: '/versotech_main/partner-profile',\r\n      commercial_partner: '/versotech_main/commercial-partner-profile',\r\n    }\r\n    const route = activePersona\r\n      ? profileRoutes[activePersona.persona_type] || '/versotech_main/profile'\r\n      : '/versotech_main/profile'\r\n    router.push(route)\r\n  }\r\n\r\n  const getInitials = (name: string | null | undefined) => {\r\n    if (!name) return 'U'\r\n    return name\r\n      .split(' ')\r\n      .map(part => part[0])\r\n      .filter(Boolean)\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2) || 'U'\r\n  }\r\n\r\n  // Render placeholder until mounted to prevent Radix UI hydration mismatch\r\n  if (!mounted) {\r\n    return (\r\n      <Button\r\n        variant=\"ghost\"\r\n        className={cn(\r\n          \"flex items-center gap-2 h-auto px-3 py-2\",\r\n          isDark ? 'hover:bg-white/10' : 'hover:bg-black/5',\r\n          className\r\n        )}\r\n      >\r\n        <Avatar className=\"h-8 w-8\">\r\n          <AvatarFallback className={cn(\r\n            \"text-xs\",\r\n            isDark ? 'bg-white/20 text-white' : 'bg-black/10 text-black'\r\n          )}>\r\n            {getInitials(profile.displayName)}\r\n          </AvatarFallback>\r\n        </Avatar>\r\n        <div className=\"text-left\">\r\n          <div className={cn(\"font-medium text-sm\", isDark ? \"text-white\" : \"text-black\")}>\r\n            {profile.displayName}\r\n          </div>\r\n        </div>\r\n        <ChevronDown className={cn(\"h-4 w-4\", isDark ? \"text-white/70\" : \"text-black/70\")} />\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <DropdownMenu open={open} onOpenChange={setOpen}>\r\n      <DropdownMenuTrigger asChild>\r\n        <Button\r\n          variant=\"ghost\"\r\n          className={cn(\r\n            \"flex items-center gap-2 h-auto px-3 py-2\",\r\n            isDark ? 'hover:bg-white/10' : 'hover:bg-black/5',\r\n            className\r\n          )}\r\n        >\r\n          <Avatar className=\"h-8 w-8\">\r\n            <AvatarImage src={profile.avatar || undefined} alt={profile.displayName} />\r\n            <AvatarFallback className={cn(\r\n              \"text-xs\",\r\n              isDark ? 'bg-white/20 text-white' : 'bg-black/10 text-black'\r\n            )}>\r\n              {getInitials(profile.displayName)}\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          <div className=\"text-left\">\r\n            <div className={cn(\"font-medium text-sm\", isDark ? \"text-white\" : \"text-black\")}>\r\n              {profile.displayName}\r\n            </div>\r\n          </div>\r\n          <ChevronDown className={cn(\r\n            \"h-4 w-4 transition-transform\",\r\n            isDark ? \"text-white/70\" : \"text-black/70\",\r\n            open && \"rotate-180\"\r\n          )} />\r\n        </Button>\r\n      </DropdownMenuTrigger>\r\n\r\n      <DropdownMenuContent\r\n        align=\"end\"\r\n        className={cn(\r\n          \"w-72\",\r\n          isDark ? \"bg-zinc-800 border-white/10\" : \"bg-white border-gray-200\"\r\n        )}\r\n      >\r\n        {/* User Info */}\r\n        <div className=\"px-3 py-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Avatar className=\"h-10 w-10\">\r\n              <AvatarImage src={profile.avatar || undefined} alt={profile.displayName} />\r\n              <AvatarFallback className={cn(\r\n                \"text-sm\",\r\n                isDark ? 'bg-white/20 text-white' : 'bg-black/10 text-black'\r\n              )}>\r\n                {getInitials(profile.displayName)}\r\n              </AvatarFallback>\r\n            </Avatar>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className={cn(\r\n                \"font-medium text-sm truncate\",\r\n                isDark ? \"text-white\" : \"text-gray-900\"\r\n              )}>\r\n                {profile.displayName}\r\n              </div>\r\n              <div className={cn(\r\n                \"text-xs truncate\",\r\n                isDark ? \"text-gray-400\" : \"text-gray-500\"\r\n              )}>\r\n                {profile.email}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Persona Switching - Only if multiple personas */}\r\n        {hasMultiplePersonas && personas.length > 0 && (\r\n          <>\r\n            <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n            <DropdownMenuLabel className={cn(\r\n              \"text-xs uppercase tracking-wider\",\r\n              isDark ? \"text-gray-500\" : \"text-gray-400\"\r\n            )}>\r\n              Switch Context\r\n            </DropdownMenuLabel>\r\n\r\n            {personas.map((persona) => {\r\n              const Icon = PERSONA_ICONS[persona.persona_type] || User\r\n              const isActive = activePersona?.entity_id === persona.entity_id\r\n\r\n              return (\r\n                <DropdownMenuItem\r\n                  key={persona.entity_id}\r\n                  onClick={() => {\r\n                    switchPersona(persona)\r\n                    setOpen(false)\r\n                  }}\r\n                  className={cn(\r\n                    \"flex items-center gap-3 py-2.5 cursor-pointer\",\r\n                    isDark\r\n                      ? \"focus:bg-white/10 focus:text-white\"\r\n                      : \"focus:bg-gray-100 focus:text-gray-900\",\r\n                    isActive && (isDark ? \"bg-white/5\" : \"bg-blue-50\")\r\n                  )}\r\n                >\r\n                  {persona.entity_logo_url ? (\r\n                    <div className=\"relative h-8 w-8 rounded-full overflow-hidden flex-shrink-0\">\r\n                      <Image\r\n                        src={persona.entity_logo_url}\r\n                        alt={persona.entity_name}\r\n                        fill\r\n                        className=\"object-cover\"\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <div className={cn(\r\n                      \"h-8 w-8 rounded-full flex items-center justify-center flex-shrink-0\",\r\n                      isDark ? \"bg-white/10\" : \"bg-gray-100\"\r\n                    )}>\r\n                      <Icon className=\"h-4 w-4\" />\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className={cn(\r\n                      \"text-sm font-medium truncate\",\r\n                      isDark ? \"text-white\" : \"text-gray-900\"\r\n                    )}>\r\n                      {persona.entity_name}\r\n                    </div>\r\n                    <div className={cn(\r\n                      \"text-xs truncate\",\r\n                      isDark ? \"text-gray-400\" : \"text-gray-500\"\r\n                    )}>\r\n                      {persona.persona_type === 'staff'\r\n                        ? persona.role_in_entity\r\n                        : PERSONA_LABELS[persona.persona_type]}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {isActive && (\r\n                    <Check className={cn(\r\n                      \"h-4 w-4 flex-shrink-0\",\r\n                      isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                    )} />\r\n                  )}\r\n                </DropdownMenuItem>\r\n              )\r\n            })}\r\n          </>\r\n        )}\r\n\r\n        {/* Single Persona - Show context */}\r\n        {!hasMultiplePersonas && activePersona && (\r\n          <>\r\n            <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n            <div className=\"px-3 py-2\">\r\n              <div className={cn(\r\n                \"text-xs uppercase tracking-wider mb-1.5\",\r\n                isDark ? \"text-gray-500\" : \"text-gray-400\"\r\n              )}>\r\n                Current Context\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                {activePersona.entity_logo_url ? (\r\n                  <div className=\"relative h-6 w-6 rounded-full overflow-hidden flex-shrink-0\">\r\n                    <Image\r\n                      src={activePersona.entity_logo_url}\r\n                      alt={activePersona.entity_name}\r\n                      fill\r\n                      className=\"object-cover\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className={cn(\r\n                    \"h-6 w-6 rounded-full flex items-center justify-center flex-shrink-0\",\r\n                    isDark ? \"bg-white/10\" : \"bg-gray-100\"\r\n                  )}>\r\n                    {(() => {\r\n                      const Icon = PERSONA_ICONS[activePersona.persona_type] || User\r\n                      return <Icon className=\"h-3 w-3\" />\r\n                    })()}\r\n                  </div>\r\n                )}\r\n                <div className={cn(\r\n                  \"text-sm\",\r\n                  isDark ? \"text-white\" : \"text-gray-900\"\r\n                )}>\r\n                  {activePersona.entity_name}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n\r\n        {/* Actions */}\r\n        <DropdownMenuItem\r\n          onClick={handleProfileClick}\r\n          className={isDark ? \"focus:bg-white/10 focus:text-white\" : \"\"}\r\n        >\r\n          <Settings className=\"mr-2 h-4 w-4\" />\r\n          Profile Settings\r\n        </DropdownMenuItem>\r\n\r\n        <DropdownMenuItem\r\n          onClick={handleLogout}\r\n          disabled={isLoggingOut}\r\n          className=\"text-red-600 focus:text-red-600\"\r\n        >\r\n          <LogOut className=\"mr-2 h-4 w-4\" />\r\n          {isLoggingOut ? 'Signing out...' : 'Sign Out'}\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5101, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/components/admin-layout-content.tsx"],"sourcesContent":["'use client'\n\nimport { ReactNode, useState, useEffect } from 'react'\nimport { usePathname } from 'next/navigation'\nimport { AdminSidebar } from './admin-sidebar'\nimport { ThemeProvider, useTheme } from '@/components/theme-provider'\nimport { GlobalKeyboardShortcuts } from '@/components/layout/global-keyboard-shortcuts'\nimport { NotificationCenter } from '@/components/layout/notification-center'\nimport { IdentityMenu } from '@/components/layout/identity-menu'\nimport { AuthUser } from '@/lib/auth'\nimport { Sun, Moon, Monitor } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\n\ninterface AdminLayoutContentProps {\n  children: ReactNode\n  profile: AuthUser\n}\n\n// Map routes to page titles\nfunction getPageTitle(pathname: string): string {\n  const routeTitles: Record<string, string> = {\n    '/versotech_admin': 'Admin Portal',\n    '/versotech_admin/dashboard': 'Platform Overview',\n    '/versotech_admin/users': 'All Users',\n    '/versotech_admin/users/staff': 'Staff Members',\n    '/versotech_admin/growth': 'Growth Overview',\n    '/versotech_admin/growth/engagement': 'Engagement Analytics',\n    '/versotech_admin/growth/retention': 'Retention Analysis',\n    '/versotech_admin/growth/funnel': 'Conversion Funnels',\n    '/versotech_admin/growth/cohorts': 'Cohort Analysis',\n    '/versotech_admin/agents': 'AI Agents',\n    '/versotech_admin/settings': 'Settings',\n  }\n\n  // Check for exact match first\n  if (routeTitles[pathname]) {\n    return routeTitles[pathname]\n  }\n\n  // Check for user detail page pattern /versotech_admin/users/[id]\n  if (pathname.match(/^\\/versotech_admin\\/users\\/[^/]+$/)) {\n    return 'User Details'\n  }\n\n  // Default fallback\n  return 'Admin Portal'\n}\n\n// Theme toggle component (adapted from unified-app-layout)\nfunction ThemeToggle() {\n  const [mounted, setMounted] = useState(false)\n  const { theme, preference, setPreference } = useTheme()\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  const isDark = theme === 'staff-dark'\n\n  // During SSR/initial render, show a static button placeholder\n  if (!mounted) {\n    return (\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"text-gray-500 hover:text-gray-900 hover:bg-gray-100\"\n        aria-label=\"Toggle theme\"\n      >\n        <Sun className=\"h-5 w-5\" />\n        <span className=\"sr-only\">Toggle theme</span>\n      </Button>\n    )\n  }\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className={isDark ? 'text-zinc-400 hover:text-white hover:bg-white/10' : 'text-gray-500 hover:text-gray-900 hover:bg-gray-100'}\n        >\n          {theme === 'light' ? (\n            <Sun className=\"h-5 w-5\" />\n          ) : (\n            <Moon className=\"h-5 w-5\" />\n          )}\n          <span className=\"sr-only\">Toggle theme</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className={isDark ? 'bg-zinc-900 border-white/10' : ''}>\n        <DropdownMenuItem\n          onClick={() => setPreference('light')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'light' ? 'font-medium' : ''}`}\n        >\n          <Sun className=\"mr-2 h-4 w-4\" />\n          Light\n          {preference === 'light' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setPreference('dark')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'dark' ? 'font-medium' : ''}`}\n        >\n          <Moon className=\"mr-2 h-4 w-4\" />\n          Dark\n          {preference === 'dark' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setPreference('auto')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'auto' ? 'font-medium' : ''}`}\n        >\n          <Monitor className=\"mr-2 h-4 w-4\" />\n          Auto (by persona)\n          {preference === 'auto' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n\n// Inner layout component that uses theme context\nfunction AdminLayoutInner({ children, profile }: AdminLayoutContentProps) {\n  const [mounted, setMounted] = useState(false)\n  const pathname = usePathname()\n  const pageTitle = getPageTitle(pathname)\n  const { theme } = useTheme()\n\n  // Wait for client-side hydration to apply theme-specific classes\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  // Use light theme styles during SSR to match server render\n  const isDark = mounted && theme === 'staff-dark'\n\n  return (\n    <div className=\"flex h-screen min-h-screen overflow-hidden app-main-bg\">\n      {/* Global Keyboard Shortcuts */}\n      <GlobalKeyboardShortcuts brand=\"versotech\" role={profile.role} />\n\n      {/* Admin Sidebar */}\n      <AdminSidebar />\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header with page title */}\n        <header className={`\n          h-16 px-4 md:px-6 flex items-center justify-between border-b shrink-0\n          ${isDark\n            ? 'bg-zinc-950 border-white/5'\n            : 'bg-white border-gray-100'\n          }\n        `}>\n          {/* Page Title - with left padding on mobile for hamburger menu */}\n          <div className=\"pl-12 md:pl-0\">\n            <h1 className={`text-lg font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>\n              {pageTitle}\n            </h1>\n          </div>\n\n          {/* Right side - Utilities */}\n          <div className=\"flex items-center space-x-2\">\n            <ThemeToggle />\n            <NotificationCenter />\n            <IdentityMenu profile={profile} />\n          </div>\n        </header>\n\n        {/* Content Area */}\n        <main className={`\n          flex-1 overflow-y-auto scrollbar-hide\n          ${isDark ? 'bg-zinc-900' : 'bg-gray-50'}\n        `}>\n          <div className=\"min-h-full p-4 md:p-6\">\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  )\n}\n\nexport function AdminLayoutContent({ children, profile }: AdminLayoutContentProps) {\n  // Admin portal uses light theme by default\n  const defaultTheme = 'light' as const\n\n  return (\n    <ThemeProvider defaultTheme={defaultTheme}>\n      <AdminLayoutInner profile={profile}>\n        {children}\n      </AdminLayoutInner>\n    </ThemeProvider>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}