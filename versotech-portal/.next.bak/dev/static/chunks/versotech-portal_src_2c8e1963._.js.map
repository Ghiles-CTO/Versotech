{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/supabase/client.ts"],"sourcesContent":["'use client'\r\n\r\nimport { createBrowserClient } from '@supabase/ssr'\r\nimport type { SupabaseClient } from '@supabase/supabase-js'\r\n\r\n// Singleton instance to prevent multiple clients from competing for token refresh\r\nlet client: SupabaseClient | null = null\r\n\r\n/**\r\n * Create a Supabase client for browser-side use (singleton pattern)\r\n *\r\n * This uses the default Supabase storage implementation which:\r\n * - Stores session in localStorage for persistence across browser sessions\r\n * - Automatically refreshes tokens before expiration\r\n * - Handles session detection from URL (for OAuth callbacks and magic links)\r\n *\r\n * Uses singleton pattern to prevent \"Invalid Refresh Token: Already Used\" errors\r\n * that occur when multiple client instances try to refresh the same token\r\n */\r\nexport const createClient = () => {\r\n  // Return existing client if already created\r\n  if (client) {\r\n    return client\r\n  }\r\n\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n\r\n  if (!supabaseUrl || !supabaseAnonKey) {\r\n    const message = 'Missing Supabase browser credentials. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.'\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.warn(message)\r\n    }\r\n    throw new Error(message)\r\n  }\r\n\r\n  // Create new client instance\r\n  client = createBrowserClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      persistSession: true,\r\n      detectSessionInUrl: true,\r\n      // CRITICAL: Disabled to prevent dual-refresh conflict with middleware\r\n      // Middleware handles all token refresh to avoid \"Refresh Token Already Used\" errors\r\n      autoRefreshToken: false,\r\n      // Use default storage key to match middleware cookie expectations\r\n      // Previously used 'supabase.auth.token' which caused mismatch with middleware\r\n      flowType: 'pkce',\r\n    },\r\n  })\r\n\r\n  return client\r\n}\r\n\r\n/**\r\n * Reset the Supabase client singleton\r\n *\r\n * This should be called when authentication definitively fails and the client\r\n * needs to be recreated with fresh state. Common scenarios:\r\n * - Refresh token has expired and cannot be renewed\r\n * - Session conflicts detected\r\n * - Before re-authentication after failed login attempts\r\n *\r\n * After calling this, the next call to createClient() will create a new instance.\r\n */\r\nexport const resetClient = () => {\r\n  if (client) {\r\n    console.info('[supabase-client] Resetting client singleton due to auth failure')\r\n    client = null\r\n  }\r\n}\r\n\r\n/**\r\n * Check if the current client has a valid session\r\n * Returns true if there's an active session, false otherwise\r\n */\r\nexport const hasActiveSession = async (): Promise<boolean> => {\r\n  if (!client) {\r\n    return false\r\n  }\r\n\r\n  try {\r\n    const { data: { session } } = await client.auth.getSession()\r\n    return session !== null\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAyBsB;AAvBtB;AAAA;AAFA;;AAKA,kFAAkF;AAClF,IAAI,SAAgC;AAa7B,MAAM,eAAe;IAC1B,4CAA4C;IAC5C,IAAI,QAAQ;QACV,OAAO;IACT;IAEA,MAAM;IACN,MAAM;IAEN;;IAQA,6BAA6B;IAC7B,SAAS,IAAA,2NAAmB,EAAC,aAAa,iBAAiB;QACzD,MAAM;YACJ,gBAAgB;YAChB,oBAAoB;YACpB,sEAAsE;YACtE,oFAAoF;YACpF,kBAAkB;YAClB,kEAAkE;YAClE,8EAA8E;YAC9E,UAAU;QACZ;IACF;IAEA,OAAO;AACT;AAaO,MAAM,cAAc;IACzB,IAAI,QAAQ;QACV,QAAQ,IAAI,CAAC;QACb,SAAS;IACX;AACF;AAMO,MAAM,mBAAmB;IAC9B,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,OAAO,IAAI,CAAC,UAAU;QAC1D,OAAO,YAAY;IACrB,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/contexts/persona-context.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\n\r\n/**\r\n * Persona type matching get_user_personas() function return\r\n */\r\nexport interface Persona {\r\n  persona_type: 'ceo' | 'staff' | 'investor' | 'arranger' | 'introducer' | 'partner' | 'commercial_partner' | 'lawyer'\r\n  entity_id: string\r\n  entity_name: string\r\n  entity_logo_url: string | null\r\n  role_in_entity: string\r\n  is_primary: boolean\r\n  can_sign: boolean\r\n  can_execute_for_clients: boolean\r\n}\r\n\r\n/**\r\n * Persona context state\r\n */\r\ninterface PersonaContextState {\r\n  personas: Persona[]\r\n  activePersona: Persona | null\r\n  isLoading: boolean\r\n  error: string | null\r\n  switchPersona: (persona: Persona) => void\r\n  refreshPersonas: () => Promise<void>\r\n  // Helper checks\r\n  isCEO: boolean\r\n  isStaff: boolean\r\n  isInvestor: boolean\r\n  isPartner: boolean\r\n  isLawyer: boolean\r\n  isCommercialPartner: boolean\r\n  isIntroducer: boolean\r\n  isArranger: boolean\r\n  hasAnyPersona: boolean\r\n  hasMultiplePersonas: boolean\r\n}\r\n\r\nconst PersonaContext = createContext<PersonaContextState | undefined>(undefined)\r\n\r\nconst ACTIVE_PERSONA_KEY = 'verso_active_persona'\r\nconst ACTIVE_PERSONA_TYPE_COOKIE = 'verso_active_persona_type'\r\n\r\n/**\r\n * Set a cookie that the server can read to determine active persona type\r\n */\r\nfunction setPersonaCookie(personaType: string) {\r\n  // Set cookie with 1 year expiry, accessible to server\r\n  document.cookie = `${ACTIVE_PERSONA_TYPE_COOKIE}=${personaType}; path=/; max-age=31536000; SameSite=Lax`\r\n}\r\n\r\ninterface PersonaProviderProps {\r\n  children: ReactNode\r\n  initialPersonas?: Persona[]\r\n}\r\n\r\nexport function PersonaProvider({ children, initialPersonas = [] }: PersonaProviderProps) {\r\n  const router = useRouter()\r\n  const [personas, setPersonas] = useState<Persona[]>(initialPersonas)\r\n  const [activePersona, setActivePersona] = useState<Persona | null>(null)\r\n  const [isLoading, setIsLoading] = useState(!initialPersonas.length)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // Load personas from database\r\n  const refreshPersonas = useCallback(async () => {\r\n    setIsLoading(true)\r\n    setError(null)\r\n\r\n    try {\r\n      const supabase = createClient()\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n\r\n      if (!user) {\r\n        setPersonas([])\r\n        setActivePersona(null)\r\n        return\r\n      }\r\n\r\n      const { data, error: rpcError } = await supabase.rpc('get_user_personas', {\r\n        p_user_id: user.id\r\n      })\r\n\r\n      if (rpcError) {\r\n        console.error('[persona-context] Error fetching personas:', rpcError)\r\n        setError(rpcError.message)\r\n        return\r\n      }\r\n\r\n      const fetchedPersonas = (data || []) as Persona[]\r\n      setPersonas(fetchedPersonas)\r\n\r\n      // Restore active persona from localStorage or pick primary/first\r\n      const savedPersonaId = localStorage.getItem(ACTIVE_PERSONA_KEY)\r\n      let selectedPersona: Persona | null = null\r\n\r\n      if (savedPersonaId) {\r\n        selectedPersona = fetchedPersonas.find(p => p.entity_id === savedPersonaId) || null\r\n      }\r\n\r\n      if (!selectedPersona) {\r\n        // Priority order for default persona selection:\r\n        // 1. CEO (highest - Verso Capital management)\r\n        // 2. Staff (ops, rm)\r\n        // 3. Business personas (arranger, introducer, partner, commercial_partner)\r\n        // 4. Investor (lowest priority since they're often dual-persona with business roles)\r\n        const personaPriority: Record<string, number> = {\r\n          'ceo': 1,      // CEO is highest priority\r\n          'staff': 2,\r\n          'arranger': 3,\r\n          'introducer': 4,\r\n          'partner': 5,\r\n          'commercial_partner': 6,\r\n          'lawyer': 7,\r\n          'investor': 8, // Investor is lowest priority for dual-persona users\r\n        }\r\n\r\n        // ALWAYS apply priority order to select highest-priority persona\r\n        // This ensures CEO users always default to CEO view\r\n        if (fetchedPersonas.length > 0) {\r\n          selectedPersona = fetchedPersonas.reduce((best, current) => {\r\n            const bestPriority = personaPriority[best.persona_type] ?? 99\r\n            const currentPriority = personaPriority[current.persona_type] ?? 99\r\n            return currentPriority < bestPriority ? current : best\r\n          })\r\n        }\r\n      }\r\n\r\n      setActivePersona(selectedPersona)\r\n      // Set cookie for server-side persona detection on initial load\r\n      if (selectedPersona) {\r\n        // Check if the current cookie is stale (from a different user/session)\r\n        const currentCookie = document.cookie\r\n          .split('; ')\r\n          .find(row => row.startsWith(ACTIVE_PERSONA_TYPE_COOKIE))\r\n          ?.split('=')[1]\r\n\r\n        const cookieWasStale = currentCookie && currentCookie !== selectedPersona.persona_type\r\n\r\n        setPersonaCookie(selectedPersona.persona_type)\r\n\r\n        // If cookie was stale, the server rendered the wrong dashboard\r\n        // Force a refresh to get the correct server-side render\r\n        if (cookieWasStale && window.location.pathname.includes('/dashboard')) {\r\n          window.location.reload()\r\n          return\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('[persona-context] Unexpected error:', err)\r\n      setError(err instanceof Error ? err.message : 'Failed to load personas')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  // Switch active persona\r\n  const switchPersona = useCallback((persona: Persona) => {\r\n    // Update React state immediately for instant UI feedback\r\n    setActivePersona(persona)\r\n    // Persist to localStorage for future sessions\r\n    localStorage.setItem(ACTIVE_PERSONA_KEY, persona.entity_id)\r\n    // Set cookie for server-side persona detection\r\n    setPersonaCookie(persona.persona_type)\r\n    // Use client-side navigation - MUCH faster than window.location.href\r\n    // router.push preserves React context and only re-renders necessary components\r\n    router.push('/versotech_main/dashboard')\r\n  }, [router])\r\n\r\n  // Load personas on mount if not provided\r\n  useEffect(() => {\r\n    if (!initialPersonas.length) {\r\n      refreshPersonas()\r\n    } else {\r\n      // Set active from initial personas\r\n      const savedPersonaId = localStorage.getItem(ACTIVE_PERSONA_KEY)\r\n      let selectedPersona = savedPersonaId\r\n        ? initialPersonas.find(p => p.entity_id === savedPersonaId)\r\n        : null\r\n\r\n      if (!selectedPersona) {\r\n        // Same priority order as refreshPersonas\r\n        const personaPriority: Record<string, number> = {\r\n          'ceo': 1,\r\n          'staff': 2,\r\n          'arranger': 3,\r\n          'introducer': 4,\r\n          'partner': 5,\r\n          'commercial_partner': 6,\r\n          'lawyer': 7,\r\n          'investor': 8,\r\n        }\r\n\r\n        // ALWAYS apply priority order to select highest-priority persona\r\n        // This ensures CEO users always default to CEO view\r\n        if (initialPersonas.length > 0) {\r\n          selectedPersona = initialPersonas.reduce((best, current) => {\r\n            const bestPriority = personaPriority[best.persona_type] ?? 99\r\n            const currentPriority = personaPriority[current.persona_type] ?? 99\r\n            return currentPriority < bestPriority ? current : best\r\n          })\r\n        }\r\n      }\r\n\r\n      setActivePersona(selectedPersona ?? null)\r\n      setIsLoading(false)\r\n    }\r\n  }, [initialPersonas, refreshPersonas])\r\n\r\n  // Derived state helpers\r\n  // CEO check: user has a 'ceo' persona (from ceo_users table)\r\n  const isCEO = personas.some(p => p.persona_type === 'ceo')\r\n\r\n  // Staff check: any staff persona\r\n  const isStaff = personas.some(p => p.persona_type === 'staff')\r\n\r\n  // Investor check: any investor persona\r\n  const isInvestor = personas.some(p => p.persona_type === 'investor')\r\n\r\n  // Partner check: any partner, introducer, commercial_partner, or arranger persona\r\n  const isPartner = personas.some(p =>\r\n    ['partner', 'introducer', 'commercial_partner', 'arranger'].includes(p.persona_type)\r\n  )\r\n\r\n  // Lawyer check: any lawyer persona\r\n  const isLawyer = personas.some(p => p.persona_type === 'lawyer')\r\n\r\n  // Commercial Partner check: any commercial_partner persona\r\n  const isCommercialPartner = personas.some(p => p.persona_type === 'commercial_partner')\r\n\r\n  // Introducer check: any introducer persona\r\n  const isIntroducer = personas.some(p => p.persona_type === 'introducer')\r\n\r\n  // Arranger check: any arranger persona\r\n  const isArranger = personas.some(p => p.persona_type === 'arranger')\r\n\r\n  // Has any persona (used for deal access - anyone with a persona can potentially view deals)\r\n  const hasAnyPersona = personas.length > 0\r\n\r\n  // Multiple personas check\r\n  const hasMultiplePersonas = personas.length > 1\r\n\r\n  const value: PersonaContextState = {\r\n    personas,\r\n    activePersona,\r\n    isLoading,\r\n    error,\r\n    switchPersona,\r\n    refreshPersonas,\r\n    isCEO,\r\n    isStaff,\r\n    isInvestor,\r\n    isPartner,\r\n    isLawyer,\r\n    isCommercialPartner,\r\n    isIntroducer,\r\n    isArranger,\r\n    hasAnyPersona,\r\n    hasMultiplePersonas,\r\n  }\r\n\r\n  return (\r\n    <PersonaContext.Provider value={value}>\r\n      {children}\r\n    </PersonaContext.Provider>\r\n  )\r\n}\r\n\r\n/**\r\n * Hook to access persona context\r\n */\r\nexport function usePersona() {\r\n  const context = useContext(PersonaContext)\r\n\r\n  if (context === undefined) {\r\n    throw new Error('usePersona must be used within a PersonaProvider')\r\n  }\r\n\r\n  return context\r\n}\r\n\r\n/**\r\n * Get navigation items for a persona\r\n */\r\nexport function getNavItemsForPersona(persona: Persona): { href: string; label: string; icon?: string }[] {\r\n  const baseItems: Record<string, { href: string; label: string; icon?: string }[]> = {\r\n    // CEO persona - full access to Verso Capital management\r\n    // Note: CEO Profile is accessed via user menu (Profile Settings), not sidebar\r\n    ceo: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/deals', label: 'Deals' },\r\n      { href: '/versotech_main/subscriptions', label: 'Subscriptions' },\r\n      { href: '/versotech_main/investors', label: 'Investors' },\r\n      { href: '/versotech_main/documents', label: 'Documents' },\r\n      { href: '/versotech_main/messages', label: 'Messages' },\r\n      { href: '/versotech_main/users', label: 'Users' },\r\n      { href: '/versotech_main/kyc-review', label: 'KYC Review' },\r\n      { href: '/versotech_main/fees', label: 'Fees' },\r\n      { href: '/versotech_main/audit', label: 'Audit' },\r\n    ],\r\n    staff: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/deals', label: 'Deals' },\r\n      { href: '/versotech_main/subscriptions', label: 'Subscriptions' },\r\n      { href: '/versotech_main/investors', label: 'Investors' },\r\n      { href: '/versotech_main/documents', label: 'Documents' },\r\n      { href: '/versotech_main/messages', label: 'Messages' },\r\n    ],\r\n    investor: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/opportunities', label: 'Opportunities' },\r\n      { href: '/versotech_main/portfolio', label: 'Portfolio' },\r\n      { href: '/versotech_main/documents', label: 'Documents' },\r\n      { href: '/versotech_main/messages', label: 'Messages' },\r\n    ],\r\n    arranger: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/my-mandates', label: 'My Mandates' },\r\n      { href: '/versotech_main/my-partners', label: 'My Partners' },\r\n      { href: '/versotech_main/my-introducers', label: 'My Introducers' },\r\n      { href: '/versotech_main/my-commercial-partners', label: 'My Commercial Partners' },\r\n      { href: '/versotech_main/my-lawyers', label: 'My Lawyers' },\r\n    ],\r\n    introducer: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/introductions', label: 'Introductions' },\r\n      { href: '/versotech_main/introducer-agreements', label: 'Agreements' },\r\n    ],\r\n    partner: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/partner-transactions', label: 'Transactions' },\r\n      { href: '/versotech_main/shared-transactions', label: 'Shared Deals' },\r\n    ],\r\n    commercial_partner: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/client-transactions', label: 'Client Transactions' },\r\n      { href: '/versotech_main/placement-agreements', label: 'Agreements' },\r\n    ],\r\n    lawyer: [\r\n      { href: '/versotech_main/dashboard', label: 'Dashboard' },\r\n      { href: '/versotech_main/assigned-deals', label: 'Assigned Deals' },\r\n      { href: '/versotech_main/escrow', label: 'Escrow' },\r\n      { href: '/versotech_main/subscription-packs', label: 'Subscription Packs' },\r\n    ],\r\n  }\r\n\r\n  return [...(baseItems[persona.persona_type] || [])]\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n/**\n * Format file size in bytes to human-readable format\n * @param bytes - File size in bytes\n * @returns Formatted file size string (e.g., \"1.5 MB\")\n */\nexport function formatFileSize(bytes?: number): string {\n  if (!bytes || bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return `${(bytes / Math.pow(k, i)).toFixed(2)} ${sizes[i]}`\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,gMAAO,EAAC,IAAA,uKAAI,EAAC;AACtB;AAOO,SAAS,eAAe,KAAc;IAC3C,IAAI,CAAC,SAAS,UAAU,GAAG,OAAO;IAElC,MAAM,IAAI;IACV,MAAM,QAAQ;QAAC;QAAS;QAAM;QAAM;QAAM;KAAK;IAC/C,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,SAAS,KAAK,GAAG,CAAC;IAEhD,OAAO,GAAG,CAAC,QAAQ,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE;AAC7D"}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80 backdrop-blur-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background border-border data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] max-h-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 overflow-hidden rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg backdrop-blur-xl\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"text-foreground hover:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-blue-400/20 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold text-foreground\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,oNAAC,oMAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,oNAAC,uMAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,oNAAC,sMAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,oNAAC,qMAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,oNAAC,uMAAuB;QACtB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,2KACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,oNAAC;QAAa,aAAU;;0BACtB,oNAAC;;;;;0BACD,oNAAC,uMAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,mJAAE,EACX,sbACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,oNAAC,qMAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,oNAAC,mOAAK;;;;;0CACN,oNAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,oNAAC,qMAAqB;QACpB,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,sDAAsD;QACnE,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,oNAAC,2MAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/command.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { SearchIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\"\n\nfunction Command({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive>) {\n  return (\n    <CommandPrimitive\n      data-slot=\"command\"\n      className={cn(\n        \"bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandDialog({\n  title = \"Command Palette\",\n  description = \"Search for a command to run...\",\n  children,\n  className,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof Dialog> & {\n  title?: string\n  description?: string\n  className?: string\n  showCloseButton?: boolean\n}) {\n  return (\n    <Dialog {...props}>\n      <DialogHeader className=\"sr-only\">\n        <DialogTitle>{title}</DialogTitle>\n        <DialogDescription>{description}</DialogDescription>\n      </DialogHeader>\n      <DialogContent\n        className={cn(\"overflow-hidden p-0\", className)}\n        showCloseButton={showCloseButton}\n      >\n        <Command className=\"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nfunction CommandInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Input>) {\n  return (\n    <div\n      data-slot=\"command-input-wrapper\"\n      className=\"flex h-11 md:h-9 items-center gap-2 border-b px-3\"\n    >\n      <SearchIcon className=\"size-4 shrink-0 opacity-50\" />\n      <CommandPrimitive.Input\n        data-slot=\"command-input\"\n        className={cn(\n          \"placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction CommandList({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.List>) {\n  return (\n    <CommandPrimitive.List\n      data-slot=\"command-list\"\n      className={cn(\n        \"max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandEmpty({\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Empty>) {\n  return (\n    <CommandPrimitive.Empty\n      data-slot=\"command-empty\"\n      className=\"py-6 text-center text-sm\"\n      {...props}\n    />\n  )\n}\n\nfunction CommandGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Group>) {\n  return (\n    <CommandPrimitive.Group\n      data-slot=\"command-group\"\n      className={cn(\n        \"text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Separator>) {\n  return (\n    <CommandPrimitive.Separator\n      data-slot=\"command-separator\"\n      className={cn(\"bg-border -mx-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CommandItem({\n  className,\n  ...props\n}: React.ComponentProps<typeof CommandPrimitive.Item>) {\n  return (\n    <CommandPrimitive.Item\n      data-slot=\"command-item\"\n      className={cn(\n        \"data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-2.5 md:py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CommandShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"command-shortcut\"\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AACA;AAPA;;;;;;AAeA,SAAS,QAAQ,EACf,SAAS,EACT,GAAG,OAC2C;IAC9C,qBACE,oNAAC,2KAAgB;QACf,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS;AAgBT,SAAS,cAAc,EACrB,QAAQ,iBAAiB,EACzB,cAAc,gCAAgC,EAC9C,QAAQ,EACR,SAAS,EACT,kBAAkB,IAAI,EACtB,GAAG,OAMJ;IACC,qBACE,oNAAC,sKAAM;QAAE,GAAG,KAAK;;0BACf,oNAAC,4KAAY;gBAAC,WAAU;;kCACtB,oNAAC,2KAAW;kCAAE;;;;;;kCACd,oNAAC,iLAAiB;kCAAE;;;;;;;;;;;;0BAEtB,oNAAC,6KAAa;gBACZ,WAAW,IAAA,mJAAE,EAAC,uBAAuB;gBACrC,iBAAiB;0BAEjB,cAAA,oNAAC;oBAAQ,WAAU;8BAChB;;;;;;;;;;;;;;;;;AAKX;MA7BS;AA+BT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,oNAAC;QACC,aAAU;QACV,WAAU;;0BAEV,oNAAC,kPAAU;gBAAC,WAAU;;;;;;0BACtB,oNAAC,2KAAgB,CAAC,KAAK;gBACrB,aAAU;gBACV,WAAW,IAAA,mJAAE,EACX,4JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;MApBS;AAsBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,oNAAC,2KAAgB,CAAC,IAAI;QACpB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBACE,oNAAC,2KAAgB,CAAC,KAAK;QACrB,aAAU;QACV,WAAU;QACT,GAAG,KAAK;;;;;;AAGf;MAVS;AAYT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,oNAAC,2KAAgB,CAAC,KAAK;QACrB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,oNAAC,2KAAgB,CAAC,SAAS;QACzB,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,wBAAwB;QACrC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,oNAAC,2KAAgB,CAAC,IAAI;QACpB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,iZACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OAC0B;IAC7B,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 957, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/command-palette/command-palette.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter, usePathname } from 'next/navigation'\r\nimport {\r\n  CommandDialog,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n  CommandSeparator,\r\n  CommandShortcut\r\n} from '@/components/ui/command'\r\nimport {\r\n  LayoutDashboard,\r\n  Users,\r\n  FileText,\r\n  Building2,\r\n  Activity,\r\n  Calendar,\r\n  MessageSquare,\r\n  UserCheck,\r\n  Settings,\r\n  Plus,\r\n  Search,\r\n  TrendingUp,\r\n  Workflow,\r\n  ClipboardList,\r\n  HandHeart,\r\n  Calculator,\r\n  CreditCard,\r\n  Package,\r\n  Shield,\r\n  Database\r\n} from 'lucide-react'\r\n\r\ninterface CommandPaletteProps {\r\n  onQuickAddSubscription?: () => void\r\n  brand?: 'versoholdings' | 'versotech'\r\n}\r\n\r\ninterface CommandAction {\r\n  id: string\r\n  label: string\r\n  description?: string\r\n  icon?: React.ComponentType<{ className?: string }>\r\n  shortcut?: string\r\n  keywords?: string[]\r\n  action: () => void\r\n  group: 'navigation' | 'actions' | 'recent'\r\n}\r\n\r\nexport function CommandPalette({ onQuickAddSubscription, brand = 'versotech' }: CommandPaletteProps) {\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n  const [open, setOpen] = useState(false)\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  // Wait for client-side hydration to complete before rendering Radix UI components\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // Detect platform for keyboard shortcuts - only after mount to avoid hydration mismatch\r\n  const isMac = mounted && typeof navigator !== 'undefined' && navigator.platform.toUpperCase().indexOf('MAC') >= 0\r\n  const modKey = isMac ? '⌘' : 'Ctrl'\r\n\r\n  // Define commands based on brand\r\n  const staffCommands: CommandAction[] = [\r\n    // Navigation - Staff Portal\r\n    {\r\n      id: 'nav-dashboard',\r\n      label: 'Dashboard',\r\n      description: 'Operations overview',\r\n      icon: LayoutDashboard,\r\n      keywords: ['home', 'overview', 'metrics'],\r\n      action: () => router.push('/versotech_main'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-investors',\r\n      label: 'Investors',\r\n      description: 'Manage investor accounts',\r\n      icon: Users,\r\n      keywords: ['clients', 'kyc', 'accounts'],\r\n      action: () => router.push('/versotech_main/investors'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-subscriptions',\r\n      label: 'Subscriptions',\r\n      description: 'Manage subscriptions',\r\n      icon: FileText,\r\n      keywords: ['commitments', 'deals'],\r\n      action: () => router.push('/versotech_main/subscriptions'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-entities',\r\n      label: 'Vehicles',\r\n      description: 'Manage investment vehicles',\r\n      icon: Building2,\r\n      keywords: ['vehicles', 'funds', 'spvs', 'entities'],\r\n      action: () => router.push('/versotech_main/entities'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-deals',\r\n      label: 'Deals',\r\n      description: 'Manage deal inventory',\r\n      icon: Activity,\r\n      keywords: ['opportunities', 'investments'],\r\n      action: () => router.push('/versotech_main/deals'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-approvals',\r\n      label: 'Approvals',\r\n      description: 'Review and approve',\r\n      icon: UserCheck,\r\n      keywords: ['review', 'approve', 'pending'],\r\n      action: () => router.push('/versotech_main/approvals'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-messages',\r\n      label: 'Messages',\r\n      description: 'Investor communication',\r\n      icon: MessageSquare,\r\n      keywords: ['chat', 'inbox', 'communication'],\r\n      action: () => router.push('/versotech_main/messages'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-calendar',\r\n      label: 'Calendar',\r\n      description: 'Deadlines and schedule',\r\n      icon: Calendar,\r\n      keywords: ['schedule', 'deadlines', 'events'],\r\n      action: () => router.push('/versotech_main/calendar'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-processes',\r\n      label: 'Processes',\r\n      description: 'Workflow automation',\r\n      icon: Workflow,\r\n      keywords: ['automation', 'workflows'],\r\n      action: () => router.push('/versotech_main/processes'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-requests',\r\n      label: 'Requests',\r\n      description: 'Investor requests',\r\n      icon: ClipboardList,\r\n      keywords: ['tickets', 'support'],\r\n      action: () => router.push('/versotech_main/requests'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-introducers',\r\n      label: 'Introducers',\r\n      description: 'Manage introducers',\r\n      icon: HandHeart,\r\n      keywords: ['referrals', 'partners'],\r\n      action: () => router.push('/versotech_main/introducers'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-fees',\r\n      label: 'Fees',\r\n      description: 'Fee management',\r\n      icon: Calculator,\r\n      keywords: ['billing', 'charges'],\r\n      action: () => router.push('/versotech_main/fees'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-reconciliation',\r\n      label: 'Reconciliation',\r\n      description: 'Bank reconciliation',\r\n      icon: CreditCard,\r\n      keywords: ['payments', 'banking'],\r\n      action: () => router.push('/versotech_main/reconciliation'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-audit',\r\n      label: 'Audit',\r\n      description: 'Audit logs',\r\n      icon: Shield,\r\n      keywords: ['compliance', 'logs', 'security'],\r\n      action: () => router.push('/versotech_main/audit'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-admin',\r\n      label: 'Admin',\r\n      description: 'System administration',\r\n      icon: Database,\r\n      keywords: ['settings', 'config'],\r\n      action: () => router.push('/versotech_main/admin'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-settings',\r\n      label: 'Settings',\r\n      description: 'Account settings',\r\n      icon: Settings,\r\n      keywords: ['preferences', 'profile'],\r\n      action: () => router.push('/versotech_main/admin'),\r\n      group: 'navigation'\r\n    },\r\n\r\n    // Quick Actions\r\n    {\r\n      id: 'action-add-subscription',\r\n      label: 'Add Subscription',\r\n      description: 'Quick add a new subscription',\r\n      icon: Plus,\r\n      shortcut: `${modKey}⇧S`,\r\n      keywords: ['create', 'new', 'subscription'],\r\n      action: () => {\r\n        setOpen(false)\r\n        onQuickAddSubscription?.()\r\n      },\r\n      group: 'actions'\r\n    },\r\n    {\r\n      id: 'action-search-investors',\r\n      label: 'Search Investors',\r\n      description: 'Find an investor',\r\n      icon: Search,\r\n      keywords: ['find', 'investor', 'search'],\r\n      action: () => router.push('/versotech_main/investors'),\r\n      group: 'actions'\r\n    }\r\n  ]\r\n\r\n  const investorCommands: CommandAction[] = [\r\n    // Navigation - Investor Portal\r\n    {\r\n      id: 'nav-dashboard',\r\n      label: 'Dashboard',\r\n      description: 'Portfolio overview',\r\n      icon: LayoutDashboard,\r\n      keywords: ['home', 'overview'],\r\n      action: () => router.push('/versotech_main/dashboard'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-deals',\r\n      label: 'Active Deals',\r\n      description: 'Investment opportunities',\r\n      icon: Activity,\r\n      keywords: ['investments', 'opportunities'],\r\n      action: () => router.push('/versotech_main/opportunities'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-holdings',\r\n      label: 'Portfolio',\r\n      description: 'My investments',\r\n      icon: TrendingUp,\r\n      keywords: ['investments', 'positions'],\r\n      action: () => router.push('/versotech_main/portfolio'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-calendar',\r\n      label: 'Calendar',\r\n      description: 'Deadlines and events',\r\n      icon: Calendar,\r\n      keywords: ['schedule', 'deadlines'],\r\n      action: () => router.push('/versotech_main/calendar'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-messages',\r\n      label: 'Messages',\r\n      description: 'Communication',\r\n      icon: MessageSquare,\r\n      keywords: ['chat', 'inbox'],\r\n      action: () => router.push('/versotech_main/messages'),\r\n      group: 'navigation'\r\n    },\r\n    {\r\n      id: 'nav-settings',\r\n      label: 'Settings',\r\n      description: 'Account settings',\r\n      icon: Settings,\r\n      keywords: ['preferences', 'profile'],\r\n      action: () => router.push('/versotech_main/profile'),\r\n      group: 'navigation'\r\n    }\r\n  ]\r\n\r\n  const commands = brand === 'versotech' ? staffCommands : investorCommands\r\n\r\n  // Toggle command palette with Cmd/Ctrl+K\r\n  useEffect(() => {\r\n    const down = (e: KeyboardEvent) => {\r\n      if (e.key === 'k' && (e.metaKey || e.ctrlKey)) {\r\n        e.preventDefault()\r\n        setOpen((open) => !open)\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', down)\r\n    return () => document.removeEventListener('keydown', down)\r\n  }, [])\r\n\r\n  // Group commands\r\n  const navigationCommands = commands.filter(c => c.group === 'navigation')\r\n  const actionCommands = commands.filter(c => c.group === 'actions')\r\n\r\n  // Don't render until mounted to prevent hydration mismatch with Radix UI IDs\r\n  if (!mounted) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <CommandDialog open={open} onOpenChange={setOpen}>\r\n      <CommandInput placeholder=\"Type a command or search...\" />\r\n      <CommandList>\r\n        <CommandEmpty>No results found.</CommandEmpty>\r\n\r\n        {actionCommands.length > 0 && (\r\n          <>\r\n            <CommandGroup heading=\"Quick Actions\">\r\n              {actionCommands.map((command) => {\r\n                const Icon = command.icon\r\n                return (\r\n                  <CommandItem\r\n                    key={command.id}\r\n                    value={`${command.label} ${command.description} ${command.keywords?.join(' ')}`}\r\n                    onSelect={() => {\r\n                      command.action()\r\n                      setOpen(false)\r\n                    }}\r\n                  >\r\n                    {Icon && <Icon className=\"mr-2 h-4 w-4\" />}\r\n                    <div className=\"flex-1\">\r\n                      <div>{command.label}</div>\r\n                      {command.description && (\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          {command.description}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    {command.shortcut && (\r\n                      <CommandShortcut>{command.shortcut}</CommandShortcut>\r\n                    )}\r\n                  </CommandItem>\r\n                )\r\n              })}\r\n            </CommandGroup>\r\n            <CommandSeparator />\r\n          </>\r\n        )}\r\n\r\n        <CommandGroup heading=\"Navigation\">\r\n          {navigationCommands.map((command) => {\r\n            const Icon = command.icon\r\n            const isActive = pathname === command.action.toString().match(/push\\('(.+?)'\\)/)?.[1]\r\n            return (\r\n              <CommandItem\r\n                key={command.id}\r\n                value={`${command.label} ${command.description} ${command.keywords?.join(' ')}`}\r\n                onSelect={() => {\r\n                  command.action()\r\n                  setOpen(false)\r\n                }}\r\n              >\r\n                {Icon && <Icon className=\"mr-2 h-4 w-4\" />}\r\n                <div className=\"flex-1\">\r\n                  <div className={isActive ? 'font-semibold' : ''}>\r\n                    {command.label}\r\n                  </div>\r\n                  {command.description && (\r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      {command.description}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                {command.shortcut && (\r\n                  <CommandShortcut>{command.shortcut}</CommandShortcut>\r\n                )}\r\n              </CommandItem>\r\n            )\r\n          })}\r\n        </CommandGroup>\r\n      </CommandList>\r\n    </CommandDialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1525, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 hover:shadow-lg hover:scale-[1.02] transition-all duration-200 shadow-md\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border border-input bg-background text-foreground shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"text-foreground hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // Mobile-first touch targets (≥44px on mobile per Apple/Google guidelines)\n        default: \"h-11 md:h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-10 md:h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-12 md:h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-11 md:size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,iMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,2EAA2E;YAC3E,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,kMAAI,GAAG;IAE9B,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 1589, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground bg-background border-input h-11 md:h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base text-foreground shadow-sm transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-blue-500 focus-visible:ring-blue-500/20 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,ocACA,yFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 1620, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,oNAAC,mMAAmB;QAClB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,uOACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 1653, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      // Mobile-first touch targets (≥44px on mobile)\n      \"flex h-11 md:h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50 text-foreground\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-[100] max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      // Mobile-first touch targets (larger padding on mobile)\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-3 md:py-1.5 pl-8 pr-2 text-sm text-popover-foreground outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4 text-foreground\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,oMAAoB;AAEnC,MAAM,cAAc,qMAAqB;AAEzC,MAAM,cAAc,qMAAqB;AAEzC,MAAM,8BAAgB,kMAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,oNAAC,uMAAuB;QACtB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,+CAA+C;QAC/C,kTACA;QAED,GAAG,KAAK;;YAER;0BACD,oNAAC,oMAAoB;gBAAC,OAAO;0BAC3B,cAAA,oNAAC,6PAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,uMAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,kMAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,8MAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,oNAAC,uPAAS;YAAC,WAAU;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,8MAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,kMAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,gNAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,oNAAC,6PAAW;YAAC,WAAU;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,gNAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,kMAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,oNAAC,sMAAsB;kBACrB,cAAA,oNAAC,uMAAuB;YACtB,KAAK;YACL,WAAW,IAAA,mJAAE,EACX,wdACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,oNAAC;;;;;8BACD,oNAAC,wMAAwB;oBACvB,WAAW,IAAA,mJAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,oNAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,uMAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,kMAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,oNAAC,oMAAoB;QACnB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,wDAAwD;QACxD,6PACA;QAED,GAAG,KAAK;;0BAET,oNAAC;gBAAK,WAAU;0BACd,cAAA,oNAAC,6MAA6B;8BAC5B,cAAA,oNAAC,uOAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,oNAAC,wMAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,oMAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,kMAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,yMAAyB;QACxB,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,yMAAyB,CAAC,WAAW"}},
    {"offset": {"line": 1878, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/subscriptions/quick-add-subscription-modal.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { Loader2, Plus, AlertCircle } from 'lucide-react'\nimport { toast } from 'sonner'\nimport { createClient } from '@/lib/supabase/client'\n\ninterface QuickAddSubscriptionModalProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  defaultInvestorId?: string\n  defaultVehicleId?: string\n}\n\ninterface Investor {\n  id: string\n  legal_name: string\n  email?: string\n}\n\ninterface Vehicle {\n  id: string\n  name: string\n  type: string\n}\n\nexport function QuickAddSubscriptionModal({\n  open,\n  onOpenChange,\n  defaultInvestorId,\n  defaultVehicleId\n}: QuickAddSubscriptionModalProps) {\n  const router = useRouter()\n  const supabase = createClient()\n\n  // Form state\n  const [investorId, setInvestorId] = useState(defaultInvestorId || '')\n  const [vehicleId, setVehicleId] = useState(defaultVehicleId || '')\n  const [commitment, setCommitment] = useState('')\n  const [currency, setCurrency] = useState('USD')\n  const [status, setStatus] = useState('draft')\n\n  // Data loading state\n  const [investors, setInvestors] = useState<Investor[]>([])\n  const [vehicles, setVehicles] = useState<Vehicle[]>([])\n  const [loadingData, setLoadingData] = useState(true)\n  const [submitting, setSubmitting] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Search state\n  const [investorSearch, setInvestorSearch] = useState('')\n  const [vehicleSearch, setVehicleSearch] = useState('')\n\n  // Load investors and vehicles on mount\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoadingData(true)\n\n        // Load investors\n        const { data: investorsData, error: investorsError } = await supabase\n          .from('investors')\n          .select('id, legal_name, email')\n          .eq('status', 'active')\n          .order('legal_name')\n          .limit(1000)\n\n        if (investorsError) throw investorsError\n        setInvestors(investorsData || [])\n\n        // Load vehicles\n        const { data: vehiclesData, error: vehiclesError } = await supabase\n          .from('vehicles')\n          .select('id, name, type')\n          .eq('status', 'active')\n          .order('name')\n\n        if (vehiclesError) throw vehiclesError\n        setVehicles(vehiclesData || [])\n      } catch (err) {\n        console.error('Failed to load data:', err)\n        setError('Failed to load investors and vehicles')\n      } finally {\n        setLoadingData(false)\n      }\n    }\n\n    if (open) {\n      loadData()\n    }\n  }, [open, supabase])\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (open) {\n      setInvestorId(defaultInvestorId || '')\n      setVehicleId(defaultVehicleId || '')\n      setCommitment('')\n      setCurrency('USD')\n      setStatus('draft')\n      setError(null)\n      setInvestorSearch('')\n      setVehicleSearch('')\n    }\n  }, [open, defaultInvestorId, defaultVehicleId])\n\n  // Filter investors based on search\n  const filteredInvestors = investors.filter(investor =>\n    investor.legal_name.toLowerCase().includes(investorSearch.toLowerCase()) ||\n    investor.email?.toLowerCase().includes(investorSearch.toLowerCase())\n  )\n\n  // Filter vehicles based on search\n  const filteredVehicles = vehicles.filter(vehicle =>\n    vehicle.name.toLowerCase().includes(vehicleSearch.toLowerCase())\n  )\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(null)\n\n    // Validation\n    if (!investorId) {\n      setError('Please select an investor')\n      return\n    }\n    if (!vehicleId) {\n      setError('Please select a vehicle')\n      return\n    }\n    if (!commitment || parseFloat(commitment) <= 0) {\n      setError('Please enter a valid commitment amount')\n      return\n    }\n\n    try {\n      setSubmitting(true)\n\n      // Create subscription\n      const { data, error: insertError } = await supabase\n        .from('subscriptions')\n        .insert({\n          investor_id: investorId,\n          vehicle_id: vehicleId,\n          commitment: parseFloat(commitment),\n          currency,\n          status,\n          subscription_date: new Date().toISOString(),\n          created_at: new Date().toISOString()\n        })\n        .select()\n        .single()\n\n      if (insertError) throw insertError\n\n      toast.success('Subscription created successfully', {\n        description: `Created subscription for ${investors.find(i => i.id === investorId)?.legal_name}`,\n        action: {\n          label: 'View',\n          onClick: () => router.push(`/versotech_main/subscriptions`)\n        }\n      })\n\n      // Close modal and refresh\n      onOpenChange(false)\n      router.refresh()\n    } catch (err) {\n      console.error('Failed to create subscription:', err)\n      setError(err instanceof Error ? err.message : 'Failed to create subscription')\n      toast.error('Failed to create subscription')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[600px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Plus className=\"h-5 w-5\" />\n            Quick Add Subscription\n          </DialogTitle>\n          <DialogDescription>\n            Create a new subscription quickly. Press Cmd/Ctrl+Shift+S to open this dialog.\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {error && (\n            <div className=\"flex items-center gap-2 p-3 text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded-lg\">\n              <AlertCircle className=\"h-4 w-4\" />\n              {error}\n            </div>\n          )}\n\n          {loadingData ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n            </div>\n          ) : (\n            <>\n              {/* Investor Selection */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"investor\">Investor *</Label>\n                <Select value={investorId} onValueChange={setInvestorId}>\n                  <SelectTrigger id=\"investor\">\n                    <SelectValue placeholder=\"Select investor...\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <div className=\"p-2\">\n                      <Input\n                        placeholder=\"Search investors...\"\n                        value={investorSearch}\n                        onChange={(e) => setInvestorSearch(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                    {filteredInvestors.length === 0 ? (\n                      <div className=\"py-6 text-center text-sm text-muted-foreground\">\n                        No investors found\n                      </div>\n                    ) : (\n                      filteredInvestors.map((investor) => (\n                        <SelectItem key={investor.id} value={investor.id}>\n                          {investor.legal_name}\n                          {investor.email && (\n                            <span className=\"text-xs text-muted-foreground ml-2\">\n                              {investor.email}\n                            </span>\n                          )}\n                        </SelectItem>\n                      ))\n                    )}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Vehicle Selection */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"vehicle\">Vehicle *</Label>\n                <Select value={vehicleId} onValueChange={setVehicleId}>\n                  <SelectTrigger id=\"vehicle\">\n                    <SelectValue placeholder=\"Select vehicle...\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <div className=\"p-2\">\n                      <Input\n                        placeholder=\"Search vehicles...\"\n                        value={vehicleSearch}\n                        onChange={(e) => setVehicleSearch(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                    {filteredVehicles.length === 0 ? (\n                      <div className=\"py-6 text-center text-sm text-muted-foreground\">\n                        No vehicles found\n                      </div>\n                    ) : (\n                      filteredVehicles.map((vehicle) => (\n                        <SelectItem key={vehicle.id} value={vehicle.id}>\n                          {vehicle.name}\n                          <span className=\"text-xs text-muted-foreground ml-2\">\n                            {vehicle.type}\n                          </span>\n                        </SelectItem>\n                      ))\n                    )}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Commitment Amount */}\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"col-span-2 space-y-2\">\n                  <Label htmlFor=\"commitment\">Commitment Amount *</Label>\n                  <Input\n                    id=\"commitment\"\n                    type=\"number\"\n                    placeholder=\"1000000\"\n                    value={commitment}\n                    onChange={(e) => setCommitment(e.target.value)}\n                    min=\"0\"\n                    step=\"0.01\"\n                    required\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"currency\">Currency</Label>\n                  <Select value={currency} onValueChange={setCurrency}>\n                    <SelectTrigger id=\"currency\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"USD\">USD</SelectItem>\n                      <SelectItem value=\"EUR\">EUR</SelectItem>\n                      <SelectItem value=\"GBP\">GBP</SelectItem>\n                      <SelectItem value=\"CHF\">CHF</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              {/* Status */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"status\">Initial Status</Label>\n                <Select value={status} onValueChange={setStatus}>\n                  <SelectTrigger id=\"status\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"draft\">Draft</SelectItem>\n                    <SelectItem value=\"pending\">Pending Review</SelectItem>\n                    <SelectItem value=\"active\">Active</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </>\n          )}\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={submitting}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={submitting || loadingData}>\n              {submitting ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Creating...\n                </>\n              ) : (\n                <>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Create Subscription\n                </>\n              )}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2559, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/hooks/use-keyboard-shortcuts.ts"],"sourcesContent":["'use client'\n\nimport { useEffect, useCallback } from 'react'\n\nexport interface KeyboardShortcut {\n  key: string\n  ctrlKey?: boolean\n  metaKey?: boolean\n  shiftKey?: boolean\n  altKey?: boolean\n  callback: (e: KeyboardEvent) => void\n  description?: string\n}\n\nexport function useKeyboardShortcut(\n  key: string,\n  callback: (e: KeyboardEvent) => void,\n  options: {\n    ctrl?: boolean\n    meta?: boolean\n    shift?: boolean\n    alt?: boolean\n    enabled?: boolean\n  } = {}\n) {\n  const { ctrl = false, meta = false, shift = false, alt = false, enabled = true } = options\n\n  useEffect(() => {\n    if (!enabled) return\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!e.key || !key) return\n      const isCorrectKey = e.key.toLowerCase() === key.toLowerCase()\n      const isCorrectCtrl = ctrl ? e.ctrlKey : !e.ctrlKey\n      const isCorrectMeta = meta ? e.metaKey : !e.metaKey\n      const isCorrectShift = shift ? e.shiftKey : !e.shiftKey\n      const isCorrectAlt = alt ? e.altKey : !e.altKey\n\n      // Allow either Ctrl or Meta (Cmd on Mac) if ctrl or meta is specified\n      const modifierMatch =\n        (ctrl || meta)\n          ? (e.ctrlKey || e.metaKey) && isCorrectShift && isCorrectAlt\n          : isCorrectCtrl && isCorrectMeta && isCorrectShift && isCorrectAlt\n\n      if (isCorrectKey && modifierMatch) {\n        e.preventDefault()\n        callback(e)\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [key, ctrl, meta, shift, alt, enabled, callback])\n}\n\nexport function useKeyboardShortcuts(shortcuts: KeyboardShortcut[], enabled = true) {\n  useEffect(() => {\n    if (!enabled) return\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!e.key) return\n      for (const shortcut of shortcuts) {\n        if (!shortcut.key) continue\n        const isCorrectKey = e.key.toLowerCase() === shortcut.key.toLowerCase()\n        const isCorrectCtrl = shortcut.ctrlKey ? e.ctrlKey : !shortcut.ctrlKey\n        const isCorrectMeta = shortcut.metaKey ? e.metaKey : !shortcut.metaKey\n        const isCorrectShift = shortcut.shiftKey ? e.shiftKey : !shortcut.shiftKey\n        const isCorrectAlt = shortcut.altKey ? e.altKey : !shortcut.altKey\n\n        // Allow either Ctrl or Meta (Cmd on Mac) if either is specified\n        const modifierMatch =\n          (shortcut.ctrlKey || shortcut.metaKey)\n            ? (e.ctrlKey || e.metaKey) && isCorrectShift && isCorrectAlt\n            : isCorrectCtrl && isCorrectMeta && isCorrectShift && isCorrectAlt\n\n        if (isCorrectKey && modifierMatch) {\n          e.preventDefault()\n          shortcut.callback(e)\n          break // Only execute first matching shortcut\n        }\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [shortcuts, enabled])\n}\n"],"names":[],"mappings":";;;;;;AAEA;;AAFA;;AAcO,SAAS,oBACd,GAAW,EACX,QAAoC,EACpC,UAMI,CAAC,CAAC;;IAEN,MAAM,EAAE,OAAO,KAAK,EAAE,OAAO,KAAK,EAAE,QAAQ,KAAK,EAAE,MAAM,KAAK,EAAE,UAAU,IAAI,EAAE,GAAG;IAEnF,IAAA,iMAAS;yCAAC;YACR,IAAI,CAAC,SAAS;YAEd,MAAM;+DAAgB,CAAC;oBACrB,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK;oBACpB,MAAM,eAAe,EAAE,GAAG,CAAC,WAAW,OAAO,IAAI,WAAW;oBAC5D,MAAM,gBAAgB,OAAO,EAAE,OAAO,GAAG,CAAC,EAAE,OAAO;oBACnD,MAAM,gBAAgB,OAAO,EAAE,OAAO,GAAG,CAAC,EAAE,OAAO;oBACnD,MAAM,iBAAiB,QAAQ,EAAE,QAAQ,GAAG,CAAC,EAAE,QAAQ;oBACvD,MAAM,eAAe,MAAM,EAAE,MAAM,GAAG,CAAC,EAAE,MAAM;oBAE/C,sEAAsE;oBACtE,MAAM,gBACJ,AAAC,QAAQ,OACL,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,kBAAkB,eAC9C,iBAAiB,iBAAiB,kBAAkB;oBAE1D,IAAI,gBAAgB,eAAe;wBACjC,EAAE,cAAc;wBAChB,SAAS;oBACX;gBACF;;YAEA,SAAS,gBAAgB,CAAC,WAAW;YACrC;iDAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;wCAAG;QAAC;QAAK;QAAM;QAAM;QAAO;QAAK;QAAS;KAAS;AACrD;GAvCgB;AAyCT,SAAS,qBAAqB,SAA6B,EAAE,UAAU,IAAI;;IAChF,IAAA,iMAAS;0CAAC;YACR,IAAI,CAAC,SAAS;YAEd,MAAM;gEAAgB,CAAC;oBACrB,IAAI,CAAC,EAAE,GAAG,EAAE;oBACZ,KAAK,MAAM,YAAY,UAAW;wBAChC,IAAI,CAAC,SAAS,GAAG,EAAE;wBACnB,MAAM,eAAe,EAAE,GAAG,CAAC,WAAW,OAAO,SAAS,GAAG,CAAC,WAAW;wBACrE,MAAM,gBAAgB,SAAS,OAAO,GAAG,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO;wBACtE,MAAM,gBAAgB,SAAS,OAAO,GAAG,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO;wBACtE,MAAM,iBAAiB,SAAS,QAAQ,GAAG,EAAE,QAAQ,GAAG,CAAC,SAAS,QAAQ;wBAC1E,MAAM,eAAe,SAAS,MAAM,GAAG,EAAE,MAAM,GAAG,CAAC,SAAS,MAAM;wBAElE,gEAAgE;wBAChE,MAAM,gBACJ,AAAC,SAAS,OAAO,IAAI,SAAS,OAAO,GACjC,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,kBAAkB,eAC9C,iBAAiB,iBAAiB,kBAAkB;wBAE1D,IAAI,gBAAgB,eAAe;4BACjC,EAAE,cAAc;4BAChB,SAAS,QAAQ,CAAC;4BAClB,OAAM,uCAAuC;wBAC/C;oBACF;gBACF;;YAEA,SAAS,gBAAgB,CAAC,WAAW;YACrC;kDAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;yCAAG;QAAC;QAAW;KAAQ;AACzB;IA/BgB"}},
    {"offset": {"line": 2650, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/layout/global-keyboard-shortcuts.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { CommandPalette } from '@/components/command-palette/command-palette'\nimport { QuickAddSubscriptionModal } from '@/components/subscriptions/quick-add-subscription-modal'\nimport { useKeyboardShortcut } from '@/hooks/use-keyboard-shortcuts'\n\ninterface GlobalKeyboardShortcutsProps {\n  brand: 'versoholdings' | 'versotech'\n  role: string\n}\n\nexport function GlobalKeyboardShortcuts({ brand, role }: GlobalKeyboardShortcutsProps) {\n  const [quickAddOpen, setQuickAddOpen] = useState(false)\n\n  // Only show keyboard shortcuts for staff users\n  const isStaff = ['staff_admin', 'staff_ops', 'staff_rm', 'ceo'].includes(role)\n\n  // Cmd/Ctrl+Shift+S to open Quick Add Subscription\n  useKeyboardShortcut(\n    's',\n    () => setQuickAddOpen(true),\n    {\n      meta: true, // Allows both Cmd and Ctrl\n      shift: true,\n      enabled: isStaff && brand === 'versotech'\n    }\n  )\n\n  // Only render staff features for staff users\n  if (!isStaff || brand !== 'versotech') {\n    return (\n      <CommandPalette\n        brand={brand}\n      />\n    )\n  }\n\n  return (\n    <>\n      {/* Command Palette (Cmd+K) */}\n      <CommandPalette\n        brand={brand}\n        onQuickAddSubscription={() => setQuickAddOpen(true)}\n      />\n\n      {/* Quick Add Subscription Modal (Cmd+Shift+S) */}\n      <QuickAddSubscriptionModal\n        open={quickAddOpen}\n        onOpenChange={setQuickAddOpen}\n      />\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAYO,SAAS,wBAAwB,EAAE,KAAK,EAAE,IAAI,EAAgC;;IACnF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gMAAQ,EAAC;IAEjD,+CAA+C;IAC/C,MAAM,UAAU;QAAC;QAAe;QAAa;QAAY;KAAM,CAAC,QAAQ,CAAC;IAEzE,kDAAkD;IAClD,IAAA,6LAAmB,EACjB;uDACA,IAAM,gBAAgB;sDACtB;QACE,MAAM;QACN,OAAO;QACP,SAAS,WAAW,UAAU;IAChC;IAGF,6CAA6C;IAC7C,IAAI,CAAC,WAAW,UAAU,aAAa;QACrC,qBACE,oNAAC,0MAAc;YACb,OAAO;;;;;;IAGb;IAEA,qBACE;;0BAEE,oNAAC,0MAAc;gBACb,OAAO;gBACP,wBAAwB,IAAM,gBAAgB;;;;;;0BAIhD,oNAAC,mOAAyB;gBACxB,MAAM;gBACN,cAAc;;;;;;;;AAItB;GAzCgB;;QAOd,6LAAmB;;;KAPL"}},
    {"offset": {"line": 2730, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/layout/persona-sidebar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useMemo, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport { usePathname, useRouter } from 'next/navigation'\r\nimport Image from 'next/image'\r\nimport { Button } from '@/components/ui/button'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { cn } from '@/lib/utils'\r\nimport { usePersona, Persona } from '@/contexts/persona-context'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport {\r\n  LayoutDashboard,\r\n  Building2,\r\n  FileText,\r\n  FileSignature,\r\n  MessageSquare,\r\n  CheckSquare,\r\n  TrendingUp,\r\n  Users,\r\n  Workflow,\r\n  ClipboardList,\r\n  Shield,\r\n  Database,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  LogOut,\r\n  HandHeart,\r\n  Calculator,\r\n  Activity,\r\n  Briefcase,\r\n  UserCheck,\r\n  Search,\r\n  Bell,\r\n  Calendar,\r\n  Lock,\r\n  Share2,\r\n  ArrowRightLeft,\r\n  UserPlus,\r\n  Scale,\r\n  PenTool\r\n} from 'lucide-react'\r\n\r\ninterface NavItem {\r\n  name: string\r\n  href: string\r\n  icon: React.ComponentType<{ className?: string }>\r\n  badge?: string | number\r\n  description?: string\r\n}\r\n\r\n// Navigation items for each persona type\r\nconst PERSONA_NAV_ITEMS: Record<string, NavItem[]> = {\r\n  // CEO persona - Verso Capital management (full access)\r\n  // Note: CEO Profile is accessed via user menu (Profile Settings), not sidebar\r\n  // Grouped by: Core → Deal Flow → People → Docs & Legal → Finance → Compliance → Operations → Admin\r\n  ceo: [\r\n    // Core (daily use)\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Messages', href: '/versotech_main/messages', icon: MessageSquare, description: 'Inbox' },\r\n    { name: 'Approvals', href: '/versotech_main/approvals', icon: UserCheck, description: 'Pending approvals' },\r\n    // Deal Flow\r\n    { name: 'Deals', href: '/versotech_main/deals', icon: Activity, description: 'Deal management' },\r\n    { name: 'Vehicles', href: '/versotech_main/entities', icon: Building2, description: 'Investment vehicles' },\r\n    { name: 'Subscriptions', href: '/versotech_main/subscriptions', icon: FileText, description: 'Subscription tracking' },\r\n    // People\r\n    { name: 'Users', href: '/versotech_main/users', icon: Users, description: 'Platform users' },\r\n    { name: 'Accounts', href: '/versotech_main/accounts', icon: Building2, description: 'Business entities' },\r\n    { name: 'Investors', href: '/versotech_main/investors', icon: Users, description: 'Investor relations' },\r\n    { name: 'Introducers', href: '/versotech_main/introducers', icon: HandHeart, description: 'Partners' },\r\n    { name: 'Arrangers', href: '/versotech_main/arrangers', icon: Briefcase, description: 'Regulated entities' },\r\n    // Docs & Legal\r\n    { name: 'Documents', href: '/versotech_main/documents', icon: FileText, description: 'Document center' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Introducer Agreements', href: '/versotech_main/introducer-agreements', icon: FileText, description: 'Fee agreements' },\r\n    // Finance\r\n    { name: 'Fees', href: '/versotech_main/fees', icon: Calculator, description: 'Billing' },\r\n    { name: 'Reconciliation', href: '/versotech_main/reconciliation', icon: Calculator, description: 'Payments' },\r\n    // Compliance\r\n    { name: 'KYC Review', href: '/versotech_main/kyc-review', icon: UserCheck, description: 'KYC compliance' },\r\n    { name: 'Audit', href: '/versotech_main/audit', icon: Shield, description: 'Compliance logs' },\r\n    // Operations\r\n    { name: 'Requests', href: '/versotech_main/requests', icon: ClipboardList, description: 'Service requests' },\r\n    { name: 'Calendar', href: '/versotech_main/calendar', icon: Calendar, description: 'Schedule' },\r\n    { name: 'Processes', href: '/versotech_main/processes', icon: Workflow, description: 'Workflows' },\r\n    // Admin (always last)\r\n    { name: 'Admin', href: '/versotech_main/admin', icon: Database, description: 'System settings' },\r\n  ],\r\n\r\n  // Staff persona - common items for non-CEO staff roles (staff_ops, staff_rm)\r\n  staff: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Messages', href: '/versotech_main/messages', icon: MessageSquare, description: 'Inbox' },\r\n    { name: 'Approvals', href: '/versotech_main/approvals', icon: UserCheck, description: 'Pending approvals' },\r\n    { name: 'Deals', href: '/versotech_main/deals', icon: Activity, description: 'Deal management' },\r\n    { name: 'Vehicles', href: '/versotech_main/entities', icon: Building2, description: 'Investment vehicles' },\r\n    { name: 'Investors', href: '/versotech_main/investors', icon: Users, description: 'Investor relations' },\r\n    { name: 'Subscriptions', href: '/versotech_main/subscriptions', icon: FileText, description: 'Subscription tracking' },\r\n    { name: 'Requests', href: '/versotech_main/requests', icon: ClipboardList, description: 'Service requests' },\r\n    { name: 'Documents', href: '/versotech_main/documents', icon: FileText, description: 'Document center' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Introducers', href: '/versotech_main/introducers', icon: HandHeart, description: 'Partners' },\r\n    { name: 'Introducer Agreements', href: '/versotech_main/introducer-agreements', icon: FileText, description: 'Fee agreements' },\r\n    { name: 'Arrangers', href: '/versotech_main/arrangers', icon: Briefcase, description: 'Regulated entities' },\r\n    { name: 'Users', href: '/versotech_main/users', icon: Users, description: 'Platform users' },\r\n    { name: 'Accounts', href: '/versotech_main/accounts', icon: Building2, description: 'Business entities' },\r\n    { name: 'Calendar', href: '/versotech_main/calendar', icon: Calendar, description: 'Schedule' },\r\n  ],\r\n\r\n  // Investor persona\r\n  investor: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Portfolio overview' },\r\n    { name: 'Investment Opportunities', href: '/versotech_main/opportunities', icon: TrendingUp, description: 'Active deals & pipeline' },\r\n    { name: 'Portfolio', href: '/versotech_main/portfolio', icon: Briefcase, description: 'My investments' },\r\n    { name: 'Documents', href: '/versotech_main/documents', icon: FileText, description: 'My documents' },\r\n    { name: 'Inbox', href: '/versotech_main/inbox', icon: MessageSquare, description: 'Tasks, messages & notifications' },\r\n    { name: 'Profile', href: '/versotech_main/profile', icon: UserCheck, description: 'Entity & members' },\r\n  ],\r\n\r\n  // Arranger persona\r\n  arranger: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'My Mandates', href: '/versotech_main/my-mandates', icon: FileSignature, description: 'Deals I manage' },\r\n    { name: 'Subscription Packs', href: '/versotech_main/subscription-packs', icon: FileText, description: 'Pack review' },\r\n    { name: 'Escrow', href: '/versotech_main/escrow', icon: Lock, description: 'Escrow status' },\r\n    { name: 'Reconciliation', href: '/versotech_main/arranger-reconciliation', icon: Calculator, description: 'Financials' },\r\n    { name: 'Fee Plans', href: '/versotech_main/fee-plans', icon: Calculator, description: 'Fee structures' },\r\n    { name: 'Payment Requests', href: '/versotech_main/payment-requests', icon: ClipboardList, description: 'Fee collection' },\r\n    { name: 'My Partners', href: '/versotech_main/my-partners', icon: Users, description: 'Partner network' },\r\n    { name: 'My Introducers', href: '/versotech_main/my-introducers', icon: UserPlus, description: 'Introducer network' },\r\n    { name: 'My Commercial Partners', href: '/versotech_main/my-commercial-partners', icon: Building2, description: 'CP network' },\r\n    { name: 'My Lawyers', href: '/versotech_main/my-lawyers', icon: Scale, description: 'Legal counsel' },\r\n    { name: 'VERSOSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Profile', href: '/versotech_main/arranger-profile', icon: UserCheck, description: 'Entity & KYC status' },\r\n  ],\r\n\r\n  // Introducer persona\r\n  // NOTE: Messages removed per PRD - introducers have no messaging user stories (passive notification recipients only)\r\n  introducer: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Introductions', href: '/versotech_main/introductions', icon: UserPlus, description: 'My introductions' },\r\n    { name: 'Agreements', href: '/versotech_main/introducer-agreements', icon: FileText, description: 'Fee agreements' },\r\n    { name: 'My Commissions', href: '/versotech_main/my-commissions', icon: Calculator, description: 'Commission tracking & invoices' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Profile', href: '/versotech_main/introducer-profile', icon: UserCheck, description: 'My profile' },\r\n  ],\r\n\r\n  // Partner persona\r\n  // PRD Section 5.6: My Transactions as Partner - tracking referrals, commissions, invoicing\r\n  partner: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Opportunities', href: '/versotech_main/opportunities', icon: TrendingUp, description: 'Investment opportunities' },\r\n    { name: 'Transactions', href: '/versotech_main/partner-transactions', icon: ArrowRightLeft, description: 'My referred investors' },\r\n    { name: 'My Commissions', href: '/versotech_main/my-commissions', icon: Calculator, description: 'Revenue & invoicing' },\r\n    { name: 'Shared Deals', href: '/versotech_main/shared-transactions', icon: Share2, description: 'Co-referred deals' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: FileSignature, description: 'E-signatures' },\r\n    { name: 'Profile', href: '/versotech_main/partner-profile', icon: UserCheck, description: 'Entity & members' },\r\n  ],\r\n\r\n  // Commercial Partner persona\r\n  commercial_partner: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Opportunities', href: '/versotech_main/opportunities', icon: TrendingUp, description: 'Investment opportunities' },\r\n    { name: 'Client Transactions', href: '/versotech_main/client-transactions', icon: Users, description: 'Client investors' },\r\n    { name: 'My Commissions', href: '/versotech_main/my-commissions', icon: Calculator, description: 'Commission tracking & invoices' },\r\n    { name: 'Portfolio', href: '/versotech_main/portfolio', icon: Briefcase, description: 'My investments' },\r\n    { name: 'Agreements', href: '/versotech_main/placement-agreements', icon: FileText, description: 'Placement agreements' },\r\n    { name: 'Profile', href: '/versotech_main/commercial-partner-profile', icon: FileSignature, description: 'Signature & settings' },\r\n    { name: 'Notifications', href: '/versotech_main/notifications', icon: Bell, description: 'Alerts & updates' },\r\n    { name: 'Messages', href: '/versotech_main/messages', icon: MessageSquare, description: 'Communications' },\r\n  ],\r\n\r\n  // Lawyer persona\r\n  // NOTE: Messages removed - lawyers are passive notification recipients only (same as introducers)\r\n  // NOTE: Notifications removed from sidebar - header bell icon provides access (avoids redundancy)\r\n  lawyer: [\r\n    { name: 'Dashboard', href: '/versotech_main/dashboard', icon: LayoutDashboard, description: 'Overview' },\r\n    { name: 'Assigned Deals', href: '/versotech_main/assigned-deals', icon: Briefcase, description: 'My deals' },\r\n    { name: 'Escrow', href: '/versotech_main/escrow', icon: Lock, description: 'Escrow management' },\r\n    { name: 'Subscription Packs', href: '/versotech_main/subscription-packs', icon: FileText, description: 'Pack review' },\r\n    { name: 'VersoSign', href: '/versotech_main/versosign', icon: PenTool, description: 'E-signatures' },\r\n    { name: 'Reconciliation', href: '/versotech_main/lawyer-reconciliation', icon: Calculator, description: 'Financials' },\r\n    { name: 'Profile', href: '/versotech_main/lawyer-profile', icon: FileSignature, description: 'Signature & settings' },\r\n  ],\r\n}\r\n\r\n/**\r\n * Get navigation items for a specific persona\r\n */\r\nfunction getNavForPersona(persona: Persona): NavItem[] {\r\n  // CEO persona now has its own nav items (no longer uses staff + extras)\r\n  return PERSONA_NAV_ITEMS[persona.persona_type] || []\r\n}\r\n\r\n/**\r\n * Merge navigation items from multiple personas (deduping by href)\r\n */\r\nfunction mergeNavItems(personas: Persona[]): NavItem[] {\r\n  const seen = new Set<string>()\r\n  const merged: NavItem[] = []\r\n\r\n  for (const persona of personas) {\r\n    const items = getNavForPersona(persona)\r\n    for (const item of items) {\r\n      if (!seen.has(item.href)) {\r\n        seen.add(item.href)\r\n        merged.push(item)\r\n      }\r\n    }\r\n  }\r\n\r\n  return merged\r\n}\r\n\r\nexport function PersonaSidebar() {\r\n  // Default expanded on desktop - mobile uses separate Sheet drawer via MobileSidebarContent\r\n  const [collapsed, setCollapsed] = useState(false)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [mounted, setMounted] = useState(false)\r\n  const pathname = usePathname()\r\n  const router = useRouter()\r\n\r\n  const { personas, activePersona } = usePersona()\r\n  const { theme } = useTheme()\r\n\r\n  // Hydration fix: Only apply theme after component mounts to avoid SSR mismatch\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // REMOVED: resize useEffect that caused desktop flash\r\n  // Mobile now uses Sheet drawer via MobileSidebarContent, desktop always shows sidebar\r\n\r\n  // Determine if dark mode based on ACTIVE persona only\r\n  // Use mounted check to prevent hydration mismatch (server renders light, client may have dark)\r\n  const isDark = mounted && theme === 'staff-dark'\r\n\r\n  // Build navigation based on active persona or all personas\r\n  const navItems = useMemo(() => {\r\n    // If user has active persona, show items for that persona only\r\n    if (activePersona) {\r\n      return getNavForPersona(activePersona)\r\n    }\r\n    // Otherwise merge all persona nav items\r\n    return mergeNavItems(personas)\r\n  }, [activePersona, personas])\r\n\r\n  // Filter nav items by search\r\n  const filteredNavItems = navItems.filter(item =>\r\n    item.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  )\r\n\r\n  // Handle sign out\r\n  const handleSignOut = async (e: React.MouseEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    try {\r\n      const supabase = createClient()\r\n      await supabase.auth.signOut()\r\n      router.push('/versotech_main/login')\r\n    } catch (error) {\r\n      console.error('Sign out error:', error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\r\n      // Hidden on mobile, flex on desktop - CSS-first responsive (no JS flash)\r\n      \"hidden md:flex flex-col h-screen border-r relative z-50\",\r\n      collapsed ? \"w-[80px]\" : \"w-[280px]\",\r\n      // Only animate width AFTER mount to prevent flash on initial render\r\n      mounted && \"transition-[width] duration-300\",\r\n      isDark\r\n        ? \"bg-zinc-950 border-white/5 text-zinc-400\"\r\n        : \"bg-white border-gray-100 text-gray-600\"\r\n    )}>\r\n      {/* Header */}\r\n      <div className=\"p-6 flex items-center justify-between h-20\">\r\n        {!collapsed && (\r\n          <div className=\"flex items-center gap-3 animate-in fade-in duration-300\">\r\n            <div className=\"relative h-10 w-32 overflow-hidden\">\r\n              <Image\r\n                src=\"/versotech-logo.jpg\"\r\n                alt=\"Logo\"\r\n                fill\r\n                className={cn(\r\n                  \"object-contain object-left\",\r\n                  isDark && \"invert\"\r\n                )}\r\n                priority\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {collapsed && (\r\n          <div className=\"mx-auto\">\r\n            <div className={cn(\r\n              \"relative h-8 w-8 rounded-lg overflow-hidden\",\r\n              isDark ? \"bg-white/5 ring-1 ring-white/10\" : \"bg-gray-50 ring-1 ring-gray-100\"\r\n            )}>\r\n              <Image\r\n                src=\"/versotech-logo.jpg\"\r\n                alt=\"Logo\"\r\n                fill\r\n                className=\"object-cover\"\r\n                priority\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={() => setCollapsed(!collapsed)}\r\n          aria-label={collapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\r\n          aria-expanded={!collapsed}\r\n          className={cn(\r\n            // Touch target: 40px on mobile (near 44px guideline), 24px on desktop\r\n            // Position adjusted for larger mobile button\r\n            \"absolute -right-4 md:-right-3 top-8 h-10 w-10 md:h-6 md:w-6 rounded-full border shadow-sm z-50 flex items-center justify-center transition-colors\",\r\n            isDark\r\n              ? \"bg-zinc-900 border-white/10 text-zinc-400 hover:text-white hover:bg-white/5\"\r\n              : \"bg-white border-gray-200 text-gray-500 hover:text-gray-900 hover:bg-gray-50\"\r\n          )}\r\n        >\r\n          {collapsed ? <ChevronRight className=\"h-4 w-4 md:h-3 md:w-3\" /> : <ChevronLeft className=\"h-4 w-4 md:h-3 md:w-3\" />}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      {!collapsed && (\r\n        <div className=\"px-4 mb-4 animate-in fade-in slide-in-from-top-2 duration-300\">\r\n          <div className=\"relative group\">\r\n            <Search className={cn(\r\n              \"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 transition-colors\",\r\n              isDark\r\n                ? \"text-gray-500 group-focus-within:text-white\"\r\n                : \"text-gray-400 group-focus-within:text-gray-900\"\r\n            )} />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className={cn(\r\n                \"w-full pl-9 pr-4 py-2 rounded-lg text-sm transition-all outline-none\",\r\n                isDark\r\n                  ? \"bg-white/5 border border-white/5 text-white placeholder:text-gray-600 focus:bg-white/10 focus:border-white/10\"\r\n                  : \"bg-gray-50 border border-gray-100 text-gray-900 placeholder:text-gray-400 focus:bg-white focus:border-gray-200 focus:ring-2 focus:ring-blue-500/10\"\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex-1 overflow-y-auto scrollbar-hide px-3 py-2 space-y-1\">\r\n        {filteredNavItems.map((item) => {\r\n          const isDashboard = item.name === 'Dashboard'\r\n          const isActive = isDashboard\r\n            ? pathname === item.href\r\n            : pathname === item.href || pathname.startsWith(`${item.href}/`)\r\n          const Icon = item.icon\r\n\r\n          // Generate data-tour attribute from item name (lowercase, hyphenated)\r\n          const tourId = `nav-${item.name.toLowerCase().replace(/\\s+/g, '-')}`\r\n\r\n          return (\r\n            <Link key={item.href} href={item.href} className=\"block group relative\" data-tour={tourId}>\r\n              <div className={cn(\r\n                \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\",\r\n                isActive\r\n                  ? isDark\r\n                    ? \"bg-gradient-to-r from-blue-600/20 to-blue-600/5 text-blue-400\"\r\n                    : \"bg-blue-50 text-blue-700\"\r\n                  : isDark\r\n                    ? \"text-gray-400 hover:text-white hover:bg-white/5\"\r\n                    : \"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"\r\n              )}>\r\n                <Icon className={cn(\r\n                  \"h-5 w-5 transition-colors\",\r\n                  isActive\r\n                    ? isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                    : isDark ? \"text-gray-500 group-hover:text-white\" : \"text-gray-400 group-hover:text-gray-600\"\r\n                )} />\r\n\r\n                {!collapsed && (\r\n                  <span className=\"flex-1 text-sm font-medium\">{item.name}</span>\r\n                )}\r\n\r\n                {/* Active Indicator Bar */}\r\n                {isActive && (\r\n                  <div className={cn(\r\n                    \"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r-full\",\r\n                    isDark ? \"bg-blue-500\" : \"bg-blue-600\"\r\n                  )} />\r\n                )}\r\n              </div>\r\n\r\n              {/* Tooltip for collapsed state */}\r\n              {collapsed && (\r\n                <div className={cn(\r\n                  \"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-1.5 rounded-md text-xs font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 shadow-xl border\",\r\n                  isDark\r\n                    ? \"bg-zinc-800 border-white/10 text-white\"\r\n                    : \"bg-white border-gray-100 text-gray-900\"\r\n                )}>\r\n                  {item.name}\r\n                </div>\r\n              )}\r\n            </Link>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {/* Sign Out */}\r\n      <div className={cn(\r\n        \"p-4 border-t mt-auto\",\r\n        isDark ? \"border-white/5\" : \"border-gray-100\"\r\n      )}>\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={handleSignOut}\r\n          className={cn(\r\n            \"w-full justify-start gap-3\",\r\n            isDark\r\n              ? \"text-gray-400 hover:text-red-400 hover:bg-white/5\"\r\n              : \"text-gray-600 hover:text-red-600 hover:bg-red-50\"\r\n          )}\r\n        >\r\n          <LogOut className=\"h-5 w-5\" />\r\n          {!collapsed && <span>Sign Out</span>}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Mobile sidebar content for Sheet drawer - separate from desktop PersonaSidebar\r\n * This is displayed in a Sheet component when the mobile hamburger menu is tapped\r\n */\r\nexport function MobileSidebarContent({ onClose }: { onClose: () => void }) {\r\n  const pathname = usePathname()\r\n  const router = useRouter()\r\n  const { personas, activePersona } = usePersona()\r\n  const { theme } = useTheme()\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => { setMounted(true) }, [])\r\n\r\n  const isDark = mounted && theme === 'staff-dark'\r\n\r\n  const navItems = useMemo(() => {\r\n    if (activePersona) return getNavForPersona(activePersona)\r\n    return mergeNavItems(personas)\r\n  }, [activePersona, personas])\r\n\r\n  const handleSignOut = async () => {\r\n    const supabase = createClient()\r\n    await supabase.auth.signOut()\r\n    router.push('/versotech_main/login')\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\r\n      \"flex flex-col h-full\",\r\n      isDark ? \"bg-zinc-950 text-zinc-400\" : \"bg-white text-gray-600\"\r\n    )}>\r\n      {/* Logo */}\r\n      <div className=\"p-6 h-20\">\r\n        <div className=\"relative h-10 w-32\">\r\n          <Image\r\n            src=\"/versotech-logo.jpg\"\r\n            alt=\"Logo\"\r\n            fill\r\n            className={cn(\"object-contain object-left\", isDark && \"invert\")}\r\n            priority\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex-1 overflow-y-auto scrollbar-hide px-3 py-2 space-y-1\">\r\n        {navItems.map((item) => {\r\n          const isActive = item.name === 'Dashboard'\r\n            ? pathname === item.href\r\n            : pathname === item.href || pathname.startsWith(`${item.href}/`)\r\n          const Icon = item.icon\r\n          // Generate data-tour attribute from item name (lowercase, hyphenated)\r\n          const tourId = `nav-${item.name.toLowerCase().replace(/\\s+/g, '-')}`\r\n\r\n          return (\r\n            <Link\r\n              key={item.href}\r\n              href={item.href}\r\n              onClick={onClose}\r\n              className=\"block group relative\"\r\n              data-tour={tourId}\r\n            >\r\n              <div className={cn(\r\n                \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200\",\r\n                isActive\r\n                  ? isDark\r\n                    ? \"bg-gradient-to-r from-blue-600/20 to-blue-600/5 text-blue-400\"\r\n                    : \"bg-blue-50 text-blue-700\"\r\n                  : isDark\r\n                    ? \"text-gray-400 hover:text-white hover:bg-white/5\"\r\n                    : \"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"\r\n              )}>\r\n                <Icon className={cn(\r\n                  \"h-5 w-5\",\r\n                  isActive ? (isDark ? \"text-blue-400\" : \"text-blue-600\") : \"\"\r\n                )} />\r\n                <span className=\"flex-1 text-sm font-medium\">{item.name}</span>\r\n              </div>\r\n            </Link>\r\n          )\r\n        })}\r\n      </div>\r\n\r\n      {/* Sign Out */}\r\n      <div className={cn(\"p-4 border-t mt-auto\", isDark ? \"border-white/5\" : \"border-gray-100\")}>\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={handleSignOut}\r\n          className={cn(\r\n            \"w-full justify-start gap-3\",\r\n            isDark\r\n              ? \"text-gray-400 hover:text-red-400 hover:bg-white/5\"\r\n              : \"text-gray-600 hover:text-red-600 hover:bg-red-50\"\r\n          )}\r\n        >\r\n          <LogOut className=\"h-5 w-5\" />\r\n          <span>Sign Out</span>\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3812, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-2.5 md:py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-2.5 md:py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-2.5 md:py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-2.5 md:py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-2.5 md:py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4053, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,iMAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,kMAAI,GAAG;IAE9B,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS"}},
    {"offset": {"line": 4105, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/layout/notification-center.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { cn } from '@/lib/utils'\r\nimport { usePersona } from '@/contexts/persona-context'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport {\r\n  Bell,\r\n  CheckSquare,\r\n  MessageSquare,\r\n  AlertCircle\r\n} from 'lucide-react'\r\nimport Link from 'next/link'\r\n\r\ninterface NotificationItem {\r\n  id: string\r\n  type: 'task' | 'message' | 'notification'\r\n  title: string\r\n  description?: string\r\n  href: string\r\n  read: boolean\r\n  created_at: string\r\n  deal_name?: string\r\n}\r\n\r\ninterface NotificationCenterProps {\r\n  className?: string\r\n}\r\n\r\nexport function NotificationCenter({ className }: NotificationCenterProps) {\r\n  const [mounted, setMounted] = useState(false)\r\n  const [open, setOpen] = useState(false)\r\n  const [notifications, setNotifications] = useState<NotificationItem[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const { activePersona } = usePersona()\r\n  const { theme } = useTheme()\r\n\r\n  // Hydration fix: Only apply theme after component mounts to avoid SSR mismatch\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // Use mounted check to prevent hydration mismatch (server renders light, client may have dark)\r\n  const isDark = mounted && theme === 'staff-dark'\r\n\r\n  // Fetch notifications from multiple sources\r\n  useEffect(() => {\r\n    async function fetchNotifications() {\r\n      if (!activePersona || !mounted) return\r\n\r\n      setLoading(true)\r\n      const supabase = createClient()\r\n      const items: NotificationItem[] = []\r\n\r\n      try {\r\n        const { data: { user }, error: userError } = await supabase.auth.getUser()\r\n\r\n        if (userError || !user) {\r\n          console.warn('[NotificationCenter] No authenticated user found')\r\n          setNotifications([])\r\n          return\r\n        }\r\n\r\n        const userId = user.id\r\n        const personaType = activePersona.persona_type\r\n\r\n        // Passive personas (lawyer, introducer) only receive notifications - no tasks or messages\r\n        const isPassiveRecipient = personaType === 'lawyer' || personaType === 'introducer'\r\n\r\n        // Fetch tasks (skip for passive personas - they don't have tasks page access)\r\n        if (!isPassiveRecipient) {\r\n          let taskQuery = supabase\r\n            .from('tasks')\r\n            .select('id, title, description, created_at, owner_user_id, owner_investor_id')\r\n            .in('status', ['pending', 'in_progress'])\r\n            .order('created_at', { ascending: false })\r\n            .limit(5)\r\n\r\n          if (personaType === 'investor') {\r\n            taskQuery = taskQuery.or(`owner_user_id.eq.${userId},owner_investor_id.eq.${activePersona.entity_id}`)\r\n          } else {\r\n            taskQuery = taskQuery.eq('owner_user_id', userId)\r\n          }\r\n\r\n          const { data: tasks } = await taskQuery\r\n\r\n          if (tasks) {\r\n            tasks.forEach((task: any) => {\r\n              items.push({\r\n                id: `task-${task.id}`,\r\n                type: 'task',\r\n                title: task.title,\r\n                description: task.description,\r\n                href: '/versotech_main/tasks',\r\n                read: false,\r\n                created_at: task.created_at\r\n              })\r\n            })\r\n          }\r\n        }\r\n\r\n        // Fetch unread messages (skip for passive personas - they don't have inbox access)\r\n        if (!isPassiveRecipient) {\r\n          const { data: participants } = await supabase\r\n            .from('conversation_participants')\r\n            .select('conversation_id, last_read_at')\r\n            .eq('user_id', userId)\r\n            .limit(50)\r\n\r\n          const conversationIds = (participants || [])\r\n            .map((row: any) => row.conversation_id)\r\n            .filter(Boolean)\r\n\r\n          if (conversationIds.length > 0) {\r\n            let conversationQuery = supabase\r\n              .from('conversations')\r\n              .select('id, subject, preview, last_message_at, created_at, visibility')\r\n              .in('id', conversationIds)\r\n              .order('last_message_at', { ascending: false, nullsFirst: false })\r\n              .limit(10)\r\n\r\n            if (personaType !== 'staff') {\r\n              conversationQuery = conversationQuery.in('visibility', ['investor', 'deal'])\r\n            }\r\n\r\n            const { data: conversations } = await conversationQuery\r\n\r\n            const lastReadByConversation = new Map<string, string | null>()\r\n            ;(participants || []).forEach((row: any) => {\r\n              if (row.conversation_id) {\r\n                lastReadByConversation.set(row.conversation_id, row.last_read_at ?? null)\r\n              }\r\n            })\r\n\r\n            const unreadConversations = (conversations || []).filter((conv: any) => {\r\n              const lastMessageAt = conv.last_message_at ?? conv.created_at\r\n              if (!lastMessageAt) return false\r\n              const lastReadAt = lastReadByConversation.get(conv.id)\r\n              if (!lastReadAt) return true\r\n              return new Date(lastMessageAt).getTime() > new Date(lastReadAt).getTime()\r\n            })\r\n\r\n            unreadConversations.slice(0, 5).forEach((conv: any) => {\r\n              const lastMessageAt = conv.last_message_at ?? conv.created_at\r\n              items.push({\r\n                id: `msg-${conv.id}`,\r\n                type: 'message',\r\n                title: conv.subject || 'New message',\r\n                description: conv.preview || 'You have a new message',\r\n                href: '/versotech_main/inbox?tab=messages',\r\n                read: false,\r\n                created_at: lastMessageAt\r\n              })\r\n            })\r\n          }\r\n        }\r\n\r\n        // Fetch notifications for all personas (investor, lawyer, staff, etc.)\n        // Notifications use read_at timestamp (null = unread)\n        const { data: notifs } = await supabase\n          .from('investor_notifications')\n          .select('id, title, message, created_at, read_at, link')\n          .eq('user_id', userId)\n          .is('read_at', null)\n          .order('created_at', { ascending: false })\n          .limit(5)\n\n        if (notifs) {\n          notifs.forEach((notif: any) => {\n            items.push({\n              id: `notif-${notif.id}`,\n              type: 'notification',\n              title: notif.title,\n              description: notif.message,\n              href: notif.link || '/versotech_main/notifications',\n              read: notif.read_at !== null,\n              created_at: notif.created_at\n            })\n          })\n        }\n\n        if (personaType === 'lawyer') {\n          const { data: lawyerNotifs } = await supabase\n            .from('notifications')\n            .select('id, title, message, created_at, read, link')\n            .eq('user_id', userId)\n            .eq('read', false)\n            .order('created_at', { ascending: false })\n            .limit(5)\n\n          if (lawyerNotifs) {\n            lawyerNotifs.forEach((notif: any) => {\n              items.push({\n                id: `lawyer-notif-${notif.id}`,\n                type: 'notification',\n                title: notif.title,\n                description: notif.message,\n                href: notif.link || '/versotech_main/notifications',\n                read: !!notif.read,\n                created_at: notif.created_at\n              })\n            })\n          }\n        }\n\r\n        // Sort by date and take top 10\r\n        items.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())\r\n        setNotifications(items.slice(0, 10))\r\n      } catch (error) {\r\n        console.error('[NotificationCenter] Error fetching notifications:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchNotifications()\r\n  }, [activePersona, mounted])\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length\r\n\r\n  const getIcon = (type: NotificationItem['type']) => {\r\n    switch (type) {\r\n      case 'task': return CheckSquare\r\n      case 'message': return MessageSquare\r\n      case 'notification': return AlertCircle\r\n      default: return Bell\r\n    }\r\n  }\r\n\r\n  const formatTime = (dateStr: string) => {\r\n    const date = new Date(dateStr)\r\n    const now = new Date()\r\n    const diffMs = now.getTime() - date.getTime()\r\n    const diffMins = Math.floor(diffMs / 60000)\r\n    const diffHours = Math.floor(diffMins / 60)\r\n    const diffDays = Math.floor(diffHours / 24)\r\n\r\n    if (diffMins < 1) return 'Just now'\r\n    if (diffMins < 60) return `${diffMins}m ago`\r\n    if (diffHours < 24) return `${diffHours}h ago`\r\n    if (diffDays < 7) return `${diffDays}d ago`\r\n    return date.toLocaleDateString()\r\n  }\r\n\r\n  // Render placeholder button until mounted to prevent Radix UI hydration mismatch\r\n  if (!mounted) {\r\n    return (\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className={cn(\r\n          \"relative\",\r\n          isDark\r\n            ? \"text-gray-400 hover:text-white hover:bg-white/10\"\r\n            : \"text-gray-600 hover:text-gray-900 hover:bg-gray-100\",\r\n          className\r\n        )}\r\n      >\r\n        <Bell className=\"h-5 w-5\" />\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <DropdownMenu open={open} onOpenChange={setOpen}>\r\n      <DropdownMenuTrigger asChild>\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          className={cn(\r\n            \"relative\",\r\n            isDark\r\n              ? \"text-gray-400 hover:text-white hover:bg-white/10\"\r\n              : \"text-gray-600 hover:text-gray-900 hover:bg-gray-100\",\r\n            className\r\n          )}\r\n        >\r\n          <Bell className=\"h-5 w-5\" />\r\n          {unreadCount > 0 && (\r\n            <Badge\r\n              className={cn(\r\n                \"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-[10px]\",\r\n                \"bg-red-500 text-white border-0\"\r\n              )}\r\n            >\r\n              {unreadCount > 9 ? '9+' : unreadCount}\r\n            </Badge>\r\n          )}\r\n        </Button>\r\n      </DropdownMenuTrigger>\r\n\r\n      <DropdownMenuContent\r\n        align=\"end\"\r\n        className={cn(\r\n          \"w-80\",\r\n          isDark\r\n            ? \"bg-zinc-800 border-white/10 text-white\"\r\n            : \"bg-white border-gray-200\"\r\n        )}\r\n      >\r\n        <DropdownMenuLabel className=\"flex items-center justify-between\">\r\n          <span className={isDark ? \"text-white\" : \"text-gray-900\"}>\r\n            Notifications\r\n          </span>\r\n          {unreadCount > 0 && (\r\n            <Badge variant=\"secondary\" className=\"text-xs\">\r\n              {unreadCount} new\r\n            </Badge>\r\n          )}\r\n        </DropdownMenuLabel>\r\n\r\n        <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n\r\n        {loading ? (\r\n          <div className=\"p-4 text-center\">\r\n            <div className={cn(\r\n              \"animate-spin h-5 w-5 mx-auto border-2 rounded-full\",\r\n              isDark ? \"border-white/20 border-t-white\" : \"border-gray-200 border-t-gray-600\"\r\n            )} />\r\n          </div>\r\n        ) : notifications.length === 0 ? (\r\n          <div className={cn(\r\n            \"p-4 text-center text-sm\",\r\n            isDark ? \"text-gray-500\" : \"text-gray-500\"\r\n          )}>\r\n            No notifications\r\n          </div>\r\n        ) : (\r\n          <div className=\"max-h-80 overflow-y-auto\">\r\n            {notifications.map((item) => {\r\n              const Icon = getIcon(item.type)\r\n\r\n              return (\r\n                <DropdownMenuItem\r\n                  key={item.id}\r\n                  asChild\r\n                  className={cn(\r\n                    \"flex items-start gap-3 p-3 cursor-pointer\",\r\n                    isDark\r\n                      ? \"focus:bg-white/10\"\r\n                      : \"focus:bg-gray-50\",\r\n                    !item.read && (isDark ? \"bg-white/5\" : \"bg-blue-50/50\")\r\n                  )}\r\n                >\r\n                  <Link href={item.href} className=\"flex items-start gap-3 w-full\">\r\n                    <div className={cn(\r\n                      \"h-8 w-8 rounded-full flex items-center justify-center flex-shrink-0\",\r\n                      isDark ? \"bg-white/10\" : \"bg-gray-100\"\r\n                    )}>\r\n                      <Icon className={cn(\r\n                        \"h-4 w-4\",\r\n                        item.type === 'task' && \"text-blue-500\",\r\n                        item.type === 'message' && \"text-green-500\",\r\n                        item.type === 'notification' && \"text-orange-500\"\r\n                      )} />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className={cn(\r\n                        \"text-sm font-medium truncate\",\r\n                        isDark ? \"text-white\" : \"text-gray-900\"\r\n                      )}>\r\n                        {item.title}\r\n                      </div>\r\n                      {item.description && (\r\n                        <div className={cn(\r\n                          \"text-xs truncate\",\r\n                          isDark ? \"text-gray-400\" : \"text-gray-500\"\r\n                        )}>\r\n                          {item.description}\r\n                        </div>\r\n                      )}\r\n                      <div className={cn(\r\n                        \"text-xs mt-1\",\r\n                        isDark ? \"text-gray-500\" : \"text-gray-400\"\r\n                      )}>\r\n                        {formatTime(item.created_at)}\r\n                        {item.deal_name && ` • ${item.deal_name}`}\r\n                      </div>\r\n                    </div>\r\n                    {!item.read && (\r\n                      <div className=\"h-2 w-2 rounded-full bg-blue-500 flex-shrink-0 mt-2\" />\r\n                    )}\r\n                  </Link>\r\n                </DropdownMenuItem>\r\n              )\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n\r\n        <DropdownMenuItem asChild>\r\n          <Link\r\n            href=\"/versotech_main/notifications\"\r\n            className={cn(\r\n              \"flex items-center justify-center text-sm py-2\",\r\n              isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n            )}\r\n          >\r\n            View all notifications\r\n          </Link>\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4588, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,kMAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,oMAAoB;QACnB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;;AAGb,OAAO,WAAW,GAAG,oMAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,+BAA+B;QAC5C,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,kMAAgB,OAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,wMAAwB;QACvB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,wMAAwB,CAAC,WAAW"}},
    {"offset": {"line": 4653, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/session-manager.ts"],"sourcesContent":["'use client'\r\n\r\n/**\r\n * Simplified Session Manager\r\n * \r\n * Provides basic session management utilities without forcing re-authentication.\r\n * Supabase handles session persistence and expiration automatically.\r\n */\r\n\r\nconst AUTH_KEY_HINTS = ['supabase', 'sb-', 'auth', 'supabase.auth.token']\r\n\r\nconst removeAuthKeys = (storage: Storage) => {\r\n  const keysToRemove = new Set<string>()\r\n\r\n  AUTH_KEY_HINTS.forEach((hint) => {\r\n    Object.keys(storage)\r\n      .filter((key) => key.includes(hint))\r\n      .forEach((key) => keysToRemove.add(key))\r\n  })\r\n\r\n  keysToRemove.forEach((key) => storage.removeItem(key))\r\n}\r\n\r\nclass SessionManager {\r\n  private static instance: SessionManager\r\n  private isInitialized = false\r\n\r\n  private constructor() {}\r\n\r\n  static getInstance(): SessionManager {\r\n    if (!SessionManager.instance) {\r\n      SessionManager.instance = new SessionManager()\r\n    }\r\n\r\n    return SessionManager.instance\r\n  }\r\n\r\n  /**\r\n   * Initialize session manager\r\n   * Sets up storage event listeners to handle cross-tab logout\r\n   */\r\n  init(): void {\r\n    if (this.isInitialized || typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    try {\r\n      this.isInitialized = true\r\n\r\n      // Listen for storage changes in other tabs (cross-tab logout)\r\n      window.addEventListener('storage', this.handleStorageChange)\r\n\r\n      console.info('[auth-session] Session manager initialized')\r\n    } catch (error) {\r\n      console.error('[auth-session] Failed to initialize session manager:', error)\r\n      this.isInitialized = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all auth-related cookies\r\n   * Cookies need to be cleared with exact path and domain to work properly\r\n   */\r\n  private clearAuthCookies(): void {\r\n    if (typeof document === 'undefined') {\r\n      return\r\n    }\r\n\r\n    // Get all cookies\r\n    const cookies = document.cookie.split(';')\r\n    const authCookieNames: string[] = []\r\n\r\n    // Find all auth-related cookies\r\n    cookies.forEach(cookie => {\r\n      const cookieName = cookie.split('=')[0].trim()\r\n      if (AUTH_KEY_HINTS.some(hint => cookieName.includes(hint))) {\r\n        authCookieNames.push(cookieName)\r\n      }\r\n    })\r\n\r\n    // Clear each auth cookie with multiple path/domain combinations\r\n    authCookieNames.forEach(name => {\r\n      // Try various path combinations\r\n      const paths = ['/', '/versoholdings', '/versotech', '/versotech_main']\n      const domains = [window.location.hostname, `.${window.location.hostname}`, '']\r\n\r\n      paths.forEach(path => {\r\n        domains.forEach(domain => {\r\n          const domainStr = domain ? `domain=${domain};` : ''\r\n          document.cookie = `${name}=; ${domainStr}path=${path}; expires=Thu, 01 Jan 1970 00:00:00 GMT; max-age=0`\r\n        })\r\n      })\r\n    })\r\n\r\n    console.info('[auth-session] Cleared auth cookies:', authCookieNames)\r\n  }\r\n\r\n  /**\r\n   * Clear all auth data - localStorage, sessionStorage, and cookies\r\n   * This is the most comprehensive cleanup and should be used before re-authentication\r\n   */\r\n  clearAllAuthData(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Clearing ALL auth data (storage + cookies)')\r\n\r\n    // Clear storage\r\n    removeAuthKeys(window.localStorage)\r\n    removeAuthKeys(window.sessionStorage)\r\n\r\n    // Clear cookies\r\n    this.clearAuthCookies()\r\n  }\r\n\r\n  /**\r\n   * Force sign out by clearing all auth-related storage\r\n   * Used during logout to ensure clean state\r\n   */\r\n  forceSignOut(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Force sign out - clearing all auth state')\r\n\r\n    // Clear all local auth data\r\n    this.clearAllAuthData()\r\n\r\n    // Call logout API to clear server-side session\r\n    void fetch('/api/auth/logout', {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n    }).catch((error) => {\r\n      console.error('[auth-session] Failed to revoke server session', error)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Handle storage changes from other tabs\r\n   * If auth keys are removed in another tab, redirect to login\r\n   */\r\n  private handleStorageChange = (event: StorageEvent): void => {\r\n    if (event.key && AUTH_KEY_HINTS.some((hint) => event.key?.includes(hint)) && event.newValue === null) {\r\n      console.info('[auth-session] Auth state cleared in another tab, redirecting to login')\r\n      window.location.href = '/versotech_main/login?error=signed_out'\n    }\r\n  }\r\n\r\n  /**\r\n   * Mark session as authenticated\r\n   * This is called after successful login to update session state\r\n   */\r\n  markAuthenticated(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Session marked as authenticated')\r\n  }\r\n\r\n  /**\r\n   * Get debug information about current session state\r\n   * Useful for troubleshooting auth issues\r\n   */\r\n  getDebugInfo(): Record<string, unknown> {\r\n    if (typeof window === 'undefined') {\r\n      return { error: 'Not in browser' }\r\n    }\r\n\r\n    return {\r\n      localStorageKeys: Object.keys(localStorage).filter((key) =>\r\n        AUTH_KEY_HINTS.some((hint) => key.includes(hint))\r\n      ),\r\n      sessionStorageKeys: Object.keys(sessionStorage).filter((key) =>\r\n        AUTH_KEY_HINTS.some((hint) => key.includes(hint))\r\n      ),\r\n    }\r\n  }\r\n}\r\n\r\nexport const sessionManager = SessionManager.getInstance()\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;;CAKC,GAED,MAAM,iBAAiB;IAAC;IAAY;IAAO;IAAQ;CAAsB;AAEzE,MAAM,iBAAiB,CAAC;IACtB,MAAM,eAAe,IAAI;IAEzB,eAAe,OAAO,CAAC,CAAC;QACtB,OAAO,IAAI,CAAC,SACT,MAAM,CAAC,CAAC,MAAQ,IAAI,QAAQ,CAAC,OAC7B,OAAO,CAAC,CAAC,MAAQ,aAAa,GAAG,CAAC;IACvC;IAEA,aAAa,OAAO,CAAC,CAAC,MAAQ,QAAQ,UAAU,CAAC;AACnD;AAEA,MAAM;IACJ,OAAe,SAAwB;IAC/B,gBAAgB,MAAK;IAE7B,aAAsB,CAAC;IAEvB,OAAO,cAA8B;QACnC,IAAI,CAAC,eAAe,QAAQ,EAAE;YAC5B,eAAe,QAAQ,GAAG,IAAI;QAChC;QAEA,OAAO,eAAe,QAAQ;IAChC;IAEA;;;GAGC,GACD,OAAa;QACX,IAAI,IAAI,CAAC,aAAa,IAAI,+CAAkB,aAAa;YACvD;QACF;QAEA,IAAI;YACF,IAAI,CAAC,aAAa,GAAG;YAErB,8DAA8D;YAC9D,OAAO,gBAAgB,CAAC,WAAW,IAAI,CAAC,mBAAmB;YAE3D,QAAQ,IAAI,CAAC;QACf,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wDAAwD;YACtE,IAAI,CAAC,aAAa,GAAG;QACvB;IACF;IAEA;;;GAGC,GACD,AAAQ,mBAAyB;QAC/B,IAAI,OAAO,aAAa,aAAa;YACnC;QACF;QAEA,kBAAkB;QAClB,MAAM,UAAU,SAAS,MAAM,CAAC,KAAK,CAAC;QACtC,MAAM,kBAA4B,EAAE;QAEpC,gCAAgC;QAChC,QAAQ,OAAO,CAAC,CAAA;YACd,MAAM,aAAa,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI;YAC5C,IAAI,eAAe,IAAI,CAAC,CAAA,OAAQ,WAAW,QAAQ,CAAC,QAAQ;gBAC1D,gBAAgB,IAAI,CAAC;YACvB;QACF;QAEA,gEAAgE;QAChE,gBAAgB,OAAO,CAAC,CAAA;YACtB,gCAAgC;YAChC,MAAM,QAAQ;gBAAC;gBAAK;gBAAkB;gBAAc;aAAkB;YACtE,MAAM,UAAU;gBAAC,OAAO,QAAQ,CAAC,QAAQ;gBAAE,CAAC,CAAC,EAAE,OAAO,QAAQ,CAAC,QAAQ,EAAE;gBAAE;aAAG;YAE9E,MAAM,OAAO,CAAC,CAAA;gBACZ,QAAQ,OAAO,CAAC,CAAA;oBACd,MAAM,YAAY,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG;oBACjD,SAAS,MAAM,GAAG,GAAG,KAAK,GAAG,EAAE,UAAU,KAAK,EAAE,KAAK,kDAAkD,CAAC;gBAC1G;YACF;QACF;QAEA,QAAQ,IAAI,CAAC,wCAAwC;IACvD;IAEA;;;GAGC,GACD,mBAAyB;QACvB;;QAIA,QAAQ,IAAI,CAAC;QAEb,gBAAgB;QAChB,eAAe,OAAO,YAAY;QAClC,eAAe,OAAO,cAAc;QAEpC,gBAAgB;QAChB,IAAI,CAAC,gBAAgB;IACvB;IAEA;;;GAGC,GACD,eAAqB;QACnB;;QAIA,QAAQ,IAAI,CAAC;QAEb,4BAA4B;QAC5B,IAAI,CAAC,gBAAgB;QAErB,+CAA+C;QAC/C,KAAK,MAAM,oBAAoB;YAC7B,QAAQ;YACR,aAAa;QACf,GAAG,KAAK,CAAC,CAAC;YACR,QAAQ,KAAK,CAAC,kDAAkD;QAClE;IACF;IAEA;;;GAGC,GACD,AAAQ,sBAAsB,CAAC;QAC7B,IAAI,MAAM,GAAG,IAAI,eAAe,IAAI,CAAC,CAAC,OAAS,MAAM,GAAG,EAAE,SAAS,UAAU,MAAM,QAAQ,KAAK,MAAM;YACpG,QAAQ,IAAI,CAAC;YACb,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF,EAAC;IAED;;;GAGC,GACD,oBAA0B;QACxB;;QAIA,QAAQ,IAAI,CAAC;IACf;IAEA;;;GAGC,GACD,eAAwC;QACtC;;QAIA,OAAO;YACL,kBAAkB,OAAO,IAAI,CAAC,cAAc,MAAM,CAAC,CAAC,MAClD,eAAe,IAAI,CAAC,CAAC,OAAS,IAAI,QAAQ,CAAC;YAE7C,oBAAoB,OAAO,IAAI,CAAC,gBAAgB,MAAM,CAAC,CAAC,MACtD,eAAe,IAAI,CAAC,CAAC,OAAS,IAAI,QAAQ,CAAC;QAE/C;IACF;AACF;AAEO,MAAM,iBAAiB,eAAe,WAAW"}},
    {"offset": {"line": 4810, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/auth-client.ts"],"sourcesContent":["'use client'\r\n\r\nimport { createClient, resetClient } from '@/lib/supabase/client'\r\nimport { sessionManager } from '@/lib/session-manager'\r\nimport type { User, Session } from '@supabase/supabase-js'\r\n\r\nexport interface AuthUser {\r\n  id: string\r\n  email: string\r\n  displayName: string\r\n  avatar?: string\r\n  role:\r\n    | 'investor'\r\n    | 'staff_admin'\r\n    | 'staff_ops'\r\n    | 'staff_rm'\r\n    | 'arranger'\r\n    | 'introducer'\r\n    | 'partner'\r\n    | 'commercial_partner'\r\n    | 'lawyer'\r\n    | 'ceo'\r\n  title?: string\r\n  created_at: string\r\n}\r\n\r\nexport interface AuthSession {\r\n  user: AuthUser\r\n  session: Session\r\n}\r\n\r\nexport interface SignInApiResponse {\r\n  success?: boolean\r\n  redirect?: string\r\n  session?: {\r\n    access_token: string\r\n    refresh_token: string\r\n    expires_at?: number | null\r\n  }\r\n  user?: {\r\n    id: string\r\n    email: string\r\n    role: string\r\n    displayName?: string\r\n  }\r\n  error?: string\r\n}\r\n\r\nconst syncBrowserSession = async (session?: { access_token: string; refresh_token: string }) => {\r\n  console.log('[auth] syncBrowserSession called, session provided:', !!session)\r\n\r\n  if (!session) {\r\n    console.log('[auth] No session to sync, returning true')\r\n    return true\r\n  }\r\n\r\n  const supabase = createClient()\r\n\r\n  console.log('[auth] Calling supabase.auth.setSession...')\r\n  const { data, error } = await supabase.auth.setSession({\r\n    access_token: session.access_token,\r\n    refresh_token: session.refresh_token\r\n  })\r\n\r\n  if (error) {\r\n    console.error('[auth] Client session sync failed:', error)\r\n    return false\r\n  }\r\n\r\n  console.log('[auth] Session synced successfully, user:', data?.user?.email)\r\n  return true\r\n}\r\n\r\nexport class AuthError extends Error {\r\n  constructor(message: string, public code?: string) {\r\n    super(message)\r\n    this.name = 'AuthError'\r\n  }\r\n}\r\n\r\n/**\r\n * SIGNUP - DISABLED\r\n *\r\n * This platform is invite-only. Self-registration is not allowed.\r\n * This function is kept for backwards compatibility but will always fail.\r\n *\r\n * @deprecated Use admin invitation flow instead\r\n */\r\nexport const signUp = async (email: string, password: string, displayName: string, portal: 'investor' | 'staff' = 'investor') => {\r\n  console.warn('[auth-client] signUp() called but self-registration is disabled')\r\n  throw new AuthError('Self-registration is disabled. This platform is invite-only. Please contact your administrator or relationship manager to request access.')\r\n}\r\n\r\n// Sign in with email and password\r\nexport const signIn = async (email: string, password: string, portal: 'investor' | 'staff' = 'investor') => {\r\n  try {\r\n    // CRITICAL FIX: Clear all auth data before attempting sign-in\r\n    // This prevents \"Invalid Refresh Token\" and session conflict errors\r\n    console.log('[auth-client] Clearing all auth data before sign-in...')\r\n    sessionManager.clearAllAuthData()\r\n\r\n    // Reset the Supabase client singleton to get fresh instance\r\n    resetClient()\r\n\r\n    // Small delay to ensure storage clearing completes\r\n    await new Promise(resolve => setTimeout(resolve, 100))\r\n\r\n    const response = await fetch('/api/auth/signin', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password, portal })\r\n    })\r\n\r\n    const payload: SignInApiResponse = await response.json().catch(() => ({}))\r\n\r\n    if (!response.ok || !payload.success) {\r\n      const message = typeof payload.error === 'string' && payload.error.trim()\r\n        ? payload.error\r\n        : 'Authentication failed. Please check your credentials.'\r\n      throw new AuthError(message)\r\n    }\r\n\r\n    const synced = await syncBrowserSession(payload.session ? {\r\n      access_token: payload.session.access_token,\r\n      refresh_token: payload.session.refresh_token\r\n    } : undefined)\r\n\r\n    if (!synced) {\r\n      throw new AuthError('Unable to establish session. Please try again.')\r\n    }\r\n\r\n    sessionManager.markAuthenticated()\r\n\r\n    return payload\r\n  } catch (error) {\r\n    if (error instanceof AuthError) {\r\n      throw error\r\n    }\r\n\r\n    console.error('Sign in failed:', error)\r\n    throw new AuthError('Sign in failed. Please check your credentials.')\r\n  }\r\n}\r\n\r\n/**\r\n * GOOGLE OAUTH - DISABLED\r\n *\r\n * Google OAuth has been disabled for security reasons.\r\n * This platform is invite-only with email/password authentication.\r\n *\r\n * @deprecated OAuth providers have been disabled\r\n */\r\nexport const signInWithGoogle = async (portalType: 'staff' | 'investor' = 'investor') => {\r\n  console.warn('[auth-client] signInWithGoogle() called but OAuth is disabled')\r\n  throw new AuthError('Google sign-in is disabled. Please use your email and password to sign in.')\r\n}\r\n\r\n// Sign out with comprehensive session clearing\r\nexport const signOut = async () => {\r\n  const supabase = createClient()\r\n\r\n  let signOutError: unknown = null\r\n\r\n  try {\r\n    const { error } = await supabase.auth.signOut()\r\n\r\n    if (error) {\r\n      console.error('[auth] Supabase signOut error:', error)\r\n      signOutError = error\r\n    }\r\n  } catch (error) {\r\n    console.error('[auth] Sign out error:', error)\r\n    signOutError = error\r\n  } finally {\r\n    if (typeof window !== 'undefined') {\r\n      sessionManager.forceSignOut()\r\n      // Reset the Supabase client singleton after sign-out\r\n      resetClient()\r\n    }\r\n  }\r\n\r\n  if (signOutError) {\r\n    throw new AuthError('Sign out failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Get current user with profile data\r\nexport const getCurrentUser = async (): Promise<AuthUser | null> => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    // Get current auth user\r\n    const { data: { user }, error: userError } = await supabase.auth.getUser()\r\n\r\n    if (userError || !user) {\r\n      return null\r\n    }\r\n\r\n    // Get profile data from database\r\n    const { data: profile, error: profileError } = await supabase\r\n      .from('profiles')\r\n      .select('*')\r\n      .eq('id', user.id)\r\n      .single()\r\n\r\n    if (profileError || !profile) {\r\n      console.error('Error getting profile:', profileError)\r\n      return null\r\n    }\r\n\r\n    return {\r\n      id: profile.id,\r\n      email: profile.email,\r\n      displayName: profile.display_name || profile.email?.split('@')[0] || 'User',\r\n      avatar: profile.avatar,\r\n      role: profile.role as AuthUser['role'],\r\n      title: profile.title,\r\n      created_at: profile.created_at\r\n    }\r\n  } catch (error) {\r\n    console.error('Error getting current user:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Get current session\r\nexport const getCurrentSession = async (): Promise<Session | null> => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const { data: { session }, error } = await supabase.auth.getSession()\r\n\r\n    if (error) {\r\n      console.error('Error getting session:', error)\r\n      return null\r\n    }\r\n\r\n    return session\r\n  } catch (error) {\r\n    console.error('Error getting session:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Auth state listener\r\nexport const onAuthStateChange = (callback: (event: string, session: Session | null) => void) => {\r\n  const supabase = createClient()\r\n\r\n  return supabase.auth.onAuthStateChange(callback)\r\n}\r\n\r\n// Password reset - uses custom API with Resend email\r\nexport const resetPassword = async (email: string) => {\r\n  try {\r\n    const response = await fetch('/api/auth/request-reset', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email })\r\n    })\r\n\r\n    const data = await response.json()\r\n\r\n    if (!response.ok) {\r\n      // Include detail error for debugging\r\n      const errorMsg = data.detail\r\n        ? `${data.error} (${data.detail})`\r\n        : data.error || 'Password reset failed. Please try again.'\r\n      throw new AuthError(errorMsg)\r\n    }\r\n\r\n    // Success - email sent (or would have been if account exists)\r\n    return { success: true, message: data.message }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Password reset failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Update password\r\nexport const updatePassword = async (newPassword: string) => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const { error } = await supabase.auth.updateUser({\r\n      password: newPassword\r\n    })\r\n\r\n    if (error) {\r\n      throw new AuthError(error.message, error.message)\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Password update failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Update user profile\r\nexport const updateProfile = async (updates: Partial<Pick<AuthUser, 'displayName' | 'title'>>) => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const user = await getCurrentUser()\r\n    if (!user) {\r\n      throw new AuthError('No authenticated user found')\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from('profiles')\r\n      .update({\r\n        display_name: updates.displayName,\r\n        title: updates.title\r\n      })\r\n      .eq('id', user.id)\r\n\r\n    if (error) {\r\n      throw new AuthError(error.message, error.message)\r\n    }\r\n\r\n    // Also update auth user metadata\r\n    if (updates.displayName) {\r\n      const { error: authError } = await supabase.auth.updateUser({\r\n        data: { display_name: updates.displayName }\r\n      })\r\n\r\n      if (authError) {\r\n        console.error('Error updating auth metadata:', authError)\r\n      }\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Profile update failed. Please try again.')\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5063, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/layout/identity-menu.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { usePersona } from '@/contexts/persona-context'\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  ChevronDown,\r\n  Check,\r\n  Building2,\r\n  Users,\r\n  UserPlus,\r\n  Briefcase,\r\n  Scale,\r\n  User,\r\n  Settings,\r\n  LogOut,\r\n} from 'lucide-react'\r\nimport Image from 'next/image'\r\nimport { Profile } from '@/lib/auth'\r\nimport { signOut } from '@/lib/auth-client'\r\n\r\nconst PERSONA_ICONS: Record<string, React.ComponentType<{ className?: string }>> = {\r\n  ceo: Building2,\r\n  staff: Building2,\r\n  investor: User,\r\n  arranger: Briefcase,\r\n  introducer: UserPlus,\r\n  partner: Users,\r\n  commercial_partner: Building2,\r\n  lawyer: Scale,\r\n}\r\n\r\nconst PERSONA_LABELS: Record<string, string> = {\r\n  ceo: 'CEO',\r\n  staff: 'Staff',\r\n  investor: 'Investor',\r\n  arranger: 'Arranger',\r\n  introducer: 'Introducer',\r\n  partner: 'Partner',\r\n  commercial_partner: 'Commercial Partner',\r\n  lawyer: 'Lawyer',\r\n}\r\n\r\ninterface IdentityMenuProps {\r\n  profile: Profile\r\n  className?: string\r\n}\r\n\r\nexport function IdentityMenu({ profile, className }: IdentityMenuProps) {\r\n  const [mounted, setMounted] = useState(false)\r\n  const [open, setOpen] = useState(false)\r\n  const [isLoggingOut, setIsLoggingOut] = useState(false)\r\n  const { personas, activePersona, switchPersona, hasMultiplePersonas } = usePersona()\r\n  const { theme } = useTheme()\r\n  const router = useRouter()\r\n\r\n  // Hydration fix: Only apply theme after component mounts to avoid SSR mismatch\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  // Use mounted check to prevent hydration mismatch (server renders light, client may have dark)\r\n  const isDark = mounted && theme === 'staff-dark'\r\n\r\n  const handleLogout = async () => {\r\n    setIsLoggingOut(true)\r\n    const loginPath = '/versotech_main/login'\r\n\r\n    try {\r\n      await signOut()\r\n      router.push(loginPath)\r\n      window.location.href = loginPath\r\n    } catch (error) {\r\n      console.error('Logout failed:', error)\r\n      window.location.href = loginPath\r\n    }\r\n  }\r\n\r\n  const handleProfileClick = () => {\r\n    setOpen(false)\r\n    // Route to persona-specific profile page\r\n    // Each persona type has its own entity profile page with member management\r\n    const profileRoutes: Record<string, string> = {\r\n      ceo: '/versotech_main/ceo-profile',\r\n      staff: '/versotech_main/profile',\r\n      investor: '/versotech_main/profile',\r\n      arranger: '/versotech_main/arranger-profile',\r\n      lawyer: '/versotech_main/lawyer-profile',\r\n      introducer: '/versotech_main/introducer-profile',\r\n      partner: '/versotech_main/partner-profile',\r\n      commercial_partner: '/versotech_main/commercial-partner-profile',\r\n    }\r\n    const route = activePersona\r\n      ? profileRoutes[activePersona.persona_type] || '/versotech_main/profile'\r\n      : '/versotech_main/profile'\r\n    router.push(route)\r\n  }\r\n\r\n  const getInitials = (name: string | null | undefined) => {\r\n    if (!name) return 'U'\r\n    return name\r\n      .split(' ')\r\n      .map(part => part[0])\r\n      .filter(Boolean)\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2) || 'U'\r\n  }\r\n\r\n  // Render placeholder until mounted to prevent Radix UI hydration mismatch\r\n  if (!mounted) {\r\n    return (\r\n      <Button\r\n        variant=\"ghost\"\r\n        className={cn(\r\n          \"flex items-center gap-2 h-auto px-3 py-2\",\r\n          isDark ? 'hover:bg-white/10' : 'hover:bg-black/5',\r\n          className\r\n        )}\r\n      >\r\n        <Avatar className=\"h-8 w-8\">\r\n          <AvatarFallback className={cn(\r\n            \"text-xs\",\r\n            isDark ? 'bg-white/20 text-white' : 'bg-black/10 text-black'\r\n          )}>\r\n            {getInitials(profile.displayName)}\r\n          </AvatarFallback>\r\n        </Avatar>\r\n        <div className=\"text-left\">\r\n          <div className={cn(\"font-medium text-sm\", isDark ? \"text-white\" : \"text-black\")}>\r\n            {profile.displayName}\r\n          </div>\r\n        </div>\r\n        <ChevronDown className={cn(\"h-4 w-4\", isDark ? \"text-white/70\" : \"text-black/70\")} />\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <DropdownMenu open={open} onOpenChange={setOpen}>\r\n      <DropdownMenuTrigger asChild>\r\n        <Button\r\n          variant=\"ghost\"\r\n          className={cn(\r\n            \"flex items-center gap-2 h-auto px-3 py-2\",\r\n            isDark ? 'hover:bg-white/10' : 'hover:bg-black/5',\r\n            className\r\n          )}\r\n        >\r\n          <Avatar className=\"h-8 w-8\">\r\n            <AvatarImage src={profile.avatar || undefined} alt={profile.displayName} />\r\n            <AvatarFallback className={cn(\r\n              \"text-xs\",\r\n              isDark ? 'bg-white/20 text-white' : 'bg-black/10 text-black'\r\n            )}>\r\n              {getInitials(profile.displayName)}\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          <div className=\"text-left\">\r\n            <div className={cn(\"font-medium text-sm\", isDark ? \"text-white\" : \"text-black\")}>\r\n              {profile.displayName}\r\n            </div>\r\n          </div>\r\n          <ChevronDown className={cn(\r\n            \"h-4 w-4 transition-transform\",\r\n            isDark ? \"text-white/70\" : \"text-black/70\",\r\n            open && \"rotate-180\"\r\n          )} />\r\n        </Button>\r\n      </DropdownMenuTrigger>\r\n\r\n      <DropdownMenuContent\r\n        align=\"end\"\r\n        className={cn(\r\n          \"w-72\",\r\n          isDark ? \"bg-zinc-800 border-white/10\" : \"bg-white border-gray-200\"\r\n        )}\r\n      >\r\n        {/* User Info */}\r\n        <div className=\"px-3 py-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Avatar className=\"h-10 w-10\">\r\n              <AvatarImage src={profile.avatar || undefined} alt={profile.displayName} />\r\n              <AvatarFallback className={cn(\r\n                \"text-sm\",\r\n                isDark ? 'bg-white/20 text-white' : 'bg-black/10 text-black'\r\n              )}>\r\n                {getInitials(profile.displayName)}\r\n              </AvatarFallback>\r\n            </Avatar>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className={cn(\r\n                \"font-medium text-sm truncate\",\r\n                isDark ? \"text-white\" : \"text-gray-900\"\r\n              )}>\r\n                {profile.displayName}\r\n              </div>\r\n              <div className={cn(\r\n                \"text-xs truncate\",\r\n                isDark ? \"text-gray-400\" : \"text-gray-500\"\r\n              )}>\r\n                {profile.email}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Persona Switching - Only if multiple personas */}\r\n        {hasMultiplePersonas && personas.length > 0 && (\r\n          <>\r\n            <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n            <DropdownMenuLabel className={cn(\r\n              \"text-xs uppercase tracking-wider\",\r\n              isDark ? \"text-gray-500\" : \"text-gray-400\"\r\n            )}>\r\n              Switch Context\r\n            </DropdownMenuLabel>\r\n\r\n            {personas.map((persona) => {\r\n              const Icon = PERSONA_ICONS[persona.persona_type] || User\r\n              const isActive = activePersona?.entity_id === persona.entity_id\r\n\r\n              return (\r\n                <DropdownMenuItem\r\n                  key={persona.entity_id}\r\n                  onClick={() => {\r\n                    switchPersona(persona)\r\n                    setOpen(false)\r\n                  }}\r\n                  className={cn(\r\n                    \"flex items-center gap-3 py-2.5 cursor-pointer\",\r\n                    isDark\r\n                      ? \"focus:bg-white/10 focus:text-white\"\r\n                      : \"focus:bg-gray-100 focus:text-gray-900\",\r\n                    isActive && (isDark ? \"bg-white/5\" : \"bg-blue-50\")\r\n                  )}\r\n                >\r\n                  {persona.entity_logo_url ? (\r\n                    <div className=\"relative h-8 w-8 rounded-full overflow-hidden flex-shrink-0\">\r\n                      <Image\r\n                        src={persona.entity_logo_url}\r\n                        alt={persona.entity_name}\r\n                        fill\r\n                        className=\"object-cover\"\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <div className={cn(\r\n                      \"h-8 w-8 rounded-full flex items-center justify-center flex-shrink-0\",\r\n                      isDark ? \"bg-white/10\" : \"bg-gray-100\"\r\n                    )}>\r\n                      <Icon className=\"h-4 w-4\" />\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className={cn(\r\n                      \"text-sm font-medium truncate\",\r\n                      isDark ? \"text-white\" : \"text-gray-900\"\r\n                    )}>\r\n                      {persona.entity_name}\r\n                    </div>\r\n                    <div className={cn(\r\n                      \"text-xs truncate\",\r\n                      isDark ? \"text-gray-400\" : \"text-gray-500\"\r\n                    )}>\r\n                      {persona.persona_type === 'staff'\r\n                        ? persona.role_in_entity\r\n                        : PERSONA_LABELS[persona.persona_type]}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {isActive && (\r\n                    <Check className={cn(\r\n                      \"h-4 w-4 flex-shrink-0\",\r\n                      isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                    )} />\r\n                  )}\r\n                </DropdownMenuItem>\r\n              )\r\n            })}\r\n          </>\r\n        )}\r\n\r\n        {/* Single Persona - Show context */}\r\n        {!hasMultiplePersonas && activePersona && (\r\n          <>\r\n            <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n            <div className=\"px-3 py-2\">\r\n              <div className={cn(\r\n                \"text-xs uppercase tracking-wider mb-1.5\",\r\n                isDark ? \"text-gray-500\" : \"text-gray-400\"\r\n              )}>\r\n                Current Context\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                {activePersona.entity_logo_url ? (\r\n                  <div className=\"relative h-6 w-6 rounded-full overflow-hidden flex-shrink-0\">\r\n                    <Image\r\n                      src={activePersona.entity_logo_url}\r\n                      alt={activePersona.entity_name}\r\n                      fill\r\n                      className=\"object-cover\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className={cn(\r\n                    \"h-6 w-6 rounded-full flex items-center justify-center flex-shrink-0\",\r\n                    isDark ? \"bg-white/10\" : \"bg-gray-100\"\r\n                  )}>\r\n                    {(() => {\r\n                      const Icon = PERSONA_ICONS[activePersona.persona_type] || User\r\n                      return <Icon className=\"h-3 w-3\" />\r\n                    })()}\r\n                  </div>\r\n                )}\r\n                <div className={cn(\r\n                  \"text-sm\",\r\n                  isDark ? \"text-white\" : \"text-gray-900\"\r\n                )}>\r\n                  {activePersona.entity_name}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        <DropdownMenuSeparator className={isDark ? \"bg-white/10\" : \"bg-gray-100\"} />\r\n\r\n        {/* Actions */}\r\n        <DropdownMenuItem\r\n          onClick={handleProfileClick}\r\n          className={isDark ? \"focus:bg-white/10 focus:text-white\" : \"\"}\r\n        >\r\n          <Settings className=\"mr-2 h-4 w-4\" />\r\n          Profile Settings\r\n        </DropdownMenuItem>\r\n\r\n        <DropdownMenuItem\r\n          onClick={handleLogout}\r\n          disabled={isLoggingOut}\r\n          className=\"text-red-600 focus:text-red-600\"\r\n        >\r\n          <LogOut className=\"mr-2 h-4 w-4\" />\r\n          {isLoggingOut ? 'Signing out...' : 'Sign Out'}\r\n        </DropdownMenuItem>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5609, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = DialogPrimitive.Root\nconst SheetTrigger = DialogPrimitive.Trigger\nconst SheetClose = DialogPrimitive.Close\nconst SheetPortal = DialogPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = DialogPrimitive.Overlay.displayName\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content> {\n  side?: \"top\" | \"bottom\" | \"left\" | \"right\"\n}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        // Theme-aware: uses CSS variables, can be overridden with className\n        \"fixed z-50 gap-4 bg-background border-border p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n        {\n          \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\":\n            side === \"top\",\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\":\n            side === \"bottom\",\n          \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\":\n            side === \"left\",\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-xl\":\n            side === \"right\",\n        },\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none hover:bg-accent p-1\">\n        <XIcon className=\"h-4 w-4 text-foreground\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = DialogPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = DialogPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,QAAQ,oMAAoB;AAClC,MAAM,eAAe,uMAAuB;AAC5C,MAAM,aAAa,qMAAqB;AACxC,MAAM,cAAc,sMAAsB;AAE1C,MAAM,6BAAe,kMAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,uMAAuB;QACtB,WAAW,IAAA,mJAAE,EACX,0JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,aAAa,WAAW,GAAG,uMAAuB,CAAC,WAAW;AAO9D,MAAM,6BAAe,kMAAgB,OAGnC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,oNAAC;;0BACC,oNAAC;;;;;0BACD,oNAAC,uMAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,mJAAE,EACX,oEAAoE;gBACpE,kNACA;oBACE,qGACE,SAAS;oBACX,8GACE,SAAS;oBACX,iIACE,SAAS;oBACX,oIACE,SAAS;gBACb,GACA;gBAED,GAAG,KAAK;;oBAER;kCACD,oNAAC,qMAAqB;wBAAC,WAAU;;0CAC/B,oNAAC,mOAAK;gCAAC,WAAU;;;;;;0CACjB,oNAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,uMAAuB,CAAC,WAAW;AAE9D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,oNAAC;QACC,WAAW,IAAA,mJAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,oNAAC;QACC,WAAW,IAAA,mJAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,kMAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,yCAAyC;QACtD,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG,qMAAqB,CAAC,WAAW;AAE1D,MAAM,iCAAmB,kMAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,2MAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,2MAA2B,CAAC,WAAW"}},
    {"offset": {"line": 5774, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/layout/unified-app-layout.tsx"],"sourcesContent":["'use client'\n\nimport { ReactNode, useState, useEffect } from 'react'\nimport { ThemeProvider, useTheme } from '@/components/theme-provider'\nimport { GlobalKeyboardShortcuts } from './global-keyboard-shortcuts'\nimport { PersonaSidebar, MobileSidebarContent } from './persona-sidebar'\nimport { NotificationCenter } from './notification-center'\nimport { IdentityMenu } from './identity-menu'\nimport { usePersona } from '@/contexts/persona-context'\nimport { AuthUser } from '@/lib/auth'\nimport { Sun, Moon, Monitor, Menu } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Sheet, SheetContent, SheetTitle } from '@/components/ui/sheet'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\n\ninterface UnifiedAppLayoutProps {\n  children: ReactNode\n  profile: AuthUser\n}\n\n// Theme toggle component\n// FIX: To prevent hydration mismatch from Radix UI's random ID generation,\n// render a static placeholder during SSR and swap to DropdownMenu after mount.\nfunction ThemeToggle() {\n  const [mounted, setMounted] = useState(false)\n  const { theme, preference, setPreference } = useTheme()\n\n  // Wait for client-side hydration to complete\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  // Compute styling based on theme\n  const isDark = theme === 'staff-dark'\n\n  // During SSR/initial render, show a static button placeholder (no Radix IDs)\n  // This prevents hydration mismatch from Radix generating different IDs\n  if (!mounted) {\n    return (\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"text-gray-500 hover:text-gray-900 hover:bg-gray-100\"\n        aria-label=\"Toggle theme\"\n      >\n        <Sun className=\"h-5 w-5\" />\n        <span className=\"sr-only\">Toggle theme</span>\n      </Button>\n    )\n  }\n\n  // After mount, render the full interactive DropdownMenu\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className={isDark ? 'text-zinc-400 hover:text-white hover:bg-white/10' : 'text-gray-500 hover:text-gray-900 hover:bg-gray-100'}\n        >\n          {theme === 'light' ? (\n            <Sun className=\"h-5 w-5\" />\n          ) : (\n            <Moon className=\"h-5 w-5\" />\n          )}\n          <span className=\"sr-only\">Toggle theme</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className={isDark ? 'bg-zinc-900 border-white/10' : ''}>\n        <DropdownMenuItem\n          onClick={() => setPreference('light')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'light' ? 'font-medium' : ''}`}\n        >\n          <Sun className=\"mr-2 h-4 w-4\" />\n          Light\n          {preference === 'light' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setPreference('dark')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'dark' ? 'font-medium' : ''}`}\n        >\n          <Moon className=\"mr-2 h-4 w-4\" />\n          Dark\n          {preference === 'dark' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n        <DropdownMenuItem\n          onClick={() => setPreference('auto')}\n          className={`${isDark ? 'text-zinc-300 focus:text-white focus:bg-white/10' : ''} ${preference === 'auto' ? 'font-medium' : ''}`}\n        >\n          <Monitor className=\"mr-2 h-4 w-4\" />\n          Auto (by persona)\n          {preference === 'auto' && <span className=\"ml-auto text-xs opacity-60\">Active</span>}\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n\n// Inner layout component that uses theme context\n// IMPORTANT: Main layout elements use CSS classes (app-*) that respond to .staff-dark\n// on the html element. This prevents flash during SSR/hydration because the server-rendered\n// HTML has static class names, and the actual colors come from CSS cascade.\nfunction UnifiedAppLayoutInner({ children, profile }: UnifiedAppLayoutProps) {\n  const { isLoading } = usePersona()\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false)\n  const { theme } = useTheme()\n\n  // Determine if dark mode for Sheet styling\n  const isDark = theme === 'staff-dark'\n\n  if (isLoading) {\n    // Use CSS classes that respond to .staff-dark - prevents SSR flash\n    return (\n      <div className=\"flex h-screen items-center justify-center app-loading-bg\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 app-loading-spinner\"></div>\n      </div>\n    )\n  }\n\n  return (\n    // Use app-main-bg CSS class - responds to .staff-dark on html, preventing SSR flash\n    <div className=\"flex h-screen min-h-screen overflow-hidden app-main-bg\">\n      {/* Global Keyboard Shortcuts */}\n      <GlobalKeyboardShortcuts brand=\"versotech\" role={profile.role} />\n\n      {/* Persona-aware Sidebar */}\n      <PersonaSidebar />\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header - uses app-header CSS class for SSR-safe theming */}\n        {/* Responsive padding: tighter on mobile (px-4), normal on desktop (px-6) */}\n        <header className=\"app-header px-4 md:px-6 py-4 flex items-center justify-between\">\n          {/* Mobile hamburger - visible only on mobile */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"md:hidden h-10 w-10\"\n            onClick={() => setMobileMenuOpen(true)}\n            aria-label=\"Open menu\"\n          >\n            <Menu className=\"h-5 w-5\" />\n          </Button>\n\n          {/* Left spacer for centering - hidden on mobile */}\n          <div className=\"hidden md:block w-32\" />\n\n          {/* Center - Brand name */}\n          <h1\n            style={{ fontFamily: 'var(--font-spartan), sans-serif' }}\n            className=\"text-xl font-extrabold tracking-wide uppercase app-header-text\"\n          >\n            VERSOTECH\n          </h1>\n\n          {/* Right side - Utilities */}\n          <div className=\"flex items-center space-x-2\">\n            <ThemeToggle />\n            <NotificationCenter />\n            <IdentityMenu profile={profile} />\n          </div>\n        </header>\n\n        {/* Mobile Navigation Sheet */}\n        <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n          <SheetContent\n            side=\"left\"\n            className={`w-[calc(100%-1rem)] max-w-[280px] p-0 ${isDark ? 'bg-zinc-950 border-white/10' : 'bg-white border-gray-200'}`}\n          >\n            {/* Visually hidden title for accessibility - required by Radix Dialog */}\n            <SheetTitle className=\"sr-only\">Navigation Menu</SheetTitle>\n            <MobileSidebarContent onClose={() => setMobileMenuOpen(false)} />\n          </SheetContent>\n        </Sheet>\n\n        {/* Content Area - uses app-content CSS class for SSR-safe theming */}\n        <main className=\"flex-1 overflow-y-auto scrollbar-hide app-content\">\n          <div className=\"min-h-full app-content-inner\">\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  )\n}\n\nexport function UnifiedAppLayout({ children, profile }: UnifiedAppLayoutProps) {\n  // Per PHASE2_BASE_PLAN.md Section 11.6:\n  // \"Default to light theme (investor style) for ALL users\"\n  // Theme is USER CHOICE, not persona-based. Light is always default.\n  // Users can toggle to dark mode if they prefer.\n  const defaultTheme = 'light' as const\n\n  return (\n    <ThemeProvider defaultTheme={defaultTheme}>\n      <UnifiedAppLayoutInner profile={profile}>\n        {children}\n      </UnifiedAppLayoutInner>\n    </ThemeProvider>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6217, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/commercial-partner/proxy-mode-context.tsx"],"sourcesContent":["'use client'\n\nimport { createContext, useContext, useState, useCallback, ReactNode, useEffect } from 'react'\n\ninterface Client {\n  id: string\n  name: string\n  investor_type?: string\n  kyc_status?: string\n}\n\ninterface ProxyModeContextType {\n  isProxyMode: boolean\n  selectedClient: Client | null\n  availableClients: Client[]\n  commercialPartnerName: string | null\n  enterProxyMode: (client: Client) => void\n  exitProxyMode: () => void\n  setAvailableClients: (clients: Client[]) => void\n  setCommercialPartnerName: (name: string) => void\n}\n\nconst ProxyModeContext = createContext<ProxyModeContextType | undefined>(undefined)\n\nconst PROXY_MODE_STORAGE_KEY = 'cp_proxy_mode_client'\n\nexport function ProxyModeProvider({ children }: { children: ReactNode }) {\n  const [isProxyMode, setIsProxyMode] = useState(false)\n  const [selectedClient, setSelectedClient] = useState<Client | null>(null)\n  const [availableClients, setAvailableClients] = useState<Client[]>([])\n  const [commercialPartnerName, setCommercialPartnerName] = useState<string | null>(null)\n\n  // Restore from session storage on mount\n  useEffect(() => {\n    const stored = sessionStorage.getItem(PROXY_MODE_STORAGE_KEY)\n    if (stored) {\n      try {\n        const client = JSON.parse(stored)\n        setSelectedClient(client)\n        setIsProxyMode(true)\n      } catch {\n        sessionStorage.removeItem(PROXY_MODE_STORAGE_KEY)\n      }\n    }\n  }, [])\n\n  const enterProxyMode = useCallback((client: Client) => {\n    setSelectedClient(client)\n    setIsProxyMode(true)\n    sessionStorage.setItem(PROXY_MODE_STORAGE_KEY, JSON.stringify(client))\n  }, [])\n\n  const exitProxyMode = useCallback(() => {\n    setSelectedClient(null)\n    setIsProxyMode(false)\n    sessionStorage.removeItem(PROXY_MODE_STORAGE_KEY)\n  }, [])\n\n  return (\n    <ProxyModeContext.Provider\n      value={{\n        isProxyMode,\n        selectedClient,\n        availableClients,\n        commercialPartnerName,\n        enterProxyMode,\n        exitProxyMode,\n        setAvailableClients,\n        setCommercialPartnerName\n      }}\n    >\n      {children}\n    </ProxyModeContext.Provider>\n  )\n}\n\nexport function useProxyMode() {\n  const context = useContext(ProxyModeContext)\n  if (context === undefined) {\n    throw new Error('useProxyMode must be used within a ProxyModeProvider')\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAsBA,MAAM,iCAAmB,IAAA,qMAAa,EAAmC;AAEzE,MAAM,yBAAyB;AAExB,SAAS,kBAAkB,EAAE,QAAQ,EAA2B;;IACrE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gMAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gMAAQ,EAAgB;IACpE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,gMAAQ,EAAW,EAAE;IACrE,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,gMAAQ,EAAgB;IAElF,wCAAwC;IACxC,IAAA,iMAAS;uCAAC;YACR,MAAM,SAAS,eAAe,OAAO,CAAC;YACtC,IAAI,QAAQ;gBACV,IAAI;oBACF,MAAM,SAAS,KAAK,KAAK,CAAC;oBAC1B,kBAAkB;oBAClB,eAAe;gBACjB,EAAE,OAAM;oBACN,eAAe,UAAU,CAAC;gBAC5B;YACF;QACF;sCAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,mMAAW;yDAAC,CAAC;YAClC,kBAAkB;YAClB,eAAe;YACf,eAAe,OAAO,CAAC,wBAAwB,KAAK,SAAS,CAAC;QAChE;wDAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,mMAAW;wDAAC;YAChC,kBAAkB;YAClB,eAAe;YACf,eAAe,UAAU,CAAC;QAC5B;uDAAG,EAAE;IAEL,qBACE,oNAAC,iBAAiB,QAAQ;QACxB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;GAhDgB;KAAA;AAkDT,SAAS;;IACd,MAAM,UAAU,IAAA,kMAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 6304, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/commercial-partner/proxy-mode-banner.tsx"],"sourcesContent":["'use client'\n\nimport { useProxyMode } from './proxy-mode-context'\nimport { Button } from '@/components/ui/button'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { UserCircle, X, Users } from 'lucide-react'\nimport { useEffect, useState } from 'react'\n\ninterface ProxyModeBannerProps {\n  className?: string\n}\n\nexport function ProxyModeBanner({ className }: ProxyModeBannerProps) {\n  const {\n    isProxyMode,\n    selectedClient,\n    availableClients,\n    commercialPartnerName,\n    enterProxyMode,\n    exitProxyMode,\n    setAvailableClients,\n    setCommercialPartnerName\n  } = useProxyMode()\n\n  const [isLoading, setIsLoading] = useState(false)\n  const [canProxy, setCanProxy] = useState(false)\n\n  // Fetch available clients on mount\n  useEffect(() => {\n    async function fetchClients() {\n      try {\n        const response = await fetch('/api/commercial-partners/proxy-subscribe')\n        if (response.ok) {\n          const data = await response.json()\n          setAvailableClients(data.clients || [])\n          setCommercialPartnerName(data.commercial_partner_name || null)\n          setCanProxy(data.can_execute_for_clients || false)\n        }\n      } catch (error) {\n        console.error('Failed to fetch proxy clients:', error)\n      }\n    }\n    fetchClients()\n  }, [setAvailableClients, setCommercialPartnerName])\n\n  // Don't render if user can't proxy\n  if (!canProxy && !isProxyMode) {\n    return null\n  }\n\n  const handleClientChange = (clientId: string) => {\n    const client = availableClients.find(c => c.id === clientId)\n    if (client) {\n      enterProxyMode(client)\n    }\n  }\n\n  if (isProxyMode && selectedClient) {\n    return (\n      <div className={`bg-amber-500 text-amber-950 px-4 py-2 flex items-center justify-between ${className}`}>\n        <div className=\"flex items-center gap-3\">\n          <UserCircle className=\"h-5 w-5\" />\n          <span className=\"font-medium\">\n            Acting on behalf of: <strong>{selectedClient.name}</strong>\n          </span>\n          {selectedClient.investor_type && (\n            <span className=\"text-amber-800 text-sm\">\n              ({selectedClient.investor_type})\n            </span>\n          )}\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Select value={selectedClient.id} onValueChange={handleClientChange}>\n            <SelectTrigger className=\"w-[200px] bg-amber-400 border-amber-600 text-amber-950\">\n              <SelectValue placeholder=\"Switch client\" />\n            </SelectTrigger>\n            <SelectContent>\n              {availableClients.map(client => (\n                <SelectItem key={client.id} value={client.id}>\n                  {client.name}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={exitProxyMode}\n            className=\"text-amber-950 hover:bg-amber-400\"\n          >\n            <X className=\"h-4 w-4 mr-1\" />\n            Exit Proxy Mode\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  // Not in proxy mode - show option to enter\n  if (availableClients.length > 0) {\n    return (\n      <div className={`bg-slate-100 border-b border-slate-200 px-4 py-2 flex items-center justify-between ${className}`}>\n        <div className=\"flex items-center gap-3 text-slate-600\">\n          <Users className=\"h-5 w-5\" />\n          <span className=\"text-sm\">\n            Act on behalf of a client\n          </span>\n        </div>\n        <Select onValueChange={handleClientChange}>\n          <SelectTrigger className=\"w-[200px]\">\n            <SelectValue placeholder=\"Select client...\" />\n          </SelectTrigger>\n          <SelectContent>\n            {availableClients.map(client => (\n              <SelectItem key={client.id} value={client.id}>\n                {client.name}\n                {client.kyc_status !== 'approved' && client.kyc_status !== 'verified' && (\n                  <span className=\"text-xs text-amber-600 ml-2\">(KYC pending)</span>\n                )}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n    )\n  }\n\n  return null\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6584, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/contexts/tour-context.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { createContext, useContext, useState, useCallback, useEffect, ReactNode, useRef } from 'react'\r\n\r\n// Storage key for tour progress persistence\r\nconst STORAGE_KEY = 'verso_tour_progress'\r\n\r\n// Analytics interface for tracking tour events\r\ninterface TourAnalytics {\r\n  onStepView?: (step: number, stepId: string) => void\r\n  onStepComplete?: (step: number, stepId: string, durationMs: number) => void\r\n  onTourComplete?: (totalDurationMs: number) => void\r\n  onTourSkip?: (atStep: number) => void\r\n}\r\n\r\n// Stored progress for resumption\r\ninterface StoredProgress {\r\n  currentStep: number\r\n  isPaused: boolean\r\n  startTime: number\r\n  lastActiveTime: number\r\n}\r\n\r\ninterface TourContextType {\r\n  // Core state\r\n  isActive: boolean\r\n  currentStep: number\r\n  totalSteps: number\r\n  isPaused: boolean\r\n\r\n  // Core actions\r\n  startTour: () => void\r\n  nextStep: () => void\r\n  prevStep: () => void\r\n  skipTour: () => Promise<void>\r\n  completeTour: () => Promise<void>\r\n\r\n  // Enhanced actions\r\n  goToStep: (step: number) => void\r\n  restartTour: () => void\r\n  pauseTour: () => void\r\n  resumeTour: () => void\r\n\r\n  // Step IDs for analytics (optional)\r\n  setStepIds?: (ids: string[]) => void\r\n}\r\n\r\nconst TourContext = createContext<TourContextType | null>(null)\r\n\r\nexport function useTour() {\r\n  const context = useContext(TourContext)\r\n  if (!context) {\r\n    throw new Error('useTour must be used within TourProvider')\r\n  }\r\n  return context\r\n}\r\n\r\n// Safe hook that returns null outside provider (for optional usage)\r\nexport function useTourOptional() {\r\n  return useContext(TourContext)\r\n}\r\n\r\ninterface TourProviderProps {\r\n  children: ReactNode\r\n  totalSteps: number\r\n  onComplete: () => Promise<void>\r\n  analytics?: TourAnalytics\r\n  stepIds?: string[]\r\n  enableKeyboardNav?: boolean\r\n  enablePersistence?: boolean\r\n}\r\n\r\nexport function TourProvider({\r\n  children,\r\n  totalSteps,\r\n  onComplete,\r\n  analytics,\r\n  stepIds = [],\r\n  enableKeyboardNav = true,\r\n  enablePersistence = true\r\n}: TourProviderProps) {\r\n  const [isActive, setIsActive] = useState(false)\r\n  const [currentStep, setCurrentStep] = useState(0)\r\n  const [isPaused, setIsPaused] = useState(false)\r\n  const [stepIdsState, setStepIdsState] = useState<string[]>(stepIds)\r\n\r\n  // Timing refs\r\n  const tourStartTime = useRef<number | null>(null)\r\n  const stepStartTime = useRef<number | null>(null)\r\n\r\n  // Load persisted progress on mount\r\n  useEffect(() => {\r\n    if (!enablePersistence) return\r\n\r\n    try {\r\n      const stored = localStorage.getItem(STORAGE_KEY)\r\n      if (stored) {\r\n        const progress: StoredProgress = JSON.parse(stored)\r\n        // Only resume if within last 24 hours\r\n        const hoursSinceActive = (Date.now() - progress.lastActiveTime) / (1000 * 60 * 60)\r\n        if (hoursSinceActive < 24 && progress.currentStep > 0 && progress.currentStep < totalSteps) {\r\n          setCurrentStep(progress.currentStep)\r\n          setIsPaused(true)\r\n          // Don't auto-start, let user explicitly resume\r\n        }\r\n      }\r\n    } catch {\r\n      // Ignore localStorage errors\r\n    }\r\n  }, [enablePersistence, totalSteps])\r\n\r\n  // Persist progress whenever it changes\r\n  useEffect(() => {\r\n    if (!enablePersistence || !isActive) return\r\n\r\n    try {\r\n      const progress: StoredProgress = {\r\n        currentStep,\r\n        isPaused,\r\n        startTime: tourStartTime.current || Date.now(),\r\n        lastActiveTime: Date.now()\r\n      }\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(progress))\r\n    } catch {\r\n      // Ignore localStorage errors\r\n    }\r\n  }, [currentStep, isPaused, isActive, enablePersistence])\r\n\r\n  // Track step views\r\n  useEffect(() => {\r\n    if (isActive && analytics?.onStepView) {\r\n      const stepId = stepIdsState[currentStep] || `step-${currentStep}`\r\n      analytics.onStepView(currentStep, stepId)\r\n      stepStartTime.current = Date.now()\r\n    }\r\n  }, [currentStep, isActive, analytics, stepIdsState])\r\n\r\n  const clearPersistedProgress = useCallback(() => {\r\n    if (enablePersistence) {\r\n      try {\r\n        localStorage.removeItem(STORAGE_KEY)\r\n      } catch {\r\n        // Ignore\r\n      }\r\n    }\r\n  }, [enablePersistence])\r\n\r\n  const startTour = useCallback(() => {\r\n    setCurrentStep(0)\r\n    setIsActive(true)\r\n    setIsPaused(false)\r\n    tourStartTime.current = Date.now()\r\n    stepStartTime.current = Date.now()\r\n  }, [])\r\n\r\n  const nextStep = useCallback(() => {\r\n    // Track step completion\r\n    if (analytics?.onStepComplete && stepStartTime.current) {\r\n      const stepId = stepIdsState[currentStep] || `step-${currentStep}`\r\n      const duration = Date.now() - stepStartTime.current\r\n      analytics.onStepComplete(currentStep, stepId, duration)\r\n    }\r\n\r\n    if (currentStep < totalSteps - 1) {\r\n      setCurrentStep(prev => prev + 1)\r\n      stepStartTime.current = Date.now()\r\n    } else {\r\n      // Last step - complete the tour\r\n      setIsActive(false)\r\n      setCurrentStep(0)\r\n      setIsPaused(false)\r\n      clearPersistedProgress()\r\n\r\n      // Track tour completion\r\n      if (analytics?.onTourComplete && tourStartTime.current) {\r\n        const totalDuration = Date.now() - tourStartTime.current\r\n        analytics.onTourComplete(totalDuration)\r\n      }\r\n\r\n      onComplete()\r\n    }\r\n  }, [currentStep, totalSteps, onComplete, analytics, stepIdsState, clearPersistedProgress])\r\n\r\n  const prevStep = useCallback(() => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep(prev => prev - 1)\r\n      stepStartTime.current = Date.now()\r\n    }\r\n  }, [currentStep])\r\n\r\n  const skipTour = useCallback(async () => {\r\n    // Track skip event\r\n    if (analytics?.onTourSkip) {\r\n      analytics.onTourSkip(currentStep)\r\n    }\r\n\r\n    setIsActive(false)\r\n    setCurrentStep(0)\r\n    setIsPaused(false)\r\n    clearPersistedProgress()\r\n    await onComplete()\r\n  }, [onComplete, analytics, currentStep, clearPersistedProgress])\r\n\r\n  const completeTour = useCallback(async () => {\r\n    // Track tour completion\r\n    if (analytics?.onTourComplete && tourStartTime.current) {\r\n      const totalDuration = Date.now() - tourStartTime.current\r\n      analytics.onTourComplete(totalDuration)\r\n    }\r\n\r\n    setIsActive(false)\r\n    setCurrentStep(0)\r\n    setIsPaused(false)\r\n    clearPersistedProgress()\r\n    await onComplete()\r\n  }, [onComplete, analytics, clearPersistedProgress])\r\n\r\n  // Enhanced actions\r\n  const goToStep = useCallback((step: number) => {\r\n    if (step >= 0 && step < totalSteps) {\r\n      setCurrentStep(step)\r\n      stepStartTime.current = Date.now()\r\n      if (!isActive) {\r\n        setIsActive(true)\r\n        setIsPaused(false)\r\n        tourStartTime.current = Date.now()\r\n      }\r\n    }\r\n  }, [totalSteps, isActive])\r\n\r\n  const restartTour = useCallback(() => {\r\n    setCurrentStep(0)\r\n    setIsActive(true)\r\n    setIsPaused(false)\r\n    tourStartTime.current = Date.now()\r\n    stepStartTime.current = Date.now()\r\n    clearPersistedProgress()\r\n  }, [clearPersistedProgress])\r\n\r\n  const pauseTour = useCallback(() => {\r\n    if (isActive) {\r\n      setIsPaused(true)\r\n    }\r\n  }, [isActive])\r\n\r\n  const resumeTour = useCallback(() => {\r\n    if (isPaused) {\r\n      setIsPaused(false)\r\n      setIsActive(true)\r\n      stepStartTime.current = Date.now()\r\n    }\r\n  }, [isPaused])\r\n\r\n  const setStepIds = useCallback((ids: string[]) => {\r\n    setStepIdsState(ids)\r\n  }, [])\r\n\r\n  // Keyboard navigation - using refs to avoid stale closures\r\n  const skipTourRef = useRef(skipTour)\r\n  const nextStepRef = useRef(nextStep)\r\n  const prevStepRef = useRef(prevStep)\r\n\r\n  // Keep refs updated\r\n  useEffect(() => {\r\n    skipTourRef.current = skipTour\r\n    nextStepRef.current = nextStep\r\n    prevStepRef.current = prevStep\r\n  }, [skipTour, nextStep, prevStep])\r\n\r\n  useEffect(() => {\r\n    if (!enableKeyboardNav || !isActive || isPaused) return\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Don't interfere with input elements\r\n      if (\r\n        e.target instanceof HTMLInputElement ||\r\n        e.target instanceof HTMLTextAreaElement ||\r\n        e.target instanceof HTMLSelectElement\r\n      ) {\r\n        return\r\n      }\r\n\r\n      switch (e.key) {\r\n        case 'Escape':\r\n          e.preventDefault()\r\n          skipTourRef.current()\r\n          break\r\n        case 'ArrowRight':\r\n        case 'Enter':\r\n          e.preventDefault()\r\n          nextStepRef.current()\r\n          break\r\n        case 'ArrowLeft':\r\n          e.preventDefault()\r\n          prevStepRef.current()\r\n          break\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', handleKeyDown)\r\n    return () => window.removeEventListener('keydown', handleKeyDown)\r\n  }, [isActive, isPaused, enableKeyboardNav])\r\n\r\n  return (\r\n    <TourContext.Provider value={{\r\n      // Core state\r\n      isActive,\r\n      currentStep,\r\n      totalSteps,\r\n      isPaused,\r\n\r\n      // Core actions\r\n      startTour,\r\n      nextStep,\r\n      prevStep,\r\n      skipTour,\r\n      completeTour,\r\n\r\n      // Enhanced actions\r\n      goToStep,\r\n      restartTour,\r\n      pauseTour,\r\n      resumeTour,\r\n\r\n      // Step IDs setter\r\n      setStepIds\r\n    }}>\r\n      {children}\r\n    </TourContext.Provider>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6935, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/tour/tour-spotlight.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\n\r\ninterface TourSpotlightProps {\r\n  targetSelector: string\r\n  isVisible: boolean\r\n  padding?: number\r\n}\r\n\r\n/**\r\n * Tour Spotlight Component - Premium Glass Morphism Edition\r\n *\r\n * Uses a 4-div overlay approach for crisp rectangular cutouts with\r\n * glass morphism effects and enhanced animations:\r\n *\r\n * ┌────────────────────────────────────────┐\r\n * │              TOP OVERLAY               │\r\n * │         (blur + 55% opacity)           │\r\n * ├────────┬──────────────────┬────────────┤\r\n * │  LEFT  │   TARGET AREA    │   RIGHT    │\r\n * │OVERLAY │ ┌──────────────┐ │  OVERLAY   │\r\n * │        │ │  Inner Glow  │ │            │\r\n * │        │ └──────────────┘ │            │\r\n * ├────────┴──────────────────┴────────────┤\r\n * │            BOTTOM OVERLAY              │\r\n * └────────────────────────────────────────┘\r\n *\r\n * Features:\r\n * - Glass morphism backdrop blur on overlays\r\n * - Animated glow ring with pulsing effect\r\n * - Inner highlight ring for depth\r\n * - Staggered entry animations\r\n */\r\nexport function TourSpotlight({ targetSelector, isVisible, padding = 8 }: TourSpotlightProps) {\r\n  const [targetRect, setTargetRect] = useState<DOMRect | null>(null)\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!isVisible || !mounted) {\r\n      setTargetRect(null)\r\n      return\r\n    }\r\n\r\n    const updateRect = () => {\r\n      const element = document.querySelector(targetSelector)\r\n      if (element) {\r\n        element.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' })\r\n        setTimeout(() => {\r\n          setTargetRect(element.getBoundingClientRect())\r\n        }, 100)\r\n      }\r\n    }\r\n\r\n    const timeoutId = setTimeout(updateRect, 50)\r\n    window.addEventListener('resize', updateRect)\r\n    window.addEventListener('scroll', updateRect, { passive: true })\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId)\r\n      window.removeEventListener('resize', updateRect)\r\n      window.removeEventListener('scroll', updateRect)\r\n    }\r\n  }, [targetSelector, isVisible, mounted])\r\n\r\n  if (!mounted || !isVisible || !targetRect) return null\r\n\r\n  // Calculate cutout dimensions with padding\r\n  const cutout = {\r\n    top: targetRect.top - padding,\r\n    left: targetRect.left - padding,\r\n    width: targetRect.width + padding * 2,\r\n    height: targetRect.height + padding * 2,\r\n    right: targetRect.right + padding,\r\n    bottom: targetRect.bottom + padding,\r\n  }\r\n\r\n  // Lighter overlay for better context visibility\r\n  const overlayColor = 'rgba(0, 0, 0, 0.55)'\r\n  const borderRadius = 12\r\n\r\n  // Staggered animation delays for premium feel\r\n  const staggerDelays = {\r\n    top: 0,\r\n    bottom: 0.05,\r\n    left: 0.1,\r\n    right: 0.15,\r\n    ring: 0.2,\r\n    innerRing: 0.25,\r\n  }\r\n\r\n  return createPortal(\r\n    <AnimatePresence>\r\n      {isVisible && (\r\n        <>\r\n          {/* TOP OVERLAY - Glass morphism with blur */}\r\n          <motion.div\r\n            key=\"spotlight-top\"\r\n            initial={{ opacity: 0, y: -10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.top, ease: 'easeOut' }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: 0,\r\n              left: 0,\r\n              right: 0,\r\n              height: Math.max(0, cutout.top),\r\n              background: overlayColor,\r\n              backdropFilter: 'blur(4px)',\r\n              WebkitBackdropFilter: 'blur(4px)',\r\n              zIndex: 9997,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n\r\n          {/* BOTTOM OVERLAY - Glass morphism with blur */}\r\n          <motion.div\r\n            key=\"spotlight-bottom\"\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 10 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.bottom, ease: 'easeOut' }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.bottom,\r\n              left: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              background: overlayColor,\r\n              backdropFilter: 'blur(4px)',\r\n              WebkitBackdropFilter: 'blur(4px)',\r\n              zIndex: 9997,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n\r\n          {/* LEFT OVERLAY - Glass morphism with blur */}\r\n          <motion.div\r\n            key=\"spotlight-left\"\r\n            initial={{ opacity: 0, x: -10 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: -10 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.left, ease: 'easeOut' }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.top,\r\n              left: 0,\r\n              width: Math.max(0, cutout.left),\r\n              height: cutout.height,\r\n              background: overlayColor,\r\n              backdropFilter: 'blur(4px)',\r\n              WebkitBackdropFilter: 'blur(4px)',\r\n              zIndex: 9997,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n\r\n          {/* RIGHT OVERLAY - Glass morphism with blur */}\r\n          <motion.div\r\n            key=\"spotlight-right\"\r\n            initial={{ opacity: 0, x: 10 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: 10 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.right, ease: 'easeOut' }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.top,\r\n              left: cutout.right,\r\n              right: 0,\r\n              height: cutout.height,\r\n              background: overlayColor,\r\n              backdropFilter: 'blur(4px)',\r\n              WebkitBackdropFilter: 'blur(4px)',\r\n              zIndex: 9997,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n\r\n          {/* Outer pulsing highlight ring with enhanced glow animation */}\r\n          <motion.div\r\n            key=\"spotlight-ring\"\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{\r\n              opacity: 1,\r\n              scale: [1, 1.04, 1],\r\n              boxShadow: [\r\n                '0 0 0 4px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.3)',\r\n                '0 0 0 8px rgba(59, 130, 246, 0.2), 0 0 40px rgba(59, 130, 246, 0.5)',\r\n                '0 0 0 4px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.3)',\r\n              ]\r\n            }}\r\n            exit={{ opacity: 0, scale: 0.9 }}\r\n            transition={{\r\n              opacity: { duration: 0.4, delay: staggerDelays.ring },\r\n              scale: { repeat: Infinity, duration: 2, ease: 'easeInOut' },\r\n              boxShadow: { repeat: Infinity, duration: 2, ease: 'easeInOut' }\r\n            }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.top,\r\n              left: cutout.left,\r\n              width: cutout.width,\r\n              height: cutout.height,\r\n              borderRadius: borderRadius,\r\n              border: '2px solid rgb(59, 130, 246)',\r\n              zIndex: 9998,\r\n              pointerEvents: 'auto',\r\n            }}\r\n          />\r\n\r\n          {/* Inner glow ring for premium depth effect */}\r\n          <motion.div\r\n            key=\"spotlight-inner-ring\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.4, delay: staggerDelays.innerRing }}\r\n            style={{\r\n              position: 'fixed',\r\n              top: cutout.top + 2,\r\n              left: cutout.left + 2,\r\n              width: cutout.width - 4,\r\n              height: cutout.height - 4,\r\n              borderRadius: borderRadius - 2,\r\n              border: '1px solid rgba(255, 255, 255, 0.3)',\r\n              boxShadow: 'inset 0 0 20px rgba(59, 130, 246, 0.15)',\r\n              zIndex: 9998,\r\n              pointerEvents: 'none',\r\n            }}\r\n          />\r\n        </>\r\n      )}\r\n    </AnimatePresence>,\r\n    document.body\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7269, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/tour/tour-tooltip.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState, useRef } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { Button } from '@/components/ui/button'\r\nimport { X, ArrowRight, ArrowLeft, ChevronRight, Check, ChevronDown, ChevronUp, Keyboard } from 'lucide-react'\r\nimport { useTour } from '@/contexts/tour-context'\r\nimport type { TourStep } from '@/config/platform-tour'\r\n\r\ninterface TourTooltipProps {\r\n  step: TourStep\r\n  stepNumber: number\r\n  persona?: string\r\n}\r\n\r\ntype ArrowSide = 'left' | 'right' | 'top' | 'bottom'\r\n\r\ninterface Position {\r\n  top: number\r\n  left: number\r\n  arrowSide: ArrowSide\r\n}\r\n\r\n// Persona-specific color theming for header\r\nconst personaColors: Record<string, { bg: string; border: string; text: string; gradient: string }> = {\r\n  ceo: {\r\n    bg: 'bg-purple-50 dark:bg-purple-500/10',\r\n    border: 'border-purple-100 dark:border-purple-500/20',\r\n    text: 'text-purple-600 dark:text-purple-400',\r\n    gradient: 'from-purple-500 to-purple-600'\r\n  },\r\n  staff: {\r\n    bg: 'bg-rose-50 dark:bg-rose-500/10',\r\n    border: 'border-rose-100 dark:border-rose-500/20',\r\n    text: 'text-rose-600 dark:text-rose-400',\r\n    gradient: 'from-rose-500 to-rose-600'\r\n  },\r\n  arranger: {\r\n    bg: 'bg-blue-50 dark:bg-blue-500/10',\r\n    border: 'border-blue-100 dark:border-blue-500/20',\r\n    text: 'text-blue-600 dark:text-blue-400',\r\n    gradient: 'from-blue-500 to-blue-600'\r\n  },\r\n  investor: {\r\n    bg: 'bg-emerald-50 dark:bg-emerald-500/10',\r\n    border: 'border-emerald-100 dark:border-emerald-500/20',\r\n    text: 'text-emerald-600 dark:text-emerald-400',\r\n    gradient: 'from-emerald-500 to-emerald-600'\r\n  },\r\n  investor_entity: {\r\n    bg: 'bg-emerald-50 dark:bg-emerald-500/10',\r\n    border: 'border-emerald-100 dark:border-emerald-500/20',\r\n    text: 'text-emerald-600 dark:text-emerald-400',\r\n    gradient: 'from-emerald-500 to-emerald-600'\r\n  },\r\n  investor_individual: {\r\n    bg: 'bg-teal-50 dark:bg-teal-500/10',\r\n    border: 'border-teal-100 dark:border-teal-500/20',\r\n    text: 'text-teal-600 dark:text-teal-400',\r\n    gradient: 'from-teal-500 to-teal-600'\r\n  },\r\n  introducer: {\r\n    bg: 'bg-amber-50 dark:bg-amber-500/10',\r\n    border: 'border-amber-100 dark:border-amber-500/20',\r\n    text: 'text-amber-600 dark:text-amber-400',\r\n    gradient: 'from-amber-500 to-amber-600'\r\n  },\r\n  partner: {\r\n    bg: 'bg-cyan-50 dark:bg-cyan-500/10',\r\n    border: 'border-cyan-100 dark:border-cyan-500/20',\r\n    text: 'text-cyan-600 dark:text-cyan-400',\r\n    gradient: 'from-cyan-500 to-cyan-600'\r\n  },\r\n  commercial_partner: {\r\n    bg: 'bg-indigo-50 dark:bg-indigo-500/10',\r\n    border: 'border-indigo-100 dark:border-indigo-500/20',\r\n    text: 'text-indigo-600 dark:text-indigo-400',\r\n    gradient: 'from-indigo-500 to-indigo-600'\r\n  },\r\n  lawyer: {\r\n    bg: 'bg-slate-50 dark:bg-slate-500/10',\r\n    border: 'border-slate-100 dark:border-slate-500/20',\r\n    text: 'text-slate-600 dark:text-slate-400',\r\n    gradient: 'from-slate-500 to-slate-600'\r\n  },\r\n}\r\n\r\n// SVG Arrow component - cleaner than rotated CSS divs\r\nfunction TooltipArrow({ side, className = '' }: { side: ArrowSide; className?: string }) {\r\n  // Arrow dimensions\r\n  const width = 22\r\n  const height = 12\r\n\r\n  // Arrow styles based on side\r\n  const positionStyles: Record<ArrowSide, string> = {\r\n    left: 'absolute -left-[11px] top-1/2 -translate-y-1/2 rotate-90',\r\n    right: 'absolute -right-[11px] top-1/2 -translate-y-1/2 -rotate-90',\r\n    top: 'absolute left-1/2 -translate-x-1/2 -top-[11px] rotate-180',\r\n    bottom: 'absolute left-1/2 -translate-x-1/2 -bottom-[11px]',\r\n  }\r\n\r\n  return (\r\n    <svg\r\n      width={width}\r\n      height={height}\r\n      viewBox={`0 0 ${width} ${height}`}\r\n      className={`${positionStyles[side]} ${className}`}\r\n      style={{ filter: 'drop-shadow(0 1px 2px rgba(0,0,0,0.1))' }}\r\n    >\r\n      <path\r\n        d=\"M1 12L11 2L21 12\"\r\n        className=\"fill-white dark:fill-zinc-900 stroke-border\"\r\n        strokeWidth=\"1\"\r\n      />\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport function TourTooltip({ step, stepNumber, persona = 'investor' }: TourTooltipProps) {\r\n  const { isActive, totalSteps, nextStep, prevStep, skipTour } = useTour()\r\n  const [position, setPosition] = useState<Position | null>(null)\r\n  const [mounted, setMounted] = useState(false)\r\n  const [showDetails, setShowDetails] = useState(false)\r\n  const [isMobile, setIsMobile] = useState(false)\r\n  const tooltipRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Get persona colors or default to blue\r\n  const colors = personaColors[persona] || personaColors.arranger\r\n\r\n  // Handle client-side mounting for createPortal\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    // Check for mobile\r\n    setIsMobile(window.innerWidth < 640)\r\n    const handleResize = () => setIsMobile(window.innerWidth < 640)\r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [])\r\n\r\n  // Reset showDetails when step changes\r\n  useEffect(() => {\r\n    setShowDetails(false)\r\n  }, [stepNumber])\r\n\r\n  useEffect(() => {\r\n    if (!isActive || !mounted) {\r\n      setPosition(null)\r\n      return\r\n    }\r\n\r\n    const updatePosition = () => {\r\n      // On mobile, always position at bottom\r\n      if (isMobile) {\r\n        setPosition({\r\n          top: 0,\r\n          left: 0,\r\n          arrowSide: 'top' // Not used on mobile but required by type\r\n        })\r\n        return\r\n      }\r\n\r\n      const target = document.querySelector(step.target)\r\n      if (!target) {\r\n        // Target not found - position in center of screen\r\n        setPosition({\r\n          top: window.innerHeight / 2 - 100,\r\n          left: window.innerWidth / 2 - 200,\r\n          arrowSide: 'left'\r\n        })\r\n        return\r\n      }\r\n\r\n      const targetRect = target.getBoundingClientRect()\r\n      const tooltipWidth = 400 // Wider tooltip\r\n      const tooltipHeight = tooltipRef.current?.offsetHeight || 300\r\n      const gap = 20 // Space between tooltip and target\r\n      const viewportPadding = 20\r\n\r\n      let top = 0\r\n      let left = 0\r\n      let arrowSide: ArrowSide = 'left'\r\n\r\n      const viewportWidth = window.innerWidth\r\n      const viewportHeight = window.innerHeight\r\n\r\n      // Calculate position based on preferred placement with collision detection\r\n      switch (step.placement) {\r\n        case 'right':\r\n          left = targetRect.right + gap\r\n          top = targetRect.top + targetRect.height / 2 - tooltipHeight / 2\r\n          arrowSide = 'left'\r\n\r\n          if (left + tooltipWidth > viewportWidth - viewportPadding) {\r\n            left = targetRect.left - tooltipWidth - gap\r\n            arrowSide = 'right'\r\n          }\r\n          break\r\n\r\n        case 'left':\r\n          left = targetRect.left - tooltipWidth - gap\r\n          top = targetRect.top + targetRect.height / 2 - tooltipHeight / 2\r\n          arrowSide = 'right'\r\n\r\n          if (left < viewportPadding) {\r\n            left = targetRect.right + gap\r\n            arrowSide = 'left'\r\n          }\r\n          break\r\n\r\n        case 'bottom':\r\n          top = targetRect.bottom + gap\r\n          left = targetRect.left + targetRect.width / 2 - tooltipWidth / 2\r\n          arrowSide = 'top'\r\n\r\n          if (top + tooltipHeight > viewportHeight - viewportPadding) {\r\n            top = targetRect.top - tooltipHeight - gap\r\n            arrowSide = 'bottom'\r\n          }\r\n          break\r\n\r\n        case 'top':\r\n        default:\r\n          top = targetRect.top - tooltipHeight - gap\r\n          left = targetRect.left + targetRect.width / 2 - tooltipWidth / 2\r\n          arrowSide = 'bottom'\r\n\r\n          if (top < viewportPadding) {\r\n            top = targetRect.bottom + gap\r\n            arrowSide = 'top'\r\n          }\r\n      }\r\n\r\n      // Keep within horizontal bounds\r\n      left = Math.max(viewportPadding, Math.min(left, viewportWidth - tooltipWidth - viewportPadding))\r\n      // Keep within vertical bounds\r\n      top = Math.max(viewportPadding, Math.min(top, viewportHeight - tooltipHeight - viewportPadding))\r\n\r\n      setPosition({ top, left, arrowSide })\r\n    }\r\n\r\n    // Small delay to let spotlight position first and DOM settle\r\n    const timer = setTimeout(updatePosition, 200)\r\n\r\n    window.addEventListener('resize', updatePosition)\r\n    window.addEventListener('scroll', updatePosition, { passive: true })\r\n\r\n    return () => {\r\n      clearTimeout(timer)\r\n      window.removeEventListener('resize', updatePosition)\r\n      window.removeEventListener('scroll', updatePosition)\r\n    }\r\n  }, [step, isActive, mounted, showDetails, isMobile])\r\n\r\n  // Don't render on server or if not visible\r\n  if (!mounted || !isActive || !position) return null\r\n\r\n  const progress = ((stepNumber + 1) / totalSteps) * 100\r\n  const hasExtendedContent = step.features && step.features.length > 0\r\n\r\n  // Mobile bottom sheet variant\r\n  if (isMobile) {\r\n    return createPortal(\r\n      <AnimatePresence>\r\n        {isActive && (\r\n          <motion.div\r\n            ref={tooltipRef}\r\n            initial={{ opacity: 0, y: 100 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 100 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className=\"fixed bottom-0 left-0 right-0 z-[9999]\"\r\n            style={{ paddingBottom: 'env(safe-area-inset-bottom)' }}\r\n          >\r\n            {/* Drag indicator */}\r\n            <div className=\"flex justify-center pt-3 pb-2 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-xl rounded-t-2xl border-t border-x border-border\">\r\n              <div className=\"w-10 h-1 bg-muted-foreground/30 rounded-full\" />\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"bg-white/95 dark:bg-zinc-900/95 backdrop-blur-xl border-x border-border px-4 pb-4\">\r\n              {/* Header */}\r\n              <div className={`${colors.bg} ${colors.border} border-b -mx-4 px-4 py-3 mb-4`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className={`text-xs font-semibold ${colors.text} uppercase tracking-wider`}>\r\n                    Step {stepNumber + 1} of {totalSteps}\r\n                  </span>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className={`h-8 w-8 ${colors.text} hover:bg-black/5 dark:hover:bg-white/5`}\r\n                    onClick={skipTour}\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n                {/* Gradient progress bar */}\r\n                <div className=\"h-1.5 mt-3 bg-black/5 dark:bg-white/5 rounded-full overflow-hidden\">\r\n                  <motion.div\r\n                    initial={{ width: 0 }}\r\n                    animate={{ width: `${progress}%` }}\r\n                    transition={{ duration: 0.5, ease: 'easeOut' }}\r\n                    className={`h-full bg-gradient-to-r ${colors.gradient} rounded-full`}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Title and Content */}\r\n              <h3 className=\"font-semibold text-foreground text-xl mb-2 flex items-center gap-2\">\r\n                <ChevronRight className={`h-5 w-5 ${colors.text} flex-shrink-0`} />\r\n                {step.title}\r\n              </h3>\r\n              <p className=\"text-base text-muted-foreground leading-relaxed pl-7\">\r\n                {step.content}\r\n              </p>\r\n\r\n              {/* Features (if any) */}\r\n              {hasExtendedContent && (\r\n                <div className=\"mt-3 pl-7\">\r\n                  <button\r\n                    onClick={() => setShowDetails(!showDetails)}\r\n                    className={`text-sm ${colors.text} hover:opacity-80 flex items-center gap-1 font-medium transition-colors`}\r\n                  >\r\n                    {showDetails ? (\r\n                      <>\r\n                        <ChevronUp className=\"h-4 w-4\" />\r\n                        Hide details\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <ChevronDown className=\"h-4 w-4\" />\r\n                        Show key features\r\n                      </>\r\n                    )}\r\n                  </button>\r\n\r\n                  <AnimatePresence>\r\n                    {showDetails && (\r\n                      <motion.div\r\n                        initial={{ height: 0, opacity: 0 }}\r\n                        animate={{ height: 'auto', opacity: 1 }}\r\n                        exit={{ height: 0, opacity: 0 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"overflow-hidden\"\r\n                      >\r\n                        {step.features && step.features.length > 0 && (\r\n                          <ul className=\"mt-3 space-y-2\">\r\n                            {step.features.map((feature, idx) => (\r\n                              <li key={idx} className=\"flex items-start gap-2 text-sm text-muted-foreground\">\r\n                                <Check className=\"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5\" />\r\n                                <span>{feature}</span>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        )}\r\n                      </motion.div>\r\n                    )}\r\n                  </AnimatePresence>\r\n                </div>\r\n              )}\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex items-center justify-between gap-3 mt-6\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"lg\"\r\n                  onClick={skipTour}\r\n                  className=\"text-muted-foreground hover:text-foreground h-12\"\r\n                >\r\n                  Skip\r\n                </Button>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  {stepNumber > 0 && (\r\n                    <Button variant=\"outline\" size=\"lg\" onClick={prevStep} className=\"h-12\">\r\n                      <ArrowLeft className=\"h-5 w-5 mr-1\" />\r\n                      Back\r\n                    </Button>\r\n                  )}\r\n                  <Button\r\n                    size=\"lg\"\r\n                    onClick={nextStep}\r\n                    className={`bg-gradient-to-r ${colors.gradient} hover:opacity-90 text-white h-12 px-6`}\r\n                  >\r\n                    {stepNumber === totalSteps - 1 ? 'Done' : 'Next'}\r\n                    {stepNumber < totalSteps - 1 && <ArrowRight className=\"h-5 w-5 ml-1\" />}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>,\r\n      document.body\r\n    )\r\n  }\r\n\r\n  // Desktop floating tooltip\r\n  const tooltip = (\r\n    <AnimatePresence>\r\n      {isActive && (\r\n        <motion.div\r\n          ref={tooltipRef}\r\n          initial={{ opacity: 0, scale: 0.9, y: 10 }}\r\n          animate={{ opacity: 1, scale: 1, y: 0 }}\r\n          exit={{ opacity: 0, scale: 0.9, y: 10 }}\r\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n          className=\"fixed z-[9999] w-[400px]\"\r\n          style={{\r\n            top: position.top,\r\n            left: position.left,\r\n            pointerEvents: 'auto'\r\n          }}\r\n        >\r\n          {/* SVG Arrow pointing to target */}\r\n          <TooltipArrow side={position.arrowSide} />\r\n\r\n          {/* Glass Morphism Tooltip Card */}\r\n          <div className=\"bg-white/95 dark:bg-zinc-900/95 backdrop-blur-xl border border-border rounded-2xl shadow-2xl ring-1 ring-black/5 dark:ring-white/5 overflow-hidden\">\r\n            {/* Header with persona-specific coloring */}\r\n            <div className={`${colors.bg} ${colors.border} border-b px-5 py-4`}>\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className={`text-xs font-semibold ${colors.text} uppercase tracking-wider`}>\r\n                  Step {stepNumber + 1} of {totalSteps}\r\n                </span>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className={`h-7 w-7 ${colors.text} hover:bg-black/5 dark:hover:bg-white/5 -mr-1`}\r\n                  onClick={skipTour}\r\n                >\r\n                  <X className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n              {/* Gradient animated progress bar */}\r\n              <div className=\"h-1.5 mt-3 bg-black/5 dark:bg-white/5 rounded-full overflow-hidden\">\r\n                <motion.div\r\n                  initial={{ width: 0 }}\r\n                  animate={{ width: `${progress}%` }}\r\n                  transition={{ duration: 0.5, ease: 'easeOut' }}\r\n                  className={`h-full bg-gradient-to-r ${colors.gradient} rounded-full`}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"p-5\">\r\n              <h3 className=\"font-semibold text-foreground text-xl mb-2 flex items-center gap-2\">\r\n                <ChevronRight className={`h-5 w-5 ${colors.text} flex-shrink-0`} />\r\n                {step.title}\r\n              </h3>\r\n              <p className=\"text-base text-muted-foreground leading-relaxed pl-7\">\r\n                {step.content}\r\n              </p>\r\n\r\n              {/* Expandable detailed content and features */}\r\n              {hasExtendedContent && (\r\n                <div className=\"mt-3 pl-7\">\r\n                  <button\r\n                    onClick={() => setShowDetails(!showDetails)}\r\n                    className={`text-sm ${colors.text} hover:opacity-80 flex items-center gap-1 font-medium transition-colors`}\r\n                  >\r\n                    {showDetails ? (\r\n                      <>\r\n                        <ChevronUp className=\"h-4 w-4\" />\r\n                        Hide details\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <ChevronDown className=\"h-4 w-4\" />\r\n                        Show key features\r\n                      </>\r\n                    )}\r\n                  </button>\r\n\r\n                  <AnimatePresence>\r\n                    {showDetails && (\r\n                      <motion.div\r\n                        initial={{ height: 0, opacity: 0 }}\r\n                        animate={{ height: 'auto', opacity: 1 }}\r\n                        exit={{ height: 0, opacity: 0 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"overflow-hidden\"\r\n                      >\r\n                        {/* Features list */}\r\n                        {step.features && step.features.length > 0 && (\r\n                          <ul className=\"mt-3 space-y-2\">\r\n                            {step.features.map((feature, idx) => (\r\n                              <li key={idx} className=\"flex items-start gap-2 text-sm text-muted-foreground\">\r\n                                <Check className=\"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5\" />\r\n                                <span>{feature}</span>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        )}\r\n\r\n                        {/* Empty state hint if applicable */}\r\n                        {step.emptyStateContent && (\r\n                          <div className=\"mt-3 p-3 bg-amber-50 dark:bg-amber-500/10 rounded-lg border border-amber-200 dark:border-amber-500/20\">\r\n                            <p className=\"text-sm text-amber-700 dark:text-amber-400 leading-relaxed\">\r\n                              <strong>Tip:</strong> {step.emptyStateContent}\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                      </motion.div>\r\n                    )}\r\n                  </AnimatePresence>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Actions & Keyboard hints */}\r\n            <div className=\"px-5 pb-4\">\r\n              {/* Keyboard hints */}\r\n              <div className=\"flex items-center gap-3 mb-4 text-xs text-muted-foreground/70\">\r\n                <Keyboard className=\"h-3.5 w-3.5\" />\r\n                <span className=\"font-mono\">[Esc]</span> skip\r\n                <span className=\"font-mono\">[{'\\u2190'}] [{'\\u2192'}]</span> navigate\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between gap-3\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={skipTour}\r\n                  className=\"text-muted-foreground hover:text-foreground\"\r\n                >\r\n                  Skip tour\r\n                </Button>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  {stepNumber > 0 && (\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={prevStep}>\r\n                      <ArrowLeft className=\"h-4 w-4 mr-1\" />\r\n                      Back\r\n                    </Button>\r\n                  )}\r\n                  <Button\r\n                    size=\"sm\"\r\n                    onClick={nextStep}\r\n                    className={`bg-gradient-to-r ${colors.gradient} hover:opacity-90 text-white`}\r\n                  >\r\n                    {stepNumber === totalSteps - 1 ? 'Finish tour' : 'Continue'}\r\n                    {stepNumber < totalSteps - 1 && <ArrowRight className=\"h-4 w-4 ml-1\" />}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n\r\n  return createPortal(tooltip, document.body)\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8291, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/config/platform-tour.ts"],"sourcesContent":["/**\r\n * Platform Tour Configuration\r\n *\r\n * Defines comprehensive tour steps for each persona type. Steps reference elements\r\n * via data-tour attributes and support page navigation for multi-page tours.\r\n *\r\n * IMPORTANT: Selectors are generated from nav item names as:\r\n * `nav-${name.toLowerCase().replace(/\\s+/g, '-')}`\r\n *\r\n * Example: \"My Mandates\" → nav-my-mandates\r\n */\r\n\r\nexport interface TourStep {\r\n  id: string\r\n  target: string // CSS selector with data-tour attribute\r\n  title: string\r\n  content: string\r\n  detailedContent?: string // Extended description for complex features\r\n  features?: string[] // Key capabilities as bullet points\r\n  emptyStateContent?: string // Shown when page has no data yet\r\n  navigateTo?: string // Route to navigate to before highlighting\r\n  placement?: 'top' | 'bottom' | 'left' | 'right'\r\n  highlightPadding?: number // Custom padding around highlighted element\r\n}\r\n\r\n// ============================================================================\r\n// INVESTOR (Entity) TOUR - 6 steps\r\n// For companies/entities investing through the platform\r\n// ============================================================================\r\nconst investorEntityTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Your Investment Dashboard',\r\n    content: 'Your central hub for monitoring all investments and entity activity.',\r\n    detailedContent: `The dashboard provides a comprehensive overview of your investment portfolio.\r\n      Here you'll see your total committed capital, active investments, pending actions, and recent\r\n      distributions. The portal snapshot shows key dates and deadlines. For entity accounts, you can\r\n      also see activity across all authorized members.`,\r\n    features: [\r\n      'Portfolio value and performance metrics',\r\n      'Open opportunities matching your investment mandate',\r\n      'Outstanding tasks requiring your attention',\r\n      'Active holdings across all investment vehicles',\r\n      'Recent activity timeline for your entity',\r\n      'Quick access to key documents and deadlines'\r\n    ],\r\n    emptyStateContent: 'Once you start investing, this dashboard will display your portfolio metrics, active investments, and pending actions requiring attention.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'opportunities',\r\n    target: '[data-tour=\"nav-investment-opportunities\"]',\r\n    title: 'Investment Opportunities',\r\n    content: 'Browse available deals and express interest in new investment opportunities.',\r\n    detailedContent: `This is where you discover new investment opportunities curated by VERSO. Each deal\r\n      card shows the target company, investment vehicle, minimum ticket size, and key terms. You can\r\n      express interest, view detailed documentation, and initiate the subscription process directly\r\n      from this page.`,\r\n    features: [\r\n      'Browse curated investment opportunities',\r\n      'Filter by sector, geography, and deal size',\r\n      'View detailed deal terms and documentation',\r\n      'Express interest with one click',\r\n      'Track your pipeline of potential investments',\r\n      'Access investor presentations and data rooms'\r\n    ],\r\n    emptyStateContent: 'Available investment opportunities will appear here. Check back regularly as new deals are added to the platform.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'portfolio',\r\n    target: '[data-tour=\"nav-portfolio\"]',\r\n    title: 'Your Portfolio',\r\n    content: 'Track your holdings, distributions, and performance across all investments.',\r\n    detailedContent: `Your portfolio page shows every investment your entity has made. Track NAV movements,\r\n      distributions received, and overall performance. Each holding shows your committed capital, funded\r\n      amount, current valuation, and any distributions you've received.`,\r\n    features: [\r\n      'View all active holdings and their current values',\r\n      'Track NAV changes and performance over time',\r\n      'Monitor distributions and capital returns',\r\n      'Download portfolio statements',\r\n      'See investment timeline and milestones',\r\n      'Export data for your records'\r\n    ],\r\n    emptyStateContent: 'After you make your first investment, your holdings will appear here with live NAV tracking and performance metrics.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'documents',\r\n    target: '[data-tour=\"nav-documents\"]',\r\n    title: 'Your Documents',\r\n    content: 'Access all your investment documents, statements, and legal agreements.',\r\n    detailedContent: `All your investment-related documents are stored here for easy access. Find subscription\r\n      agreements, quarterly statements, tax documents (K-1s), fund reports, and any signed legal agreements.\r\n      Documents are organized by investment and can be downloaded individually or in bulk.`,\r\n    features: [\r\n      'Subscription agreements and side letters',\r\n      'Quarterly and annual statements',\r\n      'Tax documents including K-1 forms',\r\n      'Fund reports and investor updates',\r\n      'Entity compliance documents',\r\n      'Signed agreements and amendments'\r\n    ],\r\n    emptyStateContent: 'Your investment documents will be stored here. After subscribing to deals, you\\'ll find all related paperwork in this section.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'inbox',\r\n    target: '[data-tour=\"nav-inbox\"]',\r\n    title: 'Your Inbox',\r\n    content: 'View tasks, messages, and notifications all in one place.',\r\n    detailedContent: `Your inbox consolidates all platform communications and action items. See pending\r\n      tasks that require your attention, messages from arrangers and VERSO staff, and important\r\n      notifications about your investments. Tasks are prioritized so you always know what needs\r\n      immediate attention.`,\r\n    features: [\r\n      'Pending tasks requiring your action',\r\n      'Messages from deal arrangers',\r\n      'Platform notifications and alerts',\r\n      'Document signing requests',\r\n      'KYC update reminders',\r\n      'Distribution announcements'\r\n    ],\r\n    emptyStateContent: 'Messages, tasks, and notifications will appear here as you engage with the platform.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Entity Profile & Settings',\r\n    content: 'Manage your entity details, authorized members, KYC status, and account settings.',\r\n    detailedContent: `As an entity investor, this is where you manage your investment entity's information.\r\n      Update company details, add or remove authorized signatories, track KYC/AML verification status,\r\n      and configure notification preferences. You can also manage which team members have access to\r\n      view and transact on behalf of your entity.`,\r\n    features: [\r\n      'Entity legal name and registration details',\r\n      'Authorized signatories and their permissions',\r\n      'Member access management for your team',\r\n      'KYC/AML verification status tracking',\r\n      'Bank account details for distributions',\r\n      'Notification and communication preferences'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// INVESTOR (Individual) TOUR - 6 steps\r\n// For individual investors (simpler, personal focus)\r\n// ============================================================================\r\nconst investorIndividualTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Your Investment Dashboard',\r\n    content: 'Your personal hub for tracking investments and portfolio activity.',\r\n    detailedContent: `The dashboard gives you a complete picture of your investment portfolio. See your\r\n      total invested capital, current valuations, pending opportunities, and recent activity. Key dates\r\n      and upcoming actions are highlighted so you never miss an important deadline.`,\r\n    features: [\r\n      'Portfolio value at a glance',\r\n      'Open opportunities that match your profile',\r\n      'Tasks requiring your attention',\r\n      'Your active investments',\r\n      'Recent activity timeline',\r\n      'Quick access to documents'\r\n    ],\r\n    emptyStateContent: 'Once you start investing, this dashboard will show your portfolio overview, active investments, and pending actions.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'opportunities',\r\n    target: '[data-tour=\"nav-investment-opportunities\"]',\r\n    title: 'Investment Opportunities',\r\n    content: 'Discover and evaluate new investment opportunities curated by VERSO.',\r\n    detailedContent: `Browse available investment opportunities here. Each deal shows essential information\r\n      like minimum investment size, expected returns, and key terms. You can express interest, access\r\n      detailed documentation, and start the subscription process when you're ready.`,\r\n    features: [\r\n      'Browse curated investment deals',\r\n      'View key terms and minimum tickets',\r\n      'Access investor presentations',\r\n      'Express interest with one click',\r\n      'Track deals you\\'re considering',\r\n      'Start the subscription process'\r\n    ],\r\n    emptyStateContent: 'Investment opportunities will appear here as they become available. Check back regularly for new deals.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'portfolio',\r\n    target: '[data-tour=\"nav-portfolio\"]',\r\n    title: 'Your Portfolio',\r\n    content: 'Monitor your investments, track performance, and view distributions.',\r\n    detailedContent: `Your portfolio page displays all your investments with live NAV tracking. See how\r\n      much you've invested, current valuations, and any distributions you've received. Track your\r\n      investment journey from subscription to returns.`,\r\n    features: [\r\n      'All your active holdings',\r\n      'Live NAV and performance tracking',\r\n      'Distribution history',\r\n      'Investment timeline',\r\n      'Downloadable statements',\r\n      'Performance analytics'\r\n    ],\r\n    emptyStateContent: 'After making your first investment, you\\'ll see your holdings here with real-time performance tracking.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'documents',\r\n    target: '[data-tour=\"nav-documents\"]',\r\n    title: 'Your Documents',\r\n    content: 'Access subscription agreements, statements, tax forms, and reports.',\r\n    detailedContent: `Find all your investment documents in one place. Subscription agreements, quarterly\r\n      statements, tax documents (K-1s), and fund reports are organized by investment for easy access.`,\r\n    features: [\r\n      'Subscription documents',\r\n      'Quarterly statements',\r\n      'Tax documents (K-1s)',\r\n      'Fund reports',\r\n      'Signed agreements',\r\n      'Investor updates'\r\n    ],\r\n    emptyStateContent: 'Your investment documents will be stored here after you subscribe to deals.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'inbox',\r\n    target: '[data-tour=\"nav-inbox\"]',\r\n    title: 'Your Inbox',\r\n    content: 'Stay updated with messages, tasks, and important notifications.',\r\n    detailedContent: `Your inbox keeps you informed of everything happening with your investments. See\r\n      pending tasks, messages from the VERSO team, and important notifications about your portfolio.`,\r\n    features: [\r\n      'Pending action items',\r\n      'Messages from VERSO',\r\n      'Investment notifications',\r\n      'Document signing requests',\r\n      'Distribution alerts',\r\n      'KYC reminders'\r\n    ],\r\n    emptyStateContent: 'Messages and notifications will appear here as you use the platform.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Your Profile',\r\n    content: 'Manage your personal details, verification status, and preferences.',\r\n    detailedContent: `Update your personal information, track your KYC verification status, and manage\r\n      your account settings. Make sure your contact details and bank information are up to date to\r\n      ensure smooth transactions and distributions.`,\r\n    features: [\r\n      'Personal information',\r\n      'KYC verification status',\r\n      'Bank account for distributions',\r\n      'Contact preferences',\r\n      'Notification settings',\r\n      'Security options'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// CEO TOUR - 6 steps\r\n// Executive overview of the entire platform\r\n// ============================================================================\r\nconst ceoTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Executive Dashboard',\r\n    content: 'Platform-wide metrics, AUM tracking, and real-time activity overview.',\r\n    detailedContent: `Your executive dashboard provides a bird's-eye view of the entire VERSO platform.\r\n      Monitor total AUM, active deals across all arrangers, investor activity, and team performance.\r\n      Key metrics are updated in real-time so you always have the current state of the business.`,\r\n    features: [\r\n      'Total AUM and growth trends',\r\n      'Active deal pipeline across all arrangers',\r\n      'New investor onboarding metrics',\r\n      'Subscription activity and conversion rates',\r\n      'Team activity and workload distribution',\r\n      'Platform health and system status'\r\n    ],\r\n    emptyStateContent: 'Platform metrics will populate as deals are created and investors subscribe.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'approvals',\r\n    target: '[data-tour=\"nav-approvals\"]',\r\n    title: 'Executive Approvals',\r\n    content: 'Review and approve items requiring executive sign-off.',\r\n    detailedContent: `All items requiring CEO approval flow through this page. Review KYC approvals,\r\n      high-value subscriptions, fee plan changes, and other decisions that need executive authorization.\r\n      You can approve, reject, or delegate items with full audit trail tracking.`,\r\n    features: [\r\n      'Pending approval requests',\r\n      'KYC and compliance sign-offs',\r\n      'High-value subscription approvals',\r\n      'Fee plan authorizations',\r\n      'Delegation capabilities',\r\n      'Complete audit trail'\r\n    ],\r\n    emptyStateContent: 'Items requiring your approval will appear here. The queue is currently empty.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'deals',\r\n    target: '[data-tour=\"nav-deals\"]',\r\n    title: 'Deal Pipeline',\r\n    content: 'Monitor all deals across the platform from draft to close.',\r\n    detailedContent: `View and manage every deal on the platform. Track deal status from draft through\r\n      active to closed, monitor subscription progress, and oversee arranger performance. Access\r\n      detailed deal analytics and close management tools.`,\r\n    features: [\r\n      'All platform deals in one view',\r\n      'Status tracking (draft → active → closed)',\r\n      'Subscription progress per deal',\r\n      'Arranger performance metrics',\r\n      'Deal close management',\r\n      'Historical deal data and analytics'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'reconciliation',\r\n    target: '[data-tour=\"nav-reconciliation\"]',\r\n    title: 'Financial Reconciliation',\r\n    content: 'Track fee collection, payments, and financial reporting.',\r\n    detailedContent: `The reconciliation center is your financial control hub. Track fee invoicing,\r\n      payment collection status, partner commissions, and generate financial reports. Ensure all\r\n      fees are collected and payments are properly allocated.`,\r\n    features: [\r\n      'Fee billing status across all deals',\r\n      'Payment tracking and collection',\r\n      'Partner commission management',\r\n      'Invoice generation and tracking',\r\n      'Financial reports and exports',\r\n      'Aging analysis and follow-ups'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'audit',\r\n    target: '[data-tour=\"nav-audit\"]',\r\n    title: 'Audit & Compliance',\r\n    content: 'Review platform activity logs and compliance tracking.',\r\n    detailedContent: `Complete visibility into all platform activity. Every action is logged with\r\n      user, timestamp, and details. Filter by user, date range, or action type to investigate\r\n      specific events. Essential for compliance, security, and operational oversight.`,\r\n    features: [\r\n      'Comprehensive activity logs',\r\n      'User action tracking',\r\n      'Security event monitoring',\r\n      'Compliance audit trails',\r\n      'Filter by user/date/action',\r\n      'Export for reporting'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'admin',\r\n    target: '[data-tour=\"nav-admin\"]',\r\n    title: 'Administration',\r\n    content: 'System settings, user management, and platform configuration.',\r\n    detailedContent: `Access administrative controls for the entire platform. Manage user accounts,\r\n      configure system settings, set up new arrangers and partners, and maintain platform security.\r\n      Only accessible to CEO and admin roles.`,\r\n    features: [\r\n      'User account management',\r\n      'Role and permission settings',\r\n      'Platform configuration',\r\n      'Arranger and partner setup',\r\n      'System preferences',\r\n      'Security settings'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// ARRANGER TOUR - 6 steps\r\n// Deal arrangers managing mandates and partners\r\n// ============================================================================\r\nconst arrangerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Arranger Dashboard',\r\n    content: 'Your deal pipeline, AUM metrics, and partner activity at a glance.',\r\n    detailedContent: `The arranger dashboard gives you complete visibility into your mandates. Track\r\n      your AUM, monitor subscription progress across deals, and see referral activity from your\r\n      introducer and partner network. Key metrics help you prioritize where to focus.`,\r\n    features: [\r\n      'Your total AUM under management',\r\n      'Deal pipeline by status',\r\n      'Subscription progress tracking',\r\n      'Partner referral activity',\r\n      'Upcoming close dates',\r\n      'Performance vs targets'\r\n    ],\r\n    emptyStateContent: 'Once you have active mandates, metrics and activity will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'mandates',\r\n    target: '[data-tour=\"nav-my-mandates\"]',\r\n    title: 'My Mandates',\r\n    content: 'Manage your deals, track subscriptions, and oversee close timelines.',\r\n    detailedContent: `This is your command center for deals you're arranging. Create new deals, manage\r\n      active mandates, track subscription progress, and coordinate deal closes. Each mandate shows\r\n      investor commitments, documentation status, and timeline to closing.`,\r\n    features: [\r\n      'Create and configure new deals',\r\n      'Track subscription commitments',\r\n      'Monitor documentation completion',\r\n      'Manage close timelines',\r\n      'Investor communication tools',\r\n      'Deal performance analytics'\r\n    ],\r\n    emptyStateContent: 'Your mandates will appear here. Start by creating a new deal or wait for deals to be assigned to you.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'subscription-packs',\r\n    target: '[data-tour=\"nav-subscription-packs\"]',\r\n    title: 'Subscription Packs',\r\n    content: 'Review and approve investor subscription documentation.',\r\n    detailedContent: `Review subscription packs submitted by investors. Check document completeness,\r\n      verify KYC status, and approve or request corrections. Each pack shows the investor, deal,\r\n      commitment amount, and documentation checklist status.`,\r\n    features: [\r\n      'Pending subscription reviews',\r\n      'Document completeness checking',\r\n      'KYC verification status',\r\n      'Approval workflow',\r\n      'Request corrections or clarifications',\r\n      'Historical submission tracking'\r\n    ],\r\n    emptyStateContent: 'Subscription packs will appear here as investors submit documentation for your deals.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'fee-plans',\r\n    target: '[data-tour=\"nav-fee-plans\"]',\r\n    title: 'Fee Plans',\r\n    content: 'Configure fee structures and partner commission agreements.',\r\n    detailedContent: `Set up fee plans for each deal, defining investor fees and partner commissions.\r\n      Fee plans specify the fee tiers, calculation basis, and payment terms. Each deal requires its\r\n      own fee plan, and partner-specific agreements can override default terms.`,\r\n    features: [\r\n      'Deal-specific fee configuration',\r\n      'Investor fee tier setup',\r\n      'Partner commission rates',\r\n      'Fee calculation rules',\r\n      'Agreement templates',\r\n      'Commission tracking'\r\n    ],\r\n    emptyStateContent: 'Create fee plans for your deals to define how fees and commissions are calculated.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'introducers',\r\n    target: '[data-tour=\"nav-my-introducers\"]',\r\n    title: 'My Introducers',\r\n    content: 'Manage your introducer network and track referrals.',\r\n    detailedContent: `View all introducers working with you, their referral activity, and commission\r\n      status. Add new introducers, set up fee agreements, and track which investors they've brought\r\n      to your deals. Monitor conversion rates and reward your best referral partners.`,\r\n    features: [\r\n      'Active introducer relationships',\r\n      'Referral tracking per introducer',\r\n      'Commission agreements and rates',\r\n      'Conversion analytics',\r\n      'Add new introducers',\r\n      'Communication tools'\r\n    ],\r\n    emptyStateContent: 'Your introducer network will be displayed here. Add introducers to start tracking referrals.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Arranger Profile',\r\n    content: 'Manage your arranger entity details, team, and KYC status.',\r\n    detailedContent: `Maintain your arranger entity's profile including company details, authorized\r\n      team members, and verification status. Keep your information current to ensure smooth deal\r\n      processing and compliance with platform requirements.`,\r\n    features: [\r\n      'Entity details and registration',\r\n      'Team member management',\r\n      'Signatory authorizations',\r\n      'KYC/AML status',\r\n      'Contact information',\r\n      'Notification preferences'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// INTRODUCER TOUR - 6 steps\r\n// Referral partners tracking introductions and commissions\r\n// ============================================================================\r\nconst introducerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Introducer Dashboard',\r\n    content: 'Track your referral metrics, conversion rates, and commission overview.',\r\n    detailedContent: `Your dashboard shows the health of your introduction business. See total\r\n      referrals made, conversion rates to funded investments, and commissions earned. Track trends\r\n      over time and identify which deals and arrangers generate the best results.`,\r\n    features: [\r\n      'Total introductions made',\r\n      'Conversion rate to funded deals',\r\n      'Commissions earned and pending',\r\n      'Top performing deals',\r\n      'Arranger relationship metrics',\r\n      'Recent activity feed'\r\n    ],\r\n    emptyStateContent: 'Your referral metrics will appear here once you start making introductions.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'introductions',\r\n    target: '[data-tour=\"nav-introductions\"]',\r\n    title: 'My Introductions',\r\n    content: 'View and track all your investor referrals and their progress.',\r\n    detailedContent: `See every investor you've introduced to the platform. Track their journey from\r\n      initial referral through KYC, subscription, and funding. Each introduction shows the current\r\n      status, associated deal, and expected commission.`,\r\n    features: [\r\n      'All referrals in one view',\r\n      'Status tracking per introduction',\r\n      'Deal association',\r\n      'Expected commission amounts',\r\n      'Investor contact details',\r\n      'History and timeline'\r\n    ],\r\n    emptyStateContent: 'Your introductions will appear here. Start referring investors to see them tracked.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'agreements',\r\n    target: '[data-tour=\"nav-agreements\"]',\r\n    title: 'Fee Agreements',\r\n    content: 'Access your fee agreements with arrangers and view commission terms.',\r\n    detailedContent: `View all your fee agreements with different arrangers. Each agreement specifies\r\n      your commission rates, payment terms, and any special conditions. Agreements are deal-specific,\r\n      so you may have different terms for different investments.`,\r\n    features: [\r\n      'Active fee agreements',\r\n      'Commission rate details',\r\n      'Payment terms',\r\n      'Arranger contact info',\r\n      'Agreement documents',\r\n      'Amendment history'\r\n    ],\r\n    emptyStateContent: 'Fee agreements with arrangers will appear here once they\\'re established.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'commissions',\r\n    target: '[data-tour=\"nav-my-commissions\"]',\r\n    title: 'My Commissions',\r\n    content: 'Track earned commissions, submit invoices, and view payment history.',\r\n    detailedContent: `Manage all your commission earnings in one place. See commissions that are\r\n      accrued (earned but not yet payable), ready to invoice, submitted, and paid. Submit invoices\r\n      directly through the platform and track payment status.`,\r\n    features: [\r\n      'Accrued commissions',\r\n      'Invoice submission',\r\n      'Payment tracking',\r\n      'Commission breakdown by deal',\r\n      'Historical payments',\r\n      'Export for accounting'\r\n    ],\r\n    emptyStateContent: 'Your earned commissions will appear here as your introductions convert to funded investments.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'versosign',\r\n    target: '[data-tour=\"nav-versosign\"]',\r\n    title: 'VersoSign',\r\n    content: 'Sign documents and execute agreements electronically.',\r\n    detailedContent: `VersoSign is VERSO's electronic signature platform. Sign fee agreements,\r\n      amendments, and other documents that require your signature. Track pending signature requests\r\n      and view signed document history.`,\r\n    features: [\r\n      'Pending signature requests',\r\n      'Electronic signature execution',\r\n      'Document preview',\r\n      'Signed document archive',\r\n      'Multi-party signatures',\r\n      'Audit trail'\r\n    ],\r\n    emptyStateContent: 'Documents requiring your signature will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Introducer Profile',\r\n    content: 'Manage your profile, bank details, and notification settings.',\r\n    detailedContent: `Keep your introducer profile up to date. Update contact information, bank\r\n      details for commission payments, and configure how you want to receive notifications. Accurate\r\n      bank details ensure commissions are paid to the right account.`,\r\n    features: [\r\n      'Contact information',\r\n      'Bank account details',\r\n      'Notification preferences',\r\n      'Profile verification status',\r\n      'Signature settings',\r\n      'Account security'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// PARTNER TOUR - 5 steps\r\n// Distribution partners sharing deals with their clients\r\n// ============================================================================\r\nconst partnerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Partner Dashboard',\r\n    content: 'Monitor your partnership metrics, referred investors, and revenue.',\r\n    detailedContent: `Your partner dashboard shows the overall health of your VERSO partnership.\r\n      Track investors you've referred, their subscription activity, and your revenue from\r\n      commissions. See which deals are performing best for your client base.`,\r\n    features: [\r\n      'Referred investor count',\r\n      'Subscription activity',\r\n      'Revenue and commissions',\r\n      'Top performing deals',\r\n      'Client engagement metrics',\r\n      'Recent activity'\r\n    ],\r\n    emptyStateContent: 'Partnership metrics will appear here as you refer investors and they make investments.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'opportunities',\r\n    target: '[data-tour=\"nav-opportunities\"]',\r\n    title: 'Available Opportunities',\r\n    content: 'Browse deals available to share with your clients.',\r\n    detailedContent: `View all investment opportunities you can share with your clients. Each deal\r\n      shows key terms, minimum investment, and target profile. Access marketing materials and\r\n      investor presentations to help present opportunities to your network.`,\r\n    features: [\r\n      'Current available deals',\r\n      'Deal terms and minimums',\r\n      'Marketing materials',\r\n      'Investor presentations',\r\n      'Share links for clients',\r\n      'Deal status updates'\r\n    ],\r\n    emptyStateContent: 'Available deals for your clients will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'transactions',\r\n    target: '[data-tour=\"nav-transactions\"]',\r\n    title: 'Transactions',\r\n    content: 'Track your referred investor subscriptions and activity.',\r\n    detailedContent: `Monitor all investment activity from clients you've referred. See their\r\n      subscription status, commitment amounts, and funding progress. Track the complete journey\r\n      from introduction to funded investment.`,\r\n    features: [\r\n      'Referred client investments',\r\n      'Subscription status tracking',\r\n      'Commitment amounts',\r\n      'Funding progress',\r\n      'Client activity timeline',\r\n      'Deal-by-deal breakdown'\r\n    ],\r\n    emptyStateContent: 'Transactions from your referred clients will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'commissions',\r\n    target: '[data-tour=\"nav-my-commissions\"]',\r\n    title: 'My Commissions',\r\n    content: 'Track your revenue, submit invoices, and view payment history.',\r\n    detailedContent: `Manage your commission earnings from client referrals. See what's accrued,\r\n      ready to invoice, and paid. Submit invoices through the platform and track payment status.`,\r\n    features: [\r\n      'Earned commissions',\r\n      'Invoice submission',\r\n      'Payment tracking',\r\n      'Revenue by deal',\r\n      'Historical payments',\r\n      'Accounting exports'\r\n    ],\r\n    emptyStateContent: 'Commissions from your referrals will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Partner Profile',\r\n    content: 'Manage your entity details, team members, and settings.',\r\n    detailedContent: `Maintain your partner entity profile. Update company information, manage\r\n      team members who can access the portal, and configure account settings.`,\r\n    features: [\r\n      'Entity details',\r\n      'Team member access',\r\n      'Bank account info',\r\n      'Contact preferences',\r\n      'Notification settings',\r\n      'Account security'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// COMMERCIAL PARTNER TOUR - 5 steps\r\n// Commercial partners who can execute investments on behalf of clients\r\n// ============================================================================\r\nconst commercialPartnerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Commercial Partner Dashboard',\r\n    content: 'Monitor client activity, placement metrics, and revenue.',\r\n    detailedContent: `Your dashboard provides a complete view of your commercial partnership. Track\r\n      clients you manage, their investment activity, and your placement revenue. See which deals\r\n      are popular with your clients and identify new opportunities.`,\r\n    features: [\r\n      'Client portfolio overview',\r\n      'Placement activity metrics',\r\n      'Revenue and commissions',\r\n      'Client engagement stats',\r\n      'Deal performance',\r\n      'Recent activity feed'\r\n    ],\r\n    emptyStateContent: 'Client activity and metrics will appear here as you place investments.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'opportunities',\r\n    target: '[data-tour=\"nav-opportunities\"]',\r\n    title: 'Investment Opportunities',\r\n    content: 'View deals available for client placement.',\r\n    detailedContent: `Browse investment opportunities you can place for your clients. Access deal\r\n      terms, presentations, and documentation. As a commercial partner, you can execute\r\n      subscriptions on behalf of your clients.`,\r\n    features: [\r\n      'Available deals for placement',\r\n      'Deal terms and documentation',\r\n      'Client suitability matching',\r\n      'Placement tools',\r\n      'Marketing materials',\r\n      'Deal updates'\r\n    ],\r\n    emptyStateContent: 'Deals available for client placement will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'client-transactions',\r\n    target: '[data-tour=\"nav-client-transactions\"]',\r\n    title: 'Client Transactions',\r\n    content: 'Manage client subscriptions and execute investments on their behalf.',\r\n    detailedContent: `View and manage all client investment activity. As a commercial partner,\r\n      you can execute subscription transactions for your clients, track their portfolio, and\r\n      manage the investment process from start to funding.`,\r\n    features: [\r\n      'Client subscription management',\r\n      'Execute-for-client capability',\r\n      'Status tracking',\r\n      'Document management',\r\n      'Client communication',\r\n      'Portfolio oversight'\r\n    ],\r\n    emptyStateContent: 'Client transactions will appear here as you make placements.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'commissions',\r\n    target: '[data-tour=\"nav-my-commissions\"]',\r\n    title: 'My Commissions',\r\n    content: 'Track placement fees, submit invoices, and view payments.',\r\n    detailedContent: `Manage your commercial partner revenue. Track commissions from client\r\n      placements, submit invoices, and monitor payment status.`,\r\n    features: [\r\n      'Placement commissions',\r\n      'Invoice management',\r\n      'Payment tracking',\r\n      'Revenue breakdown',\r\n      'Historical payments',\r\n      'Financial exports'\r\n    ],\r\n    emptyStateContent: 'Commissions from client placements will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Commercial Partner Profile',\r\n    content: 'Manage your profile, signature settings, and team access.',\r\n    detailedContent: `Maintain your commercial partner profile and settings. Configure signature\r\n      authorities, manage team access, and keep account details current.`,\r\n    features: [\r\n      'Entity information',\r\n      'Signature settings',\r\n      'Team management',\r\n      'Bank details',\r\n      'Notification preferences',\r\n      'Security settings'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// LAWYER TOUR - 5 steps\r\n// Legal counsel assigned to deals\r\n// ============================================================================\r\nconst lawyerTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Legal Dashboard',\r\n    content: 'Access assigned matters, pending reviews, and upcoming deadlines.',\r\n    detailedContent: `Your legal dashboard shows all matters requiring your attention. Track deals\r\n      you're assigned to, pending document reviews, and upcoming deadlines. Prioritize your\r\n      workload and ensure nothing falls through the cracks.`,\r\n    features: [\r\n      'Assigned matters overview',\r\n      'Pending document reviews',\r\n      'Upcoming deadlines',\r\n      'Matter status tracking',\r\n      'Recent activity',\r\n      'Workload summary'\r\n    ],\r\n    emptyStateContent: 'Your assigned matters and pending reviews will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'assigned-deals',\r\n    target: '[data-tour=\"nav-assigned-deals\"]',\r\n    title: 'Assigned Deals',\r\n    content: 'View deals you\\'re providing legal counsel on.',\r\n    detailedContent: `Access all deals where you've been assigned as legal counsel. Review deal\r\n      documentation, subscription packs, and investor compliance. Your role ensures legal\r\n      requirements are met throughout the deal lifecycle.`,\r\n    features: [\r\n      'Deals requiring your counsel',\r\n      'Deal documentation access',\r\n      'Subscription pack review',\r\n      'Compliance tracking',\r\n      'Document management',\r\n      'Communication with arrangers'\r\n    ],\r\n    emptyStateContent: 'Deals assigned to you will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'escrow',\r\n    target: '[data-tour=\"nav-escrow\"]',\r\n    title: 'Escrow Management',\r\n    content: 'Monitor and approve escrow account activities.',\r\n    detailedContent: `Manage escrow accounts for deals you're assigned to. Review escrow status,\r\n      approve release requests, and ensure funds are properly held and disbursed according to\r\n      deal terms.`,\r\n    features: [\r\n      'Escrow account status',\r\n      'Release request review',\r\n      'Approval workflow',\r\n      'Fund tracking',\r\n      'Compliance verification',\r\n      'Audit trail'\r\n    ],\r\n    emptyStateContent: 'Escrow accounts you manage will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'versosign',\r\n    target: '[data-tour=\"nav-versosign\"]',\r\n    title: 'VersoSign',\r\n    content: 'Review and execute legal documents electronically.',\r\n    detailedContent: `VersoSign is your electronic signature workspace. Review legal documents,\r\n      execute agreements, and track signature workflows. All signatures are legally binding\r\n      and include complete audit trails.`,\r\n    features: [\r\n      'Pending signatures',\r\n      'Document review',\r\n      'Electronic execution',\r\n      'Multi-party workflows',\r\n      'Signed document archive',\r\n      'Compliance audit trail'\r\n    ],\r\n    emptyStateContent: 'Documents requiring your signature will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'profile',\r\n    target: '[data-tour=\"nav-profile\"]',\r\n    title: 'Legal Profile',\r\n    content: 'Manage your signature settings and professional details.',\r\n    detailedContent: `Maintain your legal professional profile. Configure signature settings,\r\n      update contact information, and manage notification preferences.`,\r\n    features: [\r\n      'Professional details',\r\n      'Signature configuration',\r\n      'Contact information',\r\n      'Notification settings',\r\n      'Firm affiliation',\r\n      'Account security'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// STAFF TOUR - 6 steps\r\n// Internal VERSO staff (operations, relationship managers)\r\n// ============================================================================\r\nconst staffTour: TourStep[] = [\r\n  {\r\n    id: 'dashboard',\r\n    target: '[data-tour=\"nav-dashboard\"]',\r\n    title: 'Staff Dashboard',\r\n    content: 'Platform activity overview and your pending workload.',\r\n    detailedContent: `Your staff dashboard shows what needs your attention today. Track platform\r\n      activity, see pending items in your queue, and monitor overall system health. Prioritize\r\n      tasks that need immediate attention.`,\r\n    features: [\r\n      'Pending items queue',\r\n      'Platform activity feed',\r\n      'Workload summary',\r\n      'Priority items',\r\n      'Team activity',\r\n      'System notifications'\r\n    ],\r\n    emptyStateContent: 'Your dashboard will show pending items and activity once the platform is active.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'approvals',\r\n    target: '[data-tour=\"nav-approvals\"]',\r\n    title: 'Approvals',\r\n    content: 'Process approval requests and KYC reviews.',\r\n    detailedContent: `Handle approval requests that come through the platform. Review KYC\r\n      submissions, subscription approvals, and other items that need staff authorization.`,\r\n    features: [\r\n      'Approval queue',\r\n      'KYC review workflow',\r\n      'Subscription processing',\r\n      'Document verification',\r\n      'Approval/rejection actions',\r\n      'Audit logging'\r\n    ],\r\n    emptyStateContent: 'Approval requests will appear here.',\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'deals',\r\n    target: '[data-tour=\"nav-deals\"]',\r\n    title: 'Deal Management',\r\n    content: 'View and support deals across the platform.',\r\n    detailedContent: `Access all deals to provide operational support. Help arrangers with deal\r\n      setup, monitor subscription progress, and assist with deal closes.`,\r\n    features: [\r\n      'All platform deals',\r\n      'Deal support tools',\r\n      'Subscription monitoring',\r\n      'Close assistance',\r\n      'Issue resolution',\r\n      'Arranger communication'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'investors',\r\n    target: '[data-tour=\"nav-investors\"]',\r\n    title: 'Investor Management',\r\n    content: 'Support investor accounts and resolve issues.',\r\n    detailedContent: `Manage investor accounts across the platform. Help with onboarding, KYC\r\n      issues, account updates, and general investor support.`,\r\n    features: [\r\n      'Investor directory',\r\n      'Account support tools',\r\n      'KYC assistance',\r\n      'Issue resolution',\r\n      'Communication tools',\r\n      'Account history'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'subscriptions',\r\n    target: '[data-tour=\"nav-subscriptions\"]',\r\n    title: 'Subscriptions',\r\n    content: 'Track and process subscriptions across all deals.',\r\n    detailedContent: `View subscription activity platform-wide. Monitor status, process updates,\r\n      and help resolve subscription issues.`,\r\n    features: [\r\n      'All subscriptions view',\r\n      'Status tracking',\r\n      'Processing tools',\r\n      'Issue flagging',\r\n      'Status updates',\r\n      'Reporting'\r\n    ],\r\n    placement: 'right'\r\n  },\r\n  {\r\n    id: 'messages',\r\n    target: '[data-tour=\"nav-messages\"]',\r\n    title: 'Messages',\r\n    content: 'Handle platform communications and support requests.',\r\n    detailedContent: `Manage support communications with investors, arrangers, and partners.\r\n      Respond to inquiries and coordinate with team members.`,\r\n    features: [\r\n      'Support inbox',\r\n      'Message threading',\r\n      'Team assignments',\r\n      'Response templates',\r\n      'Priority tagging',\r\n      'Resolution tracking'\r\n    ],\r\n    placement: 'right'\r\n  }\r\n]\r\n\r\n// ============================================================================\r\n// TOUR STEPS REGISTRY\r\n// Maps persona types to their tour configurations\r\n// ============================================================================\r\nexport const TOUR_STEPS: Record<string, TourStep[]> = {\r\n  // Investor variants\r\n  investor: investorEntityTour, // Default to entity (more comprehensive)\r\n  investor_entity: investorEntityTour,\r\n  investor_individual: investorIndividualTour,\r\n\r\n  // Business personas\r\n  ceo: ceoTour,\r\n  staff: staffTour,\r\n  arranger: arrangerTour,\r\n  introducer: introducerTour,\r\n  partner: partnerTour,\r\n  commercial_partner: commercialPartnerTour,\r\n  lawyer: lawyerTour,\r\n}\r\n\r\n/**\r\n * Get tour steps for a specific persona\r\n * Falls back to investor_entity tour if persona not found\r\n */\r\nexport function getTourSteps(persona: string): TourStep[] {\r\n  return TOUR_STEPS[persona] || TOUR_STEPS.investor_entity\r\n}\r\n\r\n/**\r\n * Get persona-specific welcome message for the tour modal\r\n */\r\nexport function getWelcomeMessage(persona: string): { title: string; description: string } {\r\n  const messages: Record<string, { title: string; description: string }> = {\r\n    investor: {\r\n      title: 'Welcome to VERSO Investor Portal!',\r\n      description: 'Let us show you around. This quick tour will help you discover investment opportunities and manage your portfolio.'\r\n    },\r\n    investor_entity: {\r\n      title: 'Welcome to VERSO Investor Portal!',\r\n      description: 'Let us show you around. This tour will help you manage your entity\\'s investments and coordinate with your team.'\r\n    },\r\n    investor_individual: {\r\n      title: 'Welcome to VERSO!',\r\n      description: 'Let us show you around. This quick tour will help you discover investment opportunities and track your portfolio.'\r\n    },\r\n    ceo: {\r\n      title: 'Welcome to VERSO Executive Portal!',\r\n      description: 'This tour will give you an overview of the platform\\'s management capabilities and executive controls.'\r\n    },\r\n    staff: {\r\n      title: 'Welcome to VERSO Staff Portal!',\r\n      description: 'This tour will help you get familiar with the tools you\\'ll use to support the platform.'\r\n    },\r\n    arranger: {\r\n      title: 'Welcome to VERSO Arranger Portal!',\r\n      description: 'Let us show you how to manage your mandates, track subscriptions, and work with your partner network.'\r\n    },\r\n    introducer: {\r\n      title: 'Welcome to VERSO Introducer Portal!',\r\n      description: 'This tour will show you how to track introductions, manage agreements, and monitor your commissions.'\r\n    },\r\n    partner: {\r\n      title: 'Welcome to VERSO Partner Portal!',\r\n      description: 'Let us show you how to access deals for your clients and track your partnership activity.'\r\n    },\r\n    commercial_partner: {\r\n      title: 'Welcome to VERSO Commercial Partner Portal!',\r\n      description: 'This tour will show you how to manage client investments and execute transactions on their behalf.'\r\n    },\r\n    lawyer: {\r\n      title: 'Welcome to VERSO Legal Portal!',\r\n      description: 'This tour will help you navigate your assigned matters, document reviews, and escrow management.'\r\n    }\r\n  }\r\n\r\n  return messages[persona] || messages.investor\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;CAUC;;;;;;;;AAeD,+EAA+E;AAC/E,mCAAmC;AACnC,wDAAwD;AACxD,+EAA+E;AAC/E,MAAM,qBAAiC;IACrC;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;;sDAGgC,CAAC;QACnD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;;qBAGD,CAAC;QAClB,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;uEAEiD,CAAC;QACpE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;0FAEoE,CAAC;QACvF,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;;0BAGI,CAAC;QACvB,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;;iDAG2B,CAAC;QAC9C,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAED,+EAA+E;AAC/E,uCAAuC;AACvC,qDAAqD;AACrD,+EAA+E;AAC/E,MAAM,yBAAqC;IACzC;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;mFAE6D,CAAC;QAChF,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;mFAE6D,CAAC;QAChF,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;sDAEgC,CAAC;QACnD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;qGAC+E,CAAC;QAClG,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;oGAC8E,CAAC;QACjG,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;mDAE6B,CAAC;QAChD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAED,+EAA+E;AAC/E,qBAAqB;AACrB,4CAA4C;AAC5C,+EAA+E;AAC/E,MAAM,UAAsB;IAC1B;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;gGAE0E,CAAC;QAC7F,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;gFAE0D,CAAC;QAC7E,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;yDAEmC,CAAC;QACtD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;6DAEuC,CAAC;QAC1D,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;qFAE+D,CAAC;QAClF,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;6CAEuB,CAAC;QAC1C,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAED,+EAA+E;AAC/E,0BAA0B;AAC1B,gDAAgD;AAChD,+EAA+E;AAC/E,MAAM,eAA2B;IAC/B;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;qFAE+D,CAAC;QAClF,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;0EAEoD,CAAC;QACvE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;4DAEsC,CAAC;QACzD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;+EAEyD,CAAC;QAC5E,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;qFAE+D,CAAC;QAClF,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;2DAEqC,CAAC;QACxD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAED,+EAA+E;AAC/E,4BAA4B;AAC5B,2DAA2D;AAC3D,+EAA+E;AAC/E,MAAM,iBAA6B;IACjC;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;iFAE2D,CAAC;QAC9E,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;uDAEiC,CAAC;QACpD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;gEAE0C,CAAC;QAC7D,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;6DAEuC,CAAC;QAC1D,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;uCAEiB,CAAC;QACpC,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;oEAE8C,CAAC;QACjE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAED,+EAA+E;AAC/E,yBAAyB;AACzB,yDAAyD;AACzD,+EAA+E;AAC/E,MAAM,cAA0B;IAC9B;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;4EAEsD,CAAC;QACzE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;2EAEqD,CAAC;QACxE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;6CAEuB,CAAC;QAC1C,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;gGAC0E,CAAC;QAC7F,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;6EACuD,CAAC;QAC1E,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAED,+EAA+E;AAC/E,oCAAoC;AACpC,uEAAuE;AACvE,+EAA+E;AAC/E,MAAM,wBAAoC;IACxC;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;mEAE6C,CAAC;QAChE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;8CAEwB,CAAC;QAC3C,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;0DAEoC,CAAC;QACvD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;8DACwC,CAAC;QAC3D,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;wEACkD,CAAC;QACrE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAED,+EAA+E;AAC/E,wBAAwB;AACxB,kCAAkC;AAClC,+EAA+E;AAC/E,MAAM,aAAyB;IAC7B;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;2DAEqC,CAAC;QACxD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;yDAEmC,CAAC;QACtD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;iBAEL,CAAC;QACd,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;wCAEkB,CAAC;QACrC,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;sEACgD,CAAC;QACnE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAED,+EAA+E;AAC/E,uBAAuB;AACvB,2DAA2D;AAC3D,+EAA+E;AAC/E,MAAM,YAAwB;IAC5B;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;;0CAEoB,CAAC;QACvC,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;yFACmE,CAAC;QACtF,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,mBAAmB;QACnB,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;wEACkD,CAAC;QACrE,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;4DACsC,CAAC;QACzD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;2CACqB,CAAC;QACxC,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,iBAAiB,CAAC;4DACsC,CAAC;QACzD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,WAAW;IACb;CACD;AAMM,MAAM,aAAyC;IACpD,oBAAoB;IACpB,UAAU;IACV,iBAAiB;IACjB,qBAAqB;IAErB,oBAAoB;IACpB,KAAK;IACL,OAAO;IACP,UAAU;IACV,YAAY;IACZ,SAAS;IACT,oBAAoB;IACpB,QAAQ;AACV;AAMO,SAAS,aAAa,OAAe;IAC1C,OAAO,UAAU,CAAC,QAAQ,IAAI,WAAW,eAAe;AAC1D;AAKO,SAAS,kBAAkB,OAAe;IAC/C,MAAM,WAAmE;QACvE,UAAU;YACR,OAAO;YACP,aAAa;QACf;QACA,iBAAiB;YACf,OAAO;YACP,aAAa;QACf;QACA,qBAAqB;YACnB,OAAO;YACP,aAAa;QACf;QACA,KAAK;YACH,OAAO;YACP,aAAa;QACf;QACA,OAAO;YACL,OAAO;YACP,aAAa;QACf;QACA,UAAU;YACR,OAAO;YACP,aAAa;QACf;QACA,YAAY;YACV,OAAO;YACP,aAAa;QACf;QACA,SAAS;YACP,OAAO;YACP,aAAa;QACf;QACA,oBAAoB;YAClB,OAAO;YACP,aAAa;QACf;QACA,QAAQ;YACN,OAAO;YACP,aAAa;QACf;IACF;IAEA,OAAO,QAAQ,CAAC,QAAQ,IAAI,SAAS,QAAQ;AAC/C"}},
    {"offset": {"line": 9378, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/tour/tour-welcome-modal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { motion } from 'framer-motion'\r\nimport {\r\n  Sparkles,\r\n  ArrowRight,\r\n  Building2,\r\n  Briefcase,\r\n  Users,\r\n  Scale,\r\n  UserCircle,\r\n  Shield,\r\n  Clock,\r\n  Keyboard,\r\n  ListChecks,\r\n  Check,\r\n  RotateCcw\r\n} from 'lucide-react'\r\nimport { useTour } from '@/contexts/tour-context'\r\nimport { getWelcomeMessage, getTourSteps } from '@/config/platform-tour'\r\nimport { useMemo } from 'react'\r\n\r\ninterface TourWelcomeModalProps {\r\n  open: boolean\r\n  onClose: () => void\r\n  onSkip: () => Promise<void>\r\n  persona?: string\r\n}\r\n\r\n// Get the appropriate icon component for each persona type\r\nfunction getPersonaIcon(persona: string) {\r\n  switch (persona) {\r\n    case 'ceo':\r\n      return Shield\r\n    case 'staff':\r\n      return Users\r\n    case 'arranger':\r\n      return Briefcase\r\n    case 'investor':\r\n    case 'investor_entity':\r\n      return Building2\r\n    case 'investor_individual':\r\n      return UserCircle\r\n    case 'introducer':\r\n    case 'partner':\r\n    case 'commercial_partner':\r\n      return Users\r\n    case 'lawyer':\r\n      return Scale\r\n    default:\r\n      return Sparkles\r\n  }\r\n}\r\n\r\n// Persona-specific gradient colors for the icon\r\nconst personaGradients: Record<string, { from: string; to: string }> = {\r\n  ceo: { from: 'from-purple-500', to: 'to-purple-600' },\r\n  staff: { from: 'from-rose-500', to: 'to-rose-600' },\r\n  arranger: { from: 'from-blue-500', to: 'to-indigo-600' },\r\n  investor: { from: 'from-emerald-500', to: 'to-emerald-600' },\r\n  investor_entity: { from: 'from-emerald-500', to: 'to-emerald-600' },\r\n  investor_individual: { from: 'from-teal-500', to: 'to-teal-600' },\r\n  introducer: { from: 'from-amber-500', to: 'to-amber-600' },\r\n  partner: { from: 'from-cyan-500', to: 'to-cyan-600' },\r\n  commercial_partner: { from: 'from-indigo-500', to: 'to-indigo-600' },\r\n  lawyer: { from: 'from-slate-500', to: 'to-slate-600' },\r\n}\r\n\r\nexport function TourWelcomeModal({ open, onClose, onSkip, persona = 'investor' }: TourWelcomeModalProps) {\r\n  const { startTour } = useTour()\r\n\r\n  // Get persona-specific welcome message\r\n  const welcomeMessage = useMemo(() => getWelcomeMessage(persona), [persona])\r\n  const steps = useMemo(() => getTourSteps(persona), [persona])\r\n  const PersonaIcon = useMemo(() => getPersonaIcon(persona), [persona])\r\n  const gradient = personaGradients[persona] || personaGradients.arranger\r\n\r\n  // Calculate estimated time (roughly 30 seconds per step)\r\n  const estimatedMinutes = Math.max(1, Math.ceil(steps.length * 0.5))\r\n\r\n  const handleStartTour = () => {\r\n    onClose()\r\n    // Small delay to let modal close animation complete\r\n    setTimeout(() => startTour(), 300)\r\n  }\r\n\r\n  const handleSkip = async () => {\r\n    onClose()\r\n    await onSkip()\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"sm:max-w-[540px] p-0 overflow-hidden\" showCloseButton={false}>\r\n        {/* Gradient header background with decorative pattern */}\r\n        <div className=\"relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-blue-950/50 dark:via-indigo-950/50 dark:to-purple-950/50 px-6 pt-8 pb-6\">\r\n          {/* Decorative pattern overlay */}\r\n          <div\r\n            className=\"absolute inset-0 opacity-[0.03]\"\r\n            style={{\r\n              backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\r\n            }}\r\n          />\r\n\r\n          <DialogHeader className=\"text-center relative\">\r\n            {/* Animated large icon */}\r\n            <motion.div\r\n              initial={{ scale: 0, rotate: -180 }}\r\n              animate={{ scale: 1, rotate: 0 }}\r\n              transition={{\r\n                type: 'spring',\r\n                damping: 15,\r\n                stiffness: 200,\r\n                delay: 0.1\r\n              }}\r\n              className=\"mx-auto mb-5\"\r\n            >\r\n              <div className={`h-20 w-20 rounded-2xl bg-gradient-to-br ${gradient.from} ${gradient.to} shadow-lg flex items-center justify-center`}>\r\n                <motion.div\r\n                  animate={{\r\n                    rotateY: [0, 10, 0, -10, 0],\r\n                  }}\r\n                  transition={{\r\n                    duration: 3,\r\n                    repeat: Infinity,\r\n                    ease: 'easeInOut'\r\n                  }}\r\n                >\r\n                  <PersonaIcon className=\"h-10 w-10 text-white\" />\r\n                </motion.div>\r\n              </div>\r\n            </motion.div>\r\n\r\n            <DialogTitle className=\"text-2xl font-bold text-foreground\">\r\n              {welcomeMessage.title}\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-base text-muted-foreground mt-2 max-w-sm mx-auto\">\r\n              {welcomeMessage.description}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n        </div>\r\n\r\n        {/* Content section */}\r\n        <div className=\"px-6 py-5\">\r\n          {/* Tour overview stats */}\r\n          <div className=\"flex items-center justify-center gap-6 mb-6\">\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <div className=\"h-8 w-8 rounded-lg bg-blue-50 dark:bg-blue-500/10 flex items-center justify-center\">\r\n                <ListChecks className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\r\n              </div>\r\n              <span className=\"font-medium\">{steps.length} Steps</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <div className=\"h-8 w-8 rounded-lg bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center\">\r\n                <Clock className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\r\n              </div>\r\n              <span className=\"font-medium\">~{estimatedMinutes} min</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <div className=\"h-8 w-8 rounded-lg bg-purple-50 dark:bg-purple-500/10 flex items-center justify-center\">\r\n                <Keyboard className=\"h-4 w-4 text-purple-600 dark:text-purple-400\" />\r\n              </div>\r\n              <span className=\"font-medium\">Keyboard</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Feature highlights */}\r\n          <div className=\"space-y-2.5 mb-6\">\r\n            <div className=\"flex items-start gap-3 text-sm\">\r\n              <div className=\"h-5 w-5 rounded-full bg-green-100 dark:bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <Check className=\"h-3 w-3 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              <span className=\"text-muted-foreground\">Interactive walkthrough of key features</span>\r\n            </div>\r\n            <div className=\"flex items-start gap-3 text-sm\">\r\n              <div className=\"h-5 w-5 rounded-full bg-green-100 dark:bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <Check className=\"h-3 w-3 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              <span className=\"text-muted-foreground\">Skip anytime or resume later</span>\r\n            </div>\r\n            <div className=\"flex items-start gap-3 text-sm\">\r\n              <div className=\"h-5 w-5 rounded-full bg-green-100 dark:bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <Check className=\"h-3 w-3 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              <span className=\"text-muted-foreground\">Restart from settings anytime</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter className=\"flex-col gap-3 sm:flex-col px-6 pb-6 pt-0\">\r\n          {/* Gradient CTA button */}\r\n          <Button\r\n            onClick={handleStartTour}\r\n            className={`w-full h-12 bg-gradient-to-r ${gradient.from} ${gradient.to} hover:opacity-90 text-white font-medium text-base shadow-lg shadow-blue-500/20`}\r\n          >\r\n            <Sparkles className=\"h-5 w-5 mr-2\" />\r\n            Start Tour\r\n            <ArrowRight className=\"h-5 w-5 ml-2\" />\r\n          </Button>\r\n\r\n          {/* Skip button */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            onClick={handleSkip}\r\n            className=\"w-full text-muted-foreground hover:text-foreground\"\r\n          >\r\n            Skip for now\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\n/**\r\n * Tour Restart Button Component\r\n * For use in settings/profile pages to let users restart the tour\r\n */\r\nexport function TourRestartButton({ className = '' }: { className?: string }) {\r\n  const handleRestartTour = async () => {\r\n    try {\r\n      await fetch('/api/profiles/tour-reset', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      })\r\n      // Reload to show welcome modal\r\n      window.location.reload()\r\n    } catch (error) {\r\n      console.error('Failed to reset tour:', error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      variant=\"outline\"\r\n      onClick={handleRestartTour}\r\n      className={className}\r\n    >\r\n      <RotateCcw className=\"h-4 w-4 mr-2\" />\r\n      Restart Platform Tour\r\n    </Button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;;;AA7BA;;;;;;;;AAsCA,2DAA2D;AAC3D,SAAS,eAAe,OAAe;IACrC,OAAQ;QACN,KAAK;YACH,OAAO,0OAAM;QACf,KAAK;YACH,OAAO,uOAAK;QACd,KAAK;YACH,OAAO,mPAAS;QAClB,KAAK;QACL,KAAK;YACH,OAAO,uPAAS;QAClB,KAAK;YACH,OAAO,0PAAU;QACnB,KAAK;QACL,KAAK;QACL,KAAK;YACH,OAAO,uOAAK;QACd,KAAK;YACH,OAAO,uOAAK;QACd;YACE,OAAO,gPAAQ;IACnB;AACF;AAEA,gDAAgD;AAChD,MAAM,mBAAiE;IACrE,KAAK;QAAE,MAAM;QAAmB,IAAI;IAAgB;IACpD,OAAO;QAAE,MAAM;QAAiB,IAAI;IAAc;IAClD,UAAU;QAAE,MAAM;QAAiB,IAAI;IAAgB;IACvD,UAAU;QAAE,MAAM;QAAoB,IAAI;IAAiB;IAC3D,iBAAiB;QAAE,MAAM;QAAoB,IAAI;IAAiB;IAClE,qBAAqB;QAAE,MAAM;QAAiB,IAAI;IAAc;IAChE,YAAY;QAAE,MAAM;QAAkB,IAAI;IAAe;IACzD,SAAS;QAAE,MAAM;QAAiB,IAAI;IAAc;IACpD,oBAAoB;QAAE,MAAM;QAAmB,IAAI;IAAgB;IACnE,QAAQ;QAAE,MAAM;QAAkB,IAAI;IAAe;AACvD;AAEO,SAAS,iBAAiB,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,UAAU,UAAU,EAAyB;;IACrG,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,wKAAO;IAE7B,uCAAuC;IACvC,MAAM,iBAAiB,IAAA,+LAAO;oDAAC,IAAM,IAAA,gLAAiB,EAAC;mDAAU;QAAC;KAAQ;IAC1E,MAAM,QAAQ,IAAA,+LAAO;2CAAC,IAAM,IAAA,2KAAY,EAAC;0CAAU;QAAC;KAAQ;IAC5D,MAAM,cAAc,IAAA,+LAAO;iDAAC,IAAM,eAAe;gDAAU;QAAC;KAAQ;IACpE,MAAM,WAAW,gBAAgB,CAAC,QAAQ,IAAI,iBAAiB,QAAQ;IAEvE,yDAAyD;IACzD,MAAM,mBAAmB,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,MAAM,MAAM,GAAG;IAE9D,MAAM,kBAAkB;QACtB;QACA,oDAAoD;QACpD,WAAW,IAAM,aAAa;IAChC;IAEA,MAAM,aAAa;QACjB;QACA,MAAM;IACR;IAEA,qBACE,oNAAC,sKAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,oNAAC,6KAAa;YAAC,WAAU;YAAuC,iBAAiB;;8BAE/E,oNAAC;oBAAI,WAAU;;sCAEb,oNAAC;4BACC,WAAU;4BACV,OAAO;gCACL,iBAAiB,CAAC,+WAA+W,CAAC;4BACpY;;;;;;sCAGF,oNAAC,4KAAY;4BAAC,WAAU;;8CAEtB,oNAAC,8NAAM,CAAC,GAAG;oCACT,SAAS;wCAAE,OAAO;wCAAG,QAAQ,CAAC;oCAAI;oCAClC,SAAS;wCAAE,OAAO;wCAAG,QAAQ;oCAAE;oCAC/B,YAAY;wCACV,MAAM;wCACN,SAAS;wCACT,WAAW;wCACX,OAAO;oCACT;oCACA,WAAU;8CAEV,cAAA,oNAAC;wCAAI,WAAW,CAAC,wCAAwC,EAAE,SAAS,IAAI,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,2CAA2C,CAAC;kDAClI,cAAA,oNAAC,8NAAM,CAAC,GAAG;4CACT,SAAS;gDACP,SAAS;oDAAC;oDAAG;oDAAI;oDAAG,CAAC;oDAAI;iDAAE;4CAC7B;4CACA,YAAY;gDACV,UAAU;gDACV,QAAQ;gDACR,MAAM;4CACR;sDAEA,cAAA,oNAAC;gDAAY,WAAU;;;;;;;;;;;;;;;;;;;;;8CAK7B,oNAAC,2KAAW;oCAAC,WAAU;8CACpB,eAAe,KAAK;;;;;;8CAEvB,oNAAC,iLAAiB;oCAAC,WAAU;8CAC1B,eAAe,WAAW;;;;;;;;;;;;;;;;;;8BAMjC,oNAAC;oBAAI,WAAU;;sCAEb,oNAAC;4BAAI,WAAU;;8CACb,oNAAC;oCAAI,WAAU;;sDACb,oNAAC;4CAAI,WAAU;sDACb,cAAA,oNAAC,0PAAU;gDAAC,WAAU;;;;;;;;;;;sDAExB,oNAAC;4CAAK,WAAU;;gDAAe,MAAM,MAAM;gDAAC;;;;;;;;;;;;;8CAE9C,oNAAC;oCAAI,WAAU;;sDACb,oNAAC;4CAAI,WAAU;sDACb,cAAA,oNAAC,uOAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,oNAAC;4CAAK,WAAU;;gDAAc;gDAAE;gDAAiB;;;;;;;;;;;;;8CAEnD,oNAAC;oCAAI,WAAU;;sDACb,oNAAC;4CAAI,WAAU;sDACb,cAAA,oNAAC,gPAAQ;gDAAC,WAAU;;;;;;;;;;;sDAEtB,oNAAC;4CAAK,WAAU;sDAAc;;;;;;;;;;;;;;;;;;sCAKlC,oNAAC;4BAAI,WAAU;;8CACb,oNAAC;oCAAI,WAAU;;sDACb,oNAAC;4CAAI,WAAU;sDACb,cAAA,oNAAC,uOAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,oNAAC;4CAAK,WAAU;sDAAwB;;;;;;;;;;;;8CAE1C,oNAAC;oCAAI,WAAU;;sDACb,oNAAC;4CAAI,WAAU;sDACb,cAAA,oNAAC,uOAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,oNAAC;4CAAK,WAAU;sDAAwB;;;;;;;;;;;;8CAE1C,oNAAC;oCAAI,WAAU;;sDACb,oNAAC;4CAAI,WAAU;sDACb,cAAA,oNAAC,uOAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,oNAAC;4CAAK,WAAU;sDAAwB;;;;;;;;;;;;;;;;;;;;;;;;8BAK9C,oNAAC,4KAAY;oBAAC,WAAU;;sCAEtB,oNAAC,sKAAM;4BACL,SAAS;4BACT,WAAW,CAAC,6BAA6B,EAAE,SAAS,IAAI,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,+EAA+E,CAAC;;8CAExJ,oNAAC,gPAAQ;oCAAC,WAAU;;;;;;gCAAiB;8CAErC,oNAAC,0PAAU;oCAAC,WAAU;;;;;;;;;;;;sCAIxB,oNAAC,sKAAM;4BACL,SAAQ;4BACR,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAhJgB;;QACQ,wKAAO;;;KADf;AAsJT,SAAS,kBAAkB,EAAE,YAAY,EAAE,EAA0B;IAC1E,MAAM,oBAAoB;QACxB,IAAI;YACF,MAAM,MAAM,4BAA4B;gBACtC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;YAChD;YACA,+BAA+B;YAC/B,OAAO,QAAQ,CAAC,MAAM;QACxB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC;IACF;IAEA,qBACE,oNAAC,sKAAM;QACL,SAAQ;QACR,SAAS;QACT,WAAW;;0BAEX,oNAAC,uPAAS;gBAAC,WAAU;;;;;;YAAiB;;;;;;;AAI5C;MAxBgB"}},
    {"offset": {"line": 9946, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/tour/platform-tour.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useCallback, useRef } from 'react'\r\nimport { TourProvider, useTour } from '@/contexts/tour-context'\r\nimport { TourSpotlight } from './tour-spotlight'\r\nimport { TourTooltip } from './tour-tooltip'\r\nimport { TourWelcomeModal } from './tour-welcome-modal'\r\nimport { getTourSteps, type TourStep } from '@/config/platform-tour'\r\nimport confetti from 'canvas-confetti'\r\n\r\ninterface TourContentProps {\r\n  steps: TourStep[]\r\n  persona: string\r\n}\r\n\r\nfunction TourContent({ steps, persona }: TourContentProps) {\r\n  const { isActive, currentStep } = useTour()\r\n\r\n  if (!isActive || !steps[currentStep]) return null\r\n\r\n  const step = steps[currentStep]\r\n\r\n  return (\r\n    <>\r\n      <TourSpotlight\r\n        targetSelector={step.target}\r\n        isVisible={step.target !== 'body'}\r\n        padding={step.highlightPadding}\r\n      />\r\n      <TourTooltip step={step} stepNumber={currentStep} persona={persona} />\r\n    </>\r\n  )\r\n}\r\n\r\n// Confetti celebration effect\r\nfunction triggerConfetti() {\r\n  const duration = 3 * 1000\r\n  const end = Date.now() + duration\r\n\r\n  // Multiple bursts from different angles\r\n  const colors = ['#3b82f6', '#8b5cf6', '#10b981', '#f59e0b', '#ec4899']\r\n\r\n  const frame = () => {\r\n    confetti({\r\n      particleCount: 3,\r\n      angle: 60,\r\n      spread: 55,\r\n      origin: { x: 0 },\r\n      colors: colors\r\n    })\r\n    confetti({\r\n      particleCount: 3,\r\n      angle: 120,\r\n      spread: 55,\r\n      origin: { x: 1 },\r\n      colors: colors\r\n    })\r\n\r\n    if (Date.now() < end) {\r\n      requestAnimationFrame(frame)\r\n    }\r\n  }\r\n\r\n  // Initial big burst\r\n  confetti({\r\n    particleCount: 100,\r\n    spread: 70,\r\n    origin: { y: 0.6 },\r\n    colors: colors\r\n  })\r\n\r\n  // Continuous celebration\r\n  frame()\r\n}\r\n\r\n// Haptic feedback for mobile\r\nfunction triggerHaptic() {\r\n  if (typeof navigator !== 'undefined' && 'vibrate' in navigator) {\r\n    navigator.vibrate(10)\r\n  }\r\n}\r\n\r\ninterface PlatformTourProps {\r\n  children: React.ReactNode\r\n  activePersona: string\r\n  hasCompletedTour: boolean\r\n}\r\n\r\nexport function PlatformTour({\r\n  children,\r\n  activePersona,\r\n  hasCompletedTour\r\n}: PlatformTourProps) {\r\n  const [showWelcome, setShowWelcome] = useState(!hasCompletedTour)\r\n  const [isCompleted, setIsCompleted] = useState(hasCompletedTour)\r\n  const completionTriggeredRef = useRef(false)\r\n\r\n  const steps = getTourSteps(activePersona)\r\n\r\n  // Extract step IDs for analytics\r\n  const stepIds = steps.map(step => step.id || step.target)\r\n\r\n  const handleComplete = useCallback(async () => {\r\n    if (isCompleted) return // Already completed, no need to call API again\r\n\r\n    // Prevent double-triggering\r\n    if (completionTriggeredRef.current) return\r\n    completionTriggeredRef.current = true\r\n\r\n    try {\r\n      // Trigger celebration effects\r\n      triggerConfetti()\r\n      triggerHaptic()\r\n\r\n      await fetch('/api/profiles/tour-completed', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      })\r\n      setIsCompleted(true)\r\n    } catch (error) {\r\n      console.error('Failed to save tour completion:', error)\r\n      completionTriggeredRef.current = false // Allow retry on error\r\n    }\r\n  }, [isCompleted])\r\n\r\n  const handleSkipFromWelcome = useCallback(async () => {\r\n    setShowWelcome(false)\r\n    // Don't trigger confetti on skip\r\n    try {\r\n      await fetch('/api/profiles/tour-completed', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      })\r\n      setIsCompleted(true)\r\n    } catch (error) {\r\n      console.error('Failed to save tour skip:', error)\r\n    }\r\n  }, [])\r\n\r\n  // Analytics callbacks (can be connected to your analytics service)\r\n  const analytics = {\r\n    onStepView: (step: number, stepId: string) => {\r\n      // console.log(`[Tour Analytics] Viewing step ${step}: ${stepId}`)\r\n    },\r\n    onStepComplete: (step: number, stepId: string, durationMs: number) => {\r\n      // console.log(`[Tour Analytics] Completed step ${step}: ${stepId} in ${durationMs}ms`)\r\n    },\r\n    onTourComplete: (totalDurationMs: number) => {\r\n      // console.log(`[Tour Analytics] Tour completed in ${totalDurationMs}ms`)\r\n    },\r\n    onTourSkip: (atStep: number) => {\r\n      // console.log(`[Tour Analytics] Tour skipped at step ${atStep}`)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TourProvider\r\n      totalSteps={steps.length}\r\n      onComplete={handleComplete}\r\n      analytics={analytics}\r\n      stepIds={stepIds}\r\n      enableKeyboardNav={true}\r\n      enablePersistence={true}\r\n    >\r\n      {children}\r\n\r\n      {/* Welcome modal for first-time users - now with persona-specific messaging */}\r\n      {!isCompleted && (\r\n        <TourWelcomeModal\r\n          open={showWelcome}\r\n          onClose={() => setShowWelcome(false)}\r\n          onSkip={handleSkipFromWelcome}\r\n          persona={activePersona}\r\n        />\r\n      )}\r\n\r\n      {/* Tour overlay - only render when potentially active */}\r\n      <TourContent steps={steps} persona={activePersona} />\r\n    </TourProvider>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}