{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Wrapper to provide stable ID for SSR hydration\nconst Tabs = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root>\n>(({ id, ...props }, ref) => {\n  const generatedId = React.useId()\n  return <TabsPrimitive.Root ref={ref} id={id ?? generatedId} {...props} />\n})\nTabs.displayName = \"Tabs\"\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;;;AALA;;;;AAOA,iDAAiD;AACjD,MAAM,qBAAO,GAAA,kMAAgB,SAG3B,CAAC,EAAE,EAAE,EAAE,GAAG,OAAO,EAAE;;IACnB,MAAM,cAAc,6LAAW;IAC/B,qBAAO,oNAAC,kMAAkB;QAAC,KAAK;QAAK,IAAI,MAAM;QAAc,GAAG,KAAK;;;;;;AACvE;;AACA,KAAK,WAAW,GAAG;AAEnB,MAAM,yBAAW,kMAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,kMAAkB;QACjB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,sGACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,kMAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,+YACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW"}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,iMAAG,EACvB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,kMAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,oNAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,IAAA,mJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,kMAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC;QACC,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,kMAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC;QACC,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/signature/signature-canvas-widget.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useRef, useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Loader2, RotateCcw } from 'lucide-react'\r\nimport SignatureCanvas from 'react-signature-canvas'\r\n\r\ninterface SignatureCanvasWidgetProps {\r\n  onSignatureCapture: (dataUrl: string) => Promise<void>\r\n  signerName: string\r\n  signerEmail: string\r\n  isSubmitting?: boolean\r\n}\r\n\r\nexport function SignatureCanvasWidget({\r\n  onSignatureCapture,\r\n  signerName,\r\n  signerEmail,\r\n  isSubmitting = false\r\n}: SignatureCanvasWidgetProps) {\r\n  const sigCanvasRef = useRef<SignatureCanvas>(null)\r\n  const [hasDrawn, setHasDrawn] = useState(false)\r\n\r\n  const handleDrawEnd = () => {\r\n    if (sigCanvasRef.current && !sigCanvasRef.current.isEmpty()) {\r\n      setHasDrawn(true)\r\n    }\r\n  }\r\n\r\n  const handleClear = () => {\r\n    if (sigCanvasRef.current) {\r\n      sigCanvasRef.current.clear()\r\n      setHasDrawn(false)\r\n    }\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    if (!sigCanvasRef.current || sigCanvasRef.current.isEmpty()) return\r\n\r\n    // Get trimmed canvas (removes whitespace around signature)\r\n    const trimmedCanvas = sigCanvasRef.current.getTrimmedCanvas()\r\n    const dataUrl = trimmedCanvas.toDataURL('image/png')\r\n    await onSignatureCapture(dataUrl)\r\n  }\r\n\r\n  return (\r\n    <Card className=\"h-full\">\r\n      <CardHeader>\r\n        <CardTitle>Sign Document</CardTitle>\r\n        <CardDescription>\r\n          Draw your signature below to execute this document\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        <div className=\"space-y-2\">\r\n          <p className=\"text-sm text-muted-foreground\">Signing as:</p>\r\n          <div className=\"rounded-lg bg-muted p-3\">\r\n            <p className=\"font-semibold\">{signerName}</p>\r\n            <p className=\"text-sm text-muted-foreground\">{signerEmail}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <p className=\"text-sm font-medium mb-2\">Your Signature</p>\r\n          <div className=\"border-2 border-gray-300 rounded-lg bg-white overflow-hidden\">\r\n            <SignatureCanvas\r\n              ref={sigCanvasRef}\r\n              canvasProps={{\r\n                className: 'w-full cursor-crosshair',\r\n                style: { width: '100%', height: '192px' }\r\n              }}\r\n              penColor=\"black\"\r\n              backgroundColor=\"white\"\r\n              onEnd={handleDrawEnd}\r\n            />\r\n          </div>\r\n          <p className=\"text-xs text-muted-foreground mt-2\">\r\n            Draw your signature using your mouse or touchscreen\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex gap-2 pt-4\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={handleClear}\r\n            disabled={!hasDrawn || isSubmitting}\r\n            className=\"flex-1\"\r\n          >\r\n            <RotateCcw className=\"h-4 w-4 mr-2\" />\r\n            Clear\r\n          </Button>\r\n          <Button\r\n            onClick={handleSubmit}\r\n            disabled={!hasDrawn || isSubmitting}\r\n            className=\"flex-1\"\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                Submitting...\r\n              </>\r\n            ) : (\r\n              'Submit Signature'\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;;;AANA;;;;;;AAeO,SAAS,sBAAsB,EACpC,kBAAkB,EAClB,UAAU,EACV,WAAW,EACX,eAAe,KAAK,EACO;;IAC3B,MAAM,eAAe,IAAA,8LAAM,EAAkB;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gMAAQ,EAAC;IAEzC,MAAM,gBAAgB;QACpB,IAAI,aAAa,OAAO,IAAI,CAAC,aAAa,OAAO,CAAC,OAAO,IAAI;YAC3D,YAAY;QACd;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,aAAa,OAAO,EAAE;YACxB,aAAa,OAAO,CAAC,KAAK;YAC1B,YAAY;QACd;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,aAAa,OAAO,IAAI,aAAa,OAAO,CAAC,OAAO,IAAI;QAE7D,2DAA2D;QAC3D,MAAM,gBAAgB,aAAa,OAAO,CAAC,gBAAgB;QAC3D,MAAM,UAAU,cAAc,SAAS,CAAC;QACxC,MAAM,mBAAmB;IAC3B;IAEA,qBACE,oNAAC,kKAAI;QAAC,WAAU;;0BACd,oNAAC,wKAAU;;kCACT,oNAAC,uKAAS;kCAAC;;;;;;kCACX,oNAAC,6KAAe;kCAAC;;;;;;;;;;;;0BAInB,oNAAC,yKAAW;gBAAC,WAAU;;kCACrB,oNAAC;wBAAI,WAAU;;0CACb,oNAAC;gCAAE,WAAU;0CAAgC;;;;;;0CAC7C,oNAAC;gCAAI,WAAU;;kDACb,oNAAC;wCAAE,WAAU;kDAAiB;;;;;;kDAC9B,oNAAC;wCAAE,WAAU;kDAAiC;;;;;;;;;;;;;;;;;;kCAIlD,oNAAC;;0CACC,oNAAC;gCAAE,WAAU;0CAA2B;;;;;;0CACxC,oNAAC;gCAAI,WAAU;0CACb,cAAA,oNAAC,mMAAe;oCACd,KAAK;oCACL,aAAa;wCACX,WAAW;wCACX,OAAO;4CAAE,OAAO;4CAAQ,QAAQ;wCAAQ;oCAC1C;oCACA,UAAS;oCACT,iBAAgB;oCAChB,OAAO;;;;;;;;;;;0CAGX,oNAAC;gCAAE,WAAU;0CAAqC;;;;;;;;;;;;kCAKpD,oNAAC;wBAAI,WAAU;;0CACb,oNAAC,sKAAM;gCACL,SAAQ;gCACR,SAAS;gCACT,UAAU,CAAC,YAAY;gCACvB,WAAU;;kDAEV,oNAAC,uPAAS;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;0CAGxC,oNAAC,sKAAM;gCACL,SAAS;gCACT,UAAU,CAAC,YAAY;gCACvB,WAAU;0CAET,6BACC;;sDACE,oNAAC,sPAAO;4CAAC,WAAU;;;;;;wCAA8B;;mDAInD;;;;;;;;;;;;;;;;;;;;;;;;AAOd;GA/FgB;KAAA"}},
    {"offset": {"line": 521, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/signature/inline-pdf-viewer.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { FileText, ExternalLink } from 'lucide-react'\r\n\r\ninterface InlinePdfViewerProps {\r\n  pdfUrl: string\r\n  documentName: string\r\n}\r\n\r\nexport function InlinePdfViewer({ pdfUrl, documentName }: InlinePdfViewerProps) {\r\n  return (\r\n    <Card className=\"h-full\">\r\n      <CardHeader>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <FileText className=\"h-5 w-5\" />\r\n            <CardTitle className=\"text-lg\">{documentName}</CardTitle>\r\n          </div>\r\n          <Button variant=\"outline\" size=\"sm\" asChild>\r\n            <a href={pdfUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              Open in New Tab\r\n              <ExternalLink className=\"h-4 w-4 ml-2\" />\r\n            </a>\r\n          </Button>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"border rounded-lg bg-gray-50 overflow-hidden\" style={{ height: '600px' }}>\r\n          <iframe\r\n            src={pdfUrl}\r\n            className=\"w-full h-full\"\r\n            title={documentName}\r\n          />\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAJA;;;;;AAWO,SAAS,gBAAgB,EAAE,MAAM,EAAE,YAAY,EAAwB;IAC5E,qBACE,oNAAC,kKAAI;QAAC,WAAU;;0BACd,oNAAC,wKAAU;0BACT,cAAA,oNAAC;oBAAI,WAAU;;sCACb,oNAAC;4BAAI,WAAU;;8CACb,oNAAC,oPAAQ;oCAAC,WAAU;;;;;;8CACpB,oNAAC,uKAAS;oCAAC,WAAU;8CAAW;;;;;;;;;;;;sCAElC,oNAAC,sKAAM;4BAAC,SAAQ;4BAAU,MAAK;4BAAK,OAAO;sCACzC,cAAA,oNAAC;gCAAE,MAAM;gCAAQ,QAAO;gCAAS,KAAI;;oCAAsB;kDAEzD,oNAAC,gQAAY;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAKhC,oNAAC,yKAAW;0BACV,cAAA,oNAAC;oBAAI,WAAU;oBAA+C,OAAO;wBAAE,QAAQ;oBAAQ;8BACrF,cAAA,oNAAC;wBACC,KAAK;wBACL,WAAU;wBACV,OAAO;;;;;;;;;;;;;;;;;;;;;;AAMnB;KA5BgB"}},
    {"offset": {"line": 648, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28staff%29/versotech/staff/versosign/versosign-page-client.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport {\r\n  CheckCircle2,\r\n  Clock,\r\n  AlertCircle,\r\n  FileSignature,\r\n  ExternalLink,\r\n  Users,\r\n  Mail,\r\n  Calendar,\r\n  AlertTriangle,\r\n  ArrowLeft\r\n} from 'lucide-react'\r\nimport { format } from 'date-fns'\r\nimport { SignatureCanvasWidget } from '@/components/signature/signature-canvas-widget'\r\nimport { InlinePdfViewer } from '@/components/signature/inline-pdf-viewer'\r\nimport type { SignatureGroup, ExpiredSignature } from './page'\r\nimport type { SignatureTask } from './page'\r\n\r\ninterface SignatureRequestPublicView {\r\n  signing_token: string\r\n  signer_name: string\r\n  signer_email: string\r\n  document_type: string\r\n  unsigned_pdf_url?: string\r\n  google_drive_url?: string\r\n  token_expires_at: string\r\n  status: string\r\n}\r\n\r\ninterface VersoSignPageClientProps {\r\n  userId: string\r\n  signatureGroups: SignatureGroup[]\r\n  stats: {\r\n    pending: number\r\n    in_progress: number\r\n    completed_today: number\r\n    overdue: number\r\n    expired: number\r\n  }\r\n}\r\n\r\nexport function VersoSignPageClient({\r\n  userId,\r\n  signatureGroups,\r\n  stats\r\n}: VersoSignPageClientProps) {\r\n  const router = useRouter()\r\n  const [selectedTab, setSelectedTab] = useState('countersignatures')\r\n  const [loadingTaskId, setLoadingTaskId] = useState<string | null>(null)\r\n  const [signingMode, setSigningMode] = useState<{\r\n    active: boolean\r\n    task: SignatureTask | null\r\n    signatureRequest: SignatureRequestPublicView | null\r\n    token: string | null\r\n  }>({ active: false, task: null, signatureRequest: null, token: null })\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // Extract token from signing URL\r\n  // Supports both old format (/sign/TOKEN) and new format (?token=TOKEN)\r\n  const extractTokenFromUrl = (url: string): string | null => {\r\n    // Try new format first: ?token=TOKEN or &token=TOKEN\r\n    const queryMatch = url.match(/[?&]token=([^&]+)/)\r\n    if (queryMatch) return queryMatch[1]\r\n\r\n    // Fall back to old format: /sign/TOKEN\r\n    const pathMatch = url.match(/\\/sign\\/([^\\/\\?]+)/)\r\n    return pathMatch ? pathMatch[1] : null\r\n  }\r\n\r\n  const handleSignDocument = async (task: SignatureTask) => {\r\n    if (!task.instructions?.action_url) {\r\n      setError('No signature URL available')\r\n      return\r\n    }\r\n\r\n    const token = extractTokenFromUrl(task.instructions.action_url)\r\n    if (!token) {\r\n      setError('Invalid signature URL')\r\n      return\r\n    }\r\n\r\n    setLoadingTaskId(task.id)\r\n    setError(null)\r\n\r\n    try {\r\n      // Fetch signature request details\r\n      const response = await fetch(`/api/signature/${token}`)\r\n      if (!response.ok) {\r\n        // Handle specific error cases\r\n        if (response.status === 410) {\r\n          throw new Error('This signature request has expired. Please check the \"Expired\" tab or resend the signature request.')\r\n        } else if (response.status === 400) {\r\n          const errorData = await response.json().catch(() => ({}))\r\n          throw new Error(errorData.error || 'This signature request is no longer valid.')\r\n        } else if (response.status === 404) {\r\n          throw new Error('Signature request not found. It may have been deleted or never created.')\r\n        }\r\n        throw new Error('Failed to fetch signature request')\r\n      }\r\n\r\n      const signatureRequest = await response.json()\r\n\r\n      // Enter signing mode with token\r\n      setSigningMode({\r\n        active: true,\r\n        task,\r\n        signatureRequest,\r\n        token\r\n      })\r\n\r\n      // Mark task as in progress\r\n      await fetch('/api/tasks', {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          id: task.id,\r\n          status: 'in_progress',\r\n          started_at: new Date().toISOString()\r\n        })\r\n      })\r\n    } catch (error) {\r\n      console.error('Error entering signing mode:', error)\r\n      setError(error instanceof Error ? error.message : 'Failed to load signature request')\r\n    } finally {\r\n      setLoadingTaskId(null)\r\n    }\r\n  }\r\n\r\n  const handleExitSigningMode = () => {\r\n    setSigningMode({ active: false, task: null, signatureRequest: null, token: null })\r\n    setError(null)\r\n  }\r\n\r\n  const handleSignatureSubmit = async (signatureDataUrl: string) => {\r\n    if (!signingMode.signatureRequest || !signingMode.token) return\r\n\r\n    setIsSubmitting(true)\r\n    setError(null)\r\n\r\n    try {\r\n      const response = await fetch('/api/signature/submit', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          token: signingMode.token,\r\n          signature_data_url: signatureDataUrl\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json()\r\n        throw new Error(errorData.error || 'Failed to submit signature')\r\n      }\r\n\r\n      // Exit signing mode\r\n      handleExitSigningMode()\r\n\r\n      // Refresh the page to update task list\r\n      router.refresh()\r\n    } catch (error) {\r\n      console.error('Error submitting signature:', error)\r\n      setError(error instanceof Error ? error.message : 'Failed to submit signature')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  // Real-time task updates\r\n  useEffect(() => {\r\n    const supabase = createClient()\r\n\r\n    const subscription = supabase\r\n      .channel('versosign_tasks')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: 'UPDATE',\r\n          schema: 'public',\r\n          table: 'tasks',\r\n          filter: `owner_user_id=eq.${userId}`\r\n        },\r\n        (payload) => {\r\n          console.log('Task updated:', payload)\r\n          router.refresh()\r\n        }\r\n      )\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: 'INSERT',\r\n          schema: 'public',\r\n          table: 'tasks',\r\n          filter: `owner_user_id=eq.${userId}`\r\n        },\r\n        (payload) => {\r\n          console.log('New task created:', payload)\r\n          router.refresh()\r\n        }\r\n      )\r\n      .subscribe()\r\n\r\n    return () => {\r\n      subscription.unsubscribe()\r\n    }\r\n  }, [userId, router])\r\n\r\n  const handleManualFollowUp = async (task: SignatureTask) => {\r\n    const message = `\r\nInvestor: ${task.metadata?.investor_name || 'Unknown'}\r\nEmail: ${task.instructions?.investor_email || 'Not available'}\r\nSignature URL: ${task.instructions?.action_url || 'Not available'}\r\n\r\nAction Required: ${task.instructions?.action_required || 'Send signature link to investor'}\r\n    `\r\n\r\n    // Copy to clipboard\r\n    await navigator.clipboard.writeText(message)\r\n    alert('Follow-up details copied to clipboard!')\r\n\r\n    // Mark as in progress\r\n    setLoadingTaskId(task.id)\r\n    try {\r\n      const response = await fetch('/api/tasks', {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          id: task.id,\r\n          status: 'in_progress',\r\n          started_at: new Date().toISOString()\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        console.error('Failed to update task status')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating task:', error)\r\n    } finally {\r\n      setLoadingTaskId(null)\r\n    }\r\n  }\r\n\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case 'high': return 'bg-red-100 text-red-800 border-red-300'\r\n      case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-300'\r\n      case 'low': return 'bg-green-100 text-green-800 border-green-300'\r\n      default: return 'bg-gray-100 text-gray-800 border-gray-300'\r\n    }\r\n  }\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'completed': return <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\r\n      case 'in_progress': return <Clock className=\"h-4 w-4 text-blue-600 animate-pulse\" />\r\n      case 'overdue': return <AlertTriangle className=\"h-4 w-4 text-red-600\" />\r\n      default: return <AlertCircle className=\"h-4 w-4 text-yellow-600\" />\r\n    }\r\n  }\r\n\r\n  // INLINE SIGNING MODE\r\n  if (signingMode.active && signingMode.task && signingMode.signatureRequest) {\r\n    const pdfUrl = signingMode.signatureRequest.unsigned_pdf_url || signingMode.signatureRequest.google_drive_url\r\n\r\n    return (\r\n      <div className=\"container mx-auto py-6\">\r\n        <div className=\"mb-6\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            onClick={handleExitSigningMode}\r\n            className=\"mb-4\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n            Back to Tasks\r\n          </Button>\r\n          <h1 className=\"text-2xl font-bold text-foreground mb-2\">{signingMode.task.title}</h1>\r\n          <p className=\"text-muted-foreground\">{signingMode.task.description}</p>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert className=\"mb-6 border-red-200 bg-red-50\">\r\n            <AlertTriangle className=\"h-4 w-4 text-red-600\" />\r\n            <AlertTitle className=\"text-red-900\">Error</AlertTitle>\r\n            <AlertDescription className=\"text-red-700\">{error}</AlertDescription>\r\n          </Alert>\r\n        )}\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {pdfUrl && (\r\n            <InlinePdfViewer\r\n              pdfUrl={pdfUrl}\r\n              documentName={signingMode.task.title}\r\n            />\r\n          )}\r\n          <SignatureCanvasWidget\r\n            onSignatureCapture={handleSignatureSubmit}\r\n            signerName={signingMode.signatureRequest.signer_name}\r\n            signerEmail={signingMode.signatureRequest.signer_email}\r\n            isSubmitting={isSubmitting}\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // TASK LIST VIEW\r\n  return (\r\n    <div className=\"container mx-auto py-6\">\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-foreground mb-2\">VersoSign</h1>\r\n        <p className=\"text-muted-foreground\">\r\n          Document signature management and countersigning\r\n        </p>\r\n      </div>\r\n\r\n      {error && (\r\n        <Alert className=\"mb-6 border-red-200 bg-red-50\">\r\n          <AlertTriangle className=\"h-4 w-4 text-red-600\" />\r\n          <AlertTitle className=\"text-red-900\">Error</AlertTitle>\r\n          <AlertDescription className=\"text-red-700\">{error}</AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Pending Signatures\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.pending}</div>\r\n            {stats.pending > 0 && (\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                Awaiting action\r\n              </p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              In Progress\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.in_progress}</div>\r\n            {stats.in_progress > 0 && (\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                Currently signing\r\n              </p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Completed Today\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-green-600\">\r\n              {stats.completed_today}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Signed today\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Overdue\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-red-600\">\r\n              {stats.overdue}\r\n            </div>\r\n            {stats.overdue > 0 && (\r\n              <p className=\"text-xs text-red-600 mt-1\">\r\n                Need immediate attention\r\n              </p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Alert for Overdue Tasks */}\r\n      {stats.overdue > 0 && (\r\n        <Alert className=\"mb-6 border-red-200 bg-red-50\">\r\n          <AlertTriangle className=\"h-4 w-4 text-red-600\" />\r\n          <AlertTitle className=\"text-red-900\">Overdue Signatures</AlertTitle>\r\n          <AlertDescription className=\"text-red-700\">\r\n            You have {stats.overdue} overdue signature{stats.overdue !== 1 ? 's' : ''} requiring immediate attention.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Tabs for different signature categories */}\r\n      <Tabs value={selectedTab} onValueChange={setSelectedTab}>\r\n        <TabsList className=\"mb-6\">\r\n          <TabsTrigger value=\"countersignatures\">\r\n            <FileSignature className=\"h-4 w-4 mr-2\" />\r\n            Countersignatures\r\n            {(signatureGroups.find(g => g.category === 'countersignatures')?.tasks.length || 0) > 0 && (\r\n              <Badge className=\"ml-2\" variant=\"secondary\">\r\n                {signatureGroups.find(g => g.category === 'countersignatures')?.tasks.length || 0}\r\n              </Badge>\r\n            )}\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"follow_ups\">\r\n            <Users className=\"h-4 w-4 mr-2\" />\r\n            Manual Follow-ups\r\n            {(signatureGroups.find(g => g.category === 'follow_ups')?.tasks.length || 0) > 0 && (\r\n              <Badge className=\"ml-2\" variant=\"secondary\">\r\n                {signatureGroups.find(g => g.category === 'follow_ups')?.tasks.length || 0}\r\n              </Badge>\r\n            )}\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"other\">\r\n            <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n            Completed\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"expired\">\r\n            <AlertCircle className=\"h-4 w-4 mr-2\" />\r\n            Expired\r\n            {stats.expired > 0 && (\r\n              <Badge className=\"ml-2\" variant=\"destructive\">\r\n                {stats.expired}\r\n              </Badge>\r\n            )}\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {signatureGroups.map(group => (\r\n          <TabsContent key={group.category} value={group.category}>\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>{group.title}</CardTitle>\r\n                <CardDescription>{group.description}</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {/* Handle expired signatures tab */}\r\n                {group.category === 'expired' ? (\r\n                  ((group.expiredSignatures?.length || 0) === 0 && (group.tasks?.length || 0) === 0) ? (\r\n                    <div className=\"text-center py-8 text-muted-foreground\">\r\n                      No expired signatures\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"space-y-4\">\r\n                      {/* Show expired tasks (tasks with expired signature requests) */}\r\n                      {group.tasks?.map(task => (\r\n                        <div\r\n                          key={task.id}\r\n                          className=\"border border-red-200 rounded-lg p-4 bg-red-50/50 dark:bg-red-950/20 dark:border-red-900\"\r\n                        >\r\n                          <div className=\"flex items-start justify-between\">\r\n                            <div className=\"flex-1\">\r\n                              <div className=\"flex items-center gap-2 mb-2\">\r\n                                <AlertCircle className=\"h-4 w-4 text-red-600\" />\r\n                                <h4 className=\"font-semibold text-foreground\">{task.title}</h4>\r\n                                <Badge variant=\"destructive\">Expired</Badge>\r\n                              </div>\r\n                              <p className=\"text-sm text-muted-foreground mb-3\">\r\n                                {task.description || 'The signature request for this task has expired.'}\r\n                              </p>\r\n                              <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\r\n                                {task.instructions?.investor_name && (\r\n                                  <span className=\"flex items-center gap-1\">\r\n                                    <Users className=\"h-3 w-3\" />\r\n                                    {task.instructions.investor_name}\r\n                                  </span>\r\n                                )}\r\n                                {task.instructions?.investor_email && (\r\n                                  <span className=\"flex items-center gap-1\">\r\n                                    <Mail className=\"h-3 w-3\" />\r\n                                    {task.instructions.investor_email}\r\n                                  </span>\r\n                                )}\r\n                                <span className=\"flex items-center gap-1\">\r\n                                  <Calendar className=\"h-3 w-3\" />\r\n                                  Created {format(new Date(task.created_at), 'MMM d, yyyy')}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      {/* Show expired signature requests */}\r\n                      {group.expiredSignatures?.map(sig => (\r\n                        <div\r\n                          key={sig.id}\r\n                          className=\"border rounded-lg p-4 hover:bg-muted/50 transition-colors\"\r\n                        >\r\n                          <div className=\"flex items-start justify-between\">\r\n                            <div className=\"flex-1\">\r\n                              <div className=\"flex items-center gap-2 mb-2\">\r\n                                <AlertCircle className=\"h-4 w-4 text-red-600\" />\r\n                                <h4 className=\"font-semibold\">{sig.document_type.toUpperCase()}</h4>\r\n                                <Badge variant=\"destructive\">Expired</Badge>\r\n                              </div>\r\n                              <p className=\"text-sm text-muted-foreground mb-3\">\r\n                                Request for {sig.signer_name} expired on {format(new Date(sig.token_expires_at), 'MMM d, yyyy')}\r\n                              </p>\r\n                              <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\r\n                                <span className=\"flex items-center gap-1\">\r\n                                  <Users className=\"h-3 w-3\" />\r\n                                  {sig.investor?.display_name || sig.investor?.legal_name || sig.signer_name}\r\n                                </span>\r\n                                <span className=\"flex items-center gap-1\">\r\n                                  <Mail className=\"h-3 w-3\" />\r\n                                  {sig.signer_email}\r\n                                </span>\r\n                                <span className=\"flex items-center gap-1\">\r\n                                  <Calendar className=\"h-3 w-3\" />\r\n                                  Created {format(new Date(sig.created_at), 'MMM d, yyyy')}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )\r\n                ) : group.tasks.length === 0 ? (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    No tasks in this category\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-4\">\r\n                    {group.tasks.map(task => (\r\n                      <div\r\n                        key={task.id}\r\n                        className=\"border rounded-lg p-4 hover:bg-muted/50 transition-colors\"\r\n                      >\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                              {getStatusIcon(\r\n                                task.due_at && new Date(task.due_at) < new Date() && task.status === 'pending'\r\n                                  ? 'overdue'\r\n                                  : task.status\r\n                              )}\r\n                              <h4 className=\"font-semibold\">{task.title}</h4>\r\n                              <Badge\r\n                                variant=\"outline\"\r\n                                className={getPriorityColor(task.priority)}\r\n                              >\r\n                                {task.priority}\r\n                              </Badge>\r\n                              {/* Show signer role if available */}\r\n                              {task.instructions?.signer_role && (\r\n                                <Badge variant=\"secondary\" className=\"text-xs\">\r\n                                  Signing as: {task.instructions.signer_role.toUpperCase()}\r\n                                </Badge>\r\n                              )}\r\n                              {/* Indicate if waiting for prior signature */}\r\n                              {task.instructions?.requires_prior_signature && (\r\n                                <Badge variant=\"outline\" className=\"text-xs text-amber-600 border-amber-300\">\r\n                                  Awaiting prior signature\r\n                                </Badge>\r\n                              )}\r\n                            </div>\r\n\r\n                            {task.description && (\r\n                              <p className=\"text-sm text-muted-foreground mb-3\">\r\n                                {task.description}\r\n                              </p>\r\n                            )}\r\n\r\n                            <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\r\n                              {task.instructions?.investor_name && (\r\n                                <span className=\"flex items-center gap-1\">\r\n                                  <Users className=\"h-3 w-3\" />\r\n                                  {task.instructions.investor_name}\r\n                                </span>\r\n                              )}\r\n                              {task.due_at && (\r\n                                <span className=\"flex items-center gap-1\">\r\n                                  <Calendar className=\"h-3 w-3\" />\r\n                                  Due {format(new Date(task.due_at), 'MMM d, yyyy')}\r\n                                </span>\r\n                              )}\r\n                              {task.instructions?.investor_email && (\r\n                                <span className=\"flex items-center gap-1\">\r\n                                  <Mail className=\"h-3 w-3\" />\r\n                                  {task.instructions.investor_email}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"flex gap-2\">\r\n                            {(task.status === 'pending' || task.status === 'in_progress') && (\r\n                              <>\r\n                                {task.kind === 'countersignature' && task.instructions?.action_url && (\r\n                                  <Button\r\n                                    size=\"sm\"\r\n                                    onClick={() => handleSignDocument(task)}\r\n                                    disabled={loadingTaskId === task.id}\r\n                                  >\r\n                                    <FileSignature className=\"h-4 w-4 mr-2\" />\r\n                                    {loadingTaskId === task.id ? 'Loading...' : 'Sign Document'}\r\n                                  </Button>\r\n                                )}\r\n                                {task.metadata?.issue === 'investor_no_user_account' && (\r\n                                  <Button\r\n                                    size=\"sm\"\r\n                                    variant=\"outline\"\r\n                                    onClick={() => handleManualFollowUp(task)}\r\n                                    disabled={loadingTaskId === task.id}\r\n                                  >\r\n                                    <Mail className=\"h-4 w-4 mr-2\" />\r\n                                    Copy Details\r\n                                  </Button>\r\n                                )}\r\n                              </>\r\n                            )}\r\n                            {task.status === 'completed' && task.completed_at && (\r\n                              <Badge variant=\"outline\" className=\"text-green-600\">\r\n                                Completed {format(new Date(task.completed_at), 'MMM d')}\r\n                              </Badge>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n        ))}\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2000, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,oNAAC;YACC,aAAU;YACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;KAbS;AAeT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,+JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,2GACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 2146, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/format.ts"],"sourcesContent":["export const formatCurrency = (value: number | null | undefined, currency: string = 'USD') => {\n  if (!value) return '$0'\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency,\n    maximumFractionDigits: 0,\n  }).format(value)\n}\n\nexport const formatBps = (bps: number | null | undefined) => {\n  if (bps === null || bps === undefined) return ''\n  return `${bps} bps`\n}\n\nexport const formatPercentage = (value: number | null | undefined) => {\n  if (!value) return '0%'\n  return `${(value * 100).toFixed(1)}%`\n}\n\nexport const formatDate = (value: string | Date | null | undefined) => {\n  if (!value) return ''\n  const date = typeof value === 'string' ? new Date(value) : value\n  if (Number.isNaN(date?.getTime?.())) return ''\n  // Use explicit locale to prevent hydration mismatch between server/client\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  })\n}\n\n\n\n\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,iBAAiB,CAAC,OAAkC,WAAmB,KAAK;IACvF,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,YAAY,CAAC;IACxB,IAAI,QAAQ,QAAQ,QAAQ,WAAW,OAAO;IAC9C,OAAO,GAAG,IAAI,IAAI,CAAC;AACrB;AAEO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AACvC;AAEO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,OAAO,OAAO,UAAU,WAAW,IAAI,KAAK,SAAS;IAC3D,IAAI,OAAO,KAAK,CAAC,MAAM,cAAc,OAAO;IAC5C,0EAA0E;IAC1E,OAAO,KAAK,kBAAkB,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF"}},
    {"offset": {"line": 2190, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/versosign/placement-agreement-signing-section.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  FileSignature,\n  PenLine,\n  Loader2,\n  Building2,\n  Calendar,\n  Percent,\n  Eye,\n  Briefcase,\n} from 'lucide-react'\nimport { toast } from 'sonner'\nimport { formatDate } from '@/lib/format'\nimport { SignatureCanvasWidget } from '@/components/signature/signature-canvas-widget'\nimport { InlinePdfViewer } from '@/components/signature/inline-pdf-viewer'\n\ntype PlacementAgreementForSigning = {\n  id: string\n  status: string\n  default_commission_bps: number | null\n  commercial_partner: {\n    id: string\n    legal_name: string\n    display_name: string | null\n    email: string | null\n  }\n  ceo_signature_request_id: string | null\n  cp_signature_request_id: string | null\n  arranger_signature_request_id: string | null\n  arranger_id: string | null\n  pdf_url: string | null\n  created_at: string\n}\n\ninterface PlacementAgreementSigningSectionProps {\n  agreements: PlacementAgreementForSigning[]\n  isStaff: boolean\n  isArranger?: boolean\n}\n\nexport function PlacementAgreementSigningSection({\n  agreements,\n  isStaff,\n  isArranger = false,\n}: PlacementAgreementSigningSectionProps) {\n  const router = useRouter()\n  const [signingAgreementId, setSigningAgreementId] = useState<string | null>(null)\n  const [signingMode, setSigningMode] = useState<{\n    active: boolean\n    agreement: PlacementAgreementForSigning | null\n    token: string | null\n    pdfUrl: string | null\n  }>({ active: false, agreement: null, token: null, pdfUrl: null })\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  const formatCommission = (bps: number | null) => {\n    if (bps === null) return 'N/A'\n    return `${(bps / 100).toFixed(2)}%`\n  }\n\n  const getPartnerDisplayName = (partner: PlacementAgreementForSigning['commercial_partner']) => {\n    return partner?.display_name || partner?.legal_name || 'Unknown Partner'\n  }\n\n  const handleInitiateSign = async (agreement: PlacementAgreementForSigning) => {\n    setSigningAgreementId(agreement.id)\n\n    try {\n      // Create signature request via API\n      const response = await fetch(`/api/placement-agreements/${agreement.id}/sign`, {\n        method: 'POST',\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to initiate signing')\n      }\n\n      const result = await response.json()\n\n      if (result.signing_url) {\n        // Enter signing mode with the token\n        const token = result.signing_url.split('/sign/')[1]\n        setSigningMode({\n          active: true,\n          agreement,\n          token,\n          pdfUrl: result.pdf_url || agreement.pdf_url,\n        })\n      } else {\n        toast.error('No signing URL returned')\n      }\n    } catch (error) {\n      toast.error(error instanceof Error ? error.message : 'Failed to initiate signing')\n    } finally {\n      setSigningAgreementId(null)\n    }\n  }\n\n  const handleSignatureComplete = async (signatureDataUrl: string) => {\n    if (!signingMode.token || !signingMode.agreement) return\n\n    setIsSubmitting(true)\n    try {\n      const response = await fetch('/api/signature/complete', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          token: signingMode.token,\n          signature_data_url: signatureDataUrl,\n        }),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Failed to complete signature')\n      }\n\n      toast.success('Placement agreement signed successfully!')\n      setSigningMode({ active: false, agreement: null, token: null, pdfUrl: null })\n      router.refresh()\n    } catch (error) {\n      toast.error(error instanceof Error ? error.message : 'Failed to complete signature')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleCancelSigning = () => {\n    setSigningMode({ active: false, agreement: null, token: null, pdfUrl: null })\n  }\n\n  // If in signing mode, show the signing interface\n  if (signingMode.active && signingMode.agreement) {\n    return (\n      <Card className=\"border-purple-500/30 bg-gradient-to-br from-purple-500/5 to-pink-500/5\">\n        <CardHeader className=\"border-b border-purple-500/20\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-500/20\">\n                <PenLine className=\"h-5 w-5 text-purple-400\" />\n              </div>\n              <div>\n                <CardTitle className=\"text-lg\">Sign Placement Agreement</CardTitle>\n                <CardDescription>\n                  Agreement with {getPartnerDisplayName(signingMode.agreement.commercial_partner)}\n                </CardDescription>\n              </div>\n            </div>\n            <Button variant=\"ghost\" onClick={handleCancelSigning} disabled={isSubmitting}>\n              Cancel\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-6\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* PDF Viewer */}\n            <div className=\"space-y-4\">\n              <h3 className=\"font-medium text-sm text-muted-foreground\">Document Preview</h3>\n              {signingMode.pdfUrl ? (\n                <div className=\"border rounded-lg overflow-hidden h-[500px]\">\n                  <InlinePdfViewer\n                    pdfUrl={signingMode.pdfUrl}\n                    documentName={`Placement Agreement - ${getPartnerDisplayName(signingMode.agreement.commercial_partner)}`}\n                  />\n                </div>\n              ) : (\n                <div className=\"border rounded-lg h-[500px] flex items-center justify-center bg-muted/50\">\n                  <p className=\"text-muted-foreground text-sm\">PDF not available</p>\n                </div>\n              )}\n            </div>\n\n            {/* Signature Canvas */}\n            <div className=\"space-y-4\">\n              <h3 className=\"font-medium text-sm text-muted-foreground\">Your Signature</h3>\n              <SignatureCanvasWidget\n                onSignatureCapture={handleSignatureComplete}\n                signerName={isArranger ? 'Arranger' : 'CEO'}\n                signerEmail=\"\"\n                isSubmitting={isSubmitting}\n              />\n              <p className=\"text-xs text-muted-foreground text-center\">\n                By signing, you agree to the terms of this placement fee agreement.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <Card className=\"border-purple-500/20\">\n      <CardHeader>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-500/20\">\n            <Briefcase className=\"h-5 w-5 text-purple-400\" />\n          </div>\n          <div>\n            <CardTitle className=\"text-lg\">\n              {isStaff\n                ? 'Placement Agreements Awaiting Your Signature'\n                : isArranger\n                ? 'My Mandates - Placement Fee Agreements'\n                : 'Your Pending Placement Agreements'}\n            </CardTitle>\n            <CardDescription>\n              {isStaff\n                ? 'These agreements have been approved and are ready for CEO signature'\n                : isArranger\n                ? 'Placement fee agreements for your mandates requiring your signature'\n                : 'These agreements are ready for your signature'}\n            </CardDescription>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"rounded-lg border\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Commercial Partner</TableHead>\n                <TableHead>Commission</TableHead>\n                <TableHead>Created</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {agreements.map((agreement) => (\n                <TableRow key={agreement.id}>\n                  <TableCell>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"p-2 bg-muted rounded-lg\">\n                        <Building2 className=\"h-4 w-4 text-muted-foreground\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium\">{getPartnerDisplayName(agreement.commercial_partner)}</p>\n                        <p className=\"text-sm text-muted-foreground\">{agreement.commercial_partner?.email}</p>\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center gap-1\">\n                      <Percent className=\"h-3.5 w-3.5 text-muted-foreground\" />\n                      <span className=\"font-medium\">{formatCommission(agreement.default_commission_bps)}</span>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                      <Calendar className=\"h-3.5 w-3.5\" />\n                      {formatDate(agreement.created_at)}\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"text-right\">\n                    <div className=\"flex items-center justify-end gap-2\">\n                      <Button variant=\"ghost\" size=\"sm\" asChild>\n                        <Link href={`/versotech_main/commercial-partner-agreements/${agreement.id}`}>\n                          <Eye className=\"h-4 w-4 mr-1\" />\n                          View\n                        </Link>\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        onClick={() => handleInitiateSign(agreement)}\n                        disabled={signingAgreementId === agreement.id}\n                        className=\"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white\"\n                      >\n                        {signingAgreementId === agreement.id ? (\n                          <>\n                            <Loader2 className=\"h-4 w-4 mr-1 animate-spin\" />\n                            Loading...\n                          </>\n                        ) : (\n                          <>\n                            <PenLine className=\"h-4 w-4 mr-1\" />\n                            Sign Now\n                          </>\n                        )}\n                      </Button>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}