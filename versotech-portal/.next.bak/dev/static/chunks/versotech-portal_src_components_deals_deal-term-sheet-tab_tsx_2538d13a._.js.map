{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/deals/deal-term-sheet-tab.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useMemo, useRef, useState, useCallback } from 'react'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle\n} from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport { Separator } from '@/components/ui/separator'\nimport { format } from 'date-fns'\nimport { Loader2, Plus, Copy, Rocket, Archive, Pencil, Upload, FileCheck, Users, Building2, Briefcase, Eye, Download, X, SendHorizontal } from 'lucide-react'\nimport FeePlanEditModal from '@/components/fees/FeePlanEditModal'\nimport { DocumentViewerFullscreen } from '@/components/documents/DocumentViewerFullscreen'\nimport type { DocumentReference } from '@/types/document-viewer.types'\nimport { usePersona } from '@/contexts/persona-context'\nimport { toast } from 'sonner'\n\ntype TermSheet = Record<string, any>\n\n/** Fee plan with entity and term sheet info for display */\ninterface LinkedFeePlan {\n  id: string\n  name: string\n  status: 'draft' | 'sent' | 'pending_signature' | 'accepted' | 'rejected'\n  term_sheet_id: string | null\n  accepted_at: string | null\n  accepted_by: string | null\n  introducer?: { id: string; name: string; company_name?: string } | null\n  partner?: { id: string; name: string; company_name?: string } | null\n  commercial_partner?: { id: string; name: string; company_name?: string } | null\n}\n\ninterface DealTermSheetTabProps {\n  dealId: string\n  termSheets: TermSheet[]\n}\n\ntype EditorMode = 'create' | 'edit' | 'clone'\n\nconst statusClasses: Record<string, string> = {\n  draft: 'bg-amber-500/20 text-amber-100',\n  published: 'bg-emerald-500/20 text-emerald-100',\n  archived: 'bg-muted text-muted-foreground'\n}\n\n/** Fee plan status styling */\nconst feePlanStatusClasses: Record<string, string> = {\n  draft: 'bg-muted text-muted-foreground border-border',\n  sent: 'bg-blue-500/20 text-blue-300 border-blue-500/30',\n  pending_signature: 'bg-amber-500/20 text-amber-300 border-amber-500/30',\n  accepted: 'bg-emerald-500/20 text-emerald-300 border-emerald-500/30',\n  rejected: 'bg-red-500/20 text-red-300 border-red-500/30'\n}\n\nconst feePlanStatusLabels: Record<string, string> = {\n  draft: 'Draft',\n  sent: 'Sent',\n  pending_signature: 'Pending',\n  accepted: 'Accepted',\n  rejected: 'Rejected'\n}\n\nconst emptyForm = {\n  term_sheet_date: '',\n  transaction_type: '',\n  opportunity_summary: '',\n  issuer: '',\n  vehicle: '',\n  exclusive_arranger: '',\n  purchaser: '',\n  seller: '',\n  structure: '',\n  allocation_up_to: '',\n  price_per_share_text: '',\n  price_per_share: '',\n  cost_per_share: '',\n  minimum_ticket: '',\n  subscription_fee_percent: '',\n  management_fee_percent: '',\n  management_fee_clause: '',\n  carried_interest_percent: '',\n  performance_fee_clause: '',\n  legal_counsel: '',\n  interest_confirmation_deadline: '',\n  validity_date: '',\n  completion_date: '',\n  completion_date_text: ''\n}\n\ntype FormState = typeof emptyForm\n\nfunction mapTermSheetToForm(termSheet?: TermSheet): FormState {\n  if (!termSheet) return emptyForm\n  return {\n    term_sheet_date: termSheet.term_sheet_date ? termSheet.term_sheet_date.slice(0, 10) : '',\n    transaction_type: termSheet.transaction_type ?? '',\n    opportunity_summary: termSheet.opportunity_summary ?? '',\n    issuer: termSheet.issuer ?? '',\n    vehicle: termSheet.vehicle ?? '',\n    exclusive_arranger: termSheet.exclusive_arranger ?? '',\n    purchaser: termSheet.purchaser ?? '',\n    seller: termSheet.seller ?? '',\n    structure: termSheet.structure ?? '',\n    allocation_up_to: termSheet.allocation_up_to ?? '',\n    price_per_share_text: termSheet.price_per_share_text ?? '',\n    price_per_share: termSheet.price_per_share != null ? String(termSheet.price_per_share) : '',\n    cost_per_share: termSheet.cost_per_share != null ? String(termSheet.cost_per_share) : '',\n    minimum_ticket: termSheet.minimum_ticket ?? '',\n    subscription_fee_percent: termSheet.subscription_fee_percent ?? '',\n    management_fee_percent: termSheet.management_fee_percent ?? '',\n    management_fee_clause: termSheet.management_fee_clause ?? '',\n    carried_interest_percent: termSheet.carried_interest_percent ?? '',\n    performance_fee_clause: termSheet.performance_fee_clause ?? '',\n    legal_counsel: termSheet.legal_counsel ?? '',\n    interest_confirmation_deadline: termSheet.interest_confirmation_deadline\n      ? termSheet.interest_confirmation_deadline.slice(0, 16)\n      : '',\n    validity_date: termSheet.validity_date ? termSheet.validity_date.slice(0, 16) : '',\n    completion_date: termSheet.completion_date ? termSheet.completion_date.slice(0, 10) : '',\n    completion_date_text: termSheet.completion_date_text ?? ''\n  }\n}\n\nfunction toNumber(value: string) {\n  if (!value) return null\n  const parsed = Number(value)\n  return Number.isFinite(parsed) ? parsed : null\n}\n\nfunction buildPayload(values: FormState) {\n  return {\n    term_sheet_date: values.term_sheet_date || null,\n    transaction_type: values.transaction_type || null,\n    opportunity_summary: values.opportunity_summary || null,\n    issuer: values.issuer || null,\n    vehicle: values.vehicle || null,\n    exclusive_arranger: values.exclusive_arranger || null,\n    purchaser: values.purchaser || null,\n    seller: values.seller || null,\n    structure: values.structure || null,\n    allocation_up_to: toNumber(values.allocation_up_to),\n    price_per_share_text: values.price_per_share_text || null,\n    price_per_share: toNumber(values.price_per_share),\n    cost_per_share: toNumber(values.cost_per_share),\n    minimum_ticket: toNumber(values.minimum_ticket),\n    subscription_fee_percent: toNumber(values.subscription_fee_percent),\n    management_fee_percent: toNumber(values.management_fee_percent),\n    management_fee_clause: values.management_fee_clause || null,\n    carried_interest_percent: toNumber(values.carried_interest_percent),\n    performance_fee_clause: values.performance_fee_clause || null,\n    legal_counsel: values.legal_counsel || null,\n    interest_confirmation_deadline: values.interest_confirmation_deadline || null,\n    validity_date: values.validity_date || null,\n    completion_date: values.completion_date || null,\n    completion_date_text: values.completion_date_text || null\n  }\n}\n\nexport function DealTermSheetTab({ dealId, termSheets }: DealTermSheetTabProps) {\n  const [items, setItems] = useState<TermSheet[]>(termSheets ?? [])\n  const [editorOpen, setEditorOpen] = useState(false)\n  const [editorMode, setEditorMode] = useState<EditorMode>('create')\n  const [targetId, setTargetId] = useState<string | null>(null)\n  const [formValues, setFormValues] = useState<FormState>(emptyForm)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [errorMessage, setErrorMessage] = useState<string | null>(null)\n  const [attachmentError, setAttachmentError] = useState<string | null>(null)\n  const [uploadingAttachmentId, setUploadingAttachmentId] = useState<string | null>(null)\n  const fileInputsRef = useRef<Record<string, HTMLInputElement | null>>({})\n\n  // Fee plan state\n  const [feePlans, setFeePlans] = useState<LinkedFeePlan[]>([])\n  const [feePlansLoading, setFeePlansLoading] = useState(false)\n  const [feePlanModalOpen, setFeePlanModalOpen] = useState(false)\n  const [selectedTermSheetIdForFeePlan, setSelectedTermSheetIdForFeePlan] = useState<string | undefined>()\n\n  // Document preview state (fullscreen viewer)\n  const [previewOpen, setPreviewOpen] = useState(false)\n  const [previewLoading, setPreviewLoading] = useState(false)\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null)\n  const [previewTermSheetId, setPreviewTermSheetId] = useState<string | null>(null)\n  const [previewError, setPreviewError] = useState<string | null>(null)\n  const [previewDocument, setPreviewDocument] = useState<DocumentReference | null>(null)\n\n  // PDF generation state\n  const [generatingId, setGeneratingId] = useState<string | null>(null)\n  const [requestingCloseId, setRequestingCloseId] = useState<string | null>(null)\n\n  // Persona for CEO/staff visibility of cost fields\n  const { isCEO, isStaff } = usePersona()\n  const canViewCost = isCEO || isStaff\n\n  useEffect(() => {\n    setItems(termSheets ?? [])\n  }, [termSheets])\n\n  // Fetch fee plans for this deal\n  const fetchFeePlans = useCallback(async () => {\n    setFeePlansLoading(true)\n    try {\n      const response = await fetch(`/api/deals/${dealId}/fee-plans`)\n      if (!response.ok) {\n        console.error('Failed to fetch fee plans')\n        return\n      }\n      const data = await response.json()\n      setFeePlans(data.feePlans || [])\n    } catch (error) {\n      console.error('Error fetching fee plans:', error)\n    } finally {\n      setFeePlansLoading(false)\n    }\n  }, [dealId])\n\n  useEffect(() => {\n    fetchFeePlans()\n  }, [fetchFeePlans])\n\n  // Group fee plans by term sheet ID\n  const feePlansByTermSheet = useMemo(() => {\n    const grouped: Record<string, LinkedFeePlan[]> = {}\n    for (const fp of feePlans) {\n      const tsId = fp.term_sheet_id || 'unlinked'\n      if (!grouped[tsId]) {\n        grouped[tsId] = []\n      }\n      grouped[tsId].push(fp)\n    }\n    return grouped\n  }, [feePlans])\n\n  // Get entity display info from a fee plan\n  const getEntityInfo = (fp: LinkedFeePlan) => {\n    if (fp.introducer) {\n      return {\n        type: 'Introducer',\n        name: fp.introducer.company_name || fp.introducer.name,\n        icon: Users\n      }\n    }\n    if (fp.partner) {\n      return {\n        type: 'Partner',\n        name: fp.partner.company_name || fp.partner.name,\n        icon: Building2\n      }\n    }\n    if (fp.commercial_partner) {\n      return {\n        type: 'Commercial Partner',\n        name: fp.commercial_partner.company_name || fp.commercial_partner.name,\n        icon: Briefcase\n      }\n    }\n    return null\n  }\n\n  // Handle opening the fee plan modal with a pre-selected term sheet\n  const openFeePlanModal = (termSheetId: string) => {\n    setSelectedTermSheetIdForFeePlan(termSheetId)\n    setFeePlanModalOpen(true)\n  }\n\n  const closeFeePlanModal = () => {\n    setFeePlanModalOpen(false)\n    setSelectedTermSheetIdForFeePlan(undefined)\n  }\n\n  const handleFeePlanSuccess = () => {\n    closeFeePlanModal()\n    fetchFeePlans()\n  }\n\n  // Document preview handlers (fullscreen viewer)\n  const openPreview = async (termSheetId: string) => {\n    // Find the term sheet to get filename info\n    const termSheet = items.find(ts => ts.id === termSheetId)\n    const fileName = termSheet?.term_sheet_attachment_key?.split('/').pop() || 'Term Sheet.pdf'\n\n    setPreviewTermSheetId(termSheetId)\n    setPreviewDocument({\n      id: termSheetId,\n      file_name: fileName,\n      name: fileName,\n      mime_type: 'application/pdf',\n      type: 'term_sheet'\n    })\n    setPreviewOpen(true)\n    setPreviewLoading(true)\n    setPreviewError(null)\n    setPreviewUrl(null)\n\n    try {\n      const response = await fetch(`/api/deals/${dealId}/fee-structures/${termSheetId}/attachment`)\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to load document')\n      }\n      const data = await response.json()\n      setPreviewUrl(data.url)\n    } catch (error) {\n      setPreviewError(error instanceof Error ? error.message : 'Failed to load document')\n    } finally {\n      setPreviewLoading(false)\n    }\n  }\n\n  const closePreview = () => {\n    setPreviewOpen(false)\n    setPreviewUrl(null)\n    setPreviewTermSheetId(null)\n    setPreviewError(null)\n    setPreviewDocument(null)\n  }\n\n  const handleDownload = () => {\n    if (previewUrl) {\n      window.open(previewUrl, '_blank')\n    }\n  }\n\n  // Generate PDF handler - triggers n8n workflow\n  const handleGenerateTermsheet = async (structureId: string) => {\n    setGeneratingId(structureId)\n    setErrorMessage(null)\n    try {\n      const response = await fetch(\n        `/api/deals/${dealId}/fee-structures/${structureId}/generate`,\n        { method: 'POST' }\n      )\n      const data = await response.json()\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to generate term sheet')\n      }\n      // Refresh to show updated attachment (user can preview manually)\n      await refresh()\n    } catch (error) {\n      setErrorMessage(error instanceof Error ? error.message : 'Failed to generate term sheet')\n    } finally {\n      setGeneratingId(null)\n    }\n  }\n\n  // Request close approval handler - triggers CEO approval creation\n  const handleRequestClose = async (structureId: string) => {\n    setRequestingCloseId(structureId)\n    setErrorMessage(null)\n    try {\n      const response = await fetch(\n        `/api/deals/${dealId}/fee-structures/${structureId}/request-close`,\n        { method: 'POST' }\n      )\n      const data = await response.json()\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to request close approval')\n      }\n      // Show success message\n      toast.success('Close approval created', {\n        description: 'The CEO will review this request in the Approvals queue.'\n      })\n      await refresh()\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Failed to request close approval'\n      setErrorMessage(message)\n      toast.error('Request failed', { description: message })\n    } finally {\n      setRequestingCloseId(null)\n    }\n  }\n\n  const ordered = useMemo(\n    () => [...items].sort((a, b) => (b.version ?? 0) - (a.version ?? 0)),\n    [items]\n  )\n\n  // Get ALL published term sheets (multiple allowed for different investor classes)\n  const publishedTermSheets = useMemo(\n    () => ordered.filter(item => item.status === 'published'),\n    [ordered]\n  )\n\n  // For backwards compat - first published\n  const published = publishedTermSheets[0]\n\n  const handleAttachmentUpload = async (structureId: string, file: File) => {\n    setAttachmentError(null)\n    setUploadingAttachmentId(structureId)\n    try {\n      const formData = new FormData()\n      formData.append('file', file)\n\n      const response = await fetch(\n        `/api/deals/${dealId}/fee-structures/${structureId}/attachment`,\n        {\n          method: 'POST',\n          body: formData\n        }\n      )\n\n      const payload = await response.json().catch(() => ({}))\n      if (!response.ok) {\n        throw new Error(payload?.error || 'Failed to upload attachment')\n      }\n\n      const nextItems = items.map(item =>\n        item.id === structureId\n          ? { ...item, term_sheet_attachment_key: payload.term_sheet_attachment_key }\n          : item\n      )\n      setItems(nextItems)\n\n      if (targetId === structureId) {\n        setFormValues(prev => ({\n          ...prev,\n          term_sheet_attachment_key: payload.term_sheet_attachment_key ?? ''\n        }))\n      }\n    } catch (error) {\n      console.error('Term sheet attachment upload failed', error)\n      setAttachmentError(\n        error instanceof Error ? error.message : 'Failed to upload attachment'\n      )\n    } finally {\n      const input = fileInputsRef.current[structureId]\n      if (input) {\n        input.value = ''\n      }\n      setUploadingAttachmentId(null)\n    }\n  }\n\n  const openEditor = (mode: EditorMode, termSheet?: TermSheet) => {\n    setEditorMode(mode)\n    setTargetId(mode === 'edit' ? termSheet?.id ?? null : null)\n    setFormValues(mapTermSheetToForm(mode === 'create' ? undefined : termSheet))\n    setErrorMessage(null)\n    setEditorOpen(true)\n  }\n\n  const closeEditor = () => {\n    setEditorOpen(false)\n    setTargetId(null)\n    setFormValues(emptyForm)\n  }\n\n  const refresh = async () => {\n    const response = await fetch(`/api/deals/${dealId}/fee-structures`)\n    if (!response.ok) {\n      setErrorMessage('Failed to refresh term sheets. Please reload the page.')\n      return\n    }\n    const data = await response.json()\n    setItems(data.term_sheets ?? [])\n  }\n\n  const submitForm = async () => {\n    setIsSubmitting(true)\n    setErrorMessage(null)\n    try {\n      const payload = buildPayload(formValues)\n      let response: Response\n      if (editorMode === 'create' || editorMode === 'clone') {\n        response = await fetch(`/api/deals/${dealId}/fee-structures`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n        })\n      } else {\n        if (!targetId) throw new Error('Missing term sheet ID')\n        response = await fetch(`/api/deals/${dealId}/fee-structures`, {\n          method: 'PATCH',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            structure_id: targetId,\n            updates: payload\n          })\n        })\n      }\n\n      if (!response.ok) {\n        const text = await response.text()\n        throw new Error(text || 'Failed to save term sheet')\n      }\n\n      await refresh()\n      closeEditor()\n    } catch (error) {\n      setErrorMessage(error instanceof Error ? error.message : 'Unexpected error saving term sheet')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const updateStatus = async (termSheet: TermSheet, status: 'draft' | 'published' | 'archived') => {\n    setIsSubmitting(true)\n    setErrorMessage(null)\n    try {\n      const response = await fetch(`/api/deals/${dealId}/fee-structures`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          structure_id: termSheet.id,\n          updates: { status }\n        })\n      })\n      if (!response.ok) {\n        const text = await response.text()\n        throw new Error(text || 'Failed to update status')\n      }\n      await refresh()\n    } catch (error) {\n      setErrorMessage(error instanceof Error ? error.message : 'Unexpected error updating status')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-foreground\">Term Sheet Versions</h3>\n          <p className=\"text-sm text-muted-foreground\">\n            Draft, publish, and archive the structured economics that power the investor experience.\n          </p>\n        </div>\n      <Button\n        onClick={() => openEditor('create')}\n        disabled={isSubmitting}\n        className=\"gap-2\"\n      >\n        <Plus className=\"h-4 w-4\" />\n        New Term Sheet\n      </Button>\n    </div>\n\n    {errorMessage && (\n      <Card className=\"border border-destructive/30 bg-destructive/10\">\n        <CardContent className=\"text-sm text-destructive p-3\">\n          {errorMessage}\n        </CardContent>\n      </Card>\n    )}\n    {attachmentError && (\n      <Card className=\"border border-amber-400/30 bg-amber-500/10\">\n        <CardContent className=\"text-sm text-amber-800 p-3\">\n          {attachmentError}\n        </CardContent>\n      </Card>\n    )}\n\n      {/* Published Term Sheets Section */}\n      {publishedTermSheets.length > 0 && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-sm font-semibold text-emerald-400 uppercase tracking-wide\">\n            Published Term Sheets ({publishedTermSheets.length})\n          </h3>\n          <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4\">\n            {publishedTermSheets.map((published) => (\n              <Card key={published.id} className=\"border border-emerald-400/30 bg-emerald-500/10\">\n                <CardHeader className=\"flex flex-row items-start justify-between space-y-0\">\n                  <div>\n                    <CardTitle className=\"text-foreground\">Version {published.version}</CardTitle>\n                    <CardDescription>\n                      Published{' '}\n                      {published.published_at ? format(new Date(published.published_at), 'dd MMM yyyy') : '—'}\n                      {published.term_sheet_date && <span className=\"ml-2\">• Dated: {format(new Date(published.term_sheet_date), 'dd MMM yyyy')}</span>}\n                      {published.vehicle && <span className=\"ml-2\">• {published.vehicle}</span>}\n                    </CardDescription>\n                  </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"gap-2\"\n                onClick={() => openEditor('edit', published)}\n                disabled={isSubmitting}\n              >\n                <Pencil className=\"h-4 w-4\" />\n                Edit\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"gap-2\"\n                onClick={() => openEditor('clone', published)}\n                disabled={isSubmitting}\n              >\n                <Copy className=\"h-4 w-4\" />\n                Clone\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"gap-2\"\n                onClick={() => fileInputsRef.current[published.id]?.click()}\n                disabled={uploadingAttachmentId === published.id}\n              >\n                {uploadingAttachmentId === published.id ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    Uploading...\n                  </>\n                ) : (\n                  <>\n                    <Upload className=\"h-4 w-4\" />\n                    Upload Attachment\n                  </>\n                )}\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"gap-2 border-blue-500/30 hover:bg-blue-500/10\"\n                onClick={() => handleGenerateTermsheet(published.id)}\n                disabled={generatingId === published.id}\n              >\n                {generatingId === published.id ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    Generating...\n                  </>\n                ) : (\n                  <>\n                    <FileCheck className=\"h-4 w-4\" />\n                    Generate PDF\n                  </>\n                )}\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"gap-2 border-amber-500/30 hover:bg-amber-500/10\"\n                onClick={() => handleRequestClose(published.id)}\n                disabled={requestingCloseId === published.id || !!published.closed_processed_at}\n                title={published.closed_processed_at ? 'Already processed' : 'Request CEO approval to close this termsheet'}\n              >\n                {requestingCloseId === published.id ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    Requesting...\n                  </>\n                ) : (\n                  <>\n                    <SendHorizontal className=\"h-4 w-4\" />\n                    Request Close\n                  </>\n                )}\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-xs text-emerald-200\">\n                {published.term_sheet_attachment_key\n                  ? 'Attachment available for investors to download.'\n                  : 'No attachment uploaded yet.'}\n              </div>\n              {published.term_sheet_attachment_key && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"gap-2 border-emerald-500/30 hover:bg-emerald-500/10\"\n                  onClick={() => openPreview(published.id)}\n                >\n                  <Eye className=\"h-4 w-4\" />\n                  Preview\n                </Button>\n              )}\n            </div>\n\n            {/* Transaction Details */}\n            <div>\n              <h4 className=\"text-xs font-semibold text-emerald-300 uppercase tracking-wide mb-3\">Transaction Details</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Transaction Type</span>\n                  <span className=\"text-foreground font-medium\">{published.transaction_type || '—'}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Structure</span>\n                  <span className=\"text-foreground font-medium\">{published.structure || '—'}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Issuer</span>\n                  <span className=\"text-foreground font-medium\">{published.issuer || '—'}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Vehicle</span>\n                  <span className=\"text-foreground font-medium\">{published.vehicle || '—'}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Exclusive Arranger</span>\n                  <span className=\"text-foreground font-medium\">{published.exclusive_arranger || '—'}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Purchaser</span>\n                  <span className=\"text-foreground font-medium\">{published.purchaser || '—'}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Seller</span>\n                  <span className=\"text-foreground font-medium\">{published.seller || '—'}</span>\n                </div>\n              </div>\n            </div>\n\n            <Separator className=\"bg-emerald-400/20\" />\n\n            {/* Investment Terms */}\n            <div>\n              <h4 className=\"text-xs font-semibold text-emerald-300 uppercase tracking-wide mb-3\">Investment Terms</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Allocation Up To</span>\n                  <span className=\"text-foreground font-medium\">\n                    {published.allocation_up_to ? published.allocation_up_to.toLocaleString() : '—'}\n                  </span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Price Per Share</span>\n                  <span className=\"text-foreground font-medium\">{published.price_per_share_text || '—'}</span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Minimum Ticket</span>\n                  <span className=\"text-foreground font-medium\">\n                    {published.minimum_ticket ? published.minimum_ticket.toLocaleString() : '—'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <Separator className=\"bg-emerald-400/20\" />\n\n            {/* Fee Structure */}\n            <div>\n              <h4 className=\"text-xs font-semibold text-emerald-300 uppercase tracking-wide mb-3\">Fee Structure</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Subscription Fee</span>\n                  <span className=\"text-foreground font-medium\">\n                    {published.subscription_fee_percent != null\n                      ? `${published.subscription_fee_percent}%`\n                      : '—'}\n                  </span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Management Fee</span>\n                  <span className=\"text-foreground font-medium\">\n                    {published.management_fee_percent != null\n                      ? `${published.management_fee_percent}% p.a.`\n                      : '—'}\n                  </span>\n                  {published.management_fee_clause && (\n                    <span className=\"text-muted-foreground block text-xs mt-1 italic\">{published.management_fee_clause}</span>\n                  )}\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Carried Interest</span>\n                  <span className=\"text-foreground font-medium\">\n                    {published.carried_interest_percent != null\n                      ? `${published.carried_interest_percent}%`\n                      : '—'}\n                  </span>\n                  {published.performance_fee_clause && (\n                    <span className=\"text-muted-foreground block text-xs mt-1 italic\">{published.performance_fee_clause}</span>\n                  )}\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Legal Counsel</span>\n                  <span className=\"text-foreground font-medium\">{published.legal_counsel || '—'}</span>\n                </div>\n              </div>\n            </div>\n\n            <Separator className=\"bg-emerald-400/20\" />\n\n            {/* Timeline */}\n            <div>\n              <h4 className=\"text-xs font-semibold text-emerald-300 uppercase tracking-wide mb-3\">Timeline & Deadlines</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Interest Deadline</span>\n                  <span className=\"text-foreground font-medium\">\n                    {published.interest_confirmation_deadline\n                      ? format(new Date(published.interest_confirmation_deadline), 'dd MMM yyyy HH:mm')\n                      : '—'}\n                  </span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Completion Date</span>\n                  <span className=\"text-foreground font-medium\">\n                    {published.completion_date\n                      ? format(new Date(published.completion_date), 'dd MMM yyyy')\n                      : published.completion_date_text || '—'}\n                  </span>\n                </div>\n                <div>\n                  <span className=\"text-muted-foreground block text-xs\">Validity Date</span>\n                  <span className=\"text-foreground font-medium\">\n                    {published.validity_date ? format(new Date(published.validity_date), 'dd MMM yyyy HH:mm') : '—'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {published.term_sheet_html && (\n              <>\n                <Separator className=\"bg-emerald-400/20\" />\n                <div>\n                  <h4 className=\"text-xs font-semibold text-emerald-300 uppercase tracking-wide mb-3\">Opportunity Summary</h4>\n                  <div\n                    className=\"space-y-2 text-sm text-emerald-50/90 leading-relaxed\"\n                    dangerouslySetInnerHTML={{ __html: published.term_sheet_html }}\n                  />\n                </div>\n              </>\n            )}\n\n            <Separator className=\"bg-emerald-400/20\" />\n\n            {/* Linked Fee Plans Section */}\n            <div>\n              <div className=\"flex items-center justify-between mb-3\">\n                <h4 className=\"text-xs font-semibold text-emerald-300 uppercase tracking-wide flex items-center gap-2\">\n                  <FileCheck className=\"h-4 w-4\" />\n                  Linked Fee Plans\n                </h4>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"gap-1 text-xs h-7 border-emerald-500/30 hover:bg-emerald-500/10\"\n                  onClick={() => openFeePlanModal(published.id)}\n                >\n                  <Plus className=\"h-3 w-3\" />\n                  Create Fee Plan\n                </Button>\n              </div>\n\n              {feePlansLoading ? (\n                <div className=\"flex items-center gap-2 text-emerald-200/60 text-sm py-2\">\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  Loading fee plans...\n                </div>\n              ) : (feePlansByTermSheet[published.id] || []).length === 0 ? (\n                <div className=\"text-sm text-emerald-200/60 py-2\">\n                  No fee plans linked to this term sheet yet. Create one to define commission terms for introducers or partners.\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {(feePlansByTermSheet[published.id] || []).map(fp => {\n                    const entity = getEntityInfo(fp)\n                    return (\n                      <div\n                        key={fp.id}\n                        className=\"flex items-center justify-between p-2 rounded-md bg-muted/50 border border-emerald-500/10\"\n                      >\n                        <div className=\"flex items-center gap-3\">\n                          {entity && (\n                            <div className=\"flex items-center gap-1 text-xs text-emerald-300/80\">\n                              <entity.icon className=\"h-3.5 w-3.5\" />\n                              <span>{entity.type}:</span>\n                              <span className=\"font-medium text-emerald-100\">{entity.name}</span>\n                            </div>\n                          )}\n                          <span className=\"text-sm text-emerald-100 font-medium\">{fp.name}</span>\n                        </div>\n                        <Badge className={`text-xs ${feePlanStatusClasses[fp.status] || feePlanStatusClasses.draft}`}>\n                          {feePlanStatusLabels[fp.status] || fp.status}\n                        </Badge>\n                      </div>\n                    )\n                  })}\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Draft & Archived Versions */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wide\">\n          Other Versions ({ordered.filter(t => t.status !== 'published').length})\n        </h3>\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4\">\n          {ordered.filter(termSheet => termSheet.status !== 'published').map(termSheet => (\n          <Card key={termSheet.id} className=\"border-border bg-muted/50\">\n            <CardHeader className=\"flex items-start justify-between space-y-0\">\n              <div>\n                <CardTitle className=\"text-foreground text-lg\">\n                  Version {termSheet.version}\n                </CardTitle>\n                <CardDescription>\n                  Created {format(new Date(termSheet.created_at), 'dd MMM yyyy')}\n                  {termSheet.term_sheet_date && ` • Term Sheet Date: ${format(new Date(termSheet.term_sheet_date), 'dd MMM yyyy')}`}\n                </CardDescription>\n              </div>\n              <Badge className={statusClasses[termSheet.status] ?? statusClasses.draft}>\n                {termSheet.status.toUpperCase()}\n              </Badge>\n            </CardHeader>\n            <CardContent className=\"space-y-4 text-sm\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-xs text-muted-foreground\">\n                  {termSheet.term_sheet_attachment_key\n                    ? 'Attachment uploaded.'\n                    : 'No attachment uploaded yet.'}\n                </div>\n                {termSheet.term_sheet_attachment_key && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"gap-1 h-7 text-xs\"\n                    onClick={() => openPreview(termSheet.id)}\n                  >\n                    <Eye className=\"h-3 w-3\" />\n                    Preview\n                  </Button>\n                )}\n              </div>\n              {/* Transaction Details */}\n              <div className=\"space-y-2\">\n                <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">Transaction Details</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Transaction Type</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.transaction_type || '—'}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Structure</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.structure || '—'}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Issuer</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.issuer || '—'}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Vehicle</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.vehicle || '—'}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Arranger</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.exclusive_arranger || '—'}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Purchaser</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.purchaser || '—'}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Seller</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.seller || '—'}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Legal Counsel</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.legal_counsel || '—'}</span>\n                  </div>\n                </div>\n              </div>\n\n              <Separator />\n\n              {/* Investment Terms */}\n              <div className=\"space-y-2\">\n                <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">Investment Terms</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Allocation</span>\n                    <span className=\"text-foreground font-medium\">\n                      {termSheet.allocation_up_to ? termSheet.allocation_up_to.toLocaleString() : '—'}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Price Per Share</span>\n                    <span className=\"text-foreground font-medium\">{termSheet.price_per_share_text || '—'}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Min Ticket</span>\n                    <span className=\"text-foreground font-medium\">\n                      {termSheet.minimum_ticket ? termSheet.minimum_ticket.toLocaleString() : '—'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              <Separator />\n\n              {/* Fee Structure */}\n              <div className=\"space-y-2\">\n                <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">Fee Structure</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Subscription Fee</span>\n                    <span className=\"text-foreground font-medium\">\n                      {termSheet.subscription_fee_percent != null\n                        ? `${termSheet.subscription_fee_percent}%`\n                        : '—'}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Management Fee</span>\n                    <span className=\"text-foreground font-medium\">\n                      {termSheet.management_fee_percent != null\n                        ? `${termSheet.management_fee_percent}% p.a.`\n                        : '—'}\n                    </span>\n                    {termSheet.management_fee_clause && (\n                      <span className=\"text-muted-foreground block text-xs italic mt-1\">{termSheet.management_fee_clause}</span>\n                    )}\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Carried Interest</span>\n                    <span className=\"text-foreground font-medium\">\n                      {termSheet.carried_interest_percent != null\n                        ? `${termSheet.carried_interest_percent}%`\n                        : '—'}\n                    </span>\n                    {termSheet.performance_fee_clause && (\n                      <span className=\"text-muted-foreground block text-xs italic mt-1\">{termSheet.performance_fee_clause}</span>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              <Separator />\n\n              {/* Timeline */}\n              <div className=\"space-y-2\">\n                <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">Timeline</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Interest Deadline</span>\n                    <span className=\"text-foreground font-medium\">\n                      {termSheet.interest_confirmation_deadline\n                        ? format(new Date(termSheet.interest_confirmation_deadline), 'dd MMM yyyy HH:mm')\n                        : '—'}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Validity</span>\n                    <span className=\"text-foreground font-medium\">\n                      {termSheet.validity_date ? format(new Date(termSheet.validity_date), 'dd MMM yyyy HH:mm') : '—'}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground block text-xs\">Completion Date</span>\n                    <span className=\"text-foreground font-medium\">\n                      {termSheet.completion_date\n                        ? format(new Date(termSheet.completion_date), 'dd MMM yyyy')\n                        : termSheet.completion_date_text || '—'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {termSheet.term_sheet_html && (\n                <>\n                  <div className=\"space-y-2 text-sm\">\n                    <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">\n                      Opportunity Summary\n                    </h4>\n                  <div\n                    className=\"space-y-2 text-sm text-foreground/90 leading-relaxed\"\n                    dangerouslySetInnerHTML={{ __html: termSheet.term_sheet_html }}\n                  />\n                  </div>\n                  <Separator />\n                </>\n              )}\n              <div className=\"flex flex-wrap items-center gap-2\">\n                <input\n                  type=\"file\"\n                  accept=\".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n                  className=\"hidden\"\n                  ref={element => {\n                    fileInputsRef.current[termSheet.id] = element\n                  }}\n                  onChange={event => {\n                    const file = event.target.files?.[0]\n                    if (file) {\n                      handleAttachmentUpload(termSheet.id, file)\n                    }\n                  }}\n                />\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"gap-2\"\n                  onClick={() => openEditor('clone', termSheet)}\n                  disabled={isSubmitting}\n                >\n                  <Copy className=\"h-4 w-4\" />\n                  Clone\n                </Button>\n                {termSheet.status === 'draft' && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"gap-2\"\n                    onClick={() => openEditor('edit', termSheet)}\n                    disabled={isSubmitting}\n                  >\n                    <Pencil className=\"h-4 w-4\" />\n                    Edit\n                  </Button>\n                )}\n                {termSheet.status !== 'published' && (\n                  <Button\n                    size=\"sm\"\n                    className=\"gap-2\"\n                    onClick={() => updateStatus(termSheet, 'published')}\n                    disabled={isSubmitting}\n                  >\n                    <Rocket className=\"h-4 w-4\" />\n                    Publish\n                  </Button>\n                )}\n                {termSheet.status !== 'archived' && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"gap-2 text-rose-300\"\n                    onClick={() => updateStatus(termSheet, 'archived')}\n                    disabled={isSubmitting}\n                  >\n                    <Archive className=\"h-4 w-4\" />\n                    Archive\n                  </Button>\n                )}\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"gap-2\"\n                  onClick={() => fileInputsRef.current[termSheet.id]?.click()}\n                  disabled={uploadingAttachmentId === termSheet.id}\n                >\n                  {uploadingAttachmentId === termSheet.id ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      Uploading...\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"h-4 w-4\" />\n                      Upload Attachment\n                    </>\n                  )}\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"gap-2\"\n                  onClick={() => handleGenerateTermsheet(termSheet.id)}\n                  disabled={generatingId === termSheet.id}\n                >\n                  {generatingId === termSheet.id ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      Generating...\n                    </>\n                  ) : (\n                    <>\n                      <FileCheck className=\"h-4 w-4\" />\n                      Generate PDF\n                    </>\n                  )}\n                </Button>\n              </div>\n\n              {/* Linked Fee Plans - Only show for published term sheets */}\n              {termSheet.status === 'published' && (\n                <>\n                  <Separator />\n                  <div>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide flex items-center gap-1.5\">\n                        <FileCheck className=\"h-3.5 w-3.5\" />\n                        Linked Fee Plans\n                      </h4>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"gap-1 text-xs h-6 px-2\"\n                        onClick={() => openFeePlanModal(termSheet.id)}\n                      >\n                        <Plus className=\"h-3 w-3\" />\n                        Add\n                      </Button>\n                    </div>\n\n                    {feePlansLoading ? (\n                      <div className=\"flex items-center gap-2 text-muted-foreground text-xs py-1\">\n                        <Loader2 className=\"h-3 w-3 animate-spin\" />\n                        Loading...\n                      </div>\n                    ) : (feePlansByTermSheet[termSheet.id] || []).length === 0 ? (\n                      <div className=\"text-xs text-muted-foreground py-1\">\n                        No fee plans linked yet.\n                      </div>\n                    ) : (\n                      <div className=\"space-y-1.5\">\n                        {(feePlansByTermSheet[termSheet.id] || []).map(fp => {\n                          const entity = getEntityInfo(fp)\n                          return (\n                            <div\n                              key={fp.id}\n                              className=\"flex items-center justify-between py-1 px-2 rounded bg-muted/50 text-xs\"\n                            >\n                              <div className=\"flex items-center gap-2 min-w-0\">\n                                {entity && (\n                                  <span className=\"flex items-center gap-1 text-muted-foreground shrink-0\">\n                                    <entity.icon className=\"h-3 w-3\" />\n                                    {entity.name}\n                                  </span>\n                                )}\n                                <span className=\"text-foreground truncate\">{fp.name}</span>\n                              </div>\n                              <Badge className={`text-[10px] h-5 shrink-0 ${feePlanStatusClasses[fp.status] || feePlanStatusClasses.draft}`}>\n                                {feePlanStatusLabels[fp.status] || fp.status}\n                              </Badge>\n                            </div>\n                          )\n                        })}\n                      </div>\n                    )}\n                  </div>\n                </>\n              )}\n            </CardContent>\n          </Card>\n        ))}\n        {ordered.length === 0 && (\n          <Card className=\"border border-dashed border-border bg-muted/50\">\n            <CardContent className=\"py-16 text-center space-y-3\">\n              <h4 className=\"text-lg font-semibold text-foreground\">No term sheets yet</h4>\n              <p className=\"text-sm text-muted-foreground\">\n                Create your first version to begin capturing structured economics and publishing investor-ready content.\n              </p>\n              <Button\n                variant=\"outline\"\n                className=\"gap-2\"\n                onClick={() => openEditor('create')}\n                disabled={isSubmitting}\n              >\n                <Plus className=\"h-4 w-4\" />\n                Create Term Sheet\n              </Button>\n            </CardContent>\n          </Card>\n        )}\n        </div>\n      </div>\n\n      <Dialog open={editorOpen} onOpenChange={open => !open && closeEditor()}>\n        <DialogContent className=\"sm:max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editorMode === 'create' && 'Create Term Sheet'}\n              {editorMode === 'edit' && 'Edit Term Sheet'}\n              {editorMode === 'clone' && 'Clone Term Sheet'}\n            </DialogTitle>\n            <CardDescription>\n              Populate the structured fields that sync with investor-facing term sheets.\n            </CardDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-6 py-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"term_sheet_date\">Term Sheet Date</Label>\n                <Input\n                  id=\"term_sheet_date\"\n                  type=\"date\"\n                  value={formValues.term_sheet_date}\n                  onChange={event => setFormValues(prev => ({ ...prev, term_sheet_date: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"transaction_type\">Transaction Type</Label>\n                <Input\n                  id=\"transaction_type\"\n                  value={formValues.transaction_type}\n                  onChange={event => setFormValues(prev => ({ ...prev, transaction_type: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"structure\">Structure</Label>\n                <Input\n                  id=\"structure\"\n                  value={formValues.structure}\n                  onChange={event => setFormValues(prev => ({ ...prev, structure: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"allocation_up_to\">Allocation “Up to”</Label>\n                <Input\n                  id=\"allocation_up_to\"\n                  type=\"number\"\n                  value={formValues.allocation_up_to}\n                  onChange={event => setFormValues(prev => ({ ...prev, allocation_up_to: event.target.value }))}\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"opportunity_summary\">Opportunity Summary</Label>\n              <p className=\"text-xs text-muted-foreground\">\n                Supports basic Markdown for emphasis, lists, and headings. The rendered HTML is stored for the investor view.\n              </p>\n              <Textarea\n                id=\"opportunity_summary\"\n                rows={3}\n                value={formValues.opportunity_summary}\n                onChange={event => setFormValues(prev => ({ ...prev, opportunity_summary: event.target.value }))}\n              />\n            </div>\n\n            <Separator />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"issuer\">Issuer</Label>\n                <Input\n                  id=\"issuer\"\n                  placeholder=\"e.g., VERSO Capital\"\n                  value={formValues.issuer}\n                  onChange={event => setFormValues(prev => ({ ...prev, issuer: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"vehicle\">Vehicle</Label>\n                <Input\n                  id=\"vehicle\"\n                  placeholder=\"e.g., VERSO SPV 2025-01\"\n                  value={formValues.vehicle}\n                  onChange={event => setFormValues(prev => ({ ...prev, vehicle: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"exclusive_arranger\">Exclusive Arranger</Label>\n                <Input\n                  id=\"exclusive_arranger\"\n                  placeholder=\"e.g., VERSO Management Limited\"\n                  value={formValues.exclusive_arranger}\n                  onChange={event => setFormValues(prev => ({ ...prev, exclusive_arranger: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"purchaser\">Purchaser</Label>\n                <Input\n                  id=\"purchaser\"\n                  placeholder=\"e.g., Qualified Limited Partners\"\n                  value={formValues.purchaser}\n                  onChange={event => setFormValues(prev => ({ ...prev, purchaser: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"seller\">Seller</Label>\n                <Input\n                  id=\"seller\"\n                  placeholder=\"e.g., GP of Transform Capital\"\n                  value={formValues.seller}\n                  onChange={event => setFormValues(prev => ({ ...prev, seller: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"legal_counsel\">Legal Counsel</Label>\n                <Input\n                  id=\"legal_counsel\"\n                  placeholder=\"e.g., Dupont & Partners Law Firm\"\n                  value={formValues.legal_counsel}\n                  onChange={event => setFormValues(prev => ({ ...prev, legal_counsel: event.target.value }))}\n                />\n              </div>\n            </div>\n\n            <Separator />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"price_per_share_text\">Price per Share (Display Text)</Label>\n                <Input\n                  id=\"price_per_share_text\"\n                  placeholder=\"e.g., £10.00 per share\"\n                  value={formValues.price_per_share_text}\n                  onChange={event => setFormValues(prev => ({ ...prev, price_per_share_text: event.target.value }))}\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  Display text for investors (e.g., \"£10.00 per share\", \"~$15-20\")\n                </p>\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"price_per_share\">Price per Share (Numeric)</Label>\n                <Input\n                  id=\"price_per_share\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  placeholder=\"e.g., 10.00\"\n                  value={formValues.price_per_share}\n                  onChange={event => setFormValues(prev => ({ ...prev, price_per_share: event.target.value }))}\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  Used for subscription calculations\n                </p>\n              </div>\n            </div>\n\n            {/* Cost & Spread - CEO/Staff only */}\n            {canViewCost && (\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 rounded-lg bg-amber-500/5 border border-amber-500/20\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"cost_per_share\" className=\"text-amber-200\">Cost per Share (Internal)</Label>\n                  <Input\n                    id=\"cost_per_share\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    placeholder=\"e.g., 8.00\"\n                    value={formValues.cost_per_share}\n                    onChange={event => setFormValues(prev => ({ ...prev, cost_per_share: event.target.value }))}\n                    className=\"border-amber-500/30\"\n                  />\n                  <p className=\"text-xs text-amber-200/70\">\n                    VERSO's acquisition cost (not shown to investors)\n                  </p>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label className=\"text-amber-200\">Spread per Share</Label>\n                  <div className=\"h-10 px-3 rounded-md bg-background/50 border border-amber-500/30 flex items-center text-sm font-medium\">\n                    {(() => {\n                      const price = parseFloat(formValues.price_per_share) || 0\n                      const cost = parseFloat(formValues.cost_per_share) || 0\n                      if (price > 0 && cost > 0) {\n                        const spread = price - cost\n                        return `${spread.toFixed(2)}`\n                      }\n                      return '—'\n                    })()}\n                  </div>\n                  <p className=\"text-xs text-amber-200/70\">\n                    Calculated: price − cost\n                  </p>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label className=\"text-amber-200\">Margin %</Label>\n                  <div className=\"h-10 px-3 rounded-md bg-background/50 border border-amber-500/30 flex items-center text-sm font-medium\">\n                    {(() => {\n                      const price = parseFloat(formValues.price_per_share) || 0\n                      const cost = parseFloat(formValues.cost_per_share) || 0\n                      if (price > 0 && cost > 0) {\n                        const margin = ((price - cost) / cost) * 100\n                        return `${margin.toFixed(1)}%`\n                      }\n                      return '—'\n                    })()}\n                  </div>\n                  <p className=\"text-xs text-amber-200/70\">\n                    Margin on cost\n                  </p>\n                </div>\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"minimum_ticket\">Minimum Ticket</Label>\n                <Input\n                  id=\"minimum_ticket\"\n                  type=\"number\"\n                  value={formValues.minimum_ticket}\n                  onChange={event => setFormValues(prev => ({ ...prev, minimum_ticket: event.target.value }))}\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"subscription_fee_percent\">Subscription Fee %</Label>\n                <Input\n                  id=\"subscription_fee_percent\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={formValues.subscription_fee_percent}\n                  onChange={event => setFormValues(prev => ({ ...prev, subscription_fee_percent: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"management_fee_percent\">Management Fee %</Label>\n                <Input\n                  id=\"management_fee_percent\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={formValues.management_fee_percent}\n                  onChange={event => setFormValues(prev => ({ ...prev, management_fee_percent: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"carried_interest_percent\">Carried Interest %</Label>\n                <Input\n                  id=\"carried_interest_percent\"\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={formValues.carried_interest_percent}\n                  onChange={event => setFormValues(prev => ({ ...prev, carried_interest_percent: event.target.value }))}\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"management_fee_clause\">Management Fee Clause</Label>\n                <p className=\"text-xs text-muted-foreground\">\n                  Optional descriptive text (e.g., \"Waived instead of 2.00% per annum\")\n                </p>\n                <Input\n                  id=\"management_fee_clause\"\n                  placeholder=\"e.g., Waived (instead of 2.00% per annum)\"\n                  value={formValues.management_fee_clause}\n                  onChange={event => setFormValues(prev => ({ ...prev, management_fee_clause: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"performance_fee_clause\">Performance Fee Clause</Label>\n                <p className=\"text-xs text-muted-foreground\">\n                  Optional descriptive text (e.g., \"Waived instead of 20% no hurdle\")\n                </p>\n                <Input\n                  id=\"performance_fee_clause\"\n                  placeholder=\"e.g., Waived (instead of 20.00% no hurdle rate)\"\n                  value={formValues.performance_fee_clause}\n                  onChange={event => setFormValues(prev => ({ ...prev, performance_fee_clause: event.target.value }))}\n                />\n              </div>\n            </div>\n\n            <Separator />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"interest_confirmation_deadline\">Interest Confirmation Deadline</Label>\n                <Input\n                  id=\"interest_confirmation_deadline\"\n                  type=\"datetime-local\"\n                  value={formValues.interest_confirmation_deadline}\n                  onChange={event => setFormValues(prev => ({ ...prev, interest_confirmation_deadline: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"validity_date\">Validity Date</Label>\n                <Input\n                  id=\"validity_date\"\n                  type=\"datetime-local\"\n                  value={formValues.validity_date}\n                  onChange={event => setFormValues(prev => ({ ...prev, validity_date: event.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"completion_date\">Completion Date</Label>\n                <Input\n                  id=\"completion_date\"\n                  type=\"date\"\n                  value={formValues.completion_date}\n                  onChange={event => setFormValues(prev => ({ ...prev, completion_date: event.target.value }))}\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  When set, enables automatic CEO approval for deal closing.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter className=\"flex items-center justify-between\">\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              onClick={closeEditor}\n              disabled={isSubmitting}\n            >\n              Cancel\n            </Button>\n            <Button onClick={submitForm} disabled={isSubmitting}>\n              {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n              Save Term Sheet\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Fee Plan Creation Modal */}\n      <FeePlanEditModal\n        open={feePlanModalOpen}\n        onClose={closeFeePlanModal}\n        onSuccess={handleFeePlanSuccess}\n        dealId={dealId}\n        initialTermSheetId={selectedTermSheetIdForFeePlan}\n      />\n\n      {/* Document Preview - Fullscreen Viewer */}\n      <DocumentViewerFullscreen\n        isOpen={previewOpen}\n        document={previewDocument}\n        previewUrl={previewUrl}\n        isLoading={previewLoading}\n        error={previewError}\n        onClose={closePreview}\n        onDownload={handleDownload}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}