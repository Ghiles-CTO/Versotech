{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,oNAAC;YACC,aAAU;YACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;KAbS;AAeT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,+JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,2GACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/format.ts"],"sourcesContent":["export const formatCurrency = (value: number | null | undefined, currency: string = 'USD') => {\n  if (!value) return '$0'\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency,\n    maximumFractionDigits: 0,\n  }).format(value)\n}\n\nexport const formatBps = (bps: number | null | undefined) => {\n  if (bps === null || bps === undefined) return '—'\n  return `${bps} bps`\n}\n\nexport const formatPercentage = (value: number | null | undefined) => {\n  if (!value) return '0%'\n  return `${(value * 100).toFixed(1)}%`\n}\n\nexport const formatDate = (value: string | Date | null | undefined) => {\n  if (!value) return '—'\n  const date = typeof value === 'string' ? new Date(value) : value\n  if (Number.isNaN(date?.getTime?.())) return '—'\n  // Use explicit locale to prevent hydration mismatch between server/client\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  })\n}\n\n\n\n\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,iBAAiB,CAAC,OAAkC,WAAmB,KAAK;IACvF,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,YAAY,CAAC;IACxB,IAAI,QAAQ,QAAQ,QAAQ,WAAW,OAAO;IAC9C,OAAO,GAAG,IAAI,IAAI,CAAC;AACrB;AAEO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AACvC;AAEO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,OAAO,OAAO,UAAU,WAAW,IAAI,KAAK,SAAS;IAC3D,IAAI,OAAO,KAAK,CAAC,MAAM,cAAc,OAAO;IAC5C,0EAA0E;IAC1E,OAAO,KAAK,kBAAkB,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/client-transactions/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table'\r\nimport {\r\n  Users,\r\n  DollarSign,\r\n  Clock,\r\n  CheckCircle2,\r\n  Search,\r\n  Loader2,\r\n  AlertCircle,\r\n  User,\r\n  Building2,\r\n  Briefcase,\r\n  TrendingUp,\r\n  Mail,\r\n  FileText,\r\n  FolderOpen,\r\n  Percent,\r\n  ExternalLink,\r\n  ArrowRight,\r\n  Columns3,\r\n  List,\r\n  Eye,\r\n  PenTool,\r\n  Wallet,\r\n  Download,\r\n} from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { formatCurrency, formatDate } from '@/lib/format'\r\n\r\ntype ClientTransaction = {\r\n  id: string\r\n  client_name: string\r\n  client_email: string | null\r\n  client_type: string | null\r\n  is_active: boolean\r\n  created_at: string\r\n  deal_id: string | null\r\n  deal_name: string | null\r\n  deal_status: string | null\r\n  investor_id: string | null\r\n  subscription_id: string | null\r\n  subscription_amount: number | null\r\n  subscription_status: string | null\r\n  subscription_date: string | null\r\n  // Journey stage for bucket view\r\n  journey_stage: 'new_lead' | 'interested' | 'subscribing' | 'funded' | 'passed'\r\n  // New fields for enhanced view\r\n  has_termsheet: boolean\r\n  has_dataroom_access: boolean\r\n  estimated_commission: number | null\r\n  commission_rate_bps: number | null\r\n}\r\n\r\ntype CommercialPartnerInfo = {\r\n  id: string\r\n  name: string\r\n  legal_name: string | null\r\n  type: string | null\r\n  status: string\r\n  logo_url: string | null\r\n}\r\n\r\ntype PlacementAgreement = {\r\n  id: string\r\n  default_commission_bps: number\r\n  status: string\r\n}\r\n\r\ntype Summary = {\r\n  totalClients: number\r\n  activeClients: number\r\n  totalTransactions: number\r\n  totalValue: number\r\n  estimatedCommission: number\r\n}\r\n\r\n// Journey stage definitions for bucket view\r\nconst JOURNEY_STAGES = [\r\n  { key: 'new_lead', label: 'New Lead', color: 'bg-slate-500', icon: User },\r\n  { key: 'interested', label: 'Interested', color: 'bg-blue-500', icon: Eye },\r\n  { key: 'subscribing', label: 'Subscribing', color: 'bg-purple-500', icon: PenTool },\r\n  { key: 'funded', label: 'Funded', color: 'bg-green-500', icon: Wallet },\r\n  { key: 'passed', label: 'Passed', color: 'bg-gray-400', icon: AlertCircle },\r\n] as const\r\n\r\nconst STATUS_STYLES: Record<string, string> = {\r\n  active: 'bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300 border-green-200 dark:border-green-700',\r\n  pending: 'bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 border-yellow-200 dark:border-yellow-700',\r\n  approved: 'bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300 border-green-200 dark:border-green-700',\r\n  funded: 'bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300 border-blue-200 dark:border-blue-700',\r\n  signed: 'bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 border-purple-200 dark:border-purple-700',\r\n  committed: 'bg-cyan-100 dark:bg-cyan-900/40 text-cyan-800 dark:text-cyan-300 border-cyan-200 dark:border-cyan-700',\r\n  cancelled: 'bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300 border-red-200 dark:border-red-700',\r\n  rejected: 'bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300 border-red-200 dark:border-red-700',\r\n  withdrawn: 'bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 border-gray-200 dark:border-gray-600',\r\n}\r\n\r\nconst STATUS_FILTERS = [\r\n  { label: 'All Clients', value: 'all' },\r\n  { label: 'Active', value: 'active' },\r\n  { label: 'Inactive', value: 'inactive' },\r\n]\r\n\r\nconst CLIENT_TYPE_LABELS: Record<string, string> = {\r\n  individual: 'Individual',\r\n  company: 'Company',\r\n  trust: 'Trust',\r\n  fund: 'Fund',\r\n}\r\n\r\nexport default function ClientTransactionsPage() {\r\n  const [partnerInfo, setPartnerInfo] = useState<CommercialPartnerInfo | null>(null)\r\n  const [placementAgreement, setPlacementAgreement] = useState<PlacementAgreement | null>(null)\r\n  const [clients, setClients] = useState<ClientTransaction[]>([])\r\n  const [summary, setSummary] = useState<Summary>({\r\n    totalClients: 0,\r\n    activeClients: 0,\r\n    totalTransactions: 0,\r\n    totalValue: 0,\r\n    estimatedCommission: 0,\r\n  })\r\n  const [loading, setLoading] = useState(true)\r\n  const [exporting, setExporting] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [search, setSearch] = useState('')\r\n  const [statusFilter, setStatusFilter] = useState('all')\r\n  const [viewMode, setViewMode] = useState<'table' | 'buckets'>('table')\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        setLoading(true)\r\n        const response = await fetch('/api/commercial-partners/me/client-transactions')\r\n        if (!response.ok) {\r\n          const errorData = await response.json()\r\n          throw new Error(errorData.error || 'Failed to load client transactions')\r\n        }\r\n\r\n        const data = await response.json()\r\n        setPartnerInfo(data.partner || null)\r\n        setPlacementAgreement(data.placement_agreement || null)\r\n        setClients(data.clients || [])\r\n        setSummary(data.summary || {\r\n          totalClients: 0,\r\n          activeClients: 0,\r\n          totalTransactions: 0,\r\n          totalValue: 0,\r\n          estimatedCommission: 0,\r\n        })\r\n        setError(null)\r\n      } catch (err) {\r\n        console.error('[ClientTransactionsPage] Error:', err)\r\n        setError(err instanceof Error ? err.message : 'Failed to load client transactions')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [])\r\n\r\n  // Export to CSV (only for CPs, not staff)\r\n  const handleExportCSV = async () => {\r\n    if (exporting || isStaffView) return\r\n    setExporting(true)\r\n    try {\r\n      const response = await fetch('/api/commercial-partners/me/clients/export')\r\n      if (!response.ok) {\r\n        const data = await response.json()\r\n        throw new Error(data.error || 'Export failed')\r\n      }\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = `client-transactions-${new Date().toISOString().split('T')[0]}.csv`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      document.body.removeChild(a)\r\n      window.URL.revokeObjectURL(url)\r\n    } catch (err) {\r\n      console.error('Export error:', err)\r\n      setError(err instanceof Error ? err.message : 'Export failed')\r\n    } finally {\r\n      setExporting(false)\r\n    }\r\n  }\r\n\r\n  // Determine if this is staff view (no partner info = viewing all clients as staff)\r\n  const isStaffView = partnerInfo === null\r\n\r\n  // Filter clients\r\n  const filteredClients = clients.filter(client => {\r\n    const matchesStatus = statusFilter === 'all' ||\r\n      (statusFilter === 'active' && client.is_active) ||\r\n      (statusFilter === 'inactive' && !client.is_active)\r\n    const matchesSearch = !search ||\r\n      client.client_name?.toLowerCase().includes(search.toLowerCase()) ||\r\n      client.client_email?.toLowerCase().includes(search.toLowerCase()) ||\r\n      client.deal_name?.toLowerCase().includes(search.toLowerCase())\r\n    return matchesStatus && matchesSearch\r\n  })\r\n\r\n  // Group clients by journey stage for bucket view\r\n  const clientsByStage = JOURNEY_STAGES.reduce((acc, stage) => {\r\n    acc[stage.key] = filteredClients.filter(c => c.journey_stage === stage.key)\r\n    return acc\r\n  }, {} as Record<string, ClientTransaction[]>)\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-16\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n        <span className=\"ml-3 text-muted-foreground\">Loading client transactions...</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center py-16\">\r\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\r\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Clients</h3>\r\n        <p className=\"text-muted-foreground\">{error}</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-foreground\">Client Transactions</h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            {partnerInfo\r\n              ? `Manage clients you've introduced as ${partnerInfo.name}`\r\n              : 'View and manage all client transactions'}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          {/* Export button for commercial partners */}\r\n          {!isStaffView && partnerInfo && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={handleExportCSV}\r\n              disabled={exporting || clients.length === 0}\r\n            >\r\n              {exporting ? (\r\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n              ) : (\r\n                <Download className=\"h-4 w-4 mr-2\" />\r\n              )}\r\n              Export CSV\r\n            </Button>\r\n          )}\r\n          {placementAgreement && (\r\n            <Badge variant=\"outline\" className=\"text-green-600 dark:text-green-400 border-green-200 dark:border-green-700 bg-green-50 dark:bg-green-900/30\">\r\n              <Percent className=\"h-3 w-3 mr-1\" />\r\n              {(placementAgreement.default_commission_bps / 100).toFixed(2)}% Commission\r\n            </Badge>\r\n          )}\r\n          {partnerInfo && (\r\n            <div className=\"flex items-center gap-2\">\r\n              {partnerInfo.logo_url ? (\r\n                <img\r\n                  src={partnerInfo.logo_url}\r\n                  alt={partnerInfo.name}\r\n                  className=\"h-10 w-10 rounded-lg object-cover\"\r\n                />\r\n              ) : (\r\n                <div className=\"h-10 w-10 rounded-lg bg-muted flex items-center justify-center\">\r\n                  <Building2 className=\"h-5 w-5 text-muted-foreground\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Summary Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <Users className=\"h-4 w-4\" />\r\n              Total Clients\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{summary.totalClients}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Clients introduced\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <CheckCircle2 className=\"h-4 w-4\" />\r\n              Active Clients\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">{summary.activeClients}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Currently active\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <Briefcase className=\"h-4 w-4\" />\r\n              Subscriptions\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">{summary.totalTransactions}</div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Active investments\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <TrendingUp className=\"h-4 w-4\" />\r\n              Total Value\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-emerald-600 dark:text-emerald-400\">\r\n              {formatCurrency(summary.totalValue, 'USD')}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Total commitment\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n              <Percent className=\"h-4 w-4\" />\r\n              Est. Commission\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-purple-600 dark:text-purple-400\">\r\n              {formatCurrency(summary.estimatedCommission, 'USD')}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              On funded deals\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Filters & View Toggle */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex flex-col md:flex-row gap-4 items-center justify-between\">\r\n            <div className=\"flex flex-col md:flex-row gap-4 flex-1\">\r\n              <div className=\"flex-1 max-w-md\">\r\n                <div className=\"relative\">\r\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                  <Input\r\n                    placeholder=\"Search by client name, email, or deal...\"\r\n                    value={search}\r\n                    onChange={(e) => setSearch(e.target.value)}\r\n                    className=\"pl-10\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                <SelectTrigger className=\"w-full md:w-48\">\r\n                  <SelectValue placeholder=\"Filter by status\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {STATUS_FILTERS.map((option) => (\r\n                    <SelectItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button\r\n                variant={viewMode === 'table' ? 'default' : 'outline'}\r\n                size=\"sm\"\r\n                onClick={() => setViewMode('table')}\r\n              >\r\n                <List className=\"h-4 w-4 mr-1\" />\r\n                Table\r\n              </Button>\r\n              <Button\r\n                variant={viewMode === 'buckets' ? 'default' : 'outline'}\r\n                size=\"sm\"\r\n                onClick={() => setViewMode('buckets')}\r\n              >\r\n                <Columns3 className=\"h-4 w-4 mr-1\" />\r\n                Buckets\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Table View */}\r\n      {viewMode === 'table' && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Client Transactions</CardTitle>\r\n            <CardDescription>\r\n              {filteredClients.length} transaction{filteredClients.length !== 1 ? 's' : ''} found\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {filteredClients.length === 0 ? (\r\n              <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\r\n                <Users className=\"h-10 w-10 text-muted-foreground\" />\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {search || statusFilter !== 'all'\r\n                    ? 'No clients match your filters'\r\n                    : partnerInfo\r\n                      ? 'No clients introduced yet'\r\n                      : 'No client transactions found'}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"rounded-md border\">\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Client</TableHead>\r\n                      <TableHead>Deal</TableHead>\r\n                      <TableHead>Investment</TableHead>\r\n                      <TableHead>Stage</TableHead>\r\n                      <TableHead>Est. Commission</TableHead>\r\n                      <TableHead>Actions</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {filteredClients.map((client) => (\r\n                      <TableRow key={client.id}>\r\n                        <TableCell>\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <div className=\"h-8 w-8 rounded-full bg-muted flex items-center justify-center\">\r\n                              <User className=\"h-4 w-4 text-muted-foreground\" />\r\n                            </div>\r\n                            <div>\r\n                              <div className=\"font-medium\">{client.client_name}</div>\r\n                              {client.client_email && (\r\n                                <div className=\"text-xs text-muted-foreground flex items-center gap-1\">\r\n                                  <Mail className=\"h-3 w-3\" />\r\n                                  {client.client_email}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {client.deal_name ? (\r\n                            <div className=\"flex items-center gap-1\">\r\n                              <Briefcase className=\"h-3 w-3 text-muted-foreground\" />\r\n                              <span className=\"text-sm\">{client.deal_name}</span>\r\n                              {client.deal_status && (\r\n                                <Badge variant=\"outline\" className=\"text-xs ml-1\">\r\n                                  {client.deal_status}\r\n                                </Badge>\r\n                              )}\r\n                            </div>\r\n                          ) : (\r\n                            <span className=\"text-muted-foreground text-xs\">No deal</span>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {client.subscription_amount ? (\r\n                            <div>\r\n                              <div className=\"font-medium\">\r\n                                {formatCurrency(client.subscription_amount, 'USD')}\r\n                              </div>\r\n                              {client.subscription_status && (\r\n                                <Badge\r\n                                  variant=\"outline\"\r\n                                  className={cn(\r\n                                    'text-xs capitalize mt-1',\r\n                                    STATUS_STYLES[client.subscription_status] || ''\r\n                                  )}\r\n                                >\r\n                                  {client.subscription_status}\r\n                                </Badge>\r\n                              )}\r\n                            </div>\r\n                          ) : (\r\n                            <span className=\"text-muted-foreground text-xs\">No subscription</span>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {JOURNEY_STAGES.find(s => s.key === client.journey_stage) && (\r\n                            <Badge\r\n                              className={cn(\r\n                                'text-white',\r\n                                JOURNEY_STAGES.find(s => s.key === client.journey_stage)?.color\r\n                              )}\r\n                            >\r\n                              {JOURNEY_STAGES.find(s => s.key === client.journey_stage)?.label}\r\n                            </Badge>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {client.estimated_commission ? (\r\n                            <div className=\"text-sm font-medium text-purple-600\">\r\n                              {formatCurrency(client.estimated_commission, 'USD')}\r\n                              <span className=\"text-xs text-muted-foreground ml-1\">\r\n                                ({(client.commission_rate_bps || 0) / 100}%)\r\n                              </span>\r\n                            </div>\r\n                          ) : (\r\n                            <span className=\"text-muted-foreground text-xs\">-</span>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <div className=\"flex items-center gap-1\">\r\n                            {client.deal_id && client.has_termsheet && (\r\n                              <Button variant=\"ghost\" size=\"icon\" asChild title=\"View Termsheet\">\r\n                                <Link href={`/versotech_main/opportunities/${client.deal_id}`}>\r\n                                  <FileText className=\"h-4 w-4\" />\r\n                                </Link>\r\n                              </Button>\r\n                            )}\r\n                            {client.deal_id && client.has_dataroom_access && (\r\n                              <Button variant=\"ghost\" size=\"icon\" asChild title=\"Access Dataroom\">\r\n                                <Link href={`/versotech_main/opportunities/${client.deal_id}?tab=data-room${client.investor_id ? `&client_investor_id=${client.investor_id}` : ''}`}>\r\n                                  <FolderOpen className=\"h-4 w-4\" />\r\n                                </Link>\r\n                              </Button>\r\n                            )}\r\n                          </div>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Bucket View */}\r\n      {viewMode === 'buckets' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\r\n          {JOURNEY_STAGES.map((stage) => {\r\n            const StageIcon = stage.icon\r\n            const stageClients = clientsByStage[stage.key] || []\r\n            const stageValue = stageClients.reduce((sum, c) => sum + (c.subscription_amount || 0), 0)\r\n\r\n            return (\r\n              <Card key={stage.key} className=\"flex flex-col\">\r\n                <CardHeader className={cn('pb-2', stage.color, 'text-white rounded-t-lg')}>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <StageIcon className=\"h-4 w-4\" />\r\n                      <CardTitle className=\"text-sm\">{stage.label}</CardTitle>\r\n                    </div>\r\n                    <Badge variant=\"secondary\" className=\"bg-white/20 text-white\">\r\n                      {stageClients.length}\r\n                    </Badge>\r\n                  </div>\r\n                  {stageValue > 0 && (\r\n                    <p className=\"text-xs text-white/80 mt-1\">\r\n                      {formatCurrency(stageValue, 'USD')}\r\n                    </p>\r\n                  )}\r\n                </CardHeader>\r\n                <CardContent className=\"flex-1 pt-4 space-y-2 min-h-[200px] max-h-[400px] overflow-y-auto\">\r\n                  {stageClients.length === 0 ? (\r\n                    <p className=\"text-xs text-muted-foreground text-center py-4\">\r\n                      No clients in this stage\r\n                    </p>\r\n                  ) : (\r\n                    stageClients.map((client) => (\r\n                      <div\r\n                        key={client.id}\r\n                        className=\"p-3 bg-muted/50 rounded-lg border border-border hover:bg-muted transition-colors\"\r\n                      >\r\n                        <div className=\"flex items-center gap-2 mb-1\">\r\n                          <User className=\"h-3 w-3 text-muted-foreground\" />\r\n                          <span className=\"text-sm font-medium truncate\">{client.client_name}</span>\r\n                        </div>\r\n                        {client.deal_name && (\r\n                          <p className=\"text-xs text-muted-foreground truncate mb-1\">\r\n                            {client.deal_name}\r\n                          </p>\r\n                        )}\r\n                        {client.subscription_amount ? (\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <span className=\"text-xs font-medium\">\r\n                              {formatCurrency(client.subscription_amount, 'USD')}\r\n                            </span>\r\n                            <Badge\r\n                              variant=\"outline\"\r\n                              className={cn(\r\n                                'text-xs',\r\n                                STATUS_STYLES[client.subscription_status || ''] || ''\r\n                              )}\r\n                            >\r\n                              {client.subscription_status}\r\n                            </Badge>\r\n                          </div>\r\n                        ) : (\r\n                          <span className=\"text-xs text-muted-foreground\">No subscription</span>\r\n                        )}\r\n                        {client.deal_id && (\r\n                          <div className=\"flex gap-1 mt-2\">\r\n                            <Button variant=\"ghost\" size=\"sm\" className=\"h-6 px-2 text-xs\" asChild>\r\n                              <Link href={`/versotech_main/opportunities/${client.deal_id}`}>\r\n                                <FileText className=\"h-3 w-3 mr-1\" />\r\n                                Deal\r\n                              </Link>\r\n                            </Button>\r\n                            <Button variant=\"ghost\" size=\"sm\" className=\"h-6 px-2 text-xs\" asChild>\r\n                              <Link href={`/versotech_main/opportunities/${client.deal_id}?tab=data-room${client.investor_id ? `&client_investor_id=${client.investor_id}` : ''}`}>\r\n                                <FolderOpen className=\"h-3 w-3 mr-1\" />\r\n                                Files\r\n                              </Link>\r\n                            </Button>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}