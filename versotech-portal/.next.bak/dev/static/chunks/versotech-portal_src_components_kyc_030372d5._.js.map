{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/schemas/kyc-questionnaire-schema.ts"],"sourcesContent":["import { z } from 'zod'\r\n\r\n// ============================================================================\r\n// STEP 1: About You (Subscriber Information)\r\n// ============================================================================\r\nexport const step1Schema = z.object({\r\n  fullName: z.string().min(2, 'Full name is required'),\r\n  dateOfBirth: z.string().min(1, 'Date of birth is required'),\r\n  nationality: z.string().min(2, 'Nationality is required'),\r\n  countryOfResidence: z.string().min(2, 'Country of residence is required'),\r\n  residentialAddress: z.string().min(5, 'Residential address is required'),\r\n  city: z.string().min(2, 'City is required'),\r\n  postalCode: z.string().min(2, 'Postal code is required'),\r\n  email: z.string().email('Valid email is required'),\r\n  phone: z.string().min(7, 'Phone number is required'),\r\n  taxIdNumber: z.string().optional(),\r\n  taxResidencyCountry: z.string().min(2, 'Tax residency country is required'),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 2: Investment Type\r\n// ============================================================================\r\nexport const investmentTypeOptions = [\r\n  { value: 'individual', label: 'Individual (Personal Assets)' },\r\n  { value: 'joint', label: 'Joint Account' },\r\n  { value: 'trust', label: 'Trust or Estate' },\r\n  { value: 'corporation', label: 'Corporation / LLC' },\r\n  { value: 'partnership', label: 'Partnership' },\r\n  { value: 'other', label: 'Other' },\r\n] as const\r\n\r\nexport const step2Schema = z.object({\r\n  investmentType: z.enum(['individual', 'joint', 'trust', 'corporation', 'partnership', 'other']),\r\n  investmentTypeOther: z.string().optional(),\r\n}).refine(\r\n  (data) => data.investmentType !== 'other' || (data.investmentTypeOther && data.investmentTypeOther.length > 0),\r\n  { message: 'Please specify the investment type', path: ['investmentTypeOther'] }\r\n)\r\n\r\n// ============================================================================\r\n// STEP 3: Well-Informed Investor Status\r\n// ============================================================================\r\nexport const wellInformedBasisOptions = [\r\n  { value: 'net_worth', label: 'Net worth exceeds â‚¬1,250,000' },\r\n  { value: 'professional', label: 'Professional investor (regulated entity)' },\r\n  { value: 'institutional', label: 'Institutional investor' },\r\n  { value: 'experience', label: 'Significant investment experience' },\r\n  { value: 'advised', label: 'Advised by regulated advisor' },\r\n] as const\r\n\r\n// BUG FIX 3.5: Use proper enum array for wellInformedBasis\r\nconst wellInformedBasisValues = ['net_worth', 'professional', 'institutional', 'experience', 'advised'] as const\r\n\r\nexport const step3Schema = z.object({\r\n  isWellInformed: z.enum(['yes', 'no', 'unsure']),\r\n  wellInformedBasis: z.array(z.enum(wellInformedBasisValues)).optional(),\r\n  wellInformedEvidence: z.string().optional(),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 4: Compliance Overview (12 questions)\r\n// ============================================================================\r\nexport const step4Schema = z.object({\r\n  // PEP Status\r\n  isPEP: z.enum(['yes', 'no']),\r\n  pepDetails: z.string().optional(),\r\n\r\n  // Family/Associate PEP\r\n  isRelatedToPEP: z.enum(['yes', 'no']),\r\n  relatedPEPDetails: z.string().optional(),\r\n\r\n  // Sanctions\r\n  isSanctioned: z.enum(['yes', 'no']),\r\n  sanctionedDetails: z.string().optional(),\r\n\r\n  // Criminal Record\r\n  hasCriminalRecord: z.enum(['yes', 'no']),\r\n  criminalDetails: z.string().optional(),\r\n\r\n  // Under Investigation\r\n  isUnderInvestigation: z.enum(['yes', 'no']),\r\n  investigationDetails: z.string().optional(),\r\n\r\n  // Bankruptcy\r\n  hasBankruptcy: z.enum(['yes', 'no']),\r\n  bankruptcyDetails: z.string().optional(),\r\n\r\n  // US Person indicator (triggers Steps 5-7)\r\n  isUSPerson: z.enum(['yes', 'no']),\r\n\r\n  // Source of Funds\r\n  sourceOfFunds: z.string().min(10, 'Please describe your source of funds'),\r\n\r\n  // Source of Wealth\r\n  sourceOfWealth: z.string().min(10, 'Please describe your source of wealth'),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 5: US Person Definition (CONDITIONAL - only if isUSPerson = 'yes')\r\n// ============================================================================\r\nexport const step5Schema = z.object({\r\n  isUSCitizen: z.enum(['yes', 'no']),\r\n  isUSResident: z.enum(['yes', 'no']),\r\n  hasUSGreenCard: z.enum(['yes', 'no']),\r\n  hasSubstantialUSPresence: z.enum(['yes', 'no']),\r\n  hasUSMailingAddress: z.enum(['yes', 'no']),\r\n  hasUSPhoneNumber: z.enum(['yes', 'no']),\r\n  hasUSBankAccount: z.enum(['yes', 'no']),\r\n  hasUSPowerOfAttorney: z.enum(['yes', 'no']),\r\n  usConnectionDetails: z.string().optional(),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 6: Offer Details (CONDITIONAL)\r\n// ============================================================================\r\nexport const step6Schema = z.object({\r\n  isAccreditedInvestor: z.enum(['yes', 'no']),\r\n  accreditationBasis: z.enum(['income', 'net_worth', 'professional', 'entity', 'other']).optional(),\r\n  hasReceivedOfferingMaterials: z.enum(['yes', 'no']),\r\n  understandsRestrictions: z.enum(['yes', 'no']),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 7: Additional US Compliance (CONDITIONAL)\r\n// ============================================================================\r\nexport const step7Schema = z.object({\r\n  acknowledgesFATCA: z.boolean().refine(val => val === true, 'You must acknowledge FATCA requirements'),\r\n  willProvideW9: z.boolean().refine(val => val === true, 'You must agree to provide W-9 if required'),\r\n  understandsWithholding: z.boolean().refine(val => val === true, 'You must acknowledge withholding requirements'),\r\n  certifiesTaxCompliance: z.boolean().refine(val => val === true, 'You must certify tax compliance'),\r\n  acknowledgesReportingObligations: z.boolean().refine(val => val === true, 'You must acknowledge reporting obligations'),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 8: Investment Suitability\r\n// ============================================================================\r\nexport const educationLevelOptions = [\r\n  { value: 'high_school', label: 'High School' },\r\n  { value: 'bachelors', label: \"Bachelor's Degree\" },\r\n  { value: 'masters', label: \"Master's Degree\" },\r\n  { value: 'doctorate', label: 'Doctorate' },\r\n  { value: 'professional', label: 'Professional Certification (CFA, CPA, etc.)' },\r\n] as const\r\n\r\nexport const employmentStatusOptions = [\r\n  { value: 'employed', label: 'Employed' },\r\n  { value: 'self_employed', label: 'Self-Employed' },\r\n  { value: 'retired', label: 'Retired' },\r\n  { value: 'unemployed', label: 'Unemployed' },\r\n  { value: 'student', label: 'Student' },\r\n] as const\r\n\r\nexport const incomeRangeOptions = [\r\n  { value: 'under_100k', label: 'Under $100,000' },\r\n  { value: '100k_250k', label: '$100,000 - $250,000' },\r\n  { value: '250k_500k', label: '$250,000 - $500,000' },\r\n  { value: '500k_1m', label: '$500,000 - $1,000,000' },\r\n  { value: '1m_plus', label: 'Over $1,000,000' },\r\n] as const\r\n\r\nexport const netWorthRangeOptions = [\r\n  { value: 'under_500k', label: 'Under $500,000' },\r\n  { value: '500k_1m', label: '$500,000 - $1,000,000' },\r\n  { value: '1m_5m', label: '$1,000,000 - $5,000,000' },\r\n  { value: '5m_10m', label: '$5,000,000 - $10,000,000' },\r\n  { value: '10m_plus', label: 'Over $10,000,000' },\r\n] as const\r\n\r\nexport const investmentObjectiveOptions = [\r\n  { value: 'capital_preservation', label: 'Capital Preservation' },\r\n  { value: 'income', label: 'Income Generation' },\r\n  { value: 'growth', label: 'Growth' },\r\n  { value: 'speculation', label: 'Speculation' },\r\n] as const\r\n\r\nexport const riskToleranceOptions = [\r\n  { value: 'conservative', label: 'Conservative - Prefer stability over returns' },\r\n  { value: 'moderate', label: 'Moderate - Balance of risk and return' },\r\n  { value: 'aggressive', label: 'Aggressive - Willing to accept higher risk' },\r\n] as const\r\n\r\nexport const timeHorizonOptions = [\r\n  { value: 'under_3_years', label: 'Less than 3 years' },\r\n  { value: '3_5_years', label: '3 - 5 years' },\r\n  { value: '5_10_years', label: '5 - 10 years' },\r\n  { value: 'over_10_years', label: 'Over 10 years' },\r\n] as const\r\n\r\nexport const step8Schema = z.object({\r\n  // Education & Experience\r\n  educationLevel: z.enum(['high_school', 'bachelors', 'masters', 'doctorate', 'professional']),\r\n  employmentStatus: z.enum(['employed', 'self_employed', 'retired', 'unemployed', 'student']),\r\n  occupation: z.string().optional(),\r\n  employer: z.string().optional(),\r\n  yearsInvestingExperience: z.string().min(1, 'Please indicate your investment experience'),\r\n\r\n  // Financial Profile\r\n  annualIncome: z.enum(['under_100k', '100k_250k', '250k_500k', '500k_1m', '1m_plus']),\r\n  netWorth: z.enum(['under_500k', '500k_1m', '1m_5m', '5m_10m', '10m_plus']),\r\n  liquidNetWorth: z.enum(['under_500k', '500k_1m', '1m_5m', '5m_10m', '10m_plus']),\r\n\r\n  // Investment Preferences\r\n  investmentObjective: z.enum(['capital_preservation', 'income', 'growth', 'speculation']),\r\n  riskTolerance: z.enum(['conservative', 'moderate', 'aggressive']),\r\n  investmentHorizon: z.enum(['under_3_years', '3_5_years', '5_10_years', 'over_10_years']),\r\n\r\n  // Investment Allocation\r\n  percentageOfNetWorthToInvest: z.string().min(1, 'Please indicate the percentage'),\r\n  hasAlternativeInvestmentExperience: z.enum(['yes', 'no']),\r\n  alternativeInvestmentTypes: z.array(z.string()).optional(),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 9: Waiver & Risk Awareness\r\n// ============================================================================\r\nexport const step9Schema = z.object({\r\n  acknowledgesIlliquidity: z.boolean().refine(val => val === true, 'You must acknowledge this risk'),\r\n  acknowledgesLossRisk: z.boolean().refine(val => val === true, 'You must acknowledge this risk'),\r\n  acknowledgesNoGuarantees: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesLimitedInfo: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesNoRegulation: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesConflicts: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesTaxImplications: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesFees: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  hasReadOfferingDocs: z.boolean().refine(val => val === true, 'You must confirm this'),\r\n  hasSoughtIndependentAdvice: z.boolean().refine(val => val === true, 'You must confirm this'),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 10: Signature & Certification\r\n// ============================================================================\r\nexport const step10Schema = z.object({\r\n  certifiesAccuracy: z.boolean().refine(val => val === true, 'You must certify accuracy'),\r\n  certifiesNoOmissions: z.boolean().refine(val => val === true, 'You must certify no omissions'),\r\n  agreesToUpdates: z.boolean().refine(val => val === true, 'You must agree to provide updates'),\r\n  consentToProcessing: z.boolean().refine(val => val === true, 'You must consent to data processing'),\r\n  signatureName: z.string().min(2, 'Please type your full name as signature'),\r\n  signatureDate: z.string().min(1, 'Signature date is required'),\r\n})\r\n\r\n// ============================================================================\r\n// Combined Schema\r\n// ============================================================================\r\nexport const kycQuestionnaireSchema = z.object({\r\n  step1: step1Schema,\r\n  step2: step2Schema,\r\n  step3: step3Schema,\r\n  step4: step4Schema,\r\n  step5: step5Schema.optional(), // Conditional\r\n  step6: step6Schema.optional(), // Conditional\r\n  step7: step7Schema.optional(), // Conditional\r\n  step8: step8Schema,\r\n  step9: step9Schema,\r\n  step10: step10Schema,\r\n  // Metadata\r\n  lastCompletedStep: z.number().optional(),\r\n  wizardVersion: z.string().default('2.0'),\r\n})\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\nexport type Step1Data = z.infer<typeof step1Schema>\r\nexport type Step2Data = z.infer<typeof step2Schema>\r\nexport type Step3Data = z.infer<typeof step3Schema>\r\nexport type Step4Data = z.infer<typeof step4Schema>\r\nexport type Step5Data = z.infer<typeof step5Schema>\r\nexport type Step6Data = z.infer<typeof step6Schema>\r\nexport type Step7Data = z.infer<typeof step7Schema>\r\nexport type Step8Data = z.infer<typeof step8Schema>\r\nexport type Step9Data = z.infer<typeof step9Schema>\r\nexport type Step10Data = z.infer<typeof step10Schema>\r\nexport type KYCQuestionnaireData = z.infer<typeof kycQuestionnaireSchema>\r\n\r\n// ============================================================================\r\n// Step Configuration\r\n// ============================================================================\r\nexport const STEP_CONFIG = [\r\n  { key: 'step1', title: 'About You', description: \"Let's start with your basic information\", icon: 'User', isConditional: false },\r\n  { key: 'step2', title: 'Investment Type', description: 'How will you be investing?', icon: 'Briefcase', isConditional: false },\r\n  { key: 'step3', title: 'Investor Status', description: 'Your investment experience', icon: 'GraduationCap', isConditional: false },\r\n  { key: 'step4', title: 'Compliance Check', description: 'Regulatory declarations', icon: 'Shield', isConditional: false },\r\n  { key: 'step5', title: 'US Person Status', description: 'US tax residency details', icon: 'Flag', isConditional: true },\r\n  { key: 'step6', title: 'Offer Details', description: 'Investment acknowledgments', icon: 'FileText', isConditional: true },\r\n  { key: 'step7', title: 'US Tax Compliance', description: 'FATCA and reporting requirements', icon: 'FileCheck', isConditional: true },\r\n  { key: 'step8', title: 'Suitability', description: 'Your financial profile', icon: 'TrendingUp', isConditional: false },\r\n  { key: 'step9', title: 'Risk Awareness', description: 'Understanding the risks', icon: 'AlertTriangle', isConditional: false },\r\n  { key: 'step10', title: 'Sign & Submit', description: 'Review and certify', icon: 'PenTool', isConditional: false },\r\n] as const\r\n\r\n// Helper to get schema for a step\r\nexport function getStepSchema(stepNumber: number) {\r\n  const schemas: Record<number, z.ZodTypeAny> = {\r\n    1: step1Schema,\r\n    2: step2Schema,\r\n    3: step3Schema,\r\n    4: step4Schema,\r\n    5: step5Schema,\r\n    6: step6Schema,\r\n    7: step7Schema,\r\n    8: step8Schema,\r\n    9: step9Schema,\r\n    10: step10Schema,\r\n  }\r\n  return schemas[stepNumber]\r\n}\r\n\r\n// Helper to check if US Person steps should be shown\r\nexport function shouldShowUSPersonSteps(step4Data?: Step4Data): boolean {\r\n  return step4Data?.isUSPerson === 'yes'\r\n}\r\n\r\n// Get visible steps based on form data\r\nexport function getVisibleSteps(formData: Partial<KYCQuestionnaireData>): number[] {\r\n  const showUSSteps = shouldShowUSPersonSteps(formData.step4)\r\n\r\n  if (showUSSteps) {\r\n    return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n  }\r\n\r\n  // Skip steps 5, 6, 7 for non-US persons\r\n  return [1, 2, 3, 4, 8, 9, 10]\r\n}\r\n\r\n// BUG FIX 2.7: Compute signature date at runtime, not module load time\r\nfunction getTodayDate(): string {\r\n  return new Date().toISOString().split('T')[0]\r\n}\r\n\r\n// Get default values for each step\r\nexport function getStepDefaults(stepNumber: number): Record<string, unknown> {\r\n  // BUG FIX 2.7: Step 10 defaults are computed dynamically for signatureDate\r\n  if (stepNumber === 10) {\r\n    return {\r\n      certifiesAccuracy: false,\r\n      certifiesNoOmissions: false,\r\n      agreesToUpdates: false,\r\n      consentToProcessing: false,\r\n      signatureName: '',\r\n      signatureDate: getTodayDate(), // Computed at call time, not module load\r\n    }\r\n  }\r\n\r\n  const defaults: Record<number, Record<string, unknown>> = {\r\n    1: {\r\n      fullName: '',\r\n      dateOfBirth: '',\r\n      nationality: '',\r\n      countryOfResidence: '',\r\n      residentialAddress: '',\r\n      city: '',\r\n      postalCode: '',\r\n      email: '',\r\n      phone: '',\r\n      taxIdNumber: '',\r\n      taxResidencyCountry: '',\r\n    },\r\n    2: {\r\n      investmentType: undefined,\r\n      investmentTypeOther: '',\r\n    },\r\n    3: {\r\n      isWellInformed: undefined,\r\n      wellInformedBasis: [],\r\n      wellInformedEvidence: '',\r\n    },\r\n    4: {\r\n      isPEP: undefined,\r\n      pepDetails: '',\r\n      isRelatedToPEP: undefined,\r\n      relatedPEPDetails: '',\r\n      isSanctioned: undefined,\r\n      sanctionedDetails: '',\r\n      hasCriminalRecord: undefined,\r\n      criminalDetails: '',\r\n      isUnderInvestigation: undefined,\r\n      investigationDetails: '',\r\n      hasBankruptcy: undefined,\r\n      bankruptcyDetails: '',\r\n      isUSPerson: undefined,\r\n      sourceOfFunds: '',\r\n      sourceOfWealth: '',\r\n    },\r\n    5: {\r\n      isUSCitizen: undefined,\r\n      isUSResident: undefined,\r\n      hasUSGreenCard: undefined,\r\n      hasSubstantialUSPresence: undefined,\r\n      hasUSMailingAddress: undefined,\r\n      hasUSPhoneNumber: undefined,\r\n      hasUSBankAccount: undefined,\r\n      hasUSPowerOfAttorney: undefined,\r\n      usConnectionDetails: '',\r\n    },\r\n    6: {\r\n      isAccreditedInvestor: undefined,\r\n      accreditationBasis: undefined,\r\n      hasReceivedOfferingMaterials: undefined,\r\n      understandsRestrictions: undefined,\r\n    },\r\n    7: {\r\n      acknowledgesFATCA: false,\r\n      willProvideW9: false,\r\n      understandsWithholding: false,\r\n      certifiesTaxCompliance: false,\r\n      acknowledgesReportingObligations: false,\r\n    },\r\n    8: {\r\n      educationLevel: undefined,\r\n      employmentStatus: undefined,\r\n      occupation: '',\r\n      employer: '',\r\n      yearsInvestingExperience: '',\r\n      annualIncome: undefined,\r\n      netWorth: undefined,\r\n      liquidNetWorth: undefined,\r\n      investmentObjective: undefined,\r\n      riskTolerance: undefined,\r\n      investmentHorizon: undefined,\r\n      percentageOfNetWorthToInvest: '',\r\n      hasAlternativeInvestmentExperience: undefined,\r\n      alternativeInvestmentTypes: [],\r\n    },\r\n    9: {\r\n      acknowledgesIlliquidity: false,\r\n      acknowledgesLossRisk: false,\r\n      acknowledgesNoGuarantees: false,\r\n      acknowledgesLimitedInfo: false,\r\n      acknowledgesNoRegulation: false,\r\n      acknowledgesConflicts: false,\r\n      acknowledgesTaxImplications: false,\r\n      acknowledgesFees: false,\r\n      hasReadOfferingDocs: false,\r\n      hasSoughtIndependentAdvice: false,\r\n    },\r\n  }\r\n  return defaults[stepNumber] || {}\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 737, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/WizardContext.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { createContext, useContext, useState, useCallback, useEffect, useRef } from 'react'\r\nimport { toast } from 'sonner'\r\nimport {\r\n  KYCQuestionnaireData,\r\n  getVisibleSteps,\r\n  getStepDefaults,\r\n  getStepSchema,\r\n  STEP_CONFIG,\r\n} from '../schemas/kyc-questionnaire-schema'\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\ninterface WizardState {\r\n  currentStep: number\r\n  formData: Partial<KYCQuestionnaireData>\r\n  completedSteps: Set<number>\r\n  isLoading: boolean\r\n  isSaving: boolean\r\n  lastSavedAt: Date | null\r\n  submissionId: string | null\r\n  errors: Record<number, string[]>\r\n}\r\n\r\ninterface WizardContextValue {\r\n  // Convenience accessors (same as state but easier to use)\r\n  currentStep: number\r\n  formData: Partial<KYCQuestionnaireData>\r\n  isLoading: boolean\r\n  isSaving: boolean\r\n  lastSavedAt: Date | null\r\n\r\n  // Computed values\r\n  state: WizardState\r\n  visibleSteps: number[]\r\n  totalVisibleSteps: number\r\n  currentStepIndex: number\r\n  progress: number\r\n  currentStepConfig: typeof STEP_CONFIG[number]\r\n  isFirstStep: boolean\r\n  isLastStep: boolean\r\n  canGoNext: boolean\r\n  canGoBack: boolean\r\n\r\n  // Actions\r\n  goToStep: (step: number) => void\r\n  nextStep: () => Promise<boolean>\r\n  previousStep: () => void\r\n  updateStepData: <K extends keyof KYCQuestionnaireData>(stepKey: K, data: KYCQuestionnaireData[K]) => void\r\n  validateCurrentStep: () => Promise<{ valid: boolean; errors: string[] }>\r\n  saveProgress: () => Promise<void>\r\n  submitQuestionnaire: () => Promise<boolean>\r\n  getStepData: <K extends keyof KYCQuestionnaireData>(stepKey: K) => KYCQuestionnaireData[K] | undefined\r\n}\r\n\r\nconst WizardContext = createContext<WizardContextValue | null>(null)\r\n\r\n// ============================================================================\r\n// Provider\r\n// ============================================================================\r\ninterface WizardProviderProps {\r\n  children: React.ReactNode\r\n  onComplete?: () => void\r\n  initialData?: Partial<KYCQuestionnaireData>\r\n  submissionId?: string | null\r\n}\r\n\r\nexport function WizardProvider({\r\n  children,\r\n  onComplete,\r\n  initialData,\r\n  submissionId: initialSubmissionId,\r\n}: WizardProviderProps) {\r\n  const [state, setState] = useState<WizardState>(() => ({\r\n    currentStep: initialData?.lastCompletedStep ? Math.min(initialData.lastCompletedStep + 1, 10) : 1,\r\n    formData: initialData || {},\r\n    completedSteps: new Set(\r\n      initialData?.lastCompletedStep\r\n        ? Array.from({ length: initialData.lastCompletedStep }, (_, i) => i + 1)\r\n        : []\r\n    ),\r\n    isLoading: false,\r\n    isSaving: false,\r\n    lastSavedAt: null,\r\n    submissionId: initialSubmissionId || null,\r\n    errors: {},\r\n  }))\r\n\r\n  const autoSaveTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const isDirtyRef = useRef(false)\r\n  const isSavingRef = useRef(false) // Ref for immediate saving state check\r\n  const isSubmittedRef = useRef(false) // Ref to prevent auto-save after final submission\r\n  const saveProgressRef = useRef<(() => Promise<void>) | undefined>(undefined) // Ref to latest saveProgress\r\n\r\n  // Calculate visible steps based on US Person status\r\n  const visibleSteps = getVisibleSteps(state.formData)\r\n  const totalVisibleSteps = visibleSteps.length\r\n  const rawCurrentStepIndex = visibleSteps.indexOf(state.currentStep)\r\n\r\n  // BUG FIX 2.3: Handle currentStepIndex = -1 (step became hidden)\r\n  const currentStepIndex = rawCurrentStepIndex === -1 ? 0 : rawCurrentStepIndex\r\n  const safeCurrentStep = rawCurrentStepIndex === -1 ? visibleSteps[0] : state.currentStep\r\n\r\n  // Auto-navigate when current step becomes hidden (e.g., US Person changes from 'yes' to 'no')\r\n  useEffect(() => {\r\n    if (rawCurrentStepIndex === -1 && visibleSteps.length > 0) {\r\n      // Find nearest valid step (prefer staying on same or earlier step)\r\n      const nearestStep = visibleSteps.find(s => s >= state.currentStep) || visibleSteps[visibleSteps.length - 1]\r\n      setState(prev => ({ ...prev, currentStep: nearestStep }))\r\n    }\r\n  }, [rawCurrentStepIndex, visibleSteps, state.currentStep])\r\n\r\n  const progress = Math.max(0, Math.round(((currentStepIndex + 1) / totalVisibleSteps) * 100))\r\n  const currentStepConfig = STEP_CONFIG[safeCurrentStep - 1]\r\n  const isFirstStep = currentStepIndex === 0\r\n  const isLastStep = currentStepIndex === totalVisibleSteps - 1\r\n  const canGoNext = !isLastStep\r\n  const canGoBack = !isFirstStep\r\n\r\n  // BUG FIX 2.1: Auto-save with proper closure handling using ref\r\n  useEffect(() => {\r\n    if (isDirtyRef.current && saveProgressRef.current) {\r\n      autoSaveTimeoutRef.current = setTimeout(() => {\r\n        saveProgressRef.current?.()\r\n      }, 30000)\r\n    }\r\n\r\n    return () => {\r\n      if (autoSaveTimeoutRef.current) {\r\n        clearTimeout(autoSaveTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [state.formData])\r\n\r\n  // Get step data helper\r\n  const getStepData = useCallback(<K extends keyof KYCQuestionnaireData>(stepKey: K) => {\r\n    return state.formData[stepKey]\r\n  }, [state.formData])\r\n\r\n  // Update step data\r\n  const updateStepData = useCallback(<K extends keyof KYCQuestionnaireData>(\r\n    stepKey: K,\r\n    data: KYCQuestionnaireData[K]\r\n  ) => {\r\n    isDirtyRef.current = true\r\n    setState(prev => ({\r\n      ...prev,\r\n      formData: {\r\n        ...prev.formData,\r\n        [stepKey]: data,\r\n      },\r\n      errors: {\r\n        ...prev.errors,\r\n        [parseInt(stepKey.replace('step', ''))]: [],\r\n      },\r\n    }))\r\n  }, [])\r\n\r\n  // Validate current step - returns { valid, errors } for better error messaging\r\n  const validateCurrentStep = useCallback(async (): Promise<{ valid: boolean; errors: string[] }> => {\r\n    const stepKey = `step${state.currentStep}` as keyof KYCQuestionnaireData\r\n    const stepData = state.formData[stepKey]\r\n    const schema = getStepSchema(state.currentStep)\r\n\r\n    if (!schema) return { valid: true, errors: [] }\r\n\r\n    try {\r\n      await schema.parseAsync(stepData || getStepDefaults(state.currentStep))\r\n      setState(prev => ({\r\n        ...prev,\r\n        errors: { ...prev.errors, [state.currentStep]: [] },\r\n      }))\r\n      return { valid: true, errors: [] }\r\n    } catch (error: any) {\r\n      // Zod uses 'issues' not 'errors' for validation errors\r\n      const messages = error.issues?.map((e: any) => e.message) || ['Validation failed']\r\n      setState(prev => ({\r\n        ...prev,\r\n        errors: { ...prev.errors, [state.currentStep]: messages },\r\n      }))\r\n      return { valid: false, errors: messages }\r\n    }\r\n  }, [state.currentStep, state.formData])\r\n\r\n  // Save progress - BUG FIX 3.1: Use ref for immediate isSaving check\r\n  const saveProgress = useCallback(async () => {\r\n    // Use ref for immediate check to prevent race conditions\r\n    if (isSavingRef.current) return\r\n\r\n    // BUG FIX: Prevent auto-save from running after final submission\r\n    // This prevents overwriting 'pending' status back to 'draft'\r\n    if (isSubmittedRef.current) return\r\n\r\n    isSavingRef.current = true\r\n    setState(prev => ({ ...prev, isSaving: true }))\r\n\r\n    try {\r\n      const payload = {\r\n        document_type: 'questionnaire',\r\n        custom_label: 'KYC Compliance Questionnaire',\r\n        metadata: {\r\n          ...state.formData,\r\n          lastCompletedStep: Math.max(...Array.from(state.completedSteps), 0),\r\n          wizardVersion: '2.0',\r\n        },\r\n        status: 'draft',\r\n      }\r\n\r\n      let response: Response\r\n\r\n      if (state.submissionId) {\r\n        // Update existing draft\r\n        response = await fetch(`/api/investors/me/kyc-submissions/${state.submissionId}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      } else {\r\n        // Create new draft\r\n        response = await fetch('/api/investors/me/kyc-submissions', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to save progress')\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      setState(prev => ({\r\n        ...prev,\r\n        isSaving: false,\r\n        lastSavedAt: new Date(),\r\n        submissionId: data.submission?.id || prev.submissionId,\r\n      }))\r\n\r\n      isDirtyRef.current = false\r\n    } catch (error) {\r\n      console.error('Failed to save progress:', error)\r\n      setState(prev => ({ ...prev, isSaving: false }))\r\n      toast.error('Failed to save progress. Your changes may not be saved.')\r\n    } finally {\r\n      isSavingRef.current = false\r\n    }\r\n  }, [state.formData, state.completedSteps, state.submissionId])\r\n\r\n  // Keep saveProgressRef updated with latest saveProgress\r\n  useEffect(() => {\r\n    saveProgressRef.current = saveProgress\r\n  }, [saveProgress])\r\n\r\n  // Go to specific step - BUG FIX 4.1: Add feedback when step blocked\r\n  const goToStep = useCallback((step: number) => {\r\n    if (visibleSteps.includes(step)) {\r\n      setState(prev => ({ ...prev, currentStep: step }))\r\n    } else {\r\n      toast.error('This step is not available')\r\n    }\r\n  }, [visibleSteps])\r\n\r\n  // Next step - BUG FIX 2.2: Use functional setState to avoid race conditions\r\n  const nextStep = useCallback(async (): Promise<boolean> => {\r\n    // Validate current step\r\n    const { valid, errors } = await validateCurrentStep()\r\n    if (!valid) {\r\n      // Show specific error messages instead of generic message\r\n      const errorSummary = errors.slice(0, 3).join(', ') + (errors.length > 3 ? ` (+${errors.length - 3} more)` : '')\r\n      toast.error('Please complete all required fields', {\r\n        description: errorSummary\r\n      })\r\n      return false\r\n    }\r\n\r\n    // Mark current step as completed and move to next in single state update\r\n    // to avoid race condition between separate setState calls\r\n    const currentVisibleSteps = getVisibleSteps(state.formData)\r\n    const currentIdx = currentVisibleSteps.indexOf(state.currentStep)\r\n\r\n    setState(prev => {\r\n      const newCompleted = new Set(prev.completedSteps)\r\n      newCompleted.add(prev.currentStep)\r\n\r\n      // Calculate next step from current state\r\n      const latestVisibleSteps = getVisibleSteps(prev.formData)\r\n      const latestIdx = latestVisibleSteps.indexOf(prev.currentStep)\r\n      const nextIdx = latestIdx + 1\r\n      const nextStep = nextIdx < latestVisibleSteps.length\r\n        ? latestVisibleSteps[nextIdx]\r\n        : prev.currentStep\r\n\r\n      return {\r\n        ...prev,\r\n        completedSteps: newCompleted,\r\n        currentStep: nextStep,\r\n      }\r\n    })\r\n\r\n    // Save progress after state update\r\n    await saveProgress()\r\n\r\n    return true\r\n  }, [validateCurrentStep, saveProgress, state.formData, state.currentStep])\r\n\r\n  // Previous step\r\n  const previousStep = useCallback(() => {\r\n    if (currentStepIndex > 0) {\r\n      setState(prev => ({\r\n        ...prev,\r\n        currentStep: visibleSteps[currentStepIndex - 1],\r\n      }))\r\n    }\r\n  }, [currentStepIndex, visibleSteps])\r\n\r\n  // Submit questionnaire - BUG FIX 1.3: Filter hidden steps data\r\n  const submitQuestionnaire = useCallback(async (): Promise<boolean> => {\r\n    // BUG FIX: Clear auto-save timer and mark as submitted to prevent race condition\r\n    // that could overwrite 'pending' status back to 'draft'\r\n    if (autoSaveTimeoutRef.current) {\r\n      clearTimeout(autoSaveTimeoutRef.current)\r\n      autoSaveTimeoutRef.current = null\r\n    }\r\n\r\n    // Get current visible steps\r\n    const currentVisibleSteps = getVisibleSteps(state.formData)\r\n\r\n    // Validate all visible steps\r\n    for (let i = 0; i < currentVisibleSteps.length; i++) {\r\n      const step = currentVisibleSteps[i]\r\n      const userFacingStepNumber = i + 1 // What the user sees (1-7 for non-US, 1-10 for US)\r\n      const stepKey = `step${step}` as keyof KYCQuestionnaireData\r\n      const stepData = state.formData[stepKey]\r\n      const schema = getStepSchema(step)\r\n\r\n      if (schema) {\r\n        try {\r\n          await schema.parseAsync(stepData || getStepDefaults(step))\r\n        } catch (error: any) {\r\n          // Extract specific validation errors from Zod\r\n          const errorMessages = error.issues?.map((e: any) => e.message) || []\r\n          const errorSummary = errorMessages.slice(0, 3).join(', ') + (errorMessages.length > 3 ? ` (+${errorMessages.length - 3} more)` : '')\r\n\r\n          toast.error(`Please complete Step ${userFacingStepNumber}: ${STEP_CONFIG[step - 1].title}`, {\r\n            description: errorSummary || 'Please fill in all required fields'\r\n          })\r\n          goToStep(step)\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    setState(prev => ({ ...prev, isSaving: true }))\r\n\r\n    try {\r\n      // BUG FIX 1.3: Only include data for visible steps (security fix)\r\n      // This prevents leaking US Person step data when user later changes answer to 'no'\r\n      const filteredFormData: Record<string, unknown> = {}\r\n      for (const step of currentVisibleSteps) {\r\n        const stepKey = `step${step}` as keyof KYCQuestionnaireData\r\n        if (state.formData[stepKey]) {\r\n          filteredFormData[stepKey] = state.formData[stepKey]\r\n        }\r\n      }\r\n\r\n      const payload = {\r\n        document_type: 'questionnaire',\r\n        custom_label: 'KYC Compliance Questionnaire',\r\n        metadata: {\r\n          ...filteredFormData,\r\n          lastCompletedStep: 10,\r\n          wizardVersion: '2.0',\r\n          submittedAt: new Date().toISOString(),\r\n        },\r\n        status: 'pending',\r\n      }\r\n\r\n      let response: Response\r\n\r\n      if (state.submissionId) {\r\n        response = await fetch(`/api/investors/me/kyc-submissions/${state.submissionId}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      } else {\r\n        response = await fetch('/api/investors/me/kyc-submissions', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to submit questionnaire')\r\n      }\r\n\r\n      // Mark as submitted to prevent any future auto-saves\r\n      isSubmittedRef.current = true\r\n\r\n      setState(prev => ({\r\n        ...prev,\r\n        isSaving: false,\r\n        lastSavedAt: new Date(),\r\n      }))\r\n\r\n      toast.success('Questionnaire submitted successfully!')\r\n      onComplete?.()\r\n      return true\r\n    } catch (error) {\r\n      console.error('Failed to submit:', error)\r\n      setState(prev => ({ ...prev, isSaving: false }))\r\n      toast.error('Failed to submit questionnaire')\r\n      return false\r\n    }\r\n  }, [state.formData, state.submissionId, goToStep, onComplete])\r\n\r\n  const value: WizardContextValue = {\r\n    // Convenience accessors\r\n    currentStep: state.currentStep,\r\n    formData: state.formData,\r\n    isLoading: state.isLoading,\r\n    isSaving: state.isSaving,\r\n    lastSavedAt: state.lastSavedAt,\r\n    // State and computed values\r\n    state,\r\n    visibleSteps,\r\n    totalVisibleSteps,\r\n    currentStepIndex,\r\n    progress,\r\n    currentStepConfig,\r\n    isFirstStep,\r\n    isLastStep,\r\n    canGoNext,\r\n    canGoBack,\r\n    // Actions\r\n    goToStep,\r\n    nextStep,\r\n    previousStep,\r\n    updateStepData,\r\n    validateCurrentStep,\r\n    saveProgress,\r\n    submitQuestionnaire,\r\n    getStepData,\r\n  }\r\n\r\n  return (\r\n    <WizardContext.Provider value={value}>\r\n      {children}\r\n    </WizardContext.Provider>\r\n  )\r\n}\r\n\r\n// ============================================================================\r\n// Hook\r\n// ============================================================================\r\nexport function useWizard() {\r\n  const context = useContext(WizardContext)\r\n  if (!context) {\r\n    throw new Error('useWizard must be used within a WizardProvider')\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1245, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/WizardProgress.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { CheckCircle2, Circle, Loader2 } from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from './WizardContext'\r\nimport { STEP_CONFIG } from '../schemas/kyc-questionnaire-schema'\r\n\r\nexport function WizardProgress() {\r\n  const {\r\n    state,\r\n    visibleSteps,\r\n    currentStepIndex,\r\n    progress,\r\n    goToStep,\r\n  } = useWizard()\r\n\r\n  return (\r\n    <div className=\"w-full space-y-4\">\r\n      {/* Progress Bar */}\r\n      <div className=\"relative\">\r\n        <div className=\"flex justify-between text-sm text-muted-foreground mb-2\">\r\n          <span className=\"font-medium\">\r\n            Step {currentStepIndex + 1} of {visibleSteps.length}\r\n          </span>\r\n          <span className=\"flex items-center gap-2\">\r\n            {state.isSaving && (\r\n              <>\r\n                <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n                <span>Saving...</span>\r\n              </>\r\n            )}\r\n            {!state.isSaving && state.lastSavedAt && (\r\n              <span className=\"text-emerald-500 flex items-center gap-1\">\r\n                <CheckCircle2 className=\"h-3 w-3\" />\r\n                Saved\r\n              </span>\r\n            )}\r\n            <span>{progress}% complete</span>\r\n          </span>\r\n        </div>\r\n\r\n        {/* Animated Progress Bar */}\r\n        <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full transition-all duration-500 ease-out\"\r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Step Indicators */}\r\n      <div className=\"flex justify-between gap-1 pt-2\">\r\n        {visibleSteps.map((stepNum, index) => {\r\n          const config = STEP_CONFIG[stepNum - 1]\r\n          const isCompleted = state.completedSteps.has(stepNum)\r\n          const isCurrent = stepNum === state.currentStep\r\n          const isAccessible = isCompleted || index <= currentStepIndex + 1\r\n\r\n          return (\r\n            <button\r\n              key={stepNum}\r\n              onClick={() => isAccessible && goToStep(stepNum)}\r\n              disabled={!isAccessible}\r\n              className={cn(\r\n                'group flex flex-col items-center flex-1 transition-all duration-200',\r\n                isAccessible ? 'cursor-pointer' : 'cursor-not-allowed opacity-50'\r\n              )}\r\n              title={config.title}\r\n            >\r\n              {/* Step Circle */}\r\n              <div\r\n                className={cn(\r\n                  'w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300',\r\n                  isCompleted && 'bg-emerald-500 text-white',\r\n                  isCurrent && !isCompleted && 'bg-emerald-100 border-2 border-emerald-500 text-emerald-600',\r\n                  !isCompleted && !isCurrent && 'bg-gray-100 text-gray-500 border border-gray-200',\r\n                  isAccessible && !isCurrent && 'group-hover:scale-110'\r\n                )}\r\n              >\r\n                {isCompleted ? (\r\n                  <CheckCircle2 className=\"h-4 w-4\" />\r\n                ) : (\r\n                  <span className=\"text-xs font-medium\">{index + 1}</span>\r\n                )}\r\n              </div>\r\n\r\n              {/* Step Label - Hidden on mobile */}\r\n              <span\r\n                className={cn(\r\n                  'hidden md:block text-[10px] mt-1 text-center max-w-[60px] truncate transition-colors',\r\n                  isCurrent ? 'text-emerald-600 font-medium' : 'text-gray-500'\r\n                )}\r\n              >\r\n                {config.title}\r\n              </span>\r\n            </button>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS;;IACd,MAAM,EACJ,KAAK,EACL,YAAY,EACZ,gBAAgB,EAChB,QAAQ,EACR,QAAQ,EACT,GAAG,IAAA,2LAAS;IAEb,qBACE,oNAAC;QAAI,WAAU;;0BAEb,oNAAC;gBAAI,WAAU;;kCACb,oNAAC;wBAAI,WAAU;;0CACb,oNAAC;gCAAK,WAAU;;oCAAc;oCACtB,mBAAmB;oCAAE;oCAAK,aAAa,MAAM;;;;;;;0CAErD,oNAAC;gCAAK,WAAU;;oCACb,MAAM,QAAQ,kBACb;;0DACE,oNAAC,sPAAO;gDAAC,WAAU;;;;;;0DACnB,oNAAC;0DAAK;;;;;;;;oCAGT,CAAC,MAAM,QAAQ,IAAI,MAAM,WAAW,kBACnC,oNAAC;wCAAK,WAAU;;0DACd,oNAAC,+PAAY;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAIxC,oNAAC;;4CAAM;4CAAS;;;;;;;;;;;;;;;;;;;kCAKpB,oNAAC;wBAAI,WAAU;kCACb,cAAA,oNAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,SAAS,CAAC,CAAC;4BAAC;;;;;;;;;;;;;;;;;0BAMrC,oNAAC;gBAAI,WAAU;0BACZ,aAAa,GAAG,CAAC,CAAC,SAAS;oBAC1B,MAAM,SAAS,8MAAW,CAAC,UAAU,EAAE;oBACvC,MAAM,cAAc,MAAM,cAAc,CAAC,GAAG,CAAC;oBAC7C,MAAM,YAAY,YAAY,MAAM,WAAW;oBAC/C,MAAM,eAAe,eAAe,SAAS,mBAAmB;oBAEhE,qBACE,oNAAC;wBAEC,SAAS,IAAM,gBAAgB,SAAS;wBACxC,UAAU,CAAC;wBACX,WAAW,IAAA,mJAAE,EACX,uEACA,eAAe,mBAAmB;wBAEpC,OAAO,OAAO,KAAK;;0CAGnB,oNAAC;gCACC,WAAW,IAAA,mJAAE,EACX,qFACA,eAAe,6BACf,aAAa,CAAC,eAAe,+DAC7B,CAAC,eAAe,CAAC,aAAa,oDAC9B,gBAAgB,CAAC,aAAa;0CAG/B,4BACC,oNAAC,+PAAY;oCAAC,WAAU;;;;;yDAExB,oNAAC;oCAAK,WAAU;8CAAuB,QAAQ;;;;;;;;;;;0CAKnD,oNAAC;gCACC,WAAW,IAAA,mJAAE,EACX,wFACA,YAAY,iCAAiC;0CAG9C,OAAO,KAAK;;;;;;;uBAjCV;;;;;gBAqCX;;;;;;;;;;;;AAIR;GA9FgB;;QAOV,2LAAS;;;KAPC"}},
    {"offset": {"line": 1446, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/WizardNavigation.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { ChevronLeft, ChevronRight, Save, Loader2, Send } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { useWizard } from './WizardContext'\r\n\r\ninterface WizardNavigationProps {\r\n  onSubmit?: () => Promise<void>\r\n  isSubmitting?: boolean\r\n}\r\n\r\nexport function WizardNavigation({ onSubmit, isSubmitting }: WizardNavigationProps = {}) {\r\n  const {\r\n    isSaving,\r\n    isFirstStep,\r\n    isLastStep,\r\n    canGoBack,\r\n    nextStep,\r\n    previousStep,\r\n    saveProgress,\r\n    submitQuestionnaire,\r\n  } = useWizard()\r\n\r\n  const loading = isSubmitting ?? isSaving\r\n\r\n  const handleNext = async () => {\r\n    await nextStep()\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    if (onSubmit) {\r\n      await onSubmit()\r\n    } else {\r\n      await submitQuestionnaire()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-zinc-700\">\r\n      {/* Left Side - Back & Save */}\r\n      <div className=\"flex items-center gap-3\">\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={previousStep}\r\n          disabled={!canGoBack || loading}\r\n          className=\"gap-2 border-gray-300 dark:border-zinc-600 hover:bg-gray-50 dark:hover:bg-zinc-800\"\r\n        >\r\n          <ChevronLeft className=\"h-4 w-4\" />\r\n          Back\r\n        </Button>\r\n\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          onClick={() => saveProgress()}\r\n          disabled={loading}\r\n          className=\"gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800\"\r\n        >\r\n          {isSaving ? (\r\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          ) : (\r\n            <Save className=\"h-4 w-4\" />\r\n          )}\r\n          Save Progress\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Right Side - Next / Submit */}\r\n      <div>\r\n        {isLastStep ? (\r\n          <Button\r\n            type=\"button\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n            className=\"gap-2 bg-emerald-600 hover:bg-emerald-700\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                Submitting...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Send className=\"h-4 w-4\" />\r\n                Submit Questionnaire\r\n              </>\r\n            )}\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            type=\"button\"\r\n            onClick={handleNext}\r\n            disabled={loading}\r\n            className=\"gap-2 bg-emerald-600 hover:bg-emerald-700\"\r\n          >\r\n            {loading ? (\r\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n            ) : (\r\n              <>\r\n                Continue\r\n                <ChevronRight className=\"h-4 w-4\" />\r\n              </>\r\n            )}\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;AAJA;;;;AAWO,SAAS,iBAAiB,EAAE,QAAQ,EAAE,YAAY,EAAyB,GAAG,CAAC,CAAC;;IACrF,MAAM,EACJ,QAAQ,EACR,WAAW,EACX,UAAU,EACV,SAAS,EACT,QAAQ,EACR,YAAY,EACZ,YAAY,EACZ,mBAAmB,EACpB,GAAG,IAAA,2LAAS;IAEb,MAAM,UAAU,gBAAgB;IAEhC,MAAM,aAAa;QACjB,MAAM;IACR;IAEA,MAAM,eAAe;QACnB,IAAI,UAAU;YACZ,MAAM;QACR,OAAO;YACL,MAAM;QACR;IACF;IAEA,qBACE,oNAAC;QAAI,WAAU;;0BAEb,oNAAC;gBAAI,WAAU;;kCACb,oNAAC,sKAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,SAAS;wBACT,UAAU,CAAC,aAAa;wBACxB,WAAU;;0CAEV,oNAAC,6PAAW;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAIrC,oNAAC,sKAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,SAAS,IAAM;wBACf,UAAU;wBACV,WAAU;;4BAET,yBACC,oNAAC,sPAAO;gCAAC,WAAU;;;;;qDAEnB,oNAAC,oOAAI;gCAAC,WAAU;;;;;;4BAChB;;;;;;;;;;;;;0BAMN,oNAAC;0BACE,2BACC,oNAAC,sKAAM;oBACL,MAAK;oBACL,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,wBACC;;0CACE,oNAAC,sPAAO;gCAAC,WAAU;;;;;;4BAAyB;;qDAI9C;;0CACE,oNAAC,oOAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;yCAMlC,oNAAC,sKAAM;oBACL,MAAK;oBACL,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,wBACC,oNAAC,sPAAO;wBAAC,WAAU;;;;;6CAEnB;;4BAAE;0CAEA,oNAAC,gQAAY;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;AAQxC;GAlGgB;;QAUV,2LAAS;;;KAVC"}},
    {"offset": {"line": 1626, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step1AboutYou.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step1Schema, Step1Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\n\r\nexport function Step1AboutYou() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step1')\r\n\r\n  const form = useForm<Step1Data>({\r\n    resolver: zodResolver(step1Schema),\r\n    defaultValues: existingData || (getStepDefaults(1) as Step1Data),\r\n  })\r\n\r\n  // Sync form changes to wizard context\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step1', values as Step1Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Tell us about yourself</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          We need some basic information to get started\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          {/* Name & DOB */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"fullName\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Full Legal Name</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"John Smith\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"dateOfBirth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Date of Birth</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"date\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Nationality & Residence */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"nationality\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Nationality</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. British\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"countryOfResidence\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Country of Residence</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. United Kingdom\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Address */}\r\n          <FormField\r\n            control={form.control}\r\n            name=\"residentialAddress\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Residential Address</FormLabel>\r\n                <FormControl>\r\n                  <Input placeholder=\"Street address\" {...field} />\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"city\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>City</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"London\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"postalCode\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Postal Code</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"SW1A 1AA\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Contact */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"email\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Email Address</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"email\" placeholder=\"john@example.com\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"phone\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Phone Number</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"tel\" placeholder=\"+44 20 1234 5678\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Tax Info */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"taxResidencyCountry\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tax Residency Country</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. United Kingdom\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"taxIdNumber\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tax ID Number (Optional)</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"National Insurance / SSN / TIN\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2248, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step2InvestmentType.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step2Schema,\r\n  Step2Data,\r\n  investmentTypeOptions,\r\n  getStepDefaults,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { User, Users, Building2, Briefcase, HelpCircle, Landmark } from 'lucide-react'\r\n\r\nconst icons: Record<string, React.ReactNode> = {\r\n  individual: <User className=\"h-5 w-5\" />,\r\n  joint: <Users className=\"h-5 w-5\" />,\r\n  trust: <Landmark className=\"h-5 w-5\" />,\r\n  corporation: <Building2 className=\"h-5 w-5\" />,\r\n  partnership: <Briefcase className=\"h-5 w-5\" />,\r\n  other: <HelpCircle className=\"h-5 w-5\" />,\r\n}\r\n\r\nexport function Step2InvestmentType() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step2')\r\n\r\n  const form = useForm<Step2Data>({\r\n    resolver: zodResolver(step2Schema),\r\n    defaultValues: existingData || (getStepDefaults(2) as Step2Data),\r\n  })\r\n\r\n  const selectedType = form.watch('investmentType')\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step2', values as Step2Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">How will you be investing?</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Select the type of investment account\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"investmentType\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormControl>\r\n                  <RadioGroup\r\n                    onValueChange={field.onChange}\r\n                    value={field.value}\r\n                    className=\"grid gap-3 md:grid-cols-2 lg:grid-cols-3\"\r\n                  >\r\n                    {investmentTypeOptions.map((option) => (\r\n                      <label\r\n                        key={option.value}\r\n                        className={cn(\r\n                          'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                          field.value === option.value\r\n                            ? 'border-emerald-500 bg-emerald-50 dark:bg-emerald-950'\r\n                            : 'border-border hover:border-muted-foreground/50 bg-card'\r\n                        )}\r\n                      >\r\n                        <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                        <div\r\n                          className={cn(\r\n                            'p-2 rounded-lg',\r\n                            field.value === option.value\r\n                              ? 'bg-emerald-500 text-white'\r\n                              : 'bg-muted text-muted-foreground'\r\n                          )}\r\n                        >\r\n                          {icons[option.value]}\r\n                        </div>\r\n                        <span className=\"font-medium\">{option.label}</span>\r\n                      </label>\r\n                    ))}\r\n                  </RadioGroup>\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {selectedType === 'other' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentTypeOther\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Please specify</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"Describe your investment type\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAvBA;;;;;;;;;;;AAyBA,MAAM,QAAyC;IAC7C,0BAAY,oNAAC,oOAAI;QAAC,WAAU;;;;;;IAC5B,qBAAO,oNAAC,uOAAK;QAAC,WAAU;;;;;;IACxB,qBAAO,oNAAC,gPAAQ;QAAC,WAAU;;;;;;IAC3B,2BAAa,oNAAC,uPAAS;QAAC,WAAU;;;;;;IAClC,2BAAa,oNAAC,mPAAS;QAAC,WAAU;;;;;;IAClC,qBAAO,oNAAC,sQAAU;QAAC,WAAU;;;;;;AAC/B;AAEO,SAAS;;IACd,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG,IAAA,2LAAS;IACjD,MAAM,eAAe,YAAY;IAEjC,MAAM,OAAO,IAAA,mMAAO,EAAY;QAC9B,UAAU,IAAA,uMAAW,EAAC,8MAAW;QACjC,eAAe,gBAAiB,IAAA,kNAAe,EAAC;IAClD;IAEA,MAAM,eAAe,KAAK,KAAK,CAAC;IAEhC,IAAA,iMAAS;yCAAC;YACR,MAAM,eAAe,KAAK,KAAK;8DAAC,CAAC;oBAC/B,eAAe,SAAS;gBAC1B;;YACA;iDAAO,IAAM,aAAa,WAAW;;QACvC;wCAAG;QAAC;QAAM;KAAe;IAEzB,qBACE,oNAAC;QAAI,WAAU;;0BACb,oNAAC;gBAAI,WAAU;;kCACb,oNAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,oNAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAK5C,oNAAC,kKAAI;gBAAE,GAAG,IAAI;0BACZ,cAAA,oNAAC;oBAAI,WAAU;;sCACb,oNAAC,uKAAS;4BACR,SAAS,KAAK,OAAO;4BACrB,MAAK;4BACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,oNAAC,sKAAQ;;sDACP,oNAAC,yKAAW;sDACV,cAAA,oNAAC,kLAAU;gDACT,eAAe,MAAM,QAAQ;gDAC7B,OAAO,MAAM,KAAK;gDAClB,WAAU;0DAET,wNAAqB,CAAC,GAAG,CAAC,CAAC,uBAC1B,oNAAC;wDAEC,WAAW,IAAA,mJAAE,EACX,iFACA,MAAM,KAAK,KAAK,OAAO,KAAK,GACxB,yDACA;;0EAGN,oNAAC,sLAAc;gEAAC,OAAO,OAAO,KAAK;gEAAE,WAAU;;;;;;0EAC/C,oNAAC;gEACC,WAAW,IAAA,mJAAE,EACX,kBACA,MAAM,KAAK,KAAK,OAAO,KAAK,GACxB,8BACA;0EAGL,KAAK,CAAC,OAAO,KAAK,CAAC;;;;;;0EAEtB,oNAAC;gEAAK,WAAU;0EAAe,OAAO,KAAK;;;;;;;uDAnBtC,OAAO,KAAK;;;;;;;;;;;;;;;sDAwBzB,oNAAC,yKAAW;;;;;;;;;;;;;;;;wBAKjB,iBAAiB,yBAChB,oNAAC,uKAAS;4BACR,SAAS,KAAK,OAAO;4BACrB,MAAK;4BACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,oNAAC,sKAAQ;;sDACP,oNAAC,uKAAS;sDAAC;;;;;;sDACX,oNAAC,yKAAW;sDACV,cAAA,oNAAC,oKAAK;gDAAC,aAAY;gDAAiC,GAAG,KAAK;;;;;;;;;;;sDAE9D,oNAAC,yKAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS9B;GA1FgB;;QAC0B,2LAAS;QAGpC,mMAAO;;;KAJN"}},
    {"offset": {"line": 2527, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step3WellInformed.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step3Schema,\r\n  Step3Data,\r\n  wellInformedBasisOptions,\r\n  getStepDefaults,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { CheckCircle2, HelpCircle, XCircle } from 'lucide-react'\r\n\r\nexport function Step3WellInformed() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step3')\r\n\r\n  const form = useForm<Step3Data>({\r\n    resolver: zodResolver(step3Schema),\r\n    defaultValues: existingData || (getStepDefaults(3) as Step3Data),\r\n  })\r\n\r\n  const selectedStatus = form.watch('isWellInformed')\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step3', values as Step3Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Investor Status</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Are you a well-informed or professional investor?\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"isWellInformed\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Do you qualify as a well-informed investor?</FormLabel>\r\n                <FormDescription>\r\n                  A well-informed investor typically has significant investment experience,\r\n                  a net worth exceeding â‚¬1,250,000, or is advised by a regulated professional.\r\n                </FormDescription>\r\n                <FormControl>\r\n                  <RadioGroup\r\n                    onValueChange={field.onChange}\r\n                    value={field.value}\r\n                    className=\"grid gap-3 md:grid-cols-3 mt-4\"\r\n                  >\r\n                    {[\r\n                      { value: 'yes', label: 'Yes', icon: CheckCircle2, color: 'emerald' },\r\n                      { value: 'no', label: 'No', icon: XCircle, color: 'red' },\r\n                      { value: 'unsure', label: \"I'm not sure\", icon: HelpCircle, color: 'amber' },\r\n                    ].map((option) => {\r\n                      const Icon = option.icon\r\n                      const isSelected = field.value === option.value\r\n                      return (\r\n                        <label\r\n                          key={option.value}\r\n                          className={cn(\r\n                            'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                            isSelected\r\n                              ? `border-${option.color}-500 bg-${option.color}-500/10`\r\n                              : 'border-border hover:border-muted-foreground/50',\r\n                            isSelected && option.value === 'yes' && 'border-emerald-500 bg-emerald-500/10',\r\n                            isSelected && option.value === 'no' && 'border-red-500 bg-red-500/10',\r\n                            isSelected && option.value === 'unsure' && 'border-amber-500 bg-amber-500/10'\r\n                          )}\r\n                        >\r\n                          <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                          <Icon\r\n                            className={cn(\r\n                              'h-5 w-5',\r\n                              isSelected && option.value === 'yes' && 'text-emerald-500',\r\n                              isSelected && option.value === 'no' && 'text-red-500',\r\n                              isSelected && option.value === 'unsure' && 'text-amber-500',\r\n                              !isSelected && 'text-slate-500'\r\n                            )}\r\n                          />\r\n                          <span className=\"font-medium\">{option.label}</span>\r\n                        </label>\r\n                      )\r\n                    })}\r\n                  </RadioGroup>\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {(selectedStatus === 'yes' || selectedStatus === 'unsure') && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"wellInformedBasis\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>On what basis? (Select all that apply)</FormLabel>\r\n                  <div className=\"grid gap-3 mt-3\">\r\n                    {wellInformedBasisOptions.map((option) => (\r\n                      <label\r\n                        key={option.value}\r\n                        className={cn(\r\n                          'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n                          field.value?.includes(option.value)\r\n                            ? 'border-emerald-500 bg-emerald-500/10'\r\n                            : 'border-border hover:border-muted-foreground/50'\r\n                        )}\r\n                      >\r\n                        <Checkbox\r\n                          checked={field.value?.includes(option.value)}\r\n                          onCheckedChange={(checked) => {\r\n                            const current = field.value || []\r\n                            if (checked) {\r\n                              field.onChange([...current, option.value])\r\n                            } else {\r\n                              field.onChange(current.filter((v: string) => v !== option.value))\r\n                            }\r\n                          }}\r\n                        />\r\n                        <span>{option.label}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n\r\n          {selectedStatus === 'yes' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"wellInformedEvidence\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Additional details (Optional)</FormLabel>\r\n                  <FormDescription>\r\n                    Provide any additional information supporting your investor status\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Years of experience, relevant certifications, regulated advisor details...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2874, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step4Compliance.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step4Schema, Step4Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { AlertTriangle, Flag } from 'lucide-react'\r\n\r\nfunction YesNoField({\r\n  control,\r\n  name,\r\n  label,\r\n  description,\r\n  detailsName,\r\n  detailsLabel,\r\n  showDetails,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n  description?: string\r\n  detailsName?: string\r\n  detailsLabel?: string\r\n  showDetails?: boolean\r\n}) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <FormField\r\n        control={control}\r\n        name={name}\r\n        render={({ field }) => (\r\n          <FormItem>\r\n            <div className=\"flex items-start justify-between gap-4\">\r\n              <div className=\"flex-1\">\r\n                <FormLabel className=\"text-base\">{label}</FormLabel>\r\n                {description && (\r\n                  <FormDescription className=\"mt-1\">{description}</FormDescription>\r\n                )}\r\n              </div>\r\n              <FormControl>\r\n                <RadioGroup\r\n                  onValueChange={field.onChange}\r\n                  value={field.value}\r\n                  className=\"flex gap-4\"\r\n                >\r\n                  {['yes', 'no'].map((value) => (\r\n                    <label\r\n                      key={value}\r\n                      className={cn(\r\n                        'px-4 py-2 rounded-lg border cursor-pointer transition-all capitalize',\r\n                        field.value === value\r\n                          ? value === 'yes'\r\n                            ? 'border-amber-500 bg-amber-50 dark:bg-amber-950 text-amber-600 dark:text-amber-400'\r\n                            : 'border-emerald-500 bg-emerald-50 dark:bg-emerald-950 text-emerald-600 dark:text-emerald-400'\r\n                          : 'border-border hover:border-muted-foreground/50 bg-card'\r\n                      )}\r\n                    >\r\n                      <RadioGroupItem value={value} className=\"sr-only\" />\r\n                      {value}\r\n                    </label>\r\n                  ))}\r\n                </RadioGroup>\r\n              </FormControl>\r\n            </div>\r\n            <FormMessage />\r\n          </FormItem>\r\n        )}\r\n      />\r\n\r\n      {showDetails && detailsName && (\r\n        <FormField\r\n          control={control}\r\n          name={detailsName}\r\n          render={({ field }) => (\r\n            <FormItem className=\"pl-4 border-l-2 border-border\">\r\n              <FormLabel>{detailsLabel || 'Please provide details'}</FormLabel>\r\n              <FormControl>\r\n                <Textarea\r\n                  placeholder=\"Provide relevant details...\"\r\n                  className=\"min-h-[80px]\"\r\n                  {...field}\r\n                />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Step4Compliance() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step4')\r\n\r\n  const form = useForm<Step4Data>({\r\n    resolver: zodResolver(step4Schema),\r\n    defaultValues: existingData || (getStepDefaults(4) as Step4Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step4', values as Step4Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Compliance Declarations</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Required regulatory questions\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-8\">\r\n          {/* PEP Section */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\r\n              Political Exposure\r\n            </h3>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isPEP\"\r\n              label=\"Are you a Politically Exposed Person (PEP)?\"\r\n              description=\"A PEP is someone entrusted with a prominent public function\"\r\n              detailsName=\"pepDetails\"\r\n              detailsLabel=\"Please provide details about your role\"\r\n              showDetails={watchedValues.isPEP === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isRelatedToPEP\"\r\n              label=\"Are you related to or closely associated with a PEP?\"\r\n              detailsName=\"relatedPEPDetails\"\r\n              detailsLabel=\"Please describe the relationship\"\r\n              showDetails={watchedValues.isRelatedToPEP === 'yes'}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Sanctions & Legal */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg\">Legal & Regulatory Status</h3>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isSanctioned\"\r\n              label=\"Are you subject to any sanctions or restrictions?\"\r\n              detailsName=\"sanctionedDetails\"\r\n              showDetails={watchedValues.isSanctioned === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"hasCriminalRecord\"\r\n              label=\"Do you have any criminal convictions related to financial matters?\"\r\n              detailsName=\"criminalDetails\"\r\n              showDetails={watchedValues.hasCriminalRecord === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isUnderInvestigation\"\r\n              label=\"Are you currently under any regulatory investigation?\"\r\n              detailsName=\"investigationDetails\"\r\n              showDetails={watchedValues.isUnderInvestigation === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"hasBankruptcy\"\r\n              label=\"Have you been declared bankrupt or insolvent?\"\r\n              detailsName=\"bankruptcyDetails\"\r\n              showDetails={watchedValues.hasBankruptcy === 'yes'}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* US Person */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Flag className=\"h-5 w-5\" />\r\n              US Person Status\r\n            </h3>\r\n\r\n            <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n              <AlertDescription>\r\n                Your answer here determines if additional US-specific compliance steps are required.\r\n              </AlertDescription>\r\n            </Alert>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isUSPerson\"\r\n              label=\"Are you a US Person for tax purposes?\"\r\n              description=\"Includes US citizens, green card holders, and those with substantial US presence\"\r\n            />\r\n\r\n            {watchedValues.isUSPerson === 'yes' && (\r\n              <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n                <AlertDescription>\r\n                  Additional US compliance steps will be shown next.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Source of Funds & Wealth */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg\">Source of Funds</h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"sourceOfFunds\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>What is the source of funds for this investment?</FormLabel>\r\n                  <FormDescription>\r\n                    Describe the origin of funds (e.g., salary, business income, inheritance)\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Savings from employment income over the past 10 years...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"sourceOfWealth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>What is your overall source of wealth?</FormLabel>\r\n                  <FormDescription>\r\n                    Describe how you accumulated your wealth\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Built and sold a technology company, professional career...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3454, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step5USPerson.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step5Schema, Step5Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { Flag, Info } from 'lucide-react'\r\n\r\nfunction YesNoQuestion({\r\n  control,\r\n  name,\r\n  label,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n}) {\r\n  return (\r\n    <FormField\r\n      control={control}\r\n      name={name}\r\n      render={({ field }) => (\r\n        <FormItem className=\"flex items-center justify-between gap-4 p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors\">\r\n          <FormLabel className=\"flex-1 cursor-pointer font-normal\">\r\n            {label}\r\n          </FormLabel>\r\n          <FormControl>\r\n            <RadioGroup\r\n              onValueChange={field.onChange}\r\n              value={field.value}\r\n              className=\"flex gap-2\"\r\n            >\r\n              {['yes', 'no'].map((value) => (\r\n                <label\r\n                  key={value}\r\n                  className={cn(\r\n                    'px-3 py-1.5 rounded text-sm font-medium cursor-pointer transition-all capitalize',\r\n                    field.value === value\r\n                      ? value === 'yes'\r\n                        ? 'bg-amber-500 text-white'\r\n                        : 'bg-emerald-500 text-white'\r\n                      : 'bg-muted text-muted-foreground hover:bg-muted/80'\r\n                  )}\r\n                >\r\n                  <RadioGroupItem value={value} className=\"sr-only\" />\r\n                  {value}\r\n                </label>\r\n              ))}\r\n            </RadioGroup>\r\n          </FormControl>\r\n          <FormMessage />\r\n        </FormItem>\r\n      )}\r\n    />\r\n  )\r\n}\r\n\r\nexport function Step5USPerson() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step5')\r\n\r\n  const form = useForm<Step5Data>({\r\n    resolver: zodResolver(step5Schema),\r\n    defaultValues: existingData || (getStepDefaults(5) as Step5Data),\r\n  })\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step5', values as Step5Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <Flag className=\"h-6 w-6\" />\r\n          US Person Definition\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Detailed US tax residency questions\r\n        </p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n        <Info className=\"h-4 w-4\" />\r\n        <AlertTitle>Why we ask these questions</AlertTitle>\r\n        <AlertDescription>\r\n          Under Regulation S and FATCA, we need to determine your US Person status for tax and regulatory compliance purposes.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-3\">\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isUSCitizen\"\r\n            label=\"Are you a US citizen?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isUSResident\"\r\n            label=\"Are you a US resident alien (permanent resident)?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSGreenCard\"\r\n            label=\"Do you hold a US Green Card?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasSubstantialUSPresence\"\r\n            label=\"Have you spent 183+ days in the US in the past 3 years?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSMailingAddress\"\r\n            label=\"Do you have a US mailing address?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSPhoneNumber\"\r\n            label=\"Do you have a US phone number?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSBankAccount\"\r\n            label=\"Do you have a US bank account?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSPowerOfAttorney\"\r\n            label=\"Have you granted power of attorney to someone in the US?\"\r\n          />\r\n\r\n          <FormField\r\n            control={form.control}\r\n            name=\"usConnectionDetails\"\r\n            render={({ field }) => (\r\n              <FormItem className=\"pt-4\">\r\n                <FormLabel>Additional US Connection Details (Optional)</FormLabel>\r\n                <FormDescription>\r\n                  Provide any additional context about your US connections\r\n                </FormDescription>\r\n                <FormControl>\r\n                  <Textarea\r\n                    placeholder=\"Any other relevant information about your US connections...\"\r\n                    className=\"min-h-[80px]\"\r\n                    {...field}\r\n                  />\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3807, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step6OfferDetails.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step6Schema, Step6Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { FileText, CheckCircle2, DollarSign, Briefcase, Building2, HelpCircle } from 'lucide-react'\r\n\r\nconst accreditationOptions = [\r\n  { value: 'income', label: 'Annual income over $200K (or $300K joint)', icon: DollarSign },\r\n  { value: 'net_worth', label: 'Net worth over $1M (excluding primary residence)', icon: Building2 },\r\n  { value: 'professional', label: 'Licensed professional (Series 7, 65, or 82)', icon: Briefcase },\r\n  { value: 'entity', label: 'Entity with $5M+ in assets', icon: Building2 },\r\n  { value: 'other', label: 'Other qualifying criteria', icon: HelpCircle },\r\n] as const\r\n\r\nfunction YesNoQuestion({\r\n  control,\r\n  name,\r\n  label,\r\n  description,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n  description?: string\r\n}) {\r\n  return (\r\n    <FormField\r\n      control={control}\r\n      name={name}\r\n      render={({ field }) => (\r\n        <FormItem className=\"p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors\">\r\n          <div className=\"flex items-start justify-between gap-4\">\r\n            <div className=\"flex-1\">\r\n              <FormLabel className=\"text-base font-medium\">{label}</FormLabel>\r\n              {description && (\r\n                <FormDescription className=\"mt-1\">{description}</FormDescription>\r\n              )}\r\n            </div>\r\n            <FormControl>\r\n              <RadioGroup\r\n                onValueChange={field.onChange}\r\n                value={field.value}\r\n                className=\"flex gap-2\"\r\n              >\r\n                {['yes', 'no'].map((value) => (\r\n                  <label\r\n                    key={value}\r\n                    className={cn(\r\n                      'px-4 py-2 rounded-lg text-sm font-medium cursor-pointer transition-all capitalize',\r\n                      field.value === value\r\n                        ? value === 'yes'\r\n                          ? 'bg-emerald-500 text-white'\r\n                          : 'bg-red-500 text-white'\r\n                        : 'bg-muted text-muted-foreground hover:bg-muted/80'\r\n                    )}\r\n                  >\r\n                    <RadioGroupItem value={value} className=\"sr-only\" />\r\n                    {value}\r\n                  </label>\r\n                ))}\r\n              </RadioGroup>\r\n            </FormControl>\r\n          </div>\r\n          <FormMessage />\r\n        </FormItem>\r\n      )}\r\n    />\r\n  )\r\n}\r\n\r\nexport function Step6OfferDetails() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step6')\r\n\r\n  const form = useForm<Step6Data>({\r\n    resolver: zodResolver(step6Schema),\r\n    defaultValues: existingData || (getStepDefaults(6) as Step6Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step6', values as Step6Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <FileText className=\"h-6 w-6\" />\r\n          Offer Details\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Accreditation and offering acknowledgments\r\n        </p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n        <FileText className=\"h-4 w-4\" />\r\n        <AlertTitle>US Investor Requirements</AlertTitle>\r\n        <AlertDescription>\r\n          Under Regulation D, we need to verify your accredited investor status before you can participate in this offering.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isAccreditedInvestor\"\r\n            label=\"Are you an accredited investor?\"\r\n            description=\"Under SEC Regulation D, accredited investors meet specific income or net worth thresholds\"\r\n          />\r\n\r\n          {watchedValues.isAccreditedInvestor === 'yes' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"accreditationBasis\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>On what basis do you qualify?</FormLabel>\r\n                  <FormDescription>\r\n                    Select the criteria that best describes your accredited investor status\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"grid gap-3 mt-3\"\r\n                    >\r\n                      {accreditationOptions.map((option) => {\r\n                        const Icon = option.icon\r\n                        return (\r\n                          <label\r\n                            key={option.value}\r\n                            className={cn(\r\n                              'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                              field.value === option.value\r\n                                ? 'border-emerald-500 bg-emerald-500/10'\r\n                                : 'border-border hover:border-muted-foreground/50'\r\n                            )}\r\n                          >\r\n                            <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                            <div\r\n                              className={cn(\r\n                                'p-2 rounded-lg',\r\n                                field.value === option.value\r\n                                  ? 'bg-emerald-500 text-white'\r\n                                  : 'bg-muted text-muted-foreground'\r\n                              )}\r\n                            >\r\n                              <Icon className=\"h-4 w-4\" />\r\n                            </div>\r\n                            <span className=\"font-medium\">{option.label}</span>\r\n                            {field.value === option.value && (\r\n                              <CheckCircle2 className=\"h-5 w-5 text-emerald-500 ml-auto\" />\r\n                            )}\r\n                          </label>\r\n                        )\r\n                      })}\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasReceivedOfferingMaterials\"\r\n            label=\"Have you received and reviewed the offering materials?\"\r\n            description=\"Including the Private Placement Memorandum (PPM) and related documents\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"understandsRestrictions\"\r\n            label=\"Do you understand the restrictions on transfer and resale?\"\r\n            description=\"Securities offered under Regulation D cannot be freely resold and are subject to holding periods\"\r\n          />\r\n\r\n          {watchedValues.hasReceivedOfferingMaterials === 'yes' &&\r\n            watchedValues.understandsRestrictions === 'yes' && (\r\n              <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n                <AlertDescription>\r\n                  Great! You've confirmed receipt of materials and understanding of restrictions.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4245, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step7USCompliance.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step7Schema, Step7Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { FileCheck, AlertTriangle, CheckCircle2 } from 'lucide-react'\r\n\r\nconst complianceItems = [\r\n  {\r\n    name: 'acknowledgesFATCA',\r\n    title: 'FATCA Acknowledgment',\r\n    description:\r\n      'I acknowledge that as a US Person, I am subject to the Foreign Account Tax Compliance Act (FATCA) and may be required to provide additional documentation.',\r\n    icon: 'ðŸ›ï¸',\r\n  },\r\n  {\r\n    name: 'willProvideW9',\r\n    title: 'Form W-9 Requirement',\r\n    description:\r\n      'I agree to provide a completed Form W-9 (Request for Taxpayer Identification Number and Certification) if required.',\r\n    icon: 'ðŸ“‹',\r\n  },\r\n  {\r\n    name: 'understandsWithholding',\r\n    title: 'Withholding Requirements',\r\n    description:\r\n      'I understand that backup withholding may apply at a rate of 24% if I fail to provide a valid TIN or fail to certify my status.',\r\n    icon: 'ðŸ’°',\r\n  },\r\n  {\r\n    name: 'certifiesTaxCompliance',\r\n    title: 'Tax Compliance Certification',\r\n    description:\r\n      'I certify that I am in compliance with my US federal and state tax obligations, or I am working with a tax advisor to resolve any outstanding issues.',\r\n    icon: 'âœ…',\r\n  },\r\n  {\r\n    name: 'acknowledgesReportingObligations',\r\n    title: 'Reporting Obligations',\r\n    description:\r\n      'I acknowledge that the fund may be required to report my investment information to the IRS and/or relevant tax authorities under FATCA and other applicable laws.',\r\n    icon: 'ðŸ“Š',\r\n  },\r\n] as const\r\n\r\nexport function Step7USCompliance() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step7')\r\n\r\n  const form = useForm<Step7Data>({\r\n    resolver: zodResolver(step7Schema),\r\n    defaultValues: existingData || (getStepDefaults(7) as Step7Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n  const allChecked = complianceItems.every(\r\n    (item) => watchedValues[item.name as keyof Step7Data] === true\r\n  )\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step7', values as Step7Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <FileCheck className=\"h-6 w-6\" />\r\n          US Tax Compliance\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">FATCA and reporting requirements</p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n        <AlertTriangle className=\"h-4 w-4\" />\r\n        <AlertTitle>Important Tax Information</AlertTitle>\r\n        <AlertDescription>\r\n          As a US Person, you are subject to specific tax reporting requirements. Please review and\r\n          acknowledge each item below.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-4\">\r\n          {complianceItems.map((item) => (\r\n            <FormField\r\n              key={item.name}\r\n              control={form.control}\r\n              name={item.name as keyof Step7Data}\r\n              render={({ field }) => (\r\n                <FormItem\r\n                  className={cn(\r\n                    'p-4 rounded-lg border-2 transition-all',\r\n                    field.value\r\n                      ? 'border-emerald-500/50 bg-emerald-500/5'\r\n                      : 'border-border hover:border-muted-foreground/50'\r\n                  )}\r\n                >\r\n                  <div className=\"flex items-start gap-4\">\r\n                    <FormControl>\r\n                      <Checkbox\r\n                        checked={field.value as boolean}\r\n                        onCheckedChange={field.onChange}\r\n                        className=\"mt-1\"\r\n                      />\r\n                    </FormControl>\r\n                    <div className=\"flex-1\">\r\n                      <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                        <span>{item.icon}</span>\r\n                        {item.title}\r\n                        {field.value && (\r\n                          <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto\" />\r\n                        )}\r\n                      </FormLabel>\r\n                      <p className=\"text-sm text-muted-foreground mt-1\">{item.description}</p>\r\n                    </div>\r\n                  </div>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          ))}\r\n        </div>\r\n      </Form>\r\n\r\n      {allChecked && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertDescription>\r\n            All US tax compliance acknowledgments completed. You may proceed to the next step.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;AAlBA;;;;;;;;;;;AAoBA,MAAM,kBAAkB;IACtB;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;CACD;AAEM,SAAS;;IACd,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG,IAAA,2LAAS;IACjD,MAAM,eAAe,YAAY;IAEjC,MAAM,OAAO,IAAA,mMAAO,EAAY;QAC9B,UAAU,IAAA,uMAAW,EAAC,8MAAW;QACjC,eAAe,gBAAiB,IAAA,kNAAe,EAAC;IAClD;IAEA,MAAM,gBAAgB,KAAK,KAAK;IAChC,MAAM,aAAa,gBAAgB,KAAK,CACtC,CAAC,OAAS,aAAa,CAAC,KAAK,IAAI,CAAoB,KAAK;IAG5D,IAAA,iMAAS;uCAAC;YACR,MAAM,eAAe,KAAK,KAAK;4DAAC,CAAC;oBAC/B,eAAe,SAAS;gBAC1B;;YACA;+CAAO,IAAM,aAAa,WAAW;;QACvC;sCAAG;QAAC;QAAM;KAAe;IAEzB,qBACE,oNAAC;QAAI,WAAU;;0BACb,oNAAC;gBAAI,WAAU;;kCACb,oNAAC;wBAAG,WAAU;;0CACZ,oNAAC,uPAAS;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGnC,oNAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAG5C,oNAAC,oKAAK;gBAAC,WAAU;;kCACf,oNAAC,mQAAa;wBAAC,WAAU;;;;;;kCACzB,oNAAC,yKAAU;kCAAC;;;;;;kCACZ,oNAAC,+KAAgB;kCAAC;;;;;;;;;;;;0BAMpB,oNAAC,kKAAI;gBAAE,GAAG,IAAI;0BACZ,cAAA,oNAAC;oBAAI,WAAU;8BACZ,gBAAgB,GAAG,CAAC,CAAC,qBACpB,oNAAC,uKAAS;4BAER,SAAS,KAAK,OAAO;4BACrB,MAAM,KAAK,IAAI;4BACf,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,oNAAC,sKAAQ;oCACP,WAAW,IAAA,mJAAE,EACX,0CACA,MAAM,KAAK,GACP,2CACA;;sDAGN,oNAAC;4CAAI,WAAU;;8DACb,oNAAC,yKAAW;8DACV,cAAA,oNAAC,0KAAQ;wDACP,SAAS,MAAM,KAAK;wDACpB,iBAAiB,MAAM,QAAQ;wDAC/B,WAAU;;;;;;;;;;;8DAGd,oNAAC;oDAAI,WAAU;;sEACb,oNAAC,uKAAS;4DAAC,WAAU;;8EACnB,oNAAC;8EAAM,KAAK,IAAI;;;;;;gEACf,KAAK,KAAK;gEACV,MAAM,KAAK,kBACV,oNAAC,+PAAY;oEAAC,WAAU;;;;;;;;;;;;sEAG5B,oNAAC;4DAAE,WAAU;sEAAsC,KAAK,WAAW;;;;;;;;;;;;;;;;;;sDAGvE,oNAAC,yKAAW;;;;;;;;;;;2BA/BX,KAAK,IAAI;;;;;;;;;;;;;;;YAuCrB,4BACC,oNAAC,oKAAK;gBAAC,WAAU;;kCACf,oNAAC,+PAAY;wBAAC,WAAU;;;;;;kCACxB,oNAAC,+KAAgB;kCAAC;;;;;;;;;;;;;;;;;;AAO5B;GA7FgB;;QAC0B,2LAAS;QAGpC,mMAAO;;;KAJN"}},
    {"offset": {"line": 4546, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step8Suitability.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step8Schema,\r\n  Step8Data,\r\n  getStepDefaults,\r\n  educationLevelOptions,\r\n  employmentStatusOptions,\r\n  incomeRangeOptions,\r\n  netWorthRangeOptions,\r\n  investmentObjectiveOptions,\r\n  riskToleranceOptions,\r\n  timeHorizonOptions,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { TrendingUp, GraduationCap, Briefcase, DollarSign, Target, Clock } from 'lucide-react'\r\n\r\nconst alternativeInvestmentOptions = [\r\n  { value: 'private_equity', label: 'Private Equity' },\r\n  { value: 'venture_capital', label: 'Venture Capital' },\r\n  { value: 'hedge_funds', label: 'Hedge Funds' },\r\n  { value: 'real_estate', label: 'Real Estate (non-REIT)' },\r\n  { value: 'commodities', label: 'Commodities' },\r\n  { value: 'structured_products', label: 'Structured Products' },\r\n  { value: 'cryptocurrency', label: 'Cryptocurrency' },\r\n]\r\n\r\nfunction RadioOptionGroup({\r\n  field,\r\n  options,\r\n  columns = 2,\r\n}: {\r\n  field: any\r\n  options: readonly { value: string; label: string }[]\r\n  columns?: number\r\n}) {\r\n  return (\r\n    <RadioGroup\r\n      onValueChange={field.onChange}\r\n      value={field.value}\r\n      className={cn('grid gap-3 mt-2', columns === 3 ? 'md:grid-cols-3' : 'md:grid-cols-2')}\r\n    >\r\n      {options.map((option) => (\r\n        <label\r\n          key={option.value}\r\n          className={cn(\r\n            'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n            field.value === option.value\r\n              ? 'border-emerald-500 bg-emerald-500/10'\r\n              : 'border-border hover:border-muted-foreground/50'\r\n          )}\r\n        >\r\n          <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n          <div\r\n            className={cn(\r\n              'w-4 h-4 rounded-full border-2 flex items-center justify-center',\r\n              field.value === option.value ? 'border-emerald-500' : 'border-slate-500'\r\n            )}\r\n          >\r\n            {field.value === option.value && (\r\n              <div className=\"w-2 h-2 rounded-full bg-emerald-500\" />\r\n            )}\r\n          </div>\r\n          <span className=\"text-sm\">{option.label}</span>\r\n        </label>\r\n      ))}\r\n    </RadioGroup>\r\n  )\r\n}\r\n\r\nexport function Step8Suitability() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step8')\r\n\r\n  const form = useForm<Step8Data>({\r\n    resolver: zodResolver(step8Schema),\r\n    defaultValues: existingData || (getStepDefaults(8) as Step8Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step8', values as Step8Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <TrendingUp className=\"h-6 w-6\" />\r\n          Investment Suitability\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">Help us understand your financial profile</p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-8\">\r\n          {/* Education & Employment */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <GraduationCap className=\"h-5 w-5 text-blue-500\" />\r\n              Education & Employment\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"educationLevel\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Highest level of education</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={educationLevelOptions} columns={3} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"employmentStatus\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Employment status</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={employmentStatusOptions} columns={3} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {(watchedValues.employmentStatus === 'employed' ||\r\n              watchedValues.employmentStatus === 'self_employed') && (\r\n              <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"occupation\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Occupation</FormLabel>\r\n                      <FormControl>\r\n                        <Input placeholder=\"e.g., Software Engineer\" {...field} />\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"employer\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>\r\n                        {watchedValues.employmentStatus === 'self_employed'\r\n                          ? 'Business Name'\r\n                          : 'Employer'}\r\n                      </FormLabel>\r\n                      <FormControl>\r\n                        <Input placeholder=\"Company name\" {...field} />\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"yearsInvestingExperience\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Years of investment experience</FormLabel>\r\n                  <FormControl>\r\n                    <Input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"60\"\r\n                      placeholder=\"e.g., 10\"\r\n                      {...field}\r\n                      className=\"max-w-[150px]\"\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Financial Profile */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <DollarSign className=\"h-5 w-5 text-emerald-500\" />\r\n              Financial Profile\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"annualIncome\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Annual income</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={incomeRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"netWorth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Total net worth (excluding primary residence)</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={netWorthRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"liquidNetWorth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Liquid net worth (cash and readily convertible assets)</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={netWorthRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Investment Preferences */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Target className=\"h-5 w-5 text-purple-500\" />\r\n              Investment Preferences\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentObjective\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Primary investment objective</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={investmentObjectiveOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"riskTolerance\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Risk tolerance</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={riskToleranceOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentHorizon\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel className=\"flex items-center gap-2\">\r\n                    <Clock className=\"h-4 w-4\" />\r\n                    Investment time horizon\r\n                  </FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={timeHorizonOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Alternative Investment Experience */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Briefcase className=\"h-5 w-5 text-amber-500\" />\r\n              Alternative Investment Experience\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"percentageOfNetWorthToInvest\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Percentage of net worth you plan to invest in this offering</FormLabel>\r\n                  <FormDescription>\r\n                    Enter a percentage between 1 and 100\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <div className=\"flex items-center gap-2 max-w-[150px]\">\r\n                      <Input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        max=\"100\"\r\n                        placeholder=\"e.g., 5\"\r\n                        {...field}\r\n                      />\r\n                      <span className=\"text-muted-foreground\">%</span>\r\n                    </div>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"hasAlternativeInvestmentExperience\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>\r\n                    Do you have prior experience with alternative investments?\r\n                  </FormLabel>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"flex gap-4 mt-2\"\r\n                    >\r\n                      {['yes', 'no'].map((value) => (\r\n                        <label\r\n                          key={value}\r\n                          className={cn(\r\n                            'px-6 py-2 rounded-lg border cursor-pointer transition-all capitalize',\r\n                            field.value === value\r\n                              ? 'border-emerald-500 bg-emerald-500/10'\r\n                              : 'border-border hover:border-muted-foreground/50'\r\n                          )}\r\n                        >\r\n                          <RadioGroupItem value={value} className=\"sr-only\" />\r\n                          {value}\r\n                        </label>\r\n                      ))}\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {watchedValues.hasAlternativeInvestmentExperience === 'yes' && (\r\n              <FormField\r\n                control={form.control}\r\n                name=\"alternativeInvestmentTypes\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Which types of alternative investments? (Select all that apply)</FormLabel>\r\n                    <div className=\"grid gap-2 mt-2 md:grid-cols-2\">\r\n                      {alternativeInvestmentOptions.map((option) => (\r\n                        <label\r\n                          key={option.value}\r\n                          className={cn(\r\n                            'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n                            field.value?.includes(option.value)\r\n                              ? 'border-emerald-500 bg-emerald-500/10'\r\n                              : 'border-border hover:border-muted-foreground/50'\r\n                          )}\r\n                        >\r\n                          <Checkbox\r\n                            checked={field.value?.includes(option.value)}\r\n                            onCheckedChange={(checked) => {\r\n                              const current = field.value || []\r\n                              if (checked) {\r\n                                field.onChange([...current, option.value])\r\n                              } else {\r\n                                field.onChange(current.filter((v: string) => v !== option.value))\r\n                              }\r\n                            }}\r\n                          />\r\n                          <span className=\"text-sm\">{option.label}</span>\r\n                        </label>\r\n                      ))}\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5574, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step9WaiverRisk.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step9Schema, Step9Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { AlertTriangle, CheckCircle2, Shield, Lock, FileText, DollarSign, Scale, Receipt, BookOpen, Users } from 'lucide-react'\r\n\r\nconst riskItems = [\r\n  {\r\n    name: 'acknowledgesIlliquidity',\r\n    title: 'Illiquidity Risk',\r\n    description:\r\n      'I understand that interests in the Fund are illiquid and there is no public market for these securities. I may not be able to sell my investment or access my capital for an extended period.',\r\n    icon: Lock,\r\n  },\r\n  {\r\n    name: 'acknowledgesLossRisk',\r\n    title: 'Capital Loss Risk',\r\n    description:\r\n      'I understand that investing in alternative investments involves significant risks, including the potential loss of my entire investment.',\r\n    icon: DollarSign,\r\n  },\r\n  {\r\n    name: 'acknowledgesNoGuarantees',\r\n    title: 'No Guarantees',\r\n    description:\r\n      'I understand that there are no guarantees of returns or distributions, and past performance is not indicative of future results.',\r\n    icon: AlertTriangle,\r\n  },\r\n  {\r\n    name: 'acknowledgesLimitedInfo',\r\n    title: 'Limited Information',\r\n    description:\r\n      'I understand that I may receive limited information about the underlying investments and that the Fund is not subject to the same disclosure requirements as public companies.',\r\n    icon: FileText,\r\n  },\r\n  {\r\n    name: 'acknowledgesNoRegulation',\r\n    title: 'Limited Regulatory Protection',\r\n    description:\r\n      'I understand that alternative investment funds are generally not registered with the SEC and do not receive the same regulatory protections as registered investment companies.',\r\n    icon: Shield,\r\n  },\r\n  {\r\n    name: 'acknowledgesConflicts',\r\n    title: 'Conflicts of Interest',\r\n    description:\r\n      'I understand that the Fund Manager and its affiliates may have conflicts of interest in managing the Fund, and I have reviewed the disclosure of potential conflicts.',\r\n    icon: Users,\r\n  },\r\n  {\r\n    name: 'acknowledgesTaxImplications',\r\n    title: 'Tax Implications',\r\n    description:\r\n      'I understand that this investment may have complex tax implications and I should consult with my own tax advisor regarding my specific situation.',\r\n    icon: Receipt,\r\n  },\r\n  {\r\n    name: 'acknowledgesFees',\r\n    title: 'Fees and Expenses',\r\n    description:\r\n      'I understand and accept the fee structure including management fees, performance fees, and other expenses that will reduce my returns.',\r\n    icon: Scale,\r\n  },\r\n  {\r\n    name: 'hasReadOfferingDocs',\r\n    title: 'Offering Documents Review',\r\n    description:\r\n      'I confirm that I have received, read, and understand the Private Placement Memorandum (PPM), Limited Partnership Agreement, and other offering documents.',\r\n    icon: BookOpen,\r\n  },\r\n  {\r\n    name: 'hasSoughtIndependentAdvice',\r\n    title: 'Independent Advice',\r\n    description:\r\n      'I confirm that I have had the opportunity to seek independent legal, tax, and financial advice regarding this investment.',\r\n    icon: Scale,\r\n  },\r\n] as const\r\n\r\nexport function Step9WaiverRisk() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step9')\r\n\r\n  const form = useForm<Step9Data>({\r\n    resolver: zodResolver(step9Schema),\r\n    defaultValues: existingData || (getStepDefaults(9) as Step9Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  // Calculate progress\r\n  const totalItems = riskItems.length\r\n  const checkedItems = riskItems.filter(\r\n    (item) => watchedValues[item.name as keyof Step9Data] === true\r\n  ).length\r\n  const progress = (checkedItems / totalItems) * 100\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step9', values as Step9Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <AlertTriangle className=\"h-6 w-6 text-amber-500\" />\r\n          Risk Acknowledgments\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Please review and acknowledge each risk factor\r\n        </p>\r\n      </div>\r\n\r\n      {/* Progress indicator */}\r\n      <div className=\"bg-muted p-4 rounded-lg space-y-2 border border-border\">\r\n        <div className=\"flex justify-between text-sm\">\r\n          <span className=\"text-muted-foreground\">Acknowledgment Progress</span>\r\n          <span className=\"font-medium\">\r\n            {checkedItems} of {totalItems} completed\r\n          </span>\r\n        </div>\r\n        <Progress value={progress} className=\"h-2\" />\r\n      </div>\r\n\r\n      <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n        <AlertTriangle className=\"h-4 w-4\" />\r\n        <AlertTitle>Important</AlertTitle>\r\n        <AlertDescription>\r\n          Please carefully read and acknowledge each item below. These acknowledgments confirm your\r\n          understanding of the risks associated with this investment.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-3\">\r\n          {riskItems.map((item, index) => {\r\n            const Icon = item.icon\r\n            return (\r\n              <FormField\r\n                key={item.name}\r\n                control={form.control}\r\n                name={item.name as keyof Step9Data}\r\n                render={({ field }) => (\r\n                  <FormItem\r\n                    className={cn(\r\n                      'p-4 rounded-lg border-2 transition-all bg-card',\r\n                      field.value\r\n                        ? 'border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950'\r\n                        : 'border-border hover:border-muted-foreground/50'\r\n                    )}\r\n                  >\r\n                    <div className=\"flex items-start gap-4\">\r\n                      <FormControl>\r\n                        <Checkbox\r\n                          checked={field.value as boolean}\r\n                          onCheckedChange={field.onChange}\r\n                          className=\"mt-1\"\r\n                        />\r\n                      </FormControl>\r\n                      <div className=\"flex-1\">\r\n                        <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                          <Icon\r\n                            className={cn(\r\n                              'h-4 w-4',\r\n                              field.value ? 'text-emerald-500' : 'text-muted-foreground'\r\n                            )}\r\n                          />\r\n                          <span className=\"text-xs text-muted-foreground mr-2\">\r\n                            {index + 1}.\r\n                          </span>\r\n                          {item.title}\r\n                          {field.value && (\r\n                            <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto flex-shrink-0\" />\r\n                          )}\r\n                        </FormLabel>\r\n                        <p className=\"text-sm text-muted-foreground mt-2 leading-relaxed\">\r\n                          {item.description}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            )\r\n          })}\r\n        </div>\r\n      </Form>\r\n\r\n      {checkedItems === totalItems && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertDescription>\r\n            All risk acknowledgments completed. You may proceed to the final step to review and sign.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5978, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step10ReviewSign.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step10Schema, Step10Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { PenTool, CheckCircle2, User, Briefcase, Shield, FileText, TrendingUp, AlertTriangle, Calendar } from 'lucide-react'\r\n\r\nconst certificationItems = [\r\n  {\r\n    name: 'certifiesAccuracy',\r\n    title: 'Accuracy Certification',\r\n    description:\r\n      'I certify that all information provided in this questionnaire is true, complete, and accurate to the best of my knowledge.',\r\n  },\r\n  {\r\n    name: 'certifiesNoOmissions',\r\n    title: 'No Material Omissions',\r\n    description:\r\n      'I certify that I have not omitted any material information that could affect the evaluation of my suitability for this investment.',\r\n  },\r\n  {\r\n    name: 'agreesToUpdates',\r\n    title: 'Update Obligation',\r\n    description:\r\n      'I agree to promptly notify VERSO Holdings of any material changes to the information provided herein.',\r\n  },\r\n  {\r\n    name: 'consentToProcessing',\r\n    title: 'Data Processing Consent',\r\n    description:\r\n      'I consent to the collection, processing, and storage of my personal information for compliance and regulatory purposes.',\r\n  },\r\n] as const\r\n\r\nfunction SummarySection({\r\n  icon: Icon,\r\n  title,\r\n  items,\r\n}: {\r\n  icon: React.ComponentType<{ className?: string }>\r\n  title: string\r\n  items: { label: string; value: string | undefined }[]\r\n}) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <h4 className=\"font-medium flex items-center gap-2 text-sm text-muted-foreground\">\r\n        <Icon className=\"h-4 w-4\" />\r\n        {title}\r\n      </h4>\r\n      <div className=\"grid gap-1 pl-6\">\r\n        {items\r\n          .filter((item) => item.value)\r\n          .map((item, idx) => (\r\n            <div key={idx} className=\"text-sm\">\r\n              <span className=\"text-muted-foreground\">{item.label}:</span>{' '}\r\n              <span className=\"font-medium\">{item.value}</span>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Step10ReviewSign() {\r\n  const { getStepData, updateStepData, formData } = useWizard()\r\n  const existingData = getStepData('step10')\r\n\r\n  const form = useForm<Step10Data>({\r\n    resolver: zodResolver(step10Schema),\r\n    defaultValues: existingData || (getStepDefaults(10) as Step10Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n  const allCertified = certificationItems.every(\r\n    (item) => watchedValues[item.name as keyof Step10Data] === true\r\n  )\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step10', values as Step10Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  // Extract summary data\r\n  const step1 = formData.step1\r\n  const step2 = formData.step2\r\n  const step4 = formData.step4\r\n  const step8 = formData.step8\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <PenTool className=\"h-6 w-6 text-emerald-500\" />\r\n          Review & Sign\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Final review and certification\r\n        </p>\r\n      </div>\r\n\r\n      {/* Summary Section */}\r\n      <div className=\"bg-muted p-6 rounded-lg space-y-6 border border-border\">\r\n        <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n          <FileText className=\"h-5 w-5\" />\r\n          Application Summary\r\n        </h3>\r\n\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <SummarySection\r\n            icon={User}\r\n            title=\"Personal Information\"\r\n            items={[\r\n              { label: 'Name', value: step1?.fullName },\r\n              { label: 'Email', value: step1?.email },\r\n              { label: 'Nationality', value: step1?.nationality },\r\n              { label: 'Country', value: step1?.countryOfResidence },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={Briefcase}\r\n            title=\"Investment Details\"\r\n            items={[\r\n              {\r\n                label: 'Type',\r\n                value:\r\n                  step2?.investmentType === 'other'\r\n                    ? step2?.investmentTypeOther\r\n                    : step2?.investmentType,\r\n              },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={Shield}\r\n            title=\"Compliance Status\"\r\n            items={[\r\n              { label: 'PEP Status', value: step4?.isPEP === 'yes' ? 'Yes' : 'No' },\r\n              { label: 'US Person', value: step4?.isUSPerson === 'yes' ? 'Yes' : 'No' },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={TrendingUp}\r\n            title=\"Investment Profile\"\r\n            items={[\r\n              { label: 'Risk Tolerance', value: step8?.riskTolerance },\r\n              { label: 'Time Horizon', value: step8?.investmentHorizon },\r\n              { label: 'Objective', value: step8?.investmentObjective },\r\n            ]}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <Separator />\r\n\r\n      {/* Certifications */}\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <h3 className=\"font-semibold text-lg mb-4\">Certifications</h3>\r\n            <div className=\"space-y-3\">\r\n              {certificationItems.map((item) => (\r\n                <FormField\r\n                  key={item.name}\r\n                  control={form.control}\r\n                  name={item.name as keyof Step10Data}\r\n                  render={({ field }) => (\r\n                    <FormItem\r\n                      className={cn(\r\n                        'p-4 rounded-lg border-2 transition-all bg-card',\r\n                        field.value\r\n                          ? 'border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950'\r\n                          : 'border-border hover:border-muted-foreground/50'\r\n                      )}\r\n                    >\r\n                      <div className=\"flex items-start gap-4\">\r\n                        <FormControl>\r\n                          <Checkbox\r\n                            checked={field.value as boolean}\r\n                            onCheckedChange={field.onChange}\r\n                            className=\"mt-1\"\r\n                          />\r\n                        </FormControl>\r\n                        <div className=\"flex-1\">\r\n                          <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                            {item.title}\r\n                            {field.value && (\r\n                              <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto\" />\r\n                            )}\r\n                          </FormLabel>\r\n                          <p className=\"text-sm text-muted-foreground mt-1\">\r\n                            {item.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Signature Section */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <PenTool className=\"h-5 w-5 text-emerald-500\" />\r\n              Electronic Signature\r\n            </h3>\r\n\r\n            <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n              <FileText className=\"h-4 w-4\" />\r\n              <AlertTitle>Electronic Signature Notice</AlertTitle>\r\n              <AlertDescription>\r\n                By typing your name below, you are providing an electronic signature that is legally\r\n                equivalent to a handwritten signature under applicable law.\r\n              </AlertDescription>\r\n            </Alert>\r\n\r\n            <div className=\"grid gap-4 md:grid-cols-2\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"signatureName\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Type your full legal name</FormLabel>\r\n                    <FormDescription>\r\n                      This serves as your electronic signature\r\n                    </FormDescription>\r\n                    <FormControl>\r\n                      <Input\r\n                        placeholder=\"John Smith\"\r\n                        className=\"font-serif text-lg\"\r\n                        {...field}\r\n                      />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"signatureDate\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"flex items-center gap-2\">\r\n                      <Calendar className=\"h-4 w-4\" />\r\n                      Signature Date\r\n                    </FormLabel>\r\n                    <FormDescription>Today&apos;s date</FormDescription>\r\n                    <FormControl>\r\n                      <Input type=\"date\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            </div>\r\n\r\n            {/* Signature Preview */}\r\n            {watchedValues.signatureName && (\r\n              <div className=\"p-4 bg-muted rounded-lg border border-border\">\r\n                <p className=\"text-xs text-muted-foreground mb-2\">Signature Preview</p>\r\n                <p className=\"font-serif text-2xl italic text-emerald-600 dark:text-emerald-400\">\r\n                  {watchedValues.signatureName}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Form>\r\n\r\n      {allCertified && watchedValues.signatureName && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertTitle>Ready to Submit</AlertTitle>\r\n          <AlertDescription>\r\n            All certifications completed and signature provided. Click &quot;Submit&quot; below to\r\n            finalize your application.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6668, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/KYCQuestionnaireWizard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Loader2, CheckCircle2, AlertTriangle, Sparkles } from 'lucide-react'\r\nimport { WizardProvider, useWizard } from './WizardContext'\r\nimport { WizardProgress } from './WizardProgress'\r\nimport { WizardNavigation } from './WizardNavigation'\r\nimport { Step1AboutYou } from './steps/Step1AboutYou'\r\nimport { Step2InvestmentType } from './steps/Step2InvestmentType'\r\nimport { Step3WellInformed } from './steps/Step3WellInformed'\r\nimport { Step4Compliance } from './steps/Step4Compliance'\r\nimport { Step5USPerson } from './steps/Step5USPerson'\r\nimport { Step6OfferDetails } from './steps/Step6OfferDetails'\r\nimport { Step7USCompliance } from './steps/Step7USCompliance'\r\nimport { Step8Suitability } from './steps/Step8Suitability'\r\nimport { Step9WaiverRisk } from './steps/Step9WaiverRisk'\r\nimport { Step10ReviewSign } from './steps/Step10ReviewSign'\r\nimport { STEP_CONFIG } from '../schemas/kyc-questionnaire-schema'\r\nimport type { KYCQuestionnaireData } from '../schemas/kyc-questionnaire-schema'\r\n\r\ninterface KYCQuestionnaireWizardProps {\r\n  initialData?: Partial<KYCQuestionnaireData>\r\n  submissionId?: string\r\n  onComplete?: () => void\r\n}\r\n\r\nfunction WizardContent({ onComplete }: { onComplete?: () => void }) {\r\n  const { currentStep, visibleSteps, formData, isLoading, submitQuestionnaire } = useWizard()\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [submitSuccess, setSubmitSuccess] = useState(false)\r\n  const [submitError, setSubmitError] = useState<string | null>(null)\r\n\r\n  // Map step number to component\r\n  const stepComponents: Record<number, React.ReactNode> = {\r\n    1: <Step1AboutYou />,\r\n    2: <Step2InvestmentType />,\r\n    3: <Step3WellInformed />,\r\n    4: <Step4Compliance />,\r\n    5: <Step5USPerson />,\r\n    6: <Step6OfferDetails />,\r\n    7: <Step7USCompliance />,\r\n    8: <Step8Suitability />,\r\n    9: <Step9WaiverRisk />,\r\n    10: <Step10ReviewSign />,\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    setIsSubmitting(true)\r\n    setSubmitError(null)\r\n\r\n    try {\r\n      const success = await submitQuestionnaire()\r\n      if (!success) {\r\n        // submitQuestionnaire already shows toast with specific error\r\n        // Just don't show success screen - keep user on the form\r\n        return\r\n      }\r\n      setSubmitSuccess(true)\r\n      onComplete?.()\r\n    } catch (error) {\r\n      setSubmitError(error instanceof Error ? error.message : 'Failed to submit questionnaire')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center space-y-4\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-emerald-500\" />\r\n          <p className=\"text-muted-foreground\">Loading your questionnaire...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (submitSuccess) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center space-y-6 max-w-md mx-auto\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"h-24 w-24 rounded-full bg-emerald-500/20 animate-pulse\" />\r\n            </div>\r\n            <CheckCircle2 className=\"h-16 w-16 mx-auto text-emerald-500 relative z-10\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n              <Sparkles className=\"h-5 w-5 text-amber-500\" />\r\n              Questionnaire Submitted!\r\n            </h2>\r\n            <p className=\"text-muted-foreground\">\r\n              Thank you for completing your KYC questionnaire. Our compliance team will review your\r\n              submission and contact you if any additional information is needed.\r\n            </p>\r\n          </div>\r\n          <Alert className=\"bg-blue-500/10 border-blue-500/30 text-left\">\r\n            <AlertTitle>What happens next?</AlertTitle>\r\n            <AlertDescription>\r\n              <ul className=\"list-disc list-inside space-y-1 mt-2\">\r\n                <li>Our team will review your submission within 2-3 business days</li>\r\n                <li>You may be asked to provide supporting documentation</li>\r\n                <li>You&apos;ll receive an email notification when your status is updated</li>\r\n              </ul>\r\n            </AlertDescription>\r\n          </Alert>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const currentStepConfig = STEP_CONFIG[currentStep - 1]\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Progress */}\r\n      <WizardProgress />\r\n\r\n      {/* Current Step Header */}\r\n      <div className=\"text-center py-2\">\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Step {visibleSteps.indexOf(currentStep) + 1} of {visibleSteps.length}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Error Alert */}\r\n      {submitError && (\r\n        <Alert className=\"bg-red-500/10 border-red-500/30\">\r\n          <AlertTriangle className=\"h-4 w-4\" />\r\n          <AlertTitle>Submission Error</AlertTitle>\r\n          <AlertDescription>{submitError}</AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Step Content */}\r\n      <Card className=\"border-border bg-card shadow-sm\">\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"min-h-[400px]\">{stepComponents[currentStep]}</div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Navigation */}\r\n      <WizardNavigation onSubmit={handleSubmit} isSubmitting={isSubmitting} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function KYCQuestionnaireWizard({\r\n  initialData,\r\n  submissionId,\r\n  onComplete,\r\n}: KYCQuestionnaireWizardProps) {\r\n  return (\r\n    <WizardProvider\r\n      initialData={initialData}\r\n      submissionId={submissionId}\r\n      onComplete={onComplete}\r\n    >\r\n      <WizardContent onComplete={onComplete} />\r\n    </WizardProvider>\r\n  )\r\n}\r\n\r\n// Compact version for embedding in profile page\r\nexport function KYCQuestionnaireCompact(props: KYCQuestionnaireWizardProps) {\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <KYCQuestionnaireWizard {...props} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7110, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/KYCQuestionnaire.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Loader2 } from 'lucide-react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { KYCQuestionnaireWizard } from './wizard/KYCQuestionnaireWizard'\r\nimport type { KYCQuestionnaireData } from './schemas/kyc-questionnaire-schema'\r\n\r\ninterface KYCQuestionnaireProps {\r\n  onComplete?: () => void\r\n}\r\n\r\nexport function KYCQuestionnaire({ onComplete }: KYCQuestionnaireProps) {\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [existingData, setExistingData] = useState<Partial<KYCQuestionnaireData> | null>(null)\r\n  const [submissionId, setSubmissionId] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    const loadExistingData = async () => {\r\n      setIsLoading(true)\r\n      try {\r\n        const profileResponse = await fetch('/api/investors/me/kyc-submissions')\r\n        if (profileResponse.ok) {\r\n          const profileData = await profileResponse.json()\r\n\r\n          // Find the latest questionnaire submission\r\n          const questionnaire = profileData.submissions?.find(\r\n            (s: any) => s.document_type === 'questionnaire' && s.metadata?.wizardVersion === '2.0'\r\n          )\r\n\r\n          if (questionnaire && questionnaire.metadata) {\r\n            setExistingData(questionnaire.metadata as Partial<KYCQuestionnaireData>)\r\n            setSubmissionId(questionnaire.id)\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load KYC data', error)\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n\r\n    loadExistingData()\r\n  }, [])\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"flex justify-center items-center min-h-[400px]\">\r\n          <div className=\"text-center space-y-4\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-muted-foreground\" />\r\n            <p className=\"text-muted-foreground\">Loading questionnaire...</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card className=\"border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-sm\">\r\n      <CardHeader className=\"border-b border-gray-100 dark:border-zinc-700 bg-gray-50/50 dark:bg-zinc-800/50\">\r\n        <CardTitle className=\"text-gray-900 dark:text-white\">Compliance Questionnaire</CardTitle>\r\n        <CardDescription className=\"text-gray-600 dark:text-gray-400\">\r\n          Complete the following compliance questionnaire to proceed with your KYC verification.\r\n          Your progress is saved automatically.\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"pt-6\">\r\n        <KYCQuestionnaireWizard\r\n          initialData={existingData || undefined}\r\n          submissionId={submissionId || undefined}\r\n          onComplete={onComplete}\r\n        />\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAYO,SAAS,iBAAiB,EAAE,UAAU,EAAyB;;IACpE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gMAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gMAAQ,EAAuC;IACvF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gMAAQ,EAAgB;IAEhE,IAAA,iMAAS;sCAAC;YACR,MAAM;+DAAmB;oBACvB,aAAa;oBACb,IAAI;wBACF,MAAM,kBAAkB,MAAM,MAAM;wBACpC,IAAI,gBAAgB,EAAE,EAAE;4BACtB,MAAM,cAAc,MAAM,gBAAgB,IAAI;4BAE9C,2CAA2C;4BAC3C,MAAM,gBAAgB,YAAY,WAAW,EAAE;+EAC7C,CAAC,IAAW,EAAE,aAAa,KAAK,mBAAmB,EAAE,QAAQ,EAAE,kBAAkB;;4BAGnF,IAAI,iBAAiB,cAAc,QAAQ,EAAE;gCAC3C,gBAAgB,cAAc,QAAQ;gCACtC,gBAAgB,cAAc,EAAE;4BAClC;wBACF;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,2BAA2B;oBAC3C,SAAU;wBACR,aAAa;oBACf;gBACF;;YAEA;QACF;qCAAG,EAAE;IAEL,IAAI,WAAW;QACb,qBACE,oNAAC,kKAAI;sBACH,cAAA,oNAAC,yKAAW;gBAAC,WAAU;0BACrB,cAAA,oNAAC;oBAAI,WAAU;;sCACb,oNAAC,sPAAO;4BAAC,WAAU;;;;;;sCACnB,oNAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;;;;;;;;;;;IAK/C;IAEA,qBACE,oNAAC,kKAAI;QAAC,WAAU;;0BACd,oNAAC,wKAAU;gBAAC,WAAU;;kCACpB,oNAAC,uKAAS;wBAAC,WAAU;kCAAgC;;;;;;kCACrD,oNAAC,6KAAe;wBAAC,WAAU;kCAAmC;;;;;;;;;;;;0BAKhE,oNAAC,yKAAW;gBAAC,WAAU;0BACrB,cAAA,oNAAC,iNAAsB;oBACrB,aAAa,gBAAgB;oBAC7B,cAAc,gBAAgB;oBAC9B,YAAY;;;;;;;;;;;;;;;;;AAKtB;GAhEgB;KAAA"}},
    {"offset": {"line": 7260, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/country-select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport { Check, ChevronsUpDown } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { Button } from '@/components/ui/button'\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/ui/command'\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover'\n\n// ISO 3166-1 Alpha-2 country codes with names\nexport const COUNTRIES = [\n  { code: 'AF', name: 'Afghanistan' },\n  { code: 'AL', name: 'Albania' },\n  { code: 'DZ', name: 'Algeria' },\n  { code: 'AD', name: 'Andorra' },\n  { code: 'AO', name: 'Angola' },\n  { code: 'AG', name: 'Antigua and Barbuda' },\n  { code: 'AR', name: 'Argentina' },\n  { code: 'AM', name: 'Armenia' },\n  { code: 'AU', name: 'Australia' },\n  { code: 'AT', name: 'Austria' },\n  { code: 'AZ', name: 'Azerbaijan' },\n  { code: 'BS', name: 'Bahamas' },\n  { code: 'BH', name: 'Bahrain' },\n  { code: 'BD', name: 'Bangladesh' },\n  { code: 'BB', name: 'Barbados' },\n  { code: 'BY', name: 'Belarus' },\n  { code: 'BE', name: 'Belgium' },\n  { code: 'BZ', name: 'Belize' },\n  { code: 'BJ', name: 'Benin' },\n  { code: 'BT', name: 'Bhutan' },\n  { code: 'BO', name: 'Bolivia' },\n  { code: 'BA', name: 'Bosnia and Herzegovina' },\n  { code: 'BW', name: 'Botswana' },\n  { code: 'BR', name: 'Brazil' },\n  { code: 'BN', name: 'Brunei' },\n  { code: 'BG', name: 'Bulgaria' },\n  { code: 'BF', name: 'Burkina Faso' },\n  { code: 'BI', name: 'Burundi' },\n  { code: 'CV', name: 'Cabo Verde' },\n  { code: 'KH', name: 'Cambodia' },\n  { code: 'CM', name: 'Cameroon' },\n  { code: 'CA', name: 'Canada' },\n  { code: 'CF', name: 'Central African Republic' },\n  { code: 'TD', name: 'Chad' },\n  { code: 'CL', name: 'Chile' },\n  { code: 'CN', name: 'China' },\n  { code: 'CO', name: 'Colombia' },\n  { code: 'KM', name: 'Comoros' },\n  { code: 'CG', name: 'Congo' },\n  { code: 'CR', name: 'Costa Rica' },\n  { code: 'HR', name: 'Croatia' },\n  { code: 'CU', name: 'Cuba' },\n  { code: 'CY', name: 'Cyprus' },\n  { code: 'CZ', name: 'Czech Republic' },\n  { code: 'DK', name: 'Denmark' },\n  { code: 'DJ', name: 'Djibouti' },\n  { code: 'DM', name: 'Dominica' },\n  { code: 'DO', name: 'Dominican Republic' },\n  { code: 'EC', name: 'Ecuador' },\n  { code: 'EG', name: 'Egypt' },\n  { code: 'SV', name: 'El Salvador' },\n  { code: 'GQ', name: 'Equatorial Guinea' },\n  { code: 'ER', name: 'Eritrea' },\n  { code: 'EE', name: 'Estonia' },\n  { code: 'SZ', name: 'Eswatini' },\n  { code: 'ET', name: 'Ethiopia' },\n  { code: 'FJ', name: 'Fiji' },\n  { code: 'FI', name: 'Finland' },\n  { code: 'FR', name: 'France' },\n  { code: 'GA', name: 'Gabon' },\n  { code: 'GM', name: 'Gambia' },\n  { code: 'GE', name: 'Georgia' },\n  { code: 'DE', name: 'Germany' },\n  { code: 'GH', name: 'Ghana' },\n  { code: 'GR', name: 'Greece' },\n  { code: 'GD', name: 'Grenada' },\n  { code: 'GT', name: 'Guatemala' },\n  { code: 'GN', name: 'Guinea' },\n  { code: 'GW', name: 'Guinea-Bissau' },\n  { code: 'GY', name: 'Guyana' },\n  { code: 'HT', name: 'Haiti' },\n  { code: 'HN', name: 'Honduras' },\n  { code: 'HK', name: 'Hong Kong' },\n  { code: 'HU', name: 'Hungary' },\n  { code: 'IS', name: 'Iceland' },\n  { code: 'IN', name: 'India' },\n  { code: 'ID', name: 'Indonesia' },\n  { code: 'IR', name: 'Iran' },\n  { code: 'IQ', name: 'Iraq' },\n  { code: 'IE', name: 'Ireland' },\n  { code: 'IL', name: 'Israel' },\n  { code: 'IT', name: 'Italy' },\n  { code: 'JM', name: 'Jamaica' },\n  { code: 'JP', name: 'Japan' },\n  { code: 'JO', name: 'Jordan' },\n  { code: 'KZ', name: 'Kazakhstan' },\n  { code: 'KE', name: 'Kenya' },\n  { code: 'KI', name: 'Kiribati' },\n  { code: 'KP', name: 'North Korea' },\n  { code: 'KR', name: 'South Korea' },\n  { code: 'KW', name: 'Kuwait' },\n  { code: 'KG', name: 'Kyrgyzstan' },\n  { code: 'LA', name: 'Laos' },\n  { code: 'LV', name: 'Latvia' },\n  { code: 'LB', name: 'Lebanon' },\n  { code: 'LS', name: 'Lesotho' },\n  { code: 'LR', name: 'Liberia' },\n  { code: 'LY', name: 'Libya' },\n  { code: 'LI', name: 'Liechtenstein' },\n  { code: 'LT', name: 'Lithuania' },\n  { code: 'LU', name: 'Luxembourg' },\n  { code: 'MO', name: 'Macau' },\n  { code: 'MG', name: 'Madagascar' },\n  { code: 'MW', name: 'Malawi' },\n  { code: 'MY', name: 'Malaysia' },\n  { code: 'MV', name: 'Maldives' },\n  { code: 'ML', name: 'Mali' },\n  { code: 'MT', name: 'Malta' },\n  { code: 'MH', name: 'Marshall Islands' },\n  { code: 'MR', name: 'Mauritania' },\n  { code: 'MU', name: 'Mauritius' },\n  { code: 'MX', name: 'Mexico' },\n  { code: 'FM', name: 'Micronesia' },\n  { code: 'MD', name: 'Moldova' },\n  { code: 'MC', name: 'Monaco' },\n  { code: 'MN', name: 'Mongolia' },\n  { code: 'ME', name: 'Montenegro' },\n  { code: 'MA', name: 'Morocco' },\n  { code: 'MZ', name: 'Mozambique' },\n  { code: 'MM', name: 'Myanmar' },\n  { code: 'NA', name: 'Namibia' },\n  { code: 'NR', name: 'Nauru' },\n  { code: 'NP', name: 'Nepal' },\n  { code: 'NL', name: 'Netherlands' },\n  { code: 'NZ', name: 'New Zealand' },\n  { code: 'NI', name: 'Nicaragua' },\n  { code: 'NE', name: 'Niger' },\n  { code: 'NG', name: 'Nigeria' },\n  { code: 'MK', name: 'North Macedonia' },\n  { code: 'NO', name: 'Norway' },\n  { code: 'OM', name: 'Oman' },\n  { code: 'PK', name: 'Pakistan' },\n  { code: 'PW', name: 'Palau' },\n  { code: 'PS', name: 'Palestine' },\n  { code: 'PA', name: 'Panama' },\n  { code: 'PG', name: 'Papua New Guinea' },\n  { code: 'PY', name: 'Paraguay' },\n  { code: 'PE', name: 'Peru' },\n  { code: 'PH', name: 'Philippines' },\n  { code: 'PL', name: 'Poland' },\n  { code: 'PT', name: 'Portugal' },\n  { code: 'QA', name: 'Qatar' },\n  { code: 'RO', name: 'Romania' },\n  { code: 'RU', name: 'Russia' },\n  { code: 'RW', name: 'Rwanda' },\n  { code: 'KN', name: 'Saint Kitts and Nevis' },\n  { code: 'LC', name: 'Saint Lucia' },\n  { code: 'VC', name: 'Saint Vincent and the Grenadines' },\n  { code: 'WS', name: 'Samoa' },\n  { code: 'SM', name: 'San Marino' },\n  { code: 'ST', name: 'Sao Tome and Principe' },\n  { code: 'SA', name: 'Saudi Arabia' },\n  { code: 'SN', name: 'Senegal' },\n  { code: 'RS', name: 'Serbia' },\n  { code: 'SC', name: 'Seychelles' },\n  { code: 'SL', name: 'Sierra Leone' },\n  { code: 'SG', name: 'Singapore' },\n  { code: 'SK', name: 'Slovakia' },\n  { code: 'SI', name: 'Slovenia' },\n  { code: 'SB', name: 'Solomon Islands' },\n  { code: 'SO', name: 'Somalia' },\n  { code: 'ZA', name: 'South Africa' },\n  { code: 'SS', name: 'South Sudan' },\n  { code: 'ES', name: 'Spain' },\n  { code: 'LK', name: 'Sri Lanka' },\n  { code: 'SD', name: 'Sudan' },\n  { code: 'SR', name: 'Suriname' },\n  { code: 'SE', name: 'Sweden' },\n  { code: 'CH', name: 'Switzerland' },\n  { code: 'SY', name: 'Syria' },\n  { code: 'TW', name: 'Taiwan' },\n  { code: 'TJ', name: 'Tajikistan' },\n  { code: 'TZ', name: 'Tanzania' },\n  { code: 'TH', name: 'Thailand' },\n  { code: 'TL', name: 'Timor-Leste' },\n  { code: 'TG', name: 'Togo' },\n  { code: 'TO', name: 'Tonga' },\n  { code: 'TT', name: 'Trinidad and Tobago' },\n  { code: 'TN', name: 'Tunisia' },\n  { code: 'TR', name: 'Turkey' },\n  { code: 'TM', name: 'Turkmenistan' },\n  { code: 'TV', name: 'Tuvalu' },\n  { code: 'UG', name: 'Uganda' },\n  { code: 'UA', name: 'Ukraine' },\n  { code: 'AE', name: 'United Arab Emirates' },\n  { code: 'GB', name: 'United Kingdom' },\n  { code: 'US', name: 'United States' },\n  { code: 'UY', name: 'Uruguay' },\n  { code: 'UZ', name: 'Uzbekistan' },\n  { code: 'VU', name: 'Vanuatu' },\n  { code: 'VA', name: 'Vatican City' },\n  { code: 'VE', name: 'Venezuela' },\n  { code: 'VN', name: 'Vietnam' },\n  { code: 'YE', name: 'Yemen' },\n  { code: 'ZM', name: 'Zambia' },\n  { code: 'ZW', name: 'Zimbabwe' },\n] as const\n\nexport type CountryCode = (typeof COUNTRIES)[number]['code']\n\nexport function getCountryName(code: string | null | undefined): string {\n  if (!code) return ''\n  const country = COUNTRIES.find((c) => c.code === code || c.name.toLowerCase() === code.toLowerCase())\n  return country?.name || code\n}\n\nexport function getCountryCode(nameOrCode: string | null | undefined): string {\n  if (!nameOrCode) return ''\n  const country = COUNTRIES.find(\n    (c) => c.code === nameOrCode || c.name.toLowerCase() === nameOrCode.toLowerCase()\n  )\n  return country?.code || nameOrCode\n}\n\ninterface CountrySelectProps {\n  value: string | null | undefined\n  onChange: (value: string) => void\n  placeholder?: string\n  disabled?: boolean\n  required?: boolean\n  className?: string\n}\n\nexport function CountrySelect({\n  value,\n  onChange,\n  placeholder = 'Select country...',\n  disabled = false,\n  required = false,\n  className,\n}: CountrySelectProps) {\n  const [open, setOpen] = React.useState(false)\n\n  const selectedCountry = COUNTRIES.find(\n    (c) => c.code === value || c.name.toLowerCase() === value?.toLowerCase()\n  )\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          aria-required={required}\n          disabled={disabled}\n          className={cn('w-full justify-between font-normal', className)}\n        >\n          {selectedCountry ? selectedCountry.name : placeholder}\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-[300px] p-0\" align=\"start\">\n        <Command>\n          <CommandInput placeholder=\"Search country...\" />\n          <CommandList>\n            <CommandEmpty>No country found.</CommandEmpty>\n            <CommandGroup className=\"max-h-[300px] overflow-auto\">\n              {COUNTRIES.map((country) => (\n                <CommandItem\n                  key={country.code}\n                  value={country.name}\n                  onSelect={() => {\n                    onChange(country.code)\n                    setOpen(false)\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      'mr-2 h-4 w-4',\n                      selectedCountry?.code === country.code ? 'opacity-100' : 'opacity-0'\n                    )}\n                  />\n                  {country.name}\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  )\n}\n\n// Nationality is often the same as country, but this provides a clearer label\nexport function NationalitySelect(props: CountrySelectProps) {\n  return <CountrySelect {...props} placeholder={props.placeholder || 'Select nationality...'} />\n}\n"],"names":[],"mappings":"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"}}]
}