{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,oNAAC;YACC,aAAU;YACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;KAbS;AAeT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,+JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,2GACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/format.ts"],"sourcesContent":["export const formatCurrency = (value: number | null | undefined, currency: string = 'USD') => {\n  if (!value) return '$0'\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency,\n    maximumFractionDigits: 0,\n  }).format(value)\n}\n\nexport const formatBps = (bps: number | null | undefined) => {\n  if (bps === null || bps === undefined) return '—'\n  return `${bps} bps`\n}\n\nexport const formatPercentage = (value: number | null | undefined) => {\n  if (!value) return '0%'\n  return `${(value * 100).toFixed(1)}%`\n}\n\nexport const formatDate = (value: string | Date | null | undefined) => {\n  if (!value) return '—'\n  const date = typeof value === 'string' ? new Date(value) : value\n  if (Number.isNaN(date?.getTime?.())) return '—'\n  // Use explicit locale to prevent hydration mismatch between server/client\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  })\n}\n\n\n\n\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,iBAAiB,CAAC,OAAkC,WAAmB,KAAK;IACvF,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,YAAY,CAAC;IACxB,IAAI,QAAQ,QAAQ,QAAQ,WAAW,OAAO;IAC9C,OAAO,GAAG,IAAI,IAAI,CAAC;AACrB;AAEO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AACvC;AAEO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,OAAO,OAAO,UAAU,WAAW,IAAI,KAAK,SAAS;IAC3D,IAAI,OAAO,KAAK,CAAC,MAAM,cAAc,OAAO;IAC5C,0EAA0E;IAC1E,OAAO,KAAK,kBAAkB,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Wrapper to provide stable ID for SSR hydration\nconst Tabs = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root>\n>(({ id, ...props }, ref) => {\n  const generatedId = React.useId()\n  return <TabsPrimitive.Root ref={ref} id={id ?? generatedId} {...props} />\n})\nTabs.displayName = \"Tabs\"\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;;;AALA;;;;AAOA,iDAAiD;AACjD,MAAM,qBAAO,GAAA,kMAAgB,SAG3B,CAAC,EAAE,EAAE,EAAE,GAAG,OAAO,EAAE;;IACnB,MAAM,cAAc,6LAAW;IAC/B,qBAAO,oNAAC,kMAAkB;QAAC,KAAK;QAAK,IAAI,MAAM;QAAc,GAAG,KAAK;;;;;;AACvE;;AACA,KAAK,WAAW,GAAG;AAEnB,MAAM,yBAAW,kMAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,kMAAkB;QACjB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,sGACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,kMAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,+YACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW"}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,kMAAgB,MAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,oNAAC,uMAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,mJAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,uMAAuB,CAAC,WAAW"}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/common/commission-summary.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { DollarSign, Clock, FileCheck, CheckCircle2, XCircle } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\nimport { cn } from '@/lib/utils'\n\n/**\n * Commission summary type - shared between partners and introducers\n */\nexport type CommissionSummary = {\n  accrued: number\n  invoice_requested: number\n  invoice_submitted?: number\n  invoiced: number\n  paid: number\n  cancelled: number\n  rejected?: number\n  total_owed: number\n  currency: string\n}\n\ninterface CommissionSummaryProps {\n  summary: CommissionSummary\n  variant?: 'card' | 'compact' | 'inline'\n  className?: string\n  /** Optional title override (default: \"Commission Summary\") */\n  title?: string\n}\n\n/**\n * Displays commission summary for a partner or introducer\n * Shows breakdown by status: accrued, invoiced, paid\n *\n * Variants:\n * - 'card': Full card with header, grid layout, and progress bar\n * - 'compact': Horizontal badges for smaller displays\n * - 'inline': Minimal text for table cells\n */\nexport function CommissionSummary({\n  summary,\n  variant = 'card',\n  className,\n  title = 'Commission Summary',\n}: CommissionSummaryProps) {\n  const invoiceSubmitted = summary.invoice_submitted ?? 0\n  const { accrued, invoice_requested, invoiced, paid, total_owed, currency } = summary\n  const invoicedTotal = invoice_requested + invoiceSubmitted + invoiced\n\n  // Inline variant - for table cells\n  if (variant === 'inline') {\n    return (\n      <div className={cn('space-y-1', className)}>\n        {paid > 0 && (\n          <div className=\"text-sm\">\n            <span className=\"text-green-600 font-medium\">\n              {formatCurrency(paid, currency)}\n            </span>\n            <span className=\"text-muted-foreground text-xs ml-1\">paid</span>\n          </div>\n        )}\n        {total_owed > 0 && (\n          <div className=\"text-xs text-yellow-600\">\n            {formatCurrency(total_owed, currency)} pending\n          </div>\n        )}\n        {paid === 0 && total_owed === 0 && (\n          <span className=\"text-muted-foreground text-xs\">No commissions</span>\n        )}\n      </div>\n    )\n  }\n\n  // Compact variant - for smaller displays\n  if (variant === 'compact') {\n    return (\n      <div className={cn('flex flex-wrap gap-2', className)}>\n        {accrued > 0 && (\n          <Badge variant=\"outline\" className=\"bg-blue-500/10 text-blue-600 border-blue-200\">\n            <Clock className=\"h-3 w-3 mr-1\" />\n            {formatCurrency(accrued, currency)} accrued\n          </Badge>\n        )}\n        {invoicedTotal > 0 && (\n          <Badge variant=\"outline\" className=\"bg-yellow-500/10 text-yellow-600 border-yellow-200\">\n            <FileCheck className=\"h-3 w-3 mr-1\" />\n            {formatCurrency(invoicedTotal, currency)} invoiced\n          </Badge>\n        )}\n        {paid > 0 && (\n          <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-600 border-green-200\">\n            <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n            {formatCurrency(paid, currency)} paid\n          </Badge>\n        )}\n      </div>\n    )\n  }\n\n  // Default card variant\n  return (\n    <Card className={className}>\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n          <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          {title}\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-2 gap-4\">\n          {/* Accrued */}\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n              <Clock className=\"h-3 w-3 text-blue-500\" />\n              Accrued\n            </div>\n            <div className=\"text-lg font-semibold text-blue-600\">\n              {formatCurrency(accrued, currency)}\n            </div>\n          </div>\n\n          {/* Invoiced */}\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n              <FileCheck className=\"h-3 w-3 text-yellow-500\" />\n              Invoiced\n            </div>\n            <div className=\"text-lg font-semibold text-yellow-600\">\n            {formatCurrency(invoicedTotal, currency)}\n            </div>\n          </div>\n\n          {/* Paid */}\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n              <CheckCircle2 className=\"h-3 w-3 text-green-500\" />\n              Paid\n            </div>\n            <div className=\"text-lg font-semibold text-green-600\">\n              {formatCurrency(paid, currency)}\n            </div>\n          </div>\n\n          {/* Total Owed */}\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n              <DollarSign className=\"h-3 w-3 text-purple-500\" />\n              Total Owed\n            </div>\n            <div className=\"text-lg font-semibold text-purple-600\">\n              {formatCurrency(total_owed, currency)}\n            </div>\n          </div>\n        </div>\n\n        {/* Progress bar showing paid vs owed */}\n        {(paid + total_owed) > 0 && (\n          <div className=\"mt-4 pt-3 border-t\">\n            <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\n              <span>Payment Progress</span>\n              <span>\n                {Math.round((paid / (paid + total_owed)) * 100)}% paid\n              </span>\n            </div>\n            <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-green-500 transition-all duration-300\"\n                style={{ width: `${(paid / (paid + total_owed)) * 100}%` }}\n              />\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\n/**\n * Displays a simple badge showing payment status\n */\nexport function PaymentStatusBadge({\n  summary,\n  className,\n}: {\n  summary: CommissionSummary\n  className?: string\n}) {\n  const { paid, total_owed } = summary\n\n  if (paid === 0 && total_owed === 0) {\n    return (\n      <Badge variant=\"outline\" className={cn('text-muted-foreground', className)}>\n        No commissions\n      </Badge>\n    )\n  }\n\n  if (total_owed === 0 && paid > 0) {\n    return (\n      <Badge variant=\"outline\" className={cn('bg-green-500/10 text-green-600 border-green-200', className)}>\n        <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n        All paid\n      </Badge>\n    )\n  }\n\n  return (\n    <Badge variant=\"outline\" className={cn('bg-yellow-500/10 text-yellow-600 border-yellow-200', className)}>\n      <Clock className=\"h-3 w-3 mr-1\" />\n      {formatCurrency(total_owed, summary.currency)} pending\n    </Badge>\n  )\n}\n\n// Re-export with old names for backwards compatibility during migration\nexport { CommissionSummary as PartnerCommissionSummary }\nexport { PaymentStatusBadge as PartnerPaymentBadge }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 899, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/partners/partner-commission-summary.tsx"],"sourcesContent":["'use client'\n\n/**\n * @deprecated This file re-exports from @/components/common/commission-summary\n * Import directly from '@/components/common/commission-summary' instead.\n *\n * Kept for backwards compatibility during migration.\n */\n\nexport {\n  CommissionSummary as PartnerCommissionSummary,\n  PaymentStatusBadge as PartnerPaymentBadge,\n  type CommissionSummary,\n} from '@/components/common/commission-summary'\n"],"names":[],"mappings":";AAEA;;;;;CAKC,GAED;AATA"}},
    {"offset": {"line": 924, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,yBAAW,kMAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,oNAAC;QACC,WAAW,IAAA,mJAAE,EACX,+RACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 958, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/commercial-partners/record-cp-commission-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Loader2, Calculator } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n  currency?: string | null\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  components: any[]\n}\n\ninterface RecordCPCommissionDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  commercialPartnerId: string\n  commercialPartnerName: string\n  deals: Deal[]\n  feePlans: FeePlan[]\n  onSuccess: () => void\n}\n\nconst BASIS_TYPES = [\n  { value: 'invested_amount', label: 'Invested Amount' },\n  { value: 'spread', label: 'Spread' },\n  { value: 'management_fee', label: 'Management Fee' },\n  { value: 'performance_fee', label: 'Performance Fee' },\n]\n\nexport function RecordCPCommissionDialog({\n  open,\n  onOpenChange,\n  commercialPartnerId,\n  commercialPartnerName,\n  deals,\n  feePlans,\n  onSuccess,\n}: RecordCPCommissionDialogProps) {\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Form state - use 'none' as placeholder for unselected state (Radix doesn't allow empty strings)\n  const [dealId, setDealId] = useState<string>('none')\n  const [feePlanId, setFeePlanId] = useState<string>('none')\n  const [basisType, setBasisType] = useState<string>('invested_amount')\n  const [rateBps, setRateBps] = useState<string>('')\n  const [baseAmount, setBaseAmount] = useState<string>('')\n  const [accrualAmount, setAccrualAmount] = useState<string>('')\n  const [currency, setCurrency] = useState<string>('USD')\n  const [paymentDueDate, setPaymentDueDate] = useState<string>('')\n  const [notes, setNotes] = useState<string>('')\n\n  // Reset form when dialog opens\n  useEffect(() => {\n    if (open) {\n      setDealId('none')\n      setFeePlanId('none')\n      setBasisType('invested_amount')\n      setRateBps('')\n      setBaseAmount('')\n      setAccrualAmount('')\n      setCurrency('USD')\n      setPaymentDueDate('')\n      setNotes('')\n      setError(null)\n    }\n  }, [open])\n\n  // Auto-calculate accrual when rate and base amount change\n  useEffect(() => {\n    if (rateBps && baseAmount) {\n      const rate = parseFloat(rateBps) / 10000 // Convert bps to decimal\n      const base = parseFloat(baseAmount)\n      if (!isNaN(rate) && !isNaN(base)) {\n        const calculated = (base * rate).toFixed(2)\n        setAccrualAmount(calculated)\n      }\n    }\n  }, [rateBps, baseAmount])\n\n  // Update currency when deal changes\n  useEffect(() => {\n    if (dealId && dealId !== 'none') {\n      const deal = deals.find(d => d.id === dealId)\n      if (deal?.currency) {\n        setCurrency(deal.currency)\n      }\n    }\n  }, [dealId, deals])\n\n  // Auto-fill rate from fee plan\n  useEffect(() => {\n    if (feePlanId && feePlanId !== 'none') {\n      const plan = feePlans.find(p => p.id === feePlanId)\n      if (plan?.components && plan.components.length > 0) {\n        // Find first component with rate_bps\n        const comp = plan.components.find((c: any) => c.rate_bps)\n        if (comp?.rate_bps) {\n          setRateBps(comp.rate_bps.toString())\n        }\n      }\n    }\n  }, [feePlanId, feePlans])\n\n  const handleSubmit = async () => {\n    // Validation\n    if (!rateBps || parseFloat(rateBps) <= 0) {\n      setError('Rate is required and must be greater than 0')\n      return\n    }\n    if (!accrualAmount || parseFloat(accrualAmount) <= 0) {\n      setError('Commission amount is required and must be greater than 0')\n      return\n    }\n\n    setSaving(true)\n    setError(null)\n\n    try {\n      const payload = {\n        commercial_partner_id: commercialPartnerId,\n        deal_id: dealId !== 'none' ? dealId : undefined,\n        fee_plan_id: feePlanId !== 'none' ? feePlanId : undefined,\n        basis_type: basisType,\n        rate_bps: parseInt(rateBps, 10),\n        base_amount: baseAmount ? parseFloat(baseAmount) : undefined,\n        accrual_amount: parseFloat(accrualAmount),\n        currency,\n        payment_due_date: paymentDueDate || undefined,\n        notes: notes || undefined,\n      }\n\n      const response = await fetch('/api/arrangers/me/commercial-partner-commissions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to record commission')\n      }\n\n      onSuccess()\n      onOpenChange(false)\n    } catch (err) {\n      console.error('[RecordCPCommissionDialog] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to record commission')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const ratePercent = rateBps ? (parseFloat(rateBps) / 100).toFixed(2) : '0.00'\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Record Commission</DialogTitle>\n          <DialogDescription>\n            Record a commission owed to {commercialPartnerName}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded\">\n              {error}\n            </div>\n          )}\n\n          {/* Deal Selection */}\n          <div className=\"space-y-2\">\n            <Label>Deal (Optional)</Label>\n            <Select value={dealId} onValueChange={setDealId}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select deal...\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"none\">No specific deal</SelectItem>\n                {deals.map((deal) => (\n                  <SelectItem key={deal.id} value={deal.id}>\n                    {deal.name} {deal.company_name && `(${deal.company_name})`}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Fee Plan Selection */}\n          {feePlans.length > 0 && (\n            <div className=\"space-y-2\">\n              <Label>Fee Plan (Optional)</Label>\n              <Select value={feePlanId} onValueChange={setFeePlanId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select fee plan...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"none\">No fee plan</SelectItem>\n                  {feePlans.map((plan) => (\n                    <SelectItem key={plan.id} value={plan.id}>\n                      {plan.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n\n          {/* Basis Type */}\n          <div className=\"space-y-2\">\n            <Label>Commission Basis</Label>\n            <Select value={basisType} onValueChange={setBasisType}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {BASIS_TYPES.map((type) => (\n                  <SelectItem key={type.value} value={type.value}>\n                    {type.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Rate and Base Amount */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label>Rate (basis points) *</Label>\n              <Input\n                type=\"number\"\n                value={rateBps}\n                onChange={(e) => setRateBps(e.target.value)}\n                placeholder=\"e.g., 100 = 1%\"\n              />\n              {rateBps && (\n                <p className=\"text-xs text-muted-foreground\">= {ratePercent}%</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Base Amount ({currency})</Label>\n              <Input\n                type=\"number\"\n                value={baseAmount}\n                onChange={(e) => setBaseAmount(e.target.value)}\n                placeholder=\"e.g., 100000\"\n              />\n            </div>\n          </div>\n\n          {/* Commission Amount */}\n          <div className=\"space-y-2\">\n            <Label className=\"flex items-center gap-2\">\n              Commission Amount ({currency}) *\n              {rateBps && baseAmount && (\n                <span className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <Calculator className=\"h-3 w-3\" />\n                  Auto-calculated\n                </span>\n              )}\n            </Label>\n            <Input\n              type=\"number\"\n              value={accrualAmount}\n              onChange={(e) => setAccrualAmount(e.target.value)}\n              placeholder=\"Commission amount\"\n            />\n            {accrualAmount && (\n              <p className=\"text-sm font-medium text-primary\">\n                {formatCurrency(parseFloat(accrualAmount), currency)}\n              </p>\n            )}\n          </div>\n\n          {/* Payment Due Date */}\n          <div className=\"space-y-2\">\n            <Label>Payment Due Date (Optional)</Label>\n            <Input\n              type=\"date\"\n              value={paymentDueDate}\n              onChange={(e) => setPaymentDueDate(e.target.value)}\n            />\n          </div>\n\n          {/* Notes */}\n          <div className=\"space-y-2\">\n            <Label>Notes (Optional)</Label>\n            <Textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Any additional notes...\"\n              rows={2}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={saving}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={saving}>\n            {saving ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Recording...\n              </>\n            ) : (\n              'Record Commission'\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1611, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/commercial-partners/commercial-partner-detail-drawer.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from '@/components/ui/sheet'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Separator } from '@/components/ui/separator'\nimport {\n  Building2,\n  Loader2,\n  AlertCircle,\n  Mail,\n  Phone,\n  Globe,\n  Users,\n  FileText,\n  DollarSign,\n  Handshake,\n  CheckCircle2,\n  Clock,\n  TrendingUp,\n  ShieldCheck,\n  Scale,\n  CalendarDays,\n  CreditCard,\n  Send,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport {\n  PartnerCommissionSummary,\n  type CommissionSummary,\n} from '@/components/partners/partner-commission-summary'\nimport { RecordCPCommissionDialog } from './record-cp-commission-dialog'\nimport Link from 'next/link'\n\ntype CommercialPartnerDetail = {\n  id: string\n  name: string\n  legal_name: string | null\n  cp_type: string | null\n  status: string\n  regulatory_status: string | null\n  jurisdiction: string | null\n  contact_name: string | null\n  contact_email: string | null\n  contact_phone: string | null\n  country: string | null\n  logo_url: string | null\n  kyc_status: string | null\n  contract_end_date: string | null\n  created_at: string\n}\n\ntype FeeComponent = {\n  id: string\n  kind: string\n  rate_bps: number | null\n  flat_amount: number | null\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  description: string | null\n  is_active: boolean\n  effective_from: string | null\n  effective_until: string | null\n  deal_id: string | null\n  created_at: string\n  components: FeeComponent[]\n}\n\ntype PlacementAgreement = {\n  id: string\n  agreement_type: string\n  default_commission_bps: number\n  commission_cap_amount: number | null\n  territory: string | null\n  exclusivity_level: string | null\n  effective_date: string | null\n  expiry_date: string | null\n  status: string\n  created_at: string\n}\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n  status: string\n  currency: string | null\n}\n\ntype Referral = {\n  id: string\n  created_at: string\n  investor: { id: string; name: string } | null\n  deal: { id: string; name: string; company_name: string | null } | null\n}\n\ntype Commission = {\n  id: string\n  status: string\n  accrual_amount: number\n  currency: string\n  created_at: string\n  deal?: { id: string; name: string } | null\n}\n\nconst COMMISSION_STATUS_CONFIG: Record<string, { icon: typeof Clock; color: string }> = {\n  accrued: { icon: Clock, color: 'text-blue-600' },\n  invoice_requested: { icon: Send, color: 'text-yellow-600' },\n  invoice_submitted: { icon: FileText, color: 'text-indigo-600' },\n  invoiced: { icon: FileText, color: 'text-orange-600' },\n  paid: { icon: CheckCircle2, color: 'text-green-600' },\n  cancelled: { icon: AlertCircle, color: 'text-gray-400' },\n  rejected: { icon: AlertCircle, color: 'text-red-600' },\n}\n\ntype CPData = {\n  commercial_partner: CommercialPartnerDetail\n  fee_plans: FeePlan[]\n  commission_summary: CommissionSummary\n  placement_agreements: PlacementAgreement[]\n  deals: Deal[]\n  recent_referrals: Referral[]\n  stats: {\n    total_deals: number\n    total_referrals: number\n    active_fee_plans: number\n    active_agreements: number\n  }\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 border-green-200',\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  inactive: 'bg-gray-100 text-gray-800 border-gray-200',\n  suspended: 'bg-red-100 text-red-800 border-red-200',\n  draft: 'bg-gray-100 text-gray-800 border-gray-200',\n  pending_internal_approval: 'bg-orange-100 text-orange-800 border-orange-200',\n  pending_approval: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  approved: 'bg-blue-100 text-blue-800 border-blue-200',\n  rejected: 'bg-red-100 text-red-800 border-red-200',\n}\n\nconst KYC_STYLES: Record<string, string> = {\n  approved: 'bg-green-100 text-green-800',\n  pending: 'bg-yellow-100 text-yellow-800',\n  expired: 'bg-red-100 text-red-800',\n  not_started: 'bg-gray-100 text-gray-800',\n}\n\ninterface CommercialPartnerDetailDrawerProps {\n  commercialPartnerId: string | null\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function CommercialPartnerDetailDrawer({\n  commercialPartnerId,\n  open,\n  onOpenChange,\n}: CommercialPartnerDetailDrawerProps) {\n  const [data, setData] = useState<CPData | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [recordCommissionOpen, setRecordCommissionOpen] = useState(false)\n  const [commissions, setCommissions] = useState<Commission[]>([])\n  const [commissionsLoading, setCommissionsLoading] = useState(false)\n  const [actionLoading, setActionLoading] = useState<string | null>(null)\n\n  const fetchCPDetails = async () => {\n    if (!commercialPartnerId) return\n    try {\n      setLoading(true)\n      setError(null)\n\n      const response = await fetch(`/api/arrangers/me/commercial-partners/${commercialPartnerId}`)\n\n      if (!response.ok) {\n        const errData = await response.json()\n        throw new Error(errData.error || 'Failed to fetch commercial partner details')\n      }\n\n      const result = await response.json()\n      setData(result.data)\n    } catch (err) {\n      console.error('[CPDetailDrawer] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load details')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchCommissions = async () => {\n    if (!commercialPartnerId) return\n    try {\n      setCommissionsLoading(true)\n      const response = await fetch(\n        `/api/arrangers/me/commercial-partner-commissions?commercial_partner_id=${commercialPartnerId}`\n      )\n      if (response.ok) {\n        const result = await response.json()\n        setCommissions(result.data || [])\n      }\n    } catch (err) {\n      console.error('[CPDetailDrawer] Error fetching commissions:', err)\n    } finally {\n      setCommissionsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    if (!commercialPartnerId || !open) {\n      setData(null)\n      setCommissions([])\n      return\n    }\n    fetchCPDetails()\n    fetchCommissions()\n  }, [commercialPartnerId, open])\n\n  const handleCommissionRecorded = () => {\n    fetchCPDetails()\n    fetchCommissions()\n  }\n\n  const handleRequestInvoice = async (commission: Commission) => {\n    setActionLoading(commission.id)\n    try {\n      const response = await fetch(\n        `/api/arrangers/me/commercial-partner-commissions/${commission.id}/request-invoice`,\n        { method: 'POST', headers: { 'Content-Type': 'application/json' } }\n      )\n      if (!response.ok) {\n        const errData = await response.json()\n        throw new Error(errData.error || 'Failed to request invoice')\n      }\n      // Refresh data\n      fetchCPDetails()\n      fetchCommissions()\n    } catch (err) {\n      console.error('[CPDetailDrawer] Request invoice error:', err)\n      alert(err instanceof Error ? err.message : 'Failed to request invoice')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  const handleRequestPayment = async (commission: Commission) => {\n    setActionLoading(commission.id)\n    try {\n      const response = await fetch(\n        `/api/arrangers/me/commercial-partner-commissions/${commission.id}/request-payment`,\n        { method: 'POST', headers: { 'Content-Type': 'application/json' } }\n      )\n      if (!response.ok) {\n        const errData = await response.json()\n        throw new Error(errData.error || 'Failed to request payment')\n      }\n      // Refresh data\n      fetchCPDetails()\n      fetchCommissions()\n    } catch (err) {\n      console.error('[CPDetailDrawer] Request payment error:', err)\n      alert(err instanceof Error ? err.message : 'Failed to request payment')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  if (!open) return null\n\n  return (\n    <>\n      <Sheet open={open} onOpenChange={onOpenChange}>\n        <SheetContent className=\"w-full sm:max-w-xl overflow-y-auto\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-16\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            </div>\n          ) : error ? (\n            <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n              <AlertCircle className=\"h-12 w-12 text-destructive mb-4\" />\n              <p className=\"text-sm text-muted-foreground\">{error}</p>\n            </div>\n          ) : data ? (\n            <>\n              <SheetHeader className=\"pb-4\">\n                <div className=\"flex items-start gap-4\">\n                  {data.commercial_partner.logo_url ? (\n                    <img\n                      src={data.commercial_partner.logo_url}\n                      alt={data.commercial_partner.name}\n                      className=\"h-16 w-16 rounded-lg object-cover\"\n                    />\n                  ) : (\n                    <div className=\"h-16 w-16 rounded-lg bg-muted flex items-center justify-center\">\n                      <Building2 className=\"h-8 w-8 text-muted-foreground\" />\n                    </div>\n                  )}\n                  <div className=\"flex-1\">\n                    <SheetTitle className=\"text-xl\">{data.commercial_partner.name}</SheetTitle>\n                    <SheetDescription className=\"flex items-center gap-2 mt-1\">\n                      {data.commercial_partner.cp_type && (\n                        <Badge variant=\"secondary\" className=\"capitalize\">\n                          {data.commercial_partner.cp_type.replace('_', ' ')}\n                        </Badge>\n                      )}\n                      {data.commercial_partner.jurisdiction && (\n                        <span className=\"flex items-center gap-1 text-xs\">\n                          <Globe className=\"h-3 w-3\" />\n                          {data.commercial_partner.jurisdiction}\n                        </span>\n                      )}\n                    </SheetDescription>\n                    <div className=\"flex items-center gap-2 mt-2\">\n                      <Badge\n                        variant=\"outline\"\n                        className={cn('capitalize', STATUS_STYLES[data.commercial_partner.status])}\n                      >\n                        {data.commercial_partner.status}\n                      </Badge>\n                      {data.commercial_partner.kyc_status && (\n                        <Badge\n                          variant=\"secondary\"\n                          className={cn('text-xs', KYC_STYLES[data.commercial_partner.kyc_status])}\n                        >\n                          KYC: {data.commercial_partner.kyc_status.replace('_', ' ')}\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </SheetHeader>\n\n              {/* Quick Stats */}\n              <div className=\"grid grid-cols-4 gap-2 py-4\">\n                <Card className=\"p-3\">\n                  <div className=\"text-xs text-muted-foreground\">Deals</div>\n                  <div className=\"text-lg font-semibold\">{data.stats.total_deals}</div>\n                </Card>\n                <Card className=\"p-3\">\n                  <div className=\"text-xs text-muted-foreground\">Referrals</div>\n                  <div className=\"text-lg font-semibold\">{data.stats.total_referrals}</div>\n                </Card>\n                <Card className=\"p-3\">\n                  <div className=\"text-xs text-muted-foreground\">Fee Plans</div>\n                  <div className=\"text-lg font-semibold\">{data.stats.active_fee_plans}</div>\n                </Card>\n                <Card className=\"p-3\">\n                  <div className=\"text-xs text-muted-foreground\">Agreements</div>\n                  <div className=\"text-lg font-semibold\">{data.stats.active_agreements}</div>\n                </Card>\n              </div>\n\n              <Separator />\n\n              <Tabs defaultValue=\"overview\" className=\"mt-4\">\n                <TabsList className=\"grid w-full grid-cols-5\">\n                  <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n                  <TabsTrigger value=\"fee-plans\">Fee Plans</TabsTrigger>\n                  <TabsTrigger value=\"commissions\">Commissions</TabsTrigger>\n                  <TabsTrigger value=\"agreements\">Agreements</TabsTrigger>\n                  <TabsTrigger value=\"referrals\">Referrals</TabsTrigger>\n                </TabsList>\n\n                {/* Overview Tab */}\n                <TabsContent value=\"overview\" className=\"space-y-4 mt-4\">\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Contact Information</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-2\">\n                      {data.commercial_partner.contact_name && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Users className=\"h-4 w-4 text-muted-foreground\" />\n                          {data.commercial_partner.contact_name}\n                        </div>\n                      )}\n                      {data.commercial_partner.contact_email && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                          <a\n                            href={`mailto:${data.commercial_partner.contact_email}`}\n                            className=\"text-primary hover:underline\"\n                          >\n                            {data.commercial_partner.contact_email}\n                          </a>\n                        </div>\n                      )}\n                      {data.commercial_partner.contact_phone && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                          {data.commercial_partner.contact_phone}\n                        </div>\n                      )}\n                      {data.commercial_partner.country && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Globe className=\"h-4 w-4 text-muted-foreground\" />\n                          {data.commercial_partner.country}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Regulatory Information</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-2\">\n                      {data.commercial_partner.regulatory_status && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <ShieldCheck className=\"h-4 w-4 text-muted-foreground\" />\n                          Status: {data.commercial_partner.regulatory_status}\n                        </div>\n                      )}\n                      {data.commercial_partner.jurisdiction && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Scale className=\"h-4 w-4 text-muted-foreground\" />\n                          Jurisdiction: {data.commercial_partner.jurisdiction}\n                        </div>\n                      )}\n                      {data.commercial_partner.contract_end_date && (\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <CalendarDays className=\"h-4 w-4 text-muted-foreground\" />\n                          Contract expires: {formatDate(data.commercial_partner.contract_end_date)}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n\n                  {data.deals.length > 0 && (\n                    <Card>\n                      <CardHeader className=\"pb-2\">\n                        <CardTitle className=\"text-sm\">Deals Involved</CardTitle>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"space-y-2\">\n                          {data.deals.slice(0, 5).map((deal) => (\n                            <div\n                              key={deal.id}\n                              className=\"flex items-center justify-between text-sm\"\n                            >\n                              <span>{deal.name}</span>\n                              <Badge variant=\"outline\" className=\"capitalize\">\n                                {deal.status}\n                              </Badge>\n                            </div>\n                          ))}\n                          {data.deals.length > 5 && (\n                            <p className=\"text-xs text-muted-foreground\">\n                              +{data.deals.length - 5} more deals\n                            </p>\n                          )}\n                        </div>\n                      </CardContent>\n                    </Card>\n                  )}\n                </TabsContent>\n\n                {/* Fee Plans Tab */}\n                <TabsContent value=\"fee-plans\" className=\"space-y-4 mt-4\">\n                  {data.fee_plans.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <FileText className=\"h-10 w-10 text-muted-foreground mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">No fee plans assigned</p>\n                      <Button variant=\"outline\" size=\"sm\" className=\"mt-4\" asChild>\n                        <Link href=\"/versotech_main/fee-plans\">Create Fee Plan</Link>\n                      </Button>\n                    </div>\n                  ) : (\n                    data.fee_plans.map((plan) => (\n                      <Card key={plan.id}>\n                        <CardHeader className=\"pb-2\">\n                          <div className=\"flex items-center justify-between\">\n                            <CardTitle className=\"text-sm\">{plan.name}</CardTitle>\n                            <Badge variant={plan.is_active ? 'default' : 'secondary'}>\n                              {plan.is_active ? 'Active' : 'Inactive'}\n                            </Badge>\n                          </div>\n                          {plan.description && (\n                            <CardDescription className=\"text-xs\">\n                              {plan.description}\n                            </CardDescription>\n                          )}\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"text-xs text-muted-foreground mb-2\">\n                            Effective: {formatDate(plan.effective_from || '')}\n                            {plan.effective_until && ` - ${formatDate(plan.effective_until)}`}\n                          </div>\n                          {plan.components && plan.components.length > 0 && (\n                            <div className=\"space-y-1\">\n                              {plan.components.map((comp) => (\n                                <div\n                                  key={comp.id}\n                                  className=\"flex items-center justify-between text-xs bg-muted/50 p-2 rounded\"\n                                >\n                                  <span className=\"capitalize\">{comp.kind.replace('_', ' ')}</span>\n                                  <span className=\"font-medium\">\n                                    {comp.rate_bps\n                                      ? `${(comp.rate_bps / 100).toFixed(2)}%`\n                                      : formatCurrency(comp.flat_amount || 0, 'USD')}\n                                  </span>\n                                </div>\n                              ))}\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </TabsContent>\n\n                {/* Commissions Tab */}\n                <TabsContent value=\"commissions\" className=\"space-y-4 mt-4\">\n                  <PartnerCommissionSummary summary={data.commission_summary} variant=\"card\" />\n\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setRecordCommissionOpen(true)}\n                    >\n                      <DollarSign className=\"h-4 w-4 mr-2\" />\n                      Record Commission\n                    </Button>\n                    <Button variant=\"ghost\" size=\"sm\" asChild>\n                      <Link href=\"/versotech_main/lawyer-reconciliation\">\n                        <TrendingUp className=\"h-4 w-4 mr-2\" />\n                        Reconciliation\n                      </Link>\n                    </Button>\n                  </div>\n\n                  {/* Commissions List with Actions */}\n                  {commissionsLoading ? (\n                    <div className=\"flex items-center justify-center py-4\">\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    </div>\n                  ) : commissions.length > 0 ? (\n                    <Card>\n                      <CardHeader className=\"pb-2\">\n                        <CardTitle className=\"text-sm\">Recent Commissions</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-2\">\n                        {commissions.slice(0, 10).map((commission) => {\n                          const config = COMMISSION_STATUS_CONFIG[commission.status] || COMMISSION_STATUS_CONFIG.accrued\n                          const StatusIcon = config.icon\n\n                          return (\n                            <div key={commission.id} className=\"flex items-center justify-between p-2 rounded-md bg-muted/50\">\n                              <div className=\"flex items-center gap-2\">\n                                <StatusIcon className={cn('h-4 w-4', config.color)} />\n                                <div>\n                                  <div className=\"font-medium text-sm\">\n                                    {formatCurrency(commission.accrual_amount, commission.currency)}\n                                  </div>\n                                  <div className=\"text-xs text-muted-foreground\">\n                                    {commission.deal?.name || 'No deal'} • {formatDate(commission.created_at)}\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"flex items-center gap-2\">\n                                <Badge variant=\"outline\" className=\"text-xs capitalize\">\n                                  {commission.status.replace(/_/g, ' ')}\n                                </Badge>\n                                {commission.status === 'accrued' && (\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => handleRequestInvoice(commission)}\n                                    disabled={actionLoading === commission.id}\n                                  >\n                                    {actionLoading === commission.id ? (\n                                      <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n                                    ) : (\n                                      <>\n                                        <FileText className=\"h-3.5 w-3.5 mr-1\" />\n                                        Request Invoice\n                                      </>\n                                    )}\n                                  </Button>\n                                )}\n                                {commission.status === 'invoiced' && (\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => handleRequestPayment(commission)}\n                                    disabled={actionLoading === commission.id}\n                                  >\n                                    {actionLoading === commission.id ? (\n                                      <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n                                    ) : (\n                                      <>\n                                        <CreditCard className=\"h-3.5 w-3.5 mr-1\" />\n                                        Request Payment\n                                      </>\n                                    )}\n                                  </Button>\n                                )}\n                              </div>\n                            </div>\n                          )\n                        })}\n                      </CardContent>\n                    </Card>\n                  ) : (\n                    <Card>\n                      <CardContent className=\"py-6 text-center text-muted-foreground text-sm\">\n                        No commissions recorded yet\n                      </CardContent>\n                    </Card>\n                  )}\n                </TabsContent>\n\n                {/* Agreements Tab */}\n                <TabsContent value=\"agreements\" className=\"space-y-4 mt-4\">\n                  {data.placement_agreements.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <Handshake className=\"h-10 w-10 text-muted-foreground mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">No placement agreements</p>\n                    </div>\n                  ) : (\n                    data.placement_agreements.map((agreement) => (\n                      <Card key={agreement.id}>\n                        <CardHeader className=\"pb-2\">\n                          <div className=\"flex items-center justify-between\">\n                            <CardTitle className=\"text-sm capitalize\">\n                              {agreement.agreement_type.replace('_', ' ')} Agreement\n                            </CardTitle>\n                            <Badge\n                              variant=\"outline\"\n                              className={cn('capitalize', STATUS_STYLES[agreement.status])}\n                            >\n                              {agreement.status.replace(/_/g, ' ')}\n                            </Badge>\n                          </div>\n                        </CardHeader>\n                        <CardContent className=\"space-y-2\">\n                          <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                            <div>\n                              <span className=\"text-muted-foreground\">Commission:</span>\n                              <span className=\"ml-1 font-medium\">\n                                {(agreement.default_commission_bps / 100).toFixed(2)}%\n                              </span>\n                            </div>\n                            {agreement.commission_cap_amount && (\n                              <div>\n                                <span className=\"text-muted-foreground\">Cap:</span>\n                                <span className=\"ml-1 font-medium\">\n                                  {formatCurrency(agreement.commission_cap_amount, 'USD')}\n                                </span>\n                              </div>\n                            )}\n                            {agreement.territory && (\n                              <div>\n                                <span className=\"text-muted-foreground\">Territory:</span>\n                                <span className=\"ml-1\">{agreement.territory}</span>\n                              </div>\n                            )}\n                            {agreement.exclusivity_level && (\n                              <div>\n                                <span className=\"text-muted-foreground\">Exclusivity:</span>\n                                <span className=\"ml-1 capitalize\">\n                                  {agreement.exclusivity_level.replace('_', ' ')}\n                                </span>\n                              </div>\n                            )}\n                          </div>\n                          {agreement.effective_date && (\n                            <div className=\"text-xs text-muted-foreground\">\n                              Effective: {formatDate(agreement.effective_date)}\n                              {agreement.expiry_date && ` - ${formatDate(agreement.expiry_date)}`}\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    ))\n                  )}\n                </TabsContent>\n\n                {/* Referrals Tab */}\n                <TabsContent value=\"referrals\" className=\"space-y-4 mt-4\">\n                  {data.recent_referrals.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <Users className=\"h-10 w-10 text-muted-foreground mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">No referrals yet</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {data.recent_referrals.map((referral) => (\n                        <Card key={referral.id} className=\"p-3\">\n                          <div className=\"flex items-center justify-between\">\n                            <div>\n                              <div className=\"font-medium text-sm\">\n                                {referral.investor?.name || 'Unknown Investor'}\n                              </div>\n                              <div className=\"text-xs text-muted-foreground\">\n                                {referral.deal?.name || 'Unknown Deal'}\n                              </div>\n                            </div>\n                            <div className=\"text-xs text-muted-foreground\">\n                              {formatDate(referral.created_at)}\n                            </div>\n                          </div>\n                        </Card>\n                      ))}\n                    </div>\n                  )}\n                </TabsContent>\n              </Tabs>\n            </>\n          ) : null}\n        </SheetContent>\n      </Sheet>\n\n      {data && (\n        <RecordCPCommissionDialog\n          open={recordCommissionOpen}\n          onOpenChange={setRecordCommissionOpen}\n          commercialPartnerId={data.commercial_partner.id}\n          commercialPartnerName={data.commercial_partner.name}\n          deals={data.deals}\n          feePlans={data.fee_plans}\n          onSuccess={handleCommissionRecorded}\n        />\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3174, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/my-commercial-partners/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  Building2,\n  CheckCircle2,\n  Search,\n  Loader2,\n  AlertCircle,\n  Mail,\n  Globe,\n  Users,\n  FileText,\n  DollarSign,\n  Handshake,\n  ChevronRight,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\nimport { CommercialPartnerDetailDrawer } from '@/components/commercial-partners/commercial-partner-detail-drawer'\nimport {\n  PartnerCommissionSummary,\n  type CommissionSummary,\n} from '@/components/partners/partner-commission-summary'\n\ntype ArrangerInfo = {\n  id: string\n  legal_name: string\n  status: string\n}\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  is_active: boolean\n}\n\ntype CommercialPartner = {\n  id: string\n  name: string\n  legal_name: string | null\n  cp_type: string | null\n  status: string\n  regulatory_status: string | null\n  jurisdiction: string | null\n  contact_name: string | null\n  contact_email: string | null\n  contact_phone: string | null\n  country: string | null\n  logo_url: string | null\n  kyc_status: string | null\n  contract_end_date: string | null\n  deals_count: number\n  clients_count: number\n  total_placement_value: number\n  fee_plans: FeePlan[]\n  commission_summary: CommissionSummary\n  deal_ids: string[] // Added for deal filtering\n}\n\ntype Summary = {\n  totalCPs: number\n  activeCPs: number\n  totalClients: number\n  totalPlacementValue: number\n  totalOwed: number\n  totalPaid: number\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 border-green-200',\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  inactive: 'bg-gray-100 text-gray-800 border-gray-200',\n  suspended: 'bg-red-100 text-red-800 border-red-200',\n}\n\nconst KYC_STYLES: Record<string, string> = {\n  approved: 'bg-green-100 text-green-800',\n  pending: 'bg-yellow-100 text-yellow-800',\n  expired: 'bg-red-100 text-red-800',\n  not_started: 'bg-gray-100 text-gray-800',\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Status', value: 'all' },\n  { label: 'Active', value: 'active' },\n  { label: 'Pending', value: 'pending' },\n  { label: 'Inactive', value: 'inactive' },\n]\n\nexport default function MyCommercialPartnersPage() {\n  const [arrangerInfo, setArrangerInfo] = useState<ArrangerInfo | null>(null)\n  const [arrangerId, setArrangerId] = useState<string | null>(null)\n  const [commercialPartners, setCommercialPartners] = useState<CommercialPartner[]>([])\n  const [deals, setDeals] = useState<Deal[]>([])\n  const [summary, setSummary] = useState<Summary>({\n    totalCPs: 0,\n    activeCPs: 0,\n    totalClients: 0,\n    totalPlacementValue: 0,\n    totalOwed: 0,\n    totalPaid: 0,\n  })\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [dealFilter, setDealFilter] = useState('all')\n\n  // Detail drawer state\n  const [selectedCPId, setSelectedCPId] = useState<string | null>(null)\n  const [drawerOpen, setDrawerOpen] = useState(false)\n\n  const handleCPClick = (cpId: string) => {\n    setSelectedCPId(cpId)\n    setDrawerOpen(true)\n  }\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        setLoading(true)\n        const supabase = createClient()\n\n        const { data: { user } } = await supabase.auth.getUser()\n        if (!user) {\n          setError('Not authenticated')\n          return\n        }\n\n        const { data: arrangerUser, error: arrangerUserError } = await supabase\n          .from('arranger_users')\n          .select('arranger_id')\n          .eq('user_id', user.id)\n          .single()\n\n        if (arrangerUserError || !arrangerUser) {\n          await fetchAllCommercialPartners(supabase)\n          return\n        }\n\n        setArrangerId(arrangerUser.arranger_id)\n\n        const { data: arranger, error: arrangerError } = await supabase\n          .from('arranger_entities')\n          .select('id, legal_name, status')\n          .eq('id', arrangerUser.arranger_id)\n          .single()\n\n        if (arrangerError) throw arrangerError\n        setArrangerInfo(arranger)\n\n        // Get deals for this arranger (for filter dropdown)\n        const { data: arrangerDeals, error: dealsError } = await supabase\n          .from('deals')\n          .select('id, name, company_name')\n          .eq('arranger_entity_id', arrangerUser.arranger_id)\n          .order('name')\n\n        if (dealsError) throw dealsError\n        setDeals(arrangerDeals || [])\n\n        if (!arrangerDeals || arrangerDeals.length === 0) {\n          setCommercialPartners([])\n          setSummary({ totalCPs: 0, activeCPs: 0, totalClients: 0, totalPlacementValue: 0, totalOwed: 0, totalPaid: 0 })\n          return\n        }\n\n        const dealIds = arrangerDeals.map(d => d.id)\n\n        const { data: referrals, error: refError } = await supabase\n          .from('deal_memberships')\n          .select(`referred_by_entity_id, investor_id, deal_id, deal:deal_id (id, name)`)\n          .in('deal_id', dealIds)\n          .eq('referred_by_entity_type', 'commercial_partner')\n          .not('referred_by_entity_id', 'is', null)\n\n        if (refError) throw refError\n\n        const cpIds = [...new Set((referrals || []).map(r => r.referred_by_entity_id))]\n\n        if (cpIds.length === 0) {\n          setCommercialPartners([])\n          setSummary({ totalCPs: 0, activeCPs: 0, totalClients: 0, totalPlacementValue: 0, totalOwed: 0, totalPaid: 0 })\n          return\n        }\n\n        const { data: cpsData, error: cpsError } = await supabase\n          .from('commercial_partners')\n          .select('*')\n          .in('id', cpIds)\n          .order('name')\n\n        if (cpsError) throw cpsError\n\n        // Get client counts\n        const { data: clients } = await supabase\n          .from('commercial_partner_clients')\n          .select('commercial_partner_id')\n          .in('commercial_partner_id', cpIds)\n\n        const clientCountsByCP = new Map<string, number>()\n        ;(clients || []).forEach((c: any) => {\n          const current = clientCountsByCP.get(c.commercial_partner_id) || 0\n          clientCountsByCP.set(c.commercial_partner_id, current + 1)\n        })\n\n        const investorIds = [...new Set((referrals || []).filter(r => r.investor_id).map(r => r.investor_id))]\n        const { data: subs } = await supabase\n          .from('subscriptions')\n          .select('investor_id, commitment')\n          .in('investor_id', investorIds)\n\n        const subsByInvestor = new Map<string, number>()\n        ;(subs || []).forEach((s: any) => {\n          const current = subsByInvestor.get(s.investor_id) || 0\n          subsByInvestor.set(s.investor_id, current + (Number(s.commitment) || 0))\n        })\n\n        // Get fee plans for these CPs (created by this arranger)\n        const { data: feePlans } = await supabase\n          .from('fee_plans')\n          .select('id, name, is_active, commercial_partner_id')\n          .in('commercial_partner_id', cpIds)\n          .eq('created_by_arranger_id', arrangerUser.arranger_id)\n\n        const feePlansByCP = new Map<string, FeePlan[]>()\n        ;(feePlans || []).forEach((fp: any) => {\n          const existing = feePlansByCP.get(fp.commercial_partner_id) || []\n          existing.push({ id: fp.id, name: fp.name, is_active: fp.is_active })\n          feePlansByCP.set(fp.commercial_partner_id, existing)\n        })\n\n        // Get commissions for these CPs\n        const { data: commissions } = await supabase\n          .from('commercial_partner_commissions')\n          .select('commercial_partner_id, status, accrual_amount, currency')\n          .in('commercial_partner_id', cpIds)\n          .eq('arranger_id', arrangerUser.arranger_id)\n\n        // Build commission summaries by CP\n        const commissionsByCP = new Map<string, CommissionSummary>()\n        cpIds.forEach(cpId => {\n          commissionsByCP.set(cpId, {\n            accrued: 0,\n            invoice_requested: 0,\n            invoiced: 0,\n            paid: 0,\n            cancelled: 0,\n            total_owed: 0,\n            currency: 'USD',\n          })\n        })\n\n        ;(commissions || []).forEach((c: any) => {\n          const summary = commissionsByCP.get(c.commercial_partner_id)\n          if (!summary) return\n          const amount = Number(c.accrual_amount) || 0\n          if (c.status === 'accrued') summary.accrued += amount\n          else if (c.status === 'invoice_requested') summary.invoice_requested += amount\n          else if (c.status === 'invoiced') summary.invoiced += amount\n          else if (c.status === 'paid') summary.paid += amount\n          else if (c.status === 'cancelled') summary.cancelled += amount\n          if (['accrued', 'invoice_requested', 'invoiced'].includes(c.status)) {\n            summary.total_owed += amount\n          }\n          if (c.currency) summary.currency = c.currency\n        })\n\n        const processedCPs: CommercialPartner[] = (cpsData || []).map((cp: any) => {\n          const cpRefs = (referrals || []).filter(r => r.referred_by_entity_id === cp.id)\n          const dealsInvolved = [...new Set(cpRefs.map(r => {\n            const deal = Array.isArray(r.deal) ? r.deal[0] : r.deal\n            return deal?.id\n          }).filter(Boolean))]\n          const totalValue = cpRefs.reduce((sum, r) => {\n            if (r.investor_id) return sum + (subsByInvestor.get(r.investor_id) || 0)\n            return sum\n          }, 0)\n\n          return {\n            id: cp.id,\n            name: cp.name || cp.legal_name || 'Unknown CP',\n            legal_name: cp.legal_name,\n            cp_type: cp.cp_type,\n            status: cp.status || 'active',\n            regulatory_status: cp.regulatory_status,\n            jurisdiction: cp.jurisdiction,\n            contact_name: cp.contact_name,\n            contact_email: cp.contact_email,\n            contact_phone: cp.contact_phone,\n            country: cp.country,\n            logo_url: cp.logo_url,\n            kyc_status: cp.kyc_status,\n            contract_end_date: cp.contract_end_date,\n            deals_count: dealsInvolved.length,\n            clients_count: clientCountsByCP.get(cp.id) || 0,\n            total_placement_value: totalValue,\n            fee_plans: feePlansByCP.get(cp.id) || [],\n            commission_summary: commissionsByCP.get(cp.id) || {\n              accrued: 0,\n              invoice_requested: 0,\n              invoiced: 0,\n              paid: 0,\n              cancelled: 0,\n              total_owed: 0,\n              currency: 'USD',\n            },\n            deal_ids: dealsInvolved as string[],\n          }\n        })\n\n        setCommercialPartners(processedCPs)\n\n        const active = processedCPs.filter(cp => cp.status === 'active').length\n        const totalClients = processedCPs.reduce((sum, cp) => sum + cp.clients_count, 0)\n        const totalVal = processedCPs.reduce((sum, cp) => sum + cp.total_placement_value, 0)\n        const totalOwed = processedCPs.reduce((sum, cp) => sum + cp.commission_summary.total_owed, 0)\n        const totalPaid = processedCPs.reduce((sum, cp) => sum + cp.commission_summary.paid, 0)\n\n        setSummary({\n          totalCPs: processedCPs.length,\n          activeCPs: active,\n          totalClients,\n          totalPlacementValue: totalVal,\n          totalOwed,\n          totalPaid,\n        })\n        setError(null)\n      } catch (err) {\n        console.error('[MyCommercialPartnersPage] Error:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load commercial partners')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    async function fetchAllCommercialPartners(supabase: any) {\n      const { data: cpsData, error: cpsError } = await supabase\n        .from('commercial_partners')\n        .select('*')\n        .order('name')\n        .limit(100)\n\n      if (cpsError) throw cpsError\n\n      const emptyCommission: CommissionSummary = {\n        accrued: 0,\n        invoice_requested: 0,\n        invoiced: 0,\n        paid: 0,\n        cancelled: 0,\n        total_owed: 0,\n        currency: 'USD',\n      }\n\n      const processedCPs: CommercialPartner[] = (cpsData || []).map((cp: any) => ({\n        id: cp.id,\n        name: cp.name || cp.legal_name || 'Unknown CP',\n        legal_name: cp.legal_name,\n        cp_type: cp.cp_type,\n        status: cp.status || 'active',\n        regulatory_status: cp.regulatory_status,\n        jurisdiction: cp.jurisdiction,\n        contact_name: cp.contact_name,\n        contact_email: cp.contact_email,\n        contact_phone: cp.contact_phone,\n        country: cp.country,\n        logo_url: cp.logo_url,\n        kyc_status: cp.kyc_status,\n        contract_end_date: cp.contract_end_date,\n        deals_count: 0,\n        clients_count: 0,\n        total_placement_value: 0,\n        fee_plans: [],\n        commission_summary: emptyCommission,\n        deal_ids: [],\n      }))\n\n      setCommercialPartners(processedCPs)\n      setSummary({\n        totalCPs: processedCPs.length,\n        activeCPs: processedCPs.filter(cp => cp.status === 'active').length,\n        totalClients: 0,\n        totalPlacementValue: 0,\n        totalOwed: 0,\n        totalPaid: 0,\n      })\n    }\n\n    fetchData()\n  }, [])\n\n  const filteredCPs = commercialPartners.filter(cp => {\n    const matchesStatus = statusFilter === 'all' || cp.status === statusFilter\n    const matchesSearch = !search ||\n      cp.name?.toLowerCase().includes(search.toLowerCase()) ||\n      cp.legal_name?.toLowerCase().includes(search.toLowerCase()) ||\n      cp.contact_name?.toLowerCase().includes(search.toLowerCase()) ||\n      cp.jurisdiction?.toLowerCase().includes(search.toLowerCase())\n    const matchesDeal = dealFilter === 'all' || cp.deal_ids.includes(dealFilter)\n    return matchesStatus && matchesSearch && matchesDeal\n  })\n\n  const today = new Date()\n  const thirtyDaysFromNow = new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000)\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        <span className=\"ml-3 text-muted-foreground\">Loading commercial partners...</span>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-16\">\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Commercial Partners</h3>\n        <p className=\"text-muted-foreground\">{error}</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">My Commercial Partners</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {arrangerInfo ? `Commercial partners working with ${arrangerInfo.legal_name}` : 'View all commercial partners'}\n          </p>\n        </div>\n        <Link href=\"/versotech_main/fee-plans\">\n          <Button variant=\"outline\" size=\"sm\">\n            <FileText className=\"h-4 w-4 mr-2\" />\n            Fee Plans\n          </Button>\n        </Link>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Building2 className=\"h-4 w-4\" />Total CPs\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{summary.totalCPs}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">In your network</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />Active\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{summary.activeCPs}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">With valid contracts</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Users className=\"h-4 w-4\" />Clients\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">{summary.totalClients}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Total clients served</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Handshake className=\"h-4 w-4\" />Placement Value\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-purple-600\">{formatCurrency(summary.totalPlacementValue, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Total placed</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <DollarSign className=\"h-4 w-4\" />Fees Owed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-yellow-600\">{formatCurrency(summary.totalOwed, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Pending payment</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />Fees Paid\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{formatCurrency(summary.totalPaid, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Total paid out</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input placeholder=\"Search commercial partners...\" value={search} onChange={(e) => setSearch(e.target.value)} className=\"pl-10\" />\n            </div>\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-full md:w-48\"><SelectValue placeholder=\"Filter by status\" /></SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((o) => <SelectItem key={o.value} value={o.value}>{o.label}</SelectItem>)}\n              </SelectContent>\n            </Select>\n            {deals.length > 0 && (\n              <Select value={dealFilter} onValueChange={setDealFilter}>\n                <SelectTrigger className=\"w-full md:w-56\">\n                  <SelectValue placeholder=\"Filter by deal\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Deals</SelectItem>\n                  {deals.map((deal) => (\n                    <SelectItem key={deal.id} value={deal.id}>\n                      {deal.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Commercial Partners Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Commercial Partners</CardTitle>\n          <CardDescription>\n            {filteredCPs.length} partner{filteredCPs.length !== 1 ? 's' : ''} found\n            {arrangerInfo && ' • Click a row to view details'}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredCPs.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <Building2 className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">{search || statusFilter !== 'all' ? 'No partners match your filters' : 'No commercial partners in your network yet'}</p>\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Partner</TableHead>\n                    <TableHead>Type</TableHead>\n                    <TableHead>Jurisdiction</TableHead>\n                    <TableHead>Fee Plans</TableHead>\n                    <TableHead>Placements</TableHead>\n                    <TableHead>Payments</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead className=\"w-10\"></TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredCPs.map((cp) => {\n                    const isExpiringSoon = cp.contract_end_date && new Date(cp.contract_end_date) <= thirtyDaysFromNow && new Date(cp.contract_end_date) > today\n                    const isExpired = cp.contract_end_date && new Date(cp.contract_end_date) <= today\n                    return (\n                      <TableRow\n                        key={cp.id}\n                        className={cn(arrangerInfo && 'cursor-pointer hover:bg-muted/50 transition-colors')}\n                        onClick={() => arrangerInfo && handleCPClick(cp.id)}\n                      >\n                        <TableCell>\n                          <div className=\"flex items-center gap-3\">\n                            {cp.logo_url ? (\n                              <img src={cp.logo_url} alt={cp.name} className=\"h-10 w-10 rounded-lg object-cover\" />\n                            ) : (\n                              <div className=\"h-10 w-10 rounded-lg bg-muted flex items-center justify-center\"><Building2 className=\"h-5 w-5 text-muted-foreground\" /></div>\n                            )}\n                            <div>\n                              <div className=\"font-medium\">{cp.name}</div>\n                              {cp.contact_email && <div className=\"text-xs text-muted-foreground flex items-center gap-1\"><Mail className=\"h-3 w-3\" />{cp.contact_email}</div>}\n                            </div>\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          {cp.cp_type ? <Badge variant=\"secondary\" className=\"capitalize\">{cp.cp_type.replace('_', ' ')}</Badge> : <span className=\"text-muted-foreground text-xs\">—</span>}\n                        </TableCell>\n                        <TableCell>\n                          {cp.jurisdiction ? (\n                            <div className=\"flex items-center gap-1\">\n                              <Globe className=\"h-3 w-3 text-muted-foreground\" />\n                              <span className=\"text-sm\">{cp.jurisdiction}</span>\n                            </div>\n                          ) : <span className=\"text-muted-foreground text-xs\">—</span>}\n                        </TableCell>\n                        <TableCell>\n                          {cp.fee_plans.length > 0 ? (\n                            <div className=\"flex flex-wrap gap-1\">\n                              {cp.fee_plans.slice(0, 2).map((fp) => (\n                                <Badge\n                                  key={fp.id}\n                                  variant={fp.is_active ? 'default' : 'secondary'}\n                                  className=\"text-xs\"\n                                >\n                                  {fp.name}\n                                </Badge>\n                              ))}\n                              {cp.fee_plans.length > 2 && (\n                                <Badge variant=\"outline\" className=\"text-xs\">\n                                  +{cp.fee_plans.length - 2}\n                                </Badge>\n                              )}\n                            </div>\n                          ) : (\n                            <span className=\"text-muted-foreground text-xs\">No fee plans</span>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          <div>\n                            <div className=\"font-medium\">{formatCurrency(cp.total_placement_value, 'USD')}</div>\n                            <div className=\"text-xs text-muted-foreground\">{cp.deals_count} deal{cp.deals_count !== 1 ? 's' : ''} • {cp.clients_count} client{cp.clients_count !== 1 ? 's' : ''}</div>\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          <PartnerCommissionSummary\n                            summary={cp.commission_summary}\n                            variant=\"inline\"\n                          />\n                        </TableCell>\n                        <TableCell>\n                          <div className=\"space-y-1\">\n                            <Badge variant=\"outline\" className={cn('capitalize', STATUS_STYLES[cp.status] || STATUS_STYLES.active)}>{cp.status}</Badge>\n                            {cp.kyc_status && <div><Badge variant=\"secondary\" className={cn('text-xs', KYC_STYLES[cp.kyc_status] || '')}>KYC: {cp.kyc_status.replace('_', ' ')}</Badge></div>}\n                            {isExpired && <Badge variant=\"destructive\" className=\"text-xs\">Contract Expired</Badge>}\n                            {isExpiringSoon && !isExpired && <Badge variant=\"outline\" className=\"text-xs bg-yellow-100\">Expiring Soon</Badge>}\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          {arrangerInfo && (\n                            <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n                          )}\n                        </TableCell>\n                      </TableRow>\n                    )\n                  })}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Detail Drawer */}\n      <CommercialPartnerDetailDrawer\n        commercialPartnerId={selectedCPId}\n        open={drawerOpen}\n        onOpenChange={setDrawerOpen}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}