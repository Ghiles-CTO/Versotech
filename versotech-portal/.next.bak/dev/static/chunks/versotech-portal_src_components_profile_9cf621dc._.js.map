{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/profile/password-change-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Loader2, Lock, Eye, EyeOff, Check, X } from 'lucide-react'\nimport { toast } from 'sonner'\n\nexport function PasswordChangeForm() {\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [showCurrentPassword, setShowCurrentPassword] = useState(false)\n  const [showNewPassword, setShowNewPassword] = useState(false)\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false)\n\n  const [formData, setFormData] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: ''\n  })\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }))\n  }\n\n  const validatePassword = (password: string) => {\n    const checks = {\n      length: password.length >= 8,\n      uppercase: /[A-Z]/.test(password),\n      lowercase: /[a-z]/.test(password),\n      number: /[0-9]/.test(password),\n      special: /[!@#$%^&*(),.?\":{}|<>]/.test(password)\n    }\n    return checks\n  }\n\n  const passwordChecks = validatePassword(formData.newPassword)\n  const isPasswordValid = Object.values(passwordChecks).every(check => check)\n  const passwordsMatch = formData.newPassword === formData.confirmPassword && formData.confirmPassword !== ''\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isPasswordValid) {\n      toast.error('Password does not meet requirements')\n      return\n    }\n\n    if (!passwordsMatch) {\n      toast.error('Passwords do not match')\n      return\n    }\n\n    setIsSubmitting(true)\n\n    try {\n      const response = await fetch('/api/auth/password', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          currentPassword: formData.currentPassword,\n          newPassword: formData.newPassword\n        })\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to update password')\n      }\n\n      toast.success('Password updated successfully')\n\n      // Reset form\n      setFormData({\n        currentPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      })\n    } catch (error: any) {\n      console.error('Error updating password:', error)\n      toast.error('Failed to update password', {\n        description: error.message\n      })\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const PasswordRequirement = ({ met, text }: { met: boolean; text: string }) => (\n    <div className=\"flex items-center gap-2 text-sm\">\n      {met ? (\n        <Check className=\"h-4 w-4 text-green-500\" />\n      ) : (\n        <X className=\"h-4 w-4 text-gray-400\" />\n      )}\n      <span className={met ? 'text-green-600' : 'text-gray-600'}>\n        {text}\n      </span>\n    </div>\n  )\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Change Password</CardTitle>\n        <CardDescription>\n          Update your password to keep your account secure\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"currentPassword\">\n              Current Password <span className=\"text-destructive\">*</span>\n            </Label>\n            <div className=\"relative\">\n              <Input\n                id=\"currentPassword\"\n                name=\"currentPassword\"\n                type={showCurrentPassword ? 'text' : 'password'}\n                value={formData.currentPassword}\n                onChange={handleChange}\n                required\n                placeholder=\"Enter your current password\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowCurrentPassword(!showCurrentPassword)}\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700\"\n              >\n                {showCurrentPassword ? (\n                  <EyeOff className=\"h-4 w-4\" />\n                ) : (\n                  <Eye className=\"h-4 w-4\" />\n                )}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"newPassword\">\n              New Password <span className=\"text-destructive\">*</span>\n            </Label>\n            <div className=\"relative\">\n              <Input\n                id=\"newPassword\"\n                name=\"newPassword\"\n                type={showNewPassword ? 'text' : 'password'}\n                value={formData.newPassword}\n                onChange={handleChange}\n                required\n                placeholder=\"Enter your new password\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowNewPassword(!showNewPassword)}\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700\"\n              >\n                {showNewPassword ? (\n                  <EyeOff className=\"h-4 w-4\" />\n                ) : (\n                  <Eye className=\"h-4 w-4\" />\n                )}\n              </button>\n            </div>\n\n            {formData.newPassword && (\n              <div className=\"mt-3 space-y-1 p-3 bg-gray-50 rounded-md border border-gray-200\">\n                <p className=\"text-sm font-medium mb-2 text-gray-900\">Password Requirements:</p>\n                <PasswordRequirement met={passwordChecks.length} text=\"At least 8 characters\" />\n                <PasswordRequirement met={passwordChecks.uppercase} text=\"One uppercase letter\" />\n                <PasswordRequirement met={passwordChecks.lowercase} text=\"One lowercase letter\" />\n                <PasswordRequirement met={passwordChecks.number} text=\"One number\" />\n                <PasswordRequirement met={passwordChecks.special} text=\"One special character\" />\n              </div>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"confirmPassword\">\n              Confirm New Password <span className=\"text-destructive\">*</span>\n            </Label>\n            <div className=\"relative\">\n              <Input\n                id=\"confirmPassword\"\n                name=\"confirmPassword\"\n                type={showConfirmPassword ? 'text' : 'password'}\n                value={formData.confirmPassword}\n                onChange={handleChange}\n                required\n                placeholder=\"Confirm your new password\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700\"\n              >\n                {showConfirmPassword ? (\n                  <EyeOff className=\"h-4 w-4\" />\n                ) : (\n                  <Eye className=\"h-4 w-4\" />\n                )}\n              </button>\n            </div>\n\n            {formData.confirmPassword && (\n              <div className=\"flex items-center gap-2 text-sm\">\n                {passwordsMatch ? (\n                  <>\n                    <Check className=\"h-4 w-4 text-green-500\" />\n                    <span className=\"text-green-600\">Passwords match</span>\n                  </>\n                ) : (\n                  <>\n                    <X className=\"h-4 w-4 text-destructive\" />\n                    <span className=\"text-destructive\">Passwords do not match</span>\n                  </>\n                )}\n              </div>\n            )}\n          </div>\n\n          <div className=\"pt-4 border-t\">\n            <Button\n              type=\"submit\"\n              disabled={\n                isSubmitting ||\n                !formData.currentPassword ||\n                !isPasswordValid ||\n                !passwordsMatch\n              }\n              className=\"w-full sm:w-auto\"\n            >\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Updating Password...\n                </>\n              ) : (\n                <>\n                  <Lock className=\"mr-2 h-4 w-4\" />\n                  Update Password\n                </>\n              )}\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 545, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/profile/preferences-editor.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Label } from '@/components/ui/label'\nimport { Switch } from '@/components/ui/switch'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from '@/components/ui/alert-dialog'\nimport { Loader2, Save, Bell, ShieldCheck, Mail, Phone, MessageSquare, Download, Trash2, Shield, PlayCircle } from 'lucide-react'\nimport { useTourOptional } from '@/contexts/tour-context'\nimport type { LucideIcon } from 'lucide-react'\nimport { toast } from 'sonner'\n\ninterface PreferencesEditorProps {\n  onUpdate?: () => void\n  variant?: 'investor' | 'staff' | 'arranger'\n}\n\nexport function PreferencesEditor({ onUpdate, variant = 'investor' }: PreferencesEditorProps) {\n  const tourContext = useTourOptional()\n  const isStaff = variant === 'staff'\n  const isArranger = variant === 'arranger'\n  const [isLoading, setIsLoading] = useState(!isStaff && !isArranger)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  // GDPR state\n  const [isExporting, setIsExporting] = useState(false)\n  const [isRequestingDeletion, setIsRequestingDeletion] = useState(false)\n  const [deletionReason, setDeletionReason] = useState('')\n  const [deletionConfirmed, setDeletionConfirmed] = useState(false)\n  const [hasPendingDeletion, setHasPendingDeletion] = useState(false)\n\n  const [preferences, setPreferences] = useState({\n    notification_settings: {\n      email_notifications: true,\n      deal_updates: true,\n      message_notifications: true\n    }\n  })\n\n  const loadPreferences = useCallback(async () => {\n    setIsLoading(true)\n    try {\n      const response = await fetch('/api/dashboard-preferences')\n      const data = await response.json()\n\n      if (response.ok && data.preferences) {\n        setPreferences({\n          notification_settings: data.preferences.notification_settings || preferences.notification_settings\n        })\n      }\n    } catch (error: any) {\n      console.error('Error loading preferences:', error)\n      toast.error('Failed to load preferences')\n    } finally {\n      setIsLoading(false)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // Check for pending deletion requests\n  const checkPendingDeletion = useCallback(async () => {\n    try {\n      const response = await fetch('/api/gdpr/deletion-request')\n      const data = await response.json()\n      if (response.ok && data.has_pending) {\n        setHasPendingDeletion(true)\n      }\n    } catch (error) {\n      console.error('Error checking pending deletion:', error)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (isStaff || isArranger) {\n      setIsLoading(false)\n      return\n    }\n    loadPreferences()\n    checkPendingDeletion()\n  }, [isStaff, isArranger, loadPreferences, checkPendingDeletion])\n\n  // GDPR: Export data handler\n  const handleExportData = async () => {\n    setIsExporting(true)\n    try {\n      const response = await fetch('/api/gdpr/export', {\n        method: 'POST',\n      })\n\n      if (!response.ok) {\n        throw new Error('Export failed')\n      }\n\n      // Get the blob and download\n      const blob = await response.blob()\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `verso-data-export-${new Date().toISOString().split('T')[0]}.json`\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      a.remove()\n\n      toast.success('Your data has been exported successfully')\n    } catch (error) {\n      console.error('Export error:', error)\n      toast.error('Failed to export your data. Please try again.')\n    } finally {\n      setIsExporting(false)\n    }\n  }\n\n  // GDPR: Request deletion handler\n  const handleRequestDeletion = async () => {\n    if (!deletionReason || deletionReason.length < 10) {\n      toast.error('Please provide a reason (at least 10 characters)')\n      return\n    }\n    if (!deletionConfirmed) {\n      toast.error('Please confirm you understand the consequences')\n      return\n    }\n\n    setIsRequestingDeletion(true)\n    try {\n      const response = await fetch('/api/gdpr/deletion-request', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          reason: deletionReason,\n          confirm_understood: deletionConfirmed\n        })\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to submit request')\n      }\n\n      toast.success('Your deletion request has been submitted and will be reviewed within 30 days.')\n      setHasPendingDeletion(true)\n      setDeletionReason('')\n      setDeletionConfirmed(false)\n    } catch (error: any) {\n      console.error('Deletion request error:', error)\n      toast.error(error.message || 'Failed to submit deletion request')\n    } finally {\n      setIsRequestingDeletion(false)\n    }\n  }\n\n  const handleNotificationChange = (key: string, value: boolean) => {\n    setPreferences(prev => ({\n      ...prev,\n      notification_settings: {\n        ...prev.notification_settings,\n        [key]: value\n      }\n    }))\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsSubmitting(true)\n\n    try {\n      const response = await fetch('/api/dashboard-preferences', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(preferences)\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to update preferences')\n      }\n\n      toast.success('Preferences updated successfully')\n      onUpdate?.()\n    } catch (error: any) {\n      console.error('Error updating preferences:', error)\n      toast.error('Failed to update preferences', {\n        description: error.message\n      })\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  // Arranger-specific notifications\n  if (isArranger) {\n    const arrangerChannels: {\n      label: string\n      description: string\n      icon: LucideIcon\n      configurable: boolean\n    }[] = [\n      {\n        label: 'Mandate Updates',\n        description: 'Notifications about new mandates, status changes, and investor activity on your deals.',\n        icon: Mail,\n        configurable: true\n      },\n      {\n        label: 'Subscription Packs',\n        description: 'Alerts when subscription packs require your signature or have status updates.',\n        icon: MessageSquare,\n        configurable: true\n      },\n      {\n        label: 'Payment Requests',\n        description: 'Notifications about fee events, invoice submissions, and payment confirmations.',\n        icon: Bell,\n        configurable: true\n      },\n      {\n        label: 'Compliance Alerts',\n        description: 'License expiry reminders, KYC renewal notices, and regulatory updates.',\n        icon: ShieldCheck,\n        configurable: false\n      }\n    ]\n\n    return (\n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <Bell className=\"h-5 w-5 text-primary\" />\n              <CardTitle>Notification Preferences</CardTitle>\n            </div>\n            <CardDescription>\n              Manage how you receive updates about your mandates and business activities\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {arrangerChannels.map(channel => (\n              <div\n                key={channel.label}\n                className=\"flex items-start justify-between gap-4 rounded-lg border p-4\"\n              >\n                <div className=\"flex items-start gap-3\">\n                  <channel.icon className=\"mt-1 h-4 w-4 text-muted-foreground\" />\n                  <div>\n                    <p className=\"text-sm font-semibold\">{channel.label}</p>\n                    <p className=\"text-sm text-muted-foreground\">{channel.description}</p>\n                  </div>\n                </div>\n                {channel.configurable ? (\n                  <Switch defaultChecked />\n                ) : (\n                  <span className=\"text-xs text-emerald-600 font-medium bg-emerald-50 px-2 py-1 rounded\">\n                    Always on\n                  </span>\n                )}\n              </div>\n            ))}\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-blue-200 bg-blue-50/50\">\n          <CardContent className=\"py-4\">\n            <div className=\"flex gap-3\">\n              <ShieldCheck className=\"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n              <div className=\"text-sm\">\n                <p className=\"font-medium text-blue-900\">Compliance Notifications</p>\n                <p className=\"text-blue-700 mt-1\">\n                  Some notifications cannot be disabled as they are required for regulatory compliance.\n                  These include license expiry warnings and mandatory KYC renewal reminders.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Platform Tour Section for Arranger */}\n        {tourContext && (\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center gap-2\">\n                <PlayCircle className=\"h-5 w-5 text-primary\" />\n                <CardTitle>Platform Tour</CardTitle>\n              </div>\n              <CardDescription>\n                Take a guided tour of the platform features\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"space-y-0.5\">\n                  <Label>Restart Platform Tour</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Walk through the platform features again with an interactive guide\n                  </p>\n                </div>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => tourContext.startTour()}\n                >\n                  <PlayCircle className=\"mr-2 h-4 w-4\" />\n                  Start Tour\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    )\n  }\n\n  if (isStaff) {\n    const staffChannels: {\n      label: string\n      description: string\n      icon: LucideIcon\n    }[] = [\n      {\n        label: 'Email Alerts',\n        description: 'Critical incidents, investor escalations, and compliance reminders are always routed to your inbox.',\n        icon: Mail\n      },\n      {\n        label: 'In-App Notifications',\n        description: 'Task reminders, approvals, and operational updates show up in the notification center automatically.',\n        icon: MessageSquare\n      },\n      {\n        label: 'SMS Escalations',\n        description: 'After-hours or high-priority issues trigger backup SMS alerts for the on-call operations lead.',\n        icon: Phone\n      }\n    ]\n\n    return (\n      <div className=\"space-y-6\">\n        <Card className=\"bg-white/5 border-white/10\">\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <ShieldCheck className=\"h-5 w-5 text-primary\" />\n              <CardTitle className=\"text-white\">Notifications are centrally managed</CardTitle>\n            </div>\n            <CardDescription className=\"text-white/70\">\n              Staff alerts follow an operations-wide policy so nothing critical can be turned off accidentally.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {staffChannels.map(channel => (\n              <div key={channel.label} className=\"flex items-start gap-3 rounded-lg border border-white/10 bg-white/5 p-4\">\n                <channel.icon className=\"mt-1 h-4 w-4 text-primary\" />\n                <div>\n                  <p className=\"text-sm font-semibold text-white\">{channel.label}</p>\n                  <p className=\"text-sm text-white/70\">{channel.description}</p>\n                  <p className=\"text-xs text-emerald-300/90 mt-1\">Status: Always on</p>\n                </div>\n              </div>\n            ))}\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-white/5 border-white/10\">\n          <CardHeader>\n            <CardTitle className=\"text-white\">Need to adjust routing?</CardTitle>\n            <CardDescription className=\"text-white/70\">\n              Changes go through the Platform team so audit trails stay intact.\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <p className=\"text-sm text-white/70\">\n              Share the context (investor, deal, urgency) and the team will update the notification matrix or escalate to engineering.\n            </p>\n            <Button\n              asChild\n              className=\"bg-white/10 text-white border border-white/20 hover:bg-white/20\"\n            >\n              <a href=\"mailto:admin@versotech.com?subject=Notification%20routing%20update\">\n                Contact Platform Team\n              </a>\n            </Button>\n          </CardContent>\n        </Card>\n\n        {/* Platform Tour Section for Staff */}\n        {tourContext && (\n          <Card className=\"bg-white/5 border-white/10\">\n            <CardHeader>\n              <div className=\"flex items-center gap-2\">\n                <PlayCircle className=\"h-5 w-5 text-primary\" />\n                <CardTitle className=\"text-white\">Platform Tour</CardTitle>\n              </div>\n              <CardDescription className=\"text-white/70\">\n                Take a guided tour of the platform features\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"space-y-0.5\">\n                  <Label className=\"text-white\">Restart Platform Tour</Label>\n                  <p className=\"text-sm text-white/70\">\n                    Walk through the platform features again with an interactive guide\n                  </p>\n                </div>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"border-white/20 text-white hover:bg-white/10\"\n                  onClick={() => tourContext.startTour()}\n                >\n                  <PlayCircle className=\"mr-2 h-4 w-4\" />\n                  Start Tour\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* GDPR Data & Privacy Section for Staff */}\n        <Card className=\"bg-white/5 border-amber-500/30\">\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <Shield className=\"h-5 w-5 text-amber-400\" />\n              <CardTitle className=\"text-white\">Data & Privacy</CardTitle>\n            </div>\n            <CardDescription className=\"text-white/70\">\n              Manage your personal data in accordance with GDPR regulations\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Export Data */}\n            <div className=\"flex items-center justify-between\">\n              <div className=\"space-y-0.5\">\n                <Label className=\"text-white\">Export Your Data</Label>\n                <p className=\"text-sm text-white/70\">\n                  Download a copy of all your personal data stored in our system\n                </p>\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                className=\"border-white/20 text-white hover:bg-white/10\"\n                onClick={handleExportData}\n                disabled={isExporting}\n              >\n                {isExporting ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Exporting...\n                  </>\n                ) : (\n                  <>\n                    <Download className=\"mr-2 h-4 w-4\" />\n                    Export My Data\n                  </>\n                )}\n              </Button>\n            </div>\n\n            <div className=\"border-t border-white/10 pt-6\">\n              {/* Request Account Deletion */}\n              <div className=\"space-y-4\">\n                <div className=\"space-y-0.5\">\n                  <Label className=\"text-red-400\">Request Account Deletion</Label>\n                  <p className=\"text-sm text-white/70\">\n                    Request permanent deletion of your account and all associated data.\n                    This action is irreversible and will be reviewed by our team.\n                  </p>\n                </div>\n\n                {hasPendingDeletion ? (\n                  <div className=\"rounded-lg border border-amber-500/30 bg-amber-500/10 p-4\">\n                    <p className=\"text-sm text-amber-300\">\n                      You have a pending deletion request. Our team will review it within 30 days.\n                    </p>\n                  </div>\n                ) : (\n                  <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                      <Button\n                        type=\"button\"\n                        variant=\"destructive\"\n                        className=\"w-full sm:w-auto\"\n                      >\n                        <Trash2 className=\"mr-2 h-4 w-4\" />\n                        Request Account Deletion\n                      </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                      <AlertDialogHeader>\n                        <AlertDialogTitle>Request Account Deletion</AlertDialogTitle>\n                        <AlertDialogDescription asChild>\n                          <div className=\"space-y-4\">\n                            <p>\n                              This will submit a request to permanently delete your account\n                              and all associated data. This action cannot be undone.\n                            </p>\n\n                            <div className=\"space-y-2\">\n                              <Label htmlFor=\"staff-deletion-reason\">\n                                Please tell us why you want to delete your account:\n                              </Label>\n                              <Textarea\n                                id=\"staff-deletion-reason\"\n                                placeholder=\"Enter your reason (minimum 10 characters)\"\n                                value={deletionReason}\n                                onChange={(e) => setDeletionReason(e.target.value)}\n                                className=\"min-h-[100px]\"\n                              />\n                            </div>\n\n                            <div className=\"flex items-start space-x-2\">\n                              <Checkbox\n                                id=\"staff-deletion-confirm\"\n                                checked={deletionConfirmed}\n                                onCheckedChange={(checked) => setDeletionConfirmed(checked === true)}\n                              />\n                              <label\n                                htmlFor=\"staff-deletion-confirm\"\n                                className=\"text-sm text-muted-foreground leading-tight\"\n                              >\n                                I understand that this will permanently delete my account,\n                                all my data, and I will lose access to the platform.\n                              </label>\n                            </div>\n                          </div>\n                        </AlertDialogDescription>\n                      </AlertDialogHeader>\n                      <AlertDialogFooter>\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\n                        <AlertDialogAction\n                          onClick={handleRequestDeletion}\n                          disabled={isRequestingDeletion || !deletionReason || deletionReason.length < 10 || !deletionConfirmed}\n                          className=\"bg-red-600 hover:bg-red-700\"\n                        >\n                          {isRequestingDeletion ? (\n                            <>\n                              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                              Submitting...\n                            </>\n                          ) : (\n                            'Submit Deletion Request'\n                          )}\n                        </AlertDialogAction>\n                      </AlertDialogFooter>\n                    </AlertDialogContent>\n                  </AlertDialog>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n      </div>\n    )\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      {/* Notification Settings */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <Bell className=\"h-5 w-5\" />\n            <CardTitle>Notification Preferences</CardTitle>\n          </div>\n          <CardDescription>\n            Manage how you receive notifications and updates\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"email_notifications\">Email Notifications</Label>\n              <p className=\"text-sm text-gray-600\">\n                Receive notifications via email\n              </p>\n            </div>\n            <Switch\n              id=\"email_notifications\"\n              checked={preferences.notification_settings.email_notifications}\n              onCheckedChange={(checked) =>\n                handleNotificationChange('email_notifications', checked)\n              }\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"deal_updates\">Deal Updates</Label>\n              <p className=\"text-sm text-gray-600\">\n                Get notified about deal status changes\n              </p>\n            </div>\n            <Switch\n              id=\"deal_updates\"\n              checked={preferences.notification_settings.deal_updates}\n              onCheckedChange={(checked) =>\n                handleNotificationChange('deal_updates', checked)\n              }\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label htmlFor=\"message_notifications\">Message Notifications</Label>\n              <p className=\"text-sm text-gray-600\">\n                Get notified about new messages\n              </p>\n            </div>\n            <Switch\n              id=\"message_notifications\"\n              checked={preferences.notification_settings.message_notifications}\n              onCheckedChange={(checked) =>\n                handleNotificationChange('message_notifications', checked)\n              }\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Platform Tour Section */}\n      {tourContext && (\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <PlayCircle className=\"h-5 w-5\" />\n              <CardTitle>Platform Tour</CardTitle>\n            </div>\n            <CardDescription>\n              Take a guided tour of the platform features\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"space-y-0.5\">\n                <Label>Restart Platform Tour</Label>\n                <p className=\"text-sm text-muted-foreground\">\n                  Walk through the platform features again with an interactive guide\n                </p>\n              </div>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => tourContext.startTour()}\n              >\n                <PlayCircle className=\"mr-2 h-4 w-4\" />\n                Start Tour\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Save Button */}\n      <div className=\"flex justify-end\">\n        <Button\n          type=\"submit\"\n          disabled={isSubmitting}\n          className=\"w-full sm:w-auto\"\n        >\n          {isSubmitting ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Saving Preferences...\n            </>\n          ) : (\n            <>\n              <Save className=\"mr-2 h-4 w-4\" />\n              Save Preferences\n            </>\n          )}\n        </Button>\n      </div>\n\n      {/* GDPR Data & Privacy Section */}\n      <Card className=\"border-amber-200\">\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <Shield className=\"h-5 w-5 text-amber-600\" />\n            <CardTitle>Data & Privacy</CardTitle>\n          </div>\n          <CardDescription>\n            Manage your personal data in accordance with GDPR regulations\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Export Data */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-0.5\">\n              <Label>Export Your Data</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Download a copy of all your personal data stored in our system\n              </p>\n            </div>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={handleExportData}\n              disabled={isExporting}\n            >\n              {isExporting ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Exporting...\n                </>\n              ) : (\n                <>\n                  <Download className=\"mr-2 h-4 w-4\" />\n                  Export My Data\n                </>\n              )}\n            </Button>\n          </div>\n\n          <div className=\"border-t pt-6\">\n            {/* Request Account Deletion */}\n            <div className=\"space-y-4\">\n              <div className=\"space-y-0.5\">\n                <Label className=\"text-destructive\">Request Account Deletion</Label>\n                <p className=\"text-sm text-muted-foreground\">\n                  Request permanent deletion of your account and all associated data.\n                  This action is irreversible and will be reviewed by our team.\n                </p>\n              </div>\n\n              {hasPendingDeletion ? (\n                <div className=\"rounded-lg border border-amber-300 bg-amber-50 p-4\">\n                  <p className=\"text-sm text-amber-800\">\n                    You have a pending deletion request. Our team will review it within 30 days.\n                  </p>\n                </div>\n              ) : (\n                <AlertDialog>\n                  <AlertDialogTrigger asChild>\n                    <Button\n                      type=\"button\"\n                      variant=\"destructive\"\n                      className=\"w-full sm:w-auto\"\n                    >\n                      <Trash2 className=\"mr-2 h-4 w-4\" />\n                      Request Account Deletion\n                    </Button>\n                  </AlertDialogTrigger>\n                  <AlertDialogContent>\n                    <AlertDialogHeader>\n                      <AlertDialogTitle>Request Account Deletion</AlertDialogTitle>\n                      <AlertDialogDescription asChild>\n                        <div className=\"space-y-4\">\n                          <p>\n                            This will submit a request to permanently delete your account\n                            and all associated data. This action cannot be undone.\n                          </p>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"deletion-reason\">\n                              Please tell us why you want to delete your account:\n                            </Label>\n                            <Textarea\n                              id=\"deletion-reason\"\n                              placeholder=\"Enter your reason (minimum 10 characters)\"\n                              value={deletionReason}\n                              onChange={(e) => setDeletionReason(e.target.value)}\n                              className=\"min-h-[100px]\"\n                            />\n                          </div>\n\n                          <div className=\"flex items-start space-x-2\">\n                            <Checkbox\n                              id=\"deletion-confirm\"\n                              checked={deletionConfirmed}\n                              onCheckedChange={(checked) => setDeletionConfirmed(checked === true)}\n                            />\n                            <label\n                              htmlFor=\"deletion-confirm\"\n                              className=\"text-sm text-muted-foreground leading-tight\"\n                            >\n                              I understand that this will permanently delete my account,\n                              all my data, and I will lose access to all investments and documents.\n                            </label>\n                          </div>\n                        </div>\n                      </AlertDialogDescription>\n                    </AlertDialogHeader>\n                    <AlertDialogFooter>\n                      <AlertDialogCancel>Cancel</AlertDialogCancel>\n                      <AlertDialogAction\n                        onClick={handleRequestDeletion}\n                        disabled={isRequestingDeletion || !deletionReason || deletionReason.length < 10 || !deletionConfirmed}\n                        className=\"bg-destructive hover:bg-destructive/90\"\n                      >\n                        {isRequestingDeletion ? (\n                          <>\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                            Submitting...\n                          </>\n                        ) : (\n                          'Submit Deletion Request'\n                        )}\n                      </AlertDialogAction>\n                    </AlertDialogFooter>\n                  </AlertDialogContent>\n                </AlertDialog>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </form>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2443, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/profile/gdpr-controls.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from '@/components/ui/alert-dialog'\nimport {\n  Loader2,\n  Download,\n  Trash2,\n  Shield,\n  FileText,\n  ExternalLink,\n} from 'lucide-react'\nimport { toast } from 'sonner'\nimport { cn } from '@/lib/utils'\n\ninterface GDPRControlsProps {\n  variant?: 'light' | 'dark'\n  className?: string\n}\n\n/**\n * GDPR Controls Component\n * User Stories 2.7.1-2.7.7: Data export, deletion, restriction rights\n *\n * Reusable component for managing GDPR data rights across all profile types\n */\nexport function GDPRControls({ variant = 'light', className }: GDPRControlsProps) {\n  const isDark = variant === 'dark'\n\n  const [isExporting, setIsExporting] = useState(false)\n  const [isRequestingDeletion, setIsRequestingDeletion] = useState(false)\n  const [deletionReason, setDeletionReason] = useState('')\n  const [deletionConfirmed, setDeletionConfirmed] = useState(false)\n  const [hasPendingDeletion, setHasPendingDeletion] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Check for pending deletion requests on mount\n  const checkPendingDeletion = useCallback(async () => {\n    try {\n      const response = await fetch('/api/gdpr/deletion-request')\n      const data = await response.json()\n      if (response.ok && data.has_pending) {\n        setHasPendingDeletion(true)\n      }\n    } catch (error) {\n      console.error('Error checking pending deletion:', error)\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    checkPendingDeletion()\n  }, [checkPendingDeletion])\n\n  // GDPR: Export data handler\n  const handleExportData = async () => {\n    setIsExporting(true)\n    try {\n      const response = await fetch('/api/gdpr/export', {\n        method: 'POST',\n      })\n\n      if (!response.ok) {\n        throw new Error('Export failed')\n      }\n\n      // Get the blob and download\n      const blob = await response.blob()\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `verso-data-export-${new Date().toISOString().split('T')[0]}.json`\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      a.remove()\n\n      toast.success('Your data has been exported successfully')\n    } catch (error) {\n      console.error('Export error:', error)\n      toast.error('Failed to export your data. Please try again.')\n    } finally {\n      setIsExporting(false)\n    }\n  }\n\n  // GDPR: Request deletion handler\n  const handleRequestDeletion = async () => {\n    if (!deletionReason || deletionReason.length < 10) {\n      toast.error('Please provide a reason (at least 10 characters)')\n      return\n    }\n    if (!deletionConfirmed) {\n      toast.error('Please confirm you understand the consequences')\n      return\n    }\n\n    setIsRequestingDeletion(true)\n    try {\n      const response = await fetch('/api/gdpr/deletion-request', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          reason: deletionReason,\n          confirm_understood: deletionConfirmed\n        })\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to submit request')\n      }\n\n      toast.success('Your deletion request has been submitted and will be reviewed within 30 days.')\n      setHasPendingDeletion(true)\n      setDeletionReason('')\n      setDeletionConfirmed(false)\n    } catch (error: any) {\n      console.error('Deletion request error:', error)\n      toast.error(error.message || 'Failed to submit deletion request')\n    } finally {\n      setIsRequestingDeletion(false)\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n      </div>\n    )\n  }\n\n  return (\n    <div className={cn('space-y-6', className)}>\n      {/* Header Card */}\n      <Card className={cn(\n        isDark ? 'bg-white/5 border-white/10' : 'border-slate-200'\n      )}>\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <Shield className={cn('h-5 w-5', isDark ? 'text-primary' : 'text-blue-600')} />\n            <CardTitle className={isDark ? 'text-white' : ''}>Your Data Rights</CardTitle>\n          </div>\n          <CardDescription className={isDark ? 'text-white/70' : ''}>\n            Under GDPR, you have rights to access, export, and request deletion of your personal data\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className={cn(\n            'rounded-lg p-4',\n            isDark ? 'bg-blue-500/10 border border-blue-500/20' : 'bg-blue-50 border border-blue-200'\n          )}>\n            <div className=\"flex items-start gap-3\">\n              <FileText className={cn('h-5 w-5 flex-shrink-0 mt-0.5', isDark ? 'text-blue-400' : 'text-blue-600')} />\n              <div className=\"text-sm\">\n                <p className={cn('font-medium', isDark ? 'text-blue-300' : 'text-blue-900')}>\n                  About Your Privacy Rights\n                </p>\n                <p className={cn('mt-1', isDark ? 'text-blue-200/80' : 'text-blue-700')}>\n                  As a VERSO user, you have the right to access your data, receive a portable copy,\n                  request corrections, and request deletion. All requests are processed within 30 days.\n                </p>\n                <a\n                  href=\"/privacy-policy\"\n                  target=\"_blank\"\n                  className={cn(\n                    'inline-flex items-center gap-1 mt-2 text-sm font-medium',\n                    isDark ? 'text-blue-300 hover:text-blue-200' : 'text-blue-600 hover:text-blue-700'\n                  )}\n                >\n                  View Privacy Policy\n                  <ExternalLink className=\"h-3 w-3\" />\n                </a>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Export Data Card */}\n      <Card className={cn(\n        isDark ? 'bg-white/5 border-white/10' : ''\n      )}>\n        <CardHeader>\n          <CardTitle className={cn('text-base', isDark ? 'text-white' : '')}>\n            Export Your Data\n          </CardTitle>\n          <CardDescription className={isDark ? 'text-white/70' : ''}>\n            Download a complete copy of all your personal data stored in our system\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            <div className={cn('text-sm', isDark ? 'text-white/60' : 'text-muted-foreground')}>\n              Includes: Profile information, preferences, activity history, and documents metadata\n            </div>\n            <Button\n              type=\"button\"\n              variant={isDark ? 'outline' : 'default'}\n              className={cn(\n                'shrink-0',\n                isDark && 'border-white/20 text-white hover:bg-white/10'\n              )}\n              onClick={handleExportData}\n              disabled={isExporting}\n            >\n              {isExporting ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Exporting...\n                </>\n              ) : (\n                <>\n                  <Download className=\"mr-2 h-4 w-4\" />\n                  Download My Data\n                </>\n              )}\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Request Deletion Card */}\n      <Card className={cn(\n        isDark ? 'bg-white/5 border-red-500/30' : 'border-red-200'\n      )}>\n        <CardHeader>\n          <CardTitle className={cn('text-base', isDark ? 'text-red-400' : 'text-red-600')}>\n            Request Account Deletion\n          </CardTitle>\n          <CardDescription className={isDark ? 'text-white/70' : ''}>\n            Permanently delete your account and all associated data. This action is irreversible.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {hasPendingDeletion ? (\n            <div className={cn(\n              'rounded-lg border p-4',\n              isDark ? 'border-amber-500/30 bg-amber-500/10' : 'border-amber-300 bg-amber-50'\n            )}>\n              <p className={cn('text-sm', isDark ? 'text-amber-300' : 'text-amber-800')}>\n                You have a pending deletion request. Our team will review it within 30 days.\n                You will receive an email notification once the review is complete.\n              </p>\n            </div>\n          ) : (\n            <AlertDialog>\n              <AlertDialogTrigger asChild>\n                <Button\n                  type=\"button\"\n                  variant=\"destructive\"\n                  className=\"w-full sm:w-auto\"\n                >\n                  <Trash2 className=\"mr-2 h-4 w-4\" />\n                  Request Account Deletion\n                </Button>\n              </AlertDialogTrigger>\n              <AlertDialogContent className={isDark ? 'bg-zinc-900 border-white/10' : ''}>\n                <AlertDialogHeader>\n                  <AlertDialogTitle className={isDark ? 'text-white' : ''}>\n                    Request Account Deletion\n                  </AlertDialogTitle>\n                  <AlertDialogDescription asChild>\n                    <div className=\"space-y-4\">\n                      <p className={isDark ? 'text-white/70' : ''}>\n                        This will submit a request to permanently delete your account\n                        and all associated data. This action cannot be undone.\n                      </p>\n\n                      <div className=\"space-y-2\">\n                        <Label\n                          htmlFor=\"gdpr-deletion-reason\"\n                          className={isDark ? 'text-white' : ''}\n                        >\n                          Please tell us why you want to delete your account:\n                        </Label>\n                        <Textarea\n                          id=\"gdpr-deletion-reason\"\n                          placeholder=\"Enter your reason (minimum 10 characters)\"\n                          value={deletionReason}\n                          onChange={(e) => setDeletionReason(e.target.value)}\n                          className={cn(\n                            'min-h-[100px]',\n                            isDark && 'bg-white/5 border-white/10 text-white placeholder:text-white/40'\n                          )}\n                        />\n                      </div>\n\n                      <div className=\"flex items-start space-x-2\">\n                        <Checkbox\n                          id=\"gdpr-deletion-confirm\"\n                          checked={deletionConfirmed}\n                          onCheckedChange={(checked) => setDeletionConfirmed(checked === true)}\n                        />\n                        <label\n                          htmlFor=\"gdpr-deletion-confirm\"\n                          className={cn(\n                            'text-sm leading-tight',\n                            isDark ? 'text-white/70' : 'text-muted-foreground'\n                          )}\n                        >\n                          I understand that this will permanently delete my account,\n                          all my data, and I will lose access to the platform and all\n                          associated documents.\n                        </label>\n                      </div>\n                    </div>\n                  </AlertDialogDescription>\n                </AlertDialogHeader>\n                <AlertDialogFooter>\n                  <AlertDialogCancel className={isDark ? 'bg-white/10 text-white border-white/20 hover:bg-white/20' : ''}>\n                    Cancel\n                  </AlertDialogCancel>\n                  <AlertDialogAction\n                    onClick={handleRequestDeletion}\n                    disabled={isRequestingDeletion || !deletionReason || deletionReason.length < 10 || !deletionConfirmed}\n                    className=\"bg-red-600 hover:bg-red-700\"\n                  >\n                    {isRequestingDeletion ? (\n                      <>\n                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                        Submitting...\n                      </>\n                    ) : (\n                      'Submit Deletion Request'\n                    )}\n                  </AlertDialogAction>\n                </AlertDialogFooter>\n              </AlertDialogContent>\n            </AlertDialog>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3051, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/profile/introducer-kyc-documents-tab.tsx"],"sourcesContent":["'use client'\n\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  FileText,\n  Upload,\n  Download,\n  Trash2,\n  CheckCircle2,\n  Circle,\n  Loader2,\n  Shield,\n  AlertCircle\n} from 'lucide-react'\nimport { useState, useEffect, useRef, useCallback } from 'react'\nimport { toast } from 'sonner'\nimport { cn } from '@/lib/utils'\n\ninterface Document {\n  id: string\n  name: string\n  type: string\n  file_name: string\n  file_key: string\n  created_at: string\n  file_size_bytes?: number\n  created_by?: {\n    display_name?: string\n    email?: string\n  }\n}\n\n// Required KYC documents for introducers\nconst REQUIRED_DOCUMENTS = [\n  { label: 'Government-issued ID', value: 'government_id' },\n  { label: 'Proof of Address', value: 'proof_of_address' },\n  { label: 'Professional Qualifications', value: 'professional_qualifications' },\n  { label: 'Bank Account Details', value: 'bank_account_details' },\n  { label: 'Tax Registration Document', value: 'tax_registration' },\n]\n\ninterface IntroducerKYCDocumentsTabProps {\n  introducerId: string\n  introducerName?: string\n  kycStatus?: string\n}\n\nexport function IntroducerKYCDocumentsTab({\n  introducerId,\n  introducerName,\n  kycStatus\n}: IntroducerKYCDocumentsTabProps) {\n  const [documents, setDocuments] = useState<Document[]>([])\n  const [loading, setLoading] = useState(true)\n  const [uploading, setUploading] = useState<string | null>(null)\n  const [deleting, setDeleting] = useState<string | null>(null)\n  const [currentKycStatus, setCurrentKycStatus] = useState(kycStatus)\n  const fileInputRefs = useRef<{ [key: string]: HTMLInputElement | null }>({})\n\n  const fetchDocuments = useCallback(async () => {\n    if (!introducerId) return\n\n    setLoading(true)\n    try {\n      const response = await fetch('/api/introducers/me/documents')\n      if (!response.ok) throw new Error('Failed to fetch documents')\n\n      const data = await response.json()\n      setDocuments(data.documents || [])\n    } catch (error) {\n      console.error('Error fetching documents:', error)\n      toast.error('Failed to load documents')\n    } finally {\n      setLoading(false)\n    }\n  }, [introducerId])\n\n  useEffect(() => {\n    fetchDocuments()\n  }, [fetchDocuments])\n\n  const handleUpload = async (file: File, documentType: string) => {\n    if (!introducerId) return\n\n    const maxSize = 50 * 1024 * 1024\n    if (file.size > maxSize) {\n      toast.error('File size exceeds 50MB limit')\n      return\n    }\n\n    const allowedTypes = [\n      'application/pdf',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'application/msword',\n      'image/jpeg',\n      'image/png',\n      'image/webp',\n      'text/plain'\n    ]\n\n    if (!allowedTypes.includes(file.type)) {\n      toast.error('Invalid file type. Please upload PDF, DOC, DOCX, JPG, PNG, or TXT files')\n      return\n    }\n\n    setUploading(documentType)\n\n    try {\n      const formData = new FormData()\n      formData.append('file', file)\n      formData.append('type', documentType)\n      formData.append('name', file.name.replace(/\\.[^/.]+$/, ''))\n\n      const response = await fetch('/api/introducers/me/documents', {\n        method: 'POST',\n        body: formData\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error || 'Upload failed')\n      }\n\n      const docTypeLabel = REQUIRED_DOCUMENTS.find(d => d.value === documentType)?.label || documentType\n      toast.success(`${docTypeLabel} uploaded successfully`)\n\n      await fetchDocuments()\n    } catch (error: unknown) {\n      console.error('Upload error:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to upload document')\n    } finally {\n      setUploading(null)\n      if (fileInputRefs.current[documentType]) {\n        fileInputRefs.current[documentType]!.value = ''\n      }\n    }\n  }\n\n  const handleDownload = async (doc: Document) => {\n    try {\n      const response = await fetch(`/api/documents/${doc.id}/download`)\n\n      if (!response.ok) {\n        throw new Error('Download failed')\n      }\n\n      const blob = await response.blob()\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = doc.file_name || doc.name\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(a)\n\n      toast.success('Document downloaded')\n    } catch (error) {\n      console.error('Download error:', error)\n      toast.error('Failed to download document')\n    }\n  }\n\n  const formatFileSize = (bytes?: number) => {\n    if (!bytes) return 'Unknown size'\n    if (bytes < 1024) return `${bytes} B`\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`\n  }\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString('en-GB', {\n      day: 'numeric',\n      month: 'short',\n      year: 'numeric'\n    })\n  }\n\n  const uploadedCount = documents.filter(d =>\n    REQUIRED_DOCUMENTS.some(req => req.value === d.type)\n  ).length\n  const completionPercentage = Math.round((uploadedCount / REQUIRED_DOCUMENTS.length) * 100)\n\n  const getStatusColor = (status?: string) => {\n    switch (status) {\n      case 'approved': return 'bg-green-100 text-green-800 border-green-200'\n      case 'pending':\n      case 'pending_review': return 'bg-yellow-100 text-yellow-800 border-yellow-200'\n      case 'rejected': return 'bg-red-100 text-red-800 border-red-200'\n      default: return 'bg-gray-100 text-gray-800 border-gray-200'\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* KYC Status Header */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className={cn(\n                \"h-10 w-10 rounded-full flex items-center justify-center\",\n                completionPercentage === 100 ? \"bg-green-100\" : \"bg-blue-100\"\n              )}>\n                <Shield className={cn(\n                  \"h-5 w-5\",\n                  completionPercentage === 100 ? \"text-green-600\" : \"text-blue-600\"\n                )} />\n              </div>\n              <div>\n                <CardTitle>KYC Documents</CardTitle>\n                <CardDescription>\n                  {introducerName ? `Compliance documents for ${introducerName}` : 'Upload required compliance documents'}\n                </CardDescription>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-2xl font-bold text-foreground\">\n                  {uploadedCount}/{REQUIRED_DOCUMENTS.length}\n                </span>\n                {currentKycStatus && (\n                  <Badge variant=\"outline\" className={cn('capitalize', getStatusColor(currentKycStatus))}>\n                    KYC: {currentKycStatus.replace('_', ' ')}\n                  </Badge>\n                )}\n              </div>\n              <div className=\"text-sm text-muted-foreground mt-1\">\n                {completionPercentage}% complete\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\n            <div\n              className={cn(\n                \"h-2.5 rounded-full transition-all duration-500\",\n                completionPercentage === 100 ? 'bg-green-500' :\n                completionPercentage >= 50 ? 'bg-yellow-500' : 'bg-blue-500'\n              )}\n              style={{ width: `${completionPercentage}%` }}\n            />\n          </div>\n          {completionPercentage < 100 && (\n            <p className=\"text-xs text-muted-foreground mt-2\">\n              Upload all required documents to complete KYC verification\n            </p>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Required Documents Checklist */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">Required Documents</CardTitle>\n          <CardDescription>\n            These documents are required for regulatory compliance and KYC verification\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {loading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {REQUIRED_DOCUMENTS.map((docType) => {\n                const uploaded = documents.find(d => d.type === docType.value)\n                const isUploading = uploading === docType.value\n                const isDeleting = deleting === uploaded?.id\n\n                return (\n                  <div\n                    key={docType.value}\n                    className={cn(\n                      \"flex items-center justify-between gap-4 py-3 px-4 rounded-lg border transition-colors\",\n                      uploaded ? \"border-green-200 bg-green-50/50\" : \"border-gray-200 hover:bg-gray-50\"\n                    )}\n                  >\n                    <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                      {uploaded ? (\n                        <CheckCircle2 className=\"h-5 w-5 text-green-600 flex-shrink-0\" />\n                      ) : (\n                        <Circle className=\"h-5 w-5 text-muted-foreground flex-shrink-0\" />\n                      )}\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm font-medium text-foreground truncate\">\n                          {docType.label}\n                        </p>\n                        {uploaded && (\n                          <p className=\"text-xs text-muted-foreground truncate\">\n                            {uploaded.file_name}  {formatFileSize(uploaded.file_size_bytes)}  {formatDate(uploaded.created_at)}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center gap-2 flex-shrink-0\">\n                      {uploaded ? (\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleDownload(uploaded)}\n                          className=\"h-8 w-8 p-0\"\n                          title=\"Download\"\n                        >\n                          <Download className=\"h-4 w-4\" />\n                        </Button>\n                      ) : (\n                        <>\n                          <Input\n                            ref={(el) => { fileInputRefs.current[docType.value] = el }}\n                            type=\"file\"\n                            className=\"hidden\"\n                            accept=\".pdf,.doc,.docx,.jpg,.jpeg,.png,.webp,.txt\"\n                            onChange={(e) => {\n                              const file = e.target.files?.[0]\n                              if (file) handleUpload(file, docType.value)\n                            }}\n                            disabled={isUploading}\n                          />\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => fileInputRefs.current[docType.value]?.click()}\n                            disabled={isUploading}\n                          >\n                            {isUploading ? (\n                              <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                            ) : (\n                              <Upload className=\"h-4 w-4 mr-2\" />\n                            )}\n                            Upload\n                          </Button>\n                        </>\n                      )}\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Info Card */}\n      <Card className=\"bg-blue-50/50 border-blue-200\">\n        <CardContent className=\"py-4\">\n          <div className=\"flex gap-3\">\n            <AlertCircle className=\"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n            <div className=\"text-sm space-y-1\">\n              <p className=\"font-medium text-blue-900\">Document Requirements</p>\n              <ul className=\"text-blue-700 space-y-0.5\">\n                <li> Supported formats: PDF, DOC, DOCX, JPG, PNG, TXT</li>\n                <li> Maximum file size: 50MB per file</li>\n                <li> Documents must be current and valid</li>\n                <li> VERSO staff will review your documents for KYC approval</li>\n              </ul>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3689, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/profile/signature-specimen-tab.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Alert, AlertDescription } from '@/components/ui/alert'\nimport {\n  PenTool,\n  Upload,\n  Trash2,\n  Save,\n  RotateCcw,\n  CheckCircle2,\n  Loader2,\n  AlertCircle,\n  Image as ImageIcon,\n} from 'lucide-react'\nimport { toast } from 'sonner'\nimport { cn } from '@/lib/utils'\nimport SignatureCanvas from 'react-signature-canvas'\n\ntype EntityType = 'investor' | 'commercial_partner' | 'partner' | 'introducer' | 'lawyer'\n\ninterface SignatureSpecimenTabProps {\n  currentSignatureUrl?: string | null\n  onSignatureUpdate?: (url: string | null) => void\n  entityType?: EntityType\n  entityId?: string\n}\n\nfunction getSignatureApiEndpoints(entityType: EntityType = 'investor') {\n  switch (entityType) {\n    case 'commercial_partner':\n      return {\n        get: '/api/commercial-partners/me/signature',\n        post: '/api/commercial-partners/me/upload-signature',\n        delete: '/api/commercial-partners/me/signature',\n      }\n    case 'partner':\n      return {\n        get: '/api/partners/me/signature',\n        post: '/api/partners/me/upload-signature',\n        delete: '/api/partners/me/signature',\n      }\n    case 'introducer':\n      return {\n        get: '/api/introducers/me/signature',\n        post: '/api/introducers/me/upload-signature',\n        delete: '/api/introducers/me/signature',\n      }\n    case 'lawyer':\n      return {\n        get: '/api/lawyers/me/signature',\n        post: '/api/lawyers/me/upload-signature',\n        delete: '/api/lawyers/me/signature',\n      }\n    case 'investor':\n    default:\n      return {\n        get: '/api/signature-specimen',\n        post: '/api/signature-specimen',\n        delete: '/api/signature-specimen',\n      }\n  }\n}\n\nexport function SignatureSpecimenTab({\n  currentSignatureUrl,\n  onSignatureUpdate,\n  entityType = 'investor',\n}: SignatureSpecimenTabProps) {\n  const apiEndpoints = getSignatureApiEndpoints(entityType)\n  const sigCanvasRef = useRef<SignatureCanvas>(null)\n\n  const [hasDrawn, setHasDrawn] = useState(false)\n  const [signatureUrl, setSignatureUrl] = useState<string | null>(currentSignatureUrl || null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isSaving, setIsSaving] = useState(false)\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null)\n  const [uploadPreview, setUploadPreview] = useState<string | null>(null)\n  const [activeTab, setActiveTab] = useState<'draw' | 'upload'>('draw')\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    loadExistingSignature()\n  }, [])\n\n  const loadExistingSignature = async () => {\n    setIsLoading(true)\n    try {\n      const response = await fetch(apiEndpoints.get)\n      if (response.ok) {\n        const data = await response.json()\n        if (data.signature_url) {\n          setSignatureUrl(data.signature_url)\n        }\n      }\n    } catch (err) {\n      console.error('Error loading signature:', err)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleDrawEnd = () => {\n    if (sigCanvasRef.current && !sigCanvasRef.current.isEmpty()) {\n      setHasDrawn(true)\n      setError(null)\n    }\n  }\n\n  const clearCanvas = () => {\n    if (sigCanvasRef.current) {\n      sigCanvasRef.current.clear()\n      setHasDrawn(false)\n    }\n  }\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    if (!['image/png', 'image/jpeg', 'image/webp'].includes(file.type)) {\n      setError('Please upload a PNG, JPEG, or WebP image')\n      return\n    }\n\n    if (file.size > 2 * 1024 * 1024) {\n      setError('File size must be less than 2MB')\n      return\n    }\n\n    setUploadedFile(file)\n    setError(null)\n\n    const reader = new FileReader()\n    reader.onload = (event) => {\n      setUploadPreview(event.target?.result as string)\n    }\n    reader.readAsDataURL(file)\n  }\n\n  const clearUpload = () => {\n    setUploadedFile(null)\n    setUploadPreview(null)\n  }\n\n  const saveSignature = async () => {\n    setIsSaving(true)\n    setError(null)\n\n    try {\n      let blob: Blob\n\n      if (activeTab === 'draw') {\n        if (!sigCanvasRef.current || sigCanvasRef.current.isEmpty()) {\n          setError('Please draw your signature first')\n          setIsSaving(false)\n          return\n        }\n\n        // Get trimmed canvas data URL (removes whitespace around signature)\n        const trimmedCanvas = sigCanvasRef.current.getTrimmedCanvas()\n        const dataUrl = trimmedCanvas.toDataURL('image/png')\n\n        // Convert data URL to blob\n        const response = await fetch(dataUrl)\n        blob = await response.blob()\n      } else {\n        if (!uploadedFile) {\n          setError('Please upload an image first')\n          setIsSaving(false)\n          return\n        }\n        blob = uploadedFile\n      }\n\n      const formData = new FormData()\n      formData.append('signature', blob, 'signature.png')\n\n      const apiResponse = await fetch(apiEndpoints.post, {\n        method: 'POST',\n        body: formData,\n      })\n\n      if (!apiResponse.ok) {\n        const errorData = await apiResponse.json()\n        throw new Error(errorData.error || 'Failed to save signature')\n      }\n\n      const data = await apiResponse.json()\n      setSignatureUrl(data.signature_url)\n      onSignatureUpdate?.(data.signature_url)\n\n      if (activeTab === 'draw') {\n        clearCanvas()\n      } else {\n        clearUpload()\n      }\n\n      toast.success('Signature saved successfully')\n    } catch (err) {\n      console.error('Error saving signature:', err)\n      setError(err instanceof Error ? err.message : 'Failed to save signature')\n      toast.error('Failed to save signature')\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const deleteSignature = async () => {\n    if (!signatureUrl) return\n\n    setIsSaving(true)\n    try {\n      const response = await fetch(apiEndpoints.delete, {\n        method: 'DELETE',\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to delete signature')\n      }\n\n      setSignatureUrl(null)\n      onSignatureUpdate?.(null)\n      toast.success('Signature removed')\n    } catch (err) {\n      console.error('Error deleting signature:', err)\n      toast.error('Failed to remove signature')\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"flex items-center justify-center\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {signatureUrl && (\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <CardTitle className=\"text-base flex items-center gap-2\">\n                  <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                  Current Signature\n                </CardTitle>\n                <CardDescription>\n                  Your signature specimen on file\n                </CardDescription>\n              </div>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={deleteSignature}\n                disabled={isSaving}\n                className=\"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-950/50\"\n              >\n                {isSaving ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                ) : (\n                  <Trash2 className=\"h-4 w-4 mr-2\" />\n                )}\n                Remove\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"border rounded-lg p-4 bg-white flex items-center justify-center\">\n              <img\n                src={signatureUrl}\n                alt=\"Your signature\"\n                className=\"max-h-24 object-contain\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">\n            {signatureUrl ? 'Update Signature' : 'Add Signature'}\n          </CardTitle>\n          <CardDescription>\n            Draw your signature or upload an image. This will be used for document signing.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {error && (\n            <Alert variant=\"destructive\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'draw' | 'upload')}>\n            <TabsList className=\"grid w-full grid-cols-2\">\n              <TabsTrigger value=\"draw\" className=\"gap-2\">\n                <PenTool className=\"h-4 w-4\" />\n                Draw\n              </TabsTrigger>\n              <TabsTrigger value=\"upload\" className=\"gap-2\">\n                <Upload className=\"h-4 w-4\" />\n                Upload\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"draw\" className=\"mt-4 space-y-4\">\n              <div className=\"border-2 border-dashed rounded-lg bg-white overflow-hidden\">\n                <SignatureCanvas\n                  ref={sigCanvasRef}\n                  canvasProps={{\n                    className: 'w-full h-40 cursor-crosshair',\n                    style: { width: '100%', height: '160px' }\n                  }}\n                  penColor=\"black\"\n                  backgroundColor=\"white\"\n                  onEnd={handleDrawEnd}\n                />\n              </div>\n              <p className=\"text-xs text-muted-foreground text-center\">\n                Draw your signature using your mouse or touch screen\n              </p>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  onClick={clearCanvas}\n                  disabled={!hasDrawn}\n                  className=\"flex-1\"\n                >\n                  <RotateCcw className=\"h-4 w-4 mr-2\" />\n                  Clear\n                </Button>\n                <Button\n                  onClick={saveSignature}\n                  disabled={!hasDrawn || isSaving}\n                  className=\"flex-1\"\n                >\n                  {isSaving ? (\n                    <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                  ) : (\n                    <Save className=\"h-4 w-4 mr-2\" />\n                  )}\n                  Save Signature\n                </Button>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"upload\" className=\"mt-4 space-y-4\">\n              {uploadPreview ? (\n                <div className=\"space-y-4\">\n                  <div className=\"border rounded-lg p-4 bg-white flex items-center justify-center\">\n                    <img\n                      src={uploadPreview}\n                      alt=\"Signature preview\"\n                      className=\"max-h-32 object-contain\"\n                    />\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={clearUpload}\n                      className=\"flex-1\"\n                    >\n                      <RotateCcw className=\"h-4 w-4 mr-2\" />\n                      Choose Different\n                    </Button>\n                    <Button\n                      onClick={saveSignature}\n                      disabled={isSaving}\n                      className=\"flex-1\"\n                    >\n                      {isSaving ? (\n                        <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                      ) : (\n                        <Save className=\"h-4 w-4 mr-2\" />\n                      )}\n                      Save Signature\n                    </Button>\n                  </div>\n                </div>\n              ) : (\n                <div>\n                  <Label\n                    htmlFor=\"signature-upload\"\n                    className={cn(\n                      \"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-lg cursor-pointer\",\n                      \"bg-muted/50 hover:bg-muted transition-colors\"\n                    )}\n                  >\n                    <div className=\"flex flex-col items-center justify-center pt-5 pb-6\">\n                      <ImageIcon className=\"h-10 w-10 text-muted-foreground mb-3\" />\n                      <p className=\"mb-2 text-sm text-muted-foreground\">\n                        <span className=\"font-semibold\">Click to upload</span> or drag and drop\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        PNG, JPEG or WebP (max 2MB)\n                      </p>\n                    </div>\n                    <Input\n                      id=\"signature-upload\"\n                      type=\"file\"\n                      accept=\"image/png,image/jpeg,image/webp\"\n                      className=\"hidden\"\n                      onChange={handleFileUpload}\n                    />\n                  </Label>\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n\n      <Card className=\"bg-blue-50/50 border-blue-200 dark:bg-blue-950/30 dark:border-blue-900\">\n        <CardContent className=\"py-4\">\n          <div className=\"flex gap-3\">\n            <PenTool className=\"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\n            <div className=\"text-sm\">\n              <p className=\"font-medium text-blue-900 dark:text-blue-100\">About Signature Specimens</p>\n              <p className=\"text-blue-700 dark:text-blue-300 mt-1\">\n                Your signature specimen will be used for digitally signing documents such as\n                subscription agreements, NDAs, and introducer agreements. Make sure your\n                signature is clear and consistent with your legal documents.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4483, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/profile/generic-entity-members-tab.tsx"],"sourcesContent":["'use client'\n\n/**\n * Generic Entity Members Tab\n *\n * A reusable component for managing entity members (directors, UBOs, signatories)\n * across all persona types: investor, arranger, partner, introducer, lawyer, commercial_partner\n *\n * Uses MemberKYCEditDialog for comprehensive KYC field editing.\n */\n\nimport { useState, useEffect } from 'react'\nimport { Users, UserPlus, Edit, Trash2, ShieldCheck, Clock, AlertCircle } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog'\nimport { toast } from 'sonner'\nimport { MemberKYCEditDialog } from '@/components/shared/member-kyc-edit-dialog'\n\n// Entity types that support members\nexport type EntityType = 'investor' | 'partner' | 'introducer' | 'lawyer' | 'arranger' | 'commercial_partner'\n\n// Member data structure\ninterface EntityMember {\n  id: string\n  full_name?: string\n  first_name?: string\n  middle_name?: string\n  last_name?: string\n  name_suffix?: string\n  role: string\n  role_title?: string\n  email?: string\n  phone_mobile?: string\n  phone_office?: string\n  date_of_birth?: string\n  country_of_birth?: string\n  nationality?: string\n  residential_street?: string\n  residential_line_2?: string\n  residential_city?: string\n  residential_state?: string\n  residential_postal_code?: string\n  residential_country?: string\n  is_us_citizen?: boolean\n  is_us_taxpayer?: boolean\n  us_taxpayer_id?: string\n  country_of_tax_residency?: string\n  tax_id_number?: string\n  id_type?: string\n  id_number?: string\n  id_issue_date?: string\n  id_expiry_date?: string\n  id_issuing_country?: string\n  ownership_percentage?: number\n  is_beneficial_owner?: boolean\n  is_signatory?: boolean\n  kyc_status?: string\n  is_active?: boolean\n  created_at?: string\n}\n\ninterface GenericEntityMembersTabProps {\n  entityType: EntityType\n  entityId: string\n  entityName?: string\n  /** Base API endpoint for members, e.g., '/api/investors/me/members' */\n  apiEndpoint: string\n  /** Whether the current user can manage members */\n  canManage?: boolean\n  /** Optional custom title */\n  title?: string\n  /** Optional custom description */\n  description?: string\n}\n\nconst ROLE_LABELS: Record<string, string> = {\n  director: 'Director',\n  shareholder: 'Shareholder',\n  beneficial_owner: 'Beneficial Owner',\n  authorized_signatory: 'Authorized Signatory',\n  officer: 'Officer',\n  partner: 'Partner',\n  ubo: 'UBO',\n  signatory: 'Signatory',\n  authorized_representative: 'Authorized Representative',\n  beneficiary: 'Beneficiary',\n  trustee: 'Trustee',\n  managing_member: 'Managing Member',\n  general_partner: 'General Partner',\n  limited_partner: 'Limited Partner',\n  other: 'Other',\n}\n\nexport function GenericEntityMembersTab({\n  entityType,\n  entityId,\n  entityName,\n  apiEndpoint,\n  canManage = true,\n  title = 'Entity Members',\n  description = 'Manage directors, shareholders, and beneficial owners',\n}: GenericEntityMembersTabProps) {\n  const [members, setMembers] = useState<EntityMember[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  // Dialog states\n  const [editDialogOpen, setEditDialogOpen] = useState(false)\n  const [editingMember, setEditingMember] = useState<EntityMember | null>(null)\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false)\n  const [deletingMemberId, setDeletingMemberId] = useState<string | null>(null)\n  const [isDeleting, setIsDeleting] = useState(false)\n\n  // Load members\n  useEffect(() => {\n    loadMembers()\n  }, [apiEndpoint])\n\n  const loadMembers = async () => {\n    setLoading(true)\n    setError(null)\n\n    try {\n      const response = await fetch(apiEndpoint)\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to load members')\n      }\n\n      const data = await response.json()\n      setMembers(data.members || [])\n    } catch (err) {\n      console.error('Error loading members:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load members')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleAddMember = () => {\n    setEditingMember(null)\n    setEditDialogOpen(true)\n  }\n\n  const handleEditMember = (member: EntityMember) => {\n    setEditingMember(member)\n    setEditDialogOpen(true)\n  }\n\n  const handleDeleteClick = (memberId: string) => {\n    setDeletingMemberId(memberId)\n    setDeleteDialogOpen(true)\n  }\n\n  const handleDeleteConfirm = async () => {\n    if (!deletingMemberId) return\n\n    setIsDeleting(true)\n    try {\n      const response = await fetch(`${apiEndpoint}/${deletingMemberId}`, {\n        method: 'DELETE',\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to delete member')\n      }\n\n      toast.success('Member removed successfully')\n      setDeleteDialogOpen(false)\n      setDeletingMemberId(null)\n      await loadMembers()\n    } catch (err) {\n      console.error('Error deleting member:', err)\n      toast.error(err instanceof Error ? err.message : 'Failed to delete member')\n    } finally {\n      setIsDeleting(false)\n    }\n  }\n\n  const handleDialogSuccess = () => {\n    loadMembers()\n  }\n\n  const getDisplayName = (member: EntityMember) => {\n    if (member.full_name) return member.full_name\n    const parts = [member.first_name, member.middle_name, member.last_name, member.name_suffix].filter(Boolean)\n    return parts.length > 0 ? parts.join(' ') : 'Unknown'\n  }\n\n  const getRoleBadge = (role: string) => {\n    return <Badge variant=\"outline\">{ROLE_LABELS[role] || role}</Badge>\n  }\n\n  const getKYCStatusBadge = (status?: string) => {\n    switch (status) {\n      case 'approved':\n        return <Badge className=\"bg-green-500\"><ShieldCheck className=\"w-3 h-3 mr-1\" />Approved</Badge>\n      case 'pending':\n      case 'submitted':\n        return <Badge className=\"bg-yellow-500\"><Clock className=\"w-3 h-3 mr-1\" />Pending</Badge>\n      case 'rejected':\n        return <Badge className=\"bg-red-500\"><AlertCircle className=\"w-3 h-3 mr-1\" />Rejected</Badge>\n      default:\n        return <Badge variant=\"outline\">Not Submitted</Badge>\n    }\n  }\n\n  // Convert member data to form format for MemberKYCEditDialog\n  const getMemberInitialData = (member: EntityMember | null) => {\n    if (!member) return undefined\n\n    return {\n      role: member.role as any,\n      first_name: member.first_name || '',\n      middle_name: member.middle_name || '',\n      last_name: member.last_name || '',\n      name_suffix: member.name_suffix || '',\n      date_of_birth: member.date_of_birth || '',\n      country_of_birth: member.country_of_birth || '',\n      nationality: member.nationality || '',\n      email: member.email || '',\n      phone_mobile: member.phone_mobile || '',\n      phone_office: member.phone_office || '',\n      residential_street: member.residential_street || '',\n      residential_line_2: member.residential_line_2 || '',\n      residential_city: member.residential_city || '',\n      residential_state: member.residential_state || '',\n      residential_postal_code: member.residential_postal_code || '',\n      residential_country: member.residential_country || '',\n      is_us_citizen: member.is_us_citizen || false,\n      is_us_taxpayer: member.is_us_taxpayer || false,\n      us_taxpayer_id: member.us_taxpayer_id || '',\n      country_of_tax_residency: member.country_of_tax_residency || '',\n      tax_id_number: member.tax_id_number || '',\n      id_type: member.id_type || '',\n      id_number: member.id_number || '',\n      id_issue_date: member.id_issue_date || '',\n      id_expiry_date: member.id_expiry_date || '',\n      id_issuing_country: member.id_issuing_country || '',\n      ownership_percentage: member.ownership_percentage,\n    }\n  }\n\n  if (loading) {\n    return (\n      <Card>\n        <CardContent className=\"py-12 text-center\">\n          <div className=\"animate-pulse\">Loading members...</div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"py-12 text-center\">\n          <AlertCircle className=\"w-12 h-12 mx-auto text-destructive mb-4\" />\n          <p className=\"text-destructive\">{error}</p>\n          <Button onClick={loadMembers} variant=\"outline\" className=\"mt-4\">\n            Retry\n          </Button>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Users className=\"h-5 w-5\" />\n                {title}\n              </CardTitle>\n              <CardDescription>{description}</CardDescription>\n            </div>\n            {canManage && (\n              <Button onClick={handleAddMember}>\n                <UserPlus className=\"w-4 h-4 mr-2\" />\n                Add Member\n              </Button>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {members.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Users className=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-muted-foreground mb-4\">\n                No members added yet. Add directors, shareholders, or beneficial owners.\n              </p>\n              {canManage && (\n                <Button onClick={handleAddMember} variant=\"outline\">\n                  <UserPlus className=\"w-4 h-4 mr-2\" />\n                  Add Your First Member\n                </Button>\n              )}\n            </div>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Name</TableHead>\n                  <TableHead>Role</TableHead>\n                  <TableHead>Email</TableHead>\n                  <TableHead>Ownership %</TableHead>\n                  <TableHead>KYC Status</TableHead>\n                  {canManage && <TableHead className=\"text-right\">Actions</TableHead>}\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {members.map((member) => (\n                  <TableRow key={member.id}>\n                    <TableCell className=\"font-medium\">\n                      {getDisplayName(member)}\n                      {member.is_beneficial_owner && (\n                        <Badge variant=\"secondary\" className=\"ml-2 text-xs\">UBO</Badge>\n                      )}\n                      {member.is_signatory && (\n                        <Badge variant=\"secondary\" className=\"ml-2 text-xs\">Signatory</Badge>\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      {getRoleBadge(member.role)}\n                      {member.role_title && (\n                        <span className=\"text-sm text-muted-foreground ml-2\">\n                          ({member.role_title})\n                        </span>\n                      )}\n                    </TableCell>\n                    <TableCell>{member.email || 'N/A'}</TableCell>\n                    <TableCell>\n                      {member.ownership_percentage != null ? `${member.ownership_percentage}%` : 'N/A'}\n                    </TableCell>\n                    <TableCell>{getKYCStatusBadge(member.kyc_status)}</TableCell>\n                    {canManage && (\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex items-center justify-end gap-2\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleEditMember(member)}\n                          >\n                            <Edit className=\"w-4 h-4\" />\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleDeleteClick(member.id)}\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </TableCell>\n                    )}\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Edit/Add Member Dialog - Uses MemberKYCEditDialog */}\n      <MemberKYCEditDialog\n        open={editDialogOpen}\n        onOpenChange={setEditDialogOpen}\n        entityType={entityType}\n        entityId={entityId}\n        memberId={editingMember?.id}\n        memberName={editingMember ? getDisplayName(editingMember) : undefined}\n        initialData={getMemberInitialData(editingMember)}\n        apiEndpoint={apiEndpoint}\n        onSuccess={handleDialogSuccess}\n        mode={editingMember ? 'edit' : 'create'}\n      />\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Remove Member</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to remove this member? This action can be undone by contacting support.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleDeleteConfirm}\n              disabled={isDeleting}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              {isDeleting ? 'Removing...' : 'Remove'}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5217, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/profile/notice-contacts-tab.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { z } from 'zod'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { Switch } from '@/components/ui/switch'\nimport {\n  Plus,\n  Mail,\n  Phone,\n  MapPin,\n  Edit,\n  Trash2,\n  AlertCircle,\n  Loader2,\n  Bell,\n} from 'lucide-react'\nimport { toast } from 'sonner'\n\nconst noticeContactSchema = z.object({\n  contact_type: z.enum(['legal', 'tax', 'compliance', 'accounting', 'general', 'other']),\n  contact_name: z.string().min(1, 'Contact name is required'),\n  contact_title: z.string().optional(),\n  email: z.string().email('Invalid email').optional().or(z.literal('')),\n  phone: z.string().optional(),\n  address_line_1: z.string().optional(),\n  address_line_2: z.string().optional(),\n  city: z.string().optional(),\n  state_province: z.string().optional(),\n  postal_code: z.string().optional(),\n  country: z.string().optional(),\n  preferred_method: z.enum(['email', 'mail', 'both']).optional(),\n  receive_copies: z.boolean().optional(),\n})\n\ntype NoticeContactFormData = z.infer<typeof noticeContactSchema>\n\ntype NoticeContact = NoticeContactFormData & {\n  id: string\n  created_at: string\n}\n\nconst CONTACT_TYPES = [\n  { value: 'legal', label: 'Legal' },\n  { value: 'tax', label: 'Tax' },\n  { value: 'compliance', label: 'Compliance' },\n  { value: 'accounting', label: 'Accounting' },\n  { value: 'general', label: 'General' },\n  { value: 'other', label: 'Other' },\n]\n\nconst PREFERRED_METHODS = [\n  { value: 'email', label: 'Email' },\n  { value: 'mail', label: 'Physical Mail' },\n  { value: 'both', label: 'Both' },\n]\n\ninterface NoticeContactsTabProps {\n  apiEndpoint: string // e.g., '/api/investors/me/notice-contacts'\n}\n\nexport function NoticeContactsTab({ apiEndpoint }: NoticeContactsTabProps) {\n  const [contacts, setContacts] = useState<NoticeContact[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [showDialog, setShowDialog] = useState(false)\n  const [editingContact, setEditingContact] = useState<NoticeContact | null>(null)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null)\n\n  const form = useForm<NoticeContactFormData>({\n    resolver: zodResolver(noticeContactSchema),\n    defaultValues: {\n      contact_type: 'general',\n      contact_name: '',\n      contact_title: '',\n      email: '',\n      phone: '',\n      address_line_1: '',\n      address_line_2: '',\n      city: '',\n      state_province: '',\n      postal_code: '',\n      country: '',\n      preferred_method: 'email',\n      receive_copies: true,\n    },\n  })\n\n  const fetchContacts = async () => {\n    try {\n      setIsLoading(true)\n      const response = await fetch(apiEndpoint)\n      if (!response.ok) throw new Error('Failed to fetch contacts')\n      const data = await response.json()\n      setContacts(data.contacts || [])\n    } catch (error) {\n      console.error('Error fetching notice contacts:', error)\n      toast.error('Failed to load notice contacts')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchContacts()\n  }, [apiEndpoint])\n\n  const openAddDialog = () => {\n    setEditingContact(null)\n    form.reset({\n      contact_type: 'general',\n      contact_name: '',\n      contact_title: '',\n      email: '',\n      phone: '',\n      address_line_1: '',\n      address_line_2: '',\n      city: '',\n      state_province: '',\n      postal_code: '',\n      country: '',\n      preferred_method: 'email',\n      receive_copies: true,\n    })\n    setShowDialog(true)\n  }\n\n  const openEditDialog = (contact: NoticeContact) => {\n    setEditingContact(contact)\n    form.reset({\n      contact_type: contact.contact_type,\n      contact_name: contact.contact_name,\n      contact_title: contact.contact_title || '',\n      email: contact.email || '',\n      phone: contact.phone || '',\n      address_line_1: contact.address_line_1 || '',\n      address_line_2: contact.address_line_2 || '',\n      city: contact.city || '',\n      state_province: contact.state_province || '',\n      postal_code: contact.postal_code || '',\n      country: contact.country || '',\n      preferred_method: contact.preferred_method || 'email',\n      receive_copies: contact.receive_copies ?? true,\n    })\n    setShowDialog(true)\n  }\n\n  const onSubmit = async (data: NoticeContactFormData) => {\n    try {\n      setIsSubmitting(true)\n\n      const url = editingContact\n        ? `${apiEndpoint}/${editingContact.id}`\n        : apiEndpoint\n\n      const method = editingContact ? 'PATCH' : 'POST'\n\n      const response = await fetch(url, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to save contact')\n      }\n\n      toast.success(editingContact ? 'Contact updated' : 'Contact added')\n      setShowDialog(false)\n      fetchContacts()\n    } catch (error) {\n      console.error('Error saving notice contact:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to save contact')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleDelete = async (contactId: string) => {\n    try {\n      const response = await fetch(`${apiEndpoint}/${contactId}`, {\n        method: 'DELETE',\n      })\n\n      if (!response.ok) throw new Error('Failed to delete contact')\n\n      toast.success('Contact deleted')\n      setDeleteConfirm(null)\n      fetchContacts()\n    } catch (error) {\n      console.error('Error deleting notice contact:', error)\n      toast.error('Failed to delete contact')\n    }\n  }\n\n  const getTypeBadgeColor = (type: string) => {\n    switch (type) {\n      case 'legal': return 'bg-blue-100 text-blue-800'\n      case 'tax': return 'bg-green-100 text-green-800'\n      case 'compliance': return 'bg-purple-100 text-purple-800'\n      case 'accounting': return 'bg-amber-100 text-amber-800'\n      case 'general': return 'bg-gray-100 text-gray-800'\n      default: return 'bg-slate-100 text-slate-800'\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"py-10\">\n          <div className=\"flex justify-center items-center\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <>\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <div>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Bell className=\"h-5 w-5\" />\n              Notice Contacts\n            </CardTitle>\n            <CardDescription>\n              Manage contacts who should receive formal notices and communications\n            </CardDescription>\n          </div>\n          <Button onClick={openAddDialog}>\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add Contact\n          </Button>\n        </CardHeader>\n        <CardContent>\n          {contacts.length === 0 ? (\n            <div className=\"border border-dashed rounded-lg py-10 text-center\">\n              <AlertCircle className=\"h-10 w-10 text-muted-foreground mx-auto mb-3\" />\n              <p className=\"text-muted-foreground\">No notice contacts configured</p>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Add contacts to receive formal notices and communications\n              </p>\n              <Button variant=\"outline\" className=\"mt-4\" onClick={openAddDialog}>\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add First Contact\n              </Button>\n            </div>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Name</TableHead>\n                  <TableHead>Type</TableHead>\n                  <TableHead>Contact Info</TableHead>\n                  <TableHead>Preferred Method</TableHead>\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {contacts.map((contact) => (\n                  <TableRow key={contact.id}>\n                    <TableCell>\n                      <div>\n                        <div className=\"font-medium\">{contact.contact_name}</div>\n                        {contact.contact_title && (\n                          <div className=\"text-sm text-muted-foreground\">{contact.contact_title}</div>\n                        )}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <Badge className={getTypeBadgeColor(contact.contact_type)}>\n                        {CONTACT_TYPES.find(t => t.value === contact.contact_type)?.label || contact.contact_type}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"space-y-1 text-sm\">\n                        {contact.email && (\n                          <div className=\"flex items-center gap-2\">\n                            <Mail className=\"h-3 w-3 text-muted-foreground\" />\n                            {contact.email}\n                          </div>\n                        )}\n                        {contact.phone && (\n                          <div className=\"flex items-center gap-2\">\n                            <Phone className=\"h-3 w-3 text-muted-foreground\" />\n                            {contact.phone}\n                          </div>\n                        )}\n                        {contact.city && (\n                          <div className=\"flex items-center gap-2\">\n                            <MapPin className=\"h-3 w-3 text-muted-foreground\" />\n                            {contact.city}{contact.country ? `, ${contact.country}` : ''}\n                          </div>\n                        )}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\">\n                        {PREFERRED_METHODS.find(m => m.value === contact.preferred_method)?.label || 'Email'}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex justify-end gap-2\">\n                        <Button variant=\"ghost\" size=\"sm\" onClick={() => openEditDialog(contact)}>\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"text-destructive\"\n                          onClick={() => setDeleteConfirm(contact.id)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Add/Edit Dialog */}\n      <Dialog open={showDialog} onOpenChange={setShowDialog}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingContact ? 'Edit Notice Contact' : 'Add Notice Contact'}\n            </DialogTitle>\n            <DialogDescription>\n              Configure a contact to receive formal notices and communications\n            </DialogDescription>\n          </DialogHeader>\n\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"contact_type\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Contact Type *</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select type\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {CONTACT_TYPES.map((type) => (\n                            <SelectItem key={type.value} value={type.value}>\n                              {type.label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"preferred_method\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Preferred Method</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select method\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {PREFERRED_METHODS.map((method) => (\n                            <SelectItem key={method.value} value={method.value}>\n                              {method.label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"contact_name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Contact Name *</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"John Smith\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"contact_title\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Title</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"General Counsel\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"email\" placeholder=\"john@example.com\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"phone\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Phone</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"+1 (555) 123-4567\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"address_line_1\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Address Line 1</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"123 Main Street\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"address_line_2\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Address Line 2</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Suite 100\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"city\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>City</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"New York\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"state_province\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>State/Province</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"NY\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"postal_code\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Postal Code</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"10001\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"country\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Country</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"USA\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"receive_copies\"\n                render={({ field }) => (\n                  <FormItem className=\"flex items-center justify-between rounded-lg border p-4\">\n                    <div className=\"space-y-0.5\">\n                      <FormLabel>Receive Copies</FormLabel>\n                      <div className=\"text-sm text-muted-foreground\">\n                        Send copies of all formal notices to this contact\n                      </div>\n                    </div>\n                    <FormControl>\n                      <Switch\n                        checked={field.value}\n                        onCheckedChange={field.onChange}\n                      />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n\n              <DialogFooter>\n                <Button type=\"button\" variant=\"outline\" onClick={() => setShowDialog(false)}>\n                  Cancel\n                </Button>\n                <Button type=\"submit\" disabled={isSubmitting}>\n                  {isSubmitting && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\n                  {editingContact ? 'Update Contact' : 'Add Contact'}\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <Dialog open={!!deleteConfirm} onOpenChange={() => setDeleteConfirm(null)}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Delete Notice Contact</DialogTitle>\n            <DialogDescription>\n              Are you sure you want to delete this notice contact? This action cannot be undone.\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setDeleteConfirm(null)}>\n              Cancel\n            </Button>\n            <Button\n              variant=\"destructive\"\n              onClick={() => deleteConfirm && handleDelete(deleteConfirm)}\n            >\n              Delete\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}