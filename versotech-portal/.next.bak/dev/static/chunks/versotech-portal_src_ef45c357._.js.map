{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,oNAAC;YACC,aAAU;YACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;KAbS;AAeT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,+JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,2GACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-7 md:h-6 w-12 md:w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-6 w-6 md:h-5 md:w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,kMAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,oMAAqB;QACpB,WAAW,IAAA,mJAAE,EACX,qYACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,oNAAC,qMAAsB;YACrB,WAAW,IAAA,mJAAE,EACX;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,oMAAqB,CAAC,WAAW"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,yBAAW,kMAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,oNAAC;QACC,WAAW,IAAA,mJAAE,EACX,+RACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,kMAAgB,MAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,oNAAC,4MAAwB;QACvB,KAAK;QACL,WAAW,IAAA,mJAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;0BAET,oNAAC,gNAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,oNAAC;;;;;0BACD,oNAAC,8MAA0B;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,4MAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,kMAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,oNAAC,2NAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,IAAA,mJAAE,EACX,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,oNAAC,uNAAmC;YAAC,WAAU;;;;;;;;;;;MAjB7C;AAoBN,UAAU,WAAW,GAAG,2NAAuC,CAAC,WAAW"}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Wrapper to provide stable ID for SSR hydration\nconst Tabs = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root>\n>(({ id, ...props }, ref) => {\n  const generatedId = React.useId()\n  return <TabsPrimitive.Root ref={ref} id={id ?? generatedId} {...props} />\n})\nTabs.displayName = \"Tabs\"\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;;;AALA;;;;AAOA,iDAAiD;AACjD,MAAM,qBAAO,GAAA,kMAAgB,SAG3B,CAAC,EAAE,EAAE,EAAE,GAAG,OAAO,EAAE;;IACnB,MAAM,cAAc,6LAAW;IAC/B,qBAAO,oNAAC,kMAAkB;QAAC,KAAK;QAAK,IAAI,MAAM;QAAc,GAAG,KAAK;;;;;;AACvE;;AACA,KAAK,WAAW,GAAG;AAEnB,MAAM,yBAAW,kMAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,kMAAkB;QACjB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,sGACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,kMAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,+YACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,kMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oNAAC,qMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qMAAqB,CAAC,WAAW"}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/users/batch-invite-dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useCallback } from 'react'\r\nimport { useForm, useFieldArray } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport { z } from 'zod'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Switch } from '@/components/ui/switch'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { ScrollArea } from '@/components/ui/scroll-area'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport {\r\n  Loader2,\r\n  Mail,\r\n  User,\r\n  Plus,\r\n  Trash2,\r\n  Upload,\r\n  CheckCircle2,\r\n  XCircle,\r\n  AlertCircle,\r\n  Users\r\n} from 'lucide-react'\r\nimport { toast } from 'sonner'\r\n\r\nexport type EntityType = 'investor' | 'arranger' | 'lawyer' | 'introducer' | 'partner' | 'commercial_partner'\r\n\r\nconst inviteSchema = z.object({\r\n  email: z.string().email('Invalid email'),\r\n  display_name: z.string().min(2, 'Name required'),\r\n  title: z.string().optional(),\r\n  role: z.string().optional(),\r\n  is_primary: z.boolean().optional().default(false),\r\n})\r\n\r\nconst batchInviteFormSchema = z.object({\r\n  entity_type: z.enum(['investor', 'arranger', 'lawyer', 'introducer', 'partner', 'commercial_partner']),\r\n  entity_id: z.string().optional(),\r\n  create_entities: z.boolean().optional().default(true),\r\n  invites: z.array(inviteSchema).min(1, 'At least one invite required'),\r\n})\r\n\r\ntype BatchInviteFormData = {\r\n  entity_type: 'investor' | 'arranger' | 'lawyer' | 'introducer' | 'partner' | 'commercial_partner'\r\n  entity_id?: string\r\n  create_entities: boolean\r\n  invites: {\r\n    email: string\r\n    display_name: string\r\n    title?: string\r\n    role?: string\r\n    is_primary: boolean\r\n  }[]\r\n}\r\n\r\ninterface InviteResult {\r\n  email: string\r\n  success: boolean\r\n  user_id?: string\r\n  entity_id?: string\r\n  is_new_user?: boolean\r\n  error?: string\r\n}\r\n\r\ninterface BatchInviteDialogProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  onSuccess?: () => void\r\n  defaultEntityType?: EntityType\r\n  existingEntityId?: string\r\n  existingEntityName?: string\r\n}\r\n\r\nconst ENTITY_TYPE_LABELS: Record<EntityType, string> = {\r\n  investor: 'Investors',\r\n  arranger: 'Arrangers',\r\n  lawyer: 'Law Firms',\r\n  introducer: 'Introducers',\r\n  partner: 'Partners',\r\n  commercial_partner: 'Commercial Partners',\r\n}\r\n\r\nconst ROLE_OPTIONS_BY_ENTITY: Record<EntityType, { value: string; label: string }[]> = {\r\n  investor: [\r\n    { value: 'admin', label: 'Admin' },\r\n    { value: 'member', label: 'Member' },\r\n  ],\r\n  arranger: [\r\n    { value: 'admin', label: 'Admin' },\r\n    { value: 'member', label: 'Member' },\r\n  ],\r\n  lawyer: [\r\n    { value: 'admin', label: 'Admin' },\r\n    { value: 'member', label: 'Member' },\r\n  ],\r\n  partner: [\r\n    { value: 'admin', label: 'Admin' },\r\n    { value: 'member', label: 'Member' },\r\n  ],\r\n  introducer: [\r\n    { value: 'admin', label: 'Admin' },\r\n    { value: 'contact', label: 'Contact' },\r\n  ],\r\n  commercial_partner: [\r\n    { value: 'admin', label: 'Admin' },\r\n    { value: 'contact', label: 'Contact' },\r\n  ],\r\n}\r\n\r\nexport function BatchInviteDialog({\r\n  open,\r\n  onOpenChange,\r\n  onSuccess,\r\n  defaultEntityType = 'investor',\r\n  existingEntityId,\r\n  existingEntityName,\r\n}: BatchInviteDialogProps) {\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [results, setResults] = useState<InviteResult[] | null>(null)\r\n  const [csvInput, setCsvInput] = useState('')\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    control,\r\n    watch,\r\n    setValue,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm<BatchInviteFormData>({\r\n    resolver: zodResolver(batchInviteFormSchema) as any,\r\n    defaultValues: {\r\n      entity_type: defaultEntityType,\r\n      entity_id: existingEntityId,\r\n      create_entities: !existingEntityId,\r\n      invites: [{ email: '', display_name: '', title: '', is_primary: true }],\r\n    },\r\n  })\r\n\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: 'invites',\r\n  })\r\n\r\n  const entityType = watch('entity_type') as EntityType\r\n  const createEntities = watch('create_entities')\r\n\r\n  const parseCsvInput = useCallback(() => {\r\n    const lines = csvInput.trim().split('\\n').filter(line => line.trim())\r\n    const newInvites: { email: string; display_name: string; title?: string; is_primary: boolean }[] = []\r\n\r\n    for (const line of lines) {\r\n      const parts = line.split(',').map(p => p.trim())\r\n      if (parts.length >= 2) {\r\n        const email = parts[0]\r\n        const display_name = parts[1]\r\n        const title = parts[2] || undefined\r\n\r\n        // Basic email validation\r\n        if (email.includes('@') && display_name.length >= 2) {\r\n          newInvites.push({\r\n            email,\r\n            display_name,\r\n            title,\r\n            is_primary: newInvites.length === 0,\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    if (newInvites.length > 0) {\r\n      setValue('invites', newInvites)\r\n      toast.success(`Parsed ${newInvites.length} invites from CSV`)\r\n    } else {\r\n      toast.error('No valid invites found. Format: email, name, title (optional)')\r\n    }\r\n  }, [csvInput, setValue])\r\n\r\n  const onSubmit = async (data: BatchInviteFormData) => {\r\n    setIsSubmitting(true)\r\n    setResults(null)\r\n\r\n    try {\r\n      const response = await fetch('/api/admin/batch-invite', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(data),\r\n      })\r\n\r\n      const result = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(result.error || 'Batch invite failed')\r\n      }\r\n\r\n      setResults(result.results)\r\n\r\n      if (result.failed === 0) {\r\n        toast.success(`Successfully invited ${result.successful} users`)\r\n      } else {\r\n        toast.warning(`Invited ${result.successful} users, ${result.failed} failed`)\r\n      }\r\n\r\n      onSuccess?.()\r\n    } catch (error) {\r\n      console.error('Batch invite error:', error)\r\n      toast.error(error instanceof Error ? error.message : 'Batch invite failed')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  const handleClose = () => {\r\n    reset()\r\n    setResults(null)\r\n    setCsvInput('')\r\n    onOpenChange(false)\r\n  }\r\n\r\n  const addInvite = () => {\r\n    append({ email: '', display_name: '', title: '', is_primary: false })\r\n  }\r\n\r\n  // Show results view if we have results\r\n  if (results) {\r\n    const successCount = results.filter(r => r.success).length\r\n    const failCount = results.filter(r => !r.success).length\r\n\r\n    return (\r\n      <Dialog open={open} onOpenChange={handleClose}>\r\n        <DialogContent className=\"sm:max-w-[600px]\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2\">\r\n              <Users className=\"h-5 w-5\" />\r\n              Batch Invite Results\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              {successCount} successful, {failCount} failed\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex gap-4\">\r\n              <div className=\"flex-1 bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center\">\r\n                <CheckCircle2 className=\"h-8 w-8 mx-auto text-green-600 mb-2\" />\r\n                <div className=\"text-2xl font-bold text-green-600\">{successCount}</div>\r\n                <div className=\"text-sm text-green-700 dark:text-green-400\">Successful</div>\r\n              </div>\r\n              <div className=\"flex-1 bg-red-50 dark:bg-red-900/20 rounded-lg p-4 text-center\">\r\n                <XCircle className=\"h-8 w-8 mx-auto text-red-600 mb-2\" />\r\n                <div className=\"text-2xl font-bold text-red-600\">{failCount}</div>\r\n                <div className=\"text-sm text-red-700 dark:text-red-400\">Failed</div>\r\n              </div>\r\n            </div>\r\n\r\n            <ScrollArea className=\"h-[300px] border rounded-lg\">\r\n              <div className=\"p-4 space-y-2\">\r\n                {results.map((result, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`flex items-center justify-between p-3 rounded-lg ${\r\n                      result.success\r\n                        ? 'bg-green-50 dark:bg-green-900/10'\r\n                        : 'bg-red-50 dark:bg-red-900/10'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      {result.success ? (\r\n                        <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\r\n                      ) : (\r\n                        <XCircle className=\"h-5 w-5 text-red-600\" />\r\n                      )}\r\n                      <div>\r\n                        <div className=\"font-medium\">{result.email}</div>\r\n                        {result.error && (\r\n                          <div className=\"text-sm text-red-600\">{result.error}</div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    {result.success && (\r\n                      <Badge variant={result.is_new_user ? 'default' : 'secondary'}>\r\n                        {result.is_new_user ? 'New User' : 'Linked'}\r\n                      </Badge>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </ScrollArea>\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button onClick={handleClose}>Close</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleClose}>\r\n      <DialogContent className=\"sm:max-w-[700px] max-h-[90vh]\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Users className=\"h-5 w-5\" />\r\n            Batch Invite Users\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            {existingEntityName\r\n              ? `Invite multiple users to ${existingEntityName}`\r\n              : 'Invite multiple users and create new entities for each'\r\n            }\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <Tabs defaultValue=\"manual\" className=\"w-full\" id=\"batch-invite-tabs\">\r\n          <TabsList className=\"grid w-full grid-cols-2\">\r\n            <TabsTrigger value=\"manual\">Manual Entry</TabsTrigger>\r\n            <TabsTrigger value=\"csv\">CSV Import</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"csv\" className=\"space-y-4 mt-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label>Paste CSV Data</Label>\r\n              <Textarea\r\n                placeholder=\"email@example.com, John Smith, Managing Director&#10;another@example.com, Jane Doe, Partner&#10;...\"\r\n                value={csvInput}\r\n                onChange={(e) => setCsvInput(e.target.value)}\r\n                rows={6}\r\n                className=\"font-mono text-sm\"\r\n              />\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Format: email, display_name, title (optional) - one per line\r\n              </p>\r\n            </div>\r\n            <Button type=\"button\" onClick={parseCsvInput} variant=\"secondary\">\r\n              <Upload className=\"mr-2 h-4 w-4\" />\r\n              Parse CSV\r\n            </Button>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"manual\" className=\"mt-4\">\r\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n              {/* Entity Type Selection */}\r\n              {!existingEntityId && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Entity Type</Label>\r\n                    <Select\r\n                      value={entityType}\r\n                      onValueChange={(value) => setValue('entity_type', value as EntityType)}\r\n                    >\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Select type\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        {Object.entries(ENTITY_TYPE_LABELS).map(([value, label]) => (\r\n                          <SelectItem key={value} value={value}>\r\n                            {label}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between rounded-lg border p-3\">\r\n                    <div className=\"space-y-0.5\">\r\n                      <Label className=\"text-sm font-medium\">Create New Entities</Label>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        Create a new {entityType} for each invite\r\n                      </p>\r\n                    </div>\r\n                    <Switch\r\n                      checked={createEntities}\r\n                      onCheckedChange={(checked) => setValue('create_entities', checked)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Invites List */}\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <Label>Invites ({fields.length})</Label>\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={addInvite}\r\n                    disabled={fields.length >= 100}\r\n                  >\r\n                    <Plus className=\"mr-1 h-4 w-4\" />\r\n                    Add\r\n                  </Button>\r\n                </div>\r\n\r\n                <ScrollArea className=\"h-[300px] border rounded-lg p-4\">\r\n                  <div className=\"space-y-4\">\r\n                    {fields.map((field, index) => (\r\n                      <div\r\n                        key={field.id}\r\n                        className=\"grid grid-cols-[1fr,1fr,auto,auto] gap-2 items-start\"\r\n                        role=\"group\"\r\n                        aria-label={`Invite ${index + 1}`}\r\n                      >\r\n                        <div>\r\n                          <label htmlFor={`invite-email-${index}`} className=\"sr-only\">\r\n                            Email address for invite {index + 1}\r\n                          </label>\r\n                          <Input\r\n                            id={`invite-email-${index}`}\r\n                            placeholder=\"email@example.com\"\r\n                            {...register(`invites.${index}.email`)}\r\n                            className={errors.invites?.[index]?.email ? 'border-red-500' : ''}\r\n                            aria-invalid={!!errors.invites?.[index]?.email}\r\n                            aria-describedby={errors.invites?.[index]?.email ? `email-error-${index}` : undefined}\r\n                          />\r\n                          {errors.invites?.[index]?.email && (\r\n                            <p id={`email-error-${index}`} className=\"text-xs text-red-500 mt-1\" role=\"alert\">\r\n                              {errors.invites[index]?.email?.message}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                        <div>\r\n                          <label htmlFor={`invite-name-${index}`} className=\"sr-only\">\r\n                            Display name for invite {index + 1}\r\n                          </label>\r\n                          <Input\r\n                            id={`invite-name-${index}`}\r\n                            placeholder=\"Display Name\"\r\n                            {...register(`invites.${index}.display_name`)}\r\n                            className={errors.invites?.[index]?.display_name ? 'border-red-500' : ''}\r\n                            aria-invalid={!!errors.invites?.[index]?.display_name}\r\n                          />\r\n                        </div>\r\n                        <Select\r\n                          value={watch(`invites.${index}.role`) || 'member'}\r\n                          onValueChange={(value) => setValue(`invites.${index}.role`, value)}\r\n                        >\r\n                          <SelectTrigger className=\"w-[100px]\" aria-label={`Role for invite ${index + 1}`}>\r\n                            <SelectValue />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            {ROLE_OPTIONS_BY_ENTITY[entityType].map((option) => (\r\n                              <SelectItem key={option.value} value={option.value}>\r\n                                {option.label}\r\n                              </SelectItem>\r\n                            ))}\r\n                          </SelectContent>\r\n                        </Select>\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => remove(index)}\r\n                          disabled={fields.length === 1}\r\n                          aria-label={`Remove invite ${index + 1}`}\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4 text-muted-foreground\" />\r\n                        </Button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </ScrollArea>\r\n              </div>\r\n\r\n              <DialogFooter className=\"gap-2 sm:gap-0\">\r\n                <Button type=\"button\" variant=\"outline\" onClick={handleClose}>\r\n                  Cancel\r\n                </Button>\r\n                <Button type=\"submit\" disabled={isSubmitting}>\r\n                  {isSubmitting ? (\r\n                    <>\r\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                      Sending {fields.length} Invites...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Mail className=\"mr-2 h-4 w-4\" />\r\n                      Send {fields.length} Invites\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              </DialogFooter>\r\n            </form>\r\n          </TabsContent>\r\n        </Tabs>\r\n\r\n        {/* Show parsed invites even when on CSV tab */}\r\n        {fields.length > 1 && (\r\n          <div className=\"mt-4 p-3 bg-muted rounded-lg flex items-center gap-2\">\r\n            <AlertCircle className=\"h-4 w-4 text-muted-foreground\" />\r\n            <span className=\"text-sm text-muted-foreground\">\r\n              {fields.length} invites ready to send\r\n            </span>\r\n          </div>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1562, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/users/add-account-modal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useTransition } from 'react'\r\nimport { z } from 'zod'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Switch } from '@/components/ui/switch'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\nimport {\r\n  Loader2,\r\n  Users,\r\n  Briefcase,\r\n  Scale,\r\n  Handshake,\r\n  Building2,\r\n  ArrowLeft,\r\n  UserPlus\r\n} from 'lucide-react'\r\nimport { toast } from 'sonner'\r\n\r\n// Entity type configuration\r\nconst ENTITY_TYPES = {\r\n  investor: {\r\n    label: 'Investor',\r\n    description: 'Individual or institutional investor entity',\r\n    icon: Users,\r\n    apiPath: '/api/staff/investors',\r\n    detailPath: '/versotech_main/investors',\r\n    color: 'bg-blue-500/10 text-blue-500 border-blue-500/20'\r\n  },\r\n  introducer: {\r\n    label: 'Introducer',\r\n    description: 'Commission-based deal referral partner',\r\n    icon: Briefcase,\r\n    apiPath: '/api/staff/introducers',\r\n    detailPath: '/versotech_main/introducers',\r\n    color: 'bg-purple-500/10 text-purple-500 border-purple-500/20'\r\n  },\r\n  lawyer: {\r\n    label: 'Law Firm',\r\n    description: 'Legal counsel for deals and documentation',\r\n    icon: Scale,\r\n    apiPath: '/api/admin/lawyers',\r\n    detailPath: '/versotech_main/lawyers',\r\n    color: 'bg-amber-500/10 text-amber-500 border-amber-500/20'\r\n  },\r\n  partner: {\r\n    label: 'Partner',\r\n    description: 'Co-investment or syndicate partner',\r\n    icon: Handshake,\r\n    apiPath: '/api/admin/partners',\r\n    detailPath: '/versotech_main/partners',\r\n    color: 'bg-green-500/10 text-green-500 border-green-500/20'\r\n  },\r\n  commercial_partner: {\r\n    label: 'Commercial Partner',\r\n    description: 'Banks, custodians, and service providers',\r\n    icon: Building2,\r\n    apiPath: '/api/admin/commercial-partners',\r\n    detailPath: '/versotech_main/commercial-partners',\r\n    color: 'bg-cyan-500/10 text-cyan-500 border-cyan-500/20'\r\n  },\r\n  arranger: {\r\n    label: 'Arranger',\r\n    description: 'Licensed deal arranger entity',\r\n    icon: Building2,\r\n    apiPath: '/api/admin/arrangers',\r\n    detailPath: '/versotech_main/arrangers',\r\n    color: 'bg-rose-500/10 text-rose-500 border-rose-500/20'\r\n  },\r\n} as const\r\n\r\ntype EntityType = keyof typeof ENTITY_TYPES\r\n\r\n// Schemas for each entity type\r\nconst investorSchema = z.object({\r\n  type: z.enum(['individual', 'institutional', 'entity', 'family_office', 'fund']),\r\n  // Individual fields\r\n  first_name: z.string().optional(),\r\n  middle_name: z.string().optional(),\r\n  last_name: z.string().optional(),\r\n  // Entity fields\r\n  legal_name: z.string().optional(),\r\n  display_name: z.string().optional(),\r\n  country_of_incorporation: z.string().optional(),\r\n  representative_name: z.string().optional(),\r\n  representative_title: z.string().optional(),\r\n  // Common fields\r\n  email: z.string().email().optional().or(z.literal('')),\r\n  phone: z.string().optional(),\r\n  country: z.string().optional(),\r\n}).refine((data) => {\r\n  // For individual: first_name is required\r\n  if (data.type === 'individual') {\r\n    return data.first_name && data.first_name.trim().length > 0\r\n  }\r\n  // For entity types: legal_name is required\r\n  return data.legal_name && data.legal_name.trim().length > 0\r\n}, {\r\n  message: 'First name is required for individuals, Legal name is required for entities',\r\n  path: ['legal_name'],\r\n})\r\n\r\nconst introducerSchema = z.object({\r\n  type: z.enum(['individual', 'entity']),\r\n  // Individual fields\r\n  first_name: z.string().optional(),\r\n  middle_name: z.string().optional(),\r\n  last_name: z.string().optional(),\r\n  // Entity fields\r\n  legal_name: z.string().optional(),\r\n  display_name: z.string().optional(),\r\n  country_of_incorporation: z.string().optional(),\r\n  // Common fields\r\n  email: z.string().email().optional().or(z.literal('')),\r\n  country: z.string().optional(),\r\n  default_commission_bps: z.coerce.number().min(0).max(300).optional(),\r\n  payment_terms: z.enum(['net_15', 'net_30', 'net_45', 'net_60']).optional(),\r\n  status: z.enum(['active', 'inactive', 'suspended']).default('active'),\r\n  notes: z.string().optional(),\r\n}).refine((data) => {\r\n  if (data.type === 'individual') {\r\n    return data.first_name && data.first_name.trim().length > 0\r\n  }\r\n  return data.legal_name && data.legal_name.trim().length > 0\r\n}, {\r\n  message: 'First name is required for individuals, Legal name is required for entities',\r\n  path: ['legal_name'],\r\n})\r\n\r\nconst lawyerSchema = z.object({\r\n  type: z.enum(['individual', 'entity']),\r\n  // Individual fields\r\n  first_name: z.string().optional(),\r\n  middle_name: z.string().optional(),\r\n  last_name: z.string().optional(),\r\n  // Entity fields\r\n  firm_name: z.string().optional(),\r\n  display_name: z.string().optional(),\r\n  primary_contact_name: z.string().optional(),\r\n  primary_contact_email: z.string().email().optional().or(z.literal('')),\r\n  primary_contact_phone: z.string().optional(),\r\n  // Common fields\r\n  email: z.string().email().optional().or(z.literal('')),\r\n  country: z.string().optional(),\r\n}).refine((data) => {\r\n  if (data.type === 'individual') {\r\n    return data.first_name && data.first_name.trim().length > 0\r\n  }\r\n  return data.firm_name && data.firm_name.trim().length >= 2\r\n}, {\r\n  message: 'First name is required for individuals, Firm name is required for law firms',\r\n  path: ['firm_name'],\r\n})\r\n\r\nconst partnerSchema = z.object({\r\n  type: z.enum(['entity', 'individual', 'institutional']),\r\n  // Individual fields\r\n  first_name: z.string().optional(),\r\n  middle_name: z.string().optional(),\r\n  last_name: z.string().optional(),\r\n  // Entity fields\r\n  name: z.string().optional(),\r\n  legal_name: z.string().optional(),\r\n  // Common fields\r\n  partner_type: z.enum(['co_investor', 'syndicate', 'strategic', 'institutional', 'other']),\r\n  status: z.enum(['active', 'inactive', 'suspended']).default('active'),\r\n  contact_name: z.string().optional(),\r\n  contact_email: z.string().email().optional().or(z.literal('')),\r\n  email: z.string().email().optional().or(z.literal('')),\r\n  country: z.string().optional(),\r\n}).refine((data) => {\r\n  if (data.type === 'individual') {\r\n    return data.first_name && data.first_name.trim().length > 0\r\n  }\r\n  return data.name && data.name.trim().length >= 2\r\n}, {\r\n  message: 'First name is required for individuals, Name is required for entities',\r\n  path: ['name'],\r\n})\r\n\r\nconst commercialPartnerSchema = z.object({\r\n  type: z.enum(['entity', 'individual', 'institutional']),\r\n  // Individual fields\r\n  first_name: z.string().optional(),\r\n  middle_name: z.string().optional(),\r\n  last_name: z.string().optional(),\r\n  // Entity fields\r\n  name: z.string().optional(),\r\n  legal_name: z.string().optional(),\r\n  // Common fields\r\n  cp_type: z.enum(['placement_agent', 'distributor', 'wealth_manager', 'family_office', 'bank', 'other']),\r\n  status: z.enum(['active', 'inactive', 'suspended']).default('active'),\r\n  contact_name: z.string().optional(),\r\n  contact_email: z.string().email().optional().or(z.literal('')),\r\n  email: z.string().email().optional().or(z.literal('')),\r\n  country: z.string().optional(),\r\n}).refine((data) => {\r\n  if (data.type === 'individual') {\r\n    return data.first_name && data.first_name.trim().length > 0\r\n  }\r\n  return data.name && data.name.trim().length >= 2\r\n}, {\r\n  message: 'First name is required for individuals, Name is required for entities',\r\n  path: ['name'],\r\n})\r\n\r\nconst arrangerSchema = z.object({\r\n  type: z.enum(['entity', 'individual']),\r\n  // Individual fields\r\n  first_name: z.string().optional(),\r\n  middle_name: z.string().optional(),\r\n  last_name: z.string().optional(),\r\n  // Entity fields\r\n  legal_name: z.string().optional(),\r\n  // Common fields\r\n  registration_number: z.string().optional(),\r\n  email: z.string().email().optional().or(z.literal('')),\r\n  phone: z.string().optional(),\r\n  regulator: z.string().optional(),\r\n  license_number: z.string().optional(),\r\n  status: z.enum(['active', 'inactive']).default('active'),\r\n}).refine((data) => {\r\n  if (data.type === 'individual') {\r\n    return data.first_name && data.first_name.trim().length > 0\r\n  }\r\n  return data.legal_name && data.legal_name.trim().length > 0\r\n}, {\r\n  message: 'First name is required for individuals, Legal name is required for entities',\r\n  path: ['legal_name'],\r\n})\r\n\r\n// User invite schema\r\nconst userInviteSchema = z.object({\r\n  email: z.string().email('Valid email required'),\r\n  display_name: z.string().min(2, 'Display name required'),\r\n  title: z.string().optional(),\r\n})\r\n\r\ninterface AddAccountModalProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  onSuccess?: () => void\r\n}\r\n\r\nexport function AddAccountModal({\r\n  open,\r\n  onOpenChange,\r\n  onSuccess,\r\n}: AddAccountModalProps) {\r\n  const [step, setStep] = useState<'type' | 'details'>('type')\r\n  const [entityType, setEntityType] = useState<EntityType | null>(null)\r\n  const [isPending, startTransition] = useTransition()\r\n  const [inviteUser, setInviteUser] = useState(false)\r\n\r\n  // Form state for each entity type\r\n  const [formData, setFormData] = useState<Record<string, string | number | boolean | null | undefined>>({})\r\n  const [inviteData, setInviteData] = useState({\r\n    email: '',\r\n    display_name: '',\r\n    title: '',\r\n  })\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n\r\n  const resetForm = () => {\r\n    setStep('type')\r\n    setEntityType(null)\r\n    setFormData({})\r\n    setInviteData({ email: '', display_name: '', title: '' })\r\n    setInviteUser(false)\r\n    setErrors({})\r\n  }\r\n\r\n  const handleOpenChange = (open: boolean) => {\r\n    if (!open) {\r\n      resetForm()\r\n    }\r\n    onOpenChange(open)\r\n  }\r\n\r\n  const selectEntityType = (type: EntityType) => {\r\n    setEntityType(type)\r\n    setStep('details')\r\n    // Initialize form data with defaults based on type\r\n    // All entity types support individual vs entity distinction\r\n    const defaults: Record<EntityType, Record<string, string | number | boolean | null | undefined>> = {\r\n      investor: {\r\n        type: 'individual',\r\n        first_name: '',\r\n        middle_name: '',\r\n        last_name: '',\r\n        legal_name: '',\r\n        display_name: '',\r\n        country_of_incorporation: '',\r\n        representative_name: '',\r\n        representative_title: '',\r\n        email: '',\r\n        phone: '',\r\n        country: '',\r\n      },\r\n      introducer: {\r\n        type: 'individual',\r\n        first_name: '',\r\n        middle_name: '',\r\n        last_name: '',\r\n        legal_name: '',\r\n        display_name: '',\r\n        country_of_incorporation: '',\r\n        status: 'active',\r\n        payment_terms: 'net_30',\r\n        email: '',\r\n        country: '',\r\n        default_commission_bps: '',\r\n        notes: '',\r\n      },\r\n      lawyer: {\r\n        type: 'individual',\r\n        first_name: '',\r\n        middle_name: '',\r\n        last_name: '',\r\n        firm_name: '',\r\n        display_name: '',\r\n        email: '',\r\n        country: '',\r\n        primary_contact_name: '',\r\n        primary_contact_email: '',\r\n        primary_contact_phone: '',\r\n      },\r\n      partner: {\r\n        type: 'individual',\r\n        first_name: '',\r\n        middle_name: '',\r\n        last_name: '',\r\n        name: '',\r\n        legal_name: '',\r\n        partner_type: 'co_investor',\r\n        status: 'active',\r\n        email: '',\r\n        contact_email: '',\r\n        contact_name: '',\r\n        contact_phone: '',\r\n        country: '',\r\n      },\r\n      commercial_partner: {\r\n        type: 'individual',\r\n        first_name: '',\r\n        middle_name: '',\r\n        last_name: '',\r\n        name: '',\r\n        legal_name: '',\r\n        cp_type: 'bank',\r\n        status: 'active',\r\n        email: '',\r\n        contact_email: '',\r\n        contact_name: '',\r\n        contact_phone: '',\r\n        country: '',\r\n      },\r\n      arranger: {\r\n        type: 'entity', // Arrangers are typically entities (licensed companies)\r\n        first_name: '',\r\n        middle_name: '',\r\n        last_name: '',\r\n        legal_name: '',\r\n        status: 'active',\r\n        email: '',\r\n        phone: '',\r\n        registration_number: '',\r\n        license_number: '',\r\n        regulator: '',\r\n      },\r\n    }\r\n    setFormData(defaults[type] || {})\r\n  }\r\n\r\n  const handleCreate = () => {\r\n    if (!entityType) return\r\n\r\n    startTransition(async () => {\r\n      try {\r\n        // Validate form data based on entity type\r\n        const schemas: Record<EntityType, z.ZodSchema> = {\r\n          investor: investorSchema,\r\n          introducer: introducerSchema,\r\n          lawyer: lawyerSchema,\r\n          partner: partnerSchema,\r\n          commercial_partner: commercialPartnerSchema,\r\n          arranger: arrangerSchema,\r\n        }\r\n\r\n        const schema = schemas[entityType]\r\n        const validationResult = schema.safeParse(formData)\r\n\r\n        if (!validationResult.success) {\r\n          const fieldErrors: Record<string, string> = {}\r\n          validationResult.error.issues.forEach(err => {\r\n            const path = err.path.join('.')\r\n            fieldErrors[path] = err.message\r\n          })\r\n          setErrors(fieldErrors)\r\n          toast.error('Please fix the form errors')\r\n          return\r\n        }\r\n\r\n        // Validate invite data if enabled\r\n        if (inviteUser) {\r\n          const inviteValidation = userInviteSchema.safeParse(inviteData)\r\n          if (!inviteValidation.success) {\r\n            const fieldErrors: Record<string, string> = {}\r\n            inviteValidation.error.issues.forEach(err => {\r\n              const path = `invite_${err.path.join('.')}`\r\n              fieldErrors[path] = err.message\r\n            })\r\n            setErrors(prev => ({ ...prev, ...fieldErrors }))\r\n            toast.error('Please fix the user invite errors')\r\n            return\r\n          }\r\n        }\r\n\r\n        setErrors({})\r\n\r\n        // Prepare submission data\r\n        let submitData: Record<string, unknown> = { ...(validationResult.data as Record<string, unknown>) }\r\n\r\n        // For ALL entity types: compute legal_name/name from individual fields if type is individual\r\n        if (formData.type === 'individual') {\r\n          const nameParts = [\r\n            (formData.first_name as string)?.trim(),\r\n            (formData.middle_name as string)?.trim(),\r\n            (formData.last_name as string)?.trim(),\r\n          ].filter(Boolean)\r\n          const fullName = nameParts.join(' ')\r\n\r\n          submitData = {\r\n            ...submitData,\r\n            first_name: (formData.first_name as string)?.trim() || '',\r\n            middle_name: (formData.middle_name as string)?.trim() || '',\r\n            last_name: (formData.last_name as string)?.trim() || '',\r\n          }\r\n\r\n          // Different tables use different primary name fields\r\n          if (entityType === 'investor' || entityType === 'introducer' || entityType === 'arranger') {\r\n            submitData.legal_name = fullName\r\n            submitData.display_name = submitData.display_name || fullName\r\n          } else if (entityType === 'partner' || entityType === 'commercial_partner') {\r\n            submitData.name = fullName\r\n            submitData.legal_name = fullName\r\n          } else if (entityType === 'lawyer') {\r\n            // For individual lawyers, firm_name becomes their name\r\n            submitData.firm_name = fullName\r\n            submitData.display_name = submitData.display_name || fullName\r\n          }\r\n        }\r\n\r\n        // For entity lawyers, sync primary_contact_email to email for consistent searching\r\n        if (entityType === 'lawyer' && submitData.type !== 'individual' && submitData.primary_contact_email) {\r\n          submitData.email = submitData.primary_contact_email\r\n        }\r\n\r\n        // For entity commercial partners, sync contact_email to email for consistent searching\r\n        // (Individual commercial partners fill email directly)\r\n        if (entityType === 'commercial_partner' && submitData.type !== 'individual' && submitData.contact_email) {\r\n          submitData.email = submitData.contact_email\r\n        }\r\n\r\n        // For entity partners, sync contact_email to email for consistent searching\r\n        // (Individual partners fill email directly)\r\n        if (entityType === 'partner' && submitData.type !== 'individual' && submitData.contact_email) {\r\n          submitData.email = submitData.contact_email\r\n        }\r\n\r\n        // Create entity\r\n        const config = ENTITY_TYPES[entityType]\r\n        const response = await fetch(config.apiPath, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(submitData),\r\n        })\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json().catch(() => ({}))\r\n          throw new Error(errorData.error || `Failed to create ${config.label.toLowerCase()}`)\r\n        }\r\n\r\n        const entityResult = await response.json()\r\n        // Handle various API response shapes:\r\n        // - Direct id: { id: \"...\" }\r\n        // - Nested object: { investor: { id: \"...\" } }\r\n        // - Data object: { data: { id: \"...\" } }\r\n        // - Data array (introducers, etc.): { data: [{ id: \"...\" }] }\r\n        const createdEntityId = entityResult.id\r\n          || entityResult.investor?.id\r\n          || entityResult.introducer?.id\r\n          || entityResult.arranger?.id\r\n          || (Array.isArray(entityResult.data) ? entityResult.data[0]?.id : entityResult.data?.id)\r\n\r\n        // If invite user is enabled, send invitation\r\n        if (inviteUser && createdEntityId) {\r\n          const entityTypeMapping: Record<EntityType, string> = {\r\n            investor: 'investor',\r\n            introducer: 'introducer',\r\n            lawyer: 'lawyer',\r\n            partner: 'partner',\r\n            commercial_partner: 'commercial_partner',\r\n            arranger: 'arranger',\r\n          }\r\n\r\n          const inviteResponse = await fetch('/api/admin/entity-invite', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n              entity_type: entityTypeMapping[entityType],\r\n              entity_id: createdEntityId,\r\n              email: inviteData.email,\r\n              display_name: inviteData.display_name,\r\n              title: inviteData.title || null,\r\n              is_primary: true,\r\n            }),\r\n          })\r\n\r\n          const inviteResult = await inviteResponse.json().catch(() => ({}))\r\n\r\n          if (!inviteResponse.ok) {\r\n            console.warn('Failed to send invitation, but entity was created')\r\n            toast.warning(inviteResult.error || `${config.label} created, but invitation failed to send`)\r\n          } else if (inviteResult.email_sent === false) {\r\n            toast.warning(`${config.label} created, but invitation email failed to send`)\r\n          } else {\r\n            toast.success(inviteResult.message || `${config.label} created and invitation sent!`)\r\n          }\r\n        } else {\r\n          toast.success(`${config.label} created successfully!`)\r\n        }\r\n\r\n        handleOpenChange(false)\r\n        onSuccess?.()\r\n\r\n        // Navigate to detail page\r\n        if (createdEntityId) {\r\n          window.location.href = `${config.detailPath}/${createdEntityId}`\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Create entity error:', error)\r\n        toast.error(error instanceof Error ? error.message : 'Failed to create account')\r\n      }\r\n    })\r\n  }\r\n\r\n  const updateFormData = (key: string, value: string | number | boolean | null | undefined) => {\r\n    setFormData(prev => {\r\n      const next = { ...prev, [key]: value }\r\n      return next\r\n    })\r\n    // Clear error for this field\r\n    if (errors[key]) {\r\n      setErrors(prev => {\r\n        const next = { ...prev }\r\n        delete next[key]\r\n        return next\r\n      })\r\n    }\r\n  }\r\n\r\n  const renderEntityTypeSelection = () => (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n      {(Object.entries(ENTITY_TYPES) as [EntityType, typeof ENTITY_TYPES[EntityType]][]).map(([type, config]) => {\r\n        const Icon = config.icon\r\n        return (\r\n          <Card\r\n            key={type}\r\n            className={`cursor-pointer transition-all hover:border-primary/50 hover:shadow-md ${\r\n              entityType === type ? 'border-primary ring-2 ring-primary/20' : ''\r\n            }`}\r\n            onClick={() => selectEntityType(type)}\r\n          >\r\n            <CardContent className=\"p-4\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className={`p-2 rounded-lg ${config.color}`}>\r\n                  <Icon className=\"h-5 w-5\" />\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"font-medium text-sm\">{config.label}</p>\r\n                  <p className=\"text-xs text-muted-foreground line-clamp-2\">\r\n                    {config.description}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n\r\n  const renderFormField = (\r\n    key: string,\r\n    label: string,\r\n    type: 'text' | 'email' | 'number' | 'select' | 'textarea' = 'text',\r\n    options?: { value: string; label: string }[],\r\n    placeholder?: string\r\n  ) => (\r\n    <div key={key} className=\"space-y-1.5\">\r\n      <Label htmlFor={key} className=\"text-sm\">\r\n        {label}\r\n        {errors[key] && <span className=\"text-destructive ml-1\">*</span>}\r\n      </Label>\r\n      {type === 'select' && options ? (\r\n        <Select\r\n          value={typeof formData[key] === 'string' ? formData[key] : ''}\r\n          onValueChange={(value) => updateFormData(key, value)}\r\n        >\r\n          <SelectTrigger>\r\n            <SelectValue placeholder={placeholder || `Select ${label.toLowerCase()}`} />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            {options.map(opt => (\r\n              <SelectItem key={opt.value} value={opt.value}>\r\n                {opt.label}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      ) : type === 'textarea' ? (\r\n        <Textarea\r\n          id={key}\r\n          value={typeof formData[key] === 'string' ? formData[key] : ''}\r\n          onChange={(e) => updateFormData(key, e.target.value)}\r\n          placeholder={placeholder}\r\n          className=\"resize-none\"\r\n          rows={3}\r\n        />\r\n      ) : (\r\n        <Input\r\n          id={key}\r\n          type={type}\r\n          value={typeof formData[key] === 'string' || typeof formData[key] === 'number' ? formData[key] : ''}\r\n          onChange={(e) => updateFormData(key, type === 'number' ? parseFloat(e.target.value) || '' : e.target.value)}\r\n          placeholder={placeholder}\r\n        />\r\n      )}\r\n      {errors[key] && (\r\n        <p className=\"text-xs text-destructive\">{errors[key]}</p>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  const renderEntityForm = () => {\r\n    if (!entityType) return null\r\n\r\n    const forms: Record<EntityType, React.ReactNode> = {\r\n      investor: (\r\n        <div className=\"space-y-4\">\r\n          {/* TYPE FIRST */}\r\n          {renderFormField('type', 'Investor Type', 'select', [\r\n            { value: 'individual', label: 'Individual' },\r\n            { value: 'entity', label: 'Entity' },\r\n            { value: 'institutional', label: 'Institutional' },\r\n            { value: 'family_office', label: 'Family Office' },\r\n            { value: 'fund', label: 'Fund' },\r\n          ])}\r\n\r\n          {/* INDIVIDUAL FIELDS */}\r\n          {formData.type === 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Personal Information</p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('first_name', 'First Name *', 'text', undefined, 'John')}\r\n                {renderFormField('middle_name', 'Middle Name', 'text', undefined, 'Michael')}\r\n              </div>\r\n              {renderFormField('last_name', 'Last Name', 'text', undefined, 'Smith')}\r\n            </div>\r\n          )}\r\n\r\n          {/* ENTITY FIELDS */}\r\n          {formData.type !== 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Entity Information</p>\r\n              {renderFormField('legal_name', 'Legal Name *', 'text', undefined, 'Acme Investment Holdings LP')}\r\n              {renderFormField('display_name', 'Display Name', 'text', undefined, 'Optional short name')}\r\n              {renderFormField('country_of_incorporation', 'Country of Incorporation', 'text', undefined, 'Cayman Islands')}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('representative_name', 'Representative Name', 'text', undefined, 'Jane Doe')}\r\n                {renderFormField('representative_title', 'Representative Title', 'text', undefined, 'Managing Director')}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* COMMON CONTACT FIELDS */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {renderFormField('email', 'Email', 'email', undefined, 'investor@example.com')}\r\n            {renderFormField('phone', 'Phone', 'text', undefined, '+1 (555) 123-4567')}\r\n          </div>\r\n          {renderFormField('country', formData.type === 'individual' ? 'Country of Residence' : 'Country', 'text', undefined, 'United States')}\r\n        </div>\r\n      ),\r\n      introducer: (\r\n        <div className=\"space-y-4\">\r\n          {/* TYPE FIRST */}\r\n          {renderFormField('type', 'Introducer Type', 'select', [\r\n            { value: 'individual', label: 'Individual' },\r\n            { value: 'entity', label: 'Entity' },\r\n          ])}\r\n\r\n          {/* INDIVIDUAL FIELDS */}\r\n          {formData.type === 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Personal Information</p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('first_name', 'First Name *', 'text', undefined, 'John')}\r\n                {renderFormField('middle_name', 'Middle Name', 'text', undefined, 'Michael')}\r\n              </div>\r\n              {renderFormField('last_name', 'Last Name', 'text', undefined, 'Smith')}\r\n            </div>\r\n          )}\r\n\r\n          {/* ENTITY FIELDS */}\r\n          {formData.type !== 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Entity Information</p>\r\n              {renderFormField('legal_name', 'Legal Name *', 'text', undefined, 'ABC Advisors Ltd')}\r\n              {renderFormField('display_name', 'Display Name', 'text', undefined, 'Optional short name')}\r\n              {renderFormField('country_of_incorporation', 'Country of Incorporation', 'text', undefined, 'United Kingdom')}\r\n            </div>\r\n          )}\r\n\r\n          {/* COMMON FIELDS */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {renderFormField('email', 'Email', 'email', undefined, 'contact@company.com')}\r\n            {renderFormField('country', formData.type === 'individual' ? 'Country of Residence' : 'Country', 'text', undefined, 'United States')}\r\n          </div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {renderFormField('default_commission_bps', 'Commission (bps)', 'number', undefined, '0-300')}\r\n            {renderFormField('payment_terms', 'Payment Terms', 'select', [\r\n              { value: 'net_15', label: 'Net 15' },\r\n              { value: 'net_30', label: 'Net 30' },\r\n              { value: 'net_45', label: 'Net 45' },\r\n              { value: 'net_60', label: 'Net 60' },\r\n            ])}\r\n          </div>\r\n          {renderFormField('status', 'Status', 'select', [\r\n            { value: 'active', label: 'Active' },\r\n            { value: 'inactive', label: 'Inactive' },\r\n            { value: 'suspended', label: 'Suspended' },\r\n          ])}\r\n        </div>\r\n      ),\r\n      lawyer: (\r\n        <div className=\"space-y-4\">\r\n          {/* TYPE FIRST */}\r\n          {renderFormField('type', 'Lawyer Type', 'select', [\r\n            { value: 'individual', label: 'Individual Lawyer' },\r\n            { value: 'entity', label: 'Law Firm' },\r\n          ])}\r\n\r\n          {/* INDIVIDUAL FIELDS */}\r\n          {formData.type === 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Personal Information</p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('first_name', 'First Name *', 'text', undefined, 'Jane')}\r\n                {renderFormField('middle_name', 'Middle Name', 'text', undefined, 'Marie')}\r\n              </div>\r\n              {renderFormField('last_name', 'Last Name', 'text', undefined, 'Smith')}\r\n              {renderFormField('display_name', 'Display Name', 'text', undefined, 'Jane Smith, Esq.')}\r\n            </div>\r\n          )}\r\n\r\n          {/* ENTITY FIELDS */}\r\n          {formData.type !== 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Firm Information</p>\r\n              {renderFormField('firm_name', 'Firm Name *', 'text', undefined, 'Smith & Associates LLP')}\r\n              {renderFormField('display_name', 'Display Name', 'text', undefined, 'Smith & Associates')}\r\n              {renderFormField('primary_contact_name', 'Primary Contact', 'text', undefined, 'Jane Smith')}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('primary_contact_email', 'Contact Email', 'email', undefined, 'jane@firm.com')}\r\n                {renderFormField('primary_contact_phone', 'Contact Phone', 'text', undefined, '+1 (555) 123-4567')}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* COMMON FIELDS */}\r\n          {formData.type === 'individual' ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {renderFormField('email', 'Email', 'email', undefined, 'lawyer@firm.com')}\r\n              {renderFormField('country', 'Country of Residence', 'text', undefined, 'United States')}\r\n            </div>\r\n          ) : (\r\n            renderFormField('country', 'Country', 'text', undefined, 'United States')\r\n          )}\r\n        </div>\r\n      ),\r\n      partner: (\r\n        <div className=\"space-y-4\">\r\n          {/* TYPE FIRST */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {renderFormField('type', 'Partner Type', 'select', [\r\n              { value: 'individual', label: 'Individual' },\r\n              { value: 'entity', label: 'Entity' },\r\n              { value: 'institutional', label: 'Institutional' },\r\n            ])}\r\n            {renderFormField('partner_type', 'Partner Category', 'select', [\r\n              { value: 'co_investor', label: 'Co-Investor' },\r\n              { value: 'syndicate', label: 'Syndicate' },\r\n              { value: 'strategic', label: 'Strategic' },\r\n              { value: 'institutional', label: 'Institutional' },\r\n              { value: 'other', label: 'Other' },\r\n            ])}\r\n          </div>\r\n\r\n          {/* INDIVIDUAL FIELDS */}\r\n          {formData.type === 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Personal Information</p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('first_name', 'First Name *', 'text', undefined, 'John')}\r\n                {renderFormField('middle_name', 'Middle Name', 'text', undefined, 'Michael')}\r\n              </div>\r\n              {renderFormField('last_name', 'Last Name', 'text', undefined, 'Smith')}\r\n            </div>\r\n          )}\r\n\r\n          {/* ENTITY FIELDS */}\r\n          {formData.type !== 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Entity Information</p>\r\n              {renderFormField('name', 'Partner Name *', 'text', undefined, 'Partner Capital LLC')}\r\n              {renderFormField('legal_name', 'Legal Name', 'text', undefined, 'Full legal entity name')}\r\n              {renderFormField('contact_name', 'Contact Name', 'text', undefined, 'John Smith')}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('contact_email', 'Contact Email', 'email', undefined, 'john@partner.com')}\r\n                {renderFormField('contact_phone', 'Contact Phone', 'text', undefined, '+1 (555) 123-4567')}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* COMMON FIELDS */}\r\n          {formData.type === 'individual' ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {renderFormField('email', 'Email', 'email', undefined, 'john@example.com')}\r\n              {renderFormField('country', 'Country of Residence', 'text', undefined, 'United States')}\r\n            </div>\r\n          ) : (\r\n            renderFormField('country', 'Country', 'text', undefined, 'United States')\r\n          )}\r\n          {renderFormField('status', 'Status', 'select', [\r\n            { value: 'active', label: 'Active' },\r\n            { value: 'inactive', label: 'Inactive' },\r\n            { value: 'suspended', label: 'Suspended' },\r\n          ])}\r\n        </div>\r\n      ),\r\n      commercial_partner: (\r\n        <div className=\"space-y-4\">\r\n          {/* TYPE FIRST */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {renderFormField('type', 'Partner Type', 'select', [\r\n              { value: 'individual', label: 'Individual' },\r\n              { value: 'entity', label: 'Entity' },\r\n              { value: 'institutional', label: 'Institutional' },\r\n            ])}\r\n            {renderFormField('cp_type', 'Service Type', 'select', [\r\n              { value: 'placement_agent', label: 'Placement Agent' },\r\n              { value: 'distributor', label: 'Distributor' },\r\n              { value: 'wealth_manager', label: 'Wealth Manager' },\r\n              { value: 'family_office', label: 'Family Office' },\r\n              { value: 'bank', label: 'Bank' },\r\n              { value: 'other', label: 'Other' },\r\n            ])}\r\n          </div>\r\n\r\n          {/* INDIVIDUAL FIELDS */}\r\n          {formData.type === 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Personal Information</p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('first_name', 'First Name *', 'text', undefined, 'Jane')}\r\n                {renderFormField('middle_name', 'Middle Name', 'text', undefined, 'Marie')}\r\n              </div>\r\n              {renderFormField('last_name', 'Last Name', 'text', undefined, 'Smith')}\r\n            </div>\r\n          )}\r\n\r\n          {/* ENTITY FIELDS */}\r\n          {formData.type !== 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Entity Information</p>\r\n              {renderFormField('name', 'Partner Name *', 'text', undefined, 'First National Bank')}\r\n              {renderFormField('legal_name', 'Legal Name', 'text', undefined, 'Full legal entity name')}\r\n              {renderFormField('contact_name', 'Contact Name', 'text', undefined, 'Jane Smith')}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('contact_email', 'Contact Email', 'email', undefined, 'jane@bank.com')}\r\n                {renderFormField('contact_phone', 'Contact Phone', 'text', undefined, '+1 (555) 123-4567')}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* COMMON FIELDS */}\r\n          {formData.type === 'individual' ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {renderFormField('email', 'Email', 'email', undefined, 'jane@example.com')}\r\n              {renderFormField('country', 'Country of Residence', 'text', undefined, 'United States')}\r\n            </div>\r\n          ) : (\r\n            renderFormField('country', 'Country', 'text', undefined, 'United States')\r\n          )}\r\n          {renderFormField('status', 'Status', 'select', [\r\n            { value: 'active', label: 'Active' },\r\n            { value: 'inactive', label: 'Inactive' },\r\n            { value: 'suspended', label: 'Suspended' },\r\n          ])}\r\n        </div>\r\n      ),\r\n      arranger: (\r\n        <div className=\"space-y-4\">\r\n          {/* TYPE FIRST */}\r\n          {renderFormField('type', 'Arranger Type', 'select', [\r\n            { value: 'entity', label: 'Entity (Default)' },\r\n            { value: 'individual', label: 'Individual' },\r\n          ])}\r\n\r\n          {/* INDIVIDUAL FIELDS */}\r\n          {formData.type === 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Personal Information</p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderFormField('first_name', 'First Name *', 'text', undefined, 'John')}\r\n                {renderFormField('middle_name', 'Middle Name', 'text', undefined, 'Michael')}\r\n              </div>\r\n              {renderFormField('last_name', 'Last Name', 'text', undefined, 'Smith')}\r\n            </div>\r\n          )}\r\n\r\n          {/* ENTITY FIELDS */}\r\n          {formData.type !== 'individual' && (\r\n            <div className=\"space-y-4 p-3 rounded-lg border bg-muted/30\">\r\n              <p className=\"text-xs font-medium text-muted-foreground\">Entity Information</p>\r\n              {renderFormField('legal_name', 'Legal Name *', 'text', undefined, 'VERSO Arranger Ltd')}\r\n            </div>\r\n          )}\r\n\r\n          {/* REGISTRATION / LICENSE FIELDS */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {renderFormField('registration_number', 'Registration Number', 'text', undefined, 'Company reg #')}\r\n            {renderFormField('license_number', 'License Number', 'text', undefined, 'License #')}\r\n          </div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {renderFormField('email', 'Email', 'email', undefined, 'contact@arranger.com')}\r\n            {renderFormField('phone', 'Phone', 'text', undefined, '+1 (555) 123-4567')}\r\n          </div>\r\n          {renderFormField('regulator', 'Regulator', 'text', undefined, 'BVI FSC')}\r\n          {renderFormField('status', 'Status', 'select', [\r\n            { value: 'active', label: 'Active' },\r\n            { value: 'inactive', label: 'Inactive' },\r\n          ])}\r\n        </div>\r\n      ),\r\n    }\r\n\r\n    return forms[entityType]\r\n  }\r\n\r\n  const renderUserInviteSection = () => (\r\n    <div className=\"space-y-4 pt-4 border-t\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"space-y-0.5\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <UserPlus className=\"h-4 w-4 text-muted-foreground\" />\r\n            <Label className=\"text-sm font-medium\">Invite User</Label>\r\n          </div>\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            Send a magic link invitation to create an account\r\n          </p>\r\n        </div>\r\n        <Switch\r\n          checked={inviteUser}\r\n          onCheckedChange={setInviteUser}\r\n        />\r\n      </div>\r\n\r\n      {inviteUser && (\r\n        <div className=\"space-y-3 pl-6 border-l-2 border-muted\">\r\n          <div className=\"space-y-1.5\">\r\n            <Label htmlFor=\"invite_email\" className=\"text-sm\">\r\n              Email Address\r\n              {errors['invite_email'] && <span className=\"text-destructive ml-1\">*</span>}\r\n            </Label>\r\n            <Input\r\n              id=\"invite_email\"\r\n              type=\"email\"\r\n              value={inviteData.email}\r\n              onChange={(e) => setInviteData(prev => ({ ...prev, email: e.target.value }))}\r\n              placeholder=\"user@example.com\"\r\n            />\r\n            {errors['invite_email'] && (\r\n              <p className=\"text-xs text-destructive\">{errors['invite_email']}</p>\r\n            )}\r\n          </div>\r\n          <div className=\"space-y-1.5\">\r\n            <Label htmlFor=\"invite_display_name\" className=\"text-sm\">\r\n              Display Name\r\n              {errors['invite_display_name'] && <span className=\"text-destructive ml-1\">*</span>}\r\n            </Label>\r\n            <Input\r\n              id=\"invite_display_name\"\r\n              value={inviteData.display_name}\r\n              onChange={(e) => setInviteData(prev => ({ ...prev, display_name: e.target.value }))}\r\n              placeholder=\"John Smith\"\r\n            />\r\n            {errors['invite_display_name'] && (\r\n              <p className=\"text-xs text-destructive\">{errors['invite_display_name']}</p>\r\n            )}\r\n          </div>\r\n          <div className=\"space-y-1.5\">\r\n            <Label htmlFor=\"invite_title\" className=\"text-sm\">Title (Optional)</Label>\r\n            <Input\r\n              id=\"invite_title\"\r\n              value={inviteData.title}\r\n              onChange={(e) => setInviteData(prev => ({ ...prev, title: e.target.value }))}\r\n              placeholder=\"Director, Partner, etc.\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleOpenChange}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <div className=\"flex items-center gap-2\">\r\n            {step === 'details' && entityType && (\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"h-8 w-8\"\r\n                onClick={() => setStep('type')}\r\n              >\r\n                <ArrowLeft className=\"h-4 w-4\" />\r\n              </Button>\r\n            )}\r\n            <div>\r\n              <DialogTitle>\r\n                {step === 'type' ? 'Add Account' : `New ${entityType ? ENTITY_TYPES[entityType].label : ''}`}\r\n              </DialogTitle>\r\n              <DialogDescription>\r\n                {step === 'type'\r\n                  ? 'Select the type of account you want to create'\r\n                  : `Enter the details for the new ${entityType ? ENTITY_TYPES[entityType].label.toLowerCase() : 'account'}`}\r\n              </DialogDescription>\r\n            </div>\r\n          </div>\r\n          {step === 'details' && entityType && (\r\n            <Badge variant=\"outline\" className={`w-fit ${ENTITY_TYPES[entityType].color}`}>\r\n              {ENTITY_TYPES[entityType].label}\r\n            </Badge>\r\n          )}\r\n        </DialogHeader>\r\n\r\n        {step === 'type' ? (\r\n          renderEntityTypeSelection()\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {renderEntityForm()}\r\n            {renderUserInviteSection()}\r\n          </div>\r\n        )}\r\n\r\n        <DialogFooter className=\"gap-2 sm:gap-0\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={() => handleOpenChange(false)}\r\n            disabled={isPending}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          {step === 'details' && (\r\n            <Button\r\n              type=\"button\"\r\n              onClick={handleCreate}\r\n              disabled={isPending}\r\n            >\r\n              {isPending && <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />}\r\n              {inviteUser ? 'Create & Invite' : 'Create Account'}\r\n            </Button>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3405, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/accounts/unified-accounts-content.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useMemo } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow\n} from '@/components/ui/table'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n  DropdownMenuCheckboxItem,\n} from '@/components/ui/dropdown-menu'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  AlertCircle,\n  Loader2,\n  Search,\n  MoreHorizontal,\n  Eye,\n  Mail,\n  UserPlus,\n  Users,\n  Briefcase,\n  Building2,\n  Scale,\n  HandshakeIcon,\n  Filter,\n  RefreshCw,\n  CheckCircle2,\n  Clock,\n  XCircle,\n  Download,\n  Plus\n} from 'lucide-react'\nimport type { UnifiedUser, UnifiedUsersResponse } from '@/app/api/admin/unified-users/route'\nimport { BatchInviteDialog, type EntityType } from '@/components/users/batch-invite-dialog'\nimport { AddAccountModal } from '@/components/users/add-account-modal'\n\nconst ENTITY_TYPE_CONFIG = {\n  investor: { label: 'Investor', icon: Users, color: 'bg-blue-500/20 text-blue-400 border-blue-500/30' },\n  lawyer: { label: 'Lawyer', icon: Scale, color: 'bg-purple-500/20 text-purple-400 border-purple-500/30' },\n  partner: { label: 'Partner', icon: HandshakeIcon, color: 'bg-green-500/20 text-green-400 border-green-500/30' },\n  commercial_partner: { label: 'Commercial Partner', icon: Building2, color: 'bg-orange-500/20 text-orange-400 border-orange-500/30' },\n  introducer: { label: 'Introducer', icon: Briefcase, color: 'bg-cyan-500/20 text-cyan-400 border-cyan-500/30' },\n  arranger: { label: 'Arranger', icon: Building2, color: 'bg-amber-500/20 text-amber-400 border-amber-500/30' },\n}\n\nfunction getStatusBadge(status: string) {\n  switch (status) {\n    case 'active':\n      return <Badge className=\"bg-green-500/20 text-green-400 border-green-500/30\">Active</Badge>\n    case 'inactive':\n      return <Badge className=\"bg-red-500/20 text-red-400 border-red-500/30\">Inactive</Badge>\n    default:\n      return <Badge className=\"bg-yellow-500/20 text-yellow-400 border-yellow-500/30\">Pending</Badge>\n  }\n}\n\nfunction getKycStatusIcon(status: string | null) {\n  switch (status) {\n    case 'approved':\n      return <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n    case 'pending':\n    case 'review':\n      return <Clock className=\"h-4 w-4 text-yellow-400\" />\n    case 'rejected':\n      return <XCircle className=\"h-4 w-4 text-red-400\" />\n    default:\n      return <span className=\"text-muted-foreground\">-</span>\n  }\n}\n\nexport default function UnifiedAccountsContent() {\n  const [accounts, setAccounts] = useState<UnifiedUser[]>([])\n  const [stats, setStats] = useState<UnifiedUsersResponse['stats'] | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [searchQuery, setSearchQuery] = useState('')\n  const [typeFilter, setTypeFilter] = useState<string>('all')\n  const [statusFilter, setStatusFilter] = useState<string>('all')\n  const [batchInviteOpen, setBatchInviteOpen] = useState(false)\n  const [addAccountOpen, setAddAccountOpen] = useState(false)\n\n  const fetchAccounts = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n\n      const response = await fetch('/api/admin/unified-users')\n      const data: UnifiedUsersResponse = await response.json()\n\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to fetch accounts')\n      }\n\n      setAccounts(data.data || [])\n      setStats(data.stats || null)\n    } catch (err: any) {\n      console.error('[UnifiedAccountsContent] Error:', err)\n      setError(err?.message || 'Failed to load accounts')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchAccounts()\n  }, [])\n\n  // Filter accounts based on search and filters\n  const filteredAccounts = useMemo(() => {\n    return accounts.filter(account => {\n      // Search filter\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase()\n        const matchesSearch =\n          account.entityName.toLowerCase().includes(query) ||\n          account.userName.toLowerCase().includes(query) ||\n          account.userEmail.toLowerCase().includes(query) ||\n          account.country?.toLowerCase().includes(query)\n\n        if (!matchesSearch) return false\n      }\n\n      // Type filter\n      if (typeFilter !== 'all' && account.entityType !== typeFilter) {\n        return false\n      }\n\n      // Status filter\n      if (statusFilter !== 'all' && account.status !== statusFilter) {\n        return false\n      }\n\n      return true\n    })\n  }, [accounts, searchQuery, typeFilter, statusFilter])\n\n  // Export to CSV\n  const handleExport = () => {\n    const headers = ['Entity Type', 'Entity Name', 'User Name', 'Email', 'Role', 'Status', 'KYC Status', 'Country', 'Created']\n    const rows = filteredAccounts.map(a => [\n      ENTITY_TYPE_CONFIG[a.entityType].label,\n      a.entityName,\n      a.userName,\n      a.userEmail,\n      a.userRole,\n      a.status,\n      a.kycStatus || '-',\n      a.country || '-',\n      new Date(a.createdAt).toLocaleDateString()\n    ])\n\n    const csv = [headers, ...rows].map(row => row.map(cell => `\"${cell}\"`).join(',')).join('\\n')\n    const blob = new Blob([csv], { type: 'text/csv' })\n    const url = window.URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = `all-accounts-${new Date().toISOString().split('T')[0]}.csv`\n    a.click()\n    window.URL.revokeObjectURL(url)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        <span className=\"ml-3 text-muted-foreground\">Loading all accounts...</span>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-16\">\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Accounts</h3>\n        <p className=\"text-muted-foreground mb-4\">{error}</p>\n        <Button onClick={fetchAccounts} variant=\"outline\">\n          <RefreshCw className=\"mr-2 h-4 w-4\" />\n          Try Again\n        </Button>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* KPI Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4\">\n        <Card>\n          <CardContent className=\"pt-4\">\n            <div className=\"text-2xl font-bold text-foreground\">{stats?.total || 0}</div>\n            <div className=\"text-xs text-muted-foreground\">Total</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4\">\n            <div className=\"text-2xl font-bold text-green-400\">{stats?.active || 0}</div>\n            <div className=\"text-xs text-muted-foreground\">Active</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4\">\n            <div className=\"text-2xl font-bold text-blue-400\">{stats?.investors || 0}</div>\n            <div className=\"text-xs text-muted-foreground\">Investors</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4\">\n            <div className=\"text-2xl font-bold text-purple-400\">{stats?.lawyers || 0}</div>\n            <div className=\"text-xs text-muted-foreground\">Lawyers</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4\">\n            <div className=\"text-2xl font-bold text-green-500\">{stats?.partners || 0}</div>\n            <div className=\"text-xs text-muted-foreground\">Partners</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4\">\n            <div className=\"text-2xl font-bold text-orange-400\">{stats?.commercialPartners || 0}</div>\n            <div className=\"text-xs text-muted-foreground\">Commercial</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4\">\n            <div className=\"text-2xl font-bold text-cyan-400\">{stats?.introducers || 0}</div>\n            <div className=\"text-xs text-muted-foreground\">Introducers</div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"pt-4\">\n            <div className=\"text-2xl font-bold text-amber-400\">{stats?.arrangers || 0}</div>\n            <div className=\"text-xs text-muted-foreground\">Arrangers</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Search and Filters */}\n      <Card>\n        <CardContent className=\"p-4\">\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search by name, email, or country...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            <div className=\"flex gap-2\">\n              <Select value={typeFilter} onValueChange={setTypeFilter}>\n                <SelectTrigger className=\"w-[180px]\">\n                  <Filter className=\"h-4 w-4 mr-2\" />\n                  <SelectValue placeholder=\"All Types\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Types</SelectItem>\n                  <SelectItem value=\"investor\">Investors</SelectItem>\n                  <SelectItem value=\"lawyer\">Lawyers</SelectItem>\n                  <SelectItem value=\"partner\">Partners</SelectItem>\n                  <SelectItem value=\"commercial_partner\">Commercial Partners</SelectItem>\n                  <SelectItem value=\"introducer\">Introducers</SelectItem>\n                  <SelectItem value=\"arranger\">Arrangers</SelectItem>\n                </SelectContent>\n              </Select>\n\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger className=\"w-[140px]\">\n                  <SelectValue placeholder=\"All Status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Status</SelectItem>\n                  <SelectItem value=\"active\">Active</SelectItem>\n                  <SelectItem value=\"inactive\">Inactive</SelectItem>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                </SelectContent>\n              </Select>\n\n              <Button variant=\"outline\" onClick={handleExport}>\n                <Download className=\"h-4 w-4 mr-2\" />\n                Export\n              </Button>\n\n              <Button onClick={() => setAddAccountOpen(true)}>\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Account\n              </Button>\n\n              <Button variant=\"outline\" onClick={() => setBatchInviteOpen(true)}>\n                <UserPlus className=\"h-4 w-4 mr-2\" />\n                Batch Invite\n              </Button>\n\n              <Button variant=\"outline\" onClick={fetchAccounts}>\n                <RefreshCw className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Accounts Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Building2 className=\"h-5 w-5\" />\n            All Accounts ({filteredAccounts.length})\n          </CardTitle>\n          <CardDescription>\n            Business entities linked to investments, subscriptions, and deals\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Type</TableHead>\n                <TableHead>Entity Name</TableHead>\n                <TableHead>User</TableHead>\n                <TableHead>Email</TableHead>\n                <TableHead>Role</TableHead>\n                <TableHead>Country</TableHead>\n                <TableHead>KYC</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredAccounts.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={9} className=\"text-center py-8 text-muted-foreground\">\n                    No accounts found\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredAccounts.map((account) => {\n                  const config = ENTITY_TYPE_CONFIG[account.entityType]\n                  const Icon = config.icon\n                  return (\n                    <TableRow key={account.id}>\n                      <TableCell>\n                        <Badge variant=\"outline\" className={config.color}>\n                          <Icon className=\"h-3 w-3 mr-1\" />\n                          {config.label}\n                        </Badge>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"font-medium text-foreground\">{account.entityName}</div>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-2\">\n                          <span className={account.userName === 'No users assigned' ? 'text-muted-foreground italic' : ''}>\n                            {account.userName}\n                          </span>\n                          {account.isPrimary && (\n                            <Badge variant=\"outline\" className=\"text-xs\">Primary</Badge>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <span className={account.userEmail === '-' ? 'text-muted-foreground' : ''}>\n                          {account.userEmail}\n                        </span>\n                      </TableCell>\n                      <TableCell>\n                        <span className=\"capitalize text-sm\">{account.userRole}</span>\n                      </TableCell>\n                      <TableCell>\n                        <span className={!account.country ? 'text-muted-foreground' : ''}>\n                          {account.country || '-'}\n                        </span>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-1\">\n                          {getKycStatusIcon(account.kycStatus)}\n                          {account.kycStatus && (\n                            <span className=\"text-xs capitalize\">{account.kycStatus}</span>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        {getStatusBadge(account.status)}\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <DropdownMenu>\n                          <DropdownMenuTrigger asChild>\n                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\n                              <MoreHorizontal className=\"h-4 w-4\" />\n                            </Button>\n                          </DropdownMenuTrigger>\n                          <DropdownMenuContent align=\"end\">\n                            <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                            <DropdownMenuSeparator />\n                            <DropdownMenuItem onClick={() => {\n                              const typeRoutes: Record<string, string> = {\n                                investor: 'investors',\n                                lawyer: 'lawyers',\n                                partner: 'partners',\n                                commercial_partner: 'commercial-partners',\n                                introducer: 'introducers',\n                                arranger: 'arrangers'\n                              }\n                              window.location.href = `/versotech_main/${typeRoutes[account.entityType]}/${account.entityId}`\n                            }}>\n                              <Eye className=\"mr-2 h-4 w-4\" />\n                              View Details\n                            </DropdownMenuItem>\n                            {account.userEmail && account.userEmail !== '-' && (\n                              <DropdownMenuItem onClick={() => window.location.href = `mailto:${account.userEmail}`}>\n                                <Mail className=\"mr-2 h-4 w-4\" />\n                                Send Email\n                              </DropdownMenuItem>\n                            )}\n                            <DropdownMenuItem>\n                              <UserPlus className=\"mr-2 h-4 w-4\" />\n                              Invite User\n                            </DropdownMenuItem>\n                          </DropdownMenuContent>\n                        </DropdownMenu>\n                      </TableCell>\n                    </TableRow>\n                  )\n                })\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n\n      {/* Add Account Modal */}\n      <AddAccountModal\n        open={addAccountOpen}\n        onOpenChange={setAddAccountOpen}\n        onSuccess={fetchAccounts}\n      />\n\n      {/* Batch Invite Dialog */}\n      <BatchInviteDialog\n        open={batchInviteOpen}\n        onOpenChange={setBatchInviteOpen}\n        onSuccess={fetchAccounts}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}