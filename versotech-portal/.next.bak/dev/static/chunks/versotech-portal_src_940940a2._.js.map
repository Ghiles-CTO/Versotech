{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;KARS"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/dashboard/dashboard-skeleton.tsx"],"sourcesContent":["import { Skeleton } from '@/components/ui/skeleton'\r\n\r\nexport function DashboardSkeleton() {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* KPI cards skeleton */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {Array.from({ length: 4 }).map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className=\"h-32 rounded-lg border border-border bg-card p-4 space-y-3\"\r\n          >\r\n            <Skeleton className=\"h-4 w-24\" />\r\n            <Skeleton className=\"h-8 w-32\" />\r\n            <Skeleton className=\"h-4 w-16\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Charts and widgets skeleton */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {Array.from({ length: 4 }).map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className=\"h-80 rounded-lg border border-border bg-card p-4 space-y-4\"\r\n          >\r\n            <Skeleton className=\"h-6 w-40\" />\r\n            <Skeleton className=\"h-64 w-full\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS;IACd,qBACE,oNAAC;QAAI,WAAU;;0BAEb,oNAAC;gBAAI,WAAU;0BACZ,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAE,GAAG,GAAG,CAAC,CAAC,GAAG,kBACjC,oNAAC;wBAEC,WAAU;;0CAEV,oNAAC,0KAAQ;gCAAC,WAAU;;;;;;0CACpB,oNAAC,0KAAQ;gCAAC,WAAU;;;;;;0CACpB,oNAAC,0KAAQ;gCAAC,WAAU;;;;;;;uBALf;;;;;;;;;;0BAWX,oNAAC;gBAAI,WAAU;0BACZ,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAE,GAAG,GAAG,CAAC,CAAC,GAAG,kBACjC,oNAAC;wBAEC,WAAU;;0CAEV,oNAAC,0KAAQ;gCAAC,WAAU;;;;;;0CACpB,oNAAC,0KAAQ;gCAAC,WAAU;;;;;;;uBAJf;;;;;;;;;;;;;;;;AAUjB;KA/BgB"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/dashboard/kpi-card.tsx"],"sourcesContent":["import type { KeyboardEvent } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { LucideIcon } from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\ninterface KPICardProps {\n  title: string\n  value: string | number\n  subtitle?: string\n  description?: string  // Add backward compatibility\n  icon?: LucideIcon\n  trend?: 'up' | 'down' | 'neutral' | {  // Support both string and object formats\n    value: number\n    isPositive: boolean\n  }\n  trendValue?: string  // Add for backward compatibility\n  className?: string\n  interactive?: boolean  // Enable interactivity\n  onDrillDown?: () => void  // Drill-down callback\n  hasDetails?: boolean  // Show drill-down indicator\n  additionalInfo?: {  // Extra info for expanded view\n    breakdown?: Array<{ label: string; value: string | number }>\n    change?: { period: string; value: string }\n    benchmark?: { label: string; value: string }\n  }\n}\n\nexport function KPICard({\n  title,\n  value,\n  subtitle,\n  description, // Accept description prop\n  icon: Icon,\n  trend,\n  trendValue, // Accept trendValue prop\n  className,\n  interactive = false,\n  onDrillDown,\n  hasDetails = false,\n  additionalInfo\n}: KPICardProps) {\n  const isClickable = interactive && (onDrillDown || hasDetails)\n  const displayValue = typeof value === 'number' ? value.toString() : value\n\n  const handleKeyDown = (event: KeyboardEvent<HTMLDivElement>) => {\n    if (!isClickable || !onDrillDown) {\n      return\n    }\n\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault()\n      onDrillDown()\n    }\n  }\n\n  return (\n    <Card\n      className={cn(\n        \"group hover:shadow-lg transition-all duration-300 ease-in-out hover:-translate-y-1 border-0 shadow-md\",\n        isClickable && \"cursor-pointer hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]\",\n        className\n      )}\n      onClick={isClickable ? onDrillDown : undefined}\n      onKeyDown={isClickable ? handleKeyDown : undefined}\n      role={isClickable ? 'button' : undefined}\n      tabIndex={isClickable ? 0 : undefined}\n      aria-label={isClickable ? `${title}: ${displayValue}` : undefined}\n    >\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n        <CardTitle className=\"text-sm font-medium text-muted-foreground group-hover:text-gray-700 dark:group-hover:text-gray-200 transition-colors\">\n          {title}\n        </CardTitle>\n        <div className=\"flex items-center gap-2\">\n          {Icon && <Icon className=\"h-4 w-4 text-muted-foreground group-hover:text-blue-600 transition-all duration-300 group-hover:scale-110\" />}\n          {hasDetails && (\n            <div className=\"h-2 w-2 rounded-full bg-blue-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse\" />\n          )}\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent group-hover:from-blue-900 group-hover:to-blue-700 dark:group-hover:from-blue-400 dark:group-hover:to-blue-300 transition-all duration-300\">\n          {displayValue}\n        </div>\n        {(subtitle || description) && (\n          <p className=\"text-xs text-muted-foreground\">\n            {subtitle || description}\n          </p>\n        )}\n        {(trend || trendValue) && (\n          <div className=\"flex items-center space-x-2 text-xs\">\n            {typeof trend === 'object' && trend.value && (\n              <>\n                <span className={cn(\n                  \"font-medium\",\n                  trend.isPositive ? \"text-green-600 dark:text-green-400\" : \"text-red-600 dark:text-red-400\"\n                )}>\n                  {trend.isPositive ? '+' : ''}{trend.value}%\n                </span>\n                <span className=\"text-muted-foreground\">from last quarter</span>\n              </>\n            )}\n            {typeof trend === 'string' && trendValue && (\n              <>\n                <span className={cn(\n                  \"font-medium\",\n                  trend === 'up' ? \"text-green-600 dark:text-green-400\" :\n                  trend === 'down' ? \"text-red-600 dark:text-red-400\" : \"text-gray-600 dark:text-gray-400\"\n                )}>\n                  {trendValue}\n                </span>\n                <span className=\"text-muted-foreground\">from last quarter</span>\n              </>\n            )}\n          </div>\n        )}\n\n        {/* Additional Info for Interactive Cards */}\n        {additionalInfo && isClickable && (\n          <div className=\"mt-3 pt-3 border-t opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n            {additionalInfo.change && (\n              <div className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                <span className=\"font-medium\">{additionalInfo.change.period}:</span> {additionalInfo.change.value}\n              </div>\n            )}\n\n            {additionalInfo.benchmark && (\n              <div className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                <span className=\"font-medium\">{additionalInfo.benchmark.label}:</span> {additionalInfo.benchmark.value}\n              </div>\n            )}\n\n            {additionalInfo.breakdown && additionalInfo.breakdown.length > 0 && (\n              <div className=\"space-y-1\">\n                {additionalInfo.breakdown.slice(0, 2).map((item, index) => (\n                  <div key={index} className=\"flex justify-between text-xs\">\n                    <span className=\"text-gray-500 dark:text-gray-400\">{item.label}</span>\n                    <span className=\"font-medium\">{item.value}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {hasDetails && (\n              <div className=\"text-xs text-blue-600 dark:text-blue-400 font-medium mt-2 opacity-0 group-hover:opacity-100 transition-opacity delay-150\">\n                Click for details →\n              </div>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAwBO,SAAS,QAAQ,EACtB,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACX,MAAM,IAAI,EACV,KAAK,EACL,UAAU,EACV,SAAS,EACT,cAAc,KAAK,EACnB,WAAW,EACX,aAAa,KAAK,EAClB,cAAc,EACD;IACb,MAAM,cAAc,eAAe,CAAC,eAAe,UAAU;IAC7D,MAAM,eAAe,OAAO,UAAU,WAAW,MAAM,QAAQ,KAAK;IAEpE,MAAM,gBAAgB,CAAC;QACrB,IAAI,CAAC,eAAe,CAAC,aAAa;YAChC;QACF;QAEA,IAAI,MAAM,GAAG,KAAK,WAAW,MAAM,GAAG,KAAK,KAAK;YAC9C,MAAM,cAAc;YACpB;QACF;IACF;IAEA,qBACE,oNAAC,kKAAI;QACH,WAAW,IAAA,mJAAE,EACX,yGACA,eAAe,yEACf;QAEF,SAAS,cAAc,cAAc;QACrC,WAAW,cAAc,gBAAgB;QACzC,MAAM,cAAc,WAAW;QAC/B,UAAU,cAAc,IAAI;QAC5B,cAAY,cAAc,GAAG,MAAM,EAAE,EAAE,cAAc,GAAG;;0BAExD,oNAAC,wKAAU;gBAAC,WAAU;;kCACpB,oNAAC,uKAAS;wBAAC,WAAU;kCAClB;;;;;;kCAEH,oNAAC;wBAAI,WAAU;;4BACZ,sBAAQ,oNAAC;gCAAK,WAAU;;;;;;4BACxB,4BACC,oNAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;0BAIrB,oNAAC,yKAAW;;kCACV,oNAAC;wBAAI,WAAU;kCACZ;;;;;;oBAEF,CAAC,YAAY,WAAW,mBACvB,oNAAC;wBAAE,WAAU;kCACV,YAAY;;;;;;oBAGhB,CAAC,SAAS,UAAU,mBACnB,oNAAC;wBAAI,WAAU;;4BACZ,OAAO,UAAU,YAAY,MAAM,KAAK,kBACvC;;kDACE,oNAAC;wCAAK,WAAW,IAAA,mJAAE,EACjB,eACA,MAAM,UAAU,GAAG,uCAAuC;;4CAEzD,MAAM,UAAU,GAAG,MAAM;4CAAI,MAAM,KAAK;4CAAC;;;;;;;kDAE5C,oNAAC;wCAAK,WAAU;kDAAwB;;;;;;;;4BAG3C,OAAO,UAAU,YAAY,4BAC5B;;kDACE,oNAAC;wCAAK,WAAW,IAAA,mJAAE,EACjB,eACA,UAAU,OAAO,uCACjB,UAAU,SAAS,mCAAmC;kDAErD;;;;;;kDAEH,oNAAC;wCAAK,WAAU;kDAAwB;;;;;;;;;;;;;;oBAO/C,kBAAkB,6BACjB,oNAAC;wBAAI,WAAU;;4BACZ,eAAe,MAAM,kBACpB,oNAAC;gCAAI,WAAU;;kDACb,oNAAC;wCAAK,WAAU;;4CAAe,eAAe,MAAM,CAAC,MAAM;4CAAC;;;;;;;oCAAQ;oCAAE,eAAe,MAAM,CAAC,KAAK;;;;;;;4BAIpG,eAAe,SAAS,kBACvB,oNAAC;gCAAI,WAAU;;kDACb,oNAAC;wCAAK,WAAU;;4CAAe,eAAe,SAAS,CAAC,KAAK;4CAAC;;;;;;;oCAAQ;oCAAE,eAAe,SAAS,CAAC,KAAK;;;;;;;4BAIzG,eAAe,SAAS,IAAI,eAAe,SAAS,CAAC,MAAM,GAAG,mBAC7D,oNAAC;gCAAI,WAAU;0CACZ,eAAe,SAAS,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,sBAC/C,oNAAC;wCAAgB,WAAU;;0DACzB,oNAAC;gDAAK,WAAU;0DAAoC,KAAK,KAAK;;;;;;0DAC9D,oNAAC;gDAAK,WAAU;0DAAe,KAAK,KAAK;;;;;;;uCAFjC;;;;;;;;;;4BAQf,4BACC,oNAAC;gCAAI,WAAU;0CAA2H;;;;;;;;;;;;;;;;;;;;;;;;AASxJ;KA7HgB"}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/dashboard/components/dashboard-kpi-cards.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { KPICard } from '@/components/dashboard/kpi-card'\nimport { Users, TrendingUp, DollarSign, FileCheck } from 'lucide-react'\nimport { Skeleton } from '@/components/ui/skeleton'\n\ninterface DashboardMetrics {\n  kpis: {\n    aum: {\n      value: number\n      commitment: number\n      funded: number\n      funding_rate: number\n      change_mtd: number | null\n      trend: 'up' | 'down' | null\n    }\n    revenue: {\n      total: number\n      spread_fees: number\n      subscription_fees: number\n      management_fees: number\n    }\n    investors: {\n      active: number\n      new_mtd: number\n      trend: 'up' | 'down' | null\n    }\n    deals: {\n      open: number\n      pipeline_value: number\n      trend: 'up' | 'down' | null\n    }\n    pending: {\n      approvals: number\n      tasks: number\n      kyc: number\n    }\n  }\n}\n\ninterface DashboardKPICardsProps {\n  days: string\n}\n\n/**\n * Formats a number for display:\n * - Currency: $1.2M, $45.2M, $123.5K\n * - Counts: 1,247\n */\nfunction formatNumber(value: number, isCurrency = false): string {\n  if (isCurrency) {\n    if (value >= 1_000_000_000) {\n      return `$${(value / 1_000_000_000).toFixed(1)}B`\n    }\n    if (value >= 1_000_000) {\n      return `$${(value / 1_000_000).toFixed(1)}M`\n    }\n    if (value >= 1_000) {\n      return `$${(value / 1_000).toFixed(1)}K`\n    }\n    return `$${value.toLocaleString()}`\n  }\n  return value.toLocaleString()\n}\n\n/**\n * Calculates percentage change between current and previous values\n */\nfunction calculateChange(current: number, previous: number): { value: number; isPositive: boolean } | null {\n  if (previous === 0) return null\n  const change = ((current - previous) / previous) * 100\n  return {\n    value: Math.abs(Math.round(change * 10) / 10),\n    isPositive: change >= 0\n  }\n}\n\nfunction KPICardSkeleton() {\n  return (\n    <div className=\"rounded-xl border bg-card p-6 shadow-sm\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <Skeleton className=\"h-4 w-24\" />\n        <Skeleton className=\"h-4 w-4 rounded\" />\n      </div>\n      <Skeleton className=\"h-8 w-20 mb-2\" />\n      <Skeleton className=\"h-3 w-32\" />\n    </div>\n  )\n}\n\nexport function DashboardKPICards({ days }: DashboardKPICardsProps) {\n  const [metrics, setMetrics] = useState<DashboardMetrics | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchMetrics() {\n      setLoading(true)\n      setError(null)\n      try {\n        const response = await fetch(`/api/admin/metrics/dashboard?days=${days}`)\n        if (!response.ok) {\n          throw new Error('Failed to fetch metrics')\n        }\n        const result = await response.json()\n        if (result.success && result.data) {\n          setMetrics(result.data)\n        } else {\n          throw new Error(result.error || 'Unknown error')\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load metrics')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchMetrics()\n  }, [days])\n\n  if (loading) {\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <KPICardSkeleton />\n        <KPICardSkeleton />\n        <KPICardSkeleton />\n        <KPICardSkeleton />\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-destructive\">\n        <p className=\"text-sm font-medium\">Failed to load KPI metrics</p>\n        <p className=\"text-xs mt-1\">{error}</p>\n      </div>\n    )\n  }\n\n  if (!metrics) {\n    return null\n  }\n\n  const { kpis } = metrics\n\n  // Calculate trends for display\n  // Since the API doesn't provide historical data for comparisons,\n  // we show new_mtd as a positive trend indicator for investors\n  const investorTrend = kpis.investors.new_mtd > 0\n    ? { value: kpis.investors.new_mtd, isPositive: true }\n    : null\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n      {/* Total Users (Active Investors) */}\n      <KPICard\n        title=\"Total Users\"\n        value={formatNumber(kpis.investors.active)}\n        icon={Users}\n        subtitle={`${formatNumber(kpis.investors.new_mtd)} new this month`}\n        trend={investorTrend ? { value: investorTrend.value, isPositive: investorTrend.isPositive } : undefined}\n      />\n\n      {/* Active Users (based on recent activity proxy) */}\n      <KPICard\n        title=\"Active Investors\"\n        value={formatNumber(kpis.investors.active)}\n        icon={TrendingUp}\n        subtitle={`${kpis.deals.open} open deals`}\n        trend={kpis.investors.trend === 'up' ? { value: 0, isPositive: true } : undefined}\n      />\n\n      {/* Total AUM */}\n      <KPICard\n        title=\"Total AUM\"\n        value={formatNumber(kpis.aum.value, true)}\n        icon={DollarSign}\n        subtitle={`${kpis.aum.funding_rate}% funding rate`}\n        trend={kpis.aum.change_mtd !== null ? { value: kpis.aum.change_mtd, isPositive: kpis.aum.change_mtd >= 0 } : undefined}\n        additionalInfo={{\n          breakdown: [\n            { label: 'Committed', value: formatNumber(kpis.aum.commitment, true) },\n            { label: 'Funded', value: formatNumber(kpis.aum.funded, true) }\n          ]\n        }}\n        interactive\n        hasDetails\n      />\n\n      {/* Pending Approvals */}\n      <KPICard\n        title=\"Pending Approvals\"\n        value={formatNumber(kpis.pending.approvals + kpis.pending.tasks + kpis.pending.kyc)}\n        icon={FileCheck}\n        subtitle={`${kpis.pending.kyc} KYC reviews pending`}\n        additionalInfo={{\n          breakdown: [\n            { label: 'Approvals', value: kpis.pending.approvals },\n            { label: 'Tasks', value: kpis.pending.tasks }\n          ]\n        }}\n        interactive\n        hasDetails\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 811, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/dashboard/components/dashboard-activity-chart.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport { Activity } from 'lucide-react'\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  CartesianGrid,\n} from 'recharts'\n\ninterface ActivityDataPoint {\n  date: string\n  activeUsers: number\n  label: string\n}\n\ninterface DashboardActivityChartProps {\n  days: string\n}\n\nfunction ChartSkeleton() {\n  return (\n    <Card>\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center gap-2\">\n          <Skeleton className=\"h-4 w-4\" />\n          <Skeleton className=\"h-5 w-32\" />\n        </div>\n      </CardHeader>\n      <CardContent>\n        <Skeleton className=\"h-[250px] w-full\" />\n      </CardContent>\n    </Card>\n  )\n}\n\ninterface TooltipPayload {\n  payload: ActivityDataPoint\n  value: number\n}\n\nfunction CustomTooltip({\n  active,\n  payload\n}: {\n  active?: boolean\n  payload?: TooltipPayload[]\n}) {\n  if (active && payload && payload.length > 0) {\n    const data = payload[0].payload\n    const formattedDate = new Date(data.date).toLocaleDateString('en-US', {\n      weekday: 'short',\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    })\n    return (\n      <div className=\"bg-popover border border-border rounded-lg p-3 shadow-lg\">\n        <p className=\"text-sm font-medium text-foreground\">{formattedDate}</p>\n        <p className=\"text-sm text-muted-foreground mt-1\">\n          <span className=\"font-medium text-primary\">{data.activeUsers.toLocaleString()}</span> active users\n        </p>\n      </div>\n    )\n  }\n  return null\n}\n\nexport function DashboardActivityChart({ days }: DashboardActivityChartProps) {\n  const [data, setData] = useState<ActivityDataPoint[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchActivityData() {\n      setLoading(true)\n      setError(null)\n      try {\n        const response = await fetch(`/api/admin/metrics/dashboard?days=${days}`)\n        if (!response.ok) {\n          throw new Error('Failed to fetch activity data')\n        }\n        const result = await response.json()\n        if (result.success && result.data?.adminMetrics?.userActivityTrend) {\n          setData(result.data.adminMetrics.userActivityTrend)\n        } else {\n          throw new Error(result.error || 'No activity data available')\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load activity data')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchActivityData()\n  }, [days])\n\n  if (loading) {\n    return <ChartSkeleton />\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardHeader className=\"pb-2\">\n          <div className=\"flex items-center gap-2\">\n            <Activity className=\"h-4 w-4 text-primary\" />\n            <CardTitle className=\"text-sm font-medium\">User Activity</CardTitle>\n          </div>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-[250px]\">\n          <p className=\"text-sm text-destructive\">{error}</p>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (!data || data.length === 0) {\n    return (\n      <Card>\n        <CardHeader className=\"pb-2\">\n          <div className=\"flex items-center gap-2\">\n            <Activity className=\"h-4 w-4 text-primary\" />\n            <CardTitle className=\"text-sm font-medium\">User Activity</CardTitle>\n          </div>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-[250px]\">\n          <p className=\"text-sm text-muted-foreground\">No activity data available</p>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  // Calculate max value for Y-axis with some headroom\n  const maxUsers = Math.max(...data.map((d) => d.activeUsers), 1)\n  const yAxisMax = Math.ceil(maxUsers * 1.1)\n\n  // Determine tick interval based on data length\n  const tickInterval = days === '7' ? 0 : days === '30' ? 4 : 10\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center gap-2\">\n          <Activity className=\"h-4 w-4 text-primary\" />\n          <CardTitle className=\"text-sm font-medium\">Daily Active Users</CardTitle>\n        </div>\n        <p className=\"text-xs text-muted-foreground mt-1\">\n          Unique users with activity over the last {days} days\n        </p>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={250}>\n          <LineChart\n            data={data}\n            margin={{ top: 5, right: 10, left: 10, bottom: 5 }}\n          >\n            <CartesianGrid\n              strokeDasharray=\"3 3\"\n              className=\"stroke-border/50\"\n              vertical={false}\n            />\n            <XAxis\n              dataKey=\"label\"\n              stroke=\"currentColor\"\n              className=\"text-muted-foreground\"\n              fontSize={11}\n              tickLine={false}\n              axisLine={false}\n              interval={tickInterval}\n              dy={8}\n            />\n            <YAxis\n              stroke=\"currentColor\"\n              className=\"text-muted-foreground\"\n              fontSize={11}\n              tickLine={false}\n              axisLine={false}\n              domain={[0, yAxisMax]}\n              tickFormatter={(value) => value.toLocaleString()}\n              width={40}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            <Line\n              type=\"monotone\"\n              dataKey=\"activeUsers\"\n              stroke=\"hsl(var(--primary))\"\n              strokeWidth={2}\n              dot={false}\n              activeDot={{\n                r: 5,\n                fill: 'hsl(var(--primary))',\n                stroke: 'hsl(var(--background))',\n                strokeWidth: 2,\n              }}\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1257, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/dashboard/components/dashboard-approval-queue.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport {\n  ClipboardCheck,\n  FileText,\n  UserCheck,\n  ChevronRight,\n  AlertCircle,\n  LucideIcon\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\ninterface PendingItems {\n  approvals: number\n  tasks: number\n  kyc: number\n}\n\ninterface ApprovalQueueItem {\n  id: string\n  label: string\n  count: number\n  href: string\n  icon: LucideIcon\n  description: string\n}\n\ninterface DashboardApprovalQueueProps {\n  days: string\n}\n\nfunction ApprovalQueueSkeleton() {\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-3\">\n        <Skeleton className=\"h-5 w-32\" />\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {[1, 2, 3].map((i) => (\n          <div key={i} className=\"flex items-center justify-between p-3 rounded-lg border\">\n            <div className=\"flex items-center gap-3\">\n              <Skeleton className=\"h-8 w-8 rounded\" />\n              <div className=\"space-y-1.5\">\n                <Skeleton className=\"h-4 w-24\" />\n                <Skeleton className=\"h-3 w-32\" />\n              </div>\n            </div>\n            <Skeleton className=\"h-5 w-8 rounded-full\" />\n          </div>\n        ))}\n      </CardContent>\n    </Card>\n  )\n}\n\nexport function DashboardApprovalQueue({ days }: DashboardApprovalQueueProps) {\n  const [pendingItems, setPendingItems] = useState<PendingItems | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchPendingItems() {\n      setLoading(true)\n      setError(null)\n      try {\n        const response = await fetch(`/api/admin/metrics/dashboard?days=${days}`)\n        if (!response.ok) {\n          throw new Error('Failed to fetch approval queue data')\n        }\n        const result = await response.json()\n        if (result.success && result.data?.kpis?.pending) {\n          setPendingItems(result.data.kpis.pending)\n        } else {\n          throw new Error(result.error || 'Unknown error')\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load data')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchPendingItems()\n  }, [days])\n\n  if (loading) {\n    return <ApprovalQueueSkeleton />\n  }\n\n  if (error) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\n            <ClipboardCheck className=\"h-4 w-4\" />\n            Approval Queue\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col items-center justify-center py-8 text-center\">\n            <AlertCircle className=\"h-8 w-8 text-muted-foreground mb-2\" />\n            <p className=\"text-sm text-muted-foreground\">{error}</p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (!pendingItems) {\n    return null\n  }\n\n  // Map pending items to approval queue items\n  const queueItems: ApprovalQueueItem[] = [\n    {\n      id: 'kyc-review',\n      label: 'KYC Review',\n      count: pendingItems.kyc,\n      href: '/versotech_admin/users?filter=kyc_pending',\n      icon: UserCheck,\n      description: 'Investor verification pending',\n    },\n    {\n      id: 'subscriptions',\n      label: 'Subscriptions',\n      count: pendingItems.approvals,\n      href: '/versotech_admin/approvals',\n      icon: FileText,\n      description: 'Subscription approvals waiting',\n    },\n    {\n      id: 'documents',\n      label: 'Documents',\n      count: pendingItems.tasks,\n      href: '/versotech_admin/tasks',\n      icon: ClipboardCheck,\n      description: 'Document tasks to review',\n    },\n  ]\n\n  const totalPending = queueItems.reduce((sum, item) => sum + item.count, 0)\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\n            <ClipboardCheck className=\"h-4 w-4 text-primary\" />\n            Approval Queue\n          </CardTitle>\n          {totalPending > 0 && (\n            <Badge variant=\"secondary\" className=\"font-medium\">\n              {totalPending} total\n            </Badge>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-2\">\n        {queueItems.map((item) => {\n          const Icon = item.icon\n          const hasItems = item.count > 0\n\n          return (\n            <Link\n              key={item.id}\n              href={item.href}\n              className={cn(\n                'flex items-center justify-between p-3 rounded-lg border transition-colors',\n                'hover:bg-accent/50 hover:border-accent',\n                hasItems && 'border-primary/20 bg-primary/5'\n              )}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div className={cn(\n                  'flex items-center justify-center h-8 w-8 rounded-md',\n                  hasItems\n                    ? 'bg-primary/10 text-primary'\n                    : 'bg-muted text-muted-foreground'\n                )}>\n                  <Icon className=\"h-4 w-4\" />\n                </div>\n                <div>\n                  <p className={cn(\n                    'text-sm font-medium',\n                    hasItems ? 'text-foreground' : 'text-muted-foreground'\n                  )}>\n                    {item.label}\n                  </p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {item.description}\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Badge\n                  variant={hasItems ? 'default' : 'secondary'}\n                  className={cn(\n                    'min-w-[28px] justify-center',\n                    hasItems && 'bg-primary hover:bg-primary/90'\n                  )}\n                >\n                  {item.count}\n                </Badge>\n                <ChevronRight className={cn(\n                  'h-4 w-4',\n                  hasItems ? 'text-primary' : 'text-muted-foreground'\n                )} />\n              </div>\n            </Link>\n          )\n        })}\n\n        {/* Empty state */}\n        {totalPending === 0 && (\n          <div className=\"text-center py-4 text-sm text-muted-foreground\">\n            No pending items — you&apos;re all caught up!\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1680, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/dashboard/components/dashboard-activity-feed.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport { Button } from '@/components/ui/button'\nimport {\n  Activity,\n  AlertCircle,\n  User,\n  ChevronRight,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { formatDistanceToNow } from 'date-fns'\n\ninterface ActivityItem {\n  id: string\n  timestamp: string\n  actor_id: string\n  actor_name: string | null\n  action: string\n  entity_type: string\n  entity_id: string\n  before_value: unknown\n  after_value: unknown\n}\n\ninterface DashboardActivityFeedProps {\n  days?: string\n}\n\n// Transform action names into human-readable descriptions\nfunction getActionDescription(action: string, entityType: string): string {\n  // Action mapping for common audit actions\n  const actionMap: Record<string, string> = {\n    // User actions\n    'LOGIN': 'Signed in',\n    'LOGOUT': 'Signed out',\n    'CREATE': 'Created',\n    'UPDATE': 'Updated',\n    'DELETE': 'Deleted',\n    'VIEW': 'Viewed',\n    'DOWNLOAD': 'Downloaded',\n    // KYC actions\n    'KYC_SUBMIT': 'Submitted KYC',\n    'KYC_APPROVE': 'Approved KYC',\n    'KYC_REJECT': 'Rejected KYC',\n    // Subscription actions\n    'SUBSCRIPTION_CREATE': 'Created subscription',\n    'SUBSCRIPTION_APPROVE': 'Approved subscription',\n    'SUBSCRIPTION_REJECT': 'Rejected subscription',\n    // Deal actions\n    'DEAL_CREATE': 'Created deal',\n    'DEAL_UPDATE': 'Updated deal',\n    'DEAL_PUBLISH': 'Published deal',\n    // Document actions\n    'DOCUMENT_UPLOAD': 'Uploaded document',\n    'DOCUMENT_SIGN': 'Signed document',\n    // Investment actions\n    'INVESTMENT_COMMIT': 'Committed investment',\n    'ALLOCATION_CREATE': 'Created allocation',\n  }\n\n  // Try exact match first\n  if (actionMap[action]) {\n    return actionMap[action]\n  }\n\n  // Try to construct a readable description from the action and entity type\n  const actionParts = action.toLowerCase().split('_')\n  const verb = actionParts[0]\n\n  const verbMap: Record<string, string> = {\n    'create': 'Created',\n    'update': 'Updated',\n    'delete': 'Deleted',\n    'view': 'Viewed',\n    'download': 'Downloaded',\n    'upload': 'Uploaded',\n    'approve': 'Approved',\n    'reject': 'Rejected',\n    'sign': 'Signed',\n    'submit': 'Submitted',\n    'publish': 'Published',\n    'archive': 'Archived',\n    'restore': 'Restored',\n    'lock': 'Locked',\n    'unlock': 'Unlocked',\n  }\n\n  // Build description from verb and entity type\n  const readableVerb = verbMap[verb] || verb.charAt(0).toUpperCase() + verb.slice(1)\n  const readableEntity = entityType.toLowerCase().replace(/_/g, ' ')\n\n  return `${readableVerb} ${readableEntity}`\n}\n\nfunction ActivityFeedSkeleton() {\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-3\">\n        <Skeleton className=\"h-5 w-28\" />\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {[1, 2, 3, 4, 5].map((i) => (\n          <div key={i} className=\"flex items-start gap-3 pb-3 border-b last:border-0\">\n            <Skeleton className=\"h-8 w-8 rounded-full shrink-0\" />\n            <div className=\"flex-1 space-y-1.5\">\n              <Skeleton className=\"h-4 w-3/4\" />\n              <Skeleton className=\"h-3 w-20\" />\n            </div>\n          </div>\n        ))}\n      </CardContent>\n    </Card>\n  )\n}\n\nexport function DashboardActivityFeed({ days }: DashboardActivityFeedProps) {\n  const [activities, setActivities] = useState<ActivityItem[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchActivityFeed() {\n      setLoading(true)\n      setError(null)\n      try {\n        const response = await fetch('/api/admin/activity-feed')\n        if (!response.ok) {\n          throw new Error('Failed to fetch activity feed')\n        }\n        const result = await response.json()\n        if (result.success && result.data) {\n          // Only show last 10 activities\n          setActivities(result.data.slice(0, 10))\n        } else {\n          throw new Error(result.error || 'Unknown error')\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load activity')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchActivityFeed()\n  }, [days])\n\n  if (loading) {\n    return <ActivityFeedSkeleton />\n  }\n\n  if (error) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\n            <Activity className=\"h-4 w-4\" />\n            Recent Activity\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col items-center justify-center py-8 text-center\">\n            <AlertCircle className=\"h-8 w-8 text-muted-foreground mb-2\" />\n            <p className=\"text-sm text-muted-foreground\">{error}</p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <Card className=\"h-full flex flex-col\">\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\n          <Activity className=\"h-4 w-4 text-primary\" />\n          Recent Activity\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"flex-1 flex flex-col\">\n        {/* Scrollable activity list with max height */}\n        <div className=\"flex-1 max-h-[280px] overflow-y-auto pr-1 -mr-1 space-y-1\">\n          {activities.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-8 text-center\">\n              <Activity className=\"h-8 w-8 text-muted-foreground mb-2\" />\n              <p className=\"text-sm text-muted-foreground\">No recent activity</p>\n            </div>\n          ) : (\n            activities.map((activity) => (\n              <div\n                key={activity.id}\n                className={cn(\n                  'flex items-start gap-3 p-2 rounded-md transition-colors',\n                  'hover:bg-accent/50'\n                )}\n              >\n                {/* Actor avatar placeholder */}\n                <div className=\"flex items-center justify-center h-8 w-8 rounded-full bg-muted shrink-0\">\n                  <User className=\"h-4 w-4 text-muted-foreground\" />\n                </div>\n\n                {/* Activity details */}\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm\">\n                    <span className=\"font-medium\">\n                      {activity.actor_name || 'Unknown user'}\n                    </span>{' '}\n                    <span className=\"text-muted-foreground\">\n                      {getActionDescription(activity.action, activity.entity_type)}\n                    </span>\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-0.5\">\n                    {formatDistanceToNow(new Date(activity.timestamp), {\n                      addSuffix: true,\n                    })}\n                  </p>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* View All link at bottom */}\n        {activities.length > 0 && (\n          <div className=\"pt-3 mt-3 border-t\">\n            <Link href=\"/versotech_admin/activity\" className=\"w-full\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"w-full justify-between text-muted-foreground hover:text-foreground\"\n              >\n                View All Activity\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n            </Link>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2137, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/dashboard/components/dashboard-compliance-alerts.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible'\nimport {\n  ShieldAlert,\n  AlertTriangle,\n  AlertCircle,\n  CheckCircle2,\n  ChevronDown,\n  ChevronRight,\n  Calendar,\n  User,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\ninterface ComplianceAlert {\n  id: string\n  type: 'kyc_expiry' | 'accreditation_expiry' | 'unsigned_doc' | 'aml_flag'\n  severity: 'critical' | 'high' | 'medium' | 'low'\n  investor_id: string\n  investor_name: string\n  details: string\n  due_date?: string\n  days_until_due?: number\n  created_at: string\n}\n\ninterface DashboardComplianceAlertsProps {\n  days: string\n}\n\ninterface SeverityGroup {\n  id: string\n  label: string\n  severity: 'critical' | 'warning' | 'clear'\n  alerts: ComplianceAlert[]\n  colorClass: string\n  bgClass: string\n  borderClass: string\n  badgeVariant: 'destructive' | 'secondary' | 'default'\n}\n\nfunction ComplianceAlertsSkeleton() {\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-3\">\n        <Skeleton className=\"h-5 w-40\" />\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {[1, 2, 3].map((i) => (\n          <div key={i} className=\"p-3 rounded-lg border\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Skeleton className=\"h-5 w-5 rounded\" />\n                <Skeleton className=\"h-4 w-24\" />\n              </div>\n              <Skeleton className=\"h-5 w-8 rounded-full\" />\n            </div>\n          </div>\n        ))}\n      </CardContent>\n    </Card>\n  )\n}\n\nfunction AlertItem({ alert }: { alert: ComplianceAlert }) {\n  return (\n    <div className=\"flex items-start gap-3 py-2 px-3 rounded-md bg-muted/50 text-sm\">\n      <User className=\"h-4 w-4 text-muted-foreground mt-0.5 shrink-0\" />\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"font-medium text-foreground truncate\">{alert.investor_name}</p>\n        <p className=\"text-muted-foreground text-xs\">{alert.details}</p>\n        {alert.due_date && (\n          <div className=\"flex items-center gap-1 mt-1 text-xs text-muted-foreground\">\n            <Calendar className=\"h-3 w-3\" />\n            <span>Due: {new Date(alert.due_date).toLocaleDateString()}</span>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nfunction SeveritySection({ group, defaultOpen }: { group: SeverityGroup; defaultOpen?: boolean }) {\n  const [isOpen, setIsOpen] = useState(defaultOpen || false)\n\n  if (group.alerts.length === 0 && group.severity !== 'clear') {\n    return null\n  }\n\n  const IconComponent = group.severity === 'critical'\n    ? AlertCircle\n    : group.severity === 'warning'\n      ? AlertTriangle\n      : CheckCircle2\n\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <button\n          className={cn(\n            'w-full flex items-center justify-between p-3 rounded-lg border transition-colors',\n            'hover:bg-accent/50',\n            group.borderClass,\n            group.bgClass\n          )}\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className={cn('p-1.5 rounded-md', group.bgClass)}>\n              <IconComponent className={cn('h-4 w-4', group.colorClass)} />\n            </div>\n            <span className={cn('font-medium text-sm', group.colorClass)}>\n              {group.label}\n            </span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Badge\n              variant={group.badgeVariant}\n              className={cn(\n                'min-w-[28px] justify-center',\n                group.severity === 'warning' && 'bg-yellow-500/90 text-white hover:bg-yellow-500/80',\n                group.severity === 'clear' && 'bg-green-500/90 text-white hover:bg-green-500/80'\n              )}\n            >\n              {group.alerts.length}\n            </Badge>\n            {group.alerts.length > 0 && (\n              isOpen ? (\n                <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n              ) : (\n                <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n              )\n            )}\n          </div>\n        </button>\n      </CollapsibleTrigger>\n      {group.alerts.length > 0 && (\n        <CollapsibleContent className=\"pt-2 space-y-1.5 pl-2\">\n          {group.alerts.map((alert) => (\n            <AlertItem key={alert.id} alert={alert} />\n          ))}\n        </CollapsibleContent>\n      )}\n    </Collapsible>\n  )\n}\n\nexport function DashboardComplianceAlerts({ days }: DashboardComplianceAlertsProps) {\n  const [alerts, setAlerts] = useState<ComplianceAlert[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchAlerts() {\n      setLoading(true)\n      setError(null)\n      try {\n        const response = await fetch(`/api/admin/compliance/alerts?days=${days}`)\n        if (!response.ok) {\n          throw new Error('Failed to fetch compliance alerts')\n        }\n        const result = await response.json()\n        if (result.success && result.data?.alerts) {\n          setAlerts(result.data.alerts)\n        } else {\n          throw new Error(result.error || 'Unknown error')\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load data')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchAlerts()\n  }, [days])\n\n  if (loading) {\n    return <ComplianceAlertsSkeleton />\n  }\n\n  if (error) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\n            <ShieldAlert className=\"h-4 w-4\" />\n            Compliance Alerts\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col items-center justify-center py-8 text-center\">\n            <AlertCircle className=\"h-8 w-8 text-muted-foreground mb-2\" />\n            <p className=\"text-sm text-muted-foreground\">{error}</p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  // Group alerts by severity level\n  const criticalAlerts = alerts.filter((a) => a.severity === 'critical')\n  const warningAlerts = alerts.filter((a) => a.severity === 'high')\n  const lowAlerts = alerts.filter((a) => a.severity === 'medium' || a.severity === 'low')\n\n  const severityGroups: SeverityGroup[] = [\n    {\n      id: 'critical',\n      label: 'Critical',\n      severity: 'critical',\n      alerts: criticalAlerts,\n      colorClass: 'text-red-600 dark:text-red-400',\n      bgClass: 'bg-red-500/10',\n      borderClass: 'border-red-500/30',\n      badgeVariant: 'destructive',\n    },\n    {\n      id: 'warning',\n      label: 'Warning',\n      severity: 'warning',\n      alerts: warningAlerts,\n      colorClass: 'text-yellow-600 dark:text-yellow-400',\n      bgClass: 'bg-yellow-500/10',\n      borderClass: 'border-yellow-500/30',\n      badgeVariant: 'secondary',\n    },\n    {\n      id: 'low',\n      label: 'Low Priority',\n      severity: 'clear',\n      alerts: lowAlerts,\n      colorClass: 'text-green-600 dark:text-green-400',\n      bgClass: 'bg-green-500/10',\n      borderClass: 'border-green-500/30',\n      badgeVariant: 'default',\n    },\n  ]\n\n  const totalAlerts = alerts.length\n  const hasNoAlerts = totalAlerts === 0\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\n            <ShieldAlert className=\"h-4 w-4 text-primary\" />\n            Compliance Alerts\n          </CardTitle>\n          {totalAlerts > 0 && (\n            <Badge\n              variant={criticalAlerts.length > 0 ? 'destructive' : 'secondary'}\n              className=\"font-medium\"\n            >\n              {totalAlerts} total\n            </Badge>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-2\">\n        {hasNoAlerts ? (\n          // All clear state\n          <div className=\"flex flex-col items-center justify-center py-6 text-center\">\n            <div className=\"p-3 rounded-full bg-green-500/10 mb-3\">\n              <CheckCircle2 className=\"h-8 w-8 text-green-600 dark:text-green-400\" />\n            </div>\n            <p className=\"font-medium text-green-600 dark:text-green-400\">All Clear</p>\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              No compliance issues requiring attention\n            </p>\n          </div>\n        ) : (\n          // Show severity groups\n          severityGroups.map((group) => (\n            <SeveritySection\n              key={group.id}\n              group={group}\n              defaultOpen={group.severity === 'critical' && group.alerts.length > 0}\n            />\n          ))\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2697, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28admin%29/versotech_admin/dashboard/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Suspense, useState, useEffect } from 'react'\r\nimport { useSearchParams, useRouter, usePathname } from 'next/navigation'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport { DashboardSkeleton } from './dashboard-skeleton'\r\nimport { DashboardKPICards } from './components/dashboard-kpi-cards'\r\nimport { DashboardActivityChart } from './components/dashboard-activity-chart'\r\nimport { DashboardApprovalQueue } from './components/dashboard-approval-queue'\r\nimport { DashboardActivityFeed } from './components/dashboard-activity-feed'\r\nimport { DashboardComplianceAlerts } from './components/dashboard-compliance-alerts'\r\n\r\ntype DateRange = '7' | '30' | '90'\r\n\r\nconst DATE_RANGE_OPTIONS: { value: DateRange; label: string }[] = [\r\n  { value: '7', label: 'Last 7 days' },\r\n  { value: '30', label: 'Last 30 days' },\r\n  { value: '90', label: 'Last 90 days' },\r\n]\r\n\r\nfunction DateRangeSelector() {\r\n  const [mounted, setMounted] = useState(false)\r\n  const searchParams = useSearchParams()\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n\r\n  const currentRange = (searchParams.get('days') as DateRange) || '30'\r\n\r\n  // Wait for client-side hydration before rendering Radix Select\r\n  useEffect(() => {\r\n    setMounted(true)\r\n  }, [])\r\n\r\n  const handleRangeChange = (value: DateRange) => {\r\n    const params = new URLSearchParams(searchParams.toString())\r\n    params.set('days', value)\r\n    router.push(`${pathname}?${params.toString()}`)\r\n  }\r\n\r\n  // Render a static placeholder during SSR to avoid Radix ID mismatches\r\n  if (!mounted) {\r\n    return (\r\n      <div className=\"h-10 w-[160px] rounded-md border border-input bg-background px-3 py-2 text-sm flex items-center justify-between\">\r\n        <span>{DATE_RANGE_OPTIONS.find(o => o.value === currentRange)?.label || 'Select range'}</span>\r\n        <svg className=\"h-4 w-4 opacity-50\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n        </svg>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Select value={currentRange} onValueChange={handleRangeChange}>\r\n      <SelectTrigger className=\"w-[160px]\">\r\n        <SelectValue placeholder=\"Select range\" />\r\n      </SelectTrigger>\r\n      <SelectContent>\r\n        {DATE_RANGE_OPTIONS.map((option) => (\r\n          <SelectItem key={option.value} value={option.value}>\r\n            {option.label}\r\n          </SelectItem>\r\n        ))}\r\n      </SelectContent>\r\n    </Select>\r\n  )\r\n}\r\n\r\nfunction DashboardContent() {\r\n  const searchParams = useSearchParams()\r\n  const days = searchParams.get('days') || '30'\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* KPI Cards - US-005 */}\r\n      <DashboardKPICards days={days} />\r\n\r\n      {/* Charts and widgets - US-006 to US-009 */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Activity Chart - US-006 */}\r\n        <DashboardActivityChart days={days} />\r\n\r\n        {/* Approval Queue - US-007 */}\r\n        <DashboardApprovalQueue days={days} />\r\n\r\n        {/* Activity Feed - US-008 */}\r\n        <DashboardActivityFeed days={days} />\r\n\r\n        {/* Compliance Alerts - US-009 */}\r\n        <DashboardComplianceAlerts days={days} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header with title and date range selector */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold\">Platform Overview</h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Monitor platform health and key metrics\r\n          </p>\r\n        </div>\r\n        <Suspense fallback={<div className=\"h-10 w-[160px] rounded-md bg-muted animate-pulse\" />}>\r\n          <DateRangeSelector />\r\n        </Suspense>\r\n      </div>\r\n\r\n      {/* Main dashboard content with Suspense */}\r\n      <Suspense fallback={<DashboardSkeleton />}>\r\n        <DashboardContent />\r\n      </Suspense>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;;;AAhBA;;;;;;;;;;AAoBA,MAAM,qBAA4D;IAChE;QAAE,OAAO;QAAK,OAAO;IAAc;IACnC;QAAE,OAAO;QAAM,OAAO;IAAe;IACrC;QAAE,OAAO;QAAM,OAAO;IAAe;CACtC;AAED,SAAS;;IACP,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gMAAQ,EAAC;IACvC,MAAM,eAAe,IAAA,+KAAe;IACpC,MAAM,SAAS,IAAA,yKAAS;IACxB,MAAM,WAAW,IAAA,2KAAW;IAE5B,MAAM,eAAe,AAAC,aAAa,GAAG,CAAC,WAAyB;IAEhE,+DAA+D;IAC/D,IAAA,iMAAS;uCAAC;YACR,WAAW;QACb;sCAAG,EAAE;IAEL,MAAM,oBAAoB,CAAC;QACzB,MAAM,SAAS,IAAI,gBAAgB,aAAa,QAAQ;QACxD,OAAO,GAAG,CAAC,QAAQ;QACnB,OAAO,IAAI,CAAC,GAAG,SAAS,CAAC,EAAE,OAAO,QAAQ,IAAI;IAChD;IAEA,sEAAsE;IACtE,IAAI,CAAC,SAAS;QACZ,qBACE,oNAAC;YAAI,WAAU;;8BACb,oNAAC;8BAAM,mBAAmB,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,eAAe,SAAS;;;;;;8BACxE,oNAAC;oBAAI,WAAU;oBAAqB,MAAK;oBAAO,QAAO;oBAAe,SAAQ;8BAC5E,cAAA,oNAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,aAAa;wBAAG,GAAE;;;;;;;;;;;;;;;;;IAI7E;IAEA,qBACE,oNAAC,sKAAM;QAAC,OAAO;QAAc,eAAe;;0BAC1C,oNAAC,6KAAa;gBAAC,WAAU;0BACvB,cAAA,oNAAC,2KAAW;oBAAC,aAAY;;;;;;;;;;;0BAE3B,oNAAC,6KAAa;0BACX,mBAAmB,GAAG,CAAC,CAAC,uBACvB,oNAAC,0KAAU;wBAAoB,OAAO,OAAO,KAAK;kCAC/C,OAAO,KAAK;uBADE,OAAO,KAAK;;;;;;;;;;;;;;;;AAOvC;GA7CS;;QAEc,+KAAe;QACrB,yKAAS;QACP,2KAAW;;;KAJrB;AA+CT,SAAS;;IACP,MAAM,eAAe,IAAA,+KAAe;IACpC,MAAM,OAAO,aAAa,GAAG,CAAC,WAAW;IAEzC,qBACE,oNAAC;QAAI,WAAU;;0BAEb,oNAAC,kPAAiB;gBAAC,MAAM;;;;;;0BAGzB,oNAAC;gBAAI,WAAU;;kCAEb,oNAAC,4PAAsB;wBAAC,MAAM;;;;;;kCAG9B,oNAAC,4PAAsB;wBAAC,MAAM;;;;;;kCAG9B,oNAAC,0PAAqB;wBAAC,MAAM;;;;;;kCAG7B,oNAAC,kQAAyB;wBAAC,MAAM;;;;;;;;;;;;;;;;;;AAIzC;IAzBS;;QACc,+KAAe;;;MAD7B;AA2BM,SAAS;IACtB,qBACE,oNAAC;QAAI,WAAU;;0BAEb,oNAAC;gBAAI,WAAU;;kCACb,oNAAC;;0CACC,oNAAC;gCAAG,WAAU;0CAAqB;;;;;;0CACnC,oNAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAI5C,oNAAC,gMAAQ;wBAAC,wBAAU,oNAAC;4BAAI,WAAU;;;;;;kCACjC,cAAA,oNAAC;;;;;;;;;;;;;;;;0BAKL,oNAAC,gMAAQ;gBAAC,wBAAU,oNAAC,gOAAiB;;;;;0BACpC,cAAA,oNAAC;;;;;;;;;;;;;;;;AAIT;MAtBwB"}}]
}