{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/fees/ScheduleTab.tsx"],"sourcesContent":["/**\r\n * Schedule Tab - Calendar view of upcoming recurring fees\r\n */\r\n\r\n'use client';\r\n\r\nimport { useEffect, useState, useCallback, useMemo } from 'react';\r\nimport { useSearchParams, useRouter } from 'next/navigation';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { formatCurrency } from '@/lib/fees/calculations';\r\nimport { Calendar, DollarSign, Clock, Users, Building2, ChevronDown, ChevronRight, UserCheck, Handshake, Briefcase, X, Filter, Check, ChevronsUpDown } from 'lucide-react';\r\nimport {\r\n  Collapsible,\r\n  CollapsibleContent,\r\n  CollapsibleTrigger,\r\n} from '@/components/ui/collapsible';\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from '@/components/ui/popover';\r\nimport {\r\n  Command,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n} from '@/components/ui/command';\r\nimport { DateRangePicker } from '@/components/ui/date-range-picker';\r\nimport type { DateRange } from 'react-day-picker';\r\n\r\ninterface UpcomingFee {\r\n  id: string;\r\n  subscription_id: string;\r\n  subscription_number: string;\r\n  investor: {\r\n    id: string;\r\n    legal_name: string;\r\n    display_name: string;\r\n  };\r\n  vehicle: {\r\n    id: string;\r\n    name: string;\r\n  };\r\n  fee_type: string;\r\n  fee_name: string;\r\n  amount: number;\r\n  frequency: string;\r\n  next_due_date: string;\r\n  status: string;\r\n}\r\n\r\ninterface InvestorFeeEvent {\r\n  id: string;\r\n  fee_type: string;\r\n  computed_amount: number;\r\n  period_start_date: string | null;\r\n  period_end_date: string | null;\r\n  status: string;\r\n  event_date: string;\r\n  investor: {\r\n    id: string;\r\n    legal_name: string;\r\n    display_name: string;\r\n  } | null;\r\n  deal: {\r\n    id: string;\r\n    name: string;\r\n  } | null;\r\n}\r\n\r\ninterface IntroducerCommission {\r\n  id: string;\r\n  entity_type: 'introducer';\r\n  entity_id: string;\r\n  entity_name: string;\r\n  deal_id: string | null;\r\n  deal_name?: string;\r\n  investor_id: string | null;\r\n  investor_name?: string;\r\n  accrual_amount: number;\r\n  status: string;\r\n  created_at: string;\r\n}\r\n\r\ninterface PartnerCommission {\r\n  id: string;\r\n  entity_type: 'partner';\r\n  entity_id: string;\r\n  entity_name: string;\r\n  deal_id: string | null;\r\n  deal_name?: string;\r\n  investor_id: string | null;\r\n  investor_name?: string;\r\n  accrual_amount: number;\r\n  status: string;\r\n  created_at: string;\r\n}\r\n\r\ninterface CommercialPartnerCommission {\r\n  id: string;\r\n  entity_type: 'commercial_partner';\r\n  entity_id: string;\r\n  entity_name: string;\r\n  deal_id: string | null;\r\n  deal_name?: string;\r\n  investor_id: string | null;\r\n  investor_name?: string;\r\n  accrual_amount: number;\r\n  status: string;\r\n  created_at: string;\r\n}\r\n\r\ninterface ScheduleData {\r\n  data: UpcomingFee[];\r\n  summary: {\r\n    total_scheduled: number;\r\n    total_amount: number;\r\n    date_range: {\r\n      from: string;\r\n      to: string;\r\n    };\r\n  };\r\n  by_month: Record<string, {\r\n    fees: UpcomingFee[];\r\n    total: number;\r\n  }>;\r\n}\r\n\r\ninterface Deal {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface Entity {\r\n  id: string;\r\n  name: string;\r\n  type: 'introducer' | 'partner' | 'commercial_partner';\r\n}\r\n\r\nexport default function ScheduleTab() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  const [data, setData] = useState<ScheduleData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [daysAhead, setDaysAhead] = useState(60);\r\n  const [investorFees, setInvestorFees] = useState<InvestorFeeEvent[]>([]);\r\n  const [investorFeesLoading, setInvestorFeesLoading] = useState(true);\r\n  const [investorFeesExpanded, setInvestorFeesExpanded] = useState(true);\r\n  const [introducerCommissions, setIntroducerCommissions] = useState<IntroducerCommission[]>([]);\r\n  const [introducerCommissionsLoading, setIntroducerCommissionsLoading] = useState(true);\r\n  const [introducerCommissionsExpanded, setIntroducerCommissionsExpanded] = useState(true);\r\n  const [partnerCommissions, setPartnerCommissions] = useState<PartnerCommission[]>([]);\r\n  const [partnerCommissionsLoading, setPartnerCommissionsLoading] = useState(true);\r\n  const [partnerCommissionsExpanded, setPartnerCommissionsExpanded] = useState(true);\r\n  const [commercialPartnerCommissions, setCommercialPartnerCommissions] = useState<CommercialPartnerCommission[]>([]);\r\n  const [commercialPartnerCommissionsLoading, setCommercialPartnerCommissionsLoading] = useState(true);\r\n  const [commercialPartnerCommissionsExpanded, setCommercialPartnerCommissionsExpanded] = useState(true);\r\n\r\n  // Filter state\r\n  const [deals, setDeals] = useState<Deal[]>([]);\r\n  const [entities, setEntities] = useState<Entity[]>([]);\r\n  const [selectedDealIds, setSelectedDealIds] = useState<string[]>(() => {\r\n    const dealIds = searchParams.get('deal_ids');\r\n    return dealIds ? dealIds.split(',') : [];\r\n  });\r\n  const [selectedEntityIds, setSelectedEntityIds] = useState<string[]>(() => {\r\n    const entityIds = searchParams.get('entity_ids');\r\n    return entityIds ? entityIds.split(',') : [];\r\n  });\r\n  const [dateRange, setDateRange] = useState<DateRange | undefined>(() => {\r\n    const from = searchParams.get('date_from');\r\n    const to = searchParams.get('date_to');\r\n    if (from || to) {\r\n      return {\r\n        from: from ? new Date(from) : undefined,\r\n        to: to ? new Date(to) : undefined,\r\n      };\r\n    }\r\n    return undefined;\r\n  });\r\n  const [dealPopoverOpen, setDealPopoverOpen] = useState(false);\r\n  const [entityPopoverOpen, setEntityPopoverOpen] = useState(false);\r\n\r\n  // Check if any filters are active\r\n  const hasActiveFilters = selectedDealIds.length > 0 || selectedEntityIds.length > 0 || dateRange?.from || dateRange?.to;\r\n\r\n  // Update URL when filters change\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(searchParams.toString());\r\n\r\n    if (selectedDealIds.length > 0) {\r\n      params.set('deal_ids', selectedDealIds.join(','));\r\n    } else {\r\n      params.delete('deal_ids');\r\n    }\r\n\r\n    if (selectedEntityIds.length > 0) {\r\n      params.set('entity_ids', selectedEntityIds.join(','));\r\n    } else {\r\n      params.delete('entity_ids');\r\n    }\r\n\r\n    if (dateRange?.from) {\r\n      params.set('date_from', dateRange.from.toISOString().split('T')[0]);\r\n    } else {\r\n      params.delete('date_from');\r\n    }\r\n\r\n    if (dateRange?.to) {\r\n      params.set('date_to', dateRange.to.toISOString().split('T')[0]);\r\n    } else {\r\n      params.delete('date_to');\r\n    }\r\n\r\n    const newUrl = params.toString() ? `?${params.toString()}` : window.location.pathname;\r\n    router.push(newUrl, { scroll: false });\r\n  }, [selectedDealIds, selectedEntityIds, dateRange, router, searchParams]);\r\n\r\n  // Fetch deals list for filter\r\n  const fetchDeals = useCallback(async () => {\r\n    try {\r\n      const res = await fetch('/api/deals');\r\n      const json = await res.json();\r\n      setDeals(json.deals || []);\r\n    } catch (error) {\r\n      console.error('Error fetching deals:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch entities list for filter - uses commissions API to get unique entities\r\n  const fetchEntities = useCallback(async () => {\r\n    try {\r\n      // Fetch all commissions to extract unique entities\r\n      const res = await fetch('/api/staff/fees/commissions');\r\n      const json = await res.json();\r\n\r\n      // Use by_entity which has already grouped unique entities\r\n      const byEntity = json.by_entity || [];\r\n      const allEntities: Entity[] = byEntity.map((group: { entity_type: string; entity: { id: string; name: string } }) => ({\r\n        id: group.entity.id,\r\n        name: group.entity.name,\r\n        type: group.entity_type as 'introducer' | 'partner' | 'commercial_partner',\r\n      }));\r\n\r\n      // Also try to get introducers from dedicated endpoint for completeness\r\n      try {\r\n        const introducersRes = await fetch('/api/staff/introducers');\r\n        const introducersJson = await introducersRes.json();\r\n        const introducers = (introducersJson.data || []).map((e: { id: string; legal_name?: string; name?: string }) => ({\r\n          id: e.id,\r\n          name: e.legal_name || e.name || 'Unknown',\r\n          type: 'introducer' as const,\r\n        }));\r\n\r\n        // Merge introducers, avoiding duplicates\r\n        const existingIds = new Set(allEntities.map(e => e.id));\r\n        for (const introducer of introducers) {\r\n          if (!existingIds.has(introducer.id)) {\r\n            allEntities.push(introducer);\r\n          }\r\n        }\r\n      } catch {\r\n        // Introducers endpoint may not be accessible, that's ok\r\n      }\r\n\r\n      // Sort by name\r\n      allEntities.sort((a, b) => a.name.localeCompare(b.name));\r\n\r\n      setEntities(allEntities);\r\n    } catch (error) {\r\n      console.error('Error fetching entities:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Clear all filters\r\n  const clearFilters = useCallback(() => {\r\n    setSelectedDealIds([]);\r\n    setSelectedEntityIds([]);\r\n    setDateRange(undefined);\r\n  }, []);\r\n\r\n  // Toggle deal selection\r\n  const toggleDeal = (dealId: string) => {\r\n    setSelectedDealIds((prev) =>\r\n      prev.includes(dealId) ? prev.filter((id) => id !== dealId) : [...prev, dealId]\r\n    );\r\n  };\r\n\r\n  // Toggle entity selection\r\n  const toggleEntity = (entityId: string) => {\r\n    setSelectedEntityIds((prev) =>\r\n      prev.includes(entityId) ? prev.filter((id) => id !== entityId) : [...prev, entityId]\r\n    );\r\n  };\r\n\r\n  // Get selected deal names for display\r\n  const selectedDealNames = useMemo(() => {\r\n    return selectedDealIds\r\n      .map((id) => deals.find((d) => d.id === id)?.name)\r\n      .filter(Boolean)\r\n      .join(', ');\r\n  }, [selectedDealIds, deals]);\r\n\r\n  // Get selected entity names for display\r\n  const selectedEntityNames = useMemo(() => {\r\n    return selectedEntityIds\r\n      .map((id) => entities.find((e) => e.id === id)?.name)\r\n      .filter(Boolean)\r\n      .join(', ');\r\n  }, [selectedEntityIds, entities]);\r\n\r\n  // Load deals and entities on mount\r\n  useEffect(() => {\r\n    fetchDeals();\r\n    fetchEntities();\r\n  }, [fetchDeals, fetchEntities]);\r\n\r\n  const fetchSchedules = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`/api/staff/fees/schedules?days=${daysAhead}`);\r\n      const json = await res.json();\r\n      setData(json);\r\n    } catch (error) {\r\n      console.error('Error fetching schedules:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [daysAhead]);\r\n\r\n  const fetchInvestorFees = useCallback(async () => {\r\n    setInvestorFeesLoading(true);\r\n    try {\r\n      // Get fee events with status = 'accrued' and future period_start_date\r\n      const params = new URLSearchParams();\r\n      params.set('status', 'accrued');\r\n      params.set('limit', '200');\r\n\r\n      // Use date range or default to today\r\n      if (dateRange?.from) {\r\n        params.set('period_from', dateRange.from.toISOString().split('T')[0]);\r\n      } else {\r\n        params.set('period_from', new Date().toISOString().split('T')[0]);\r\n      }\r\n      if (dateRange?.to) {\r\n        params.set('period_to', dateRange.to.toISOString().split('T')[0]);\r\n      }\r\n\r\n      const res = await fetch(`/api/staff/fees/events?${params.toString()}`);\r\n      const json = await res.json();\r\n\r\n      let feeData = json.data || [];\r\n\r\n      // Filter by selected deals (client-side since API doesn't support multiple deal_ids)\r\n      if (selectedDealIds.length > 0) {\r\n        feeData = feeData.filter((fee: InvestorFeeEvent) =>\r\n          fee.deal?.id && selectedDealIds.includes(fee.deal.id)\r\n        );\r\n      }\r\n\r\n      setInvestorFees(feeData);\r\n    } catch (error) {\r\n      console.error('Error fetching investor fees:', error);\r\n      setInvestorFees([]);\r\n    } finally {\r\n      setInvestorFeesLoading(false);\r\n    }\r\n  }, [selectedDealIds, dateRange]);\r\n\r\n  const fetchIntroducerCommissions = useCallback(async () => {\r\n    setIntroducerCommissionsLoading(true);\r\n    try {\r\n      // Get introducer commissions with status = 'accrued' for schedule view\r\n      const params = new URLSearchParams();\r\n      params.set('entity_type', 'introducer');\r\n      params.set('status', 'accrued');\r\n\r\n      const res = await fetch(`/api/staff/fees/commissions?${params.toString()}`);\r\n      const json = await res.json();\r\n\r\n      let introducerData = (json.data || []).filter(\r\n        (c: IntroducerCommission) => c.entity_type === 'introducer'\r\n      );\r\n\r\n      // Filter by selected deals\r\n      if (selectedDealIds.length > 0) {\r\n        introducerData = introducerData.filter((c: IntroducerCommission) =>\r\n          c.deal_id && selectedDealIds.includes(c.deal_id)\r\n        );\r\n      }\r\n\r\n      // Filter by selected entities (introducers)\r\n      if (selectedEntityIds.length > 0) {\r\n        introducerData = introducerData.filter((c: IntroducerCommission) =>\r\n          selectedEntityIds.includes(c.entity_id)\r\n        );\r\n      }\r\n\r\n      // Filter by date range (created_at)\r\n      if (dateRange?.from) {\r\n        introducerData = introducerData.filter((c: IntroducerCommission) =>\r\n          new Date(c.created_at) >= dateRange.from!\r\n        );\r\n      }\r\n      if (dateRange?.to) {\r\n        introducerData = introducerData.filter((c: IntroducerCommission) =>\r\n          new Date(c.created_at) <= dateRange.to!\r\n        );\r\n      }\r\n\r\n      setIntroducerCommissions(introducerData);\r\n    } catch (error) {\r\n      console.error('Error fetching introducer commissions:', error);\r\n      setIntroducerCommissions([]);\r\n    } finally {\r\n      setIntroducerCommissionsLoading(false);\r\n    }\r\n  }, [selectedDealIds, selectedEntityIds, dateRange]);\r\n\r\n  const fetchPartnerCommissions = useCallback(async () => {\r\n    setPartnerCommissionsLoading(true);\r\n    try {\r\n      // Get partner commissions with status = 'accrued' for schedule view\r\n      const params = new URLSearchParams();\r\n      params.set('entity_type', 'partner');\r\n      params.set('status', 'accrued');\r\n\r\n      const res = await fetch(`/api/staff/fees/commissions?${params.toString()}`);\r\n      const json = await res.json();\r\n\r\n      let partnerData = (json.data || []).filter(\r\n        (c: PartnerCommission) => c.entity_type === 'partner'\r\n      );\r\n\r\n      // Filter by selected deals\r\n      if (selectedDealIds.length > 0) {\r\n        partnerData = partnerData.filter((c: PartnerCommission) =>\r\n          c.deal_id && selectedDealIds.includes(c.deal_id)\r\n        );\r\n      }\r\n\r\n      // Filter by selected entities (partners)\r\n      if (selectedEntityIds.length > 0) {\r\n        partnerData = partnerData.filter((c: PartnerCommission) =>\r\n          selectedEntityIds.includes(c.entity_id)\r\n        );\r\n      }\r\n\r\n      // Filter by date range (created_at)\r\n      if (dateRange?.from) {\r\n        partnerData = partnerData.filter((c: PartnerCommission) =>\r\n          new Date(c.created_at) >= dateRange.from!\r\n        );\r\n      }\r\n      if (dateRange?.to) {\r\n        partnerData = partnerData.filter((c: PartnerCommission) =>\r\n          new Date(c.created_at) <= dateRange.to!\r\n        );\r\n      }\r\n\r\n      setPartnerCommissions(partnerData);\r\n    } catch (error) {\r\n      console.error('Error fetching partner commissions:', error);\r\n      setPartnerCommissions([]);\r\n    } finally {\r\n      setPartnerCommissionsLoading(false);\r\n    }\r\n  }, [selectedDealIds, selectedEntityIds, dateRange]);\r\n\r\n  const fetchCommercialPartnerCommissions = useCallback(async () => {\r\n    setCommercialPartnerCommissionsLoading(true);\r\n    try {\r\n      // Get commercial partner commissions with status = 'accrued' for schedule view\r\n      const params = new URLSearchParams();\r\n      params.set('entity_type', 'commercial_partner');\r\n      params.set('status', 'accrued');\r\n\r\n      const res = await fetch(`/api/staff/fees/commissions?${params.toString()}`);\r\n      const json = await res.json();\r\n\r\n      let commercialPartnerData = (json.data || []).filter(\r\n        (c: CommercialPartnerCommission) => c.entity_type === 'commercial_partner'\r\n      );\r\n\r\n      // Filter by selected deals\r\n      if (selectedDealIds.length > 0) {\r\n        commercialPartnerData = commercialPartnerData.filter((c: CommercialPartnerCommission) =>\r\n          c.deal_id && selectedDealIds.includes(c.deal_id)\r\n        );\r\n      }\r\n\r\n      // Filter by selected entities (commercial partners)\r\n      if (selectedEntityIds.length > 0) {\r\n        commercialPartnerData = commercialPartnerData.filter((c: CommercialPartnerCommission) =>\r\n          selectedEntityIds.includes(c.entity_id)\r\n        );\r\n      }\r\n\r\n      // Filter by date range (created_at)\r\n      if (dateRange?.from) {\r\n        commercialPartnerData = commercialPartnerData.filter((c: CommercialPartnerCommission) =>\r\n          new Date(c.created_at) >= dateRange.from!\r\n        );\r\n      }\r\n      if (dateRange?.to) {\r\n        commercialPartnerData = commercialPartnerData.filter((c: CommercialPartnerCommission) =>\r\n          new Date(c.created_at) <= dateRange.to!\r\n        );\r\n      }\r\n\r\n      setCommercialPartnerCommissions(commercialPartnerData);\r\n    } catch (error) {\r\n      console.error('Error fetching commercial partner commissions:', error);\r\n      setCommercialPartnerCommissions([]);\r\n    } finally {\r\n      setCommercialPartnerCommissionsLoading(false);\r\n    }\r\n  }, [selectedDealIds, selectedEntityIds, dateRange]);\r\n\r\n  useEffect(() => {\r\n    fetchSchedules();\r\n  }, [daysAhead, fetchSchedules]);\r\n\r\n  useEffect(() => {\r\n    fetchInvestorFees();\r\n  }, [fetchInvestorFees]);\r\n\r\n  useEffect(() => {\r\n    fetchIntroducerCommissions();\r\n  }, [fetchIntroducerCommissions]);\r\n\r\n  useEffect(() => {\r\n    fetchPartnerCommissions();\r\n  }, [fetchPartnerCommissions]);\r\n\r\n  useEffect(() => {\r\n    fetchCommercialPartnerCommissions();\r\n  }, [fetchCommercialPartnerCommissions]);\r\n\r\n  // Group investor fees by deal, then by investor\r\n  const groupedInvestorFees = useMemo(() => {\r\n    const byDeal: Record<string, {\r\n      deal: { id: string; name: string };\r\n      byInvestor: Record<string, {\r\n        investor: { id: string; name: string };\r\n        fees: InvestorFeeEvent[];\r\n        total: number;\r\n      }>;\r\n      total: number;\r\n    }> = {};\r\n\r\n    for (const fee of investorFees) {\r\n      const dealId = fee.deal?.id || 'unknown';\r\n      const dealName = fee.deal?.name || 'Unknown Deal';\r\n      const investorId = fee.investor?.id || 'unknown';\r\n      const investorName = fee.investor?.legal_name || fee.investor?.display_name || 'Unknown Investor';\r\n\r\n      if (!byDeal[dealId]) {\r\n        byDeal[dealId] = {\r\n          deal: { id: dealId, name: dealName },\r\n          byInvestor: {},\r\n          total: 0,\r\n        };\r\n      }\r\n\r\n      if (!byDeal[dealId].byInvestor[investorId]) {\r\n        byDeal[dealId].byInvestor[investorId] = {\r\n          investor: { id: investorId, name: investorName },\r\n          fees: [],\r\n          total: 0,\r\n        };\r\n      }\r\n\r\n      byDeal[dealId].byInvestor[investorId].fees.push(fee);\r\n      byDeal[dealId].byInvestor[investorId].total += fee.computed_amount;\r\n      byDeal[dealId].total += fee.computed_amount;\r\n    }\r\n\r\n    // Sort fees by period_start_date within each group\r\n    Object.values(byDeal).forEach(dealGroup => {\r\n      Object.values(dealGroup.byInvestor).forEach(investorGroup => {\r\n        investorGroup.fees.sort((a, b) => {\r\n          const dateA = a.period_start_date || a.event_date;\r\n          const dateB = b.period_start_date || b.event_date;\r\n          return new Date(dateA).getTime() - new Date(dateB).getTime();\r\n        });\r\n      });\r\n    });\r\n\r\n    return byDeal;\r\n  }, [investorFees]);\r\n\r\n  const investorFeesTotal = useMemo(() => {\r\n    return investorFees.reduce((sum, fee) => sum + fee.computed_amount, 0);\r\n  }, [investorFees]);\r\n\r\n  // Group introducer commissions by introducer, then by deal\r\n  const groupedIntroducerCommissions = useMemo(() => {\r\n    const byIntroducer: Record<string, {\r\n      introducer: { id: string; name: string };\r\n      byDeal: Record<string, {\r\n        deal: { id: string; name: string };\r\n        commissions: IntroducerCommission[];\r\n        total: number;\r\n      }>;\r\n      total: number;\r\n    }> = {};\r\n\r\n    for (const commission of introducerCommissions) {\r\n      const introducerId = commission.entity_id || 'unknown';\r\n      const introducerName = commission.entity_name || 'Unknown Introducer';\r\n      const dealId = commission.deal_id || 'unknown';\r\n      const dealName = commission.deal_name || 'Unknown Deal';\r\n\r\n      if (!byIntroducer[introducerId]) {\r\n        byIntroducer[introducerId] = {\r\n          introducer: { id: introducerId, name: introducerName },\r\n          byDeal: {},\r\n          total: 0,\r\n        };\r\n      }\r\n\r\n      if (!byIntroducer[introducerId].byDeal[dealId]) {\r\n        byIntroducer[introducerId].byDeal[dealId] = {\r\n          deal: { id: dealId, name: dealName },\r\n          commissions: [],\r\n          total: 0,\r\n        };\r\n      }\r\n\r\n      byIntroducer[introducerId].byDeal[dealId].commissions.push(commission);\r\n      byIntroducer[introducerId].byDeal[dealId].total += Number(commission.accrual_amount);\r\n      byIntroducer[introducerId].total += Number(commission.accrual_amount);\r\n    }\r\n\r\n    // Sort commissions by created_at within each group\r\n    Object.values(byIntroducer).forEach(introducerGroup => {\r\n      Object.values(introducerGroup.byDeal).forEach(dealGroup => {\r\n        dealGroup.commissions.sort((a, b) => {\r\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\r\n        });\r\n      });\r\n    });\r\n\r\n    return byIntroducer;\r\n  }, [introducerCommissions]);\r\n\r\n  const introducerCommissionsTotal = useMemo(() => {\r\n    return introducerCommissions.reduce((sum, c) => sum + Number(c.accrual_amount), 0);\r\n  }, [introducerCommissions]);\r\n\r\n  // Group partner commissions by partner, then by deal\r\n  const groupedPartnerCommissions = useMemo(() => {\r\n    const byPartner: Record<string, {\r\n      partner: { id: string; name: string };\r\n      byDeal: Record<string, {\r\n        deal: { id: string; name: string };\r\n        commissions: PartnerCommission[];\r\n        total: number;\r\n      }>;\r\n      total: number;\r\n    }> = {};\r\n\r\n    for (const commission of partnerCommissions) {\r\n      const partnerId = commission.entity_id || 'unknown';\r\n      const partnerName = commission.entity_name || 'Unknown Partner';\r\n      const dealId = commission.deal_id || 'unknown';\r\n      const dealName = commission.deal_name || 'Unknown Deal';\r\n\r\n      if (!byPartner[partnerId]) {\r\n        byPartner[partnerId] = {\r\n          partner: { id: partnerId, name: partnerName },\r\n          byDeal: {},\r\n          total: 0,\r\n        };\r\n      }\r\n\r\n      if (!byPartner[partnerId].byDeal[dealId]) {\r\n        byPartner[partnerId].byDeal[dealId] = {\r\n          deal: { id: dealId, name: dealName },\r\n          commissions: [],\r\n          total: 0,\r\n        };\r\n      }\r\n\r\n      byPartner[partnerId].byDeal[dealId].commissions.push(commission);\r\n      byPartner[partnerId].byDeal[dealId].total += Number(commission.accrual_amount);\r\n      byPartner[partnerId].total += Number(commission.accrual_amount);\r\n    }\r\n\r\n    // Sort commissions by created_at within each group\r\n    Object.values(byPartner).forEach(partnerGroup => {\r\n      Object.values(partnerGroup.byDeal).forEach(dealGroup => {\r\n        dealGroup.commissions.sort((a, b) => {\r\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\r\n        });\r\n      });\r\n    });\r\n\r\n    return byPartner;\r\n  }, [partnerCommissions]);\r\n\r\n  const partnerCommissionsTotal = useMemo(() => {\r\n    return partnerCommissions.reduce((sum, c) => sum + Number(c.accrual_amount), 0);\r\n  }, [partnerCommissions]);\r\n\r\n  // Group commercial partner commissions by commercial partner, then by deal\r\n  const groupedCommercialPartnerCommissions = useMemo(() => {\r\n    const byCommercialPartner: Record<string, {\r\n      commercialPartner: { id: string; name: string };\r\n      byDeal: Record<string, {\r\n        deal: { id: string; name: string };\r\n        commissions: CommercialPartnerCommission[];\r\n        total: number;\r\n      }>;\r\n      total: number;\r\n    }> = {};\r\n\r\n    for (const commission of commercialPartnerCommissions) {\r\n      const commercialPartnerId = commission.entity_id || 'unknown';\r\n      const commercialPartnerName = commission.entity_name || 'Unknown Commercial Partner';\r\n      const dealId = commission.deal_id || 'unknown';\r\n      const dealName = commission.deal_name || 'Unknown Deal';\r\n\r\n      if (!byCommercialPartner[commercialPartnerId]) {\r\n        byCommercialPartner[commercialPartnerId] = {\r\n          commercialPartner: { id: commercialPartnerId, name: commercialPartnerName },\r\n          byDeal: {},\r\n          total: 0,\r\n        };\r\n      }\r\n\r\n      if (!byCommercialPartner[commercialPartnerId].byDeal[dealId]) {\r\n        byCommercialPartner[commercialPartnerId].byDeal[dealId] = {\r\n          deal: { id: dealId, name: dealName },\r\n          commissions: [],\r\n          total: 0,\r\n        };\r\n      }\r\n\r\n      byCommercialPartner[commercialPartnerId].byDeal[dealId].commissions.push(commission);\r\n      byCommercialPartner[commercialPartnerId].byDeal[dealId].total += Number(commission.accrual_amount);\r\n      byCommercialPartner[commercialPartnerId].total += Number(commission.accrual_amount);\r\n    }\r\n\r\n    // Sort commissions by created_at within each group\r\n    Object.values(byCommercialPartner).forEach(commercialPartnerGroup => {\r\n      Object.values(commercialPartnerGroup.byDeal).forEach(dealGroup => {\r\n        dealGroup.commissions.sort((a, b) => {\r\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\r\n        });\r\n      });\r\n    });\r\n\r\n    return byCommercialPartner;\r\n  }, [commercialPartnerCommissions]);\r\n\r\n  const commercialPartnerCommissionsTotal = useMemo(() => {\r\n    return commercialPartnerCommissions.reduce((sum, c) => sum + Number(c.accrual_amount), 0);\r\n  }, [commercialPartnerCommissions]);\r\n\r\n  if (loading) {\r\n    return <div className=\"text-white\">Loading fee schedules...</div>;\r\n  }\r\n\r\n  if (!data) {\r\n    return <div className=\"text-white\">Failed to load fee schedules</div>;\r\n  }\r\n\r\n  const feeTypeColors: Record<string, string> = {\r\n    management: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\r\n    subscription: 'bg-purple-500/20 text-purple-400 border-purple-500/30',\r\n    performance: 'bg-green-500/20 text-green-400 border-green-500/30',\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-white\">Fee Schedule</h2>\r\n        <p className=\"text-gray-400\">Upcoming recurring fees for the next {daysAhead} days</p>\r\n      </div>\r\n\r\n      {/* Summary Cards */}\r\n      <div className=\"grid gap-4 md:grid-cols-3\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Total Scheduled</CardTitle>\r\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-white\">\r\n              {data.summary.total_scheduled}\r\n            </div>\r\n            <p className=\"text-xs text-gray-400\">\r\n              Recurring fees due\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Expected Revenue</CardTitle>\r\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-white\">\r\n              {formatCurrency(data.summary.total_amount)}\r\n            </div>\r\n            <p className=\"text-xs text-gray-400\">\r\n              Total amount scheduled\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Date Range</CardTitle>\r\n            <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-sm font-medium text-white\">\r\n              {new Date(data.summary.date_range.from).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\r\n              {' - '}\r\n              {new Date(data.summary.date_range.to).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\r\n            </div>\r\n            <p className=\"text-xs text-gray-400\">\r\n              Forecast period\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Time Range Selector */}\r\n      <div className=\"flex gap-2\">\r\n        {[30, 60, 90, 180].map((days) => (\r\n          <Button\r\n            key={days}\r\n            variant={daysAhead === days ? 'default' : 'outline'}\r\n            size=\"sm\"\r\n            onClick={() => setDaysAhead(days)}\r\n          >\r\n            {days} days\r\n          </Button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Filter Controls */}\r\n      <Card>\r\n        <CardHeader className=\"pb-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Filter className=\"h-4 w-4 text-gray-400\" />\r\n              <CardTitle className=\"text-sm\">Filters</CardTitle>\r\n              {hasActiveFilters && (\r\n                <Badge variant=\"secondary\" className=\"text-xs\">\r\n                  {selectedDealIds.length + selectedEntityIds.length + (dateRange ? 1 : 0)} active\r\n                </Badge>\r\n              )}\r\n            </div>\r\n            {hasActiveFilters && (\r\n              <Button variant=\"ghost\" size=\"sm\" onClick={clearFilters} className=\"h-7 text-xs\">\r\n                <X className=\"h-3 w-3 mr-1\" />\r\n                Clear all\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-0\">\r\n          <div className=\"flex flex-wrap gap-3\">\r\n            {/* Deal Filter */}\r\n            <Popover open={dealPopoverOpen} onOpenChange={setDealPopoverOpen}>\r\n              <PopoverTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  role=\"combobox\"\r\n                  aria-expanded={dealPopoverOpen}\r\n                  className=\"min-w-[200px] justify-between text-left font-normal\"\r\n                >\r\n                  <span className=\"truncate\">\r\n                    {selectedDealIds.length > 0\r\n                      ? selectedDealIds.length === 1\r\n                        ? selectedDealNames\r\n                        : `${selectedDealIds.length} deals selected`\r\n                      : 'Select deals...'}\r\n                  </span>\r\n                  <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-[300px] p-0\" align=\"start\">\r\n                <Command>\r\n                  <CommandInput placeholder=\"Search deals...\" />\r\n                  <CommandList>\r\n                    <CommandEmpty>No deals found.</CommandEmpty>\r\n                    <CommandGroup heading=\"Deals\">\r\n                      {deals.map((deal) => (\r\n                        <CommandItem\r\n                          key={deal.id}\r\n                          value={deal.name}\r\n                          onSelect={() => toggleDeal(deal.id)}\r\n                        >\r\n                          <div className=\"flex items-center gap-2 w-full\">\r\n                            <Checkbox\r\n                              checked={selectedDealIds.includes(deal.id)}\r\n                              onCheckedChange={() => toggleDeal(deal.id)}\r\n                              className=\"h-4 w-4\"\r\n                            />\r\n                            <span className=\"truncate\">{deal.name}</span>\r\n                          </div>\r\n                        </CommandItem>\r\n                      ))}\r\n                    </CommandGroup>\r\n                  </CommandList>\r\n                </Command>\r\n              </PopoverContent>\r\n            </Popover>\r\n\r\n            {/* Entity Filter */}\r\n            <Popover open={entityPopoverOpen} onOpenChange={setEntityPopoverOpen}>\r\n              <PopoverTrigger asChild>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  role=\"combobox\"\r\n                  aria-expanded={entityPopoverOpen}\r\n                  className=\"min-w-[200px] justify-between text-left font-normal\"\r\n                >\r\n                  <span className=\"truncate\">\r\n                    {selectedEntityIds.length > 0\r\n                      ? selectedEntityIds.length === 1\r\n                        ? selectedEntityNames\r\n                        : `${selectedEntityIds.length} entities selected`\r\n                      : 'Select entities...'}\r\n                  </span>\r\n                  <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\r\n                </Button>\r\n              </PopoverTrigger>\r\n              <PopoverContent className=\"w-[300px] p-0\" align=\"start\">\r\n                <Command>\r\n                  <CommandInput placeholder=\"Search entities...\" />\r\n                  <CommandList>\r\n                    <CommandEmpty>No entities found.</CommandEmpty>\r\n                    {/* Group by entity type */}\r\n                    {['introducer', 'partner', 'commercial_partner'].map((type) => {\r\n                      const typeEntities = entities.filter((e) => e.type === type);\r\n                      if (typeEntities.length === 0) return null;\r\n\r\n                      const typeLabels: Record<string, string> = {\r\n                        introducer: 'Introducers',\r\n                        partner: 'Partners',\r\n                        commercial_partner: 'Commercial Partners',\r\n                      };\r\n\r\n                      return (\r\n                        <CommandGroup key={type} heading={typeLabels[type]}>\r\n                          {typeEntities.map((entity) => (\r\n                            <CommandItem\r\n                              key={entity.id}\r\n                              value={`${entity.type}-${entity.name}`}\r\n                              onSelect={() => toggleEntity(entity.id)}\r\n                            >\r\n                              <div className=\"flex items-center gap-2 w-full\">\r\n                                <Checkbox\r\n                                  checked={selectedEntityIds.includes(entity.id)}\r\n                                  onCheckedChange={() => toggleEntity(entity.id)}\r\n                                  className=\"h-4 w-4\"\r\n                                />\r\n                                {entity.type === 'introducer' && (\r\n                                  <UserCheck className=\"h-3.5 w-3.5 text-blue-400 shrink-0\" />\r\n                                )}\r\n                                {entity.type === 'partner' && (\r\n                                  <Handshake className=\"h-3.5 w-3.5 text-green-400 shrink-0\" />\r\n                                )}\r\n                                {entity.type === 'commercial_partner' && (\r\n                                  <Briefcase className=\"h-3.5 w-3.5 text-purple-400 shrink-0\" />\r\n                                )}\r\n                                <span className=\"truncate\">{entity.name}</span>\r\n                              </div>\r\n                            </CommandItem>\r\n                          ))}\r\n                        </CommandGroup>\r\n                      );\r\n                    })}\r\n                  </CommandList>\r\n                </Command>\r\n              </PopoverContent>\r\n            </Popover>\r\n\r\n            {/* Date Range Filter */}\r\n            <DateRangePicker\r\n              value={dateRange}\r\n              onChange={setDateRange}\r\n              variant=\"dark\"\r\n            />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Investor Fees Section */}\r\n      <Collapsible open={investorFeesExpanded} onOpenChange={setInvestorFeesExpanded}>\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CollapsibleTrigger asChild>\r\n              <button className=\"flex w-full items-center justify-between text-left\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Users className=\"h-5 w-5 text-blue-400\" />\r\n                  <div>\r\n                    <CardTitle className=\"text-lg\">Investor Fees</CardTitle>\r\n                    <p className=\"text-sm text-gray-400 mt-0.5\">\r\n                      Accrued fees pending collection\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-sm font-medium text-white\">\r\n                      {investorFees.length} fee{investorFees.length !== 1 ? 's' : ''}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-400\">\r\n                      {formatCurrency(investorFeesTotal)}\r\n                    </div>\r\n                  </div>\r\n                  {investorFeesExpanded ? (\r\n                    <ChevronDown className=\"h-5 w-5 text-gray-400\" />\r\n                  ) : (\r\n                    <ChevronRight className=\"h-5 w-5 text-gray-400\" />\r\n                  )}\r\n                </div>\r\n              </button>\r\n            </CollapsibleTrigger>\r\n          </CardHeader>\r\n          <CollapsibleContent>\r\n            <CardContent className=\"pt-0\">\r\n              {investorFeesLoading ? (\r\n                <p className=\"text-gray-400 py-4\">Loading investor fees...</p>\r\n              ) : investorFees.length === 0 ? (\r\n                <p className=\"text-gray-400 py-4\">No accrued investor fees with future periods</p>\r\n              ) : (\r\n                <div className=\"space-y-6\">\r\n                  {Object.entries(groupedInvestorFees).map(([dealId, dealGroup]) => (\r\n                    <div key={dealId} className=\"space-y-4\">\r\n                      {/* Deal Header */}\r\n                      <div className=\"flex items-center gap-2 border-b border-gray-700 pb-2\">\r\n                        <Building2 className=\"h-4 w-4 text-purple-400\" />\r\n                        <h4 className=\"font-semibold text-white\">{dealGroup.deal.name}</h4>\r\n                        <span className=\"text-sm text-gray-400 ml-auto\">\r\n                          {formatCurrency(dealGroup.total)}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Investors within Deal */}\r\n                      {Object.entries(dealGroup.byInvestor).map(([investorId, investorGroup]) => (\r\n                        <div key={investorId} className=\"ml-6 space-y-2\">\r\n                          {/* Investor Header */}\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Users className=\"h-3.5 w-3.5 text-gray-500\" />\r\n                            <h5 className=\"font-medium text-gray-200\">{investorGroup.investor.name}</h5>\r\n                            <span className=\"text-sm text-gray-400 ml-auto\">\r\n                              {formatCurrency(investorGroup.total)}\r\n                            </span>\r\n                          </div>\r\n\r\n                          {/* Fee Events Table */}\r\n                          <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full text-sm\">\r\n                              <thead>\r\n                                <tr className=\"border-b border-gray-700\">\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Fee Type</th>\r\n                                  <th className=\"text-right py-2 px-2 text-gray-400 font-medium\">Amount</th>\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Period Start</th>\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Period End</th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                                {investorGroup.fees.map((fee) => (\r\n                                  <tr key={fee.id} className=\"border-b border-gray-800\">\r\n                                    <td className=\"py-2 px-2\">\r\n                                      <Badge className={feeTypeColors[fee.fee_type] || 'bg-gray-500/20 text-gray-400 border-gray-500/30'}>\r\n                                        {fee.fee_type}\r\n                                      </Badge>\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-right text-white font-medium\">\r\n                                      {formatCurrency(fee.computed_amount)}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-gray-300\">\r\n                                      {fee.period_start_date\r\n                                        ? new Date(fee.period_start_date).toLocaleDateString('en-US', {\r\n                                            month: 'short',\r\n                                            day: 'numeric',\r\n                                            year: 'numeric',\r\n                                          })\r\n                                        : '-'}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-gray-300\">\r\n                                      {fee.period_end_date\r\n                                        ? new Date(fee.period_end_date).toLocaleDateString('en-US', {\r\n                                            month: 'short',\r\n                                            day: 'numeric',\r\n                                            year: 'numeric',\r\n                                          })\r\n                                        : '-'}\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </CollapsibleContent>\r\n        </Card>\r\n      </Collapsible>\r\n\r\n      {/* Introducer Commissions Section */}\r\n      <Collapsible open={introducerCommissionsExpanded} onOpenChange={setIntroducerCommissionsExpanded}>\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CollapsibleTrigger asChild>\r\n              <button className=\"flex w-full items-center justify-between text-left\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <UserCheck className=\"h-5 w-5 text-blue-400\" />\r\n                  <div>\r\n                    <CardTitle className=\"text-lg\">Introducer Commissions</CardTitle>\r\n                    <p className=\"text-sm text-gray-400 mt-0.5\">\r\n                      Pending commission payments to introducers\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-sm font-medium text-white\">\r\n                      {introducerCommissions.length} commission{introducerCommissions.length !== 1 ? 's' : ''}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-400\">\r\n                      {formatCurrency(introducerCommissionsTotal)}\r\n                    </div>\r\n                  </div>\r\n                  {introducerCommissionsExpanded ? (\r\n                    <ChevronDown className=\"h-5 w-5 text-gray-400\" />\r\n                  ) : (\r\n                    <ChevronRight className=\"h-5 w-5 text-gray-400\" />\r\n                  )}\r\n                </div>\r\n              </button>\r\n            </CollapsibleTrigger>\r\n          </CardHeader>\r\n          <CollapsibleContent>\r\n            <CardContent className=\"pt-0\">\r\n              {introducerCommissionsLoading ? (\r\n                <p className=\"text-gray-400 py-4\">Loading introducer commissions...</p>\r\n              ) : introducerCommissions.length === 0 ? (\r\n                <p className=\"text-gray-400 py-4\">No pending introducer commissions</p>\r\n              ) : (\r\n                <div className=\"space-y-6\">\r\n                  {Object.entries(groupedIntroducerCommissions).map(([introducerId, introducerGroup]) => (\r\n                    <div key={introducerId} className=\"space-y-4\">\r\n                      {/* Introducer Header */}\r\n                      <div className=\"flex items-center gap-2 border-b border-gray-700 pb-2\">\r\n                        <UserCheck className=\"h-4 w-4 text-blue-400\" />\r\n                        <h4 className=\"font-semibold text-white\">{introducerGroup.introducer.name}</h4>\r\n                        <span className=\"text-sm text-gray-400 ml-auto\">\r\n                          {formatCurrency(introducerGroup.total)}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Deals within Introducer */}\r\n                      {Object.entries(introducerGroup.byDeal).map(([dealId, dealGroup]) => (\r\n                        <div key={dealId} className=\"ml-6 space-y-2\">\r\n                          {/* Deal Header */}\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Building2 className=\"h-3.5 w-3.5 text-purple-400\" />\r\n                            <h5 className=\"font-medium text-gray-200\">{dealGroup.deal.name}</h5>\r\n                            <span className=\"text-sm text-gray-400 ml-auto\">\r\n                              {formatCurrency(dealGroup.total)}\r\n                            </span>\r\n                          </div>\r\n\r\n                          {/* Commissions Table */}\r\n                          <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full text-sm\">\r\n                              <thead>\r\n                                <tr className=\"border-b border-gray-700\">\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Investor</th>\r\n                                  <th className=\"text-right py-2 px-2 text-gray-400 font-medium\">Amount</th>\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Status</th>\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Created Date</th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                                {dealGroup.commissions.map((commission) => (\r\n                                  <tr key={commission.id} className=\"border-b border-gray-800\">\r\n                                    <td className=\"py-2 px-2 text-gray-300\">\r\n                                      {commission.investor_name || '-'}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-right text-white font-medium\">\r\n                                      {formatCurrency(Number(commission.accrual_amount))}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2\">\r\n                                      <Badge className=\"bg-amber-500/20 text-amber-400 border-amber-500/30\">\r\n                                        {commission.status}\r\n                                      </Badge>\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-gray-300\">\r\n                                      {new Date(commission.created_at).toLocaleDateString('en-US', {\r\n                                        month: 'short',\r\n                                        day: 'numeric',\r\n                                        year: 'numeric',\r\n                                      })}\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </CollapsibleContent>\r\n        </Card>\r\n      </Collapsible>\r\n\r\n      {/* Partner Commissions Section */}\r\n      <Collapsible open={partnerCommissionsExpanded} onOpenChange={setPartnerCommissionsExpanded}>\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CollapsibleTrigger asChild>\r\n              <button className=\"flex w-full items-center justify-between text-left\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Handshake className=\"h-5 w-5 text-green-400\" />\r\n                  <div>\r\n                    <CardTitle className=\"text-lg\">Partner Commissions</CardTitle>\r\n                    <p className=\"text-sm text-gray-400 mt-0.5\">\r\n                      Pending commission payments to partners\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-sm font-medium text-white\">\r\n                      {partnerCommissions.length} commission{partnerCommissions.length !== 1 ? 's' : ''}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-400\">\r\n                      {formatCurrency(partnerCommissionsTotal)}\r\n                    </div>\r\n                  </div>\r\n                  {partnerCommissionsExpanded ? (\r\n                    <ChevronDown className=\"h-5 w-5 text-gray-400\" />\r\n                  ) : (\r\n                    <ChevronRight className=\"h-5 w-5 text-gray-400\" />\r\n                  )}\r\n                </div>\r\n              </button>\r\n            </CollapsibleTrigger>\r\n          </CardHeader>\r\n          <CollapsibleContent>\r\n            <CardContent className=\"pt-0\">\r\n              {partnerCommissionsLoading ? (\r\n                <p className=\"text-gray-400 py-4\">Loading partner commissions...</p>\r\n              ) : partnerCommissions.length === 0 ? (\r\n                <p className=\"text-gray-400 py-4\">No pending partner commissions</p>\r\n              ) : (\r\n                <div className=\"space-y-6\">\r\n                  {Object.entries(groupedPartnerCommissions).map(([partnerId, partnerGroup]) => (\r\n                    <div key={partnerId} className=\"space-y-4\">\r\n                      {/* Partner Header */}\r\n                      <div className=\"flex items-center gap-2 border-b border-gray-700 pb-2\">\r\n                        <Handshake className=\"h-4 w-4 text-green-400\" />\r\n                        <h4 className=\"font-semibold text-white\">{partnerGroup.partner.name}</h4>\r\n                        <span className=\"text-sm text-gray-400 ml-auto\">\r\n                          {formatCurrency(partnerGroup.total)}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Deals within Partner */}\r\n                      {Object.entries(partnerGroup.byDeal).map(([dealId, dealGroup]) => (\r\n                        <div key={dealId} className=\"ml-6 space-y-2\">\r\n                          {/* Deal Header */}\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Building2 className=\"h-3.5 w-3.5 text-purple-400\" />\r\n                            <h5 className=\"font-medium text-gray-200\">{dealGroup.deal.name}</h5>\r\n                            <span className=\"text-sm text-gray-400 ml-auto\">\r\n                              {formatCurrency(dealGroup.total)}\r\n                            </span>\r\n                          </div>\r\n\r\n                          {/* Commissions Table */}\r\n                          <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full text-sm\">\r\n                              <thead>\r\n                                <tr className=\"border-b border-gray-700\">\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Investor</th>\r\n                                  <th className=\"text-right py-2 px-2 text-gray-400 font-medium\">Amount</th>\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Status</th>\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Created Date</th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                                {dealGroup.commissions.map((commission) => (\r\n                                  <tr key={commission.id} className=\"border-b border-gray-800\">\r\n                                    <td className=\"py-2 px-2 text-gray-300\">\r\n                                      {commission.investor_name || '-'}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-right text-white font-medium\">\r\n                                      {formatCurrency(Number(commission.accrual_amount))}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2\">\r\n                                      <Badge className=\"bg-amber-500/20 text-amber-400 border-amber-500/30\">\r\n                                        {commission.status}\r\n                                      </Badge>\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-gray-300\">\r\n                                      {new Date(commission.created_at).toLocaleDateString('en-US', {\r\n                                        month: 'short',\r\n                                        day: 'numeric',\r\n                                        year: 'numeric',\r\n                                      })}\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </CollapsibleContent>\r\n        </Card>\r\n      </Collapsible>\r\n\r\n      {/* Commercial Partner Commissions Section */}\r\n      <Collapsible open={commercialPartnerCommissionsExpanded} onOpenChange={setCommercialPartnerCommissionsExpanded}>\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CollapsibleTrigger asChild>\r\n              <button className=\"flex w-full items-center justify-between text-left\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Briefcase className=\"h-5 w-5 text-purple-400\" />\r\n                  <div>\r\n                    <CardTitle className=\"text-lg\">Commercial Partner Commissions</CardTitle>\r\n                    <p className=\"text-sm text-gray-400 mt-0.5\">\r\n                      Pending commission payments to commercial partners\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-sm font-medium text-white\">\r\n                      {commercialPartnerCommissions.length} commission{commercialPartnerCommissions.length !== 1 ? 's' : ''}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-400\">\r\n                      {formatCurrency(commercialPartnerCommissionsTotal)}\r\n                    </div>\r\n                  </div>\r\n                  {commercialPartnerCommissionsExpanded ? (\r\n                    <ChevronDown className=\"h-5 w-5 text-gray-400\" />\r\n                  ) : (\r\n                    <ChevronRight className=\"h-5 w-5 text-gray-400\" />\r\n                  )}\r\n                </div>\r\n              </button>\r\n            </CollapsibleTrigger>\r\n          </CardHeader>\r\n          <CollapsibleContent>\r\n            <CardContent className=\"pt-0\">\r\n              {commercialPartnerCommissionsLoading ? (\r\n                <p className=\"text-gray-400 py-4\">Loading commercial partner commissions...</p>\r\n              ) : commercialPartnerCommissions.length === 0 ? (\r\n                <p className=\"text-gray-400 py-4\">No pending commercial partner commissions</p>\r\n              ) : (\r\n                <div className=\"space-y-6\">\r\n                  {Object.entries(groupedCommercialPartnerCommissions).map(([commercialPartnerId, commercialPartnerGroup]) => (\r\n                    <div key={commercialPartnerId} className=\"space-y-4\">\r\n                      {/* Commercial Partner Header */}\r\n                      <div className=\"flex items-center gap-2 border-b border-gray-700 pb-2\">\r\n                        <Briefcase className=\"h-4 w-4 text-purple-400\" />\r\n                        <h4 className=\"font-semibold text-white\">{commercialPartnerGroup.commercialPartner.name}</h4>\r\n                        <span className=\"text-sm text-gray-400 ml-auto\">\r\n                          {formatCurrency(commercialPartnerGroup.total)}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Deals within Commercial Partner */}\r\n                      {Object.entries(commercialPartnerGroup.byDeal).map(([dealId, dealGroup]) => (\r\n                        <div key={dealId} className=\"ml-6 space-y-2\">\r\n                          {/* Deal Header */}\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Building2 className=\"h-3.5 w-3.5 text-purple-400\" />\r\n                            <h5 className=\"font-medium text-gray-200\">{dealGroup.deal.name}</h5>\r\n                            <span className=\"text-sm text-gray-400 ml-auto\">\r\n                              {formatCurrency(dealGroup.total)}\r\n                            </span>\r\n                          </div>\r\n\r\n                          {/* Commissions Table */}\r\n                          <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full text-sm\">\r\n                              <thead>\r\n                                <tr className=\"border-b border-gray-700\">\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Investor</th>\r\n                                  <th className=\"text-right py-2 px-2 text-gray-400 font-medium\">Amount</th>\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Status</th>\r\n                                  <th className=\"text-left py-2 px-2 text-gray-400 font-medium\">Created Date</th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                                {dealGroup.commissions.map((commission) => (\r\n                                  <tr key={commission.id} className=\"border-b border-gray-800\">\r\n                                    <td className=\"py-2 px-2 text-gray-300\">\r\n                                      {commission.investor_name || '-'}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-right text-white font-medium\">\r\n                                      {formatCurrency(Number(commission.accrual_amount))}\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2\">\r\n                                      <Badge className=\"bg-amber-500/20 text-amber-400 border-amber-500/30\">\r\n                                        {commission.status}\r\n                                      </Badge>\r\n                                    </td>\r\n                                    <td className=\"py-2 px-2 text-gray-300\">\r\n                                      {new Date(commission.created_at).toLocaleDateString('en-US', {\r\n                                        month: 'short',\r\n                                        day: 'numeric',\r\n                                        year: 'numeric',\r\n                                      })}\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </CollapsibleContent>\r\n        </Card>\r\n      </Collapsible>\r\n\r\n      {/* Scheduled Recurring Fees - Grouped by Month */}\r\n      <div>\r\n        <h3 className=\"text-lg font-semibold text-white mb-4\">Scheduled Recurring Fees</h3>\r\n      </div>\r\n      {Object.keys(data.by_month).length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"py-10 text-center\">\r\n            <p className=\"text-gray-400\">No upcoming fees scheduled for the next {daysAhead} days</p>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {Object.entries(data.by_month).map(([month, monthData]) => (\r\n            <div key={month}>\r\n              <div className=\"flex items-center justify-between mb-3\">\r\n                <h3 className=\"text-lg font-semibold text-white\">{month}</h3>\r\n                <div className=\"text-sm text-gray-400\">\r\n                  {monthData.fees.length} fee{monthData.fees.length !== 1 ? 's' : ''}  {formatCurrency(monthData.total)}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                {monthData.fees.map((fee) => (\r\n                  <Card key={fee.id}>\r\n                    <CardContent className=\"py-4\">\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center gap-2 mb-2\">\r\n                            <Badge className={feeTypeColors[fee.fee_type] || 'bg-gray-500/20 text-gray-400 border-gray-500/30'}>\r\n                              {fee.fee_name}\r\n                            </Badge>\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              {fee.frequency}\r\n                            </Badge>\r\n                          </div>\r\n\r\n                          <div className=\"space-y-1\">\r\n                            <p className=\"font-medium text-white\">\r\n                              {fee.investor.legal_name || fee.investor.display_name}\r\n                            </p>\r\n                            <p className=\"text-sm text-gray-400\">\r\n                              {fee.vehicle.name}\r\n                            </p>\r\n                            <p className=\"text-sm text-gray-400\">\r\n                              Subscription: {fee.subscription_number}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-500\">\r\n                              Due: {new Date(fee.next_due_date).toLocaleDateString('en-US', {\r\n                                weekday: 'short',\r\n                                month: 'short',\r\n                                day: 'numeric',\r\n                                year: 'numeric',\r\n                              })}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"text-right ml-4\">\r\n                          <div className=\"text-xl font-bold text-white\">\r\n                            {formatCurrency(fee.amount)}\r\n                          </div>\r\n                          <Badge variant=\"secondary\" className=\"mt-2\">\r\n                            {fee.status}\r\n                          </Badge>\r\n                        </div>\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}