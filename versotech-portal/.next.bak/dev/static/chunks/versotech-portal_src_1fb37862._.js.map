{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,oNAAC;YACC,aAAU;YACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;KAbS;AAeT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,+JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,6EAA6E;QAC7E,2GACA;QAED,GAAG,KAAK;;;;;;AAGf;MAZS;AAcT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,oNAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,kMAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,oNAAC,sMAAsB;QACrB,KAAK;QACL,WAAW,IAAA,mJAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,oNAAC,2MAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,sMAAsB,CAAC,WAAW"}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/format.ts"],"sourcesContent":["export const formatCurrency = (value: number | null | undefined, currency: string = 'USD') => {\n  if (!value) return '$0'\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency,\n    maximumFractionDigits: 0,\n  }).format(value)\n}\n\nexport const formatBps = (bps: number | null | undefined) => {\n  if (bps === null || bps === undefined) return '—'\n  return `${bps} bps`\n}\n\nexport const formatPercentage = (value: number | null | undefined) => {\n  if (!value) return '0%'\n  return `${(value * 100).toFixed(1)}%`\n}\n\nexport const formatDate = (value: string | Date | null | undefined) => {\n  if (!value) return '—'\n  const date = typeof value === 'string' ? new Date(value) : value\n  if (Number.isNaN(date?.getTime?.())) return '—'\n  // Use explicit locale to prevent hydration mismatch between server/client\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  })\n}\n\n\n\n\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,iBAAiB,CAAC,OAAkC,WAAmB,KAAK;IACvF,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,YAAY,CAAC;IACxB,IAAI,QAAQ,QAAQ,QAAQ,WAAW,OAAO;IAC9C,OAAO,GAAG,IAAI,IAAI,CAAC;AACrB;AAEO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AACvC;AAEO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,OAAO,OAAO,UAAU,WAAW,IAAI,KAAK,SAAS;IAC3D,IAAI,OAAO,KAAK,CAAC,MAAM,cAAc,OAAO;IAC5C,0EAA0E;IAC1E,OAAO,KAAK,kBAAkB,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/types/document-viewer.types.ts"],"sourcesContent":["/**\r\n * Type definitions for the document viewer system\r\n */\r\n\r\n/**\r\n * Minimal document reference needed for preview\r\n * Flexible to support different document sources (general docs, entity docs, deal docs, etc.)\r\n */\r\nexport interface DocumentReference {\r\n  id: string\r\n  file_name?: string | null  // Optional to support different document types\r\n  name?: string | null       // Some documents use 'name' instead of 'file_name'\r\n  mime_type?: string | null\r\n  file_size_bytes?: number | null\r\n  type?: string | null\r\n  [key: string]: any // Allow additional properties\r\n}\r\n\r\n/**\r\n * Response from document download/preview API endpoints\r\n */\r\nexport interface DocumentUrlResponse {\r\n  download_url: string\r\n  mode?: 'preview' | 'download'\r\n  document: {\r\n    id: string\r\n    name: string\r\n    type: string\r\n    file_key?: string\r\n    external_url?: string\r\n    [key: string]: any\r\n  }\r\n  watermark?: {\r\n    uploaded_by?: string\r\n    uploaded_at?: string\r\n    document_classification?: string\r\n    [key: string]: any\r\n  }\r\n  expires_in_seconds: number\r\n}\r\n\r\n/**\r\n * State shape for document viewer\r\n */\r\nexport interface DocumentViewerState {\r\n  isOpen: boolean\r\n  document: DocumentReference | null\r\n  previewUrl: string | null\r\n  isLoading: boolean\r\n  error: string | null\r\n}\r\n\r\n/**\r\n * Custom error class for document operations\r\n */\r\nexport class DocumentError extends Error {\r\n  constructor(\r\n    message: string,\r\n    public statusCode: number,\r\n    public originalError?: any\r\n  ) {\r\n    super(message)\r\n    this.name = 'DocumentError'\r\n  }\r\n}\r\n\r\n/**\r\n * Options for opening a document preview\r\n */\r\nexport interface PreviewOptions {\r\n  /** Force download mode instead of preview */\r\n  forceDownload?: boolean\r\n  /** Custom error handler */\r\n  onError?: (error: DocumentError) => void\r\n  /** Success callback after preview opens */\r\n  onSuccess?: () => void\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC,GAED;;;CAGC;;;;AAgDM,MAAM,sBAAsB;;;IACjC,YACE,OAAe,EACf,AAAO,UAAkB,EACzB,AAAO,aAAmB,CAC1B;QACA,KAAK,CAAC,eAHC,aAAA,iBACA,gBAAA;QAGP,IAAI,CAAC,IAAI,GAAG;IACd;AACF"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/services/document.service.ts"],"sourcesContent":["/**\r\n * Document Service\r\n * Centralized service for all document-related API operations\r\n */\r\n\r\nimport { DocumentError, DocumentUrlResponse } from '@/types/document-viewer.types'\r\n\r\nexport class DocumentService {\r\n  /**\r\n   * Validate that a URL is a valid storage URL from Supabase\r\n   */\r\n  private static isValidStorageUrl(url: string): boolean {\r\n    if (!url) return false\r\n\r\n    // Check if it's a valid HTTPS URL\r\n    if (!url.startsWith('https://')) return false\r\n\r\n    // Check if it's from Supabase storage or a blob URL\r\n    return (\r\n      url.includes('supabase.co/storage') ||\r\n      url.includes('supabase.com/storage') ||\r\n      url.startsWith('blob:')\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Parse and validate API response\r\n   */\r\n  private static async parseResponse(\r\n    response: Response\r\n  ): Promise<DocumentUrlResponse> {\r\n    let data: any\r\n\r\n    try {\r\n      data = await response.json()\r\n    } catch (e) {\r\n      throw new DocumentError(\r\n        'Invalid response from server',\r\n        response.status,\r\n        e\r\n      )\r\n    }\r\n\r\n    // Check for error response\r\n    if (!response.ok) {\r\n      const errorMessage = data.error || data.message || 'Failed to load document'\r\n      throw new DocumentError(errorMessage, response.status, data)\r\n    }\r\n\r\n    // Validate required fields - check for both 'url' and 'download_url' for compatibility\r\n    const downloadUrl = data.url || data.download_url\r\n    if (!downloadUrl) {\r\n      throw new DocumentError(\r\n        'No download URL in response',\r\n        500,\r\n        data\r\n      )\r\n    }\r\n\r\n    // Validate URL format\r\n    if (!this.isValidStorageUrl(downloadUrl)) {\r\n      throw new DocumentError(\r\n        'Invalid download URL format',\r\n        500,\r\n        data\r\n      )\r\n    }\r\n\r\n    // Normalize response to always have both fields for compatibility\r\n    data.url = downloadUrl\r\n    data.download_url = downloadUrl\r\n\r\n    return data as DocumentUrlResponse\r\n  }\r\n\r\n  /**\r\n   * Get preview URL for a general document\r\n   */\r\n  static async getPreviewUrl(documentId: string): Promise<DocumentUrlResponse> {\r\n    try {\r\n      const response = await fetch(\r\n        `/api/documents/${documentId}/download?mode=preview`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      )\r\n\r\n      return await this.parseResponse(response)\r\n    } catch (error) {\r\n      if (error instanceof DocumentError) {\r\n        throw error\r\n      }\r\n\r\n      throw new DocumentError(\r\n        'Network error while loading preview',\r\n        0,\r\n        error\r\n      )\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get download URL for a general document\r\n   */\r\n  static async getDownloadUrl(documentId: string): Promise<DocumentUrlResponse> {\r\n    try {\r\n      const response = await fetch(\r\n        `/api/documents/${documentId}/download?mode=download`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      )\r\n\r\n      return await this.parseResponse(response)\r\n    } catch (error) {\r\n      if (error instanceof DocumentError) {\r\n        throw error\r\n      }\r\n\r\n      throw new DocumentError(\r\n        'Network error while loading download',\r\n        0,\r\n        error\r\n      )\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get preview URL for a deal data room document\r\n   */\r\n  static async getDealDocumentPreviewUrl(\r\n    dealId: string,\r\n    documentId: string\r\n  ): Promise<DocumentUrlResponse> {\r\n    try {\r\n      const response = await fetch(\r\n        `/api/deals/${dealId}/documents/${documentId}/download?mode=preview`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      )\r\n\r\n      return await this.parseResponse(response)\r\n    } catch (error) {\r\n      if (error instanceof DocumentError) {\r\n        throw error\r\n      }\r\n\r\n      throw new DocumentError(\r\n        'Network error while loading deal document preview',\r\n        0,\r\n        error\r\n      )\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get download URL for a deal data room document\r\n   */\r\n  static async getDealDocumentDownloadUrl(\r\n    dealId: string,\r\n    documentId: string\r\n  ): Promise<DocumentUrlResponse> {\r\n    try {\r\n      const response = await fetch(\r\n        `/api/deals/${dealId}/documents/${documentId}/download?mode=download`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      )\r\n\r\n      return await this.parseResponse(response)\r\n    } catch (error) {\r\n      if (error instanceof DocumentError) {\r\n        throw error\r\n      }\r\n\r\n      throw new DocumentError(\r\n        'Network error while loading deal document download',\r\n        0,\r\n        error\r\n      )\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Map HTTP status codes to user-friendly error messages\r\n   */\r\n  static getErrorMessage(error: DocumentError): string {\r\n    switch (error.statusCode) {\r\n      case 401:\r\n        return 'You do not have permission to view this document.'\r\n      case 403:\r\n        return 'Access to this document is forbidden.'\r\n      case 404:\r\n        return 'Document not found or has been deleted.'\r\n      case 413:\r\n        return 'File is too large to process.'\r\n      case 500:\r\n        return 'Server error while loading document. Please try again.'\r\n      case 0:\r\n        return 'Network error. Please check your connection and try again.'\r\n      default:\r\n        return error.message || 'Failed to load document preview.'\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 530, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/constants/document-preview.constants.ts"],"sourcesContent":["/**\r\n * Document Preview Configuration\r\n * Defines limits and supported types for the document preview system\r\n */\r\n\r\nexport const PREVIEW_CONFIG = {\r\n  /** Maximum file size for preview (10MB) */\r\n  MAX_FILE_SIZE_BYTES: 10 * 1024 * 1024,\r\n\r\n  /** Timeout for iframe loading (30 seconds) */\r\n  IFRAME_TIMEOUT_MS: 30000,\r\n\r\n  /** Supported MIME types for preview */\r\n  SUPPORTED_MIME_TYPES: [\r\n    'application/pdf',\r\n    'image/png',\r\n    'image/jpeg',\r\n    'image/jpg',\r\n    'image/gif',\r\n    'image/webp',\r\n    'text/plain',\r\n  ] as const,\r\n\r\n  /** Supported file extensions for preview */\r\n  SUPPORTED_EXTENSIONS: [\r\n    'pdf',\r\n    'png',\r\n    'jpeg',\r\n    'jpg',\r\n    'gif',\r\n    'webp',\r\n    'txt',\r\n    'text',\r\n  ] as const,\r\n} as const\r\n\r\n/**\r\n * User-friendly error messages for document preview\r\n */\r\nexport const PREVIEW_ERROR_MESSAGES = {\r\n  FILE_TOO_LARGE: 'File is too large for preview (maximum 10MB). Please download to view.',\r\n  UNSUPPORTED_TYPE: 'Preview not supported for this file type. Please download to view.',\r\n  LOAD_FAILED: 'Failed to load document preview. Please try downloading instead.',\r\n  UNAUTHORIZED: 'You do not have permission to view this document.',\r\n  NOT_FOUND: 'Document not found or has been deleted.',\r\n  NETWORK_ERROR: 'Network error while loading preview. Please check your connection.',\r\n  INVALID_URL: 'Invalid preview URL received. Please try again.',\r\n  TIMEOUT: 'Preview loading timed out. The file may be too large or your connection too slow.',\r\n} as const\r\n\r\n/**\r\n * Check if a file extension is supported for preview\r\n */\r\nexport function isPreviewableExtension(filename: string): boolean {\r\n  const extension = filename.split('.').pop()?.toLowerCase()\r\n  if (!extension) return false\r\n\r\n  return (PREVIEW_CONFIG.SUPPORTED_EXTENSIONS as readonly string[]).includes(extension)\r\n}\r\n\r\n/**\r\n * Check if a MIME type is supported for preview\r\n */\r\nexport function isPreviewableMimeType(mimeType: string): boolean {\r\n  return (PREVIEW_CONFIG.SUPPORTED_MIME_TYPES as readonly string[]).includes(mimeType)\r\n}\r\n\r\n/**\r\n * Check if a file is within size limits for preview\r\n */\r\nexport function isWithinSizeLimit(sizeBytes: number): boolean {\r\n  return sizeBytes <= PREVIEW_CONFIG.MAX_FILE_SIZE_BYTES\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;AAEM,MAAM,iBAAiB;IAC5B,yCAAyC,GACzC,qBAAqB,KAAK,OAAO;IAEjC,4CAA4C,GAC5C,mBAAmB;IAEnB,qCAAqC,GACrC,sBAAsB;QACpB;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,0CAA0C,GAC1C,sBAAsB;QACpB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;AACH;AAKO,MAAM,yBAAyB;IACpC,gBAAgB;IAChB,kBAAkB;IAClB,aAAa;IACb,cAAc;IACd,WAAW;IACX,eAAe;IACf,aAAa;IACb,SAAS;AACX;AAKO,SAAS,uBAAuB,QAAgB;IACrD,MAAM,YAAY,SAAS,KAAK,CAAC,KAAK,GAAG,IAAI;IAC7C,IAAI,CAAC,WAAW,OAAO;IAEvB,OAAO,AAAC,eAAe,oBAAoB,CAAuB,QAAQ,CAAC;AAC7E;AAKO,SAAS,sBAAsB,QAAgB;IACpD,OAAO,AAAC,eAAe,oBAAoB,CAAuB,QAAQ,CAAC;AAC7E;AAKO,SAAS,kBAAkB,SAAiB;IACjD,OAAO,aAAa,eAAe,mBAAmB;AACxD"}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/hooks/useDocumentViewer.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useCallback } from 'react'\r\nimport { toast } from 'sonner'\r\nimport { DocumentService } from '@/services/document.service'\r\nimport { DocumentReference, DocumentError } from '@/types/document-viewer.types'\r\nimport {\r\n  PREVIEW_CONFIG,\r\n  PREVIEW_ERROR_MESSAGES,\r\n  isPreviewableExtension,\r\n  isPreviewableMimeType,\r\n  isWithinSizeLimit,\r\n} from '@/constants/document-preview.constants'\r\n\r\n/**\r\n * Hook for managing document preview state and operations\r\n */\r\nexport function useDocumentViewer() {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [document, setDocument] = useState<DocumentReference | null>(null)\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  /**\r\n   * Validate if document can be previewed\r\n   */\r\n  const validateDocument = (doc: DocumentReference): string | null => {\r\n    // Check file size\r\n    if (doc.file_size_bytes && !isWithinSizeLimit(doc.file_size_bytes)) {\r\n      return PREVIEW_ERROR_MESSAGES.FILE_TOO_LARGE\r\n    }\r\n\r\n    // Check file type by extension\r\n    const fileName = doc.file_name || doc.name || ''\r\n    const canPreviewByExtension = fileName ? isPreviewableExtension(fileName) : false\r\n\r\n    // Check file type by MIME type if available\r\n    const mimeType = doc.mime_type || ''\r\n    const canPreviewByMimeType = mimeType\r\n      ? isPreviewableMimeType(mimeType)\r\n      : false // If no MIME type, must fail validation (was incorrectly true)\r\n\r\n    // Explicitly check for Office documents that cannot be previewed\r\n    const fileExt = fileName.split('.').pop()?.toLowerCase() || ''\r\n    const officeExtensions = ['docx', 'doc', 'xlsx', 'xls', 'pptx', 'ppt', 'odt', 'ods', 'odp']\r\n    const isOfficeByExtension = officeExtensions.includes(fileExt)\r\n\r\n    const isOfficeDocument = isOfficeByExtension || (mimeType && (\r\n      mimeType.includes('officedocument') || // Office 2007+ formats\r\n      mimeType.includes('msword') || // Old Word format\r\n      mimeType.includes('ms-excel') || // Old Excel format\r\n      mimeType.includes('ms-powerpoint') || // Old PowerPoint format\r\n      mimeType.includes('opendocument') // OpenOffice/LibreOffice formats\r\n    ))\r\n\r\n    if (isOfficeDocument) {\r\n      return 'Office documents cannot be previewed. Please download to view.'\r\n    }\r\n\r\n    if (!canPreviewByExtension && !canPreviewByMimeType) {\r\n      return PREVIEW_ERROR_MESSAGES.UNSUPPORTED_TYPE\r\n    }\r\n\r\n    return null // Valid for preview\r\n  }\r\n\r\n  /**\r\n   * Open document preview\r\n   */\r\n  const openPreview = useCallback(async (doc: DocumentReference, dealId?: string) => {\r\n    // Reset state\r\n    setError(null)\r\n    setPreviewUrl(null)\r\n\r\n    // Validate document\r\n    const validationError = validateDocument(doc)\r\n    if (validationError) {\r\n      toast.error(validationError)\r\n      return\r\n    }\r\n\r\n    // Set document and open immediately (for better UX)\r\n    setDocument(doc)\r\n    setIsOpen(true)\r\n    setIsLoading(true)\r\n\r\n    try {\r\n      // Fetch preview URL based on document type\r\n      const response = dealId\r\n        ? await DocumentService.getDealDocumentPreviewUrl(dealId, doc.id)\r\n        : await DocumentService.getPreviewUrl(doc.id)\r\n\r\n      // Set preview URL\r\n      setPreviewUrl(response.download_url)\r\n      setIsLoading(false)\r\n    } catch (err) {\r\n      console.error('Failed to load document preview:', err)\r\n\r\n      const errorMessage =\r\n        err instanceof DocumentError\r\n          ? DocumentService.getErrorMessage(err)\r\n          : PREVIEW_ERROR_MESSAGES.LOAD_FAILED\r\n\r\n      setError(errorMessage)\r\n      setIsLoading(false)\r\n\r\n      // Also show toast for immediate feedback\r\n      toast.error(errorMessage)\r\n    }\r\n  }, [])\r\n\r\n  /**\r\n   * Close document preview\r\n   */\r\n  const closePreview = useCallback(() => {\r\n    setIsOpen(false)\r\n    // Delay cleanup to allow closing animation\r\n    setTimeout(() => {\r\n      setDocument(null)\r\n      setPreviewUrl(null)\r\n      setError(null)\r\n      setIsLoading(false)\r\n    }, 300)\r\n  }, [])\r\n\r\n  /**\r\n   * Download document from preview\r\n   */\r\n  const downloadDocument = useCallback(async () => {\r\n    if (!document) return\r\n\r\n    try {\r\n      // Use previewUrl if available (already fetched)\r\n      if (previewUrl) {\r\n        window.open(previewUrl, '_blank')\r\n        return\r\n      }\r\n\r\n      // Otherwise fetch download URL\r\n      const response = await DocumentService.getDownloadUrl(document.id)\r\n      window.open(response.download_url, '_blank')\r\n    } catch (err) {\r\n      console.error('Failed to download document:', err)\r\n\r\n      const errorMessage =\r\n        err instanceof DocumentError\r\n          ? DocumentService.getErrorMessage(err)\r\n          : 'Failed to download document'\r\n\r\n      toast.error(errorMessage)\r\n    }\r\n  }, [document, previewUrl])\r\n\r\n  return {\r\n    // State\r\n    isOpen,\r\n    document,\r\n    previewUrl,\r\n    isLoading,\r\n    error,\r\n\r\n    // Methods\r\n    openPreview,\r\n    closePreview,\r\n    downloadDocument,\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 756, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/documents/DocumentViewerFullscreen.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState, useMemo } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { X, Download, Loader2, AlertCircle, FileText } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { formatFileSize } from '@/lib/utils'\r\nimport { DocumentReference } from '@/types/document-viewer.types'\r\n\r\ninterface DocumentViewerFullscreenProps {\r\n  isOpen: boolean\r\n  document: DocumentReference | null\r\n  previewUrl: string | null\r\n  isLoading: boolean\r\n  error: string | null\r\n  onClose: () => void\r\n  onDownload: () => void\r\n}\r\n\r\n/**\r\n * Check if a file is a PDF based on filename or URL\r\n */\r\nfunction isPdfFile(fileName?: string | null, url?: string | null): boolean {\r\n  if (fileName?.toLowerCase().endsWith('.pdf')) return true\r\n  if (url?.toLowerCase().includes('.pdf')) return true\r\n  // Supabase signed URLs have the file path in them\r\n  if (url?.includes('deal-documents') && url?.includes('.pdf')) return true\r\n  return false\r\n}\r\n\r\n/**\r\n * Append PDF viewer parameters to URL to fix browser rendering issues\r\n * - navpanes=0: Hide thumbnail sidebar (fixes Brave issue)\r\n * - view=FitH: Fit to width for better viewing\r\n * - pagemode=none: Don't show bookmarks/thumbnails\r\n */\r\nfunction getPdfViewerUrl(url: string): string {\r\n  // Don't add hash if URL already has one\r\n  if (url.includes('#')) return url\r\n  return `${url}#navpanes=0&view=FitH&pagemode=none`\r\n}\r\n\r\nexport function DocumentViewerFullscreen({\r\n  isOpen,\r\n  document,\r\n  previewUrl,\r\n  isLoading,\r\n  error,\r\n  onClose,\r\n  onDownload,\r\n}: DocumentViewerFullscreenProps) {\r\n  const [iframeError, setIframeError] = useState(false)\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  // Track mount state for portal rendering\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    return () => setMounted(false)\r\n  }, [])\r\n\r\n  // Compute the final iframe URL with PDF parameters if needed\r\n  const iframeSrc = useMemo(() => {\r\n    if (!previewUrl) return null\r\n    const fileName = document?.file_name || document?.name\r\n    if (isPdfFile(fileName, previewUrl)) {\r\n      return getPdfViewerUrl(previewUrl)\r\n    }\r\n    return previewUrl\r\n  }, [previewUrl, document])\r\n\r\n  // Handle ESC key to close\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose()\r\n      }\r\n      if (e.ctrlKey && e.key === 'd') {\r\n        e.preventDefault()\r\n        onDownload()\r\n      }\r\n    }\r\n\r\n    if (isOpen && typeof window !== 'undefined') {\r\n      window.addEventListener('keydown', handleKeyDown)\r\n      // Prevent body scroll when viewer is open\r\n      if (window.document?.body) {\r\n        window.document.body.style.overflow = 'hidden'\r\n      }\r\n\r\n      return () => {\r\n        window.removeEventListener('keydown', handleKeyDown)\r\n        if (window.document?.body) {\r\n          window.document.body.style.overflow = ''\r\n        }\r\n      }\r\n    }\r\n  }, [isOpen, onClose, onDownload])\r\n\r\n  // Reset iframe error when URL changes\r\n  useEffect(() => {\r\n    setIframeError(false)\r\n  }, [previewUrl])\r\n\r\n  // Don't render until mounted (for portal) or if not open\r\n  if (!isOpen || !mounted) return null\r\n\r\n  // Use portal to render at body level, escaping backdrop-blur containing blocks\r\n  const modalContent = (\r\n    <div className=\"fixed inset-0 z-[9999] bg-black/95 overflow-hidden\">\r\n      {/* Toolbar */}\r\n      <div className=\"h-16 bg-white border-b shadow-md flex items-center justify-between px-6\">\r\n        <div className=\"flex items-center gap-4 flex-1 min-w-0\">\r\n          <FileText className=\"h-5 w-5 text-gray-500 flex-shrink-0\" />\r\n          <div className=\"min-w-0 flex-1\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900 truncate\">\r\n              {document?.file_name || document?.name || 'Document Preview'}\r\n            </h2>\r\n            <div className=\"flex items-center gap-3 text-sm text-gray-500\">\r\n              {document?.type && (\r\n                <span className=\"capitalize\">{document.type}</span>\r\n              )}\r\n              {document?.file_size_bytes && (\r\n                <>\r\n                  <span>•</span>\r\n                  <span>{formatFileSize(document.file_size_bytes)}</span>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onDownload}\r\n            className=\"gap-2\"\r\n          >\r\n            <Download className=\"h-4 w-4\" />\r\n            Download\r\n          </Button>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={onClose}\r\n            className=\"gap-2\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n            Close\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main viewport */}\r\n      <div className=\"h-[calc(100vh-4rem)] bg-gray-900\">\r\n        {/* Loading/error states need centering */}\r\n        {(isLoading || error || iframeError) && (\r\n          <div className=\"w-full h-full flex items-center justify-center\">\r\n            {isLoading && (\r\n              <div className=\"flex flex-col items-center gap-4 text-white\">\r\n                <Loader2 className=\"h-12 w-12 animate-spin\" />\r\n                <p className=\"text-lg\">Loading document...</p>\r\n              </div>\r\n            )}\r\n\r\n            {error && !isLoading && (\r\n              <div className=\"flex flex-col items-center gap-4 text-white max-w-md mx-auto px-4\">\r\n                <AlertCircle className=\"h-16 w-16 text-red-400\" />\r\n                <h3 className=\"text-xl font-semibold\">Failed to Load Preview</h3>\r\n                <p className=\"text-gray-300 text-center\">{error}</p>\r\n                <Button\r\n                  onClick={onDownload}\r\n                  variant=\"secondary\"\r\n                  className=\"gap-2 mt-4\"\r\n                >\r\n                  <Download className=\"h-4 w-4\" />\r\n                  Download Instead\r\n                </Button>\r\n              </div>\r\n            )}\r\n\r\n            {iframeError && !isLoading && !error && (\r\n              <div className=\"flex flex-col items-center gap-4 text-white max-w-md mx-auto px-4\">\r\n                <AlertCircle className=\"h-16 w-16 text-red-400\" />\r\n                <h3 className=\"text-xl font-semibold\">Preview Unavailable</h3>\r\n                <p className=\"text-gray-300 text-center\">\r\n                  This document cannot be previewed in your browser.\r\n                </p>\r\n                <Button\r\n                  onClick={onDownload}\r\n                  variant=\"secondary\"\r\n                  className=\"gap-2 mt-4\"\r\n                >\r\n                  <Download className=\"h-4 w-4\" />\r\n                  Download to View\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Iframe fills the entire viewport when ready */}\r\n        {iframeSrc && !isLoading && !error && !iframeError && (\r\n          <iframe\r\n            src={iframeSrc}\r\n            className=\"w-full h-full border-0\"\r\n            title=\"Document Preview\"\r\n            onError={() => {\r\n              console.error('iframe failed to load preview')\r\n              setIframeError(true)\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Footer hint */}\r\n      {!isLoading && !error && (\r\n        <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 text-white/60 text-sm bg-black/50 px-4 py-2 rounded-full\">\r\n          Press <kbd className=\"px-2 py-1 bg-white/10 rounded mx-1\">ESC</kbd> to close\r\n          or <kbd className=\"px-2 py-1 bg-white/10 rounded mx-1\">Ctrl+D</kbd> to download\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n\r\n  // Render portal to document.body to escape backdrop-blur containing blocks\r\n  const portalTarget = typeof window !== 'undefined' ? window.document.body : null\r\n  if (!portalTarget) return null\r\n  return createPortal(modalContent, portalTarget)\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1206, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/subscription-packs/subscription-packs-client.tsx"],"sourcesContent":["'use client'\n\nimport { useMemo, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  CheckCircle2,\n  Clock,\n  DollarSign,\n  Download,\n  FileText,\n  Search,\n  Loader2,\n  Users,\n  Briefcase,\n  X,\n  Calendar,\n  Eye,\n  ChevronLeft,\n  ChevronRight,\n  ArrowUpDown,\n  ArrowUp,\n  ArrowDown,\n} from 'lucide-react'\nimport { Progress } from '@/components/ui/progress'\nimport { cn } from '@/lib/utils'\nimport { formatDate, formatCurrency } from '@/lib/format'\nimport { toast } from 'sonner'\nimport { useDocumentViewer } from '@/hooks/useDocumentViewer'\nimport { DocumentViewerFullscreen } from '@/components/documents/DocumentViewerFullscreen'\n\n// Updated type to support both lawyer and arranger personas\ntype EntityInfo = {\n  id: string\n  firm_name: string | null\n  display_name: string | null\n  specializations: string[] | null\n  is_active: boolean\n  entity_type: 'lawyer' | 'arranger'\n}\n\ntype SignedSubscription = {\n  id: string\n  deal_id: string\n  investor_id: string\n  status: string\n  commitment: number\n  currency: string\n  funded_amount: number\n  signed_at: string | null  // Actual signature date (primary)\n  committed_at: string | null\n  funded_at: string | null\n  subscription_number: number | null\n  subscription_date: string | null\n  // Additional useful fields\n  effective_date: string | null\n  funding_due_at: string | null\n  num_shares: number | null\n  price_per_share: number | null\n  pack_sent_at: string | null\n  deal_name: string\n  investor_name: string\n  document_id: string | null\n  document_file_key: string | null\n  document_file_name: string | null\n  document_mime_type: string | null\n  document_file_size: number | null\n  document_type: string | null\n}\n\ntype SubscriptionPacksClientProps = {\n  entityInfo: EntityInfo | null\n  subscriptions: SignedSubscription[]\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  committed: 'bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800',\n  partially_funded: 'bg-amber-100 text-amber-800 border-amber-200 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800',\n  funded: 'bg-emerald-100 text-emerald-800 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800',\n  active: 'bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800',\n}\n\nconst STATUS_LABELS: Record<string, string> = {\n  committed: 'Signed',\n  partially_funded: 'Partially Funded',\n  funded: 'Fully Funded',\n  active: 'Active',\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Statuses', value: 'all' },\n  { label: 'Signed (Awaiting Funding)', value: 'committed' },\n  { label: 'Partially Funded', value: 'partially_funded' },\n  { label: 'Fully Funded', value: 'funded' },\n  { label: 'Active', value: 'active' },\n]\n\n// Pagination constants\nconst ITEMS_PER_PAGE = 10\n\n// Sortable columns configuration\ntype SortColumn = 'deal_name' | 'investor_name' | 'commitment' | 'funded_amount' | 'status' | 'signed_at' | 'subscription_number'\ntype SortDirection = 'asc' | 'desc'\n\n// Using shared formatCurrency utility from @/lib/format\n// Note: The shared utility handles null/undefined values and defaults to 'USD'\n\nexport function SubscriptionPacksClient({ entityInfo, subscriptions }: SubscriptionPacksClientProps) {\n  // Existing filter states\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [downloadingId, setDownloadingId] = useState<string | null>(null)\n\n  // NEW: Additional filter states for full implementation (User Story Row 69)\n  const [investorFilter, setInvestorFilter] = useState('all')\n  const [dealFilter, setDealFilter] = useState('all')\n  const [dateRange, setDateRange] = useState<{\n    startDate: string\n    endDate: string\n  }>({ startDate: '', endDate: '' })\n\n  // Pagination state\n  const [currentPage, setCurrentPage] = useState(1)\n\n  // Sorting state\n  const [sortColumn, setSortColumn] = useState<SortColumn>('signed_at')\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc')\n\n  // Document preview functionality (same as CEO/staff documents page)\n  const {\n    isOpen: isPreviewOpen,\n    document: previewDocument,\n    previewUrl,\n    isLoading: isPreviewLoading,\n    error: previewError,\n    openPreview,\n    closePreview,\n    downloadDocument: downloadFromPreview,\n  } = useDocumentViewer()\n\n  // Compute unique investors and deals for dropdown options\n  const filterOptions = useMemo(() => {\n    const investors = new Map<string, string>()\n    const deals = new Map<string, string>()\n\n    subscriptions.forEach((sub) => {\n      if (sub.investor_id && sub.investor_name) {\n        investors.set(sub.investor_id, sub.investor_name)\n      }\n      if (sub.deal_id && sub.deal_name) {\n        deals.set(sub.deal_id, sub.deal_name)\n      }\n    })\n\n    return {\n      investors: Array.from(investors.entries())\n        .map(([id, name]) => ({ id, name }))\n        .sort((a, b) => a.name.localeCompare(b.name)),\n      deals: Array.from(deals.entries())\n        .map(([id, name]) => ({ id, name }))\n        .sort((a, b) => a.name.localeCompare(b.name))\n    }\n  }, [subscriptions])\n\n  // Calculate summary based on ALL subscriptions (not filtered) for context\n  const totalSummary = useMemo(() => {\n    const committed = subscriptions.filter(s => s.status === 'committed').length\n    const partiallyFunded = subscriptions.filter(s => s.status === 'partially_funded').length\n    const fullyFunded = subscriptions.filter(s => s.status === 'funded' || s.status === 'active').length\n\n    const totalCommitment = subscriptions.reduce((sum, s) => sum + s.commitment, 0)\n    const totalFunded = subscriptions.reduce((sum, s) => sum + s.funded_amount, 0)\n\n    return {\n      total: subscriptions.length,\n      committed,\n      partiallyFunded,\n      fullyFunded,\n      totalCommitment,\n      totalFunded,\n    }\n  }, [subscriptions])\n\n  // Updated filter logic with all filters + sorting\n  const filteredSubscriptions = useMemo(() => {\n    // First, filter\n    const filtered = subscriptions.filter(subscription => {\n      // Status filter\n      const matchesStatus = statusFilter === 'all' || subscription.status === statusFilter\n\n      // Search filter\n      const matchesSearch = !search ||\n        subscription.deal_name.toLowerCase().includes(search.toLowerCase()) ||\n        subscription.investor_name.toLowerCase().includes(search.toLowerCase())\n\n      // NEW: Investor filter\n      const matchesInvestor = investorFilter === 'all' || subscription.investor_id === investorFilter\n\n      // NEW: Deal/Opportunity filter\n      const matchesDeal = dealFilter === 'all' || subscription.deal_id === dealFilter\n\n      // Date range filter (using signed_at - the actual signature date)\n      // Convert both to YYYY-MM-DD format for consistent comparison\n      let matchesDateRange = true\n      if (subscription.signed_at) {\n        // Extract just the date portion from the ISO timestamp (YYYY-MM-DD)\n        const subDateStr = subscription.signed_at.split('T')[0]\n\n        if (dateRange.startDate) {\n          // Compare date strings directly (lexicographic comparison works for YYYY-MM-DD)\n          matchesDateRange = matchesDateRange && subDateStr >= dateRange.startDate\n        }\n        if (dateRange.endDate) {\n          matchesDateRange = matchesDateRange && subDateStr <= dateRange.endDate\n        }\n      }\n\n      return matchesStatus && matchesSearch && matchesInvestor && matchesDeal && matchesDateRange\n    })\n\n    // Then, sort\n    return [...filtered].sort((a, b) => {\n      let comparison = 0\n\n      switch (sortColumn) {\n        case 'deal_name':\n          comparison = a.deal_name.localeCompare(b.deal_name)\n          break\n        case 'investor_name':\n          comparison = a.investor_name.localeCompare(b.investor_name)\n          break\n        case 'commitment':\n          comparison = a.commitment - b.commitment\n          break\n        case 'funded_amount':\n          comparison = a.funded_amount - b.funded_amount\n          break\n        case 'status':\n          comparison = a.status.localeCompare(b.status)\n          break\n        case 'signed_at':\n          const dateA = a.signed_at ? new Date(a.signed_at).getTime() : 0\n          const dateB = b.signed_at ? new Date(b.signed_at).getTime() : 0\n          comparison = dateA - dateB\n          break\n        case 'subscription_number':\n          comparison = (a.subscription_number || 0) - (b.subscription_number || 0)\n          break\n      }\n\n      return sortDirection === 'asc' ? comparison : -comparison\n    })\n  }, [search, statusFilter, investorFilter, dealFilter, dateRange, subscriptions, sortColumn, sortDirection])\n\n  // Calculate filtered summary for context\n  const filteredSummary = useMemo(() => {\n    const committed = filteredSubscriptions.filter(s => s.status === 'committed').length\n    const partiallyFunded = filteredSubscriptions.filter(s => s.status === 'partially_funded').length\n    const fullyFunded = filteredSubscriptions.filter(s => s.status === 'funded' || s.status === 'active').length\n\n    return {\n      total: filteredSubscriptions.length,\n      committed,\n      partiallyFunded,\n      fullyFunded,\n    }\n  }, [filteredSubscriptions])\n\n  // Pagination calculations\n  const totalPages = Math.ceil(filteredSubscriptions.length / ITEMS_PER_PAGE)\n  const startIndex = (currentPage - 1) * ITEMS_PER_PAGE\n  const endIndex = Math.min(startIndex + ITEMS_PER_PAGE, filteredSubscriptions.length)\n  const paginatedSubscriptions = filteredSubscriptions.slice(startIndex, endIndex)\n\n  // Check if any advanced filters are active\n  const hasActiveFilters = investorFilter !== 'all' || dealFilter !== 'all' || dateRange.startDate || dateRange.endDate || search || statusFilter !== 'all'\n\n  // Reset page to 1 when filters change\n  const handleFilterChange = <T,>(setter: (value: T) => void, value: T) => {\n    setter(value)\n    setCurrentPage(1)\n  }\n\n  // Clear all filters\n  const clearFilters = () => {\n    setSearch('')\n    setStatusFilter('all')\n    setInvestorFilter('all')\n    setDealFilter('all')\n    setDateRange({ startDate: '', endDate: '' })\n    setCurrentPage(1)\n  }\n\n  // Handle column sort toggle\n  const handleSort = (column: SortColumn) => {\n    if (sortColumn === column) {\n      // Toggle direction if same column\n      setSortDirection(prev => prev === 'asc' ? 'desc' : 'asc')\n    } else {\n      // New column, default to descending for dates/amounts, ascending for text\n      setSortColumn(column)\n      setSortDirection(['commitment', 'funded_amount', 'signed_at'].includes(column) ? 'desc' : 'asc')\n    }\n    setCurrentPage(1) // Reset to first page on sort change\n  }\n\n  // Get sort indicator for column header\n  const SortIndicator = ({ column }: { column: SortColumn }) => {\n    if (sortColumn !== column) {\n      return <ArrowUpDown className=\"ml-1 h-4 w-4 text-muted-foreground/50\" />\n    }\n    return sortDirection === 'asc'\n      ? <ArrowUp className=\"ml-1 h-4 w-4\" />\n      : <ArrowDown className=\"ml-1 h-4 w-4\" />\n  }\n\n  const handleDownloadPdf = async (subscription: SignedSubscription) => {\n    if (!subscription.document_file_key || !subscription.document_id) {\n      toast.error('No signed document available for download')\n      return\n    }\n\n    setDownloadingId(subscription.id)\n    try {\n      // First, get the signed URL from the API\n      const response = await fetch(`/api/documents/${subscription.document_id}/download`)\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to get download link')\n      }\n\n      // Fetch the actual file from the signed URL\n      const fileResponse = await fetch(data.url)\n      if (!fileResponse.ok) {\n        throw new Error('Failed to download document file')\n      }\n\n      const blob = await fileResponse.blob()\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = subscription.document_file_name || data.fileName || `subscription-pack-${subscription.id}.pdf`\n      document.body.appendChild(a)\n      a.click()\n      window.URL.revokeObjectURL(url)\n      document.body.removeChild(a)\n\n      toast.success('Document downloaded successfully')\n    } catch (error) {\n      console.error('Download error:', error)\n      toast.error(error instanceof Error ? error.message : 'Failed to download document')\n    } finally {\n      setDownloadingId(null)\n    }\n  }\n\n  // Handle document preview (same pattern as CEO/staff documents page)\n  const handlePreview = (subscription: SignedSubscription) => {\n    if (!subscription.document_id) {\n      toast.error('No document available for preview')\n      return\n    }\n\n    // Check if it's an office document (can't be previewed)\n    const fileName = subscription.document_file_name || ''\n    const fileExt = fileName.split('.').pop()?.toLowerCase() || ''\n    const officeExtensions = ['docx', 'doc', 'xlsx', 'xls', 'pptx', 'ppt', 'odt', 'ods', 'odp']\n\n    if (officeExtensions.includes(fileExt)) {\n      toast.info('Office documents cannot be previewed. Downloading instead...')\n      handleDownloadPdf(subscription)\n      return\n    }\n\n    // Create DocumentReference for the preview hook\n    openPreview({\n      id: subscription.document_id,\n      file_name: subscription.document_file_name,\n      name: subscription.document_file_name,\n      mime_type: subscription.document_mime_type,\n      file_size_bytes: subscription.document_file_size,\n      type: subscription.document_type,\n    })\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Dynamic header based on entity type */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">Signed Subscription Packs</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {entityInfo?.entity_type === 'arranger'\n              ? `Subscription packs for mandates managed by ${entityInfo?.display_name || 'your entity'}`\n              : entityInfo\n              ? `Subscription packs for deals assigned to ${entityInfo?.display_name || entityInfo?.firm_name || 'your firm'}`\n              : 'View signed subscription packs for your deals'}\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {/* Entity type badge */}\n          {entityInfo?.entity_type && (\n            <Badge variant=\"outline\" className=\"capitalize\">\n              {entityInfo.entity_type}\n            </Badge>\n          )}\n          {/* Specializations for lawyers */}\n          {entityInfo?.entity_type === 'lawyer' && entityInfo?.specializations?.length ? (\n            entityInfo.specializations.slice(0, 2).map((spec, idx) => (\n              <Badge key={idx} variant=\"outline\" className=\"capitalize\">\n                {spec}\n              </Badge>\n            ))\n          ) : null}\n        </div>\n      </div>\n\n      {/* Summary Cards - Show filtered counts with total context when filters are active */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <FileText className=\"h-4 w-4\" />\n              Total Signed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {hasActiveFilters ? (\n                <span>{filteredSummary.total} <span className=\"text-base font-normal text-muted-foreground\">/ {totalSummary.total}</span></span>\n              ) : (\n                totalSummary.total\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {hasActiveFilters ? 'Matching filters' : 'Subscription packs signed'}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              Awaiting Funding\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">\n              {hasActiveFilters ? (\n                <span>{filteredSummary.committed} <span className=\"text-base font-normal text-muted-foreground\">/ {totalSummary.committed}</span></span>\n              ) : (\n                totalSummary.committed\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Signed, pending escrow\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <DollarSign className=\"h-4 w-4\" />\n              Partially Funded\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-amber-600\">\n              {hasActiveFilters ? (\n                <span>{filteredSummary.partiallyFunded} <span className=\"text-base font-normal text-muted-foreground\">/ {totalSummary.partiallyFunded}</span></span>\n              ) : (\n                totalSummary.partiallyFunded\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Partial escrow received\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />\n              Fully Funded\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-emerald-600\">\n              {hasActiveFilters ? (\n                <span>{filteredSummary.fullyFunded} <span className=\"text-base font-normal text-muted-foreground\">/ {totalSummary.fullyFunded}</span></span>\n              ) : (\n                totalSummary.fullyFunded\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Complete funding received\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filter Section */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          {/* Row 1: Search + Status */}\n          <div className=\"flex flex-col md:flex-row gap-4 mb-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search by deal or investor name...\"\n                  value={search}\n                  onChange={(e) => handleFilterChange(setSearch, e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <Select value={statusFilter} onValueChange={(value) => handleFilterChange(setStatusFilter, value)}>\n              <SelectTrigger className=\"w-full md:w-56\">\n                <SelectValue placeholder=\"Filter by status\" />\n              </SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((option) => (\n                  <SelectItem key={option.value} value={option.value}>\n                    {option.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Row 2: Investor + Deal + Date Range (NEW - User Story Row 69) */}\n          <div className=\"flex flex-col lg:flex-row gap-4 items-end\">\n            {/* Investor Filter */}\n            <div className=\"w-full lg:w-48\">\n              <label className=\"text-xs text-muted-foreground mb-1.5 block\">Investor</label>\n              <Select value={investorFilter} onValueChange={(value) => handleFilterChange(setInvestorFilter, value)}>\n                <SelectTrigger>\n                  <Users className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                  <SelectValue placeholder=\"All Investors\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Investors</SelectItem>\n                  {filterOptions.investors.map((inv) => (\n                    <SelectItem key={inv.id} value={inv.id}>{inv.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Deal/Opportunity Filter */}\n            <div className=\"w-full lg:w-48\">\n              <label className=\"text-xs text-muted-foreground mb-1.5 block\">Opportunity</label>\n              <Select value={dealFilter} onValueChange={(value) => handleFilterChange(setDealFilter, value)}>\n                <SelectTrigger>\n                  <Briefcase className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                  <SelectValue placeholder=\"All Opportunities\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Opportunities</SelectItem>\n                  {filterOptions.deals.map((deal) => (\n                    <SelectItem key={deal.id} value={deal.id}>{deal.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Date Range Filter */}\n            <div className=\"flex flex-col sm:flex-row items-end gap-2\">\n              <div>\n                <label className=\"text-xs text-muted-foreground mb-1.5 block flex items-center gap-1\">\n                  <Calendar className=\"h-3 w-3\" />\n                  From Date\n                </label>\n                <Input\n                  type=\"date\"\n                  value={dateRange.startDate}\n                  onChange={(e) => {\n                    setDateRange(prev => ({ ...prev, startDate: e.target.value }))\n                    setCurrentPage(1)\n                  }}\n                  className=\"w-36\"\n                />\n              </div>\n              <div>\n                <label className=\"text-xs text-muted-foreground mb-1.5 block flex items-center gap-1\">\n                  <Calendar className=\"h-3 w-3\" />\n                  To Date\n                </label>\n                <Input\n                  type=\"date\"\n                  value={dateRange.endDate}\n                  onChange={(e) => {\n                    setDateRange(prev => ({ ...prev, endDate: e.target.value }))\n                    setCurrentPage(1)\n                  }}\n                  className=\"w-36\"\n                />\n              </div>\n            </div>\n\n            {/* Clear All Filters Button */}\n            {hasActiveFilters && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={clearFilters}\n                className=\"h-10 px-3\"\n              >\n                <X className=\"h-4 w-4 mr-1\" />\n                Clear All\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Data Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Signed Subscriptions</CardTitle>\n          <CardDescription>\n            {filteredSubscriptions.length === 0\n              ? 'No subscriptions found'\n              : totalPages > 1\n              ? `Showing ${startIndex + 1}-${endIndex} of ${filteredSubscriptions.length} subscriptions`\n              : `${filteredSubscriptions.length} subscription${filteredSubscriptions.length !== 1 ? 's' : ''}`}\n            {hasActiveFilters && filteredSubscriptions.length > 0 && ` (filtered from ${subscriptions.length} total)`}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredSubscriptions.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <FileText className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">\n                {hasActiveFilters\n                  ? 'No subscriptions match your filters'\n                  : 'No signed subscription packs yet'}\n              </p>\n              {hasActiveFilters && (\n                <Button variant=\"link\" size=\"sm\" onClick={clearFilters}>\n                  Clear filters to see all subscriptions\n                </Button>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"rounded-md border\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('deal_name')}\n                      >\n                        <div className=\"flex items-center\">\n                          Deal\n                          <SortIndicator column=\"deal_name\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('investor_name')}\n                      >\n                        <div className=\"flex items-center\">\n                          Investor\n                          <SortIndicator column=\"investor_name\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('commitment')}\n                      >\n                        <div className=\"flex items-center\">\n                          Commitment\n                          <SortIndicator column=\"commitment\" />\n                        </div>\n                      </TableHead>\n                      <TableHead className=\"text-center\">\n                        Shares\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none min-w-[140px]\"\n                        onClick={() => handleSort('funded_amount')}\n                      >\n                        <div className=\"flex items-center\">\n                          Funded\n                          <SortIndicator column=\"funded_amount\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('status')}\n                      >\n                        <div className=\"flex items-center\">\n                          Status\n                          <SortIndicator column=\"status\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('subscription_number')}\n                      >\n                        <div className=\"flex items-center\">\n                          #\n                          <SortIndicator column=\"subscription_number\" />\n                        </div>\n                      </TableHead>\n                      <TableHead\n                        className=\"cursor-pointer hover:bg-muted/50 select-none\"\n                        onClick={() => handleSort('signed_at')}\n                      >\n                        <div className=\"flex items-center\">\n                          Signed Date\n                          <SortIndicator column=\"signed_at\" />\n                        </div>\n                      </TableHead>\n                      <TableHead className=\"text-right\">Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {paginatedSubscriptions.map((subscription) => {\n                      const fundingPercentage = subscription.commitment > 0\n                        ? Math.round((subscription.funded_amount / subscription.commitment) * 100)\n                        : 0\n\n                      return (\n                        <TableRow key={subscription.id}>\n                          <TableCell>\n                            <div className=\"font-medium\">{subscription.deal_name}</div>\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"font-medium\">{subscription.investor_name}</div>\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"font-medium\">\n                              {formatCurrency(subscription.commitment, subscription.currency)}\n                            </div>\n                          </TableCell>\n                          {/* Shares column */}\n                          <TableCell className=\"text-center\">\n                            {subscription.num_shares ? (\n                              <div className=\"space-y-0.5\">\n                                <div className=\"font-medium text-sm\">\n                                  {Number(subscription.num_shares).toLocaleString()}\n                                </div>\n                                {subscription.price_per_share && (\n                                  <div className=\"text-xs text-muted-foreground\">\n                                    @ {formatCurrency(Number(subscription.price_per_share), subscription.currency)}\n                                  </div>\n                                )}\n                              </div>\n                            ) : (\n                              <span className=\"text-muted-foreground text-xs\">—</span>\n                            )}\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"space-y-1.5\">\n                              <div className=\"flex items-center justify-between text-sm\">\n                                <span className=\"font-medium\">\n                                  {formatCurrency(subscription.funded_amount, subscription.currency)}\n                                </span>\n                                <span className=\"text-xs text-muted-foreground\">\n                                  {fundingPercentage}%\n                                </span>\n                              </div>\n                              <Progress\n                                value={fundingPercentage}\n                                className=\"h-1.5\"\n                              />\n                            </div>\n                          </TableCell>\n                          <TableCell>\n                            <Badge\n                              variant=\"outline\"\n                              className={cn('capitalize', STATUS_STYLES[subscription.status] || 'bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700')}\n                            >\n                              {STATUS_LABELS[subscription.status] || subscription.status.replace('_', ' ')}\n                            </Badge>\n                          </TableCell>\n                          {/* Subscription Number */}\n                          <TableCell>\n                            {subscription.subscription_number ? (\n                              <span className=\"text-sm font-mono\">{subscription.subscription_number}</span>\n                            ) : (\n                              <span className=\"text-muted-foreground text-xs\">—</span>\n                            )}\n                          </TableCell>\n                          {/* Signed Date - uses signed_at (actual signature date) */}\n                          <TableCell>\n                            <div className=\"space-y-1\">\n                              {subscription.signed_at ? (\n                                <div className=\"text-sm\">\n                                  {formatDate(subscription.signed_at)}\n                                </div>\n                              ) : (\n                                <span className=\"text-muted-foreground text-xs\">Unknown</span>\n                              )}\n                              {/* Funding due date indicator */}\n                              {subscription.funding_due_at && subscription.status !== 'active' && (\n                                <div className={cn(\n                                  \"text-xs flex items-center gap-1\",\n                                  new Date(subscription.funding_due_at) < new Date()\n                                    ? \"text-red-600 dark:text-red-400\"\n                                    : new Date(subscription.funding_due_at) < new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)\n                                    ? \"text-amber-600 dark:text-amber-400\"\n                                    : \"text-muted-foreground\"\n                                )}>\n                                  <Clock className=\"h-3 w-3\" />\n                                  Due: {formatDate(subscription.funding_due_at)}\n                                </div>\n                              )}\n                            </div>\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            {subscription.document_file_key ? (\n                              <div className=\"flex items-center justify-end gap-2\">\n                                {/* Preview Button */}\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  onClick={() => handlePreview(subscription)}\n                                  title=\"Preview document\"\n                                >\n                                  <Eye className=\"h-4 w-4\" />\n                                </Button>\n                                {/* Download Button */}\n                                <Button\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  onClick={() => handleDownloadPdf(subscription)}\n                                  disabled={downloadingId === subscription.id}\n                                  title=\"Download PDF\"\n                                >\n                                  {downloadingId === subscription.id ? (\n                                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                  ) : (\n                                    <>\n                                      <Download className=\"h-4 w-4 mr-1\" />\n                                      PDF\n                                    </>\n                                  )}\n                                </Button>\n                              </div>\n                            ) : (\n                              <span className=\"text-xs text-muted-foreground\">No document</span>\n                            )}\n                          </TableCell>\n                        </TableRow>\n                      )\n                    })}\n                  </TableBody>\n                </Table>\n              </div>\n\n              {/* Pagination Controls */}\n              {totalPages > 1 && (\n                <div className=\"flex items-center justify-between pt-2 border-t\">\n                  <p className=\"text-sm text-muted-foreground\">\n                    Showing {startIndex + 1}-{endIndex} of {filteredSubscriptions.length} subscriptions\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n                      disabled={currentPage === 1}\n                    >\n                      <ChevronLeft className=\"h-4 w-4\" />\n                      Previous\n                    </Button>\n                    <div className=\"flex items-center gap-1\">\n                      {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                        let pageNum: number\n                        if (totalPages <= 5) {\n                          pageNum = i + 1\n                        } else if (currentPage <= 3) {\n                          pageNum = i + 1\n                        } else if (currentPage >= totalPages - 2) {\n                          pageNum = totalPages - 4 + i\n                        } else {\n                          pageNum = currentPage - 2 + i\n                        }\n                        return (\n                          <Button\n                            key={pageNum}\n                            variant={currentPage === pageNum ? 'default' : 'outline'}\n                            size=\"sm\"\n                            onClick={() => setCurrentPage(pageNum)}\n                            className=\"w-8 h-8 p-0\"\n                          >\n                            {pageNum}\n                          </Button>\n                        )\n                      })}\n                    </div>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\n                      disabled={currentPage === totalPages}\n                    >\n                      Next\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Document Preview Modal */}\n      <DocumentViewerFullscreen\n        isOpen={isPreviewOpen}\n        document={previewDocument}\n        previewUrl={previewUrl}\n        isLoading={isPreviewLoading}\n        error={previewError}\n        onClose={closePreview}\n        onDownload={downloadFromPreview}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}