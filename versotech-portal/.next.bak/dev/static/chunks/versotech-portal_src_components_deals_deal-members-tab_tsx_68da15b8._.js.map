{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/deals/deal-members-tab.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { format } from 'date-fns'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow\r\n} from '@/components/ui/table'\r\nimport {\r\n  Send,\r\n  Eye,\r\n  TrendingUp,\r\n  FileSignature,\r\n  FolderOpen,\r\n  FileText,\r\n  Mail,\r\n  CheckCircle2,\r\n  Wallet,\r\n  Users,\r\n  Trash2,\r\n  MoreHorizontal,\r\n  Building2,\r\n  Briefcase,\r\n  Loader2,\r\n  UserPlus,\r\n  UserCircle,\r\n  FileCheck,\r\n  ArrowRight\r\n} from 'lucide-react'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger\r\n} from '@/components/ui/dropdown-menu'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue\r\n} from '@/components/ui/select'\r\nimport { AddParticipantModal } from './add-participant-modal'\r\n\r\n// Partner assignment types\r\ninterface PartnerAssignment {\r\n  fee_plan_id: string\r\n  fee_plan_name: string\r\n  fee_plan_status: string\r\n  is_active: boolean\r\n  created_at: string\r\n  entity_type: 'partner' | 'introducer' | 'commercial_partner'\r\n  entity_id: string\r\n  entity_name: string\r\n  entity_status: string\r\n  entity_email: string | null\r\n  fee_components: Array<{\r\n    id: string\r\n    kind: string\r\n    rate_bps: number | null\r\n    flat_amount: number | null\r\n    currency: string\r\n  }>\r\n}\r\n\r\n// Journey stages configuration - 9-stage investor journey\r\nconst JOURNEY_STAGES = [\r\n  { key: 'dispatched', label: 'Dispatched', icon: Send, field: 'dispatched_at' },\r\n  { key: 'viewed', label: 'Viewed', icon: Eye, field: 'viewed_at' },\r\n  { key: 'interest', label: 'Interest', icon: TrendingUp, field: 'interest_confirmed_at' },\r\n  { key: 'nda', label: 'NDA', icon: FileSignature, field: 'nda_signed_at' },\r\n  { key: 'data_room', label: 'Data Room', icon: FolderOpen, field: 'data_room_granted_at' },\r\n  { key: 'pack_gen', label: 'Pack Gen', icon: FileText, field: 'pack_generated_at', fromSubscription: true },\r\n  { key: 'pack_sent', label: 'Pack Sent', icon: Mail, field: 'pack_sent_at', fromSubscription: true },\r\n  { key: 'signed', label: 'Signed', icon: CheckCircle2, field: 'signed_at', fromSubscription: true },\r\n  { key: 'funded', label: 'Funded', icon: Wallet, field: 'funded_at', fromSubscription: true },\r\n] as const\r\n\r\ninterface DealMembersTabProps {\r\n  dealId: string\r\n  members: any[]\r\n  subscriptions?: any[]\r\n}\r\n\r\nfunction getCurrentStage(member: any): { stage: string; index: number } {\r\n  // Build a map of investor_id to subscription\r\n  const subscription = member.subscription || null\r\n\r\n  // Check stages in reverse order to find the latest completed\r\n  for (let i = JOURNEY_STAGES.length - 1; i >= 0; i--) {\r\n    const stage = JOURNEY_STAGES[i]\r\n    let value: string | null = null\r\n\r\n    const isFromSubscription = 'fromSubscription' in stage && stage.fromSubscription\r\n    if (isFromSubscription && subscription) {\r\n      value = subscription[stage.field]\r\n    } else if (!isFromSubscription) {\r\n      value = member[stage.field]\r\n    }\r\n\r\n    if (value) {\r\n      return { stage: stage.label, index: i }\r\n    }\r\n  }\r\n  return { stage: 'Invited', index: -1 }\r\n}\r\n\r\nfunction JourneyProgressBar({ member }: { member: any }) {\r\n  const { index: currentIndex } = getCurrentStage(member)\r\n  const subscription = member.subscription || null\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-1\">\r\n      {JOURNEY_STAGES.map((stage, idx) => {\r\n        let value: string | null = null\r\n        const isFromSubscription = 'fromSubscription' in stage && stage.fromSubscription\r\n        if (isFromSubscription && subscription) {\r\n          value = subscription[stage.field]\r\n        } else if (!isFromSubscription) {\r\n          value = member[stage.field]\r\n        }\r\n\r\n        const isCompleted = !!value\r\n        const isCurrent = idx === currentIndex\r\n\r\n        return (\r\n          <div\r\n            key={stage.key}\r\n            className={`w-6 h-6 rounded-full flex items-center justify-center text-xs transition-colors ${\r\n              isCompleted\r\n                ? 'bg-green-500/30 text-green-400 border border-green-500/50'\r\n                : isCurrent\r\n                  ? 'bg-yellow-500/30 text-yellow-400 border border-yellow-500/50'\r\n                  : 'bg-muted text-muted-foreground'\r\n            }`}\r\n            title={`${stage.label}${value ? ` - ${format(new Date(value), 'MMM d, yyyy')}` : ''}`}\r\n          >\r\n            <stage.icon className=\"h-3 w-3\" />\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DealMembersTab({ dealId, members: initialMembers, subscriptions = [] }: DealMembersTabProps) {\r\n  const router = useRouter()\r\n  const [members, setMembers] = useState(initialMembers)\r\n\r\n  // Partner assignment state\r\n  const [partnerAssignments, setPartnerAssignments] = useState<PartnerAssignment[]>([])\r\n  const [loadingAssignments, setLoadingAssignments] = useState(true)\r\n  const [assignmentsError, setAssignmentsError] = useState<string | null>(null)\r\n  const [removingId, setRemovingId] = useState<string | null>(null)\r\n\r\n  // Fee plan filter state\r\n  const [feePlanFilter, setFeePlanFilter] = useState<string>('all')\r\n\r\n  // Create subscription map for quick lookup\r\n  const subscriptionMap = new Map(\r\n    subscriptions.map(s => [s.investor_id, s])\r\n  )\r\n\r\n  const visibleMembers = members.filter(member => !['lawyer', 'arranger'].includes(member.role))\r\n  // Enhance members with subscription data\r\n  const enhancedMembers = visibleMembers.map(m => ({\r\n    ...m,\r\n    subscription: m.investor_id ? subscriptionMap.get(m.investor_id) : null\r\n  }))\r\n\r\n  // Extract unique fee plans from members for the filter dropdown\r\n  const uniqueFeePlans = enhancedMembers.reduce((acc, member) => {\r\n    const feePlan = member.assigned_fee_plan\r\n    if (feePlan && !acc.find((fp: { id: string; name: string }) => fp.id === feePlan.id)) {\r\n      acc.push({ id: feePlan.id, name: feePlan.name })\r\n    }\r\n    return acc\r\n  }, [] as { id: string; name: string }[])\r\n\r\n  // Apply fee plan filter to members\r\n  const filteredMembers = feePlanFilter === 'all'\r\n    ? enhancedMembers\r\n    : feePlanFilter === 'none'\r\n      ? enhancedMembers.filter(m => !m.assigned_fee_plan)\r\n      : enhancedMembers.filter(m => m.assigned_fee_plan?.id === feePlanFilter)\r\n\r\n  // Update local state when server data changes\r\n  useEffect(() => {\r\n    setMembers(initialMembers)\r\n  }, [initialMembers])\r\n\r\n  // Fetch partner assignments\r\n  const fetchAssignments = async () => {\r\n    setLoadingAssignments(true)\r\n    setAssignmentsError(null)\r\n    try {\r\n      const response = await fetch(`/api/deals/${dealId}/partners`)\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}))\r\n        throw new Error(errorData.error || 'Failed to load partner assignments')\r\n      }\r\n      const data = await response.json()\r\n      setPartnerAssignments(data.data || [])\r\n    } catch (err) {\r\n      console.error('Failed to fetch partner assignments:', err)\r\n      setAssignmentsError(err instanceof Error ? err.message : 'Failed to load partner assignments')\r\n    } finally {\r\n      setLoadingAssignments(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchAssignments()\r\n  }, [dealId])\r\n\r\n  const handleRemoveAssignment = async (feePlanId: string) => {\r\n    if (!confirm('Are you sure you want to remove this partner from this deal?')) {\r\n      return\r\n    }\r\n\r\n    setRemovingId(feePlanId)\r\n    try {\r\n      const response = await fetch(`/api/deals/${dealId}/partners?fee_plan_id=${feePlanId}`, {\r\n        method: 'DELETE',\r\n      })\r\n\r\n      if (response.ok) {\r\n        await fetchAssignments()\r\n        router.refresh()\r\n      } else {\r\n        const data = await response.json()\r\n        alert(data.error || 'Failed to remove partner')\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to remove partner:', err)\r\n      alert('Failed to remove partner')\r\n    } finally {\r\n      setRemovingId(null)\r\n    }\r\n  }\r\n\r\n  const getEntityIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'partner': return <Building2 className=\"h-4 w-4\" />\r\n      case 'introducer': return <Users className=\"h-4 w-4\" />\r\n      case 'commercial_partner': return <Briefcase className=\"h-4 w-4\" />\r\n      default: return <Building2 className=\"h-4 w-4\" />\r\n    }\r\n  }\r\n\r\n  const getEntityTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case 'partner': return 'Partner'\r\n      case 'introducer': return 'Introducer'\r\n      case 'commercial_partner': return 'Commercial Partner'\r\n      default: return type\r\n    }\r\n  }\r\n\r\n  const feeKindLabels: Record<string, string> = {\r\n    subscription: 'Subscription Fee',\r\n    management: 'Management Fee',\r\n    performance: 'Performance Fee',\r\n    spread_markup: 'Spread Markup',\r\n    flat: 'Flat Fee',\r\n    other: 'Other'\r\n  }\r\n\r\n  // Fee plan status styling\r\n  const feePlanStatusClasses: Record<string, string> = {\r\n    draft: 'bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300',\r\n    sent: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300',\r\n    pending_signature: 'bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300',\r\n    accepted: 'bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300',\r\n    rejected: 'bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300'\r\n  }\r\n\r\n  // Get referrer info from member's assigned_fee_plan\r\n  const getReferrerInfo = (member: any) => {\r\n    const feePlan = member.assigned_fee_plan\r\n    if (!feePlan) return null\r\n\r\n    // The referrer is the entity linked to the fee plan\r\n    if (feePlan.introducer) {\r\n      return {\r\n        type: 'Introducer',\r\n        name: feePlan.introducer.company_name || feePlan.introducer.name,\r\n        icon: Users\r\n      }\r\n    }\r\n    if (feePlan.partner) {\r\n      return {\r\n        type: 'Partner',\r\n        name: feePlan.partner.company_name || feePlan.partner.name,\r\n        icon: Building2\r\n      }\r\n    }\r\n    if (feePlan.commercial_partner) {\r\n      return {\r\n        type: 'Commercial Partner',\r\n        name: feePlan.commercial_partner.company_name || feePlan.commercial_partner.name,\r\n        icon: Briefcase\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  const refreshMembers = async () => {\r\n    try {\r\n      const response = await fetch(`/api/deals/${dealId}/members`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setMembers(data.members || [])\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to refresh members:', err)\r\n    }\r\n  }\r\n\r\n  const handleRemoveMember = async (userId: string) => {\r\n    if (!confirm('Are you sure you want to remove this member from the deal?')) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/deals/${dealId}/members/${userId}`, {\r\n        method: 'DELETE'\r\n      })\r\n\r\n      if (response.ok) {\r\n        await refreshMembers()\r\n      } else {\r\n        const data = await response.json()\r\n        alert(`Failed to remove member: ${data.error || 'Unknown error'}`)\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to remove member:', err)\r\n      alert('Failed to remove member. Please try again.')\r\n    }\r\n  }\r\n\r\n  const roleColors: Record<string, string> = {\r\n    investor: 'bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-200',\r\n    co_investor: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-200',\r\n    partner_investor: 'bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-200',\r\n    introducer_investor: 'bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-200',\r\n    commercial_partner_investor: 'bg-teal-100 dark:bg-teal-500/20 text-teal-700 dark:text-teal-200',\r\n    advisor: 'bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-200',\r\n    banker: 'bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-200',\r\n    introducer: 'bg-pink-100 dark:bg-pink-500/20 text-pink-700 dark:text-pink-200',\r\n    verso_staff: 'bg-muted text-muted-foreground',\r\n    viewer: 'bg-muted text-muted-foreground'\r\n  }\r\n\r\n  // Calculate journey stats\r\n  const stats = {\r\n    total: enhancedMembers.length,\r\n    dispatched: enhancedMembers.filter(m => m.dispatched_at).length,\r\n    viewed: enhancedMembers.filter(m => m.viewed_at).length,\r\n    interested: enhancedMembers.filter(m => m.interest_confirmed_at).length,\r\n    ndaSigned: enhancedMembers.filter(m => m.nda_signed_at).length,\r\n    dataRoom: enhancedMembers.filter(m => m.data_room_granted_at).length,\r\n    packGen: enhancedMembers.filter(m => m.subscription?.pack_generated_at).length,\r\n    packSent: enhancedMembers.filter(m => m.subscription?.pack_sent_at).length,\r\n    signed: enhancedMembers.filter(m => m.subscription?.signed_at).length,\r\n    funded: enhancedMembers.filter(m => m.subscription?.funded_at).length,\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Journey Funnel Summary */}\r\n      <Card className=\"border border-border bg-muted/50\">\r\n        <CardHeader className=\"pb-3\">\r\n          <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\r\n            <TrendingUp className=\"h-4 w-4\" />\r\n            Investor Journey Funnel\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"flex items-center gap-2 overflow-x-auto pb-2\">\r\n            {[\r\n              { label: 'Dispatched', count: stats.dispatched },\r\n              { label: 'Viewed', count: stats.viewed },\r\n              { label: 'Interested', count: stats.interested },\r\n              { label: 'NDA', count: stats.ndaSigned },\r\n              { label: 'Data Room', count: stats.dataRoom },\r\n              { label: 'Pack Gen', count: stats.packGen },\r\n              { label: 'Pack Sent', count: stats.packSent },\r\n              { label: 'Signed', count: stats.signed },\r\n              { label: 'Funded', count: stats.funded },\r\n            ].map((stage, idx) => (\r\n              <div key={stage.label} className=\"flex items-center\">\r\n                <div className=\"text-center min-w-[70px]\">\r\n                  <div className=\"text-xl font-bold\">{stage.count}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">{stage.label}</div>\r\n                </div>\r\n                {idx < 8 && (\r\n                  <div className=\"mx-1 text-muted-foreground\">→</div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* All Participants Header */}\r\n      <Card className=\"border border-border bg-muted/50\">\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <CardTitle className=\"text-foreground flex items-center gap-2\">\r\n                <Users className=\"h-5 w-5\" />\r\n                Deal Participants ({enhancedMembers.length + partnerAssignments.length})\r\n              </CardTitle>\r\n              <CardDescription>\r\n                Investors, partners, introducers, and other participants in this deal\r\n              </CardDescription>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <AddParticipantModal\r\n                dealId={dealId}\r\n                onParticipantAdded={() => {\r\n                  refreshMembers()\r\n                  fetchAssignments()\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-6\">\r\n          {/* Investors Section */}\r\n          <div>\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <h3 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                <UserCircle className=\"h-4 w-4\" />\r\n                Investors ({filteredMembers.length}{feePlanFilter !== 'all' ? ` of ${enhancedMembers.length}` : ''})\r\n              </h3>\r\n              {/* Fee Plan Filter Dropdown */}\r\n              {uniqueFeePlans.length > 0 && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-xs text-muted-foreground\">Filter by Fee Plan:</span>\r\n                  <Select value={feePlanFilter} onValueChange={setFeePlanFilter}>\r\n                    <SelectTrigger className=\"w-[200px] h-8 text-sm\">\r\n                      <SelectValue placeholder=\"All Fee Plans\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Fee Plans</SelectItem>\r\n                      <SelectItem value=\"none\">No Fee Plan (Direct)</SelectItem>\r\n                      {uniqueFeePlans.map((fp: { id: string; name: string }) => (\r\n                        <SelectItem key={fp.id} value={fp.id}>\r\n                          {fp.name}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              )}\r\n            </div>\r\n          {filteredMembers.length === 0 ? (\r\n            <div className=\"text-center py-6 text-muted-foreground border border-dashed border-border rounded-lg\">\r\n              {feePlanFilter !== 'all'\r\n                ? 'No investors match the selected fee plan filter.'\r\n                : 'No investors added yet. Click \"Add Participant\" to invite investors.'}\r\n            </div>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>Member</TableHead>\r\n                  <TableHead>Role</TableHead>\r\n                  <TableHead>Referred By</TableHead>\r\n                  <TableHead>Fee Plan</TableHead>\r\n                  <TableHead>Journey Progress</TableHead>\r\n                  <TableHead>Current Stage</TableHead>\r\n                  <TableHead className=\"text-right\">Actions</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {filteredMembers.map((member) => {\r\n                  const profile = Array.isArray(member.profiles) ? member.profiles[0] : member.profiles\r\n                  const investor = Array.isArray(member.investors) ? member.investors[0] : member.investors\r\n                  const { stage } = getCurrentStage(member)\r\n                  const referrer = getReferrerInfo(member)\r\n                  const feePlan = member.assigned_fee_plan\r\n\r\n                  return (\r\n                    <TableRow key={member.user_id}>\r\n                      <TableCell>\r\n                        <div>\r\n                          <div className=\"font-medium\">\r\n                            {investor?.legal_name || profile?.display_name || 'Unknown'}\r\n                          </div>\r\n                          <div className=\"text-sm text-muted-foreground\">\r\n                            {profile?.email}\r\n                          </div>\r\n                          {investor?.kyc_status && (\r\n                            <Badge\r\n                              variant=\"outline\"\r\n                              className={`text-xs mt-1 ${\r\n                                investor.kyc_status === 'approved'\r\n                                  ? 'bg-green-500/20 text-green-400'\r\n                                  : investor.kyc_status === 'pending'\r\n                                    ? 'bg-yellow-500/20 text-yellow-400'\r\n                                    : ''\r\n                              }`}\r\n                            >\r\n                              KYC: {investor.kyc_status}\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Badge className={roleColors[member.role] || 'bg-muted text-foreground'}>\r\n                          {member.role?.replace(/_/g, ' ')}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {referrer ? (\r\n                          <div className=\"flex items-center gap-1.5 text-sm\">\r\n                            <referrer.icon className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                            <span className=\"text-muted-foreground\">{referrer.name}</span>\r\n                          </div>\r\n                        ) : (\r\n                          <span className=\"text-xs text-muted-foreground/60\">Direct</span>\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {feePlan ? (\r\n                          <div className=\"flex flex-col gap-1\">\r\n                            <span className=\"text-sm\">{feePlan.name}</span>\r\n                            <Badge className={`text-[10px] w-fit ${feePlanStatusClasses[feePlan.status] || 'bg-muted text-muted-foreground'}`}>\r\n                              {feePlan.status}\r\n                            </Badge>\r\n                          </div>\r\n                        ) : (\r\n                          <span className=\"text-xs text-muted-foreground/60\">—</span>\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <JourneyProgressBar member={member} />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Badge variant=\"outline\">{stage}</Badge>\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right\">\r\n                        <DropdownMenu>\r\n                          <DropdownMenuTrigger asChild>\r\n                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                              <MoreHorizontal className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </DropdownMenuTrigger>\r\n                          <DropdownMenuContent align=\"end\">\r\n                            <DropdownMenuLabel>Actions</DropdownMenuLabel>\r\n                            <DropdownMenuSeparator />\r\n                            {investor && (\r\n                              <DropdownMenuItem asChild>\r\n                                <a href={`/versotech_main/investors/${investor.id}`}>\r\n                                  <Eye className=\"mr-2 h-4 w-4\" />\r\n                                  View Investor\r\n                                </a>\r\n                              </DropdownMenuItem>\r\n                            )}\r\n                            {profile?.email && (\r\n                              <DropdownMenuItem onClick={() => window.location.href = `mailto:${profile.email}`}>\r\n                                <Mail className=\"mr-2 h-4 w-4\" />\r\n                                Send Email\r\n                              </DropdownMenuItem>\r\n                            )}\r\n                            <DropdownMenuSeparator />\r\n                            <DropdownMenuItem\r\n                              className=\"text-red-400\"\r\n                              onClick={() => handleRemoveMember(member.user_id)}\r\n                            >\r\n                              <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                              Remove Member\r\n                            </DropdownMenuItem>\r\n                          </DropdownMenuContent>\r\n                        </DropdownMenu>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  )\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n          </div>\r\n\r\n          {/* Partners & Intermediaries Section */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-muted-foreground mb-3 flex items-center gap-2\">\r\n              <UserPlus className=\"h-4 w-4\" />\r\n              Partners & Intermediaries ({partnerAssignments.length})\r\n            </h3>\r\n            {loadingAssignments ? (\r\n              <div className=\"flex items-center justify-center py-6\">\r\n                <Loader2 className=\"h-5 w-5 animate-spin text-muted-foreground\" />\r\n              </div>\r\n            ) : assignmentsError ? (\r\n              <div className=\"text-center py-6 text-red-400 border border-dashed border-red-500/20 rounded-lg bg-red-500/5\">\r\n                {assignmentsError}\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={fetchAssignments}\r\n                  className=\"ml-2 text-red-400 hover:text-red-300\"\r\n                >\r\n                  Retry\r\n                </Button>\r\n              </div>\r\n            ) : partnerAssignments.length === 0 ? (\r\n              <div className=\"text-center py-6 text-muted-foreground border border-dashed border-border rounded-lg\">\r\n                No partners assigned yet. Click \"Add Participant\" to add partners, introducers, or commercial partners.\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n                {partnerAssignments.map((assignment) => (\r\n                  <div\r\n                    key={assignment.fee_plan_id}\r\n                    className=\"p-3 rounded-lg border border-border bg-muted/50\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                          {getEntityIcon(assignment.entity_type)}\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-medium text-sm\">{assignment.entity_name}</div>\r\n                          <div className=\"flex items-center gap-2 mt-1\">\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              {getEntityTypeLabel(assignment.entity_type)}\r\n                            </Badge>\r\n                          </div>\r\n                          <div className=\"text-xs text-muted-foreground mt-1\">\r\n                            {assignment.fee_components.length > 0 ? (\r\n                              assignment.fee_components.map((fc) => (\r\n                                <span key={fc.id} className=\"mr-2\">\r\n                                  {feeKindLabels[fc.kind] || fc.kind}: {fc.rate_bps !== null && fc.rate_bps !== undefined ? `${fc.rate_bps / 100}%` : fc.flat_amount !== null && fc.flat_amount !== undefined ? `$${fc.flat_amount}` : '—'}\r\n                                </span>\r\n                              ))\r\n                            ) : (\r\n                              <span className=\"italic\">No fees defined</span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => handleRemoveAssignment(assignment.fee_plan_id)}\r\n                        disabled={removingId === assignment.fee_plan_id}\r\n                        className=\"text-destructive hover:text-destructive h-7 w-7\"\r\n                      >\r\n                        {removingId === assignment.fee_plan_id ? (\r\n                          <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n                        ) : (\r\n                          <Trash2 className=\"h-3 w-3\" />\r\n                        )}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}