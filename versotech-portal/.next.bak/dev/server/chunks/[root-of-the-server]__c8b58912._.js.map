{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { createClient as createSupabaseClient } from '@supabase/supabase-js'\nimport { cookies } from 'next/headers'\n\nexport const createClient = async () => {\n  const cookieStore = await cookies()\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) => {\n              cookieStore.set(name, value, options)\n            })\n          } catch (error) {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n}\n\n// Server client with service role for admin operations\n// Uses raw supabase-js client which properly bypasses RLS with service role\nexport const createServiceClient = () => {\n  return createSupabaseClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.SUPABASE_SERVICE_ROLE_KEY!,\n    {\n      auth: {\n        autoRefreshToken: false,\n        persistSession: false,\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AACA;;;;AAEO,MAAM,eAAe;IAC1B,MAAM,cAAc,MAAM,IAAA,mKAAO;IAEjC,OAAO,IAAA,wNAAkB,sUAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;wBAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;oBAC/B;gBACF,EAAE,OAAO,OAAO;gBACd,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ;AAIO,MAAM,sBAAsB;IACjC,OAAO,IAAA,gOAAoB,gFAEzB,QAAQ,GAAG,CAAC,yBAAyB,EACrC;QACE,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;IACF;AAEJ"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/api/staff/fees/projected/route.ts"],"sourcesContent":["/**\n * Projected Fees API Route\n * GET /api/staff/fees/projected - Calculate projected annual fees from active subscriptions\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@/lib/supabase/server';\n\nexport async function GET(request: NextRequest) {\n  try {\n    const supabase = await createClient();\n\n    // Check auth\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n    }\n\n    // Fetch ALL subscriptions with ALL fee fields\n    const { data: subscriptions, error } = await supabase\n      .from('subscriptions')\n      .select(\n        `\n        id,\n        commitment,\n        current_nav,\n        status,\n        vehicle_id,\n        subscription_fee_percent,\n        subscription_fee_amount,\n        spread_fee_amount,\n        bd_fee_percent,\n        bd_fee_amount,\n        finra_fee_amount,\n        performance_fee_tier1_percent,\n        performance_fee_tier1_threshold,\n        performance_fee_tier2_percent,\n        performance_fee_tier2_threshold,\n        price_per_share,\n        cost_per_share,\n        num_shares,\n        spread_per_share,\n        management_fee_percent,\n        management_fee_amount,\n        management_fee_frequency,\n        investor:investors(id, display_name)\n      `\n      );\n\n    if (error) {\n      console.error('Error fetching subscriptions:', error);\n      return NextResponse.json(\n        { error: 'Failed to fetch subscriptions' },\n        { status: 500 }\n      );\n    }\n\n    // Fetch active fee schedules with their components\n    const { data: feeSchedules, error: schedError } = await supabase\n      .from('fee_schedules')\n      .select(\n        `\n        id,\n        investor_id,\n        fee_component_id,\n        start_date,\n        end_date,\n        status,\n        fee_components(\n          id,\n          kind,\n          rate_bps,\n          flat_amount,\n          frequency\n        )\n      `\n      )\n      .eq('status', 'active');\n\n    if (schedError) {\n      console.error('Error fetching fee schedules:', schedError);\n    }\n\n    // Fetch vehicles\n    const { data: vehicles } = await supabase\n      .from('vehicles')\n      .select('id, name');\n\n    const vehiclesMap = new Map(vehicles?.map((v) => [v.id, v]) || []);\n\n    // Fee totals by type\n    let totalSubscriptionFees = 0;\n    let totalSpreadFees = 0;\n    let totalBDFees = 0;\n    let totalFINRAFees = 0;\n    let totalPerformanceFees = 0;\n    let totalManagementFees = 0;\n    let totalAllFees = 0;\n    let totalCommittedCapital = 0;\n    let totalCurrentNAV = 0;\n    const totalSubscriptions = subscriptions?.length || 0;\n    let totalUnrealizedGains = 0;\n\n    // Fee breakdown by type\n    interface FeeBreakdown {\n      subscription_fees: number;\n      spread_fees: number;\n      bd_fees: number;\n      finra_fees: number;\n      performance_fees: number;\n      management_fees: number;\n      total_fees: number;\n      unrealized_gains: number;\n    }\n\n    // Group by status\n    const statusGroups = new Map<string, FeeBreakdown & {\n      committed_capital: number;\n      current_nav: number;\n      subscription_count: number;\n    }>();\n\n    // Group by vehicle\n    interface VehicleGroup {\n      vehicle_id: string;\n      vehicle_name: string;\n      fees: FeeBreakdown;\n      committed_capital: number;\n      current_nav: number;\n      subscription_count: number;\n      by_status: Map<string, FeeBreakdown & {\n        committed_capital: number;\n        current_nav: number;\n        subscription_count: number;\n      }>;\n    }\n\n    const vehicleGroups = new Map<string, VehicleGroup>();\n\n    // Process each subscription\n    for (const sub of subscriptions || []) {\n      const commitment = sub.commitment || 0;\n      const nav = sub.current_nav || 0;\n      const status = sub.status || 'unknown';\n      const vehicleId = sub.vehicle_id;\n\n      // Calculate all fee types\n\n      // 1. Subscription Fee (can be percent or fixed amount)\n      let subscriptionFee = 0;\n      if (sub.subscription_fee_amount) {\n        subscriptionFee = sub.subscription_fee_amount;\n      } else if (sub.subscription_fee_percent) {\n        subscriptionFee = commitment * (sub.subscription_fee_percent / 100);\n      }\n\n      // 2. Spread Fee (fixed amount)\n      const spreadFee = sub.spread_fee_amount || 0;\n\n      // 3. BD Fee (can be percent or fixed amount)\n      let bdFee = 0;\n      if (sub.bd_fee_amount) {\n        bdFee = sub.bd_fee_amount;\n      } else if (sub.bd_fee_percent) {\n        bdFee = commitment * (sub.bd_fee_percent / 100);\n      }\n\n      // 4. FINRA Fee (fixed amount)\n      const finraFee = sub.finra_fee_amount || 0;\n\n      // 5. Performance Fee (tiered based on returns)\n      let performanceFee = 0;\n      if (nav > 0 && commitment > 0) {\n        const returns = nav - commitment;\n        if (returns > 0) {\n          const tier1Threshold = sub.performance_fee_tier1_threshold || 0;\n          const tier2Threshold = sub.performance_fee_tier2_threshold || 0;\n          const tier1Percent = sub.performance_fee_tier1_percent || 0;\n          const tier2Percent = sub.performance_fee_tier2_percent || 0;\n\n          if (tier2Percent > 0 && returns > tier2Threshold) {\n            performanceFee = returns * (tier2Percent / 100);\n          } else if (tier1Percent > 0 && returns > tier1Threshold) {\n            performanceFee = returns * (tier1Percent / 100);\n          }\n        }\n      }\n\n      // 6. Management Fee (can be percent or fixed amount, recurring)\n      // Management fees are calculated on an annual basis here for projection\n      let managementFee = 0;\n      if (sub.management_fee_amount) {\n        // Fixed management fee amount (annualized if needed based on frequency)\n        const frequency = sub.management_fee_frequency || 'annual';\n        if (frequency === 'monthly') {\n          managementFee = sub.management_fee_amount * 12;\n        } else if (frequency === 'quarterly') {\n          managementFee = sub.management_fee_amount * 4;\n        } else {\n          managementFee = sub.management_fee_amount; // annual\n        }\n      } else if (sub.management_fee_percent) {\n        // Percentage-based management fee (on committed capital)\n        managementFee = commitment * (sub.management_fee_percent / 100);\n      }\n\n      // 7. Unrealized Gains (price_per_share - cost_per_share) Ã— num_shares\n      let unrealizedGain = 0;\n      const pricePerShare = sub.price_per_share || 0;\n      const costPerShare = sub.cost_per_share || 0;\n      const numShares = sub.num_shares || 0;\n\n      if (numShares > 0 && (pricePerShare > 0 || costPerShare > 0)) {\n        unrealizedGain = (pricePerShare - costPerShare) * numShares;\n      }\n\n      const totalFees = subscriptionFee + spreadFee + bdFee + finraFee + performanceFee + managementFee;\n\n      // Update grand totals\n      totalSubscriptionFees += subscriptionFee;\n      totalSpreadFees += spreadFee;\n      totalBDFees += bdFee;\n      totalFINRAFees += finraFee;\n      totalPerformanceFees += performanceFee;\n      totalManagementFees += managementFee;\n      totalAllFees += totalFees;\n      totalCommittedCapital += commitment;\n      totalCurrentNAV += nav;\n      totalUnrealizedGains += unrealizedGain;\n\n      // Update status groups\n      if (!statusGroups.has(status)) {\n        statusGroups.set(status, {\n          subscription_fees: 0,\n          spread_fees: 0,\n          bd_fees: 0,\n          finra_fees: 0,\n          performance_fees: 0,\n          management_fees: 0,\n          total_fees: 0,\n          unrealized_gains: 0,\n          committed_capital: 0,\n          current_nav: 0,\n          subscription_count: 0,\n        });\n      }\n      const statusGroup = statusGroups.get(status)!;\n      statusGroup.subscription_fees += subscriptionFee;\n      statusGroup.spread_fees += spreadFee;\n      statusGroup.bd_fees += bdFee;\n      statusGroup.finra_fees += finraFee;\n      statusGroup.performance_fees += performanceFee;\n      statusGroup.management_fees += managementFee;\n      statusGroup.total_fees += totalFees;\n      statusGroup.unrealized_gains += unrealizedGain;\n      statusGroup.committed_capital += commitment;\n      statusGroup.current_nav += nav;\n      statusGroup.subscription_count += 1;\n\n      // Update vehicle groups\n      const vehicle = vehiclesMap.get(vehicleId);\n      const vehicleName = vehicle?.name || 'Unknown Vehicle';\n\n      if (!vehicleGroups.has(vehicleId)) {\n        vehicleGroups.set(vehicleId, {\n          vehicle_id: vehicleId,\n          vehicle_name: vehicleName,\n          fees: {\n            subscription_fees: 0,\n            spread_fees: 0,\n            bd_fees: 0,\n            finra_fees: 0,\n            performance_fees: 0,\n            management_fees: 0,\n            total_fees: 0,\n            unrealized_gains: 0,\n          },\n          committed_capital: 0,\n          current_nav: 0,\n          subscription_count: 0,\n          by_status: new Map(),\n        });\n      }\n\n      const vehicleGroup = vehicleGroups.get(vehicleId)!;\n      vehicleGroup.fees.subscription_fees += subscriptionFee;\n      vehicleGroup.fees.spread_fees += spreadFee;\n      vehicleGroup.fees.bd_fees += bdFee;\n      vehicleGroup.fees.finra_fees += finraFee;\n      vehicleGroup.fees.performance_fees += performanceFee;\n      vehicleGroup.fees.management_fees += managementFee;\n      vehicleGroup.fees.total_fees += totalFees;\n      vehicleGroup.fees.unrealized_gains += unrealizedGain;\n      vehicleGroup.committed_capital += commitment;\n      vehicleGroup.current_nav += nav;\n      vehicleGroup.subscription_count += 1;\n\n      // Update status within vehicle\n      if (!vehicleGroup.by_status.has(status)) {\n        vehicleGroup.by_status.set(status, {\n          subscription_fees: 0,\n          spread_fees: 0,\n          bd_fees: 0,\n          finra_fees: 0,\n          performance_fees: 0,\n          management_fees: 0,\n          total_fees: 0,\n          unrealized_gains: 0,\n          committed_capital: 0,\n          current_nav: 0,\n          subscription_count: 0,\n        });\n      }\n      const vehicleStatus = vehicleGroup.by_status.get(status)!;\n      vehicleStatus.subscription_fees += subscriptionFee;\n      vehicleStatus.spread_fees += spreadFee;\n      vehicleStatus.bd_fees += bdFee;\n      vehicleStatus.finra_fees += finraFee;\n      vehicleStatus.performance_fees += performanceFee;\n      vehicleStatus.management_fees += managementFee;\n      vehicleStatus.total_fees += totalFees;\n      vehicleStatus.unrealized_gains += unrealizedGain;\n      vehicleStatus.committed_capital += commitment;\n      vehicleStatus.current_nav += nav;\n      vehicleStatus.subscription_count += 1;\n    }\n\n    // Convert to arrays\n    const byStatus = Array.from(statusGroups.entries())\n      .map(([status, data]) => ({\n        status,\n        ...data,\n      }))\n      .sort((a, b) => b.total_fees - a.total_fees);\n\n    const byVehicle = Array.from(vehicleGroups.values())\n      .map((vehicle) => ({\n        vehicle_id: vehicle.vehicle_id,\n        vehicle_name: vehicle.vehicle_name,\n        fees: vehicle.fees,\n        committed_capital: vehicle.committed_capital,\n        current_nav: vehicle.current_nav,\n        subscription_count: vehicle.subscription_count,\n        by_status: Array.from(vehicle.by_status.entries()).map(([status, data]) => ({\n          status,\n          ...data,\n        })),\n      }))\n      .sort((a, b) => b.fees.total_fees - a.fees.total_fees);\n\n    return NextResponse.json({\n      data: {\n        totals: {\n          subscription_fees: totalSubscriptionFees,\n          spread_fees: totalSpreadFees,\n          bd_fees: totalBDFees,\n          finra_fees: totalFINRAFees,\n          performance_fees: totalPerformanceFees,\n          management_fees: totalManagementFees,\n          total_fees: totalAllFees, // Match FeeBreakdown interface\n          unrealized_gains: totalUnrealizedGains,\n          committed_capital: totalCommittedCapital,\n          current_nav: totalCurrentNAV,\n          total_subscriptions: totalSubscriptions,\n        },\n        by_status: byStatus,\n        by_vehicle: byVehicle,\n      },\n    });\n  } catch (error) {\n    console.error('Unexpected error in GET /api/staff/fees/projected:', error);\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":"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"}}]
}