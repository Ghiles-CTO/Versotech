{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/deals/create-deal-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CreateDealForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call CreateDealForm() from the server but CreateDealForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/versotech-portal/src/components/deals/create-deal-form.tsx <module evaluation>\",\n    \"CreateDealForm\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,iBAAiB,IAAA,+RAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,4FACA","ignoreList":[0]}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/deals/create-deal-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CreateDealForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call CreateDealForm() from the server but CreateDealForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/versotech-portal/src/components/deals/create-deal-form.tsx\",\n    \"CreateDealForm\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,iBAAiB,IAAA,+RAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,wEACA","ignoreList":[0]}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/deals/new/page.tsx"],"sourcesContent":["import { createClient, createServiceClient } from '@/lib/supabase/server'\r\nimport { redirect } from 'next/navigation'\r\nimport { CreateDealForm } from '@/components/deals/create-deal-form'\r\nimport { AlertCircle } from 'lucide-react'\r\nimport { checkStaffAccess } from '@/lib/auth'\r\n\r\nexport const dynamic = 'force-dynamic'\r\nexport const revalidate = 0\r\n\r\n/**\r\n * Deal Creation Page for Unified Portal (versotech_main)\r\n *\r\n * Persona-aware access:\r\n * - Staff/CEO personas: Full access to create deals\r\n * - Other personas: Access denied\r\n */\r\nexport default async function CreateDealPage() {\r\n  const clientSupabase = await createClient()\r\n  const { data: { user }, error: userError } = await clientSupabase.auth.getUser()\r\n\r\n  if (!user || userError) {\r\n    redirect('/versotech_main/login')\r\n  }\r\n\r\n  // Check if user has staff persona for access\r\n  const hasStaffAccess = await checkStaffAccess(user.id)\r\n  const serviceClient = createServiceClient()\r\n\r\n  if (!hasStaffAccess) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"text-center py-16\">\r\n          <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n            Access Restricted\r\n          </h3>\r\n          <p className=\"text-muted-foreground\">\r\n            Deal creation is only available to staff members.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Fetch entities for dropdown (include arranger_entity_id for auto-population)\r\n  const { data: entities } = await serviceClient\r\n    .from('vehicles')\r\n    .select('id, name, type, currency, legal_jurisdiction, formation_date, logo_url, website_url, arranger_entity_id')\r\n    .order('name')\r\n\r\n  // Fetch active arranger entities for assignment\r\n  // Note: arranger_entities has no 'company_name' - use legal_name only\r\n  const { data: arrangerEntities } = await serviceClient\r\n    .from('arranger_entities')\r\n    .select('id, legal_name')\r\n    .eq('status', 'active')\r\n    .order('legal_name')\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-5xl mx-auto\">\r\n      <CreateDealForm\r\n        entities={entities || []}\r\n        arrangerEntities={arrangerEntities || []}\r\n        basePath=\"/versotech_main\"\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,UAAU;AAChB,MAAM,aAAa;AASX,eAAe;IAC5B,MAAM,iBAAiB,MAAM,IAAA,uKAAY;IACzC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,eAAe,IAAI,CAAC,OAAO;IAE9E,IAAI,CAAC,QAAQ,WAAW;QACtB,IAAA,wNAAQ,EAAC;IACX;IAEA,6CAA6C;IAC7C,MAAM,iBAAiB,MAAM,IAAA,6JAAgB,EAAC,KAAK,EAAE;IACrD,MAAM,gBAAgB,IAAA,8KAAmB;IAEzC,IAAI,CAAC,gBAAgB;QACnB,qBACE,qQAAC;YAAI,WAAU;sBACb,cAAA,qQAAC;gBAAI,WAAU;;kCACb,qQAAC,0PAAW;wBAAC,WAAU;;;;;;kCACvB,qQAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,qQAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAM7C;IAEA,+EAA+E;IAC/E,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,cAC9B,IAAI,CAAC,YACL,MAAM,CAAC,2GACP,KAAK,CAAC;IAET,gDAAgD;IAChD,sEAAsE;IACtE,MAAM,EAAE,MAAM,gBAAgB,EAAE,GAAG,MAAM,cACtC,IAAI,CAAC,qBACL,MAAM,CAAC,kBACP,EAAE,CAAC,UAAU,UACb,KAAK,CAAC;IAET,qBACE,qQAAC;QAAI,WAAU;kBACb,cAAA,qQAAC,8LAAc;YACb,UAAU,YAAY,EAAE;YACxB,kBAAkB,oBAAoB,EAAE;YACxC,UAAS;;;;;;;;;;;AAIjB"}}]
}