{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,qQAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,qQAAC;YACC,aAAU;YACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,6EAA6E;QAC7E,+JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,6EAA6E;QAC7E,2GACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/format.ts"],"sourcesContent":["export const formatCurrency = (value: number | null | undefined, currency: string = 'USD') => {\n  if (!value) return '$0'\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency,\n    maximumFractionDigits: 0,\n  }).format(value)\n}\n\nexport const formatBps = (bps: number | null | undefined) => {\n  if (bps === null || bps === undefined) return '—'\n  return `${bps} bps`\n}\n\nexport const formatPercentage = (value: number | null | undefined) => {\n  if (!value) return '0%'\n  return `${(value * 100).toFixed(1)}%`\n}\n\nexport const formatDate = (value: string | Date | null | undefined) => {\n  if (!value) return '—'\n  const date = typeof value === 'string' ? new Date(value) : value\n  if (Number.isNaN(date?.getTime?.())) return '—'\n  // Use explicit locale to prevent hydration mismatch between server/client\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  })\n}\n\n\n\n\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,iBAAiB,CAAC,OAAkC,WAAmB,KAAK;IACvF,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,YAAY,CAAC;IACxB,IAAI,QAAQ,QAAQ,QAAQ,WAAW,OAAO;IAC9C,OAAO,GAAG,IAAI,IAAI,CAAC;AACrB;AAEO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AACvC;AAEO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,OAAO,OAAO,UAAU,WAAW,IAAI,KAAK,SAAS;IAC3D,IAAI,OAAO,KAAK,CAAC,MAAM,cAAc,OAAO;IAC5C,0EAA0E;IAC1E,OAAO,KAAK,kBAAkB,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF"}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/placement-agreements/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { Button } from '@/components/ui/button'\nimport {\n  FileText,\n  Clock,\n  CheckCircle2,\n  Search,\n  Loader2,\n  AlertCircle,\n  FileSignature,\n  Calendar,\n  Globe,\n  Percent,\n  AlertTriangle,\n  Building2,\n  PenTool,\n  ExternalLink,\n  ThumbsUp,\n  ThumbsDown,\n  Eye,\n} from 'lucide-react'\nimport { toast } from 'sonner'\nimport { cn } from '@/lib/utils'\nimport { formatDate } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\n\ntype Agreement = {\n  id: string\n  agreement_type: string\n  signed_date: string | null\n  effective_date: string | null\n  expiry_date: string | null\n  default_commission_bps: number\n  commission_cap_amount: number | null\n  payment_terms: string | null\n  territory: string | null\n  deal_types: string[] | null\n  exclusivity_level: string | null\n  status: string\n  created_at: string\n  signature_token: string | null // For pending signature requests\n  signature_status: string | null\n}\n\ntype CommercialPartnerInfo = {\n  id: string\n  name: string\n  legal_name: string | null\n  type: string | null\n  status: string\n  logo_url: string | null\n}\n\ntype Summary = {\n  totalAgreements: number\n  activeAgreements: number\n  pendingAgreements: number\n  expiringSoon: number\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 border-green-200',\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  pending_approval: 'bg-blue-100 text-blue-800 border-blue-200',\n  pending_cp_signature: 'bg-amber-100 text-amber-800 border-amber-200',\n  expired: 'bg-red-100 text-red-800 border-red-200',\n  draft: 'bg-gray-100 text-gray-800 border-gray-200',\n  terminated: 'bg-red-100 text-red-800 border-red-200',\n  approved: 'bg-green-100 text-green-800 border-green-200',\n  rejected: 'bg-red-100 text-red-800 border-red-200',\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Status', value: 'all' },\n  { label: 'Active', value: 'active' },\n  { label: 'Pending Approval', value: 'pending_approval' },\n  { label: 'Pending', value: 'pending' },\n  { label: 'Expired', value: 'expired' },\n  { label: 'Draft', value: 'draft' },\n]\n\nconst AGREEMENT_TYPE_LABELS: Record<string, string> = {\n  placement: 'Placement Agreement',\n  distribution: 'Distribution Agreement',\n  advisory: 'Advisory Agreement',\n  white_label: 'White Label Agreement',\n}\n\nexport default function PlacementAgreementsPage() {\n  const [partnerInfo, setPartnerInfo] = useState<CommercialPartnerInfo | null>(null)\n  const [agreements, setAgreements] = useState<Agreement[]>([])\n  const [summary, setSummary] = useState<Summary>({\n    totalAgreements: 0,\n    activeAgreements: 0,\n    pendingAgreements: 0,\n    expiringSoon: 0,\n  })\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [actionLoading, setActionLoading] = useState<string | null>(null)\n\n  // Handle approve agreement\n  const handleApprove = async (agreementId: string) => {\n    setActionLoading(agreementId)\n    try {\n      const response = await fetch(`/api/placement-agreements/${agreementId}/approve`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ action: 'approve' }),\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to approve agreement')\n      }\n\n      // Update local state\n      setAgreements(prev => prev.map(a =>\n        a.id === agreementId ? { ...a, status: 'approved' } : a\n      ))\n      toast.success('Agreement approved successfully')\n    } catch (err) {\n      console.error('Error approving agreement:', err)\n      toast.error(err instanceof Error ? err.message : 'Failed to approve agreement')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  // Handle reject agreement\n  const handleReject = async (agreementId: string) => {\n    setActionLoading(agreementId)\n    try {\n      const response = await fetch(`/api/placement-agreements/${agreementId}/approve`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ action: 'reject' }),\n      })\n\n      if (!response.ok) {\n        const data = await response.json()\n        throw new Error(data.error || 'Failed to reject agreement')\n      }\n\n      // Update local state\n      setAgreements(prev => prev.map(a =>\n        a.id === agreementId ? { ...a, status: 'rejected' } : a\n      ))\n      toast.success('Agreement rejected')\n    } catch (err) {\n      console.error('Error rejecting agreement:', err)\n      toast.error(err instanceof Error ? err.message : 'Failed to reject agreement')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        setLoading(true)\n        const supabase = createClient()\n\n        // Get current user\n        const { data: { user } } = await supabase.auth.getUser()\n        if (!user) {\n          setError('Not authenticated')\n          return\n        }\n\n        // Check if user is a commercial partner\n        const { data: cpUser, error: cpUserError } = await supabase\n          .from('commercial_partner_users')\n          .select('commercial_partner_id')\n          .eq('user_id', user.id)\n          .single()\n\n        if (cpUserError || !cpUser) {\n          // Maybe they're staff - show all agreements as placeholder\n          await fetchAllAgreements(supabase)\n          return\n        }\n\n        // Fetch commercial partner info\n        const { data: partner, error: partnerError } = await supabase\n          .from('commercial_partners')\n          .select('id, name, legal_name, type, status, logo_url')\n          .eq('id', cpUser.commercial_partner_id)\n          .single()\n\n        if (partnerError) throw partnerError\n        setPartnerInfo(partner)\n\n        // Fetch agreements for this commercial partner\n        const { data: agreementsData, error: agreementsError } = await supabase\n          .from('placement_agreements')\n          .select('*')\n          .eq('commercial_partner_id', cpUser.commercial_partner_id)\n          .order('created_at', { ascending: false })\n\n        if (agreementsError) throw agreementsError\n\n        // Fetch pending signature requests for these agreements\n        const agreementIds = (agreementsData || []).map((a: any) => a.id)\n        let signatureMap: Record<string, { token: string; status: string }> = {}\n\n        if (agreementIds.length > 0) {\n          const { data: signatureRequests } = await supabase\n            .from('signature_requests')\n            .select('placement_agreement_id, signing_token, status')\n            .in('placement_agreement_id', agreementIds)\n            .eq('signer_role', 'commercial_partner')\n\n          for (const sig of signatureRequests || []) {\n            if (sig.placement_agreement_id) {\n              signatureMap[sig.placement_agreement_id] = {\n                token: sig.signing_token,\n                status: sig.status\n              }\n            }\n          }\n        }\n\n        processAgreements(agreementsData || [], signatureMap)\n        setError(null)\n      } catch (err) {\n        console.error('[PlacementAgreementsPage] Error:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load agreements')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    async function fetchAllAgreements(supabase: any) {\n      // Staff view - show all agreements with partner info\n      const { data: agreementsData, error: agreementsError } = await supabase\n        .from('placement_agreements')\n        .select(`\n          *,\n          commercial_partner:commercial_partner_id (\n            id,\n            name,\n            legal_name,\n            status\n          )\n        `)\n        .order('created_at', { ascending: false })\n        .limit(100)\n\n      if (agreementsError) throw agreementsError\n      processAgreements(agreementsData || [], {})\n    }\n\n    function processAgreements(data: any[], signatureMap: Record<string, { token: string; status: string }>) {\n      const now = new Date()\n      const thirtyDaysFromNow = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000)\n\n      const processed: Agreement[] = data.map((agreement) => {\n        const sigInfo = signatureMap[agreement.id]\n\n        // Compute effective status - if expiry_date has passed and status is \"active\", show as \"expired\"\n        let effectiveStatus = agreement.status || 'draft'\n        if (agreement.expiry_date && effectiveStatus === 'active') {\n          const expiryDate = new Date(agreement.expiry_date)\n          if (expiryDate < now) {\n            effectiveStatus = 'expired'\n          }\n        }\n\n        return {\n          id: agreement.id,\n          agreement_type: agreement.agreement_type || 'placement',\n          signed_date: agreement.signed_date,\n          effective_date: agreement.effective_date,\n          expiry_date: agreement.expiry_date,\n          default_commission_bps: agreement.default_commission_bps || 0,\n          commission_cap_amount: agreement.commission_cap_amount,\n          payment_terms: agreement.payment_terms,\n          territory: agreement.territory,\n          deal_types: agreement.deal_types,\n          exclusivity_level: agreement.exclusivity_level,\n          status: effectiveStatus,\n          created_at: agreement.created_at,\n          signature_token: sigInfo?.token || null,\n          signature_status: sigInfo?.status || null,\n        }\n      })\n\n      setAgreements(processed)\n\n      const active = processed.filter(a => a.status === 'active').length\n      const pending = processed.filter(a => a.status === 'pending').length\n      const expiring = processed.filter(a => {\n        if (!a.expiry_date) return false\n        const expDate = new Date(a.expiry_date)\n        return expDate > now && expDate <= thirtyDaysFromNow && a.status === 'active'\n      }).length\n\n      setSummary({\n        totalAgreements: processed.length,\n        activeAgreements: active,\n        pendingAgreements: pending,\n        expiringSoon: expiring,\n      })\n    }\n\n    fetchData()\n  }, [])\n\n  // Check if agreement is expiring soon\n  function isExpiringSoon(expiryDate: string | null): boolean {\n    if (!expiryDate) return false\n    const now = new Date()\n    const expDate = new Date(expiryDate)\n    const thirtyDaysFromNow = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000)\n    return expDate > now && expDate <= thirtyDaysFromNow\n  }\n\n  // Format commission as percentage\n  function formatCommission(bps: number): string {\n    return `${(bps / 100).toFixed(2)}%`\n  }\n\n  // Filter agreements\n  const filteredAgreements = agreements.filter(agreement => {\n    const matchesStatus = statusFilter === 'all' || agreement.status === statusFilter\n    const matchesSearch = !search ||\n      agreement.agreement_type?.toLowerCase().includes(search.toLowerCase()) ||\n      agreement.territory?.toLowerCase().includes(search.toLowerCase())\n    return matchesStatus && matchesSearch\n  })\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        <span className=\"ml-3 text-muted-foreground\">Loading agreements...</span>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-16\">\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Agreements</h3>\n        <p className=\"text-muted-foreground\">{error}</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">Placement Agreements</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {partnerInfo\n              ? `Manage your placement agreements as ${partnerInfo.name}`\n              : 'View and manage all placement agreements'}\n          </p>\n        </div>\n        {partnerInfo && (\n          <div className=\"flex items-center gap-2\">\n            {partnerInfo.logo_url ? (\n              <img\n                src={partnerInfo.logo_url}\n                alt={partnerInfo.name}\n                className=\"h-10 w-10 rounded-lg object-cover\"\n              />\n            ) : (\n              <div className=\"h-10 w-10 rounded-lg bg-muted flex items-center justify-center\">\n                <Building2 className=\"h-5 w-5 text-muted-foreground\" />\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <FileText className=\"h-4 w-4\" />\n              Total Agreements\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{summary.totalAgreements}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              All placement arrangements\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />\n              Active\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{summary.activeAgreements}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Currently in effect\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Clock className=\"h-4 w-4\" />\n              Pending\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-yellow-600\">{summary.pendingAgreements}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Awaiting signature\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              Expiring Soon\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-500\">{summary.expiringSoon}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Within 30 days\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search by type or territory...\"\n                  value={search}\n                  onChange={(e) => setSearch(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-full md:w-48\">\n                <SelectValue placeholder=\"Filter by status\" />\n              </SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((option) => (\n                  <SelectItem key={option.value} value={option.value}>\n                    {option.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Agreements Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Agreements</CardTitle>\n          <CardDescription>\n            {filteredAgreements.length} agreement{filteredAgreements.length !== 1 ? 's' : ''} found\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredAgreements.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <FileSignature className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">\n                {search || statusFilter !== 'all'\n                  ? 'No agreements match your filters'\n                  : partnerInfo\n                    ? 'No placement agreements on file'\n                    : 'No placement agreements found'}\n              </p>\n              {partnerInfo && agreements.length === 0 && (\n                <p className=\"text-xs text-muted-foreground\">\n                  Contact your account manager to set up a placement agreement\n                </p>\n              )}\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Type</TableHead>\n                    <TableHead>Commission</TableHead>\n                    <TableHead>Territory</TableHead>\n                    <TableHead>Effective</TableHead>\n                    <TableHead>Expires</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead className=\"text-right\">Actions</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredAgreements.map((agreement) => (\n                    <TableRow key={agreement.id}>\n                      <TableCell>\n                        <div className=\"flex items-center gap-2\">\n                          <FileText className=\"h-4 w-4 text-muted-foreground\" />\n                          <div>\n                            <div className=\"font-medium\">\n                              {AGREEMENT_TYPE_LABELS[agreement.agreement_type] || agreement.agreement_type}\n                            </div>\n                            {agreement.exclusivity_level && (\n                              <div className=\"text-xs text-muted-foreground capitalize\">\n                                {agreement.exclusivity_level}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-1\">\n                          <Percent className=\"h-3 w-3 text-muted-foreground\" />\n                          <span className=\"font-medium\">\n                            {formatCommission(agreement.default_commission_bps)}\n                          </span>\n                        </div>\n                        {agreement.commission_cap_amount && (\n                          <div className=\"text-xs text-muted-foreground\">\n                            Cap: ${agreement.commission_cap_amount.toLocaleString()}\n                          </div>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-1\">\n                          <Globe className=\"h-3 w-3 text-muted-foreground\" />\n                          <span>{agreement.territory || 'Global'}</span>\n                        </div>\n                        {agreement.deal_types && agreement.deal_types.length > 0 && (\n                          <div className=\"text-xs text-muted-foreground\">\n                            {agreement.deal_types.slice(0, 2).join(', ')}\n                            {agreement.deal_types.length > 2 && ` +${agreement.deal_types.length - 2}`}\n                          </div>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-1\">\n                          <Calendar className=\"h-3 w-3 text-muted-foreground\" />\n                          <span className=\"text-sm\">\n                            {agreement.effective_date\n                              ? formatDate(agreement.effective_date)\n                              : 'Not set'}\n                          </span>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <div className={cn(\n                          \"flex items-center gap-1\",\n                          isExpiringSoon(agreement.expiry_date) && \"text-orange-600\"\n                        )}>\n                          {isExpiringSoon(agreement.expiry_date) && (\n                            <AlertTriangle className=\"h-3 w-3\" />\n                          )}\n                          <span className=\"text-sm\">\n                            {agreement.expiry_date\n                              ? formatDate(agreement.expiry_date)\n                              : 'No expiry'}\n                          </span>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <Badge\n                          variant=\"outline\"\n                          className={cn('capitalize', STATUS_STYLES[agreement.status] || STATUS_STYLES.draft)}\n                        >\n                          {agreement.status}\n                        </Badge>\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex justify-end gap-2\">\n                          {/* Approve/Reject buttons for pending_approval status */}\n                          {agreement.status === 'pending_approval' && (\n                            <>\n                              <Button\n                                size=\"sm\"\n                                onClick={() => handleApprove(agreement.id)}\n                                disabled={actionLoading === agreement.id}\n                                className=\"bg-green-600 hover:bg-green-700\"\n                              >\n                                {actionLoading === agreement.id ? (\n                                  <Loader2 className=\"h-4 w-4 mr-1 animate-spin\" />\n                                ) : (\n                                  <ThumbsUp className=\"h-4 w-4 mr-1\" />\n                                )}\n                                Approve\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"destructive\"\n                                onClick={() => handleReject(agreement.id)}\n                                disabled={actionLoading === agreement.id}\n                              >\n                                {actionLoading === agreement.id ? (\n                                  <Loader2 className=\"h-4 w-4 mr-1 animate-spin\" />\n                                ) : (\n                                  <ThumbsDown className=\"h-4 w-4 mr-1\" />\n                                )}\n                                Reject\n                              </Button>\n                            </>\n                          )}\n                          {/* Sign button for pending agreements with signature requests */}\n                          {agreement.signature_token && agreement.signature_status === 'pending' && (\n                            <Button\n                              size=\"sm\"\n                              className=\"bg-amber-600 hover:bg-amber-700\"\n                              asChild\n                            >\n                              <Link href={`/versotech_main/versosign/sign/${agreement.signature_token}`}>\n                                <PenTool className=\"h-4 w-4 mr-1\" />\n                                Sign\n                              </Link>\n                            </Button>\n                          )}\n                          {/* Signed badge for completed signatures */}\n                          {agreement.signature_status === 'signed' && (\n                            <Badge variant=\"outline\" className=\"bg-green-100 text-green-800\">\n                              <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                              Signed\n                            </Badge>\n                          )}\n                          {/* View agreement details */}\n                          <Button variant=\"ghost\" size=\"sm\" asChild>\n                            <Link href={`/versotech_main/placement-agreements/${agreement.id}`}>\n                              <Eye className=\"h-4 w-4\" />\n                            </Link>\n                          </Button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}