{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,qQAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,qQAAC;YACC,aAAU;YACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,6EAA6E;QAC7E,+JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,6EAA6E;QAC7E,2GACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/format.ts"],"sourcesContent":["export const formatCurrency = (value: number | null | undefined, currency: string = 'USD') => {\n  if (!value) return '$0'\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency,\n    maximumFractionDigits: 0,\n  }).format(value)\n}\n\nexport const formatBps = (bps: number | null | undefined) => {\n  if (bps === null || bps === undefined) return '—'\n  return `${bps} bps`\n}\n\nexport const formatPercentage = (value: number | null | undefined) => {\n  if (!value) return '0%'\n  return `${(value * 100).toFixed(1)}%`\n}\n\nexport const formatDate = (value: string | Date | null | undefined) => {\n  if (!value) return '—'\n  const date = typeof value === 'string' ? new Date(value) : value\n  if (Number.isNaN(date?.getTime?.())) return '—'\n  // Use explicit locale to prevent hydration mismatch between server/client\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  })\n}\n\n\n\n\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,iBAAiB,CAAC,OAAkC,WAAmB,KAAK;IACvF,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,YAAY,CAAC;IACxB,IAAI,QAAQ,QAAQ,QAAQ,WAAW,OAAO;IAC9C,OAAO,GAAG,IAAI,IAAI,CAAC;AACrB;AAEO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AACvC;AAEO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,OAAO,OAAO,UAAU,WAAW,IAAI,KAAK,SAAS;IAC3D,IAAI,OAAO,KAAK,CAAC,MAAM,cAAc,OAAO;IAC5C,0EAA0E;IAC1E,OAAO,KAAK,kBAAkB,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF"}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useFormState,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState } = useFormContext()\n  const formState = useFormState({ name: fieldContext.name })\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  )\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : props.children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-destructive text-sm\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAEA;AAEA;AACA;AAUA;AACA;AAhBA;;;;;;;AAkBA,MAAM,OAAO,qMAAY;AASzB,MAAM,iCAAmB,6OAAmB,CAC1C,CAAC;AAGH,MAAM,YAAY,CAGhB,EACA,GAAG,OACkC;IACrC,qBACE,qQAAC,iBAAiB,QAAQ;QAAC,OAAO;YAAE,MAAM,MAAM,IAAI;QAAC;kBACnD,cAAA,qQAAC,mMAAU;YAAE,GAAG,KAAK;;;;;;;;;;;AAG3B;AAEA,MAAM,eAAe;IACnB,MAAM,eAAe,0OAAgB,CAAC;IACtC,MAAM,cAAc,0OAAgB,CAAC;IACrC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,uMAAc;IACxC,MAAM,YAAY,IAAA,qMAAY,EAAC;QAAE,MAAM,aAAa,IAAI;IAAC;IACzD,MAAM,aAAa,cAAc,aAAa,IAAI,EAAE;IAEpD,IAAI,CAAC,cAAc;QACjB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,OAAO;QACL;QACA,MAAM,aAAa,IAAI;QACvB,YAAY,GAAG,GAAG,UAAU,CAAC;QAC7B,mBAAmB,GAAG,GAAG,sBAAsB,CAAC;QAChD,eAAe,GAAG,GAAG,kBAAkB,CAAC;QACxC,GAAG,UAAU;IACf;AACF;AAMA,MAAM,gCAAkB,6OAAmB,CACzC,CAAC;AAGH,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,MAAM,KAAK,qOAAW;IAEtB,qBACE,qQAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;QAAG;kBACpC,cAAA,qQAAC;YACC,aAAU;YACV,WAAW,IAAA,gJAAE,EAAC,cAAc;YAC3B,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,GAAG,OAC8C;IACjD,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG;IAE9B,qBACE,qQAAC,iKAAK;QACJ,aAAU;QACV,cAAY,CAAC,CAAC;QACd,WAAW,IAAA,gJAAE,EAAC,sCAAsC;QACpD,SAAS;QACR,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,GAAG,OAA0C;IAClE,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,iBAAiB,EAAE,aAAa,EAAE,GAAG;IAEhE,qBACE,qQAAC,+LAAI;QACH,aAAU;QACV,IAAI;QACJ,oBACE,CAAC,QACG,GAAG,mBAAmB,GACtB,GAAG,kBAAkB,CAAC,EAAE,eAAe;QAE7C,gBAAc,CAAC,CAAC;QACf,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAkC;IACzE,MAAM,EAAE,iBAAiB,EAAE,GAAG;IAE9B,qBACE,qQAAC;QACC,aAAU;QACV,IAAI;QACJ,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAkC;IACrE,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,GAAG;IACjC,MAAM,OAAO,QAAQ,OAAO,OAAO,WAAW,MAAM,MAAM,QAAQ;IAElE,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,qBACE,qQAAC;QACC,aAAU;QACV,IAAI;QACJ,WAAW,IAAA,gJAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;kBAER;;;;;;AAGP"}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,yBAAW,0OAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,qQAAC;QACC,WAAW,IAAA,gJAAE,EACX,+RACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 458, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/staff/introducers/create-agreement-dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport { z } from 'zod'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from '@/components/ui/dialog'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormDescription,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { toast } from 'sonner'\r\nimport { FileSignature, Percent, Calendar, FileText, Loader2, Briefcase } from 'lucide-react'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\n\r\nconst AGREEMENT_TYPES = [\r\n  { value: 'referral', label: 'Referral Fee' },\r\n  { value: 'revenue_share', label: 'Revenue Share' },\r\n  { value: 'fixed_fee', label: 'Fixed Fee' },\r\n  { value: 'hybrid', label: 'Hybrid' },\r\n] as const\r\n\r\nconst formSchema = z.object({\r\n  agreement_type: z.enum(['referral', 'revenue_share', 'fixed_fee', 'hybrid']),\r\n  default_commission_bps: z.preprocess(\r\n    (val) => (val === '' ? 0 : Number(val)),\r\n    z.number().min(0, 'Commission must be at least 0').max(500, 'Commission cannot exceed 5%')\r\n  ),\r\n  effective_date: z.string().min(1, 'Effective date is required'),\r\n  expiry_date: z.string().optional(),\r\n  notes: z.string().optional(),\r\n})\r\n\r\ntype FormData = {\r\n  agreement_type: 'referral' | 'revenue_share' | 'fixed_fee' | 'hybrid'\r\n  default_commission_bps: number\r\n  effective_date: string\r\n  expiry_date?: string\r\n  notes?: string\r\n}\r\n\r\ninterface CreateAgreementDialogProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  introducerId: string\r\n  introducerName: string\r\n  defaultCommissionBps?: number\r\n}\r\n\r\nexport function CreateAgreementDialog({\r\n  open,\r\n  onOpenChange,\r\n  introducerId,\r\n  introducerName,\r\n  defaultCommissionBps = 100,\r\n}: CreateAgreementDialogProps) {\r\n  const router = useRouter()\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n  const form = useForm<FormData>({\r\n    resolver: zodResolver(formSchema) as any,\r\n    defaultValues: {\r\n      agreement_type: 'referral',\r\n      default_commission_bps: defaultCommissionBps,\r\n      effective_date: new Date().toISOString().split('T')[0],\r\n      expiry_date: '',\r\n      notes: '',\r\n    },\r\n  })\r\n\r\n  const onSubmit = async (data: FormData) => {\r\n    setIsSubmitting(true)\r\n    try {\r\n      const response = await fetch('/api/introducer-agreements', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          introducer_id: introducerId,\r\n          agreement_type: data.agreement_type,\r\n          default_commission_bps: data.default_commission_bps,\r\n          effective_date: data.effective_date,\r\n          expiry_date: data.expiry_date || null,\r\n          notes: data.notes || null,\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Failed to create agreement')\r\n      }\r\n\r\n      toast.success('Agreement created successfully')\r\n      onOpenChange(false)\r\n      form.reset()\r\n      router.refresh()\r\n    } catch (error) {\r\n      toast.error(error instanceof Error ? error.message : 'Failed to create agreement')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[520px] bg-background border-white/10\">\r\n        <DialogHeader>\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/20\">\r\n              <FileSignature className=\"h-5 w-5 text-amber-400\" />\r\n            </div>\r\n            <div>\r\n              <DialogTitle className=\"text-lg font-semibold text-foreground\">\r\n                Create Fee Agreement\r\n              </DialogTitle>\r\n              <DialogDescription className=\"text-sm text-muted-foreground\">\r\n                For {introducerName}\r\n              </DialogDescription>\r\n            </div>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-5\">\r\n            {/* Agreement Type */}\r\n            <FormField\r\n              control={form.control}\r\n              name=\"agreement_type\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel className=\"flex items-center gap-2 text-sm font-medium\">\r\n                    <Briefcase className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                    Agreement Type\r\n                  </FormLabel>\r\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                    <FormControl>\r\n                      <SelectTrigger className=\"bg-white/5 border-white/10 focus:border-amber-500/50\">\r\n                        <SelectValue placeholder=\"Select agreement type\" />\r\n                      </SelectTrigger>\r\n                    </FormControl>\r\n                    <SelectContent>\r\n                      {AGREEMENT_TYPES.map((type) => (\r\n                        <SelectItem key={type.value} value={type.value}>\r\n                          {type.label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {/* Commission Rate */}\r\n            <FormField\r\n              control={form.control}\r\n              name=\"default_commission_bps\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel className=\"flex items-center gap-2 text-sm font-medium\">\r\n                    <Percent className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                    Commission Rate (basis points)\r\n                  </FormLabel>\r\n                  <FormControl>\r\n                    <div className=\"relative\">\r\n                      <Input\r\n                        type=\"number\"\r\n                        placeholder=\"100\"\r\n                        {...field}\r\n                        className=\"bg-white/5 border-white/10 focus:border-amber-500/50 focus:ring-amber-500/20 pr-16\"\r\n                      />\r\n                      <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground\">\r\n                        bps\r\n                      </span>\r\n                    </div>\r\n                  </FormControl>\r\n                  <FormDescription className=\"text-xs\">\r\n                    100 bps = 1.00% | Current: {((field.value || 0) / 100).toFixed(2)}%\r\n                  </FormDescription>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {/* Date Fields */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"effective_date\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"flex items-center gap-2 text-sm font-medium\">\r\n                      <Calendar className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                      Effective Date\r\n                    </FormLabel>\r\n                    <FormControl>\r\n                      <Input\r\n                        type=\"date\"\r\n                        {...field}\r\n                        className=\"bg-white/5 border-white/10 focus:border-amber-500/50\"\r\n                      />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"expiry_date\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"flex items-center gap-2 text-sm font-medium\">\r\n                      <Calendar className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                      Expiry Date\r\n                      <span className=\"text-xs text-muted-foreground font-normal\">(optional)</span>\r\n                    </FormLabel>\r\n                    <FormControl>\r\n                      <Input\r\n                        type=\"date\"\r\n                        {...field}\r\n                        className=\"bg-white/5 border-white/10 focus:border-amber-500/50\"\r\n                      />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            </div>\r\n\r\n            {/* Notes */}\r\n            <FormField\r\n              control={form.control}\r\n              name=\"notes\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel className=\"flex items-center gap-2 text-sm font-medium\">\r\n                    <FileText className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                    Notes\r\n                    <span className=\"text-xs text-muted-foreground font-normal\">(optional)</span>\r\n                  </FormLabel>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"Any special terms or conditions for this agreement...\"\r\n                      rows={3}\r\n                      {...field}\r\n                      className=\"bg-white/5 border-white/10 focus:border-amber-500/50 resize-none\"\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <DialogFooter className=\"pt-2\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                onClick={() => onOpenChange(false)}\r\n                disabled={isSubmitting}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={isSubmitting}\r\n                className=\"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 text-white border-0\"\r\n              >\r\n                {isSubmitting ? (\r\n                  <>\r\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                    Creating...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <FileSignature className=\"h-4 w-4 mr-2\" />\r\n                    Create Agreement\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </DialogFooter>\r\n          </form>\r\n        </Form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAQA;AASA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA7BA;;;;;;;;;;;;;;;AAqCA,MAAM,kBAAkB;IACtB;QAAE,OAAO;QAAY,OAAO;IAAe;IAC3C;QAAE,OAAO;QAAiB,OAAO;IAAgB;IACjD;QAAE,OAAO;QAAa,OAAO;IAAY;IACzC;QAAE,OAAO;QAAU,OAAO;IAAS;CACpC;AAED,MAAM,aAAa,yMAAC,CAAC,MAAM,CAAC;IAC1B,gBAAgB,yMAAC,CAAC,IAAI,CAAC;QAAC;QAAY;QAAiB;QAAa;KAAS;IAC3E,wBAAwB,yMAAC,CAAC,UAAU,CAClC,CAAC,MAAS,QAAQ,KAAK,IAAI,OAAO,MAClC,yMAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,iCAAiC,GAAG,CAAC,KAAK;IAE9D,gBAAgB,yMAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAClC,aAAa,yMAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,OAAO,yMAAC,CAAC,MAAM,GAAG,QAAQ;AAC5B;AAkBO,SAAS,sBAAsB,EACpC,IAAI,EACJ,YAAY,EACZ,YAAY,EACZ,cAAc,EACd,uBAAuB,GAAG,EACC;IAC3B,MAAM,SAAS,IAAA,sKAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wOAAQ,EAAC;IAEjD,MAAM,OAAO,IAAA,gMAAO,EAAW;QAC7B,UAAU,IAAA,oMAAW,EAAC;QACtB,eAAe;YACb,gBAAgB;YAChB,wBAAwB;YACxB,gBAAgB,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACtD,aAAa;YACb,OAAO;QACT;IACF;IAEA,MAAM,WAAW,OAAO;QACtB,gBAAgB;QAChB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,8BAA8B;gBACzD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,eAAe;oBACf,gBAAgB,KAAK,cAAc;oBACnC,wBAAwB,KAAK,sBAAsB;oBACnD,gBAAgB,KAAK,cAAc;oBACnC,aAAa,KAAK,WAAW,IAAI;oBACjC,OAAO,KAAK,KAAK,IAAI;gBACvB;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;YACjC;YAEA,wKAAK,CAAC,OAAO,CAAC;YACd,aAAa;YACb,KAAK,KAAK;YACV,OAAO,OAAO;QAChB,EAAE,OAAO,OAAO;YACd,wKAAK,CAAC,KAAK,CAAC,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACvD,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,qQAAC,mKAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,qQAAC,0KAAa;YAAC,WAAU;;8BACvB,qQAAC,yKAAY;8BACX,cAAA,qQAAC;wBAAI,WAAU;;0CACb,qQAAC;gCAAI,WAAU;0CACb,cAAA,qQAAC,kQAAa;oCAAC,WAAU;;;;;;;;;;;0CAE3B,qQAAC;;kDACC,qQAAC,wKAAW;wCAAC,WAAU;kDAAwC;;;;;;kDAG/D,qQAAC,8KAAiB;wCAAC,WAAU;;4CAAgC;4CACtD;;;;;;;;;;;;;;;;;;;;;;;;8BAMb,qQAAC,+JAAI;oBAAE,GAAG,IAAI;8BACZ,cAAA,qQAAC;wBAAK,UAAU,KAAK,YAAY,CAAC;wBAAW,WAAU;;0CAErD,qQAAC,oKAAS;gCACR,SAAS,KAAK,OAAO;gCACrB,MAAK;gCACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,qQAAC,mKAAQ;;0DACP,qQAAC,oKAAS;gDAAC,WAAU;;kEACnB,qQAAC,gPAAS;wDAAC,WAAU;;;;;;oDAAsC;;;;;;;0DAG7D,qQAAC,mKAAM;gDAAC,eAAe,MAAM,QAAQ;gDAAE,cAAc,MAAM,KAAK;;kEAC9D,qQAAC,sKAAW;kEACV,cAAA,qQAAC,0KAAa;4DAAC,WAAU;sEACvB,cAAA,qQAAC,wKAAW;gEAAC,aAAY;;;;;;;;;;;;;;;;kEAG7B,qQAAC,0KAAa;kEACX,gBAAgB,GAAG,CAAC,CAAC,qBACpB,qQAAC,uKAAU;gEAAkB,OAAO,KAAK,KAAK;0EAC3C,KAAK,KAAK;+DADI,KAAK,KAAK;;;;;;;;;;;;;;;;0DAMjC,qQAAC,sKAAW;;;;;;;;;;;;;;;;0CAMlB,qQAAC,oKAAS;gCACR,SAAS,KAAK,OAAO;gCACrB,MAAK;gCACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,qQAAC,mKAAQ;;0DACP,qQAAC,oKAAS;gDAAC,WAAU;;kEACnB,qQAAC,0OAAO;wDAAC,WAAU;;;;;;oDAAsC;;;;;;;0DAG3D,qQAAC,sKAAW;0DACV,cAAA,qQAAC;oDAAI,WAAU;;sEACb,qQAAC,iKAAK;4DACJ,MAAK;4DACL,aAAY;4DACX,GAAG,KAAK;4DACT,WAAU;;;;;;sEAEZ,qQAAC;4DAAK,WAAU;sEAA0E;;;;;;;;;;;;;;;;;0DAK9F,qQAAC,0KAAe;gDAAC,WAAU;;oDAAU;oDACP,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,IAAI,GAAG,EAAE,OAAO,CAAC;oDAAG;;;;;;;0DAEpE,qQAAC,sKAAW;;;;;;;;;;;;;;;;0CAMlB,qQAAC;gCAAI,WAAU;;kDACb,qQAAC,oKAAS;wCACR,SAAS,KAAK,OAAO;wCACrB,MAAK;wCACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,qQAAC,mKAAQ;;kEACP,qQAAC,oKAAS;wDAAC,WAAU;;0EACnB,qQAAC,6OAAQ;gEAAC,WAAU;;;;;;4DAAsC;;;;;;;kEAG5D,qQAAC,sKAAW;kEACV,cAAA,qQAAC,iKAAK;4DACJ,MAAK;4DACJ,GAAG,KAAK;4DACT,WAAU;;;;;;;;;;;kEAGd,qQAAC,sKAAW;;;;;;;;;;;;;;;;kDAKlB,qQAAC,oKAAS;wCACR,SAAS,KAAK,OAAO;wCACrB,MAAK;wCACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,qQAAC,mKAAQ;;kEACP,qQAAC,oKAAS;wDAAC,WAAU;;0EACnB,qQAAC,6OAAQ;gEAAC,WAAU;;;;;;4DAAsC;0EAE1D,qQAAC;gEAAK,WAAU;0EAA4C;;;;;;;;;;;;kEAE9D,qQAAC,sKAAW;kEACV,cAAA,qQAAC,iKAAK;4DACJ,MAAK;4DACJ,GAAG,KAAK;4DACT,WAAU;;;;;;;;;;;kEAGd,qQAAC,sKAAW;;;;;;;;;;;;;;;;;;;;;;0CAOpB,qQAAC,oKAAS;gCACR,SAAS,KAAK,OAAO;gCACrB,MAAK;gCACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,qQAAC,mKAAQ;;0DACP,qQAAC,oKAAS;gDAAC,WAAU;;kEACnB,qQAAC,iPAAQ;wDAAC,WAAU;;;;;;oDAAsC;kEAE1D,qQAAC;wDAAK,WAAU;kEAA4C;;;;;;;;;;;;0DAE9D,qQAAC,sKAAW;0DACV,cAAA,qQAAC,uKAAQ;oDACP,aAAY;oDACZ,MAAM;oDACL,GAAG,KAAK;oDACT,WAAU;;;;;;;;;;;0DAGd,qQAAC,sKAAW;;;;;;;;;;;;;;;;0CAKlB,qQAAC,yKAAY;gCAAC,WAAU;;kDACtB,qQAAC,mKAAM;wCACL,MAAK;wCACL,SAAQ;wCACR,SAAS,IAAM,aAAa;wCAC5B,UAAU;kDACX;;;;;;kDAGD,qQAAC,mKAAM;wCACL,MAAK;wCACL,UAAU;wCACV,WAAU;kDAET,6BACC;;8DACE,qQAAC,mPAAO;oDAAC,WAAU;;;;;;gDAA8B;;yEAInD;;8DACE,qQAAC,kQAAa;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAW9D"}},
    {"offset": {"line": 1067, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Wrapper to provide stable ID for SSR hydration\nconst Tabs = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root>\n>(({ id, ...props }, ref) => {\n  const generatedId = React.useId()\n  return <TabsPrimitive.Root ref={ref} id={id ?? generatedId} {...props} />\n})\nTabs.displayName = \"Tabs\"\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,iDAAiD;AACjD,MAAM,qBAAO,0OAAgB,CAG3B,CAAC,EAAE,EAAE,EAAE,GAAG,OAAO,EAAE;IACnB,MAAM,cAAc,qOAAW;IAC/B,qBAAO,qQAAC,+LAAkB;QAAC,KAAK;QAAK,IAAI,MAAM;QAAc,GAAG,KAAK;;;;;;AACvE;AACA,KAAK,WAAW,GAAG;AAEnB,MAAM,yBAAW,0OAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC,+LAAkB;QACjB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,sGACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,+LAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,0OAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC,kMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,+YACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kMAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,0OAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC,kMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kMAAqB,CAAC,WAAW"}},
    {"offset": {"line": 1135, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,0OAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,qQAAC,oMAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,gJAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,oMAAuB,CAAC,WAAW"}},
    {"offset": {"line": 1165, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/common/commission-summary.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { DollarSign, Clock, FileCheck, CheckCircle2, XCircle } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\nimport { cn } from '@/lib/utils'\n\n/**\n * Commission summary type - shared between partners and introducers\n */\nexport type CommissionSummary = {\n  accrued: number\n  invoice_requested: number\n  invoice_submitted?: number\n  invoiced: number\n  paid: number\n  cancelled: number\n  rejected?: number\n  total_owed: number\n  currency: string\n}\n\ninterface CommissionSummaryProps {\n  summary: CommissionSummary\n  variant?: 'card' | 'compact' | 'inline'\n  className?: string\n  /** Optional title override (default: \"Commission Summary\") */\n  title?: string\n}\n\n/**\n * Displays commission summary for a partner or introducer\n * Shows breakdown by status: accrued, invoiced, paid\n *\n * Variants:\n * - 'card': Full card with header, grid layout, and progress bar\n * - 'compact': Horizontal badges for smaller displays\n * - 'inline': Minimal text for table cells\n */\nexport function CommissionSummary({\n  summary,\n  variant = 'card',\n  className,\n  title = 'Commission Summary',\n}: CommissionSummaryProps) {\n  const invoiceSubmitted = summary.invoice_submitted ?? 0\n  const { accrued, invoice_requested, invoiced, paid, total_owed, currency } = summary\n  const invoicedTotal = invoice_requested + invoiceSubmitted + invoiced\n\n  // Inline variant - for table cells\n  if (variant === 'inline') {\n    return (\n      <div className={cn('space-y-1', className)}>\n        {paid > 0 && (\n          <div className=\"text-sm\">\n            <span className=\"text-green-600 font-medium\">\n              {formatCurrency(paid, currency)}\n            </span>\n            <span className=\"text-muted-foreground text-xs ml-1\">paid</span>\n          </div>\n        )}\n        {total_owed > 0 && (\n          <div className=\"text-xs text-yellow-600\">\n            {formatCurrency(total_owed, currency)} pending\n          </div>\n        )}\n        {paid === 0 && total_owed === 0 && (\n          <span className=\"text-muted-foreground text-xs\">No commissions</span>\n        )}\n      </div>\n    )\n  }\n\n  // Compact variant - for smaller displays\n  if (variant === 'compact') {\n    return (\n      <div className={cn('flex flex-wrap gap-2', className)}>\n        {accrued > 0 && (\n          <Badge variant=\"outline\" className=\"bg-blue-500/10 text-blue-600 border-blue-200\">\n            <Clock className=\"h-3 w-3 mr-1\" />\n            {formatCurrency(accrued, currency)} accrued\n          </Badge>\n        )}\n        {invoicedTotal > 0 && (\n          <Badge variant=\"outline\" className=\"bg-yellow-500/10 text-yellow-600 border-yellow-200\">\n            <FileCheck className=\"h-3 w-3 mr-1\" />\n            {formatCurrency(invoicedTotal, currency)} invoiced\n          </Badge>\n        )}\n        {paid > 0 && (\n          <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-600 border-green-200\">\n            <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n            {formatCurrency(paid, currency)} paid\n          </Badge>\n        )}\n      </div>\n    )\n  }\n\n  // Default card variant\n  return (\n    <Card className={className}>\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n          <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          {title}\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-2 gap-4\">\n          {/* Accrued */}\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n              <Clock className=\"h-3 w-3 text-blue-500\" />\n              Accrued\n            </div>\n            <div className=\"text-lg font-semibold text-blue-600\">\n              {formatCurrency(accrued, currency)}\n            </div>\n          </div>\n\n          {/* Invoiced */}\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n              <FileCheck className=\"h-3 w-3 text-yellow-500\" />\n              Invoiced\n            </div>\n            <div className=\"text-lg font-semibold text-yellow-600\">\n            {formatCurrency(invoicedTotal, currency)}\n            </div>\n          </div>\n\n          {/* Paid */}\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n              <CheckCircle2 className=\"h-3 w-3 text-green-500\" />\n              Paid\n            </div>\n            <div className=\"text-lg font-semibold text-green-600\">\n              {formatCurrency(paid, currency)}\n            </div>\n          </div>\n\n          {/* Total Owed */}\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n              <DollarSign className=\"h-3 w-3 text-purple-500\" />\n              Total Owed\n            </div>\n            <div className=\"text-lg font-semibold text-purple-600\">\n              {formatCurrency(total_owed, currency)}\n            </div>\n          </div>\n        </div>\n\n        {/* Progress bar showing paid vs owed */}\n        {(paid + total_owed) > 0 && (\n          <div className=\"mt-4 pt-3 border-t\">\n            <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\n              <span>Payment Progress</span>\n              <span>\n                {Math.round((paid / (paid + total_owed)) * 100)}% paid\n              </span>\n            </div>\n            <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-green-500 transition-all duration-300\"\n                style={{ width: `${(paid / (paid + total_owed)) * 100}%` }}\n              />\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\n/**\n * Displays a simple badge showing payment status\n */\nexport function PaymentStatusBadge({\n  summary,\n  className,\n}: {\n  summary: CommissionSummary\n  className?: string\n}) {\n  const { paid, total_owed } = summary\n\n  if (paid === 0 && total_owed === 0) {\n    return (\n      <Badge variant=\"outline\" className={cn('text-muted-foreground', className)}>\n        No commissions\n      </Badge>\n    )\n  }\n\n  if (total_owed === 0 && paid > 0) {\n    return (\n      <Badge variant=\"outline\" className={cn('bg-green-500/10 text-green-600 border-green-200', className)}>\n        <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n        All paid\n      </Badge>\n    )\n  }\n\n  return (\n    <Badge variant=\"outline\" className={cn('bg-yellow-500/10 text-yellow-600 border-yellow-200', className)}>\n      <Clock className=\"h-3 w-3 mr-1\" />\n      {formatCurrency(total_owed, summary.currency)} pending\n    </Badge>\n  )\n}\n\n// Re-export with old names for backwards compatibility during migration\nexport { CommissionSummary as PartnerCommissionSummary }\nexport { PaymentStatusBadge as PartnerPaymentBadge }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1619, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/introducers/record-commission-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Loader2, Calculator } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\n\ntype Deal = {\n  id: string\n  name: string\n  company_name: string | null\n  currency: string\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  components: any[]\n}\n\ninterface RecordCommissionDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  introducerId: string\n  introducerName: string\n  deals: Deal[]\n  feePlans: FeePlan[]\n  onSuccess: () => void\n}\n\nconst BASIS_TYPES = [\n  { value: 'invested_amount', label: 'Invested Amount' },\n  { value: 'spread', label: 'Spread' },\n  { value: 'management_fee', label: 'Management Fee' },\n  { value: 'performance_fee', label: 'Performance Fee' },\n]\n\nexport function RecordCommissionDialog({\n  open,\n  onOpenChange,\n  introducerId,\n  introducerName,\n  deals,\n  feePlans,\n  onSuccess,\n}: RecordCommissionDialogProps) {\n  const [saving, setSaving] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Form state\n  const [dealId, setDealId] = useState<string>('')\n  const [feePlanId, setFeePlanId] = useState<string>('')\n  const [basisType, setBasisType] = useState<string>('invested_amount')\n  const [rateBps, setRateBps] = useState<string>('')\n  const [baseAmount, setBaseAmount] = useState<string>('')\n  const [accrualAmount, setAccrualAmount] = useState<string>('')\n  const [currency, setCurrency] = useState<string>('USD')\n  const [paymentDueDate, setPaymentDueDate] = useState<string>('')\n  const [notes, setNotes] = useState<string>('')\n\n  // Reset form when dialog opens\n  useEffect(() => {\n    if (open) {\n      setDealId('')\n      setFeePlanId('')\n      setBasisType('invested_amount')\n      setRateBps('')\n      setBaseAmount('')\n      setAccrualAmount('')\n      setCurrency('USD')\n      setPaymentDueDate('')\n      setNotes('')\n      setError(null)\n    }\n  }, [open])\n\n  // Auto-calculate accrual when rate and base amount change\n  useEffect(() => {\n    if (rateBps && baseAmount) {\n      const rate = parseFloat(rateBps) / 10000 // Convert bps to decimal\n      const base = parseFloat(baseAmount)\n      if (!isNaN(rate) && !isNaN(base)) {\n        const calculated = (base * rate).toFixed(2)\n        setAccrualAmount(calculated)\n      }\n    }\n  }, [rateBps, baseAmount])\n\n  // Update currency when deal changes\n  useEffect(() => {\n    if (dealId) {\n      const deal = deals.find(d => d.id === dealId)\n      if (deal?.currency) {\n        setCurrency(deal.currency)\n      }\n    }\n  }, [dealId, deals])\n\n  // Auto-fill rate from fee plan\n  useEffect(() => {\n    if (feePlanId) {\n      const plan = feePlans.find(p => p.id === feePlanId)\n      if (plan?.components && plan.components.length > 0) {\n        // Find first component with rate_bps\n        const comp = plan.components.find((c: any) => c.rate_bps)\n        if (comp?.rate_bps) {\n          setRateBps(comp.rate_bps.toString())\n        }\n      }\n    }\n  }, [feePlanId, feePlans])\n\n  const handleSubmit = async () => {\n    // Validation\n    if (!rateBps || parseFloat(rateBps) <= 0) {\n      setError('Rate is required and must be greater than 0')\n      return\n    }\n    if (!accrualAmount || parseFloat(accrualAmount) <= 0) {\n      setError('Commission amount is required and must be greater than 0')\n      return\n    }\n\n    setSaving(true)\n    setError(null)\n\n    try {\n      const payload = {\n        introducer_id: introducerId,\n        deal_id: dealId || undefined,\n        fee_plan_id: feePlanId || undefined,\n        basis_type: basisType,\n        rate_bps: parseInt(rateBps, 10),\n        base_amount: baseAmount ? parseFloat(baseAmount) : undefined,\n        accrual_amount: parseFloat(accrualAmount),\n        currency,\n        payment_due_date: paymentDueDate || undefined,\n        notes: notes || undefined,\n      }\n\n      const response = await fetch('/api/arrangers/me/introducer-commissions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to record commission')\n      }\n\n      onSuccess()\n      onOpenChange(false)\n    } catch (err) {\n      console.error('[RecordCommissionDialog] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to record commission')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const ratePercent = rateBps ? (parseFloat(rateBps) / 100).toFixed(2) : '0.00'\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Record Commission</DialogTitle>\n          <DialogDescription>\n            Record a commission owed to {introducerName}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded\">\n              {error}\n            </div>\n          )}\n\n          {/* Deal Selection */}\n          <div className=\"space-y-2\">\n            <Label>Deal (Optional)</Label>\n            <Select value={dealId} onValueChange={setDealId}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select deal...\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"\">No specific deal</SelectItem>\n                {deals.map((deal) => (\n                  <SelectItem key={deal.id} value={deal.id}>\n                    {deal.name} {deal.company_name && `(${deal.company_name})`}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Fee Plan Selection */}\n          {feePlans.length > 0 && (\n            <div className=\"space-y-2\">\n              <Label>Fee Plan (Optional)</Label>\n              <Select value={feePlanId} onValueChange={setFeePlanId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select fee plan...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">No fee plan</SelectItem>\n                  {feePlans.map((plan) => (\n                    <SelectItem key={plan.id} value={plan.id}>\n                      {plan.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n\n          {/* Basis Type */}\n          <div className=\"space-y-2\">\n            <Label>Commission Basis</Label>\n            <Select value={basisType} onValueChange={setBasisType}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {BASIS_TYPES.map((type) => (\n                  <SelectItem key={type.value} value={type.value}>\n                    {type.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Rate and Base Amount */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label>Rate (basis points) *</Label>\n              <Input\n                type=\"number\"\n                value={rateBps}\n                onChange={(e) => setRateBps(e.target.value)}\n                placeholder=\"e.g., 100 = 1%\"\n              />\n              {rateBps && (\n                <p className=\"text-xs text-muted-foreground\">= {ratePercent}%</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Base Amount ({currency})</Label>\n              <Input\n                type=\"number\"\n                value={baseAmount}\n                onChange={(e) => setBaseAmount(e.target.value)}\n                placeholder=\"e.g., 100000\"\n              />\n            </div>\n          </div>\n\n          {/* Commission Amount */}\n          <div className=\"space-y-2\">\n            <Label className=\"flex items-center gap-2\">\n              Commission Amount ({currency}) *\n              {rateBps && baseAmount && (\n                <span className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <Calculator className=\"h-3 w-3\" />\n                  Auto-calculated\n                </span>\n              )}\n            </Label>\n            <Input\n              type=\"number\"\n              value={accrualAmount}\n              onChange={(e) => setAccrualAmount(e.target.value)}\n              placeholder=\"Commission amount\"\n            />\n            {accrualAmount && (\n              <p className=\"text-sm font-medium text-primary\">\n                {formatCurrency(parseFloat(accrualAmount), currency)}\n              </p>\n            )}\n          </div>\n\n          {/* Payment Due Date */}\n          <div className=\"space-y-2\">\n            <Label>Payment Due Date (Optional)</Label>\n            <Input\n              type=\"date\"\n              value={paymentDueDate}\n              onChange={(e) => setPaymentDueDate(e.target.value)}\n            />\n          </div>\n\n          {/* Notes */}\n          <div className=\"space-y-2\">\n            <Label>Notes (Optional)</Label>\n            <Textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Any additional notes...\"\n              rows={2}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={saving}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={saving}>\n            {saving ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Recording...\n              </>\n            ) : (\n              'Record Commission'\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2249, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/introducers/request-invoice-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Loader2, Mail, FileText } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\n\ninterface Commission {\n  id: string\n  accrual_amount: number\n  currency: string\n  introducer?: {\n    legal_name: string\n    email?: string\n  }\n  deal?: {\n    name: string\n  }\n}\n\ninterface RequestInvoiceDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  commission: Commission | null\n  onSuccess: () => void\n}\n\nexport function RequestInvoiceDialog({\n  open,\n  onOpenChange,\n  commission,\n  onSuccess,\n}: RequestInvoiceDialogProps) {\n  const [sending, setSending] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const handleSubmit = async () => {\n    if (!commission) return\n\n    setSending(true)\n    setError(null)\n\n    try {\n      const response = await fetch(\n        `/api/arrangers/me/introducer-commissions/${commission.id}/request-invoice`,\n        {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({}),\n        }\n      )\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to request invoice')\n      }\n\n      onSuccess()\n      onOpenChange(false)\n    } catch (err) {\n      console.error('[RequestInvoiceDialog] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to request invoice')\n    } finally {\n      setSending(false)\n    }\n  }\n\n  if (!commission) return null\n\n  const formattedAmount = formatCurrency(\n    commission.accrual_amount,\n    commission.currency || 'USD'\n  )\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <FileText className=\"h-5 w-5\" />\n            Request Invoice\n          </DialogTitle>\n          <DialogDescription>\n            Send an invoice request notification to the introducer.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"py-4 space-y-4\">\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"bg-muted/50 p-4 rounded-lg space-y-2\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-muted-foreground\">Introducer:</span>\n              <span className=\"font-medium\">{commission.introducer?.legal_name || 'Unknown'}</span>\n            </div>\n            {commission.deal && (\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Deal:</span>\n                <span className=\"font-medium\">{commission.deal.name}</span>\n              </div>\n            )}\n            <div className=\"flex justify-between\">\n              <span className=\"text-muted-foreground\">Amount:</span>\n              <span className=\"font-medium text-primary\">{formattedAmount}</span>\n            </div>\n          </div>\n\n          <div className=\"flex items-start gap-2 text-sm text-muted-foreground\">\n            <Mail className=\"h-4 w-4 mt-0.5 flex-shrink-0\" />\n            <p>\n              The introducer will receive a notification asking them to submit their invoice\n              for this commission. The commission status will be updated to \"Invoice Requested\".\n            </p>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={sending}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={sending}>\n            {sending ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Sending...\n              </>\n            ) : (\n              <>\n                <Mail className=\"h-4 w-4 mr-2\" />\n                Request Invoice\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAQA;AACA;AAAA;AAAA;AACA;AAbA;;;;;;;AAmCO,SAAS,qBAAqB,EACnC,IAAI,EACJ,YAAY,EACZ,UAAU,EACV,SAAS,EACiB;IAC1B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wOAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wOAAQ,EAAgB;IAElD,MAAM,eAAe;QACnB,IAAI,CAAC,YAAY;QAEjB,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MACrB,CAAC,yCAAyC,EAAE,WAAW,EAAE,CAAC,gBAAgB,CAAC,EAC3E;gBACE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC,CAAC;YACxB;YAGF,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI;YACrC;YAEA;YACA,aAAa;QACf,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,kBAAkB,IAAA,6JAAc,EACpC,WAAW,cAAc,EACzB,WAAW,QAAQ,IAAI;IAGzB,qBACE,qQAAC,mKAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,qQAAC,0KAAa;YAAC,WAAU;;8BACvB,qQAAC,yKAAY;;sCACX,qQAAC,wKAAW;4BAAC,WAAU;;8CACrB,qQAAC,iPAAQ;oCAAC,WAAU;;;;;;gCAAY;;;;;;;sCAGlC,qQAAC,8KAAiB;sCAAC;;;;;;;;;;;;8BAKrB,qQAAC;oBAAI,WAAU;;wBACZ,uBACC,qQAAC;4BAAI,WAAU;sCACZ;;;;;;sCAIL,qQAAC;4BAAI,WAAU;;8CACb,qQAAC;oCAAI,WAAU;;sDACb,qQAAC;4CAAK,WAAU;sDAAwB;;;;;;sDACxC,qQAAC;4CAAK,WAAU;sDAAe,WAAW,UAAU,EAAE,cAAc;;;;;;;;;;;;gCAErE,WAAW,IAAI,kBACd,qQAAC;oCAAI,WAAU;;sDACb,qQAAC;4CAAK,WAAU;sDAAwB;;;;;;sDACxC,qQAAC;4CAAK,WAAU;sDAAe,WAAW,IAAI,CAAC,IAAI;;;;;;;;;;;;8CAGvD,qQAAC;oCAAI,WAAU;;sDACb,qQAAC;4CAAK,WAAU;sDAAwB;;;;;;sDACxC,qQAAC;4CAAK,WAAU;sDAA4B;;;;;;;;;;;;;;;;;;sCAIhD,qQAAC;4BAAI,WAAU;;8CACb,qQAAC,iOAAI;oCAAC,WAAU;;;;;;8CAChB,qQAAC;8CAAE;;;;;;;;;;;;;;;;;;8BAOP,qQAAC,yKAAY;;sCACX,qQAAC,mKAAM;4BAAC,SAAQ;4BAAU,SAAS,IAAM,aAAa;4BAAQ,UAAU;sCAAS;;;;;;sCAGjF,qQAAC,mKAAM;4BAAC,SAAS;4BAAc,UAAU;sCACtC,wBACC;;kDACE,qQAAC,mPAAO;wCAAC,WAAU;;;;;;oCAA8B;;6DAInD;;kDACE,qQAAC,iOAAI;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;AASjD"}},
    {"offset": {"line": 2525, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/introducers/request-payment-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { Loader2, CreditCard, Users } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\n\ninterface Commission {\n  id: string\n  accrual_amount: number\n  currency: string\n  deal_id?: string\n  introducer?: {\n    legal_name: string\n  }\n  deal?: {\n    name: string\n  }\n}\n\ninterface Lawyer {\n  id: string\n  legal_name: string\n}\n\ninterface RequestPaymentDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  commission: Commission | null\n  lawyers?: Lawyer[]\n  onSuccess: () => void\n}\n\nexport function RequestPaymentDialog({\n  open,\n  onOpenChange,\n  commission,\n  lawyers = [],\n  onSuccess,\n}: RequestPaymentDialogProps) {\n  const [sending, setSending] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [selectedLawyerId, setSelectedLawyerId] = useState<string>('')\n  const [notes, setNotes] = useState<string>('')\n\n  // Reset form when dialog opens\n  useEffect(() => {\n    if (open) {\n      setSelectedLawyerId('')\n      setNotes('')\n      setError(null)\n    }\n  }, [open])\n\n  const handleSubmit = async () => {\n    if (!commission) return\n\n    setSending(true)\n    setError(null)\n\n    try {\n      const payload: { lawyer_id?: string; notes?: string } = {}\n      if (selectedLawyerId) {\n        payload.lawyer_id = selectedLawyerId\n      }\n      if (notes) {\n        payload.notes = notes\n      }\n\n      const response = await fetch(\n        `/api/arrangers/me/introducer-commissions/${commission.id}/request-payment`,\n        {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload),\n        }\n      )\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to request payment')\n      }\n\n      onSuccess()\n      onOpenChange(false)\n    } catch (err) {\n      console.error('[RequestPaymentDialog] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to request payment')\n    } finally {\n      setSending(false)\n    }\n  }\n\n  if (!commission) return null\n\n  const formattedAmount = formatCurrency(\n    commission.accrual_amount,\n    commission.currency || 'USD'\n  )\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <CreditCard className=\"h-5 w-5\" />\n            Request Payment\n          </DialogTitle>\n          <DialogDescription>\n            Request payment approval from the legal team or CEO.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"py-4 space-y-4\">\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/30 text-destructive text-sm p-3 rounded\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"bg-muted/50 p-4 rounded-lg space-y-2\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-muted-foreground\">Introducer:</span>\n              <span className=\"font-medium\">{commission.introducer?.legal_name || 'Unknown'}</span>\n            </div>\n            {commission.deal && (\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Deal:</span>\n                <span className=\"font-medium\">{commission.deal.name}</span>\n              </div>\n            )}\n            <div className=\"flex justify-between\">\n              <span className=\"text-muted-foreground\">Amount:</span>\n              <span className=\"font-medium text-primary\">{formattedAmount}</span>\n            </div>\n          </div>\n\n          {/* Lawyer Selection (Optional) */}\n          {lawyers.length > 0 && (\n            <div className=\"space-y-2\">\n              <Label>Priority Lawyer (Optional)</Label>\n              <Select value={selectedLawyerId} onValueChange={setSelectedLawyerId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select lawyer...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"\">Send to all assigned</SelectItem>\n                  {lawyers.map((lawyer) => (\n                    <SelectItem key={lawyer.id} value={lawyer.id}>\n                      {lawyer.legal_name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <p className=\"text-xs text-muted-foreground\">\n                Optionally select a specific lawyer to prioritize for this payment request.\n              </p>\n            </div>\n          )}\n\n          {/* Notes */}\n          <div className=\"space-y-2\">\n            <Label>Notes (Optional)</Label>\n            <Textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Any payment instructions or notes...\"\n              rows={2}\n            />\n          </div>\n\n          <div className=\"flex items-start gap-2 text-sm text-muted-foreground\">\n            <Users className=\"h-4 w-4 mt-0.5 flex-shrink-0\" />\n            <p>\n              This will notify the assigned lawyers and CEO/admin staff to process\n              the payment to the introducer. Make sure the invoice has been received\n              before requesting payment.\n            </p>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={sending}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={sending}>\n            {sending ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Sending...\n              </>\n            ) : (\n              <>\n                <CreditCard className=\"h-4 w-4 mr-2\" />\n                Request Payment\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2923, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,8LAAG,EACvB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,0OAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,qQAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,IAAA,gJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,0OAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC;QACC,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,0OAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC;QACC,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 2988, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/documents/document-viewer.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport Image from 'next/image'\r\nimport { Download, X, Loader2, AlertCircle } from 'lucide-react'\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\n\r\ninterface DocumentViewerProps {\r\n  documentId: string\r\n  documentName: string\r\n  mimeType: string\r\n  open: boolean\r\n  onClose: () => void\r\n}\r\n\r\nexport function DocumentViewer({\r\n  documentId,\r\n  documentName,\r\n  mimeType,\r\n  open,\r\n  onClose\r\n}: DocumentViewerProps) {\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [documentUrl, setDocumentUrl] = useState<string | null>(null)\r\n\r\n  const loadDocument = useCallback(async () => {\r\n    setLoading(true)\r\n    setError(null)\r\n\r\n    try {\r\n      const response = await fetch(`/api/documents/${documentId}/download`)\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json()\r\n        throw new Error(errorData.error || 'Failed to load document')\r\n      }\r\n\r\n      const data = await response.json()\r\n      setDocumentUrl(data.url)\r\n    } catch (err) {\r\n      console.error('Document load error:', err)\r\n      setError(err instanceof Error ? err.message : 'Failed to load document')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [documentId])\r\n\r\n  useEffect(() => {\r\n    if (open && documentId) {\r\n      loadDocument()\r\n    }\r\n\r\n    return () => {\r\n      if (documentUrl) {\r\n        URL.revokeObjectURL(documentUrl)\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [open, documentId, loadDocument])\r\n\r\n  const handleDownload = () => {\r\n    if (!documentUrl) return\r\n\r\n    const a = document.createElement('a')\r\n    a.href = documentUrl\r\n    a.download = documentName\r\n    a.click()\r\n  }\r\n\r\n  const isPDF = mimeType === 'application/pdf'\r\n  const isImage = mimeType.startsWith('image/')\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"max-w-5xl h-[90vh] flex flex-col\">\r\n        <DialogHeader>\r\n          <div className=\"flex items-center justify-between pr-8\">\r\n            <DialogTitle className=\"text-lg font-semibold\">{documentName}</DialogTitle>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={handleDownload}\r\n                disabled={!documentUrl || loading}\r\n              >\r\n                <Download className=\"h-4 w-4 mr-2\" />\r\n                Download\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        <div className=\"flex-1 overflow-auto\">\r\n          {loading && (\r\n            <div className=\"flex items-center justify-center h-full\">\r\n              <div className=\"text-center\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin mx-auto mb-2 text-blue-600\" />\r\n                <p className=\"text-sm text-gray-600\">Loading document...</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <Alert variant=\"destructive\" className=\"m-4\">\r\n              <AlertCircle className=\"h-4 w-4\" />\r\n              <AlertDescription>{error}</AlertDescription>\r\n            </Alert>\r\n          )}\r\n\r\n          {!loading && !error && documentUrl && (\r\n            <>\r\n              {isPDF && (\r\n                <iframe\r\n                  src={documentUrl}\r\n                  className=\"w-full h-full border-0\"\r\n                  title={documentName}\r\n                />\r\n              )}\r\n\r\n              {isImage && (\r\n                <div className=\"flex items-center justify-center p-4\">\r\n\r\n                  <Image\r\n                    src={documentUrl}\r\n                    alt={documentName}\r\n                    width={0}\r\n                    height={0}\r\n                    sizes=\"100vw\"\r\n                    className=\"w-full h-auto rounded-lg shadow-lg\"\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {!isPDF && !isImage && (\r\n                <Alert className=\"m-4\">\r\n                  <AlertCircle className=\"h-4 w-4\" />\r\n                  <AlertDescription>\r\n                    Preview not available for this file type. Please download to view.\r\n                  </AlertDescription>\r\n                </Alert>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAPA;;;;;;;;AAiBO,SAAS,eAAe,EAC7B,UAAU,EACV,YAAY,EACZ,QAAQ,EACR,IAAI,EACJ,OAAO,EACa;IACpB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wOAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wOAAQ,EAAgB;IAClD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wOAAQ,EAAgB;IAE9D,MAAM,eAAe,IAAA,2OAAW,EAAC;QAC/B,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,eAAe,EAAE,WAAW,SAAS,CAAC;YAEpE,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI;YACrC;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,eAAe,KAAK,GAAG;QACzB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wBAAwB;YACtC,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF,GAAG;QAAC;KAAW;IAEf,IAAA,yOAAS,EAAC;QACR,IAAI,QAAQ,YAAY;YACtB;QACF;QAEA,OAAO;YACL,IAAI,aAAa;gBACf,IAAI,eAAe,CAAC;YACtB;QACF;IACA,uDAAuD;IACzD,GAAG;QAAC;QAAM;QAAY;KAAa;IAEnC,MAAM,iBAAiB;QACrB,IAAI,CAAC,aAAa;QAElB,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,EAAE,QAAQ,GAAG;QACb,EAAE,KAAK;IACT;IAEA,MAAM,QAAQ,aAAa;IAC3B,MAAM,UAAU,SAAS,UAAU,CAAC;IAEpC,qBACE,qQAAC,mKAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,qQAAC,0KAAa;YAAC,WAAU;;8BACvB,qQAAC,yKAAY;8BACX,cAAA,qQAAC;wBAAI,WAAU;;0CACb,qQAAC,wKAAW;gCAAC,WAAU;0CAAyB;;;;;;0CAChD,qQAAC;gCAAI,WAAU;0CACb,cAAA,qQAAC,mKAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,SAAS;oCACT,UAAU,CAAC,eAAe;;sDAE1B,qQAAC,6OAAQ;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;;;;;;;;;;;8BAO7C,qQAAC;oBAAI,WAAU;;wBACZ,yBACC,qQAAC;4BAAI,WAAU;sCACb,cAAA,qQAAC;gCAAI,WAAU;;kDACb,qQAAC,mPAAO;wCAAC,WAAU;;;;;;kDACnB,qQAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;;;;;;wBAK1C,uBACC,qQAAC,iKAAK;4BAAC,SAAQ;4BAAc,WAAU;;8CACrC,qQAAC,0PAAW;oCAAC,WAAU;;;;;;8CACvB,qQAAC,4KAAgB;8CAAE;;;;;;;;;;;;wBAItB,CAAC,WAAW,CAAC,SAAS,6BACrB;;gCACG,uBACC,qQAAC;oCACC,KAAK;oCACL,WAAU;oCACV,OAAO;;;;;;gCAIV,yBACC,qQAAC;oCAAI,WAAU;8CAEb,cAAA,qQAAC,+JAAK;wCACJ,KAAK;wCACL,KAAK;wCACL,OAAO;wCACP,QAAQ;wCACR,OAAM;wCACN,WAAU;;;;;;;;;;;gCAKf,CAAC,SAAS,CAAC,yBACV,qQAAC,iKAAK;oCAAC,WAAU;;sDACf,qQAAC,0PAAW;4CAAC,WAAU;;;;;;sDACvB,qQAAC,4KAAgB;sDAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWpC"}},
    {"offset": {"line": 3248, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/introducers/introducer-detail-drawer.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from '@/components/ui/sheet'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Separator } from '@/components/ui/separator'\nimport {\n  Building2,\n  Mail,\n  Phone,\n  Users,\n  TrendingUp,\n  ExternalLink,\n  Loader2,\n  AlertCircle,\n  FileText,\n  Plus,\n  CreditCard,\n  Clock,\n  CheckCircle,\n  XCircle,\n  Eye,\n} from 'lucide-react'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { cn } from '@/lib/utils'\nimport { CommissionSummary } from '@/components/common/commission-summary'\nimport { RecordCommissionDialog } from './record-commission-dialog'\nimport { RequestInvoiceDialog } from './request-invoice-dialog'\nimport { RequestPaymentDialog } from './request-payment-dialog'\nimport { DocumentViewer } from '@/components/documents/document-viewer'\nimport Link from 'next/link'\nimport type { IntroducerData } from '@/types/introducers'\n\ninterface IntroducerDetailDrawerProps {\n  introducerId: string | null\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 border-green-200',\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  inactive: 'bg-gray-100 text-gray-800 border-gray-200',\n  suspended: 'bg-red-100 text-red-800 border-red-200',\n}\n\nconst COMMISSION_STATUS_ICONS: Record<string, any> = {\n  accrued: { icon: Clock, color: 'text-blue-600' },\n  invoice_requested: { icon: FileText, color: 'text-yellow-600' },\n  invoice_submitted: { icon: FileText, color: 'text-indigo-600' },\n  invoiced: { icon: FileText, color: 'text-orange-600' },\n  paid: { icon: CheckCircle, color: 'text-green-600' },\n  cancelled: { icon: XCircle, color: 'text-red-600' },\n  rejected: { icon: XCircle, color: 'text-red-600' },\n}\n\nexport function IntroducerDetailDrawer({\n  introducerId,\n  open,\n  onOpenChange,\n}: IntroducerDetailDrawerProps) {\n  const [data, setData] = useState<IntroducerData | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [commissions, setCommissions] = useState<any[]>([])\n  const [commissionsLoading, setCommissionsLoading] = useState(false)\n\n  // Dialog states\n  const [recordCommissionOpen, setRecordCommissionOpen] = useState(false)\n  const [requestInvoiceOpen, setRequestInvoiceOpen] = useState(false)\n  const [requestPaymentOpen, setRequestPaymentOpen] = useState(false)\n  const [selectedCommission, setSelectedCommission] = useState<any>(null)\n\n  // View invoice state\n  const [viewInvoiceOpen, setViewInvoiceOpen] = useState(false)\n  const [selectedInvoice, setSelectedInvoice] = useState<{\n    id: string\n    name: string\n    mimeType: string\n  } | null>(null)\n\n  const fetchIntroducerDetail = async () => {\n    if (!introducerId) return\n\n    setLoading(true)\n    setError(null)\n\n    try {\n      const response = await fetch(`/api/arrangers/me/introducers/${introducerId}`)\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to load introducer details')\n      }\n\n      const result = await response.json()\n      setData(result.data)\n    } catch (err) {\n      console.error('[IntroducerDetailDrawer] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load introducer details')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchCommissions = async () => {\n    if (!introducerId) return\n\n    setCommissionsLoading(true)\n\n    try {\n      const response = await fetch(\n        `/api/arrangers/me/introducer-commissions?introducer_id=${introducerId}&limit=20`\n      )\n      if (response.ok) {\n        const result = await response.json()\n        setCommissions(result.data || [])\n      }\n    } catch (err) {\n      console.error('[IntroducerDetailDrawer] Error fetching commissions:', err)\n    } finally {\n      setCommissionsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    if (!open || !introducerId) {\n      setData(null)\n      setError(null)\n      setCommissions([])\n      return\n    }\n\n    fetchIntroducerDetail()\n    fetchCommissions()\n  }, [open, introducerId])\n\n  const handleRequestInvoice = (commission: any) => {\n    setSelectedCommission(commission)\n    setRequestInvoiceOpen(true)\n  }\n\n  const handleRequestPayment = (commission: any) => {\n    setSelectedCommission(commission)\n    setRequestPaymentOpen(true)\n  }\n\n  const handleViewInvoice = (commission: any) => {\n    if (commission.invoice_id) {\n      setSelectedInvoice({\n        id: commission.invoice_id,\n        name: `Invoice - ${commission.deal?.name || 'Commission'}`,\n        mimeType: 'application/pdf',\n      })\n      setViewInvoiceOpen(true)\n    }\n  }\n\n  const handleActionSuccess = () => {\n    fetchIntroducerDetail()\n    fetchCommissions()\n  }\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent className=\"w-full sm:max-w-xl overflow-y-auto\">\n        {loading && (\n          <div className=\"flex items-center justify-center py-16\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            <span className=\"ml-3 text-muted-foreground\">Loading introducer details...</span>\n          </div>\n        )}\n\n        {error && (\n          <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n            <AlertCircle className=\"h-12 w-12 text-destructive mb-4\" />\n            <p className=\"text-muted-foreground\">{error}</p>\n            <Button\n              variant=\"outline\"\n              className=\"mt-4\"\n              onClick={() => onOpenChange(false)}\n            >\n              Close\n            </Button>\n          </div>\n        )}\n\n        {data && (\n          <>\n            <SheetHeader className=\"pb-4\">\n              <div className=\"flex items-center gap-3\">\n                {data.introducer.logo_url ? (\n                  <img\n                    src={data.introducer.logo_url}\n                    alt={data.introducer.legal_name}\n                    className=\"h-12 w-12 rounded-lg object-cover\"\n                  />\n                ) : (\n                  <div className=\"h-12 w-12 rounded-lg bg-muted flex items-center justify-center\">\n                    <Building2 className=\"h-6 w-6 text-muted-foreground\" />\n                  </div>\n                )}\n                <div>\n                  <SheetTitle>{data.introducer.legal_name}</SheetTitle>\n                  <SheetDescription>\n                    {data.introducer.contact_name && <span>{data.introducer.contact_name}</span>}\n                  </SheetDescription>\n                </div>\n              </div>\n\n              {/* Status badge */}\n              <div className=\"flex gap-2 mt-3\">\n                <Badge\n                  variant=\"outline\"\n                  className={cn('capitalize', STATUS_STYLES[data.introducer.status] || STATUS_STYLES.active)}\n                >\n                  {data.introducer.status}\n                </Badge>\n                {data.introducer.default_commission_bps && (\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {(data.introducer.default_commission_bps / 100).toFixed(2)}% default rate\n                  </Badge>\n                )}\n              </div>\n            </SheetHeader>\n\n            <Separator className=\"my-4\" />\n\n            {/* Quick Stats */}\n            <div className=\"grid grid-cols-3 gap-3 mb-6\">\n              <Card className=\"p-3\">\n                <div className=\"text-2xl font-bold text-primary\">{data.stats.total_deals}</div>\n                <div className=\"text-xs text-muted-foreground\">Deals</div>\n              </Card>\n              <Card className=\"p-3\">\n                <div className=\"text-2xl font-bold text-blue-600\">{data.stats.total_referrals}</div>\n                <div className=\"text-xs text-muted-foreground\">Referrals</div>\n              </Card>\n              <Card className=\"p-3\">\n                <div className=\"text-2xl font-bold text-purple-600\">{data.stats.active_fee_plans}</div>\n                <div className=\"text-xs text-muted-foreground\">Fee Plans</div>\n              </Card>\n            </div>\n\n            <Tabs defaultValue=\"overview\" className=\"w-full\">\n              <TabsList className=\"grid w-full grid-cols-4\">\n                <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n                <TabsTrigger value=\"fees\">Fee Plans</TabsTrigger>\n                <TabsTrigger value=\"commissions\">Commissions</TabsTrigger>\n                <TabsTrigger value=\"referrals\">Referrals</TabsTrigger>\n              </TabsList>\n\n              {/* Overview Tab */}\n              <TabsContent value=\"overview\" className=\"mt-4 space-y-4\">\n                {/* Contact Info */}\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Contact Information</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-2 text-sm\">\n                    {data.introducer.contact_name && (\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"h-4 w-4 text-muted-foreground\" />\n                        <span>{data.introducer.contact_name}</span>\n                      </div>\n                    )}\n                    {data.introducer.email && (\n                      <div className=\"flex items-center gap-2\">\n                        <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                        <a href={`mailto:${data.introducer.email}`} className=\"text-primary hover:underline\">\n                          {data.introducer.email}\n                        </a>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n\n                {/* Commission Terms */}\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Commission Terms</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-2 text-sm\">\n                    {data.introducer.default_commission_bps ? (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Default Rate:</span>\n                        <span className=\"font-medium\">{(data.introducer.default_commission_bps / 100).toFixed(2)}%</span>\n                      </div>\n                    ) : (\n                      <p className=\"text-muted-foreground\">No default rate set</p>\n                    )}\n                    {data.introducer.commission_cap_amount && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Commission Cap:</span>\n                        <span className=\"font-medium\">\n                          {formatCurrency(data.introducer.commission_cap_amount, 'USD')}\n                        </span>\n                      </div>\n                    )}\n                    {data.introducer.payment_terms && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Payment Terms:</span>\n                        <span className=\"font-medium\">{data.introducer.payment_terms}</span>\n                      </div>\n                    )}\n                    {data.introducer.agreement_expiry_date && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Agreement Expiry:</span>\n                        <span className=\"font-medium\">{formatDate(data.introducer.agreement_expiry_date)}</span>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n\n                {/* Deals List */}\n                {data.deals.length > 0 && (\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Deals Involved</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-2\">\n                        {data.deals.map((deal: any) => (\n                          <div key={deal.id} className=\"flex items-center justify-between p-2 rounded-md bg-muted/50\">\n                            <div>\n                              <div className=\"font-medium text-sm\">{deal.name}</div>\n                              {deal.company_name && (\n                                <div className=\"text-xs text-muted-foreground\">{deal.company_name}</div>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Badge variant=\"outline\" className=\"text-xs capitalize\">\n                                {deal.status}\n                              </Badge>\n                              <Link href={`/versotech_main/opportunities/${deal.id}`}>\n                                <Button variant=\"ghost\" size=\"sm\">\n                                  <ExternalLink className=\"h-3.5 w-3.5\" />\n                                </Button>\n                              </Link>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n              </TabsContent>\n\n              {/* Fee Plans Tab */}\n              <TabsContent value=\"fees\" className=\"mt-4 space-y-4\">\n                {data.fee_plans.length === 0 ? (\n                  <Card>\n                    <CardContent className=\"py-8 text-center\">\n                      <FileText className=\"h-10 w-10 text-muted-foreground mx-auto mb-3\" />\n                      <p className=\"text-sm text-muted-foreground\">No fee plans assigned to this introducer</p>\n                      <Link href=\"/versotech_main/fee-plans\">\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-3\">\n                          Create Fee Plan\n                        </Button>\n                      </Link>\n                    </CardContent>\n                  </Card>\n                ) : (\n                  data.fee_plans.map((plan: any) => (\n                    <Card key={plan.id}>\n                      <CardHeader className=\"pb-2\">\n                        <div className=\"flex items-center justify-between\">\n                          <CardTitle className=\"text-sm\">{plan.name}</CardTitle>\n                          <Badge variant={plan.is_active ? 'default' : 'secondary'}>\n                            {plan.is_active ? 'Active' : 'Inactive'}\n                          </Badge>\n                        </div>\n                        {plan.description && (\n                          <CardDescription className=\"text-xs\">{plan.description}</CardDescription>\n                        )}\n                      </CardHeader>\n                      <CardContent>\n                        {plan.components && plan.components.length > 0 ? (\n                          <div className=\"flex flex-wrap gap-2\">\n                            {plan.components.map((comp: any, idx: number) => (\n                              <Badge key={idx} variant=\"outline\" className=\"text-xs\">\n                                {comp.kind}: {comp.rate_bps ? `${(comp.rate_bps / 100).toFixed(2)}%` : comp.flat_amount ? `$${comp.flat_amount}` : 'N/A'}\n                              </Badge>\n                            ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-xs text-muted-foreground\">No fee components defined</p>\n                        )}\n                        {plan.effective_from && (\n                          <p className=\"text-xs text-muted-foreground mt-2\">\n                            Effective from {formatDate(plan.effective_from)}\n                            {plan.effective_until && ` to ${formatDate(plan.effective_until)}`}\n                          </p>\n                        )}\n                      </CardContent>\n                    </Card>\n                  ))\n                )}\n              </TabsContent>\n\n              {/* Commissions Tab */}\n              <TabsContent value=\"commissions\" className=\"mt-4 space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-sm font-medium\">Commission Summary</h3>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => setRecordCommissionOpen(true)}\n                  >\n                    <Plus className=\"h-4 w-4 mr-1\" />\n                    Record Commission\n                  </Button>\n                </div>\n\n                <CommissionSummary summary={data.commission_summary} />\n\n                {/* Pending Commissions List */}\n                {commissionsLoading ? (\n                  <div className=\"flex items-center justify-center py-4\">\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  </div>\n                ) : commissions.length > 0 ? (\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Recent Commissions</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-2\">\n                      {commissions.slice(0, 10).map((commission: any) => {\n                        const StatusIcon = COMMISSION_STATUS_ICONS[commission.status]?.icon || Clock\n                        const statusColor = COMMISSION_STATUS_ICONS[commission.status]?.color || 'text-gray-600'\n\n                        return (\n                          <div key={commission.id} className=\"flex items-center justify-between p-2 rounded-md bg-muted/50\">\n                            <div className=\"flex items-center gap-2\">\n                              <StatusIcon className={cn('h-4 w-4', statusColor)} />\n                              <div>\n                                <div className=\"font-medium text-sm\">\n                                  {formatCurrency(commission.accrual_amount, commission.currency)}\n                                </div>\n                                <div className=\"text-xs text-muted-foreground\">\n                                  {commission.deal?.name || 'No deal'} • {formatDate(commission.created_at)}\n                                </div>\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Badge variant=\"outline\" className=\"text-xs capitalize\">\n                                {commission.status.replace('_', ' ')}\n                              </Badge>\n                              {commission.status === 'accrued' && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => handleRequestInvoice(commission)}\n                                >\n                                  <FileText className=\"h-3.5 w-3.5 mr-1\" />\n                                  Request Invoice\n                                </Button>\n                              )}\n                              {commission.status === 'invoiced' && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => handleRequestPayment(commission)}\n                                >\n                                  <CreditCard className=\"h-3.5 w-3.5 mr-1\" />\n                                  Request Payment\n                                </Button>\n                              )}\n                              {(commission.status === 'invoiced' || commission.status === 'paid') &&\n                                commission.invoice_id && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => handleViewInvoice(commission)}\n                                  className=\"text-blue-600\"\n                                >\n                                  <Eye className=\"h-3.5 w-3.5 mr-1\" />\n                                  View Invoice\n                                </Button>\n                              )}\n                            </div>\n                          </div>\n                        )\n                      })}\n                    </CardContent>\n                  </Card>\n                ) : null}\n\n                <div className=\"flex justify-end\">\n                  <Link href=\"/versotech_main/introducer-reconciliation\">\n                    <Button variant=\"outline\" size=\"sm\">\n                      <TrendingUp className=\"h-4 w-4 mr-2\" />\n                      View Reconciliation\n                    </Button>\n                  </Link>\n                </div>\n              </TabsContent>\n\n              {/* Referrals Tab */}\n              <TabsContent value=\"referrals\" className=\"mt-4 space-y-4\">\n                {data.recent_referrals.length === 0 ? (\n                  <Card>\n                    <CardContent className=\"py-8 text-center\">\n                      <Users className=\"h-10 w-10 text-muted-foreground mx-auto mb-3\" />\n                      <p className=\"text-sm text-muted-foreground\">No referrals yet</p>\n                    </CardContent>\n                  </Card>\n                ) : (\n                  <Card>\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Recent Referrals</CardTitle>\n                      <CardDescription className=\"text-xs\">Investors introduced to your deals</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-3\">\n                        {data.recent_referrals.map((referral: any) => (\n                          <div key={referral.id} className=\"flex items-center justify-between p-2 rounded-md bg-muted/50\">\n                            <div>\n                              <div className=\"font-medium text-sm\">\n                                {referral.investor?.name || 'Unknown Investor'}\n                              </div>\n                              <div className=\"text-xs text-muted-foreground\">\n                                {referral.deal?.name || 'Unknown Deal'}\n                                {referral.deal?.company_name && ` • ${referral.deal.company_name}`}\n                              </div>\n                            </div>\n                            <div className=\"text-xs text-muted-foreground\">\n                              {formatDate(referral.created_at)}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n              </TabsContent>\n            </Tabs>\n\n            {/* Dialogs */}\n            <RecordCommissionDialog\n              open={recordCommissionOpen}\n              onOpenChange={setRecordCommissionOpen}\n              introducerId={data.introducer.id}\n              introducerName={data.introducer.legal_name}\n              deals={data.deals}\n              feePlans={data.fee_plans}\n              onSuccess={handleActionSuccess}\n            />\n\n            <RequestInvoiceDialog\n              open={requestInvoiceOpen}\n              onOpenChange={setRequestInvoiceOpen}\n              commission={selectedCommission}\n              onSuccess={handleActionSuccess}\n            />\n\n            <RequestPaymentDialog\n              open={requestPaymentOpen}\n              onOpenChange={setRequestPaymentOpen}\n              commission={selectedCommission}\n              onSuccess={handleActionSuccess}\n            />\n\n            {/* View Invoice Modal */}\n            {selectedInvoice && (\n              <DocumentViewer\n                documentId={selectedInvoice.id}\n                documentName={selectedInvoice.name}\n                mimeType={selectedInvoice.mimeType}\n                open={viewInvoiceOpen}\n                onClose={() => {\n                  setViewInvoiceOpen(false)\n                  setSelectedInvoice(null)\n                }}\n              />\n            )}\n          </>\n        )}\n      </SheetContent>\n    </Sheet>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4669, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/my-introducers/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport {\n  UserPlus,\n  Building2,\n  CheckCircle2,\n  Search,\n  Loader2,\n  AlertCircle,\n  ExternalLink,\n  Mail,\n  Handshake,\n  Percent,\n  FileText,\n  PenTool,\n  Clock,\n  Plus,\n  Wallet,\n  CreditCard,\n  TrendingUp,\n} from 'lucide-react'\nimport Link from 'next/link'\nimport { cn } from '@/lib/utils'\nimport { formatCurrency, formatDate } from '@/lib/format'\nimport { createClient } from '@/lib/supabase/client'\nimport { CreateAgreementDialog } from '@/components/staff/introducers/create-agreement-dialog'\nimport { IntroducerDetailDrawer } from '@/components/introducers/introducer-detail-drawer'\nimport { CommissionSummary } from '@/components/common/commission-summary'\nimport type { CommissionSummary as CommissionSummaryType } from '@/components/common/commission-summary'\n\ntype ArrangerInfo = {\n  id: string\n  legal_name: string\n  status: string\n}\n\ntype FeePlan = {\n  id: string\n  name: string\n  is_active: boolean\n}\n\ntype Introducer = {\n  id: string\n  legal_name: string\n  contact_name: string | null\n  email: string | null\n  status: string\n  default_commission_bps: number | null\n  commission_cap_amount: number | null\n  agreement_expiry_date: string | null\n  logo_url: string | null\n  deals_count: number\n  referrals_count: number\n  total_referral_value: number\n  fee_plans: FeePlan[]\n  commission_summary: CommissionSummaryType\n}\n\ntype Deal = {\n  id: string\n  name: string\n}\n\ntype Summary = {\n  totalIntroducers: number\n  activeIntroducers: number\n  totalReferrals: number\n  totalFeesOwed: number\n  totalFeesPaid: number\n  totalCommissions: number\n}\n\ntype PendingAgreement = {\n  id: string\n  introducer_name: string\n  introducer_id: string\n  agreement_type: string\n  created_at: string\n  status: string\n  signing_url: string | null\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 border-green-200',\n  pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  inactive: 'bg-gray-100 text-gray-800 border-gray-200',\n  suspended: 'bg-red-100 text-red-800 border-red-200',\n}\n\nconst STATUS_FILTERS = [\n  { label: 'All Status', value: 'all' },\n  { label: 'Active', value: 'active' },\n  { label: 'Pending', value: 'pending' },\n  { label: 'Inactive', value: 'inactive' },\n]\n\nexport default function MyIntroducersPage() {\n  const [arrangerInfo, setArrangerInfo] = useState<ArrangerInfo | null>(null)\n  const [introducers, setIntroducers] = useState<Introducer[]>([])\n  const [deals, setDeals] = useState<Deal[]>([])\n  const [pendingAgreements, setPendingAgreements] = useState<PendingAgreement[]>([])\n  const [summary, setSummary] = useState<Summary>({\n    totalIntroducers: 0,\n    activeIntroducers: 0,\n    totalReferrals: 0,\n    totalFeesOwed: 0,\n    totalFeesPaid: 0,\n    totalCommissions: 0,\n  })\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState('all')\n  const [dealFilter, setDealFilter] = useState('all')\n  const [createAgreementOpen, setCreateAgreementOpen] = useState(false)\n  const [selectedIntroducerForAgreement, setSelectedIntroducerForAgreement] = useState<Introducer | null>(null)\n  const [drawerOpen, setDrawerOpen] = useState(false)\n  const [selectedIntroducerId, setSelectedIntroducerId] = useState<string | null>(null)\n\n  const fetchData = async () => {\n    try {\n      setLoading(true)\n      const supabase = createClient()\n\n      const { data: { user } } = await supabase.auth.getUser()\n      if (!user) {\n        setError('Not authenticated')\n        return\n      }\n\n      const { data: arrangerUser, error: arrangerUserError } = await supabase\n        .from('arranger_users')\n        .select('arranger_id')\n        .eq('user_id', user.id)\n        .single()\n\n      if (arrangerUserError || !arrangerUser) {\n        await fetchAllIntroducers(supabase)\n        return\n      }\n\n      const { data: arranger, error: arrangerError } = await supabase\n        .from('arranger_entities')\n        .select('id, legal_name, status')\n        .eq('id', arrangerUser.arranger_id)\n        .single()\n\n      if (arrangerError) throw arrangerError\n      setArrangerInfo(arranger)\n\n      // Fetch pending introducer agreements for this arranger\n      const { data: pendingAgreementsData } = await supabase\n        .from('introducer_agreements')\n        .select(`\n          id,\n          agreement_type,\n          status,\n          created_at,\n          arranger_signature_request_id,\n          introducer:introducer_id (id, legal_name)\n        `)\n        .eq('arranger_id', arrangerUser.arranger_id)\n        .in('status', ['approved', 'pending_arranger_signature'])\n        .order('created_at', { ascending: false })\n\n      const pendingList: PendingAgreement[] = []\n      for (const agreement of pendingAgreementsData || []) {\n        const introducer = Array.isArray(agreement.introducer) ? agreement.introducer[0] : agreement.introducer\n        let signingUrl = null\n\n        if (agreement.arranger_signature_request_id) {\n          const { data: sigReq } = await supabase\n            .from('signature_requests')\n            .select('signing_token, status, token_expires_at')\n            .eq('id', agreement.arranger_signature_request_id)\n            .eq('status', 'pending')\n            .single()\n\n          if (sigReq && new Date(sigReq.token_expires_at) > new Date()) {\n            signingUrl = `/versotech_main/versosign/sign/${sigReq.signing_token}`\n          }\n        }\n\n        pendingList.push({\n          id: agreement.id,\n          introducer_name: introducer?.legal_name || 'Unknown Introducer',\n          introducer_id: introducer?.id || '',\n          agreement_type: agreement.agreement_type,\n          created_at: agreement.created_at,\n          status: agreement.status,\n          signing_url: signingUrl,\n        })\n      }\n      setPendingAgreements(pendingList)\n\n      // Fetch arranger's deals\n      const { data: dealsData, error: dealsError } = await supabase\n        .from('deals')\n        .select('id, name')\n        .eq('arranger_entity_id', arrangerUser.arranger_id)\n\n      if (dealsError) throw dealsError\n\n      setDeals(dealsData || [])\n\n      if (!dealsData || dealsData.length === 0) {\n        setIntroducers([])\n        setSummary({ totalIntroducers: 0, activeIntroducers: 0, totalReferrals: 0, totalFeesOwed: 0, totalFeesPaid: 0, totalCommissions: 0 })\n        return\n      }\n\n      const dealIds = dealsData.map(d => d.id)\n\n      // Fetch referrals from all deals\n      const { data: referrals, error: refError } = await supabase\n        .from('deal_memberships')\n        .select(`referred_by_entity_id, investor_id, deal_id`)\n        .in('deal_id', dealIds)\n        .eq('referred_by_entity_type', 'introducer')\n        .not('referred_by_entity_id', 'is', null)\n\n      if (refError) throw refError\n\n      const introducerIds = [...new Set((referrals || []).map(r => r.referred_by_entity_id))]\n\n      if (introducerIds.length === 0) {\n        setIntroducers([])\n        setSummary({ totalIntroducers: 0, activeIntroducers: 0, totalReferrals: 0, totalFeesOwed: 0, totalFeesPaid: 0, totalCommissions: 0 })\n        return\n      }\n\n      // Fetch introducer data\n      const { data: introducersData, error: introducersError } = await supabase\n        .from('introducers')\n        .select('*')\n        .in('id', introducerIds)\n        .order('legal_name')\n\n      if (introducersError) throw introducersError\n\n      // Fetch fee plans for each introducer\n      const { data: feePlansData } = await supabase\n        .from('fee_plans')\n        .select('id, name, is_active, introducer_id')\n        .eq('created_by_arranger_id', arrangerUser.arranger_id)\n        .in('introducer_id', introducerIds)\n\n      // Group fee plans by introducer\n      const feePlansByIntroducer = new Map<string, FeePlan[]>()\n      ;(feePlansData || []).forEach((fp: any) => {\n        const existing = feePlansByIntroducer.get(fp.introducer_id) || []\n        existing.push({ id: fp.id, name: fp.name, is_active: fp.is_active })\n        feePlansByIntroducer.set(fp.introducer_id, existing)\n      })\n\n      // Fetch commissions for each introducer\n      const { data: commissionsData } = await supabase\n        .from('introducer_commissions')\n        .select('introducer_id, status, accrual_amount, currency')\n        .eq('arranger_id', arrangerUser.arranger_id)\n        .in('introducer_id', introducerIds)\n\n      // Group commissions by introducer\n      const commissionsByIntroducer = new Map<string, CommissionSummaryType>()\n      introducerIds.forEach(id => {\n        commissionsByIntroducer.set(id, {\n          accrued: 0,\n          invoice_requested: 0,\n          invoice_submitted: 0,\n          invoiced: 0,\n          paid: 0,\n          cancelled: 0,\n          total_owed: 0,\n          currency: 'USD',\n        })\n      })\n\n      ;(commissionsData || []).forEach((c: any) => {\n        const summary = commissionsByIntroducer.get(c.introducer_id)\n        if (summary) {\n          const amount = Number(c.accrual_amount) || 0\n          if (c.status === 'accrued') summary.accrued += amount\n          else if (c.status === 'invoice_requested') summary.invoice_requested += amount\n          else if (c.status === 'invoice_submitted') summary.invoice_submitted = (summary.invoice_submitted || 0) + amount\n          else if (c.status === 'invoiced') summary.invoiced += amount\n          else if (c.status === 'paid') summary.paid += amount\n          else if (c.status === 'cancelled') summary.cancelled += amount\n          if (c.currency) summary.currency = c.currency\n        }\n      })\n\n      // Calculate total_owed for each\n      commissionsByIntroducer.forEach((summary) => {\n        summary.total_owed = summary.accrued + summary.invoice_requested + (summary.invoice_submitted || 0) + summary.invoiced\n      })\n\n      // Get subscription values for referral value calculation\n      const investorIds = [...new Set((referrals || []).filter(r => r.investor_id).map(r => r.investor_id))]\n      const { data: subs } = await supabase\n        .from('subscriptions')\n        .select('investor_id, commitment')\n        .in('investor_id', investorIds)\n\n      const subsByInvestor = new Map<string, number>()\n      ;(subs || []).forEach((s: any) => {\n        const current = subsByInvestor.get(s.investor_id) || 0\n        subsByInvestor.set(s.investor_id, current + (Number(s.commitment) || 0))\n      })\n\n      // Build introducer objects\n      const processedIntroducers: Introducer[] = (introducersData || []).map((i: any) => {\n        const introRefs = (referrals || []).filter(r => r.referred_by_entity_id === i.id)\n        const dealsInvolved = [...new Set(introRefs.map(r => r.deal_id).filter(Boolean))]\n        const totalValue = introRefs.reduce((sum, r) => {\n          if (r.investor_id) return sum + (subsByInvestor.get(r.investor_id) || 0)\n          return sum\n        }, 0)\n\n        const commissionSummary = commissionsByIntroducer.get(i.id) || {\n          accrued: 0,\n          invoice_requested: 0,\n          invoice_submitted: 0,\n          invoiced: 0,\n          paid: 0,\n          cancelled: 0,\n          total_owed: 0,\n          currency: 'USD',\n        }\n\n        return {\n          id: i.id,\n          legal_name: i.legal_name || 'Unknown Introducer',\n          contact_name: i.contact_name,\n          email: i.email,\n          status: i.status || 'active',\n          default_commission_bps: i.default_commission_bps,\n          commission_cap_amount: i.commission_cap_amount ? Number(i.commission_cap_amount) : null,\n          agreement_expiry_date: i.agreement_expiry_date,\n          logo_url: i.logo_url,\n          deals_count: dealsInvolved.length,\n          referrals_count: introRefs.length,\n          total_referral_value: totalValue,\n          fee_plans: feePlansByIntroducer.get(i.id) || [],\n          commission_summary: commissionSummary,\n        }\n      })\n\n      setIntroducers(processedIntroducers)\n\n      // Calculate overall summary\n      let totalFeesOwed = 0\n      let totalFeesPaid = 0\n      processedIntroducers.forEach(i => {\n        totalFeesOwed += i.commission_summary.total_owed\n        totalFeesPaid += i.commission_summary.paid\n      })\n\n      setSummary({\n        totalIntroducers: processedIntroducers.length,\n        activeIntroducers: processedIntroducers.filter(i => i.status === 'active').length,\n        totalReferrals: processedIntroducers.reduce((sum, i) => sum + i.referrals_count, 0),\n        totalFeesOwed,\n        totalFeesPaid,\n        totalCommissions: totalFeesOwed + totalFeesPaid,\n      })\n      setError(null)\n    } catch (err) {\n      console.error('[MyIntroducersPage] Error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load introducers')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  async function fetchAllIntroducers(supabase: any) {\n    const { data: introducersData, error: introducersError } = await supabase\n      .from('introducers')\n      .select('*')\n      .order('legal_name')\n      .limit(100)\n\n    if (introducersError) throw introducersError\n\n    const processedIntroducers: Introducer[] = (introducersData || []).map((i: any) => ({\n      id: i.id,\n      legal_name: i.legal_name || 'Unknown Introducer',\n      contact_name: i.contact_name,\n      email: i.email,\n      status: i.status || 'active',\n      default_commission_bps: i.default_commission_bps,\n      commission_cap_amount: i.commission_cap_amount ? Number(i.commission_cap_amount) : null,\n      agreement_expiry_date: i.agreement_expiry_date,\n      logo_url: i.logo_url,\n      deals_count: 0,\n      referrals_count: 0,\n      total_referral_value: 0,\n      fee_plans: [],\n      commission_summary: {\n        accrued: 0,\n        invoice_requested: 0,\n        invoiced: 0,\n        paid: 0,\n        cancelled: 0,\n        total_owed: 0,\n        currency: 'USD',\n      },\n    }))\n\n    setIntroducers(processedIntroducers)\n    setSummary({\n      totalIntroducers: processedIntroducers.length,\n      activeIntroducers: processedIntroducers.filter(i => i.status === 'active').length,\n      totalReferrals: 0,\n      totalFeesOwed: 0,\n      totalFeesPaid: 0,\n      totalCommissions: 0,\n    })\n  }\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  // Filter introducers by deal (check if they have referrals on selected deal)\n  const filteredIntroducers = introducers.filter(introducer => {\n    const matchesStatus = statusFilter === 'all' || introducer.status === statusFilter\n    const matchesSearch = !search ||\n      introducer.legal_name?.toLowerCase().includes(search.toLowerCase()) ||\n      introducer.contact_name?.toLowerCase().includes(search.toLowerCase()) ||\n      introducer.email?.toLowerCase().includes(search.toLowerCase())\n    // For deal filter, we'd need deal-specific referral data - for now show all if dealFilter is set\n    const matchesDeal = dealFilter === 'all' || true\n    return matchesStatus && matchesSearch && matchesDeal\n  })\n\n  const today = new Date()\n  const thirtyDaysFromNow = new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000)\n\n  const handleRowClick = (introducerId: string) => {\n    setSelectedIntroducerId(introducerId)\n    setDrawerOpen(true)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        <span className=\"ml-3 text-muted-foreground\">Loading introducers...</span>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-16\">\n        <AlertCircle className=\"h-12 w-12 text-destructive mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">Error Loading Introducers</h3>\n        <p className=\"text-muted-foreground\">{error}</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground\">My Introducers</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            {arrangerInfo ? `Introducers working with ${arrangerInfo.legal_name}` : 'View all registered introducers'}\n          </p>\n        </div>\n      </div>\n\n      {/* Pending Agreements Section */}\n      {pendingAgreements.length > 0 && (\n        <Card className=\"border-amber-500/30 bg-amber-500/5\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <Clock className=\"h-5 w-5 text-amber-500\" />\n              Agreements Awaiting Your Signature ({pendingAgreements.length})\n            </CardTitle>\n            <CardDescription>\n              Review and sign these introducer agreements to activate them\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {pendingAgreements.map((agreement) => (\n                <div\n                  key={agreement.id}\n                  className=\"flex items-center justify-between p-3 rounded-lg border border-amber-500/20 bg-background\"\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"h-10 w-10 rounded-lg bg-amber-500/10 flex items-center justify-center\">\n                      <FileText className=\"h-5 w-5 text-amber-500\" />\n                    </div>\n                    <div>\n                      <div className=\"font-medium\">{agreement.introducer_name}</div>\n                      <div className=\"text-sm text-muted-foreground capitalize\">\n                        {agreement.agreement_type.replace(/_/g, ' ')} • Created {formatDate(agreement.created_at)}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    {agreement.signing_url ? (\n                      <Button asChild size=\"sm\" className=\"bg-amber-500 hover:bg-amber-600\">\n                        <Link href={agreement.signing_url}>\n                          <PenTool className=\"h-4 w-4 mr-1\" />\n                          Sign Now\n                        </Link>\n                      </Button>\n                    ) : (\n                      <Button\n                        size=\"sm\"\n                        onClick={async () => {\n                          try {\n                            const res = await fetch(`/api/introducer-agreements/${agreement.id}/sign`, {\n                              method: 'POST'\n                            })\n                            if (res.ok) {\n                              const data = await res.json()\n                              if (data.signing_url) {\n                                window.location.href = data.signing_url\n                              }\n                            }\n                          } catch (err) {\n                            console.error('Failed to initiate signing:', err)\n                          }\n                        }}\n                        className=\"bg-amber-500 hover:bg-amber-600\"\n                      >\n                        <PenTool className=\"h-4 w-4 mr-1\" />\n                        Initiate Signing\n                      </Button>\n                    )}\n                    <Button variant=\"outline\" size=\"sm\" asChild>\n                      <Link href={`/versotech_main/introducer-agreements/${agreement.id}`}>\n                        View\n                      </Link>\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Summary Cards - 6 cards like My Partners */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <UserPlus className=\"h-4 w-4\" />Total Introducers\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{summary.totalIntroducers}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">In your network</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle2 className=\"h-4 w-4\" />Active\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{summary.activeIntroducers}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">With valid agreements</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Handshake className=\"h-4 w-4\" />Referrals\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-blue-600\">{summary.totalReferrals}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Investors introduced</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <TrendingUp className=\"h-4 w-4\" />Total Commissions\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-purple-600\">{formatCurrency(summary.totalCommissions, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">All time</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Wallet className=\"h-4 w-4\" />Fees Owed\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-600\">{formatCurrency(summary.totalFeesOwed, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Pending payment</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CreditCard className=\"h-4 w-4\" />Fees Paid\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600\">{formatCurrency(summary.totalFeesPaid, 'USD')}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">Completed</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input placeholder=\"Search introducers...\" value={search} onChange={(e) => setSearch(e.target.value)} className=\"pl-10\" />\n            </div>\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger className=\"w-full md:w-48\"><SelectValue placeholder=\"Filter by status\" /></SelectTrigger>\n              <SelectContent>\n                {STATUS_FILTERS.map((o) => <SelectItem key={o.value} value={o.value}>{o.label}</SelectItem>)}\n              </SelectContent>\n            </Select>\n            {deals.length > 0 && (\n              <Select value={dealFilter} onValueChange={setDealFilter}>\n                <SelectTrigger className=\"w-full md:w-48\"><SelectValue placeholder=\"Filter by deal\" /></SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Deals</SelectItem>\n                  {deals.map((d) => <SelectItem key={d.id} value={d.id}>{d.name}</SelectItem>)}\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Introducers</CardTitle>\n          <CardDescription>{filteredIntroducers.length} introducer{filteredIntroducers.length !== 1 ? 's' : ''} found</CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredIntroducers.length === 0 ? (\n            <div className=\"border border-dashed border-muted rounded-lg py-12 flex flex-col items-center justify-center text-center space-y-2\">\n              <UserPlus className=\"h-10 w-10 text-muted-foreground\" />\n              <p className=\"text-sm text-muted-foreground\">{search || statusFilter !== 'all' ? 'No introducers match your filters' : 'No introducers in your network yet'}</p>\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Introducer</TableHead>\n                    <TableHead>Rate / Fee Plans</TableHead>\n                    <TableHead>Referrals</TableHead>\n                    <TableHead>Commission Status</TableHead>\n                    <TableHead>Agreement</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead className=\"text-right\">Actions</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredIntroducers.map((introducer) => {\n                    const isExpiringSoon = introducer.agreement_expiry_date && new Date(introducer.agreement_expiry_date) <= thirtyDaysFromNow && new Date(introducer.agreement_expiry_date) > today\n                    const isExpired = introducer.agreement_expiry_date && new Date(introducer.agreement_expiry_date) <= today\n                    return (\n                      <TableRow\n                        key={introducer.id}\n                        className=\"cursor-pointer hover:bg-muted/50\"\n                        onClick={() => handleRowClick(introducer.id)}\n                      >\n                        <TableCell>\n                          <div className=\"flex items-center gap-3\">\n                            {introducer.logo_url ? (\n                              <img src={introducer.logo_url} alt={introducer.legal_name} className=\"h-10 w-10 rounded-lg object-cover\" />\n                            ) : (\n                              <div className=\"h-10 w-10 rounded-lg bg-muted flex items-center justify-center\"><Building2 className=\"h-5 w-5 text-muted-foreground\" /></div>\n                            )}\n                            <div>\n                              <div className=\"font-medium\">{introducer.legal_name}</div>\n                              {introducer.email && <div className=\"text-xs text-muted-foreground flex items-center gap-1\"><Mail className=\"h-3 w-3\" />{introducer.email}</div>}\n                            </div>\n                          </div>\n                        </TableCell>\n                        <TableCell onClick={(e) => e.stopPropagation()}>\n                          <div className=\"space-y-1\">\n                            {introducer.default_commission_bps ? (\n                              <div className=\"font-medium flex items-center gap-1\"><Percent className=\"h-3 w-3\" />{(introducer.default_commission_bps / 100).toFixed(2)}%</div>\n                            ) : (\n                              <span className=\"text-muted-foreground text-xs\">No default rate</span>\n                            )}\n                            {introducer.fee_plans.length > 0 && (\n                              <div className=\"flex flex-wrap gap-1\">\n                                {introducer.fee_plans.slice(0, 2).map((fp) => (\n                                  <Badge key={fp.id} variant={fp.is_active ? 'default' : 'secondary'} className=\"text-xs\">\n                                    {fp.name}\n                                  </Badge>\n                                ))}\n                                {introducer.fee_plans.length > 2 && (\n                                  <Badge variant=\"outline\" className=\"text-xs\">+{introducer.fee_plans.length - 2}</Badge>\n                                )}\n                              </div>\n                            )}\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          <div>\n                            <div className=\"font-medium\">{introducer.referrals_count} referrals</div>\n                            <div className=\"text-xs text-muted-foreground\">{introducer.deals_count} deal{introducer.deals_count !== 1 ? 's' : ''}</div>\n                          </div>\n                        </TableCell>\n                        <TableCell onClick={(e) => e.stopPropagation()}>\n                          <CommissionSummary summary={introducer.commission_summary} variant=\"inline\" />\n                        </TableCell>\n                        <TableCell>\n                          {introducer.agreement_expiry_date ? (\n                            <div className={cn(\"text-sm\", isExpired && \"text-red-600\", isExpiringSoon && \"text-yellow-600\")}>\n                              <div className=\"flex items-center gap-1\"><FileText className=\"h-3 w-3\" />{formatDate(introducer.agreement_expiry_date)}</div>\n                              {isExpired && <Badge variant=\"destructive\" className=\"text-xs mt-1\">Expired</Badge>}\n                              {isExpiringSoon && <Badge variant=\"outline\" className=\"text-xs mt-1 bg-yellow-100\">Expiring Soon</Badge>}\n                            </div>\n                          ) : <span className=\"text-muted-foreground text-xs\">No agreement</span>}\n                        </TableCell>\n                        <TableCell>\n                          <Badge variant=\"outline\" className={cn('capitalize', STATUS_STYLES[introducer.status] || STATUS_STYLES.active)}>{introducer.status}</Badge>\n                        </TableCell>\n                        <TableCell className=\"text-right\" onClick={(e) => e.stopPropagation()}>\n                          <div className=\"flex items-center justify-end gap-1\">\n                            {arrangerInfo && (\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={(e) => {\n                                  e.stopPropagation()\n                                  setSelectedIntroducerForAgreement(introducer)\n                                  setCreateAgreementOpen(true)\n                                }}\n                              >\n                                <Plus className=\"h-4 w-4 mr-1\" />\n                                Agreement\n                              </Button>\n                            )}\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={(e) => {\n                                e.stopPropagation()\n                                handleRowClick(introducer.id)\n                              }}\n                            >\n                              <ExternalLink className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    )\n                  })}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Create Agreement Dialog */}\n      {selectedIntroducerForAgreement && (\n        <CreateAgreementDialog\n          open={createAgreementOpen}\n          onOpenChange={(open) => {\n            setCreateAgreementOpen(open)\n            if (!open) setSelectedIntroducerForAgreement(null)\n          }}\n          introducerId={selectedIntroducerForAgreement.id}\n          introducerName={selectedIntroducerForAgreement.legal_name}\n          defaultCommissionBps={selectedIntroducerForAgreement.default_commission_bps || 100}\n        />\n      )}\n\n      {/* Introducer Detail Drawer */}\n      <IntroducerDetailDrawer\n        introducerId={selectedIntroducerId}\n        open={drawerOpen}\n        onOpenChange={setDrawerOpen}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}