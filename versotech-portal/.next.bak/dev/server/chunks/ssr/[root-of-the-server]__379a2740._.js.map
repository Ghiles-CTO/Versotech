{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/arranger-profile/arranger-profile-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ArrangerProfileClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call ArrangerProfileClient() from the server but ArrangerProfileClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/versotech-portal/src/app/(main)/versotech_main/arranger-profile/arranger-profile-client.tsx <module evaluation>\",\n    \"ArrangerProfileClient\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,wBAAwB,IAAA,+RAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,6HACA","ignoreList":[0]}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/arranger-profile/arranger-profile-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ArrangerProfileClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call ArrangerProfileClient() from the server but ArrangerProfileClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/versotech-portal/src/app/(main)/versotech_main/arranger-profile/arranger-profile-client.tsx\",\n    \"ArrangerProfileClient\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,wBAAwB,IAAA,+RAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,yGACA","ignoreList":[0]}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/arranger-profile/page.tsx"],"sourcesContent":["import { createClient, createServiceClient } from '@/lib/supabase/server'\r\nimport { AlertCircle } from 'lucide-react'\r\nimport { ArrangerProfileClient } from './arranger-profile-client'\r\n\r\nexport const dynamic = 'force-dynamic'\r\n\r\nexport default async function ArrangerProfilePage() {\r\n  const clientSupabase = await createClient()\r\n  const { data: { user }, error: userError } = await clientSupabase.auth.getUser()\r\n\r\n  if (!user || userError) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"text-center py-16\">\r\n          <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n            Authentication Required\r\n          </h3>\r\n          <p className=\"text-muted-foreground\">\r\n            Please log in to view your profile.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const serviceSupabase = createServiceClient()\r\n\r\n  // Check if user is an arranger\r\n  const { data: personas } = await serviceSupabase.rpc('get_user_personas', {\r\n    p_user_id: user.id\r\n  })\r\n\r\n  const arrangerPersona = personas?.find((p: any) => p.persona_type === 'arranger')\r\n\r\n  if (!arrangerPersona) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"text-center py-16\">\r\n          <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n            Arranger Access Required\r\n          </h3>\r\n          <p className=\"text-muted-foreground\">\r\n            This section is available only to arranger users.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Get arranger user info\r\n  const { data: arrangerUser } = await serviceSupabase\r\n    .from('arranger_users')\r\n    .select('arranger_id, role, is_primary, can_sign, signature_specimen_url, signature_specimen_uploaded_at')\r\n    .eq('user_id', user.id)\r\n    .maybeSingle()\r\n\r\n  if (!arrangerUser?.arranger_id) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"text-center py-16\">\r\n          <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n            No Arranger Profile Linked\r\n          </h3>\r\n          <p className=\"text-muted-foreground\">\r\n            Please contact the VERSO team to link your arranger profile.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Get arranger entity details\r\n  const { data: arranger } = await serviceSupabase\r\n    .from('arranger_entities')\r\n    .select('*')\r\n    .eq('id', arrangerUser.arranger_id)\r\n    .maybeSingle()\r\n\r\n  // Get user profile info\r\n  const { data: profile } = await serviceSupabase\r\n    .from('profiles')\r\n    .select('display_name, email, avatar_url')\r\n    .eq('id', user.id)\r\n    .maybeSingle()\r\n\r\n  // Get deal count for this arranger\r\n  const { count: dealCount } = await serviceSupabase\r\n    .from('deals')\r\n    .select('id', { count: 'exact', head: true })\r\n    .eq('arranger_entity_id', arrangerUser.arranger_id)\r\n\r\n  return (\r\n    <ArrangerProfileClient\r\n      userEmail={user.email || ''}\r\n      profile={profile ? {\r\n        full_name: profile.display_name,\r\n        email: profile.email || user.email || '',\r\n        avatar_url: profile.avatar_url\r\n      } : null}\r\n      arrangerInfo={arranger ? {\r\n        id: arranger.id,\r\n        legal_name: arranger.legal_name,\r\n        company_name: arranger.legal_name, // Use legal_name as company_name doesn't exist\r\n        registration_number: arranger.registration_number,\r\n        tax_id: arranger.tax_id,\r\n        regulator: arranger.regulator,\r\n        license_number: arranger.license_number,\r\n        license_type: arranger.license_type,\r\n        license_expiry_date: arranger.license_expiry_date,\r\n        email: arranger.email,\r\n        phone: arranger.phone,\r\n        address: arranger.address,\r\n        kyc_status: arranger.kyc_status,\r\n        kyc_approved_at: arranger.kyc_approved_at,\r\n        kyc_expires_at: arranger.kyc_expires_at,\r\n        status: arranger.status,\r\n        is_active: arranger.status === 'active', // Derive from status\r\n        created_at: arranger.created_at,\r\n        logo_url: arranger.logo_url, // Pass logo URL for display and upload\r\n        // Entity type\r\n        type: arranger.type,\r\n        // Phone numbers\r\n        phone_mobile: arranger.phone_mobile,\r\n        phone_office: arranger.phone_office,\r\n        // Individual KYC fields\r\n        first_name: arranger.first_name,\r\n        middle_name: arranger.middle_name,\r\n        last_name: arranger.last_name,\r\n        name_suffix: arranger.name_suffix,\r\n        date_of_birth: arranger.date_of_birth,\r\n        country_of_birth: arranger.country_of_birth,\r\n        nationality: arranger.nationality,\r\n        // US Tax compliance\r\n        is_us_citizen: arranger.is_us_citizen,\r\n        is_us_taxpayer: arranger.is_us_taxpayer,\r\n        us_taxpayer_id: arranger.us_taxpayer_id,\r\n        country_of_tax_residency: arranger.country_of_tax_residency,\r\n        // ID Document\r\n        id_type: arranger.id_type,\r\n        id_number: arranger.id_number,\r\n        id_issue_date: arranger.id_issue_date,\r\n        id_expiry_date: arranger.id_expiry_date,\r\n        id_issuing_country: arranger.id_issuing_country,\r\n        // Residential Address (for individuals)\r\n        residential_street: arranger.residential_street,\r\n        residential_line_2: arranger.residential_line_2,\r\n        residential_city: arranger.residential_city,\r\n        residential_state: arranger.residential_state,\r\n        residential_postal_code: arranger.residential_postal_code,\r\n        residential_country: arranger.residential_country,\r\n        // Additional KYC fields\r\n        middle_initial: arranger.middle_initial,\r\n        proof_of_address_date: arranger.proof_of_address_date,\r\n        proof_of_address_expiry: arranger.proof_of_address_expiry,\r\n        tax_id_number: arranger.tax_id_number,\r\n      } : null}\r\n      arrangerUserInfo={{\r\n        role: arrangerUser.role,\r\n        is_active: true, // arranger_users doesn't have is_active, assume active\r\n        can_sign: arrangerUser.can_sign || false,\r\n        signature_specimen_url: arrangerUser.signature_specimen_url,\r\n        signature_specimen_uploaded_at: arrangerUser.signature_specimen_uploaded_at\r\n      }}\r\n      dealCount={dealCount || 0}\r\n    />\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}