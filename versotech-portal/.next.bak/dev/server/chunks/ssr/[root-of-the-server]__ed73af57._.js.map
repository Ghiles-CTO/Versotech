{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/commercial-partner-profile/commercial-partner-profile-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CommercialPartnerProfileClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call CommercialPartnerProfileClient() from the server but CommercialPartnerProfileClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/versotech-portal/src/components/commercial-partner-profile/commercial-partner-profile-client.tsx <module evaluation>\",\n    \"CommercialPartnerProfileClient\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,iCAAiC,IAAA,+RAAuB,EACjE;IAAa,MAAM,IAAI,MAAM;AAA4Q,GACzS,kIACA","ignoreList":[0]}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/commercial-partner-profile/commercial-partner-profile-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CommercialPartnerProfileClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call CommercialPartnerProfileClient() from the server but CommercialPartnerProfileClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/versotech-portal/src/components/commercial-partner-profile/commercial-partner-profile-client.tsx\",\n    \"CommercialPartnerProfileClient\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,iCAAiC,IAAA,+RAAuB,EACjE;IAAa,MAAM,IAAI,MAAM;AAA4Q,GACzS,8GACA","ignoreList":[0]}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28main%29/versotech_main/commercial-partner-profile/page.tsx"],"sourcesContent":["import { createClient, createServiceClient } from '@/lib/supabase/server'\nimport { AlertCircle } from 'lucide-react'\nimport { CommercialPartnerProfileClient } from '@/components/commercial-partner-profile/commercial-partner-profile-client'\n\nexport const dynamic = 'force-dynamic'\n\nexport default async function CommercialPartnerProfilePage() {\n  const clientSupabase = await createClient()\n  const { data: { user }, error: userError } = await clientSupabase.auth.getUser()\n\n  if (!user || userError) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center py-16\">\n          <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            Authentication Required\n          </h3>\n          <p className=\"text-muted-foreground\">\n            Please log in to view your profile.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  const serviceSupabase = createServiceClient()\n\n  // Check if user is a commercial partner\n  const { data: personas } = await serviceSupabase.rpc('get_user_personas', {\n    p_user_id: user.id\n  })\n\n  const cpPersona = personas?.find((p: any) => p.persona_type === 'commercial_partner')\n\n  if (!cpPersona) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center py-16\">\n          <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            Commercial Partner Access Required\n          </h3>\n          <p className=\"text-muted-foreground\">\n            This section is available only to commercial partner users.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  // Get commercial partner user info\n  const { data: cpUser } = await serviceSupabase\n    .from('commercial_partner_users')\n    .select('commercial_partner_id, role, is_primary, can_sign, can_execute_for_clients')\n    .eq('user_id', user.id)\n    .maybeSingle()\n\n  if (!cpUser?.commercial_partner_id) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"text-center py-16\">\n          <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            No Commercial Partner Profile Linked\n          </h3>\n          <p className=\"text-muted-foreground\">\n            Please contact the VERSO team to link your commercial partner profile.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  // Get commercial partner entity details\n  const { data: commercialPartner } = await serviceSupabase\n    .from('commercial_partners')\n    .select('*')\n    .eq('id', cpUser.commercial_partner_id)\n    .maybeSingle()\n\n  // Get user profile info\n  const { data: profile } = await serviceSupabase\n    .from('profiles')\n    .select('display_name, email, avatar_url')\n    .eq('id', user.id)\n    .maybeSingle()\n\n  // Get placement agreements count for this commercial partner\n  const { count: agreementCount } = await serviceSupabase\n    .from('placement_agreements')\n    .select('id', { count: 'exact', head: true })\n    .eq('commercial_partner_id', cpUser.commercial_partner_id)\n\n  return (\n    <CommercialPartnerProfileClient\n      userEmail={user.email || ''}\n      profile={profile ? {\n        full_name: profile.display_name,\n        email: profile.email || user.email || '',\n        avatar_url: profile.avatar_url\n      } : null}\n      cpInfo={commercialPartner ? {\n        id: commercialPartner.id,\n        name: commercialPartner.name,\n        legal_name: commercialPartner.legal_name,\n        type: commercialPartner.type,\n        cp_type: commercialPartner.cp_type,\n        status: commercialPartner.status,\n        regulatory_status: commercialPartner.regulatory_status,\n        regulatory_number: commercialPartner.regulatory_number,\n        jurisdiction: commercialPartner.jurisdiction,\n        contact_name: commercialPartner.contact_name,\n        contact_email: commercialPartner.contact_email,\n        contact_phone: commercialPartner.contact_phone,\n        website: commercialPartner.website,\n        payment_terms: commercialPartner.payment_terms,\n        contract_start_date: commercialPartner.contract_start_date,\n        contract_end_date: commercialPartner.contract_end_date,\n        notes: commercialPartner.notes,\n        created_at: commercialPartner.created_at,\n        logo_url: commercialPartner.logo_url,\n        kyc_status: commercialPartner.kyc_status,\n        // Phone numbers\n        phone_mobile: commercialPartner.phone_mobile,\n        phone_office: commercialPartner.phone_office,\n        email: commercialPartner.email,\n        // Individual KYC fields\n        first_name: commercialPartner.first_name,\n        middle_name: commercialPartner.middle_name,\n        last_name: commercialPartner.last_name,\n        name_suffix: commercialPartner.name_suffix,\n        date_of_birth: commercialPartner.date_of_birth,\n        country_of_birth: commercialPartner.country_of_birth,\n        nationality: commercialPartner.nationality,\n        // US Tax compliance\n        is_us_citizen: commercialPartner.is_us_citizen,\n        is_us_taxpayer: commercialPartner.is_us_taxpayer,\n        us_taxpayer_id: commercialPartner.us_taxpayer_id,\n        country_of_tax_residency: commercialPartner.country_of_tax_residency,\n        // ID Document\n        id_type: commercialPartner.id_type,\n        id_number: commercialPartner.id_number,\n        id_issue_date: commercialPartner.id_issue_date,\n        id_expiry_date: commercialPartner.id_expiry_date,\n        id_issuing_country: commercialPartner.id_issuing_country,\n        // Residential Address (for individuals)\n        residential_street: commercialPartner.residential_street,\n        residential_line_2: commercialPartner.residential_line_2,\n        residential_city: commercialPartner.residential_city,\n        residential_state: commercialPartner.residential_state,\n        residential_postal_code: commercialPartner.residential_postal_code,\n        residential_country: commercialPartner.residential_country,\n        // Additional KYC fields\n        middle_initial: commercialPartner.middle_initial,\n        proof_of_address_date: commercialPartner.proof_of_address_date,\n        proof_of_address_expiry: commercialPartner.proof_of_address_expiry,\n        tax_id_number: commercialPartner.tax_id_number,\n      } : null}\n      cpUserInfo={{\n        role: cpUser.role,\n        is_primary: cpUser.is_primary,\n        can_sign: cpUser.can_sign || false,\n        can_execute_for_clients: cpUser.can_execute_for_clients || false,\n      }}\n      agreementCount={agreementCount || 0}\n    />\n  )\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,UAAU;AAER,eAAe;IAC5B,MAAM,iBAAiB,MAAM,IAAA,uKAAY;IACzC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,eAAe,IAAI,CAAC,OAAO;IAE9E,IAAI,CAAC,QAAQ,WAAW;QACtB,qBACE,qQAAC;YAAI,WAAU;sBACb,cAAA,qQAAC;gBAAI,WAAU;;kCACb,qQAAC,0PAAW;wBAAC,WAAU;;;;;;kCACvB,qQAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,qQAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAM7C;IAEA,MAAM,kBAAkB,IAAA,8KAAmB;IAE3C,wCAAwC;IACxC,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,gBAAgB,GAAG,CAAC,qBAAqB;QACxE,WAAW,KAAK,EAAE;IACpB;IAEA,MAAM,YAAY,UAAU,KAAK,CAAC,IAAW,EAAE,YAAY,KAAK;IAEhE,IAAI,CAAC,WAAW;QACd,qBACE,qQAAC;YAAI,WAAU;sBACb,cAAA,qQAAC;gBAAI,WAAU;;kCACb,qQAAC,0PAAW;wBAAC,WAAU;;;;;;kCACvB,qQAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,qQAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAM7C;IAEA,mCAAmC;IACnC,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,gBAC5B,IAAI,CAAC,4BACL,MAAM,CAAC,8EACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,WAAW;IAEd,IAAI,CAAC,QAAQ,uBAAuB;QAClC,qBACE,qQAAC;YAAI,WAAU;sBACb,cAAA,qQAAC;gBAAI,WAAU;;kCACb,qQAAC,0PAAW;wBAAC,WAAU;;;;;;kCACvB,qQAAC;wBAAG,WAAU;kCAA2C;;;;;;kCAGzD,qQAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAM7C;IAEA,wCAAwC;IACxC,MAAM,EAAE,MAAM,iBAAiB,EAAE,GAAG,MAAM,gBACvC,IAAI,CAAC,uBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,OAAO,qBAAqB,EACrC,WAAW;IAEd,wBAAwB;IACxB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,gBAC7B,IAAI,CAAC,YACL,MAAM,CAAC,mCACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,WAAW;IAEd,6DAA6D;IAC7D,MAAM,EAAE,OAAO,cAAc,EAAE,GAAG,MAAM,gBACrC,IAAI,CAAC,wBACL,MAAM,CAAC,MAAM;QAAE,OAAO;QAAS,MAAM;IAAK,GAC1C,EAAE,CAAC,yBAAyB,OAAO,qBAAqB;IAE3D,qBACE,qQAAC,6PAA8B;QAC7B,WAAW,KAAK,KAAK,IAAI;QACzB,SAAS,UAAU;YACjB,WAAW,QAAQ,YAAY;YAC/B,OAAO,QAAQ,KAAK,IAAI,KAAK,KAAK,IAAI;YACtC,YAAY,QAAQ,UAAU;QAChC,IAAI;QACJ,QAAQ,oBAAoB;YAC1B,IAAI,kBAAkB,EAAE;YACxB,MAAM,kBAAkB,IAAI;YAC5B,YAAY,kBAAkB,UAAU;YACxC,MAAM,kBAAkB,IAAI;YAC5B,SAAS,kBAAkB,OAAO;YAClC,QAAQ,kBAAkB,MAAM;YAChC,mBAAmB,kBAAkB,iBAAiB;YACtD,mBAAmB,kBAAkB,iBAAiB;YACtD,cAAc,kBAAkB,YAAY;YAC5C,cAAc,kBAAkB,YAAY;YAC5C,eAAe,kBAAkB,aAAa;YAC9C,eAAe,kBAAkB,aAAa;YAC9C,SAAS,kBAAkB,OAAO;YAClC,eAAe,kBAAkB,aAAa;YAC9C,qBAAqB,kBAAkB,mBAAmB;YAC1D,mBAAmB,kBAAkB,iBAAiB;YACtD,OAAO,kBAAkB,KAAK;YAC9B,YAAY,kBAAkB,UAAU;YACxC,UAAU,kBAAkB,QAAQ;YACpC,YAAY,kBAAkB,UAAU;YACxC,gBAAgB;YAChB,cAAc,kBAAkB,YAAY;YAC5C,cAAc,kBAAkB,YAAY;YAC5C,OAAO,kBAAkB,KAAK;YAC9B,wBAAwB;YACxB,YAAY,kBAAkB,UAAU;YACxC,aAAa,kBAAkB,WAAW;YAC1C,WAAW,kBAAkB,SAAS;YACtC,aAAa,kBAAkB,WAAW;YAC1C,eAAe,kBAAkB,aAAa;YAC9C,kBAAkB,kBAAkB,gBAAgB;YACpD,aAAa,kBAAkB,WAAW;YAC1C,oBAAoB;YACpB,eAAe,kBAAkB,aAAa;YAC9C,gBAAgB,kBAAkB,cAAc;YAChD,gBAAgB,kBAAkB,cAAc;YAChD,0BAA0B,kBAAkB,wBAAwB;YACpE,cAAc;YACd,SAAS,kBAAkB,OAAO;YAClC,WAAW,kBAAkB,SAAS;YACtC,eAAe,kBAAkB,aAAa;YAC9C,gBAAgB,kBAAkB,cAAc;YAChD,oBAAoB,kBAAkB,kBAAkB;YACxD,wCAAwC;YACxC,oBAAoB,kBAAkB,kBAAkB;YACxD,oBAAoB,kBAAkB,kBAAkB;YACxD,kBAAkB,kBAAkB,gBAAgB;YACpD,mBAAmB,kBAAkB,iBAAiB;YACtD,yBAAyB,kBAAkB,uBAAuB;YAClE,qBAAqB,kBAAkB,mBAAmB;YAC1D,wBAAwB;YACxB,gBAAgB,kBAAkB,cAAc;YAChD,uBAAuB,kBAAkB,qBAAqB;YAC9D,yBAAyB,kBAAkB,uBAAuB;YAClE,eAAe,kBAAkB,aAAa;QAChD,IAAI;QACJ,YAAY;YACV,MAAM,OAAO,IAAI;YACjB,YAAY,OAAO,UAAU;YAC7B,UAAU,OAAO,QAAQ,IAAI;YAC7B,yBAAyB,OAAO,uBAAuB,IAAI;QAC7D;QACA,gBAAgB,kBAAkB;;;;;;AAGxC"}}]
}