{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"text-foreground h-11 md:h-10 px-2 text-left align-middle font-medium text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        // Responsive: smaller text on mobile, allow text wrapping for narrow screens\n        \"p-2 align-middle text-xs sm:text-sm [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,qQAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,qQAAC;YACC,aAAU;YACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,6EAA6E;QAC7E,+JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,6EAA6E;QAC7E,2GACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-5 w-5 md:h-4 md:w-4 shrink-0 rounded border border-white/20 bg-white/5 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400/20 focus-visible:border-blue-400/50 disabled:cursor-not-allowed disabled:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-white\")}\n    >\n      <Check className=\"h-4 w-4 md:h-3.5 md:w-3.5\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,0OAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC,mMAAsB;QACrB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,uTACA;QAED,GAAG,KAAK;kBAET,cAAA,qQAAC,wMAA2B;YAC1B,WAAW,IAAA,gJAAE,EAAC;sBAEd,cAAA,qQAAC,oOAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,mMAAsB,CAAC,WAAW"}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,yBAAW,0OAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,qQAAC;QACC,WAAW,IAAA,gJAAE,EACX,+RACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/approvals/approval-action-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from '@/components/ui/select'\nimport { CheckCircle2, XCircle, AlertTriangle } from 'lucide-react'\nimport { Approval } from '@/types/approvals'\nimport { toast } from 'sonner'\n\ninterface ApprovalActionDialogProps {\n  approval: Approval | null\n  action: 'approve' | 'reject' | null\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  onSuccess: () => void\n}\n\nconst REJECTION_REASONS = [\n  { value: 'kyc_incomplete', label: 'KYC Documentation Incomplete' },\n  { value: 'insufficient_funds', label: 'Insufficient Funds' },\n  { value: 'deal_closed', label: 'Deal Closed/No Longer Available' },\n  { value: 'minimum_not_met', label: 'Minimum Investment Not Met' },\n  { value: 'compliance_issue', label: 'Compliance Issue' },\n  { value: 'investor_ineligible', label: 'Investor Ineligible' },\n  { value: 'documentation_error', label: 'Documentation Error' },\n  { value: 'other', label: 'Other (please specify)' }\n]\n\nexport function ApprovalActionDialog({\n  approval,\n  action,\n  open,\n  onOpenChange,\n  onSuccess\n}: ApprovalActionDialogProps) {\n  const [notes, setNotes] = useState('')\n  const [rejectionReason, setRejectionReason] = useState('')\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  const handleClose = () => {\n    setNotes('')\n    setRejectionReason('')\n    onOpenChange(false)\n  }\n\n  const handleSubmit = async () => {\n    if (!approval || !action) return\n\n    // Validation\n    if (action === 'reject' && !rejectionReason) {\n      toast.error('Please select a rejection reason')\n      return\n    }\n\n    setIsSubmitting(true)\n\n    try {\n      const response = await fetch(`/api/approvals/${approval.id}/action`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          action,\n          notes: notes.trim() || undefined,\n          rejection_reason: action === 'reject' ? rejectionReason : undefined\n        })\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || `Failed to ${action} approval`)\n      }\n\n      toast.success(data.message || `Successfully ${action}d approval`)\n      handleClose()\n      onSuccess()\n    } catch (error) {\n      console.error(`Error ${action}ing approval:`, error)\n      toast.error(error instanceof Error ? error.message : `Failed to ${action} approval`)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  if (!approval || !action) return null\n\n  const isApprove = action === 'approve'\n  const entityAmount = approval.entity_metadata?.requested_amount ||\n    approval.entity_metadata?.amount\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[600px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            {isApprove ? (\n              <>\n                <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n                Approve Request\n              </>\n            ) : (\n              <>\n                <XCircle className=\"h-5 w-5 text-red-600\" />\n                Reject Request\n              </>\n            )}\n          </DialogTitle>\n          <DialogDescription>\n            {isApprove\n              ? 'Review the details below and confirm your approval.'\n              : 'Provide a reason for rejection. The requester will be notified.'\n            }\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {/* Request Details */}\n          <div className=\"rounded-lg border border-border bg-card p-4 space-y-3\">\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-muted-foreground\">Request Type:</span>\n                <p className=\"font-medium capitalize mt-1\">\n                  {approval.entity_type.replace(/_/g, ' ')}\n                </p>\n              </div>\n              <div>\n                <span className=\"text-muted-foreground\">Requested By:</span>\n                <p className=\"font-medium mt-1\">\n                  {approval.requested_by_profile?.display_name || 'Unknown'}\n                </p>\n              </div>\n              {entityAmount && (\n                <div>\n                  <span className=\"text-muted-foreground\">Amount:</span>\n                  <p className=\"font-medium mt-1\">\n                    ${parseFloat(entityAmount).toLocaleString()}\n                  </p>\n                </div>\n              )}\n              {approval.related_investor && (\n                <div>\n                  <span className=\"text-muted-foreground\">Investor:</span>\n                  <p className=\"font-medium mt-1\">\n                    {approval.related_investor.legal_name}\n                  </p>\n                </div>\n              )}\n              {approval.related_deal && (\n                <div className=\"col-span-2\">\n                  <span className=\"text-muted-foreground\">Deal:</span>\n                  <p className=\"font-medium mt-1\">\n                    {approval.related_deal.name}\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Warning for high-value approvals */}\n          {isApprove && entityAmount && parseFloat(entityAmount) > 50000 && (\n            <div className=\"flex items-start gap-2 rounded-lg border border-amber-500/20 bg-amber-500/10 p-3\">\n              <AlertTriangle className=\"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0\" />\n              <div className=\"text-sm\">\n                <p className=\"font-medium text-amber-900 dark:text-amber-200\">High-Value Approval</p>\n                <p className=\"text-amber-800 dark:text-amber-300 mt-1\">\n                  This approval involves an amount greater than $50,000. Please ensure all\n                  documentation is complete.\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Rejection Reason Selection */}\n          {!isApprove && (\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"rejection-reason\" className=\"text-sm font-medium\">\n                Rejection Reason *\n              </Label>\n              <Select value={rejectionReason} onValueChange={setRejectionReason}>\n                <SelectTrigger id=\"rejection-reason\">\n                  <SelectValue placeholder=\"Select a reason\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {REJECTION_REASONS.map((reason) => (\n                    <SelectItem key={reason.value} value={reason.value}>\n                      {reason.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n\n          {/* Notes Field */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\" className=\"text-sm font-medium\">\n              {isApprove ? 'Additional Notes (Optional)' : 'Additional Details *'}\n            </Label>\n            <Textarea\n              id=\"notes\"\n              placeholder={\n                isApprove\n                  ? 'Add any notes about this approval...'\n                  : 'Provide specific details about why this request is being rejected...'\n              }\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              rows={4}\n              className=\"resize-none\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              {isApprove\n                ? 'Notes will be saved in the approval history.'\n                : 'This message will be sent to the requester along with the rejection reason.'\n              }\n            </p>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={handleClose}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </Button>\n          <Button\n            variant={isApprove ? 'default' : 'destructive'}\n            onClick={handleSubmit}\n            disabled={isSubmitting || (!isApprove && !rejectionReason)}\n          >\n            {isSubmitting ? (\n              <>\n                <span className=\"mr-2\">Processing...</span>\n              </>\n            ) : (\n              <>\n                {isApprove ? (\n                  <>\n                    <CheckCircle2 className=\"mr-2 h-4 w-4\" />\n                    Confirm Approval\n                  </>\n                ) : (\n                  <>\n                    <XCircle className=\"mr-2 h-4 w-4\" />\n                    Confirm Rejection\n                  </>\n                )}\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 821, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 max-w-[calc(100vw-2rem)] origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\n          className\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBAAO,qQAAC,kMAAqB;QAAC,aAAU;QAAW,GAAG,KAAK;;;;;;AAC7D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,qQAAC,qMAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,GAAG,OACmD;IACtD,qBACE,qQAAC,oMAAuB;kBACtB,cAAA,qQAAC,qMAAwB;YACvB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,gJAAE,EACX,2fACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,qQAAC,oMAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE"}},
    {"offset": {"line": 892, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/approvals/approval-filters.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from '@/components/ui/popover'\r\nimport { Filter } from 'lucide-react'\r\nimport { ApprovalEntityType, ApprovalPriority } from '@/types/approvals'\r\n\r\nexport interface FilterState {\r\n  entity_types: ApprovalEntityType[]\r\n  priorities: ApprovalPriority[]\r\n  assigned_to_me: boolean\r\n  overdue_only: boolean\r\n}\r\n\r\ninterface ApprovalFiltersProps {\r\n  onFilterChange: (filters: FilterState) => void\r\n  currentFilters: FilterState\r\n}\r\n\r\nexport function ApprovalFilters({ onFilterChange, currentFilters }: ApprovalFiltersProps) {\r\n  const [filters, setFilters] = useState<FilterState>(currentFilters)\r\n\r\n  const entityTypes: { value: ApprovalEntityType; label: string }[] = [\n    { value: 'member_invitation', label: 'Member Invitations' },\n    { value: 'deal_interest', label: 'Deal Interests' },\n    { value: 'deal_subscription', label: 'Subscriptions' },\n    { value: 'deal_close', label: 'Deal Close' },\n    { value: 'allocation', label: 'Allocations' },\n    { value: 'kyc_change', label: 'KYC Changes' },\r\n    { value: 'withdrawal', label: 'Withdrawals' },\r\n    { value: 'profile_update', label: 'Profile Updates' },\r\n    { value: 'document_access', label: 'Document Access' },\r\n    { value: 'gdpr_deletion_request', label: 'GDPR Deletion Requests' },\r\n  ]\r\n\r\n  const priorities: { value: ApprovalPriority; label: string; color: string }[] = [\r\n    { value: 'critical', label: 'Critical', color: 'text-red-600' },\r\n    { value: 'high', label: 'High', color: 'text-orange-600' },\r\n    { value: 'medium', label: 'Medium', color: 'text-yellow-600' },\r\n    { value: 'low', label: 'Low', color: 'text-blue-600' },\r\n  ]\r\n\r\n  const updateFilter = (newFilters: Partial<FilterState>) => {\r\n    const updated = { ...filters, ...newFilters }\r\n    setFilters(updated)\r\n    onFilterChange(updated)\r\n  }\r\n\r\n  const clearFilters = () => {\r\n    const emptyFilters: FilterState = {\r\n      entity_types: [],\r\n      priorities: [],\r\n      assigned_to_me: false,\r\n      overdue_only: false\r\n    }\r\n    setFilters(emptyFilters)\r\n    onFilterChange(emptyFilters)\r\n  }\r\n\r\n  const activeFilterCount = \r\n    filters.entity_types.length + \r\n    filters.priorities.length + \r\n    (filters.assigned_to_me ? 1 : 0) + \r\n    (filters.overdue_only ? 1 : 0)\r\n\r\n  return (\r\n    <Popover>\r\n      <PopoverTrigger asChild>\r\n        <Button variant=\"outline\" size=\"sm\" className=\"relative\">\r\n          <Filter className=\"mr-2 h-4 w-4\" />\r\n          Filter\r\n          {activeFilterCount > 0 && (\r\n            <span className=\"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-blue-600 rounded-full\">\r\n              {activeFilterCount}\r\n            </span>\r\n          )}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"w-80 max-h-[80vh] overflow-y-auto\" align=\"end\" side=\"bottom\">\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <h4 className=\"font-medium mb-3 text-sm\">Request Type</h4>\r\n            <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n              {entityTypes.map((type) => (\r\n                <div key={type.value} className=\"flex items-center space-x-2\">\r\n                  <Checkbox\r\n                    id={type.value}\r\n                    checked={filters.entity_types.includes(type.value)}\r\n                    onCheckedChange={(checked) => {\r\n                      updateFilter({\r\n                        entity_types: checked\r\n                          ? [...filters.entity_types, type.value]\r\n                          : filters.entity_types.filter(t => t !== type.value)\r\n                      })\r\n                    }}\r\n                  />\r\n                  <Label \r\n                    htmlFor={type.value}\r\n                    className=\"text-sm font-normal cursor-pointer\"\r\n                  >\r\n                    {type.label}\r\n                  </Label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"border-t pt-4\">\r\n            <h4 className=\"font-medium mb-3 text-sm\">Priority</h4>\r\n            <div className=\"space-y-2\">\r\n              {priorities.map((priority) => (\r\n                <div key={priority.value} className=\"flex items-center space-x-2\">\r\n                  <Checkbox\r\n                    id={`priority-${priority.value}`}\r\n                    checked={filters.priorities.includes(priority.value)}\r\n                    onCheckedChange={(checked) => {\r\n                      updateFilter({\r\n                        priorities: checked\r\n                          ? [...filters.priorities, priority.value]\r\n                          : filters.priorities.filter(p => p !== priority.value)\r\n                      })\r\n                    }}\r\n                  />\r\n                  <Label \r\n                    htmlFor={`priority-${priority.value}`}\r\n                    className={`text-sm font-normal cursor-pointer ${priority.color}`}\r\n                  >\r\n                    {priority.label}\r\n                  </Label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"border-t pt-4 space-y-2\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Checkbox\r\n                id=\"assigned_to_me\"\r\n                checked={filters.assigned_to_me}\r\n                onCheckedChange={(checked) =>\r\n                  updateFilter({ assigned_to_me: checked as boolean })\r\n                }\r\n              />\r\n              <Label \r\n                htmlFor=\"assigned_to_me\"\r\n                className=\"text-sm font-normal cursor-pointer\"\r\n              >\r\n                Assigned to me only\r\n              </Label>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Checkbox\r\n                id=\"overdue_only\"\r\n                checked={filters.overdue_only}\r\n                onCheckedChange={(checked) =>\r\n                  updateFilter({ overdue_only: checked as boolean })\r\n                }\r\n              />\r\n              <Label \r\n                htmlFor=\"overdue_only\"\r\n                className=\"text-sm font-normal cursor-pointer\"\r\n              >\r\n                Overdue only\r\n              </Label>\r\n            </div>\r\n          </div>\r\n\r\n          {activeFilterCount > 0 && (\r\n            <div className=\"border-t pt-4\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                className=\"w-full\"\r\n                onClick={clearFilters}\r\n              >\r\n                Clear all filters\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </PopoverContent>\r\n    </Popover>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1261, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,0OAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,qQAAC,oMAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,gJAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,oMAAuB,CAAC,WAAW"}},
    {"offset": {"line": 1291, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,0OAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,qQAAC,mMAAsB;QACrB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,qQAAC,wMAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,mMAAsB,CAAC,WAAW"}},
    {"offset": {"line": 1329, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Wrapper to provide stable ID for SSR hydration\nconst Tabs = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root>\n>(({ id, ...props }, ref) => {\n  const generatedId = React.useId()\n  return <TabsPrimitive.Root ref={ref} id={id ?? generatedId} {...props} />\n})\nTabs.displayName = \"Tabs\"\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-11 md:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-2 md:py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,iDAAiD;AACjD,MAAM,qBAAO,0OAAgB,CAG3B,CAAC,EAAE,EAAE,EAAE,GAAG,OAAO,EAAE;IACnB,MAAM,cAAc,qOAAW;IAC/B,qBAAO,qQAAC,+LAAkB;QAAC,KAAK;QAAK,IAAI,MAAM;QAAc,GAAG,KAAK;;;;;;AACvE;AACA,KAAK,WAAW,GAAG;AAEnB,MAAM,yBAAW,0OAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC,+LAAkB;QACjB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,sGACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,+LAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,0OAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC,kMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,+YACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kMAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,0OAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC,kMAAqB;QACpB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kMAAqB,CAAC,WAAW"}},
    {"offset": {"line": 1397, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/approvals/approval-detail-drawer.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetDescription,\r\n  SheetHeader,\r\n  SheetTitle\r\n} from '@/components/ui/sheet'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport {\r\n  CheckCircle2,\r\n  XCircle,\r\n  Clock,\r\n  AlertTriangle,\r\n  User,\r\n  Building2,\r\n  Calendar,\r\n  FileText,\r\n  ExternalLink,\r\n  TrendingUp,\r\n  Info,\r\n  MessageCircle\r\n} from 'lucide-react'\r\nimport { Approval } from '@/types/approvals'\r\nimport { format, formatDistanceToNow } from 'date-fns'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'sonner'\r\n\r\ninterface ApprovalDetailDrawerProps {\r\n  approval: Approval | null\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  onApprove?: (approvalId: string) => Promise<void>\r\n  onReject?: (approvalId: string, reason: string) => Promise<void>\r\n}\r\n\r\nconst priorityColors = {\r\n  low: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-500/30',\r\n  medium: 'bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300 border-yellow-300 dark:border-yellow-500/30',\r\n  high: 'bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300 border-orange-300 dark:border-orange-500/30',\r\n  critical: 'bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300 border-red-300 dark:border-red-500/30'\r\n}\r\n\r\nconst statusColors = {\r\n  pending: 'bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300',\r\n  approved: 'bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300',\r\n  rejected: 'bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300',\r\n  awaiting_info: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300',\r\n  escalated: 'bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300',\r\n  cancelled: 'bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300'\r\n}\r\n\r\nconst entityTypeLabels: Record<string, string> = {\r\n  deal_interest: 'Deal Interest',\r\n  deal_subscription: 'Subscription',\r\n  deal_close: 'Deal Close',\r\n  allocation: 'Allocation',\r\n  withdrawal: 'Withdrawal',\r\n  kyc_change: 'KYC Change',\r\n  profile_update: 'Profile Update',\r\n  fee_override: 'Fee Override',\r\n  document_access: 'Document Access',\r\n  permission_grant: 'Permission Grant'\r\n}\r\n\r\nexport function ApprovalDetailDrawer({\r\n  approval,\r\n  open,\r\n  onOpenChange,\r\n  onApprove,\r\n  onReject\r\n}: ApprovalDetailDrawerProps) {\r\n  const router = useRouter()\r\n  const [slaProgress, setSlaProgress] = useState(0)\r\n  const [isApproving, setIsApproving] = useState(false)\r\n  const [isRejecting, setIsRejecting] = useState(false)\r\n  const [isCreatingConversation, setIsCreatingConversation] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (approval?.sla_breach_at) {\r\n      const now = new Date().getTime()\r\n      const created = new Date(approval.created_at).getTime()\r\n      const breach = new Date(approval.sla_breach_at).getTime()\r\n      const total = breach - created\r\n      const elapsed = now - created\r\n      const progress = Math.min(100, Math.max(0, (elapsed / total) * 100))\r\n      setSlaProgress(progress)\r\n    }\r\n  }, [approval])\r\n\r\n  if (!approval) return null\r\n\r\n  const handleApprove = async () => {\r\n    if (!onApprove) return\r\n    setIsApproving(true)\r\n    try {\r\n      await onApprove(approval.id)\r\n      onOpenChange(false)\r\n    } catch (error) {\r\n      console.error('Approval failed:', error)\r\n    } finally {\r\n      setIsApproving(false)\r\n    }\r\n  }\r\n\r\n  const handleReject = async () => {\r\n    if (!onReject) return\r\n    const reason = prompt('Please provide a rejection reason:')\r\n    if (!reason) return\r\n\r\n    setIsRejecting(true)\r\n    try {\r\n      await onReject(approval.id, reason)\r\n      onOpenChange(false)\r\n    } catch (error) {\r\n      console.error('Rejection failed:', error)\r\n    } finally {\r\n      setIsRejecting(false)\r\n    }\r\n  }\r\n\r\n  const handleMessageInvestor = async () => {\r\n    if (!approval.requested_by_profile?.id) {\r\n      toast.error('Cannot message investor', {\r\n        description: 'Investor profile not found'\r\n      })\r\n      return\r\n    }\r\n\r\n    setIsCreatingConversation(true)\r\n    try {\r\n      // Create conversation with the investor about this approval\r\n      const dealName = approval.related_deal?.name || 'Deal'\r\n      const approvalType = entityTypeLabels[approval.entity_type] || approval.entity_type\r\n      const subject = `${approvalType} - ${dealName}`\r\n\r\n      const response = await fetch('/api/conversations', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          subject,\r\n          participant_ids: [approval.requested_by_profile.id],\r\n          type: 'dm',\r\n          visibility: 'investor',\r\n          initial_message: `Regarding your ${approvalType.toLowerCase()} for ${dealName}.`,\r\n          metadata: {\r\n            approval_id: approval.id,\r\n            entity_type: approval.entity_type,\r\n            deal_id: approval.related_deal?.id\r\n          }\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json()\r\n        throw new Error(errorData.error || 'Failed to create conversation')\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      toast.success('Conversation created', {\r\n        description: `Opening conversation with ${approval.requested_by_profile.display_name || 'investor'}`\r\n      })\r\n\r\n      // Navigate to the conversation\r\n      router.push(`/versotech_main/messages?conversation=${data.conversation.id}`)\r\n      onOpenChange(false)\r\n    } catch (error) {\r\n      console.error('Error creating conversation:', error)\r\n      toast.error('Failed to create conversation', {\r\n        description: error instanceof Error ? error.message : 'Please try again'\r\n      })\r\n    } finally {\r\n      setIsCreatingConversation(false)\r\n    }\r\n  }\r\n\r\n  const slaBreachDate = approval.sla_breach_at ? new Date(approval.sla_breach_at) : null\r\n  const isOverdue = slaBreachDate && slaBreachDate < new Date()\r\n\r\n  return (\r\n    <Sheet open={open} onOpenChange={onOpenChange}>\r\n      <SheetContent className=\"w-full sm:max-w-2xl overflow-y-auto\">\r\n        <SheetHeader className=\"space-y-4\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Badge variant=\"outline\" className=\"text-sm text-foreground border-border\">\r\n                  {entityTypeLabels[approval.entity_type] || approval.entity_type}\r\n                </Badge>\r\n                <Badge className={priorityColors[approval.priority]}>\r\n                  {approval.priority.toUpperCase()}\r\n                </Badge>\r\n                <Badge className={statusColors[approval.status]}>\r\n                  {approval.status.replace('_', ' ').toUpperCase()}\r\n                </Badge>\r\n              </div>\r\n              <SheetTitle className=\"text-2xl text-foreground\">\r\n                {approval.related_deal?.name || approval.related_investor?.legal_name || 'Approval Details'}\r\n              </SheetTitle>\r\n              <SheetDescription className=\"text-muted-foreground\">\r\n                Requested {formatDistanceToNow(new Date(approval.created_at), { addSuffix: true })} by{' '}\r\n                {approval.requested_by_profile?.display_name || 'Unknown'}\r\n              </SheetDescription>\r\n            </div>\r\n          </div>\r\n\r\n          {/* SLA Countdown */}\r\n          {slaBreachDate && (\r\n            <Card className=\"border-border bg-muted/50\">\r\n              <CardContent className=\"pt-6\">\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between text-sm\">\r\n                    <span className=\"flex items-center gap-2 text-foreground\">\r\n                      <Clock className=\"h-4 w-4\" />\r\n                      SLA Deadline\r\n                    </span>\r\n                    <span className={isOverdue ? 'text-red-600 dark:text-red-400 font-semibold' : 'text-foreground'}>\r\n                      {isOverdue ? (\r\n                        <span className=\"flex items-center gap-1\">\r\n                          <AlertTriangle className=\"h-4 w-4\" />\r\n                          {formatDistanceToNow(slaBreachDate)} overdue\r\n                        </span>\r\n                      ) : (\r\n                        format(slaBreachDate, 'MMM dd, yyyy HH:mm')\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n                  <Progress value={slaProgress} className=\"h-2\" />\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          {/* Quick Actions */}\r\n          <div className=\"space-y-2\">\r\n            {approval.status === 'pending' && (onApprove || onReject) && (\r\n              <div className=\"flex gap-2\">\r\n                {onApprove && (\r\n                  <Button\r\n                    onClick={handleApprove}\r\n                    disabled={isApproving}\r\n                    className=\"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white\"\r\n                  >\r\n                    <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                    {isApproving ? 'Approving...' : 'Approve'}\r\n                  </Button>\r\n                )}\r\n                {onReject && (\r\n                  <Button\r\n                    onClick={handleReject}\r\n                    disabled={isRejecting}\r\n                    variant=\"destructive\"\r\n                    className=\"flex-1 text-white\"\r\n                  >\r\n                    <XCircle className=\"h-4 w-4 mr-2\" />\r\n                    {isRejecting ? 'Rejecting...' : 'Reject'}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Message Investor Button */}\r\n            {approval.requested_by_profile && (\r\n              <Button\r\n                onClick={handleMessageInvestor}\r\n                disabled={isCreatingConversation}\r\n                variant=\"outline\"\r\n                className=\"w-full border-blue-300 dark:border-blue-500/30 bg-blue-50 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-500/20 hover:text-blue-800 dark:hover:text-blue-200\"\r\n              >\r\n                <MessageCircle className=\"h-4 w-4 mr-2\" />\r\n                {isCreatingConversation\r\n                  ? 'Creating conversation...'\r\n                  : `Message ${approval.requested_by_profile.display_name || 'Investor'}`}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </SheetHeader>\r\n\r\n        <Separator className=\"my-6\" />\r\n\r\n        <Tabs defaultValue=\"overview\" className=\"w-full\" id={`approval-tabs-${approval?.id || 'new'}`}>\r\n          <TabsList className=\"grid w-full grid-cols-3\">\r\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\r\n            <TabsTrigger value=\"timeline\">Timeline</TabsTrigger>\r\n            <TabsTrigger value=\"metadata\">Data</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"overview\" className=\"space-y-4 mt-6\">\r\n            {/* Deal Information */}\r\n            {approval.related_deal && (\r\n              <Card className=\"border-border bg-muted/50\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg flex items-center gap-2 text-foreground\">\r\n                    <Building2 className=\"h-5 w-5\" />\r\n                    Deal Information\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-3\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Deal Name</p>\r\n                      <Link\r\n                        href={`/versotech_main/deals/${approval.related_deal.id}`}\r\n                        className=\"font-medium text-foreground hover:underline flex items-center gap-1\"\r\n                      >\r\n                        {approval.related_deal.name}\r\n                        <ExternalLink className=\"h-3 w-3\" />\r\n                      </Link>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Status</p>\r\n                      <p className=\"font-medium text-foreground capitalize\">{approval.related_deal.status || 'N/A'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Deal Type</p>\r\n                      <p className=\"font-medium text-foreground capitalize\">{approval.related_deal.deal_type || 'N/A'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Currency</p>\r\n                      <p className=\"font-medium text-foreground\">{(approval.related_deal as any).currency || 'USD'}</p>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Investor Information */}\r\n            {approval.related_investor && (\r\n              <Card className=\"border-border bg-muted/50\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg flex items-center gap-2 text-foreground\">\r\n                    <User className=\"h-5 w-5\" />\r\n                    Investor Information\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-3\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Legal Name</p>\r\n                      <p className=\"font-medium text-foreground\">{approval.related_investor.legal_name}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">KYC Status</p>\r\n                      <Badge variant=\"outline\" className=\"text-foreground border-border\">\r\n                        {approval.related_investor.kyc_status || 'Unknown'}\r\n                      </Badge>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Type</p>\r\n                      <p className=\"font-medium text-foreground capitalize\">{(approval.related_investor as any).type || 'N/A'}</p>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Counterparty Entity Information (for entity subscriptions) */}\r\n            {approval.entity_type === 'deal_subscription' &&\r\n              approval.entity_metadata?.subscription_type === 'entity' &&\r\n              approval.entity_metadata?.counterparty_entity && (\r\n              <Card className=\"border-blue-300 dark:border-blue-500/30 bg-blue-50 dark:bg-blue-500/10\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg flex items-center gap-2 text-foreground\">\r\n                    <Building2 className=\"h-5 w-5 text-blue-400\" />\r\n                    Subscribing Entity\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-blue-600 dark:text-blue-300\">\r\n                    This subscription is being made through a counterparty entity\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-3\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Entity Legal Name</p>\r\n                      <p className=\"font-medium text-foreground\">{approval.entity_metadata.counterparty_entity.legal_name}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Entity Type</p>\r\n                      <Badge variant=\"outline\" className=\"text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-400/30\">\r\n                        {approval.entity_metadata.counterparty_entity.entity_type.replace('_', ' ').toUpperCase()}\r\n                      </Badge>\r\n                    </div>\r\n                    {approval.entity_metadata.counterparty_entity.jurisdiction && (\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Jurisdiction</p>\r\n                        <p className=\"font-medium text-foreground\">{approval.entity_metadata.counterparty_entity.jurisdiction}</p>\r\n                      </div>\r\n                    )}\r\n                    {approval.entity_metadata.counterparty_entity.registration_number && (\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Registration Number</p>\r\n                        <p className=\"font-medium text-foreground\">{approval.entity_metadata.counterparty_entity.registration_number}</p>\r\n                      </div>\r\n                    )}\r\n                    {approval.entity_metadata.counterparty_entity.tax_id && (\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Tax ID</p>\r\n                        <p className=\"font-mono text-sm text-foreground\">{approval.entity_metadata.counterparty_entity.tax_id}</p>\r\n                      </div>\r\n                    )}\r\n                    {approval.entity_metadata.counterparty_entity.representative_name && (\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Authorized Representative</p>\r\n                        <p className=\"font-medium text-foreground\">\r\n                          {approval.entity_metadata.counterparty_entity.representative_name}\r\n                          {approval.entity_metadata.counterparty_entity.representative_title && (\r\n                            <span className=\"text-muted-foreground text-sm ml-1\">\r\n                              ({approval.entity_metadata.counterparty_entity.representative_title})\r\n                            </span>\r\n                          )}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Entity KYC Status */}\r\n                  {approval.entity_metadata.counterparty_entity.kyc_status && (\r\n                    <div className=\"col-span-2 mt-2 p-3 rounded-lg bg-muted border border-border\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <p className=\"text-sm text-muted-foreground mb-1\">Entity KYC Status</p>\r\n                          <Badge\r\n                            variant={\r\n                              approval.entity_metadata.counterparty_entity.kyc_status === 'approved'\r\n                                ? 'default'\r\n                                : approval.entity_metadata.counterparty_entity.kyc_status === 'pending'\r\n                                ? 'secondary'\r\n                                : 'destructive'\r\n                            }\r\n                            className={\r\n                              approval.entity_metadata.counterparty_entity.kyc_status === 'approved'\r\n                                ? 'bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 border-emerald-300 dark:border-emerald-500/30'\r\n                                : approval.entity_metadata.counterparty_entity.kyc_status === 'pending'\r\n                                ? 'bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 border-amber-300 dark:border-amber-500/30'\r\n                                : 'bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300 border-rose-300 dark:border-rose-500/30'\r\n                            }\r\n                          >\r\n                            {approval.entity_metadata.counterparty_entity.kyc_status.toUpperCase()}\r\n                          </Badge>\r\n                        </div>\r\n                        {approval.entity_metadata.counterparty_entity.kyc_completed_at && (\r\n                          <div className=\"text-right\">\r\n                            <p className=\"text-xs text-muted-foreground\">Completed</p>\r\n                            <p className=\"text-sm text-foreground\">\r\n                              {new Date(approval.entity_metadata.counterparty_entity.kyc_completed_at).toLocaleDateString()}\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      {approval.entity_metadata.counterparty_entity.kyc_expiry_date && (\r\n                        <div className=\"mt-2 pt-2 border-t border-border\">\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            Expires: {new Date(approval.entity_metadata.counterparty_entity.kyc_expiry_date).toLocaleDateString()}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                      {approval.entity_metadata.counterparty_entity.kyc_notes && (\r\n                        <div className=\"mt-2 pt-2 border-t border-border\">\r\n                          <p className=\"text-xs text-muted-foreground\">{approval.entity_metadata.counterparty_entity.kyc_notes}</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n\r\n                  {approval.entity_metadata.counterparty_entity.registered_address && (\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground mb-1\">Registered Address</p>\r\n                      <div className=\"text-sm text-foreground\">\r\n                        {approval.entity_metadata.counterparty_entity.registered_address.street && (\r\n                          <p>{approval.entity_metadata.counterparty_entity.registered_address.street}</p>\r\n                        )}\r\n                        <p>\r\n                          {[\r\n                            approval.entity_metadata.counterparty_entity.registered_address.city,\r\n                            approval.entity_metadata.counterparty_entity.registered_address.state,\r\n                            approval.entity_metadata.counterparty_entity.registered_address.postal_code\r\n                          ].filter(Boolean).join(', ')}\r\n                        </p>\r\n                        {approval.entity_metadata.counterparty_entity.registered_address.country && (\r\n                          <p>{approval.entity_metadata.counterparty_entity.registered_address.country}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"mt-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30\">\r\n                    <p className=\"text-xs text-blue-700 dark:text-blue-300\">\r\n                      <strong>Note:</strong> The investor ({approval.related_investor?.legal_name}) is investing on behalf of this entity. Subscription documents will be prepared in the entity's name.\r\n                    </p>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Request Details */}\r\n            <Card className=\"border-border bg-muted/50\">\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg flex items-center gap-2 text-foreground\">\r\n                  <FileText className=\"h-5 w-5\" />\r\n                  Request Details\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Assigned To</p>\r\n                    <p className=\"font-medium text-foreground\">\r\n                      {approval.assigned_to_profile?.display_name || 'Unassigned'}\r\n                    </p>\r\n                    {approval.assigned_to_profile?.email && (\r\n                      <p className=\"text-xs text-muted-foreground\">{approval.assigned_to_profile.email}</p>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Requested By</p>\r\n                    <p className=\"font-medium text-foreground\">\r\n                      {approval.requested_by_profile?.display_name || 'Unknown'}\r\n                    </p>\r\n                    {approval.requested_by_profile?.email && (\r\n                      <p className=\"text-xs text-muted-foreground\">{approval.requested_by_profile.email}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Subscription Amount (only for deal_subscription approvals) */}\r\n                {approval.entity_type === 'deal_subscription' && approval.entity_metadata?.derived_amount && (\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Subscription Amount</p>\r\n                    <p className=\"text-2xl font-bold text-emerald-400\">\r\n                      {approval.entity_metadata.payload?.currency || 'USD'}{' '}\r\n                      {approval.entity_metadata.derived_amount.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Fallback for other approval types with indicative_amount */}\r\n                {approval.entity_type !== 'deal_subscription' && approval.entity_metadata?.indicative_amount && (\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Indicative Amount</p>\r\n                    <p className=\"text-2xl font-bold text-emerald-400\">\r\n                      {approval.entity_metadata.indicative_currency || 'USD'}{' '}\r\n                      {approval.entity_metadata.indicative_amount.toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                {approval.entity_metadata?.notes && (\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">Notes</p>\r\n                    <div className=\"p-3 rounded-lg bg-muted border border-border\">\r\n                      <p className=\"text-sm text-foreground whitespace-pre-wrap\">{approval.entity_metadata.notes}</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {approval.request_reason && (\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">Request Reason</p>\r\n                    <div className=\"p-3 rounded-lg bg-muted border border-border\">\r\n                      <p className=\"text-sm text-foreground whitespace-pre-wrap\">{approval.request_reason}</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {approval.notes && (\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">Staff Notes</p>\r\n                    <div className=\"p-3 rounded-lg bg-muted border border-border\">\r\n                      <p className=\"text-sm text-foreground whitespace-pre-wrap\">{approval.notes}</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {approval.rejection_reason && (\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">Rejection Reason</p>\r\n                    <div className=\"p-3 rounded-lg bg-rose-50 dark:bg-rose-500/10 border border-rose-200 dark:border-rose-500/30\">\r\n                      <p className=\"text-sm whitespace-pre-wrap text-rose-700 dark:text-rose-300\">{approval.rejection_reason}</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Approval Decision */}\r\n            {approval.approved_by_profile && (\r\n              <Card className=\"border-border bg-muted/50\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg flex items-center gap-2 text-foreground\">\r\n                    <CheckCircle2 className=\"h-5 w-5\" />\r\n                    Decision\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-3\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Decided By</p>\r\n                      <p className=\"font-medium text-foreground\">{approval.approved_by_profile.display_name}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">{approval.approved_by_profile.email}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Decided At</p>\r\n                      <p className=\"font-medium text-foreground\">\r\n                        {approval.approved_at && format(new Date(approval.approved_at), 'MMM dd, yyyy HH:mm')}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Entity ID Reference */}\r\n            <Card className=\"border-border bg-muted/50\">\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg flex items-center gap-2 text-foreground\">\r\n                  <Info className=\"h-5 w-5\" />\r\n                  Reference Information\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-3\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Approval ID</p>\r\n                    <p className=\"font-mono text-xs text-foreground\">{approval.id}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-sm text-muted-foreground\">Entity ID</p>\r\n                    <p className=\"font-mono text-xs text-foreground\">{approval.entity_id}</p>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"timeline\" className=\"space-y-4 mt-6\">\r\n            <Card className=\"border-border bg-muted/50\">\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg flex items-center gap-2 text-foreground\">\r\n                  <TrendingUp className=\"h-5 w-5\" />\r\n                  Approval Timeline\r\n                </CardTitle>\r\n                <CardDescription className=\"text-muted-foreground\">\r\n                  Complete event history for this approval\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ApprovalTimeline approval={approval} />\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"metadata\" className=\"space-y-4 mt-6\">\r\n            {/* Entity Metadata */}\r\n            {approval.entity_metadata && Object.keys(approval.entity_metadata).length > 0 && (\r\n              <Card className=\"border-border bg-muted/50\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg text-foreground\">Entity Metadata</CardTitle>\r\n                  <CardDescription className=\"text-muted-foreground\">\r\n                    Complete data payload for this approval\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <pre className=\"p-4 rounded-lg bg-muted dark:bg-black/30 border border-border overflow-x-auto text-xs text-foreground\">\r\n                    {JSON.stringify(approval.entity_metadata, null, 2)}\r\n                  </pre>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Timestamps */}\r\n            <Card className=\"border-border bg-muted/50\">\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg flex items-center gap-2 text-foreground\">\r\n                  <Calendar className=\"h-5 w-5\" />\r\n                  Timestamps\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                  <div>\r\n                    <p className=\"text-muted-foreground\">Created At</p>\r\n                    <p className=\"font-medium text-foreground\">\r\n                      {format(new Date(approval.created_at), 'MMM dd, yyyy HH:mm:ss')}\r\n                    </p>\r\n                  </div>\r\n                  {approval.updated_at && (\r\n                    <div>\r\n                      <p className=\"text-muted-foreground\">Updated At</p>\r\n                      <p className=\"font-medium text-foreground\">\r\n                        {format(new Date(approval.updated_at), 'MMM dd, yyyy HH:mm:ss')}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  {approval.approved_at && (\r\n                    <div>\r\n                      <p className=\"text-muted-foreground\">Approved/Rejected At</p>\r\n                      <p className=\"font-medium text-foreground\">\r\n                        {format(new Date(approval.approved_at), 'MMM dd, yyyy HH:mm:ss')}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  {approval.resolved_at && (\r\n                    <div>\r\n                      <p className=\"text-muted-foreground\">Resolved At</p>\r\n                      <p className=\"font-medium text-foreground\">\r\n                        {format(new Date(approval.resolved_at), 'MMM dd, yyyy HH:mm:ss')}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  {approval.sla_breach_at && (\r\n                    <div>\r\n                      <p className=\"text-muted-foreground\">SLA Deadline</p>\r\n                      <p className=\"font-medium text-foreground\">\r\n                        {format(new Date(approval.sla_breach_at), 'MMM dd, yyyy HH:mm:ss')}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Full Approval Object (for debugging/admin) */}\r\n            <Card className=\"border-border bg-muted/50\">\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg text-foreground\">Complete Approval Record</CardTitle>\r\n                <CardDescription className=\"text-muted-foreground\">\r\n                  Full approval object (all fields)\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <pre className=\"p-4 rounded-lg bg-muted dark:bg-black/30 border border-border overflow-x-auto text-xs text-foreground max-h-96 overflow-y-auto\">\r\n                  {JSON.stringify(approval, null, 2)}\r\n                </pre>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n        </Tabs>\r\n      </SheetContent>\r\n    </Sheet>\r\n  )\r\n}\r\n\r\n// Approval Timeline Component - Accurate for all approval stages\r\nfunction ApprovalTimeline({ approval }: { approval: Approval }) {\r\n  const events = []\r\n\r\n  // 1. Approval Created/Requested\r\n  events.push({\r\n    label: 'Approval Requested',\r\n    date: new Date(approval.created_at),\r\n    completed: true,\r\n    current: false,\r\n    icon: FileText,\r\n    description: `Requested by ${approval.requested_by_profile?.display_name || 'Unknown'}`\r\n  })\r\n\r\n  // 2. Assignment (if assigned)\r\n  if (approval.assigned_to_profile) {\r\n    events.push({\r\n      label: 'Assigned for Review',\r\n      date: new Date(approval.created_at),\r\n      completed: true,\r\n      current: false,\r\n      icon: User,\r\n      description: `Assigned to ${approval.assigned_to_profile.display_name}`\r\n    })\r\n  }\r\n\r\n  // 3. Current state based on status\r\n  const now = new Date()\r\n\r\n  if (approval.status === 'pending') {\r\n    // Still pending review\r\n    events.push({\r\n      label: 'Under Review',\r\n      date: null,\r\n      completed: false,\r\n      current: true,\r\n      icon: Clock,\r\n      description: approval.sla_breach_at\r\n        ? `SLA deadline: ${format(new Date(approval.sla_breach_at), 'MMM dd, HH:mm')}`\r\n        : 'Awaiting decision'\r\n    })\r\n  } else if (approval.status === 'approved') {\r\n    // Approved\r\n    events.push({\r\n      label: 'Approved',\r\n      date: approval.approved_at ? new Date(approval.approved_at) : null,\r\n      completed: true,\r\n      current: !approval.resolved_at,\r\n      icon: CheckCircle2,\r\n      description: approval.approved_by_profile?.display_name\r\n        ? `Approved by ${approval.approved_by_profile.display_name}`\r\n        : 'Approval granted'\r\n    })\r\n  } else if (approval.status === 'rejected') {\r\n    // Rejected\r\n    events.push({\r\n      label: 'Rejected',\r\n      date: approval.approved_at ? new Date(approval.approved_at) : null,\r\n      completed: true,\r\n      current: !approval.resolved_at,\r\n      icon: XCircle,\r\n      description: approval.approved_by_profile?.display_name\r\n        ? `Rejected by ${approval.approved_by_profile.display_name}`\r\n        : 'Approval denied'\r\n    })\r\n\r\n    // Show rejection reason if available\r\n    if (approval.rejection_reason) {\r\n      events.push({\r\n        label: 'Rejection Reason',\r\n        date: null,\r\n        completed: true,\r\n        current: false,\r\n        icon: Info,\r\n        description: approval.rejection_reason\r\n      })\r\n    }\r\n  } else if (approval.status === 'awaiting_info') {\r\n    // Awaiting additional information\r\n    events.push({\r\n      label: 'Awaiting Information',\r\n      date: approval.updated_at ? new Date(approval.updated_at) : null,\r\n      completed: false,\r\n      current: true,\r\n      icon: AlertTriangle,\r\n      description: 'Additional information requested'\r\n    })\r\n  } else if (approval.status === 'escalated') {\r\n    // Escalated\r\n    events.push({\r\n      label: 'Escalated',\r\n      date: approval.updated_at ? new Date(approval.updated_at) : null,\r\n      completed: true,\r\n      current: !approval.resolved_at,\r\n      icon: AlertTriangle,\r\n      description: 'Escalated to higher authority'\r\n    })\r\n  } else if (approval.status === 'cancelled') {\r\n    // Cancelled\r\n    events.push({\r\n      label: 'Cancelled',\r\n      date: approval.updated_at ? new Date(approval.updated_at) : null,\r\n      completed: true,\r\n      current: false,\r\n      icon: XCircle,\r\n      description: 'Approval request cancelled'\r\n    })\r\n  }\r\n\r\n  // 4. Resolution (if resolved)\r\n  if (approval.resolved_at) {\r\n    events.push({\r\n      label: 'Workflow Completed',\r\n      date: new Date(approval.resolved_at),\r\n      completed: true,\r\n      current: false,\r\n      icon: CheckCircle2,\r\n      description: 'Approval workflow finalized'\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {events.map((event, index) => {\r\n        const Icon = event.icon\r\n        return (\r\n          <div key={index} className=\"flex gap-4\">\r\n            <div className=\"flex flex-col items-center\">\r\n              <div\r\n                className={`rounded-full p-2 ${\r\n                  event.completed\r\n                    ? 'bg-emerald-500/20 text-emerald-400'\r\n                    : event.current\r\n                    ? 'bg-amber-500/20 text-amber-400'\r\n                    : 'bg-muted text-muted-foreground'\r\n                }`}\r\n              >\r\n                <Icon className=\"h-4 w-4\" />\r\n              </div>\r\n              {index < events.length - 1 && (\r\n                <div\r\n                  className={`w-0.5 h-12 ${event.completed ? 'bg-emerald-500/30' : 'bg-border'}`}\r\n                />\r\n              )}\r\n            </div>\r\n            <div className=\"flex-1 pb-8\">\r\n              <p className={`font-medium ${event.current ? 'text-amber-600 dark:text-amber-400' : 'text-foreground'}`}>\r\n                {event.label}\r\n              </p>\r\n              {event.date && (\r\n                <p className=\"text-sm text-muted-foreground\">{format(event.date, 'MMM dd, yyyy HH:mm')}</p>\r\n              )}\r\n              <p className=\"text-sm text-muted-foreground\">{event.description}</p>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3584, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/approvals/approval-view-switcher.tsx"],"sourcesContent":["'use client'\n\nimport { LayoutGrid, Table, List, Kanban } from 'lucide-react'\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs'\n\nexport type ViewType = 'table' | 'kanban' | 'list' | 'database'\n\ninterface ApprovalViewSwitcherProps {\n  currentView: ViewType\n  onViewChange: (view: ViewType) => void\n}\n\nexport function ApprovalViewSwitcher({\n  currentView,\n  onViewChange\n}: ApprovalViewSwitcherProps) {\n  const handleValueChange = (value: string) => {\n    onViewChange(value as ViewType)\n  }\n\n  return (\n    <Tabs value={currentView} onValueChange={handleValueChange}>\n      <TabsList className=\"grid w-full grid-cols-4 max-w-md\">\n        <TabsTrigger value=\"table\" className=\"flex items-center gap-2\">\n          <Table className=\"h-4 w-4\" />\n          <span className=\"hidden sm:inline\">Table</span>\n        </TabsTrigger>\n        <TabsTrigger value=\"kanban\" className=\"flex items-center gap-2\">\n          <Kanban className=\"h-4 w-4\" />\n          <span className=\"hidden sm:inline\">Kanban</span>\n        </TabsTrigger>\n        <TabsTrigger value=\"list\" className=\"flex items-center gap-2\">\n          <List className=\"h-4 w-4\" />\n          <span className=\"hidden sm:inline\">List</span>\n        </TabsTrigger>\n        <TabsTrigger value=\"database\" className=\"flex items-center gap-2\">\n          <LayoutGrid className=\"h-4 w-4\" />\n          <span className=\"hidden sm:inline\">Grid</span>\n        </TabsTrigger>\n      </TabsList>\n    </Tabs>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAYO,SAAS,qBAAqB,EACnC,WAAW,EACX,YAAY,EACc;IAC1B,MAAM,oBAAoB,CAAC;QACzB,aAAa;IACf;IAEA,qBACE,qQAAC,+JAAI;QAAC,OAAO;QAAa,eAAe;kBACvC,cAAA,qQAAC,mKAAQ;YAAC,WAAU;;8BAClB,qQAAC,sKAAW;oBAAC,OAAM;oBAAQ,WAAU;;sCACnC,qQAAC,oOAAK;4BAAC,WAAU;;;;;;sCACjB,qQAAC;4BAAK,WAAU;sCAAmB;;;;;;;;;;;;8BAErC,qQAAC,sKAAW;oBAAC,OAAM;oBAAS,WAAU;;sCACpC,qQAAC,uOAAM;4BAAC,WAAU;;;;;;sCAClB,qQAAC;4BAAK,WAAU;sCAAmB;;;;;;;;;;;;8BAErC,qQAAC,sKAAW;oBAAC,OAAM;oBAAO,WAAU;;sCAClC,qQAAC,iOAAI;4BAAC,WAAU;;;;;;sCAChB,qQAAC;4BAAK,WAAU;sCAAmB;;;;;;;;;;;;8BAErC,qQAAC,sKAAW;oBAAC,OAAM;oBAAW,WAAU;;sCACtC,qQAAC,uPAAU;4BAAC,WAAU;;;;;;sCACtB,qQAAC;4BAAK,WAAU;sCAAmB;;;;;;;;;;;;;;;;;;;;;;;AAK7C"}},
    {"offset": {"line": 3724, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/approvals/views/approvals-kanban-view.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Approval } from '@/types/approvals'\nimport { Card, CardContent, CardHeader } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Clock, DollarSign, LayoutGrid, ListFilter, Mail, Shield } from 'lucide-react'\nimport { format } from 'date-fns'\n\ninterface ApprovalsKanbanViewProps {\n  approvals: Approval[]\n  onApprovalClick: (approval: Approval) => void\n}\n\ntype GroupBy = 'status' | 'priority'\n\nconst statusColumns = [\n  { id: 'pending', title: 'Pending Review', color: 'border-amber-500', bgColor: 'bg-amber-500/10' },\n  { id: 'approved', title: 'Approved', color: 'border-emerald-500', bgColor: 'bg-emerald-500/10' },\n  { id: 'rejected', title: 'Rejected', color: 'border-rose-500', bgColor: 'bg-rose-500/10' }\n]\n\nconst priorityColumns = [\n  { id: 'critical', title: 'Critical Priority', color: 'border-red-500', bgColor: 'bg-red-500/10' },\n  { id: 'high', title: 'High Priority', color: 'border-orange-500', bgColor: 'bg-orange-500/10' },\n  { id: 'medium', title: 'Medium Priority', color: 'border-yellow-500', bgColor: 'bg-yellow-500/10' },\n  { id: 'low', title: 'Low Priority', color: 'border-blue-500', bgColor: 'bg-blue-500/10' }\n]\n\nconst priorityColors = {\n  low: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300',\n  medium: 'bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300',\n  high: 'bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300',\n  critical: 'bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300'\n}\n\nconst statusColors: Record<string, string> = {\n  pending: 'bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300',\n  approved: 'bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300',\n  rejected: 'bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300',\n  cancelled: 'bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300'\n}\n\nexport function ApprovalsKanbanView({ approvals, onApprovalClick }: ApprovalsKanbanViewProps) {\n  const [groupBy, setGroupBy] = useState<GroupBy>('status')\n\n  const columns = groupBy === 'status' ? statusColumns : priorityColumns\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Grouping Controls */}\n      <div className=\"flex items-center justify-between bg-muted/50 p-3 rounded-lg border border-border\">\n        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n          <LayoutGrid className=\"h-4 w-4\" />\n          <span>Group by:</span>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            variant={groupBy === 'status' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setGroupBy('status')}\n            className={groupBy === 'status' ? 'bg-blue-600 hover:bg-blue-700' : ''}\n          >\n            <ListFilter className=\"h-4 w-4 mr-2\" />\n            Status\n          </Button>\n          <Button\n            variant={groupBy === 'priority' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setGroupBy('priority')}\n            className={groupBy === 'priority' ? 'bg-blue-600 hover:bg-blue-700' : ''}\n          >\n            <ListFilter className=\"h-4 w-4 mr-2\" />\n            Priority\n          </Button>\n        </div>\n      </div>\n\n      {/* Kanban Board */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6\">\n        {columns.map((column) => {\n          const columnApprovals = approvals.filter((a) =>\n            groupBy === 'status' ? a.status === column.id : a.priority === column.id\n          )\n\n          return (\n            <div key={column.id} className=\"space-y-4\">\n              <div className={`border-l-4 ${column.color} pl-4 ${column.bgColor} py-3 rounded-r-lg`}>\n                <h3 className=\"font-semibold text-lg text-foreground\">{column.title}</h3>\n                <p className=\"text-sm text-muted-foreground\">{columnApprovals.length} items</p>\n              </div>\n\n              <div className=\"space-y-3 min-h-[200px]\">\n                {columnApprovals.map((approval) => (\n                  <Card\n                    key={approval.id}\n                    className=\"cursor-pointer hover:bg-muted transition-all border-border hover:border-primary/30 hover:shadow-lg\"\n                    onClick={() => onApprovalClick(approval)}\n                  >\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <div className=\"space-y-1.5 flex-1 min-w-0\">\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {approval.entity_type.replace(/_/g, ' ')}\n                          </Badge>\n                          <p className=\"font-semibold text-sm truncate text-foreground\">\n                            {approval.entity_type === 'member_invitation'\n                              ? approval.entity_metadata?.email || 'Unknown'\n                              : (approval.related_deal?.name || approval.related_investor?.legal_name || 'Unknown')}\n                          </p>\n                        </div>\n                        {groupBy === 'status' ? (\n                          <Badge className={priorityColors[approval.priority]}>\n                            {approval.priority}\n                          </Badge>\n                        ) : (\n                          <Badge className={statusColors[approval.status]}>\n                            {approval.status}\n                          </Badge>\n                        )}\n                      </div>\n                    </CardHeader>\n                    <CardContent className=\"space-y-2.5\">\n                      {approval.sla_breach_at && (\n                        <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                          <Clock className=\"h-3 w-3\" />\n                          <span>Due {format(new Date(approval.sla_breach_at), 'MMM dd, HH:mm')}</span>\n                        </div>\n                      )}\n                      {approval.entity_metadata?.indicative_amount && (\n                        <div className=\"flex items-center gap-2 text-xs font-semibold text-emerald-400\">\n                          <DollarSign className=\"h-3 w-3\" />\n                          {approval.entity_metadata.indicative_currency || 'USD'}{' '}\n                          {approval.entity_metadata.indicative_amount.toLocaleString()}\n                        </div>\n                      )}\n                      {approval.assigned_to_profile && (\n                        <p className=\"text-xs text-muted-foreground truncate\">\n                          Assigned: {approval.assigned_to_profile.display_name}\n                        </p>\n                      )}\n                      {approval.entity_type === 'member_invitation' && approval.entity_metadata && (\n                        <>\n                          <p className=\"text-xs text-muted-foreground truncate\">\n                            {approval.entity_metadata.entity_name}\n                          </p>\n                          <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                            <span className=\"capitalize\">{approval.entity_metadata.role || 'Member'}</span>\n                            {approval.entity_metadata.is_signatory && (\n                              <Badge className=\"text-[10px] bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 px-1 py-0\">\n                                <Shield className=\"h-2.5 w-2.5 mr-0.5\" />\n                                Signatory\n                              </Badge>\n                            )}\n                          </div>\n                        </>\n                      )}\n                      {approval.entity_type !== 'member_invitation' && approval.related_investor && (\n                        <p className=\"text-xs text-muted-foreground truncate\">\n                          {approval.related_investor.legal_name}\n                        </p>\n                      )}\n                      <p className=\"text-xs text-muted-foreground\">\n                        {format(new Date(approval.created_at), 'MMM dd, HH:mm')}\n                      </p>\n                    </CardContent>\n                  </Card>\n                ))}\n\n                {columnApprovals.length === 0 && (\n                  <div className=\"text-center py-12 text-muted-foreground text-sm border-2 border-dashed border-border rounded-lg\">\n                    No {column.title.toLowerCase()}\n                  </div>\n                )}\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4164, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/approvals/views/approvals-list-view.tsx"],"sourcesContent":["'use client'\n\nimport { Approval } from '@/types/approvals'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport {\n  Clock,\n  DollarSign,\n  User,\n  Building2,\n  CheckCircle2,\n  XCircle,\n  Mail,\n  UserPlus,\n  Shield\n} from 'lucide-react'\nimport { format } from 'date-fns'\n\ninterface ApprovalsListViewProps {\n  approvals: Approval[]\n  onApprovalClick: (approval: Approval) => void\n  onApprove?: (approvalId: string) => Promise<void>\n  onReject?: (approvalId: string, reason: string) => Promise<void>\n}\n\nconst priorityColors = {\n  low: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300',\n  medium: 'bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300',\n  high: 'bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300',\n  critical: 'bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300'\n}\n\nconst statusColors = {\n  pending: 'bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300',\n  approved: 'bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300',\n  rejected: 'bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300',\n  awaiting_info: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300',\n  escalated: 'bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300',\n  cancelled: 'bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300'\n}\n\nexport function ApprovalsListView({\n  approvals,\n  onApprovalClick,\n  onApprove,\n  onReject\n}: ApprovalsListViewProps) {\n  return (\n    <div className=\"space-y-4\">\n      {approvals.map((approval) => (\n        <Card\n          key={approval.id}\n          className=\"cursor-pointer hover:bg-muted transition-all border-border hover:border-primary/30\"\n          onClick={() => onApprovalClick(approval)}\n        >\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between gap-6\">\n              {/* Left side - Main info */}\n              <div className=\"flex-1 space-y-4\">\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <Badge variant=\"outline\">\n                    {approval.entity_type.replace(/_/g, ' ').toUpperCase()}\n                  </Badge>\n                  <Badge className={priorityColors[approval.priority]}>\n                    {approval.priority.toUpperCase()}\n                  </Badge>\n                  <Badge className={statusColors[approval.status]}>\n                    {approval.status.replace(/_/g, ' ').toUpperCase()}\n                  </Badge>\n                </div>\n\n                <h3 className=\"font-semibold text-lg text-foreground\">\n                  {approval.entity_type === 'member_invitation'\n                    ? `Member Invitation: ${approval.entity_metadata?.email || 'Unknown'}`\n                    : (approval.related_deal?.name || approval.related_investor?.legal_name || 'Approval Request')}\n                </h3>\n\n                {/* Member Invitation specific info */}\n                {approval.entity_type === 'member_invitation' && approval.entity_metadata && (\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm\">\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Mail className=\"h-4 w-4 flex-shrink-0\" />\n                      <span className=\"truncate\">{approval.entity_metadata.email}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Building2 className=\"h-4 w-4 flex-shrink-0\" />\n                      <span className=\"truncate\">{approval.entity_metadata.entity_name}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <UserPlus className=\"h-4 w-4 flex-shrink-0\" />\n                      <span className=\"truncate capitalize\">{approval.entity_metadata.role || 'Member'}</span>\n                    </div>\n                    {approval.entity_metadata.is_signatory && (\n                      <div className=\"flex items-center gap-2 text-amber-400 font-medium\">\n                        <Shield className=\"h-4 w-4 flex-shrink-0\" />\n                        <span>Signatory</span>\n                      </div>\n                    )}\n                    {approval.sla_breach_at && (\n                      <div className=\"flex items-center gap-2 text-muted-foreground\">\n                        <Clock className=\"h-4 w-4 flex-shrink-0\" />\n                        <span>Due {format(new Date(approval.sla_breach_at), 'MMM dd, HH:mm')}</span>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* Standard approval info */}\n                {approval.entity_type !== 'member_invitation' && (\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm\">\n                    {approval.related_investor && (\n                      <div className=\"flex items-center gap-2 text-muted-foreground\">\n                        <User className=\"h-4 w-4 flex-shrink-0\" />\n                        <span className=\"truncate\">{approval.related_investor.legal_name}</span>\n                      </div>\n                    )}\n\n                    {approval.related_deal && (\n                      <div className=\"flex items-center gap-2 text-muted-foreground\">\n                        <Building2 className=\"h-4 w-4 flex-shrink-0\" />\n                        <span className=\"truncate capitalize\">{approval.related_deal.deal_type || 'Deal'}</span>\n                      </div>\n                    )}\n\n                    {approval.sla_breach_at && (\n                      <div className=\"flex items-center gap-2 text-muted-foreground\">\n                        <Clock className=\"h-4 w-4 flex-shrink-0\" />\n                        <span>Due {format(new Date(approval.sla_breach_at), 'MMM dd, HH:mm')}</span>\n                      </div>\n                    )}\n\n                    {approval.entity_metadata?.indicative_amount && (\n                      <div className=\"flex items-center gap-2 font-semibold text-emerald-400\">\n                        <DollarSign className=\"h-4 w-4 flex-shrink-0\" />\n                        <span>\n                          {approval.entity_metadata.indicative_currency || 'USD'}{' '}\n                          {approval.entity_metadata.indicative_amount.toLocaleString()}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                  <span>\n                    Requested by {approval.requested_by_profile?.display_name || 'Unknown'}\n                  </span>\n                  <span></span>\n                  <span>\n                    Assigned to {approval.assigned_to_profile?.display_name || 'Unassigned'}\n                  </span>\n                  <span></span>\n                  <span>{format(new Date(approval.created_at), 'MMM dd, yyyy')}</span>\n                </div>\n              </div>\n\n              {/* Right side - Actions */}\n              {approval.status === 'pending' && (onApprove || onReject) && (\n                <div className=\"flex flex-col gap-2\" onClick={(e) => e.stopPropagation()}>\n                  {onApprove && (\n                    <Button\n                      size=\"sm\"\n                      onClick={(e) => {\n                        e.stopPropagation()\n                        onApprove(approval.id)\n                      }}\n                      className=\"bg-emerald-600 hover:bg-emerald-700 min-w-[100px]\"\n                    >\n                      <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n                      Approve\n                    </Button>\n                  )}\n                  {onReject && (\n                    <Button\n                      size=\"sm\"\n                      variant=\"destructive\"\n                      onClick={(e) => {\n                        e.stopPropagation()\n                        const reason = prompt('Please provide a rejection reason:')\n                        if (reason) {\n                          onReject(approval.id, reason)\n                        }\n                      }}\n                      className=\"min-w-[100px]\"\n                    >\n                      <XCircle className=\"h-4 w-4 mr-2\" />\n                      Reject\n                    </Button>\n                  )}\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      ))}\n\n      {approvals.length === 0 && (\n        <div className=\"text-center py-12 text-muted-foreground\">\n          No approvals found\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4648, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/approvals/views/approvals-database-view.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useMemo } from 'react'\nimport { Approval } from '@/types/approvals'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from '@/components/ui/select'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow\n} from '@/components/ui/table'\nimport {\n  Search,\n  SlidersHorizontal,\n  X,\n  ArrowUpDown,\n  ArrowUp,\n  ArrowDown,\n  Filter\n} from 'lucide-react'\nimport { format } from 'date-fns'\n\ninterface ApprovalsDatabaseViewProps {\n  approvals: Approval[]\n  onApprovalClick: (approval: Approval) => void\n}\n\ntype SortField = 'created_at' | 'priority' | 'sla_breach_at' | 'entity_type' | 'status'\ntype SortDirection = 'asc' | 'desc'\n\nconst priorityColors = {\n  low: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300',\n  medium: 'bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-300',\n  high: 'bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300',\n  critical: 'bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-300'\n}\n\nconst statusColors = {\n  pending: 'bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300',\n  approved: 'bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300',\n  rejected: 'bg-rose-100 dark:bg-rose-500/20 text-rose-700 dark:text-rose-300',\n  awaiting_info: 'bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-300',\n  escalated: 'bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300',\n  cancelled: 'bg-slate-100 dark:bg-slate-500/20 text-slate-700 dark:text-slate-300'\n}\n\nconst priorityOrder = { critical: 0, high: 1, medium: 2, low: 3 }\n\nexport function ApprovalsDatabaseView({ approvals, onApprovalClick }: ApprovalsDatabaseViewProps) {\n  // Search and filter state\n  const [searchQuery, setSearchQuery] = useState('')\n  const [statusFilter, setStatusFilter] = useState<string>('all')\n  const [priorityFilter, setPriorityFilter] = useState<string>('all')\n  const [entityTypeFilter, setEntityTypeFilter] = useState<string>('all')\n  const [slaFilter, setSlaFilter] = useState<string>('all')\n\n  // Sorting state\n  const [sortField, setSortField] = useState<SortField>('created_at')\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc')\n\n  // Column visibility\n  const [visibleColumns, setVisibleColumns] = useState({\n    entity_type: true,\n    deal_investor: true,\n    amount: true,\n    priority: true,\n    status: true,\n    sla: true,\n    assigned_to: true,\n    requested_by: true,\n    created_at: true\n  })\n\n  // Filter and search logic\n  const filteredAndSortedApprovals = useMemo(() => {\n    let filtered = approvals\n\n    // Text search\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase()\n      filtered = filtered.filter(\n        (a) =>\n          a.entity_type.toLowerCase().includes(query) ||\n          a.related_deal?.name?.toLowerCase().includes(query) ||\n          a.related_investor?.legal_name?.toLowerCase().includes(query) ||\n          a.requested_by_profile?.display_name?.toLowerCase().includes(query) ||\n          a.assigned_to_profile?.display_name?.toLowerCase().includes(query) ||\n          a.id.toLowerCase().includes(query) ||\n          // Member invitation specific search\n          (a.entity_type === 'member_invitation' && (\n            a.entity_metadata?.email?.toLowerCase().includes(query) ||\n            a.entity_metadata?.entity_name?.toLowerCase().includes(query) ||\n            a.entity_metadata?.role?.toLowerCase().includes(query)\n          ))\n      )\n    }\n\n    // Status filter\n    if (statusFilter !== 'all') {\n      filtered = filtered.filter((a) => a.status === statusFilter)\n    }\n\n    // Priority filter\n    if (priorityFilter !== 'all') {\n      filtered = filtered.filter((a) => a.priority === priorityFilter)\n    }\n\n    // Entity type filter\n    if (entityTypeFilter !== 'all') {\n      filtered = filtered.filter((a) => a.entity_type === entityTypeFilter)\n    }\n\n    // SLA filter\n    if (slaFilter !== 'all') {\n      const now = new Date()\n      filtered = filtered.filter((a) => {\n        if (!a.sla_breach_at) return slaFilter === 'no_sla'\n        const breachDate = new Date(a.sla_breach_at)\n        if (slaFilter === 'overdue') return breachDate < now\n        if (slaFilter === 'due_soon') {\n          const hoursRemaining = (breachDate.getTime() - now.getTime()) / (1000 * 60 * 60)\n          return hoursRemaining > 0 && hoursRemaining < 4\n        }\n        if (slaFilter === 'on_track') {\n          const hoursRemaining = (breachDate.getTime() - now.getTime()) / (1000 * 60 * 60)\n          return hoursRemaining >= 4\n        }\n        return true\n      })\n    }\n\n    // Sorting\n    filtered.sort((a, b) => {\n      let aVal: any\n      let bVal: any\n\n      switch (sortField) {\n        case 'created_at':\n          aVal = new Date(a.created_at).getTime()\n          bVal = new Date(b.created_at).getTime()\n          break\n        case 'priority':\n          aVal = priorityOrder[a.priority]\n          bVal = priorityOrder[b.priority]\n          break\n        case 'sla_breach_at':\n          aVal = a.sla_breach_at ? new Date(a.sla_breach_at).getTime() : Infinity\n          bVal = b.sla_breach_at ? new Date(b.sla_breach_at).getTime() : Infinity\n          break\n        case 'entity_type':\n          aVal = a.entity_type\n          bVal = b.entity_type\n          break\n        case 'status':\n          aVal = a.status\n          bVal = b.status\n          break\n        default:\n          return 0\n      }\n\n      if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1\n      if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1\n      return 0\n    })\n\n    return filtered\n  }, [approvals, searchQuery, statusFilter, priorityFilter, entityTypeFilter, slaFilter, sortField, sortDirection])\n\n  // Unique values for filters\n  const uniqueEntityTypes = useMemo(\n    () => Array.from(new Set(approvals.map((a) => a.entity_type))),\n    [approvals]\n  )\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc')\n    } else {\n      setSortField(field)\n      setSortDirection('asc')\n    }\n  }\n\n  const clearFilters = () => {\n    setSearchQuery('')\n    setStatusFilter('all')\n    setPriorityFilter('all')\n    setEntityTypeFilter('all')\n    setSlaFilter('all')\n  }\n\n  const hasActiveFilters =\n    searchQuery || statusFilter !== 'all' || priorityFilter !== 'all' || entityTypeFilter !== 'all' || slaFilter !== 'all'\n\n  const SortIcon = ({ field }: { field: SortField }) => {\n    if (sortField !== field) return <ArrowUpDown className=\"h-3 w-3 ml-1 opacity-50\" />\n    return sortDirection === 'asc' ? (\n      <ArrowUp className=\"h-3 w-3 ml-1\" />\n    ) : (\n      <ArrowDown className=\"h-3 w-3 ml-1\" />\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Advanced Filters Bar */}\n      <Card className=\"border-border bg-muted/50\">\n        <CardContent className=\"p-4\">\n          <div className=\"space-y-4\">\n            {/* Search Bar */}\n            <div className=\"flex items-center gap-2\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search by deal name, investor, ID, assigned to...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 bg-background border-input text-foreground placeholder:text-muted-foreground\"\n                />\n              </div>\n              {hasActiveFilters && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={clearFilters}\n                  className=\"shrink-0\"\n                >\n                  <X className=\"h-4 w-4 mr-2\" />\n                  Clear Filters\n                </Button>\n              )}\n            </div>\n\n            {/* Filter Controls */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3\">\n              <div className=\"space-y-1.5\">\n                <label className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <Filter className=\"h-3 w-3\" />\n                  Status\n                </label>\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\n                  <SelectTrigger className=\"bg-background border-input text-foreground\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Statuses</SelectItem>\n                    <SelectItem value=\"pending\">Pending</SelectItem>\n                    <SelectItem value=\"approved\">Approved</SelectItem>\n                    <SelectItem value=\"rejected\">Rejected</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-1.5\">\n                <label className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <Filter className=\"h-3 w-3\" />\n                  Priority\n                </label>\n                <Select value={priorityFilter} onValueChange={setPriorityFilter}>\n                  <SelectTrigger className=\"bg-background border-input text-foreground\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Priorities</SelectItem>\n                    <SelectItem value=\"critical\">Critical</SelectItem>\n                    <SelectItem value=\"high\">High</SelectItem>\n                    <SelectItem value=\"medium\">Medium</SelectItem>\n                    <SelectItem value=\"low\">Low</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-1.5\">\n                <label className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <Filter className=\"h-3 w-3\" />\n                  Entity Type\n                </label>\n                <Select value={entityTypeFilter} onValueChange={setEntityTypeFilter}>\n                  <SelectTrigger className=\"bg-background border-input text-foreground\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Types</SelectItem>\n                    {uniqueEntityTypes.map((type) => (\n                      <SelectItem key={type} value={type}>\n                        {type.replace(/_/g, ' ')}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-1.5\">\n                <label className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <Filter className=\"h-3 w-3\" />\n                  SLA Status\n                </label>\n                <Select value={slaFilter} onValueChange={setSlaFilter}>\n                  <SelectTrigger className=\"bg-background border-input text-foreground\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All SLA</SelectItem>\n                    <SelectItem value=\"overdue\">Overdue</SelectItem>\n                    <SelectItem value=\"due_soon\">Due Soon (&lt;4h)</SelectItem>\n                    <SelectItem value=\"on_track\">On Track</SelectItem>\n                    <SelectItem value=\"no_sla\">No SLA</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-1.5\">\n                <label className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <SlidersHorizontal className=\"h-3 w-3\" />\n                  Sort By\n                </label>\n                <Select value={sortField} onValueChange={(v) => setSortField(v as SortField)}>\n                  <SelectTrigger className=\"bg-background border-input text-foreground\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"created_at\">Created Date</SelectItem>\n                    <SelectItem value=\"priority\">Priority</SelectItem>\n                    <SelectItem value=\"sla_breach_at\">SLA Deadline</SelectItem>\n                    <SelectItem value=\"entity_type\">Entity Type</SelectItem>\n                    <SelectItem value=\"status\">Status</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            {/* Results Counter */}\n            <div className=\"flex items-center justify-between pt-2 border-t border-border\">\n              <p className=\"text-sm text-muted-foreground\">\n                Showing <span className=\"font-semibold text-foreground\">{filteredAndSortedApprovals.length}</span> of{' '}\n                <span className=\"font-semibold text-foreground\">{approvals.length}</span> approvals\n              </p>\n              {hasActiveFilters && (\n                <Badge variant=\"outline\" className=\"text-xs\">\n                  Filters Active\n                </Badge>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Database Grid Table */}\n      <Card className=\"border-border bg-muted/50\">\n        <div className=\"overflow-x-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow className=\"border-border hover:bg-white/5\">\n                {visibleColumns.entity_type && (\n                  <TableHead>\n                    <button\n                      onClick={() => handleSort('entity_type')}\n                      className=\"flex items-center text-muted-foreground hover:text-foreground font-semibold\"\n                    >\n                      Type\n                      <SortIcon field=\"entity_type\" />\n                    </button>\n                  </TableHead>\n                )}\n                {visibleColumns.deal_investor && (\n                  <TableHead className=\"text-muted-foreground font-semibold\">Deal / Investor</TableHead>\n                )}\n                {visibleColumns.amount && (\n                  <TableHead className=\"text-muted-foreground font-semibold\">Amount</TableHead>\n                )}\n                {visibleColumns.priority && (\n                  <TableHead>\n                    <button\n                      onClick={() => handleSort('priority')}\n                      className=\"flex items-center text-muted-foreground hover:text-foreground font-semibold\"\n                    >\n                      Priority\n                      <SortIcon field=\"priority\" />\n                    </button>\n                  </TableHead>\n                )}\n                {visibleColumns.status && (\n                  <TableHead>\n                    <button\n                      onClick={() => handleSort('status')}\n                      className=\"flex items-center text-muted-foreground hover:text-foreground font-semibold\"\n                    >\n                      Status\n                      <SortIcon field=\"status\" />\n                    </button>\n                  </TableHead>\n                )}\n                {visibleColumns.sla && (\n                  <TableHead>\n                    <button\n                      onClick={() => handleSort('sla_breach_at')}\n                      className=\"flex items-center text-muted-foreground hover:text-foreground font-semibold\"\n                    >\n                      SLA Deadline\n                      <SortIcon field=\"sla_breach_at\" />\n                    </button>\n                  </TableHead>\n                )}\n                {visibleColumns.assigned_to && (\n                  <TableHead className=\"text-muted-foreground font-semibold\">Assigned To</TableHead>\n                )}\n                {visibleColumns.requested_by && (\n                  <TableHead className=\"text-muted-foreground font-semibold\">Requested By</TableHead>\n                )}\n                {visibleColumns.created_at && (\n                  <TableHead>\n                    <button\n                      onClick={() => handleSort('created_at')}\n                      className=\"flex items-center text-muted-foreground hover:text-foreground font-semibold\"\n                    >\n                      Created\n                      <SortIcon field=\"created_at\" />\n                    </button>\n                  </TableHead>\n                )}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredAndSortedApprovals.length > 0 ? (\n                filteredAndSortedApprovals.map((approval) => {\n                  const slaBreachDate = approval.sla_breach_at ? new Date(approval.sla_breach_at) : null\n                  const isOverdue = slaBreachDate && slaBreachDate < new Date()\n\n                  return (\n                    <TableRow\n                      key={approval.id}\n                      className=\"border-border cursor-pointer hover:bg-muted transition-colors\"\n                      onClick={() => onApprovalClick(approval)}\n                    >\n                      {visibleColumns.entity_type && (\n                        <TableCell>\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {approval.entity_type.replace(/_/g, ' ')}\n                          </Badge>\n                        </TableCell>\n                      )}\n                      {visibleColumns.deal_investor && (\n                        <TableCell>\n                          <div className=\"space-y-1\">\n                            {approval.entity_type === 'member_invitation' && approval.entity_metadata ? (\n                              <>\n                                <p className=\"font-medium text-foreground text-sm\">\n                                  {approval.entity_metadata.email}\n                                </p>\n                                <p className=\"text-xs text-muted-foreground\">\n                                  {approval.entity_metadata.entity_name}  {approval.entity_metadata.role || 'Member'}\n                                  {approval.entity_metadata.is_signatory && '  Signatory'}\n                                </p>\n                              </>\n                            ) : (\n                              <>\n                                {approval.related_deal && (\n                                  <p className=\"font-medium text-foreground text-sm\">\n                                    {approval.related_deal.name}\n                                  </p>\n                                )}\n                                {approval.related_investor && (\n                                  <p className=\"text-xs text-muted-foreground\">\n                                    {approval.related_investor.legal_name}\n                                  </p>\n                                )}\n                                {!approval.related_deal && !approval.related_investor && (\n                                  <p className=\"text-xs text-muted-foreground font-mono\">\n                                    {approval.entity_id.substring(0, 12)}...\n                                  </p>\n                                )}\n                              </>\n                            )}\n                          </div>\n                        </TableCell>\n                      )}\n                      {visibleColumns.amount && (\n                        <TableCell>\n                          {approval.entity_metadata?.indicative_amount ? (\n                            <p className=\"text-sm font-semibold text-emerald-400\">\n                              {approval.entity_metadata.indicative_currency || 'USD'}{' '}\n                              {approval.entity_metadata.indicative_amount.toLocaleString()}\n                            </p>\n                          ) : (\n                            <span className=\"text-muted-foreground text-xs\"></span>\n                          )}\n                        </TableCell>\n                      )}\n                      {visibleColumns.priority && (\n                        <TableCell>\n                          <Badge className={priorityColors[approval.priority]}>\n                            {approval.priority.toUpperCase()}\n                          </Badge>\n                        </TableCell>\n                      )}\n                      {visibleColumns.status && (\n                        <TableCell>\n                          <Badge className={statusColors[approval.status]}>\n                            {approval.status.replace('_', ' ').toUpperCase()}\n                          </Badge>\n                        </TableCell>\n                      )}\n                      {visibleColumns.sla && (\n                        <TableCell>\n                          {slaBreachDate ? (\n                            <div className={isOverdue ? 'text-red-400 font-semibold' : 'text-muted-foreground'}>\n                              <p className=\"text-xs\">\n                                {format(slaBreachDate, 'MMM dd, HH:mm')}\n                              </p>\n                              {isOverdue && (\n                                <p className=\"text-xs text-red-400\">Overdue</p>\n                              )}\n                            </div>\n                          ) : (\n                            <span className=\"text-muted-foreground text-xs\">No SLA</span>\n                          )}\n                        </TableCell>\n                      )}\n                      {visibleColumns.assigned_to && (\n                        <TableCell>\n                          <p className=\"text-sm text-foreground\">\n                            {approval.assigned_to_profile?.display_name || (\n                              <span className=\"text-muted-foreground\">Unassigned</span>\n                            )}\n                          </p>\n                        </TableCell>\n                      )}\n                      {visibleColumns.requested_by && (\n                        <TableCell>\n                          <p className=\"text-sm text-foreground\">\n                            {approval.requested_by_profile?.display_name || 'Unknown'}\n                          </p>\n                        </TableCell>\n                      )}\n                      {visibleColumns.created_at && (\n                        <TableCell>\n                          <p className=\"text-xs text-muted-foreground\">\n                            {format(new Date(approval.created_at), 'MMM dd, yyyy')}\n                          </p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            {format(new Date(approval.created_at), 'HH:mm')}\n                          </p>\n                        </TableCell>\n                      )}\n                    </TableRow>\n                  )\n                })\n              ) : (\n                <TableRow>\n                  <TableCell colSpan={9} className=\"text-center py-12\">\n                    <div className=\"space-y-2\">\n                      <p className=\"text-muted-foreground\">No approvals match your filters</p>\n                      {hasActiveFilters && (\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={clearFilters}\n                        >\n                          Clear all filters\n                        </Button>\n                      )}\n                    </div>\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </div>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5922, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/export-csv.ts"],"sourcesContent":["import { Approval } from '@/types/approvals'\n\nexport function exportApprovalsToCSV(approvals: Approval[], filename: string = 'approvals-export.csv') {\n  if (!approvals || approvals.length === 0) {\n    throw new Error('No data to export')\n  }\n\n  // Define CSV headers\n  const headers = [\n    'ID',\n    'Request Type',\n    'Status',\n    'Priority',\n    'Requested By',\n    'Assigned To',\n    'Investor',\n    'Deal',\n    'Amount',\n    'Units',\n    'SLA Breach At',\n    'Created At',\n    'Approved By',\n    'Approved At',\n    'Rejection Reason',\n    'Notes'\n  ]\n\n  // Convert approvals to CSV rows\n  const rows = approvals.map(approval => {\n    const amount = approval.entity_metadata?.requested_amount || \n                   approval.entity_metadata?.amount || \n                   ''\n    const units = approval.entity_metadata?.requested_units || ''\n    \n    return [\n      approval.id,\n      approval.entity_type,\n      approval.status,\n      approval.priority,\n      approval.requested_by_profile?.display_name || '',\n      approval.assigned_to_profile?.display_name || '',\n      approval.related_investor?.legal_name || '',\n      approval.related_deal?.name || '',\n      amount,\n      units,\n      approval.sla_breach_at ? new Date(approval.sla_breach_at).toLocaleString() : '',\n      new Date(approval.created_at).toLocaleString(),\n      approval.approved_by_profile?.display_name || '',\n      approval.approved_at ? new Date(approval.approved_at).toLocaleString() : '',\n      approval.rejection_reason || '',\n      approval.notes || ''\n    ].map(value => {\n      // Escape CSV values\n      const stringValue = String(value)\n      if (stringValue.includes(',') || stringValue.includes('\"') || stringValue.includes('\\n')) {\n        return `\"${stringValue.replace(/\"/g, '\"\"')}\"`\n      }\n      return stringValue\n    })\n  })\n\n  // Combine headers and rows\n  const csvContent = [\n    headers.join(','),\n    ...rows.map(row => row.join(','))\n  ].join('\\n')\n\n  // Create and download file\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' })\n  const link = document.createElement('a')\n  const url = URL.createObjectURL(blob)\n  \n  link.setAttribute('href', url)\n  link.setAttribute('download', filename)\n  link.style.visibility = 'hidden'\n  document.body.appendChild(link)\n  link.click()\n  document.body.removeChild(link)\n}\n\n"],"names":[],"mappings":";;;;AAEO,SAAS,qBAAqB,SAAqB,EAAE,WAAmB,sBAAsB;IACnG,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG;QACxC,MAAM,IAAI,MAAM;IAClB;IAEA,qBAAqB;IACrB,MAAM,UAAU;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,gCAAgC;IAChC,MAAM,OAAO,UAAU,GAAG,CAAC,CAAA;QACzB,MAAM,SAAS,SAAS,eAAe,EAAE,oBAC1B,SAAS,eAAe,EAAE,UAC1B;QACf,MAAM,QAAQ,SAAS,eAAe,EAAE,mBAAmB;QAE3D,OAAO;YACL,SAAS,EAAE;YACX,SAAS,WAAW;YACpB,SAAS,MAAM;YACf,SAAS,QAAQ;YACjB,SAAS,oBAAoB,EAAE,gBAAgB;YAC/C,SAAS,mBAAmB,EAAE,gBAAgB;YAC9C,SAAS,gBAAgB,EAAE,cAAc;YACzC,SAAS,YAAY,EAAE,QAAQ;YAC/B;YACA;YACA,SAAS,aAAa,GAAG,IAAI,KAAK,SAAS,aAAa,EAAE,cAAc,KAAK;YAC7E,IAAI,KAAK,SAAS,UAAU,EAAE,cAAc;YAC5C,SAAS,mBAAmB,EAAE,gBAAgB;YAC9C,SAAS,WAAW,GAAG,IAAI,KAAK,SAAS,WAAW,EAAE,cAAc,KAAK;YACzE,SAAS,gBAAgB,IAAI;YAC7B,SAAS,KAAK,IAAI;SACnB,CAAC,GAAG,CAAC,CAAA;YACJ,oBAAoB;YACpB,MAAM,cAAc,OAAO;YAC3B,IAAI,YAAY,QAAQ,CAAC,QAAQ,YAAY,QAAQ,CAAC,QAAQ,YAAY,QAAQ,CAAC,OAAO;gBACxF,OAAO,CAAC,CAAC,EAAE,YAAY,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;YAC/C;YACA,OAAO;QACT;IACF;IAEA,2BAA2B;IAC3B,MAAM,aAAa;QACjB,QAAQ,IAAI,CAAC;WACV,KAAK,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,CAAC;KAC7B,CAAC,IAAI,CAAC;IAEP,2BAA2B;IAC3B,MAAM,OAAO,IAAI,KAAK;QAAC;KAAW,EAAE;QAAE,MAAM;IAA0B;IACtE,MAAM,OAAO,SAAS,aAAa,CAAC;IACpC,MAAM,MAAM,IAAI,eAAe,CAAC;IAEhC,KAAK,YAAY,CAAC,QAAQ;IAC1B,KAAK,YAAY,CAAC,YAAY;IAC9B,KAAK,KAAK,CAAC,UAAU,GAAG;IACxB,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,KAAK,KAAK;IACV,SAAS,IAAI,CAAC,WAAW,CAAC;AAC5B"}},
    {"offset": {"line": 6003, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/approvals/approvals-page-client.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport {\r\n  CheckCircle2,\r\n  XCircle,\r\n  Clock,\r\n  AlertTriangle,\r\n  RefreshCw,\r\n  Download,\r\n  HandCoins,\r\n  Package\r\n} from 'lucide-react'\r\nimport { Approval, ApprovalStats, SLAStatus } from '@/types/approvals'\r\nimport { ApprovalActionDialog } from './approval-action-dialog'\r\nimport { ApprovalFilters, FilterState } from './approval-filters'\r\nimport { ApprovalDetailDrawer } from './approval-detail-drawer'\r\nimport { ApprovalViewSwitcher, ViewType } from './approval-view-switcher'\r\nimport { ApprovalsKanbanView } from './views/approvals-kanban-view'\r\nimport { ApprovalsListView } from './views/approvals-list-view'\r\nimport { ApprovalsDatabaseView } from './views/approvals-database-view'\r\nimport { exportApprovalsToCSV } from '@/lib/export-csv'\r\nimport { toast } from 'sonner'\r\n\r\ninterface ApprovalsPageClientProps {\r\n  initialApprovals: Approval[]\r\n  initialStats: ApprovalStats\r\n  initialCounts: {\r\n    pending: number\r\n    approved: number\r\n    rejected: number\r\n  }\r\n}\r\n\r\n// Calculate SLA status from deadline\r\nfunction calculateSLAStatus(slaBreachAt: string | null | undefined): SLAStatus {\r\n  if (!slaBreachAt) {\r\n    return { text: 'No SLA', isOverdue: false, urgency: 'low' }\r\n  }\r\n\r\n  const now = new Date()\r\n  const sla = new Date(slaBreachAt)\r\n  const diffMs = sla.getTime() - now.getTime()\r\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\r\n\r\n  if (diffHours < 0) {\r\n    return {\r\n      text: `${Math.abs(diffHours)}h overdue`,\r\n      isOverdue: true,\r\n      urgency: 'high',\r\n      hoursRemaining: diffHours\r\n    }\r\n  } else if (diffHours < 4) {\r\n    return {\r\n      text: `${diffHours}h remaining`,\r\n      isOverdue: false,\r\n      urgency: 'high',\r\n      hoursRemaining: diffHours\r\n    }\r\n  } else if (diffHours < 12) {\r\n    return {\r\n      text: `${diffHours}h remaining`,\r\n      isOverdue: false,\r\n      urgency: 'medium',\r\n      hoursRemaining: diffHours\r\n    }\r\n  } else {\r\n    return {\r\n      text: `${diffHours}h remaining`,\r\n      isOverdue: false,\r\n      urgency: 'low',\r\n      hoursRemaining: diffHours\r\n    }\r\n  }\r\n}\r\n\r\nexport function ApprovalsPageClient({\r\n  initialApprovals,\r\n  initialStats,\r\n  initialCounts\r\n}: ApprovalsPageClientProps) {\r\n  const [approvals, setApprovals] = useState<Approval[]>(initialApprovals)\r\n  const [stats, setStats] = useState<ApprovalStats>(initialStats)\r\n  const [counts, setCounts] = useState(initialCounts)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  // Track initial mount to prevent API call from overwriting server data\r\n  // The server passes initialApprovals with correct data for the preferred view,\r\n  // but the useEffect below fires before localStorage view is loaded, causing\r\n  // a race condition where pending-only data overwrites the complete dataset\r\n  const [isInitialMount, setIsInitialMount] = useState(true)\r\n\r\n  // Filter state\r\n  const [filters, setFilters] = useState<FilterState>({\r\n    entity_types: [],\r\n    priorities: [],\r\n    assigned_to_me: false,\r\n    overdue_only: false\r\n  })\r\n\r\n  // Pagination state - initialize total from initial data\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 50,\r\n    total: initialApprovals?.length || 0\r\n  })\r\n\r\n  // Bulk selection state\r\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set())\r\n  const [isBulkProcessing, setIsBulkProcessing] = useState(false)\r\n\r\n  // Dialog state\r\n  const [dialogOpen, setDialogOpen] = useState(false)\r\n  const [selectedApproval, setSelectedApproval] = useState<Approval | null>(null)\r\n  const [dialogAction, setDialogAction] = useState<'approve' | 'reject' | null>(null)\r\n\r\n  // Detail drawer state\r\n  const [detailDrawerOpen, setDetailDrawerOpen] = useState(false)\r\n  const [detailDrawerApproval, setDetailDrawerApproval] = useState<Approval | null>(null)\r\n\r\n  // View state\r\n  const [currentView, setCurrentView] = useState<ViewType>('table')\r\n\r\n  // Filter approvals based on current view\r\n  // Kanban shows all statuses, other views show only pending\r\n  const visibleApprovals = useMemo(() => {\r\n    if (currentView === 'kanban') {\r\n      return approvals\r\n    }\r\n    // Table, List, Database views only show pending items\r\n    return approvals.filter(a => a.status === 'pending')\r\n  }, [approvals, currentView])\r\n\r\n  // Load view preference from localStorage\r\n  useEffect(() => {\r\n    const savedView = localStorage.getItem('approvals-view-preference')\r\n    if (savedView && ['table', 'kanban', 'list', 'database'].includes(savedView)) {\r\n      setCurrentView(savedView as ViewType)\r\n    }\r\n  }, [])\r\n\r\n  // Save view preference to localStorage\r\n  useEffect(() => {\r\n    localStorage.setItem('approvals-view-preference', currentView)\r\n  }, [currentView])\r\n\r\n  // Reset pagination when view changes to avoid offset issues\r\n  // (e.g., switching from table view page 3 to Kanban which may have fewer items)\r\n  useEffect(() => {\r\n    setPagination(prev => ({ ...prev, page: 1 }))\r\n  }, [currentView])\r\n\r\n  // Refresh data\r\n  const refreshData = useCallback(async () => {\r\n    setIsLoading(true)\r\n    try {\r\n      // Build query params from filters\r\n      const params = new URLSearchParams()\r\n\r\n      // ALWAYS fetch all statuses to ensure data consistency across views\r\n      // The visibleApprovals memo handles filtering for non-kanban views\r\n      // This prevents data loss when user applies filter in table then switches to kanban\r\n      params.append('status', 'pending,approved,rejected')\r\n      const thirtyDaysAgo = new Date()\r\n      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30)\r\n      params.append('decided_after', thirtyDaysAgo.toISOString())\r\n\r\n      // Kanban view needs ALL items without pagination to show complete board\r\n      // Other views (table, list, database) use standard pagination\r\n      const effectiveLimit = currentView === 'kanban' ? 500 : pagination.limit\r\n      params.append('limit', effectiveLimit.toString())\r\n      if (currentView !== 'kanban') {\r\n        params.append('offset', ((pagination.page - 1) * pagination.limit).toString())\r\n      }\r\n\r\n      if (filters.entity_types.length > 0) {\r\n        params.append('entity_types', filters.entity_types.join(','))\r\n      }\r\n      if (filters.priorities.length > 0) {\r\n        params.append('priorities', filters.priorities.join(','))\r\n      }\r\n      if (filters.assigned_to_me) {\r\n        params.append('assigned_to', 'me')\r\n      }\r\n      if (filters.overdue_only) {\r\n        params.append('overdue_only', 'true')\r\n      }\r\n\r\n      const response = await fetch(`/api/approvals?${params.toString()}`, {\r\n        credentials: 'include'\r\n      })\r\n      if (!response.ok) throw new Error('Failed to fetch approvals')\r\n\r\n      const data = await response.json()\r\n      setApprovals(data.approvals || [])\r\n      setStats(data.stats || initialStats)\r\n      setCounts(data.counts || initialCounts)\r\n      setPagination(prev => ({ ...prev, total: data.total || 0 }))\r\n    } catch (error) {\r\n      console.error('Error refreshing approvals:', error)\r\n      toast.error('Failed to refresh approvals data')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }, [filters, pagination.page, pagination.limit, initialStats, initialCounts, currentView])\r\n\r\n  // Handle approve button click\r\n  const handleApproveClick = (approval: Approval) => {\r\n    setSelectedApproval(approval)\r\n    setDialogAction('approve')\r\n    setDialogOpen(true)\r\n  }\r\n\r\n  // Handle reject button click\r\n  const handleRejectClick = (approval: Approval) => {\r\n    setSelectedApproval(approval)\r\n    setDialogAction('reject')\r\n    setDialogOpen(true)\r\n  }\r\n\r\n  // Handle successful action\r\n  const handleActionSuccess = () => {\r\n    setSelectedIds(new Set()) // Clear selection after action\r\n    refreshData()\r\n  }\r\n\r\n  // Detail drawer handlers\r\n  const handleApprovalClick = (approval: Approval) => {\r\n    setDetailDrawerApproval(approval)\r\n    setDetailDrawerOpen(true)\r\n  }\r\n\r\n  const handleDrawerApprove = async (approvalId: string) => {\r\n    try {\r\n      const response = await fetch(`/api/approvals/${approvalId}/action`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify({ action: 'approve' })\r\n      })\r\n\r\n      if (!response.ok) throw new Error('Approval failed')\r\n\r\n      toast.success('Approval approved successfully')\r\n      await refreshData()\r\n    } catch (error) {\r\n      console.error('Error approving:', error)\r\n      toast.error('Failed to approve')\r\n      throw error\r\n    }\r\n  }\r\n\r\n  const handleDrawerReject = async (approvalId: string, reason: string) => {\r\n    try {\r\n      const response = await fetch(`/api/approvals/${approvalId}/action`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify({ action: 'reject', rejection_reason: reason })\r\n      })\r\n\r\n      if (!response.ok) throw new Error('Rejection failed')\r\n\r\n      toast.success('Approval rejected')\r\n      await refreshData()\r\n    } catch (error) {\r\n      console.error('Error rejecting:', error)\r\n      toast.error('Failed to reject')\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // Refresh when filters or pagination change\r\n  // Note: currentView is intentionally NOT included - server provides complete data\r\n  // for all views, so we don't need to refetch when switching views. User can\r\n  // manually refresh if needed via the Refresh button.\r\n  useEffect(() => {\r\n    // Skip initial mount - we already have correct server data from initialApprovals\r\n    if (isInitialMount) {\r\n      setIsInitialMount(false)\r\n      return\r\n    }\r\n    refreshData()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [filters.entity_types, filters.priorities, filters.assigned_to_me, filters.overdue_only, pagination.page])\r\n\r\n  // Bulk selection handlers\r\n  const toggleSelection = (id: string) => {\r\n    setSelectedIds(prev => {\r\n      const next = new Set(prev)\r\n      if (next.has(id)) {\r\n        next.delete(id)\r\n      } else {\r\n        next.add(id)\r\n      }\r\n      return next\r\n    })\r\n  }\r\n\r\n  const toggleSelectAll = () => {\r\n    if (selectedIds.size === visibleApprovals.length && visibleApprovals.length > 0) {\r\n      setSelectedIds(new Set())\r\n    } else {\r\n      setSelectedIds(new Set(visibleApprovals.map(a => a.id)))\r\n    }\r\n  }\r\n\r\n  // Bulk action handler\r\n  const handleBulkAction = async (action: 'approve' | 'reject') => {\r\n    if (selectedIds.size === 0) {\r\n      toast.error('No approvals selected')\r\n      return\r\n    }\r\n\r\n    setIsBulkProcessing(true)\r\n    try {\r\n      const response = await fetch('/api/approvals/bulk-action', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          approval_ids: Array.from(selectedIds),\r\n          action,\r\n          rejection_reason: action === 'reject' ? 'Bulk rejection' : undefined\r\n        })\r\n      })\r\n\r\n      if (!response.ok) throw new Error(`Bulk ${action} failed`)\r\n\r\n      const data = await response.json()\r\n\r\n      if (data.successful_count > 0) {\r\n        toast.success(`${data.successful_count} approval${data.successful_count > 1 ? 's' : ''} ${action}d successfully`)\r\n      }\r\n      if (data.failed_count > 0) {\r\n        toast.error(`${data.failed_count} approval${data.failed_count > 1 ? 's' : ''} failed`)\r\n      }\r\n\r\n      setSelectedIds(new Set())\r\n      refreshData()\r\n    } catch (error) {\r\n      console.error(`Bulk ${action} error:`, error)\r\n      toast.error(`Failed to ${action} selected approvals`)\r\n    } finally {\r\n      setIsBulkProcessing(false)\r\n    }\r\n  }\r\n\r\n  // Export to CSV handler\r\n  const handleExport = () => {\r\n    try {\r\n      if (!visibleApprovals || visibleApprovals.length === 0) {\r\n        toast.error('No data to export')\r\n        return\r\n      }\r\n\r\n      const timestamp = new Date().toISOString().split('T')[0]\r\n      const filename = `approvals-export-${timestamp}.csv`\r\n      exportApprovalsToCSV(visibleApprovals, filename)\r\n      toast.success(`Exported ${visibleApprovals.length} approvals to CSV`)\r\n    } catch (error) {\r\n      console.error('Export error:', error)\r\n      toast.error('Failed to export data')\r\n    }\r\n  }\r\n\r\n  // Quick action: Review overdue items\r\n  const handleReviewOverdue = async () => {\r\n    if (stats.overdue_count === 0) {\r\n      toast.info('No overdue items')\r\n      return\r\n    }\r\n    const newFilters = { \r\n      entity_types: [], \r\n      priorities: [], \r\n      assigned_to_me: false, \r\n      overdue_only: true \r\n    }\r\n    setFilters(newFilters)\r\n    setPagination(prev => ({ ...prev, page: 1 }))\r\n  }\r\n\r\n  // Quick action: Show low priority\r\n  const handleProcessLowValue = async () => {\r\n    const newFilters = {\r\n      entity_types: [] as any[],\r\n      priorities: ['low'] as any[],\r\n      assigned_to_me: false,\r\n      overdue_only: false\r\n    }\r\n    setFilters(newFilters)\r\n    setPagination(prev => ({ ...prev, page: 1 }))\r\n  }\r\n\r\n  // Quick action: Review high priority\r\n  const handleReviewHighPriority = async () => {\r\n    const newFilters = { \r\n      entity_types: [], \r\n      priorities: ['critical', 'high'] as any[], \r\n      assigned_to_me: false, \r\n      overdue_only: false \r\n    }\r\n    setFilters(newFilters)\r\n    setPagination(prev => ({ ...prev, page: 1 }))\r\n  }\r\n\r\n  const handleReviewInterests = async () => {\r\n    const newFilters = {\r\n      entity_types: ['deal_interest'] as any[],\r\n      priorities: [],\r\n      assigned_to_me: false,\r\n      overdue_only: false\r\n    }\r\n    setFilters(newFilters)\r\n    setPagination(prev => ({ ...prev, page: 1 }))\r\n  }\r\n\r\n  const handleReviewSubscriptions = async () => {\r\n    const newFilters = {\r\n      entity_types: ['deal_subscription'] as any[],\r\n      priorities: [],\r\n      assigned_to_me: false,\r\n      overdue_only: false\r\n    }\r\n    setFilters(newFilters)\r\n    setPagination(prev => ({ ...prev, page: 1 }))\r\n  }\r\n\r\n  // Quick action: Clear all filters\r\n  const handleClearFilters = async () => {\r\n    const newFilters = { \r\n      entity_types: [], \r\n      priorities: [], \r\n      assigned_to_me: false, \r\n      overdue_only: false \r\n    }\r\n    setFilters(newFilters)\r\n    setPagination(prev => ({ ...prev, page: 1 }))\r\n    setSelectedIds(new Set())\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"space-y-8\">\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Pending Approvals</CardTitle>\r\n              <Clock className=\"h-4 w-4 text-blue-600\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold text-blue-600\">{stats.total_pending}</div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">Requiring review</p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">SLA Breaches</CardTitle>\r\n              <AlertTriangle className=\"h-4 w-4 text-red-600\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold text-red-600\">{stats.overdue_count}</div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">Past deadline</p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Avg Processing Time</CardTitle>\r\n              <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold text-green-600\">\r\n                {stats.avg_processing_time_hours.toFixed(1)}h\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">Last 30 days</p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Approvals Table */}\r\n        <Card>\r\n          <CardHeader>\r\n            <div className=\"flex flex-col gap-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <CardTitle>Pending Approvals</CardTitle>\r\n                  <CardDescription>\r\n                    Review deal approvals across commitments, interests, and data-room workflows\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <ApprovalFilters\r\n                    onFilterChange={setFilters}\r\n                    currentFilters={filters}\r\n                  />\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={handleExport}\r\n                    disabled={!visibleApprovals || visibleApprovals.length === 0}\r\n                  >\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Export\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => refreshData()}\r\n                    disabled={isLoading}\r\n                  >\r\n                    <RefreshCw className={`h-4 w-4 mr-2 ${isLoading ? 'animate-spin' : ''}`} />\r\n                    Refresh\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* View Switcher */}\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <span className=\"text-sm text-muted-foreground\">View:</span>\r\n                  <ApprovalViewSwitcher\r\n                    currentView={currentView}\r\n                    onViewChange={setCurrentView}\r\n                  />\r\n                </div>\r\n                <Badge variant=\"secondary\" className=\"text-sm\">\r\n                  {visibleApprovals.length} approval{visibleApprovals.length !== 1 ? 's' : ''}\r\n                </Badge>\r\n              </div>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {/* Table View */}\r\n            {currentView === 'table' && (\r\n              <>\r\n                <div className=\"rounded-md border\">\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead className=\"w-12\">\r\n                          <Checkbox\r\n                            checked={selectedIds.size === visibleApprovals.length && visibleApprovals.length > 0}\r\n                            onCheckedChange={toggleSelectAll}\r\n                            aria-label=\"Select all\"\r\n                          />\r\n                        </TableHead>\r\n                        <TableHead>Request Type / User</TableHead>\r\n                        <TableHead>Entity</TableHead>\r\n                        <TableHead>Priority</TableHead>\r\n                        <TableHead>SLA Status</TableHead>\r\n                        <TableHead>Assigned To</TableHead>\r\n                        <TableHead>Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {visibleApprovals && visibleApprovals.length > 0 ? (\r\n                        visibleApprovals.map((approval) => {\r\n                          const slaStatus = calculateSLAStatus(approval.sla_breach_at)\r\n\r\n                          return (\r\n                            <TableRow\r\n                              key={approval.id}\r\n                              className={`cursor-pointer hover:bg-white/5 transition-colors ${selectedIds.has(approval.id) ? 'bg-muted/50' : ''}`}\r\n                              onClick={() => handleApprovalClick(approval)}\r\n                            >\r\n                              <TableCell className=\"w-12\" onClick={(e) => e.stopPropagation()}>\r\n                                <Checkbox\r\n                                  checked={selectedIds.has(approval.id)}\r\n                                  onCheckedChange={() => toggleSelection(approval.id)}\r\n                                  aria-label={`Select approval ${approval.id}`}\r\n                                />\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <div>\r\n                                  <div className=\"font-medium text-foreground\">\r\n                                    {approval.entity_type.replace(/_/g, ' ').toUpperCase()}\r\n                                  </div>\r\n                                  <div className=\"text-sm text-muted-foreground\">\r\n                                    {approval.requested_by_profile?.display_name || 'Unknown User'}\r\n                                  </div>\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {new Date(approval.created_at).toLocaleDateString()}\r\n                                  </div>\r\n                                </div>\r\n                              </TableCell>\r\n\r\n                              <TableCell>\r\n                                <div>\r\n                                  {approval.related_investor && (\r\n                                    <div className=\"font-medium text-foreground\">\r\n                                      {approval.related_investor.legal_name}\r\n                                    </div>\r\n                                  )}\r\n                                  {approval.related_deal && (\r\n                                    <div className=\"text-sm text-muted-foreground\">\r\n                                      {approval.related_deal.name}\r\n                                    </div>\r\n                                  )}\r\n                                  {!approval.related_investor && !approval.related_deal && (\r\n                                    <div className=\"text-sm text-muted-foreground font-mono\">\r\n                                      {approval.entity_id.substring(0, 8)}...\r\n                                    </div>\r\n                                  )}\r\n                                  {(() => {\r\n                                    // For deal_subscription approvals, use derived_amount\r\n                                    if (approval.entity_type === 'deal_subscription') {\r\n                                      const derivedAmount = approval.entity_metadata?.derived_amount\r\n                                      if (derivedAmount) {\r\n                                        const currency = approval.entity_metadata?.payload?.currency || 'USD'\r\n                                        const numeric = parseFloat(derivedAmount)\r\n                                        if (!Number.isNaN(numeric)) {\r\n                                          return (\r\n                                            <div className=\"text-xs text-muted-foreground mt-1\">\r\n                                              {currency} {numeric.toLocaleString()}\r\n                                            </div>\r\n                                          )\r\n                                        }\r\n                                      }\r\n                                    }\r\n\r\n                                    // For other approval types, use indicative_amount or requested_amount\r\n                                    const indicativeAmount = approval.entity_metadata?.indicative_amount\r\n                                    const requestedAmount = approval.entity_metadata?.requested_amount || approval.entity_metadata?.amount\r\n                                    const indicativeCurrency = approval.entity_metadata?.indicative_currency || ''\r\n\r\n                                    let formattedAmount: string | null = null\r\n                                    if (indicativeAmount) {\r\n                                      const numeric = parseFloat(indicativeAmount)\r\n                                      if (!Number.isNaN(numeric)) {\r\n                                        formattedAmount = `${indicativeCurrency} ${numeric.toLocaleString()}`.trim()\r\n                                      }\r\n                                    } else if (requestedAmount) {\r\n                                      const numeric = parseFloat(requestedAmount)\r\n                                      if (!Number.isNaN(numeric)) {\r\n                                        formattedAmount = `$${numeric.toLocaleString()}`\r\n                                      }\r\n                                    }\r\n\r\n                                    return formattedAmount ? (\r\n                                      <div className=\"text-xs text-muted-foreground mt-1\">\r\n                                        {formattedAmount}\r\n                                      </div>\r\n                                    ) : null\r\n                                  })()}\r\n                                </div>\r\n                              </TableCell>\r\n\r\n                              <TableCell>\r\n                                <Badge\r\n                                  variant={\r\n                                    approval.priority === 'critical' || approval.priority === 'high'\r\n                                      ? 'destructive'\r\n                                      : 'secondary'\r\n                                  }\r\n                                >\r\n                                  {approval.priority.toUpperCase()}\r\n                                </Badge>\r\n                              </TableCell>\r\n\r\n                              <TableCell>\r\n                                <Badge\r\n                                  variant={\r\n                                    slaStatus.isOverdue\r\n                                      ? 'destructive'\r\n                                      : slaStatus.urgency === 'high'\r\n                                      ? 'destructive'\r\n                                      : slaStatus.urgency === 'medium'\r\n                                      ? 'default'\r\n                                      : 'secondary'\r\n                                  }\r\n                                >\r\n                                  {slaStatus.text}\r\n                                </Badge>\r\n                              </TableCell>\r\n\r\n                              <TableCell>\r\n                                <span className=\"text-sm text-muted-foreground\">\r\n                                  {approval.assigned_to_profile?.display_name || 'Unassigned'}\r\n                                </span>\r\n                              </TableCell>\r\n\r\n                              <TableCell onClick={(e) => e.stopPropagation()}>\r\n                                {/* Only show action buttons for pending approvals */}\r\n                                {approval.status === 'pending' ? (\r\n                                  <div className=\"flex gap-2\">\r\n                                    <Button\r\n                                      variant=\"outline\"\r\n                                      size=\"sm\"\r\n                                      onClick={() => handleApproveClick(approval)}\r\n                                      className=\"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-950\"\r\n                                    >\r\n                                      <CheckCircle2 className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                    <Button\r\n                                      variant=\"outline\"\r\n                                      size=\"sm\"\r\n                                      onClick={() => handleRejectClick(approval)}\r\n                                      className=\"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950\"\r\n                                    >\r\n                                      <XCircle className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                  </div>\r\n                                ) : (\r\n                                  <Badge variant=\"secondary\" className=\"text-xs\">\r\n                                    {approval.status}\r\n                                  </Badge>\r\n                                )}\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          )\r\n                        })\r\n                      ) : (\r\n                        <TableRow>\r\n                          <TableCell colSpan={7} className=\"text-center py-8 text-muted-foreground\">\r\n                            {isLoading ? 'Loading approvals...' : 'No pending approvals found'}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      )}\r\n                    </TableBody>\r\n                  </Table>\r\n                </div>\r\n\r\n                {/* Pagination */}\r\n                <div className=\"flex items-center justify-between mt-4\">\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Showing {visibleApprovals.length > 0 ? ((pagination.page - 1) * pagination.limit) + 1 : 0}-\r\n                    {Math.min(pagination.page * pagination.limit, Math.max(pagination.total, visibleApprovals.length))} of {Math.max(pagination.total, visibleApprovals.length)} approvals\r\n                  </p>\r\n                  <div className=\"flex gap-2\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      disabled={pagination.page === 1 || isLoading}\r\n                      onClick={() => setPagination(prev => ({ ...prev, page: prev.page - 1 }))}\r\n                    >\r\n                      Previous\r\n                    </Button>\r\n                    <span className=\"inline-flex items-center px-3 text-sm text-muted-foreground\">\r\n                      Page {pagination.page} of {Math.ceil(pagination.total / pagination.limit) || 1}\r\n                    </span>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      disabled={pagination.page >= Math.ceil(pagination.total / pagination.limit) || isLoading}\r\n                      onClick={() => setPagination(prev => ({ ...prev, page: prev.page + 1 }))}\r\n                    >\r\n                      Next\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {/* Kanban View */}\r\n            {currentView === 'kanban' && (\r\n              <ApprovalsKanbanView\r\n                approvals={visibleApprovals}\r\n                onApprovalClick={handleApprovalClick}\r\n              />\r\n            )}\r\n\r\n            {/* List View */}\r\n            {currentView === 'list' && (\r\n              <ApprovalsListView\r\n                approvals={visibleApprovals}\r\n                onApprovalClick={handleApprovalClick}\r\n                onApprove={handleDrawerApprove}\r\n                onReject={handleDrawerReject}\r\n              />\r\n            )}\r\n\r\n            {/* Database/Grid View */}\r\n            {currentView === 'database' && (\r\n              <ApprovalsDatabaseView\r\n                approvals={visibleApprovals}\r\n                onApprovalClick={handleApprovalClick}\r\n              />\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Quick Actions & Performance */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"text-lg\">Quick Actions</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-3\">\r\n              <Button \r\n                className=\"w-full justify-start\" \r\n                variant=\"outline\"\r\n                onClick={handleReviewOverdue}\r\n                disabled={stats.overdue_count === 0}\r\n              >\r\n                <Clock className=\"mr-2 h-4 w-4 text-red-600\" />\r\n                Review Overdue ({stats.overdue_count})\r\n              </Button>\r\n              <Button \r\n                className=\"w-full justify-start\" \r\n                variant=\"outline\"\r\n                onClick={handleProcessLowValue}\r\n                disabled={approvals.length === 0}\r\n              >\r\n                <CheckCircle2 className=\"mr-2 h-4 w-4 text-green-600\" />\r\n                Show Low Priority\r\n              </Button>\r\n              <Button \r\n                className=\"w-full justify-start\" \r\n                variant=\"outline\"\r\n                onClick={handleReviewHighPriority}\r\n                disabled={approvals.length === 0}\r\n              >\r\n                <AlertTriangle className=\"mr-2 h-4 w-4 text-amber-600\" />\r\n                Review High Priority\r\n              </Button>\r\n              <Button\r\n                className=\"w-full justify-start\"\r\n                variant=\"outline\"\r\n                onClick={handleReviewInterests}\r\n              >\r\n                <HandCoins className=\"mr-2 h-4 w-4 text-purple-600\" />\r\n                Deal Interest Approvals\r\n              </Button>\r\n              <Button\r\n                className=\"w-full justify-start\"\r\n                variant=\"outline\"\r\n                onClick={handleReviewSubscriptions}\r\n              >\r\n                <Package className=\"mr-2 h-4 w-4 text-sky-600\" />\r\n                Subscription Approvals\r\n              </Button>\r\n              <Button \r\n                className=\"w-full justify-start\" \r\n                variant=\"outline\"\r\n                onClick={handleClearFilters}\r\n                disabled={\r\n                  filters.entity_types.length === 0 && \r\n                  filters.priorities.length === 0 && \r\n                  !filters.assigned_to_me && \r\n                  !filters.overdue_only\r\n                }\r\n              >\r\n                <XCircle className=\"mr-2 h-4 w-4 text-muted-foreground\" />\r\n                Clear All Filters\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"text-lg\">SLA Performance</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm\">On-time approvals (24h)</span>\r\n                  <span className=\"font-medium text-green-600\">\r\n                    {stats.approval_rate_24h.toFixed(0)}%\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm\">Overdue items</span>\r\n                  <span className=\"font-medium text-red-600\">{stats.overdue_count}</span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm\">Average processing</span>\r\n                  <span className=\"font-medium\">\r\n                    {stats.avg_processing_time_hours.toFixed(1)}h\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm\">Approved (30d)</span>\r\n                  <span className=\"font-medium text-green-600\">{stats.total_approved_30d}</span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm\">Rejected (30d)</span>\r\n                  <span className=\"font-medium text-red-600\">{stats.total_rejected_30d}</span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bulk Action Bar */}\r\n      {selectedIds.size > 0 && (\r\n        <div className=\"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white dark:bg-gray-800 shadow-xl rounded-lg p-4 border-2 border-blue-500 z-50 animate-in slide-in-from-bottom duration-300\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"font-medium text-sm\">\r\n              {selectedIds.size} approval{selectedIds.size > 1 ? 's' : ''} selected\r\n            </span>\r\n            <Button\r\n              size=\"sm\"\r\n              onClick={() => handleBulkAction('approve')}\r\n              disabled={isBulkProcessing}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n            >\r\n              <CheckCircle2 className=\"mr-2 h-4 w-4\" />\r\n              Approve All\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"destructive\"\r\n              onClick={() => handleBulkAction('reject')}\r\n              disabled={isBulkProcessing}\r\n            >\r\n              <XCircle className=\"mr-2 h-4 w-4\" />\r\n              Reject All\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"outline\"\r\n              onClick={() => setSelectedIds(new Set())}\r\n              disabled={isBulkProcessing}\r\n            >\r\n              Clear\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Approval Action Dialog */}\r\n      <ApprovalActionDialog\r\n        approval={selectedApproval}\r\n        action={dialogAction}\r\n        open={dialogOpen}\r\n        onOpenChange={setDialogOpen}\r\n        onSuccess={handleActionSuccess}\r\n      />\r\n\r\n      {/* Detail Drawer */}\r\n      <ApprovalDetailDrawer\r\n        approval={detailDrawerApproval}\r\n        open={detailDrawerOpen}\r\n        onOpenChange={setDetailDrawerOpen}\r\n        onApprove={handleDrawerApprove}\r\n        onReject={handleDrawerReject}\r\n      />\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}