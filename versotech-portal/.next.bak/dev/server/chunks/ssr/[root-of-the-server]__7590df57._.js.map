{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n/**\n * Format file size in bytes to human-readable format\n * @param bytes - File size in bytes\n * @returns Formatted file size string (e.g., \"1.5 MB\")\n */\nexport function formatFileSize(bytes?: number): string {\n  if (!bytes || bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return `${(bytes / Math.pow(k, i)).toFixed(2)} ${sizes[i]}`\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,6LAAO,EAAC,IAAA,oKAAI,EAAC;AACtB;AAOO,SAAS,eAAe,KAAc;IAC3C,IAAI,CAAC,SAAS,UAAU,GAAG,OAAO;IAElC,MAAM,IAAI;IACV,MAAM,QAAQ;QAAC;QAAS;QAAM;QAAM;QAAM;KAAK;IAC/C,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,SAAS,KAAK,GAAG,CAAC;IAEhD,OAAO,GAAG,CAAC,QAAQ,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE;AAC7D"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 hover:shadow-lg hover:scale-[1.02] transition-all duration-200 shadow-md\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border border-input bg-background text-foreground shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"text-foreground hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // Mobile-first touch targets (≥44px on mobile per Apple/Google guidelines)\n        default: \"h-11 md:h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-10 md:h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-12 md:h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-11 md:size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,8LAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,2EAA2E;YAC3E,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,+LAAI,GAAG;IAE9B,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground bg-background border-input h-11 md:h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base text-foreground shadow-sm transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-blue-500 focus-visible:ring-blue-500/20 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,qQAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,ocACA,yFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,qQAAC,gMAAmB;QAClB,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,uOACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/supabase/client.ts"],"sourcesContent":["'use client'\r\n\r\nimport { createBrowserClient } from '@supabase/ssr'\r\nimport type { SupabaseClient } from '@supabase/supabase-js'\r\n\r\n// Singleton instance to prevent multiple clients from competing for token refresh\r\nlet client: SupabaseClient | null = null\r\n\r\n/**\r\n * Create a Supabase client for browser-side use (singleton pattern)\r\n *\r\n * This uses the default Supabase storage implementation which:\r\n * - Stores session in localStorage for persistence across browser sessions\r\n * - Automatically refreshes tokens before expiration\r\n * - Handles session detection from URL (for OAuth callbacks and magic links)\r\n *\r\n * Uses singleton pattern to prevent \"Invalid Refresh Token: Already Used\" errors\r\n * that occur when multiple client instances try to refresh the same token\r\n */\r\nexport const createClient = () => {\r\n  // Return existing client if already created\r\n  if (client) {\r\n    return client\r\n  }\r\n\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n\r\n  if (!supabaseUrl || !supabaseAnonKey) {\r\n    const message = 'Missing Supabase browser credentials. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.'\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.warn(message)\r\n    }\r\n    throw new Error(message)\r\n  }\r\n\r\n  // Create new client instance\r\n  client = createBrowserClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      persistSession: true,\r\n      detectSessionInUrl: true,\r\n      // CRITICAL: Disabled to prevent dual-refresh conflict with middleware\r\n      // Middleware handles all token refresh to avoid \"Refresh Token Already Used\" errors\r\n      autoRefreshToken: false,\r\n      // Use default storage key to match middleware cookie expectations\r\n      // Previously used 'supabase.auth.token' which caused mismatch with middleware\r\n      flowType: 'pkce',\r\n    },\r\n  })\r\n\r\n  return client\r\n}\r\n\r\n/**\r\n * Reset the Supabase client singleton\r\n *\r\n * This should be called when authentication definitively fails and the client\r\n * needs to be recreated with fresh state. Common scenarios:\r\n * - Refresh token has expired and cannot be renewed\r\n * - Session conflicts detected\r\n * - Before re-authentication after failed login attempts\r\n *\r\n * After calling this, the next call to createClient() will create a new instance.\r\n */\r\nexport const resetClient = () => {\r\n  if (client) {\r\n    console.info('[supabase-client] Resetting client singleton due to auth failure')\r\n    client = null\r\n  }\r\n}\r\n\r\n/**\r\n * Check if the current client has a valid session\r\n * Returns true if there's an active session, false otherwise\r\n */\r\nexport const hasActiveSession = async (): Promise<boolean> => {\r\n  if (!client) {\r\n    return false\r\n  }\r\n\r\n  try {\r\n    const { data: { session } } = await client.auth.getSession()\r\n    return session !== null\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAEA;AAAA;AAFA;;AAKA,kFAAkF;AAClF,IAAI,SAAgC;AAa7B,MAAM,eAAe;IAC1B,4CAA4C;IAC5C,IAAI,QAAQ;QACV,OAAO;IACT;IAEA,MAAM;IACN,MAAM;IAEN;;IAQA,6BAA6B;IAC7B,SAAS,IAAA,wNAAmB,EAAC,aAAa,iBAAiB;QACzD,MAAM;YACJ,gBAAgB;YAChB,oBAAoB;YACpB,sEAAsE;YACtE,oFAAoF;YACpF,kBAAkB;YAClB,kEAAkE;YAClE,8EAA8E;YAC9E,UAAU;QACZ;IACF;IAEA,OAAO;AACT;AAaO,MAAM,cAAc;IACzB,IAAI,QAAQ;QACV,QAAQ,IAAI,CAAC;QACb,SAAS;IACX;AACF;AAMO,MAAM,mBAAmB;IAC9B,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,OAAO,IAAI,CAAC,UAAU;QAC1D,OAAO,YAAY;IACrB,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 353, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/session-manager.ts"],"sourcesContent":["'use client'\r\n\r\n/**\r\n * Simplified Session Manager\r\n * \r\n * Provides basic session management utilities without forcing re-authentication.\r\n * Supabase handles session persistence and expiration automatically.\r\n */\r\n\r\nconst AUTH_KEY_HINTS = ['supabase', 'sb-', 'auth', 'supabase.auth.token']\r\n\r\nconst removeAuthKeys = (storage: Storage) => {\r\n  const keysToRemove = new Set<string>()\r\n\r\n  AUTH_KEY_HINTS.forEach((hint) => {\r\n    Object.keys(storage)\r\n      .filter((key) => key.includes(hint))\r\n      .forEach((key) => keysToRemove.add(key))\r\n  })\r\n\r\n  keysToRemove.forEach((key) => storage.removeItem(key))\r\n}\r\n\r\nclass SessionManager {\r\n  private static instance: SessionManager\r\n  private isInitialized = false\r\n\r\n  private constructor() {}\r\n\r\n  static getInstance(): SessionManager {\r\n    if (!SessionManager.instance) {\r\n      SessionManager.instance = new SessionManager()\r\n    }\r\n\r\n    return SessionManager.instance\r\n  }\r\n\r\n  /**\r\n   * Initialize session manager\r\n   * Sets up storage event listeners to handle cross-tab logout\r\n   */\r\n  init(): void {\r\n    if (this.isInitialized || typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    try {\r\n      this.isInitialized = true\r\n\r\n      // Listen for storage changes in other tabs (cross-tab logout)\r\n      window.addEventListener('storage', this.handleStorageChange)\r\n\r\n      console.info('[auth-session] Session manager initialized')\r\n    } catch (error) {\r\n      console.error('[auth-session] Failed to initialize session manager:', error)\r\n      this.isInitialized = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all auth-related cookies\r\n   * Cookies need to be cleared with exact path and domain to work properly\r\n   */\r\n  private clearAuthCookies(): void {\r\n    if (typeof document === 'undefined') {\r\n      return\r\n    }\r\n\r\n    // Get all cookies\r\n    const cookies = document.cookie.split(';')\r\n    const authCookieNames: string[] = []\r\n\r\n    // Find all auth-related cookies\r\n    cookies.forEach(cookie => {\r\n      const cookieName = cookie.split('=')[0].trim()\r\n      if (AUTH_KEY_HINTS.some(hint => cookieName.includes(hint))) {\r\n        authCookieNames.push(cookieName)\r\n      }\r\n    })\r\n\r\n    // Clear each auth cookie with multiple path/domain combinations\r\n    authCookieNames.forEach(name => {\r\n      // Try various path combinations\r\n      const paths = ['/', '/versoholdings', '/versotech', '/versotech_main']\n      const domains = [window.location.hostname, `.${window.location.hostname}`, '']\r\n\r\n      paths.forEach(path => {\r\n        domains.forEach(domain => {\r\n          const domainStr = domain ? `domain=${domain};` : ''\r\n          document.cookie = `${name}=; ${domainStr}path=${path}; expires=Thu, 01 Jan 1970 00:00:00 GMT; max-age=0`\r\n        })\r\n      })\r\n    })\r\n\r\n    console.info('[auth-session] Cleared auth cookies:', authCookieNames)\r\n  }\r\n\r\n  /**\r\n   * Clear all auth data - localStorage, sessionStorage, and cookies\r\n   * This is the most comprehensive cleanup and should be used before re-authentication\r\n   */\r\n  clearAllAuthData(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Clearing ALL auth data (storage + cookies)')\r\n\r\n    // Clear storage\r\n    removeAuthKeys(window.localStorage)\r\n    removeAuthKeys(window.sessionStorage)\r\n\r\n    // Clear cookies\r\n    this.clearAuthCookies()\r\n  }\r\n\r\n  /**\r\n   * Force sign out by clearing all auth-related storage\r\n   * Used during logout to ensure clean state\r\n   */\r\n  forceSignOut(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Force sign out - clearing all auth state')\r\n\r\n    // Clear all local auth data\r\n    this.clearAllAuthData()\r\n\r\n    // Call logout API to clear server-side session\r\n    void fetch('/api/auth/logout', {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n    }).catch((error) => {\r\n      console.error('[auth-session] Failed to revoke server session', error)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Handle storage changes from other tabs\r\n   * If auth keys are removed in another tab, redirect to login\r\n   */\r\n  private handleStorageChange = (event: StorageEvent): void => {\r\n    if (event.key && AUTH_KEY_HINTS.some((hint) => event.key?.includes(hint)) && event.newValue === null) {\r\n      console.info('[auth-session] Auth state cleared in another tab, redirecting to login')\r\n      window.location.href = '/versotech_main/login?error=signed_out'\n    }\r\n  }\r\n\r\n  /**\r\n   * Mark session as authenticated\r\n   * This is called after successful login to update session state\r\n   */\r\n  markAuthenticated(): void {\r\n    if (typeof window === 'undefined') {\r\n      return\r\n    }\r\n\r\n    console.info('[auth-session] Session marked as authenticated')\r\n  }\r\n\r\n  /**\r\n   * Get debug information about current session state\r\n   * Useful for troubleshooting auth issues\r\n   */\r\n  getDebugInfo(): Record<string, unknown> {\r\n    if (typeof window === 'undefined') {\r\n      return { error: 'Not in browser' }\r\n    }\r\n\r\n    return {\r\n      localStorageKeys: Object.keys(localStorage).filter((key) =>\r\n        AUTH_KEY_HINTS.some((hint) => key.includes(hint))\r\n      ),\r\n      sessionStorageKeys: Object.keys(sessionStorage).filter((key) =>\r\n        AUTH_KEY_HINTS.some((hint) => key.includes(hint))\r\n      ),\r\n    }\r\n  }\r\n}\r\n\r\nexport const sessionManager = SessionManager.getInstance()\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;;CAKC,GAED,MAAM,iBAAiB;IAAC;IAAY;IAAO;IAAQ;CAAsB;AAEzE,MAAM,iBAAiB,CAAC;IACtB,MAAM,eAAe,IAAI;IAEzB,eAAe,OAAO,CAAC,CAAC;QACtB,OAAO,IAAI,CAAC,SACT,MAAM,CAAC,CAAC,MAAQ,IAAI,QAAQ,CAAC,OAC7B,OAAO,CAAC,CAAC,MAAQ,aAAa,GAAG,CAAC;IACvC;IAEA,aAAa,OAAO,CAAC,CAAC,MAAQ,QAAQ,UAAU,CAAC;AACnD;AAEA,MAAM;IACJ,OAAe,SAAwB;IAC/B,gBAAgB,MAAK;IAE7B,aAAsB,CAAC;IAEvB,OAAO,cAA8B;QACnC,IAAI,CAAC,eAAe,QAAQ,EAAE;YAC5B,eAAe,QAAQ,GAAG,IAAI;QAChC;QAEA,OAAO,eAAe,QAAQ;IAChC;IAEA;;;GAGC,GACD,OAAa;QACX,IAAI,IAAI,CAAC,aAAa,IAAI,kDAAkB,aAAa;YACvD;QACF;;;IAaF;IAEA;;;GAGC,GACD,AAAQ,mBAAyB;QAC/B,IAAI,OAAO,aAAa,aAAa;YACnC;QACF;QAEA,kBAAkB;QAClB,MAAM,UAAU,SAAS,MAAM,CAAC,KAAK,CAAC;QACtC,MAAM,kBAA4B,EAAE;QAEpC,gCAAgC;QAChC,QAAQ,OAAO,CAAC,CAAA;YACd,MAAM,aAAa,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI;YAC5C,IAAI,eAAe,IAAI,CAAC,CAAA,OAAQ,WAAW,QAAQ,CAAC,QAAQ;gBAC1D,gBAAgB,IAAI,CAAC;YACvB;QACF;QAEA,gEAAgE;QAChE,gBAAgB,OAAO,CAAC,CAAA;YACtB,gCAAgC;YAChC,MAAM,QAAQ;gBAAC;gBAAK;gBAAkB;gBAAc;aAAkB;YACtE,MAAM,UAAU;gBAAC,OAAO,QAAQ,CAAC,QAAQ;gBAAE,CAAC,CAAC,EAAE,OAAO,QAAQ,CAAC,QAAQ,EAAE;gBAAE;aAAG;YAE9E,MAAM,OAAO,CAAC,CAAA;gBACZ,QAAQ,OAAO,CAAC,CAAA;oBACd,MAAM,YAAY,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG;oBACjD,SAAS,MAAM,GAAG,GAAG,KAAK,GAAG,EAAE,UAAU,KAAK,EAAE,KAAK,kDAAkD,CAAC;gBAC1G;YACF;QACF;QAEA,QAAQ,IAAI,CAAC,wCAAwC;IACvD;IAEA;;;GAGC,GACD,mBAAyB;QACvB,wCAAmC;YACjC;QACF;;;IAUF;IAEA;;;GAGC,GACD,eAAqB;QACnB,wCAAmC;YACjC;QACF;;;IAcF;IAEA;;;GAGC,GACD,AAAQ,sBAAsB,CAAC;QAC7B,IAAI,MAAM,GAAG,IAAI,eAAe,IAAI,CAAC,CAAC,OAAS,MAAM,GAAG,EAAE,SAAS,UAAU,MAAM,QAAQ,KAAK,MAAM;YACpG,QAAQ,IAAI,CAAC;YACb,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF,EAAC;IAED;;;GAGC,GACD,oBAA0B;QACxB,wCAAmC;YACjC;QACF;;;IAGF;IAEA;;;GAGC,GACD,eAAwC;QACtC,wCAAmC;YACjC,OAAO;gBAAE,OAAO;YAAiB;QACnC;;;IAUF;AACF;AAEO,MAAM,iBAAiB,eAAe,WAAW"}},
    {"offset": {"line": 493, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/auth-client.ts"],"sourcesContent":["'use client'\r\n\r\nimport { createClient, resetClient } from '@/lib/supabase/client'\r\nimport { sessionManager } from '@/lib/session-manager'\r\nimport type { User, Session } from '@supabase/supabase-js'\r\n\r\nexport interface AuthUser {\r\n  id: string\r\n  email: string\r\n  displayName: string\r\n  avatar?: string\r\n  role:\r\n    | 'investor'\r\n    | 'staff_admin'\r\n    | 'staff_ops'\r\n    | 'staff_rm'\r\n    | 'arranger'\r\n    | 'introducer'\r\n    | 'partner'\r\n    | 'commercial_partner'\r\n    | 'lawyer'\r\n    | 'ceo'\r\n  title?: string\r\n  created_at: string\r\n}\r\n\r\nexport interface AuthSession {\r\n  user: AuthUser\r\n  session: Session\r\n}\r\n\r\nexport interface SignInApiResponse {\r\n  success?: boolean\r\n  redirect?: string\r\n  session?: {\r\n    access_token: string\r\n    refresh_token: string\r\n    expires_at?: number | null\r\n  }\r\n  user?: {\r\n    id: string\r\n    email: string\r\n    role: string\r\n    displayName?: string\r\n  }\r\n  error?: string\r\n}\r\n\r\nconst syncBrowserSession = async (session?: { access_token: string; refresh_token: string }) => {\r\n  console.log('[auth] syncBrowserSession called, session provided:', !!session)\r\n\r\n  if (!session) {\r\n    console.log('[auth] No session to sync, returning true')\r\n    return true\r\n  }\r\n\r\n  const supabase = createClient()\r\n\r\n  console.log('[auth] Calling supabase.auth.setSession...')\r\n  const { data, error } = await supabase.auth.setSession({\r\n    access_token: session.access_token,\r\n    refresh_token: session.refresh_token\r\n  })\r\n\r\n  if (error) {\r\n    console.error('[auth] Client session sync failed:', error)\r\n    return false\r\n  }\r\n\r\n  console.log('[auth] Session synced successfully, user:', data?.user?.email)\r\n  return true\r\n}\r\n\r\nexport class AuthError extends Error {\r\n  constructor(message: string, public code?: string) {\r\n    super(message)\r\n    this.name = 'AuthError'\r\n  }\r\n}\r\n\r\n/**\r\n * SIGNUP - DISABLED\r\n *\r\n * This platform is invite-only. Self-registration is not allowed.\r\n * This function is kept for backwards compatibility but will always fail.\r\n *\r\n * @deprecated Use admin invitation flow instead\r\n */\r\nexport const signUp = async (email: string, password: string, displayName: string, portal: 'investor' | 'staff' = 'investor') => {\r\n  console.warn('[auth-client] signUp() called but self-registration is disabled')\r\n  throw new AuthError('Self-registration is disabled. This platform is invite-only. Please contact your administrator or relationship manager to request access.')\r\n}\r\n\r\n// Sign in with email and password\r\nexport const signIn = async (email: string, password: string, portal: 'investor' | 'staff' = 'investor') => {\r\n  try {\r\n    // CRITICAL FIX: Clear all auth data before attempting sign-in\r\n    // This prevents \"Invalid Refresh Token\" and session conflict errors\r\n    console.log('[auth-client] Clearing all auth data before sign-in...')\r\n    sessionManager.clearAllAuthData()\r\n\r\n    // Reset the Supabase client singleton to get fresh instance\r\n    resetClient()\r\n\r\n    // Small delay to ensure storage clearing completes\r\n    await new Promise(resolve => setTimeout(resolve, 100))\r\n\r\n    const response = await fetch('/api/auth/signin', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password, portal })\r\n    })\r\n\r\n    const payload: SignInApiResponse = await response.json().catch(() => ({}))\r\n\r\n    if (!response.ok || !payload.success) {\r\n      const message = typeof payload.error === 'string' && payload.error.trim()\r\n        ? payload.error\r\n        : 'Authentication failed. Please check your credentials.'\r\n      throw new AuthError(message)\r\n    }\r\n\r\n    const synced = await syncBrowserSession(payload.session ? {\r\n      access_token: payload.session.access_token,\r\n      refresh_token: payload.session.refresh_token\r\n    } : undefined)\r\n\r\n    if (!synced) {\r\n      throw new AuthError('Unable to establish session. Please try again.')\r\n    }\r\n\r\n    sessionManager.markAuthenticated()\r\n\r\n    return payload\r\n  } catch (error) {\r\n    if (error instanceof AuthError) {\r\n      throw error\r\n    }\r\n\r\n    console.error('Sign in failed:', error)\r\n    throw new AuthError('Sign in failed. Please check your credentials.')\r\n  }\r\n}\r\n\r\n/**\r\n * GOOGLE OAUTH - DISABLED\r\n *\r\n * Google OAuth has been disabled for security reasons.\r\n * This platform is invite-only with email/password authentication.\r\n *\r\n * @deprecated OAuth providers have been disabled\r\n */\r\nexport const signInWithGoogle = async (portalType: 'staff' | 'investor' = 'investor') => {\r\n  console.warn('[auth-client] signInWithGoogle() called but OAuth is disabled')\r\n  throw new AuthError('Google sign-in is disabled. Please use your email and password to sign in.')\r\n}\r\n\r\n// Sign out with comprehensive session clearing\r\nexport const signOut = async () => {\r\n  const supabase = createClient()\r\n\r\n  let signOutError: unknown = null\r\n\r\n  try {\r\n    const { error } = await supabase.auth.signOut()\r\n\r\n    if (error) {\r\n      console.error('[auth] Supabase signOut error:', error)\r\n      signOutError = error\r\n    }\r\n  } catch (error) {\r\n    console.error('[auth] Sign out error:', error)\r\n    signOutError = error\r\n  } finally {\r\n    if (typeof window !== 'undefined') {\r\n      sessionManager.forceSignOut()\r\n      // Reset the Supabase client singleton after sign-out\r\n      resetClient()\r\n    }\r\n  }\r\n\r\n  if (signOutError) {\r\n    throw new AuthError('Sign out failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Get current user with profile data\r\nexport const getCurrentUser = async (): Promise<AuthUser | null> => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    // Get current auth user\r\n    const { data: { user }, error: userError } = await supabase.auth.getUser()\r\n\r\n    if (userError || !user) {\r\n      return null\r\n    }\r\n\r\n    // Get profile data from database\r\n    const { data: profile, error: profileError } = await supabase\r\n      .from('profiles')\r\n      .select('*')\r\n      .eq('id', user.id)\r\n      .single()\r\n\r\n    if (profileError || !profile) {\r\n      console.error('Error getting profile:', profileError)\r\n      return null\r\n    }\r\n\r\n    return {\r\n      id: profile.id,\r\n      email: profile.email,\r\n      displayName: profile.display_name || profile.email?.split('@')[0] || 'User',\r\n      avatar: profile.avatar,\r\n      role: profile.role as AuthUser['role'],\r\n      title: profile.title,\r\n      created_at: profile.created_at\r\n    }\r\n  } catch (error) {\r\n    console.error('Error getting current user:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Get current session\r\nexport const getCurrentSession = async (): Promise<Session | null> => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const { data: { session }, error } = await supabase.auth.getSession()\r\n\r\n    if (error) {\r\n      console.error('Error getting session:', error)\r\n      return null\r\n    }\r\n\r\n    return session\r\n  } catch (error) {\r\n    console.error('Error getting session:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Auth state listener\r\nexport const onAuthStateChange = (callback: (event: string, session: Session | null) => void) => {\r\n  const supabase = createClient()\r\n\r\n  return supabase.auth.onAuthStateChange(callback)\r\n}\r\n\r\n// Password reset - uses custom API with Resend email\r\nexport const resetPassword = async (email: string) => {\r\n  try {\r\n    const response = await fetch('/api/auth/request-reset', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email })\r\n    })\r\n\r\n    const data = await response.json()\r\n\r\n    if (!response.ok) {\r\n      // Include detail error for debugging\r\n      const errorMsg = data.detail\r\n        ? `${data.error} (${data.detail})`\r\n        : data.error || 'Password reset failed. Please try again.'\r\n      throw new AuthError(errorMsg)\r\n    }\r\n\r\n    // Success - email sent (or would have been if account exists)\r\n    return { success: true, message: data.message }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Password reset failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Update password\r\nexport const updatePassword = async (newPassword: string) => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const { error } = await supabase.auth.updateUser({\r\n      password: newPassword\r\n    })\r\n\r\n    if (error) {\r\n      throw new AuthError(error.message, error.message)\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Password update failed. Please try again.')\r\n  }\r\n}\r\n\r\n// Update user profile\r\nexport const updateProfile = async (updates: Partial<Pick<AuthUser, 'displayName' | 'title'>>) => {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    const user = await getCurrentUser()\r\n    if (!user) {\r\n      throw new AuthError('No authenticated user found')\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from('profiles')\r\n      .update({\r\n        display_name: updates.displayName,\r\n        title: updates.title\r\n      })\r\n      .eq('id', user.id)\r\n\r\n    if (error) {\r\n      throw new AuthError(error.message, error.message)\r\n    }\r\n\r\n    // Also update auth user metadata\r\n    if (updates.displayName) {\r\n      const { error: authError } = await supabase.auth.updateUser({\r\n        data: { display_name: updates.displayName }\r\n      })\r\n\r\n      if (authError) {\r\n        console.error('Error updating auth metadata:', authError)\r\n      }\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof AuthError) throw error\r\n    throw new AuthError('Profile update failed. Please try again.')\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 740, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/%28public%29/versotech_main/reset-password/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, Suspense } from 'react'\r\nimport { useRouter, useSearchParams } from 'next/navigation'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { resetPassword, updatePassword, AuthError } from '@/lib/auth-client'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport {\r\n  Loader2,\r\n  Eye,\r\n  EyeOff,\r\n  Shield,\r\n  Mail,\r\n  Lock,\r\n  ArrowLeft,\r\n  CheckCircle\r\n} from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport Image from 'next/image'\r\n\r\nfunction ResetPasswordContent() {\r\n  const router = useRouter()\r\n  const searchParams = useSearchParams()\r\n  const [email, setEmail] = useState('')\r\n  const [newPassword, setNewPassword] = useState('')\r\n  const [confirmPassword, setConfirmPassword] = useState('')\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [message, setMessage] = useState<{ type: 'error' | 'success' | 'info', text: string } | null>(null)\r\n  const [emailSent, setEmailSent] = useState(false)\r\n  const [isRecoveryMode, setIsRecoveryMode] = useState(false)\r\n  const [checkingSession, setCheckingSession] = useState(true)\r\n\r\n  // Check if user came from a password reset email link (or was redirected from auth callback)\r\n  useEffect(() => {\r\n    const checkRecoverySession = async () => {\r\n      const supabase = createClient()\r\n\r\n      // Check for hash fragment (Supabase sends recovery token in hash)\r\n      if (typeof window !== 'undefined' && window.location.hash) {\r\n        const hashParams = new URLSearchParams(window.location.hash.substring(1))\r\n        const accessToken = hashParams.get('access_token')\r\n        const type = hashParams.get('type')\r\n        const refreshToken = hashParams.get('refresh_token')\r\n\r\n        if (type === 'recovery' && accessToken && refreshToken) {\r\n          // Set the session from recovery tokens\r\n          const { error } = await supabase.auth.setSession({\r\n            access_token: accessToken,\r\n            refresh_token: refreshToken\r\n          })\r\n\r\n          if (!error) {\r\n            console.log('[reset-password] Recovery session set from hash')\r\n            setIsRecoveryMode(true)\r\n            // Clear the hash from URL for cleaner display\r\n            window.history.replaceState(null, '', window.location.pathname)\r\n          } else {\r\n            setMessage({ type: 'error', text: 'Recovery link expired or invalid. Please request a new one.' })\r\n          }\r\n          setCheckingSession(false)\r\n          return\r\n        }\r\n      }\r\n\r\n      // Also check URL params (alternative flow)\r\n      const code = searchParams.get('code')\r\n      if (code) {\r\n        try {\r\n          const { error } = await supabase.auth.exchangeCodeForSession(code)\r\n          if (!error) {\r\n            console.log('[reset-password] Recovery session set from code')\r\n            setIsRecoveryMode(true)\r\n          } else {\r\n            setMessage({ type: 'error', text: 'Recovery link expired or invalid. Please request a new one.' })\r\n          }\r\n        } catch {\r\n          setMessage({ type: 'error', text: 'Failed to process recovery link.' })\r\n        }\r\n        setCheckingSession(false)\r\n        return\r\n      }\r\n\r\n      // Check if we were redirected from auth/callback with recovery flag\r\n      // This is the ONLY way to enter recovery mode via redirect (not just any session)\r\n      const fromRecovery = searchParams.get('from') === 'recovery'\r\n      if (fromRecovery) {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (user) {\r\n          console.log('[reset-password] Recovery redirect from auth callback, user:', user.email)\r\n          setIsRecoveryMode(true)\r\n          setCheckingSession(false)\r\n          return\r\n        } else {\r\n          // Had the flag but no session - session may have expired\r\n          console.log('[reset-password] Recovery flag present but no session')\r\n          setMessage({ type: 'error', text: 'Your session has expired. Please request a new password reset link.' })\r\n        }\r\n      }\r\n\r\n      // No recovery indicators - show the email request form\r\n      console.log('[reset-password] No recovery indicators, showing request form')\r\n      setCheckingSession(false)\r\n    }\r\n\r\n    checkRecoverySession()\r\n  }, [searchParams])\r\n\r\n  // Handle email submission (request reset)\r\n  const handleRequestReset = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n    setMessage(null)\r\n\r\n    try {\r\n      await resetPassword(email)\r\n      setEmailSent(true)\r\n      setMessage({\r\n        type: 'success',\r\n        text: 'Password reset email sent! Check your inbox and click the link to reset your password.'\r\n      })\r\n    } catch (error) {\r\n      if (error instanceof AuthError) {\r\n        setMessage({ type: 'error', text: error.message })\r\n      } else {\r\n        setMessage({ type: 'error', text: 'Failed to send reset email. Please try again.' })\r\n      }\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  // Handle new password submission\r\n  const handlePasswordUpdate = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n    setMessage(null)\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      setMessage({ type: 'error', text: 'Passwords do not match.' })\r\n      setIsLoading(false)\r\n      return\r\n    }\r\n\r\n    if (newPassword.length < 8) {\r\n      setMessage({ type: 'error', text: 'Password must be at least 8 characters long.' })\r\n      setIsLoading(false)\r\n      return\r\n    }\r\n\r\n    try {\r\n      await updatePassword(newPassword)\r\n      setMessage({ type: 'success', text: 'Password updated successfully! Redirecting to login...' })\r\n\r\n      // Sign out and redirect to login\r\n      const supabase = createClient()\r\n      await supabase.auth.signOut()\r\n\r\n      setTimeout(() => {\r\n        router.push('/versotech_main/login?message=password_reset')\r\n      }, 2000)\r\n    } catch (error) {\r\n      if (error instanceof AuthError) {\r\n        setMessage({ type: 'error', text: error.message })\r\n      } else {\r\n        setMessage({ type: 'error', text: 'Failed to update password. Please try again.' })\r\n      }\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  if (checkingSession) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-[#050505]\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-white\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-[#050505] p-4 font-sans text-zinc-100\">\r\n\r\n      <Link href=\"/versotech_main/login\" className=\"absolute top-8 left-8 text-sm text-zinc-500 hover:text-white transition-colors flex items-center gap-2 group\">\r\n        <ArrowLeft className=\"w-4 h-4 group-hover:-translate-x-1 transition-transform\" /> Back to Login\r\n      </Link>\r\n\r\n      <div className=\"w-full max-w-md space-y-8 animate-in fade-in zoom-in-95 duration-700\">\r\n\r\n        <div className=\"text-center space-y-4\">\r\n          <div className=\"flex justify-center mb-4\">\r\n             <div className=\"relative w-48 h-16\">\r\n                <Image\r\n                  src=\"/versotech-logo.jpg\"\r\n                  alt=\"VERSO\"\r\n                  fill\r\n                  className=\"object-contain invert\"\r\n                  priority\r\n                />\r\n             </div>\r\n          </div>\r\n          <h1 className=\"text-3xl font-light tracking-tight text-white sr-only\">VERSO</h1>\r\n          <p className=\"text-zinc-500 text-sm tracking-wide uppercase\">\r\n            {isRecoveryMode ? 'Set New Password' : 'Reset Your Password'}\r\n          </p>\r\n        </div>\r\n\r\n        <Card className=\"bg-zinc-900/50 border-white/5 backdrop-blur-sm shadow-2xl shadow-black\">\r\n          <CardContent className=\"p-8 space-y-6\">\r\n\r\n            <div className=\"flex items-center justify-center gap-2 text-emerald-500/80 bg-emerald-500/5 py-2 rounded-md border border-emerald-500/10\">\r\n                <Shield className=\"w-4 h-4\" />\r\n                <span className=\"text-xs font-mono uppercase tracking-wider\">Secure Connection</span>\r\n            </div>\r\n\r\n            {message && (\r\n              <div className={`p-3 rounded-md text-sm font-medium border ${\r\n                message.type === 'error' ? 'bg-red-900/20 border-red-900/50 text-red-400' :\r\n                message.type === 'success' ? 'bg-emerald-900/20 border-emerald-900/50 text-emerald-400' :\r\n                'bg-blue-900/20 border-blue-900/50 text-blue-400'\r\n              }`}>\r\n                {message.text}\r\n              </div>\r\n            )}\r\n\r\n            {isRecoveryMode ? (\r\n              // Password update form (after clicking email link)\r\n              <form onSubmit={handlePasswordUpdate} className=\"space-y-5\">\r\n                <div className=\"space-y-1.5\">\r\n                  <Label className=\"text-xs font-semibold text-zinc-500 uppercase\">New Password</Label>\r\n                  <div className=\"relative\">\r\n                    <Input\r\n                      type={showPassword ? 'text' : 'password'}\r\n                      placeholder=\"••••••••\"\r\n                      className=\"h-11 bg-black/50 border-white/10 text-white placeholder:text-zinc-700 focus:border-white/30 focus:ring-0 transition-all pr-10\"\r\n                      value={newPassword}\r\n                      onChange={(e) => setNewPassword(e.target.value)}\r\n                      required\r\n                      minLength={8}\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowPassword(!showPassword)}\r\n                      className=\"absolute right-3 top-3 text-zinc-600 hover:text-white transition-colors\"\r\n                    >\r\n                      {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-1.5\">\r\n                  <Label className=\"text-xs font-semibold text-zinc-500 uppercase\">Confirm Password</Label>\r\n                  <Input\r\n                    type={showPassword ? 'text' : 'password'}\r\n                    placeholder=\"••••••••\"\r\n                    className=\"h-11 bg-black/50 border-white/10 text-white placeholder:text-zinc-700 focus:border-white/30 focus:ring-0 transition-all\"\r\n                    value={confirmPassword}\r\n                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                    required\r\n                    minLength={8}\r\n                  />\r\n                </div>\r\n\r\n                <p className=\"text-xs text-zinc-600\">\r\n                  Password must be at least 8 characters long.\r\n                </p>\r\n\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={isLoading}\r\n                  className=\"w-full h-12 bg-white hover:bg-zinc-200 text-black font-medium tracking-wide transition-all mt-4\"\r\n                >\r\n                  {isLoading ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : (\r\n                      <span className=\"flex items-center gap-2\">\r\n                          <Lock className=\"w-4 h-4\" /> UPDATE PASSWORD\r\n                      </span>\r\n                  )}\r\n                </Button>\r\n              </form>\r\n            ) : emailSent ? (\r\n              // Email sent confirmation\r\n              <div className=\"text-center py-6 space-y-4\">\r\n                <CheckCircle className=\"w-16 h-16 mx-auto text-emerald-500\" />\r\n                <div className=\"space-y-2\">\r\n                  <h3 className=\"text-lg font-medium text-white\">Check Your Email</h3>\r\n                  <p className=\"text-sm text-zinc-400\">\r\n                    We&apos;ve sent a password reset link to <span className=\"text-white font-medium\">{email}</span>\r\n                  </p>\r\n                  <p className=\"text-xs text-zinc-600 pt-2\">\r\n                    Didn&apos;t receive the email? Check your spam folder or{' '}\r\n                    <button\r\n                      onClick={() => { setEmailSent(false); setMessage(null); }}\r\n                      className=\"text-white hover:underline\"\r\n                    >\r\n                      try again\r\n                    </button>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              // Email request form\r\n              <form onSubmit={handleRequestReset} className=\"space-y-5\">\r\n                <div className=\"space-y-1.5\">\r\n                  <Label className=\"text-xs font-semibold text-zinc-500 uppercase\">Email Address</Label>\r\n                  <Input\r\n                    type=\"email\"\r\n                    placeholder=\"name@example.com\"\r\n                    className=\"h-11 bg-black/50 border-white/10 text-white placeholder:text-zinc-700 focus:border-white/30 focus:ring-0 transition-all\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <p className=\"text-xs text-zinc-600\">\r\n                  Enter your email address and we&apos;ll send you a link to reset your password.\r\n                </p>\r\n\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={isLoading}\r\n                  className=\"w-full h-12 bg-white hover:bg-zinc-200 text-black font-medium tracking-wide transition-all mt-4\"\r\n                >\r\n                  {isLoading ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : (\r\n                      <span className=\"flex items-center gap-2\">\r\n                          <Mail className=\"w-4 h-4\" /> SEND RESET LINK\r\n                      </span>\r\n                  )}\r\n                </Button>\r\n              </form>\r\n            )}\r\n\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <div className=\"text-center space-y-2\">\r\n           <div className=\"flex items-center justify-center gap-2 text-xs text-zinc-600\">\r\n              <Shield className=\"h-3 w-3\" />\r\n              <span>Bank-Level 256-bit Encryption</span>\r\n           </div>\r\n           <p className=\"text-[10px] text-zinc-700 font-mono\">VERSO PLATFORM // PASSWORD RECOVERY</p>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function ResetPasswordPage() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"min-h-screen bg-[#050505] flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-white\" />\r\n      </div>\r\n    }>\r\n      <ResetPasswordContent />\r\n    </Suspense>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}