{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/schemas/kyc-questionnaire-schema.ts"],"sourcesContent":["import { z } from 'zod'\r\n\r\n// ============================================================================\r\n// STEP 1: About You (Subscriber Information)\r\n// ============================================================================\r\nexport const step1Schema = z.object({\r\n  fullName: z.string().min(2, 'Full name is required'),\r\n  dateOfBirth: z.string().min(1, 'Date of birth is required'),\r\n  nationality: z.string().min(2, 'Nationality is required'),\r\n  countryOfResidence: z.string().min(2, 'Country of residence is required'),\r\n  residentialAddress: z.string().min(5, 'Residential address is required'),\r\n  city: z.string().min(2, 'City is required'),\r\n  postalCode: z.string().min(2, 'Postal code is required'),\r\n  email: z.string().email('Valid email is required'),\r\n  phone: z.string().min(7, 'Phone number is required'),\r\n  taxIdNumber: z.string().optional(),\r\n  taxResidencyCountry: z.string().min(2, 'Tax residency country is required'),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 2: Investment Type\r\n// ============================================================================\r\nexport const investmentTypeOptions = [\r\n  { value: 'individual', label: 'Individual (Personal Assets)' },\r\n  { value: 'joint', label: 'Joint Account' },\r\n  { value: 'trust', label: 'Trust or Estate' },\r\n  { value: 'corporation', label: 'Corporation / LLC' },\r\n  { value: 'partnership', label: 'Partnership' },\r\n  { value: 'other', label: 'Other' },\r\n] as const\r\n\r\nexport const step2Schema = z.object({\r\n  investmentType: z.enum(['individual', 'joint', 'trust', 'corporation', 'partnership', 'other']),\r\n  investmentTypeOther: z.string().optional(),\r\n}).refine(\r\n  (data) => data.investmentType !== 'other' || (data.investmentTypeOther && data.investmentTypeOther.length > 0),\r\n  { message: 'Please specify the investment type', path: ['investmentTypeOther'] }\r\n)\r\n\r\n// ============================================================================\r\n// STEP 3: Well-Informed Investor Status\r\n// ============================================================================\r\nexport const wellInformedBasisOptions = [\r\n  { value: 'net_worth', label: 'Net worth exceeds â‚¬1,250,000' },\r\n  { value: 'professional', label: 'Professional investor (regulated entity)' },\r\n  { value: 'institutional', label: 'Institutional investor' },\r\n  { value: 'experience', label: 'Significant investment experience' },\r\n  { value: 'advised', label: 'Advised by regulated advisor' },\r\n] as const\r\n\r\n// BUG FIX 3.5: Use proper enum array for wellInformedBasis\r\nconst wellInformedBasisValues = ['net_worth', 'professional', 'institutional', 'experience', 'advised'] as const\r\n\r\nexport const step3Schema = z.object({\r\n  isWellInformed: z.enum(['yes', 'no', 'unsure']),\r\n  wellInformedBasis: z.array(z.enum(wellInformedBasisValues)).optional(),\r\n  wellInformedEvidence: z.string().optional(),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 4: Compliance Overview (12 questions)\r\n// ============================================================================\r\nexport const step4Schema = z.object({\r\n  // PEP Status\r\n  isPEP: z.enum(['yes', 'no']),\r\n  pepDetails: z.string().optional(),\r\n\r\n  // Family/Associate PEP\r\n  isRelatedToPEP: z.enum(['yes', 'no']),\r\n  relatedPEPDetails: z.string().optional(),\r\n\r\n  // Sanctions\r\n  isSanctioned: z.enum(['yes', 'no']),\r\n  sanctionedDetails: z.string().optional(),\r\n\r\n  // Criminal Record\r\n  hasCriminalRecord: z.enum(['yes', 'no']),\r\n  criminalDetails: z.string().optional(),\r\n\r\n  // Under Investigation\r\n  isUnderInvestigation: z.enum(['yes', 'no']),\r\n  investigationDetails: z.string().optional(),\r\n\r\n  // Bankruptcy\r\n  hasBankruptcy: z.enum(['yes', 'no']),\r\n  bankruptcyDetails: z.string().optional(),\r\n\r\n  // US Person indicator (triggers Steps 5-7)\r\n  isUSPerson: z.enum(['yes', 'no']),\r\n\r\n  // Source of Funds\r\n  sourceOfFunds: z.string().min(10, 'Please describe your source of funds'),\r\n\r\n  // Source of Wealth\r\n  sourceOfWealth: z.string().min(10, 'Please describe your source of wealth'),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 5: US Person Definition (CONDITIONAL - only if isUSPerson = 'yes')\r\n// ============================================================================\r\nexport const step5Schema = z.object({\r\n  isUSCitizen: z.enum(['yes', 'no']),\r\n  isUSResident: z.enum(['yes', 'no']),\r\n  hasUSGreenCard: z.enum(['yes', 'no']),\r\n  hasSubstantialUSPresence: z.enum(['yes', 'no']),\r\n  hasUSMailingAddress: z.enum(['yes', 'no']),\r\n  hasUSPhoneNumber: z.enum(['yes', 'no']),\r\n  hasUSBankAccount: z.enum(['yes', 'no']),\r\n  hasUSPowerOfAttorney: z.enum(['yes', 'no']),\r\n  usConnectionDetails: z.string().optional(),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 6: Offer Details (CONDITIONAL)\r\n// ============================================================================\r\nexport const step6Schema = z.object({\r\n  isAccreditedInvestor: z.enum(['yes', 'no']),\r\n  accreditationBasis: z.enum(['income', 'net_worth', 'professional', 'entity', 'other']).optional(),\r\n  hasReceivedOfferingMaterials: z.enum(['yes', 'no']),\r\n  understandsRestrictions: z.enum(['yes', 'no']),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 7: Additional US Compliance (CONDITIONAL)\r\n// ============================================================================\r\nexport const step7Schema = z.object({\r\n  acknowledgesFATCA: z.boolean().refine(val => val === true, 'You must acknowledge FATCA requirements'),\r\n  willProvideW9: z.boolean().refine(val => val === true, 'You must agree to provide W-9 if required'),\r\n  understandsWithholding: z.boolean().refine(val => val === true, 'You must acknowledge withholding requirements'),\r\n  certifiesTaxCompliance: z.boolean().refine(val => val === true, 'You must certify tax compliance'),\r\n  acknowledgesReportingObligations: z.boolean().refine(val => val === true, 'You must acknowledge reporting obligations'),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 8: Investment Suitability\r\n// ============================================================================\r\nexport const educationLevelOptions = [\r\n  { value: 'high_school', label: 'High School' },\r\n  { value: 'bachelors', label: \"Bachelor's Degree\" },\r\n  { value: 'masters', label: \"Master's Degree\" },\r\n  { value: 'doctorate', label: 'Doctorate' },\r\n  { value: 'professional', label: 'Professional Certification (CFA, CPA, etc.)' },\r\n] as const\r\n\r\nexport const employmentStatusOptions = [\r\n  { value: 'employed', label: 'Employed' },\r\n  { value: 'self_employed', label: 'Self-Employed' },\r\n  { value: 'retired', label: 'Retired' },\r\n  { value: 'unemployed', label: 'Unemployed' },\r\n  { value: 'student', label: 'Student' },\r\n] as const\r\n\r\nexport const incomeRangeOptions = [\r\n  { value: 'under_100k', label: 'Under $100,000' },\r\n  { value: '100k_250k', label: '$100,000 - $250,000' },\r\n  { value: '250k_500k', label: '$250,000 - $500,000' },\r\n  { value: '500k_1m', label: '$500,000 - $1,000,000' },\r\n  { value: '1m_plus', label: 'Over $1,000,000' },\r\n] as const\r\n\r\nexport const netWorthRangeOptions = [\r\n  { value: 'under_500k', label: 'Under $500,000' },\r\n  { value: '500k_1m', label: '$500,000 - $1,000,000' },\r\n  { value: '1m_5m', label: '$1,000,000 - $5,000,000' },\r\n  { value: '5m_10m', label: '$5,000,000 - $10,000,000' },\r\n  { value: '10m_plus', label: 'Over $10,000,000' },\r\n] as const\r\n\r\nexport const investmentObjectiveOptions = [\r\n  { value: 'capital_preservation', label: 'Capital Preservation' },\r\n  { value: 'income', label: 'Income Generation' },\r\n  { value: 'growth', label: 'Growth' },\r\n  { value: 'speculation', label: 'Speculation' },\r\n] as const\r\n\r\nexport const riskToleranceOptions = [\r\n  { value: 'conservative', label: 'Conservative - Prefer stability over returns' },\r\n  { value: 'moderate', label: 'Moderate - Balance of risk and return' },\r\n  { value: 'aggressive', label: 'Aggressive - Willing to accept higher risk' },\r\n] as const\r\n\r\nexport const timeHorizonOptions = [\r\n  { value: 'under_3_years', label: 'Less than 3 years' },\r\n  { value: '3_5_years', label: '3 - 5 years' },\r\n  { value: '5_10_years', label: '5 - 10 years' },\r\n  { value: 'over_10_years', label: 'Over 10 years' },\r\n] as const\r\n\r\nexport const step8Schema = z.object({\r\n  // Education & Experience\r\n  educationLevel: z.enum(['high_school', 'bachelors', 'masters', 'doctorate', 'professional']),\r\n  employmentStatus: z.enum(['employed', 'self_employed', 'retired', 'unemployed', 'student']),\r\n  occupation: z.string().optional(),\r\n  employer: z.string().optional(),\r\n  yearsInvestingExperience: z.string().min(1, 'Please indicate your investment experience'),\r\n\r\n  // Financial Profile\r\n  annualIncome: z.enum(['under_100k', '100k_250k', '250k_500k', '500k_1m', '1m_plus']),\r\n  netWorth: z.enum(['under_500k', '500k_1m', '1m_5m', '5m_10m', '10m_plus']),\r\n  liquidNetWorth: z.enum(['under_500k', '500k_1m', '1m_5m', '5m_10m', '10m_plus']),\r\n\r\n  // Investment Preferences\r\n  investmentObjective: z.enum(['capital_preservation', 'income', 'growth', 'speculation']),\r\n  riskTolerance: z.enum(['conservative', 'moderate', 'aggressive']),\r\n  investmentHorizon: z.enum(['under_3_years', '3_5_years', '5_10_years', 'over_10_years']),\r\n\r\n  // Investment Allocation\r\n  percentageOfNetWorthToInvest: z.string().min(1, 'Please indicate the percentage'),\r\n  hasAlternativeInvestmentExperience: z.enum(['yes', 'no']),\r\n  alternativeInvestmentTypes: z.array(z.string()).optional(),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 9: Waiver & Risk Awareness\r\n// ============================================================================\r\nexport const step9Schema = z.object({\r\n  acknowledgesIlliquidity: z.boolean().refine(val => val === true, 'You must acknowledge this risk'),\r\n  acknowledgesLossRisk: z.boolean().refine(val => val === true, 'You must acknowledge this risk'),\r\n  acknowledgesNoGuarantees: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesLimitedInfo: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesNoRegulation: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesConflicts: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesTaxImplications: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  acknowledgesFees: z.boolean().refine(val => val === true, 'You must acknowledge this'),\r\n  hasReadOfferingDocs: z.boolean().refine(val => val === true, 'You must confirm this'),\r\n  hasSoughtIndependentAdvice: z.boolean().refine(val => val === true, 'You must confirm this'),\r\n})\r\n\r\n// ============================================================================\r\n// STEP 10: Signature & Certification\r\n// ============================================================================\r\nexport const step10Schema = z.object({\r\n  certifiesAccuracy: z.boolean().refine(val => val === true, 'You must certify accuracy'),\r\n  certifiesNoOmissions: z.boolean().refine(val => val === true, 'You must certify no omissions'),\r\n  agreesToUpdates: z.boolean().refine(val => val === true, 'You must agree to provide updates'),\r\n  consentToProcessing: z.boolean().refine(val => val === true, 'You must consent to data processing'),\r\n  signatureName: z.string().min(2, 'Please type your full name as signature'),\r\n  signatureDate: z.string().min(1, 'Signature date is required'),\r\n})\r\n\r\n// ============================================================================\r\n// Combined Schema\r\n// ============================================================================\r\nexport const kycQuestionnaireSchema = z.object({\r\n  step1: step1Schema,\r\n  step2: step2Schema,\r\n  step3: step3Schema,\r\n  step4: step4Schema,\r\n  step5: step5Schema.optional(), // Conditional\r\n  step6: step6Schema.optional(), // Conditional\r\n  step7: step7Schema.optional(), // Conditional\r\n  step8: step8Schema,\r\n  step9: step9Schema,\r\n  step10: step10Schema,\r\n  // Metadata\r\n  lastCompletedStep: z.number().optional(),\r\n  wizardVersion: z.string().default('2.0'),\r\n})\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\nexport type Step1Data = z.infer<typeof step1Schema>\r\nexport type Step2Data = z.infer<typeof step2Schema>\r\nexport type Step3Data = z.infer<typeof step3Schema>\r\nexport type Step4Data = z.infer<typeof step4Schema>\r\nexport type Step5Data = z.infer<typeof step5Schema>\r\nexport type Step6Data = z.infer<typeof step6Schema>\r\nexport type Step7Data = z.infer<typeof step7Schema>\r\nexport type Step8Data = z.infer<typeof step8Schema>\r\nexport type Step9Data = z.infer<typeof step9Schema>\r\nexport type Step10Data = z.infer<typeof step10Schema>\r\nexport type KYCQuestionnaireData = z.infer<typeof kycQuestionnaireSchema>\r\n\r\n// ============================================================================\r\n// Step Configuration\r\n// ============================================================================\r\nexport const STEP_CONFIG = [\r\n  { key: 'step1', title: 'About You', description: \"Let's start with your basic information\", icon: 'User', isConditional: false },\r\n  { key: 'step2', title: 'Investment Type', description: 'How will you be investing?', icon: 'Briefcase', isConditional: false },\r\n  { key: 'step3', title: 'Investor Status', description: 'Your investment experience', icon: 'GraduationCap', isConditional: false },\r\n  { key: 'step4', title: 'Compliance Check', description: 'Regulatory declarations', icon: 'Shield', isConditional: false },\r\n  { key: 'step5', title: 'US Person Status', description: 'US tax residency details', icon: 'Flag', isConditional: true },\r\n  { key: 'step6', title: 'Offer Details', description: 'Investment acknowledgments', icon: 'FileText', isConditional: true },\r\n  { key: 'step7', title: 'US Tax Compliance', description: 'FATCA and reporting requirements', icon: 'FileCheck', isConditional: true },\r\n  { key: 'step8', title: 'Suitability', description: 'Your financial profile', icon: 'TrendingUp', isConditional: false },\r\n  { key: 'step9', title: 'Risk Awareness', description: 'Understanding the risks', icon: 'AlertTriangle', isConditional: false },\r\n  { key: 'step10', title: 'Sign & Submit', description: 'Review and certify', icon: 'PenTool', isConditional: false },\r\n] as const\r\n\r\n// Helper to get schema for a step\r\nexport function getStepSchema(stepNumber: number) {\r\n  const schemas: Record<number, z.ZodTypeAny> = {\r\n    1: step1Schema,\r\n    2: step2Schema,\r\n    3: step3Schema,\r\n    4: step4Schema,\r\n    5: step5Schema,\r\n    6: step6Schema,\r\n    7: step7Schema,\r\n    8: step8Schema,\r\n    9: step9Schema,\r\n    10: step10Schema,\r\n  }\r\n  return schemas[stepNumber]\r\n}\r\n\r\n// Helper to check if US Person steps should be shown\r\nexport function shouldShowUSPersonSteps(step4Data?: Step4Data): boolean {\r\n  return step4Data?.isUSPerson === 'yes'\r\n}\r\n\r\n// Get visible steps based on form data\r\nexport function getVisibleSteps(formData: Partial<KYCQuestionnaireData>): number[] {\r\n  const showUSSteps = shouldShowUSPersonSteps(formData.step4)\r\n\r\n  if (showUSSteps) {\r\n    return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n  }\r\n\r\n  // Skip steps 5, 6, 7 for non-US persons\r\n  return [1, 2, 3, 4, 8, 9, 10]\r\n}\r\n\r\n// BUG FIX 2.7: Compute signature date at runtime, not module load time\r\nfunction getTodayDate(): string {\r\n  return new Date().toISOString().split('T')[0]\r\n}\r\n\r\n// Get default values for each step\r\nexport function getStepDefaults(stepNumber: number): Record<string, unknown> {\r\n  // BUG FIX 2.7: Step 10 defaults are computed dynamically for signatureDate\r\n  if (stepNumber === 10) {\r\n    return {\r\n      certifiesAccuracy: false,\r\n      certifiesNoOmissions: false,\r\n      agreesToUpdates: false,\r\n      consentToProcessing: false,\r\n      signatureName: '',\r\n      signatureDate: getTodayDate(), // Computed at call time, not module load\r\n    }\r\n  }\r\n\r\n  const defaults: Record<number, Record<string, unknown>> = {\r\n    1: {\r\n      fullName: '',\r\n      dateOfBirth: '',\r\n      nationality: '',\r\n      countryOfResidence: '',\r\n      residentialAddress: '',\r\n      city: '',\r\n      postalCode: '',\r\n      email: '',\r\n      phone: '',\r\n      taxIdNumber: '',\r\n      taxResidencyCountry: '',\r\n    },\r\n    2: {\r\n      investmentType: undefined,\r\n      investmentTypeOther: '',\r\n    },\r\n    3: {\r\n      isWellInformed: undefined,\r\n      wellInformedBasis: [],\r\n      wellInformedEvidence: '',\r\n    },\r\n    4: {\r\n      isPEP: undefined,\r\n      pepDetails: '',\r\n      isRelatedToPEP: undefined,\r\n      relatedPEPDetails: '',\r\n      isSanctioned: undefined,\r\n      sanctionedDetails: '',\r\n      hasCriminalRecord: undefined,\r\n      criminalDetails: '',\r\n      isUnderInvestigation: undefined,\r\n      investigationDetails: '',\r\n      hasBankruptcy: undefined,\r\n      bankruptcyDetails: '',\r\n      isUSPerson: undefined,\r\n      sourceOfFunds: '',\r\n      sourceOfWealth: '',\r\n    },\r\n    5: {\r\n      isUSCitizen: undefined,\r\n      isUSResident: undefined,\r\n      hasUSGreenCard: undefined,\r\n      hasSubstantialUSPresence: undefined,\r\n      hasUSMailingAddress: undefined,\r\n      hasUSPhoneNumber: undefined,\r\n      hasUSBankAccount: undefined,\r\n      hasUSPowerOfAttorney: undefined,\r\n      usConnectionDetails: '',\r\n    },\r\n    6: {\r\n      isAccreditedInvestor: undefined,\r\n      accreditationBasis: undefined,\r\n      hasReceivedOfferingMaterials: undefined,\r\n      understandsRestrictions: undefined,\r\n    },\r\n    7: {\r\n      acknowledgesFATCA: false,\r\n      willProvideW9: false,\r\n      understandsWithholding: false,\r\n      certifiesTaxCompliance: false,\r\n      acknowledgesReportingObligations: false,\r\n    },\r\n    8: {\r\n      educationLevel: undefined,\r\n      employmentStatus: undefined,\r\n      occupation: '',\r\n      employer: '',\r\n      yearsInvestingExperience: '',\r\n      annualIncome: undefined,\r\n      netWorth: undefined,\r\n      liquidNetWorth: undefined,\r\n      investmentObjective: undefined,\r\n      riskTolerance: undefined,\r\n      investmentHorizon: undefined,\r\n      percentageOfNetWorthToInvest: '',\r\n      hasAlternativeInvestmentExperience: undefined,\r\n      alternativeInvestmentTypes: [],\r\n    },\r\n    9: {\r\n      acknowledgesIlliquidity: false,\r\n      acknowledgesLossRisk: false,\r\n      acknowledgesNoGuarantees: false,\r\n      acknowledgesLimitedInfo: false,\r\n      acknowledgesNoRegulation: false,\r\n      acknowledgesConflicts: false,\r\n      acknowledgesTaxImplications: false,\r\n      acknowledgesFees: false,\r\n      hasReadOfferingDocs: false,\r\n      hasSoughtIndependentAdvice: false,\r\n    },\r\n  }\r\n  return defaults[stepNumber] || {}\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 734, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/WizardContext.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { createContext, useContext, useState, useCallback, useEffect, useRef } from 'react'\r\nimport { toast } from 'sonner'\r\nimport {\r\n  KYCQuestionnaireData,\r\n  getVisibleSteps,\r\n  getStepDefaults,\r\n  getStepSchema,\r\n  STEP_CONFIG,\r\n} from '../schemas/kyc-questionnaire-schema'\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\ninterface WizardState {\r\n  currentStep: number\r\n  formData: Partial<KYCQuestionnaireData>\r\n  completedSteps: Set<number>\r\n  isLoading: boolean\r\n  isSaving: boolean\r\n  lastSavedAt: Date | null\r\n  submissionId: string | null\r\n  errors: Record<number, string[]>\r\n}\r\n\r\ninterface WizardContextValue {\r\n  // Convenience accessors (same as state but easier to use)\r\n  currentStep: number\r\n  formData: Partial<KYCQuestionnaireData>\r\n  isLoading: boolean\r\n  isSaving: boolean\r\n  lastSavedAt: Date | null\r\n\r\n  // Computed values\r\n  state: WizardState\r\n  visibleSteps: number[]\r\n  totalVisibleSteps: number\r\n  currentStepIndex: number\r\n  progress: number\r\n  currentStepConfig: typeof STEP_CONFIG[number]\r\n  isFirstStep: boolean\r\n  isLastStep: boolean\r\n  canGoNext: boolean\r\n  canGoBack: boolean\r\n\r\n  // Actions\r\n  goToStep: (step: number) => void\r\n  nextStep: () => Promise<boolean>\r\n  previousStep: () => void\r\n  updateStepData: <K extends keyof KYCQuestionnaireData>(stepKey: K, data: KYCQuestionnaireData[K]) => void\r\n  validateCurrentStep: () => Promise<{ valid: boolean; errors: string[] }>\r\n  saveProgress: () => Promise<void>\r\n  submitQuestionnaire: () => Promise<boolean>\r\n  getStepData: <K extends keyof KYCQuestionnaireData>(stepKey: K) => KYCQuestionnaireData[K] | undefined\r\n}\r\n\r\nconst WizardContext = createContext<WizardContextValue | null>(null)\r\n\r\n// ============================================================================\r\n// Provider\r\n// ============================================================================\r\ninterface WizardProviderProps {\r\n  children: React.ReactNode\r\n  onComplete?: () => void\r\n  initialData?: Partial<KYCQuestionnaireData>\r\n  submissionId?: string | null\r\n}\r\n\r\nexport function WizardProvider({\r\n  children,\r\n  onComplete,\r\n  initialData,\r\n  submissionId: initialSubmissionId,\r\n}: WizardProviderProps) {\r\n  const [state, setState] = useState<WizardState>(() => ({\r\n    currentStep: initialData?.lastCompletedStep ? Math.min(initialData.lastCompletedStep + 1, 10) : 1,\r\n    formData: initialData || {},\r\n    completedSteps: new Set(\r\n      initialData?.lastCompletedStep\r\n        ? Array.from({ length: initialData.lastCompletedStep }, (_, i) => i + 1)\r\n        : []\r\n    ),\r\n    isLoading: false,\r\n    isSaving: false,\r\n    lastSavedAt: null,\r\n    submissionId: initialSubmissionId || null,\r\n    errors: {},\r\n  }))\r\n\r\n  const autoSaveTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const isDirtyRef = useRef(false)\r\n  const isSavingRef = useRef(false) // Ref for immediate saving state check\r\n  const isSubmittedRef = useRef(false) // Ref to prevent auto-save after final submission\r\n  const saveProgressRef = useRef<(() => Promise<void>) | undefined>(undefined) // Ref to latest saveProgress\r\n\r\n  // Calculate visible steps based on US Person status\r\n  const visibleSteps = getVisibleSteps(state.formData)\r\n  const totalVisibleSteps = visibleSteps.length\r\n  const rawCurrentStepIndex = visibleSteps.indexOf(state.currentStep)\r\n\r\n  // BUG FIX 2.3: Handle currentStepIndex = -1 (step became hidden)\r\n  const currentStepIndex = rawCurrentStepIndex === -1 ? 0 : rawCurrentStepIndex\r\n  const safeCurrentStep = rawCurrentStepIndex === -1 ? visibleSteps[0] : state.currentStep\r\n\r\n  // Auto-navigate when current step becomes hidden (e.g., US Person changes from 'yes' to 'no')\r\n  useEffect(() => {\r\n    if (rawCurrentStepIndex === -1 && visibleSteps.length > 0) {\r\n      // Find nearest valid step (prefer staying on same or earlier step)\r\n      const nearestStep = visibleSteps.find(s => s >= state.currentStep) || visibleSteps[visibleSteps.length - 1]\r\n      setState(prev => ({ ...prev, currentStep: nearestStep }))\r\n    }\r\n  }, [rawCurrentStepIndex, visibleSteps, state.currentStep])\r\n\r\n  const progress = Math.max(0, Math.round(((currentStepIndex + 1) / totalVisibleSteps) * 100))\r\n  const currentStepConfig = STEP_CONFIG[safeCurrentStep - 1]\r\n  const isFirstStep = currentStepIndex === 0\r\n  const isLastStep = currentStepIndex === totalVisibleSteps - 1\r\n  const canGoNext = !isLastStep\r\n  const canGoBack = !isFirstStep\r\n\r\n  // BUG FIX 2.1: Auto-save with proper closure handling using ref\r\n  useEffect(() => {\r\n    if (isDirtyRef.current && saveProgressRef.current) {\r\n      autoSaveTimeoutRef.current = setTimeout(() => {\r\n        saveProgressRef.current?.()\r\n      }, 30000)\r\n    }\r\n\r\n    return () => {\r\n      if (autoSaveTimeoutRef.current) {\r\n        clearTimeout(autoSaveTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [state.formData])\r\n\r\n  // Get step data helper\r\n  const getStepData = useCallback(<K extends keyof KYCQuestionnaireData>(stepKey: K) => {\r\n    return state.formData[stepKey]\r\n  }, [state.formData])\r\n\r\n  // Update step data\r\n  const updateStepData = useCallback(<K extends keyof KYCQuestionnaireData>(\r\n    stepKey: K,\r\n    data: KYCQuestionnaireData[K]\r\n  ) => {\r\n    isDirtyRef.current = true\r\n    setState(prev => ({\r\n      ...prev,\r\n      formData: {\r\n        ...prev.formData,\r\n        [stepKey]: data,\r\n      },\r\n      errors: {\r\n        ...prev.errors,\r\n        [parseInt(stepKey.replace('step', ''))]: [],\r\n      },\r\n    }))\r\n  }, [])\r\n\r\n  // Validate current step - returns { valid, errors } for better error messaging\r\n  const validateCurrentStep = useCallback(async (): Promise<{ valid: boolean; errors: string[] }> => {\r\n    const stepKey = `step${state.currentStep}` as keyof KYCQuestionnaireData\r\n    const stepData = state.formData[stepKey]\r\n    const schema = getStepSchema(state.currentStep)\r\n\r\n    if (!schema) return { valid: true, errors: [] }\r\n\r\n    try {\r\n      await schema.parseAsync(stepData || getStepDefaults(state.currentStep))\r\n      setState(prev => ({\r\n        ...prev,\r\n        errors: { ...prev.errors, [state.currentStep]: [] },\r\n      }))\r\n      return { valid: true, errors: [] }\r\n    } catch (error: any) {\r\n      // Zod uses 'issues' not 'errors' for validation errors\r\n      const messages = error.issues?.map((e: any) => e.message) || ['Validation failed']\r\n      setState(prev => ({\r\n        ...prev,\r\n        errors: { ...prev.errors, [state.currentStep]: messages },\r\n      }))\r\n      return { valid: false, errors: messages }\r\n    }\r\n  }, [state.currentStep, state.formData])\r\n\r\n  // Save progress - BUG FIX 3.1: Use ref for immediate isSaving check\r\n  const saveProgress = useCallback(async () => {\r\n    // Use ref for immediate check to prevent race conditions\r\n    if (isSavingRef.current) return\r\n\r\n    // BUG FIX: Prevent auto-save from running after final submission\r\n    // This prevents overwriting 'pending' status back to 'draft'\r\n    if (isSubmittedRef.current) return\r\n\r\n    isSavingRef.current = true\r\n    setState(prev => ({ ...prev, isSaving: true }))\r\n\r\n    try {\r\n      const payload = {\r\n        document_type: 'questionnaire',\r\n        custom_label: 'KYC Compliance Questionnaire',\r\n        metadata: {\r\n          ...state.formData,\r\n          lastCompletedStep: Math.max(...Array.from(state.completedSteps), 0),\r\n          wizardVersion: '2.0',\r\n        },\r\n        status: 'draft',\r\n      }\r\n\r\n      let response: Response\r\n\r\n      if (state.submissionId) {\r\n        // Update existing draft\r\n        response = await fetch(`/api/investors/me/kyc-submissions/${state.submissionId}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      } else {\r\n        // Create new draft\r\n        response = await fetch('/api/investors/me/kyc-submissions', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to save progress')\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      setState(prev => ({\r\n        ...prev,\r\n        isSaving: false,\r\n        lastSavedAt: new Date(),\r\n        submissionId: data.submission?.id || prev.submissionId,\r\n      }))\r\n\r\n      isDirtyRef.current = false\r\n    } catch (error) {\r\n      console.error('Failed to save progress:', error)\r\n      setState(prev => ({ ...prev, isSaving: false }))\r\n      toast.error('Failed to save progress. Your changes may not be saved.')\r\n    } finally {\r\n      isSavingRef.current = false\r\n    }\r\n  }, [state.formData, state.completedSteps, state.submissionId])\r\n\r\n  // Keep saveProgressRef updated with latest saveProgress\r\n  useEffect(() => {\r\n    saveProgressRef.current = saveProgress\r\n  }, [saveProgress])\r\n\r\n  // Go to specific step - BUG FIX 4.1: Add feedback when step blocked\r\n  const goToStep = useCallback((step: number) => {\r\n    if (visibleSteps.includes(step)) {\r\n      setState(prev => ({ ...prev, currentStep: step }))\r\n    } else {\r\n      toast.error('This step is not available')\r\n    }\r\n  }, [visibleSteps])\r\n\r\n  // Next step - BUG FIX 2.2: Use functional setState to avoid race conditions\r\n  const nextStep = useCallback(async (): Promise<boolean> => {\r\n    // Validate current step\r\n    const { valid, errors } = await validateCurrentStep()\r\n    if (!valid) {\r\n      // Show specific error messages instead of generic message\r\n      const errorSummary = errors.slice(0, 3).join(', ') + (errors.length > 3 ? ` (+${errors.length - 3} more)` : '')\r\n      toast.error('Please complete all required fields', {\r\n        description: errorSummary\r\n      })\r\n      return false\r\n    }\r\n\r\n    // Mark current step as completed and move to next in single state update\r\n    // to avoid race condition between separate setState calls\r\n    const currentVisibleSteps = getVisibleSteps(state.formData)\r\n    const currentIdx = currentVisibleSteps.indexOf(state.currentStep)\r\n\r\n    setState(prev => {\r\n      const newCompleted = new Set(prev.completedSteps)\r\n      newCompleted.add(prev.currentStep)\r\n\r\n      // Calculate next step from current state\r\n      const latestVisibleSteps = getVisibleSteps(prev.formData)\r\n      const latestIdx = latestVisibleSteps.indexOf(prev.currentStep)\r\n      const nextIdx = latestIdx + 1\r\n      const nextStep = nextIdx < latestVisibleSteps.length\r\n        ? latestVisibleSteps[nextIdx]\r\n        : prev.currentStep\r\n\r\n      return {\r\n        ...prev,\r\n        completedSteps: newCompleted,\r\n        currentStep: nextStep,\r\n      }\r\n    })\r\n\r\n    // Save progress after state update\r\n    await saveProgress()\r\n\r\n    return true\r\n  }, [validateCurrentStep, saveProgress, state.formData, state.currentStep])\r\n\r\n  // Previous step\r\n  const previousStep = useCallback(() => {\r\n    if (currentStepIndex > 0) {\r\n      setState(prev => ({\r\n        ...prev,\r\n        currentStep: visibleSteps[currentStepIndex - 1],\r\n      }))\r\n    }\r\n  }, [currentStepIndex, visibleSteps])\r\n\r\n  // Submit questionnaire - BUG FIX 1.3: Filter hidden steps data\r\n  const submitQuestionnaire = useCallback(async (): Promise<boolean> => {\r\n    // BUG FIX: Clear auto-save timer and mark as submitted to prevent race condition\r\n    // that could overwrite 'pending' status back to 'draft'\r\n    if (autoSaveTimeoutRef.current) {\r\n      clearTimeout(autoSaveTimeoutRef.current)\r\n      autoSaveTimeoutRef.current = null\r\n    }\r\n\r\n    // Get current visible steps\r\n    const currentVisibleSteps = getVisibleSteps(state.formData)\r\n\r\n    // Validate all visible steps\r\n    for (let i = 0; i < currentVisibleSteps.length; i++) {\r\n      const step = currentVisibleSteps[i]\r\n      const userFacingStepNumber = i + 1 // What the user sees (1-7 for non-US, 1-10 for US)\r\n      const stepKey = `step${step}` as keyof KYCQuestionnaireData\r\n      const stepData = state.formData[stepKey]\r\n      const schema = getStepSchema(step)\r\n\r\n      if (schema) {\r\n        try {\r\n          await schema.parseAsync(stepData || getStepDefaults(step))\r\n        } catch (error: any) {\r\n          // Extract specific validation errors from Zod\r\n          const errorMessages = error.issues?.map((e: any) => e.message) || []\r\n          const errorSummary = errorMessages.slice(0, 3).join(', ') + (errorMessages.length > 3 ? ` (+${errorMessages.length - 3} more)` : '')\r\n\r\n          toast.error(`Please complete Step ${userFacingStepNumber}: ${STEP_CONFIG[step - 1].title}`, {\r\n            description: errorSummary || 'Please fill in all required fields'\r\n          })\r\n          goToStep(step)\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    setState(prev => ({ ...prev, isSaving: true }))\r\n\r\n    try {\r\n      // BUG FIX 1.3: Only include data for visible steps (security fix)\r\n      // This prevents leaking US Person step data when user later changes answer to 'no'\r\n      const filteredFormData: Record<string, unknown> = {}\r\n      for (const step of currentVisibleSteps) {\r\n        const stepKey = `step${step}` as keyof KYCQuestionnaireData\r\n        if (state.formData[stepKey]) {\r\n          filteredFormData[stepKey] = state.formData[stepKey]\r\n        }\r\n      }\r\n\r\n      const payload = {\r\n        document_type: 'questionnaire',\r\n        custom_label: 'KYC Compliance Questionnaire',\r\n        metadata: {\r\n          ...filteredFormData,\r\n          lastCompletedStep: 10,\r\n          wizardVersion: '2.0',\r\n          submittedAt: new Date().toISOString(),\r\n        },\r\n        status: 'pending',\r\n      }\r\n\r\n      let response: Response\r\n\r\n      if (state.submissionId) {\r\n        response = await fetch(`/api/investors/me/kyc-submissions/${state.submissionId}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      } else {\r\n        response = await fetch('/api/investors/me/kyc-submissions', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        })\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to submit questionnaire')\r\n      }\r\n\r\n      // Mark as submitted to prevent any future auto-saves\r\n      isSubmittedRef.current = true\r\n\r\n      setState(prev => ({\r\n        ...prev,\r\n        isSaving: false,\r\n        lastSavedAt: new Date(),\r\n      }))\r\n\r\n      toast.success('Questionnaire submitted successfully!')\r\n      onComplete?.()\r\n      return true\r\n    } catch (error) {\r\n      console.error('Failed to submit:', error)\r\n      setState(prev => ({ ...prev, isSaving: false }))\r\n      toast.error('Failed to submit questionnaire')\r\n      return false\r\n    }\r\n  }, [state.formData, state.submissionId, goToStep, onComplete])\r\n\r\n  const value: WizardContextValue = {\r\n    // Convenience accessors\r\n    currentStep: state.currentStep,\r\n    formData: state.formData,\r\n    isLoading: state.isLoading,\r\n    isSaving: state.isSaving,\r\n    lastSavedAt: state.lastSavedAt,\r\n    // State and computed values\r\n    state,\r\n    visibleSteps,\r\n    totalVisibleSteps,\r\n    currentStepIndex,\r\n    progress,\r\n    currentStepConfig,\r\n    isFirstStep,\r\n    isLastStep,\r\n    canGoNext,\r\n    canGoBack,\r\n    // Actions\r\n    goToStep,\r\n    nextStep,\r\n    previousStep,\r\n    updateStepData,\r\n    validateCurrentStep,\r\n    saveProgress,\r\n    submitQuestionnaire,\r\n    getStepData,\r\n  }\r\n\r\n  return (\r\n    <WizardContext.Provider value={value}>\r\n      {children}\r\n    </WizardContext.Provider>\r\n  )\r\n}\r\n\r\n// ============================================================================\r\n// Hook\r\n// ============================================================================\r\nexport function useWizard() {\r\n  const context = useContext(WizardContext)\r\n  if (!context) {\r\n    throw new Error('useWizard must be used within a WizardProvider')\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1169, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/WizardProgress.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { CheckCircle2, Circle, Loader2 } from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from './WizardContext'\r\nimport { STEP_CONFIG } from '../schemas/kyc-questionnaire-schema'\r\n\r\nexport function WizardProgress() {\r\n  const {\r\n    state,\r\n    visibleSteps,\r\n    currentStepIndex,\r\n    progress,\r\n    goToStep,\r\n  } = useWizard()\r\n\r\n  return (\r\n    <div className=\"w-full space-y-4\">\r\n      {/* Progress Bar */}\r\n      <div className=\"relative\">\r\n        <div className=\"flex justify-between text-sm text-muted-foreground mb-2\">\r\n          <span className=\"font-medium\">\r\n            Step {currentStepIndex + 1} of {visibleSteps.length}\r\n          </span>\r\n          <span className=\"flex items-center gap-2\">\r\n            {state.isSaving && (\r\n              <>\r\n                <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n                <span>Saving...</span>\r\n              </>\r\n            )}\r\n            {!state.isSaving && state.lastSavedAt && (\r\n              <span className=\"text-emerald-500 flex items-center gap-1\">\r\n                <CheckCircle2 className=\"h-3 w-3\" />\r\n                Saved\r\n              </span>\r\n            )}\r\n            <span>{progress}% complete</span>\r\n          </span>\r\n        </div>\r\n\r\n        {/* Animated Progress Bar */}\r\n        <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full transition-all duration-500 ease-out\"\r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Step Indicators */}\r\n      <div className=\"flex justify-between gap-1 pt-2\">\r\n        {visibleSteps.map((stepNum, index) => {\r\n          const config = STEP_CONFIG[stepNum - 1]\r\n          const isCompleted = state.completedSteps.has(stepNum)\r\n          const isCurrent = stepNum === state.currentStep\r\n          const isAccessible = isCompleted || index <= currentStepIndex + 1\r\n\r\n          return (\r\n            <button\r\n              key={stepNum}\r\n              onClick={() => isAccessible && goToStep(stepNum)}\r\n              disabled={!isAccessible}\r\n              className={cn(\r\n                'group flex flex-col items-center flex-1 transition-all duration-200',\r\n                isAccessible ? 'cursor-pointer' : 'cursor-not-allowed opacity-50'\r\n              )}\r\n              title={config.title}\r\n            >\r\n              {/* Step Circle */}\r\n              <div\r\n                className={cn(\r\n                  'w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300',\r\n                  isCompleted && 'bg-emerald-500 text-white',\r\n                  isCurrent && !isCompleted && 'bg-emerald-100 border-2 border-emerald-500 text-emerald-600',\r\n                  !isCompleted && !isCurrent && 'bg-gray-100 text-gray-500 border border-gray-200',\r\n                  isAccessible && !isCurrent && 'group-hover:scale-110'\r\n                )}\r\n              >\r\n                {isCompleted ? (\r\n                  <CheckCircle2 className=\"h-4 w-4\" />\r\n                ) : (\r\n                  <span className=\"text-xs font-medium\">{index + 1}</span>\r\n                )}\r\n              </div>\r\n\r\n              {/* Step Label - Hidden on mobile */}\r\n              <span\r\n                className={cn(\r\n                  'hidden md:block text-[10px] mt-1 text-center max-w-[60px] truncate transition-colors',\r\n                  isCurrent ? 'text-emerald-600 font-medium' : 'text-gray-500'\r\n                )}\r\n              >\r\n                {config.title}\r\n              </span>\r\n            </button>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS;IACd,MAAM,EACJ,KAAK,EACL,YAAY,EACZ,gBAAgB,EAChB,QAAQ,EACR,QAAQ,EACT,GAAG,IAAA,wLAAS;IAEb,qBACE,qQAAC;QAAI,WAAU;;0BAEb,qQAAC;gBAAI,WAAU;;kCACb,qQAAC;wBAAI,WAAU;;0CACb,qQAAC;gCAAK,WAAU;;oCAAc;oCACtB,mBAAmB;oCAAE;oCAAK,aAAa,MAAM;;;;;;;0CAErD,qQAAC;gCAAK,WAAU;;oCACb,MAAM,QAAQ,kBACb;;0DACE,qQAAC,mPAAO;gDAAC,WAAU;;;;;;0DACnB,qQAAC;0DAAK;;;;;;;;oCAGT,CAAC,MAAM,QAAQ,IAAI,MAAM,WAAW,kBACnC,qQAAC;wCAAK,WAAU;;0DACd,qQAAC,4PAAY;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAIxC,qQAAC;;4CAAM;4CAAS;;;;;;;;;;;;;;;;;;;kCAKpB,qQAAC;wBAAI,WAAU;kCACb,cAAA,qQAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,SAAS,CAAC,CAAC;4BAAC;;;;;;;;;;;;;;;;;0BAMrC,qQAAC;gBAAI,WAAU;0BACZ,aAAa,GAAG,CAAC,CAAC,SAAS;oBAC1B,MAAM,SAAS,2MAAW,CAAC,UAAU,EAAE;oBACvC,MAAM,cAAc,MAAM,cAAc,CAAC,GAAG,CAAC;oBAC7C,MAAM,YAAY,YAAY,MAAM,WAAW;oBAC/C,MAAM,eAAe,eAAe,SAAS,mBAAmB;oBAEhE,qBACE,qQAAC;wBAEC,SAAS,IAAM,gBAAgB,SAAS;wBACxC,UAAU,CAAC;wBACX,WAAW,IAAA,gJAAE,EACX,uEACA,eAAe,mBAAmB;wBAEpC,OAAO,OAAO,KAAK;;0CAGnB,qQAAC;gCACC,WAAW,IAAA,gJAAE,EACX,qFACA,eAAe,6BACf,aAAa,CAAC,eAAe,+DAC7B,CAAC,eAAe,CAAC,aAAa,oDAC9B,gBAAgB,CAAC,aAAa;0CAG/B,4BACC,qQAAC,4PAAY;oCAAC,WAAU;;;;;yDAExB,qQAAC;oCAAK,WAAU;8CAAuB,QAAQ;;;;;;;;;;;0CAKnD,qQAAC;gCACC,WAAW,IAAA,gJAAE,EACX,wFACA,YAAY,iCAAiC;0CAG9C,OAAO,KAAK;;;;;;;uBAjCV;;;;;gBAqCX;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 1357, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/WizardNavigation.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { ChevronLeft, ChevronRight, Save, Loader2, Send } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { useWizard } from './WizardContext'\r\n\r\ninterface WizardNavigationProps {\r\n  onSubmit?: () => Promise<void>\r\n  isSubmitting?: boolean\r\n}\r\n\r\nexport function WizardNavigation({ onSubmit, isSubmitting }: WizardNavigationProps = {}) {\r\n  const {\r\n    isSaving,\r\n    isFirstStep,\r\n    isLastStep,\r\n    canGoBack,\r\n    nextStep,\r\n    previousStep,\r\n    saveProgress,\r\n    submitQuestionnaire,\r\n  } = useWizard()\r\n\r\n  const loading = isSubmitting ?? isSaving\r\n\r\n  const handleNext = async () => {\r\n    await nextStep()\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    if (onSubmit) {\r\n      await onSubmit()\r\n    } else {\r\n      await submitQuestionnaire()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-zinc-700\">\r\n      {/* Left Side - Back & Save */}\r\n      <div className=\"flex items-center gap-3\">\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"outline\"\r\n          onClick={previousStep}\r\n          disabled={!canGoBack || loading}\r\n          className=\"gap-2 border-gray-300 dark:border-zinc-600 hover:bg-gray-50 dark:hover:bg-zinc-800\"\r\n        >\r\n          <ChevronLeft className=\"h-4 w-4\" />\r\n          Back\r\n        </Button>\r\n\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          onClick={() => saveProgress()}\r\n          disabled={loading}\r\n          className=\"gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800\"\r\n        >\r\n          {isSaving ? (\r\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          ) : (\r\n            <Save className=\"h-4 w-4\" />\r\n          )}\r\n          Save Progress\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Right Side - Next / Submit */}\r\n      <div>\r\n        {isLastStep ? (\r\n          <Button\r\n            type=\"button\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n            className=\"gap-2 bg-emerald-600 hover:bg-emerald-700\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                Submitting...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Send className=\"h-4 w-4\" />\r\n                Submit Questionnaire\r\n              </>\r\n            )}\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            type=\"button\"\r\n            onClick={handleNext}\r\n            disabled={loading}\r\n            className=\"gap-2 bg-emerald-600 hover:bg-emerald-700\"\r\n          >\r\n            {loading ? (\r\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n            ) : (\r\n              <>\r\n                Continue\r\n                <ChevronRight className=\"h-4 w-4\" />\r\n              </>\r\n            )}\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAWO,SAAS,iBAAiB,EAAE,QAAQ,EAAE,YAAY,EAAyB,GAAG,CAAC,CAAC;IACrF,MAAM,EACJ,QAAQ,EACR,WAAW,EACX,UAAU,EACV,SAAS,EACT,QAAQ,EACR,YAAY,EACZ,YAAY,EACZ,mBAAmB,EACpB,GAAG,IAAA,wLAAS;IAEb,MAAM,UAAU,gBAAgB;IAEhC,MAAM,aAAa;QACjB,MAAM;IACR;IAEA,MAAM,eAAe;QACnB,IAAI,UAAU;YACZ,MAAM;QACR,OAAO;YACL,MAAM;QACR;IACF;IAEA,qBACE,qQAAC;QAAI,WAAU;;0BAEb,qQAAC;gBAAI,WAAU;;kCACb,qQAAC,mKAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,SAAS;wBACT,UAAU,CAAC,aAAa;wBACxB,WAAU;;0CAEV,qQAAC,0PAAW;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAIrC,qQAAC,mKAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,SAAS,IAAM;wBACf,UAAU;wBACV,WAAU;;4BAET,yBACC,qQAAC,mPAAO;gCAAC,WAAU;;;;;qDAEnB,qQAAC,iOAAI;gCAAC,WAAU;;;;;;4BAChB;;;;;;;;;;;;;0BAMN,qQAAC;0BACE,2BACC,qQAAC,mKAAM;oBACL,MAAK;oBACL,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,wBACC;;0CACE,qQAAC,mPAAO;gCAAC,WAAU;;;;;;4BAAyB;;qDAI9C;;0CACE,qQAAC,iOAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;yCAMlC,qQAAC,mKAAM;oBACL,MAAK;oBACL,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,wBACC,qQAAC,mPAAO;wBAAC,WAAU;;;;;6CAEnB;;4BAAE;0CAEA,qQAAC,6PAAY;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;AAQxC"}},
    {"offset": {"line": 1524, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step1AboutYou.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step1Schema, Step1Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\n\r\nexport function Step1AboutYou() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step1')\r\n\r\n  const form = useForm<Step1Data>({\r\n    resolver: zodResolver(step1Schema),\r\n    defaultValues: existingData || (getStepDefaults(1) as Step1Data),\r\n  })\r\n\r\n  // Sync form changes to wizard context\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step1', values as Step1Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Tell us about yourself</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          We need some basic information to get started\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          {/* Name & DOB */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"fullName\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Full Legal Name</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"John Smith\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"dateOfBirth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Date of Birth</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"date\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Nationality & Residence */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"nationality\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Nationality</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. British\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"countryOfResidence\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Country of Residence</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. United Kingdom\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Address */}\r\n          <FormField\r\n            control={form.control}\r\n            name=\"residentialAddress\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Residential Address</FormLabel>\r\n                <FormControl>\r\n                  <Input placeholder=\"Street address\" {...field} />\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"city\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>City</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"London\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"postalCode\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Postal Code</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"SW1A 1AA\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Contact */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"email\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Email Address</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"email\" placeholder=\"john@example.com\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"phone\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Phone Number</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"tel\" placeholder=\"+44 20 1234 5678\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Tax Info */}\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"taxResidencyCountry\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tax Residency Country</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"e.g. United Kingdom\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"taxIdNumber\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tax ID Number (Optional)</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"National Insurance / SSN / TIN\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2126, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step2InvestmentType.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step2Schema,\r\n  Step2Data,\r\n  investmentTypeOptions,\r\n  getStepDefaults,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { User, Users, Building2, Briefcase, HelpCircle, Landmark } from 'lucide-react'\r\n\r\nconst icons: Record<string, React.ReactNode> = {\r\n  individual: <User className=\"h-5 w-5\" />,\r\n  joint: <Users className=\"h-5 w-5\" />,\r\n  trust: <Landmark className=\"h-5 w-5\" />,\r\n  corporation: <Building2 className=\"h-5 w-5\" />,\r\n  partnership: <Briefcase className=\"h-5 w-5\" />,\r\n  other: <HelpCircle className=\"h-5 w-5\" />,\r\n}\r\n\r\nexport function Step2InvestmentType() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step2')\r\n\r\n  const form = useForm<Step2Data>({\r\n    resolver: zodResolver(step2Schema),\r\n    defaultValues: existingData || (getStepDefaults(2) as Step2Data),\r\n  })\r\n\r\n  const selectedType = form.watch('investmentType')\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step2', values as Step2Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">How will you be investing?</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Select the type of investment account\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"investmentType\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormControl>\r\n                  <RadioGroup\r\n                    onValueChange={field.onChange}\r\n                    value={field.value}\r\n                    className=\"grid gap-3 md:grid-cols-2 lg:grid-cols-3\"\r\n                  >\r\n                    {investmentTypeOptions.map((option) => (\r\n                      <label\r\n                        key={option.value}\r\n                        className={cn(\r\n                          'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                          field.value === option.value\r\n                            ? 'border-emerald-500 bg-emerald-50 dark:bg-emerald-950'\r\n                            : 'border-border hover:border-muted-foreground/50 bg-card'\r\n                        )}\r\n                      >\r\n                        <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                        <div\r\n                          className={cn(\r\n                            'p-2 rounded-lg',\r\n                            field.value === option.value\r\n                              ? 'bg-emerald-500 text-white'\r\n                              : 'bg-muted text-muted-foreground'\r\n                          )}\r\n                        >\r\n                          {icons[option.value]}\r\n                        </div>\r\n                        <span className=\"font-medium\">{option.label}</span>\r\n                      </label>\r\n                    ))}\r\n                  </RadioGroup>\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {selectedType === 'other' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentTypeOther\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Please specify</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"Describe your investment type\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAvBA;;;;;;;;;;;;AAyBA,MAAM,QAAyC;IAC7C,0BAAY,qQAAC,iOAAI;QAAC,WAAU;;;;;;IAC5B,qBAAO,qQAAC,oOAAK;QAAC,WAAU;;;;;;IACxB,qBAAO,qQAAC,6OAAQ;QAAC,WAAU;;;;;;IAC3B,2BAAa,qQAAC,oPAAS;QAAC,WAAU;;;;;;IAClC,2BAAa,qQAAC,gPAAS;QAAC,WAAU;;;;;;IAClC,qBAAO,qQAAC,mQAAU;QAAC,WAAU;;;;;;AAC/B;AAEO,SAAS;IACd,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG,IAAA,wLAAS;IACjD,MAAM,eAAe,YAAY;IAEjC,MAAM,OAAO,IAAA,gMAAO,EAAY;QAC9B,UAAU,IAAA,oMAAW,EAAC,2MAAW;QACjC,eAAe,gBAAiB,IAAA,+MAAe,EAAC;IAClD;IAEA,MAAM,eAAe,KAAK,KAAK,CAAC;IAEhC,IAAA,yOAAS,EAAC;QACR,MAAM,eAAe,KAAK,KAAK,CAAC,CAAC;YAC/B,eAAe,SAAS;QAC1B;QACA,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG;QAAC;QAAM;KAAe;IAEzB,qBACE,qQAAC;QAAI,WAAU;;0BACb,qQAAC;gBAAI,WAAU;;kCACb,qQAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,qQAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAK5C,qQAAC,+JAAI;gBAAE,GAAG,IAAI;0BACZ,cAAA,qQAAC;oBAAI,WAAU;;sCACb,qQAAC,oKAAS;4BACR,SAAS,KAAK,OAAO;4BACrB,MAAK;4BACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,qQAAC,mKAAQ;;sDACP,qQAAC,sKAAW;sDACV,cAAA,qQAAC,+KAAU;gDACT,eAAe,MAAM,QAAQ;gDAC7B,OAAO,MAAM,KAAK;gDAClB,WAAU;0DAET,qNAAqB,CAAC,GAAG,CAAC,CAAC,uBAC1B,qQAAC;wDAEC,WAAW,IAAA,gJAAE,EACX,iFACA,MAAM,KAAK,KAAK,OAAO,KAAK,GACxB,yDACA;;0EAGN,qQAAC,mLAAc;gEAAC,OAAO,OAAO,KAAK;gEAAE,WAAU;;;;;;0EAC/C,qQAAC;gEACC,WAAW,IAAA,gJAAE,EACX,kBACA,MAAM,KAAK,KAAK,OAAO,KAAK,GACxB,8BACA;0EAGL,KAAK,CAAC,OAAO,KAAK,CAAC;;;;;;0EAEtB,qQAAC;gEAAK,WAAU;0EAAe,OAAO,KAAK;;;;;;;uDAnBtC,OAAO,KAAK;;;;;;;;;;;;;;;sDAwBzB,qQAAC,sKAAW;;;;;;;;;;;;;;;;wBAKjB,iBAAiB,yBAChB,qQAAC,oKAAS;4BACR,SAAS,KAAK,OAAO;4BACrB,MAAK;4BACL,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,qQAAC,mKAAQ;;sDACP,qQAAC,oKAAS;sDAAC;;;;;;sDACX,qQAAC,sKAAW;sDACV,cAAA,qQAAC,iKAAK;gDAAC,aAAY;gDAAiC,GAAG,KAAK;;;;;;;;;;;sDAE9D,qQAAC,sKAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS9B"}},
    {"offset": {"line": 2385, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step3WellInformed.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step3Schema,\r\n  Step3Data,\r\n  wellInformedBasisOptions,\r\n  getStepDefaults,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { CheckCircle2, HelpCircle, XCircle } from 'lucide-react'\r\n\r\nexport function Step3WellInformed() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step3')\r\n\r\n  const form = useForm<Step3Data>({\r\n    resolver: zodResolver(step3Schema),\r\n    defaultValues: existingData || (getStepDefaults(3) as Step3Data),\r\n  })\r\n\r\n  const selectedStatus = form.watch('isWellInformed')\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step3', values as Step3Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Investor Status</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Are you a well-informed or professional investor?\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"isWellInformed\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Do you qualify as a well-informed investor?</FormLabel>\r\n                <FormDescription>\r\n                  A well-informed investor typically has significant investment experience,\r\n                  a net worth exceeding â‚¬1,250,000, or is advised by a regulated professional.\r\n                </FormDescription>\r\n                <FormControl>\r\n                  <RadioGroup\r\n                    onValueChange={field.onChange}\r\n                    value={field.value}\r\n                    className=\"grid gap-3 md:grid-cols-3 mt-4\"\r\n                  >\r\n                    {[\r\n                      { value: 'yes', label: 'Yes', icon: CheckCircle2, color: 'emerald' },\r\n                      { value: 'no', label: 'No', icon: XCircle, color: 'red' },\r\n                      { value: 'unsure', label: \"I'm not sure\", icon: HelpCircle, color: 'amber' },\r\n                    ].map((option) => {\r\n                      const Icon = option.icon\r\n                      const isSelected = field.value === option.value\r\n                      return (\r\n                        <label\r\n                          key={option.value}\r\n                          className={cn(\r\n                            'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                            isSelected\r\n                              ? `border-${option.color}-500 bg-${option.color}-500/10`\r\n                              : 'border-border hover:border-muted-foreground/50',\r\n                            isSelected && option.value === 'yes' && 'border-emerald-500 bg-emerald-500/10',\r\n                            isSelected && option.value === 'no' && 'border-red-500 bg-red-500/10',\r\n                            isSelected && option.value === 'unsure' && 'border-amber-500 bg-amber-500/10'\r\n                          )}\r\n                        >\r\n                          <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                          <Icon\r\n                            className={cn(\r\n                              'h-5 w-5',\r\n                              isSelected && option.value === 'yes' && 'text-emerald-500',\r\n                              isSelected && option.value === 'no' && 'text-red-500',\r\n                              isSelected && option.value === 'unsure' && 'text-amber-500',\r\n                              !isSelected && 'text-slate-500'\r\n                            )}\r\n                          />\r\n                          <span className=\"font-medium\">{option.label}</span>\r\n                        </label>\r\n                      )\r\n                    })}\r\n                  </RadioGroup>\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {(selectedStatus === 'yes' || selectedStatus === 'unsure') && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"wellInformedBasis\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>On what basis? (Select all that apply)</FormLabel>\r\n                  <div className=\"grid gap-3 mt-3\">\r\n                    {wellInformedBasisOptions.map((option) => (\r\n                      <label\r\n                        key={option.value}\r\n                        className={cn(\r\n                          'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n                          field.value?.includes(option.value)\r\n                            ? 'border-emerald-500 bg-emerald-500/10'\r\n                            : 'border-border hover:border-muted-foreground/50'\r\n                        )}\r\n                      >\r\n                        <Checkbox\r\n                          checked={field.value?.includes(option.value)}\r\n                          onCheckedChange={(checked) => {\r\n                            const current = field.value || []\r\n                            if (checked) {\r\n                              field.onChange([...current, option.value])\r\n                            } else {\r\n                              field.onChange(current.filter((v: string) => v !== option.value))\r\n                            }\r\n                          }}\r\n                        />\r\n                        <span>{option.label}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n\r\n          {selectedStatus === 'yes' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"wellInformedEvidence\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Additional details (Optional)</FormLabel>\r\n                  <FormDescription>\r\n                    Provide any additional information supporting your investor status\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Years of experience, relevant certifications, regulated advisor details...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2712, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step4Compliance.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step4Schema, Step4Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { AlertTriangle, Flag } from 'lucide-react'\r\n\r\nfunction YesNoField({\r\n  control,\r\n  name,\r\n  label,\r\n  description,\r\n  detailsName,\r\n  detailsLabel,\r\n  showDetails,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n  description?: string\r\n  detailsName?: string\r\n  detailsLabel?: string\r\n  showDetails?: boolean\r\n}) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <FormField\r\n        control={control}\r\n        name={name}\r\n        render={({ field }) => (\r\n          <FormItem>\r\n            <div className=\"flex items-start justify-between gap-4\">\r\n              <div className=\"flex-1\">\r\n                <FormLabel className=\"text-base\">{label}</FormLabel>\r\n                {description && (\r\n                  <FormDescription className=\"mt-1\">{description}</FormDescription>\r\n                )}\r\n              </div>\r\n              <FormControl>\r\n                <RadioGroup\r\n                  onValueChange={field.onChange}\r\n                  value={field.value}\r\n                  className=\"flex gap-4\"\r\n                >\r\n                  {['yes', 'no'].map((value) => (\r\n                    <label\r\n                      key={value}\r\n                      className={cn(\r\n                        'px-4 py-2 rounded-lg border cursor-pointer transition-all capitalize',\r\n                        field.value === value\r\n                          ? value === 'yes'\r\n                            ? 'border-amber-500 bg-amber-50 dark:bg-amber-950 text-amber-600 dark:text-amber-400'\r\n                            : 'border-emerald-500 bg-emerald-50 dark:bg-emerald-950 text-emerald-600 dark:text-emerald-400'\r\n                          : 'border-border hover:border-muted-foreground/50 bg-card'\r\n                      )}\r\n                    >\r\n                      <RadioGroupItem value={value} className=\"sr-only\" />\r\n                      {value}\r\n                    </label>\r\n                  ))}\r\n                </RadioGroup>\r\n              </FormControl>\r\n            </div>\r\n            <FormMessage />\r\n          </FormItem>\r\n        )}\r\n      />\r\n\r\n      {showDetails && detailsName && (\r\n        <FormField\r\n          control={control}\r\n          name={detailsName}\r\n          render={({ field }) => (\r\n            <FormItem className=\"pl-4 border-l-2 border-border\">\r\n              <FormLabel>{detailsLabel || 'Please provide details'}</FormLabel>\r\n              <FormControl>\r\n                <Textarea\r\n                  placeholder=\"Provide relevant details...\"\r\n                  className=\"min-h-[80px]\"\r\n                  {...field}\r\n                />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Step4Compliance() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step4')\r\n\r\n  const form = useForm<Step4Data>({\r\n    resolver: zodResolver(step4Schema),\r\n    defaultValues: existingData || (getStepDefaults(4) as Step4Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step4', values as Step4Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold\">Compliance Declarations</h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Required regulatory questions\r\n        </p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-8\">\r\n          {/* PEP Section */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\r\n              Political Exposure\r\n            </h3>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isPEP\"\r\n              label=\"Are you a Politically Exposed Person (PEP)?\"\r\n              description=\"A PEP is someone entrusted with a prominent public function\"\r\n              detailsName=\"pepDetails\"\r\n              detailsLabel=\"Please provide details about your role\"\r\n              showDetails={watchedValues.isPEP === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isRelatedToPEP\"\r\n              label=\"Are you related to or closely associated with a PEP?\"\r\n              detailsName=\"relatedPEPDetails\"\r\n              detailsLabel=\"Please describe the relationship\"\r\n              showDetails={watchedValues.isRelatedToPEP === 'yes'}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Sanctions & Legal */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg\">Legal & Regulatory Status</h3>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isSanctioned\"\r\n              label=\"Are you subject to any sanctions or restrictions?\"\r\n              detailsName=\"sanctionedDetails\"\r\n              showDetails={watchedValues.isSanctioned === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"hasCriminalRecord\"\r\n              label=\"Do you have any criminal convictions related to financial matters?\"\r\n              detailsName=\"criminalDetails\"\r\n              showDetails={watchedValues.hasCriminalRecord === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isUnderInvestigation\"\r\n              label=\"Are you currently under any regulatory investigation?\"\r\n              detailsName=\"investigationDetails\"\r\n              showDetails={watchedValues.isUnderInvestigation === 'yes'}\r\n            />\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"hasBankruptcy\"\r\n              label=\"Have you been declared bankrupt or insolvent?\"\r\n              detailsName=\"bankruptcyDetails\"\r\n              showDetails={watchedValues.hasBankruptcy === 'yes'}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* US Person */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Flag className=\"h-5 w-5\" />\r\n              US Person Status\r\n            </h3>\r\n\r\n            <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n              <AlertDescription>\r\n                Your answer here determines if additional US-specific compliance steps are required.\r\n              </AlertDescription>\r\n            </Alert>\r\n\r\n            <YesNoField\r\n              control={form.control}\r\n              name=\"isUSPerson\"\r\n              label=\"Are you a US Person for tax purposes?\"\r\n              description=\"Includes US citizens, green card holders, and those with substantial US presence\"\r\n            />\r\n\r\n            {watchedValues.isUSPerson === 'yes' && (\r\n              <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n                <AlertDescription>\r\n                  Additional US compliance steps will be shown next.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Source of Funds & Wealth */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg\">Source of Funds</h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"sourceOfFunds\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>What is the source of funds for this investment?</FormLabel>\r\n                  <FormDescription>\r\n                    Describe the origin of funds (e.g., salary, business income, inheritance)\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Savings from employment income over the past 10 years...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"sourceOfWealth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>What is your overall source of wealth?</FormLabel>\r\n                  <FormDescription>\r\n                    Describe how you accumulated your wealth\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"e.g., Built and sold a technology company, professional career...\"\r\n                      className=\"min-h-[100px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3270, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step5USPerson.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step5Schema, Step5Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { Flag, Info } from 'lucide-react'\r\n\r\nfunction YesNoQuestion({\r\n  control,\r\n  name,\r\n  label,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n}) {\r\n  return (\r\n    <FormField\r\n      control={control}\r\n      name={name}\r\n      render={({ field }) => (\r\n        <FormItem className=\"flex items-center justify-between gap-4 p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors\">\r\n          <FormLabel className=\"flex-1 cursor-pointer font-normal\">\r\n            {label}\r\n          </FormLabel>\r\n          <FormControl>\r\n            <RadioGroup\r\n              onValueChange={field.onChange}\r\n              value={field.value}\r\n              className=\"flex gap-2\"\r\n            >\r\n              {['yes', 'no'].map((value) => (\r\n                <label\r\n                  key={value}\r\n                  className={cn(\r\n                    'px-3 py-1.5 rounded text-sm font-medium cursor-pointer transition-all capitalize',\r\n                    field.value === value\r\n                      ? value === 'yes'\r\n                        ? 'bg-amber-500 text-white'\r\n                        : 'bg-emerald-500 text-white'\r\n                      : 'bg-muted text-muted-foreground hover:bg-muted/80'\r\n                  )}\r\n                >\r\n                  <RadioGroupItem value={value} className=\"sr-only\" />\r\n                  {value}\r\n                </label>\r\n              ))}\r\n            </RadioGroup>\r\n          </FormControl>\r\n          <FormMessage />\r\n        </FormItem>\r\n      )}\r\n    />\r\n  )\r\n}\r\n\r\nexport function Step5USPerson() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step5')\r\n\r\n  const form = useForm<Step5Data>({\r\n    resolver: zodResolver(step5Schema),\r\n    defaultValues: existingData || (getStepDefaults(5) as Step5Data),\r\n  })\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step5', values as Step5Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <Flag className=\"h-6 w-6\" />\r\n          US Person Definition\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Detailed US tax residency questions\r\n        </p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n        <Info className=\"h-4 w-4\" />\r\n        <AlertTitle>Why we ask these questions</AlertTitle>\r\n        <AlertDescription>\r\n          Under Regulation S and FATCA, we need to determine your US Person status for tax and regulatory compliance purposes.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-3\">\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isUSCitizen\"\r\n            label=\"Are you a US citizen?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isUSResident\"\r\n            label=\"Are you a US resident alien (permanent resident)?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSGreenCard\"\r\n            label=\"Do you hold a US Green Card?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasSubstantialUSPresence\"\r\n            label=\"Have you spent 183+ days in the US in the past 3 years?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSMailingAddress\"\r\n            label=\"Do you have a US mailing address?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSPhoneNumber\"\r\n            label=\"Do you have a US phone number?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSBankAccount\"\r\n            label=\"Do you have a US bank account?\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasUSPowerOfAttorney\"\r\n            label=\"Have you granted power of attorney to someone in the US?\"\r\n          />\r\n\r\n          <FormField\r\n            control={form.control}\r\n            name=\"usConnectionDetails\"\r\n            render={({ field }) => (\r\n              <FormItem className=\"pt-4\">\r\n                <FormLabel>Additional US Connection Details (Optional)</FormLabel>\r\n                <FormDescription>\r\n                  Provide any additional context about your US connections\r\n                </FormDescription>\r\n                <FormControl>\r\n                  <Textarea\r\n                    placeholder=\"Any other relevant information about your US connections...\"\r\n                    className=\"min-h-[80px]\"\r\n                    {...field}\r\n                  />\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3601, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step6OfferDetails.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step6Schema, Step6Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { FileText, CheckCircle2, DollarSign, Briefcase, Building2, HelpCircle } from 'lucide-react'\r\n\r\nconst accreditationOptions = [\r\n  { value: 'income', label: 'Annual income over $200K (or $300K joint)', icon: DollarSign },\r\n  { value: 'net_worth', label: 'Net worth over $1M (excluding primary residence)', icon: Building2 },\r\n  { value: 'professional', label: 'Licensed professional (Series 7, 65, or 82)', icon: Briefcase },\r\n  { value: 'entity', label: 'Entity with $5M+ in assets', icon: Building2 },\r\n  { value: 'other', label: 'Other qualifying criteria', icon: HelpCircle },\r\n] as const\r\n\r\nfunction YesNoQuestion({\r\n  control,\r\n  name,\r\n  label,\r\n  description,\r\n}: {\r\n  control: any\r\n  name: string\r\n  label: string\r\n  description?: string\r\n}) {\r\n  return (\r\n    <FormField\r\n      control={control}\r\n      name={name}\r\n      render={({ field }) => (\r\n        <FormItem className=\"p-4 rounded-lg border border-border hover:border-muted-foreground/50 transition-colors\">\r\n          <div className=\"flex items-start justify-between gap-4\">\r\n            <div className=\"flex-1\">\r\n              <FormLabel className=\"text-base font-medium\">{label}</FormLabel>\r\n              {description && (\r\n                <FormDescription className=\"mt-1\">{description}</FormDescription>\r\n              )}\r\n            </div>\r\n            <FormControl>\r\n              <RadioGroup\r\n                onValueChange={field.onChange}\r\n                value={field.value}\r\n                className=\"flex gap-2\"\r\n              >\r\n                {['yes', 'no'].map((value) => (\r\n                  <label\r\n                    key={value}\r\n                    className={cn(\r\n                      'px-4 py-2 rounded-lg text-sm font-medium cursor-pointer transition-all capitalize',\r\n                      field.value === value\r\n                        ? value === 'yes'\r\n                          ? 'bg-emerald-500 text-white'\r\n                          : 'bg-red-500 text-white'\r\n                        : 'bg-muted text-muted-foreground hover:bg-muted/80'\r\n                    )}\r\n                  >\r\n                    <RadioGroupItem value={value} className=\"sr-only\" />\r\n                    {value}\r\n                  </label>\r\n                ))}\r\n              </RadioGroup>\r\n            </FormControl>\r\n          </div>\r\n          <FormMessage />\r\n        </FormItem>\r\n      )}\r\n    />\r\n  )\r\n}\r\n\r\nexport function Step6OfferDetails() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step6')\r\n\r\n  const form = useForm<Step6Data>({\r\n    resolver: zodResolver(step6Schema),\r\n    defaultValues: existingData || (getStepDefaults(6) as Step6Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step6', values as Step6Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <FileText className=\"h-6 w-6\" />\r\n          Offer Details\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Accreditation and offering acknowledgments\r\n        </p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n        <FileText className=\"h-4 w-4\" />\r\n        <AlertTitle>US Investor Requirements</AlertTitle>\r\n        <AlertDescription>\r\n          Under Regulation D, we need to verify your accredited investor status before you can participate in this offering.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"isAccreditedInvestor\"\r\n            label=\"Are you an accredited investor?\"\r\n            description=\"Under SEC Regulation D, accredited investors meet specific income or net worth thresholds\"\r\n          />\r\n\r\n          {watchedValues.isAccreditedInvestor === 'yes' && (\r\n            <FormField\r\n              control={form.control}\r\n              name=\"accreditationBasis\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>On what basis do you qualify?</FormLabel>\r\n                  <FormDescription>\r\n                    Select the criteria that best describes your accredited investor status\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"grid gap-3 mt-3\"\r\n                    >\r\n                      {accreditationOptions.map((option) => {\r\n                        const Icon = option.icon\r\n                        return (\r\n                          <label\r\n                            key={option.value}\r\n                            className={cn(\r\n                              'flex items-center gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all',\r\n                              field.value === option.value\r\n                                ? 'border-emerald-500 bg-emerald-500/10'\r\n                                : 'border-border hover:border-muted-foreground/50'\r\n                            )}\r\n                          >\r\n                            <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n                            <div\r\n                              className={cn(\r\n                                'p-2 rounded-lg',\r\n                                field.value === option.value\r\n                                  ? 'bg-emerald-500 text-white'\r\n                                  : 'bg-muted text-muted-foreground'\r\n                              )}\r\n                            >\r\n                              <Icon className=\"h-4 w-4\" />\r\n                            </div>\r\n                            <span className=\"font-medium\">{option.label}</span>\r\n                            {field.value === option.value && (\r\n                              <CheckCircle2 className=\"h-5 w-5 text-emerald-500 ml-auto\" />\r\n                            )}\r\n                          </label>\r\n                        )\r\n                      })}\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          )}\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"hasReceivedOfferingMaterials\"\r\n            label=\"Have you received and reviewed the offering materials?\"\r\n            description=\"Including the Private Placement Memorandum (PPM) and related documents\"\r\n          />\r\n\r\n          <YesNoQuestion\r\n            control={form.control}\r\n            name=\"understandsRestrictions\"\r\n            label=\"Do you understand the restrictions on transfer and resale?\"\r\n            description=\"Securities offered under Regulation D cannot be freely resold and are subject to holding periods\"\r\n          />\r\n\r\n          {watchedValues.hasReceivedOfferingMaterials === 'yes' &&\r\n            watchedValues.understandsRestrictions === 'yes' && (\r\n              <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n                <AlertDescription>\r\n                  Great! You've confirmed receipt of materials and understanding of restrictions.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4017, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step7USCompliance.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step7Schema, Step7Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { FileCheck, AlertTriangle, CheckCircle2 } from 'lucide-react'\r\n\r\nconst complianceItems = [\r\n  {\r\n    name: 'acknowledgesFATCA',\r\n    title: 'FATCA Acknowledgment',\r\n    description:\r\n      'I acknowledge that as a US Person, I am subject to the Foreign Account Tax Compliance Act (FATCA) and may be required to provide additional documentation.',\r\n    icon: 'ðŸ›ï¸',\r\n  },\r\n  {\r\n    name: 'willProvideW9',\r\n    title: 'Form W-9 Requirement',\r\n    description:\r\n      'I agree to provide a completed Form W-9 (Request for Taxpayer Identification Number and Certification) if required.',\r\n    icon: 'ðŸ“‹',\r\n  },\r\n  {\r\n    name: 'understandsWithholding',\r\n    title: 'Withholding Requirements',\r\n    description:\r\n      'I understand that backup withholding may apply at a rate of 24% if I fail to provide a valid TIN or fail to certify my status.',\r\n    icon: 'ðŸ’°',\r\n  },\r\n  {\r\n    name: 'certifiesTaxCompliance',\r\n    title: 'Tax Compliance Certification',\r\n    description:\r\n      'I certify that I am in compliance with my US federal and state tax obligations, or I am working with a tax advisor to resolve any outstanding issues.',\r\n    icon: 'âœ…',\r\n  },\r\n  {\r\n    name: 'acknowledgesReportingObligations',\r\n    title: 'Reporting Obligations',\r\n    description:\r\n      'I acknowledge that the fund may be required to report my investment information to the IRS and/or relevant tax authorities under FATCA and other applicable laws.',\r\n    icon: 'ðŸ“Š',\r\n  },\r\n] as const\r\n\r\nexport function Step7USCompliance() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step7')\r\n\r\n  const form = useForm<Step7Data>({\r\n    resolver: zodResolver(step7Schema),\r\n    defaultValues: existingData || (getStepDefaults(7) as Step7Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n  const allChecked = complianceItems.every(\r\n    (item) => watchedValues[item.name as keyof Step7Data] === true\r\n  )\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step7', values as Step7Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <FileCheck className=\"h-6 w-6\" />\r\n          US Tax Compliance\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">FATCA and reporting requirements</p>\r\n      </div>\r\n\r\n      <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n        <AlertTriangle className=\"h-4 w-4\" />\r\n        <AlertTitle>Important Tax Information</AlertTitle>\r\n        <AlertDescription>\r\n          As a US Person, you are subject to specific tax reporting requirements. Please review and\r\n          acknowledge each item below.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-4\">\r\n          {complianceItems.map((item) => (\r\n            <FormField\r\n              key={item.name}\r\n              control={form.control}\r\n              name={item.name as keyof Step7Data}\r\n              render={({ field }) => (\r\n                <FormItem\r\n                  className={cn(\r\n                    'p-4 rounded-lg border-2 transition-all',\r\n                    field.value\r\n                      ? 'border-emerald-500/50 bg-emerald-500/5'\r\n                      : 'border-border hover:border-muted-foreground/50'\r\n                  )}\r\n                >\r\n                  <div className=\"flex items-start gap-4\">\r\n                    <FormControl>\r\n                      <Checkbox\r\n                        checked={field.value as boolean}\r\n                        onCheckedChange={field.onChange}\r\n                        className=\"mt-1\"\r\n                      />\r\n                    </FormControl>\r\n                    <div className=\"flex-1\">\r\n                      <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                        <span>{item.icon}</span>\r\n                        {item.title}\r\n                        {field.value && (\r\n                          <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto\" />\r\n                        )}\r\n                      </FormLabel>\r\n                      <p className=\"text-sm text-muted-foreground mt-1\">{item.description}</p>\r\n                    </div>\r\n                  </div>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          ))}\r\n        </div>\r\n      </Form>\r\n\r\n      {allChecked && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertDescription>\r\n            All US tax compliance acknowledgments completed. You may proceed to the next step.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAlBA;;;;;;;;;;;;AAoBA,MAAM,kBAAkB;IACtB;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,aACE;QACF,MAAM;IACR;CACD;AAEM,SAAS;IACd,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG,IAAA,wLAAS;IACjD,MAAM,eAAe,YAAY;IAEjC,MAAM,OAAO,IAAA,gMAAO,EAAY;QAC9B,UAAU,IAAA,oMAAW,EAAC,2MAAW;QACjC,eAAe,gBAAiB,IAAA,+MAAe,EAAC;IAClD;IAEA,MAAM,gBAAgB,KAAK,KAAK;IAChC,MAAM,aAAa,gBAAgB,KAAK,CACtC,CAAC,OAAS,aAAa,CAAC,KAAK,IAAI,CAAoB,KAAK;IAG5D,IAAA,yOAAS,EAAC;QACR,MAAM,eAAe,KAAK,KAAK,CAAC,CAAC;YAC/B,eAAe,SAAS;QAC1B;QACA,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG;QAAC;QAAM;KAAe;IAEzB,qBACE,qQAAC;QAAI,WAAU;;0BACb,qQAAC;gBAAI,WAAU;;kCACb,qQAAC;wBAAG,WAAU;;0CACZ,qQAAC,oPAAS;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGnC,qQAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAG5C,qQAAC,iKAAK;gBAAC,WAAU;;kCACf,qQAAC,gQAAa;wBAAC,WAAU;;;;;;kCACzB,qQAAC,sKAAU;kCAAC;;;;;;kCACZ,qQAAC,4KAAgB;kCAAC;;;;;;;;;;;;0BAMpB,qQAAC,+JAAI;gBAAE,GAAG,IAAI;0BACZ,cAAA,qQAAC;oBAAI,WAAU;8BACZ,gBAAgB,GAAG,CAAC,CAAC,qBACpB,qQAAC,oKAAS;4BAER,SAAS,KAAK,OAAO;4BACrB,MAAM,KAAK,IAAI;4BACf,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,qQAAC,mKAAQ;oCACP,WAAW,IAAA,gJAAE,EACX,0CACA,MAAM,KAAK,GACP,2CACA;;sDAGN,qQAAC;4CAAI,WAAU;;8DACb,qQAAC,sKAAW;8DACV,cAAA,qQAAC,uKAAQ;wDACP,SAAS,MAAM,KAAK;wDACpB,iBAAiB,MAAM,QAAQ;wDAC/B,WAAU;;;;;;;;;;;8DAGd,qQAAC;oDAAI,WAAU;;sEACb,qQAAC,oKAAS;4DAAC,WAAU;;8EACnB,qQAAC;8EAAM,KAAK,IAAI;;;;;;gEACf,KAAK,KAAK;gEACV,MAAM,KAAK,kBACV,qQAAC,4PAAY;oEAAC,WAAU;;;;;;;;;;;;sEAG5B,qQAAC;4DAAE,WAAU;sEAAsC,KAAK,WAAW;;;;;;;;;;;;;;;;;;sDAGvE,qQAAC,sKAAW;;;;;;;;;;;2BA/BX,KAAK,IAAI;;;;;;;;;;;;;;;YAuCrB,4BACC,qQAAC,iKAAK;gBAAC,WAAU;;kCACf,qQAAC,4PAAY;wBAAC,WAAU;;;;;;kCACxB,qQAAC,4KAAgB;kCAAC;;;;;;;;;;;;;;;;;;AAO5B"}},
    {"offset": {"line": 4298, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step8Suitability.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport {\r\n  step8Schema,\r\n  Step8Data,\r\n  getStepDefaults,\r\n  educationLevelOptions,\r\n  employmentStatusOptions,\r\n  incomeRangeOptions,\r\n  netWorthRangeOptions,\r\n  investmentObjectiveOptions,\r\n  riskToleranceOptions,\r\n  timeHorizonOptions,\r\n} from '../../schemas/kyc-questionnaire-schema'\r\nimport { TrendingUp, GraduationCap, Briefcase, DollarSign, Target, Clock } from 'lucide-react'\r\n\r\nconst alternativeInvestmentOptions = [\r\n  { value: 'private_equity', label: 'Private Equity' },\r\n  { value: 'venture_capital', label: 'Venture Capital' },\r\n  { value: 'hedge_funds', label: 'Hedge Funds' },\r\n  { value: 'real_estate', label: 'Real Estate (non-REIT)' },\r\n  { value: 'commodities', label: 'Commodities' },\r\n  { value: 'structured_products', label: 'Structured Products' },\r\n  { value: 'cryptocurrency', label: 'Cryptocurrency' },\r\n]\r\n\r\nfunction RadioOptionGroup({\r\n  field,\r\n  options,\r\n  columns = 2,\r\n}: {\r\n  field: any\r\n  options: readonly { value: string; label: string }[]\r\n  columns?: number\r\n}) {\r\n  return (\r\n    <RadioGroup\r\n      onValueChange={field.onChange}\r\n      value={field.value}\r\n      className={cn('grid gap-3 mt-2', columns === 3 ? 'md:grid-cols-3' : 'md:grid-cols-2')}\r\n    >\r\n      {options.map((option) => (\r\n        <label\r\n          key={option.value}\r\n          className={cn(\r\n            'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n            field.value === option.value\r\n              ? 'border-emerald-500 bg-emerald-500/10'\r\n              : 'border-border hover:border-muted-foreground/50'\r\n          )}\r\n        >\r\n          <RadioGroupItem value={option.value} className=\"sr-only\" />\r\n          <div\r\n            className={cn(\r\n              'w-4 h-4 rounded-full border-2 flex items-center justify-center',\r\n              field.value === option.value ? 'border-emerald-500' : 'border-slate-500'\r\n            )}\r\n          >\r\n            {field.value === option.value && (\r\n              <div className=\"w-2 h-2 rounded-full bg-emerald-500\" />\r\n            )}\r\n          </div>\r\n          <span className=\"text-sm\">{option.label}</span>\r\n        </label>\r\n      ))}\r\n    </RadioGroup>\r\n  )\r\n}\r\n\r\nexport function Step8Suitability() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step8')\r\n\r\n  const form = useForm<Step8Data>({\r\n    resolver: zodResolver(step8Schema),\r\n    defaultValues: existingData || (getStepDefaults(8) as Step8Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step8', values as Step8Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <TrendingUp className=\"h-6 w-6\" />\r\n          Investment Suitability\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">Help us understand your financial profile</p>\r\n      </div>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-8\">\r\n          {/* Education & Employment */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <GraduationCap className=\"h-5 w-5 text-blue-500\" />\r\n              Education & Employment\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"educationLevel\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Highest level of education</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={educationLevelOptions} columns={3} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"employmentStatus\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Employment status</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={employmentStatusOptions} columns={3} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {(watchedValues.employmentStatus === 'employed' ||\r\n              watchedValues.employmentStatus === 'self_employed') && (\r\n              <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"occupation\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Occupation</FormLabel>\r\n                      <FormControl>\r\n                        <Input placeholder=\"e.g., Software Engineer\" {...field} />\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"employer\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>\r\n                        {watchedValues.employmentStatus === 'self_employed'\r\n                          ? 'Business Name'\r\n                          : 'Employer'}\r\n                      </FormLabel>\r\n                      <FormControl>\r\n                        <Input placeholder=\"Company name\" {...field} />\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"yearsInvestingExperience\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Years of investment experience</FormLabel>\r\n                  <FormControl>\r\n                    <Input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"60\"\r\n                      placeholder=\"e.g., 10\"\r\n                      {...field}\r\n                      className=\"max-w-[150px]\"\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Financial Profile */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <DollarSign className=\"h-5 w-5 text-emerald-500\" />\r\n              Financial Profile\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"annualIncome\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Annual income</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={incomeRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"netWorth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Total net worth (excluding primary residence)</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={netWorthRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"liquidNetWorth\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Liquid net worth (cash and readily convertible assets)</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={netWorthRangeOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Investment Preferences */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Target className=\"h-5 w-5 text-purple-500\" />\r\n              Investment Preferences\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentObjective\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Primary investment objective</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={investmentObjectiveOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"riskTolerance\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Risk tolerance</FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={riskToleranceOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"investmentHorizon\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel className=\"flex items-center gap-2\">\r\n                    <Clock className=\"h-4 w-4\" />\r\n                    Investment time horizon\r\n                  </FormLabel>\r\n                  <FormControl>\r\n                    <RadioOptionGroup field={field} options={timeHorizonOptions} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Alternative Investment Experience */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <Briefcase className=\"h-5 w-5 text-amber-500\" />\r\n              Alternative Investment Experience\r\n            </h3>\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"percentageOfNetWorthToInvest\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Percentage of net worth you plan to invest in this offering</FormLabel>\r\n                  <FormDescription>\r\n                    Enter a percentage between 1 and 100\r\n                  </FormDescription>\r\n                  <FormControl>\r\n                    <div className=\"flex items-center gap-2 max-w-[150px]\">\r\n                      <Input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        max=\"100\"\r\n                        placeholder=\"e.g., 5\"\r\n                        {...field}\r\n                      />\r\n                      <span className=\"text-muted-foreground\">%</span>\r\n                    </div>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"hasAlternativeInvestmentExperience\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>\r\n                    Do you have prior experience with alternative investments?\r\n                  </FormLabel>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"flex gap-4 mt-2\"\r\n                    >\r\n                      {['yes', 'no'].map((value) => (\r\n                        <label\r\n                          key={value}\r\n                          className={cn(\r\n                            'px-6 py-2 rounded-lg border cursor-pointer transition-all capitalize',\r\n                            field.value === value\r\n                              ? 'border-emerald-500 bg-emerald-500/10'\r\n                              : 'border-border hover:border-muted-foreground/50'\r\n                          )}\r\n                        >\r\n                          <RadioGroupItem value={value} className=\"sr-only\" />\r\n                          {value}\r\n                        </label>\r\n                      ))}\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {watchedValues.hasAlternativeInvestmentExperience === 'yes' && (\r\n              <FormField\r\n                control={form.control}\r\n                name=\"alternativeInvestmentTypes\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Which types of alternative investments? (Select all that apply)</FormLabel>\r\n                    <div className=\"grid gap-2 mt-2 md:grid-cols-2\">\r\n                      {alternativeInvestmentOptions.map((option) => (\r\n                        <label\r\n                          key={option.value}\r\n                          className={cn(\r\n                            'flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all',\r\n                            field.value?.includes(option.value)\r\n                              ? 'border-emerald-500 bg-emerald-500/10'\r\n                              : 'border-border hover:border-muted-foreground/50'\r\n                          )}\r\n                        >\r\n                          <Checkbox\r\n                            checked={field.value?.includes(option.value)}\r\n                            onCheckedChange={(checked) => {\r\n                              const current = field.value || []\r\n                              if (checked) {\r\n                                field.onChange([...current, option.value])\r\n                              } else {\r\n                                field.onChange(current.filter((v: string) => v !== option.value))\r\n                              }\r\n                            }}\r\n                          />\r\n                          <span className=\"text-sm\">{option.label}</span>\r\n                        </label>\r\n                      ))}\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5304, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step9WaiverRisk.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step9Schema, Step9Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { AlertTriangle, CheckCircle2, Shield, Lock, FileText, DollarSign, Scale, Receipt, BookOpen, Users } from 'lucide-react'\r\n\r\nconst riskItems = [\r\n  {\r\n    name: 'acknowledgesIlliquidity',\r\n    title: 'Illiquidity Risk',\r\n    description:\r\n      'I understand that interests in the Fund are illiquid and there is no public market for these securities. I may not be able to sell my investment or access my capital for an extended period.',\r\n    icon: Lock,\r\n  },\r\n  {\r\n    name: 'acknowledgesLossRisk',\r\n    title: 'Capital Loss Risk',\r\n    description:\r\n      'I understand that investing in alternative investments involves significant risks, including the potential loss of my entire investment.',\r\n    icon: DollarSign,\r\n  },\r\n  {\r\n    name: 'acknowledgesNoGuarantees',\r\n    title: 'No Guarantees',\r\n    description:\r\n      'I understand that there are no guarantees of returns or distributions, and past performance is not indicative of future results.',\r\n    icon: AlertTriangle,\r\n  },\r\n  {\r\n    name: 'acknowledgesLimitedInfo',\r\n    title: 'Limited Information',\r\n    description:\r\n      'I understand that I may receive limited information about the underlying investments and that the Fund is not subject to the same disclosure requirements as public companies.',\r\n    icon: FileText,\r\n  },\r\n  {\r\n    name: 'acknowledgesNoRegulation',\r\n    title: 'Limited Regulatory Protection',\r\n    description:\r\n      'I understand that alternative investment funds are generally not registered with the SEC and do not receive the same regulatory protections as registered investment companies.',\r\n    icon: Shield,\r\n  },\r\n  {\r\n    name: 'acknowledgesConflicts',\r\n    title: 'Conflicts of Interest',\r\n    description:\r\n      'I understand that the Fund Manager and its affiliates may have conflicts of interest in managing the Fund, and I have reviewed the disclosure of potential conflicts.',\r\n    icon: Users,\r\n  },\r\n  {\r\n    name: 'acknowledgesTaxImplications',\r\n    title: 'Tax Implications',\r\n    description:\r\n      'I understand that this investment may have complex tax implications and I should consult with my own tax advisor regarding my specific situation.',\r\n    icon: Receipt,\r\n  },\r\n  {\r\n    name: 'acknowledgesFees',\r\n    title: 'Fees and Expenses',\r\n    description:\r\n      'I understand and accept the fee structure including management fees, performance fees, and other expenses that will reduce my returns.',\r\n    icon: Scale,\r\n  },\r\n  {\r\n    name: 'hasReadOfferingDocs',\r\n    title: 'Offering Documents Review',\r\n    description:\r\n      'I confirm that I have received, read, and understand the Private Placement Memorandum (PPM), Limited Partnership Agreement, and other offering documents.',\r\n    icon: BookOpen,\r\n  },\r\n  {\r\n    name: 'hasSoughtIndependentAdvice',\r\n    title: 'Independent Advice',\r\n    description:\r\n      'I confirm that I have had the opportunity to seek independent legal, tax, and financial advice regarding this investment.',\r\n    icon: Scale,\r\n  },\r\n] as const\r\n\r\nexport function Step9WaiverRisk() {\r\n  const { getStepData, updateStepData } = useWizard()\r\n  const existingData = getStepData('step9')\r\n\r\n  const form = useForm<Step9Data>({\r\n    resolver: zodResolver(step9Schema),\r\n    defaultValues: existingData || (getStepDefaults(9) as Step9Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n\r\n  // Calculate progress\r\n  const totalItems = riskItems.length\r\n  const checkedItems = riskItems.filter(\r\n    (item) => watchedValues[item.name as keyof Step9Data] === true\r\n  ).length\r\n  const progress = (checkedItems / totalItems) * 100\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step9', values as Step9Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <AlertTriangle className=\"h-6 w-6 text-amber-500\" />\r\n          Risk Acknowledgments\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Please review and acknowledge each risk factor\r\n        </p>\r\n      </div>\r\n\r\n      {/* Progress indicator */}\r\n      <div className=\"bg-muted p-4 rounded-lg space-y-2 border border-border\">\r\n        <div className=\"flex justify-between text-sm\">\r\n          <span className=\"text-muted-foreground\">Acknowledgment Progress</span>\r\n          <span className=\"font-medium\">\r\n            {checkedItems} of {totalItems} completed\r\n          </span>\r\n        </div>\r\n        <Progress value={progress} className=\"h-2\" />\r\n      </div>\r\n\r\n      <Alert className=\"bg-amber-500/10 border-amber-500/30\">\r\n        <AlertTriangle className=\"h-4 w-4\" />\r\n        <AlertTitle>Important</AlertTitle>\r\n        <AlertDescription>\r\n          Please carefully read and acknowledge each item below. These acknowledgments confirm your\r\n          understanding of the risks associated with this investment.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <Form {...form}>\r\n        <div className=\"space-y-3\">\r\n          {riskItems.map((item, index) => {\r\n            const Icon = item.icon\r\n            return (\r\n              <FormField\r\n                key={item.name}\r\n                control={form.control}\r\n                name={item.name as keyof Step9Data}\r\n                render={({ field }) => (\r\n                  <FormItem\r\n                    className={cn(\r\n                      'p-4 rounded-lg border-2 transition-all bg-card',\r\n                      field.value\r\n                        ? 'border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950'\r\n                        : 'border-border hover:border-muted-foreground/50'\r\n                    )}\r\n                  >\r\n                    <div className=\"flex items-start gap-4\">\r\n                      <FormControl>\r\n                        <Checkbox\r\n                          checked={field.value as boolean}\r\n                          onCheckedChange={field.onChange}\r\n                          className=\"mt-1\"\r\n                        />\r\n                      </FormControl>\r\n                      <div className=\"flex-1\">\r\n                        <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                          <Icon\r\n                            className={cn(\r\n                              'h-4 w-4',\r\n                              field.value ? 'text-emerald-500' : 'text-muted-foreground'\r\n                            )}\r\n                          />\r\n                          <span className=\"text-xs text-muted-foreground mr-2\">\r\n                            {index + 1}.\r\n                          </span>\r\n                          {item.title}\r\n                          {field.value && (\r\n                            <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto flex-shrink-0\" />\r\n                          )}\r\n                        </FormLabel>\r\n                        <p className=\"text-sm text-muted-foreground mt-2 leading-relaxed\">\r\n                          {item.description}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            )\r\n          })}\r\n        </div>\r\n      </Form>\r\n\r\n      {checkedItems === totalItems && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertDescription>\r\n            All risk acknowledgments completed. You may proceed to the final step to review and sign.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5688, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/steps/Step10ReviewSign.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { cn } from '@/lib/utils'\r\nimport { useWizard } from '../WizardContext'\r\nimport { step10Schema, Step10Data, getStepDefaults } from '../../schemas/kyc-questionnaire-schema'\r\nimport { PenTool, CheckCircle2, User, Briefcase, Shield, FileText, TrendingUp, AlertTriangle, Calendar } from 'lucide-react'\r\n\r\nconst certificationItems = [\r\n  {\r\n    name: 'certifiesAccuracy',\r\n    title: 'Accuracy Certification',\r\n    description:\r\n      'I certify that all information provided in this questionnaire is true, complete, and accurate to the best of my knowledge.',\r\n  },\r\n  {\r\n    name: 'certifiesNoOmissions',\r\n    title: 'No Material Omissions',\r\n    description:\r\n      'I certify that I have not omitted any material information that could affect the evaluation of my suitability for this investment.',\r\n  },\r\n  {\r\n    name: 'agreesToUpdates',\r\n    title: 'Update Obligation',\r\n    description:\r\n      'I agree to promptly notify VERSO Holdings of any material changes to the information provided herein.',\r\n  },\r\n  {\r\n    name: 'consentToProcessing',\r\n    title: 'Data Processing Consent',\r\n    description:\r\n      'I consent to the collection, processing, and storage of my personal information for compliance and regulatory purposes.',\r\n  },\r\n] as const\r\n\r\nfunction SummarySection({\r\n  icon: Icon,\r\n  title,\r\n  items,\r\n}: {\r\n  icon: React.ComponentType<{ className?: string }>\r\n  title: string\r\n  items: { label: string; value: string | undefined }[]\r\n}) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <h4 className=\"font-medium flex items-center gap-2 text-sm text-muted-foreground\">\r\n        <Icon className=\"h-4 w-4\" />\r\n        {title}\r\n      </h4>\r\n      <div className=\"grid gap-1 pl-6\">\r\n        {items\r\n          .filter((item) => item.value)\r\n          .map((item, idx) => (\r\n            <div key={idx} className=\"text-sm\">\r\n              <span className=\"text-muted-foreground\">{item.label}:</span>{' '}\r\n              <span className=\"font-medium\">{item.value}</span>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Step10ReviewSign() {\r\n  const { getStepData, updateStepData, formData } = useWizard()\r\n  const existingData = getStepData('step10')\r\n\r\n  const form = useForm<Step10Data>({\r\n    resolver: zodResolver(step10Schema),\r\n    defaultValues: existingData || (getStepDefaults(10) as Step10Data),\r\n  })\r\n\r\n  const watchedValues = form.watch()\r\n  const allCertified = certificationItems.every(\r\n    (item) => watchedValues[item.name as keyof Step10Data] === true\r\n  )\r\n\r\n  useEffect(() => {\r\n    const subscription = form.watch((values) => {\r\n      updateStepData('step10', values as Step10Data)\r\n    })\r\n    return () => subscription.unsubscribe()\r\n  }, [form, updateStepData])\r\n\r\n  // Extract summary data\r\n  const step1 = formData.step1\r\n  const step2 = formData.step2\r\n  const step4 = formData.step4\r\n  const step8 = formData.step8\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"text-center mb-8\">\r\n        <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n          <PenTool className=\"h-6 w-6 text-emerald-500\" />\r\n          Review & Sign\r\n        </h2>\r\n        <p className=\"text-muted-foreground mt-1\">\r\n          Final review and certification\r\n        </p>\r\n      </div>\r\n\r\n      {/* Summary Section */}\r\n      <div className=\"bg-muted p-6 rounded-lg space-y-6 border border-border\">\r\n        <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n          <FileText className=\"h-5 w-5\" />\r\n          Application Summary\r\n        </h3>\r\n\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <SummarySection\r\n            icon={User}\r\n            title=\"Personal Information\"\r\n            items={[\r\n              { label: 'Name', value: step1?.fullName },\r\n              { label: 'Email', value: step1?.email },\r\n              { label: 'Nationality', value: step1?.nationality },\r\n              { label: 'Country', value: step1?.countryOfResidence },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={Briefcase}\r\n            title=\"Investment Details\"\r\n            items={[\r\n              {\r\n                label: 'Type',\r\n                value:\r\n                  step2?.investmentType === 'other'\r\n                    ? step2?.investmentTypeOther\r\n                    : step2?.investmentType,\r\n              },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={Shield}\r\n            title=\"Compliance Status\"\r\n            items={[\r\n              { label: 'PEP Status', value: step4?.isPEP === 'yes' ? 'Yes' : 'No' },\r\n              { label: 'US Person', value: step4?.isUSPerson === 'yes' ? 'Yes' : 'No' },\r\n            ]}\r\n          />\r\n\r\n          <SummarySection\r\n            icon={TrendingUp}\r\n            title=\"Investment Profile\"\r\n            items={[\r\n              { label: 'Risk Tolerance', value: step8?.riskTolerance },\r\n              { label: 'Time Horizon', value: step8?.investmentHorizon },\r\n              { label: 'Objective', value: step8?.investmentObjective },\r\n            ]}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <Separator />\r\n\r\n      {/* Certifications */}\r\n      <Form {...form}>\r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <h3 className=\"font-semibold text-lg mb-4\">Certifications</h3>\r\n            <div className=\"space-y-3\">\r\n              {certificationItems.map((item) => (\r\n                <FormField\r\n                  key={item.name}\r\n                  control={form.control}\r\n                  name={item.name as keyof Step10Data}\r\n                  render={({ field }) => (\r\n                    <FormItem\r\n                      className={cn(\r\n                        'p-4 rounded-lg border-2 transition-all bg-card',\r\n                        field.value\r\n                          ? 'border-emerald-500/50 bg-emerald-50 dark:bg-emerald-950'\r\n                          : 'border-border hover:border-muted-foreground/50'\r\n                      )}\r\n                    >\r\n                      <div className=\"flex items-start gap-4\">\r\n                        <FormControl>\r\n                          <Checkbox\r\n                            checked={field.value as boolean}\r\n                            onCheckedChange={field.onChange}\r\n                            className=\"mt-1\"\r\n                          />\r\n                        </FormControl>\r\n                        <div className=\"flex-1\">\r\n                          <FormLabel className=\"flex items-center gap-2 text-base font-medium cursor-pointer\">\r\n                            {item.title}\r\n                            {field.value && (\r\n                              <CheckCircle2 className=\"h-4 w-4 text-emerald-500 ml-auto\" />\r\n                            )}\r\n                          </FormLabel>\r\n                          <p className=\"text-sm text-muted-foreground mt-1\">\r\n                            {item.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Signature Section */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n              <PenTool className=\"h-5 w-5 text-emerald-500\" />\r\n              Electronic Signature\r\n            </h3>\r\n\r\n            <Alert className=\"bg-blue-500/10 border-blue-500/30\">\r\n              <FileText className=\"h-4 w-4\" />\r\n              <AlertTitle>Electronic Signature Notice</AlertTitle>\r\n              <AlertDescription>\r\n                By typing your name below, you are providing an electronic signature that is legally\r\n                equivalent to a handwritten signature under applicable law.\r\n              </AlertDescription>\r\n            </Alert>\r\n\r\n            <div className=\"grid gap-4 md:grid-cols-2\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"signatureName\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Type your full legal name</FormLabel>\r\n                    <FormDescription>\r\n                      This serves as your electronic signature\r\n                    </FormDescription>\r\n                    <FormControl>\r\n                      <Input\r\n                        placeholder=\"John Smith\"\r\n                        className=\"font-serif text-lg\"\r\n                        {...field}\r\n                      />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"signatureDate\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"flex items-center gap-2\">\r\n                      <Calendar className=\"h-4 w-4\" />\r\n                      Signature Date\r\n                    </FormLabel>\r\n                    <FormDescription>Today&apos;s date</FormDescription>\r\n                    <FormControl>\r\n                      <Input type=\"date\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            </div>\r\n\r\n            {/* Signature Preview */}\r\n            {watchedValues.signatureName && (\r\n              <div className=\"p-4 bg-muted rounded-lg border border-border\">\r\n                <p className=\"text-xs text-muted-foreground mb-2\">Signature Preview</p>\r\n                <p className=\"font-serif text-2xl italic text-emerald-600 dark:text-emerald-400\">\r\n                  {watchedValues.signatureName}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Form>\r\n\r\n      {allCertified && watchedValues.signatureName && (\r\n        <Alert className=\"bg-emerald-500/10 border-emerald-500/30\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\r\n          <AlertTitle>Ready to Submit</AlertTitle>\r\n          <AlertDescription>\r\n            All certifications completed and signature provided. Click &quot;Submit&quot; below to\r\n            finalize your application.\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6356, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/wizard/KYCQuestionnaireWizard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\r\nimport { Loader2, CheckCircle2, AlertTriangle, Sparkles } from 'lucide-react'\r\nimport { WizardProvider, useWizard } from './WizardContext'\r\nimport { WizardProgress } from './WizardProgress'\r\nimport { WizardNavigation } from './WizardNavigation'\r\nimport { Step1AboutYou } from './steps/Step1AboutYou'\r\nimport { Step2InvestmentType } from './steps/Step2InvestmentType'\r\nimport { Step3WellInformed } from './steps/Step3WellInformed'\r\nimport { Step4Compliance } from './steps/Step4Compliance'\r\nimport { Step5USPerson } from './steps/Step5USPerson'\r\nimport { Step6OfferDetails } from './steps/Step6OfferDetails'\r\nimport { Step7USCompliance } from './steps/Step7USCompliance'\r\nimport { Step8Suitability } from './steps/Step8Suitability'\r\nimport { Step9WaiverRisk } from './steps/Step9WaiverRisk'\r\nimport { Step10ReviewSign } from './steps/Step10ReviewSign'\r\nimport { STEP_CONFIG } from '../schemas/kyc-questionnaire-schema'\r\nimport type { KYCQuestionnaireData } from '../schemas/kyc-questionnaire-schema'\r\n\r\ninterface KYCQuestionnaireWizardProps {\r\n  initialData?: Partial<KYCQuestionnaireData>\r\n  submissionId?: string\r\n  onComplete?: () => void\r\n}\r\n\r\nfunction WizardContent({ onComplete }: { onComplete?: () => void }) {\r\n  const { currentStep, visibleSteps, formData, isLoading, submitQuestionnaire } = useWizard()\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [submitSuccess, setSubmitSuccess] = useState(false)\r\n  const [submitError, setSubmitError] = useState<string | null>(null)\r\n\r\n  // Map step number to component\r\n  const stepComponents: Record<number, React.ReactNode> = {\r\n    1: <Step1AboutYou />,\r\n    2: <Step2InvestmentType />,\r\n    3: <Step3WellInformed />,\r\n    4: <Step4Compliance />,\r\n    5: <Step5USPerson />,\r\n    6: <Step6OfferDetails />,\r\n    7: <Step7USCompliance />,\r\n    8: <Step8Suitability />,\r\n    9: <Step9WaiverRisk />,\r\n    10: <Step10ReviewSign />,\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    setIsSubmitting(true)\r\n    setSubmitError(null)\r\n\r\n    try {\r\n      const success = await submitQuestionnaire()\r\n      if (!success) {\r\n        // submitQuestionnaire already shows toast with specific error\r\n        // Just don't show success screen - keep user on the form\r\n        return\r\n      }\r\n      setSubmitSuccess(true)\r\n      onComplete?.()\r\n    } catch (error) {\r\n      setSubmitError(error instanceof Error ? error.message : 'Failed to submit questionnaire')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center space-y-4\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-emerald-500\" />\r\n          <p className=\"text-muted-foreground\">Loading your questionnaire...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (submitSuccess) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-center space-y-6 max-w-md mx-auto\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"h-24 w-24 rounded-full bg-emerald-500/20 animate-pulse\" />\r\n            </div>\r\n            <CheckCircle2 className=\"h-16 w-16 mx-auto text-emerald-500 relative z-10\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <h2 className=\"text-2xl font-bold flex items-center justify-center gap-2\">\r\n              <Sparkles className=\"h-5 w-5 text-amber-500\" />\r\n              Questionnaire Submitted!\r\n            </h2>\r\n            <p className=\"text-muted-foreground\">\r\n              Thank you for completing your KYC questionnaire. Our compliance team will review your\r\n              submission and contact you if any additional information is needed.\r\n            </p>\r\n          </div>\r\n          <Alert className=\"bg-blue-500/10 border-blue-500/30 text-left\">\r\n            <AlertTitle>What happens next?</AlertTitle>\r\n            <AlertDescription>\r\n              <ul className=\"list-disc list-inside space-y-1 mt-2\">\r\n                <li>Our team will review your submission within 2-3 business days</li>\r\n                <li>You may be asked to provide supporting documentation</li>\r\n                <li>You&apos;ll receive an email notification when your status is updated</li>\r\n              </ul>\r\n            </AlertDescription>\r\n          </Alert>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const currentStepConfig = STEP_CONFIG[currentStep - 1]\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Progress */}\r\n      <WizardProgress />\r\n\r\n      {/* Current Step Header */}\r\n      <div className=\"text-center py-2\">\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Step {visibleSteps.indexOf(currentStep) + 1} of {visibleSteps.length}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Error Alert */}\r\n      {submitError && (\r\n        <Alert className=\"bg-red-500/10 border-red-500/30\">\r\n          <AlertTriangle className=\"h-4 w-4\" />\r\n          <AlertTitle>Submission Error</AlertTitle>\r\n          <AlertDescription>{submitError}</AlertDescription>\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Step Content */}\r\n      <Card className=\"border-border bg-card shadow-sm\">\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"min-h-[400px]\">{stepComponents[currentStep]}</div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Navigation */}\r\n      <WizardNavigation onSubmit={handleSubmit} isSubmitting={isSubmitting} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function KYCQuestionnaireWizard({\r\n  initialData,\r\n  submissionId,\r\n  onComplete,\r\n}: KYCQuestionnaireWizardProps) {\r\n  return (\r\n    <WizardProvider\r\n      initialData={initialData}\r\n      submissionId={submissionId}\r\n      onComplete={onComplete}\r\n    >\r\n      <WizardContent onComplete={onComplete} />\r\n    </WizardProvider>\r\n  )\r\n}\r\n\r\n// Compact version for embedding in profile page\r\nexport function KYCQuestionnaireCompact(props: KYCQuestionnaireWizardProps) {\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <KYCQuestionnaireWizard {...props} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6781, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/KYCQuestionnaire.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Loader2 } from 'lucide-react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { KYCQuestionnaireWizard } from './wizard/KYCQuestionnaireWizard'\r\nimport type { KYCQuestionnaireData } from './schemas/kyc-questionnaire-schema'\r\n\r\ninterface KYCQuestionnaireProps {\r\n  onComplete?: () => void\r\n}\r\n\r\nexport function KYCQuestionnaire({ onComplete }: KYCQuestionnaireProps) {\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [existingData, setExistingData] = useState<Partial<KYCQuestionnaireData> | null>(null)\r\n  const [submissionId, setSubmissionId] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    const loadExistingData = async () => {\r\n      setIsLoading(true)\r\n      try {\r\n        const profileResponse = await fetch('/api/investors/me/kyc-submissions')\r\n        if (profileResponse.ok) {\r\n          const profileData = await profileResponse.json()\r\n\r\n          // Find the latest questionnaire submission\r\n          const questionnaire = profileData.submissions?.find(\r\n            (s: any) => s.document_type === 'questionnaire' && s.metadata?.wizardVersion === '2.0'\r\n          )\r\n\r\n          if (questionnaire && questionnaire.metadata) {\r\n            setExistingData(questionnaire.metadata as Partial<KYCQuestionnaireData>)\r\n            setSubmissionId(questionnaire.id)\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load KYC data', error)\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n\r\n    loadExistingData()\r\n  }, [])\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"flex justify-center items-center min-h-[400px]\">\r\n          <div className=\"text-center space-y-4\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-muted-foreground\" />\r\n            <p className=\"text-muted-foreground\">Loading questionnaire...</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card className=\"border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 shadow-sm\">\r\n      <CardHeader className=\"border-b border-gray-100 dark:border-zinc-700 bg-gray-50/50 dark:bg-zinc-800/50\">\r\n        <CardTitle className=\"text-gray-900 dark:text-white\">Compliance Questionnaire</CardTitle>\r\n        <CardDescription className=\"text-gray-600 dark:text-gray-400\">\r\n          Complete the following compliance questionnaire to proceed with your KYC verification.\r\n          Your progress is saved automatically.\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"pt-6\">\r\n        <KYCQuestionnaireWizard\r\n          initialData={existingData || undefined}\r\n          submissionId={submissionId || undefined}\r\n          onComplete={onComplete}\r\n        />\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAYO,SAAS,iBAAiB,EAAE,UAAU,EAAyB;IACpE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wOAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wOAAQ,EAAuC;IACvF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wOAAQ,EAAgB;IAEhE,IAAA,yOAAS,EAAC;QACR,MAAM,mBAAmB;YACvB,aAAa;YACb,IAAI;gBACF,MAAM,kBAAkB,MAAM,MAAM;gBACpC,IAAI,gBAAgB,EAAE,EAAE;oBACtB,MAAM,cAAc,MAAM,gBAAgB,IAAI;oBAE9C,2CAA2C;oBAC3C,MAAM,gBAAgB,YAAY,WAAW,EAAE,KAC7C,CAAC,IAAW,EAAE,aAAa,KAAK,mBAAmB,EAAE,QAAQ,EAAE,kBAAkB;oBAGnF,IAAI,iBAAiB,cAAc,QAAQ,EAAE;wBAC3C,gBAAgB,cAAc,QAAQ;wBACtC,gBAAgB,cAAc,EAAE;oBAClC;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,2BAA2B;YAC3C,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG,EAAE;IAEL,IAAI,WAAW;QACb,qBACE,qQAAC,+JAAI;sBACH,cAAA,qQAAC,sKAAW;gBAAC,WAAU;0BACrB,cAAA,qQAAC;oBAAI,WAAU;;sCACb,qQAAC,mPAAO;4BAAC,WAAU;;;;;;sCACnB,qQAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;;;;;;;;;;;IAK/C;IAEA,qBACE,qQAAC,+JAAI;QAAC,WAAU;;0BACd,qQAAC,qKAAU;gBAAC,WAAU;;kCACpB,qQAAC,oKAAS;wBAAC,WAAU;kCAAgC;;;;;;kCACrD,qQAAC,0KAAe;wBAAC,WAAU;kCAAmC;;;;;;;;;;;;0BAKhE,qQAAC,sKAAW;gBAAC,WAAU;0BACrB,cAAA,qQAAC,8MAAsB;oBACrB,aAAa,gBAAgB;oBAC7B,cAAc,gBAAgB;oBAC9B,YAAY;;;;;;;;;;;;;;;;;AAKtB"}},
    {"offset": {"line": 6916, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/kyc/country-select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport { Check, ChevronsUpDown } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { Button } from '@/components/ui/button'\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/ui/command'\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover'\n\n// ISO 3166-1 Alpha-2 country codes with names\nexport const COUNTRIES = [\n  { code: 'AF', name: 'Afghanistan' },\n  { code: 'AL', name: 'Albania' },\n  { code: 'DZ', name: 'Algeria' },\n  { code: 'AD', name: 'Andorra' },\n  { code: 'AO', name: 'Angola' },\n  { code: 'AG', name: 'Antigua and Barbuda' },\n  { code: 'AR', name: 'Argentina' },\n  { code: 'AM', name: 'Armenia' },\n  { code: 'AU', name: 'Australia' },\n  { code: 'AT', name: 'Austria' },\n  { code: 'AZ', name: 'Azerbaijan' },\n  { code: 'BS', name: 'Bahamas' },\n  { code: 'BH', name: 'Bahrain' },\n  { code: 'BD', name: 'Bangladesh' },\n  { code: 'BB', name: 'Barbados' },\n  { code: 'BY', name: 'Belarus' },\n  { code: 'BE', name: 'Belgium' },\n  { code: 'BZ', name: 'Belize' },\n  { code: 'BJ', name: 'Benin' },\n  { code: 'BT', name: 'Bhutan' },\n  { code: 'BO', name: 'Bolivia' },\n  { code: 'BA', name: 'Bosnia and Herzegovina' },\n  { code: 'BW', name: 'Botswana' },\n  { code: 'BR', name: 'Brazil' },\n  { code: 'BN', name: 'Brunei' },\n  { code: 'BG', name: 'Bulgaria' },\n  { code: 'BF', name: 'Burkina Faso' },\n  { code: 'BI', name: 'Burundi' },\n  { code: 'CV', name: 'Cabo Verde' },\n  { code: 'KH', name: 'Cambodia' },\n  { code: 'CM', name: 'Cameroon' },\n  { code: 'CA', name: 'Canada' },\n  { code: 'CF', name: 'Central African Republic' },\n  { code: 'TD', name: 'Chad' },\n  { code: 'CL', name: 'Chile' },\n  { code: 'CN', name: 'China' },\n  { code: 'CO', name: 'Colombia' },\n  { code: 'KM', name: 'Comoros' },\n  { code: 'CG', name: 'Congo' },\n  { code: 'CR', name: 'Costa Rica' },\n  { code: 'HR', name: 'Croatia' },\n  { code: 'CU', name: 'Cuba' },\n  { code: 'CY', name: 'Cyprus' },\n  { code: 'CZ', name: 'Czech Republic' },\n  { code: 'DK', name: 'Denmark' },\n  { code: 'DJ', name: 'Djibouti' },\n  { code: 'DM', name: 'Dominica' },\n  { code: 'DO', name: 'Dominican Republic' },\n  { code: 'EC', name: 'Ecuador' },\n  { code: 'EG', name: 'Egypt' },\n  { code: 'SV', name: 'El Salvador' },\n  { code: 'GQ', name: 'Equatorial Guinea' },\n  { code: 'ER', name: 'Eritrea' },\n  { code: 'EE', name: 'Estonia' },\n  { code: 'SZ', name: 'Eswatini' },\n  { code: 'ET', name: 'Ethiopia' },\n  { code: 'FJ', name: 'Fiji' },\n  { code: 'FI', name: 'Finland' },\n  { code: 'FR', name: 'France' },\n  { code: 'GA', name: 'Gabon' },\n  { code: 'GM', name: 'Gambia' },\n  { code: 'GE', name: 'Georgia' },\n  { code: 'DE', name: 'Germany' },\n  { code: 'GH', name: 'Ghana' },\n  { code: 'GR', name: 'Greece' },\n  { code: 'GD', name: 'Grenada' },\n  { code: 'GT', name: 'Guatemala' },\n  { code: 'GN', name: 'Guinea' },\n  { code: 'GW', name: 'Guinea-Bissau' },\n  { code: 'GY', name: 'Guyana' },\n  { code: 'HT', name: 'Haiti' },\n  { code: 'HN', name: 'Honduras' },\n  { code: 'HK', name: 'Hong Kong' },\n  { code: 'HU', name: 'Hungary' },\n  { code: 'IS', name: 'Iceland' },\n  { code: 'IN', name: 'India' },\n  { code: 'ID', name: 'Indonesia' },\n  { code: 'IR', name: 'Iran' },\n  { code: 'IQ', name: 'Iraq' },\n  { code: 'IE', name: 'Ireland' },\n  { code: 'IL', name: 'Israel' },\n  { code: 'IT', name: 'Italy' },\n  { code: 'JM', name: 'Jamaica' },\n  { code: 'JP', name: 'Japan' },\n  { code: 'JO', name: 'Jordan' },\n  { code: 'KZ', name: 'Kazakhstan' },\n  { code: 'KE', name: 'Kenya' },\n  { code: 'KI', name: 'Kiribati' },\n  { code: 'KP', name: 'North Korea' },\n  { code: 'KR', name: 'South Korea' },\n  { code: 'KW', name: 'Kuwait' },\n  { code: 'KG', name: 'Kyrgyzstan' },\n  { code: 'LA', name: 'Laos' },\n  { code: 'LV', name: 'Latvia' },\n  { code: 'LB', name: 'Lebanon' },\n  { code: 'LS', name: 'Lesotho' },\n  { code: 'LR', name: 'Liberia' },\n  { code: 'LY', name: 'Libya' },\n  { code: 'LI', name: 'Liechtenstein' },\n  { code: 'LT', name: 'Lithuania' },\n  { code: 'LU', name: 'Luxembourg' },\n  { code: 'MO', name: 'Macau' },\n  { code: 'MG', name: 'Madagascar' },\n  { code: 'MW', name: 'Malawi' },\n  { code: 'MY', name: 'Malaysia' },\n  { code: 'MV', name: 'Maldives' },\n  { code: 'ML', name: 'Mali' },\n  { code: 'MT', name: 'Malta' },\n  { code: 'MH', name: 'Marshall Islands' },\n  { code: 'MR', name: 'Mauritania' },\n  { code: 'MU', name: 'Mauritius' },\n  { code: 'MX', name: 'Mexico' },\n  { code: 'FM', name: 'Micronesia' },\n  { code: 'MD', name: 'Moldova' },\n  { code: 'MC', name: 'Monaco' },\n  { code: 'MN', name: 'Mongolia' },\n  { code: 'ME', name: 'Montenegro' },\n  { code: 'MA', name: 'Morocco' },\n  { code: 'MZ', name: 'Mozambique' },\n  { code: 'MM', name: 'Myanmar' },\n  { code: 'NA', name: 'Namibia' },\n  { code: 'NR', name: 'Nauru' },\n  { code: 'NP', name: 'Nepal' },\n  { code: 'NL', name: 'Netherlands' },\n  { code: 'NZ', name: 'New Zealand' },\n  { code: 'NI', name: 'Nicaragua' },\n  { code: 'NE', name: 'Niger' },\n  { code: 'NG', name: 'Nigeria' },\n  { code: 'MK', name: 'North Macedonia' },\n  { code: 'NO', name: 'Norway' },\n  { code: 'OM', name: 'Oman' },\n  { code: 'PK', name: 'Pakistan' },\n  { code: 'PW', name: 'Palau' },\n  { code: 'PS', name: 'Palestine' },\n  { code: 'PA', name: 'Panama' },\n  { code: 'PG', name: 'Papua New Guinea' },\n  { code: 'PY', name: 'Paraguay' },\n  { code: 'PE', name: 'Peru' },\n  { code: 'PH', name: 'Philippines' },\n  { code: 'PL', name: 'Poland' },\n  { code: 'PT', name: 'Portugal' },\n  { code: 'QA', name: 'Qatar' },\n  { code: 'RO', name: 'Romania' },\n  { code: 'RU', name: 'Russia' },\n  { code: 'RW', name: 'Rwanda' },\n  { code: 'KN', name: 'Saint Kitts and Nevis' },\n  { code: 'LC', name: 'Saint Lucia' },\n  { code: 'VC', name: 'Saint Vincent and the Grenadines' },\n  { code: 'WS', name: 'Samoa' },\n  { code: 'SM', name: 'San Marino' },\n  { code: 'ST', name: 'Sao Tome and Principe' },\n  { code: 'SA', name: 'Saudi Arabia' },\n  { code: 'SN', name: 'Senegal' },\n  { code: 'RS', name: 'Serbia' },\n  { code: 'SC', name: 'Seychelles' },\n  { code: 'SL', name: 'Sierra Leone' },\n  { code: 'SG', name: 'Singapore' },\n  { code: 'SK', name: 'Slovakia' },\n  { code: 'SI', name: 'Slovenia' },\n  { code: 'SB', name: 'Solomon Islands' },\n  { code: 'SO', name: 'Somalia' },\n  { code: 'ZA', name: 'South Africa' },\n  { code: 'SS', name: 'South Sudan' },\n  { code: 'ES', name: 'Spain' },\n  { code: 'LK', name: 'Sri Lanka' },\n  { code: 'SD', name: 'Sudan' },\n  { code: 'SR', name: 'Suriname' },\n  { code: 'SE', name: 'Sweden' },\n  { code: 'CH', name: 'Switzerland' },\n  { code: 'SY', name: 'Syria' },\n  { code: 'TW', name: 'Taiwan' },\n  { code: 'TJ', name: 'Tajikistan' },\n  { code: 'TZ', name: 'Tanzania' },\n  { code: 'TH', name: 'Thailand' },\n  { code: 'TL', name: 'Timor-Leste' },\n  { code: 'TG', name: 'Togo' },\n  { code: 'TO', name: 'Tonga' },\n  { code: 'TT', name: 'Trinidad and Tobago' },\n  { code: 'TN', name: 'Tunisia' },\n  { code: 'TR', name: 'Turkey' },\n  { code: 'TM', name: 'Turkmenistan' },\n  { code: 'TV', name: 'Tuvalu' },\n  { code: 'UG', name: 'Uganda' },\n  { code: 'UA', name: 'Ukraine' },\n  { code: 'AE', name: 'United Arab Emirates' },\n  { code: 'GB', name: 'United Kingdom' },\n  { code: 'US', name: 'United States' },\n  { code: 'UY', name: 'Uruguay' },\n  { code: 'UZ', name: 'Uzbekistan' },\n  { code: 'VU', name: 'Vanuatu' },\n  { code: 'VA', name: 'Vatican City' },\n  { code: 'VE', name: 'Venezuela' },\n  { code: 'VN', name: 'Vietnam' },\n  { code: 'YE', name: 'Yemen' },\n  { code: 'ZM', name: 'Zambia' },\n  { code: 'ZW', name: 'Zimbabwe' },\n] as const\n\nexport type CountryCode = (typeof COUNTRIES)[number]['code']\n\nexport function getCountryName(code: string | null | undefined): string {\n  if (!code) return ''\n  const country = COUNTRIES.find((c) => c.code === code || c.name.toLowerCase() === code.toLowerCase())\n  return country?.name || code\n}\n\nexport function getCountryCode(nameOrCode: string | null | undefined): string {\n  if (!nameOrCode) return ''\n  const country = COUNTRIES.find(\n    (c) => c.code === nameOrCode || c.name.toLowerCase() === nameOrCode.toLowerCase()\n  )\n  return country?.code || nameOrCode\n}\n\ninterface CountrySelectProps {\n  value: string | null | undefined\n  onChange: (value: string) => void\n  placeholder?: string\n  disabled?: boolean\n  required?: boolean\n  className?: string\n}\n\nexport function CountrySelect({\n  value,\n  onChange,\n  placeholder = 'Select country...',\n  disabled = false,\n  required = false,\n  className,\n}: CountrySelectProps) {\n  const [open, setOpen] = React.useState(false)\n\n  const selectedCountry = COUNTRIES.find(\n    (c) => c.code === value || c.name.toLowerCase() === value?.toLowerCase()\n  )\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          aria-required={required}\n          disabled={disabled}\n          className={cn('w-full justify-between font-normal', className)}\n        >\n          {selectedCountry ? selectedCountry.name : placeholder}\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-[300px] p-0\" align=\"start\">\n        <Command>\n          <CommandInput placeholder=\"Search country...\" />\n          <CommandList>\n            <CommandEmpty>No country found.</CommandEmpty>\n            <CommandGroup className=\"max-h-[300px] overflow-auto\">\n              {COUNTRIES.map((country) => (\n                <CommandItem\n                  key={country.code}\n                  value={country.name}\n                  onSelect={() => {\n                    onChange(country.code)\n                    setOpen(false)\n                  }}\n                >\n                  <Check\n                    className={cn(\n                      'mr-2 h-4 w-4',\n                      selectedCountry?.code === country.code ? 'opacity-100' : 'opacity-0'\n                    )}\n                  />\n                  {country.name}\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  )\n}\n\n// Nationality is often the same as country, but this provides a clearer label\nexport function NationalitySelect(props: CountrySelectProps) {\n  return <CountrySelect {...props} placeholder={props.placeholder || 'Select nationality...'} />\n}\n"],"names":[],"mappings":"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"}}]
}