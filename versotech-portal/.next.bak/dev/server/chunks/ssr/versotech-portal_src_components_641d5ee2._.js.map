{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/dashboard/staff-action-center.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport Link from 'next/link'\r\nimport {\r\n  ChevronRight,\r\n  Users,\r\n  FileText,\r\n  TrendingUp,\r\n  Shield,\r\n  Workflow,\r\n  ClipboardList,\r\n  CheckCircle,\r\n  Building2,\r\n  Activity,\r\n  PlayCircle,\r\n  Zap,\r\n  BarChart3,\r\n  Receipt,\r\n  UserCheck,\r\n  FileSearch,\r\n  GitPullRequest,\r\n  DollarSign,\r\n  FolderOpen,\r\n  Calculator,\r\n  Building,\r\n  MessageCircle,\r\n  User,\r\n  Settings,\r\n  FileSignature,\r\n  PlusCircle,\r\n  RefreshCw,\r\n  ArrowUpRight,\r\n  Briefcase,\r\n  Bot,\r\n  Send,\r\n  Upload\r\n} from 'lucide-react'\r\nimport { useState } from 'react'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface ActionItem {\r\n  label: string\r\n  href?: string\r\n  onClick?: () => void\r\n  icon: any\r\n  description?: string\r\n  badge?: string | number\r\n  variant?: 'default' | 'destructive' | 'warning' | 'success' | 'info'\r\n  disabled?: boolean\r\n}\r\n\r\ninterface ActionSection {\r\n  title: string\r\n  icon: any\r\n  items: ActionItem[]\r\n  collapsed?: boolean\r\n}\r\n\r\nconst ActionItem = React.memo(({ item }: { item: ActionItem }) => {\r\n    const ItemIcon = item.icon\r\n    const content = (\r\n      <div className={cn(\r\n        \"flex items-center gap-3 px-3 py-2.5 rounded-md group/item\",\r\n        \"text-zinc-400 hover:text-zinc-100 hover:bg-white/5\",\r\n        \"transition-all duration-200 cursor-pointer\",\r\n        item.variant === 'success' && \"hover:text-emerald-400 hover:bg-emerald-950/30\",\r\n        item.variant === 'warning' && \"hover:text-amber-400 hover:bg-amber-950/30\",\r\n        item.variant === 'info' && \"hover:text-sky-400 hover:bg-sky-950/30\"\r\n      )}>\r\n        <ItemIcon className=\"h-4 w-4 opacity-70 group-hover/item:opacity-100\" />\r\n        <span className=\"text-sm\">{item.label}</span>\r\n        {item.badge && (\r\n           <span className=\"ml-auto text-[10px] px-1.5 py-0.5 rounded-full bg-white/10 text-zinc-300\">\r\n              {item.badge}\r\n           </span>\r\n        )}\r\n      </div>\r\n    )\r\n\r\n    if (item.href) {\r\n      return <Link href={item.href}>{content}</Link>\r\n    }\r\n    return <div onClick={item.onClick}>{content}</div>\r\n})\r\nActionItem.displayName = 'ActionItem'\r\n\r\nconst ActionSection = React.memo(({ section }: { section: ActionSection }) => {\r\n    const Icon = section.icon\r\n    return (\r\n      <div className=\"bg-zinc-950 p-6 space-y-4 group/section hover:bg-zinc-900/20 transition-colors\">\r\n        <div className=\"flex items-center gap-2 mb-4\">\r\n           <Icon className=\"h-4 w-4 text-zinc-500 group-hover/section:text-zinc-300 transition-colors\" />\r\n           <h3 className=\"text-sm font-medium text-zinc-300 uppercase tracking-wider\">{section.title}</h3>\r\n        </div>\r\n        <div className=\"space-y-1\">\r\n          {section.items.map((item) => (\r\n            <ActionItem key={item.label} item={item} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )\r\n})\r\nActionSection.displayName = 'ActionSection'\r\n\r\nexport const StaffActionCenter = React.memo(function StaffActionCenter({\r\n  className,\r\n  onWorkflowTrigger\r\n}: {\r\n  className?: string\r\n  onWorkflowTrigger?: (workflowKey: string) => void\r\n}) {\r\n  // Removed local state for expanded sections as we are using a grid layout now\r\n  \r\n  const actionSections: ActionSection[] = [\r\n    {\r\n      title: 'Quick Actions',\r\n      icon: Zap,\r\n      items: [\r\n        {\r\n          label: 'New Deal',\r\n          href: '/versotech_main/deals/new',\r\n          icon: PlusCircle,\r\n          description: 'Create opportunity',\r\n          variant: 'success'\r\n        },\r\n        {\r\n          label: 'KYC Review',\r\n          href: '/versotech_main/kyc-review',\r\n          icon: UserCheck,\r\n          description: 'Pending reviews',\r\n          variant: 'warning'\r\n        },\r\n        {\r\n          label: 'Messages',\r\n          href: '/versotech_main/messages',\r\n          icon: MessageCircle,\r\n          description: 'Investor comms',\r\n          variant: 'info'\r\n        },\r\n        {\r\n          label: 'Reconciliation',\r\n          href: '/versotech_main/reconciliation',\r\n          icon: Calculator,\r\n          description: 'Match transactions',\r\n          variant: 'default'\r\n        },\r\n        {\r\n          label: 'Documents',\r\n          href: '/versotech_main/documents',\r\n          icon: Upload,\r\n          description: 'Document library',\r\n          variant: 'default'\r\n        },\r\n        {\r\n          label: 'Approvals',\r\n          href: '/versotech_main/approvals',\r\n          icon: CheckCircle,\r\n          description: 'Pending approvals',\r\n          variant: 'warning'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Operations',\r\n      icon: Activity,\r\n      items: [\r\n        {\r\n          label: 'Deal Pipeline',\r\n          href: '/versotech_main/deals',\r\n          icon: Building2,\r\n          description: 'Active deals'\r\n        },\r\n        {\r\n          label: 'Investors',\r\n          href: '/versotech_main/investors',\r\n          icon: Users,\r\n          description: 'LP management'\r\n        },\r\n        {\r\n          label: 'Subscriptions',\r\n          href: '/versotech_main/subscriptions',\r\n          icon: FileSignature,\r\n          description: 'Commitments'\r\n        },\r\n        {\r\n          label: 'Entities',\r\n          href: '/versotech_main/entities',\r\n          icon: Building,\r\n          description: 'Entity registry'\r\n        },\r\n        {\r\n          label: 'Introducers',\r\n          href: '/versotech_main/introducers',\r\n          icon: Briefcase,\r\n          description: 'Source tracking'\r\n        },\r\n        {\r\n          label: 'Requests',\r\n          href: '/versotech_main/requests',\r\n          icon: ClipboardList,\r\n          description: 'Service tickets'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Compliance',\r\n      icon: Shield,\r\n      items: [\r\n        {\r\n          label: 'Approvals',\r\n          href: '/versotech_main/approvals',\r\n          icon: CheckCircle,\r\n          description: 'Pending approvals'\r\n        },\r\n        {\r\n          label: 'Audit Trail',\r\n          href: '/versotech_main/audit',\r\n          icon: FileSearch,\r\n          description: 'Activity logs'\r\n        },\r\n        {\r\n          label: 'KYC Processing',\r\n          href: '/versotech_main/kyc-review',\r\n          icon: UserCheck,\r\n          description: 'Verification queue'\r\n        },\r\n        {\r\n          label: 'Documents',\r\n          href: '/versotech_main/documents',\r\n          icon: FolderOpen,\r\n          description: 'Document library'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Financial',\r\n      icon: DollarSign,\r\n      items: [\r\n        {\r\n          label: 'Fee Management',\r\n          href: '/versotech_main/fees',\r\n          icon: Receipt,\r\n          description: 'Calculate fees'\r\n        },\r\n        {\r\n          label: 'Reconciliation',\r\n          href: '/versotech_main/reconciliation',\r\n          icon: GitPullRequest,\r\n          description: 'Bank matching'\r\n        },\r\n        {\r\n          label: 'Vehicle Summary',\r\n          href: '/versotech_main/subscriptions/vehicle-summary',\r\n          icon: BarChart3,\r\n          description: 'Fund overview'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Workflow Automation',\r\n      icon: Workflow,\r\n      items: [\r\n        {\r\n          label: 'Trigger Workflows',\r\n          href: '/versotech_main/processes',\r\n          icon: PlayCircle,\r\n          description: 'n8n automation'\r\n        },\r\n        {\r\n          label: 'Position Statement',\r\n          onClick: () => onWorkflowTrigger?.('generate-position-statement'),\r\n          icon: BarChart3,\r\n          description: 'Auto-generate'\r\n        },\r\n        {\r\n          label: 'NDA Processing',\r\n          onClick: () => onWorkflowTrigger?.('process-nda'),\r\n          icon: FileText,\r\n          description: 'DocuSign flow'\r\n        },\r\n        {\r\n          label: 'Capital Call',\r\n          onClick: () => onWorkflowTrigger?.('capital-call-processing'),\r\n          icon: Send,\r\n          description: 'Notice & wires'\r\n        },\r\n        {\r\n          label: 'KYC/AML Check',\r\n          onClick: () => onWorkflowTrigger?.('kyc-aml-processing'),\r\n          icon: Shield,\r\n          description: 'Due diligence'\r\n        },\r\n        {\r\n          label: 'Reporting Agent',\r\n          onClick: () => onWorkflowTrigger?.('reporting-agent'),\r\n          icon: Bot,\r\n          description: 'Custom reports'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Analytics',\r\n      icon: BarChart3,\r\n      items: [\r\n        {\r\n          label: 'Request Analytics',\r\n          href: '/versotech_main/requests/analytics',\r\n          icon: TrendingUp,\r\n          description: 'SLA metrics'\r\n        },\r\n        {\r\n          label: 'Audit Trail',\r\n          href: '/versotech_main/audit',\r\n          icon: FileSearch,\r\n          description: 'Activity logs'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Administration',\r\n      icon: Settings,\r\n      items: [\r\n        {\r\n          label: 'Admin Panel',\r\n          href: '/versotech_main/admin',\r\n          icon: Settings,\r\n          description: 'System config'\r\n        },\r\n        {\r\n          label: 'My Profile',\r\n          href: '/versotech_main/profile',\r\n          icon: User,\r\n          description: 'Account settings'\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <Card className={cn(\r\n      'bg-zinc-900/30 backdrop-blur-md border-white/5 shadow-2xl',\r\n      'transition-all duration-300',\r\n      className\r\n    )}>\r\n      <CardHeader className=\"pb-6 border-b border-white/5\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-zinc-800 to-zinc-900 border border-white/10 shadow-inner\">\r\n              <Zap className=\"h-5 w-5 text-amber-400/90\" />\r\n            </div>\r\n            <div>\r\n              <CardTitle className=\"text-zinc-100 text-xl font-medium tracking-tight\">\r\n                Operations Center\r\n              </CardTitle>\r\n              <CardDescription className=\"text-zinc-500 text-xs font-medium uppercase tracking-wider mt-1\">\r\n                Control Panel & Quick Actions\r\n              </CardDescription>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"flex items-center gap-1.5 px-2 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20\">\r\n              <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse\" />\r\n              <span className=\"text-[10px] font-medium text-emerald-400 uppercase tracking-wide\">System Online</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"p-0\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-px bg-white/5\">\r\n          {actionSections.map((section) => (\r\n            <ActionSection key={section.title} section={section} />\r\n          ))}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n})\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmCA;AA1CA;;;;;;;AA8DA,MAAM,2BAAa,uOAAK,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,EAAwB;IACzD,MAAM,WAAW,KAAK,IAAI;IAC1B,MAAM,wBACJ,qQAAC;QAAI,WAAW,IAAA,gJAAE,EAChB,6DACA,sDACA,8CACA,KAAK,OAAO,KAAK,aAAa,kDAC9B,KAAK,OAAO,KAAK,aAAa,8CAC9B,KAAK,OAAO,KAAK,UAAU;;0BAE3B,qQAAC;gBAAS,WAAU;;;;;;0BACpB,qQAAC;gBAAK,WAAU;0BAAW,KAAK,KAAK;;;;;;YACpC,KAAK,KAAK,kBACR,qQAAC;gBAAK,WAAU;0BACZ,KAAK,KAAK;;;;;;;;;;;;IAMrB,IAAI,KAAK,IAAI,EAAE;QACb,qBAAO,qQAAC,8LAAI;YAAC,MAAM,KAAK,IAAI;sBAAG;;;;;;IACjC;IACA,qBAAO,qQAAC;QAAI,SAAS,KAAK,OAAO;kBAAG;;;;;;AACxC;AACA,WAAW,WAAW,GAAG;AAEzB,MAAM,8BAAgB,uOAAK,CAAC,IAAI,CAAC,CAAC,EAAE,OAAO,EAA8B;IACrE,MAAM,OAAO,QAAQ,IAAI;IACzB,qBACE,qQAAC;QAAI,WAAU;;0BACb,qQAAC;gBAAI,WAAU;;kCACZ,qQAAC;wBAAK,WAAU;;;;;;kCAChB,qQAAC;wBAAG,WAAU;kCAA8D,QAAQ,KAAK;;;;;;;;;;;;0BAE5F,qQAAC;gBAAI,WAAU;0BACZ,QAAQ,KAAK,CAAC,GAAG,CAAC,CAAC,qBAClB,qQAAC;wBAA4B,MAAM;uBAAlB,KAAK,KAAK;;;;;;;;;;;;;;;;AAKvC;AACA,cAAc,WAAW,GAAG;AAErB,MAAM,kCAAoB,uOAAK,CAAC,IAAI,CAAC,SAAS,kBAAkB,EACrE,SAAS,EACT,iBAAiB,EAIlB;IACC,8EAA8E;IAE9E,MAAM,iBAAkC;QACtC;YACE,OAAO;YACP,MAAM,8NAAG;YACT,OAAO;gBACL;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,uPAAU;oBAChB,aAAa;oBACb,SAAS;gBACX;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,oPAAS;oBACf,aAAa;oBACb,SAAS;gBACX;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,gQAAa;oBACnB,aAAa;oBACb,SAAS;gBACX;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,mPAAU;oBAChB,aAAa;oBACb,SAAS;gBACX;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,uOAAM;oBACZ,aAAa;oBACb,SAAS;gBACX;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,iQAAW;oBACjB,aAAa;oBACb,SAAS;gBACX;aACD;QACH;QACA;YACE,OAAO;YACP,MAAM,6OAAQ;YACd,OAAO;gBACL;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,oPAAS;oBACf,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,oOAAK;oBACX,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,kQAAa;oBACnB,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,6OAAQ;oBACd,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,gPAAS;oBACf,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,gQAAa;oBACnB,aAAa;gBACf;aACD;QACH;QACA;YACE,OAAO;YACP,MAAM,uOAAM;YACZ,OAAO;gBACL;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,iQAAW;oBACjB,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,uPAAU;oBAChB,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,oPAAS;oBACf,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,uPAAU;oBAChB,aAAa;gBACf;aACD;QACH;QACA;YACE,OAAO;YACP,MAAM,uPAAU;YAChB,OAAO;gBACL;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,0OAAO;oBACb,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,uQAAc;oBACpB,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,sPAAS;oBACf,aAAa;gBACf;aACD;QACH;QACA;YACE,OAAO;YACP,MAAM,6OAAQ;YACd,OAAO;gBACL;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,uPAAU;oBAChB,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,SAAS,IAAM,oBAAoB;oBACnC,MAAM,sPAAS;oBACf,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,SAAS,IAAM,oBAAoB;oBACnC,MAAM,iPAAQ;oBACd,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,SAAS,IAAM,oBAAoB;oBACnC,MAAM,iOAAI;oBACV,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,SAAS,IAAM,oBAAoB;oBACnC,MAAM,uOAAM;oBACZ,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,SAAS,IAAM,oBAAoB;oBACnC,MAAM,8NAAG;oBACT,aAAa;gBACf;aACD;QACH;QACA;YACE,OAAO;YACP,MAAM,sPAAS;YACf,OAAO;gBACL;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,uPAAU;oBAChB,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,uPAAU;oBAChB,aAAa;gBACf;aACD;QACH;QACA;YACE,OAAO;YACP,MAAM,6OAAQ;YACd,OAAO;gBACL;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,6OAAQ;oBACd,aAAa;gBACf;gBACA;oBACE,OAAO;oBACP,MAAM;oBACN,MAAM,iOAAI;oBACV,aAAa;gBACf;aACD;QACH;KACD;IAED,qBACE,qQAAC,+JAAI;QAAC,WAAW,IAAA,gJAAE,EACjB,6DACA,+BACA;;0BAEA,qQAAC,qKAAU;gBAAC,WAAU;0BACpB,cAAA,qQAAC;oBAAI,WAAU;;sCACb,qQAAC;4BAAI,WAAU;;8CACb,qQAAC;oCAAI,WAAU;8CACb,cAAA,qQAAC,8NAAG;wCAAC,WAAU;;;;;;;;;;;8CAEjB,qQAAC;;sDACC,qQAAC,oKAAS;4CAAC,WAAU;sDAAmD;;;;;;sDAGxE,qQAAC,0KAAe;4CAAC,WAAU;sDAAkE;;;;;;;;;;;;;;;;;;sCAKjG,qQAAC;4BAAI,WAAU;sCACb,cAAA,qQAAC;gCAAI,WAAU;;kDACb,qQAAC;wCAAI,WAAU;;;;;;kDACf,qQAAC;wCAAK,WAAU;kDAAmE;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAM3F,qQAAC,sKAAW;gBAAC,WAAU;0BACrB,cAAA,qQAAC;oBAAI,WAAU;8BACZ,eAAe,GAAG,CAAC,CAAC,wBACnB,qQAAC;4BAAkC,SAAS;2BAAxB,QAAQ,KAAK;;;;;;;;;;;;;;;;;;;;;AAM7C"}},
    {"offset": {"line": 611, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/dashboard/enhanced-staff-dashboard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useCallback, useMemo } from 'react'\r\nimport { StaffActionCenter } from './staff-action-center'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n    Users,\r\n    Workflow,\r\n    Shield,\r\n    AlertTriangle,\r\n    CheckCircle,\r\n    Activity,\r\n    DollarSign,\r\n    ArrowUpRight,\r\n    MoreHorizontal,\r\n    CalendarRange,\r\n    Wallet\r\n} from 'lucide-react'\r\nimport { toast } from 'sonner'\r\nimport { useRouter } from 'next/navigation'\r\nimport {\r\n    Area,\r\n    AreaChart,\r\n    Bar,\r\n    BarChart,\r\n    CartesianGrid,\r\n    ResponsiveContainer,\r\n    Tooltip,\r\n    XAxis,\r\n    YAxis\r\n} from 'recharts'\r\nimport { format, parseISO } from 'date-fns'\r\n\r\n// --- Types ---\r\n\r\ninterface MetricError {\r\n    metric: string\r\n    message: string\r\n    code?: string\r\n}\r\n\r\ninterface DashboardData {\r\n    generatedAt: string\r\n    kpis: {\r\n        activeLps: number | null\r\n        pendingKyc: number | null\r\n        highPriorityKyc: number | null\r\n        workflowRunsThisMonth: number | null\r\n        complianceRate: number | null\r\n    }\r\n    processCenter: {\r\n        activeWorkflows: number | null\r\n    }\r\n    management: {\r\n        activeDeals: number | null\r\n        activeRequests: number | null\r\n        complianceRate: number | null\r\n        activeInvestors: number | null\r\n    }\r\n    recentActivity: Array<{\r\n        id: string\r\n        title: string\r\n        description: string | null\r\n        activityType: 'fee' | 'subscription' | 'investor' | 'other'\r\n        createdAt: string\r\n        amount?: number\r\n        status?: string\r\n    }>\r\n    charts: {\r\n        fees: Array<{\r\n            date: string\r\n            amount: number\r\n            type: string\r\n        }>\r\n        subscriptions: Array<{\r\n            date: string\r\n            amount: number\r\n            status: string\r\n        }>\r\n    }\r\n    errors?: MetricError[]\r\n}\r\n\r\n// --- Sub-Components (Memoized) ---\r\n\r\nconst DashboardHeader = React.memo(({\r\n    formattedDate\r\n}: {\r\n    formattedDate: string\r\n}) => (\r\n    <header className=\"flex items-end justify-between pb-6 border-b border-gray-200 dark:border-white/5\">\r\n        <div className=\"space-y-1\">\r\n             <div className=\"flex items-center gap-3 mb-2\">\r\n                <Badge variant=\"outline\" className=\"rounded-full border-emerald-600/30 dark:border-emerald-500/30 bg-emerald-500/10 dark:bg-emerald-500/5 text-emerald-700 dark:text-emerald-400 px-3 py-0.5 text-[10px] uppercase tracking-widest font-medium\">\r\n                    Financial Operations\r\n                </Badge>\r\n                <span className=\"h-1 w-1 rounded-full bg-gray-300 dark:bg-zinc-700\"></span>\r\n                <span className=\"text-xs text-gray-600 dark:text-zinc-200 font-mono tracking-wider\">{formattedDate}</span>\r\n             </div>\r\n             <h1 className=\"text-3xl font-light text-gray-900 dark:text-white tracking-tight\">Executive Dashboard</h1>\r\n        </div>\r\n    </header>\r\n))\r\nDashboardHeader.displayName = 'DashboardHeader'\r\n\r\nconst KPICard = React.memo(({ kpi, glassCardStyle, labelStyle, valueStyle }: { kpi: any, glassCardStyle: string, labelStyle: string, valueStyle: string }) => {\r\n    const Icon = kpi.icon\r\n    return (\r\n        <div className={glassCardStyle + \" p-6 rounded-xl relative overflow-hidden group\"}>\r\n            <div className=\"absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity duration-500 pointer-events-none\">\r\n                <Icon className=\"w-16 h-16 text-gray-900 dark:text-white transform rotate-12 translate-x-4 -translate-y-4\" />\r\n            </div>\r\n            <div className=\"relative z-10\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <h3 className={labelStyle}>{kpi.label}</h3>\r\n                    <Icon className={cn(\"w-4 h-4 opacity-50 transition-opacity group-hover:opacity-100\", kpi.accent)} />\r\n                </div>\r\n                <div className=\"flex items-baseline gap-2\">\r\n                    <span className={valueStyle}>{typeof kpi.value === 'number' ? kpi.value.toLocaleString() : kpi.value}</span>\r\n                    <span className=\"text-sm text-gray-500 dark:text-zinc-200 font-light\">{kpi.subValue}</span>\r\n                </div>\r\n                <div className=\"mt-4 flex items-center gap-2 text-xs text-gray-500 dark:text-zinc-200\">\r\n                    {kpi.trend === 'up' ? <ArrowUpRight className=\"w-3 h-3 text-emerald-600 dark:text-emerald-400\" /> : <MoreHorizontal className=\"w-3 h-3 text-gray-400 dark:text-zinc-300\" />}\r\n                    <span className={kpi.trend === 'up' ? \"text-emerald-600 dark:text-emerald-400\" : \"text-gray-500 dark:text-zinc-200\"}>{kpi.change}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\nKPICard.displayName = 'KPICard'\r\n\r\nconst FeesChart = React.memo(({ data, glassCardStyle }: { data: any[], glassCardStyle: string }) => (\r\n    <Card className={glassCardStyle + \" border-0 rounded-2xl\"}>\r\n        <CardHeader className=\"pb-2 pt-6 px-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <CardTitle className=\"text-lg font-light text-gray-900 dark:text-white tracking-wide flex items-center gap-2\">\r\n                        Revenue & Fees\r\n                    </CardTitle>\r\n                    <CardDescription className=\"text-gray-500 dark:text-zinc-200 text-xs uppercase tracking-wider mt-1\">\r\n                        Transaction Volume (LTM)\r\n                    </CardDescription>\r\n                </div>\r\n                <Badge variant=\"secondary\" className=\"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-900/50 font-mono text-[10px]\">LIVE</Badge>\r\n            </div>\r\n        </CardHeader>\r\n        <CardContent className=\"pl-2 pr-6 pb-6 pt-4\">\r\n            <div className=\"h-[280px] w-full\">\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <AreaChart data={data} margin={{ top: 10, right: 10, left: 10, bottom: 10 }}>\r\n                        <defs>\r\n                            <linearGradient id=\"colorFees\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                <stop offset=\"0%\" stopColor=\"#10b981\" stopOpacity={0.3} />\r\n                                <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0.05} />\r\n                            </linearGradient>\r\n                        </defs>\r\n                        <CartesianGrid strokeDasharray=\"2 4\" stroke=\"#ffffff08\" vertical={false} horizontal={true} />\r\n                        <XAxis\r\n                            dataKey=\"displayDate\"\r\n                            stroke=\"#d4d4d8\"\r\n                            fontSize={11}\r\n                            tickLine={false}\r\n                            axisLine={{ stroke: '#27272a', strokeWidth: 1 }}\r\n                            dy={8}\r\n                            height={40}\r\n                        />\r\n                        <YAxis\r\n                            stroke=\"#d4d4d8\"\r\n                            fontSize={11}\r\n                            tickLine={false}\r\n                            axisLine={false}\r\n                            tickFormatter={(value) => `$${(value/1000).toFixed(0)}k`}\r\n                            dx={-5}\r\n                            width={60}\r\n                        />\r\n                        <Tooltip\r\n                            contentStyle={{\r\n                                backgroundColor: '#18181b',\r\n                                borderColor: '#3f3f46',\r\n                                borderRadius: '10px',\r\n                                padding: '12px 16px',\r\n                                boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3)'\r\n                            }}\r\n                            itemStyle={{ color: '#10b981', fontSize: '14px', fontWeight: '600', fontFamily: 'system-ui' }}\r\n                            labelStyle={{ color: '#d4d4d8', fontSize: '12px', marginBottom: '6px', fontWeight: '500' }}\r\n                            formatter={(value: number) => [`$${value.toLocaleString()}`, 'Fee Revenue']}\r\n                        />\r\n                        <Area\r\n                            type=\"monotone\"\r\n                            dataKey=\"amount\"\r\n                            stroke=\"#10b981\"\r\n                            strokeWidth={2.5}\r\n                            fillOpacity={1}\r\n                            fill=\"url(#colorFees)\"\r\n                            isAnimationActive={false}\r\n                            dot={{ fill: '#10b981', strokeWidth: 0, r: 3 }}\r\n                            activeDot={{ r: 5, fill: '#10b981', stroke: '#18181b', strokeWidth: 3 }}\r\n                        />\r\n                    </AreaChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n        </CardContent>\r\n    </Card>\r\n))\r\nFeesChart.displayName = 'FeesChart'\r\n\r\nconst SubscriptionsChart = React.memo(({ data, glassCardStyle }: { data: any[], glassCardStyle: string }) => (\r\n    <Card className={glassCardStyle + \" border-0 rounded-2xl\"}>\r\n        <CardHeader className=\"pb-2 pt-6 px-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <CardTitle className=\"text-lg font-light text-gray-900 dark:text-white tracking-wide flex items-center gap-2\">\r\n                        Capital Commitments\r\n                    </CardTitle>\r\n                    <CardDescription className=\"text-gray-500 dark:text-zinc-200 text-xs uppercase tracking-wider mt-1\">\r\n                        Subscription Flows (LTM)\r\n                    </CardDescription>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <span className=\"w-2 h-2 rounded-full bg-sky-500\"></span>\r\n                        <span className=\"text-xs text-gray-600 dark:text-zinc-200\">Committed</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </CardHeader>\r\n        <CardContent className=\"pl-2 pr-6 pb-6 pt-4\">\r\n            <div className=\"h-[260px] w-full\">\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <BarChart data={data} barSize={28} margin={{ top: 10, right: 10, left: 10, bottom: 10 }}>\r\n                        <CartesianGrid strokeDasharray=\"2 4\" stroke=\"#ffffff08\" vertical={false} horizontal={true} />\r\n                        <XAxis\r\n                            dataKey=\"displayDate\"\r\n                            stroke=\"#d4d4d8\"\r\n                            fontSize={11}\r\n                            tickLine={false}\r\n                            axisLine={{ stroke: '#27272a', strokeWidth: 1 }}\r\n                            dy={8}\r\n                            height={40}\r\n                        />\r\n                        <YAxis\r\n                            stroke=\"#d4d4d8\"\r\n                            fontSize={11}\r\n                            tickLine={false}\r\n                            axisLine={false}\r\n                            tickFormatter={(value) => `$${(value/1000000).toFixed(1)}M`}\r\n                            dx={-5}\r\n                            width={60}\r\n                        />\r\n                        <Tooltip\r\n                            contentStyle={{\r\n                                backgroundColor: '#18181b',\r\n                                borderColor: '#3f3f46',\r\n                                borderRadius: '10px',\r\n                                padding: '12px 16px',\r\n                                boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3)'\r\n                            }}\r\n                            cursor={{ fill: '#ffffff08', radius: 4 }}\r\n                            itemStyle={{ color: '#38bdf8', fontSize: '14px', fontWeight: '600', fontFamily: 'system-ui' }}\r\n                            labelStyle={{ color: '#d4d4d8', fontSize: '12px', marginBottom: '6px', fontWeight: '500' }}\r\n                            formatter={(value: number) => [`$${value.toLocaleString()}`, 'Capital']}\r\n                        />\r\n                        <Bar\r\n                            dataKey=\"amount\"\r\n                            fill=\"#0ea5e9\"\r\n                            radius={[4, 4, 0, 0]}\r\n                            isAnimationActive={false}\r\n                            maxBarSize={50}\r\n                        />\r\n                    </BarChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n        </CardContent>\r\n    </Card>\r\n))\r\nSubscriptionsChart.displayName = 'SubscriptionsChart'\r\n\r\nconst ErrorBanner = React.memo(({ errors }: { errors: MetricError[] }) => {\r\n    const [isExpanded, setIsExpanded] = useState(false)\r\n\r\n    return (\r\n        <div className=\"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4\">\r\n            <div className=\"flex items-start justify-between gap-4\">\r\n                <div className=\"flex items-start gap-3\">\r\n                    <AlertTriangle className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\r\n                    <div>\r\n                        <p className=\"text-sm font-medium text-amber-100\">\r\n                            {errors.length} metric{errors.length > 1 ? 's' : ''} unavailable\r\n                        </p>\r\n                        <p className=\"text-xs text-amber-200/70 mt-1\">\r\n                            Some dashboard metrics failed to load. Click to view details.\r\n                        </p>\r\n                        {isExpanded && (\r\n                            <div className=\"mt-3 space-y-2\">\r\n                                {errors.map((error, idx) => (\r\n                                    <div key={idx} className=\"pl-3 border-l-2 border-amber-500/40\">\r\n                                        <p className=\"text-xs font-mono text-amber-100\">{error.metric}</p>\r\n                                        <p className=\"text-xs text-amber-200/60 mt-0.5\">{error.message}</p>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => setIsExpanded(!isExpanded)}\r\n                    className=\"text-amber-300 hover:text-amber-100 hover:bg-amber-500/20\"\r\n                >\r\n                    {isExpanded ? 'Hide' : 'Details'}\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\nErrorBanner.displayName = 'ErrorBanner'\r\n\r\nconst LedgerItem = React.memo(({ activity }: { activity: any }) => {\r\n    const getActivityIcon = (type: string) => {\r\n        switch (type) {\r\n            case 'fee': return DollarSign\r\n            case 'subscription': return Wallet\r\n            case 'investor': return Users\r\n            default: return Activity\r\n        }\r\n    }\r\n    const Icon = getActivityIcon(activity.activityType)\r\n    const isFee = activity.activityType === 'fee'\r\n\r\n    return (\r\n        <div className=\"group relative bg-gray-100 dark:bg-zinc-900/30 border border-gray-200 dark:border-white/5 rounded-lg p-4 hover:bg-gray-200 dark:hover:bg-zinc-800/50 transition-colors duration-200\">\r\n            <div className=\"absolute left-0 top-4 bottom-4 w-[2px] bg-gray-300 dark:bg-zinc-800 group-hover:bg-emerald-500/50 transition-colors rounded-r-full\"></div>\r\n            <div className=\"flex items-start justify-between gap-4 pl-3\">\r\n                <div className=\"flex gap-3\">\r\n                    <div className={cn(\r\n                        \"p-2 rounded-md h-fit mt-0.5 transition-colors\",\r\n                        isFee ? \"bg-emerald-100 dark:bg-emerald-950/30 text-emerald-600 dark:text-emerald-400\" : \"bg-gray-200 dark:bg-zinc-800/50 text-gray-600 dark:text-zinc-200\"\r\n                    )}>\r\n                        <Icon className=\"w-4 h-4\" />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-sm font-medium text-gray-700 dark:text-zinc-200 leading-tight\">{activity.title}</p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-zinc-200 mt-1 leading-relaxed max-w-[200px]\">{activity.description}</p>\r\n                        <p className=\"text-[10px] text-gray-400 dark:text-zinc-300 font-mono mt-2 uppercase tracking-wider\">\r\n                            {activity.createdAt ? format(parseISO(activity.createdAt), 'HH:mm') : '--:--'} â€¢ {activity.status || 'Processed'}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                {activity.amount && (\r\n                    <div className=\"text-right\">\r\n                        <span className={cn(\r\n                            \"text-sm font-mono font-medium block\",\r\n                            isFee ? \"text-emerald-600 dark:text-emerald-400\" : \"text-gray-600 dark:text-zinc-300\"\r\n                        )}>\r\n                            {isFee ? '+' : ''}${activity.amount.toLocaleString(undefined, { maximumFractionDigits: 0 })}\r\n                        </span>\r\n                        <span className=\"text-[10px] text-gray-400 dark:text-zinc-300 uppercase\">USD</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\nLedgerItem.displayName = 'LedgerItem'\r\n\r\n// --- Main Component ---\r\n\r\nexport function EnhancedStaffDashboard({\r\n    initialData,\r\n    className\r\n}: {\r\n    initialData: DashboardData\r\n    className?: string\r\n}) {\r\n    const router = useRouter()\r\n\r\n    // Memoize handlers\r\n    const handleWorkflowTrigger = useCallback((workflowKey: string) => {\r\n        router.push(`/versotech_main/processes?workflow=${workflowKey}`)\r\n        toast.info('Initiating Process', {\r\n            description: `Workflow sequence ${workflowKey} started.`\r\n        })\r\n    }, [router])\r\n\r\n    // Memoize data processing\r\n    const formattedDate = useMemo(() => {\r\n        if (!initialData.generatedAt) return format(new Date(), 'dd MMM yyyy').toUpperCase()\r\n        try {\r\n            return format(parseISO(initialData.generatedAt), 'dd MMM yyyy').toUpperCase()\r\n        } catch {\r\n            return format(new Date(), 'dd MMM yyyy').toUpperCase()\r\n        }\r\n    }, [initialData.generatedAt])\r\n\r\n    const formatChartDate = useCallback((dateStr: string) => {\r\n        try {\r\n             return format(parseISO(dateStr), 'MMM dd')\r\n        } catch (e) {\r\n            return dateStr\r\n        }\r\n    }, [])\r\n\r\n    const feesData = useMemo(() => initialData.charts.fees.map(f => ({\r\n        ...f,\r\n        displayDate: formatChartDate(f.date)\r\n    })), [initialData.charts.fees, formatChartDate])\r\n\r\n    const subscriptionsData = useMemo(() => initialData.charts.subscriptions.map(s => ({\r\n        ...s,\r\n        displayDate: formatChartDate(s.date)\r\n    })), [initialData.charts.subscriptions, formatChartDate])\r\n\r\n    // KPI Data\r\n    const kpiCards = useMemo(() => [\r\n        {\r\n            label: 'Total Active LPs',\r\n            value: initialData.kpis.activeLps ?? 0,\r\n            subValue: 'Investors',\r\n            change: '+2.4%',\r\n            trend: 'up',\r\n            icon: Users,\r\n            accent: 'text-gray-600 dark:text-zinc-200'\r\n        },\r\n        {\r\n            label: 'Pending KYC',\r\n            value: initialData.kpis.pendingKyc ?? 0,\r\n            subValue: 'Reviews',\r\n            change: initialData.kpis.highPriorityKyc && initialData.kpis.highPriorityKyc > 0 ? `${initialData.kpis.highPriorityKyc} High Priority` : 'Standard',\r\n            trend: 'neutral',\r\n            icon: Shield,\r\n            accent: 'text-amber-600 dark:text-amber-200'\r\n        },\r\n        {\r\n            label: 'Process Executions',\r\n            value: initialData.kpis.workflowRunsThisMonth ?? 0,\r\n            subValue: 'Workflows',\r\n            change: 'MTD',\r\n            trend: 'up',\r\n            icon: Workflow,\r\n            accent: 'text-sky-600 dark:text-sky-200'\r\n        },\r\n        {\r\n            label: 'Compliance Index',\r\n            value: initialData.kpis.complianceRate !== null ? `${initialData.kpis.complianceRate.toFixed(0)}%` : 'N/A',\r\n            subValue: 'Verified',\r\n            change: 'Target: 100%',\r\n            trend: 'neutral',\r\n            icon: CheckCircle,\r\n            accent: 'text-emerald-600 dark:text-emerald-200'\r\n        }\r\n    ], [initialData.kpis])\r\n\r\n    // Styles - Theme-responsive\r\n    const glassCard = \"bg-white/80 dark:bg-zinc-900/40 backdrop-blur-md border border-gray-200 dark:border-white/5 hover:border-gray-300 dark:hover:border-white/10 transition-all duration-300 shadow-lg dark:shadow-xl hover:shadow-xl dark:hover:shadow-2xl dark:hover:shadow-black/50\"\r\n    const kpiValueStyle = \"text-3xl xl:text-4xl font-light tracking-tight text-gray-900 dark:text-white\"\r\n    const kpiLabelStyle = \"text-xs font-medium uppercase tracking-widest text-gray-600 dark:text-zinc-200 mb-1 group-hover:text-gray-900 dark:group-hover:text-zinc-100 transition-colors\"\r\n\r\n    return (\r\n        <div className={cn(\"bg-gray-50 dark:bg-zinc-950 text-gray-700 dark:text-zinc-200 min-h-screen flex flex-col font-sans selection:bg-emerald-500/30\", className)}>\r\n            <div className=\"flex-1 p-8 xl:p-10 max-w-[1800px] mx-auto w-full space-y-10\">\r\n                \r\n                <DashboardHeader formattedDate={formattedDate} />\r\n\r\n                {/* Error Banner */}\r\n                {initialData.errors && initialData.errors.length > 0 && (\r\n                    <ErrorBanner errors={initialData.errors} />\r\n                )}\r\n\r\n                {/* KPI Grid */}\r\n                <section className=\"grid gap-6 grid-cols-1 md:grid-cols-2 xl:grid-cols-4\">\r\n                    {kpiCards.map((kpi) => (\r\n                        <KPICard \r\n                            key={kpi.label} \r\n                            kpi={kpi} \r\n                            glassCardStyle={glassCard} \r\n                            labelStyle={kpiLabelStyle} \r\n                            valueStyle={kpiValueStyle} \r\n                        />\r\n                    ))}\r\n                </section>\r\n\r\n                {/* Main Analytics Grid */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                    <div className=\"lg:col-span-2 space-y-8\">\r\n                        <FeesChart data={feesData} glassCardStyle={glassCard} />\r\n                        <SubscriptionsChart data={subscriptionsData} glassCardStyle={glassCard} />\r\n                    </div>\r\n\r\n                    {/* Activity Feed */}\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"flex items-center justify-between px-1\">\r\n                            <h2 className=\"text-sm font-medium text-gray-700 dark:text-zinc-200 uppercase tracking-widest\">Ledger</h2>\r\n                            <CalendarRange className=\"w-4 h-4 text-gray-400 dark:text-zinc-300\" />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3\">\r\n                             {initialData.recentActivity.length === 0 ? (\r\n                                <div className=\"p-8 border border-dashed border-gray-300 dark:border-white/10 rounded-lg text-center\">\r\n                                    <p className=\"text-sm text-gray-500 dark:text-zinc-200\">No recent transactions recorded.</p>\r\n                                </div>\r\n                            ) : (\r\n                                initialData.recentActivity.map((activity) => (\r\n                                    <LedgerItem key={activity.id} activity={activity} />\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Action Center */}\r\n                <div className=\"pt-6 border-t border-gray-200 dark:border-white/5\">\r\n                    <StaffActionCenter\r\n                        className=\"bg-gray-100 dark:bg-zinc-900/20 border-gray-200 dark:border-white/5\"\r\n                        onWorkflowTrigger={handleWorkflowTrigger}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1755, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/dashboard/realtime-staff-dashboard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState, useCallback, useMemo } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  Activity,\r\n  RefreshCw,\r\n  WifiOff,\r\n  Wifi,\r\n  Bell,\r\n  AlertCircle\r\n} from 'lucide-react'\r\nimport { toast } from 'sonner'\r\n\r\ninterface RealtimeUpdate {\r\n  table: string\r\n  type: 'INSERT' | 'UPDATE' | 'DELETE'\r\n  record: any\r\n  old_record?: any\r\n  timestamp: string\r\n}\r\n\r\ninterface DashboardMetrics {\r\n  activeLps: number\r\n  pendingKyc: number\r\n  workflowRuns: number\r\n  complianceRate: number\r\n  kycPipeline: number\r\n  ndaInProgress: number\r\n  subscriptionReview: number\r\n  activeDeals: number\r\n  activeRequests: number\r\n  lastUpdated: string\r\n}\r\n\r\nexport function RealtimeStaffDashboard({\r\n  initialData,\r\n  onMetricsUpdate,\r\n  className\r\n}: {\r\n  initialData: DashboardMetrics\r\n  onMetricsUpdate?: (metrics: DashboardMetrics) => void\r\n  className?: string\r\n}) {\r\n  const [metrics, setMetrics] = useState<DashboardMetrics>(initialData)\r\n  const [isConnected, setIsConnected] = useState(false)\r\n  const [realtimeUpdates, setRealtimeUpdates] = useState<RealtimeUpdate[]>([])\r\n  const [isRefreshing, setIsRefreshing] = useState(false)\r\n  const supabase = createClient()\r\n\r\n  // Tables to subscribe to for real-time updates\r\n  const subscribedTables = useMemo(() => [\r\n    'investors',           // For active LPs and KYC status\r\n    'tasks',              // For KYC/NDA/subscription pipeline\r\n    'workflow_runs',      // For workflow execution counts\r\n    'deals',              // For active deals\r\n    'request_tickets',    // For active requests\r\n    'activity_feed'       // For recent activity\r\n  ], [])\r\n\r\n  // Fetch updated metrics from database\r\n  const fetchMetrics = useCallback(async () => {\r\n    setIsRefreshing(true)\r\n\r\n    try {\r\n      // Parallel fetch all metrics\r\n      const [\r\n        activeLpsResult,\r\n        pendingKycResult,\r\n        workflowRunsResult,\r\n        complianceResult,\r\n        kycPipelineResult,\r\n        ndaResult,\r\n        subscriptionResult,\r\n        dealsResult,\r\n        requestsResult\r\n      ] = await Promise.all([\r\n        supabase.from('investors').select('id', { count: 'exact', head: true }).eq('status', 'active'),\r\n        supabase.from('investors').select('id', { count: 'exact', head: true }).in('kyc_status', ['pending', 'review']),\r\n        supabase.from('workflow_runs')\r\n          .select('id', { count: 'exact', head: true })\r\n          .gte('created_at', new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString()),\r\n        supabase.from('investors').select('kyc_status'),\r\n        supabase.from('tasks')\r\n          .select('id', { count: 'exact', head: true })\r\n          .in('kind', ['kyc_individual', 'kyc_entity', 'kyc_aml_check'])\r\n          .in('status', ['pending', 'in_progress']),\r\n        supabase.from('tasks')\r\n          .select('id', { count: 'exact', head: true })\r\n          .eq('kind', 'compliance_nda')\r\n          .eq('status', 'in_progress'),\r\n        supabase.from('tasks')\r\n          .select('id', { count: 'exact', head: true })\r\n          .eq('kind', 'compliance_subscription_agreement')\r\n          .eq('status', 'review'),\r\n        supabase.from('deals')\r\n          .select('id', { count: 'exact', head: true })\r\n          .in('status', ['open', 'allocation_pending']),\r\n        supabase.from('request_tickets')\r\n          .select('id', { count: 'exact', head: true })\r\n          .in('status', ['open', 'assigned', 'in_progress'])\r\n      ])\r\n\r\n      // Calculate compliance rate\r\n      const totalInvestors = complianceResult.data?.length || 0\r\n      const approvedInvestors = complianceResult.data?.filter((i: any) => i.kyc_status === 'approved').length || 0\r\n      const complianceRate = totalInvestors > 0 ? (approvedInvestors / totalInvestors) * 100 : 0\r\n\r\n      const newMetrics: DashboardMetrics = {\r\n        activeLps: activeLpsResult.count || 0,\r\n        pendingKyc: pendingKycResult.count || 0,\r\n        workflowRuns: workflowRunsResult.count || 0,\r\n        complianceRate: Math.round(complianceRate * 10) / 10,\r\n        kycPipeline: kycPipelineResult.count || 0,\r\n        ndaInProgress: ndaResult.count || 0,\r\n        subscriptionReview: subscriptionResult.count || 0,\r\n        activeDeals: dealsResult.count || 0,\r\n        activeRequests: requestsResult.count || 0,\r\n        lastUpdated: new Date().toISOString()\r\n      }\r\n\r\n      setMetrics(newMetrics)\r\n      onMetricsUpdate?.(newMetrics)\r\n\r\n      // Show update notification\r\n      toast.success('Dashboard refreshed', {\r\n        description: 'All metrics updated successfully',\r\n        duration: 2000\r\n      })\r\n    } catch (error) {\r\n      console.error('Error fetching metrics:', error)\r\n      toast.error('Failed to refresh metrics', {\r\n        description: 'Some metrics may be outdated'\r\n      })\r\n    } finally {\r\n      setIsRefreshing(false)\r\n    }\r\n  }, [supabase, onMetricsUpdate])\r\n\r\n  // Set up real-time subscriptions\r\n  useEffect(() => {\r\n    const channels: any[] = []\r\n\r\n    const setupSubscriptions = async () => {\r\n      // Create a single channel for all table subscriptions\r\n      const channel = supabase\r\n        .channel('dashboard-updates')\r\n        .on('postgres_changes',\r\n          { event: '*', schema: 'public' },\r\n          (payload) => {\r\n            // Check if this is from a subscribed table\r\n            if (subscribedTables.includes(payload.table)) {\r\n              const update: RealtimeUpdate = {\r\n                table: payload.table,\r\n                type: payload.eventType as any,\r\n                record: payload.new,\r\n                old_record: payload.old,\r\n                timestamp: new Date().toISOString()\r\n              }\r\n\r\n              // Add to recent updates\r\n              setRealtimeUpdates(prev => [update, ...prev].slice(0, 10))\r\n\r\n              // Determine if we need to refresh metrics\r\n              const shouldRefresh = determineIfRefreshNeeded(update)\r\n              if (shouldRefresh) {\r\n                fetchMetrics()\r\n              }\r\n\r\n              // Show notification for important changes\r\n              showUpdateNotification(update)\r\n            }\r\n          }\r\n        )\r\n        .subscribe((status) => {\r\n          setIsConnected(status === 'SUBSCRIBED')\r\n          if (status === 'SUBSCRIBED') {\r\n            toast.success('Real-time updates connected', {\r\n              description: 'Dashboard will update automatically',\r\n              duration: 2000\r\n            })\r\n          }\r\n        })\r\n\r\n      channels.push(channel)\r\n    }\r\n\r\n    setupSubscriptions()\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      channels.forEach(channel => {\r\n        supabase.removeChannel(channel)\r\n      })\r\n    }\r\n  }, [supabase, fetchMetrics, subscribedTables])\r\n\r\n  // Determine if metrics need refreshing based on update type\r\n  const determineIfRefreshNeeded = (update: RealtimeUpdate): boolean => {\r\n    // Always refresh for these critical tables\r\n    const criticalTables = ['investors', 'tasks', 'deals', 'request_tickets']\r\n    if (criticalTables.includes(update.table)) {\r\n      return true\r\n    }\r\n\r\n    // For workflow_runs, only refresh if status changed to completed/failed\r\n    if (update.table === 'workflow_runs') {\r\n      return update.record?.status === 'completed' || update.record?.status === 'failed'\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  // Show notification for important updates\r\n  const showUpdateNotification = (update: RealtimeUpdate) => {\r\n    const notifications: Record<string, { title: string; description: string; icon?: any }> = {\r\n      investors: {\r\n        title: 'Investor Update',\r\n        description: update.type === 'INSERT' ? 'New investor added' : 'Investor profile updated',\r\n        icon: AlertCircle\r\n      },\r\n      tasks: {\r\n        title: 'Task Update',\r\n        description: update.type === 'INSERT' ? 'New task created' : 'Task status changed',\r\n        icon: Bell\r\n      },\r\n      deals: {\r\n        title: 'Deal Update',\r\n        description: update.type === 'INSERT' ? 'New deal created' : 'Deal status updated',\r\n        icon: AlertCircle\r\n      },\r\n      workflow_runs: {\r\n        title: 'Workflow Update',\r\n        description: update.record?.status === 'completed' ? 'Workflow completed' : 'Workflow status changed',\r\n        icon: Activity\r\n      }\r\n    }\r\n\r\n    const notification = notifications[update.table]\r\n    if (notification && update.type !== 'DELETE') {\r\n      toast(notification.title, {\r\n        description: notification.description,\r\n        icon: notification.icon ? <notification.icon className=\"h-4 w-4\" /> : undefined,\r\n        duration: 3000\r\n      })\r\n    }\r\n  }\r\n\r\n  // Manual refresh handler\r\n  const handleManualRefresh = () => {\r\n    fetchMetrics()\r\n  }\r\n\r\n  // Auto-refresh every 5 minutes as fallback\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      fetchMetrics()\r\n    }, 5 * 60 * 1000) // 5 minutes\r\n\r\n    return () => clearInterval(interval)\r\n  }, [fetchMetrics])\r\n\r\n  return (\r\n    <div className={cn(\"space-y-4\", className)}>\r\n      {/* Connection Status Bar */}\r\n      <Card className=\"bg-white/95 dark:bg-black/95 border-gray-200 dark:border-white/10\">\r\n        <CardContent className=\"p-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"flex items-center gap-2\">\r\n                {isConnected ? (\r\n                  <>\r\n                    <Wifi className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400\" />\r\n                    <span className=\"text-xs text-emerald-700 dark:text-emerald-200\">Real-time connected</span>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <WifiOff className=\"h-4 w-4 text-amber-600 dark:text-amber-400\" />\r\n                    <span className=\"text-xs text-amber-700 dark:text-amber-200\">Connecting...</span>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <Badge variant=\"outline\" className=\"text-[10px] border-gray-300 dark:border-white/10 text-gray-500 dark:text-slate-400\">\r\n                Last updated: {new Date(metrics.lastUpdated).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false })}\r\n              </Badge>\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"h-7 px-2 text-xs border-gray-300 dark:border-white/10 text-gray-700 dark:text-slate-200 hover:bg-gray-100 dark:hover:bg-white/10\"\r\n              onClick={handleManualRefresh}\r\n              disabled={isRefreshing}\r\n            >\r\n              <RefreshCw className={cn(\"h-3 w-3 mr-1\", isRefreshing && \"animate-spin\")} />\r\n              Refresh\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Live Metrics Display */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n        {[\r\n          { label: 'Active LPs', value: metrics.activeLps, color: 'text-sky-600 dark:text-sky-400' },\r\n          { label: 'Pending KYC', value: metrics.pendingKyc, color: 'text-amber-600 dark:text-amber-400' },\r\n          { label: 'Active Deals', value: metrics.activeDeals, color: 'text-purple-600 dark:text-purple-400' },\r\n          { label: 'Compliance', value: `${metrics.complianceRate}%`, color: 'text-emerald-600 dark:text-emerald-400' }\r\n        ].map((metric) => (\r\n          <div\r\n            key={metric.label}\r\n            className=\"p-3 rounded-lg border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-black/50 backdrop-blur\"\r\n          >\r\n            <div className=\"text-xs text-gray-500 dark:text-slate-500 mb-1\">{metric.label}</div>\r\n            <div className={cn(\"text-2xl font-bold\", metric.color)}>\r\n              {metric.value}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Recent Real-time Updates */}\r\n      {realtimeUpdates.length > 0 && (\r\n        <Card className=\"bg-white/95 dark:bg-black/95 border-gray-200 dark:border-white/10\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm text-gray-900 dark:text-white flex items-center gap-2\">\r\n              <Activity className=\"h-4 w-4 text-sky-600 dark:text-sky-400 animate-pulse\" />\r\n              Live Activity Feed\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-2\">\r\n            {realtimeUpdates.slice(0, 5).map((update, idx) => (\r\n              <div\r\n                key={`${update.table}-${update.timestamp}-${idx}`}\r\n                className=\"flex items-center gap-3 p-2 rounded-md bg-gray-100 dark:bg-white/5 text-xs\"\r\n              >\r\n                <div className=\"h-2 w-2 rounded-full bg-emerald-500 dark:bg-emerald-400 animate-pulse\" />\r\n                <div className=\"flex-1\">\r\n                  <span className=\"text-gray-700 dark:text-slate-300 capitalize\">{update.table}</span>\r\n                  <span className=\"text-gray-400 dark:text-slate-500 mx-1\">â€¢</span>\r\n                  <span className=\"text-gray-500 dark:text-slate-400\">{update.type}</span>\r\n                </div>\r\n                <span className=\"text-gray-400 dark:text-slate-600 text-[10px]\">\r\n                  {new Date(update.timestamp).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false })}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAhBA;;;;;;;;;;AAuCO,SAAS,uBAAuB,EACrC,WAAW,EACX,eAAe,EACf,SAAS,EAKV;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wOAAQ,EAAmB;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wOAAQ,EAAC;IAC/C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,wOAAQ,EAAmB,EAAE;IAC3E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wOAAQ,EAAC;IACjD,MAAM,WAAW,IAAA,uKAAY;IAE7B,+CAA+C;IAC/C,MAAM,mBAAmB,IAAA,uOAAO,EAAC,IAAM;YACrC;YACA;YACA;YACA;YACA;YACA,gBAAsB,sBAAsB;SAC7C,EAAE,EAAE;IAEL,sCAAsC;IACtC,MAAM,eAAe,IAAA,2OAAW,EAAC;QAC/B,gBAAgB;QAEhB,IAAI;YACF,6BAA6B;YAC7B,MAAM,CACJ,iBACA,kBACA,oBACA,kBACA,mBACA,WACA,oBACA,aACA,eACD,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACpB,SAAS,IAAI,CAAC,aAAa,MAAM,CAAC,MAAM;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GAAG,EAAE,CAAC,UAAU;gBACrF,SAAS,IAAI,CAAC,aAAa,MAAM,CAAC,MAAM;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GAAG,EAAE,CAAC,cAAc;oBAAC;oBAAW;iBAAS;gBAC9G,SAAS,IAAI,CAAC,iBACX,MAAM,CAAC,MAAM;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GAC1C,GAAG,CAAC,cAAc,IAAI,KAAK,IAAI,OAAO,WAAW,IAAI,IAAI,OAAO,QAAQ,IAAI,GAAG,WAAW;gBAC7F,SAAS,IAAI,CAAC,aAAa,MAAM,CAAC;gBAClC,SAAS,IAAI,CAAC,SACX,MAAM,CAAC,MAAM;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GAC1C,EAAE,CAAC,QAAQ;oBAAC;oBAAkB;oBAAc;iBAAgB,EAC5D,EAAE,CAAC,UAAU;oBAAC;oBAAW;iBAAc;gBAC1C,SAAS,IAAI,CAAC,SACX,MAAM,CAAC,MAAM;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GAC1C,EAAE,CAAC,QAAQ,kBACX,EAAE,CAAC,UAAU;gBAChB,SAAS,IAAI,CAAC,SACX,MAAM,CAAC,MAAM;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GAC1C,EAAE,CAAC,QAAQ,qCACX,EAAE,CAAC,UAAU;gBAChB,SAAS,IAAI,CAAC,SACX,MAAM,CAAC,MAAM;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GAC1C,EAAE,CAAC,UAAU;oBAAC;oBAAQ;iBAAqB;gBAC9C,SAAS,IAAI,CAAC,mBACX,MAAM,CAAC,MAAM;oBAAE,OAAO;oBAAS,MAAM;gBAAK,GAC1C,EAAE,CAAC,UAAU;oBAAC;oBAAQ;oBAAY;iBAAc;aACpD;YAED,4BAA4B;YAC5B,MAAM,iBAAiB,iBAAiB,IAAI,EAAE,UAAU;YACxD,MAAM,oBAAoB,iBAAiB,IAAI,EAAE,OAAO,CAAC,IAAW,EAAE,UAAU,KAAK,YAAY,UAAU;YAC3G,MAAM,iBAAiB,iBAAiB,IAAI,AAAC,oBAAoB,iBAAkB,MAAM;YAEzF,MAAM,aAA+B;gBACnC,WAAW,gBAAgB,KAAK,IAAI;gBACpC,YAAY,iBAAiB,KAAK,IAAI;gBACtC,cAAc,mBAAmB,KAAK,IAAI;gBAC1C,gBAAgB,KAAK,KAAK,CAAC,iBAAiB,MAAM;gBAClD,aAAa,kBAAkB,KAAK,IAAI;gBACxC,eAAe,UAAU,KAAK,IAAI;gBAClC,oBAAoB,mBAAmB,KAAK,IAAI;gBAChD,aAAa,YAAY,KAAK,IAAI;gBAClC,gBAAgB,eAAe,KAAK,IAAI;gBACxC,aAAa,IAAI,OAAO,WAAW;YACrC;YAEA,WAAW;YACX,kBAAkB;YAElB,2BAA2B;YAC3B,wKAAK,CAAC,OAAO,CAAC,uBAAuB;gBACnC,aAAa;gBACb,UAAU;YACZ;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;YACzC,wKAAK,CAAC,KAAK,CAAC,6BAA6B;gBACvC,aAAa;YACf;QACF,SAAU;YACR,gBAAgB;QAClB;IACF,GAAG;QAAC;QAAU;KAAgB;IAE9B,iCAAiC;IACjC,IAAA,yOAAS,EAAC;QACR,MAAM,WAAkB,EAAE;QAE1B,MAAM,qBAAqB;YACzB,sDAAsD;YACtD,MAAM,UAAU,SACb,OAAO,CAAC,qBACR,EAAE,CAAC,oBACF;gBAAE,OAAO;gBAAK,QAAQ;YAAS,GAC/B,CAAC;gBACC,2CAA2C;gBAC3C,IAAI,iBAAiB,QAAQ,CAAC,QAAQ,KAAK,GAAG;oBAC5C,MAAM,SAAyB;wBAC7B,OAAO,QAAQ,KAAK;wBACpB,MAAM,QAAQ,SAAS;wBACvB,QAAQ,QAAQ,GAAG;wBACnB,YAAY,QAAQ,GAAG;wBACvB,WAAW,IAAI,OAAO,WAAW;oBACnC;oBAEA,wBAAwB;oBACxB,mBAAmB,CAAA,OAAQ;4BAAC;+BAAW;yBAAK,CAAC,KAAK,CAAC,GAAG;oBAEtD,0CAA0C;oBAC1C,MAAM,gBAAgB,yBAAyB;oBAC/C,IAAI,eAAe;wBACjB;oBACF;oBAEA,0CAA0C;oBAC1C,uBAAuB;gBACzB;YACF,GAED,SAAS,CAAC,CAAC;gBACV,eAAe,WAAW;gBAC1B,IAAI,WAAW,cAAc;oBAC3B,wKAAK,CAAC,OAAO,CAAC,+BAA+B;wBAC3C,aAAa;wBACb,UAAU;oBACZ;gBACF;YACF;YAEF,SAAS,IAAI,CAAC;QAChB;QAEA;QAEA,qBAAqB;QACrB,OAAO;YACL,SAAS,OAAO,CAAC,CAAA;gBACf,SAAS,aAAa,CAAC;YACzB;QACF;IACF,GAAG;QAAC;QAAU;QAAc;KAAiB;IAE7C,4DAA4D;IAC5D,MAAM,2BAA2B,CAAC;QAChC,2CAA2C;QAC3C,MAAM,iBAAiB;YAAC;YAAa;YAAS;YAAS;SAAkB;QACzE,IAAI,eAAe,QAAQ,CAAC,OAAO,KAAK,GAAG;YACzC,OAAO;QACT;QAEA,wEAAwE;QACxE,IAAI,OAAO,KAAK,KAAK,iBAAiB;YACpC,OAAO,OAAO,MAAM,EAAE,WAAW,eAAe,OAAO,MAAM,EAAE,WAAW;QAC5E;QAEA,OAAO;IACT;IAEA,0CAA0C;IAC1C,MAAM,yBAAyB,CAAC;QAC9B,MAAM,gBAAoF;YACxF,WAAW;gBACT,OAAO;gBACP,aAAa,OAAO,IAAI,KAAK,WAAW,uBAAuB;gBAC/D,MAAM,0PAAW;YACnB;YACA,OAAO;gBACL,OAAO;gBACP,aAAa,OAAO,IAAI,KAAK,WAAW,qBAAqB;gBAC7D,MAAM,iOAAI;YACZ;YACA,OAAO;gBACL,OAAO;gBACP,aAAa,OAAO,IAAI,KAAK,WAAW,qBAAqB;gBAC7D,MAAM,0PAAW;YACnB;YACA,eAAe;gBACb,OAAO;gBACP,aAAa,OAAO,MAAM,EAAE,WAAW,cAAc,uBAAuB;gBAC5E,MAAM,6OAAQ;YAChB;QACF;QAEA,MAAM,eAAe,aAAa,CAAC,OAAO,KAAK,CAAC;QAChD,IAAI,gBAAgB,OAAO,IAAI,KAAK,UAAU;YAC5C,IAAA,wKAAK,EAAC,aAAa,KAAK,EAAE;gBACxB,aAAa,aAAa,WAAW;gBACrC,MAAM,aAAa,IAAI,iBAAG,qQAAC,aAAa,IAAI;oBAAC,WAAU;;;;;2BAAe;gBACtE,UAAU;YACZ;QACF;IACF;IAEA,yBAAyB;IACzB,MAAM,sBAAsB;QAC1B;IACF;IAEA,2CAA2C;IAC3C,IAAA,yOAAS,EAAC;QACR,MAAM,WAAW,YAAY;YAC3B;QACF,GAAG,IAAI,KAAK,MAAM,YAAY;;QAE9B,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;KAAa;IAEjB,qBACE,qQAAC;QAAI,WAAW,IAAA,gJAAE,EAAC,aAAa;;0BAE9B,qQAAC,+JAAI;gBAAC,WAAU;0BACd,cAAA,qQAAC,sKAAW;oBAAC,WAAU;8BACrB,cAAA,qQAAC;wBAAI,WAAU;;0CACb,qQAAC;gCAAI,WAAU;;kDACb,qQAAC;wCAAI,WAAU;kDACZ,4BACC;;8DACE,qQAAC,iOAAI;oDAAC,WAAU;;;;;;8DAChB,qQAAC;oDAAK,WAAU;8DAAiD;;;;;;;yEAGnE;;8DACE,qQAAC,8OAAO;oDAAC,WAAU;;;;;;8DACnB,qQAAC;oDAAK,WAAU;8DAA6C;;;;;;;;;;;;;kDAInE,qQAAC,iKAAK;wCAAC,SAAQ;wCAAU,WAAU;;4CAAqF;4CACvG,IAAI,KAAK,QAAQ,WAAW,EAAE,kBAAkB,CAAC,SAAS;gDAAE,MAAM;gDAAW,QAAQ;gDAAW,QAAQ;gDAAW,QAAQ;4CAAM;;;;;;;;;;;;;0CAIpJ,qQAAC,mKAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS;gCACT,UAAU;;kDAEV,qQAAC,oPAAS;wCAAC,WAAW,IAAA,gJAAE,EAAC,gBAAgB,gBAAgB;;;;;;oCAAmB;;;;;;;;;;;;;;;;;;;;;;;0BAQpF,qQAAC;gBAAI,WAAU;0BACZ;oBACC;wBAAE,OAAO;wBAAc,OAAO,QAAQ,SAAS;wBAAE,OAAO;oBAAiC;oBACzF;wBAAE,OAAO;wBAAe,OAAO,QAAQ,UAAU;wBAAE,OAAO;oBAAqC;oBAC/F;wBAAE,OAAO;wBAAgB,OAAO,QAAQ,WAAW;wBAAE,OAAO;oBAAuC;oBACnG;wBAAE,OAAO;wBAAc,OAAO,GAAG,QAAQ,cAAc,CAAC,CAAC,CAAC;wBAAE,OAAO;oBAAyC;iBAC7G,CAAC,GAAG,CAAC,CAAC,uBACL,qQAAC;wBAEC,WAAU;;0CAEV,qQAAC;gCAAI,WAAU;0CAAkD,OAAO,KAAK;;;;;;0CAC7E,qQAAC;gCAAI,WAAW,IAAA,gJAAE,EAAC,sBAAsB,OAAO,KAAK;0CAClD,OAAO,KAAK;;;;;;;uBALV,OAAO,KAAK;;;;;;;;;;YAYtB,gBAAgB,MAAM,GAAG,mBACxB,qQAAC,+JAAI;gBAAC,WAAU;;kCACd,qQAAC,qKAAU;wBAAC,WAAU;kCACpB,cAAA,qQAAC,oKAAS;4BAAC,WAAU;;8CACnB,qQAAC,6OAAQ;oCAAC,WAAU;;;;;;gCAAyD;;;;;;;;;;;;kCAIjF,qQAAC,sKAAW;wBAAC,WAAU;kCACpB,gBAAgB,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,QAAQ,oBACxC,qQAAC;gCAEC,WAAU;;kDAEV,qQAAC;wCAAI,WAAU;;;;;;kDACf,qQAAC;wCAAI,WAAU;;0DACb,qQAAC;gDAAK,WAAU;0DAAgD,OAAO,KAAK;;;;;;0DAC5E,qQAAC;gDAAK,WAAU;0DAAyC;;;;;;0DACzD,qQAAC;gDAAK,WAAU;0DAAqC,OAAO,IAAI;;;;;;;;;;;;kDAElE,qQAAC;wCAAK,WAAU;kDACb,IAAI,KAAK,OAAO,SAAS,EAAE,kBAAkB,CAAC,SAAS;4CAAE,MAAM;4CAAW,QAAQ;4CAAW,QAAQ;4CAAW,QAAQ;wCAAM;;;;;;;+BAV5H,GAAG,OAAO,KAAK,CAAC,CAAC,EAAE,OAAO,SAAS,CAAC,CAAC,EAAE,KAAK;;;;;;;;;;;;;;;;;;;;;;AAmBjE"}},
    {"offset": {"line": 2298, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,0OAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,qQAAC,oMAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,gJAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,oMAAuB,CAAC,WAAW"}},
    {"offset": {"line": 2328, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/dashboard/investor-action-center.tsx"],"sourcesContent":["'use client'\r\n\r\nimport type { ElementType } from 'react'\r\n\r\nimport Link from 'next/link'\r\nimport {\r\n  AlertTriangle,\r\n  ArrowUpRight,\r\n  CalendarClock,\r\n  CalendarDays,\r\n  CheckSquare,\r\n  Clock,\r\n  FileText,\r\n  Inbox,\r\n  Layers,\r\n  MessageSquare,\r\n  ShieldCheck,\r\n  Target,\r\n  Play,\r\n  ChevronRight\r\n} from 'lucide-react'\r\n\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle\r\n} from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { cn } from '@/lib/utils'\r\nimport { useTheme } from '@/components/theme-provider'\r\n\r\nexport interface DashboardTask {\r\n  id: string\r\n  title: string\r\n  status: 'pending' | 'in_progress' | 'completed' | 'overdue' | 'waived' | 'blocked'\r\n  priority: 'low' | 'medium' | 'high'\r\n  due_at: string | null\r\n  category: string | null\r\n}\r\n\r\nexport interface DashboardActivity {\r\n  id: string\r\n  title?: string | null\r\n  description?: string | null\r\n  activity_type?: string | null\r\n  created_at: string\r\n  importance?: string | null\r\n  read_status?: boolean | null\r\n}\r\n\r\ninterface InvestorActionCenterProps {\r\n  tasks: DashboardTask[]\r\n  tasksTotal: number\r\n  recentActivity: DashboardActivity[]\r\n}\r\n\r\nfunction getPriorityStyles(priority: DashboardTask['priority'], isDark: boolean): string {\r\n  const styles: Record<DashboardTask['priority'], { light: string; dark: string }> = {\r\n    high: {\r\n      light: 'bg-rose-50 text-rose-700 border-rose-200',\r\n      dark: 'bg-rose-900/30 text-rose-400 border-rose-700'\r\n    },\r\n    medium: {\r\n      light: 'bg-amber-50 text-amber-700 border-amber-200',\r\n      dark: 'bg-amber-900/30 text-amber-400 border-amber-700'\r\n    },\r\n    low: {\r\n      light: 'bg-slate-50 text-slate-600 border-slate-200',\r\n      dark: 'bg-zinc-800 text-zinc-400 border-zinc-700'\r\n    }\r\n  }\r\n  return isDark ? styles[priority].dark : styles[priority].light\r\n}\r\n\r\nconst statusLabels: Record<DashboardTask['status'], string> = {\r\n  pending: 'To Do',\r\n  in_progress: 'In Progress',\r\n  completed: 'Completed',\r\n  overdue: 'Overdue',\r\n  waived: 'Waived',\r\n  blocked: 'Blocked'\r\n}\r\n\r\ntype IconType = React.ComponentType<{ className?: string }>\r\n\r\nfunction getActivityIconMap(isDark: boolean): Record<string, { icon: IconType; tone: string }> {\r\n  return {\r\n    document: {\r\n      icon: FileText,\r\n      tone: isDark\r\n        ? 'text-indigo-400 bg-indigo-900/30 border-indigo-700'\r\n        : 'text-indigo-600 bg-indigo-50 border-indigo-100'\r\n    },\r\n    valuation: {\r\n      icon: Target,\r\n      tone: isDark\r\n        ? 'text-emerald-400 bg-emerald-900/30 border-emerald-700'\r\n        : 'text-emerald-600 bg-emerald-50 border-emerald-100'\r\n    },\r\n    distribution: {\r\n      icon: ShieldCheck,\r\n      tone: isDark\r\n        ? 'text-emerald-400 bg-emerald-900/30 border-emerald-700'\r\n        : 'text-emerald-600 bg-emerald-50 border-emerald-100'\r\n    },\r\n    deal: {\r\n      icon: Layers,\r\n      tone: isDark\r\n        ? 'text-amber-400 bg-amber-900/30 border-amber-700'\r\n        : 'text-amber-600 bg-amber-50 border-amber-100'\r\n    },\r\n    message: {\r\n      icon: MessageSquare,\r\n      tone: isDark\r\n        ? 'text-purple-400 bg-purple-900/30 border-purple-700'\r\n        : 'text-purple-600 bg-purple-50 border-purple-100'\r\n    },\r\n    task: {\r\n      icon: CheckSquare,\r\n      tone: isDark\r\n        ? 'text-blue-400 bg-blue-900/30 border-blue-700'\r\n        : 'text-blue-600 bg-blue-50 border-blue-100'\r\n    },\r\n    capital_call: {\r\n      icon: CalendarClock,\r\n      tone: isDark\r\n        ? 'text-rose-400 bg-rose-900/30 border-rose-700'\r\n        : 'text-rose-600 bg-rose-50 border-rose-100'\r\n    },\r\n    allocation: {\r\n      icon: Target,\r\n      tone: isDark\r\n        ? 'text-indigo-400 bg-indigo-900/30 border-indigo-700'\r\n        : 'text-indigo-600 bg-indigo-50 border-indigo-100'\r\n    }\r\n  }\r\n}\r\n\r\nfunction formatDueCopy(dueDate: string | null, status: DashboardTask['status']) {\r\n  if (!dueDate) return status === 'completed' ? 'Completed' : 'No due date'\r\n\r\n  const date = new Date(dueDate)\r\n  const now = new Date()\r\n  const formatted = date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' })\r\n\r\n  if (status === 'completed') return `Completed ${formatted}`\r\n\r\n  if (date < now) {\r\n    const diffDays = Math.ceil((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24))\r\n    return diffDays > 1 ? `${diffDays} days overdue` : 'Overdue'\r\n  }\r\n\r\n  const diffDays = Math.ceil((date.getTime() - now.getTime()) / (1000 * 60 * 60 * 24))\r\n  if (diffDays <= 1) return 'Due tomorrow'\r\n  if (diffDays <= 3) return `Due in ${diffDays} days`\r\n\r\n  return `Due ${formatted}`\r\n}\r\n\r\nfunction getActivityMeta(activity: DashboardActivity, isDark: boolean): { icon: IconType; tone: string } {\r\n  const iconMap = getActivityIconMap(isDark)\r\n  const meta = iconMap[activity.activity_type ?? ''] ?? {\r\n    icon: Inbox,\r\n    tone: isDark\r\n      ? 'text-zinc-400 bg-zinc-800 border-zinc-700'\r\n      : 'text-slate-500 bg-slate-50 border-slate-100'\r\n  }\r\n  return meta\r\n}\r\n\r\nexport function InvestorActionCenter({ tasks, tasksTotal, recentActivity }: InvestorActionCenterProps) {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n  const outstandingTasks = tasks.filter(task => task.status !== 'completed')\r\n  const urgentTasks = outstandingTasks.filter(task => task.priority === 'high')\r\n\r\n  return (\r\n    <section className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\r\n        <div>\r\n          <h2 className={cn(\r\n            \"text-2xl font-medium font-serif\",\r\n            isDark ? \"text-white\" : \"text-slate-900\"\r\n          )}>Action Centre</h2>\r\n          <p className={cn(\r\n            \"text-sm\",\r\n            isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n          )}>\r\n            Priority items requiring your attention and recent updates.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <Badge variant=\"outline\" className={cn(\r\n            isDark\r\n              ? \"border-zinc-700 bg-zinc-800 text-zinc-400\"\r\n              : \"border-slate-200 bg-slate-50 text-slate-600\"\r\n          )}>\r\n            {tasksTotal} open task{tasksTotal === 1 ? '' : 's'}\r\n          </Badge>\r\n          {urgentTasks.length > 0 && (\r\n            <Badge variant=\"outline\" className={cn(\r\n              isDark\r\n                ? \"border-rose-700 bg-rose-900/30 text-rose-400\"\r\n                : \"border-rose-200 bg-rose-50 text-rose-700\"\r\n            )}>\r\n              {urgentTasks.length} high priority\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid gap-6 lg:grid-cols-[2fr,1fr]\">\r\n        {/* Task Queue */}\r\n        <Card className=\"glass-panel flex flex-col border-0\">\r\n          <CardHeader className={cn(\r\n            \"border-b p-5\",\r\n            isDark ? \"border-white/10\" : \"border-slate-100/50\"\r\n          )}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <CardTitle className={cn(\r\n                  \"text-base font-semibold\",\r\n                  isDark ? \"text-white\" : \"text-slate-900\"\r\n                )}>Outstanding Tasks</CardTitle>\r\n                <CardDescription className={cn(\r\n                  \"mt-1 text-sm\",\r\n                  isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n                )}>\r\n                  Pending actions for onboarding and compliance.\r\n                </CardDescription>\r\n              </div>\r\n              {outstandingTasks.length > 0 && (\r\n                <Link href=\"/versotech_main/tasks\">\r\n                  <Button variant=\"ghost\" size=\"sm\" className={cn(\r\n                    \"text-xs\",\r\n                    isDark ? \"hover:bg-white/10\" : \"hover:bg-slate-100/50\"\r\n                  )}>\r\n                    View all\r\n                    <ArrowUpRight className=\"ml-1 h-3 w-3\" />\r\n                  </Button>\r\n                </Link>\r\n              )}\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent className=\"flex-1 p-5\">\r\n            {outstandingTasks.length === 0 ? (\r\n              <div className={cn(\r\n                \"flex h-full flex-col items-center justify-center rounded-xl border border-dashed p-8 text-center\",\r\n                isDark\r\n                  ? \"border-zinc-700 bg-zinc-800/30\"\r\n                  : \"border-slate-200 bg-slate-50/30\"\r\n              )}>\r\n                <div className={cn(\r\n                  \"mb-3 rounded-full p-3\",\r\n                  isDark ? \"bg-emerald-900/30\" : \"bg-emerald-50\"\r\n                )}>\r\n                  <CheckSquare className={cn(\r\n                    \"h-6 w-6\",\r\n                    isDark ? \"text-emerald-400\" : \"text-emerald-600\"\r\n                  )} />\r\n                </div>\r\n                <p className={cn(\r\n                  \"text-sm font-medium\",\r\n                  isDark ? \"text-white\" : \"text-slate-900\"\r\n                )}>All caught up!</p>\r\n                <p className={cn(\r\n                  \"mt-1 text-xs\",\r\n                  isDark ? \"text-zinc-500\" : \"text-slate-500\"\r\n                )}>\r\n                  You have no pending tasks. We&apos;ll notify you when new items arrive.\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {outstandingTasks.slice(0, 5).map((task) => {\r\n                  const dueCopy = formatDueCopy(task.due_at, task.status)\r\n                  const isOverdue = dueCopy.includes('overdue') || task.status === 'overdue'\r\n\r\n                  return (\r\n                    <div\r\n                      key={task.id}\r\n                      className={cn(\r\n                        'group relative flex items-center justify-between gap-4 rounded-xl border p-4 transition-all',\r\n                        isOverdue\r\n                          ? isDark\r\n                            ? 'border-rose-700 bg-rose-900/20 hover:border-rose-600'\r\n                            : 'border-rose-200 bg-rose-50/30 hover:border-rose-300'\r\n                          : isDark\r\n                            ? 'border-zinc-700 bg-zinc-800/50 hover:bg-zinc-800 hover:border-amber-700 hover:shadow-sm'\r\n                            : 'border-slate-200 bg-white/50 hover:bg-white hover:border-amber-200 hover:shadow-sm'\r\n                      )}\r\n                    >\r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <p className={cn(\r\n                            \"font-semibold\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                          )}>{task.title}</p>\r\n                          {isOverdue && (\r\n                            <Badge variant=\"destructive\" className=\"h-5 px-1.5 text-[10px]\">Overdue</Badge>\r\n                          )}\r\n                        </div>\r\n                        <div className={cn(\r\n                          \"flex flex-wrap items-center gap-2 text-xs\",\r\n                          isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n                        )}>\r\n                          <span className={cn('inline-flex items-center gap-1 rounded-full border px-2 py-0.5 font-medium', getPriorityStyles(task.priority, isDark))}>\r\n                            {task.priority === 'high' && <AlertTriangle className=\"h-3 w-3\" />}\r\n                            {task.priority}\r\n                          </span>\r\n                          <Separator orientation=\"vertical\" className={cn(\r\n                            \"h-3\",\r\n                            isDark && \"bg-zinc-700\"\r\n                          )} />\r\n                          <span className=\"inline-flex items-center gap-1\">\r\n                            <CalendarClock className={cn(\r\n                              \"h-3.5 w-3.5\",\r\n                              isDark ? \"text-zinc-500\" : \"text-slate-400\"\r\n                            )} />\r\n                            {dueCopy}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <Link href={`/versotech_main/tasks?id=${task.id}`}>\r\n                        <Button size=\"sm\" className={cn(\r\n                          \"gap-1 shadow-sm transition-all\",\r\n                          isOverdue\r\n                            ? \"bg-rose-600 hover:bg-rose-700\"\r\n                            : isDark\r\n                              ? \"bg-white text-black hover:bg-zinc-200 group-hover:bg-amber-500\"\r\n                              : \"bg-slate-900 hover:bg-slate-800 group-hover:bg-amber-900\"\r\n                        )}>\r\n                          Start\r\n                          <Play className=\"h-3 w-3 fill-current\" />\r\n                        </Button>\r\n                      </Link>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Recent Activity */}\r\n        <Card className=\"glass-panel flex flex-col border-0\">\r\n          <CardHeader className={cn(\r\n            \"border-b p-5\",\r\n            isDark ? \"border-white/10\" : \"border-slate-100/50\"\r\n          )}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <CardTitle className={cn(\r\n                  \"text-base font-semibold\",\r\n                  isDark ? \"text-white\" : \"text-slate-900\"\r\n                )}>Recent Updates</CardTitle>\r\n                <CardDescription className={cn(\r\n                  \"mt-1 text-sm\",\r\n                  isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n                )}>\r\n                  Portfolio activity stream.\r\n                </CardDescription>\r\n              </div>\r\n              <Link href=\"/versotech_main/inbox\">\r\n                <Button variant=\"ghost\" size=\"sm\" className={cn(\r\n                  \"h-8 w-8 p-0\",\r\n                  isDark ? \"hover:bg-white/10\" : \"hover:bg-slate-100/50\"\r\n                )}>\r\n                  <ArrowUpRight className=\"h-4 w-4\" />\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent className=\"flex-1 p-5\">\r\n            {recentActivity.length === 0 ? (\r\n              <div className={cn(\r\n                \"flex h-full flex-col items-center justify-center rounded-xl border border-dashed p-6 text-center\",\r\n                isDark\r\n                  ? \"border-zinc-700 bg-zinc-800/30\"\r\n                  : \"border-slate-200 bg-slate-50/30\"\r\n              )}>\r\n                <Clock className={cn(\r\n                  \"mb-3 h-8 w-8\",\r\n                  isDark ? \"text-zinc-600\" : \"text-slate-300\"\r\n                )} />\r\n                <p className={cn(\r\n                  \"text-xs\",\r\n                  isDark ? \"text-zinc-500\" : \"text-slate-500\"\r\n                )}>No recent activity to report.</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {recentActivity.slice(0, 5).map((activity) => {\r\n                  const meta = getActivityMeta(activity, isDark)\r\n                  const ActivityIcon: IconType = meta.icon\r\n                  const createdAt = new Date(activity.created_at)\r\n                  const timestamp = createdAt.toLocaleDateString(undefined, { month: 'short', day: 'numeric' })\r\n\r\n                  return (\r\n                    <div key={activity.id} className=\"flex gap-3 group\">\r\n                      <div className={cn('flex h-8 w-8 shrink-0 items-center justify-center rounded-full border shadow-sm transition-transform group-hover:scale-110', meta.tone)}>\r\n                        <ActivityIcon className=\"h-4 w-4\" />\r\n                      </div>\r\n                      <div className=\"min-w-0 flex-1 space-y-0.5\">\r\n                        <div className=\"flex items-start justify-between gap-2\">\r\n                          <p className={cn(\r\n                            \"text-sm font-medium line-clamp-2 transition-colors group-hover:text-amber-600\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                          )}>\r\n                            {activity.title || 'Update'}\r\n                          </p>\r\n                          <span className={cn(\r\n                            \"shrink-0 text-[10px]\",\r\n                            isDark ? \"text-zinc-500\" : \"text-slate-400\"\r\n                          )}>{timestamp}</span>\r\n                        </div>\r\n                        {activity.description && (\r\n                          <p className={cn(\r\n                            \"text-xs line-clamp-1\",\r\n                            isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n                          )}>{activity.description}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n          {recentActivity.length > 0 && (\r\n            <CardFooter className={cn(\r\n              \"border-t p-3\",\r\n              isDark ? \"border-white/10\" : \"border-slate-100/50\"\r\n            )}>\r\n              <Link href=\"/versotech_main/inbox\" className=\"w-full\">\r\n                <Button variant=\"ghost\" size=\"sm\" className={cn(\r\n                  \"w-full justify-between text-xs\",\r\n                  isDark\r\n                    ? \"text-zinc-400 hover:text-white hover:bg-white/10\"\r\n                    : \"text-slate-500 hover:text-slate-900 hover:bg-slate-100/50\"\r\n                )}>\r\n                  View full history\r\n                  <ChevronRight className=\"h-3 w-3\" />\r\n                </Button>\r\n              </Link>\r\n            </CardFooter>\r\n          )}\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Quick Actions Grid */}\r\n      <Card className=\"glass-panel border-0\">\r\n        <CardContent className=\"grid gap-4 p-6 md:grid-cols-2 lg:grid-cols-5\">\r\n          {[\r\n            {\r\n              href: '/versotech_main/opportunities',\r\n              label: 'Holdings',\r\n              description: 'Portfolio & NAV',\r\n              icon: Target,\r\n              color: 'text-indigo-600'\r\n            },\r\n            {\r\n              href: '/versotech_main/tasks',\r\n              label: 'Tasks',\r\n              description: 'Action items',\r\n              icon: CheckSquare,\r\n              color: 'text-blue-600'\r\n            },\r\n            {\r\n              href: '/versotech_main/documents',\r\n              label: 'Documents',\r\n              description: 'Statements',\r\n              icon: FileText,\r\n              color: 'text-emerald-600'\r\n            },\r\n            {\r\n              href: '/versotech_main/tasks',\r\n              label: 'Calendar',\r\n              description: 'Deadlines',\r\n              icon: CalendarDays,\r\n              color: 'text-amber-600'\r\n            },\r\n            {\r\n              href: '/versotech_main/inbox',\r\n              label: 'Support',\r\n              description: 'Contact team',\r\n              icon: MessageSquare,\r\n              color: 'text-purple-600'\r\n            }\r\n          ].map((action) => {\r\n            const Icon = action.icon\r\n            return (\r\n              <Link\r\n                key={action.label}\r\n                href={action.href}\r\n                className={cn(\r\n                  \"glass-card group flex flex-col gap-3 rounded-xl border-0 ring-1 p-4 hover:ring-amber-200/50\",\r\n                  isDark ? \"ring-white/10\" : \"ring-slate-200/50\"\r\n                )}\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className={cn(\r\n                    \"rounded-lg p-2 transition-colors group-hover:bg-amber-100\",\r\n                    isDark ? \"bg-zinc-800 group-hover:bg-amber-900/50\" : \"bg-slate-50\",\r\n                    action.color\r\n                  )}>\r\n                    <Icon className=\"h-5 w-5\" />\r\n                  </div>\r\n                  <ArrowUpRight className={cn(\r\n                    \"h-4 w-4 transition-colors group-hover:text-amber-600\",\r\n                    isDark ? \"text-zinc-600\" : \"text-slate-300\"\r\n                  )} />\r\n                </div>\r\n                <div>\r\n                  <p className={cn(\r\n                    \"font-semibold transition-colors group-hover:text-amber-600\",\r\n                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                  )}>{action.label}</p>\r\n                  <p className={cn(\r\n                    \"text-xs\",\r\n                    isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n                  )}>{action.description}</p>\r\n                </div>\r\n              </Link>\r\n            )\r\n          })}\r\n        </CardContent>\r\n      </Card>\r\n    </section>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3131, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/dashboard/featured-deals-section.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Link from 'next/link'\r\nimport {\r\n  ArrowUpRight,\r\n  Building2,\r\n  CalendarClock,\r\n  MapPin,\r\n  Target,\r\n  Briefcase,\r\n  Lock\r\n} from 'lucide-react'\r\n\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle\r\n} from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\r\nimport { cn } from '@/lib/utils'\r\nimport { useTheme } from '@/components/theme-provider'\r\n\r\nexport interface FeaturedDealFeeStructure {\r\n  id: string\r\n  price_per_share_text: string | null\r\n  allocation_up_to: number | null\r\n  minimum_ticket: number | null\r\n}\r\n\r\nexport interface FeaturedDeal {\r\n  id: string\r\n  name: string\r\n  status: string\r\n  deal_type: string\r\n  currency: string | null\r\n  offer_unit_price: number | null\r\n  open_at: string | null\r\n  close_at: string | null\r\n  company_name: string | null\r\n  company_logo_url: string | null\r\n  sector: string | null\r\n  location: string | null\r\n  vehicles?: {\r\n    id: string\r\n    name: string\r\n    type: string | null\r\n  } | null\r\n  fee_structure?: FeaturedDealFeeStructure | null\r\n}\r\n\r\ninterface FeaturedDealsSectionProps {\r\n  deals: FeaturedDeal[]\r\n}\r\n\r\nfunction getStatusStyles(status: string, isDark: boolean): string {\r\n  const styles: Record<string, { light: string; dark: string }> = {\r\n    open: {\r\n      light: 'bg-emerald-50 text-emerald-700 border-emerald-200 ring-emerald-500/20',\r\n      dark: 'bg-emerald-900/30 text-emerald-400 border-emerald-700 ring-emerald-500/20'\r\n    },\r\n    allocation_pending: {\r\n      light: 'bg-amber-50 text-amber-700 border-amber-200 ring-amber-500/20',\r\n      dark: 'bg-amber-900/30 text-amber-400 border-amber-700 ring-amber-500/20'\r\n    },\r\n    draft: {\r\n      light: 'bg-slate-50 text-slate-600 border-slate-200 ring-slate-500/20',\r\n      dark: 'bg-zinc-800 text-zinc-400 border-zinc-700 ring-zinc-500/20'\r\n    },\r\n    cancelled: {\r\n      light: 'bg-rose-50 text-rose-700 border-rose-200 ring-rose-500/20',\r\n      dark: 'bg-rose-900/30 text-rose-400 border-rose-700 ring-rose-500/20'\r\n    },\r\n    closed: {\r\n      light: 'bg-slate-50 text-slate-600 border-slate-200 ring-slate-500/20',\r\n      dark: 'bg-zinc-800 text-zinc-400 border-zinc-700 ring-zinc-500/20'\r\n    }\r\n  }\r\n  const style = styles[status] ?? styles.open\r\n  return isDark ? style.dark : style.light\r\n}\r\n\r\nconst typeLabels: Record<string, string> = {\r\n  equity_secondary: 'Secondary Equity',\r\n  equity_primary: 'Primary Equity',\r\n  credit_trade_finance: 'Credit & Trade Finance',\r\n  other: 'Other Opportunity'\r\n}\r\n\r\nfunction formatDeadlineCopy(closeAt: string | null, status: string) {\r\n  if (!closeAt) {\r\n    return status === 'closed' ? 'Closed' : 'Timeline to be announced'\r\n  }\r\n\r\n  const closeDate = new Date(closeAt)\r\n  const now = new Date()\r\n\r\n  if (status === 'closed' || closeDate < now) {\r\n    return `Closed ${closeDate.toLocaleDateString()}`\r\n  }\r\n\r\n  const diffMs = closeDate.getTime() - now.getTime()\r\n  const diffDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24))\r\n\r\n  if (diffDays <= 0) return 'Closing soon'\r\n  if (diffDays === 1) return 'Closes tomorrow'\r\n  if (diffDays <= 14) return `Closes in ${diffDays} days`\r\n\r\n  return `Closes ${closeDate.toLocaleDateString()}`\r\n}\r\n\r\nfunction formatCurrency(amount: number | null, currency: string | null) {\r\n  if (amount === null || amount === undefined) return null\r\n  try {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: currency ?? 'USD',\r\n      maximumFractionDigits: amount >= 1000 ? 0 : 2\r\n    }).format(amount)\r\n  } catch {\r\n    return `${currency ?? 'USD'} ${amount.toLocaleString()}`\r\n  }\r\n}\r\n\r\nexport function FeaturedDealsSection({ deals }: FeaturedDealsSectionProps) {\r\n  const { theme } = useTheme()\r\n  const isDark = theme === 'staff-dark'\r\n  const safeDeals = Array.isArray(deals) ? deals.filter(Boolean) : []\r\n\r\n  return (\r\n    <section className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-2 md:flex-row md:items-end md:justify-between\">\r\n        <div>\r\n          <h2 className={cn(\r\n            \"text-2xl font-medium font-serif\",\r\n            isDark ? \"text-white\" : \"text-slate-900\"\r\n          )}>Featured Opportunities</h2>\r\n          <p className={cn(\r\n            \"text-sm\",\r\n            isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n          )}>Exclusive investment access curated for your mandate.</p>\r\n        </div>\r\n        <Link href=\"/versotech_main/opportunities\">\r\n          <Button variant=\"outline\" className={cn(\r\n            \"gap-2\",\r\n            isDark\r\n              ? \"border-zinc-700 text-zinc-300 hover:bg-zinc-800 hover:text-white\"\r\n              : \"border-slate-300 text-slate-700 hover:bg-slate-50 hover:text-slate-900\"\r\n          )}>\r\n            View all deals\r\n            <ArrowUpRight className=\"h-4 w-4\" />\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n\r\n      {safeDeals.length === 0 ? (\r\n        <Card className={cn(\r\n          \"glass-panel border-dashed\",\r\n          isDark ? \"border-zinc-700\" : \"border-slate-300\"\r\n        )}>\r\n          <div className=\"flex flex-col items-center justify-center px-6 py-12 text-center\">\r\n            <div className={cn(\r\n              \"mb-4 rounded-full p-4 shadow-sm\",\r\n              isDark ? \"bg-zinc-800\" : \"bg-slate-100\"\r\n            )}>\r\n              <Briefcase className={cn(\r\n                \"h-8 w-8\",\r\n                isDark ? \"text-zinc-500\" : \"text-slate-400\"\r\n              )} />\r\n            </div>\r\n            <CardTitle className={cn(\r\n              \"text-lg font-semibold\",\r\n              isDark ? \"text-white\" : \"text-slate-900\"\r\n            )}>No active opportunities</CardTitle>\r\n            <CardDescription className={cn(\r\n              \"mt-2 max-w-md\",\r\n              isDark ? \"text-zinc-400\" : \"text-slate-600\"\r\n            )}>\r\n              There are currently no deals matching your profile. You can browse our complete historical archive or request access to specific sectors.\r\n            </CardDescription>\r\n            <div className=\"mt-6 flex gap-3\">\r\n              <Link href=\"/versotech_main/opportunities?view=archive\">\r\n                <Button variant=\"outline\" className={cn(\r\n                  \"gap-2\",\r\n                  isDark && \"border-zinc-700 text-zinc-300 hover:bg-zinc-800\"\r\n                )}>\r\n                  Browse archive\r\n                </Button>\r\n              </Link>\r\n              <Link href=\"/versotech_main/inbox\">\r\n                <Button className={cn(\r\n                  \"gap-2\",\r\n                  isDark\r\n                    ? \"bg-white text-black hover:bg-zinc-200\"\r\n                    : \"bg-slate-900 text-white hover:bg-slate-800\"\r\n                )}>\r\n                  Contact Relationship Manager\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n          {safeDeals.map((deal) => {\r\n            const dealStatus = deal.status ?? 'open'\r\n            const statusClass = getStatusStyles(dealStatus, isDark)\r\n            const typeLabel = typeLabels[deal.deal_type] ?? 'Opportunity'\r\n            const headline = deal.company_name || deal.name\r\n            const initial = (headline ?? 'V').trim().charAt(0).toUpperCase() || 'V'\r\n            const closingCopy = formatDeadlineCopy(deal.close_at, dealStatus)\r\n            // Priority: fee_structure.price_per_share_text > deal.offer_unit_price\r\n            const priceFromFeeStructure = deal.fee_structure?.price_per_share_text\r\n            const formattedPrice = priceFromFeeStructure\r\n              ? `${deal.currency || 'USD'} ${priceFromFeeStructure}`\r\n              : formatCurrency(deal.offer_unit_price, deal.currency)\r\n\r\n            return (\r\n              <Card key={deal.id} className={cn(\r\n                \"glass-card group relative flex h-full flex-col overflow-hidden rounded-2xl border-0 ring-1 hover:ring-amber-200/50\",\r\n                isDark ? \"ring-white/10\" : \"ring-slate-200/50\"\r\n              )}>\r\n                {/* Premium gradient overlay on hover */}\r\n                <div className={cn(\r\n                  \"pointer-events-none absolute inset-0 bg-gradient-to-br opacity-0 transition-opacity duration-500 group-hover:opacity-100\",\r\n                  isDark\r\n                    ? \"from-amber-900/20 via-zinc-900/10 to-transparent\"\r\n                    : \"from-amber-50/30 via-slate-50/10 to-transparent\"\r\n                )} />\r\n\r\n                <CardHeader className=\"relative space-y-4 p-6\">\r\n                  <div className=\"flex items-start justify-between gap-4\">\r\n                    <div className=\"flex gap-4\">\r\n                      <Avatar className={cn(\r\n                        \"h-14 w-14 border shadow-sm\",\r\n                        isDark ? \"border-zinc-700 bg-zinc-900\" : \"border-slate-100 bg-white\"\r\n                      )}>\r\n                        {deal.company_logo_url ? (\r\n                          <AvatarImage src={deal.company_logo_url} alt={headline ?? deal.name} className=\"object-contain p-2\" />\r\n                        ) : (\r\n                          <AvatarFallback className={cn(\r\n                            \"font-serif text-lg\",\r\n                            isDark ? \"bg-white text-black\" : \"bg-slate-900 text-white\"\r\n                          )}>\r\n                            {initial}\r\n                          </AvatarFallback>\r\n                        )}\r\n                      </Avatar>\r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                          <Badge variant=\"secondary\" className={cn(\r\n                            \"text-[10px] font-medium uppercase tracking-wider\",\r\n                            isDark\r\n                              ? \"bg-zinc-800 text-zinc-400\"\r\n                              : \"bg-slate-100 text-slate-500\"\r\n                          )}>\r\n                            {deal.sector || 'Private Equity'}\r\n                          </Badge>\r\n                          {dealStatus === 'open' && (\r\n                            <Badge variant=\"outline\" className={cn(\r\n                              \"text-[10px] font-semibold uppercase tracking-wider\",\r\n                              isDark\r\n                                ? \"border-emerald-700 bg-emerald-900/30 text-emerald-400\"\r\n                                : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\r\n                            )}>\r\n                              Open\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                        <CardTitle className={cn(\r\n                          \"line-clamp-1 font-serif text-xl transition-colors group-hover:text-amber-600\",\r\n                          isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                          {deal.name}\r\n                        </CardTitle>\r\n                        {deal.company_name && (\r\n                          <CardDescription className={cn(\r\n                            \"line-clamp-1 text-sm\",\r\n                            isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n                          )}>\r\n                            {deal.company_name}\r\n                          </CardDescription>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"relative flex-grow space-y-4 px-6 pb-6\">\r\n                  <div className={cn(\r\n                    \"grid grid-cols-2 gap-4 rounded-xl p-4 transition-colors\",\r\n                    isDark\r\n                      ? \"bg-zinc-800/50 group-hover:bg-zinc-800\"\r\n                      : \"bg-slate-50/50 group-hover:bg-white/50\"\r\n                  )}>\r\n                    <div className=\"space-y-1\">\r\n                      <p className={cn(\r\n                        \"text-[10px] font-medium uppercase tracking-wider\",\r\n                        isDark ? \"text-zinc-500\" : \"text-slate-400\"\r\n                      )}>Unit Price</p>\r\n                      <div className={cn(\r\n                        \"flex items-center gap-1.5 font-semibold\",\r\n                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                      )}>\r\n                        <Target className=\"h-3.5 w-3.5 text-amber-600\" />\r\n                        {formattedPrice || 'TBD'}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"space-y-1\">\r\n                      <p className={cn(\r\n                        \"text-[10px] font-medium uppercase tracking-wider\",\r\n                        isDark ? \"text-zinc-500\" : \"text-slate-400\"\r\n                      )}>Closing</p>\r\n                      <div className={cn(\r\n                        \"flex items-center gap-1.5 font-semibold\",\r\n                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                      )}>\r\n                        <CalendarClock className=\"h-3.5 w-3.5 text-indigo-600\" />\r\n                        <span className=\"line-clamp-1 text-xs\">{closingCopy}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className={cn(\r\n                    \"flex flex-wrap gap-2 text-xs\",\r\n                    isDark ? \"text-zinc-400\" : \"text-slate-500\"\r\n                  )}>\r\n                    <div className={cn(\r\n                      \"flex items-center gap-1.5 rounded-full border px-2.5 py-1 shadow-sm\",\r\n                      isDark ? \"border-zinc-700 bg-zinc-800\" : \"border-slate-100 bg-white\"\r\n                    )}>\r\n                      <Briefcase className={cn(\r\n                        \"h-3 w-3\",\r\n                        isDark ? \"text-zinc-500\" : \"text-slate-400\"\r\n                      )} />\r\n                      {typeLabel}\r\n                    </div>\r\n                    {deal.location && (\r\n                      <div className={cn(\r\n                        \"flex items-center gap-1.5 rounded-full border px-2.5 py-1 shadow-sm\",\r\n                        isDark ? \"border-zinc-700 bg-zinc-800\" : \"border-slate-100 bg-white\"\r\n                      )}>\r\n                        <MapPin className={cn(\r\n                          \"h-3 w-3\",\r\n                          isDark ? \"text-zinc-500\" : \"text-slate-400\"\r\n                        )} />\r\n                        {deal.location}\r\n                      </div>\r\n                    )}\r\n                    {deal.vehicles?.name && (\r\n                      <div className={cn(\r\n                        \"flex items-center gap-1.5 rounded-full border px-2.5 py-1 shadow-sm\",\r\n                        isDark ? \"border-zinc-700 bg-zinc-800\" : \"border-slate-100 bg-white\"\r\n                      )}>\r\n                        <Building2 className={cn(\r\n                          \"h-3 w-3\",\r\n                          isDark ? \"text-zinc-500\" : \"text-slate-400\"\r\n                        )} />\r\n                        {deal.vehicles.name}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </CardContent>\r\n\r\n                <CardFooter className={cn(\r\n                  \"relative border-t p-4\",\r\n                  isDark ? \"border-white/10\" : \"border-slate-100\"\r\n                )}>\r\n                  <Link href={`/versotech_main/opportunities/${deal.id}`} className=\"w-full\">\r\n                    <Button className={cn(\r\n                      \"w-full justify-between shadow-sm group-hover:border-amber-200 group-hover:text-amber-600\",\r\n                      isDark\r\n                        ? \"bg-zinc-800 text-zinc-300 hover:bg-zinc-700 hover:text-white\"\r\n                        : \"bg-white text-slate-700 hover:bg-slate-50 hover:text-slate-900\"\r\n                    )} variant=\"outline\">\r\n                      Review opportunity\r\n                      <ArrowUpRight className=\"h-4 w-4 transition-transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5\" />\r\n                    </Button>\r\n                  </Link>\r\n                </CardFooter>\r\n              </Card>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n    </section>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3698, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/video/video-intro-modal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogDescription\r\n} from '@/components/ui/dialog'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\ninterface VideoIntroModalProps {\r\n  open: boolean\r\n  videoUrl: string\r\n  onComplete: () => Promise<void>\r\n}\r\n\r\nexport function VideoIntroModal({ open, videoUrl, onComplete }: VideoIntroModalProps) {\r\n  const videoRef = useRef<HTMLVideoElement>(null)\r\n  const [videoEnded, setVideoEnded] = useState(false)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [hasError, setHasError] = useState(false)\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      setVideoEnded(false)\r\n      setIsLoading(true)\r\n      setHasError(false)\r\n    }\r\n  }, [open])\r\n\r\n  const handleContinue = async () => {\r\n    setIsSubmitting(true)\r\n    try {\r\n      await onComplete()\r\n    } catch (error) {\r\n      console.error('Error marking video as seen:', error)\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={() => {}}>\r\n      <DialogContent\r\n        className=\"!max-w-[95vw] !w-[1600px] !h-[90vh] !max-h-[90vh] p-0 overflow-hidden bg-background border-border\"\r\n        showCloseButton={false}\r\n        onPointerDownOutside={(e) => e.preventDefault()}\r\n        onEscapeKeyDown={(e) => e.preventDefault()}\r\n      >\r\n        <div className=\"flex flex-col h-full\">\r\n          <DialogHeader className=\"p-6 pb-4 border-b border-border bg-background shrink-0\">\r\n            <DialogTitle className=\"text-xl font-semibold text-foreground\">\r\n              Welcome to VERSO\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-sm text-muted-foreground\">\r\n              Please watch this short introduction to get started with the platform.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          {/* Video Container - overflow-hidden and absolute video */}\r\n          <div className=\"relative flex-1 min-h-0 overflow-hidden\">\r\n            {isLoading && (\r\n              <div className=\"absolute inset-0 flex items-center justify-center bg-background z-10\">\r\n                <Loader2 className=\"h-12 w-12 animate-spin text-foreground\" />\r\n              </div>\r\n            )}\r\n\r\n            {hasError ? (\r\n              <div className=\"absolute inset-0 flex items-center justify-center bg-background text-foreground z-10\">\r\n                <div className=\"text-center p-8\">\r\n                  <p className=\"text-lg font-medium mb-2\">Unable to load video</p>\r\n                  <p className=\"text-sm text-muted-foreground mb-4\">\r\n                    Please check your connection and try again.\r\n                  </p>\r\n                  <Button variant=\"outline\" onClick={() => { setHasError(false); setIsLoading(true); videoRef.current?.load() }}>\r\n                    Retry\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <video\r\n                ref={videoRef}\r\n                className=\"absolute inset-0 w-full h-full object-contain bg-black\"\r\n                src={videoUrl}\r\n                onEnded={() => setVideoEnded(true)}\r\n                onLoadedData={() => setIsLoading(false)}\r\n                onError={() => { setIsLoading(false); setHasError(true) }}\r\n                autoPlay\r\n                playsInline\r\n                controls\r\n                controlsList=\"nodownload noplaybackrate\"\r\n                disablePictureInPicture\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer - ALWAYS visible */}\r\n          <div className=\"p-6 pt-4 border-t border-border bg-background flex justify-end shrink-0\">\r\n            <Button\r\n              size=\"lg\"\r\n              disabled={!videoEnded || isSubmitting}\r\n              onClick={handleContinue}\r\n              className=\"min-w-[160px]\"\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\r\n                  Please wait...\r\n                </>\r\n              ) : videoEnded ? (\r\n                'Get Started'\r\n              ) : (\r\n                'Watch to continue...'\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAOA;AACA;AAXA;;;;;;AAmBO,SAAS,gBAAgB,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAwB;IAClF,MAAM,WAAW,IAAA,sOAAM,EAAmB;IAC1C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,wOAAQ,EAAC;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wOAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,wOAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wOAAQ,EAAC;IAEjD,IAAA,yOAAS,EAAC;QACR,IAAI,MAAM;YACR,cAAc;YACd,aAAa;YACb,YAAY;QACd;IACF,GAAG;QAAC;KAAK;IAET,MAAM,iBAAiB;QACrB,gBAAgB;QAChB,IAAI;YACF,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;QAChD,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,qQAAC,mKAAM;QAAC,MAAM;QAAM,cAAc,KAAO;kBACvC,cAAA,qQAAC,0KAAa;YACZ,WAAU;YACV,iBAAiB;YACjB,sBAAsB,CAAC,IAAM,EAAE,cAAc;YAC7C,iBAAiB,CAAC,IAAM,EAAE,cAAc;sBAExC,cAAA,qQAAC;gBAAI,WAAU;;kCACb,qQAAC,yKAAY;wBAAC,WAAU;;0CACtB,qQAAC,wKAAW;gCAAC,WAAU;0CAAwC;;;;;;0CAG/D,qQAAC,8KAAiB;gCAAC,WAAU;0CAAgC;;;;;;;;;;;;kCAM/D,qQAAC;wBAAI,WAAU;;4BACZ,2BACC,qQAAC;gCAAI,WAAU;0CACb,cAAA,qQAAC,mPAAO;oCAAC,WAAU;;;;;;;;;;;4BAItB,yBACC,qQAAC;gCAAI,WAAU;0CACb,cAAA,qQAAC;oCAAI,WAAU;;sDACb,qQAAC;4CAAE,WAAU;sDAA2B;;;;;;sDACxC,qQAAC;4CAAE,WAAU;sDAAqC;;;;;;sDAGlD,qQAAC,mKAAM;4CAAC,SAAQ;4CAAU,SAAS;gDAAQ,YAAY;gDAAQ,aAAa;gDAAO,SAAS,OAAO,EAAE;4CAAO;sDAAG;;;;;;;;;;;;;;;;qDAMnH,qQAAC;gCACC,KAAK;gCACL,WAAU;gCACV,KAAK;gCACL,SAAS,IAAM,cAAc;gCAC7B,cAAc,IAAM,aAAa;gCACjC,SAAS;oCAAQ,aAAa;oCAAQ,YAAY;gCAAM;gCACxD,QAAQ;gCACR,WAAW;gCACX,QAAQ;gCACR,cAAa;gCACb,uBAAuB;;;;;;;;;;;;kCAM7B,qQAAC;wBAAI,WAAU;kCACb,cAAA,qQAAC,mKAAM;4BACL,MAAK;4BACL,UAAU,CAAC,cAAc;4BACzB,SAAS;4BACT,WAAU;sCAET,6BACC;;kDACE,qQAAC,mPAAO;wCAAC,WAAU;;;;;;oCAA8B;;+CAGjD,aACF,gBAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhB"}},
    {"offset": {"line": 3911, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 3935, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/calendar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react'\r\nimport { DayPicker } from 'react-day-picker'\r\n\r\nimport { cn } from '@/lib/utils'\r\nimport { buttonVariants } from '@/components/ui/button'\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn('p-3', className)}\r\n      classNames={{\r\n        months: 'flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0',\r\n        month: 'space-y-4',\r\n        caption: 'flex justify-center pt-1 relative items-center',\r\n        caption_label: 'text-sm font-medium',\r\n        nav: 'space-x-1 flex items-center',\r\n        nav_button: cn(\r\n          buttonVariants({ variant: 'outline' }),\r\n          'h-9 w-9 md:h-7 md:w-7 bg-transparent p-0 opacity-50 hover:opacity-100'\r\n        ),\r\n        nav_button_previous: 'absolute left-1',\r\n        nav_button_next: 'absolute right-1',\r\n        table: 'w-full border-collapse space-y-1',\r\n        head_row: 'flex',\r\n        head_cell:\r\n          'text-muted-foreground rounded-md w-11 md:w-9 font-normal text-[0.8rem]',\r\n        row: 'flex w-full mt-2',\r\n        cell: 'h-11 w-11 md:h-9 md:w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20',\r\n        day: cn(\r\n          buttonVariants({ variant: 'ghost' }),\r\n          'h-11 w-11 md:h-9 md:w-9 p-0 font-normal aria-selected:opacity-100'\r\n        ),\r\n        day_range_end: 'day-range-end',\r\n        day_selected:\r\n          'bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground',\r\n        day_today: 'bg-accent text-accent-foreground',\r\n        day_outside:\r\n          'day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30',\r\n        day_disabled: 'text-muted-foreground opacity-50',\r\n        day_range_middle:\r\n          'aria-selected:bg-accent aria-selected:text-accent-foreground',\r\n        day_hidden: 'invisible',\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        Chevron: ({ orientation }) => {\r\n          return orientation === 'left' ? (\r\n            <ChevronLeft className=\"h-4 w-4\" />\r\n          ) : (\r\n            <ChevronRight className=\"h-4 w-4\" />\r\n          )\r\n        },\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCalendar.displayName = 'Calendar'\r\n\r\nexport { Calendar }\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;AAEA;AACA;AAPA;;;;;;AAWA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,qQAAC,sMAAS;QACR,iBAAiB;QACjB,WAAW,IAAA,gJAAE,EAAC,OAAO;QACrB,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,KAAK;YACL,YAAY,IAAA,gJAAE,EACZ,IAAA,2KAAc,EAAC;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,IAAA,gJAAE,EACL,IAAA,2KAAc,EAAC;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,GAAG,UAAU;QACf;QACA,YAAY;YACV,SAAS,CAAC,EAAE,WAAW,EAAE;gBACvB,OAAO,gBAAgB,uBACrB,qQAAC,0PAAW;oBAAC,WAAU;;;;;2CAEvB,qQAAC,6PAAY;oBAAC,WAAU;;;;;;YAE5B;QACF;QACC,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 4013, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 max-w-[calc(100vw-2rem)] origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\n          className\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBAAO,qQAAC,kMAAqB;QAAC,aAAU;QAAW,GAAG,KAAK;;;;;;AAC7D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,qQAAC,qMAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,GAAG,OACmD;IACtD,qBACE,qQAAC,oMAAuB;kBACtB,cAAA,qQAAC,qMAAwB;YACvB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,gJAAE,EACX,2fACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,qQAAC,oMAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE"}},
    {"offset": {"line": 4084, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/date-range-picker.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport { CalendarIcon } from 'lucide-react'\r\nimport { format } from 'date-fns'\r\nimport type { DateRange } from 'react-day-picker'\r\n\r\nimport { cn } from '@/lib/utils'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Calendar } from '@/components/ui/calendar'\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from '@/components/ui/popover'\r\n\r\ninterface DateRangePickerProps {\r\n  value?: DateRange\r\n  onChange?: (range: DateRange | undefined) => void\r\n  className?: string\r\n  disabled?: boolean\r\n  variant?: 'default' | 'dark'\r\n}\r\n\r\nexport function DateRangePicker({\r\n  value,\r\n  onChange,\r\n  className,\r\n  disabled,\r\n  variant = 'default',\r\n}: DateRangePickerProps) {\r\n  const isDark = variant === 'dark'\r\n  const [date, setDate] = React.useState<DateRange | undefined>(value)\r\n\r\n  React.useEffect(() => {\r\n    setDate(value)\r\n  }, [value])\r\n\r\n  const handleSelect = (range: DateRange | undefined) => {\r\n    setDate(range)\r\n    onChange?.(range)\r\n  }\r\n\r\n  return (\r\n    <div className={cn('grid gap-2', className)}>\r\n      <Popover>\r\n        <PopoverTrigger asChild>\r\n          <Button\r\n            id=\"date\"\r\n            variant=\"outline\"\r\n            disabled={disabled}\r\n            className={cn(\r\n              'justify-start text-left font-normal',\r\n              isDark\r\n                ? 'bg-black/40 border-white/10 text-slate-200 hover:bg-white/10'\r\n                : 'bg-background border-input hover:bg-accent hover:text-accent-foreground',\r\n              !date && 'text-muted-foreground'\r\n            )}\r\n          >\r\n            <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n            {date?.from ? (\r\n              date.to ? (\r\n                <>\r\n                  {format(date.from, 'LLL dd, y')} -{' '}\r\n                  {format(date.to, 'LLL dd, y')}\r\n                </>\r\n              ) : (\r\n                format(date.from, 'LLL dd, y')\r\n              )\r\n            ) : (\r\n              <span>Pick a date range</span>\r\n            )}\r\n          </Button>\r\n        </PopoverTrigger>\r\n        <PopoverContent\r\n          className={cn(\r\n            'w-auto p-0',\r\n            isDark ? 'bg-[#0A1628] border-white/10' : 'bg-popover border-border'\r\n          )}\r\n          align=\"start\"\r\n        >\r\n          <Calendar\r\n            initialFocus\r\n            mode=\"range\"\r\n            defaultMonth={date?.from}\r\n            selected={date}\r\n            onSelect={handleSelect}\r\n            numberOfMonths={2}\r\n          />\r\n        </PopoverContent>\r\n      </Popover>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AAVA;;;;;;;;;AAwBO,SAAS,gBAAgB,EAC9B,KAAK,EACL,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,UAAU,SAAS,EACE;IACrB,MAAM,SAAS,YAAY;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,wOAAc,CAAwB;IAE9D,yOAAe,CAAC;QACd,QAAQ;IACV,GAAG;QAAC;KAAM;IAEV,MAAM,eAAe,CAAC;QACpB,QAAQ;QACR,WAAW;IACb;IAEA,qBACE,qQAAC;QAAI,WAAW,IAAA,gJAAE,EAAC,cAAc;kBAC/B,cAAA,qQAAC,qKAAO;;8BACN,qQAAC,4KAAc;oBAAC,OAAO;8BACrB,cAAA,qQAAC,mKAAM;wBACL,IAAG;wBACH,SAAQ;wBACR,UAAU;wBACV,WAAW,IAAA,gJAAE,EACX,uCACA,SACI,iEACA,2EACJ,CAAC,QAAQ;;0CAGX,qQAAC,qPAAY;gCAAC,WAAU;;;;;;4BACvB,MAAM,OACL,KAAK,EAAE,iBACL;;oCACG,IAAA,sLAAM,EAAC,KAAK,IAAI,EAAE;oCAAa;oCAAG;oCAClC,IAAA,sLAAM,EAAC,KAAK,EAAE,EAAE;;+CAGnB,IAAA,sLAAM,EAAC,KAAK,IAAI,EAAE,6BAGpB,qQAAC;0CAAK;;;;;;;;;;;;;;;;;8BAIZ,qQAAC,4KAAc;oBACb,WAAW,IAAA,gJAAE,EACX,cACA,SAAS,iCAAiC;oBAE5C,OAAM;8BAEN,cAAA,qQAAC,uKAAQ;wBACP,YAAY;wBACZ,MAAK;wBACL,cAAc,MAAM;wBACpB,UAAU;wBACV,UAAU;wBACV,gBAAgB;;;;;;;;;;;;;;;;;;;;;;AAM5B"}},
    {"offset": {"line": 4197, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/partner/FeeModelView.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Loader2, FileSignature, CheckCircle2, XCircle } from 'lucide-react'\nimport { formatCurrency } from '@/lib/format'\nimport { toast } from 'sonner'\n\r\ntype FeeComponent = {\r\n  id: string\r\n  kind: string\r\n  rate_bps: number | string | null\r\n  flat_amount: number | string | null\r\n  calc_method: string | null\r\n  frequency: string | null\r\n}\r\n\r\ntype FeePlan = {\n  id: string\n  name: string\n  description: string | null\n  status: string | null\n  is_active: boolean\n  is_default: boolean\n  effective_from: string | null\n  effective_until: string | null\n  deal: {\n    id: string\r\n    name: string\r\n  } | null\r\n  fee_components: FeeComponent[]\r\n}\r\n\r\nconst FEE_KIND_LABELS: Record<string, string> = {\r\n  subscription: 'Subscription Fee',\r\n  management: 'Management Fee',\r\n  performance: 'Performance Fee',\r\n  flat: 'Flat Fee'\r\n}\r\n\r\nconst SUMMARY_KINDS = ['subscription', 'management', 'performance'] as const\n\nconst STATUS_LABELS: Record<string, string> = {\n  draft: 'Draft',\n  sent: 'Pending Approval',\n  pending_signature: 'Pending Signature',\n  accepted: 'Accepted',\n  rejected: 'Rejected'\n}\n\nconst STATUS_STYLES: Record<string, string> = {\n  accepted: 'bg-green-500/20 text-green-400 border-green-500/30',\n  rejected: 'bg-red-500/20 text-red-400 border-red-500/30',\n  sent: 'bg-amber-500/20 text-amber-400 border-amber-500/30',\n  pending_signature: 'bg-amber-500/20 text-amber-400 border-amber-500/30',\n  draft: 'bg-slate-500/20 text-slate-300 border-slate-500/30'\n}\n\nfunction formatComponentValue(component?: FeeComponent): string {\n  if (!component) return 'â€”'\n  if (component.rate_bps !== null && component.rate_bps !== undefined) {\r\n    const rateBps = Number(component.rate_bps)\r\n    if (!Number.isNaN(rateBps)) {\r\n      return `${rateBps / 100}%`\r\n    }\r\n  }\r\n  if (component.flat_amount !== null && component.flat_amount !== undefined) {\r\n    const flatAmount = Number(component.flat_amount)\r\n    if (!Number.isNaN(flatAmount)) {\r\n      return formatCurrency(flatAmount)\r\n    }\r\n  }\r\n  return 'â€”'\r\n}\r\n\r\nexport function FeeModelView() {\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [feePlans, setFeePlans] = useState<FeePlan[]>([])\n  const [actionLoadingId, setActionLoadingId] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchFeeModels() {\n      try {\r\n        setLoading(true)\r\n        setError(null)\r\n        const response = await fetch('/api/partners/me/fee-models')\r\n        const data = await response.json()\r\n\r\n        if (!response.ok) {\r\n          throw new Error(data.error || 'Failed to load fee models')\r\n        }\r\n\r\n        setFeePlans(data.fee_models || [])\r\n      } catch (err) {\r\n        console.error('Error fetching fee models:', err)\r\n        setError(err instanceof Error ? err.message : 'Failed to load fee models')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchFeeModels()\n  }, [])\n\n  const updatePlanStatus = (planId: string, status: string) => {\n    setFeePlans(prev =>\n      prev.map(plan => (plan.id === planId ? { ...plan, status } : plan))\n    )\n  }\n\n  const handleDecision = async (planId: string, action: 'accept' | 'reject') => {\n    const reason = action === 'reject'\n      ? prompt('Please provide a rejection reason:')\n      : null\n\n    if (action === 'reject' && !reason) return\n\n    setActionLoadingId(planId)\n    try {\n      const response = await fetch(`/api/fee-plans/${planId}/${action}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: action === 'reject' ? JSON.stringify({ reason }) : undefined\n      })\n\n      const data = await response.json()\n      if (!response.ok) {\n        throw new Error(data.error || `Failed to ${action} fee model`)\n      }\n\n      updatePlanStatus(planId, action === 'accept' ? 'accepted' : 'rejected')\n      toast.success(action === 'accept' ? 'Fee model approved' : 'Fee model rejected')\n    } catch (err) {\n      console.error(`Error during ${action}:`, err)\n      toast.error(err instanceof Error ? err.message : `Failed to ${action} fee model`)\n    } finally {\n      setActionLoadingId(null)\n    }\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <FileSignature className=\"h-5 w-5\" />\r\n          Fee Models\r\n        </CardTitle>\r\n        <CardDescription>Read-only fee structures that apply to you</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center py-8 text-muted-foreground\">\r\n            <Loader2 className=\"h-5 w-5 animate-spin mr-2\" />\r\n            Loading fee models...\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"text-sm text-red-500\">{error}</div>\r\n        ) : feePlans.length === 0 ? (\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            <p>No fee models assigned</p>\r\n            <p className=\"text-sm mt-1\">\r\n              Contact your relationship manager for fee structure details\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\n            {feePlans.map((plan) => {\n              const extraComponents = (plan.fee_components || []).filter(\n                component => !SUMMARY_KINDS.includes(component.kind as typeof SUMMARY_KINDS[number])\n              )\n              const planStatus = plan.status || 'draft'\n              const statusLabel = STATUS_LABELS[planStatus] || planStatus\n              const statusStyle = STATUS_STYLES[planStatus] || STATUS_STYLES.draft\n              const canRespond = planStatus === 'sent'\n\n              return (\n                <div key={plan.id} className=\"rounded-lg border p-4\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div>\n                      <p className=\"font-medium\">{plan.name}</p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {plan.deal?.name ? `Deal: ${plan.deal.name}` : plan.description || 'General fee model'}\n                      </p>\n                    </div>\n                    <div className=\"flex flex-col items-end gap-2\">\n                      <Badge variant={plan.is_active ? 'default' : 'secondary'}>\n                        {plan.is_active ? 'Active' : 'Inactive'}\n                      </Badge>\n                      <Badge variant=\"outline\" className={statusStyle}>\n                        {statusLabel}\n                      </Badge>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid gap-3 sm:grid-cols-3\">\n                    {SUMMARY_KINDS.map((kind) => (\r\n                      <div key={kind} className=\"rounded-md border px-3 py-2\">\r\n                        <p className=\"text-xs text-muted-foreground\">{FEE_KIND_LABELS[kind]}</p>\r\n                        <p className=\"text-sm font-medium\">\r\n                          {formatComponentValue(plan.fee_components.find(component => component.kind === kind))}\r\n                        </p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {extraComponents.length > 0 && (\n                    <div className=\"mt-3 flex flex-wrap gap-2 text-xs text-muted-foreground\">\n                      {extraComponents.map(component => (\n                        <Badge key={component.id} variant=\"outline\">\n                          {FEE_KIND_LABELS[component.kind] || component.kind}:{' '}\n                          {formatComponentValue(component)}\n                        </Badge>\n                      ))}\n                    </div>\n                  )}\n\n                  {canRespond && (\n                    <div className=\"mt-4 flex flex-wrap gap-2\">\n                      <Button\n                        size=\"sm\"\n                        onClick={() => handleDecision(plan.id, 'accept')}\n                        disabled={actionLoadingId === plan.id}\n                        className=\"bg-emerald-600 hover:bg-emerald-700\"\n                      >\n                        {actionLoadingId === plan.id ? (\n                          <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        ) : (\n                          <>\n                            <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n                            Approve\n                          </>\n                        )}\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => handleDecision(plan.id, 'reject')}\n                        disabled={actionLoadingId === plan.id}\n                      >\n                        {actionLoadingId === plan.id ? (\n                          <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        ) : (\n                          <>\n                            <XCircle className=\"h-4 w-4 mr-2\" />\n                            Reject\n                          </>\n                        )}\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              )\n            })}\n          </div>\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4616, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,8LAAG,EACvB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,0OAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,qQAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,IAAA,gJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,0OAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC;QACC,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,0OAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC;QACC,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 4681, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,0OAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,qQAAC,mMAAsB;QACrB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,qQAAC,wMAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,mMAAsB,CAAC,WAAW"}},
    {"offset": {"line": 4719, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/arranger/arranger-onboarding-checklist.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Progress } from '@/components/ui/progress'\nimport {\n  CheckCircle2,\n  Circle,\n  User,\n  FileText,\n  PenTool,\n  Send,\n  ShieldCheck,\n  ArrowRight,\n  Loader2,\n  Clock,\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { useTheme } from '@/components/theme-provider'\n\ninterface OnboardingStatus {\n  arranger_id: string\n  status: string\n  kyc_status: string | null\n  onboarding: {\n    progress_percent: number\n    completed_steps: number\n    total_steps: number\n    is_complete: boolean\n    next_action: {\n      step: string\n      label: string\n      href: string\n    } | null\n    steps: {\n      profile: { complete: boolean; progress: string }\n      documents: { complete: boolean; progress: string }\n      signature: { complete: boolean }\n      submitted: { complete: boolean; submitted_at?: string }\n      approved: { complete: boolean; approved_at?: string }\n    }\n  }\n}\n\ninterface ArrangerOnboardingChecklistProps {\n  arrangerId: string\n  compact?: boolean\n}\n\nexport function ArrangerOnboardingChecklist({\n  arrangerId,\n  compact = false,\n}: ArrangerOnboardingChecklistProps) {\n  const { theme } = useTheme()\n  const isDark = theme === 'staff-dark'\n\n  const [status, setStatus] = useState<OnboardingStatus | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    async function fetchStatus() {\n      try {\n        const response = await fetch('/api/arrangers/me/onboarding-status')\n        if (!response.ok) {\n          throw new Error('Failed to fetch onboarding status')\n        }\n        const data = await response.json()\n        setStatus(data)\n      } catch (err) {\n        console.error('Error fetching onboarding status:', err)\n        setError('Failed to load onboarding status')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchStatus()\n  }, [arrangerId])\n\n  if (loading) {\n    return (\n      <Card className={cn(isDark ? 'bg-white/5 border-white/10' : '')}>\n        <CardContent className=\"py-6 flex items-center justify-center\">\n          <Loader2 className=\"h-5 w-5 animate-spin text-gray-400\" />\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (error || !status) {\n    return null\n  }\n\n  // Don't show if already approved\n  if (status.onboarding.is_complete && compact) {\n    return null\n  }\n\n  const { onboarding } = status\n  const steps = [\n    {\n      id: 'profile',\n      label: 'Complete Profile',\n      description: 'Fill in your company details',\n      icon: User,\n      complete: onboarding.steps.profile.complete,\n      href: '/versotech_main/arranger-profile?tab=entity',\n      progress: onboarding.steps.profile.progress,\n    },\n    {\n      id: 'documents',\n      label: 'Upload Documents',\n      description: 'Required KYC documents',\n      icon: FileText,\n      complete: onboarding.steps.documents.complete,\n      href: '/versotech_main/arranger-profile?tab=documents',\n      progress: onboarding.steps.documents.progress,\n    },\n    {\n      id: 'signature',\n      label: 'Signature Specimen',\n      description: 'Add your signature',\n      icon: PenTool,\n      complete: onboarding.steps.signature.complete,\n      href: '/versotech_main/arranger-profile?tab=signature',\n    },\n    {\n      id: 'submitted',\n      label: 'Submit for Review',\n      description: 'Send for VERSO approval',\n      icon: Send,\n      complete: onboarding.steps.submitted.complete,\n      href: '/versotech_main/arranger-profile?tab=documents',\n    },\n    {\n      id: 'approved',\n      label: 'KYC Approved',\n      description: 'Ready to operate',\n      icon: ShieldCheck,\n      complete: onboarding.steps.approved.complete,\n    },\n  ]\n\n  if (compact) {\n    return (\n      <Card className={cn(\n        'border-indigo-500/30',\n        isDark ? 'bg-indigo-500/10' : 'bg-indigo-50'\n      )}>\n        <CardContent className=\"py-4\">\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-4 flex-1\">\n              <div className=\"p-2 rounded-full bg-indigo-500/20\">\n                <ShieldCheck className=\"h-5 w-5 text-indigo-500\" />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className={cn('font-medium', isDark ? 'text-white' : 'text-gray-900')}>\n                  Complete Your Onboarding\n                </p>\n                <div className=\"flex items-center gap-3 mt-1\">\n                  <Progress\n                    value={onboarding.progress_percent}\n                    className=\"h-2 flex-1 max-w-[200px]\"\n                  />\n                  <span className={cn('text-sm', isDark ? 'text-gray-400' : 'text-gray-600')}>\n                    {onboarding.progress_percent}%\n                  </span>\n                </div>\n              </div>\n            </div>\n            {onboarding.next_action && (\n              <Button asChild size=\"sm\">\n                <Link href={onboarding.next_action.href}>\n                  {onboarding.next_action.label}\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\n                </Link>\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <Card className={cn(isDark ? 'bg-white/5 border-white/10' : '')}>\n      <CardHeader>\n        <CardTitle className={cn(isDark ? 'text-white' : 'text-gray-900')}>\n          Onboarding Checklist\n        </CardTitle>\n        <CardDescription className={cn(isDark ? 'text-gray-400' : 'text-gray-500')}>\n          Complete these steps to activate your arranger account\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Progress Bar */}\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className={cn(isDark ? 'text-gray-400' : 'text-gray-600')}>\n              Progress\n            </span>\n            <span className={cn('font-medium', isDark ? 'text-white' : 'text-gray-900')}>\n              {onboarding.completed_steps} of {onboarding.total_steps} steps\n            </span>\n          </div>\n          <Progress value={onboarding.progress_percent} className=\"h-2\" />\n        </div>\n\n        {/* Steps */}\n        <div className=\"space-y-3 pt-2\">\n          {steps.map((step, index) => {\n            const Icon = step.icon\n            const isNext = onboarding.next_action?.step === step.id ||\n              (onboarding.next_action?.step === 'submit' && step.id === 'submitted') ||\n              (onboarding.next_action?.step === 'pending' && step.id === 'submitted')\n\n            return (\n              <div\n                key={step.id}\n                className={cn(\n                  'flex items-center gap-3 p-3 rounded-lg transition-colors',\n                  step.complete\n                    ? isDark ? 'bg-green-500/10' : 'bg-green-50'\n                    : isNext\n                    ? isDark ? 'bg-indigo-500/10 border border-indigo-500/30' : 'bg-indigo-50 border border-indigo-200'\n                    : isDark ? 'bg-white/5' : 'bg-gray-50'\n                )}\n              >\n                {/* Status Icon */}\n                <div className={cn(\n                  'flex-shrink-0 p-2 rounded-full',\n                  step.complete\n                    ? 'bg-green-500/20 text-green-500'\n                    : isNext\n                    ? 'bg-indigo-500/20 text-indigo-500'\n                    : isDark ? 'bg-gray-700 text-gray-500' : 'bg-gray-200 text-gray-400'\n                )}>\n                  {step.complete ? (\n                    <CheckCircle2 className=\"h-4 w-4\" />\n                  ) : onboarding.next_action?.step === 'pending' && step.id === 'submitted' ? (\n                    <Clock className=\"h-4 w-4\" />\n                  ) : (\n                    <Icon className=\"h-4 w-4\" />\n                  )}\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 min-w-0\">\n                  <p className={cn(\n                    'font-medium text-sm',\n                    step.complete\n                      ? isDark ? 'text-green-400' : 'text-green-700'\n                      : isDark ? 'text-white' : 'text-gray-900'\n                  )}>\n                    {step.label}\n                    {step.progress && !step.complete && (\n                      <span className={cn(\n                        'ml-2 text-xs font-normal',\n                        isDark ? 'text-gray-400' : 'text-gray-500'\n                      )}>\n                        ({step.progress})\n                      </span>\n                    )}\n                  </p>\n                  <p className={cn(\n                    'text-xs',\n                    isDark ? 'text-gray-500' : 'text-gray-500'\n                  )}>\n                    {onboarding.next_action?.step === 'pending' && step.id === 'submitted'\n                      ? 'Awaiting VERSO team review'\n                      : step.description}\n                  </p>\n                </div>\n\n                {/* Action */}\n                {!step.complete && step.href && step.id !== 'approved' && (\n                  <Button\n                    asChild\n                    variant={isNext ? 'default' : 'ghost'}\n                    size=\"sm\"\n                    className=\"flex-shrink-0\"\n                  >\n                    <Link href={step.href}>\n                      {isNext ? 'Start' : 'View'}\n                    </Link>\n                  </Button>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}