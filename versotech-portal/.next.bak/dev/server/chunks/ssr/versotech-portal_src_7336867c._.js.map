{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,0OAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,qQAAC,mMAAsB;QACrB,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,qQAAC,wMAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,mMAAsB,CAAC,WAAW"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,0OAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,qQAAC,oMAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,gJAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,oMAAuB,CAAC,WAAW"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/holdings/portfolio-allocation-chart.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useMemo } from 'react'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { PieChart, ChevronDown, ChevronUp } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\n\r\ninterface AllocationData {\r\n  name: string\r\n  value: number\r\n  percentage: number\r\n}\r\n\r\ninterface PortfolioAllocationChartProps {\r\n  data: AllocationData[]\r\n  maxVisibleItems?: number\r\n  currency?: string\r\n}\r\n\r\n// Refined color palette - sophisticated financial tones\r\nconst COLORS = [\r\n  '#1e3a5f', // Deep navy\r\n  '#0d9488', // Teal\r\n  '#6366f1', // Indigo\r\n  '#d97706', // Amber\r\n  '#dc2626', // Red\r\n  '#059669', // Emerald\r\n  '#8b5cf6', // Purple\r\n  '#0891b2', // Cyan\r\n]\r\n\r\nconst formatCurrency = (value: number, currencySymbol: string = '$') => {\r\n  if (value >= 1000000) {\r\n    return `${currencySymbol}${(value / 1000000).toFixed(2)}M`\r\n  }\r\n  if (value >= 1000) {\r\n    return `${currencySymbol}${(value / 1000).toFixed(0)}K`\r\n  }\r\n  return `${currencySymbol}${value.toFixed(0)}`\r\n}\r\n\r\nexport function PortfolioAllocationChart({\r\n  data,\r\n  maxVisibleItems = 6,\r\n  currency = 'USD'\r\n}: PortfolioAllocationChartProps) {\r\n  const [showAll, setShowAll] = useState(false)\r\n  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null)\r\n\r\n  const isEmpty = !data || data.length === 0\r\n\r\n  const totalValue = useMemo(() =>\r\n    data?.reduce((sum, item) => sum + item.value, 0) || 0\r\n  , [data])\r\n\r\n  // Sort and prepare data\r\n  const { displayData, hiddenCount } = useMemo(() => {\r\n    if (!data || data.length === 0) {\r\n      return { displayData: [], hiddenCount: 0 }\r\n    }\r\n\r\n    const sorted = [...data]\r\n      .filter(item => item.value > 0)\r\n      .sort((a, b) => b.value - a.value)\r\n\r\n    if (showAll || sorted.length <= maxVisibleItems) {\r\n      return { displayData: sorted, hiddenCount: 0 }\r\n    }\r\n\r\n    return {\r\n      displayData: sorted.slice(0, maxVisibleItems),\r\n      hiddenCount: sorted.length - maxVisibleItems\r\n    }\r\n  }, [data, maxVisibleItems, showAll])\r\n\r\n  // Calculate percentages for donut chart\r\n  const chartData = useMemo(() => {\r\n    let cumulativePercentage = 0\r\n    return displayData.map((item, index) => {\r\n      const percentage = totalValue > 0 ? (item.value / totalValue) * 100 : 0\r\n      const startAngle = cumulativePercentage * 3.6 // Convert to degrees\r\n      cumulativePercentage += percentage\r\n      return {\r\n        ...item,\r\n        percentage,\r\n        startAngle,\r\n        endAngle: cumulativePercentage * 3.6,\r\n        color: COLORS[index % COLORS.length]\r\n      }\r\n    })\r\n  }, [displayData, totalValue])\r\n\r\n  if (isEmpty) {\r\n    return (\r\n      <Card className=\"border shadow-sm\">\r\n        <CardHeader className=\"pb-3\">\r\n          <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\r\n            <PieChart className=\"h-4 w-4 text-muted-foreground\" />\r\n            Portfolio Allocation\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"flex items-center justify-center h-[200px] text-muted-foreground\">\r\n            <div className=\"text-center\">\r\n              <PieChart className=\"h-10 w-10 mx-auto mb-2 opacity-20\" />\r\n              <p className=\"text-sm\">No allocation data</p>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  // SVG donut chart\r\n  const size = 180\r\n  const strokeWidth = 32\r\n  const radius = (size - strokeWidth) / 2\r\n  const circumference = 2 * Math.PI * radius\r\n  const centerX = size / 2\r\n  const centerY = size / 2\r\n\r\n  return (\r\n    <Card className=\"border shadow-sm\">\r\n      <CardHeader className=\"pb-2\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\r\n            <PieChart className=\"h-4 w-4 text-muted-foreground\" />\r\n            Portfolio Allocation\r\n          </CardTitle>\r\n          <div className=\"text-right\">\r\n            <p className=\"text-lg font-bold\">{formatCurrency(totalValue)}</p>\r\n            <p className=\"text-xs text-muted-foreground\">{data.filter(d => d.value > 0).length} positions</p>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"pt-0\">\r\n        <div className=\"flex flex-col lg:flex-row items-center gap-6\">\r\n          {/* Donut Chart */}\r\n          <div className=\"relative flex-shrink-0\">\r\n            <svg width={size} height={size} className=\"transform -rotate-90\">\r\n              {/* Background circle */}\r\n              <circle\r\n                cx={centerX}\r\n                cy={centerY}\r\n                r={radius}\r\n                fill=\"none\"\r\n                stroke=\"hsl(var(--muted))\"\r\n                strokeWidth={strokeWidth}\r\n              />\r\n              {/* Data segments */}\r\n              {chartData.map((item, index) => {\r\n                const segmentLength = (item.percentage / 100) * circumference\r\n                const offset = ((chartData.slice(0, index).reduce((acc, d) => acc + d.percentage, 0)) / 100) * circumference\r\n                const isHovered = hoveredIndex === index\r\n\r\n                return (\r\n                  <circle\r\n                    key={`${item.name}-${index}`}\r\n                    cx={centerX}\r\n                    cy={centerY}\r\n                    r={radius}\r\n                    fill=\"none\"\r\n                    stroke={item.color}\r\n                    strokeWidth={isHovered ? strokeWidth + 4 : strokeWidth}\r\n                    strokeDasharray={`${segmentLength} ${circumference - segmentLength}`}\r\n                    strokeDashoffset={-offset}\r\n                    className=\"transition-all duration-200 cursor-pointer\"\r\n                    style={{\r\n                      filter: isHovered ? 'brightness(1.1)' : 'none',\r\n                    }}\r\n                    onMouseEnter={() => setHoveredIndex(index)}\r\n                    onMouseLeave={() => setHoveredIndex(null)}\r\n                  />\r\n                )\r\n              })}\r\n            </svg>\r\n            {/* Center text */}\r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"text-center\">\r\n                {hoveredIndex !== null ? (\r\n                  <>\r\n                    <p className=\"text-lg font-bold\">{chartData[hoveredIndex]?.percentage.toFixed(1)}%</p>\r\n                    <p className=\"text-xs text-muted-foreground truncate max-w-[80px]\">\r\n                      {chartData[hoveredIndex]?.name.split(' ').pop()}\r\n                    </p>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <p className=\"text-lg font-bold\">{displayData.length}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">Holdings</p>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Legend */}\r\n          <div className=\"flex-1 w-full space-y-2\">\r\n            {chartData.map((item, index) => (\r\n              <div\r\n                key={`legend-${item.name}-${index}`}\r\n                className={`flex items-center justify-between py-1.5 px-2 rounded-md transition-colors cursor-pointer ${\r\n                  hoveredIndex === index ? 'bg-muted/50' : 'hover:bg-muted/30'\r\n                }`}\r\n                onMouseEnter={() => setHoveredIndex(index)}\r\n                onMouseLeave={() => setHoveredIndex(null)}\r\n              >\r\n                <div className=\"flex items-center gap-2 min-w-0\">\r\n                  <div\r\n                    className=\"w-3 h-3 rounded-sm flex-shrink-0\"\r\n                    style={{ backgroundColor: item.color }}\r\n                  />\r\n                  <span className=\"text-sm truncate\" title={item.name}>\r\n                    {item.name.length > 25 ? item.name.substring(0, 25) + '...' : item.name}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-3 flex-shrink-0 ml-2\">\r\n                  <span className=\"text-sm font-medium\">{formatCurrency(item.value)}</span>\r\n                  <span\r\n                    className=\"text-xs px-1.5 py-0.5 rounded font-medium min-w-[45px] text-center\"\r\n                    style={{\r\n                      backgroundColor: `${item.color}15`,\r\n                      color: item.color\r\n                    }}\r\n                  >\r\n                    {item.percentage.toFixed(1)}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n\r\n            {/* Show more/less button */}\r\n            {(hiddenCount > 0 || (showAll && data.filter(d => d.value > 0).length > maxVisibleItems)) && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                className=\"w-full h-8 text-xs text-muted-foreground hover:text-foreground mt-2\"\r\n                onClick={() => setShowAll(!showAll)}\r\n              >\r\n                {showAll ? (\r\n                  <>\r\n                    <ChevronUp className=\"h-3 w-3 mr-1.5\" />\r\n                    Show Less\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <ChevronDown className=\"h-3 w-3 mr-1.5\" />\r\n                    Show {hiddenCount} More\r\n                  </>\r\n                )}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 662, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/theme-colors.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useTheme } from '@/components/theme-provider'\r\nimport { useMemo } from 'react'\r\n\r\n/**\r\n * Theme-aware color utilities for charts and dynamic content\r\n *\r\n * This module provides consistent colors that adapt to light/dark mode,\r\n * especially for Recharts which requires inline color props that can't\r\n * use CSS variables directly.\r\n */\r\n\r\nexport interface ChartColorScheme {\r\n  // Grid and axis\r\n  grid: string\r\n  axis: string\r\n  axisLine: string\r\n\r\n  // Tooltip\r\n  tooltip: {\r\n    bg: string\r\n    border: string\r\n    text: string\r\n    label: string\r\n  }\r\n\r\n  // Data visualization colors\r\n  primary: string\r\n  secondary: string\r\n  success: string\r\n  warning: string\r\n  danger: string\r\n  info: string\r\n\r\n  // Gradient stops\r\n  gradientStart: string\r\n  gradientEnd: string\r\n\r\n  // Chart-specific\r\n  area: {\r\n    fill: string\r\n    stroke: string\r\n  }\r\n  bar: {\r\n    fill: string\r\n    hover: string\r\n  }\r\n  line: {\r\n    stroke: string\r\n    dot: string\r\n    activeDot: string\r\n  }\r\n  pie: {\r\n    stroke: string\r\n  }\r\n}\r\n\r\n// Light mode chart colors\r\nconst lightColors: ChartColorScheme = {\r\n  grid: '#e5e7eb',\r\n  axis: '#6b7280',\r\n  axisLine: '#e5e7eb',\r\n\r\n  tooltip: {\r\n    bg: '#ffffff',\r\n    border: '#e5e7eb',\r\n    text: '#111827',\r\n    label: '#6b7280',\r\n  },\r\n\r\n  primary: '#3b82f6',\r\n  secondary: '#8b5cf6',\r\n  success: '#10b981',\r\n  warning: '#f59e0b',\r\n  danger: '#ef4444',\r\n  info: '#0ea5e9',\r\n\r\n  gradientStart: '#3b82f6',\r\n  gradientEnd: 'rgba(59, 130, 246, 0.1)',\r\n\r\n  area: {\r\n    fill: 'rgba(59, 130, 246, 0.1)',\r\n    stroke: '#3b82f6',\r\n  },\r\n  bar: {\r\n    fill: '#3b82f6',\r\n    hover: '#2563eb',\r\n  },\r\n  line: {\r\n    stroke: '#3b82f6',\r\n    dot: '#ffffff',\r\n    activeDot: '#3b82f6',\r\n  },\r\n  pie: {\r\n    stroke: '#ffffff',\r\n  },\r\n}\r\n\r\n// Dark mode chart colors\r\nconst darkColors: ChartColorScheme = {\r\n  grid: '#27272a',\r\n  axis: '#a1a1aa',\r\n  axisLine: '#3f3f46',\r\n\r\n  tooltip: {\r\n    bg: '#18181b',\r\n    border: '#3f3f46',\r\n    text: '#fafafa',\r\n    label: '#a1a1aa',\r\n  },\r\n\r\n  primary: '#60a5fa',\r\n  secondary: '#a78bfa',\r\n  success: '#34d399',\r\n  warning: '#fbbf24',\r\n  danger: '#f87171',\r\n  info: '#38bdf8',\r\n\r\n  gradientStart: '#60a5fa',\r\n  gradientEnd: 'rgba(96, 165, 250, 0.1)',\r\n\r\n  area: {\r\n    fill: 'rgba(96, 165, 250, 0.15)',\r\n    stroke: '#60a5fa',\r\n  },\r\n  bar: {\r\n    fill: '#60a5fa',\r\n    hover: '#3b82f6',\r\n  },\r\n  line: {\r\n    stroke: '#60a5fa',\r\n    dot: '#18181b',\r\n    activeDot: '#60a5fa',\r\n  },\r\n  pie: {\r\n    stroke: '#18181b',\r\n  },\r\n}\r\n\r\n// Multi-series color palette for charts with multiple data series\r\nexport const chartPalette = {\r\n  light: [\r\n    '#3b82f6', // blue\r\n    '#10b981', // emerald\r\n    '#f59e0b', // amber\r\n    '#8b5cf6', // violet\r\n    '#ec4899', // pink\r\n    '#0ea5e9', // sky\r\n    '#f97316', // orange\r\n    '#14b8a6', // teal\r\n  ],\r\n  dark: [\r\n    '#60a5fa', // blue\r\n    '#34d399', // emerald\r\n    '#fbbf24', // amber\r\n    '#a78bfa', // violet\r\n    '#f472b6', // pink\r\n    '#38bdf8', // sky\r\n    '#fb923c', // orange\r\n    '#2dd4bf', // teal\r\n  ],\r\n}\r\n\r\n/**\r\n * Hook to get theme-aware chart colors\r\n *\r\n * @example\r\n * ```tsx\r\n * const chartColors = useChartColors()\r\n * <CartesianGrid stroke={chartColors.grid} />\r\n * <XAxis stroke={chartColors.axis} />\r\n * ```\r\n */\r\nexport function useChartColors(): ChartColorScheme {\r\n  const { theme } = useTheme()\r\n\r\n  return useMemo(() => {\r\n    return theme === 'staff-dark' ? darkColors : lightColors\r\n  }, [theme])\r\n}\r\n\r\n/**\r\n * Hook to get theme-aware chart color palette for multi-series charts\r\n *\r\n * @example\r\n * ```tsx\r\n * const palette = useChartPalette()\r\n * {data.map((entry, index) => (\r\n *   <Cell key={index} fill={palette[index % palette.length]} />\r\n * ))}\r\n * ```\r\n */\r\nexport function useChartPalette(): string[] {\r\n  const { theme } = useTheme()\r\n\r\n  return useMemo(() => {\r\n    return theme === 'staff-dark' ? chartPalette.dark : chartPalette.light\r\n  }, [theme])\r\n}\r\n\r\n/**\r\n * Hook to check if dark mode is active\r\n */\r\nexport function useIsDarkMode(): boolean {\r\n  const { theme } = useTheme()\r\n  return theme === 'staff-dark'\r\n}\r\n\r\n/**\r\n * Get static chart colors (for non-React contexts)\r\n * Use the hooks above when possible for reactive updates\r\n */\r\nexport function getChartColors(isDark: boolean): ChartColorScheme {\r\n  return isDark ? darkColors : lightColors\r\n}\r\n\r\nexport function getChartPalette(isDark: boolean): string[] {\r\n  return isDark ? chartPalette.dark : chartPalette.light\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA;AACA;AAHA;;;AA0DA,0BAA0B;AAC1B,MAAM,cAAgC;IACpC,MAAM;IACN,MAAM;IACN,UAAU;IAEV,SAAS;QACP,IAAI;QACJ,QAAQ;QACR,MAAM;QACN,OAAO;IACT;IAEA,SAAS;IACT,WAAW;IACX,SAAS;IACT,SAAS;IACT,QAAQ;IACR,MAAM;IAEN,eAAe;IACf,aAAa;IAEb,MAAM;QACJ,MAAM;QACN,QAAQ;IACV;IACA,KAAK;QACH,MAAM;QACN,OAAO;IACT;IACA,MAAM;QACJ,QAAQ;QACR,KAAK;QACL,WAAW;IACb;IACA,KAAK;QACH,QAAQ;IACV;AACF;AAEA,yBAAyB;AACzB,MAAM,aAA+B;IACnC,MAAM;IACN,MAAM;IACN,UAAU;IAEV,SAAS;QACP,IAAI;QACJ,QAAQ;QACR,MAAM;QACN,OAAO;IACT;IAEA,SAAS;IACT,WAAW;IACX,SAAS;IACT,SAAS;IACT,QAAQ;IACR,MAAM;IAEN,eAAe;IACf,aAAa;IAEb,MAAM;QACJ,MAAM;QACN,QAAQ;IACV;IACA,KAAK;QACH,MAAM;QACN,OAAO;IACT;IACA,MAAM;QACJ,QAAQ;QACR,KAAK;QACL,WAAW;IACb;IACA,KAAK;QACH,QAAQ;IACV;AACF;AAGO,MAAM,eAAe;IAC1B,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;AACH;AAYO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,0KAAQ;IAE1B,OAAO,IAAA,uOAAO,EAAC;QACb,OAAO,UAAU,eAAe,aAAa;IAC/C,GAAG;QAAC;KAAM;AACZ;AAaO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,0KAAQ;IAE1B,OAAO,IAAA,uOAAO,EAAC;QACb,OAAO,UAAU,eAAe,aAAa,IAAI,GAAG,aAAa,KAAK;IACxE,GAAG;QAAC;KAAM;AACZ;AAKO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,0KAAQ;IAC1B,OAAO,UAAU;AACnB;AAMO,SAAS,eAAe,MAAe;IAC5C,OAAO,SAAS,aAAa;AAC/B;AAEO,SAAS,gBAAgB,MAAe;IAC7C,OAAO,SAAS,aAAa,IAAI,GAAG,aAAa,KAAK;AACxD"}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/holdings/nav-performance-chart.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts'\r\nimport { TrendingUp } from 'lucide-react'\r\nimport { useChartColors } from '@/lib/theme-colors'\r\n\r\ninterface PerformanceDataPoint {\r\n  date: string\r\n  value: number\r\n  displayDate: string\r\n}\r\n\r\ninterface NAVPerformanceChartProps {\r\n  data: PerformanceDataPoint[]\r\n}\r\n\r\nconst formatCurrency = (value: number) => {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n    notation: value >= 1000000 ? 'compact' : 'standard',\r\n    compactDisplay: 'short'\r\n  }).format(value)\r\n}\r\n\r\nexport function NAVPerformanceChart({ data }: NAVPerformanceChartProps) {\r\n  const chartColors = useChartColors()\r\n  const isEmpty = !data || data.length === 0\r\n\r\n  if (isEmpty) {\r\n    return (\r\n      <Card className=\"border-0 shadow-md bg-gradient-to-br from-muted/50 to-background\">\r\n        <CardHeader className=\"pb-4\">\r\n          <CardTitle className=\"text-base font-semibold flex items-center gap-2 text-foreground\">\r\n            <TrendingUp className=\"h-5 w-5 text-emerald-600\" />\r\n            NAV Performance\r\n          </CardTitle>\r\n          <CardDescription className=\"text-muted-foreground\">Portfolio value over time</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"flex items-center justify-center h-[320px] text-muted-foreground/50\">\r\n            <div className=\"text-center\">\r\n              <TrendingUp className=\"h-16 w-16 mx-auto mb-3 opacity-20\" />\r\n              <p className=\"text-sm font-medium\">No performance data available</p>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card className=\"border-0 shadow-md bg-gradient-to-br from-muted/50 to-background\">\r\n      <CardHeader className=\"pb-4\">\r\n        <CardTitle className=\"text-base font-semibold flex items-center gap-2 text-foreground\">\r\n          <TrendingUp className=\"h-5 w-5 text-emerald-600\" />\r\n          NAV Performance\r\n        </CardTitle>\r\n        <CardDescription className=\"text-muted-foreground\">Portfolio value over time</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <ResponsiveContainer width=\"100%\" height={320}>\r\n          <LineChart data={data} margin={{ top: 5, right: 20, left: 10, bottom: 5 }}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke={chartColors.grid} vertical={false} />\r\n            <XAxis\r\n              dataKey=\"displayDate\"\r\n              tick={{ fontSize: 12, fill: chartColors.axis }}\r\n              tickLine={false}\r\n              axisLine={{ stroke: chartColors.axisLine }}\r\n            />\r\n            <YAxis\r\n              tick={{ fontSize: 12, fill: chartColors.axis }}\r\n              tickLine={false}\r\n              axisLine={{ stroke: chartColors.axisLine }}\r\n              tickFormatter={formatCurrency}\r\n            />\r\n            <Tooltip\r\n              content={({ active, payload }) => {\r\n                if (active && payload && payload.length) {\r\n                  const data = payload[0].payload\r\n                  return (\r\n                    <div className=\"bg-background p-4 border border-border rounded-lg shadow-lg\">\r\n                      <p className=\"font-semibold text-foreground mb-2\">{data.displayDate}</p>\r\n                      <p className=\"text-sm text-emerald-600 dark:text-emerald-400 font-medium\">\r\n                        NAV: {formatCurrency(data.value)}\r\n                      </p>\r\n                    </div>\r\n                  )\r\n                }\r\n                return null\r\n              }}\r\n            />\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"value\"\r\n              stroke={chartColors.success}\r\n              strokeWidth={3}\r\n              dot={{ fill: chartColors.success, r: 4, strokeWidth: 2, stroke: chartColors.line.dot }}\r\n              activeDot={{ r: 6, strokeWidth: 2, stroke: chartColors.line.dot }}\r\n            />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AALA;;;;;;AAiBA,MAAM,iBAAiB,CAAC;IACtB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;QACvB,uBAAuB;QACvB,UAAU,SAAS,UAAU,YAAY;QACzC,gBAAgB;IAClB,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,oBAAoB,EAAE,IAAI,EAA4B;IACpE,MAAM,cAAc,IAAA,sKAAc;IAClC,MAAM,UAAU,CAAC,QAAQ,KAAK,MAAM,KAAK;IAEzC,IAAI,SAAS;QACX,qBACE,qQAAC,+JAAI;YAAC,WAAU;;8BACd,qQAAC,qKAAU;oBAAC,WAAU;;sCACpB,qQAAC,oKAAS;4BAAC,WAAU;;8CACnB,qQAAC,uPAAU;oCAAC,WAAU;;;;;;gCAA6B;;;;;;;sCAGrD,qQAAC,0KAAe;4BAAC,WAAU;sCAAwB;;;;;;;;;;;;8BAErD,qQAAC,sKAAW;8BACV,cAAA,qQAAC;wBAAI,WAAU;kCACb,cAAA,qQAAC;4BAAI,WAAU;;8CACb,qQAAC,uPAAU;oCAAC,WAAU;;;;;;8CACtB,qQAAC;oCAAE,WAAU;8CAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAM/C;IAEA,qBACE,qQAAC,+JAAI;QAAC,WAAU;;0BACd,qQAAC,qKAAU;gBAAC,WAAU;;kCACpB,qQAAC,oKAAS;wBAAC,WAAU;;0CACnB,qQAAC,uPAAU;gCAAC,WAAU;;;;;;4BAA6B;;;;;;;kCAGrD,qQAAC,0KAAe;wBAAC,WAAU;kCAAwB;;;;;;;;;;;;0BAErD,qQAAC,sKAAW;0BACV,cAAA,qQAAC,iNAAmB;oBAAC,OAAM;oBAAO,QAAQ;8BACxC,cAAA,qQAAC,yLAAS;wBAAC,MAAM;wBAAM,QAAQ;4BAAE,KAAK;4BAAG,OAAO;4BAAI,MAAM;4BAAI,QAAQ;wBAAE;;0CACtE,qQAAC,qMAAa;gCAAC,iBAAgB;gCAAM,QAAQ,YAAY,IAAI;gCAAE,UAAU;;;;;;0CACzE,qQAAC,qLAAK;gCACJ,SAAQ;gCACR,MAAM;oCAAE,UAAU;oCAAI,MAAM,YAAY,IAAI;gCAAC;gCAC7C,UAAU;gCACV,UAAU;oCAAE,QAAQ,YAAY,QAAQ;gCAAC;;;;;;0CAE3C,qQAAC,qLAAK;gCACJ,MAAM;oCAAE,UAAU;oCAAI,MAAM,YAAY,IAAI;gCAAC;gCAC7C,UAAU;gCACV,UAAU;oCAAE,QAAQ,YAAY,QAAQ;gCAAC;gCACzC,eAAe;;;;;;0CAEjB,qQAAC,yLAAO;gCACN,SAAS,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;oCAC3B,IAAI,UAAU,WAAW,QAAQ,MAAM,EAAE;wCACvC,MAAM,OAAO,OAAO,CAAC,EAAE,CAAC,OAAO;wCAC/B,qBACE,qQAAC;4CAAI,WAAU;;8DACb,qQAAC;oDAAE,WAAU;8DAAsC,KAAK,WAAW;;;;;;8DACnE,qQAAC;oDAAE,WAAU;;wDAA6D;wDAClE,eAAe,KAAK,KAAK;;;;;;;;;;;;;oCAIvC;oCACA,OAAO;gCACT;;;;;;0CAEF,qQAAC,mLAAI;gCACH,MAAK;gCACL,SAAQ;gCACR,QAAQ,YAAY,OAAO;gCAC3B,aAAa;gCACb,KAAK;oCAAE,MAAM,YAAY,OAAO;oCAAE,GAAG;oCAAG,aAAa;oCAAG,QAAQ,YAAY,IAAI,CAAC,GAAG;gCAAC;gCACrF,WAAW;oCAAE,GAAG;oCAAG,aAAa;oCAAG,QAAQ,YAAY,IAAI,CAAC,GAAG;gCAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9E"}},
    {"offset": {"line": 1098, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/holdings/cash-flow-chart.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from 'recharts'\r\nimport { DollarSign } from 'lucide-react'\r\n\r\ninterface CashFlowDataPoint {\r\n  period: string\r\n  contributions: number\r\n  distributions: number\r\n  displayPeriod: string\r\n}\r\n\r\ninterface CashFlowChartProps {\r\n  data: CashFlowDataPoint[]\r\n}\r\n\r\nconst formatCurrency = (value: number) => {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n    notation: Math.abs(value) >= 1000000 ? 'compact' : 'standard',\r\n    compactDisplay: 'short'\r\n  }).format(value)\r\n}\r\n\r\nexport function CashFlowChart({ data }: CashFlowChartProps) {\r\n  const isEmpty = !data || data.length === 0\r\n\r\n  if (isEmpty) {\r\n    return (\r\n      <Card className=\"border-0 shadow-md bg-gradient-to-br from-background to-muted/30 dark:from-gray-800 dark:to-gray-900\">\r\n        <CardHeader className=\"pb-4\">\r\n          <CardTitle className=\"text-base font-semibold flex items-center gap-2 text-foreground\">\r\n            <DollarSign className=\"h-5 w-5 text-violet-600\" />\r\n            Cash Flow History\r\n          </CardTitle>\r\n          <CardDescription className=\"text-muted-foreground\">Contributions vs distributions over time</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"flex items-center justify-center h-[320px] text-muted-foreground/70\">\r\n            <div className=\"text-center\">\r\n              <DollarSign className=\"h-16 w-16 mx-auto mb-3 opacity-20\" />\r\n              <p className=\"text-sm font-medium\">No cash flow data available</p>\r\n              <p className=\"text-xs text-muted-foreground/80 mt-2\">Staff must add distributions via API</p>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card className=\"border-0 shadow-md bg-gradient-to-br from-background to-muted/30 dark:from-gray-800 dark:to-gray-900\">\r\n      <CardHeader className=\"pb-4\">\r\n        <CardTitle className=\"text-base font-semibold flex items-center gap-2 text-foreground\">\r\n          <DollarSign className=\"h-5 w-5 text-violet-600\" />\r\n          Cash Flow History\r\n        </CardTitle>\r\n        <CardDescription className=\"text-muted-foreground\">Contributions vs distributions over time</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <ResponsiveContainer width=\"100%\" height={320}>\r\n          <BarChart data={data} margin={{ top: 5, right: 20, left: 10, bottom: 5 }}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border\" vertical={false} />\r\n            <XAxis\r\n              dataKey=\"displayPeriod\"\r\n              tick={{ fontSize: 12 }}\r\n              tickLine={false}\r\n              axisLine={false}\r\n              className=\"fill-muted-foreground\"\r\n            />\r\n            <YAxis\r\n              tick={{ fontSize: 12 }}\r\n              tickLine={false}\r\n              axisLine={false}\r\n              tickFormatter={formatCurrency}\r\n              className=\"fill-muted-foreground\"\r\n            />\r\n            <Tooltip\r\n              content={({ active, payload }) => {\r\n                if (active && payload && payload.length) {\r\n                  const data = payload[0].payload\r\n                  return (\r\n                    <div className=\"bg-card p-4 border border-border rounded-lg shadow-lg\">\r\n                      <p className=\"font-semibold text-foreground mb-3\">{data.displayPeriod}</p>\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center justify-between gap-6\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-3 h-3 bg-red-500 rounded\"></div>\r\n                            <span className=\"text-sm text-muted-foreground\">Contributions</span>\r\n                          </div>\r\n                          <span className=\"text-sm font-medium text-red-600\">{formatCurrency(data.contributions)}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center justify-between gap-6\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-3 h-3 bg-emerald-500 rounded\"></div>\r\n                            <span className=\"text-sm text-muted-foreground\">Distributions</span>\r\n                          </div>\r\n                          <span className=\"text-sm font-medium text-emerald-600\">{formatCurrency(data.distributions)}</span>\r\n                        </div>\r\n                        <div className=\"pt-2 border-t border-border flex items-center justify-between\">\r\n                          <span className=\"text-sm font-semibold text-foreground\">Net Cash</span>\r\n                          <span className={`text-sm font-semibold ${\r\n                            (data.distributions - data.contributions) >= 0 ? 'text-emerald-600' : 'text-red-600'\r\n                          }`}>\r\n                            {formatCurrency(data.distributions - data.contributions)}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                }\r\n                return null\r\n              }}\r\n            />\r\n            <Legend\r\n              wrapperStyle={{ fontSize: '12px', paddingTop: '20px' }}\r\n              iconType=\"circle\"\r\n              formatter={(value) => {\r\n                return value === 'contributions' ? 'Capital Calls' : 'Distributions'\r\n              }}\r\n            />\r\n            <Bar\r\n              dataKey=\"contributions\"\r\n              fill=\"#dc2626\"\r\n              name=\"contributions\"\r\n              radius={[6, 6, 0, 0]}\r\n            />\r\n            <Bar\r\n              dataKey=\"distributions\"\r\n              fill=\"#059669\"\r\n              name=\"distributions\"\r\n              radius={[6, 6, 0, 0]}\r\n            />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1521, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/holdings/portfolio-dashboard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { PortfolioAllocationChart } from './portfolio-allocation-chart'\r\nimport { NAVPerformanceChart } from './nav-performance-chart'\r\nimport { CashFlowChart } from './cash-flow-chart'\r\nimport {\r\n  DollarSign,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  PiggyBank,\r\n  Target,\r\n  Calculator,\r\n  RefreshCw,\r\n  Download,\r\n  Wallet,\r\n  Shield,\r\n  Activity\r\n} from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\n\r\nexport interface PortfolioKPIs {\r\n  currentNAV: number\r\n  totalContributed: number\r\n  totalDistributions: number\r\n  unfundedCommitment: number\r\n  totalCommitment: number\r\n  totalCostBasis: number\r\n  unrealizedGain: number\r\n  unrealizedGainPct: number\r\n  dpi: number\r\n  tvpi: number\r\n  irr: number\r\n}\r\n\r\nexport interface PortfolioTrends {\r\n  navChange: number\r\n  navChangePct: number\r\n  performanceChange: number\r\n  periodDays: number\r\n}\r\n\r\nexport interface PortfolioSummary {\r\n  totalPositions: number\r\n  totalVehicles: number\r\n  totalDeals: number\r\n  totalDealValue: number\r\n  pendingAllocations: number\r\n  lastUpdated: string\r\n}\r\n\r\ninterface AllocationData {\r\n  name: string\r\n  value: number\r\n  percentage: number\r\n}\r\n\r\ninterface PerformanceDataPoint {\r\n  date: string\r\n  value: number\r\n  displayDate: string\r\n}\r\n\r\ninterface CashFlowDataPoint {\r\n  period: string\r\n  contributions: number\r\n  distributions: number\r\n  displayPeriod: string\r\n}\r\n\r\ninterface CleanPortfolioDashboardProps {\r\n  kpis: PortfolioKPIs\r\n  trends?: PortfolioTrends\r\n  summary: PortfolioSummary\r\n  asOfDate: string\r\n  isLoading?: boolean\r\n  onRefresh?: () => void\r\n  onExport?: () => void\r\n  className?: string\r\n  vehicleBreakdown?: any[]\r\n  allocationData?: AllocationData[]\r\n  performanceData?: PerformanceDataPoint[]\r\n  cashFlowData?: CashFlowDataPoint[]\r\n}\r\n\r\nconst formatCurrency = (value: number) => {\r\n  // Handle NaN, undefined, or null values\r\n  const safeValue = (value === undefined || value === null || isNaN(value)) ? 0 : value\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n    notation: Math.abs(safeValue) >= 1000000 ? 'compact' : 'standard',\r\n    compactDisplay: 'short'\r\n  }).format(safeValue)\r\n}\r\n\r\nconst formatPercentage = (value: number, decimals: number = 1) => {\r\n  // Handle NaN, undefined, or null values\r\n  const safeValue = (value === undefined || value === null || isNaN(value)) ? 0 : value\r\n  return `${safeValue > 0 ? '+' : ''}${safeValue.toFixed(decimals)}%`\r\n}\r\n\r\nconst formatRatio = (value: number, decimals: number = 2) => {\r\n  // Handle NaN, undefined, or null values\r\n  const safeValue = (value === undefined || value === null || isNaN(value)) ? 0 : value\r\n  return `${safeValue.toFixed(decimals)}x`\r\n}\r\n\r\ntype IconType = React.ComponentType<{ className?: string }>\r\n\r\n// Clean KPI Card Component\r\nfunction CleanKPICard({\r\n  title,\r\n  value,\r\n  subtitle,\r\n  change,\r\n  icon: Icon,\r\n  trend,\r\n  className\r\n}: {\r\n  title: string\r\n  value: string | number\r\n  subtitle?: string\r\n  change?: number\r\n  icon?: IconType\r\n  trend?: 'up' | 'down' | 'neutral'\r\n  className?: string\r\n}) {\r\n  return (\r\n    <Card className={cn(\"border shadow-sm\", className)}>\r\n      <CardContent className=\"p-6\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"space-y-2\">\r\n            <p className=\"text-sm font-medium text-muted-foreground\">{title}</p>\r\n            <div className=\"flex items-baseline gap-2\">\r\n              <h3 className=\"text-2xl font-bold\">{value}</h3>\r\n              {change !== undefined && (\r\n                <div className={cn(\r\n                  \"flex items-center gap-1 text-sm font-medium\",\r\n                  change >= 0 ? \"text-muted-foreground\" : \"text-muted-foreground\"\r\n                )}>\r\n                  {change >= 0 ? <TrendingUp className=\"h-3 w-3\" /> : <TrendingDown className=\"h-3 w-3\" />}\r\n                  {formatPercentage(change)}\r\n                </div>\r\n              )}\r\n            </div>\r\n            {subtitle && (\r\n              <p className=\"text-xs text-muted-foreground\">{subtitle}</p>\r\n            )}\r\n          </div>\r\n          {Icon && (\r\n            <div className=\"p-2 rounded-lg bg-muted\">\r\n              <Icon className=\"h-5 w-5 text-muted-foreground\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport function PortfolioDashboard({\r\n  kpis,\r\n  trends,\r\n  summary,\r\n  asOfDate,\r\n  isLoading = false,\r\n  onRefresh,\r\n  onExport,\r\n  className,\r\n  vehicleBreakdown = [],\r\n  allocationData = [],\r\n  performanceData = [],\r\n  cashFlowData = []\r\n}: CleanPortfolioDashboardProps) {\r\n\r\n  return (\r\n    <div className={cn(\"space-y-6\", className)}>\r\n      {/* Header Section */}\r\n      <div className=\"flex flex-col sm:flex-row justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold\">Portfolio Analytics</h2>\r\n          <p className=\"text-muted-foreground\">\r\n            {summary.totalVehicles} vehicles, {summary.totalPositions} positions\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Badge variant=\"outline\" className=\"text-xs\">\r\n            <Activity className=\"h-3 w-3 mr-1\" />\r\n            {new Date(asOfDate).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false })}\r\n          </Badge>\r\n          <Button \r\n            variant=\"outline\" \r\n            size=\"sm\" \r\n            onClick={onRefresh} \r\n            disabled={isLoading}\r\n          >\r\n            <RefreshCw className={cn(\"h-4 w-4\", isLoading && \"animate-spin\")} />\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExport}\r\n            disabled={!onExport}\r\n          >\r\n            <Download className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Primary KPIs Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <CleanKPICard\r\n          title=\"Portfolio Value\"\r\n          value={formatCurrency(kpis.currentNAV)}\r\n          subtitle=\"Current NAV\"\r\n          change={trends?.navChangePct}\r\n          icon={Wallet}\r\n        />\r\n        <CleanKPICard\r\n          title=\"Invested\"\r\n          value={formatCurrency(kpis.totalContributed)}\r\n          subtitle={`${kpis.totalCommitment > 0 ? ((kpis.totalContributed / kpis.totalCommitment) * 100).toFixed(0) : 0}% deployed`}\r\n          icon={PiggyBank}\r\n        />\r\n        <CleanKPICard\r\n          title=\"Distributions\"\r\n          value={formatCurrency(kpis.totalDistributions)}\r\n          subtitle={`DPI: ${formatRatio(kpis.dpi)}`}\r\n          icon={TrendingUp}\r\n        />\r\n        <CleanKPICard\r\n          title=\"Unrealized\"\r\n          value={formatCurrency(kpis.unrealizedGain)}\r\n          subtitle={`${(kpis.unrealizedGainPct ?? 0).toFixed(1)}% return`}\r\n          change={kpis.unrealizedGainPct}\r\n          icon={Target}\r\n        />\r\n      </div>\r\n\r\n      {/* Performance Section */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n        {/* Performance Metrics */}\r\n        <Card className=\"border shadow-sm\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-base font-medium\">Performance Metrics</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div>\r\n              <div className=\"flex justify-between mb-2\">\r\n                <span className=\"text-sm text-muted-foreground\">TVPI</span>\r\n                <span className=\"text-sm font-medium\">{formatRatio(kpis.tvpi)}</span>\r\n              </div>\r\n              <Progress value={(kpis.tvpi / 3) * 100} className=\"h-2\" />\r\n            </div>\r\n            <div>\r\n              <div className=\"flex justify-between mb-2\">\r\n                <span className=\"text-sm text-muted-foreground\">DPI</span>\r\n                <span className=\"text-sm font-medium\">{formatRatio(kpis.dpi)}</span>\r\n              </div>\r\n              <Progress value={(kpis.dpi / 2) * 100} className=\"h-2\" />\r\n            </div>\r\n            <div>\r\n              <div className=\"flex justify-between mb-2\">\r\n                <span className=\"text-sm text-muted-foreground\">Net IRR</span>\r\n                <span className=\"text-sm font-medium\">{formatPercentage(kpis.irr)}</span>\r\n              </div>\r\n              <Progress value={Math.min((kpis.irr / 30) * 100, 100)} className=\"h-2\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Capital Deployment */}\r\n        <Card className=\"border shadow-sm\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-base font-medium\">Capital Deployment</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <div className=\"flex justify-between mb-2\">\r\n                  <span className=\"text-sm text-muted-foreground\">Deployed</span>\r\n                  <span className=\"text-sm font-medium\">\r\n                    {kpis.totalCommitment > 0 ? ((kpis.totalContributed / kpis.totalCommitment) * 100).toFixed(0) : 0}%\r\n                  </span>\r\n                </div>\r\n                <Progress\r\n                  value={kpis.totalCommitment > 0 ? (kpis.totalContributed / kpis.totalCommitment) * 100 : 0}\r\n                  className=\"h-2\"\r\n                />\r\n              </div>\r\n              <div className=\"space-y-1 text-sm\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-muted-foreground\">Commitment</span>\r\n                  <span>{formatCurrency(kpis.totalCommitment)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-muted-foreground\">Contributed</span>\r\n                  <span>{formatCurrency(kpis.totalContributed)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-muted-foreground\">Unfunded</span>\r\n                  <span>{formatCurrency(kpis.unfundedCommitment)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Portfolio Stats */}\r\n        <Card className=\"border shadow-sm\">\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-base font-medium\">Portfolio Stats</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-2xl font-bold\">{summary.totalVehicles}</p>\r\n                <p className=\"text-xs text-muted-foreground\">Vehicles</p>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <p className=\"text-2xl font-bold\">{summary.totalPositions}</p>\r\n                <p className=\"text-xs text-muted-foreground\">Positions</p>\r\n              </div>\r\n            </div>\r\n            <Separator className=\"my-4\" />\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground\">Deal Allocations</span>\r\n                <span>{summary.totalDeals}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground\">Deal Value</span>\r\n                <span>{formatCurrency(summary.totalDealValue)}</span>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n        <NAVPerformanceChart data={performanceData} />\r\n        <PortfolioAllocationChart data={allocationData} />\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 gap-4\">\r\n        <CashFlowChart data={cashFlowData} />\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2372, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 max-w-[calc(100vw-2rem)] origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\n          className\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBAAO,qQAAC,kMAAqB;QAAC,aAAU;QAAW,GAAG,KAAK;;;;;;AAC7D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,qQAAC,qMAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,GAAG,OACmD;IACtD,qBACE,qQAAC,oMAAuB;kBACtB,cAAA,qQAAC,qMAAwB;YACvB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,gJAAE,EACX,2fACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,qQAAC,oMAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE"}},
    {"offset": {"line": 2443, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/slider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max]\n  )\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        \"relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col\",\n        className\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          \"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5\"\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            \"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full\"\n          )}\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary ring-ring/50 block size-6 md:size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  )\n}\n\nexport { Slider }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,CAAC,EACP,MAAM,GAAG,EACT,GAAG,OAC+C;IAClD,MAAM,UAAU,uOAAa,CAC3B,IACE,MAAM,OAAO,CAAC,SACV,QACA,MAAM,OAAO,CAAC,gBACZ,eACA;YAAC;YAAK;SAAI,EAClB;QAAC;QAAO;QAAc;QAAK;KAAI;IAGjC,qBACE,qQAAC,iMAAoB;QACnB,aAAU;QACV,cAAc;QACd,OAAO;QACP,KAAK;QACL,KAAK;QACL,WAAW,IAAA,gJAAE,EACX,uOACA;QAED,GAAG,KAAK;;0BAET,qQAAC,kMAAqB;gBACpB,aAAU;gBACV,WAAW,IAAA,gJAAE,EACX;0BAGF,cAAA,qQAAC,kMAAqB;oBACpB,aAAU;oBACV,WAAW,IAAA,gJAAE,EACX;;;;;;;;;;;YAIL,MAAM,IAAI,CAAC;gBAAE,QAAQ,QAAQ,MAAM;YAAC,GAAG,CAAC,GAAG,sBAC1C,qQAAC,kMAAqB;oBACpB,aAAU;oBAEV,WAAU;mBADL;;;;;;;;;;;AAMf"}},
    {"offset": {"line": 2513, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/holdings/modern-holdings-filters.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from '@/components/ui/popover'\r\nimport {\r\n  Command,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n} from '@/components/ui/command'\r\nimport { Slider } from '@/components/ui/slider'\r\nimport { Switch } from '@/components/ui/switch'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  Search,\r\n  Filter,\r\n  X,\r\n  ChevronDown,\r\n  Building2,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Globe,\r\n  Calendar,\r\n  DollarSign,\r\n  BarChart3,\r\n  Sparkles,\r\n  Check\r\n} from 'lucide-react'\r\n\r\nexport interface FiltersState {\r\n  search: string\r\n  type: string\r\n  status: string\r\n  performance: string\r\n  size: string\r\n  vintage: string\r\n  domicile: string\r\n  // New advanced filters\r\n  minValue?: number\r\n  maxValue?: number\r\n  minReturn?: number\r\n  maxReturn?: number\r\n  sectors?: string[]\r\n  tags?: string[]\r\n}\r\n\r\nexport type SortOption = \r\n  | 'name_asc' \r\n  | 'name_desc' \r\n  | 'value_asc' \r\n  | 'value_desc' \r\n  | 'performance_asc' \r\n  | 'performance_desc'\r\n  | 'commitment_asc'\r\n  | 'commitment_desc'\r\n  | 'date_asc'\r\n  | 'date_desc'\r\n\r\ninterface ModernHoldingsFiltersProps {\r\n  filters: FiltersState\r\n  onFiltersChange: (filters: FiltersState) => void\r\n  sortBy: SortOption\r\n  onSortChange: (sort: SortOption) => void\r\n  onClearFilters: () => void\r\n  activeFiltersCount: number\r\n  totalResults?: number\r\n  className?: string\r\n}\r\n\r\nconst typeOptions = [\r\n  { value: 'all', label: 'All Types', icon: Building2 },\r\n  { value: 'fund', label: 'Funds', icon: Building2 },\r\n  { value: 'spv', label: 'SPVs', icon: Building2 },\r\n  { value: 'co_investment', label: 'Co-Investments', icon: Building2 },\r\n  { value: 'direct', label: 'Direct Investments', icon: Building2 }\r\n]\r\n\r\nconst statusOptions = [\r\n  { value: 'all', label: 'All Status' },\r\n  { value: 'active', label: 'Active', color: 'green' },\r\n  { value: 'pending', label: 'Pending', color: 'yellow' },\r\n  { value: 'closed', label: 'Closed', color: 'gray' }\r\n]\r\n\r\nconst performanceOptions = [\r\n  { value: 'all', label: 'All Performance', icon: BarChart3 },\r\n  { value: 'positive', label: 'Positive Returns', icon: TrendingUp, color: 'green' },\r\n  { value: 'negative', label: 'Negative Returns', icon: TrendingDown, color: 'red' },\r\n  { value: 'breakeven', label: 'Break Even', icon: BarChart3, color: 'gray' }\r\n]\r\n\r\nconst sizeOptions = [\r\n  { value: 'all', label: 'All Sizes' },\r\n  { value: 'large', label: 'Large (>$1M)', icon: DollarSign },\r\n  { value: 'medium', label: 'Medium ($100K-$1M)', icon: DollarSign },\r\n  { value: 'small', label: 'Small (<$100K)', icon: DollarSign }\r\n]\r\n\r\nconst vintageOptions = [\r\n  { value: 'all', label: 'All Vintages' },\r\n  { value: 'recent', label: 'Recent (< 2 years)', icon: Calendar },\r\n  { value: 'mature', label: 'Mature (2-5 years)', icon: Calendar },\r\n  { value: 'legacy', label: 'Legacy (> 5 years)', icon: Calendar }\r\n]\r\n\r\nconst domicileOptions = [\r\n  { value: 'all', label: 'All Locations' },\r\n  { value: 'luxembourg', label: 'Luxembourg', flag: '' },\r\n  { value: 'british virgin islands', label: 'British Virgin Islands', flag: '' },\r\n  { value: 'cayman islands', label: 'Cayman Islands', flag: '' },\r\n  { value: 'united states', label: 'United States', flag: '' },\r\n  { value: 'singapore', label: 'Singapore', flag: '' },\r\n  { value: 'other', label: 'Other', flag: '' }\r\n]\r\n\r\ntype IconType = React.ComponentType<{ className?: string }>\r\n\r\nconst sortOptions: { value: SortOption; label: string; icon?: IconType }[] = [\r\n  { value: 'value_desc', label: 'Highest Value', icon: TrendingUp },\r\n  { value: 'value_asc', label: 'Lowest Value', icon: TrendingDown },\r\n  { value: 'performance_desc', label: 'Best Performance', icon: TrendingUp },\r\n  { value: 'performance_asc', label: 'Worst Performance', icon: TrendingDown },\r\n  { value: 'name_asc', label: 'Name (A-Z)' },\r\n  { value: 'name_desc', label: 'Name (Z-A)' },\r\n  { value: 'date_desc', label: 'Newest First', icon: Calendar },\r\n  { value: 'date_asc', label: 'Oldest First', icon: Calendar },\r\n  { value: 'commitment_desc', label: 'Largest Commitment', icon: DollarSign },\r\n  { value: 'commitment_asc', label: 'Smallest Commitment', icon: DollarSign }\r\n]\r\n\r\nexport function ModernHoldingsFilters({\r\n  filters,\r\n  onFiltersChange,\r\n  sortBy,\r\n  onSortChange,\r\n  onClearFilters,\r\n  activeFiltersCount,\r\n  totalResults = 0,\r\n  className\r\n}: ModernHoldingsFiltersProps) {\r\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false)\r\n  const [valueRange, setValueRange] = useState<[number, number]>([\r\n    filters.minValue ?? 0,\r\n    filters.maxValue ?? 10000000\r\n  ])\r\n  const [returnRange, setReturnRange] = useState<[number, number]>([\r\n    filters.minReturn ?? -50,\r\n    filters.maxReturn ?? 100\r\n  ])\r\n\r\n  const handleFilterChange = (key: keyof FiltersState, value: any) => {\r\n    onFiltersChange({ ...filters, [key]: value })\r\n  }\r\n\r\n  const currentSort = sortOptions.find(opt => opt.value === sortBy) || sortOptions[0]\r\n\r\n  return (\r\n    <div className={cn(\"space-y-4\", className)}>\r\n      {/* Main Filter Bar */}\r\n      <div className=\"flex flex-col lg:flex-row gap-4\">\r\n        {/* Search Input */}\r\n        <div className=\"relative flex-1 max-w-md\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Search by name, type, or location...\"\r\n            value={filters.search}\r\n            onChange={(e) => handleFilterChange('search', e.target.value)}\r\n            className=\"pl-10 pr-10\"\r\n          />\r\n          {filters.search && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0\"\r\n              onClick={() => handleFilterChange('search', '')}\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </Button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Quick Filters - responsive: full width on mobile, fixed on desktop */}\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {/* Type Filter */}\r\n          <Select value={filters.type} onValueChange={(value) => handleFilterChange('type', value)}>\r\n            <SelectTrigger className=\"w-full sm:w-[160px]\">\r\n              <SelectValue placeholder=\"Vehicle Type\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {typeOptions.map(option => (\r\n                <SelectItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          {/* Performance Filter */}\r\n          <Select value={filters.performance} onValueChange={(value) => handleFilterChange('performance', value)}>\r\n            <SelectTrigger className=\"w-full sm:w-[160px]\">\r\n              <SelectValue placeholder=\"Performance\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {performanceOptions.map(option => (\r\n                <SelectItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          {/* Size Filter */}\r\n          <Select value={filters.size} onValueChange={(value) => handleFilterChange('size', value)}>\r\n            <SelectTrigger className=\"w-full sm:w-[140px]\">\r\n              <SelectValue placeholder=\"Size\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {sizeOptions.map(option => (\r\n                <SelectItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          {/* Advanced Filters Toggle */}\r\n          <Button\r\n            variant={showAdvancedFilters ? \"default\" : \"outline\"}\r\n            size=\"sm\"\r\n            onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\r\n            className=\"gap-2\"\r\n          >\r\n            <Sparkles className=\"h-4 w-4\" />\r\n            Advanced\r\n            <ChevronDown className={cn(\"h-4 w-4 transition-transform\", showAdvancedFilters && \"rotate-180\")} />\r\n          </Button>\r\n\r\n          {/* Sort Dropdown */}\r\n          <Popover>\r\n            <PopoverTrigger asChild>\r\n              <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n                {currentSort.icon && <currentSort.icon className=\"h-4 w-4\" />}\r\n                {currentSort.label}\r\n                <ChevronDown className=\"h-4 w-4\" />\r\n              </Button>\r\n            </PopoverTrigger>\r\n            <PopoverContent className=\"w-56\" align=\"end\">\r\n              <Command>\r\n                <CommandInput placeholder=\"Search sort options...\" />\r\n                <CommandList>\r\n                  <CommandEmpty>No sort option found.</CommandEmpty>\r\n                  <CommandGroup>\r\n                    {sortOptions.map((option) => (\r\n                      <CommandItem\r\n                        key={option.value}\r\n                        value={option.value}\r\n                        onSelect={() => onSortChange(option.value)}\r\n                      >\r\n                        <div className=\"flex items-center w-full\">\r\n                          {option.icon && <option.icon className=\"h-4 w-4 mr-2\" />}\r\n                          <span className=\"flex-1\">{option.label}</span>\r\n                          {sortBy === option.value && <Check className=\"h-4 w-4\" />}\r\n                        </div>\r\n                      </CommandItem>\r\n                    ))}\r\n                  </CommandGroup>\r\n                </CommandList>\r\n              </Command>\r\n            </PopoverContent>\r\n          </Popover>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Advanced Filters Panel */}\r\n      {showAdvancedFilters && (\r\n        <div className=\"border rounded-lg p-4 space-y-4 bg-muted/30\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {/* Status Filter */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">Status</Label>\r\n              <Select value={filters.status} onValueChange={(value) => handleFilterChange('status', value)}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select status\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {statusOptions.map(option => (\r\n                    <SelectItem key={option.value} value={option.value}>\r\n                      <div className=\"flex items-center\">\r\n                        {option.color && (\r\n                          <div className={cn(\r\n                            \"h-2 w-2 rounded-full mr-2\",\r\n                            option.color === 'green' && 'bg-green-500',\r\n                            option.color === 'yellow' && 'bg-yellow-500',\r\n                            option.color === 'gray' && 'bg-gray-500'\r\n                          )} />\r\n                        )}\r\n                        {option.label}\r\n                      </div>\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Vintage Filter */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">Vintage</Label>\r\n              <Select value={filters.vintage} onValueChange={(value) => handleFilterChange('vintage', value)}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select vintage\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {vintageOptions.map(option => (\r\n                    <SelectItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Domicile Filter */}\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"text-sm font-medium\">Domicile</Label>\r\n              <Select value={filters.domicile} onValueChange={(value) => handleFilterChange('domicile', value)}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select location\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {domicileOptions.map(option => (\r\n                    <SelectItem key={option.value} value={option.value}>\r\n                      <span className=\"mr-2\">{option.flag}</span>\r\n                      {option.label}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Range Sliders */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label className=\"text-sm font-medium\">Value Range</Label>\r\n                <span className=\"text-sm text-muted-foreground\">\r\n                  ${(valueRange[0] / 1000).toFixed(0)}K - ${(valueRange[1] / 1000).toFixed(0)}K\r\n                </span>\r\n              </div>\r\n              <Slider\r\n                value={valueRange}\r\n                onValueChange={(value) => {\r\n                  const newRange = value as [number, number]\r\n                  setValueRange(newRange)\r\n                  // Only apply filter if not at default bounds\r\n                  const isDefault = newRange[0] === 0 && newRange[1] === 10000000\r\n                  onFiltersChange({\r\n                    ...filters,\r\n                    minValue: isDefault ? undefined : newRange[0],\r\n                    maxValue: isDefault ? undefined : newRange[1]\r\n                  })\r\n                }}\r\n                max={10000000}\r\n                step={100000}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label className=\"text-sm font-medium\">Return Range</Label>\r\n                <span className=\"text-sm text-muted-foreground\">\r\n                  {returnRange[0]}% - {returnRange[1]}%\r\n                </span>\r\n              </div>\r\n              <Slider\r\n                value={returnRange}\r\n                onValueChange={(value) => {\r\n                  const newRange = value as [number, number]\r\n                  setReturnRange(newRange)\r\n                  // Only apply filter if not at default bounds\r\n                  const isDefault = newRange[0] === -50 && newRange[1] === 100\r\n                  onFiltersChange({\r\n                    ...filters,\r\n                    minReturn: isDefault ? undefined : newRange[0],\r\n                    maxReturn: isDefault ? undefined : newRange[1]\r\n                  })\r\n                }}\r\n                min={-50}\r\n                max={100}\r\n                step={5}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Active Filters Bar */}\r\n      {activeFiltersCount > 0 && (\r\n        <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded-lg\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Filter className=\"h-4 w-4 text-muted-foreground\" />\r\n            <span className=\"text-sm text-muted-foreground\">\r\n              {activeFiltersCount} filter{activeFiltersCount !== 1 ? 's' : ''} active\r\n            </span>\r\n            {totalResults > 0 && (\r\n              <>\r\n                <Separator orientation=\"vertical\" className=\"h-4\" />\r\n                <span className=\"text-sm font-medium\">\r\n                  {totalResults} result{totalResults !== 1 ? 's' : ''}\r\n                </span>\r\n              </>\r\n            )}\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={onClearFilters}\r\n            className=\"text-muted-foreground hover:text-foreground\"\r\n          >\r\n            <X className=\"h-4 w-4 mr-2\" />\r\n            Clear all\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3530, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,yBAAW,0OAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,qQAAC;QACC,WAAW,IAAA,gJAAE,EACX,+RACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 3557, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,8LAAG,EACvB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,0OAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,qQAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,IAAA,gJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,0OAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC;QACC,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,0OAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qQAAC;QACC,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 3622, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/investor/sell-position-form.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Alert, AlertDescription } from '@/components/ui/alert'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { Loader2, AlertTriangle, TrendingDown, Info, Percent } from 'lucide-react'\r\nimport { toast } from 'sonner'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface SellPositionFormProps {\r\n  subscriptionId: string\r\n  vehicleName: string\r\n  fundedAmount: number\r\n  currency: string\r\n  onSuccess?: () => void\r\n  onCancel?: () => void\r\n}\r\n\r\nexport function SellPositionForm({\r\n  subscriptionId,\r\n  vehicleName,\r\n  fundedAmount,\r\n  currency,\r\n  onSuccess,\r\n  onCancel\r\n}: SellPositionFormProps) {\r\n  const router = useRouter()\r\n  const [loading, setLoading] = useState(false)\r\n  const [amount, setAmount] = useState('')\r\n  const [askingPrice, setAskingPrice] = useState('')\r\n  const [notes, setNotes] = useState('')\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // Calculate percentage of position being sold\r\n  const amountValue = parseFloat(amount) || 0\r\n  const sellPercentage = fundedAmount > 0 ? (amountValue / fundedAmount) * 100 : 0\r\n\r\n  const formatCurrency = (value: number) => {\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: currency || 'USD',\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 2\r\n    }).format(value)\r\n  }\r\n\r\n  // Quick sell percentage buttons\r\n  const handleQuickPercent = (percent: number) => {\r\n    const value = (fundedAmount * percent) / 100\r\n    setAmount(value.toFixed(2))\r\n  }\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault()\r\n    setError(null)\r\n\r\n    if (!amount || amountValue <= 0) {\r\n      setError('Please enter a valid amount')\r\n      return\r\n    }\r\n\r\n    if (amountValue > fundedAmount) {\r\n      setError(`Amount cannot exceed your position value of ${formatCurrency(fundedAmount)}`)\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    try {\r\n      const response = await fetch('/api/investor/sell-request', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          subscription_id: subscriptionId,\r\n          amount_to_sell: amountValue,\r\n          asking_price_per_unit: askingPrice ? parseFloat(askingPrice) : undefined,\r\n          notes: notes || undefined\r\n        })\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to submit request')\r\n      }\r\n\r\n      toast.success('Sale request submitted successfully')\r\n\r\n      if (onSuccess) {\r\n        onSuccess()\r\n      } else {\r\n        router.push('/versotech_main/portfolio')\r\n        router.refresh()\r\n      }\r\n    } catch (err) {\r\n      console.error('Submit error:', err)\r\n      const message = err instanceof Error ? err.message : 'Failed to submit request'\r\n      setError(message)\r\n      toast.error(message)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full space-y-6\">\r\n      {/* Header with Position Summary */}\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-amber-500/10 to-orange-500/10 border border-amber-200/50\">\r\n            <TrendingDown className=\"h-5 w-5 text-amber-600\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-semibold text-lg tracking-tight\">Sell Position</h3>\r\n            <p className=\"text-sm text-muted-foreground mt-0.5\">\r\n              {vehicleName}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Position Value Display */}\r\n        <div className=\"p-4 rounded-xl bg-gradient-to-br from-slate-50 to-slate-100/50 dark:from-slate-900 dark:to-slate-800/50 border border-slate-200/50 dark:border-slate-700/50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-muted-foreground\">Position Value</span>\r\n            <span className=\"text-xl font-semibold tabular-nums tracking-tight\">\r\n              {formatCurrency(fundedAmount)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Separator className=\"bg-border/50\" />\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n        {/* Warning Alert */}\r\n        <Alert className=\"border-amber-200/50 bg-amber-50/50 dark:bg-amber-950/20\">\r\n          <AlertTriangle className=\"h-4 w-4 text-amber-600\" />\r\n          <AlertDescription className=\"text-sm text-amber-800 dark:text-amber-200\">\r\n            Sale requests are subject to review and buyer matching.\r\n            The process typically takes 2-4 weeks.\r\n          </AlertDescription>\r\n        </Alert>\r\n\r\n        {error && (\r\n          <Alert variant=\"destructive\" className=\"animate-in fade-in-0 slide-in-from-top-1\">\r\n            <AlertDescription>{error}</AlertDescription>\r\n          </Alert>\r\n        )}\r\n\r\n        {/* Amount to Sell */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <Label htmlFor=\"amount\" className=\"text-sm font-medium\">\r\n              Amount to Sell\r\n            </Label>\r\n            <span className=\"text-xs text-muted-foreground tabular-nums\">\r\n              {currency || 'USD'}\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"relative\">\r\n            <Input\r\n              id=\"amount\"\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              min=\"0\"\r\n              max={fundedAmount}\r\n              value={amount}\r\n              onChange={(e) => setAmount(e.target.value)}\r\n              placeholder=\"0.00\"\r\n              required\r\n              disabled={loading}\r\n              className=\"text-lg h-12 pr-20 font-medium tabular-nums\"\r\n            />\r\n            {amountValue > 0 && (\r\n              <div className=\"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1 text-xs text-muted-foreground bg-background px-1.5 py-0.5 rounded\">\r\n                <Percent className=\"h-3 w-3\" />\r\n                <span className=\"tabular-nums\">{sellPercentage.toFixed(1)}%</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Quick Percentage Buttons */}\r\n          <div className=\"flex gap-2\">\r\n            {[25, 50, 75, 100].map((percent) => (\r\n              <Button\r\n                key={percent}\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => handleQuickPercent(percent)}\r\n                disabled={loading}\r\n                className={cn(\r\n                  \"flex-1 text-xs h-8 transition-all\",\r\n                  sellPercentage === percent && \"bg-primary/5 border-primary/30 text-primary\"\r\n                )}\r\n              >\r\n                {percent}%\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Asking Price (Optional) */}\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Label htmlFor=\"askingPrice\" className=\"text-sm font-medium\">\r\n              Asking Price per Unit\r\n            </Label>\r\n            <span className=\"text-[10px] font-medium text-muted-foreground bg-muted px-1.5 py-0.5 rounded\">\r\n              OPTIONAL\r\n            </span>\r\n          </div>\r\n          <Input\r\n            id=\"askingPrice\"\r\n            type=\"number\"\r\n            step=\"0.0001\"\r\n            min=\"0\"\r\n            value={askingPrice}\r\n            onChange={(e) => setAskingPrice(e.target.value)}\r\n            placeholder=\"Leave blank for market price\"\r\n            disabled={loading}\r\n            className=\"h-11\"\r\n          />\r\n          <p className=\"text-xs text-muted-foreground flex items-center gap-1.5\">\r\n            <Info className=\"h-3 w-3\" />\r\n            If not specified, current market valuation will be used\r\n          </p>\r\n        </div>\r\n\r\n        {/* Notes (Optional) */}\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Label htmlFor=\"notes\" className=\"text-sm font-medium\">\r\n              Additional Notes\r\n            </Label>\r\n            <span className=\"text-[10px] font-medium text-muted-foreground bg-muted px-1.5 py-0.5 rounded\">\r\n              OPTIONAL\r\n            </span>\r\n          </div>\r\n          <Textarea\r\n            id=\"notes\"\r\n            value={notes}\r\n            onChange={(e) => setNotes(e.target.value)}\r\n            placeholder=\"Any special requirements or context for your request...\"\r\n            rows={3}\r\n            maxLength={1000}\r\n            disabled={loading}\r\n            className=\"resize-none\"\r\n          />\r\n          <div className=\"flex justify-end\">\r\n            <span className=\"text-[10px] text-muted-foreground tabular-nums\">\r\n              {notes.length}/1000\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <Separator className=\"bg-border/50\" />\r\n\r\n        {/* Summary before submit */}\r\n        {amountValue > 0 && (\r\n          <div className=\"p-4 rounded-xl bg-muted/30 border border-border/50 space-y-2\">\r\n            <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n              Request Summary\r\n            </p>\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-sm\">Selling</span>\r\n              <span className=\"font-semibold tabular-nums\">{formatCurrency(amountValue)}</span>\r\n            </div>\r\n            <div className=\"flex items-center justify-between text-muted-foreground\">\r\n              <span className=\"text-sm\">of position</span>\r\n              <span className=\"text-sm tabular-nums\">{sellPercentage.toFixed(1)}%</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-3 pt-2\">\r\n          <Button\r\n            type=\"submit\"\r\n            disabled={loading || amountValue <= 0}\r\n            className=\"flex-1 h-11 font-medium\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                Submitting...\r\n              </>\r\n            ) : (\r\n              'Submit Sale Request'\r\n            )}\r\n          </Button>\r\n          {onCancel && (\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onCancel}\r\n              disabled={loading}\r\n              className=\"h-11\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4251, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/holdings/vehicle-card.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport Image from 'next/image'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetHeader,\r\n  SheetTitle,\r\n} from '@/components/ui/sheet'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport {\r\n  Eye,\r\n  MoreVertical,\r\n  DollarSign,\r\n  Calendar,\r\n  TrendingDown\r\n} from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { SellPositionForm } from '@/components/investor/sell-position-form'\r\n\r\ninterface DocumentInfo {\r\n  id: string\r\n  name: string\r\n  type: string\r\n  file_key: string\r\n  created_at: string\r\n}\r\n\r\ninterface EnhancedHolding {\r\n  id: string\r\n  name: string\r\n  type: string\r\n  domicile?: string\r\n  currency: string\r\n  created_at: string\r\n  logo_url?: string\r\n  website_url?: string\r\n  investment_name?: string\r\n  allocation_status?: string | null\r\n  invite_sent_at?: string | null\r\n  position: {\r\n    units: number\r\n    costBasis: number\r\n    currentValue: number\r\n    unrealizedGain: number\r\n    unrealizedGainPct: number\r\n    lastUpdated?: string\r\n  } | null\r\n  subscription: {\r\n    id?: string  // For sell request form\r\n    commitment: number | null\r\n    currency: string\r\n    status: string\r\n    effective_date?: string | null\r\n    funding_due_at?: string | null\r\n    units?: number | null\r\n  } | null\r\n  valuation: {\r\n    navTotal: number\r\n    navPerUnit: number\r\n    asOfDate: string\r\n  } | null\r\n  performance: {\r\n    unrealizedGainPct: number\r\n  } | null\r\n  status?: string\r\n  documents?: {\r\n    nda: DocumentInfo | null\r\n    subscription_pack: DocumentInfo | null\r\n    certificate: DocumentInfo | null\r\n  }\r\n}\r\n\r\nconst getStatusStyles = (status: string) => {\r\n  switch (status) {\r\n    case 'active':\r\n    case 'committed':\r\n      return 'bg-emerald-600 border-emerald-500 text-white font-medium'\r\n    case 'pending':\r\n      return 'bg-amber-600 border-amber-500 text-white font-medium'\r\n    case 'closed':\r\n      return 'bg-blue-600 border-blue-500 text-white font-medium'\r\n    case 'cancelled':\r\n      return 'bg-red-600 border-red-500 text-white font-medium'\r\n    default:\r\n      return 'bg-muted border-border text-foreground font-medium'\r\n  }\r\n}\r\n\r\ninterface VehicleCardProps {\r\n  holding: EnhancedHolding\r\n  detailsBasePath?: string\r\n}\r\n\r\nexport function VehicleCard({\r\n  holding,\r\n  detailsBasePath = '/versotech_main/portfolio'\r\n}: VehicleCardProps) {\r\n  const router = useRouter()\r\n  const [sellSheetOpen, setSellSheetOpen] = useState(false)\r\n\r\n  // Check if has actual position with units (units matter, not currentValue which depends on NAV)\r\n  const hasPosition = holding.position && holding.position.units > 0\r\n\r\n  // Show position data when there's a position with units\r\n  const showPositionData = hasPosition\r\n\r\n  const canSell = hasPosition && holding.subscription?.id\r\n  const isPositive = holding.position?.unrealizedGainPct ? holding.position.unrealizedGainPct >= 0 : false\r\n  const rawStatus =\r\n    holding.status ||\r\n    holding.allocation_status ||\r\n    holding.subscription?.status ||\r\n    (hasPosition ? 'active' : 'pending')\r\n  const status = rawStatus.toLowerCase()\r\n  const statusLabel = status.replace(/_/g, ' ').toUpperCase()\r\n\r\n  const handleViewDetails = () => {\r\n    router.push(`${detailsBasePath}/${holding.id}`)\r\n  }\r\n\r\n  const handleDownloadDocument = async (doc: DocumentInfo) => {\r\n    try {\r\n      const response = await fetch(`/api/documents/${doc.id}/download`)\r\n      const data = await response.json()\r\n      if (data.url) {\r\n        window.open(data.url, '_blank')\r\n      }\r\n    } catch (error) {\r\n      console.error('Download failed:', error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card className=\"group relative overflow-hidden border shadow-sm hover:shadow-md transition-shadow duration-200 min-h-[420px] flex flex-col\">\r\n      <CardHeader className=\"pb-3 flex-shrink-0\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"space-y-3\">\r\n            {/* Investment branding (underlying company/asset) */}\r\n            <div className=\"flex items-center gap-3\">\r\n              {holding.logo_url ? (\r\n                <Image\r\n                  src={holding.logo_url}\r\n                  alt={holding.investment_name || 'Investment'}\r\n                  width={48}\r\n                  height={48}\r\n                  className=\"h-12 w-12 rounded-lg object-contain bg-muted p-1.5\"\r\n                />\r\n              ) : (\r\n                <div className=\"h-12 w-12 rounded-lg bg-gradient-to-br from-blue-600 to-indigo-700 flex items-center justify-center shadow-sm\">\r\n                  <span className=\"text-white font-bold text-lg\">\r\n                    {(holding.investment_name || holding.name || 'V').charAt(0).toUpperCase()}\r\n                  </span>\r\n                </div>\r\n              )}\r\n              <div>\r\n                {holding.investment_name && (\r\n                  <span className=\"text-sm font-medium text-muted-foreground block\">\r\n                    {holding.investment_name}\r\n                  </span>\r\n                )}\r\n                <CardTitle className=\"text-lg font-semibold line-clamp-1\">{holding.name}</CardTitle>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Badges */}\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              <Badge variant=\"secondary\" className=\"text-xs\">\r\n                {holding.type.replace(/_/g, ' ')}\r\n              </Badge>\r\n              {holding.domicile && (\r\n                <Badge variant=\"outline\" className=\"text-xs\">\r\n                  {holding.domicile}\r\n                </Badge>\r\n              )}\r\n              <Badge className={cn('text-xs', getStatusStyles(status))}>{statusLabel}</Badge>\r\n            </div>\r\n          </div>\r\n          <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n              <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\r\n                <MoreVertical className=\"h-4 w-4\" />\r\n              </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent align=\"end\">\r\n              <DropdownMenuLabel>Actions</DropdownMenuLabel>\r\n              <DropdownMenuSeparator />\r\n              <DropdownMenuItem onClick={handleViewDetails}>\r\n                <Eye className=\"mr-2 h-4 w-4\" />\r\n                View Details\r\n              </DropdownMenuItem>\r\n              {canSell && (\r\n                <DropdownMenuItem onClick={() => setSellSheetOpen(true)}>\r\n                  <TrendingDown className=\"mr-2 h-4 w-4\" />\r\n                  Request Sale\r\n                </DropdownMenuItem>\r\n              )}\r\n            </DropdownMenuContent>\r\n          </DropdownMenu>\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"flex-1 flex flex-col\">\r\n        <div className=\"flex-1 space-y-4\">\r\n          {showPositionData ? (\r\n            <>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm text-muted-foreground\">Current Value</span>\r\n                  <span className=\"text-lg font-bold\">\r\n                    {new Intl.NumberFormat('en-US', {\r\n                      style: 'currency',\r\n                      currency: holding.currency,\r\n                      minimumFractionDigits: 0,\r\n                      maximumFractionDigits: 0\r\n                    }).format(holding.position!.currentValue)}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm text-muted-foreground\">Unrealized Gain</span>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className={cn(\r\n                      \"text-sm font-medium\",\r\n                      isPositive ? \"text-foreground\" : \"text-muted-foreground\"\r\n                    )}>\r\n                      {new Intl.NumberFormat('en-US', {\r\n                        style: 'currency',\r\n                        currency: holding.currency,\r\n                        minimumFractionDigits: 0,\r\n                        maximumFractionDigits: 0,\r\n                        signDisplay: 'always'\r\n                      }).format(holding.position!.unrealizedGain)}\r\n                    </span>\r\n                    <Badge\r\n                      variant=\"outline\"\r\n                      className=\"text-xs\"\r\n                    >\r\n                      {isPositive ? '+' : '-'}{Math.abs(holding.position!.unrealizedGainPct).toFixed(1)}%\r\n                    </Badge>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"pt-3 border-t mt-3\">\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div>\r\n                    <p className=\"text-muted-foreground\">Units</p>\r\n                    <p className=\"font-medium\">{holding.position!.units.toLocaleString()}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-muted-foreground\">Cost Basis</p>\r\n                    <p className=\"font-medium\">\r\n                      {new Intl.NumberFormat('en-US', {\r\n                        style: 'currency',\r\n                        currency: holding.currency,\r\n                        minimumFractionDigits: 0,\r\n                        maximumFractionDigits: 0\r\n                      }).format(holding.position!.costBasis)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {holding.valuation && (\r\n                <div className=\"pt-3 border-t mt-3\">\r\n                  <div className=\"flex items-center justify-between text-sm\">\r\n                    <span className=\"text-muted-foreground\">NAV per Unit</span>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"font-medium\">\r\n                        {new Intl.NumberFormat('en-US', {\r\n                          style: 'currency',\r\n                          currency: holding.currency\r\n                        }).format(holding.valuation.navPerUnit)}\r\n                      </p>\r\n                      <p className=\"text-xs text-muted-foreground flex items-center justify-end gap-1\">\r\n                        <Calendar className=\"h-3 w-3\" />\r\n                        {new Date(holding.valuation.asOfDate).toLocaleDateString()}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div className=\"text-center py-6 space-y-3\">\r\n              <DollarSign className=\"h-12 w-12 text-muted-foreground/20 mx-auto mb-1\" />\r\n              <div className=\"space-y-1\">\r\n                <p className=\"text-sm font-medium text-foreground\">Awaiting Funding</p>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Your commitment has been recorded. We will notify you once units are issued.\r\n                </p>\r\n              </div>\r\n              <div className=\"space-y-1\">\r\n                <Badge variant=\"outline\" className=\"bg-muted/50 border-border text-xs capitalize\">\r\n                  Allocation Status: {(holding.allocation_status || holding.subscription?.status || 'pending').replace(/_/g, ' ')}\r\n                </Badge>\r\n                {holding.subscription?.commitment !== null && holding.subscription?.commitment !== undefined && (\r\n                  <Badge variant=\"outline\" className=\"bg-muted/50 border-border text-xs\">\r\n                    Commitment:{' '}\r\n                    {new Intl.NumberFormat('en-US', {\r\n                      style: 'currency',\r\n                      currency: holding.subscription?.currency || holding.currency,\r\n                      minimumFractionDigits: 0,\r\n                      maximumFractionDigits: 0\r\n                    }).format(holding.subscription.commitment ?? 0)}\r\n                  </Badge>\r\n                )}\r\n                {holding.subscription?.funding_due_at && (\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Funding due {new Date(holding.subscription.funding_due_at).toLocaleDateString()}\r\n                  </p>\r\n                )}\r\n                {holding.invite_sent_at && (\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Invite sent {new Date(holding.invite_sent_at).toLocaleDateString()}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Documents */}\r\n        {holding.documents && (\r\n          <div className=\"pt-3 border-t\">\r\n            <p className=\"text-xs text-muted-foreground mb-2\">Documents</p>\r\n            <div className=\"flex flex-wrap gap-3 text-sm\">\r\n              {holding.documents.nda && (\r\n                <button\r\n                  onClick={() => handleDownloadDocument(holding.documents!.nda!)}\r\n                  className=\"text-emerald-500 hover:text-emerald-400 hover:underline\"\r\n                >\r\n                  NDA\r\n                </button>\r\n              )}\r\n              {holding.documents.subscription_pack && (\r\n                <button\r\n                  onClick={() => handleDownloadDocument(holding.documents!.subscription_pack!)}\r\n                  className=\"text-emerald-500 hover:text-emerald-400 hover:underline\"\r\n                >\r\n                  Sub Pack\r\n                </button>\r\n              )}\r\n              {holding.documents.certificate && (\r\n                <button\r\n                  onClick={() => handleDownloadDocument(holding.documents!.certificate!)}\r\n                  className=\"text-emerald-500 hover:text-emerald-400 hover:underline\"\r\n                >\r\n                  Certificate\r\n                </button>\r\n              )}\r\n              {!holding.documents.nda && !holding.documents.subscription_pack && !holding.documents.certificate && (\r\n                <span className=\"text-muted-foreground text-xs\">No documents</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"pt-2 mt-auto space-y-2\">\r\n          {canSell && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full border-amber-200 text-amber-700 hover:bg-amber-50 hover:text-amber-800\"\r\n              onClick={() => setSellSheetOpen(true)}\r\n            >\r\n              <TrendingDown className=\"h-4 w-4 mr-2\" />\r\n              Request Sale\r\n            </Button>\r\n          )}\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"w-full\"\r\n            onClick={handleViewDetails}\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-2\" />\r\n            View Details\r\n          </Button>\r\n        </div>\r\n      </CardContent>\r\n\r\n      {/* Sell Position Sheet */}\r\n      {canSell && (\r\n        <Sheet open={sellSheetOpen} onOpenChange={setSellSheetOpen}>\r\n          <SheetContent className=\"sm:max-w-md overflow-y-auto\">\r\n            <SheetHeader className=\"mb-4\">\r\n              <SheetTitle>Request Position Sale</SheetTitle>\r\n            </SheetHeader>\r\n            <SellPositionForm\r\n              subscriptionId={holding.subscription!.id!}\r\n              vehicleName={holding.name}\r\n              fundedAmount={holding.position!.costBasis}\r\n              currency={holding.currency}\r\n              onSuccess={() => setSellSheetOpen(false)}\r\n              onCancel={() => setSellSheetOpen(false)}\r\n            />\r\n          </SheetContent>\r\n        </Sheet>\r\n      )}\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5039, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/holdings/realtime-holdings-provider.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState, useRef, useCallback } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { RealtimeChannel } from '@supabase/supabase-js'\r\nimport { toast } from 'sonner'\r\nimport { useRouter } from 'next/navigation'\r\n\r\ninterface RealtimeUpdate {\r\n  type: 'kpi_update' | 'position_update' | 'valuation_update' | 'allocation_update' | 'capital_call' | 'distribution' | 'fee_accrual'\r\n  data: any\r\n  timestamp: string\r\n}\r\n\r\ninterface RealtimeHoldingsProviderProps {\r\n  children: React.ReactNode\r\n  investorIds: string[]\r\n  onDataUpdate?: (update: RealtimeUpdate) => void\r\n  enableNotifications?: boolean\r\n  holdingsPath?: string\r\n}\r\n\r\nexport function RealtimeHoldingsProvider({\r\n  children,\r\n  investorIds,\r\n  onDataUpdate,\r\n  enableNotifications = true,\r\n  holdingsPath = '/versotech_main/portfolio'\r\n}: RealtimeHoldingsProviderProps) {\r\n  const [isConnected, setIsConnected] = useState(false)\r\n  const [lastUpdate, setLastUpdate] = useState<string | null>(null)\r\n  const channelsRef = useRef<RealtimeChannel[]>([])\r\n  const reconnectAttempts = useRef(0)\r\n  const maxReconnectAttempts = 5\r\n  const reconnectDelay = useRef(1000) // Start with 1 second\r\n  const reconnectHandlerRef = useRef<() => void>(() => { })\r\n  const router = useRouter()\r\n\r\n  // Clean up channels on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      channelsRef.current.forEach(channel => {\r\n        channel.unsubscribe()\r\n      })\r\n      channelsRef.current = []\r\n    }\r\n  }, [])\r\n\r\n  // Debounced update handler to prevent excessive updates\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const debouncedUpdate = useCallback(\r\n    debounce((update: RealtimeUpdate) => {\r\n      setLastUpdate(new Date().toISOString())\r\n      onDataUpdate?.(update)\r\n\r\n      if (enableNotifications) {\r\n        switch (update.type) {\r\n          case 'position_update':\r\n            toast.info('Portfolio position updated', {\r\n              description: 'Your holdings have been updated with the latest data.',\r\n              duration: 3000\r\n            })\r\n            break\r\n          case 'valuation_update':\r\n            toast.info('Valuation updated', {\r\n              description: 'New NAV data is available for your investments.',\r\n              duration: 3000\r\n            })\r\n            break\r\n          case 'allocation_update':\r\n            toast.success('Allocation confirmed', {\r\n              description: 'Your deal allocation has been processed.',\r\n              duration: 5000\r\n            })\r\n            break\r\n          case 'capital_call':\r\n            toast.warning('Capital call issued', {\r\n              description: 'A new capital call has been issued for one of your investments.',\r\n              duration: 10000,\r\n              action: {\r\n                label: 'View Details',\r\n                onClick: () => router.push(holdingsPath)\r\n              }\r\n            })\r\n            break\r\n          case 'distribution':\r\n            toast.success('Distribution received', {\r\n              description: 'A distribution has been processed for your investment.',\r\n              duration: 8000,\r\n              action: {\r\n                label: 'View Details',\r\n                onClick: () => router.push(holdingsPath)\r\n              }\r\n            })\r\n            break\r\n          case 'fee_accrual':\r\n            toast.info('Fee accrued', {\r\n              description: 'New fees have been accrued for your investments.',\r\n              duration: 5000\r\n            })\r\n            break\r\n        }\r\n      }\r\n    }, 2000),\r\n    [onDataUpdate, enableNotifications, holdingsPath, router]\r\n  )\r\n\r\n  // Set up realtime subscriptions\r\n  useEffect(() => {\r\n    if (!investorIds.length) return\r\n\r\n    let supabase: ReturnType<typeof createClient>\r\n\r\n    const setupSubscriptions = async () => {\r\n      try {\r\n        supabase = createClient()\r\n\r\n        // Clean up existing channels\r\n        channelsRef.current.forEach(channel => {\r\n          channel.unsubscribe()\r\n        })\r\n        channelsRef.current = []\r\n\r\n        const investorFilter = `investor_id=in.(${investorIds.join(',')})`\r\n\r\n        // 1. Position Updates Channel\r\n        const positionsChannel = supabase\r\n          .channel('positions_updates')\r\n          .on(\r\n            'postgres_changes',\r\n            {\r\n              event: '*',\r\n              schema: 'public',\r\n              table: 'positions',\r\n              filter: investorFilter\r\n            },\r\n            (payload) => {\r\n              console.log('Position update:', payload)\r\n              debouncedUpdate({\r\n                type: 'position_update',\r\n                data: payload,\r\n                timestamp: new Date().toISOString()\r\n              })\r\n            }\r\n          )\r\n          .subscribe((status) => {\r\n            console.log('Positions channel status:', status)\r\n            if (status === 'SUBSCRIBED') {\r\n              setIsConnected(true)\r\n              reconnectAttempts.current = 0\r\n              reconnectDelay.current = 1000\r\n            } else if (status === 'CHANNEL_ERROR') {\r\n              setIsConnected(false)\r\n              handleReconnect()\r\n            }\r\n          })\r\n\r\n        // 2. Valuations Updates Channel\r\n        const valuationsChannel = supabase\r\n          .channel('valuations_updates')\r\n          .on(\r\n            'postgres_changes',\r\n            {\r\n              event: '*',\r\n              schema: 'public',\r\n              table: 'valuations'\r\n            },\r\n            (payload) => {\r\n              console.log('Valuation update:', payload)\r\n              debouncedUpdate({\r\n                type: 'valuation_update',\r\n                data: payload,\r\n                timestamp: new Date().toISOString()\r\n              })\r\n            }\r\n          )\r\n          .subscribe()\r\n\r\n        // 3. Allocations Updates Channel (for deal holdings)\r\n        const allocationsChannel = supabase\r\n          .channel('allocations_updates')\r\n          .on(\r\n            'postgres_changes',\r\n            {\r\n              event: '*',\r\n              schema: 'public',\r\n              table: 'allocations',\r\n              filter: investorFilter\r\n            },\r\n            (payload) => {\r\n              console.log('Allocation update:', payload)\r\n              debouncedUpdate({\r\n                type: 'allocation_update',\r\n                data: payload,\r\n                timestamp: new Date().toISOString()\r\n              })\r\n            }\r\n          )\r\n          .subscribe()\r\n\r\n        // 4. Performance Snapshots Channel REMOVED (mock data)\r\n        // const performanceChannel = ...\r\n\r\n        // 5. Capital Calls Channel\r\n        const capitalCallsChannel = supabase\r\n          .channel('capital_calls_updates')\r\n          .on(\r\n            'postgres_changes',\r\n            {\r\n              event: 'INSERT',\r\n              schema: 'public',\r\n              table: 'capital_calls'\r\n            },\r\n            (payload) => {\r\n              console.log('Capital call update:', payload)\r\n              debouncedUpdate({\r\n                type: 'capital_call',\r\n                data: payload,\r\n                timestamp: new Date().toISOString()\r\n              })\r\n            }\r\n          )\r\n          .subscribe()\r\n\r\n        // 6. Distributions Channel\r\n        const distributionsChannel = supabase\r\n          .channel('distributions_updates')\r\n          .on(\r\n            'postgres_changes',\r\n            {\r\n              event: 'INSERT',\r\n              schema: 'public',\r\n              table: 'distributions'\r\n            },\r\n            (payload) => {\r\n              console.log('Distribution update:', payload)\r\n              debouncedUpdate({\r\n                type: 'distribution',\r\n                data: payload,\r\n                timestamp: new Date().toISOString()\r\n              })\r\n            }\r\n          )\r\n          .subscribe()\r\n\r\n        // 7. Fee Events Channel\r\n        const feeEventsChannel = supabase\r\n          .channel('fee_events_updates')\r\n          .on(\r\n            'postgres_changes',\r\n            {\r\n              event: '*',\r\n              schema: 'public',\r\n              table: 'fee_events',\r\n              filter: investorFilter\r\n            },\r\n            (payload) => {\r\n              console.log('Fee event update:', payload)\r\n              debouncedUpdate({\r\n                type: 'fee_accrual',\r\n                data: payload,\r\n                timestamp: new Date().toISOString()\r\n              })\r\n            }\r\n          )\r\n          .subscribe()\r\n\r\n        // Store channel references\r\n        channelsRef.current = [\r\n          positionsChannel,\r\n          valuationsChannel,\r\n          allocationsChannel,\r\n          // performanceChannel,\r\n          capitalCallsChannel,\r\n          distributionsChannel,\r\n          feeEventsChannel\r\n        ]\r\n\r\n        console.log('Realtime subscriptions established for investors:', investorIds)\r\n\r\n      } catch (error) {\r\n        console.error('Error setting up realtime subscriptions:', error)\r\n        setIsConnected(false)\r\n        handleReconnect()\r\n      }\r\n    }\r\n\r\n    // Handle reconnection with exponential backoff\r\n    const handleReconnect = () => {\r\n      if (reconnectAttempts.current < maxReconnectAttempts) {\r\n        setTimeout(() => {\r\n          console.log(`Attempting to reconnect... (attempt ${reconnectAttempts.current + 1})`)\r\n          reconnectAttempts.current++\r\n          reconnectDelay.current = Math.min(reconnectDelay.current * 2, 30000) // Cap at 30 seconds\r\n          setupSubscriptions()\r\n        }, reconnectDelay.current)\r\n      } else {\r\n        console.error('Max reconnection attempts reached')\r\n        toast.error('Connection lost', {\r\n          description: 'Unable to maintain real-time updates. Please refresh the page.',\r\n          duration: 10000,\r\n          action: {\r\n            label: 'Refresh',\r\n            onClick: () => router.refresh()\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    reconnectHandlerRef.current = handleReconnect\r\n\r\n    setupSubscriptions()\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      channelsRef.current.forEach(channel => {\r\n        channel.unsubscribe()\r\n      })\r\n      channelsRef.current = []\r\n      setIsConnected(false)\r\n    }\r\n  }, [investorIds, debouncedUpdate, router])\r\n\r\n  // Periodic connection health check\r\n  useEffect(() => {\r\n    const healthCheck = setInterval(() => {\r\n      if (!isConnected && reconnectAttempts.current < maxReconnectAttempts) {\r\n        console.log('Health check: Connection lost, attempting reconnection...')\r\n        reconnectAttempts.current = 0 // Reset attempts for health check\r\n        reconnectHandlerRef.current()\r\n      }\r\n    }, 60000) // Check every minute\r\n\r\n    return () => clearInterval(healthCheck)\r\n  }, [isConnected])\r\n\r\n  // Provide connection status to children via context if needed\r\n  return (\r\n    <div className=\"relative\">\r\n      {children}\r\n\r\n      {/* Connection Status Indicator */}\r\n      <div className=\"fixed bottom-4 right-4 z-50\">\r\n        <div\r\n          className={`flex items-center gap-2 px-3 py-2 rounded-full text-xs font-medium transition-all duration-300 ${isConnected\r\n            ? 'bg-green-100 text-green-700 border border-green-200'\r\n            : 'bg-red-100 text-red-700 border border-red-200'\r\n            }`}\r\n        >\r\n          <div\r\n            className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-500 animate-pulse' : 'bg-red-500'\r\n              }`}\r\n          />\r\n          {isConnected ? 'Live' : 'Offline'}\r\n          {lastUpdate && isConnected && (\r\n            <span className=\"opacity-70\">\r\n               {new Date(lastUpdate).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false })}\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// Debounce utility function\r\nfunction debounce<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): (...args: Parameters<T>) => void {\r\n  let timeout: NodeJS.Timeout | null = null\r\n\r\n  return (...args: Parameters<T>) => {\r\n    if (timeout) {\r\n      clearTimeout(timeout)\r\n    }\r\n\r\n    timeout = setTimeout(() => {\r\n      func(...args)\r\n    }, wait)\r\n  }\r\n}\r\n\r\n// Hook to access realtime status\r\nexport function useRealtimeStatus() {\r\n  const [isConnected, setIsConnected] = useState(false)\r\n  const [lastUpdate, setLastUpdate] = useState<string | null>(null)\r\n\r\n  return {\r\n    isConnected,\r\n    lastUpdate,\r\n    setIsConnected,\r\n    setLastUpdate\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5385, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,qQAAC;QACC,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 5409, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/holdings/holdings-page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useMemo, useCallback } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport { PortfolioDashboard } from '@/components/holdings/portfolio-dashboard'\nimport { ModernHoldingsFilters, type FiltersState, type SortOption } from '@/components/holdings/modern-holdings-filters'\nimport { VehicleCard } from '@/components/holdings/vehicle-card'\n// Removed CleanDealCard - only showing holdings per user request\nimport { RealtimeHoldingsProvider } from '@/components/holdings/realtime-holdings-provider'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\n// Removed Tabs import - no longer using tabs per user request\nimport { Alert, AlertDescription } from '@/components/ui/alert'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport {\n  TrendingUp,\n  TrendingDown,\n  Building,\n  AlertCircle,\n  RefreshCw,\n  Target,\n  PieChart\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\n// Enhanced holding interface\ninterface EnhancedHolding {\n  id: string\n  name: string\n  type: string\n  domicile?: string\n  currency: string\n  created_at: string\n  logo_url?: string\n  website_url?: string\n  investment_name?: string\n  allocation_status?: string | null\n  invite_sent_at?: string | null\n  position: {\n    units: number\n    costBasis: number\n    currentValue: number\n    unrealizedGain: number\n    unrealizedGainPct: number\n    lastUpdated?: string\n  } | null\n  subscription: {\n    id?: string  // For sell request form\n    commitment: number | null\n    currency: string\n    status: string\n    effective_date?: string | null\n    funding_due_at?: string | null\n    units?: number | null\n  } | null\n  valuation: {\n    navTotal: number\n    navPerUnit: number\n    asOfDate: string\n  } | null\n  performance: {\n    unrealizedGainPct: number\n  } | null\n  status?: string\n}\n\nconst deriveHoldingStatus = (holding: Partial<EnhancedHolding>) => {\n  if (holding.status) return holding.status\n\n  const allocation = holding.allocation_status?.toLowerCase()\n  if (allocation === 'active' || allocation === 'committed' || allocation === 'pending') {\n    return allocation\n  }\n  if (allocation === 'closed' || allocation === 'cancelled') {\n    return 'closed'\n  }\n\n  const raw = holding.subscription?.status?.toLowerCase()\n  if (raw === 'active') return 'active'\n  if (raw === 'committed' || raw === 'pending') return 'pending'\n  if (raw === 'closed' || raw === 'cancelled') return 'closed'\n\n  if (holding.position && holding.position.currentValue > 0) return 'active'\n  return 'pending'\n}\n\n// Removed DealHolding interface - only showing holdings per user request\n\ninterface HoldingsPageProps {\n  initialData?: {\n    kpis: any\n    trends?: any\n    summary: any\n    asOfDate: string\n    vehicleBreakdown?: any[]\n  }\n  detailsBasePath?: string\n  holdingsPath?: string\n  dealsPath?: string\n  positionsOnly?: boolean\n}\n\nexport function HoldingsPage({\n  initialData,\n  detailsBasePath = '/versotech_main/portfolio',\n  holdingsPath = '/versotech_main/portfolio',\n  dealsPath = '/versotech_main/opportunities',\n  positionsOnly = false\n}: HoldingsPageProps) {\n  // State management\n  const [holdings, setHoldings] = useState<EnhancedHolding[]>([])\n  // Removed dealHoldings - only showing holdings per user request\n  const [portfolioData, setPortfolioData] = useState(initialData)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [isRefreshing, setIsRefreshing] = useState(false)\n  const [investorIds, setInvestorIds] = useState<string[]>([])\n  // Removed view toggle - only grid view per user request\n\n  // Chart data states\n  const [allocationData, setAllocationData] = useState<any[]>([])\n  const [performanceData, setPerformanceData] = useState<any[]>([])\n  const [cashFlowData, setCashFlowData] = useState<any[]>([])\n\n  // Filter and sort state\n  const [filters, setFilters] = useState<FiltersState>({\n    search: '',\n    type: 'all',\n    status: 'all',\n    performance: 'all',\n    size: 'all',\n    vintage: 'all',\n    domicile: 'all'\n  })\n  const [sortBy, setSortBy] = useState<SortOption>('value_desc')\n\n  // Fetch portfolio data\n  const fetchPortfolioData = useCallback(async (includeBreakdown = true, includeTrends = true, useCache = true) => {\n    try {\n      const params = new URLSearchParams()\n      if (includeBreakdown) params.append('breakdown', 'true')\n      if (includeTrends) params.append('trends', 'true')\n\n      const fetchOptions: RequestInit = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n\n      if (!useCache) {\n        fetchOptions.cache = 'no-store'\n      }\n\n      const response = await fetch(`/api/portfolio?${params.toString()}`, fetchOptions)\n\n      if (!response.ok) {\n        const errorText = await response.text()\n        throw new Error(`Failed to fetch portfolio data: ${errorText}`)\n      }\n\n      const data = await response.json()\n      return data\n    } catch (err) {\n      console.error('Portfolio fetch error:', err)\n      throw err\n    }\n  }, [])\n\n  // Fetch holdings data\n  const fetchHoldings = useCallback(async (useCache = true) => {\n    try {\n      const fetchOptions: RequestInit = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n\n      if (!useCache) {\n        fetchOptions.cache = 'no-store'\n      }\n\n      const response = await fetch('/api/vehicles?related=true', fetchOptions)\n\n      if (!response.ok) {\n        const errorText = await response.text()\n        throw new Error(`Failed to fetch holdings: ${errorText}`)\n      }\n\n      const data = await response.json()\n      const normalized: EnhancedHolding[] = (data.vehicles || []).map((holding: EnhancedHolding) => {\n        const status = deriveHoldingStatus(holding)\n        const normalizedSubscription = holding.subscription\n          ? {\n              ...holding.subscription,\n              commitment:\n                holding.subscription.commitment === null || holding.subscription.commitment === undefined\n                  ? null\n                  : Number(holding.subscription.commitment),\n              currency: holding.subscription.currency || holding.currency,\n              status: holding.subscription.status || holding.allocation_status || status\n            }\n          : holding.subscription\n\n        return {\n          ...holding,\n          status,\n          allocation_status: holding.allocation_status || normalizedSubscription?.status || status,\n          subscription: normalizedSubscription\n        }\n      })\n\n      const filteredHoldings = positionsOnly\n        ? normalized.filter(holding => (holding.position?.units ?? 0) > 0)\n        : normalized\n\n      setHoldings(filteredHoldings)\n      // No longer tracking deals\n    } catch (err) {\n      console.error('Holdings fetch error:', err)\n      throw err\n    }\n  }, [positionsOnly])\n\n  // Initial data load\n  useEffect(() => {\n    const loadData = async () => {\n      setIsLoading(true)\n      setError(null)\n\n      try {\n        // Get investor IDs first\n        const supabase = createClient()\n        const { data: { user } } = await supabase.auth.getUser()\n\n        if (user) {\n          const { data: investorLinks } = await supabase\n            .from('investor_users')\n            .select('investor_id')\n            .eq('user_id', user.id)\n\n          if (investorLinks) {\n            const ids = investorLinks.map(link => link.investor_id)\n            setInvestorIds(ids)\n          }\n        }\n\n        // Use server-provided initial data if available, otherwise fetch\n        if (initialData) {\n          setPortfolioData(initialData)\n          await fetchHoldings()\n        } else {\n          // Fetch data in parallel only if no initial data\n          const [portfolioResult] = await Promise.all([\n            fetchPortfolioData(),\n            fetchHoldings()\n          ])\n          setPortfolioData(portfolioResult)\n        }\n      } catch (err) {\n        console.error('Data load error:', err)\n        setError(err instanceof Error ? err.message : 'Failed to load portfolio data')\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    loadData()\n  }, [initialData, fetchPortfolioData, fetchHoldings])\n\n  // Handle refresh\n  const handleRefresh = async () => {\n    setIsRefreshing(true)\n    setError(null)\n\n    try {\n      const [portfolioResult] = await Promise.all([\n        fetchPortfolioData(true, true, false),\n        fetchHoldings(false)\n      ])\n\n      setPortfolioData(portfolioResult)\n    } catch (err) {\n      console.error('Refresh error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to refresh data')\n    } finally {\n      setIsRefreshing(false)\n    }\n  }\n\n  // Prepare chart data\n  useEffect(() => {\n    const prepareChartData = async () => {\n      if (!portfolioData || !investorIds.length) return\n\n      const supabase = createClient()\n\n      try {\n        // 1. Allocation Chart - from vehicleBreakdown\n        if (portfolioData.vehicleBreakdown && portfolioData.vehicleBreakdown.length > 0) {\n          const totalValue = portfolioData.vehicleBreakdown.reduce((sum: number, v: any) => sum + (v.currentValue || 0), 0)\n          const allocation = portfolioData.vehicleBreakdown.map((v: any) => ({\n            name: v.vehicleName || 'Unknown',\n            value: v.currentValue || 0,\n            percentage: totalValue > 0 ? ((v.currentValue || 0) / totalValue) * 100 : 0\n          }))\n          setAllocationData(allocation)\n        }\n\n        // 2. Performance Chart - fetch valuations\n        const { data: valuations } = await supabase\n          .from('valuations')\n          .select('vehicle_id, nav_total, as_of_date')\n          .in('vehicle_id', holdings.map(h => h.id))\n          .order('as_of_date', { ascending: true })\n          .limit(50)\n\n        if (valuations && valuations.length > 0) {\n          // Group by date and sum NAV\n          const navByDate = valuations.reduce((acc: any, v: any) => {\n            const date = v.as_of_date.split('T')[0]\n            if (!acc[date]) {\n              acc[date] = 0\n            }\n            acc[date] += v.nav_total || 0\n            return acc\n          }, {})\n\n          const performance = Object.entries(navByDate).map(([date, value]: [string, any]) => ({\n            date,\n            value,\n            displayDate: new Date(date).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })\n          }))\n          setPerformanceData(performance)\n        }\n\n        // 3. Cash Flow Chart - fetch from cashflows table (has investor_id)\n        const { data: cashflowsData } = await supabase\n          .from('cashflows')\n          .select('type, amount, date')\n          .in('investor_id', investorIds)\n          .order('date', { ascending: true })\n          .limit(100)\n\n        // Group by period\n        const cashFlowMap: any = {}\n\n        cashflowsData?.forEach((cf: any) => {\n          const period = new Date(cf.date).toISOString().substring(0, 7) // YYYY-MM\n          if (!cashFlowMap[period]) {\n            cashFlowMap[period] = { period, contributions: 0, distributions: 0 }\n          }\n          if (cf.type === 'call') {\n            cashFlowMap[period].contributions += cf.amount || 0\n          } else if (cf.type === 'distribution') {\n            cashFlowMap[period].distributions += cf.amount || 0\n          }\n        })\n\n        const cashFlow = Object.values(cashFlowMap).map((cf: any) => ({\n          ...cf,\n          displayPeriod: new Date(cf.period + '-01').toLocaleDateString('en-US', { month: 'short', year: 'numeric' })\n        }))\n        setCashFlowData(cashFlow)\n\n      } catch (err) {\n        console.error('Chart data preparation error:', err)\n      }\n    }\n\n    prepareChartData()\n  }, [portfolioData, investorIds, holdings])\n\n  // Filter holdings\n  const filteredHoldings = useMemo(() => {\n    let filtered = [...holdings]\n\n    // Apply filters\n    if (filters.search) {\n      const searchLower = filters.search.toLowerCase()\n      filtered = filtered.filter(h => \n        h.name.toLowerCase().includes(searchLower) ||\n        h.type.toLowerCase().includes(searchLower) ||\n        (h.domicile && h.domicile.toLowerCase().includes(searchLower))\n      )\n    }\n\n    if (filters.type !== 'all') {\n      filtered = filtered.filter(h => h.type === filters.type)\n    }\n\n    if (filters.status !== 'all') {\n      filtered = filtered.filter(h => deriveHoldingStatus(h) === filters.status)\n    }\n\n    if (filters.performance !== 'all') {\n      filtered = filtered.filter(h => {\n        const gain = h.position?.unrealizedGainPct || 0\n        switch (filters.performance) {\n          case 'positive':\n            return gain > 0\n          case 'negative':\n            return gain < 0\n          case 'breakeven':\n            return Math.abs(gain) <= 1\n          default:\n            return true\n        }\n      })\n    }\n\n    if (filters.size !== 'all') {\n      filtered = filtered.filter(h => {\n        const value = h.position?.currentValue || 0\n        switch (filters.size) {\n          case 'large':\n            return value > 1000000\n          case 'medium':\n            return value >= 100000 && value <= 1000000\n          case 'small':\n            return value < 100000\n          default:\n            return true\n        }\n      })\n    }\n\n    if (filters.domicile !== 'all') {\n      filtered = filtered.filter(h =>\n        (h.domicile?.toLowerCase() || 'other') === filters.domicile\n      )\n    }\n\n    // Vintage filter\n    if (filters.vintage !== 'all') {\n      const now = new Date()\n      filtered = filtered.filter(h => {\n        const created = new Date(h.created_at)\n        const yearsOld = (now.getTime() - created.getTime()) / (1000 * 60 * 60 * 24 * 365)\n        switch (filters.vintage) {\n          case 'recent':\n            return yearsOld < 2\n          case 'mature':\n            return yearsOld >= 2 && yearsOld <= 5\n          case 'legacy':\n            return yearsOld > 5\n          default:\n            return true\n        }\n      })\n    }\n\n    // Value range filter\n    if (filters.minValue !== undefined || filters.maxValue !== undefined) {\n      filtered = filtered.filter(h => {\n        const value = h.position?.currentValue || 0\n        const min = filters.minValue ?? 0\n        const max = filters.maxValue ?? Infinity\n        return value >= min && value <= max\n      })\n    }\n\n    // Return range filter\n    if (filters.minReturn !== undefined || filters.maxReturn !== undefined) {\n      filtered = filtered.filter(h => {\n        const returnPct = h.position?.unrealizedGainPct || 0\n        const min = filters.minReturn ?? -Infinity\n        const max = filters.maxReturn ?? Infinity\n        return returnPct >= min && returnPct <= max\n      })\n    }\n\n    // Apply sorting\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'name_asc':\n          return a.name.localeCompare(b.name)\n        case 'name_desc':\n          return b.name.localeCompare(a.name)\n        case 'value_asc':\n          return (a.position?.currentValue || 0) - (b.position?.currentValue || 0)\n        case 'value_desc':\n          return (b.position?.currentValue || 0) - (a.position?.currentValue || 0)\n        case 'performance_asc':\n          return (a.position?.unrealizedGainPct || 0) - (b.position?.unrealizedGainPct || 0)\n        case 'performance_desc':\n          return (b.position?.unrealizedGainPct || 0) - (a.position?.unrealizedGainPct || 0)\n        case 'commitment_asc':\n          return (a.subscription?.commitment || 0) - (b.subscription?.commitment || 0)\n        case 'commitment_desc':\n          return (b.subscription?.commitment || 0) - (a.subscription?.commitment || 0)\n        case 'date_asc':\n          return new Date(a.created_at).getTime() - new Date(b.created_at).getTime()\n        case 'date_desc':\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\n        default:\n          return 0\n      }\n    })\n\n    return filtered\n  }, [holdings, filters, sortBy])\n\n  // Removed deal filtering - only showing holdings per user request\n\n  // Count active filters\n  const activeFiltersCount = Object.entries(filters).filter(\n    ([key, value]) => key !== 'search' && value !== 'all'\n  ).length + (filters.search ? 1 : 0)\n\n  // Clear filters\n  const handleClearFilters = () => {\n    setFilters({\n      search: '',\n      type: 'all',\n      status: 'all',\n      performance: 'all',\n      size: 'all',\n      vintage: 'all',\n      domicile: 'all'\n    })\n  }\n\n  // Handle export\n  const handleExport = useCallback(() => {\n    if (filteredHoldings.length === 0) return\n\n    // CSV headers\n    const headers = [\n      'Name',\n      'Type',\n      'Domicile',\n      'Status',\n      'Currency',\n      'Current Value',\n      'Cost Basis',\n      'Unrealized Gain',\n      'Unrealized Gain %',\n      'Units',\n      'Commitment',\n      'Created Date'\n    ]\n\n    // CSV rows\n    const rows = filteredHoldings.map(h => [\n      h.name,\n      h.type.replace(/_/g, ' '),\n      h.domicile || '',\n      deriveHoldingStatus(h),\n      h.currency,\n      h.position?.currentValue?.toFixed(2) || '0',\n      h.position?.costBasis?.toFixed(2) || '0',\n      h.position?.unrealizedGain?.toFixed(2) || '0',\n      h.position?.unrealizedGainPct?.toFixed(2) || '0',\n      h.position?.units?.toString() || '0',\n      h.subscription?.commitment?.toFixed(2) || '0',\n      new Date(h.created_at).toLocaleDateString()\n    ])\n\n    // Build CSV content\n    const csvContent = [\n      headers.join(','),\n      ...rows.map(row => row.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(','))\n    ].join('\\n')\n\n    // Create and download file\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' })\n    const link = document.createElement('a')\n    const url = URL.createObjectURL(blob)\n    link.setAttribute('href', url)\n    link.setAttribute('download', `portfolio-holdings-${new Date().toISOString().split('T')[0]}.csv`)\n    link.style.visibility = 'hidden'\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    URL.revokeObjectURL(url)\n  }, [filteredHoldings])\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"p-6 space-y-6\">\n        <Skeleton className=\"h-8 w-64\" />\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {Array.from({ length: 8 }).map((_, i) => (\n            <Skeleton key={i} className=\"h-32\" />\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  // Error state\n  if (error && !portfolioData) {\n    return (\n      <div className=\"p-6\">\n        <Alert>\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            {error}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleRefresh}\n              className=\"ml-4\"\n              disabled={isRefreshing}\n            >\n              <RefreshCw className={cn(\"h-4 w-4 mr-2\", isRefreshing && \"animate-spin\")} />\n              Retry\n            </Button>\n          </AlertDescription>\n        </Alert>\n      </div>\n    )\n  }\n\n  const totalResults = filteredHoldings.length\n\n  return (\n    <RealtimeHoldingsProvider\n      investorIds={investorIds}\n      onDataUpdate={() => handleRefresh()}\n      enableNotifications={true}\n      holdingsPath={holdingsPath}\n    >\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"p-4 sm:p-6 lg:p-8 space-y-6\">\n          {/* Page Header */}\n          <div className=\"flex flex-col sm:flex-row justify-between gap-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold\">Portfolio Holdings</h1>\n              <p className=\"text-muted-foreground mt-1\">\n                Complete overview of your investments\n              </p>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button \n                variant=\"default\" \n                size=\"sm\"\n                onClick={() => window.location.href = dealsPath}\n              >\n                <Target className=\"h-4 w-4 mr-2\" />\n                Explore Active Deals\n              </Button>\n            </div>\n          </div>\n\n          {/* Portfolio Dashboard */}\n          {portfolioData && (\n            <PortfolioDashboard\n              kpis={portfolioData.kpis}\n              trends={portfolioData.trends}\n              summary={portfolioData.summary}\n              asOfDate={portfolioData.asOfDate}\n              isLoading={isRefreshing}\n              onRefresh={handleRefresh}\n              onExport={handleExport}\n              vehicleBreakdown={portfolioData.vehicleBreakdown}\n              allocationData={allocationData}\n              performanceData={performanceData}\n              cashFlowData={cashFlowData}\n            />\n          )}\n\n          {/* Holdings Section */}\n          <div className=\"space-y-4\">\n            {/* Section Header */}\n            <div>\n              <h2 className=\"text-xl font-semibold\">Your Holdings</h2>\n              <p className=\"text-sm text-muted-foreground\">\n                {filteredHoldings.length} total holdings\n              </p>\n            </div>\n\n            {/* Filters */}\n            <ModernHoldingsFilters\n              filters={filters}\n              onFiltersChange={setFilters}\n              sortBy={sortBy}\n              onSortChange={setSortBy}\n              onClearFilters={handleClearFilters}\n              activeFiltersCount={activeFiltersCount}\n              totalResults={totalResults}\n            />\n\n            {/* Holdings Grid/List */}\n            {totalResults === 0 ? (\n              <Card className=\"border-dashed\">\n                <CardContent className=\"flex flex-col items-center justify-center py-16\">\n                  <AlertCircle className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                  <h3 className=\"text-lg font-semibold mb-2\">No holdings found</h3>\n                  <p className=\"text-muted-foreground text-center max-w-sm\">\n                    {activeFiltersCount > 0\n                      ? 'Try adjusting your filters to see more results'\n                      : 'Your holdings will appear here once investments are made'}\n                  </p>\n                  {activeFiltersCount > 0 && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={handleClearFilters}\n                      className=\"mt-4\"\n                    >\n                      Clear filters\n                    </Button>\n                  )}\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"grid gap-6 grid-cols-1 lg:grid-cols-2\">\n                {filteredHoldings.map((holding) => (\n                  <VehicleCard\n                    key={holding.id}\n                    holding={holding}\n                    detailsBasePath={detailsBasePath}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </RealtimeHoldingsProvider>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}