{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/components/members/members-management-tab.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport {\r\n  Users,\r\n  UserPlus,\r\n  Mail,\r\n  Clock,\r\n  CheckCircle2,\r\n  XCircle,\r\n  Trash2,\r\n  Copy,\r\n  PenTool,\r\n  Shield,\r\n  MoreHorizontal,\r\n  Loader2,\r\n  Send,\r\n  AlertCircle,\r\n  Edit,\r\n} from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table'\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select'\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { toast } from 'sonner'\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\r\n\r\nexport type EntityType = 'partner' | 'investor' | 'introducer' | 'commercial_partner' | 'lawyer' | 'arranger'\r\n\r\ninterface Member {\r\n  id: string\r\n  user_id: string\r\n  role: string\r\n  is_primary: boolean\r\n  can_sign?: boolean\r\n  signature_specimen_url?: string\r\n  created_at: string\r\n  profile?: {\r\n    display_name: string | null\r\n    email: string | null\r\n    avatar_url: string | null\r\n  }\r\n}\r\n\r\ninterface Invitation {\r\n  id: string\r\n  email: string\r\n  role: string\r\n  is_signatory: boolean\r\n  status: string\r\n  invited_by_name: string\r\n  expires_at: string\r\n  created_at: string\r\n  accepted_at?: string\r\n  invitation_token?: string\r\n}\r\n\r\ninterface MembersManagementTabProps {\r\n  entityType: EntityType\r\n  entityId: string\r\n  entityName: string\r\n  initialMembers?: Member[]\r\n  currentUserRole?: string\r\n  isCurrentUserPrimary?: boolean\r\n  canManageMembers?: boolean\r\n  showSignatoryOption?: boolean\r\n  onMembersChange?: () => void\r\n}\r\n\r\nconst ROLE_OPTIONS = [\r\n  { value: 'admin', label: 'Administrator' },\r\n  { value: 'member', label: 'Member' },\r\n  { value: 'viewer', label: 'Viewer' },\r\n]\r\n\r\nconst ENTITY_TYPE_LABELS: Record<EntityType, string> = {\r\n  partner: 'Partner',\r\n  investor: 'Investor Entity',\r\n  introducer: 'Introducer',\r\n  commercial_partner: 'Commercial Partner',\r\n  lawyer: 'Law Firm',\r\n  arranger: 'Arranger'\r\n}\r\n\r\nexport function MembersManagementTab({\r\n  entityType,\r\n  entityId,\r\n  entityName,\r\n  initialMembers = [],\r\n  currentUserRole = 'member',\r\n  isCurrentUserPrimary = false,\r\n  canManageMembers = false,\r\n  showSignatoryOption = true,\r\n  onMembersChange\r\n}: MembersManagementTabProps) {\r\n  const [members, setMembers] = useState<Member[]>(initialMembers)\r\n  const [invitations, setInvitations] = useState<Invitation[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [inviteDialogOpen, setInviteDialogOpen] = useState(false)\r\n  const [sending, setSending] = useState(false)\r\n  const [cancelling, setCancelling] = useState<string | null>(null)\r\n  const [userPermissions, setUserPermissions] = useState({\r\n    role: currentUserRole,\r\n    is_primary: isCurrentUserPrimary,\r\n    can_manage: canManageMembers\r\n  })\r\n\r\n  // Invite form state\r\n  const [inviteEmail, setInviteEmail] = useState('')\r\n  const [inviteRole, setInviteRole] = useState('member')\r\n  const [isSignatory, setIsSignatory] = useState(false)\r\n\r\n  // Edit member state\r\n  const [editDialogOpen, setEditDialogOpen] = useState(false)\r\n  const [editingMember, setEditingMember] = useState<Member | null>(null)\r\n  const [editRole, setEditRole] = useState('member')\r\n  const [editCanSign, setEditCanSign] = useState(false)\r\n  const [editIsPrimary, setEditIsPrimary] = useState(false)\r\n  const [saving, setSaving] = useState(false)\r\n\r\n  useEffect(() => {\r\n    fetchMembers()\r\n    fetchInvitations()\r\n  }, [entityType, entityId])\r\n\r\n  const fetchMembers = async () => {\r\n    try {\r\n      const response = await fetch(`/api/members?entity_type=${entityType}&entity_id=${entityId}`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setMembers(data.members || [])\r\n        if (data.current_user) {\r\n          setUserPermissions(data.current_user)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching members:', error)\r\n    }\r\n  }\r\n\r\n  const fetchInvitations = async () => {\r\n    try {\r\n      const response = await fetch(`/api/members/invite?entity_type=${entityType}&entity_id=${entityId}`)\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setInvitations(data.invitations || [])\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching invitations:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  // Open edit dialog with member data\r\n  const handleEditMember = (member: Member) => {\r\n    setEditingMember(member)\r\n    setEditRole(member.role)\r\n    setEditCanSign(member.can_sign || false)\r\n    setEditIsPrimary(member.is_primary)\r\n    setEditDialogOpen(true)\r\n  }\r\n\r\n  // Save member edits\r\n  const handleSaveEdit = async () => {\r\n    if (!editingMember) return\r\n\r\n    setSaving(true)\r\n    try {\r\n      const response = await fetch(`/api/members/${editingMember.user_id}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          entity_type: entityType,\r\n          entity_id: entityId,\r\n          role: editRole,\r\n          can_sign: editCanSign,\r\n          is_primary: editIsPrimary,\r\n        })\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        toast.error(data.error || 'Failed to update member')\r\n        return\r\n      }\r\n\r\n      toast.success('Member updated successfully')\r\n      setEditDialogOpen(false)\r\n      setEditingMember(null)\r\n      fetchMembers() // Refresh the list\r\n    } catch (error) {\r\n      console.error('Error updating member:', error)\r\n      toast.error('Failed to update member')\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  // Remove member\r\n  const handleRemoveMember = async (memberId: string) => {\r\n    if (!confirm('Are you sure you want to remove this member?')) return\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `/api/members/${memberId}?entity_type=${entityType}&entity_id=${entityId}`,\r\n        { method: 'DELETE' }\r\n      )\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        toast.error(data.error || 'Failed to remove member')\r\n        return\r\n      }\r\n\r\n      toast.success('Member removed successfully')\r\n      fetchMembers() // Refresh the list\r\n    } catch (error) {\r\n      console.error('Error removing member:', error)\r\n      toast.error('Failed to remove member')\r\n    }\r\n  }\r\n\r\n  const handleInvite = async () => {\r\n    if (!inviteEmail) {\r\n      toast.error('Please enter an email address')\r\n      return\r\n    }\r\n\r\n    setSending(true)\r\n\r\n    try {\r\n      const response = await fetch('/api/members/invite', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          entity_type: entityType,\r\n          entity_id: entityId,\r\n          email: inviteEmail,\r\n          role: inviteRole,\r\n          is_signatory: isSignatory\r\n        })\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        toast.error(data.error || 'Failed to send invitation')\r\n        return\r\n      }\r\n\r\n      // Show appropriate message based on whether CEO approval is required\r\n      if (data.requires_approval) {\r\n        toast.success(`Invitation request created for ${inviteEmail}. Awaiting CEO approval.`, {\r\n          description: 'The invitation email will be sent after approval.',\r\n          duration: 5000\r\n        })\r\n      } else {\r\n        toast.success(`Invitation sent to ${inviteEmail}`)\r\n      }\r\n      setInviteDialogOpen(false)\r\n      setInviteEmail('')\r\n      setInviteRole('member')\r\n      setIsSignatory(false)\r\n      fetchInvitations()\r\n\r\n      // Copy invite link to clipboard\r\n      if (data.invitation?.accept_url) {\r\n        await navigator.clipboard.writeText(data.invitation.accept_url)\r\n        toast.info('Invitation link copied to clipboard')\r\n      }\r\n    } catch (error) {\r\n      toast.error('Failed to send invitation')\r\n    } finally {\r\n      setSending(false)\r\n    }\r\n  }\r\n\r\n  const handleCancelInvitation = async (invitationId: string) => {\r\n    setCancelling(invitationId)\r\n\r\n    try {\r\n      const response = await fetch(`/api/members/invite?id=${invitationId}`, {\r\n        method: 'DELETE'\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json()\r\n        toast.error(data.error || 'Failed to cancel invitation')\r\n        return\r\n      }\r\n\r\n      toast.success('Invitation cancelled')\r\n      fetchInvitations()\r\n    } catch (error) {\r\n      toast.error('Failed to cancel invitation')\r\n    } finally {\r\n      setCancelling(null)\r\n    }\r\n  }\r\n\r\n  const copyInviteLink = async (token: string) => {\r\n    const url = `${window.location.origin}/invitation/accept?token=${token}`\r\n    await navigator.clipboard.writeText(url)\r\n    toast.success('Invitation link copied!')\r\n  }\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric'\r\n    })\r\n  }\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'pending':\r\n        return <Badge variant=\"outline\" className=\"bg-yellow-500/10 text-yellow-600 border-yellow-500/30\"><Clock className=\"w-3 h-3 mr-1\" />Pending</Badge>\r\n      case 'pending_approval':\r\n        return <Badge variant=\"outline\" className=\"bg-orange-500/10 text-orange-600 border-orange-500/30\"><Clock className=\"w-3 h-3 mr-1\" />Awaiting CEO Approval</Badge>\r\n      case 'accepted':\r\n        return <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-600 border-green-500/30\"><CheckCircle2 className=\"w-3 h-3 mr-1\" />Accepted</Badge>\r\n      case 'expired':\r\n        return <Badge variant=\"outline\" className=\"bg-gray-500/10 text-gray-600 border-gray-500/30\"><Clock className=\"w-3 h-3 mr-1\" />Expired</Badge>\r\n      case 'cancelled':\r\n        return <Badge variant=\"outline\" className=\"bg-red-500/10 text-red-600 border-red-500/30\"><XCircle className=\"w-3 h-3 mr-1\" />Cancelled</Badge>\r\n      default:\r\n        return <Badge variant=\"outline\">{status}</Badge>\r\n    }\r\n  }\r\n\r\n  const pendingInvitations = invitations.filter(i => ['pending', 'pending_approval'].includes(i.status))\r\n  const pastInvitations = invitations.filter(i => !['pending', 'pending_approval'].includes(i.status))\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <Users className=\"h-5 w-5\" />\r\n            Team Members\r\n          </h3>\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Manage who has access to {entityName}\r\n          </p>\r\n        </div>\r\n        {userPermissions.can_manage && (\r\n          <Button onClick={() => setInviteDialogOpen(true)}>\r\n            <UserPlus className=\"h-4 w-4 mr-2\" />\r\n            Invite Member\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"members\" className=\"w-full\" id=\"members-management-tabs\">\r\n        <TabsList>\r\n          <TabsTrigger value=\"members\" className=\"flex items-center gap-2\">\r\n            <Users className=\"h-4 w-4\" />\r\n            Members ({members.length})\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"invitations\" className=\"flex items-center gap-2\">\r\n            <Mail className=\"h-4 w-4\" />\r\n            Invitations ({pendingInvitations.length})\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* Active Members Tab */}\r\n        <TabsContent value=\"members\" className=\"mt-4\">\r\n          <Card>\r\n            <CardContent className=\"p-0\">\r\n              {members.length === 0 ? (\r\n                <div className=\"py-12 text-center\">\r\n                  <Users className=\"h-10 w-10 mx-auto text-muted-foreground mb-3\" />\r\n                  <p className=\"text-muted-foreground\">No members yet</p>\r\n                  {userPermissions.can_manage && (\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      className=\"mt-4\"\r\n                      onClick={() => setInviteDialogOpen(true)}\r\n                    >\r\n                      <UserPlus className=\"h-4 w-4 mr-2\" />\r\n                      Invite First Member\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Member</TableHead>\r\n                      <TableHead>Role</TableHead>\r\n                      <TableHead>Status</TableHead>\r\n                      <TableHead>Joined</TableHead>\r\n                      {userPermissions.can_manage && <TableHead className=\"w-10\"></TableHead>}\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {members.map((member) => (\r\n                      <TableRow key={member.id}>\r\n                        <TableCell>\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-8 h-8 rounded-full bg-muted flex items-center justify-center\">\r\n                              {member.profile?.avatar_url ? (\r\n                                <img\r\n                                  src={member.profile.avatar_url}\r\n                                  alt=\"\"\r\n                                  className=\"w-8 h-8 rounded-full object-cover\"\r\n                                />\r\n                              ) : (\r\n                                <span className=\"text-sm font-medium\">\r\n                                  {(member.profile?.display_name || member.profile?.email || '?')[0].toUpperCase()}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"font-medium\">\r\n                                {member.profile?.display_name || 'Unknown User'}\r\n                              </p>\r\n                              <p className=\"text-sm text-muted-foreground\">\r\n                                {member.profile?.email}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Badge variant=\"outline\" className=\"capitalize\">\r\n                              {member.role}\r\n                            </Badge>\r\n                            {member.is_primary && (\r\n                              <Badge variant=\"secondary\">\r\n                                <Shield className=\"w-3 h-3 mr-1\" />\r\n                                Primary\r\n                              </Badge>\r\n                            )}\r\n                            {member.can_sign && (\r\n                              <Badge variant=\"outline\" className=\"bg-blue-500/10 text-blue-600 border-blue-500/30\">\r\n                                <PenTool className=\"w-3 h-3 mr-1\" />\r\n                                Signatory\r\n                              </Badge>\r\n                            )}\r\n                          </div>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {member.can_sign && !member.signature_specimen_url ? (\r\n                            <Badge variant=\"outline\" className=\"bg-yellow-500/10 text-yellow-600 border-yellow-500/30\">\r\n                              <AlertCircle className=\"w-3 h-3 mr-1\" />\r\n                              Needs Signature\r\n                            </Badge>\r\n                          ) : (\r\n                            <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-600 border-green-500/30\">\r\n                              <CheckCircle2 className=\"w-3 h-3 mr-1\" />\r\n                              Active\r\n                            </Badge>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell className=\"text-muted-foreground\">\r\n                          {formatDate(member.created_at)}\r\n                        </TableCell>\r\n                        {userPermissions.can_manage && (\r\n                          <TableCell>\r\n                            <DropdownMenu>\r\n                              <DropdownMenuTrigger asChild>\r\n                                <Button variant=\"ghost\" size=\"sm\">\r\n                                  <MoreHorizontal className=\"h-4 w-4\" />\r\n                                </Button>\r\n                              </DropdownMenuTrigger>\r\n                              <DropdownMenuContent align=\"end\">\r\n                                <DropdownMenuItem onClick={() => handleEditMember(member)}>\r\n                                  <Edit className=\"h-4 w-4 mr-2\" />\r\n                                  Edit Member\r\n                                </DropdownMenuItem>\r\n                                {!member.is_primary && (\r\n                                  <DropdownMenuItem\r\n                                    className=\"text-destructive\"\r\n                                    onClick={() => handleRemoveMember(member.user_id)}\r\n                                  >\r\n                                    <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                                    Remove Member\r\n                                  </DropdownMenuItem>\r\n                                )}\r\n                              </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                          </TableCell>\r\n                        )}\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Invitations Tab */}\r\n        <TabsContent value=\"invitations\" className=\"mt-4 space-y-4\">\r\n          {/* Pending Invitations */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"text-base\">Pending Invitations</CardTitle>\r\n              <CardDescription>\r\n                Invitations waiting to be accepted\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"p-0\">\r\n              {loading ? (\r\n                <div className=\"py-8 text-center\">\r\n                  <Loader2 className=\"h-6 w-6 animate-spin mx-auto text-muted-foreground\" />\r\n                </div>\r\n              ) : pendingInvitations.length === 0 ? (\r\n                <div className=\"py-8 text-center text-muted-foreground\">\r\n                  <Mail className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\r\n                  <p>No pending invitations</p>\r\n                </div>\r\n              ) : (\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Email</TableHead>\r\n                      <TableHead>Role</TableHead>\r\n                      <TableHead>Invited By</TableHead>\r\n                      <TableHead>Expires</TableHead>\r\n                      <TableHead className=\"w-10\"></TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {pendingInvitations.map((invitation) => (\r\n                      <TableRow key={invitation.id}>\r\n                        <TableCell>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <span>{invitation.email}</span>\r\n                            {invitation.is_signatory && (\r\n                              <Badge variant=\"outline\" className=\"bg-blue-500/10 text-blue-600 border-blue-500/30\">\r\n                                <PenTool className=\"w-3 h-3 mr-1\" />\r\n                                Signatory\r\n                              </Badge>\r\n                            )}\r\n                          </div>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Badge variant=\"outline\" className=\"capitalize\">\r\n                            {invitation.role}\r\n                          </Badge>\r\n                        </TableCell>\r\n                        <TableCell className=\"text-muted-foreground\">\r\n                          {invitation.invited_by_name}\r\n                        </TableCell>\r\n                        <TableCell className=\"text-muted-foreground\">\r\n                          {formatDate(invitation.expires_at)}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"ghost\" size=\"sm\">\r\n                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"end\">\r\n                              {invitation.invitation_token && (\r\n                                <DropdownMenuItem onClick={() => copyInviteLink(invitation.invitation_token!)}>\r\n                                  <Copy className=\"h-4 w-4 mr-2\" />\r\n                                  Copy Link\r\n                                </DropdownMenuItem>\r\n                              )}\r\n                              {userPermissions.can_manage && (\r\n                                <DropdownMenuItem\r\n                                  className=\"text-destructive\"\r\n                                  onClick={() => handleCancelInvitation(invitation.id)}\r\n                                  disabled={cancelling === invitation.id}\r\n                                >\r\n                                  {cancelling === invitation.id ? (\r\n                                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                                  ) : (\r\n                                    <XCircle className=\"h-4 w-4 mr-2\" />\r\n                                  )}\r\n                                  Cancel Invitation\r\n                                </DropdownMenuItem>\r\n                              )}\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Past Invitations */}\r\n          {pastInvitations.length > 0 && (\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"text-base\">Invitation History</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"p-0\">\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Email</TableHead>\r\n                      <TableHead>Status</TableHead>\r\n                      <TableHead>Date</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {pastInvitations.slice(0, 10).map((invitation) => (\r\n                      <TableRow key={invitation.id}>\r\n                        <TableCell>{invitation.email}</TableCell>\r\n                        <TableCell>{getStatusBadge(invitation.status)}</TableCell>\r\n                        <TableCell className=\"text-muted-foreground\">\r\n                          {formatDate(invitation.accepted_at || invitation.created_at)}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      {/* Invite Dialog */}\r\n      <Dialog open={inviteDialogOpen} onOpenChange={setInviteDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Invite Team Member</DialogTitle>\r\n            <DialogDescription>\r\n              Send an invitation to join {entityName}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"email\">Email Address</Label>\r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"colleague@example.com\"\r\n                value={inviteEmail}\r\n                onChange={(e) => setInviteEmail(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"role\">Role</Label>\r\n              <Select value={inviteRole} onValueChange={setInviteRole}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select role\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {ROLE_OPTIONS.map((option) => (\r\n                    <SelectItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {showSignatoryOption && (\r\n              <div className=\"flex items-center space-x-2 pt-2\">\r\n                <Checkbox\r\n                  id=\"signatory\"\r\n                  checked={isSignatory}\r\n                  onCheckedChange={(checked) => setIsSignatory(checked === true)}\r\n                />\r\n                <Label htmlFor=\"signatory\" className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <PenTool className=\"h-4 w-4\" />\r\n                  Authorized Signatory\r\n                  <span className=\"text-xs text-muted-foreground\">(can sign documents)</span>\r\n                </Label>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setInviteDialogOpen(false)}\r\n              disabled={sending}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleInvite} disabled={sending || !inviteEmail}>\r\n              {sending ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Sending...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Send className=\"h-4 w-4 mr-2\" />\r\n                  Send Invitation\r\n                </>\r\n              )}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Edit Member Dialog */}\r\n      <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Edit Team Member</DialogTitle>\r\n            <DialogDescription>\r\n              Update {editingMember?.profile?.display_name || editingMember?.profile?.email || 'member'} settings\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-4 py-4\">\r\n            {/* Role */}\r\n            <div className=\"space-y-2\">\r\n              <Label>Role</Label>\r\n              <Select value={editRole} onValueChange={setEditRole}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select role\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {ROLE_OPTIONS.map(option => (\r\n                    <SelectItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            {/* Signatory Option */}\r\n            {showSignatoryOption && (\r\n              <div className=\"flex items-center space-x-2 pt-2\">\r\n                <Checkbox\r\n                  id=\"edit-signatory\"\r\n                  checked={editCanSign}\r\n                  onCheckedChange={(checked) => setEditCanSign(checked === true)}\r\n                />\r\n                <Label htmlFor=\"edit-signatory\" className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <PenTool className=\"h-4 w-4\" />\r\n                  Authorized Signatory\r\n                  <span className=\"text-xs text-muted-foreground\">(can sign documents)</span>\r\n                </Label>\r\n              </div>\r\n            )}\r\n\r\n            {/* Primary Contact Option (only if user is already primary) */}\r\n            {userPermissions.is_primary && !editingMember?.is_primary && (\r\n              <div className=\"flex items-center space-x-2 pt-2\">\r\n                <Checkbox\r\n                  id=\"edit-primary\"\r\n                  checked={editIsPrimary}\r\n                  onCheckedChange={(checked) => setEditIsPrimary(checked === true)}\r\n                />\r\n                <Label htmlFor=\"edit-primary\" className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <Shield className=\"h-4 w-4\" />\r\n                  Make Primary Contact\r\n                  <span className=\"text-xs text-muted-foreground\">(transfers primary status)</span>\r\n                </Label>\r\n              </div>\r\n            )}\r\n\r\n            {editingMember?.is_primary && (\r\n              <div className=\"text-sm text-muted-foreground bg-muted/50 p-3 rounded-lg\">\r\n                <Shield className=\"h-4 w-4 inline mr-2\" />\r\n                This member is the primary contact. To change primary status,\r\n                select another member and make them primary.\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setEditDialogOpen(false)}\r\n              disabled={saving}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleSaveEdit} disabled={saving}>\r\n              {saving ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Saving...\r\n                </>\r\n              ) : (\r\n                'Save Changes'\r\n              )}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}