{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { createClient as createSupabaseClient } from '@supabase/supabase-js'\nimport { cookies } from 'next/headers'\n\nexport const createClient = async () => {\n  const cookieStore = await cookies()\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) => {\n              cookieStore.set(name, value, options)\n            })\n          } catch (error) {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    }\n  )\n}\n\n// Server client with service role for admin operations\n// Uses raw supabase-js client which properly bypasses RLS with service role\nexport const createServiceClient = () => {\n  return createSupabaseClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.SUPABASE_SERVICE_ROLE_KEY!,\n    {\n      auth: {\n        autoRefreshToken: false,\n        persistSession: false,\n      },\n    }\n  )\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AACA;;;;AAEO,MAAM,eAAe;IAC1B,MAAM,cAAc,MAAM,IAAA,mKAAO;IAEjC,OAAO,IAAA,wNAAkB,sUAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;wBAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;oBAC/B;gBACF,EAAE,OAAO,OAAO;gBACd,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ;AAIO,MAAM,sBAAsB;IACjC,OAAO,IAAA,gOAAoB,gFAEzB,QAAQ,GAAG,CAAC,yBAAyB,EACrC;QACE,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;IACF;AAEJ"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghilesmoussaoui/Desktop/Versotech/versotech-portal/src/app/api/admin/unified-users/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport { createClient, createServiceClient } from '@/lib/supabase/server'\r\n\r\nexport type UnifiedUser = {\r\n  id: string\r\n  entityId: string\r\n  entityType: 'investor' | 'lawyer' | 'partner' | 'commercial_partner' | 'introducer' | 'arranger'\r\n  entityName: string\r\n  userName: string\r\n  userEmail: string\r\n  userRole: string\r\n  isPrimary: boolean\r\n  canSign: boolean\r\n  status: 'active' | 'inactive' | 'pending'\r\n  kycStatus: string | null\r\n  country: string | null\r\n  createdAt: string\r\n}\r\n\r\nexport type UnifiedUsersResponse = {\r\n  success: boolean\r\n  data?: UnifiedUser[]\r\n  stats?: {\r\n    total: number\r\n    investors: number\r\n    lawyers: number\r\n    partners: number\r\n    commercialPartners: number\r\n    introducers: number\r\n    arrangers: number\r\n    active: number\r\n    pending: number\r\n  }\r\n  error?: string\r\n}\r\n\r\nexport async function GET(): Promise<NextResponse<UnifiedUsersResponse>> {\r\n  try {\r\n    const supabase = await createClient()\r\n\r\n    // Verify authentication\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n    if (authError || !user) {\r\n      return NextResponse.json({ success: false, error: 'Unauthorized' }, { status: 401 })\r\n    }\r\n\r\n    // Check if user is staff or CEO\r\n    const { data: profile } = await supabase\r\n      .from('profiles')\r\n      .select('role')\r\n      .eq('id', user.id)\r\n      .single()\r\n\r\n    const isStaffOrCeo = profile?.role?.startsWith('staff_') || profile?.role === 'ceo'\r\n    if (!isStaffOrCeo) {\r\n      return NextResponse.json({ success: false, error: 'Forbidden' }, { status: 403 })\r\n    }\r\n\r\n    // Use service client to bypass RLS for comprehensive data fetch\r\n    const serviceClient = createServiceClient()\r\n    const allUsers: UnifiedUser[] = []\r\n\r\n    // 1. Fetch Investors (simple query first, then fetch users separately if needed)\r\n    const { data: investors, error: investorsError } = await serviceClient\r\n      .from('investors')\r\n      .select('id, legal_name, type, kyc_status, country, status, created_at')\r\n      .order('created_at', { ascending: false })\r\n\r\n    // Separately fetch investor_users with profiles for those that have users\r\n    const { data: investorUsersData } = await serviceClient\r\n      .from('investor_users')\r\n      .select(`\r\n        investor_id,\r\n        user_id,\r\n        role,\r\n        is_primary,\r\n        can_sign,\r\n        profiles:profiles!investor_users_user_id_fkey (\r\n          id,\r\n          display_name,\r\n          email\r\n        )\r\n      `)\r\n\r\n    // Build a map of investor_id -> users for quick lookup\r\n    const investorUsersMap = new Map<string, Array<{\r\n      user_id: string\r\n      role: string | null\r\n      is_primary: boolean\r\n      can_sign: boolean\r\n      profiles: { id: string; display_name: string | null; email: string | null } | null\r\n    }>>()\r\n\r\n    if (investorUsersData) {\r\n      for (const iu of investorUsersData) {\r\n        const existing = investorUsersMap.get(iu.investor_id) || []\r\n        existing.push({\r\n          user_id: iu.user_id,\r\n          role: iu.role,\r\n          is_primary: iu.is_primary || false,\r\n          can_sign: iu.can_sign || false,\r\n          profiles: Array.isArray(iu.profiles) ? iu.profiles[0] : iu.profiles\r\n        })\r\n        investorUsersMap.set(iu.investor_id, existing)\r\n      }\r\n    }\r\n\r\n    console.log('[unified-users] Investors query result:', {\r\n      hasError: !!investorsError,\r\n      errorDetails: investorsError ? JSON.stringify(investorsError) : null,\r\n      dataLength: investors?.length ?? 'null',\r\n      firstItem: investors?.[0] ? JSON.stringify(investors[0]).substring(0, 200) : 'null'\r\n    })\r\n\r\n    if (investorsError) {\r\n      console.error('[unified-users] Investors error:', JSON.stringify(investorsError))\r\n    } else if (investors) {\r\n      for (const inv of investors) {\r\n        const users = investorUsersMap.get(inv.id) || []\r\n        if (users.length === 0) {\r\n          allUsers.push({\r\n            id: `investor-${inv.id}-entity`,\r\n            entityId: inv.id,\r\n            entityType: 'investor',\r\n            entityName: inv.legal_name || 'Unnamed Investor',\r\n            userName: 'No users assigned',\r\n            userEmail: '-',\r\n            userRole: inv.type || 'individual',  // Entity type: individual/entity/institutional\r\n            isPrimary: false,\r\n            canSign: false,\r\n            status: inv.status === 'active' ? 'active' : 'inactive',\r\n            kycStatus: inv.kyc_status,\r\n            country: inv.country,\r\n            createdAt: inv.created_at\r\n          })\r\n        } else {\r\n          for (const iu of users) {\r\n            allUsers.push({\r\n              id: `investor-${inv.id}-${iu.user_id}`,\r\n              entityId: inv.id,\r\n              entityType: 'investor',\r\n              entityName: inv.legal_name || 'Unnamed Investor',\r\n              userName: iu.profiles?.display_name || 'Unknown User',\r\n              userEmail: iu.profiles?.email || '-',\r\n              userRole: inv.type || 'individual',  // Entity type: individual/entity/institutional (was incorrectly showing iu.role)\r\n              isPrimary: iu.is_primary || false,\r\n              canSign: iu.can_sign || false,\r\n              status: inv.status === 'active' ? 'active' : 'inactive',\r\n              kycStatus: inv.kyc_status,\r\n              country: inv.country,\r\n              createdAt: inv.created_at\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 2. Fetch Lawyers (simple query without nested joins)\r\n    const { data: lawyers, error: lawyersError } = await serviceClient\r\n      .from('lawyers')\r\n      .select('id, firm_name, display_name, type, kyc_status, country, is_active, created_at')\r\n      .order('created_at', { ascending: false })\r\n\r\n    // Fetch lawyer_users separately\r\n    const { data: lawyerUsersData } = await serviceClient\r\n      .from('lawyer_users')\r\n      .select(`\r\n        lawyer_id,\r\n        user_id,\r\n        role,\r\n        is_primary,\r\n        can_sign,\r\n        profiles:profiles!lawyer_users_user_fk (id, display_name, email)\r\n      `)\r\n\r\n    const lawyerUsersMap = new Map<string, any[]>()\r\n    if (lawyerUsersData) {\r\n      for (const lu of lawyerUsersData) {\r\n        const existing = lawyerUsersMap.get(lu.lawyer_id) || []\r\n        existing.push({\r\n          user_id: lu.user_id,\r\n          role: lu.role,\r\n          is_primary: lu.is_primary || false,\r\n          can_sign: lu.can_sign || false,\r\n          profiles: Array.isArray(lu.profiles) ? lu.profiles[0] : lu.profiles\r\n        })\r\n        lawyerUsersMap.set(lu.lawyer_id, existing)\r\n      }\r\n    }\r\n\r\n    console.log('[unified-users] Lawyers query result:', {\r\n      hasError: !!lawyersError,\r\n      errorDetails: lawyersError ? JSON.stringify(lawyersError) : null,\r\n      dataLength: lawyers?.length ?? 'null'\r\n    })\r\n\r\n    if (lawyersError) {\r\n      console.error('[unified-users] Lawyers error:', JSON.stringify(lawyersError))\r\n    } else if (lawyers) {\r\n      for (const law of lawyers) {\r\n        const users = lawyerUsersMap.get(law.id) || []\r\n        if (users.length === 0) {\r\n          allUsers.push({\r\n            id: `lawyer-${law.id}-entity`,\r\n            entityId: law.id,\r\n            entityType: 'lawyer',\r\n            entityName: law.firm_name || law.display_name || 'Unnamed Firm',\r\n            userName: 'No users assigned',\r\n            userEmail: '-',\r\n            userRole: law.type || 'entity',  // Entity type: individual/entity (was static 'lawyer')\r\n            isPrimary: false,\r\n            canSign: false,\r\n            status: law.is_active ? 'active' : 'inactive',\r\n            kycStatus: law.kyc_status,\r\n            country: law.country,\r\n            createdAt: law.created_at\r\n          })\r\n        } else {\r\n          for (const lu of users) {\r\n            allUsers.push({\r\n              id: `lawyer-${law.id}-${lu.user_id}`,\r\n              entityId: law.id,\r\n              entityType: 'lawyer',\r\n              entityName: law.firm_name || law.display_name || 'Unnamed Firm',\r\n              userName: lu.profiles?.display_name || 'Unknown User',\r\n              userEmail: lu.profiles?.email || '-',\r\n              userRole: law.type || 'entity',  // Entity type: individual/entity (was incorrectly showing lu.role)\r\n              isPrimary: lu.is_primary || false,\r\n              canSign: lu.can_sign || false,\r\n              status: law.is_active ? 'active' : 'inactive',\r\n              kycStatus: law.kyc_status,\r\n              country: law.country,\r\n              createdAt: law.created_at\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 3. Fetch Partners (simple query without nested joins)\r\n    const { data: partners, error: partnersError } = await serviceClient\r\n      .from('partners')\r\n      .select('id, name, legal_name, type, kyc_status, country, status, created_at')\r\n      .order('created_at', { ascending: false })\r\n\r\n    // Fetch partner_users separately\r\n    const { data: partnerUsersData } = await serviceClient\r\n      .from('partner_users')\r\n      .select(`\r\n        partner_id,\r\n        user_id,\r\n        role,\r\n        is_primary,\r\n        can_sign,\r\n        profiles:profiles!partner_users_user_fk (id, display_name, email)\r\n      `)\r\n\r\n    const partnerUsersMap = new Map<string, any[]>()\r\n    if (partnerUsersData) {\r\n      for (const pu of partnerUsersData) {\r\n        const existing = partnerUsersMap.get(pu.partner_id) || []\r\n        existing.push({\r\n          user_id: pu.user_id,\r\n          role: pu.role,\r\n          is_primary: pu.is_primary || false,\r\n          can_sign: pu.can_sign || false,\r\n          profiles: Array.isArray(pu.profiles) ? pu.profiles[0] : pu.profiles\r\n        })\r\n        partnerUsersMap.set(pu.partner_id, existing)\r\n      }\r\n    }\r\n\r\n    console.log('[unified-users] Partners query result:', {\r\n      hasError: !!partnersError,\r\n      errorDetails: partnersError ? JSON.stringify(partnersError) : null,\r\n      dataLength: partners?.length ?? 'null'\r\n    })\r\n\r\n    if (partnersError) {\r\n      console.error('[unified-users] Partners error:', JSON.stringify(partnersError))\r\n    } else if (partners) {\r\n      for (const p of partners) {\r\n        const users = partnerUsersMap.get(p.id) || []\r\n        if (users.length === 0) {\r\n          allUsers.push({\r\n            id: `partner-${p.id}-entity`,\r\n            entityId: p.id,\r\n            entityType: 'partner',\r\n            entityName: p.name || p.legal_name || 'Unnamed Partner',\r\n            userName: 'No users assigned',\r\n            userEmail: '-',\r\n            userRole: p.type || 'entity',  // Entity type: individual/entity/institutional (was static 'partner')\r\n            isPrimary: false,\r\n            canSign: false,\r\n            status: p.status === 'active' ? 'active' : 'inactive',\r\n            kycStatus: p.kyc_status,\r\n            country: p.country,\r\n            createdAt: p.created_at\r\n          })\r\n        } else {\r\n          for (const pu of users) {\r\n            allUsers.push({\r\n              id: `partner-${p.id}-${pu.user_id}`,\r\n              entityId: p.id,\r\n              entityType: 'partner',\r\n              entityName: p.name || p.legal_name || 'Unnamed Partner',\r\n              userName: pu.profiles?.display_name || 'Unknown User',\r\n              userEmail: pu.profiles?.email || '-',\r\n              userRole: p.type || 'entity',  // Entity type: individual/entity/institutional (was incorrectly showing pu.role)\r\n              isPrimary: pu.is_primary || false,\r\n              canSign: pu.can_sign || false,\r\n              status: p.status === 'active' ? 'active' : 'inactive',\r\n              kycStatus: p.kyc_status,\r\n              country: p.country,\r\n              createdAt: p.created_at\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 4. Fetch Commercial Partners (simple query without nested joins)\r\n    const { data: commercialPartners, error: cpError } = await serviceClient\r\n      .from('commercial_partners')\r\n      .select('id, name, legal_name, type, kyc_status, country, status, created_at')\r\n      .order('created_at', { ascending: false })\r\n\r\n    // Fetch commercial_partner_users separately\r\n    const { data: cpUsersData } = await serviceClient\r\n      .from('commercial_partner_users')\r\n      .select(`\r\n        commercial_partner_id,\r\n        user_id,\r\n        role,\r\n        is_primary,\r\n        can_sign,\r\n        profiles:profiles!commercial_partner_users_user_fk (id, display_name, email)\r\n      `)\r\n\r\n    const cpUsersMap = new Map<string, any[]>()\r\n    if (cpUsersData) {\r\n      for (const cpu of cpUsersData) {\r\n        const existing = cpUsersMap.get(cpu.commercial_partner_id) || []\r\n        existing.push({\r\n          user_id: cpu.user_id,\r\n          role: cpu.role,\r\n          is_primary: cpu.is_primary || false,\r\n          can_sign: cpu.can_sign || false,\r\n          profiles: Array.isArray(cpu.profiles) ? cpu.profiles[0] : cpu.profiles\r\n        })\r\n        cpUsersMap.set(cpu.commercial_partner_id, existing)\r\n      }\r\n    }\r\n\r\n    console.log('[unified-users] Commercial Partners query result:', {\r\n      hasError: !!cpError,\r\n      errorDetails: cpError ? JSON.stringify(cpError) : null,\r\n      dataLength: commercialPartners?.length ?? 'null'\r\n    })\r\n\r\n    if (cpError) {\r\n      console.error('[unified-users] Commercial Partners error:', JSON.stringify(cpError))\r\n    } else if (commercialPartners) {\r\n      for (const cp of commercialPartners) {\r\n        const users = cpUsersMap.get(cp.id) || []\r\n        if (users.length === 0) {\r\n          allUsers.push({\r\n            id: `commercial_partner-${cp.id}-entity`,\r\n            entityId: cp.id,\r\n            entityType: 'commercial_partner',\r\n            entityName: cp.name || cp.legal_name || 'Unnamed Commercial Partner',\r\n            userName: 'No users assigned',\r\n            userEmail: '-',\r\n            userRole: cp.type || 'entity',  // Entity type: individual/entity (was static 'commercial_partner')\r\n            isPrimary: false,\r\n            canSign: false,\r\n            status: cp.status === 'active' ? 'active' : 'inactive',\r\n            kycStatus: cp.kyc_status,\r\n            country: cp.country,\r\n            createdAt: cp.created_at\r\n          })\r\n        } else {\r\n          for (const cpu of users) {\r\n            allUsers.push({\r\n              id: `commercial_partner-${cp.id}-${cpu.user_id}`,\r\n              entityId: cp.id,\r\n              entityType: 'commercial_partner',\r\n              entityName: cp.name || cp.legal_name || 'Unnamed Commercial Partner',\r\n              userName: cpu.profiles?.display_name || 'Unknown User',\r\n              userEmail: cpu.profiles?.email || '-',\r\n              userRole: cp.type || 'entity',  // Entity type: individual/entity (was incorrectly showing cpu.role)\r\n              isPrimary: cpu.is_primary || false,\r\n              canSign: cpu.can_sign || false,\r\n              status: cp.status === 'active' ? 'active' : 'inactive',\r\n              kycStatus: cp.kyc_status,\r\n              country: cp.country,\r\n              createdAt: cp.created_at\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 5. Fetch Introducers\r\n    const { data: introducers, error: introducersError } = await serviceClient\r\n      .from('introducers')\r\n      .select(`\r\n        id,\r\n        legal_name,\r\n        type,\r\n        email,\r\n        contact_name,\r\n        status,\r\n        created_at\r\n      `)\r\n      .order('created_at', { ascending: false })\r\n\r\n    if (introducersError) {\r\n      console.error('[unified-users] Introducers error:', JSON.stringify(introducersError))\r\n    } else if (introducers) {\r\n      for (const intro of introducers) {\r\n        allUsers.push({\r\n          id: `introducer-${intro.id}-entity`,\r\n          entityId: intro.id,\r\n          entityType: 'introducer',\r\n          entityName: intro.legal_name || 'Unnamed Introducer',\r\n          userName: intro.contact_name || 'No contact',\r\n          userEmail: intro.email || '-',\r\n          userRole: intro.type || 'individual',  // Entity type: individual/entity (was static 'introducer')\r\n          isPrimary: true,\r\n          canSign: false,\r\n          status: intro.status === 'active' ? 'active' : 'inactive',\r\n          kycStatus: null,\r\n          country: null,\r\n          createdAt: intro.created_at\r\n        })\r\n      }\r\n    }\r\n\r\n    // 6. Fetch Arrangers\r\n    const { data: arrangers, error: arrangersError } = await serviceClient\r\n      .from('arranger_entities')\r\n      .select(`\r\n        id,\r\n        legal_name,\r\n        type,\r\n        email,\r\n        status,\r\n        kyc_status,\r\n        created_at\r\n      `)\r\n      .order('created_at', { ascending: false })\r\n\r\n    if (arrangersError) {\r\n      console.error('[unified-users] Arrangers error:', JSON.stringify(arrangersError))\r\n    } else if (arrangers) {\r\n      for (const arr of arrangers) {\r\n        allUsers.push({\r\n          id: `arranger-${arr.id}-entity`,\r\n          entityId: arr.id,\r\n          entityType: 'arranger',\r\n          entityName: arr.legal_name || 'Unnamed Arranger',\r\n          userName: 'Entity Contact',\r\n          userEmail: arr.email || '-',\r\n          userRole: arr.type || 'entity',  // Entity type: individual/entity (was static 'arranger')\r\n          isPrimary: true,\r\n          canSign: false,\r\n          status: arr.status === 'active' ? 'active' : 'inactive',\r\n          kycStatus: arr.kyc_status,\r\n          country: null,\r\n          createdAt: arr.created_at\r\n        })\r\n      }\r\n    }\r\n\r\n    // Final log before stats\r\n    console.log('[unified-users] Final allUsers summary:', {\r\n      total: allUsers.length,\r\n      byType: {\r\n        investor: allUsers.filter(u => u.entityType === 'investor').length,\r\n        lawyer: allUsers.filter(u => u.entityType === 'lawyer').length,\r\n        partner: allUsers.filter(u => u.entityType === 'partner').length,\r\n        commercial_partner: allUsers.filter(u => u.entityType === 'commercial_partner').length,\r\n        introducer: allUsers.filter(u => u.entityType === 'introducer').length,\r\n        arranger: allUsers.filter(u => u.entityType === 'arranger').length,\r\n      }\r\n    })\r\n\r\n    // Calculate stats\r\n    const stats = {\r\n      total: allUsers.length,\r\n      investors: allUsers.filter(u => u.entityType === 'investor').length,\r\n      lawyers: allUsers.filter(u => u.entityType === 'lawyer').length,\r\n      partners: allUsers.filter(u => u.entityType === 'partner').length,\r\n      commercialPartners: allUsers.filter(u => u.entityType === 'commercial_partner').length,\r\n      introducers: allUsers.filter(u => u.entityType === 'introducer').length,\r\n      arrangers: allUsers.filter(u => u.entityType === 'arranger').length,\r\n      active: allUsers.filter(u => u.status === 'active').length,\r\n      pending: allUsers.filter(u => u.status === 'pending' || u.kycStatus === 'pending').length\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: allUsers,\r\n      stats\r\n    })\r\n\r\n  } catch (error: any) {\r\n    console.error('[unified-users] Error:', {\r\n      message: error?.message,\r\n      details: error?.details,\r\n      hint: error?.hint,\r\n      code: error?.code\r\n    })\r\n    return NextResponse.json(\r\n      { success: false, error: error?.message || 'Failed to fetch users' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}